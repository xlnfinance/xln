import"../chunks/DsnmJJEf.js";import{i as qe}from"../chunks/j-R1GFZz.js";import{d as Qe,w as We,g as ne,e as F,s as C,c as da,o as Ct}from"../chunks/D5GmG_LJ.js";import{I as qt,h as Je,ak as Ia,K as ua,D as pa,C as za,i as e,a5 as At,F as Ca,H as Aa,G as na,J as Ht,S as yt,al as Na,ap as La,M as Wt,P as ja,O as ut,at as fa,ah as ea,_ as le,aM as ra,aN as la,Q as ma,R as Da,aO as Nt,aP as Ot,aQ as ha,aR as Lt,aS as Ma,an as Pa,aT as qa,as as Ha,aU as Oa,a3 as Fa,aV as ga,W as Ra,aW as Va,aX as ya,T as Xa,aY as Ja,aZ as Ua,Y as Ba,a_ as Wa,e as m,V as Ga,a$ as Ya,x as He,b0 as ke,b1 as st,m as Le,o as we,p,y as Oe,$ as K,t as $,z as n,B as l,A as i,v as ae,b2 as lt,b3 as Pe,aL as De,j as ge,b4 as _a,b5 as Ze,aK as Ka,b6 as Qa,b7 as Za,n as es,b8 as ts}from"../chunks/OXESmFBH.js";import{p as Se,i as Q,b as ba,u as oa,s as gt,a as Ne}from"../chunks/BQRKTwto.js";import{r as ht,a as as,b as wa,s as Ge}from"../chunks/BiOPpIbk.js";function Be(t,s){return s}function ss(t,s,a){for(var o=t.items,v=[],r=s.length,d=0;d<r;d++)qa(s[d].e,v,!0);var u=r>0&&v.length===0&&a!==null;if(u){var h=a.parentNode;Ha(h),h.append(a),o.clear(),Ye(t,s[0].prev,s[r-1].next)}Oa(v,()=>{for(var k=0;k<r;k++){var g=s[k];u||(o.delete(g.k),Ye(t,g.prev,g.next)),ha(g.e,!u)}})}function Ue(t,s,a,o,v,r=null){var d=t,u={flags:s,items:new Map,first:null},h=(s&ga)!==0;if(h){var k=t;d=Je?qt(Ia(k)):k.appendChild(ua())}Je&&pa();var g=null,c=!1,x=new Map,_=At(()=>{var A=a();return ea(A)?A:A==null?[]:fa(A)}),f,E;function S(){is(E,f,u,x,d,v,s,o,a),r!==null&&(f.length===0?g?ma(g):g=Wt(()=>r(d)):g!==null&&Da(g,()=>{g=null}))}za(()=>{E??=Fa,f=e(_);var A=f.length;if(c&&A===0)return;c=A===0;let L=!1;if(Je){var P=Ca(d)===Aa;P!==(A===0)&&(d=na(),qt(d),Ht(!1),L=!0)}if(Je){for(var I=null,M,y=0;y<A;y++){if(yt.nodeType===Na&&yt.data===La){d=yt,L=!0,Ht(!1);break}var j=f[y],U=o(j,y);M=Gt(yt,u,I,null,j,U,y,v,s,a),u.items.set(U,M),I=M}A>0&&qt(na())}if(Je)A===0&&r&&(g=Wt(()=>r(d)));else if(ja()){var Z=new Set,H=ut;for(y=0;y<A;y+=1){j=f[y],U=o(j,y);var w=u.items.get(U)??x.get(U);w?(s&(Lt|Nt))!==0&&xa(w,j,y,s):(M=Gt(null,u,null,null,j,U,y,v,s,a,!0),x.set(U,M)),Z.add(U)}for(const[O,b]of u.items)Z.has(O)||H.skipped_effects.add(b.e);H.add_callback(S)}else S();L&&Ht(!0),e(_)}),Je&&(d=yt)}function is(t,s,a,o,v,r,d,u,h){var k=(d&Va)!==0,g=(d&(Lt|Nt))!==0,c=s.length,x=a.items,_=a.first,f=_,E,S=null,A,L=[],P=[],I,M,y,j;if(k)for(j=0;j<c;j+=1)I=s[j],M=u(I,j),y=x.get(M),y!==void 0&&(y.a?.measure(),(A??=new Set).add(y));for(j=0;j<c;j+=1){if(I=s[j],M=u(I,j),y=x.get(M),y===void 0){var U=o.get(M);if(U!==void 0){o.delete(M),x.set(M,U);var Z=S?S.next:f;Ye(a,S,U),Ye(a,U,Z),Ft(U,Z,v),S=U}else{var H=f?f.e.nodes_start:v;S=Gt(H,a,S,S===null?a.first:S.next,I,M,j,r,d,h)}x.set(M,S),L=[],P=[],f=S.next;continue}if(g&&xa(y,I,j,d),(y.e.f&Ot)!==0&&(ma(y.e),k&&(y.a?.unfix(),(A??=new Set).delete(y))),y!==f){if(E!==void 0&&E.has(y)){if(L.length<P.length){var w=P[0],O;S=w.prev;var b=L[0],N=L[L.length-1];for(O=0;O<L.length;O+=1)Ft(L[O],w,v);for(O=0;O<P.length;O+=1)E.delete(P[O]);Ye(a,b.prev,N.next),Ye(a,S,b),Ye(a,N,w),f=w,S=N,j-=1,L=[],P=[]}else E.delete(y),Ft(y,f,v),Ye(a,y.prev,y.next),Ye(a,y,S===null?a.first:S.next),Ye(a,S,y),S=y;continue}for(L=[],P=[];f!==null&&f.k!==M;)(f.e.f&Ot)===0&&(E??=new Set).add(f),P.push(f),f=f.next;if(f===null)continue;y=f}L.push(y),S=y,f=y.next}if(f!==null||E!==void 0){for(var T=E===void 0?[]:fa(E);f!==null;)(f.e.f&Ot)===0&&T.push(f),f=f.next;var R=T.length;if(R>0){var ue=(d&ga)!==0&&c===0?v:null;if(k){for(j=0;j<R;j+=1)T[j].a?.measure();for(j=0;j<R;j+=1)T[j].a?.fix()}ss(a,T,ue)}}k&&Ra(()=>{if(A!==void 0)for(y of A)y.a?.apply()}),t.first=a.first&&a.first.e,t.last=S&&S.e;for(var se of o.values())ha(se.e);o.clear()}function xa(t,s,a,o){(o&Lt)!==0&&la(t.v,s),(o&Nt)!==0?la(t.i,a):t.i=a}function Gt(t,s,a,o,v,r,d,u,h,k,g){var c=(h&Lt)!==0,x=(h&Ma)===0,_=c?x?le(v,!1,!1):ra(v):v,f=(h&Nt)===0?d:ra(d),E={i:f,v:_,k:r,a:null,e:null,prev:a,next:o};try{if(t===null){var S=document.createDocumentFragment();S.append(t=ua())}return E.e=Wt(()=>u(t,_,f,k),Je),E.e.prev=a&&a.e,E.e.next=o&&o.e,a===null?g||(s.first=E):(a.next=E,a.e.next=E.e),o!==null&&(o.prev=E,o.e.prev=E.e),E}finally{}}function Ft(t,s,a){for(var o=t.next?t.next.e.nodes_start:a,v=s?s.e.nodes_start:a,r=t.e.nodes_start;r!==null&&r!==o;){var d=Pa(r);v.before(r),r=d}}function Ye(t,s,a){s===null?t.first=a:(s.next=a,s.e.next=a&&a.e),a!==null&&(a.prev=s,a.e.prev=s&&s.e)}function ns(t,s,a,o,v){Je&&pa();var r=s.$$slots?.[a],d=!1;r===!0&&(r=s.children,d=!0),r===void 0||r(t,d?()=>o:o)}const va=[...` 	
\r\fÂ \v\uFEFF`];function rs(t,s,a){var o=t==null?"":""+t;if(s&&(o=o?o+" "+s:s),a){for(var v in a)if(a[v])o=o?o+" "+v:v;else if(o.length)for(var r=v.length,d=0;(d=o.indexOf(v,d))>=0;){var u=d+r;(d===0||va.includes(o[d-1]))&&(u===o.length||va.includes(o[u]))?o=(d===0?"":o.substring(0,d))+o.substring(u+1):d=u}}return o===""?null:o}function ls(t,s){return t==null?null:String(t)}function Ee(t,s,a,o,v,r){var d=t.__className;if(Je||d!==a||d===void 0){var u=rs(a,o,r);(!Je||u!==t.getAttribute("class"))&&(u==null?t.removeAttribute("class"):t.className=u),t.__className=a}else if(r&&v!==r)for(var h in r){var k=!!r[h];(v==null||k!==!!v[h])&&t.classList.toggle(h,k)}return r}function ta(t,s,a,o){var v=t.__style;if(Je||v!==s){var r=ls(s);(!Je||r!==t.getAttribute("style"))&&(r==null?t.removeAttribute("style"):t.style.cssText=r),t.__style=s}return o}function Ta(t,s,a=!1){if(t.multiple){if(s==null)return;if(!ea(s))return Ja();for(var o of t.options)o.selected=s.includes(bt(o));return}for(o of t.options){var v=bt(o);if(Ua(v,s)){o.selected=!0;return}}(!a||s!==void 0)&&(t.selectedIndex=-1)}function os(t){var s=new MutationObserver(()=>{Ta(t,t.__value)});s.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ba(()=>{s.disconnect()})}function _t(t,s,a=s){var o=!0;ya(t,"change",v=>{var r=v?"[selected]":":checked",d;if(t.multiple)d=[].map.call(t.querySelectorAll(r),bt);else{var u=t.querySelector(r)??t.querySelector("option:not([disabled])");d=u&&bt(u)}a(d)}),Xa(()=>{var v=s();if(Ta(t,v,o),o&&v===void 0){var r=t.querySelector(":checked");r!==null&&(v=bt(r),a(v))}t.__value=v,o=!1}),os(t)}function bt(t){return"__value"in t?t.__value:t.value}function kt(t,s,a=s){var o=Wa(),v=new WeakSet;ya(t,"input",r=>{var d=r?t.defaultValue:t.value;if(d=Rt(t)?Vt(d):d,a(d),ut!==null&&v.add(ut),o&&d!==(d=s())){var u=t.selectionStart,h=t.selectionEnd;t.value=d??"",h!==null&&(t.selectionStart=u,t.selectionEnd=Math.min(h,t.value.length))}}),(Je&&t.defaultValue!==t.value||m(s)==null&&t.value)&&(a(Rt(t)?Vt(t.value):t.value),ut!==null&&v.add(ut)),Ga(()=>{var r=s();if(t===document.activeElement){var d=Ya??ut;if(v.has(d))return}Rt(t)&&r===Vt(t.value)||t.type==="date"&&!r&&!t.value||r!==t.value&&(t.value=r??"")})}function Rt(t){var s=t.type;return s==="number"||s==="range"}function Vt(t){return t===""?null:+t}function vs(t){return function(...s){var a=s[0];return a.stopPropagation(),t?.apply(this,s)}}function Sa(t,s){var a=t.$$events?.[s.type],o=ea(a)?a.slice():a==null?[]:[a];for(var v of o)v.call(this,s)}let St=null;async function Xt(){return St||(St=await import(new URL("/xln/server.js",window.location.origin).href),St)}const at=We(null),$t=We(!0),It=We(null),cs=Qe(at,t=>t?.replicas||new Map),mt=Qe(at,t=>t?.history||[]),ds=Qe(at,t=>t?.height||0),vt={async initialize(){try{$t.set(!0),It.set(null);const t=await Xt(),s=await t.main();return s.history=s.history||t.getHistory?.()||[],at.set(s),$t.set(!1),console.log("âœ… XLN Environment initialized"),s}catch(t){const s=t instanceof Error?t.message:"Failed to initialize";throw It.set(s),$t.set(!1),console.error("âŒ XLN initialization failed:",t),t}},async getXLN(){return await Xt()},async runDemo(){try{const t=await Xt(),s=at.get()||await this.initialize();console.log("ğŸ¯ Running XLN demo...");const a=await t.runDemo(s);return at.set(a),console.log("âœ… Demo completed successfully"),a}catch(t){throw console.error("âŒ Demo failed:",t),It.set(`Demo failed: ${t.message}`),t}}},Yt={theme:"dark",dropdownMode:"signer-first",serverDelay:0,componentStates:{}},je=We(Yt),Jt="xln-settings",Ut="xlnComponentStates",wt={loadFromStorage(){try{if(typeof localStorage>"u")return;const t=localStorage.getItem(Jt);if(t){const a=JSON.parse(t);je.update(o=>({...o,...a}))}const s=localStorage.getItem(Ut);if(s){const a=JSON.parse(s);je.update(o=>({...o,componentStates:a}))}console.log("âš™ï¸ Settings loaded from localStorage")}catch(t){console.error("âŒ Failed to load settings:",t),je.set(Yt)}},saveToStorage(){try{if(typeof localStorage>"u")return;const t=ne(je),{componentStates:s,...a}=t;localStorage.setItem(Jt,JSON.stringify(a)),localStorage.setItem(Ut,JSON.stringify(s)),console.log("ğŸ’¾ Settings saved to localStorage")}catch(t){console.error("âŒ Failed to save settings:",t)}},setTheme(t){je.update(s=>({...s,theme:t})),this.saveToStorage(),typeof document<"u"&&document.documentElement.setAttribute("data-theme",t)},toggleTheme(){const t=ne(je);this.setTheme(t.theme==="dark"?"light":"dark")},setDropdownMode(t){je.update(s=>({...s,dropdownMode:t})),this.saveToStorage()},toggleDropdownMode(){const t=ne(je);this.setDropdownMode(t.dropdownMode==="signer-first"?"entity-first":"signer-first")},setServerDelay(t){je.update(s=>({...s,serverDelay:t})),this.saveToStorage()},getComponentState(t){const s=ne(je);return s.componentStates[t]!==void 0?s.componentStates[t]:t.includes("consensus-")||t.includes("chat-")},setComponentState(t,s){je.update(a=>({...a,componentStates:{...a.componentStates,[t]:s}})),this.saveToStorage()},toggleComponentState(t){const s=this.getComponentState(t);this.setComponentState(t,!s)},resetToDefaults(){je.set(Yt),this.saveToStorage(),typeof localStorage<"u"&&(localStorage.removeItem(Jt),localStorage.removeItem(Ut))},initialize(){this.loadFromStorage();const t=ne(je);typeof document<"u"&&document.documentElement.setAttribute("data-theme",t.theme)}},Fe=We([]),rt=We(null),dt=We(1),ca="xln-entity-tabs",ot={loadFromStorage(){try{if(typeof localStorage>"u")return;const t=localStorage.getItem(ca);if(t){const s=JSON.parse(t);Fe.set(s.tabs||[]),rt.set(s.activeTabId||null),dt.set(s.nextTabId||1),console.log("ğŸ“ Tabs loaded from localStorage:",s)}}catch(t){console.error("âŒ Failed to load tabs:",t),Fe.set([]),rt.set(null),dt.set(1)}},saveToStorage(){try{if(typeof localStorage>"u")return;const t={tabs:ne(Fe),activeTabId:ne(rt),nextTabId:ne(dt)};localStorage.setItem(ca,JSON.stringify(t)),console.log("ğŸ’¾ Tabs saved to localStorage:",t)}catch(t){console.error("âŒ Failed to save tabs:",t)}},generateTabId(){const t=ne(dt);return dt.set(t+1),`tab-${t}`},addTab(t,s,a){const v=ne(Fe).length+1,r={id:this.generateTabId(),title:`Entity Panel ${v}`,jurisdiction:a||"Ethereum",signer:s||"",entityId:t||"",isActive:!1};return Fe.update(d=>[...d,r]),this.setActiveTab(r.id),this.saveToStorage(),console.log("â• Added new panel:",r),r},closeTab(t){const s=ne(Fe);if(console.log("âŒ Closing tab:",t),s.length<=1){console.log("âš ï¸ Cannot close last tab");return}if(s.findIndex(r=>r.id===t)===-1)return;const o=s.filter(r=>r.id!==t);Fe.set(o),ne(rt)===t&&this.setActiveTab(o[0].id),this.saveToStorage()},setActiveTab(t){console.log("ğŸ¯ Setting active tab:",t),Fe.update(s=>s.map(a=>({...a,isActive:a.id===t}))),rt.set(t),this.saveToStorage()},getActiveTab(){const t=ne(Fe),s=ne(rt);return t.find(a=>a.id===s)||null},updateTab(t,s){Fe.update(a=>a.map(o=>o.id===t?{...o,...s}:o)),this.saveToStorage()},getTab(t){return ne(Fe).find(a=>a.id===t)||null},initializeDefaultTabs(){ne(Fe).length===0&&(this.addTab(),this.addTab(),this.addTab())},clearAllTabs(){Fe.set([]),rt.set(null),dt.set(1),this.saveToStorage()}},us={id:"quick-start",title:"Quick Start: Create Your First Entity",description:"Get started with XLN in under 60 seconds. Create Alice's entity and send your first transaction.",difficulty:"beginner",estimatedTime:"1 minute",steps:[{id:"navigate",title:"Welcome to XLN",description:"You're now in the XLN dashboard. Let's create your first entity!",action:"wait",target:"#formationTabContent",explanation:"The formation tab is where you create new entities. Think of entities as smart wallets or organizations."},{id:"select-entity-type",title:"Choose Entity Type",description:'Select "lazy" entity type for quick setup',action:"select",target:"#entityTypeSelect",value:"lazy",explanation:"Lazy entities are perfect for testing - they work without on-chain registration."},{id:"name-entity",title:"Name Your Entity",description:"Give your entity a memorable name",action:"fill",target:"#entityNameInput",value:"My First Entity",explanation:"Entity names help you identify them in the interface. Choose something meaningful!"},{id:"select-validator",title:"Choose Validator",description:"Select Alice as your validator (the signer who can authorize transactions)",action:"click",target:'[data-validator-id="0"] .validator-selector',explanation:"Validators are the accounts that can sign transactions for this entity. Alice is a pre-configured test account."},{id:"pick-alice",title:"Pick Alice",description:"Click on alice.eth from the dropdown",action:"click",target:'#validatorOptions0 [data-signer="alice"]',explanation:"Alice is one of the test accounts available in XLN for demonstration purposes."},{id:"set-threshold",title:"Set Voting Threshold",description:"Keep threshold at 1 (Alice can act alone)",action:"fill",target:"#thresholdSlider",value:"1",explanation:"Threshold determines how many validators must agree for transactions. 1 means Alice has full control."},{id:"create-entity",title:"Create Entity",description:"Click the Create Entity button to launch your entity!",action:"click",target:'button[type="submit"]',explanation:"This creates the entity and imports it into all relevant validator accounts."},{id:"verify-creation",title:"Entity Created!",description:"Your entity is now live and ready for transactions",action:"wait",target:".entity-panel",explanation:"ğŸ‰ Congratulations! You've created your first XLN entity. You can now send messages, create proposals, and interact with other entities."}]},ps={id:"complete-workflow",title:"Complete Entity & Channel Workflow",description:"Master the full XLN experience: create entities, demonstrate governance, and prepare for channels.",difficulty:"intermediate",estimatedTime:"15 minutes",steps:[{id:"setup",title:"Navigate to XLN Dashboard",description:"Load the XLN interface and ensure the environment is ready",action:"navigate",target:"/",explanation:"The XLN dashboard provides entity formation, channel management, and consensus monitoring all in one interface."},{id:"alice-entity-type",title:"Create Alice's Simple Entity",description:'Select lazy entity type and name it "Alice Personal Wallet"',action:"select",target:"#entityTypeSelect",value:"lazy",explanation:"This creates a simple 1-of-1 entity where Alice has full control. Perfect for personal wallets or testing."},{id:"alice-entity-name",title:"Name Alice's Entity",description:'Enter "Alice Personal Wallet" as the entity name',action:"fill",target:"#entityNameInput",value:"Alice Personal Wallet"},{id:"alice-validator",title:"Set Alice as Validator",description:"Select Alice as the validator for her personal entity",action:"click",target:'[data-validator-id="0"] .validator-selector'},{id:"alice-threshold",title:"Set Threshold to 1",description:"Set voting threshold to 1 (Alice can act alone)",action:"fill",target:"#thresholdSlider",value:"1"},{id:"create-alice-entity",title:"Create Alice's Entity",description:"Click Create Entity to launch Alice's personal wallet",action:"click",target:'button[type="submit"]',explanation:"Entity creation involves cryptographic consensus. Alice's entity is now live and can receive transactions."},{id:"add-validators",title:"Create Multi-Signature Hub",description:"Add more validators for the hub entity",action:"click",target:'button[data-action="add-validator"]',explanation:"Multi-signature entities provide enhanced security. Any 2 of the 3 validators can authorize transactions."},{id:"hub-name",title:"Name the Hub",description:'Enter "Payment Hub ABC" as the hub name',action:"fill",target:"#entityNameInput",value:"Payment Hub ABC"},{id:"hub-threshold",title:"Set Hub Threshold",description:"Set threshold to 2 (requires 2 out of 3 signatures)",action:"fill",target:"#thresholdSlider",value:"2"},{id:"create-hub",title:"Create Hub Entity",description:"Click Create Entity to launch the multi-sig hub",action:"click",target:'button[type="submit"]',explanation:"The hub is now operational with 3 validator replicas. Each validator maintains their own view of the entity state."},{id:"configure-panels",title:"Configure Entity Panels",description:"Set up panels to show different validator views",action:"click",target:".entity-panel:first-child .unified-dropdown-btn",explanation:"Each panel can show a different signer's view of any entity they participate in."},{id:"send-chat",title:"Send Chat Message",description:"Demonstrate entity communication with a chat message",action:"fill",target:".controls-section textarea",value:"Hello from Alice! Ready to create channels.",explanation:"Chat messages are cryptographically signed and become part of the entity's permanent state."},{id:"create-proposal",title:"Create Channel Opening Proposal",description:"Propose to open a payment channel with the hub",action:"select",target:".controls-dropdown",value:"proposal",explanation:"Proposals enable democratic decision-making. This proposal would authorize opening a payment channel."},{id:"multi-sig-voting",title:"Demonstrate Multi-Signature Voting",description:"Other validators vote on the proposal",action:"click",target:'.vote-button[data-choice="yes"]',explanation:"With multiple YES votes, the proposal reaches quorum and will be executed automatically."},{id:"time-machine",title:"Use Time Machine",description:"Review entity history using the time machine controls",action:"click",target:'.time-btn-compact[data-action="back"]',explanation:"The time machine allows you to replay the entire entity history, perfect for audits and debugging."},{id:"completion",title:"Tutorial Complete!",description:"You've mastered entity creation and governance. Ready for channels!",action:"wait",target:".entity-panels-container",explanation:"ğŸ‰ Tutorial complete! You've created entities, demonstrated multi-signature governance, and are ready for channel operations."}]},fs={id:"multi-sig-governance",title:"Multi-Signature Governance",description:"Learn democratic decision-making with multi-signature entities.",difficulty:"intermediate",estimatedTime:"10 minutes",steps:[{id:"create-multi-sig",title:"Create Multi-Sig Entity",description:"Set up a 2-of-3 entity with Alice, Bob, and Carol",action:"select",target:"#entityTypeSelect",value:"lazy",explanation:"Multi-signature entities require multiple validators to agree before executing transactions."}]},zt=[us,ps,fs];function Kt(t){return zt.find(s=>s.id===t)}const Qt=We(!1),pt=We(null),Ke=We(0),Et=We({}),xt=Qe(pt,t=>t?Kt(t):null),Zt=Qe([xt,Ke],([t,s])=>t?.steps[s]||null);Qe([xt,Ke],([t,s])=>t?(s+1)/t.steps.length*100:0);class ms{highlightedElement=null;startTutorial(s){const a=Kt(s);if(!a){console.error(`Tutorial not found: ${s}`);return}pt.set(s),Ke.set(0),Qt.set(!0),console.log(`ğŸ¯ Starting tutorial: ${a.title}`),this.applyCurrentStep()}nextStep(){const s=ne(xt),a=ne(Ke);s&&(a<s.steps.length-1?(Ke.update(o=>o+1),this.applyCurrentStep()):this.completeTutorial())}prevStep(){ne(Ke)>0&&(Ke.update(a=>a-1),this.applyCurrentStep())}executeStepAction(){const s=ne(Zt);if(!s)return;const a=document.querySelector(s.target);if(!a){console.warn(`ğŸ¯ Tutorial target not found: ${s.target}`);return}switch(s.action){case"click":a.click();break;case"fill":(a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement)&&(a.value=s.value||"",a.dispatchEvent(new Event("input",{bubbles:!0})));break;case"select":a instanceof HTMLSelectElement&&(a.value=s.value||"",a.dispatchEvent(new Event("change",{bubbles:!0})));break;case"navigate":s.value&&(window.location.href=s.value);break}setTimeout(()=>this.nextStep(),1500)}applyCurrentStep(){const s=ne(Zt);if(!s)return;if(this.clearHighlight(),s.target&&s.action!=="wait"){const v=document.querySelector(s.target);v&&(this.highlightElement(v),v.scrollIntoView({behavior:"smooth",block:"center"}))}const a=ne(pt),o=ne(Ke);a&&(Et.update(v=>({...v,[a]:o})),this.saveProgressToStorage())}highlightElement(s){s.classList.add("tutorial-highlight"),this.highlightedElement=s}clearHighlight(){this.highlightedElement&&(this.highlightedElement.classList.remove("tutorial-highlight"),this.highlightedElement=null)}completeTutorial(){const s=ne(pt);console.log(`ğŸ‰ Tutorial completed: ${s}`),this.endTutorial(),this.showCompletionMessage()}endTutorial(){Qt.set(!1),pt.set(null),Ke.set(0),this.clearHighlight()}goToStep(s){const a=ne(xt);!a||s<0||s>=a.steps.length||(Ke.set(s),this.applyCurrentStep())}getTutorialProgress(s){return ne(Et)[s]||0}isTutorialCompleted(s){const a=Kt(s);return a?this.getTutorialProgress(s)>=a.steps.length-1:!1}saveProgressToStorage(){const s=ne(Et);localStorage.setItem("xln-tutorial-progress",JSON.stringify(s))}loadProgressFromStorage(){try{const s=localStorage.getItem("xln-tutorial-progress");if(s){const a=JSON.parse(s);Et.set(a)}}catch(s){console.warn("Failed to load tutorial progress:",s)}}showCompletionMessage(){console.log("ğŸ‰ Tutorial completed! Great job!"),window.dispatchEvent(new CustomEvent("tutorial-completed",{detail:{tutorialId:ne(pt)}}))}getAvailableTutorials(){return zt}getTutorialsByDifficulty(s){return zt.filter(a=>a.difficulty===s)}}const ft=new ms;ft.loadProgressFromStorage();var hs=$('<div class="progress-container svelte-19yv7yv"><div class="progress-bar svelte-19yv7yv"><div class="progress-fill svelte-19yv7yv"></div></div> <span class="progress-text svelte-19yv7yv"> </span></div>'),gs=$('<div><div class="tutorial-card-header svelte-19yv7yv"><div class="tutorial-difficulty svelte-19yv7yv"><span class="difficulty-emoji svelte-19yv7yv"> </span> <span class="difficulty-text svelte-19yv7yv"> </span></div> <div class="tutorial-time svelte-19yv7yv"> </div></div> <div class="tutorial-card-content svelte-19yv7yv"><h3 class="tutorial-card-title svelte-19yv7yv"> </h3> <p class="tutorial-card-description svelte-19yv7yv"> </p> <!></div> <div class="tutorial-card-actions svelte-19yv7yv"><button><!></button> <div class="tutorial-steps-count svelte-19yv7yv"> </div></div></div>'),ys=$('<div class="tutorial-launcher-overlay svelte-19yv7yv"><div class="tutorial-launcher-backdrop svelte-19yv7yv"></div> <div class="tutorial-launcher-panel svelte-19yv7yv"><div class="launcher-header svelte-19yv7yv"><div class="launcher-title svelte-19yv7yv"><h2 class="svelte-19yv7yv">ğŸ¯ XLN Interactive Tutorials</h2> <p class="svelte-19yv7yv">Learn XLN step-by-step with guided tutorials</p></div> <button class="launcher-close-btn svelte-19yv7yv">Ã—</button></div> <div class="difficulty-filter svelte-19yv7yv"><label class="svelte-19yv7yv">Filter by difficulty:</label> <select class="difficulty-select svelte-19yv7yv"><option>All Tutorials</option><option>ğŸŸ¢ Beginner</option><option>ğŸŸ¡ Intermediate</option><option>ğŸ”´ Advanced</option></select></div> <div class="tutorials-grid svelte-19yv7yv"></div> <div class="launcher-footer svelte-19yv7yv"><div class="footer-note svelte-19yv7yv">ğŸ’¡ Tutorials are interactive and guide you through the actual XLN interface</div></div></div></div>');function _s(t,s){He(s,!1);const a=le();let o=Se(s,"isVisible",12,!1),v=le("all");function r(_){ft.startTutorial(_.id),o(!1)}function d(){o(!1)}function u(_){switch(_){case"beginner":return"ğŸŸ¢";case"intermediate":return"ğŸŸ¡";case"advanced":return"ğŸ”´";default:return"âšª"}}function h(_){return ft.getTutorialProgress(_)}function k(_){return ft.isTutorialCompleted(_)}ke(()=>(e(v),ft),()=>{K(a,e(v)==="all"?zt:ft.getTutorialsByDifficulty(e(v)))}),st(),qe();var g=Le(),c=we(g);{var x=_=>{var f=ys(),E=n(f),S=l(E,2),A=n(S),L=l(n(A),2);i(A);var P=l(A,2),I=l(n(P),2);ae(()=>{e(v),lt(()=>{})});var M=n(I);M.value=M.__value="all";var y=l(M);y.value=y.__value="beginner";var j=l(y);j.value=j.__value="intermediate";var U=l(j);U.value=U.__value="advanced",i(I),i(P);var Z=l(P,2);Ue(Z,5,()=>e(a),Be,(H,w)=>{var O=gs();let b;var N=n(O),T=n(N),R=n(T),ue=n(R,!0);i(R);var se=l(R,2),ee=n(se,!0);i(se),i(T);var W=l(T,2),q=n(W);i(W),i(N);var G=l(N,2),z=n(G),Y=n(z,!0);i(z);var pe=l(z,2),_e=n(pe,!0);i(pe);var Te=l(pe,2);{var te=ve=>{var fe=hs(),ye=n(fe),be=n(ye);i(ye);var X=l(ye,2),me=n(X);i(X),i(fe),ae((Ce,$e)=>{ta(be,`width: ${Ce??""}%`),C(me,`${$e??""} / ${e(w),m(()=>e(w).steps.length)??""} steps`)},[()=>(e(w),m(()=>h(e(w).id)/e(w).steps.length*100)),()=>(e(w),m(()=>h(e(w).id)+1))]),p(ve,fe)};Q(Te,ve=>{e(w),m(()=>h(e(w).id)>0)&&ve(te)})}i(G);var V=l(G,2),re=n(V);let B;var D=n(re);{var he=ve=>{var fe=De("âœ… Restart Tutorial");p(ve,fe)},de=ve=>{var fe=Le(),ye=we(fe);{var be=me=>{var Ce=De("â–¶ï¸ Resume Tutorial");p(me,Ce)},X=me=>{var Ce=De("ğŸš€ Start Tutorial");p(me,Ce)};Q(ye,me=>{e(w),m(()=>h(e(w).id)>0)?me(be):me(X,!1)},!0)}p(ve,fe)};Q(D,ve=>{e(w),m(()=>k(e(w).id))?ve(he):ve(de,!1)})}i(re);var ce=l(re,2),oe=n(ce);i(ce),i(V),i(O),ae((ve,fe,ye)=>{b=Ee(O,1,"tutorial-card svelte-19yv7yv",null,b,ve),C(ue,fe),C(ee,(e(w),m(()=>e(w).difficulty))),C(q,`â±ï¸ ${e(w),m(()=>e(w).estimatedTime)??""}`),C(Y,(e(w),m(()=>e(w).title))),C(_e,(e(w),m(()=>e(w).description))),B=Ee(re,1,"tutorial-start-btn svelte-19yv7yv",null,B,ye),C(oe,`${e(w),m(()=>e(w).steps.length)??""} steps`)},[()=>({completed:k(e(w).id)}),()=>(e(w),m(()=>u(e(w).difficulty))),()=>({resume:h(e(w).id)>0})]),F("click",re,()=>r(e(w))),p(H,O)}),i(Z),Pe(2),i(S),i(f),F("click",E,d),F("click",L,d),_t(I,()=>e(v),H=>K(v,H)),p(_,f)};Q(c,_=>{o()&&_(x)})}p(t,g),Oe()}var bs=$('<div class="tutorial-explanation svelte-apjo2k"><span class="tutorial-explanation-icon svelte-apjo2k">ğŸ’¡</span> <span class="svelte-apjo2k"> </span></div>'),ws=$('<div class="tutorial-action-hint svelte-apjo2k"><button class="tutorial-action-btn svelte-apjo2k"><!></button></div>'),xs=$('<div class="tutorial-overlay svelte-apjo2k"><div class="tutorial-backdrop svelte-apjo2k"></div> <div class="tutorial-panel svelte-apjo2k"><div class="tutorial-header svelte-apjo2k"><div class="tutorial-progress-container svelte-apjo2k"><div class="tutorial-progress-bar svelte-apjo2k"><div class="tutorial-progress-fill svelte-apjo2k"></div></div> <span class="tutorial-step-counter svelte-apjo2k"> </span></div> <button class="tutorial-close-btn svelte-apjo2k">Ã—</button></div> <div class="tutorial-content svelte-apjo2k"><h3 class="tutorial-title svelte-apjo2k"> </h3> <p class="tutorial-description svelte-apjo2k"> </p> <!> <!></div> <div class="tutorial-navigation svelte-apjo2k"><button class="tutorial-nav-btn tutorial-prev-btn svelte-apjo2k">â† Previous</button> <button class="tutorial-skip-btn svelte-apjo2k">Skip Tutorial</button> <button class="tutorial-nav-btn tutorial-next-btn svelte-apjo2k"> </button></div></div></div>');function Ts(t,s){He(s,!1);const a=le(),o=le();let v=Se(s,"isVisible",12,!1),r=Se(s,"currentStep",12,0),d=Se(s,"totalSteps",8,0),u=Se(s,"tutorialData",24,()=>[]);const h=da();let k=le(),g=null;Ct(()=>{console.log("ğŸ¯ Tutorial overlay mounted")});function c(){r()<d()-1&&(oa(r),E(),h("stepChanged",{step:r(),stepData:e(a)}))}function x(){r()>0&&(oa(r,-1),E(),h("stepChanged",{step:r(),stepData:e(a)}))}function _(){v(!1),S(),h("close")}function f(){if(!e(a)?.targetSelector||!e(a)?.action)return;const I=document.querySelector(e(a).targetSelector);if(!I){console.warn(`ğŸ¯ Tutorial target not found: ${e(a).targetSelector}`);return}switch(e(a).action){case"click":I.click();break;case"fill":(I instanceof HTMLInputElement||I instanceof HTMLTextAreaElement)&&(I.value=e(a).actionData||"",I.dispatchEvent(new Event("input",{bubbles:!0})));break;case"select":I instanceof HTMLSelectElement&&(I.value=e(a).actionData||"",I.dispatchEvent(new Event("change",{bubbles:!0})));break}setTimeout(c,1e3)}function E(){if(S(),!e(a)?.targetSelector||!e(a)?.highlightElement)return;const I=document.querySelector(e(a).targetSelector);I&&(I.classList.add("tutorial-highlight"),g=I,I.scrollIntoView({behavior:"smooth",block:"center"}))}function S(){g&&(g.classList.remove("tutorial-highlight"),g=null)}ke(()=>(ge(u()),ge(r())),()=>{K(a,u()[r()]||null)}),ke(()=>(ge(d()),ge(r())),()=>{K(o,d()>0?(r()+1)/d()*100:0)}),ke(()=>(ge(v()),e(a)),()=>{v()&&e(a)&&E()}),st(),qe();var A=Le(),L=we(A);{var P=I=>{var M=xs(),y=n(M),j=l(y,2),U=n(j),Z=n(U),H=n(Z),w=n(H);i(H);var O=l(H,2),b=n(O);i(O),i(Z);var N=l(Z,2);i(U);var T=l(U,2),R=n(T),ue=n(R,!0);i(R);var se=l(R,2),ee=n(se,!0);i(se);var W=l(se,2);{var q=V=>{var re=bs(),B=l(n(re),2),D=n(B,!0);i(B),i(re),ae(()=>C(D,(e(a),m(()=>e(a).explanation)))),p(V,re)};Q(W,V=>{e(a),m(()=>e(a).explanation)&&V(q)})}var G=l(W,2);{var z=V=>{var re=ws(),B=n(re),D=n(B);{var he=ce=>{var oe=De("ğŸ–±ï¸ Click for me");p(ce,oe)},de=ce=>{var oe=Le(),ve=we(oe);{var fe=be=>{var X=De("âœï¸ Fill for me");p(be,X)},ye=be=>{var X=Le(),me=we(X);{var Ce=Ie=>{var Re=De("ğŸ“‹ Select for me");p(Ie,Re)},$e=Ie=>{var Re=De("â–¶ï¸ Do action");p(Ie,Re)};Q(me,Ie=>{e(a),m(()=>e(a).action==="select")?Ie(Ce):Ie($e,!1)},!0)}p(be,X)};Q(ve,be=>{e(a),m(()=>e(a).action==="fill")?be(fe):be(ye,!1)},!0)}p(ce,oe)};Q(D,ce=>{e(a),m(()=>e(a).action==="click")?ce(he):ce(de,!1)})}i(B),i(re),F("click",B,f),p(V,re)};Q(G,V=>{e(a),m(()=>e(a).action&&e(a).targetSelector)&&V(z)})}i(T);var Y=l(T,2),pe=n(Y),_e=l(pe,2),Te=l(_e,2),te=n(Te,!0);i(Te),i(Y),i(j),i(M),ba(M,V=>K(k,V),()=>e(k)),ae(()=>{ta(w,`width: ${e(o)??""}%`),C(b,`Step ${r()+1} of ${d()??""}`),C(ue,(e(a),m(()=>e(a).title))),C(ee,(e(a),m(()=>e(a).description))),pe.disabled=r()===0,Te.disabled=r()>=d()-1,C(te,r()>=d()-1?"Finish":"Next â†’")}),F("click",y,_),F("click",N,_),F("click",pe,x),F("click",_e,_),F("click",Te,c),p(I,M)};Q(L,I=>{v()&&e(a)&&I(P)})}p(t,A),Oe()}var Ss=$('<div class="modal-overlay svelte-1cd4pz7"><div class="modal-content svelte-1cd4pz7"><div class="modal-header svelte-1cd4pz7"><h3 class="svelte-1cd4pz7">âš™ï¸ Settings</h3> <button class="modal-close svelte-1cd4pz7">&times;</button></div> <div class="modal-body svelte-1cd4pz7"><div class="setting-group svelte-1cd4pz7"><label for="dropdownModeToggle" class="svelte-1cd4pz7"><strong class="svelte-1cd4pz7">Dropdown Hierarchy Mode</strong> <br class="svelte-1cd4pz7"/><small class="svelte-1cd4pz7">Toggle between Jurisdictionâ†’Signerâ†’Entity vs Jurisdictionâ†’Entityâ†’Signers</small></label> <div class="toggle-switch svelte-1cd4pz7"><input type="checkbox" id="dropdownModeToggle" class="svelte-1cd4pz7"/> <span class="toggle-slider svelte-1cd4pz7"></span></div> <div class="toggle-labels svelte-1cd4pz7"><span class="svelte-1cd4pz7">Jurâ†’Signerâ†’Entity</span> <span class="svelte-1cd4pz7">Jurâ†’Entityâ†’Signers</span></div></div> <div class="setting-group svelte-1cd4pz7"><label for="serverDelaySlider" class="svelte-1cd4pz7"><strong class="svelte-1cd4pz7">Server Processing Delay</strong> <br class="svelte-1cd4pz7"/><small class="svelte-1cd4pz7">Simulate network delay in consensus processing (0ms = instant)</small></label> <div class="slider-container svelte-1cd4pz7"><input type="range" id="serverDelaySlider" min="0" max="1000" class="svelte-1cd4pz7"/> <div class="slider-value svelte-1cd4pz7"><span class="svelte-1cd4pz7"> </span> ms</div></div></div></div></div></div>'),Es=$('<div class="admin-topbar svelte-1cd4pz7"><div class="admin-logo svelte-1cd4pz7"><span class="logo-text svelte-1cd4pz7">xln</span></div> <div class="admin-navigation svelte-1cd4pz7"></div> <div class="admin-controls svelte-1cd4pz7"><button class="admin-btn svelte-1cd4pz7" title="Run Demo"><span class="svelte-1cd4pz7">â–¶ï¸</span></button> <button class="admin-btn svelte-1cd4pz7" title="Clear Database"><span class="svelte-1cd4pz7">ğŸ—‘ï¸</span></button> <button class="admin-btn svelte-1cd4pz7" title="Create New Entity"><span class="svelte-1cd4pz7">â•</span></button> <button class="admin-btn admin-btn-tutorial svelte-1cd4pz7" title="Start Interactive Tutorial"><span class="svelte-1cd4pz7">ğŸ¯</span></button> <button class="admin-btn svelte-1cd4pz7" title="Add Entity Panel"><span class="svelte-1cd4pz7">ğŸ“‹</span></button> <button class="admin-btn svelte-1cd4pz7" title="Toggle theme"><span id="theme-icon" class="svelte-1cd4pz7"> </span></button> <button class="admin-btn svelte-1cd4pz7" title="Settings"><span class="svelte-1cd4pz7">âš™ï¸</span></button> <button class="admin-btn svelte-1cd4pz7" title="Toggle Dropdown Mode"><span class="svelte-1cd4pz7">ğŸ”„</span></button></div></div> <!>  <!> <!>',1);function ks(t,s){He(s,!1);const[a,o]=gt(),v=()=>Ne(je,"$settings",a),r=()=>Ne(Qt,"$isActiveTutorial",a),d=()=>Ne(xt,"$currentTutorial",a),u=()=>Ne(Zt,"$currentStep",a),h=le();let k=le(!1),g=le(!1);async function c(){try{await vt.runDemo(),console.log("âœ… Demo completed successfully")}catch(z){console.error("âŒ Demo failed:",z),alert(`Demo failed: ${z.message}`)}}async function x(){if(confirm("Are you sure you want to clear the database? This will reset all data."))try{await vt.clearDatabase(),console.log("âœ… Database cleared successfully")}catch(z){console.error("âŒ Clear database failed:",z),alert(`Clear database failed: ${z.message}`)}}function _(){alert("Entity Creator coming soon! Use the Controls section in any panel for now.")}function f(){K(g,!0)}function E(){wt.toggleTheme()}function S(){K(k,!0)}function A(){K(k,!1)}function L(){wt.toggleDropdownMode()}function P(){ot.addTab()}function I(z){const Y=z.target;wt.setServerDelay(parseInt(Y.value))}ke(()=>v(),()=>{K(h,v().theme==="dark"?"ğŸŒ™":"â˜€ï¸")}),st(),qe();var M=Es(),y=we(M),j=l(n(y),4),U=n(j),Z=l(U,2),H=l(Z,2),w=l(H,2),O=l(w,2),b=l(O,2),N=n(b),T=n(N,!0);i(N),i(b);var R=l(b,2),ue=l(R,2);i(j),i(y);var se=l(y,2);{var ee=z=>{var Y=Ss(),pe=n(Y),_e=n(pe),Te=l(n(_e),2);i(_e);var te=l(_e,2),V=n(te),re=l(n(V),2),B=n(re);ht(B),Pe(2),i(re),Pe(2),i(V);var D=l(V,2),he=l(n(D),2),de=n(he);ht(de);var ce=l(de,2),oe=n(ce),ve=n(oe,!0);i(oe),Pe(),i(ce),i(he),i(D),i(te),i(pe),i(Y),ae(()=>{as(B,(v(),m(()=>v().dropdownMode==="entity-first"))),wa(de,(v(),m(()=>v().serverDelay))),C(ve,(v(),m(()=>v().serverDelay)))}),F("click",Te,A),F("change",B,L),F("input",de,I),F("click",pe,vs(function(fe){Sa.call(this,s,fe)})),F("click",Y,A),p(z,Y)};Q(se,z=>{e(k)&&z(ee)})}var W=l(se,2);_s(W,{get isVisible(){return e(g)},set isVisible(z){K(g,z)},$$legacy:!0});var q=l(W,2);{var G=z=>{{let Y=At(()=>[u()]);Ts(z,{get isVisible(){return r()},currentStep:0,get totalSteps(){return d(),m(()=>d().steps.length)},get tutorialData(){return e(Y)}})}};Q(q,z=>{r()&&d()&&u()&&z(G)})}ae(()=>C(T,e(h))),F("click",U,c),F("click",Z,x),F("click",H,_),F("click",w,f),F("click",O,P),F("click",b,E),F("click",R,S),F("click",ue,L),p(t,M),Oe(),o()}const Me=We({currentTimeIndex:-1,maxTimeIndex:0,isLive:!0});Qe(Me,t=>t.currentTimeIndex);Qe(Me,t=>t.isLive);Qe(Me,t=>t.maxTimeIndex);const Ea=Qe([Me,mt,at],([t,s,a])=>{if(t.isLive)return a?.replicas||new Map;const o=t.currentTimeIndex;return o>=0&&o<s.length?s[o]?.replicas||new Map:new Map}),tt={updateMaxTimeIndex(){const t=ne(mt),s=Math.max(0,t.length-1);Me.update(a=>({...a,maxTimeIndex:s}))},goToTimeIndex(t){const s=ne(Me),a=Math.max(-1,Math.min(t,s.maxTimeIndex));Me.set({currentTimeIndex:a,maxTimeIndex:s.maxTimeIndex,isLive:a===-1}),console.log("ğŸ•°ï¸ Time machine moved to index:",a),this.triggerEntityPanelUpdates()},goToLive(){this.goToTimeIndex(-1)},goToHistoryStart(){this.goToTimeIndex(0)},goToHistoryEnd(){const t=ne(Me);this.goToTimeIndex(t.maxTimeIndex)},stepBackward(){const t=ne(Me);t.isLive?this.goToTimeIndex(t.maxTimeIndex):this.goToTimeIndex(Math.max(0,t.currentTimeIndex-1))},stepForward(){const t=ne(Me);t.isLive||(t.currentTimeIndex<t.maxTimeIndex?this.goToTimeIndex(t.currentTimeIndex+1):this.goToLive())},getCurrentSnapshot(){const t=ne(Me);if(t.isLive)return null;const s=ne(mt);return t.currentTimeIndex>=0&&t.currentTimeIndex<s.length?s[t.currentTimeIndex]:null},getTimeInfo(){const t=ne(Me),s=ne(mt);return t.isLive?{status:"LIVE",description:"Current time",frameNumber:s.length,totalFrames:s.length}:{status:"HISTORICAL",description:this.getCurrentSnapshot()?.description||"Historical snapshot",frameNumber:t.currentTimeIndex+1,totalFrames:s.length}},triggerEntityPanelUpdates(){window.dispatchEvent(new CustomEvent("timeChanged",{detail:{timeIndex:ne(Me).currentTimeIndex}}))},initialize(){this.updateMaxTimeIndex(),mt.subscribe(()=>{this.updateMaxTimeIndex()})}};var $s=$('<div class="time-machine svelte-jwfhjw"><div class="time-machine-main svelte-jwfhjw"><div><span> </span> <span> </span> <span> </span></div> <div class="time-nav-controls svelte-jwfhjw"><button class="time-btn-compact svelte-jwfhjw" title="Step Back (â† arrow)">âª</button> <button class="time-btn-compact svelte-jwfhjw" title="Step Forward (â†’ arrow)">â©</button> <button class="time-btn-compact live svelte-jwfhjw" title="Go to Current (End key)">âš¡ LIVE</button></div> <div class="time-utility-controls svelte-jwfhjw"><button class="time-btn-mini svelte-jwfhjw" title="Go to Start (Home key)">â®ï¸</button></div></div> <div class="time-slider-container svelte-jwfhjw"><input type="range" class="time-slider svelte-jwfhjw" min="0"/></div></div>');function Is(t,s){He(s,!1);const[a,o]=gt(),v=()=>Ne(Me,"$timeState",a),r=()=>Ne(mt,"$history",a),d=()=>Ne(ds,"$currentHeight",a),u=le(),h=le(),k=le();function g(q,G){if(q.isLive)return{status:"âš¡ LIVE",description:"Current time",frameInfo:`Height: ${d()}`,totalFrames:`${G.length} snapshots`};{const z=tt.getCurrentSnapshot();return{status:`ğŸ“¸ ${q.currentTimeIndex+1}/${G.length}`,description:z?.description||"Historical snapshot",frameInfo:`Height: ${z?.height||0}`,totalFrames:z?.description||""}}}function c(q,G){return q.isLive?q.maxTimeIndex+1:q.currentTimeIndex}function x(q,G){if(q.isLive)return 100;const z=q.maxTimeIndex+1;return z>0?q.currentTimeIndex/z*100:0}function _(q){const G=q.target,z=parseInt(G.value),Y=v().maxTimeIndex;z>Y?tt.goToLive():tt.goToTimeIndex(z)}function f(){tt.stepBackward()}function E(){tt.stepForward()}function S(){tt.goToHistoryStart()}function A(){tt.goToLive()}function L(q){if(!(q.target&&q.target.tagName==="INPUT")&&!(q.target&&q.target.tagName==="TEXTAREA"))switch(q.key){case"ArrowLeft":q.preventDefault(),f();break;case"ArrowRight":q.preventDefault(),E();break;case"Home":q.preventDefault(),S();break;case"End":q.preventDefault(),A();break}}ke(()=>(v(),r()),()=>{K(u,g(v(),r()))}),ke(()=>(v(),r()),()=>{K(h,c(v(),r()))}),ke(()=>(v(),r()),()=>{K(k,x(v(),r()))}),st(),qe();var P=$s();F("keydown",_a,L);var I=n(P),M=n(I);let y;var j=n(M),U=n(j,!0);i(j);var Z=l(j,2),H=n(Z,!0);i(Z);var w=l(Z,2),O=n(w,!0);i(w),i(M);var b=l(M,2),N=n(b),T=l(N,2),R=l(T,2);i(b);var ue=l(b,2),se=n(ue);i(ue),i(I);var ee=l(I,2),W=n(ee);ht(W),i(ee),i(P),ae(q=>{y=Ee(M,1,"time-info-compact svelte-jwfhjw",null,y,q),C(U,(e(u),m(()=>e(u).status))),C(H,(e(u),m(()=>e(u).frameInfo))),C(O,(e(u),m(()=>e(u).totalFrames))),ta(ee,`--progress: ${e(k)??""}%`),Ge(W,"max",(v(),m(()=>v().maxTimeIndex+1))),wa(W,e(h)),W.disabled=(r(),m(()=>r().length===0))},[()=>({current:v().isLive})]),F("click",N,f),F("click",T,E),F("click",R,A),F("click",se,S),F("input",W,_),p(t,P),Oe(),o()}var zs=$('<div><button class="unified-dropdown-btn svelte-199qdj" style="width: 100%;"><span class="dropdown-icon svelte-199qdj">ğŸ›ï¸</span> <span class="dropdown-text svelte-199qdj"> </span> <span class="dropdown-arrow svelte-199qdj">â–¼</span></button> <div></div></div>');function Cs(t,s){He(s,!1);const[a,o]=gt(),v=()=>Ne(je,"$settings",a),r=()=>Ne(cs,"$replicas",a),d=()=>Ne(Ea,"$visibleReplicas",a),u=le();let h=Se(s,"tab",8);const k=da();let g=le(!1),c=le();function x(b){return b.entityId&&b.signer&&b.jurisdiction?`${b.jurisdiction} â†’ ${b.signer} â†’ ${b.entityId.slice(-4)}`:b.signer&&b.jurisdiction?`${b.jurisdiction} â†’ ${b.signer} â†’ Select Entity`:b.jurisdiction?`${b.jurisdiction} â†’ Select Signer â†’ Entity`:"Select Jurisdiction â†’ Signer â†’ Entity"}function _(){K(g,!e(g)),e(g)&&f()}function f(){if(!e(c))return;Ze(c,e(c).innerHTML=`
      <div class="dropdown-search-container">
        <input type="text" class="dropdown-search-input" placeholder="ğŸ” Search jurisdictions, signers, entities..." />
      </div>
      <div class="dropdown-results" id="dropdownResults">
        <!-- Results will be populated here -->
      </div>
    `);const b=e(c).querySelector(".dropdown-search-input"),N=e(c).querySelector(".dropdown-results");b&&(b.addEventListener("input",T=>{const R=T.target;E(N,R.value)}),b.addEventListener("click",T=>{T.stopPropagation()})),E(N,"")}function E(b,N){if(!b)return;b.innerHTML="";const T=[{name:"Ethereum",id:"ethereum"},{name:"Polygon",id:"polygon"},{name:"Arbitrum",id:"arbitrum"}];v().dropdownMode==="signer-first"?S(T,b,N):A(T,b,N)}function S(b,N,T){b.forEach((R,ue)=>{const se=Array.from(r().values()).filter(G=>G.state?.config?.jurisdiction?.name===R.name);if(se.length===0)return;const ee={};se.forEach(G=>{const z=G.signerId;ee[z]||(ee[z]=[]),ee[z].push(G)});const W=L(`ğŸ›ï¸ ${R.name}`,"",0,!1,!1,T);N.appendChild(W);const q=Object.keys(ee);q.forEach((G,z)=>{const Y=ee[G],pe=z===q.length-1,_e=L(`ğŸ‘¤ ${G}`,"",1,!1,pe,T);N.appendChild(_e),Y.forEach((Te,te)=>{const V=te===Y.length-1,re=Te.entityId.slice(-4),B=L(`ğŸ¢ ${re}`,`${R.name}:${G}:${Te.entityId}`,2,!0,V&&pe,T);B.addEventListener("click",()=>I(R.name,G,Te.entityId)),N.appendChild(B)})})})}function A(b,N,T){b.forEach((R,ue)=>{const se=d()||r(),ee=Array.from(se.values()).filter(z=>z.state?.config?.jurisdiction?.name===R.name);if(ee.length===0)return;const W={};ee.forEach(z=>{const Y=z.entityId;W[Y]||(W[Y]=[]),W[Y].push(z)});const q=L(`ğŸ›ï¸ ${R.name}`,"",0,!1,!1,T);N.appendChild(q);const G=Object.keys(W);G.forEach((z,Y)=>{const pe=W[z],_e=Y===G.length-1,Te=z.slice(-4),te=L(`ğŸ¢ ${Te} (${pe.length} signers)`,"",1,!1,_e,T);N.appendChild(te),pe.forEach((V,re)=>{const B=re===pe.length-1,D=L(`ğŸ‘¤ ${V.signerId}`,`${R.name}:${V.signerId}:${V.entityId}`,2,!0,B&&_e,T);D.addEventListener("click",()=>I(R.name,V.signerId,V.entityId)),N.appendChild(D)})})})}function L(b,N,T,R,ue,se){const ee=document.createElement("div");ee.className=`dropdown-item ${T>0?`indent-${T}`:""}`;let W="";return T===1?W="â”œâ”€ ":T===2&&(W="â”‚  â””â”€ "),ee.innerHTML=`
      <span class="tree-prefix" style="color: #666; font-family: monospace;">${W}</span>
      <span class="item-text">${b}</span>
    `,R?(ee.style.cursor="pointer",ee.dataset.value=N):(ee.style.cursor="default",ee.style.color="#9d9d9d"),se&&b.toLowerCase().includes(se.toLowerCase())&&P(ee,se),ee}function P(b,N){const T=b.querySelector(".item-text");if(T&&N){const R=T.textContent||"",ue=new RegExp(`(${N})`,"gi");T.innerHTML=R.replace(ue,'<mark style="background: #ffd700; color: #000; padding: 2px;">$1</mark>')}}function I(b,N,T){k("entitySelect",{jurisdiction:b,signer:N,entityId:T}),K(g,!1)}function M(b){b.target.closest(".unified-dropdown")||K(g,!1)}ke(()=>ge(h()),()=>{K(u,x(h()))}),st(),qe();var y=zs();F("click",_a,M);let j;var U=n(y),Z=l(n(U),2),H=n(Z,!0);i(Z),Pe(2),i(U);var w=l(U,2);let O;ba(w,b=>K(c,b),()=>e(c)),i(y),ae((b,N)=>{j=Ee(y,1,"unified-dropdown svelte-199qdj",null,j,b),C(H,e(u)),O=Ee(w,1,"unified-dropdown-content svelte-199qdj",null,O,N)},[()=>({open:e(g)}),()=>({show:e(g)})]),F("click",U,_),p(t,y),Oe(),o()}var As=$('<div class="entity-profile svelte-18sk6vh"><div class="profile-info svelte-18sk6vh"><div class="profile-name svelte-18sk6vh"> </div> <div class="profile-details svelte-18sk6vh"> </div></div></div>'),Ns=$('<div class="empty-state svelte-18sk6vh">- select entity to view profile</div>'),Ls=$('<div class="entity-profile-section svelte-18sk6vh"><!></div>');function js(t,s){He(s,!1);let a=Se(s,"replica",8);Se(s,"tab",8),qe();var o=Ls(),v=n(o);{var r=u=>{var h=As(),k=n(h),g=n(k),c=n(g);i(g);var x=l(g,2),_=n(x);i(x),i(k),i(h),ae(f=>{C(c,`Entity ${f??""}`),C(_,`Signer: ${ge(a()),m(()=>a().signerId)??""}`)},[()=>(ge(a()),m(()=>a().entityId.slice(-4)))]),p(u,h)},d=u=>{var h=Ns();p(u,h)};Q(v,u=>{a()?u(r):u(d,!1)})}i(o),p(t,o),Oe()}var Ds=$('<div class="consensus-item svelte-1udnq54"><span class="consensus-label svelte-1udnq54">Status:</span> <span class="consensus-value consensus-status-unlocked svelte-1udnq54">ğŸ”“ Unlocked</span></div> <div class="consensus-item svelte-1udnq54"><span class="consensus-label svelte-1udnq54">Role:</span> <span class="consensus-value svelte-1udnq54">ğŸ‘ï¸ Validator</span></div> <div class="consensus-item svelte-1udnq54"><span class="consensus-label svelte-1udnq54">Frame Height:</span> <span class="consensus-value svelte-1udnq54"> </span></div> <div class="consensus-item svelte-1udnq54"><span class="consensus-label svelte-1udnq54">Messages:</span> <span class="consensus-value svelte-1udnq54"> </span></div> <div class="consensus-item svelte-1udnq54"><span class="consensus-label svelte-1udnq54">Proposals:</span> <span class="consensus-value svelte-1udnq54"> </span></div>',1),Ms=$('<div class="empty-state svelte-1udnq54">- select entity to view consensus state</div>'),Ps=$('<div class="consensus-state svelte-1udnq54"><!></div>');function qs(t,s){He(s,!1);let a=Se(s,"replica",8);qe();var o=Ps(),v=n(o);{var r=u=>{var h=Ds(),k=l(we(h),4),g=l(n(k),2),c=n(g,!0);i(g),i(k);var x=l(k,2),_=l(n(x),2),f=n(_,!0);i(_),i(x);var E=l(x,2),S=l(n(E),2),A=n(S,!0);i(S),i(E),ae(()=>{C(c,(ge(a()),m(()=>a().state?.height||0))),C(f,(ge(a()),m(()=>a().state?.messages?.length||0))),C(A,(ge(a()),m(()=>a().state?.proposals?.size||0)))}),p(u,h)},d=u=>{var h=Ms();p(u,h)};Q(v,u=>{a()?u(r):u(d,!1)})}i(o),p(t,o),Oe()}var Hs=$('<div class="chat-message svelte-4w744y"><div class="chat-meta svelte-4w744y"> </div> <div class="chat-content svelte-4w744y"> </div></div>'),Os=$('<div class="empty-state svelte-4w744y">- no messages</div>'),Fs=$('<div class="scrollable-component svelte-4w744y"><!></div>');function Rs(t,s){He(s,!1);let a=Se(s,"replica",8);Se(s,"tab",8),qe();var o=Fs(),v=n(o);{var r=u=>{var h=Le(),k=we(h);Ue(k,1,()=>(ge(a()),m(()=>a().state.messages)),Be,(g,c,x)=>{var _=Hs(),f=n(_),E=n(f);i(f);var S=l(f,2),A=n(S,!0);i(S),i(_),ae(()=>{C(E,`Message #${x+1} â€¢ ${ge(a()),m(()=>a().signerId)??""}`),C(A,e(c))}),p(g,_)}),p(u,h)},d=u=>{var h=Os();p(u,h)};Q(v,u=>{ge(a()),m(()=>a()&&a().state?.messages?.length>0)?u(r):u(d,!1)})}i(o),p(t,o),Oe()}var Vs=$('<div class="proposal-item svelte-1kjjzq"><div class="proposal-title svelte-1kjjzq"> </div> <div class="proposal-meta svelte-1kjjzq"><span> </span></div></div>'),Xs=$('<div class="empty-state svelte-1kjjzq">- no proposals</div>'),Js=$('<div class="scrollable-component svelte-1kjjzq"><!></div>');function Us(t,s){He(s,!1);let a=Se(s,"replica",8);Se(s,"tab",8),qe();var o=Js(),v=n(o);{var r=u=>{var h=Le(),k=we(h);Ue(k,1,()=>(ge(a()),m(()=>Array.from(a().state.proposals.entries()))),Be,(g,c)=>{var x=Ka(()=>Qa(e(c),2));let _=()=>e(x)[1];var f=Vs(),E=n(f),S=n(E,!0);i(E);var A=l(E,2),L=n(A),P=n(L);i(L),i(A),i(f),ae(()=>{C(S,(_(),m(()=>_().action?.data?.message||"Unknown proposal"))),C(P,`By: ${_(),m(()=>_().proposer||"Unknown")??""}`)}),p(g,f)}),p(u,h)},d=u=>{var h=Xs();p(u,h)};Q(v,u=>{ge(a()),m(()=>a()&&a().state?.proposals?.size>0)?u(r):u(d,!1)})}i(o),p(t,o),Oe()}var Bs=$("<span>ğŸ’¬</span>"),Ws=$("<span>ğŸ—³ï¸</span>"),Gs=$("<span>âš™ï¸</span>"),Ys=$("<p><strong> </strong> </p>"),Ks=$("<p> </p>"),Qs=$('<div class="history-item svelte-193j56j"><div class="item-icon svelte-193j56j"><!></div> <div class="item-details svelte-193j56j"><div class="item-header svelte-193j56j"><span class="item-type svelte-193j56j"> </span> <span class="item-timestamp svelte-193j56j"> </span></div> <div class="item-content svelte-193j56j"><!></div></div></div>'),Zs=$('<div class="history-list svelte-193j56j"></div>'),ei=$('<p class="no-history svelte-193j56j">No history available.</p>'),ti=$('<div class="transaction-history svelte-193j56j"><!></div>');function ai(t,s){He(s,!1);let a=Se(s,"replica",8);Se(s,"tab",8),qe();var o=ti(),v=n(o);{var r=u=>{var h=Zs();Ue(h,5,()=>(ge(a()),m(()=>a().state.messages)),Be,(k,g)=>{var c=Qs(),x=n(c),_=n(x);{var f=H=>{var w=Bs();p(H,w)},E=H=>{var w=Le(),O=we(w);{var b=T=>{var R=Ws();p(T,R)},N=T=>{var R=Gs();p(T,R)};Q(O,T=>{e(g),m(()=>e(g).type==="proposal")?T(b):T(N,!1)},!0)}p(H,w)};Q(_,H=>{e(g),m(()=>e(g).type==="chat")?H(f):H(E,!1)})}i(x);var S=l(x,2),A=n(S),L=n(A),P=n(L,!0);i(L);var I=l(L,2),M=n(I,!0);i(I),i(A);var y=l(A,2),j=n(y);{var U=H=>{var w=Ys(),O=n(w),b=n(O);i(O);var N=l(O);i(w),ae(()=>{C(b,`${e(g),m(()=>e(g).data.from)??""}:`),C(N,` ${e(g),m(()=>e(g).data.message)??""}`)}),p(H,w)},Z=H=>{var w=Le(),O=we(w);{var b=N=>{var T=Ks(),R=n(T);i(T),ae(()=>C(R,`Proposal to "${e(g),m(()=>e(g).data.action.data.message)??""}"`)),p(N,T)};Q(O,N=>{e(g),m(()=>e(g).type==="proposal")&&N(b)},!0)}p(H,w)};Q(j,H=>{e(g),m(()=>e(g).type==="chat")?H(U):H(Z,!1)})}i(y),i(S),i(c),ae(H=>{C(P,(e(g),m(()=>e(g).type))),C(M,H)},[()=>(e(g),m(()=>new Date(e(g).timestamp).toLocaleTimeString()))]),p(k,c)}),i(h),p(u,h)},d=u=>{var h=ei();p(u,h)};Q(v,u=>{a()?u(r):u(d,!1)})}i(o),p(t,o),Oe()}var si=$('<div class="form-group svelte-mrxla2"><label class="form-label svelte-mrxla2">Message:</label> <textarea class="form-textarea svelte-mrxla2" placeholder="Enter your message..."></textarea></div> <button class="form-button svelte-mrxla2">Send Message</button>',1),ii=$('<div class="form-group svelte-mrxla2"><label class="form-label svelte-mrxla2">Action:</label> <div class="form-input svelte-mrxla2" style="padding: 12px; background: #1e1e1e; border-radius: 4px; color: #666;"> </div></div>'),ni=$('<div class="controls-section svelte-mrxla2"><select class="controls-dropdown svelte-mrxla2"><option selected>ğŸ’¬ Create chat message</option><option>ğŸ“‹ Add proposal</option><option>ğŸ—³ï¸ Vote on proposal</option><option>ğŸ›ï¸ Form new entity</option><option>ğŸ’¸ Send J-tx</option><option>âš™ï¸ Update settings</option></select> <div class="controls-form svelte-mrxla2"><!></div></div>');function ri(t,s){Se(s,"replica",8),Se(s,"tab",8);let a=le("chat"),o=le("");var v=ni(),r=n(v);ae(()=>{e(a),lt(()=>{})});var d=n(r);d.value=d.__value="chat";var u=l(d);u.value=u.__value="proposal";var h=l(u);h.value=h.__value="vote";var k=l(h);k.value=k.__value="entity";var g=l(k);g.value=g.__value="jtx";var c=l(g);c.value=c.__value="settings",i(r);var x=l(r,2),_=n(x);{var f=S=>{var A=si(),L=we(A),P=l(n(L),2);Za(P),i(L),Pe(2),kt(P,()=>e(o),I=>K(o,I)),p(S,A)},E=S=>{var A=ii(),L=l(n(A),2),P=n(L);i(L),i(A),ae(()=>C(P,`${e(a)??""} controls will be implemented here`)),p(S,A)};Q(_,S=>{e(a)==="chat"?S(f):S(E,!1)})}i(x),i(v),_t(r,()=>e(a),S=>K(a,S)),p(t,v)}var li=$('<button class="panel-add-btn svelte-11c9zfd" title="Add Entity Panel">â•</button>'),oi=$('<button class="panel-close-btn svelte-11c9zfd" title="Close panel">Ã—</button>'),vi=$('<div class="entity-panel svelte-11c9zfd"><div class="panel-header svelte-11c9zfd"><!> <div class="panel-header-controls svelte-11c9zfd"><!> <!></div></div> <!> <div class="panel-component svelte-11c9zfd"><div role="button" tabindex="0"><div class="component-title svelte-11c9zfd"><span>âš–ï¸</span> <span>Consensus State</span></div> <div class="component-toggle svelte-11c9zfd">â–¼</div></div> <div style="max-height: 200px;"><!></div></div> <div class="panel-component svelte-11c9zfd"><div role="button" tabindex="0"><div class="component-title svelte-11c9zfd"><span>ğŸ’¬</span> <span>Chat</span></div> <div class="component-toggle svelte-11c9zfd">â–¼</div></div> <div style="max-height: 25vh;"><!></div></div> <div class="panel-component svelte-11c9zfd"><div role="button" tabindex="0"><div class="component-title svelte-11c9zfd"><span>ğŸ“‹</span> <span>Proposals</span></div> <div class="component-toggle svelte-11c9zfd">â–¼</div></div> <div style="max-height: 25vh;"><!></div></div> <div class="panel-component entity-history-panel svelte-11c9zfd"><div role="button" tabindex="0"><div class="component-title svelte-11c9zfd"><span>ğŸ—‚ï¸</span> <span>History</span></div> <div class="component-toggle svelte-11c9zfd">â–¼</div></div> <div style="max-height: 40vh;"><!></div></div> <div class="panel-component svelte-11c9zfd"><div role="button" tabindex="0"><div class="component-title svelte-11c9zfd"><span>âš™ï¸</span> <span>Controls</span></div> <div class="component-toggle svelte-11c9zfd">â–¼</div></div> <div style="max-height: 400px;"><!></div></div></div>');function ci(t,s){He(s,!1);const[a,o]=gt(),v=()=>Ne(Ea,"$visibleReplicas",a),r=()=>Ne(je,"$settings",a),d=le(),u=le(),h=le(),k=le(),g=le();let c=Se(s,"tab",8),x=Se(s,"isLast",8,!1),_=le(null);function f(X){wt.toggleComponentState(X)}function E(X){const{jurisdiction:me,signer:Ce,entityId:$e}=X.detail;ot.updateTab(c().id,{jurisdiction:me,signer:Ce,entityId:$e,title:`Entity ${$e.slice(-4)}`})}function S(){ot.closeTab(c().id)}function A(){ot.addTab()}Ct(()=>{ot.getActiveTab();const X=me=>{console.log("ğŸ•°ï¸ EntityPanel received time change event:",me.detail.timeIndex),c().entityId&&c().signer&&console.log(`ğŸ”„ Panel ${c().id} updating for time index:`,me.detail.timeIndex)};return window.addEventListener("timeChanged",X),()=>{window.removeEventListener("timeChanged",X)}}),ke(()=>(ge(c()),v(),vt),()=>{if(c().entityId&&c().signer){const X=v()?.get?.(`${c().entityId}:${c().signer}`);K(_,X||vt.getReplica(c().entityId,c().signer))}else K(_,null)}),ke(()=>(r(),ge(c())),()=>{K(d,r().componentStates[`consensus-${c().id}`]??!0)}),ke(()=>(r(),ge(c())),()=>{K(u,r().componentStates[`chat-${c().id}`]??!0)}),ke(()=>(r(),ge(c())),()=>{K(h,r().componentStates[`proposals-${c().id}`]??!1)}),ke(()=>(r(),ge(c())),()=>{K(k,r().componentStates[`history-${c().id}`]??!1)}),ke(()=>(r(),ge(c())),()=>{K(g,r().componentStates[`controls-${c().id}`]??!1)}),st(),qe();var L=vi(),P=n(L),I=n(P);Cs(I,{get tab(){return c()},$$events:{entitySelect:E}});var M=l(I,2),y=n(M);{var j=X=>{var me=li();F("click",me,A),p(X,me)};Q(y,X=>{x()&&X(j)})}var U=l(y,2);{var Z=X=>{var me=oi();F("click",me,S),p(X,me)};Q(U,X=>{X(Z)})}i(M),i(P);var H=l(P,2);js(H,{get replica(){return e(_)},get tab(){return c()}});var w=l(H,2),O=n(w);let b;var N=l(O,2);let T;var R=n(N);qs(R,{get replica(){return e(_)}}),i(N),i(w);var ue=l(w,2),se=n(ue);let ee;var W=l(se,2);let q;var G=n(W);Rs(G,{get replica(){return e(_)},get tab(){return c()}}),i(W),i(ue);var z=l(ue,2),Y=n(z);let pe;var _e=l(Y,2);let Te;var te=n(_e);Us(te,{get replica(){return e(_)},get tab(){return c()}}),i(_e),i(z);var V=l(z,2),re=n(V);let B;var D=l(re,2);let he;var de=n(D);ai(de,{get replica(){return e(_)},get tab(){return c()}}),i(D),i(V);var ce=l(V,2),oe=n(ce);let ve;var fe=l(oe,2);let ye;var be=n(fe);ri(be,{get replica(){return e(_)},get tab(){return c()}}),i(fe),i(ce),i(L),ae((X,me,Ce,$e,Ie,Re,et,ct,it,jt)=>{Ge(L,"data-panel-id",(ge(c()),m(()=>c().id))),Ge(w,"id",`consensus-${ge(c()),m(()=>c().id)??""}`),b=Ee(O,1,"component-header svelte-11c9zfd",null,b,X),T=Ee(N,1,"component-content svelte-11c9zfd",null,T,me),Ge(ue,"id",`chat-${ge(c()),m(()=>c().id)??""}`),ee=Ee(se,1,"component-header svelte-11c9zfd",null,ee,Ce),q=Ee(W,1,"component-content svelte-11c9zfd",null,q,$e),Ge(z,"id",`proposals-${ge(c()),m(()=>c().id)??""}`),pe=Ee(Y,1,"component-header svelte-11c9zfd",null,pe,Ie),Te=Ee(_e,1,"component-content svelte-11c9zfd",null,Te,Re),Ge(V,"id",`history-${ge(c()),m(()=>c().id)??""}`),B=Ee(re,1,"component-header svelte-11c9zfd",null,B,et),he=Ee(D,1,"component-content svelte-11c9zfd",null,he,ct),Ge(ce,"id",`controls-${ge(c()),m(()=>c().id)??""}`),ve=Ee(oe,1,"component-header svelte-11c9zfd",null,ve,it),ye=Ee(fe,1,"component-content svelte-11c9zfd",null,ye,jt)},[()=>({collapsed:!e(d)}),()=>({collapsed:!e(d)}),()=>({collapsed:!e(u)}),()=>({collapsed:!e(u)}),()=>({collapsed:!e(h)}),()=>({collapsed:!e(h)}),()=>({collapsed:!e(k)}),()=>({collapsed:!e(k)}),()=>({collapsed:!e(g)}),()=>({collapsed:!e(g)})]),F("click",O,()=>f(`consensus-${c().id}`)),F("keydown",O,X=>X.key==="Enter"&&f(`consensus-${c().id}`)),F("click",se,()=>f(`chat-${c().id}`)),F("keydown",se,X=>X.key==="Enter"&&f(`chat-${c().id}`)),F("click",Y,()=>f(`proposals-${c().id}`)),F("keydown",Y,X=>X.key==="Enter"&&f(`proposals-${c().id}`)),F("click",re,()=>f(`history-${c().id}`)),F("keydown",re,X=>X.key==="Enter"&&f(`history-${c().id}`)),F("click",oe,()=>f(`controls-${c().id}`)),F("keydown",oe,X=>X.key==="Enter"&&f(`controls-${c().id}`)),p(t,L),Oe(),o()}var di=$('<div class="input-item svelte-1fv6y8l"><strong> </strong> </div>'),ui=$('<div class="no-inputs svelte-1fv6y8l">No server transactions</div>'),pi=$("<br/> ",1),fi=$("<br/>ğŸ“ <strong> </strong> <!>",1),mi=$('<div class="input-item svelte-1fv6y8l"><strong> </strong> <!></div>'),hi=$('<div class="no-inputs svelte-1fv6y8l">No entity inputs</div>'),gi=$("<br/> ",1),yi=$("<br/>ğŸ“ <strong> </strong> <!>",1),_i=$('<div class="input-item svelte-1fv6y8l"><strong> </strong> <!></div>'),bi=$('<div class="no-inputs svelte-1fv6y8l">No entity outputs</div>'),wi=$(`<div class="history-content svelte-1fv6y8l"><div class="server-io-container svelte-1fv6y8l"><div class="server-column svelte-1fv6y8l"><div class="server-column-header svelte-1fv6y8l">ğŸ“¨ Server Input (What's happening this tick) <span class="status-indicator svelte-1fv6y8l"> </span></div> <div class="server-section svelte-1fv6y8l"><h4 class="svelte-1fv6y8l">ğŸ–¥ï¸ Server Transactions</h4> <div class="server-txs-list"><!></div></div> <div class="server-section svelte-1fv6y8l"><h4 class="svelte-1fv6y8l">ğŸ”„ Entity Inputs</h4> <div class="entity-inputs-list"><!></div></div></div> <div class="server-column svelte-1fv6y8l"><div class="server-column-header svelte-1fv6y8l">ğŸ“¤ Server Output (What's being sent and where) <span class="status-indicator svelte-1fv6y8l"> </span></div> <div class="server-section svelte-1fv6y8l"><h4 class="svelte-1fv6y8l">ğŸš€ Entity Outputs</h4> <div class="entity-outputs-list"><!></div></div></div></div></div>`),xi=$('<div class="history-io-section svelte-1fv6y8l"><div class="history-header svelte-1fv6y8l"><h3 class="svelte-1fv6y8l">ğŸ“Š Transaction History & I/O</h3> <button> </button></div> <!></div>');function Ti(t,s){He(s,!1);const[a,o]=gt(),v=()=>Ne(Me,"$timeState",a),r=()=>Ne(at,"$xlnEnvironment",a),d=le(),u=le(),h=le();let k=le(!1);function g(){K(k,!e(k))}ke(()=>(v(),r()),()=>{K(d,v().isLive?null:r()?.history?.[v().currentTimeIndex])}),ke(()=>e(d),()=>{K(u,e(d)?.serverInput||{serverTxs:[],entityInputs:[]})}),ke(()=>e(d),()=>{K(h,e(d)?.serverOutputs||[])}),st(),qe();var c=xi(),x=n(c),_=l(n(x),2);let f;var E=n(_,!0);i(_),i(x);var S=l(x,2);{var A=L=>{var P=wi(),I=n(P),M=n(I),y=n(M),j=l(n(y)),U=n(j,!0);i(j),i(y);var Z=l(y,2),H=l(n(Z),2),w=n(H);{var O=te=>{var V=Le(),re=we(V);Ue(re,1,()=>(e(u),m(()=>e(u).serverTxs)),Be,(B,D)=>{var he=di(),de=n(he),ce=n(de);i(de);var oe=l(de);i(he),ae(()=>{C(ce,`ğŸ–¥ï¸ ${e(D),m(()=>e(D).type)??""}`),C(oe,`: ${e(D),m(()=>e(D).entityId)??""}:${e(D),m(()=>e(D).signerId)??""}
                    ${e(D),m(()=>e(D).data.isProposer?" (ğŸ‘‘ Proposer)":" (âœ… Validator)")??""}`)}),p(B,he)}),p(te,V)},b=te=>{var V=ui();p(te,V)};Q(w,te=>{e(u),m(()=>e(u).serverTxs.length>0)?te(O):te(b,!1)})}i(H),i(Z);var N=l(Z,2),T=l(n(N),2),R=n(T);{var ue=te=>{var V=Le(),re=we(V);Ue(re,1,()=>(e(u),m(()=>e(u).entityInputs)),Be,(B,D)=>{var he=mi(),de=n(he),ce=n(de);i(de);var oe=l(de,2);{var ve=fe=>{var ye=fi(),be=l(we(ye),2),X=n(be);i(be);var me=l(be,2);Ue(me,1,()=>(e(D),m(()=>e(D).entityTxs)),Be,(Ce,$e,Ie)=>{var Re=pi(),et=l(we(Re));ae(()=>C(et,` ${Ie+1}. ${e($e),m(()=>e($e).type==="chat"?`ğŸ’¬ Chat: "${e($e).data.message}"`:e($e).type==="propose"?`ğŸ“ Propose: "${e($e).data.action.data.message}"`:e($e).type==="vote"?`ğŸ—³ï¸ Vote: ${e($e).data.choice}`:`âš™ï¸ ${e($e).type}`)??""}`)),p(Ce,Re)}),ae(()=>C(X,`${e(D),m(()=>e(D).entityTxs.length)??""} transactions:`)),p(fe,ye)};Q(oe,fe=>{e(D),m(()=>e(D).entityTxs&&e(D).entityTxs.length>0)&&fe(ve)})}i(he),ae(()=>C(ce,`${e(D),m(()=>e(D).entityId)??""}:${e(D),m(()=>e(D).signerId)??""}`)),p(B,he)}),p(te,V)},se=te=>{var V=hi();p(te,V)};Q(R,te=>{e(u),m(()=>e(u).entityInputs.length>0)?te(ue):te(se,!1)})}i(T),i(N),i(M);var ee=l(M,2),W=n(ee),q=l(n(W)),G=n(q,!0);i(q),i(W);var z=l(W,2),Y=l(n(z),2),pe=n(Y);{var _e=te=>{var V=Le(),re=we(V);Ue(re,1,()=>e(h),Be,(B,D,he)=>{var de=_i(),ce=n(de),oe=n(ce);i(ce);var ve=l(ce,2);{var fe=ye=>{var be=yi(),X=l(we(be),2),me=n(X);i(X);var Ce=l(X,2);Ue(Ce,1,()=>(e(D),m(()=>e(D).entityTxs)),Be,($e,Ie,Re)=>{var et=gi(),ct=l(we(et));ae(()=>C(ct,` ${Re+1}. ${e(Ie),m(()=>e(Ie).type==="chat"?`ğŸ’¬ Chat: "${e(Ie).data.message}"`:e(Ie).type==="propose"?`ğŸ“ Propose: "${e(Ie).data.action.data.message}"`:e(Ie).type==="vote"?`ğŸ—³ï¸ Vote: ${e(Ie).data.choice}`:`âš™ï¸ ${e(Ie).type}`)??""}`)),p($e,et)}),ae(()=>C(me,`${e(D),m(()=>e(D).entityTxs.length)??""} transactions:`)),p(ye,be)};Q(ve,ye=>{e(D),m(()=>e(D).entityTxs&&e(D).entityTxs.length>0)&&ye(fe)})}i(de),ae(()=>C(oe,`ğŸ“¤ ${he+1}. â†’ ${e(D),m(()=>e(D).signerId)??""}`)),p(B,de)}),p(te,V)},Te=te=>{var V=bi();p(te,V)};Q(pe,te=>{e(h),m(()=>e(h).length>0)?te(_e):te(Te,!1)})}i(Y),i(z),i(ee),i(I),i(P),ae(()=>{C(U,(v(),m(()=>v().isLive?"âš¡ Current":"ğŸ•°ï¸ Historical"))),C(G,(v(),m(()=>v().isLive?"âš¡ Current":"ğŸ•°ï¸ Historical")))}),p(L,P)};Q(S,L=>{e(k)||L(A)})}i(c),ae(L=>{f=Ee(_,1,"collapse-btn svelte-1fv6y8l",null,f,L),C(E,e(k)?"â–¶":"â–¼")},[()=>({collapsed:e(k)})]),F("click",_,g),p(t,c),Oe(),o()}var Si=$("<button><!></button>");function Bt(t,s){let a=Se(s,"variant",8,"primary"),o=Se(s,"size",8,"medium"),v=Se(s,"disabled",8,!1),r=Se(s,"type",8,"button");var d=Si(),u=n(d);ns(u,s,"default",{}),i(d),ae(()=>{Ee(d,1,`btn btn-${a()??""} btn-${o()??""}`,"svelte-1ygej4b"),d.disabled=v(),Ge(d,"type",r())}),F("click",d,function(h){Sa.call(this,s,h)}),p(t,d)}var Ei=$("<strong>ğŸ”’ Lazy:</strong> Free to create, entityId = hash(validators), works immediately.",1),ki=$("<strong>ğŸ”¢ Numbered:</strong> Small gas cost, get sequential number like #42, on-chain registered.",1),$i=$('<strong>ğŸ·ï¸ Named:</strong> Premium gas + admin approval, get custom name like "coinbase".',1),Ii=$('<button type="button" class="btn btn-danger btn-small svelte-mp6wtl">âŒ</button>'),zi=$('<div class="validator-row svelte-mp6wtl"><select class="validator-name svelte-mp6wtl"><option>Select signer...</option><option>alice.eth</option><option>bob.eth</option><option>carol.eth</option><option>david.eth</option><option>eve.eth</option></select> <input type="number" class="validator-weight svelte-mp6wtl" min="1" placeholder="1"/> <!></div>'),Ci=$('<div class="quorum-hash-section svelte-mp6wtl"><h4 class="svelte-mp6wtl">ğŸ” Quorum Hash</h4> <div class="hash-display svelte-mp6wtl"><code class="svelte-mp6wtl"> </code></div> <small class="svelte-mp6wtl">This hash is calculated from your validators and threshold. It will be your entity ID.</small></div>'),Ai=$('<div class="error-message svelte-mp6wtl"> </div>'),Ni=$('<div class="entity-formation svelte-mp6wtl"><div class="formation-panel svelte-mp6wtl"><div class="formation-group svelte-mp6wtl"><label for="jurisdictionSelect" class="svelte-mp6wtl">ğŸ›ï¸ Jurisdiction:</label> <select id="jurisdictionSelect" class="svelte-mp6wtl"><option>Ethereum Mainnet (Port 8545)</option><option>Polygon Network (Port 8546)</option><option>Arbitrum One (Port 8547)</option></select> <div class="jurisdiction-info svelte-mp6wtl"><small class="svelte-mp6wtl"><strong>ğŸ“¡ Network:</strong> <br/> <strong>ğŸ”— RPC Port:</strong> </small></div></div> <div class="formation-group svelte-mp6wtl"><label for="entityTypeSelect" class="svelte-mp6wtl">ğŸ†” Entity Type:</label> <select id="entityTypeSelect" class="svelte-mp6wtl"><option>ğŸ”’ Lazy Entity (Free - ID = Quorum Hash)</option><option>ğŸ”¢ Numbered Entity (Gas Required - Sequential ID)</option><option>ğŸ·ï¸ Named Entity (Premium Gas + Admin Approval)</option></select> <div class="entity-type-info svelte-mp6wtl"><small class="svelte-mp6wtl"><!></small></div></div> <div class="formation-group svelte-mp6wtl"><label for="entityNameInput" class="svelte-mp6wtl">ğŸ·ï¸ Entity Name:</label> <input type="text" id="entityNameInput" placeholder="e.g., trading, chat, governance" class="svelte-mp6wtl"/> <small class="svelte-mp6wtl">Display name for your entity</small></div> <div class="validators-section svelte-mp6wtl"><h4 class="svelte-mp6wtl">ğŸ‘¥ Validators:</h4> <div class="validators-list svelte-mp6wtl"></div> <button type="button" class="btn btn-secondary svelte-mp6wtl">â• Add Validator</button> <small class="svelte-mp6wtl">ğŸ’¡ Start with a single signer for personal use, or add more for multisig/corporate entities</small></div> <div class="threshold-section svelte-mp6wtl"><label for="thresholdSlider" class="svelte-mp6wtl"> </label> <input type="range" id="thresholdSlider" min="1" class="threshold-slider svelte-mp6wtl"/> <div class="threshold-info svelte-mp6wtl"><span>Total Weight: <strong class="svelte-mp6wtl"> </strong></span> <span>Required: <strong class="svelte-mp6wtl"> </strong></span></div></div> <!> <div class="expected-id-section svelte-mp6wtl"><h4 class="svelte-mp6wtl">ğŸ†” Expected Entity ID</h4> <div class="id-display svelte-mp6wtl"><code class="svelte-mp6wtl"> </code></div> <small class="svelte-mp6wtl"><!></small></div> <!> <div class="button-group svelte-mp6wtl"><button class="btn btn-primary svelte-mp6wtl"> </button> <button class="btn btn-secondary svelte-mp6wtl">ğŸ—‘ï¸ Clear Form</button></div></div></div>');function Li(t,s){He(s,!1);const a=le(),o=le(),v=le();let r=le({jurisdiction:"8545",entityType:"lazy",entityName:"ACME",validators:[{name:"alice",weight:1}],threshold:1}),d=le(!1),u=le("");function h(){Ze(r,e(r).validators=[...e(r).validators,{name:"",weight:1}])}function k(J){e(r).validators.length>1&&Ze(r,e(r).validators=e(r).validators.filter((ie,Ae)=>Ae!==J))}function g(){const J=e(r).validators.reduce((ie,Ae)=>ie+Ae.weight,0);e(r).threshold>J&&Ze(r,e(r).threshold=J)}async function c(){if(!e(d)){K(u,""),K(d,!0);try{if(!e(r).entityName.trim())throw new Error("Entity name is required");if(e(r).validators.some(ie=>!ie.name.trim()))throw new Error("All validators must have names");const J=e(r).validators.reduce((ie,Ae)=>ie+Ae.weight,0);if(e(r).threshold>J)throw new Error("Threshold cannot exceed total weight");await vt.createEntity({entityType:e(r).entityType,entityName:e(r).entityName,validators:e(r).validators.map(ie=>ie.name),threshold:e(r).threshold,jurisdiction:e(r).jurisdiction}),x()}catch(J){K(u,J instanceof Error?J.message:"Failed to create entity")}finally{K(d,!1)}}}function x(){K(r,{jurisdiction:"8545",entityType:"lazy",entityName:"ACME",validators:[{name:"alice",weight:1}],threshold:1}),K(u,"")}function _(J,ie){const Ve=`${J.map(xe=>`${xe.name}:${xe.weight}`).sort().join(",")}|${ie}`;let ze=0;for(let xe=0;xe<Ve.length;xe++){const Xe=Ve.charCodeAt(xe);ze=(ze<<5)-ze+Xe,ze=ze&ze}return Math.abs(ze).toString(16).padStart(8,"0")}function f(J,ie){return J==="lazy"?`0x${ie}`:J==="numbered"?"#42":"custom-name"}ke(()=>e(r),()=>{K(a,e(r).validators.reduce((J,ie)=>J+ie.weight,0))}),ke(()=>(e(r),e(a)),()=>{e(r).threshold>e(a)&&Ze(r,e(r).threshold=e(a))}),ke(()=>e(r),()=>{K(o,e(r).entityType==="lazy"?_(e(r).validators,e(r).threshold):"")}),ke(()=>(e(r),e(o)),()=>{K(v,f(e(r).entityType,e(o)))}),st(),qe();var E=Ni(),S=n(E),A=n(S),L=l(n(A),2);ae(()=>{e(r),lt(()=>{})});var P=n(L);P.value=P.__value="8545";var I=l(P);I.value=I.__value="8546";var M=l(I);M.value=M.__value="8547",i(L);var y=l(L,2),j=n(y),U=l(n(j)),Z=l(U,4);i(j),i(y),i(A);var H=l(A,2),w=l(n(H),2);ae(()=>{e(r),lt(()=>{})});var O=n(w);O.value=O.__value="lazy";var b=l(O);b.value=b.__value="numbered";var N=l(b);N.value=N.__value="named",i(w);var T=l(w,2),R=n(T),ue=n(R);{var se=J=>{var ie=Ei();Pe(),p(J,ie)},ee=J=>{var ie=Le(),Ae=we(ie);{var Ve=xe=>{var Xe=ki();Pe(),p(xe,Xe)},ze=xe=>{var Xe=$i();Pe(),p(xe,Xe)};Q(Ae,xe=>{e(r),m(()=>e(r).entityType==="numbered")?xe(Ve):xe(ze,!1)},!0)}p(J,ie)};Q(ue,J=>{e(r),m(()=>e(r).entityType==="lazy")?J(se):J(ee,!1)})}i(R),i(T),i(H);var W=l(H,2),q=l(n(W),2);ht(q),Pe(2),i(W);var G=l(W,2),z=l(n(G),2);Ue(z,5,()=>(e(r),m(()=>e(r).validators)),Be,(J,ie,Ae)=>{var Ve=zi(),ze=n(Ve);ae(()=>{e(ie),lt(()=>{})});var xe=n(ze);xe.value=xe.__value="";var Xe=l(xe);Xe.value=Xe.__value="alice";var Dt=l(Xe);Dt.value=Dt.__value="bob";var Mt=l(Dt);Mt.value=Mt.__value="carol";var Pt=l(Mt);Pt.value=Pt.__value="david";var sa=l(Pt);sa.value=sa.__value="eve",i(ze);var Tt=l(ze,2);ht(Tt);var ka=l(Tt,2);{var $a=nt=>{var ia=Ii();F("click",ia,()=>k(Ae)),p(nt,ia)};Q(ka,nt=>{e(r),m(()=>e(r).validators.length>1)&&nt($a)})}i(Ve),_t(ze,()=>e(ie).name,nt=>(e(ie).name=nt,lt(()=>e(r)))),kt(Tt,()=>e(ie).weight,nt=>(e(ie).weight=nt,lt(()=>e(r)))),F("input",Tt,g),p(J,Ve)}),i(z);var Y=l(z,2);Pe(2),i(G);var pe=l(G,2),_e=n(pe),Te=n(_e);i(_e);var te=l(_e,2);ht(te);var V=l(te,2),re=n(V),B=l(n(re)),D=n(B,!0);i(B),i(re);var he=l(re,2),de=l(n(he)),ce=n(de,!0);i(de),i(he),i(V),i(pe);var oe=l(pe,2);{var ve=J=>{var ie=Ci(),Ae=l(n(ie),2),Ve=n(Ae),ze=n(Ve,!0);i(Ve),i(Ae),Pe(2),i(ie),ae(()=>C(ze,e(o))),p(J,ie)};Q(oe,J=>{e(r),m(()=>e(r).entityType==="lazy")&&J(ve)})}var fe=l(oe,2),ye=l(n(fe),2),be=n(ye),X=n(be,!0);i(be),i(ye);var me=l(ye,2),Ce=n(me);{var $e=J=>{var ie=De("This will be your entity's unique identifier, derived from the quorum hash.");p(J,ie)},Ie=J=>{var ie=Le(),Ae=we(ie);{var Ve=xe=>{var Xe=De("This will be your entity's sequential number (actual number may vary).");p(xe,Xe)},ze=xe=>{var Xe=De("This will be your custom entity name (subject to admin approval).");p(xe,Xe)};Q(Ae,xe=>{e(r),m(()=>e(r).entityType==="numbered")?xe(Ve):xe(ze,!1)},!0)}p(J,ie)};Q(Ce,J=>{e(r),m(()=>e(r).entityType==="lazy")?J($e):J(Ie,!1)})}i(me),i(fe);var Re=l(fe,2);{var et=J=>{var ie=Ai(),Ae=n(ie);i(ie),ae(()=>C(Ae,`âŒ ${e(u)??""}`)),p(J,ie)};Q(Re,J=>{e(u)&&J(et)})}var ct=l(Re,2),it=n(ct),jt=n(it,!0);i(it);var aa=l(it,2);i(ct),i(S),i(E),ae(()=>{C(U,` ${e(r),m(()=>e(r).jurisdiction==="8545"?"Ethereum Mainnet":e(r).jurisdiction==="8546"?"Polygon Network":"Arbitrum One")??""}`),C(Z,` ${e(r),m(()=>e(r).jurisdiction)??""}`),C(Te,`ğŸ¯ Threshold: ${e(r),m(()=>e(r).threshold)??""}`),Ge(te,"max",e(a)),C(D,e(a)),C(ce,(e(r),m(()=>e(r).threshold))),C(X,e(v)),it.disabled=e(d),C(jt,e(d)?"ğŸ”„ Creating...":"ğŸš€ Create Entity"),aa.disabled=e(d)}),_t(L,()=>e(r).jurisdiction,J=>Ze(r,e(r).jurisdiction=J)),_t(w,()=>e(r).entityType,J=>Ze(r,e(r).entityType=J)),kt(q,()=>e(r).entityName,J=>Ze(r,e(r).entityName=J)),F("click",Y,h),kt(te,()=>e(r).threshold,J=>Ze(r,e(r).threshold=J)),F("click",it,c),F("click",aa,x),p(t,E),Oe()}var ji=$('<div class="entity-item svelte-eib5f9"><strong> </strong> <div class="entity-type svelte-eib5f9"> </div></div>'),Di=$('<div class="no-entities svelte-eib5f9"> </div>'),Mi=$('<div class="jurisdiction-card svelte-eib5f9"><div class="jurisdiction-header svelte-eib5f9"><h4 class="svelte-eib5f9"> </h4> <span><!></span></div> <div class="jurisdiction-details svelte-eib5f9"><div class="detail-row svelte-eib5f9"><span class="svelte-eib5f9">ğŸ“¡ RPC Port:</span> <span class="svelte-eib5f9"> </span></div> <div class="detail-row svelte-eib5f9"><span class="svelte-eib5f9">ğŸ”— Chain ID:</span> <span class="svelte-eib5f9"> </span></div> <div class="detail-row svelte-eib5f9"><span class="svelte-eib5f9">ğŸ“Š Block Number:</span> <span class="svelte-eib5f9"> </span></div> <div class="detail-row svelte-eib5f9"><span class="svelte-eib5f9">â° Last Update:</span> <span class="svelte-eib5f9"> </span></div> <div class="detail-row svelte-eib5f9"><span class="svelte-eib5f9">ğŸ“ Contract:</span> <span class="contract-address svelte-eib5f9"> </span></div> <div class="detail-row svelte-eib5f9"><span class="svelte-eib5f9">ğŸ”¢ Next Entity #:</span> <span class="svelte-eib5f9"> </span></div></div> <div class="entities-section svelte-eib5f9"><h5 class="svelte-eib5f9">ğŸ“‹ Registered Entities:</h5> <div class="entities-list svelte-eib5f9"><!></div></div> <div class="jurisdiction-actions svelte-eib5f9"><!></div></div>'),Pi=$('<div class="jurisdictions-panel svelte-eib5f9"><h3 class="svelte-eib5f9">ğŸ›ï¸ Blockchain Jurisdictions Status</h3> <div class="jurisdiction-grid svelte-eib5f9"></div> <div class="global-actions svelte-eib5f9"><!> <!></div></div>');function qi(t,s){He(s,!1);let a=le([{port:8545,name:"Ethereum Mainnet",icon:"ğŸ”·",chainId:"31337",blockNumber:0,contractAddress:"",nextEntityNumber:1,status:"checking",lastUpdate:"",entities:[]},{port:8546,name:"Polygon Network",icon:"ğŸŸ£",chainId:"31337",blockNumber:0,contractAddress:"",nextEntityNumber:1,status:"checking",lastUpdate:"",entities:[]},{port:8547,name:"Arbitrum One",icon:"ğŸ”µ",chainId:"31337",blockNumber:0,contractAddress:"",nextEntityNumber:1,status:"checking",lastUpdate:"",entities:[]}]);async function o(c){c.status="checking",c.lastUpdate="Checking...";try{const x=await fetch(`http://localhost:${c.port}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"eth_blockNumber",params:[],id:1})});if(!x.ok)throw new Error("Network unavailable");const _=await x.json();if(_.error)throw new Error(_.error.message);c.blockNumber=parseInt(_.result,16),c.status="connected",c.lastUpdate=new Date().toLocaleTimeString(),c.contractAddress="0x1234...5678",c.nextEntityNumber=Math.floor(Math.random()*100)+1,c.entities=[{id:"#1",name:"Demo Entity",type:"Numbered"},{id:"#2",name:"Test Entity",type:"Numbered"}]}catch{c.status="disconnected",c.lastUpdate="Failed",c.contractAddress="Not available",c.nextEntityNumber=0,c.entities=[]}K(a,[...e(a)])}async function v(){for(const c of e(a))await o(c)}async function r(){alert("Contract deployment feature coming soon! For now, use: cd contracts && npx hardhat ignition deploy ignition/modules/Depository.ts --network localhost")}Ct(()=>{v()}),qe();var d=Pi(),u=l(n(d),2);Ue(u,5,()=>e(a),Be,(c,x)=>{var _=Mi(),f=n(_),E=n(f),S=n(E);i(E);var A=l(E,2),L=n(A);{var P=B=>{var D=De("âœ… Connected");p(B,D)},I=B=>{var D=Le(),he=we(D);{var de=oe=>{var ve=De("âŒ Disconnected");p(oe,ve)},ce=oe=>{var ve=De("ğŸ”„ Checking...");p(oe,ve)};Q(he,oe=>{e(x).status==="disconnected"?oe(de):oe(ce,!1)},!0)}p(B,D)};Q(L,B=>{e(x).status==="connected"?B(P):B(I,!1)})}i(A),i(f);var M=l(f,2),y=n(M),j=l(n(y),2),U=n(j,!0);i(j),i(y);var Z=l(y,2),H=l(n(Z),2),w=n(H,!0);i(H),i(Z);var O=l(Z,2),b=l(n(O),2),N=n(b,!0);i(b),i(O);var T=l(O,2),R=l(n(T),2),ue=n(R,!0);i(R),i(T);var se=l(T,2),ee=l(n(se),2),W=n(ee,!0);i(ee),i(se);var q=l(se,2),G=l(n(q),2),z=n(G);i(G),i(q),i(M);var Y=l(M,2),pe=l(n(Y),2),_e=n(pe);{var Te=B=>{var D=Le(),he=we(D);Ue(he,1,()=>e(x).entities,Be,(de,ce)=>{var oe=ji(),ve=n(oe),fe=n(ve,!0);i(ve);var ye=l(ve),be=l(ye),X=n(be,!0);i(be),i(oe),ae(()=>{C(fe,e(ce).id),C(ye,`: ${e(ce).name??""} `),C(X,e(ce).type)}),p(de,oe)}),p(B,D)},te=B=>{var D=Di(),he=n(D,!0);i(D),ae(()=>C(he,e(x).status==="connected"?"No entities registered yet":"Connection required")),p(B,D)};Q(_e,B=>{e(x).entities.length>0?B(Te):B(te,!1)})}i(pe),i(Y);var V=l(Y,2),re=n(V);{let B=At(()=>e(x).status==="checking");Bt(re,{variant:"secondary",size:"small",get disabled(){return e(B)},$$events:{click:()=>o(e(x))},children:(D,he)=>{Pe();var de=De("ğŸ”„ Refresh");p(D,de)},$$slots:{default:!0}})}i(V),i(_),ae(()=>{Ge(_,"id",`jurisdiction-${e(x).port??""}`),C(S,`${e(x).icon??""} ${e(x).name??""}`),Ee(A,1,`connection-status ${e(x).status??""}`,"svelte-eib5f9"),C(U,e(x).port),C(w,e(x).chainId),C(N,e(x).blockNumber),C(ue,e(x).lastUpdate),C(W,e(x).contractAddress),C(z,`#${e(x).nextEntityNumber??""}`)}),p(c,_)}),i(u);var h=l(u,2),k=n(h);Bt(k,{variant:"primary",$$events:{click:v},children:(c,x)=>{Pe();var _=De("ğŸ”„ Refresh All");p(c,_)},$$slots:{default:!0}});var g=l(k,2);Bt(g,{variant:"secondary",$$events:{click:r},children:(c,x)=>{Pe();var _=De("ğŸš€ Deploy Contracts");p(c,_)},$$slots:{default:!0}}),i(h),i(d),p(t,d),Oe()}var Hi=$('<meta name="description" content="XLN Visual Debugger - Real-time consensus monitoring and debugging interface"/>'),Oi=$('<div class="loading-container svelte-1xh7afz"><div class="loading-spinner svelte-1xh7afz">ğŸ”„</div> <div class="loading-text svelte-1xh7afz">Loading XLN Environment...</div></div>'),Fi=$('<div class="error-container svelte-1xh7afz"><div class="error-icon svelte-1xh7afz">âŒ</div> <div class="error-text svelte-1xh7afz">Failed to load XLN Environment</div> <div class="error-details svelte-1xh7afz"> </div> <button class="retry-btn svelte-1xh7afz">Retry</button></div>'),Ri=$('<div class="main-content svelte-1xh7afz"><div class="entity-panels-container svelte-1xh7afz" id="entityPanelsContainer"></div> <!> <div class="actionable-tabs-container svelte-1xh7afz"><div class="tabs-header svelte-1xh7afz"><button id="formationTab">ğŸ—ï¸ Entity Formation</button> <button id="jurisdictionsTab">ğŸ›ï¸ Jurisdictions</button></div> <div id="formationTabContent"><!></div> <div id="jurisdictionsTabContent"><!></div></div></div> <!>',1),Vi=$('<main class="app svelte-1xh7afz"><!> <!></main>');function Yi(t,s){He(s,!1);const[a,o]=gt(),v=()=>Ne($t,"$isLoading",a),r=()=>Ne(It,"$error",a),d=()=>Ne(Fe,"$tabs",a);let u=le("formation");function h(f){K(u,f)}Ct(async()=>{try{console.log("ğŸš€ Initializing XLN Svelte application..."),wt.initialize(),ot.loadFromStorage(),ot.initializeDefaultTabs(),tt.initialize(),await vt.initialize(),console.log("âœ… XLN Svelte application initialized successfully")}catch(f){console.error("âŒ Failed to initialize XLN application:",f)}}),qe();var k=Vi();es(f=>{var E=Hi();ts.title="XLN Consensus Visual Debug",p(f,E)});var g=n(k);ks(g,{});var c=l(g,2);{var x=f=>{var E=Oi();p(f,E)},_=f=>{var E=Le(),S=we(E);{var A=P=>{var I=Fi(),M=l(n(I),4),y=n(M,!0);i(M);var j=l(M,2);i(I),ae(()=>C(y,r())),F("click",j,()=>vt.initialize()),p(P,I)},L=P=>{var I=Ri(),M=we(I),y=n(M);Ue(y,7,d,q=>q.id,(q,G,z)=>{{let Y=At(()=>e(z)===d().length-1);ci(q,{get tab(){return e(G)},get isLast(){return e(Y)}})}}),i(y);var j=l(y,2);Ti(j,{});var U=l(j,2),Z=n(U),H=n(Z);let w;var O=l(H,2);let b;i(Z);var N=l(Z,2);let T;var R=n(N);Li(R,{}),i(N);var ue=l(N,2);let se;var ee=n(ue);qi(ee,{}),i(ue),i(U),i(M);var W=l(M,2);Is(W,{}),ae((q,G,z,Y)=>{Ge(y,"data-panel-count",d().length),w=Ee(H,1,"tab-button svelte-1xh7afz",null,w,q),b=Ee(O,1,"tab-button svelte-1xh7afz",null,b,G),T=Ee(N,1,"tab-content svelte-1xh7afz",null,T,z),se=Ee(ue,1,"tab-content svelte-1xh7afz",null,se,Y)},[()=>({active:e(u)==="formation"}),()=>({active:e(u)==="jurisdictions"}),()=>({active:e(u)==="formation"}),()=>({active:e(u)==="jurisdictions"})]),F("click",H,()=>h("formation")),F("click",O,()=>h("jurisdictions")),p(P,I)};Q(S,P=>{r()?P(A):P(L,!1)},!0)}p(f,E)};Q(c,f=>{v()?f(x):f(_,!1)})}i(k),p(t,k),Oe(),o()}export{Yi as component};
