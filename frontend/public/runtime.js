var WQ0=Object.create;var{getPrototypeOf:KQ0,defineProperty:pU,getOwnPropertyNames:qy,getOwnPropertyDescriptor:GQ0}=Object,Wy=Object.prototype.hasOwnProperty;var V2=($,Q,Z)=>{Z=$!=null?WQ0(KQ0($)):{};let X=Q||!$||!$.__esModule?pU(Z,"default",{value:$,enumerable:!0}):Z;for(let Y of qy($))if(!Wy.call(X,Y))pU(X,Y,{get:()=>$[Y],enumerable:!0});return X},zy=new WeakMap,Q5=($)=>{var Q=zy.get($),Z;if(Q)return Q;if(Q=pU({},"__esModule",{value:!0}),$&&typeof $==="object"||typeof $==="function")qy($).map((X)=>!Wy.call(Q,X)&&pU(Q,X,{get:()=>$[X],enumerable:!(Z=GQ0($,X))||Z.enumerable}));return zy.set($,Q),Q},_1=($,Q)=>()=>(Q||$((Q={exports:{}}).exports,Q),Q.exports);var x1=($,Q)=>{for(var Z in Q)pU($,Z,{get:Q[Z],enumerable:!0,configurable:!0,set:(X)=>Q[Z]=()=>X})};var p=($,Q)=>()=>($&&(Q=$($=0)),Q);var Ky=($)=>Promise.all($),QP=(($)=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy($,{get:(Q,Z)=>(typeof require<"u"?require:Q)[Z]}):$)(function($){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+$+'" is not supported')});var Gy=_1((UQ0)=>{UQ0.supports=function(...Q){let Z=Q.reduce((X,Y)=>Object.assign(X,Y),{});return Object.assign(Z,{snapshots:Z.snapshots||!1,permanence:Z.permanence||!1,seek:Z.seek||!1,clear:Z.clear||!1,getMany:Z.getMany||!1,keyIterator:Z.keyIterator||!1,valueIterator:Z.valueIterator||!1,iteratorNextv:Z.iteratorNextv||!1,iteratorAll:Z.iteratorAll||!1,status:Z.status||!1,createIfMissing:Z.createIfMissing||!1,errorIfExists:Z.errorIfExists||!1,deferredOpen:Z.deferredOpen||!1,promises:Z.promises||!1,streams:Z.streams||!1,encodings:Object.assign({},Z.encodings),events:Object.assign({},Z.events),additionalMethods:Object.assign({},Z.additionalMethods)})}});var J3=_1((ww0,Uy)=>{Uy.exports=class extends Error{constructor(Q,Z){super(Q||"");if(typeof Z==="object"&&Z!==null){if(Z.code)this.code=String(Z.code);if(Z.expected)this.expected=!0;if(Z.transient)this.transient=!0;if(Z.cause)this.cause=Z.cause}if(Error.captureStackTrace)Error.captureStackTrace(this,this.constructor)}}});var T8={};x1(T8,{transcode:()=>sQ0,resolveObjectURL:()=>nQ0,kStringMaxLength:()=>Ny,kMaxLength:()=>uU,isUtf8:()=>rQ0,isAscii:()=>aQ0,default:()=>tQ0,constants:()=>LQ0,btoa:()=>jQ0,atob:()=>RQ0,INSPECT_MAX_BYTES:()=>Ry,File:()=>NQ0,Buffer:()=>I0,Blob:()=>CQ0});function OQ0($){var Q=$.length;if(Q%4>0)throw Error("Invalid string. Length must be a multiple of 4");var Z=$.indexOf("=");if(Z===-1)Z=Q;var X=Z===Q?0:4-Z%4;return[Z,X]}function DQ0($,Q){return($+Q)*3/4-Q}function MQ0($){var Q,Z=OQ0($),X=Z[0],Y=Z[1],z=new Uint8Array(DQ0(X,Y)),J=0,q=Y>0?X-4:X,W;for(W=0;W<q;W+=4)Q=Y7[$.charCodeAt(W)]<<18|Y7[$.charCodeAt(W+1)]<<12|Y7[$.charCodeAt(W+2)]<<6|Y7[$.charCodeAt(W+3)],z[J++]=Q>>16&255,z[J++]=Q>>8&255,z[J++]=Q&255;if(Y===2)Q=Y7[$.charCodeAt(W)]<<2|Y7[$.charCodeAt(W+1)]>>4,z[J++]=Q&255;if(Y===1)Q=Y7[$.charCodeAt(W)]<<10|Y7[$.charCodeAt(W+1)]<<4|Y7[$.charCodeAt(W+2)]>>2,z[J++]=Q>>8&255,z[J++]=Q&255;return z}function PQ0($){return s3[$>>18&63]+s3[$>>12&63]+s3[$>>6&63]+s3[$&63]}function HQ0($,Q,Z){var X,Y=[];for(var z=Q;z<Z;z+=3)X=($[z]<<16&16711680)+($[z+1]<<8&65280)+($[z+2]&255),Y.push(PQ0(X));return Y.join("")}function Oy($){var Q,Z=$.length,X=Z%3,Y=[],z=16383;for(var J=0,q=Z-X;J<q;J+=z)Y.push(HQ0($,J,J+z>q?q:J+z));if(X===1)Q=$[Z-1],Y.push(s3[Q>>2]+s3[Q<<4&63]+"==");else if(X===2)Q=($[Z-2]<<8)+$[Z-1],Y.push(s3[Q>>10]+s3[Q>>4&63]+s3[Q<<2&63]+"=");return Y.join("")}function ZP($,Q,Z,X,Y){var z,J,q=Y*8-X-1,W=(1<<q)-1,G=W>>1,U=-7,D=Z?Y-1:0,P=Z?-1:1,H=$[Q+D];D+=P,z=H&(1<<-U)-1,H>>=-U,U+=q;for(;U>0;z=z*256+$[Q+D],D+=P,U-=8);J=z&(1<<-U)-1,z>>=-U,U+=X;for(;U>0;J=J*256+$[Q+D],D+=P,U-=8);if(z===0)z=1-G;else if(z===W)return J?NaN:(H?-1:1)*(1/0);else J=J+Math.pow(2,X),z=z-G;return(H?-1:1)*J*Math.pow(2,z-X)}function jy($,Q,Z,X,Y,z){var J,q,W,G=z*8-Y-1,U=(1<<G)-1,D=U>>1,P=Y===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=X?0:z-1,N=X?1:-1,C=Q<0||Q===0&&1/Q<0?1:0;if(Q=Math.abs(Q),isNaN(Q)||Q===1/0)q=isNaN(Q)?1:0,J=U;else{if(J=Math.floor(Math.log(Q)/Math.LN2),Q*(W=Math.pow(2,-J))<1)J--,W*=2;if(J+D>=1)Q+=P/W;else Q+=P*Math.pow(2,1-D);if(Q*W>=2)J++,W/=2;if(J+D>=U)q=0,J=U;else if(J+D>=1)q=(Q*W-1)*Math.pow(2,Y),J=J+D;else q=Q*Math.pow(2,D-1)*Math.pow(2,Y),J=0}for(;Y>=8;$[Z+H]=q&255,H+=N,q/=256,Y-=8);J=J<<Y|q,G+=Y;for(;G>0;$[Z+H]=J&255,H+=N,J/=256,G-=8);$[Z+H-N]|=C*128}function WQ($){if($>uU)throw RangeError('The value "'+$+'" is invalid for option "size"');let Q=new Uint8Array($);return Object.setPrototypeOf(Q,I0.prototype),Q}function QF($,Q,Z){return class extends Z{constructor(){super();Object.defineProperty(this,"message",{value:Q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${$}]`,this.stack,delete this.name}get code(){return $}set code(X){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:X,writable:!0})}toString(){return`${this.name} [${$}]: ${this.message}`}}}function I0($,Q,Z){if(typeof $==="number"){if(typeof Q==="string")throw TypeError('The "string" argument must be of type string. Received type number');return ZF($)}return Cy($,Q,Z)}function Cy($,Q,Z){if(typeof $==="string")return wQ0($,Q);if(ArrayBuffer.isView($))return BQ0($);if($==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $);if(t3($,ArrayBuffer)||$&&t3($.buffer,ArrayBuffer))return eT($,Q,Z);if(typeof SharedArrayBuffer<"u"&&(t3($,SharedArrayBuffer)||$&&t3($.buffer,SharedArrayBuffer)))return eT($,Q,Z);if(typeof $==="number")throw TypeError('The "value" argument must not be of type number. Received type number');let X=$.valueOf&&$.valueOf();if(X!=null&&X!==$)return I0.from(X,Q,Z);let Y=EQ0($);if(Y)return Y;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof $[Symbol.toPrimitive]==="function")return I0.from($[Symbol.toPrimitive]("string"),Q,Z);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}function Ly($){if(typeof $!=="number")throw TypeError('"size" argument must be of type number');else if($<0)throw RangeError('The value "'+$+'" is invalid for option "size"')}function AQ0($,Q,Z){if(Ly($),$<=0)return WQ($);if(Q!==void 0)return typeof Z==="string"?WQ($).fill(Q,Z):WQ($).fill(Q);return WQ($)}function ZF($){return Ly($),WQ($<0?0:XF($)|0)}function wQ0($,Q){if(typeof Q!=="string"||Q==="")Q="utf8";if(!I0.isEncoding(Q))throw TypeError("Unknown encoding: "+Q);let Z=Ty($,Q)|0,X=WQ(Z),Y=X.write($,Q);if(Y!==Z)X=X.slice(0,Y);return X}function tT($){let Q=$.length<0?0:XF($.length)|0,Z=WQ(Q);for(let X=0;X<Q;X+=1)Z[X]=$[X]&255;return Z}function BQ0($){if(t3($,Uint8Array)){let Q=new Uint8Array($);return eT(Q.buffer,Q.byteOffset,Q.byteLength)}return tT($)}function eT($,Q,Z){if(Q<0||$.byteLength<Q)throw RangeError('"offset" is outside of buffer bounds');if($.byteLength<Q+(Z||0))throw RangeError('"length" is outside of buffer bounds');let X;if(Q===void 0&&Z===void 0)X=new Uint8Array($);else if(Z===void 0)X=new Uint8Array($,Q);else X=new Uint8Array($,Q,Z);return Object.setPrototypeOf(X,I0.prototype),X}function EQ0($){if(I0.isBuffer($)){let Q=XF($.length)|0,Z=WQ(Q);if(Z.length===0)return Z;return $.copy(Z,0,0,Q),Z}if($.length!==void 0){if(typeof $.length!=="number"||Number.isNaN($.length))return WQ(0);return tT($)}if($.type==="Buffer"&&Array.isArray($.data))return tT($.data)}function XF($){if($>=uU)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+uU.toString(16)+" bytes");return $|0}function Ty($,Q){if(I0.isBuffer($))return $.length;if(ArrayBuffer.isView($)||t3($,ArrayBuffer))return $.byteLength;if(typeof $!=="string")throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);let Z=$.length,X=arguments.length>2&&arguments[2]===!0;if(!X&&Z===0)return 0;let Y=!1;for(;;)switch(Q){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return $F($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z*2;case"hex":return Z>>>1;case"base64":return fy($).length;default:if(Y)return X?-1:$F($).length;Q=(""+Q).toLowerCase(),Y=!0}}function IQ0($,Q,Z){let X=!1;if(Q===void 0||Q<0)Q=0;if(Q>this.length)return"";if(Z===void 0||Z>this.length)Z=this.length;if(Z<=0)return"";if(Z>>>=0,Q>>>=0,Z<=Q)return"";if(!$)$="utf8";while(!0)switch($){case"hex":return hQ0(this,Q,Z);case"utf8":case"utf-8":return Ay(this,Q,Z);case"ascii":return yQ0(this,Q,Z);case"latin1":case"binary":return gQ0(this,Q,Z);case"base64":return bQ0(this,Q,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return mQ0(this,Q,Z);default:if(X)throw TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),X=!0}}function FJ($,Q,Z){let X=$[Q];$[Q]=$[Z],$[Z]=X}function Fy($,Q,Z,X,Y){if($.length===0)return-1;if(typeof Z==="string")X=Z,Z=0;else if(Z>2147483647)Z=2147483647;else if(Z<-2147483648)Z=-2147483648;if(Z=+Z,Number.isNaN(Z))Z=Y?0:$.length-1;if(Z<0)Z=$.length+Z;if(Z>=$.length)if(Y)return-1;else Z=$.length-1;else if(Z<0)if(Y)Z=0;else return-1;if(typeof Q==="string")Q=I0.from(Q,X);if(I0.isBuffer(Q)){if(Q.length===0)return-1;return My($,Q,Z,X,Y)}else if(typeof Q==="number"){if(Q=Q&255,typeof Uint8Array.prototype.indexOf==="function")if(Y)return Uint8Array.prototype.indexOf.call($,Q,Z);else return Uint8Array.prototype.lastIndexOf.call($,Q,Z);return My($,[Q],Z,X,Y)}throw TypeError("val must be string, number or Buffer")}function My($,Q,Z,X,Y){let z=1,J=$.length,q=Q.length;if(X!==void 0){if(X=String(X).toLowerCase(),X==="ucs2"||X==="ucs-2"||X==="utf16le"||X==="utf-16le"){if($.length<2||Q.length<2)return-1;z=2,J/=2,q/=2,Z/=2}}function W(U,D){if(z===1)return U[D];else return U.readUInt16BE(D*z)}let G;if(Y){let U=-1;for(G=Z;G<J;G++)if(W($,G)===W(Q,U===-1?0:G-U)){if(U===-1)U=G;if(G-U+1===q)return U*z}else{if(U!==-1)G-=G-U;U=-1}}else{if(Z+q>J)Z=J-q;for(G=Z;G>=0;G--){let U=!0;for(let D=0;D<q;D++)if(W($,G+D)!==W(Q,D)){U=!1;break}if(U)return G}}return-1}function _Q0($,Q,Z,X){Z=Number(Z)||0;let Y=$.length-Z;if(!X)X=Y;else if(X=Number(X),X>Y)X=Y;let z=Q.length;if(X>z/2)X=z/2;let J;for(J=0;J<X;++J){let q=parseInt(Q.substr(J*2,2),16);if(Number.isNaN(q))return J;$[Z+J]=q}return J}function SQ0($,Q,Z,X){return XP($F(Q,$.length-Z),$,Z,X)}function fQ0($,Q,Z,X){return XP(dQ0(Q),$,Z,X)}function kQ0($,Q,Z,X){return XP(fy(Q),$,Z,X)}function xQ0($,Q,Z,X){return XP(lQ0(Q,$.length-Z),$,Z,X)}function bQ0($,Q,Z){if(Q===0&&Z===$.length)return Oy($);else return Oy($.slice(Q,Z))}function Ay($,Q,Z){Z=Math.min($.length,Z);let X=[],Y=Q;while(Y<Z){let z=$[Y],J=null,q=z>239?4:z>223?3:z>191?2:1;if(Y+q<=Z){let W,G,U,D;switch(q){case 1:if(z<128)J=z;break;case 2:if(W=$[Y+1],(W&192)===128){if(D=(z&31)<<6|W&63,D>127)J=D}break;case 3:if(W=$[Y+1],G=$[Y+2],(W&192)===128&&(G&192)===128){if(D=(z&15)<<12|(W&63)<<6|G&63,D>2047&&(D<55296||D>57343))J=D}break;case 4:if(W=$[Y+1],G=$[Y+2],U=$[Y+3],(W&192)===128&&(G&192)===128&&(U&192)===128){if(D=(z&15)<<18|(W&63)<<12|(G&63)<<6|U&63,D>65535&&D<1114112)J=D}}}if(J===null)J=65533,q=1;else if(J>65535)J-=65536,X.push(J>>>10&1023|55296),J=56320|J&1023;X.push(J),Y+=q}return vQ0(X)}function vQ0($){let Q=$.length;if(Q<=Py)return String.fromCharCode.apply(String,$);let Z="",X=0;while(X<Q)Z+=String.fromCharCode.apply(String,$.slice(X,X+=Py));return Z}function yQ0($,Q,Z){let X="";Z=Math.min($.length,Z);for(let Y=Q;Y<Z;++Y)X+=String.fromCharCode($[Y]&127);return X}function gQ0($,Q,Z){let X="";Z=Math.min($.length,Z);for(let Y=Q;Y<Z;++Y)X+=String.fromCharCode($[Y]);return X}function hQ0($,Q,Z){let X=$.length;if(!Q||Q<0)Q=0;if(!Z||Z<0||Z>X)Z=X;let Y="";for(let z=Q;z<Z;++z)Y+=iQ0[$[z]];return Y}function mQ0($,Q,Z){let X=$.slice(Q,Z),Y="";for(let z=0;z<X.length-1;z+=2)Y+=String.fromCharCode(X[z]+X[z+1]*256);return Y}function q9($,Q,Z){if($%1!==0||$<0)throw RangeError("offset is not uint");if($+Q>Z)throw RangeError("Trying to access beyond buffer length")}function n2($,Q,Z,X,Y,z){if(!I0.isBuffer($))throw TypeError('"buffer" argument must be a Buffer instance');if(Q>Y||Q<z)throw RangeError('"value" argument is out of bounds');if(Z+X>$.length)throw RangeError("Index out of range")}function wy($,Q,Z,X,Y){Sy(Q,X,Y,$,Z,7);let z=Number(Q&BigInt(4294967295));$[Z++]=z,z=z>>8,$[Z++]=z,z=z>>8,$[Z++]=z,z=z>>8,$[Z++]=z;let J=Number(Q>>BigInt(32)&BigInt(4294967295));return $[Z++]=J,J=J>>8,$[Z++]=J,J=J>>8,$[Z++]=J,J=J>>8,$[Z++]=J,Z}function By($,Q,Z,X,Y){Sy(Q,X,Y,$,Z,7);let z=Number(Q&BigInt(4294967295));$[Z+7]=z,z=z>>8,$[Z+6]=z,z=z>>8,$[Z+5]=z,z=z>>8,$[Z+4]=z;let J=Number(Q>>BigInt(32)&BigInt(4294967295));return $[Z+3]=J,J=J>>8,$[Z+2]=J,J=J>>8,$[Z+1]=J,J=J>>8,$[Z]=J,Z+8}function Ey($,Q,Z,X,Y,z){if(Z+X>$.length)throw RangeError("Index out of range");if(Z<0)throw RangeError("Index out of range")}function Iy($,Q,Z,X,Y){if(Q=+Q,Z=Z>>>0,!Y)Ey($,Q,Z,4,340282346638528860000000000000000000000,-340282346638528860000000000000000000000);return jy($,Q,Z,X,23,4),Z+4}function _y($,Q,Z,X,Y){if(Q=+Q,Z=Z>>>0,!Y)Ey($,Q,Z,8,179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,-179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000);return jy($,Q,Z,X,52,8),Z+8}function Hy($){let Q="",Z=$.length,X=$[0]==="-"?1:0;for(;Z>=X+4;Z-=3)Q=`_${$.slice(Z-3,Z)}${Q}`;return`${$.slice(0,Z)}${Q}`}function pQ0($,Q,Z){if(DW(Q,"offset"),$[Q]===void 0||$[Q+Z]===void 0)cU(Q,$.length-(Z+1))}function Sy($,Q,Z,X,Y,z){if($>Z||$<Q){let J=typeof Q==="bigint"?"n":"",q;if(z>3)if(Q===0||Q===BigInt(0))q=`>= 0${J} and < 2${J} ** ${(z+1)*8}${J}`;else q=`>= -(2${J} ** ${(z+1)*8-1}${J}) and < 2 ** ${(z+1)*8-1}${J}`;else q=`>= ${Q}${J} and <= ${Z}${J}`;throw new sT("value",q,$)}pQ0(X,Y,z)}function DW($,Q){if(typeof $!=="number")throw new FQ0(Q,"number",$)}function cU($,Q,Z){if(Math.floor($)!==$)throw DW($,Z),new sT(Z||"offset","an integer",$);if(Q<0)throw new TQ0;throw new sT(Z||"offset",`>= ${Z?1:0} and <= ${Q}`,$)}function cQ0($){if($=$.split("=")[0],$=$.trim().replace(uQ0,""),$.length<2)return"";while($.length%4!==0)$=$+"=";return $}function $F($,Q){Q=Q||1/0;let Z,X=$.length,Y=null,z=[];for(let J=0;J<X;++J){if(Z=$.charCodeAt(J),Z>55295&&Z<57344){if(!Y){if(Z>56319){if((Q-=3)>-1)z.push(239,191,189);continue}else if(J+1===X){if((Q-=3)>-1)z.push(239,191,189);continue}Y=Z;continue}if(Z<56320){if((Q-=3)>-1)z.push(239,191,189);Y=Z;continue}Z=(Y-55296<<10|Z-56320)+65536}else if(Y){if((Q-=3)>-1)z.push(239,191,189)}if(Y=null,Z<128){if((Q-=1)<0)break;z.push(Z)}else if(Z<2048){if((Q-=2)<0)break;z.push(Z>>6|192,Z&63|128)}else if(Z<65536){if((Q-=3)<0)break;z.push(Z>>12|224,Z>>6&63|128,Z&63|128)}else if(Z<1114112){if((Q-=4)<0)break;z.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,Z&63|128)}else throw Error("Invalid code point")}return z}function dQ0($){let Q=[];for(let Z=0;Z<$.length;++Z)Q.push($.charCodeAt(Z)&255);return Q}function lQ0($,Q){let Z,X,Y,z=[];for(let J=0;J<$.length;++J){if((Q-=2)<0)break;Z=$.charCodeAt(J),X=Z>>8,Y=Z%256,z.push(Y),z.push(X)}return z}function fy($){return MQ0(cQ0($))}function XP($,Q,Z,X){let Y;for(Y=0;Y<X;++Y){if(Y+Z>=Q.length||Y>=$.length)break;Q[Y+Z]=$[Y]}return Y}function t3($,Q){return $ instanceof Q||$!=null&&$.constructor!=null&&$.constructor.name!=null&&$.constructor.name===Q.name}function GX($){return typeof BigInt>"u"?oQ0:$}function oQ0(){throw Error("BigInt not supported")}function YF($){return()=>{throw Error($+" is not implemented for node:buffer browser polyfill")}}var s3,Y7,aT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",TJ,Vy,Dy,Ry=50,uU=2147483647,Ny=536870888,jQ0,RQ0,NQ0,CQ0,LQ0,TQ0,FQ0,sT,Py=4096,uQ0,iQ0,nQ0,rQ0,aQ0=($)=>{for(let Q of $)if(Q.charCodeAt(0)>127)return!1;return!0},sQ0,tQ0;var s6=p(()=>{s3=[],Y7=[];for(TJ=0,Vy=aT.length;TJ<Vy;++TJ)s3[TJ]=aT[TJ],Y7[aT.charCodeAt(TJ)]=TJ;Y7[45]=62;Y7[95]=63;Dy=typeof Symbol==="function"&&typeof Symbol.for==="function"?Symbol.for("nodejs.util.inspect.custom"):null,jQ0=globalThis.btoa,RQ0=globalThis.atob,NQ0=globalThis.File,CQ0=globalThis.Blob,LQ0={MAX_LENGTH:uU,MAX_STRING_LENGTH:Ny};TQ0=QF("ERR_BUFFER_OUT_OF_BOUNDS",function($){if($)return`${$} is outside of buffer bounds`;return"Attempt to access memory outside buffer bounds"},RangeError),FQ0=QF("ERR_INVALID_ARG_TYPE",function($,Q){return`The "${$}" argument must be of type number. Received type ${typeof Q}`},TypeError),sT=QF("ERR_OUT_OF_RANGE",function($,Q,Z){let X=`The value of "${$}" is out of range.`,Y=Z;if(Number.isInteger(Z)&&Math.abs(Z)>4294967296)Y=Hy(String(Z));else if(typeof Z==="bigint"){if(Y=String(Z),Z>BigInt(2)**BigInt(32)||Z<-(BigInt(2)**BigInt(32)))Y=Hy(Y);Y+="n"}return X+=` It must be ${Q}. Received ${Y}`,X},RangeError);Object.defineProperty(I0.prototype,"parent",{enumerable:!0,get:function(){if(!I0.isBuffer(this))return;return this.buffer}});Object.defineProperty(I0.prototype,"offset",{enumerable:!0,get:function(){if(!I0.isBuffer(this))return;return this.byteOffset}});I0.poolSize=8192;I0.from=function($,Q,Z){return Cy($,Q,Z)};Object.setPrototypeOf(I0.prototype,Uint8Array.prototype);Object.setPrototypeOf(I0,Uint8Array);I0.alloc=function($,Q,Z){return AQ0($,Q,Z)};I0.allocUnsafe=function($){return ZF($)};I0.allocUnsafeSlow=function($){return ZF($)};I0.isBuffer=function($){return $!=null&&$._isBuffer===!0&&$!==I0.prototype};I0.compare=function($,Q){if(t3($,Uint8Array))$=I0.from($,$.offset,$.byteLength);if(t3(Q,Uint8Array))Q=I0.from(Q,Q.offset,Q.byteLength);if(!I0.isBuffer($)||!I0.isBuffer(Q))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===Q)return 0;let Z=$.length,X=Q.length;for(let Y=0,z=Math.min(Z,X);Y<z;++Y)if($[Y]!==Q[Y]){Z=$[Y],X=Q[Y];break}if(Z<X)return-1;if(X<Z)return 1;return 0};I0.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};I0.concat=function($,Q){if(!Array.isArray($))throw TypeError('"list" argument must be an Array of Buffers');if($.length===0)return I0.alloc(0);let Z;if(Q===void 0){Q=0;for(Z=0;Z<$.length;++Z)Q+=$[Z].length}let X=I0.allocUnsafe(Q),Y=0;for(Z=0;Z<$.length;++Z){let z=$[Z];if(t3(z,Uint8Array))if(Y+z.length>X.length){if(!I0.isBuffer(z))z=I0.from(z);z.copy(X,Y)}else Uint8Array.prototype.set.call(X,z,Y);else if(!I0.isBuffer(z))throw TypeError('"list" argument must be an Array of Buffers');else z.copy(X,Y);Y+=z.length}return X};I0.byteLength=Ty;I0.prototype._isBuffer=!0;I0.prototype.swap16=function(){let $=this.length;if($%2!==0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let Q=0;Q<$;Q+=2)FJ(this,Q,Q+1);return this};I0.prototype.swap32=function(){let $=this.length;if($%4!==0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let Q=0;Q<$;Q+=4)FJ(this,Q,Q+3),FJ(this,Q+1,Q+2);return this};I0.prototype.swap64=function(){let $=this.length;if($%8!==0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let Q=0;Q<$;Q+=8)FJ(this,Q,Q+7),FJ(this,Q+1,Q+6),FJ(this,Q+2,Q+5),FJ(this,Q+3,Q+4);return this};I0.prototype.toString=function(){let $=this.length;if($===0)return"";if(arguments.length===0)return Ay(this,0,$);return IQ0.apply(this,arguments)};I0.prototype.toLocaleString=I0.prototype.toString;I0.prototype.equals=function($){if(!I0.isBuffer($))throw TypeError("Argument must be a Buffer");if(this===$)return!0;return I0.compare(this,$)===0};I0.prototype.inspect=function(){let $="",Q=Ry;if($=this.toString("hex",0,Q).replace(/(.{2})/g,"$1 ").trim(),this.length>Q)$+=" ... ";return"<Buffer "+$+">"};if(Dy)I0.prototype[Dy]=I0.prototype.inspect;I0.prototype.compare=function($,Q,Z,X,Y){if(t3($,Uint8Array))$=I0.from($,$.offset,$.byteLength);if(!I0.isBuffer($))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof $);if(Q===void 0)Q=0;if(Z===void 0)Z=$?$.length:0;if(X===void 0)X=0;if(Y===void 0)Y=this.length;if(Q<0||Z>$.length||X<0||Y>this.length)throw RangeError("out of range index");if(X>=Y&&Q>=Z)return 0;if(X>=Y)return-1;if(Q>=Z)return 1;if(Q>>>=0,Z>>>=0,X>>>=0,Y>>>=0,this===$)return 0;let z=Y-X,J=Z-Q,q=Math.min(z,J),W=this.slice(X,Y),G=$.slice(Q,Z);for(let U=0;U<q;++U)if(W[U]!==G[U]){z=W[U],J=G[U];break}if(z<J)return-1;if(J<z)return 1;return 0};I0.prototype.includes=function($,Q,Z){return this.indexOf($,Q,Z)!==-1};I0.prototype.indexOf=function($,Q,Z){return Fy(this,$,Q,Z,!0)};I0.prototype.lastIndexOf=function($,Q,Z){return Fy(this,$,Q,Z,!1)};I0.prototype.write=function($,Q,Z,X){if(Q===void 0)X="utf8",Z=this.length,Q=0;else if(Z===void 0&&typeof Q==="string")X=Q,Z=this.length,Q=0;else if(isFinite(Q))if(Q=Q>>>0,isFinite(Z)){if(Z=Z>>>0,X===void 0)X="utf8"}else X=Z,Z=void 0;else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let Y=this.length-Q;if(Z===void 0||Z>Y)Z=Y;if($.length>0&&(Z<0||Q<0)||Q>this.length)throw RangeError("Attempt to write outside buffer bounds");if(!X)X="utf8";let z=!1;for(;;)switch(X){case"hex":return _Q0(this,$,Q,Z);case"utf8":case"utf-8":return SQ0(this,$,Q,Z);case"ascii":case"latin1":case"binary":return fQ0(this,$,Q,Z);case"base64":return kQ0(this,$,Q,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xQ0(this,$,Q,Z);default:if(z)throw TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase(),z=!0}};I0.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};I0.prototype.slice=function($,Q){let Z=this.length;if($=~~$,Q=Q===void 0?Z:~~Q,$<0){if($+=Z,$<0)$=0}else if($>Z)$=Z;if(Q<0){if(Q+=Z,Q<0)Q=0}else if(Q>Z)Q=Z;if(Q<$)Q=$;let X=this.subarray($,Q);return Object.setPrototypeOf(X,I0.prototype),X};I0.prototype.readUintLE=I0.prototype.readUIntLE=function($,Q,Z){if($=$>>>0,Q=Q>>>0,!Z)q9($,Q,this.length);let X=this[$],Y=1,z=0;while(++z<Q&&(Y*=256))X+=this[$+z]*Y;return X};I0.prototype.readUintBE=I0.prototype.readUIntBE=function($,Q,Z){if($=$>>>0,Q=Q>>>0,!Z)q9($,Q,this.length);let X=this[$+--Q],Y=1;while(Q>0&&(Y*=256))X+=this[$+--Q]*Y;return X};I0.prototype.readUint8=I0.prototype.readUInt8=function($,Q){if($=$>>>0,!Q)q9($,1,this.length);return this[$]};I0.prototype.readUint16LE=I0.prototype.readUInt16LE=function($,Q){if($=$>>>0,!Q)q9($,2,this.length);return this[$]|this[$+1]<<8};I0.prototype.readUint16BE=I0.prototype.readUInt16BE=function($,Q){if($=$>>>0,!Q)q9($,2,this.length);return this[$]<<8|this[$+1]};I0.prototype.readUint32LE=I0.prototype.readUInt32LE=function($,Q){if($=$>>>0,!Q)q9($,4,this.length);return(this[$]|this[$+1]<<8|this[$+2]<<16)+this[$+3]*16777216};I0.prototype.readUint32BE=I0.prototype.readUInt32BE=function($,Q){if($=$>>>0,!Q)q9($,4,this.length);return this[$]*16777216+(this[$+1]<<16|this[$+2]<<8|this[$+3])};I0.prototype.readBigUInt64LE=GX(function($){$=$>>>0,DW($,"offset");let Q=this[$],Z=this[$+7];if(Q===void 0||Z===void 0)cU($,this.length-8);let X=Q+this[++$]*256+this[++$]*65536+this[++$]*16777216,Y=this[++$]+this[++$]*256+this[++$]*65536+Z*16777216;return BigInt(X)+(BigInt(Y)<<BigInt(32))});I0.prototype.readBigUInt64BE=GX(function($){$=$>>>0,DW($,"offset");let Q=this[$],Z=this[$+7];if(Q===void 0||Z===void 0)cU($,this.length-8);let X=Q*16777216+this[++$]*65536+this[++$]*256+this[++$],Y=this[++$]*16777216+this[++$]*65536+this[++$]*256+Z;return(BigInt(X)<<BigInt(32))+BigInt(Y)});I0.prototype.readIntLE=function($,Q,Z){if($=$>>>0,Q=Q>>>0,!Z)q9($,Q,this.length);let X=this[$],Y=1,z=0;while(++z<Q&&(Y*=256))X+=this[$+z]*Y;if(Y*=128,X>=Y)X-=Math.pow(2,8*Q);return X};I0.prototype.readIntBE=function($,Q,Z){if($=$>>>0,Q=Q>>>0,!Z)q9($,Q,this.length);let X=Q,Y=1,z=this[$+--X];while(X>0&&(Y*=256))z+=this[$+--X]*Y;if(Y*=128,z>=Y)z-=Math.pow(2,8*Q);return z};I0.prototype.readInt8=function($,Q){if($=$>>>0,!Q)q9($,1,this.length);if(!(this[$]&128))return this[$];return(255-this[$]+1)*-1};I0.prototype.readInt16LE=function($,Q){if($=$>>>0,!Q)q9($,2,this.length);let Z=this[$]|this[$+1]<<8;return Z&32768?Z|4294901760:Z};I0.prototype.readInt16BE=function($,Q){if($=$>>>0,!Q)q9($,2,this.length);let Z=this[$+1]|this[$]<<8;return Z&32768?Z|4294901760:Z};I0.prototype.readInt32LE=function($,Q){if($=$>>>0,!Q)q9($,4,this.length);return this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24};I0.prototype.readInt32BE=function($,Q){if($=$>>>0,!Q)q9($,4,this.length);return this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]};I0.prototype.readBigInt64LE=GX(function($){$=$>>>0,DW($,"offset");let Q=this[$],Z=this[$+7];if(Q===void 0||Z===void 0)cU($,this.length-8);let X=this[$+4]+this[$+5]*256+this[$+6]*65536+(Z<<24);return(BigInt(X)<<BigInt(32))+BigInt(Q+this[++$]*256+this[++$]*65536+this[++$]*16777216)});I0.prototype.readBigInt64BE=GX(function($){$=$>>>0,DW($,"offset");let Q=this[$],Z=this[$+7];if(Q===void 0||Z===void 0)cU($,this.length-8);let X=(Q<<24)+this[++$]*65536+this[++$]*256+this[++$];return(BigInt(X)<<BigInt(32))+BigInt(this[++$]*16777216+this[++$]*65536+this[++$]*256+Z)});I0.prototype.readFloatLE=function($,Q){if($=$>>>0,!Q)q9($,4,this.length);return ZP(this,$,!0,23,4)};I0.prototype.readFloatBE=function($,Q){if($=$>>>0,!Q)q9($,4,this.length);return ZP(this,$,!1,23,4)};I0.prototype.readDoubleLE=function($,Q){if($=$>>>0,!Q)q9($,8,this.length);return ZP(this,$,!0,52,8)};I0.prototype.readDoubleBE=function($,Q){if($=$>>>0,!Q)q9($,8,this.length);return ZP(this,$,!1,52,8)};I0.prototype.writeUintLE=I0.prototype.writeUIntLE=function($,Q,Z,X){if($=+$,Q=Q>>>0,Z=Z>>>0,!X){let J=Math.pow(2,8*Z)-1;n2(this,$,Q,Z,J,0)}let Y=1,z=0;this[Q]=$&255;while(++z<Z&&(Y*=256))this[Q+z]=$/Y&255;return Q+Z};I0.prototype.writeUintBE=I0.prototype.writeUIntBE=function($,Q,Z,X){if($=+$,Q=Q>>>0,Z=Z>>>0,!X){let J=Math.pow(2,8*Z)-1;n2(this,$,Q,Z,J,0)}let Y=Z-1,z=1;this[Q+Y]=$&255;while(--Y>=0&&(z*=256))this[Q+Y]=$/z&255;return Q+Z};I0.prototype.writeUint8=I0.prototype.writeUInt8=function($,Q,Z){if($=+$,Q=Q>>>0,!Z)n2(this,$,Q,1,255,0);return this[Q]=$&255,Q+1};I0.prototype.writeUint16LE=I0.prototype.writeUInt16LE=function($,Q,Z){if($=+$,Q=Q>>>0,!Z)n2(this,$,Q,2,65535,0);return this[Q]=$&255,this[Q+1]=$>>>8,Q+2};I0.prototype.writeUint16BE=I0.prototype.writeUInt16BE=function($,Q,Z){if($=+$,Q=Q>>>0,!Z)n2(this,$,Q,2,65535,0);return this[Q]=$>>>8,this[Q+1]=$&255,Q+2};I0.prototype.writeUint32LE=I0.prototype.writeUInt32LE=function($,Q,Z){if($=+$,Q=Q>>>0,!Z)n2(this,$,Q,4,4294967295,0);return this[Q+3]=$>>>24,this[Q+2]=$>>>16,this[Q+1]=$>>>8,this[Q]=$&255,Q+4};I0.prototype.writeUint32BE=I0.prototype.writeUInt32BE=function($,Q,Z){if($=+$,Q=Q>>>0,!Z)n2(this,$,Q,4,4294967295,0);return this[Q]=$>>>24,this[Q+1]=$>>>16,this[Q+2]=$>>>8,this[Q+3]=$&255,Q+4};I0.prototype.writeBigUInt64LE=GX(function($,Q=0){return wy(this,$,Q,BigInt(0),BigInt("0xffffffffffffffff"))});I0.prototype.writeBigUInt64BE=GX(function($,Q=0){return By(this,$,Q,BigInt(0),BigInt("0xffffffffffffffff"))});I0.prototype.writeIntLE=function($,Q,Z,X){if($=+$,Q=Q>>>0,!X){let q=Math.pow(2,8*Z-1);n2(this,$,Q,Z,q-1,-q)}let Y=0,z=1,J=0;this[Q]=$&255;while(++Y<Z&&(z*=256)){if($<0&&J===0&&this[Q+Y-1]!==0)J=1;this[Q+Y]=($/z>>0)-J&255}return Q+Z};I0.prototype.writeIntBE=function($,Q,Z,X){if($=+$,Q=Q>>>0,!X){let q=Math.pow(2,8*Z-1);n2(this,$,Q,Z,q-1,-q)}let Y=Z-1,z=1,J=0;this[Q+Y]=$&255;while(--Y>=0&&(z*=256)){if($<0&&J===0&&this[Q+Y+1]!==0)J=1;this[Q+Y]=($/z>>0)-J&255}return Q+Z};I0.prototype.writeInt8=function($,Q,Z){if($=+$,Q=Q>>>0,!Z)n2(this,$,Q,1,127,-128);if($<0)$=255+$+1;return this[Q]=$&255,Q+1};I0.prototype.writeInt16LE=function($,Q,Z){if($=+$,Q=Q>>>0,!Z)n2(this,$,Q,2,32767,-32768);return this[Q]=$&255,this[Q+1]=$>>>8,Q+2};I0.prototype.writeInt16BE=function($,Q,Z){if($=+$,Q=Q>>>0,!Z)n2(this,$,Q,2,32767,-32768);return this[Q]=$>>>8,this[Q+1]=$&255,Q+2};I0.prototype.writeInt32LE=function($,Q,Z){if($=+$,Q=Q>>>0,!Z)n2(this,$,Q,4,2147483647,-2147483648);return this[Q]=$&255,this[Q+1]=$>>>8,this[Q+2]=$>>>16,this[Q+3]=$>>>24,Q+4};I0.prototype.writeInt32BE=function($,Q,Z){if($=+$,Q=Q>>>0,!Z)n2(this,$,Q,4,2147483647,-2147483648);if($<0)$=4294967295+$+1;return this[Q]=$>>>24,this[Q+1]=$>>>16,this[Q+2]=$>>>8,this[Q+3]=$&255,Q+4};I0.prototype.writeBigInt64LE=GX(function($,Q=0){return wy(this,$,Q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});I0.prototype.writeBigInt64BE=GX(function($,Q=0){return By(this,$,Q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});I0.prototype.writeFloatLE=function($,Q,Z){return Iy(this,$,Q,!0,Z)};I0.prototype.writeFloatBE=function($,Q,Z){return Iy(this,$,Q,!1,Z)};I0.prototype.writeDoubleLE=function($,Q,Z){return _y(this,$,Q,!0,Z)};I0.prototype.writeDoubleBE=function($,Q,Z){return _y(this,$,Q,!1,Z)};I0.prototype.copy=function($,Q,Z,X){if(!I0.isBuffer($))throw TypeError("argument should be a Buffer");if(!Z)Z=0;if(!X&&X!==0)X=this.length;if(Q>=$.length)Q=$.length;if(!Q)Q=0;if(X>0&&X<Z)X=Z;if(X===Z)return 0;if($.length===0||this.length===0)return 0;if(Q<0)throw RangeError("targetStart out of bounds");if(Z<0||Z>=this.length)throw RangeError("Index out of range");if(X<0)throw RangeError("sourceEnd out of bounds");if(X>this.length)X=this.length;if($.length-Q<X-Z)X=$.length-Q+Z;let Y=X-Z;if(this===$&&typeof Uint8Array.prototype.copyWithin==="function")this.copyWithin(Q,Z,X);else Uint8Array.prototype.set.call($,this.subarray(Z,X),Q);return Y};I0.prototype.fill=function($,Q,Z,X){if(typeof $==="string"){if(typeof Q==="string")X=Q,Q=0,Z=this.length;else if(typeof Z==="string")X=Z,Z=this.length;if(X!==void 0&&typeof X!=="string")throw TypeError("encoding must be a string");if(typeof X==="string"&&!I0.isEncoding(X))throw TypeError("Unknown encoding: "+X);if($.length===1){let z=$.charCodeAt(0);if(X==="utf8"&&z<128||X==="latin1")$=z}}else if(typeof $==="number")$=$&255;else if(typeof $==="boolean")$=Number($);if(Q<0||this.length<Q||this.length<Z)throw RangeError("Out of range index");if(Z<=Q)return this;if(Q=Q>>>0,Z=Z===void 0?this.length:Z>>>0,!$)$=0;let Y;if(typeof $==="number")for(Y=Q;Y<Z;++Y)this[Y]=$;else{let z=I0.isBuffer($)?$:I0.from($,X),J=z.length;if(J===0)throw TypeError('The value "'+$+'" is invalid for argument "value"');for(Y=0;Y<Z-Q;++Y)this[Y+Q]=z[Y%J]}return this};uQ0=/[^+/0-9A-Za-z-_]/g;iQ0=function(){let $=Array(256);for(let Q=0;Q<16;++Q){let Z=Q*16;for(let X=0;X<16;++X)$[Z+X]="0123456789abcdef"[Q]+"0123456789abcdef"[X]}return $}();nQ0=YF("resolveObjectURL"),rQ0=YF("isUtf8"),sQ0=YF("transcode"),tQ0=I0});var zF=_1((Ew0,ky)=>{var JF=null;ky.exports=function(){if(JF===null)JF={textEncoder:new TextEncoder,textDecoder:new TextDecoder};return JF}});var WF=_1(($Z0)=>{var qF=J3(),eQ0=new Set(["buffer","view","utf8"]);class xy{constructor($){if(this.encode=$.encode||this.encode,this.decode=$.decode||this.decode,this.name=$.name||this.name,this.format=$.format||this.format,typeof this.encode!=="function")throw TypeError("The 'encode' property must be a function");if(typeof this.decode!=="function")throw TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!=="string"||this.name==="")throw TypeError("The 'name' property must be a string");if(typeof this.format!=="string"||!eQ0.has(this.format))throw TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");if($.createViewTranscoder)this.createViewTranscoder=$.createViewTranscoder;if($.createBufferTranscoder)this.createBufferTranscoder=$.createBufferTranscoder;if($.createUTF8Transcoder)this.createUTF8Transcoder=$.createUTF8Transcoder}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new qF(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new qF(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new qF(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}}$Z0.Encoding=xy});var UF=_1((XZ0)=>{var{Buffer:KF}=(s6(),Q5(T8))||{},{Encoding:GF}=WF(),ZZ0=zF();class YP extends GF{constructor($){super({...$,format:"buffer"})}createViewTranscoder(){return new JP({encode:this.encode,decode:($)=>this.decode(KF.from($.buffer,$.byteOffset,$.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}}class JP extends GF{constructor($){super({...$,format:"view"})}createBufferTranscoder(){return new YP({encode:($)=>{let Q=this.encode($);return KF.from(Q.buffer,Q.byteOffset,Q.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}}class by extends GF{constructor($){super({...$,format:"utf8"})}createBufferTranscoder(){return new YP({encode:($)=>KF.from(this.encode($),"utf8"),decode:($)=>this.decode($.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:$,textDecoder:Q}=ZZ0();return new JP({encode:(Z)=>$.encode(this.encode(Z)),decode:(Z)=>this.decode(Q.decode(Z)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}}XZ0.BufferFormat=YP;XZ0.ViewFormat=JP;XZ0.UTF8Format=by});var hy=_1((qZ0)=>{var{Buffer:p9}=(s6(),Q5(T8))||{Buffer:{isBuffer:()=>!1}},{textEncoder:yy,textDecoder:vy}=zF()(),{BufferFormat:dU,ViewFormat:VF,UTF8Format:gy}=UF(),zP=($)=>$;qZ0.utf8=new gy({encode:function($){return p9.isBuffer($)?$.toString("utf8"):ArrayBuffer.isView($)?vy.decode($):String($)},decode:zP,name:"utf8",createViewTranscoder(){return new VF({encode:function($){return ArrayBuffer.isView($)?$:yy.encode($)},decode:function($){return vy.decode($)},name:`${this.name}+view`})},createBufferTranscoder(){return new dU({encode:function($){return p9.isBuffer($)?$:ArrayBuffer.isView($)?p9.from($.buffer,$.byteOffset,$.byteLength):p9.from(String($),"utf8")},decode:function($){return $.toString("utf8")},name:`${this.name}+buffer`})}});qZ0.json=new gy({encode:JSON.stringify,decode:JSON.parse,name:"json"});qZ0.buffer=new dU({encode:function($){return p9.isBuffer($)?$:ArrayBuffer.isView($)?p9.from($.buffer,$.byteOffset,$.byteLength):p9.from(String($),"utf8")},decode:zP,name:"buffer",createViewTranscoder(){return new VF({encode:function($){return ArrayBuffer.isView($)?$:p9.from(String($),"utf8")},decode:function($){return p9.from($.buffer,$.byteOffset,$.byteLength)},name:`${this.name}+view`})}});qZ0.view=new VF({encode:function($){return ArrayBuffer.isView($)?$:yy.encode($)},decode:zP,name:"view",createBufferTranscoder(){return new dU({encode:function($){return p9.isBuffer($)?$:ArrayBuffer.isView($)?p9.from($.buffer,$.byteOffset,$.byteLength):p9.from(String($),"utf8")},decode:zP,name:`${this.name}+buffer`})}});qZ0.hex=new dU({encode:function($){return p9.isBuffer($)?$:p9.from(String($),"hex")},decode:function($){return $.toString("hex")},name:"hex"});qZ0.base64=new dU({encode:function($){return p9.isBuffer($)?$:p9.from(String($),"base64")},decode:function($){return $.toString("base64")},name:"base64"})});var uy=_1((FZ0)=>{var my=J3(),WP=hy(),{Encoding:DZ0}=WF(),{BufferFormat:MZ0,ViewFormat:PZ0,UTF8Format:HZ0}=UF(),lU=Symbol("formats"),qP=Symbol("encodings"),jZ0=new Set(["buffer","view","utf8"]);class py{constructor($){if(!Array.isArray($))throw TypeError("The first argument 'formats' must be an array");else if(!$.every((Q)=>jZ0.has(Q)))throw TypeError("Format must be one of 'buffer', 'view', 'utf8'");this[qP]=new Map,this[lU]=new Set($);for(let Q in WP)try{this.encoding(Q)}catch(Z){if(Z.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw Z}}encodings(){return Array.from(new Set(this[qP].values()))}encoding($){let Q=this[qP].get($);if(Q===void 0){if(typeof $==="string"&&$!==""){if(Q=LZ0[$],!Q)throw new my(`Encoding '${$}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else if(typeof $!=="object"||$===null)throw TypeError("First argument 'encoding' must be a string or object");else Q=RZ0($);let{name:Z,format:X}=Q;if(!this[lU].has(X))if(this[lU].has("view"))Q=Q.createViewTranscoder();else if(this[lU].has("buffer"))Q=Q.createBufferTranscoder();else if(this[lU].has("utf8"))Q=Q.createUTF8Transcoder();else throw new my(`Encoding '${Z}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let Y of[$,Z,Q.name,Q.commonName])this[qP].set(Y,Q)}return Q}}FZ0.Transcoder=py;function RZ0($){if($ instanceof DZ0)return $;let Q="type"in $&&typeof $.type==="string"?$.type:void 0,Z=$.name||Q||`anonymous-${TZ0++}`;switch(NZ0($)){case"view":return new PZ0({...$,name:Z});case"utf8":return new HZ0({...$,name:Z});case"buffer":return new MZ0({...$,name:Z});default:throw TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function NZ0($){if("format"in $&&$.format!==void 0)return $.format;else if("buffer"in $&&typeof $.buffer==="boolean")return $.buffer?"buffer":"utf8";else if("code"in $&&Number.isInteger($.code))return"view";else return"buffer"}var CZ0={binary:WP.buffer,"utf-8":WP.utf8},LZ0={...WP,...CZ0},TZ0=0});var PW={};x1(PW,{setMaxListeners:()=>ey,once:()=>sy,listenerCount:()=>$g,init:()=>UX,getMaxListeners:()=>Zg,getEventListeners:()=>ty,default:()=>xZ0,captureRejectionSymbol:()=>oy,addAbortListener:()=>Xg,EventEmitter:()=>UX});function ny($,Q){var{_events:Z}=$;if(Q[0]??=Error("Unhandled error."),!Z)throw Q[0];var X=Z[iy];if(X)for(var Y of dy.call(X))Y.apply($,Q);var z=Z.error;if(!z)throw Q[0];for(var Y of dy.call(z))Y.apply($,Q);return!0}function EZ0($,Q,Z,X){Q.then(void 0,function(Y){queueMicrotask(()=>IZ0($,Y,Z,X))})}function IZ0($,Q,Z,X){if(typeof $[cy]==="function")$[cy](Q,Z,...X);else try{$[AJ]=!1,$.emit("error",Q)}finally{$[AJ]=!0}}function ry($,Q,Z){Z.warned=!0;let X=Error(`Possible EventEmitter memory leak detected. ${Z.length} ${String(Q)} listeners added to [${$.constructor.name}]. Use emitter.setMaxListeners() to increase limit`);X.name="MaxListenersExceededWarning",X.emitter=$,X.type=Q,X.count=Z.length,console.warn(X)}function ay($,Q,...Z){this.removeListener($,Q),Q.apply(this,Z)}function sy($,Q,Z){var X=Z?.signal;if(Qg(X,"options.signal"),X?.aborted)throw new OF(void 0,{cause:X?.reason});let{resolve:Y,reject:z,promise:J}=$newPromiseCapability(Promise),q=(U)=>{if($.removeListener(Q,W),X!=null)KP(X,"abort",G);z(U)},W=(...U)=>{if(typeof $.removeListener==="function")$.removeListener("error",q);if(X!=null)KP(X,"abort",G);Y(U)};if(ly($,Q,W,{once:!0}),Q!=="error"&&typeof $.once==="function")$.once("error",q);function G(){KP($,Q,W),KP($,"error",q),z(new OF(void 0,{cause:X?.reason}))}if(X!=null)ly(X,"abort",G,{once:!0});return J}function ty($,Q){return $.listeners(Q)}function ey($,...Q){MF($,"setMaxListeners",0);var Z;if(Q&&(Z=Q.length))for(let X=0;X<Z;X++)Q[X].setMaxListeners($);else wJ=$}function $g($,Q){return $.listenerCount(Q)}function KP($,Q,Z,X){if(typeof $.removeListener==="function")$.removeListener(Q,Z);else $.removeEventListener(Q,Z,X)}function ly($,Q,Z,X){if(typeof $.on==="function")if(X.once)$.once(Q,Z);else $.on(Q,Z);else $.addEventListener(Q,Z,X)}function MW($,Q,Z){let X=TypeError(`The "${$}" argument must be of type ${Q}. Received ${Z}`);return X.code="ERR_INVALID_ARG_TYPE",X}function fZ0($,Q,Z){let X=RangeError(`The "${$}" argument is out of range. It must be ${Q}. Received ${Z}`);return X.code="ERR_OUT_OF_RANGE",X}function Qg($,Q){if($!==void 0&&($===null||typeof $!=="object"||!("aborted"in $)))throw MW(Q,"AbortSignal",$)}function MF($,Q,Z,X){if(typeof $!=="number")throw MW(Q,"number",$);if(Z!=null&&$<Z||X!=null&&$>X||(Z!=null||X!=null)&&Number.isNaN($))throw fZ0(Q,`${Z!=null?`>= ${Z}`:""}${Z!=null&&X!=null?" && ":""}${X!=null?`<= ${X}`:""}`,$)}function iU($){if(typeof $!=="function")throw TypeError("The listener must be a function")}function kZ0($,Q){if(typeof $!=="boolean")throw MW(Q,"boolean",$)}function Zg($){return $?._maxListeners??wJ}function Xg($,Q){if($===void 0)throw MW("signal","AbortSignal",$);if(Qg($,"signal"),typeof Q!=="function")throw MW("listener","function",Q);let Z;if($.aborted)queueMicrotask(()=>Q());else $.addEventListener("abort",Q,{__proto__:null,once:!0}),Z=()=>{$.removeEventListener("abort",Q)};return{__proto__:null,[Symbol.dispose](){Z?.()}}}var DF,AJ,iy,wZ0,BZ0,cy,oy,dy,wJ=10,UX=function($){if(this._events===void 0||this._events===this.__proto__._events)this._events={__proto__:null},this._eventsCount=0;if(this._maxListeners??=void 0,this[AJ]=$?.captureRejections?Boolean($?.captureRejections):h6[AJ])this.emit=SZ0},h6,_Z0=function($,...Q){if($==="error")return ny(this,Q);var{_events:Z}=this;if(Z===void 0)return!1;var X=Z[$];if(X===void 0)return!1;let Y=X.length>1?X.slice():X;for(let z=0,{length:J}=Y;z<J;z++){let q=Y[z];switch(Q.length){case 0:q.call(this);break;case 1:q.call(this,Q[0]);break;case 2:q.call(this,Q[0],Q[1]);break;case 3:q.call(this,Q[0],Q[1],Q[2]);break;default:q.apply(this,Q);break}}return!0},SZ0=function($,...Q){if($==="error")return ny(this,Q);var{_events:Z}=this;if(Z===void 0)return!1;var X=Z[$];if(X===void 0)return!1;let Y=X.length>1?X.slice():X;for(let z=0,{length:J}=Y;z<J;z++){let q=Y[z],W;switch(Q.length){case 0:W=q.call(this);break;case 1:W=q.call(this,Q[0]);break;case 2:W=q.call(this,Q[0],Q[1]);break;case 3:W=q.call(this,Q[0],Q[1],Q[2]);break;default:W=q.apply(this,Q);break}if(W!==void 0&&typeof W?.then==="function"&&W.then===Promise.prototype.then)EZ0(this,W,$,Q)}return!0},OF,xZ0;var HW=p(()=>{DF=Symbol.for,AJ=Symbol("kCapture"),iy=DF("events.errorMonitor"),wZ0=Symbol("events.maxEventTargetListeners"),BZ0=Symbol("events.maxEventTargetListenersWarned"),cy=DF("nodejs.rejection"),oy=DF("nodejs.rejection"),dy=Array.prototype.slice,h6=UX.prototype={};h6._events=void 0;h6._eventsCount=0;h6._maxListeners=void 0;h6.setMaxListeners=function($){return MF($,"setMaxListeners",0),this._maxListeners=$,this};h6.constructor=UX;h6.getMaxListeners=function(){return this?._maxListeners??wJ};h6.emit=_Z0;h6.addListener=function($,Q){iU(Q);var Z=this._events;if(!Z)Z=this._events={__proto__:null},this._eventsCount=0;else if(Z.newListener)this.emit("newListener",$,Q.listener??Q);var X=Z[$];if(!X)Z[$]=[Q],this._eventsCount++;else{X.push(Q);var Y=this._maxListeners??wJ;if(Y>0&&X.length>Y&&!X.warned)ry(this,$,X)}return this};h6.on=h6.addListener;h6.prependListener=function($,Q){iU(Q);var Z=this._events;if(!Z)Z=this._events={__proto__:null},this._eventsCount=0;else if(Z.newListener)this.emit("newListener",$,Q.listener??Q);var X=Z[$];if(!X)Z[$]=[Q],this._eventsCount++;else{X.unshift(Q);var Y=this._maxListeners??wJ;if(Y>0&&X.length>Y&&!X.warned)ry(this,$,X)}return this};h6.once=function($,Q){iU(Q);let Z=ay.bind(this,$,Q);return Z.listener=Q,this.addListener($,Z),this};h6.prependOnceListener=function($,Q){iU(Q);let Z=ay.bind(this,$,Q);return Z.listener=Q,this.prependListener($,Z),this};h6.removeListener=function($,Q){iU(Q);var{_events:Z}=this;if(!Z)return this;var X=Z[$];if(!X)return this;var Y=X.length;let z=-1;for(let J=Y-1;J>=0;J--)if(X[J]===Q||X[J].listener===Q){z=J;break}if(z<0)return this;if(z===0)X.shift();else X.splice(z,1);if(X.length===0)delete Z[$],this._eventsCount--;return this};h6.off=h6.removeListener;h6.removeAllListeners=function($){var{_events:Q}=this;if($&&Q){if(Q[$])delete Q[$],this._eventsCount--}else this._events={__proto__:null};return this};h6.listeners=function($){var{_events:Q}=this;if(!Q)return[];var Z=Q[$];if(!Z)return[];return Z.map((X)=>X.listener??X)};h6.rawListeners=function($){var{_events:Q}=this;if(!Q)return[];var Z=Q[$];if(!Z)return[];return Z.slice()};h6.listenerCount=function($){var{_events:Q}=this;if(!Q)return 0;return Q[$]?.length??0};h6.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};h6[AJ]=!1;OF=class OF extends Error{constructor($="The operation was aborted",Q=void 0){if(Q!==void 0&&typeof Q!=="object")throw MW("options","Object",Q);super($,Q);this.code="ABORT_ERR",this.name="AbortError"}};Object.defineProperties(UX,{captureRejections:{get(){return h6[AJ]},set($){kZ0($,"EventEmitter.captureRejections"),h6[AJ]=$},enumerable:!0},defaultMaxListeners:{enumerable:!0,get:()=>{return wJ},set:($)=>{MF($,"defaultMaxListeners",0),wJ=$}},kMaxEventTargetListeners:{value:wZ0,enumerable:!1,configurable:!1,writable:!1},kMaxEventTargetListenersWarned:{value:BZ0,enumerable:!1,configurable:!1,writable:!1}});Object.assign(UX,{once:sy,getEventListeners:ty,getMaxListeners:Zg,setMaxListeners:ey,EventEmitter:UX,usingDomains:!1,captureRejectionSymbol:oy,errorMonitor:iy,addAbortListener:Xg,init:UX,listenerCount:$g});xZ0=UX});var Jg=_1((kw0,Yg)=>{Yg.exports=typeof queueMicrotask==="function"?queueMicrotask:($)=>Promise.resolve().then($)});var oU=_1((bZ0)=>{var zg=Jg();bZ0.fromCallback=function($,Q){if($===void 0){var Z=new Promise(function(X,Y){$=function(z,J){if(z)Y(z);else X(J)}});$[Q!==void 0?Q:"promise"]=Z}else if(typeof $!=="function")throw TypeError("Callback must be a function");return $};bZ0.fromPromise=function($,Q){if(Q===void 0)return $;$.then(function(Z){zg(()=>Q(null,Z))}).catch(function(Z){zg(()=>Q(Z))})}});var GP=_1((gZ0)=>{gZ0.getCallback=function($,Q){return typeof $==="function"?$:Q};gZ0.getOptions=function($,Q){if(typeof $==="object"&&$!==null)return $;if(Q!==void 0)return Q;return{}}});var PX=_1((uZ0)=>{var{fromCallback:PF}=oU(),P4=J3(),{getOptions:HF,getCallback:qg}=GP(),BJ=Symbol("promise"),jW=Symbol("callback"),e3=Symbol("working"),EJ=Symbol("handleOne"),KQ=Symbol("handleMany"),jF=Symbol("autoClose"),MX=Symbol("finishWork"),$$=Symbol("returnMany"),VX=Symbol("closing"),nU=Symbol("handleClose"),UP=Symbol("closed"),rU=Symbol("closeCallbacks"),DX=Symbol("keyEncoding"),IJ=Symbol("valueEncoding"),RF=Symbol("abortOnClose"),VP=Symbol("legacy"),NF=Symbol("keys"),CF=Symbol("values"),OX=Symbol("limit"),J7=Symbol("count"),OP=Object.freeze({}),pZ0=()=>{},Wg=!1;class DP{constructor($,Q,Z){if(typeof $!=="object"||$===null)throw TypeError(`The first argument must be an abstract-level database, received ${$===null?"null":typeof $}`);if(typeof Q!=="object"||Q===null)throw TypeError("The second argument must be an options object");this[UP]=!1,this[rU]=[],this[e3]=!1,this[VX]=!1,this[jF]=!1,this[jW]=null,this[EJ]=this[EJ].bind(this),this[KQ]=this[KQ].bind(this),this[nU]=this[nU].bind(this),this[DX]=Q[DX],this[IJ]=Q[IJ],this[VP]=Z,this[OX]=Number.isInteger(Q.limit)&&Q.limit>=0?Q.limit:1/0,this[J7]=0,this[RF]=!!Q.abortOnClose,this.db=$,this.db.attachResource(this),this.nextTick=$.nextTick}get count(){return this[J7]}get limit(){return this[OX]}next($){let Q;if($===void 0)Q=new Promise((Z,X)=>{$=(Y,z,J)=>{if(Y)X(Y);else if(!this[VP])Z(z);else if(z===void 0&&J===void 0)Z();else Z([z,J])}});else if(typeof $!=="function")throw TypeError("Callback must be a function");if(this[VX])this.nextTick($,new P4("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}));else if(this[e3])this.nextTick($,new P4("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"}));else if(this[e3]=!0,this[jW]=$,this[J7]>=this[OX])this.nextTick(this[EJ],null);else this._next(this[EJ]);return Q}_next($){this.nextTick($)}nextv($,Q,Z){if(Z=qg(Q,Z),Z=PF(Z,BJ),Q=HF(Q,OP),!Number.isInteger($))return this.nextTick(Z,TypeError("The first argument 'size' must be an integer")),Z[BJ];if(this[VX])this.nextTick(Z,new P4("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}));else if(this[e3])this.nextTick(Z,new P4("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"}));else{if($<1)$=1;if(this[OX]<1/0)$=Math.min($,this[OX]-this[J7]);if(this[e3]=!0,this[jW]=Z,$<=0)this.nextTick(this[KQ],null,[]);else this._nextv($,Q,this[KQ])}return Z[BJ]}_nextv($,Q,Z){let X=[],Y=(z,J,q)=>{if(z)return Z(z);else if(this[VP]?J===void 0&&q===void 0:J===void 0)return Z(null,X);if(X.push(this[VP]?[J,q]:J),X.length===$)Z(null,X);else this._next(Y)};this._next(Y)}all($,Q){if(Q=qg($,Q),Q=PF(Q,BJ),$=HF($,OP),this[VX])this.nextTick(Q,new P4("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}));else if(this[e3])this.nextTick(Q,new P4("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"}));else if(this[e3]=!0,this[jW]=Q,this[jF]=!0,this[J7]>=this[OX])this.nextTick(this[KQ],null,[]);else this._all($,this[KQ]);return Q[BJ]}_all($,Q){let Z=this[J7],X=[],Y=()=>{let J=this[OX]<1/0?Math.min(1000,this[OX]-Z):1000;if(J<=0)this.nextTick(Q,null,X);else this._nextv(J,OP,z)},z=(J,q)=>{if(J)Q(J);else if(q.length===0)Q(null,X);else X.push.apply(X,q),Z+=q.length,Y()};Y()}[MX](){let $=this[jW];if(this[RF]&&$===null)return pZ0;if(this[e3]=!1,this[jW]=null,this[VX])this._close(this[nU]);return $}[$$]($,Q,Z){if(this[jF])this.close($.bind(null,Q,Z));else $(Q,Z)}seek($,Q){if(Q=HF(Q,OP),this[VX]);else if(this[e3])throw new P4("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});else{let Z=this.db.keyEncoding(Q.keyEncoding||this[DX]),X=Z.format;if(Q.keyEncoding!==X)Q={...Q,keyEncoding:X};let Y=this.db.prefixKey(Z.encode($),X);this._seek(Y,Q)}}_seek($,Q){throw new P4("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close($){if($=PF($,BJ),this[UP])this.nextTick($);else if(this[VX])this[rU].push($);else if(this[VX]=!0,this[rU].push($),!this[e3])this._close(this[nU]);else if(this[RF])this[MX]()(new P4("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}));return $[BJ]}_close($){this.nextTick($)}[nU](){this[UP]=!0,this.db.detachResource(this);let $=this[rU];this[rU]=[];for(let Q of $)Q()}async*[Symbol.asyncIterator](){try{let $;while(($=await this.next())!==void 0)yield $}finally{if(!this[UP])await this.close()}}}class aU extends DP{constructor($,Q){super($,Q,!0);this[NF]=Q.keys!==!1,this[CF]=Q.values!==!1}[EJ]($,Q,Z){let X=this[MX]();if($)return X($);try{Q=this[NF]&&Q!==void 0?this[DX].decode(Q):void 0,Z=this[CF]&&Z!==void 0?this[IJ].decode(Z):void 0}catch(Y){return X(new _J("entry",Y))}if(!(Q===void 0&&Z===void 0))this[J7]++;X(null,Q,Z)}[KQ]($,Q){let Z=this[MX]();if($)return this[$$](Z,$);try{for(let X of Q){let Y=X[0],z=X[1];X[0]=this[NF]&&Y!==void 0?this[DX].decode(Y):void 0,X[1]=this[CF]&&z!==void 0?this[IJ].decode(z):void 0}}catch(X){return this[$$](Z,new _J("entries",X))}this[J7]+=Q.length,this[$$](Z,null,Q)}end($){if(!Wg&&typeof console<"u")Wg=!0,console.warn(new P4("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}));return this.close($)}}class Kg extends DP{constructor($,Q){super($,Q,!1)}[EJ]($,Q){let Z=this[MX]();if($)return Z($);try{Q=Q!==void 0?this[DX].decode(Q):void 0}catch(X){return Z(new _J("key",X))}if(Q!==void 0)this[J7]++;Z(null,Q)}[KQ]($,Q){let Z=this[MX]();if($)return this[$$](Z,$);try{for(let X=0;X<Q.length;X++){let Y=Q[X];Q[X]=Y!==void 0?this[DX].decode(Y):void 0}}catch(X){return this[$$](Z,new _J("keys",X))}this[J7]+=Q.length,this[$$](Z,null,Q)}}class Gg extends DP{constructor($,Q){super($,Q,!1)}[EJ]($,Q){let Z=this[MX]();if($)return Z($);try{Q=Q!==void 0?this[IJ].decode(Q):void 0}catch(X){return Z(new _J("value",X))}if(Q!==void 0)this[J7]++;Z(null,Q)}[KQ]($,Q){let Z=this[MX]();if($)return this[$$](Z,$);try{for(let X=0;X<Q.length;X++){let Y=Q[X];Q[X]=Y!==void 0?this[IJ].decode(Y):void 0}}catch(X){return this[$$](Z,new _J("values",X))}this[J7]+=Q.length,this[$$](Z,null,Q)}}class _J extends P4{constructor($,Q){super(`Iterator could not decode ${$}`,{code:"LEVEL_DECODE_ERROR",cause:Q})}}for(let $ of["_ended property","_nexting property","_end method"])Object.defineProperty(aU.prototype,$.split(" ")[0],{get(){throw new P4(`The ${$} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new P4(`The ${$} has been removed`,{code:"LEVEL_LEGACY"})}});aU.keyEncoding=DX;aU.valueEncoding=IJ;uZ0.AbstractIterator=aU;uZ0.AbstractKeyIterator=Kg;uZ0.AbstractValueIterator=Gg});var Ug=_1((nZ0)=>{var{AbstractKeyIterator:iZ0,AbstractValueIterator:oZ0}=PX(),SJ=Symbol("iterator"),sU=Symbol("callback"),RW=Symbol("handleOne"),fJ=Symbol("handleMany");class MP extends iZ0{constructor($,Q){super($,Q);this[SJ]=$.iterator({...Q,keys:!0,values:!1}),this[RW]=this[RW].bind(this),this[fJ]=this[fJ].bind(this)}}class LF extends oZ0{constructor($,Q){super($,Q);this[SJ]=$.iterator({...Q,keys:!1,values:!0}),this[RW]=this[RW].bind(this),this[fJ]=this[fJ].bind(this)}}for(let $ of[MP,LF]){let Q=$===MP,Z=Q?(X)=>X[0]:(X)=>X[1];$.prototype._next=function(X){this[sU]=X,this[SJ].next(this[RW])},$.prototype[RW]=function(X,Y,z){let J=this[sU];if(X)J(X);else J(null,Q?Y:z)},$.prototype._nextv=function(X,Y,z){this[sU]=z,this[SJ].nextv(X,Y,this[fJ])},$.prototype._all=function(X,Y){this[sU]=Y,this[SJ].all(X,this[fJ])},$.prototype[fJ]=function(X,Y){let z=this[sU];if(X)z(X);else z(null,Y.map(Z))},$.prototype._seek=function(X,Y){this[SJ].seek(X,Y)},$.prototype._close=function(X){this[SJ].close(X)}}nZ0.DefaultKeyIterator=MP;nZ0.DefaultValueIterator=LF});var Vg=_1(($X0)=>{var{AbstractIterator:sZ0,AbstractKeyIterator:tZ0,AbstractValueIterator:eZ0}=PX(),TF=J3(),r2=Symbol("nut"),PP=Symbol("undefer"),HP=Symbol("factory");class FF extends sZ0{constructor($,Q){super($,Q);this[r2]=null,this[HP]=()=>$.iterator(Q),this.db.defer(()=>this[PP]())}}class AF extends tZ0{constructor($,Q){super($,Q);this[r2]=null,this[HP]=()=>$.keys(Q),this.db.defer(()=>this[PP]())}}class wF extends eZ0{constructor($,Q){super($,Q);this[r2]=null,this[HP]=()=>$.values(Q),this.db.defer(()=>this[PP]())}}for(let $ of[FF,AF,wF])$.prototype[PP]=function(){if(this.db.status==="open")this[r2]=this[HP]()},$.prototype._next=function(Q){if(this[r2]!==null)this[r2].next(Q);else if(this.db.status==="opening")this.db.defer(()=>this._next(Q));else this.nextTick(Q,new TF("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},$.prototype._nextv=function(Q,Z,X){if(this[r2]!==null)this[r2].nextv(Q,Z,X);else if(this.db.status==="opening")this.db.defer(()=>this._nextv(Q,Z,X));else this.nextTick(X,new TF("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},$.prototype._all=function(Q,Z){if(this[r2]!==null)this[r2].all(Z);else if(this.db.status==="opening")this.db.defer(()=>this._all(Q,Z));else this.nextTick(Z,new TF("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},$.prototype._seek=function(Q,Z){if(this[r2]!==null)this[r2]._seek(Q,Z);else if(this.db.status==="opening")this.db.defer(()=>this._seek(Q,Z))},$.prototype._close=function(Q){if(this[r2]!==null)this[r2].close(Q);else if(this.db.status==="opening")this.db.defer(()=>this._close(Q));else this.nextTick(Q)};$X0.DeferredIterator=FF;$X0.DeferredKeyIterator=AF;$X0.DeferredValueIterator=wF});var BF=_1((zX0)=>{var{fromCallback:Og}=oU(),jP=J3(),{getCallback:YX0,getOptions:JX0}=GP(),RP=Symbol("promise"),z7=Symbol("status"),NW=Symbol("operations"),tU=Symbol("finishClose"),CW=Symbol("closeCallbacks");class Dg{constructor($){if(typeof $!=="object"||$===null)throw TypeError(`The first argument must be an abstract-level database, received ${$===null?"null":typeof $}`);this[NW]=[],this[CW]=[],this[z7]="open",this[tU]=this[tU].bind(this),this.db=$,this.db.attachResource(this),this.nextTick=$.nextTick}get length(){return this[NW].length}put($,Q,Z){if(this[z7]!=="open")throw new jP("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let X=this.db._checkKey($)||this.db._checkValue(Q);if(X)throw X;let Y=Z&&Z.sublevel!=null?Z.sublevel:this.db,z=Z,J=Y.keyEncoding(Z&&Z.keyEncoding),q=Y.valueEncoding(Z&&Z.valueEncoding),W=J.format;if(Z={...Z,keyEncoding:W,valueEncoding:q.format},Y!==this.db)Z.sublevel=null;let G=Y.prefixKey(J.encode($),W),U=q.encode(Q);return this._put(G,U,Z),this[NW].push({...z,type:"put",key:$,value:Q}),this}_put($,Q,Z){}del($,Q){if(this[z7]!=="open")throw new jP("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let Z=this.db._checkKey($);if(Z)throw Z;let X=Q&&Q.sublevel!=null?Q.sublevel:this.db,Y=Q,z=X.keyEncoding(Q&&Q.keyEncoding),J=z.format;if(Q={...Q,keyEncoding:J},X!==this.db)Q.sublevel=null;return this._del(X.prefixKey(z.encode($),J),Q),this[NW].push({...Y,type:"del",key:$}),this}_del($,Q){}clear(){if(this[z7]!=="open")throw new jP("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[NW]=[],this}_clear(){}write($,Q){if(Q=YX0($,Q),Q=Og(Q,RP),$=JX0($),this[z7]!=="open")this.nextTick(Q,new jP("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}));else if(this.length===0)this.close(Q);else this[z7]="writing",this._write($,(Z)=>{if(this[z7]="closing",this[CW].push(()=>Q(Z)),!Z)this.db.emit("batch",this[NW]);this._close(this[tU])});return Q[RP]}_write($,Q){}close($){if($=Og($,RP),this[z7]==="closing")this[CW].push($);else if(this[z7]==="closed")this.nextTick($);else if(this[CW].push($),this[z7]!=="writing")this[z7]="closing",this._close(this[tU]);return $[RP]}_close($){this.nextTick($)}[tU](){this[z7]="closed",this.db.detachResource(this);let $=this[CW];this[CW]=[];for(let Q of $)Q()}}zX0.AbstractChainedBatch=Dg});var Pg=_1((GX0)=>{var{AbstractChainedBatch:WX0}=BF(),KX0=J3(),LW=Symbol("encoded");class Mg extends WX0{constructor($){super($);this[LW]=[]}_put($,Q,Z){this[LW].push({...Z,type:"put",key:$,value:Q})}_del($,Q){this[LW].push({...Q,type:"del",key:$})}_clear(){this[LW]=[]}_write($,Q){if(this.db.status==="opening")this.db.defer(()=>this._write($,Q));else if(this.db.status==="open")if(this[LW].length===0)this.nextTick(Q);else this.db._batch(this[LW],$,Q);else this.nextTick(Q,new KX0("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}}GX0.DefaultChainedBatch=Mg});var Rg=_1((pw0,jg)=>{var Hg=J3(),VX0=Object.prototype.hasOwnProperty,OX0=new Set(["lt","lte","gt","gte"]);jg.exports=function($,Q){let Z={};for(let X in $){if(!VX0.call($,X))continue;if(X==="keyEncoding"||X==="valueEncoding")continue;if(X==="start"||X==="end")throw new Hg(`The legacy range option '${X}' has been removed`,{code:"LEVEL_LEGACY"});else if(X==="encoding")throw new Hg("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});if(OX0.has(X))Z[X]=Q.encode($[X]);else Z[X]=$[X]}return Z.reverse=!!Z.reverse,Z.limit=Number.isInteger(Z.limit)&&Z.limit>=0?Z.limit:-1,Z}});var EF=_1((uw0,Cg)=>{/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Ng;Cg.exports=typeof queueMicrotask==="function"?queueMicrotask.bind(typeof window<"u"?window:global):($)=>(Ng||(Ng=Promise.resolve())).then($).catch((Q)=>setTimeout(()=>{throw Q},0))});var Fg=_1((cw0,Tg)=>{var Lg=EF();Tg.exports=function($,...Q){if(Q.length===0)Lg($);else Lg(()=>$(...Q))}});var Ag=_1((HX0)=>{var{AbstractIterator:DX0,AbstractKeyIterator:MX0,AbstractValueIterator:PX0}=PX(),TW=Symbol("unfix"),z3=Symbol("iterator"),kJ=Symbol("handleOne"),HX=Symbol("handleMany"),GQ=Symbol("callback");class NP extends DX0{constructor($,Q,Z,X){super($,Q);this[z3]=Z,this[TW]=X,this[kJ]=this[kJ].bind(this),this[HX]=this[HX].bind(this),this[GQ]=null}[kJ]($,Q,Z){let X=this[GQ];if($)return X($);if(Q!==void 0)Q=this[TW](Q);X($,Q,Z)}[HX]($,Q){let Z=this[GQ];if($)return Z($);for(let X of Q){let Y=X[0];if(Y!==void 0)X[0]=this[TW](Y)}Z($,Q)}}class CP extends MX0{constructor($,Q,Z,X){super($,Q);this[z3]=Z,this[TW]=X,this[kJ]=this[kJ].bind(this),this[HX]=this[HX].bind(this),this[GQ]=null}[kJ]($,Q){let Z=this[GQ];if($)return Z($);if(Q!==void 0)Q=this[TW](Q);Z($,Q)}[HX]($,Q){let Z=this[GQ];if($)return Z($);for(let X=0;X<Q.length;X++){let Y=Q[X];if(Y!==void 0)Q[X]=this[TW](Y)}Z($,Q)}}class LP extends PX0{constructor($,Q,Z){super($,Q);this[z3]=Z}}for(let $ of[NP,CP])$.prototype._next=function(Q){this[GQ]=Q,this[z3].next(this[kJ])},$.prototype._nextv=function(Q,Z,X){this[GQ]=X,this[z3].nextv(Q,Z,this[HX])},$.prototype._all=function(Q,Z){this[GQ]=Z,this[z3].all(Q,this[HX])};for(let $ of[LP])$.prototype._next=function(Q){this[z3].next(Q)},$.prototype._nextv=function(Q,Z,X){this[z3].nextv(Q,Z,X)},$.prototype._all=function(Q,Z){this[z3].all(Q,Z)};for(let $ of[NP,CP,LP])$.prototype._seek=function(Q,Z){this[z3].seek(Q,Z)},$.prototype._close=function(Q){this[z3].close(Q)};HX0.AbstractSublevelIterator=NP;HX0.AbstractSublevelKeyIterator=CP;HX0.AbstractSublevelValueIterator=LP});var _g=_1((lw0,Ig)=>{var IF=J3(),{Buffer:fF}=(s6(),Q5(T8))||{},{AbstractSublevelIterator:CX0,AbstractSublevelKeyIterator:LX0,AbstractSublevelValueIterator:TX0}=Ag(),UQ=Symbol("prefix"),wg=Symbol("upperBound"),eU=Symbol("prefixRange"),H4=Symbol("parent"),_F=Symbol("unfix"),Bg=new TextEncoder,FX0={separator:"!"};Ig.exports=function({AbstractLevel:$}){class Q extends ${static defaults(Z){if(typeof Z==="string")throw new IF("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});else if(Z&&Z.open)throw new IF("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});if(Z==null)return FX0;else if(!Z.separator)return{...Z,separator:"!"};else return Z}constructor(Z,X,Y){let{separator:z,manifest:J,...q}=Q.defaults(Y);X=wX0(X,z);let W=z.charCodeAt(0)+1,G=Z[H4]||Z;if(!Bg.encode(X).every((P)=>P>W&&P<127))throw new IF(`Prefix must use bytes > ${W} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(AX0(G,J),q);let U=(Z.prefix||"")+z+X+z,D=U.slice(0,-1)+String.fromCharCode(W);this[H4]=G,this[UQ]=new kF(U),this[wg]=new kF(D),this[_F]=new Eg,this.nextTick=G.nextTick}prefixKey(Z,X){if(X==="utf8")return this[UQ].utf8+Z;else if(Z.byteLength===0)return this[UQ][X];else if(X==="view"){let Y=this[UQ].view,z=new Uint8Array(Y.byteLength+Z.byteLength);return z.set(Y,0),z.set(Z,Y.byteLength),z}else{let Y=this[UQ].buffer;return fF.concat([Y,Z],Y.byteLength+Z.byteLength)}}[eU](Z,X){if(Z.gte!==void 0)Z.gte=this.prefixKey(Z.gte,X);else if(Z.gt!==void 0)Z.gt=this.prefixKey(Z.gt,X);else Z.gte=this[UQ][X];if(Z.lte!==void 0)Z.lte=this.prefixKey(Z.lte,X);else if(Z.lt!==void 0)Z.lt=this.prefixKey(Z.lt,X);else Z.lte=this[wg][X]}get prefix(){return this[UQ].utf8}get db(){return this[H4]}_open(Z,X){this[H4].open({passive:!0},X)}_put(Z,X,Y,z){this[H4].put(Z,X,Y,z)}_get(Z,X,Y){this[H4].get(Z,X,Y)}_getMany(Z,X,Y){this[H4].getMany(Z,X,Y)}_del(Z,X,Y){this[H4].del(Z,X,Y)}_batch(Z,X,Y){this[H4].batch(Z,X,Y)}_clear(Z,X){this[eU](Z,Z.keyEncoding),this[H4].clear(Z,X)}_iterator(Z){this[eU](Z,Z.keyEncoding);let X=this[H4].iterator(Z),Y=this[_F].get(this[UQ].utf8.length,Z.keyEncoding);return new CX0(this,Z,X,Y)}_keys(Z){this[eU](Z,Z.keyEncoding);let X=this[H4].keys(Z),Y=this[_F].get(this[UQ].utf8.length,Z.keyEncoding);return new LX0(this,Z,X,Y)}_values(Z){this[eU](Z,Z.keyEncoding);let X=this[H4].values(Z);return new TX0(this,Z,X)}}return{AbstractSublevel:Q}};var AX0=function($,Q){return{...$.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...Q,encodings:{utf8:SF($,"utf8"),buffer:SF($,"buffer"),view:SF($,"view")}}},SF=function($,Q){return $.supports.encodings[Q]?$.keyEncoding(Q).name===Q:!1};class kF{constructor($){this.utf8=$,this.view=Bg.encode($),this.buffer=fF?fF.from(this.view.buffer,0,this.view.byteLength):{}}}class Eg{constructor(){this.cache=new Map}get($,Q){let Z=this.cache.get(Q);if(Z===void 0){if(Q==="view")Z=function(X,Y){return Y.subarray(X)}.bind(null,$);else Z=function(X,Y){return Y.slice(X)}.bind(null,$);this.cache.set(Q,Z)}return Z}}var wX0=function($,Q){let Z=0,X=$.length;while(Z<X&&$[Z]===Q)Z++;while(X>Z&&$[X-1]===Q)X--;return $.slice(Z,X)}});var yF=_1((yX0)=>{var{supports:BX0}=Gy(),{Transcoder:EX0}=uy(),{EventEmitter:IX0}=(HW(),Q5(PW)),{fromCallback:jX}=oU(),q3=J3(),{AbstractIterator:xJ}=PX(),{DefaultKeyIterator:_X0,DefaultValueIterator:SX0}=Ug(),{DeferredIterator:fX0,DeferredKeyIterator:kX0,DeferredValueIterator:xX0}=Vg(),{DefaultChainedBatch:Sg}=Pg(),{getCallback:bJ,getOptions:RX}=GP(),TP=Rg(),U5=Symbol("promise"),VQ=Symbol("landed"),vJ=Symbol("resources"),xF=Symbol("closeResources"),$V=Symbol("operations"),QV=Symbol("undefer"),FP=Symbol("deferOpen"),fg=Symbol("options"),N5=Symbol("status"),yJ=Symbol("defaultOptions"),FW=Symbol("transcoder"),AP=Symbol("keyEncoding"),bF=Symbol("valueEncoding"),bX0=()=>{};class wP extends IX0{constructor($,Q){super();if(typeof $!=="object"||$===null)throw TypeError("The first argument 'manifest' must be an object");Q=RX(Q);let{keyEncoding:Z,valueEncoding:X,passive:Y,...z}=Q;this[vJ]=new Set,this[$V]=[],this[FP]=!0,this[fg]=z,this[N5]="opening",this.supports=BX0($,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:$.snapshots!==!1,permanence:$.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:$.encodings||{},events:Object.assign({},$.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[FW]=new EX0(vX0(this)),this[AP]=this[FW].encoding(Z||"utf8"),this[bF]=this[FW].encoding(X||"utf8");for(let J of this[FW].encodings())if(!this.supports.encodings[J.commonName])this.supports.encodings[J.commonName]=!0;this[yJ]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[AP].commonName,valueEncoding:this[bF].commonName}),key:Object.freeze({keyEncoding:this[AP].commonName})},this.nextTick(()=>{if(this[FP])this.open({passive:!1},bX0)})}get status(){return this[N5]}keyEncoding($){return this[FW].encoding($!=null?$:this[AP])}valueEncoding($){return this[FW].encoding($!=null?$:this[bF])}open($,Q){Q=bJ($,Q),Q=jX(Q,U5),$={...this[fg],...RX($)},$.createIfMissing=$.createIfMissing!==!1,$.errorIfExists=!!$.errorIfExists;let Z=(X)=>{if(this[N5]==="closing"||this[N5]==="opening")this.once(VQ,X?()=>Z(X):Z);else if(this[N5]!=="open")Q(new q3("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:X}));else Q()};if($.passive)if(this[N5]==="opening")this.once(VQ,Z);else this.nextTick(Z);else if(this[N5]==="closed"||this[FP])this[FP]=!1,this[N5]="opening",this.emit("opening"),this._open($,(X)=>{if(X){this[N5]="closed",this[xF](()=>{this.emit(VQ),Z(X)}),this[QV]();return}if(this[N5]="open",this[QV](),this.emit(VQ),this[N5]==="open")this.emit("open");if(this[N5]==="open")this.emit("ready");Z()});else if(this[N5]==="open")this.nextTick(Z);else this.once(VQ,()=>this.open($,Q));return Q[U5]}_open($,Q){this.nextTick(Q)}close($){$=jX($,U5);let Q=(Z)=>{if(this[N5]==="opening"||this[N5]==="closing")this.once(VQ,Z?Q(Z):Q);else if(this[N5]!=="closed")$(new q3("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:Z}));else $()};if(this[N5]==="open"){this[N5]="closing",this.emit("closing");let Z=(X)=>{this[N5]="open",this[QV](),this.emit(VQ),Q(X)};this[xF](()=>{this._close((X)=>{if(X)return Z(X);if(this[N5]="closed",this[QV](),this.emit(VQ),this[N5]==="closed")this.emit("closed");Q()})})}else if(this[N5]==="closed")this.nextTick(Q);else this.once(VQ,()=>this.close($));return $[U5]}[xF]($){if(this[vJ].size===0)return this.nextTick($);let Q=this[vJ].size,Z=!0,X=()=>{if(--Q===0)if(Z)this.nextTick($);else $()};for(let Y of this[vJ])Y.close(X);Z=!1,this[vJ].clear()}_close($){this.nextTick($)}get($,Q,Z){if(Z=bJ(Q,Z),Z=jX(Z,U5),Q=RX(Q,this[yJ].entry),this[N5]==="opening")return this.defer(()=>this.get($,Q,Z)),Z[U5];if(AW(this,Z))return Z[U5];let X=this._checkKey($);if(X)return this.nextTick(Z,X),Z[U5];let Y=this.keyEncoding(Q.keyEncoding),z=this.valueEncoding(Q.valueEncoding),J=Y.format,q=z.format;if(Q.keyEncoding!==J||Q.valueEncoding!==q)Q=Object.assign({},Q,{keyEncoding:J,valueEncoding:q});return this._get(this.prefixKey(Y.encode($),J),Q,(W,G)=>{if(W){if(W.code==="LEVEL_NOT_FOUND"||W.notFound||/NotFound/i.test(W)){if(!W.code)W.code="LEVEL_NOT_FOUND";if(!W.notFound)W.notFound=!0;if(!W.status)W.status=404}return Z(W)}try{G=z.decode(G)}catch(U){return Z(new q3("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:U}))}Z(null,G)}),Z[U5]}_get($,Q,Z){this.nextTick(Z,Error("NotFound"))}getMany($,Q,Z){if(Z=bJ(Q,Z),Z=jX(Z,U5),Q=RX(Q,this[yJ].entry),this[N5]==="opening")return this.defer(()=>this.getMany($,Q,Z)),Z[U5];if(AW(this,Z))return Z[U5];if(!Array.isArray($))return this.nextTick(Z,TypeError("The first argument 'keys' must be an array")),Z[U5];if($.length===0)return this.nextTick(Z,null,[]),Z[U5];let X=this.keyEncoding(Q.keyEncoding),Y=this.valueEncoding(Q.valueEncoding),z=X.format,J=Y.format;if(Q.keyEncoding!==z||Q.valueEncoding!==J)Q=Object.assign({},Q,{keyEncoding:z,valueEncoding:J});let q=Array($.length);for(let W=0;W<$.length;W++){let G=$[W],U=this._checkKey(G);if(U)return this.nextTick(Z,U),Z[U5];q[W]=this.prefixKey(X.encode(G),z)}return this._getMany(q,Q,(W,G)=>{if(W)return Z(W);try{for(let U=0;U<G.length;U++)if(G[U]!==void 0)G[U]=Y.decode(G[U])}catch(U){return Z(new q3(`Could not decode one or more of ${G.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:U}))}Z(null,G)}),Z[U5]}_getMany($,Q,Z){this.nextTick(Z,null,Array($.length).fill(void 0))}put($,Q,Z,X){if(X=bJ(Z,X),X=jX(X,U5),Z=RX(Z,this[yJ].entry),this[N5]==="opening")return this.defer(()=>this.put($,Q,Z,X)),X[U5];if(AW(this,X))return X[U5];let Y=this._checkKey($)||this._checkValue(Q);if(Y)return this.nextTick(X,Y),X[U5];let z=this.keyEncoding(Z.keyEncoding),J=this.valueEncoding(Z.valueEncoding),q=z.format,W=J.format;if(Z.keyEncoding!==q||Z.valueEncoding!==W)Z=Object.assign({},Z,{keyEncoding:q,valueEncoding:W});let G=this.prefixKey(z.encode($),q),U=J.encode(Q);return this._put(G,U,Z,(D)=>{if(D)return X(D);this.emit("put",$,Q),X()}),X[U5]}_put($,Q,Z,X){this.nextTick(X)}del($,Q,Z){if(Z=bJ(Q,Z),Z=jX(Z,U5),Q=RX(Q,this[yJ].key),this[N5]==="opening")return this.defer(()=>this.del($,Q,Z)),Z[U5];if(AW(this,Z))return Z[U5];let X=this._checkKey($);if(X)return this.nextTick(Z,X),Z[U5];let Y=this.keyEncoding(Q.keyEncoding),z=Y.format;if(Q.keyEncoding!==z)Q=Object.assign({},Q,{keyEncoding:z});return this._del(this.prefixKey(Y.encode($),z),Q,(J)=>{if(J)return Z(J);this.emit("del",$),Z()}),Z[U5]}_del($,Q,Z){this.nextTick(Z)}batch($,Q,Z){if(!arguments.length){if(this[N5]==="opening")return new Sg(this);if(this[N5]!=="open")throw new q3("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof $==="function")Z=$;else Z=bJ(Q,Z);if(Z=jX(Z,U5),Q=RX(Q,this[yJ].empty),this[N5]==="opening")return this.defer(()=>this.batch($,Q,Z)),Z[U5];if(AW(this,Z))return Z[U5];if(!Array.isArray($))return this.nextTick(Z,TypeError("The first argument 'operations' must be an array")),Z[U5];if($.length===0)return this.nextTick(Z),Z[U5];let X=Array($.length),{keyEncoding:Y,valueEncoding:z,...J}=Q;for(let q=0;q<$.length;q++){if(typeof $[q]!=="object"||$[q]===null)return this.nextTick(Z,TypeError("A batch operation must be an object")),Z[U5];let W=Object.assign({},$[q]);if(W.type!=="put"&&W.type!=="del")return this.nextTick(Z,TypeError("A batch operation must have a type property that is 'put' or 'del'")),Z[U5];let G=this._checkKey(W.key);if(G)return this.nextTick(Z,G),Z[U5];let U=W.sublevel!=null?W.sublevel:this,D=U.keyEncoding(W.keyEncoding||Y),P=D.format;if(W.key=U.prefixKey(D.encode(W.key),P),W.keyEncoding=P,W.type==="put"){let H=this._checkValue(W.value);if(H)return this.nextTick(Z,H),Z[U5];let N=U.valueEncoding(W.valueEncoding||z);W.value=N.encode(W.value),W.valueEncoding=N.format}if(U!==this)W.sublevel=null;X[q]=W}return this._batch(X,J,(q)=>{if(q)return Z(q);this.emit("batch",$),Z()}),Z[U5]}_batch($,Q,Z){this.nextTick(Z)}sublevel($,Q){return this._sublevel($,vF.defaults(Q))}_sublevel($,Q){return new vF(this,$,Q)}prefixKey($,Q){return $}clear($,Q){if(Q=bJ($,Q),Q=jX(Q,U5),$=RX($,this[yJ].empty),this[N5]==="opening")return this.defer(()=>this.clear($,Q)),Q[U5];if(AW(this,Q))return Q[U5];let Z=$,X=this.keyEncoding($.keyEncoding);if($=TP($,X),$.keyEncoding=X.format,$.limit===0)this.nextTick(Q);else this._clear($,(Y)=>{if(Y)return Q(Y);this.emit("clear",Z),Q()});return Q[U5]}_clear($,Q){this.nextTick(Q)}iterator($){let Q=this.keyEncoding($&&$.keyEncoding),Z=this.valueEncoding($&&$.valueEncoding);if($=TP($,Q),$.keys=$.keys!==!1,$.values=$.values!==!1,$[xJ.keyEncoding]=Q,$[xJ.valueEncoding]=Z,$.keyEncoding=Q.format,$.valueEncoding=Z.format,this[N5]==="opening")return new fX0(this,$);else if(this[N5]!=="open")throw new q3("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator($)}_iterator($){return new xJ(this,$)}keys($){let Q=this.keyEncoding($&&$.keyEncoding),Z=this.valueEncoding($&&$.valueEncoding);if($=TP($,Q),$[xJ.keyEncoding]=Q,$[xJ.valueEncoding]=Z,$.keyEncoding=Q.format,$.valueEncoding=Z.format,this[N5]==="opening")return new kX0(this,$);else if(this[N5]!=="open")throw new q3("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys($)}_keys($){return new _X0(this,$)}values($){let Q=this.keyEncoding($&&$.keyEncoding),Z=this.valueEncoding($&&$.valueEncoding);if($=TP($,Q),$[xJ.keyEncoding]=Q,$[xJ.valueEncoding]=Z,$.keyEncoding=Q.format,$.valueEncoding=Z.format,this[N5]==="opening")return new xX0(this,$);else if(this[N5]!=="open")throw new q3("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values($)}_values($){return new SX0(this,$)}defer($){if(typeof $!=="function")throw TypeError("The first argument must be a function");this[$V].push($)}[QV](){if(this[$V].length===0)return;let $=this[$V];this[$V]=[];for(let Q of $)Q()}attachResource($){if(typeof $!=="object"||$===null||typeof $.close!=="function")throw TypeError("The first argument must be a resource object");this[vJ].add($)}detachResource($){this[vJ].delete($)}_chainedBatch(){return new Sg(this)}_checkKey($){if($===null||$===void 0)return new q3("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue($){if($===null||$===void 0)return new q3("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}}wP.prototype.nextTick=Fg();var{AbstractSublevel:vF}=_g()({AbstractLevel:wP});yX0.AbstractLevel=wP;yX0.AbstractSublevel=vF;var AW=function($,Q){if($[N5]!=="open")return $.nextTick(Q,new q3("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0;return!1},vX0=function($){return Object.keys($.supports.encodings).filter((Q)=>!!$.supports.encodings[Q])}});var gF=_1((mX0)=>{mX0.AbstractLevel=yF().AbstractLevel;mX0.AbstractSublevel=yF().AbstractSublevel;mX0.AbstractIterator=PX().AbstractIterator;mX0.AbstractKeyIterator=PX().AbstractKeyIterator;mX0.AbstractValueIterator=PX().AbstractValueIterator;mX0.AbstractChainedBatch=BF().AbstractChainedBatch});var xg=_1((nw0,kg)=>{/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */kg.exports=nX0;var oX0=EF();function nX0($,Q,Z){if(typeof Q!=="number")throw Error("second argument must be a Number");let X,Y,z,J,q,W=!0,G;if(Array.isArray($))X=[],z=Y=$.length;else J=Object.keys($),X={},z=Y=J.length;function U(P){function H(){if(Z)Z(P,X);Z=null}if(W)oX0(H);else H()}function D(P,H,N){if(X[P]=N,H)q=!0;if(--z===0||H)U(H);else if(!q&&G<Y){let C;if(J)C=J[G],G+=1,$[C](function(L,B){D(C,L,B)});else C=G,G+=1,$[C](function(L,B){D(C,L,B)})}}if(G=Q,!z)U(null);else if(J)J.some(function(P,H){if($[P](function(N,C){D(P,N,C)}),H===Q-1)return!0;return!1});else $.some(function(P,H){if(P(function(N,C){D(H,N,C)}),H===Q-1)return!0;return!1});W=!1}});var hF=_1((rw0,bg)=>{bg.exports=function(Q){let Z=Q.gte!==void 0?Q.gte:Q.gt!==void 0?Q.gt:void 0,X=Q.lte!==void 0?Q.lte:Q.lt!==void 0?Q.lt:void 0,Y=Q.gte===void 0,z=Q.lte===void 0;if(Z!==void 0&&X!==void 0)return IDBKeyRange.bound(Z,X,Y,z);else if(Z!==void 0)return IDBKeyRange.lowerBound(Z,Y);else if(X!==void 0)return IDBKeyRange.upperBound(X,z);else return null}});var mF=_1((aw0,vg)=>{var rX0=new TextEncoder;vg.exports=function($){if($ instanceof Uint8Array)return $;else if($ instanceof ArrayBuffer)return new Uint8Array($);else return rX0.encode($)}});var pg=_1((sX0)=>{var{AbstractIterator:aX0}=gF(),yg=hF(),BP=mF(),Q$=Symbol("cache"),OQ=Symbol("finished"),j4=Symbol("options"),DQ=Symbol("currentOptions"),gJ=Symbol("position"),pF=Symbol("location"),wW=Symbol("first"),gg={};class mg extends aX0{constructor($,Q,Z){super($,Z);this[Q$]=[],this[OQ]=this.limit===0,this[j4]=Z,this[DQ]={...Z},this[gJ]=void 0,this[pF]=Q,this[wW]=!0}_nextv($,Q,Z){if(this[wW]=!1,this[OQ])return this.nextTick(Z,null,[]);else if(this[Q$].length>0)return $=Math.min($,this[Q$].length),this.nextTick(Z,null,this[Q$].splice(0,$));if(this[gJ]!==void 0)if(this[j4].reverse)this[DQ].lt=this[gJ],this[DQ].lte=void 0;else this[DQ].gt=this[gJ],this[DQ].gte=void 0;let X;try{X=yg(this[DQ])}catch(q){return this[OQ]=!0,this.nextTick(Z,null,[])}let Y=this.db.db.transaction([this[pF]],"readonly"),z=Y.objectStore(this[pF]),J=[];if(!this[j4].reverse){let q,W,G=()=>{if(q===void 0||W===void 0)return;let U=Math.max(q.length,W.length);if(U===0||$===1/0)this[OQ]=!0;else this[gJ]=q[U-1];J.length=U;for(let D=0;D<U;D++){let P=q[D],H=W[D];J[D]=[this[j4].keys&&P!==void 0?BP(P):void 0,this[j4].values&&H!==void 0?BP(H):void 0]}hg(Y)};if(this[j4].keys||$<1/0)z.getAllKeys(X,$<1/0?$:void 0).onsuccess=(U)=>{q=U.target.result,G()};else q=[],this.nextTick(G);if(this[j4].values)z.getAll(X,$<1/0?$:void 0).onsuccess=(U)=>{W=U.target.result,G()};else W=[],this.nextTick(G)}else{let q=!this[j4].values&&z.openKeyCursor?"openKeyCursor":"openCursor";z[q](X,"prev").onsuccess=(W)=>{let G=W.target.result;if(G){let{key:U,value:D}=G;if(this[gJ]=U,J.push([this[j4].keys&&U!==void 0?BP(U):void 0,this[j4].values&&D!==void 0?BP(D):void 0]),J.length<$)G.continue();else hg(Y)}else this[OQ]=!0}}Y.onabort=()=>{Z(Y.error||Error("aborted by user")),Z=null},Y.oncomplete=()=>{Z(null,J),Z=null}}_next($){if(this[Q$].length>0){let[Q,Z]=this[Q$].shift();this.nextTick($,null,Q,Z)}else if(this[OQ])this.nextTick($);else{let Q=Math.min(100,this.limit-this.count);if(this[wW])this[wW]=!1,Q=1;this._nextv(Q,gg,(Z,X)=>{if(Z)return $(Z);this[Q$]=X,this._next($)})}}_all($,Q){this[wW]=!1;let Z=this[Q$].splice(0,this[Q$].length),X=this.limit-this.count-Z.length;if(X<=0)return this.nextTick(Q,null,Z);this._nextv(X,gg,(Y,z)=>{if(Y)return Q(Y);if(Z.length>0)z=Z.concat(z);Q(null,z)})}_seek($,Q){this[wW]=!0,this[Q$]=[],this[OQ]=!1,this[gJ]=void 0,this[DQ]={...this[j4]};let Z;try{Z=yg(this[j4])}catch(X){this[OQ]=!0;return}if(Z!==null&&!Z.includes($))this[OQ]=!0;else if(this[j4].reverse)this[DQ].lte=$;else this[DQ].gte=$}}sX0.Iterator=mg;function hg($){if(typeof $.commit==="function")$.commit()}});var cg=_1((tw0,ug)=>{ug.exports=function(Q,Z,X,Y,z){if(Y.limit===0)return Q.nextTick(z);let J=Q.db.transaction([Z],"readwrite"),q=J.objectStore(Z),W=0;J.oncomplete=function(){z()},J.onabort=function(){z(J.error||Error("aborted by user"))};let G=q.openKeyCursor?"openKeyCursor":"openCursor",U=Y.reverse?"prev":"next";q[G](X,U).onsuccess=function(D){let P=D.target.result;if(P)q.delete(P.key).onsuccess=function(){if(Y.limit<=0||++W<Y.limit)P.continue()}}}});var og=_1((JY0)=>{var{AbstractLevel:eX0}=gF(),dg=J3(),$Y0=xg(),{fromCallback:QY0}=oU(),{Iterator:ZY0}=pg(),lg=mF(),XY0=cg(),YY0=hF(),ZV=Symbol("idb"),uF=Symbol("namePrefix"),MQ=Symbol("location"),cF=Symbol("version"),hJ=Symbol("store"),XV=Symbol("onComplete"),ig=Symbol("promise");class dF extends eX0{constructor($,Q,Z){if(typeof Q==="function"||typeof Z==="function")throw new dg("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:X,version:Y,...z}=Q||{};super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},z);if(typeof $!=="string")throw Error("constructor requires a location string argument");this[MQ]=$,this[uF]=X==null?"level-js-":X,this[cF]=parseInt(Y||1,10),this[ZV]=null}get location(){return this[MQ]}get namePrefix(){return this[uF]}get version(){return this[cF]}get db(){return this[ZV]}get type(){return"browser-level"}_open($,Q){let Z=indexedDB.open(this[uF]+this[MQ],this[cF]);Z.onerror=function(){Q(Z.error||Error("unknown error"))},Z.onsuccess=()=>{this[ZV]=Z.result,Q()},Z.onupgradeneeded=(X)=>{let Y=X.target.result;if(!Y.objectStoreNames.contains(this[MQ]))Y.createObjectStore(this[MQ])}}[hJ]($){return this[ZV].transaction([this[MQ]],$).objectStore(this[MQ])}[XV]($,Q){let Z=$.transaction;Z.onabort=function(){Q(Z.error||Error("aborted by user"))},Z.oncomplete=function(){Q(null,$.result)}}_get($,Q,Z){let X=this[hJ]("readonly"),Y;try{Y=X.get($)}catch(z){return this.nextTick(Z,z)}this[XV](Y,function(z,J){if(z)return Z(z);if(J===void 0)return Z(new dg("Entry not found",{code:"LEVEL_NOT_FOUND"}));Z(null,lg(J))})}_getMany($,Q,Z){let X=this[hJ]("readonly"),Y=$.map((z)=>(J)=>{let q;try{q=X.get(z)}catch(W){return J(W)}q.onsuccess=()=>{let W=q.result;J(null,W===void 0?W:lg(W))},q.onerror=(W)=>{W.stopPropagation(),J(q.error)}});$Y0(Y,16,Z)}_del($,Q,Z){let X=this[hJ]("readwrite"),Y;try{Y=X.delete($)}catch(z){return this.nextTick(Z,z)}this[XV](Y,Z)}_put($,Q,Z,X){let Y=this[hJ]("readwrite"),z;try{z=Y.put(Q,$)}catch(J){return this.nextTick(X,J)}this[XV](z,X)}_iterator($){return new ZY0(this,this[MQ],$)}_batch($,Q,Z){let X=this[hJ]("readwrite"),Y=X.transaction,z=0,J;Y.onabort=function(){Z(J||Y.error||Error("aborted by user"))},Y.oncomplete=function(){Z()};function q(){let W=$[z++],G=W.key,U;try{U=W.type==="del"?X.delete(G):X.put(W.value,G)}catch(D){J=D,Y.abort();return}if(z<$.length)U.onsuccess=q;else if(typeof Y.commit==="function")Y.commit()}q()}_clear($,Q){let Z,X;try{Z=YY0($)}catch(Y){return this.nextTick(Q)}if($.limit>=0)return XY0(this,this[MQ],Z,$,Q);try{let Y=this[hJ]("readwrite");X=Z?Y.delete(Z):Y.clear()}catch(Y){return this.nextTick(Q,Y)}this[XV](X,Q)}_close($){this[ZV].close(),this.nextTick($)}}dF.destroy=function($,Q,Z){if(typeof Q==="function")Z=Q,Q="level-js-";Z=QY0(Z,ig);let X=indexedDB.deleteDatabase(Q+$);return X.onsuccess=function(){Z()},X.onerror=function(Y){Z(Y)},Z[ig]};JY0.BrowserLevel=dF});var lF;var ng=p(()=>{lF=og().BrowserLevel});function JV($,Q,Z){return parseInt($.substr(Q,Z),16)}function sg($){return $|=0,$<0?"00":$<16?"0"+$.toString(16):$<256?$.toString(16):"ff"}function iF($,Q,Z){return Z=Z<0?Z+6:Z>6?Z-6:Z,sg(255*(Z<1?$+(Q-$)*Z:Z<3?Q:Z<4?$+(Q-$)*(4-Z):$))}function qY0($){if(/^#[0-9a-f]{3,8}$/i.test($)){let Q,Z=$.length;if(Z<6){let X=$[1],Y=$[2],z=$[3],J=$[4]||"";Q="#"+X+X+Y+Y+z+z+J+J}if(Z==7||Z>8)Q=$;return Q}}function WY0($,Q,Z){let X;if(Q==0){let Y=sg(Z*255);X=Y+Y+Y}else{let Y=Z<=0.5?Z*(Q+1):Z+Q-Z*Q,z=Z*2-Y;X=iF(z,Y,$*6+2)+iF(z,Y,$*6)+iF(z,Y,$*6-2)}return"#"+X}function YV($,Q,Z){let X=[0.55,0.5,0.5,0.46,0.6,0.55,0.55],Y=X[$*6+0.5|0];return Z=Z<0.5?Z*Y*2:Y+(Z-0.5)*(1-Y)*2,WY0($,Q,Z)}function UY0($,Q){let Z=typeof $=="object"&&$||GY0[rg.n]||KY0[rg.V]||{},X=Z.lightness||{},Y=Z.saturation||{},z="color"in Y?Y.color:Y,J=Y.grayscale,q=Z.backColor,W=Z.padding;function G(D,P){let H=X[D];if(!(H&&H.length>1))H=P;return function(N){return N=H[0]+N*(H[1]-H[0]),N<0?0:N>1?1:N}}function U(D){let P=Z.hues,H;if(P&&P.length>0)H=P[0|0.999*D*P.length];return typeof H=="number"?(H/360%1+1)%1:D}return{W:U,o:typeof z=="number"?z:0.5,D:typeof J=="number"?J:0,p:G("color",[0.4,0.8]),F:G("grayscale",[0.3,0.9]),G:qY0(q),X:typeof $=="number"?$:typeof W=="number"?W:Q}}class zV{constructor($,Q){this.x=$,this.y=Q}}class oF{constructor($,Q,Z,X){this.q=$,this.t=Q,this.H=Z,this.Y=X}I($,Q,Z,X){let Y=this.q+this.H,z=this.t+this.H,J=this.Y;return J===1?new zV(Y-Q-(X||0),this.t+$):J===2?new zV(Y-$-(Z||0),z-Q-(X||0)):J===3?new zV(this.q+Q,z-$-(Z||0)):new zV(this.q+$,this.t+Q)}}class tg{constructor($){this.J=$,this.u=VY0}g($,Q){let Z=Q?-2:2,X=[];for(let Y=Q?$.length-2:0;Y<$.length&&Y>=0;Y+=Z)X.push(this.u.I($[Y],$[Y+1]));this.J.g(X)}h($,Q,Z,X){let Y=this.u.I($,Q,Z,Z);this.J.h(Y,Z,X)}i($,Q,Z,X,Y){this.g([$,Q,$+Z,Q,$+Z,Q+X,$,Q+X],Y)}j($,Q,Z,X,Y,z){let J=[$+Z,Q,$+Z,Q+X,$,Q+X,$,Q];J.splice((Y||0)%4*2,2),this.g(J,z)}K($,Q,Z,X,Y){this.g([$+Z/2,Q,$+Z,Q+X/2,$+Z/2,Q+X,$,Q+X/2],Y)}}function OY0($,Q,Z,X){$=$%14;let Y,z,J,q,W,G;!$?(Y=Z*0.42,Q.g([0,0,Z,0,Z,Z-Y*2,Z-Y,Z,0,Z])):$==1?(J=0|Z*0.5,q=0|Z*0.8,Q.j(Z-J,0,J,q,2)):$==2?(J=0|Z/3,Q.i(J,J,Z-J,Z-J)):$==3?(W=Z*0.1,G=Z<6?1:Z<8?2:0|Z*0.25,W=W>1?0|W:W>0.5?1:W,Q.i(G,G,Z-W-G,Z-W-G)):$==4?(z=0|Z*0.15,J=0|Z*0.5,Q.h(Z-J-z,Z-J-z,J)):$==5?(W=Z*0.1,G=W*4,G>3&&(G=0|G),Q.i(0,0,Z,Z),Q.g([G,G,Z-W,G,G+(Z-G-W)/2,Z-W],!0)):$==6?Q.g([0,0,Z,0,Z,Z*0.7,Z*0.4,Z*0.4,Z*0.7,Z,0,Z]):$==7?Q.j(Z/2,Z/2,Z/2,Z/2,3):$==8?(Q.i(0,0,Z,Z/2),Q.i(0,Z/2,Z/2,Z/2),Q.j(Z/2,Z/2,Z/2,Z/2,1)):$==9?(W=Z*0.14,G=Z<4?1:Z<6?2:0|Z*0.35,W=Z<8?W:0|W,Q.i(0,0,Z,Z),Q.i(G,G,Z-G-W,Z-G-W,!0)):$==10?(W=Z*0.12,G=W*3,Q.i(0,0,Z,Z),Q.h(G,G,Z-W-G,!0)):$==11?Q.j(Z/2,Z/2,Z/2,Z/2,3):$==12?(z=Z*0.25,Q.i(0,0,Z,Z),Q.K(z,z,Z-z,Z-z,!0)):!X&&(z=Z*0.4,J=Z*1.2,Q.h(z,z,J))}function ag($,Q,Z){$=$%4;let X;!$?Q.j(0,0,Z,Z,0):$==1?Q.j(0,Z/2,Z,Z/2,0):$==2?Q.K(0,0,Z,Z):(X=Z/6,Q.h(X,X,Z-2*X))}function DY0($,Q){return $=Q.W($),[YV($,Q.D,Q.F(0)),YV($,Q.o,Q.p(0.5)),YV($,Q.D,Q.F(1)),YV($,Q.o,Q.p(1)),YV($,Q.o,Q.p(0))]}function MY0($,Q,Z){let X=UY0(Z,0.08);if(X.G)$.m(X.G);let Y=$.k,z=0.5+Y*X.X|0;Y-=z*2;let J=new tg($),q=0|Y/4,W=0|z+Y/2-q*2,G=0|z+Y/2-q*2;function U(L,B,E,I,_){let f=JV(Q,E,1),x=I?JV(Q,I,1):0;$.L(P[H[L]]);for(let g=0;g<_.length;g++)J.u=new oF(W+_[g][0]*q,G+_[g][1]*q,q,x++%4),B(f,J,q,g);$.M()}let D=JV(Q,-7)/268435455,P=DY0(D,X),H=[],N;function C(L){if(L.indexOf(N)>=0){for(let B=0;B<L.length;B++)if(H.indexOf(L[B])>=0)return!0}}for(let L=0;L<3;L++){if(N=JV(Q,8+L,1)%P.length,C([0,4])||C([2,3]))N=1;H.push(N)}U(0,ag,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),U(1,ag,4,5,[[0,0],[3,0],[3,3],[0,3]]),U(2,OY0,1,null,[[1,1],[2,1],[2,2],[1,2]]),$.finish()}function PY0($){var X=0,Y=0,z=encodeURI($)+"%80",J=[],q,W=[],G=1732584193,U=4023233417,D=~G,P=~U,H=3285377520,N=[G,U,D,P,H],C=0,L="";function B(E,I){return E<<I|E>>>32-I}for(;X<z.length;Y++)J[Y>>2]=J[Y>>2]|(z[X]=="%"?parseInt(z.substring(X+1,X+=3),16):z.charCodeAt(X++))<<(3-(Y&3))*8;q=((Y+7>>6)+1)*16,J[q-1]=Y*8-8;for(;C<q;C+=16){for(X=0;X<80;X++)Y=B(G,5)+H+(X<20?(U&D^~U&P)+1518500249:X<40?(U^D^P)+1859775393:X<60?(U&D^U&P^D&P)+2400959708:(U^D^P)+3395469782)+(W[X]=X<16?J[C+X]|0:B(W[X-3]^W[X-8]^W[X-14]^W[X-16],1)),H=P,P=D,D=B(U,30),U=G,G=Y;N[0]=G=N[0]+G|0,N[1]=U=N[1]+U|0,N[2]=D=N[2]+D|0,N[3]=P=N[3]+P|0,N[4]=H=N[4]+H|0}for(X=0;X<40;X++)L+=(N[X>>3]>>>(7-(X&7))*4&15).toString(16);return L}function HY0($){return/^[0-9a-f]{11,}$/i.test($)&&$}function jY0($){return PY0($==null?"":""+$)}function BW($){return($*10+0.5|0)/10}class eg{constructor(){this.v=""}g($){let Q="";for(let Z=0;Z<$.length;Z++)Q+=(Z?"L":"M")+BW($[Z].x)+" "+BW($[Z].y);this.v+=Q+"Z"}h($,Q,Z){let X=Z?0:1,Y=BW(Q/2),z=BW(Q),J="a"+Y+","+Y+" 0 1,"+X+" ";this.v+="M"+BW($.x)+" "+BW($.y+Q/2)+J+z+",0"+J+-z+",0"}}class $h{constructor($){this.A,this.B={},this.O=$,this.k=$.k}m($){let Q=/^(#......)(..)?/.exec($),Z=Q[2]?JV(Q[2],0)/255:1;this.O.m(Q[1],Z)}L($){this.A=this.B[$]||(this.B[$]=new eg)}M(){}g($){this.A.g($)}h($,Q,Z){this.A.h($,Q,Z)}finish(){let $=this.B;for(let Q in $)if($.hasOwnProperty(Q))this.O.P(Q,$[Q].v)}}class Qh{constructor($){this.k=$,this.C='<svg xmlns="'+RY0.R+'" width="'+$+'" height="'+$+'" viewBox="0 0 '+$+" "+$+'">'}m($,Q){if(Q)this.C+='<rect width="100%" height="100%" fill="'+$+'" opacity="'+Q.toFixed(2)+'"/>'}P($,Q){this.C+='<path fill="'+$+'" d="'+Q+'"/>'}toString(){return this.C+"</svg>"}}function nF($,Q,Z){let X=new Qh(Q);return MY0(new $h(X),HY0($)||jY0($),Z),X.toString()}var KY0,rg,GY0,VY0,QB0,RY0;var Zh=p(()=>{KY0=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},rg={V:"jdenticon_config",n:"config"},GY0={};VY0=new oF(0,0,0,0);QB0=typeof document<"u"&&document.querySelectorAll.bind(document);RY0={R:"http://www.w3.org/2000/svg",S:"width",T:"height"}});var mJ="6.16.0";function NY0($,Q,Z){let X=Q.split("|").map((z)=>z.trim());for(let z=0;z<X.length;z++)switch(Q){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof $===Q)return}let Y=Error(`invalid value for type ${Q}`);throw Y.code="INVALID_ARGUMENT",Y.argument=`value.${Z}`,Y.value=$,Y}async function T6($){let Q=Object.keys($);return(await Promise.all(Q.map((X)=>Promise.resolve($[X])))).reduce((X,Y,z)=>{return X[Q[z]]=Y,X},{})}function r0($,Q,Z){for(let X in Q){let Y=Q[X],z=Z?Z[X]:null;if(z)NY0(Y,z,X);Object.defineProperty($,X,{enumerable:!0,value:Y,writable:!1})}}function EW($,Q){if($==null)return"null";if(Q==null)Q=new Set;if(typeof $==="object"){if(Q.has($))return"[Circular]";Q.add($)}if(Array.isArray($))return"[ "+$.map((Z)=>EW(Z,Q)).join(", ")+" ]";if($ instanceof Uint8Array){let X="0x";for(let Y=0;Y<$.length;Y++)X+="0123456789abcdef"[$[Y]>>4],X+="0123456789abcdef"[$[Y]&15];return X}if(typeof $==="object"&&typeof $.toJSON==="function")return EW($.toJSON(),Q);switch(typeof $){case"boolean":case"number":case"symbol":return $.toString();case"bigint":return BigInt($).toString();case"string":return JSON.stringify($);case"object":{let Z=Object.keys($);return Z.sort(),"{ "+Z.map((X)=>`${EW(X,Q)}: ${EW($[X],Q)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function o5($,Q){return $&&$.code===Q}function PQ($){return o5($,"CALL_EXCEPTION")}function H5($,Q,Z){let X=$;{let z=[];if(Z){if("message"in Z||"code"in Z||"name"in Z)throw Error(`value will overwrite populated values: ${EW(Z)}`);for(let J in Z){if(J==="shortMessage")continue;let q=Z[J];z.push(J+"="+EW(q))}}if(z.push(`code=${Q}`),z.push(`version=${mJ}`),z.length)$+=" ("+z.join(", ")+")"}let Y;switch(Q){case"INVALID_ARGUMENT":Y=TypeError($);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":Y=RangeError($);break;default:Y=Error($)}if(r0(Y,{code:Q}),Z)Object.assign(Y,Z);if(Y.shortMessage==null)r0(Y,{shortMessage:X});return Y}function P0($,Q,Z,X){if(!$)throw H5(Q,Z,X)}function r($,Q,Z,X){P0($,Q,"INVALID_ARGUMENT",{argument:Z,value:X})}function NX($,Q,Z){if(Z==null)Z="";if(Z)Z=": "+Z;P0($>=Q,"missing argument"+Z,"MISSING_ARGUMENT",{count:$,expectedCount:Q}),P0($<=Q,"too many arguments"+Z,"UNEXPECTED_ARGUMENT",{count:$,expectedCount:Q})}function CX($){P0(CY0.indexOf($)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:$}})}function W9($,Q,Z){if(Z==null)Z="";if($!==Q){let X=Z,Y="new";if(Z)X+=".",Y+=" "+Z;P0(!1,`private constructor; use ${X}from* methods`,"UNSUPPORTED_OPERATION",{operation:Y})}}var CY0;var W3=p(()=>{CY0=["NFD","NFC","NFKD","NFKC"].reduce(($,Q)=>{try{if("test".normalize(Q)!=="test")throw Error("bad");if(Q==="NFD"){let Z=String.fromCharCode(233).normalize("NFD"),X=String.fromCharCode(101,769);if(Z!==X)throw Error("broken")}$.push(Q)}catch(Z){}return $},[])});function Yh($,Q,Z){if($ instanceof Uint8Array){if(Z)return new Uint8Array($);return $}if(typeof $==="string"&&$.length%2===0&&$.match(/^0x[0-9a-f]*$/i)){let X=new Uint8Array(($.length-2)/2),Y=2;for(let z=0;z<X.length;z++)X[z]=parseInt($.substring(Y,Y+2),16),Y+=2;return X}r(!1,"invalid BytesLike value",Q||"value",$)}function x0($,Q){return Yh($,Q,!1)}function f6($,Q){return Yh($,Q,!0)}function J5($,Q){if(typeof $!=="string"||!$.match(/^0x[0-9A-Fa-f]*$/))return!1;if(typeof Q==="number"&&$.length!==2+2*Q)return!1;if(Q===!0&&$.length%2!==0)return!1;return!0}function q7($){return J5($,!0)||$ instanceof Uint8Array}function F0($){let Q=x0($),Z="0x";for(let X=0;X<Q.length;X++){let Y=Q[X];Z+=Xh[(Y&240)>>4]+Xh[Y&15]}return Z}function S1($){return"0x"+$.map((Q)=>F0(Q).substring(2)).join("")}function O2($){if(J5($,!0))return($.length-2)/2;return x0($).length}function m5($,Q,Z){let X=x0($);if(Z!=null&&Z>X.length)P0(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:X,length:X.length,offset:Z});return F0(X.slice(Q==null?0:Q,Z==null?X.length:Z))}function EP($){let Q=F0($).substring(2);while(Q.startsWith("00"))Q=Q.substring(2);return"0x"+Q}function Jh($,Q,Z){let X=x0($);P0(Q>=X.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(X),length:Q,offset:Q+1});let Y=new Uint8Array(Q);if(Y.fill(0),Z)Y.set(X,Q-X.length);else Y.set(X,0);return F0(Y)}function U8($,Q){return Jh($,Q,!0)}function Z$($,Q){return Jh($,Q,!1)}var Xh="0123456789abcdef";var W7=p(()=>{W3()});function X$($,Q){let Z=LX($,"value"),X=BigInt(G1(Q,"width"));if(P0(Z>>X===qV,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:$}),Z>>X-K3){let Y=(K3<<X)-K3;return-((~Z&Y)+K3)}return Z}function Y$($,Q){let Z=e0($,"value"),X=BigInt(G1(Q,"width")),Y=K3<<X-K3;if(Z<qV){Z=-Z,P0(Z<=Y,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:$});let z=(K3<<X)-K3;return(~Z&z)+K3}else P0(Z<Y,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:$});return Z}function a2($,Q){let Z=LX($,"value"),X=BigInt(G1(Q,"bits"));return Z&(K3<<X)-K3}function e0($,Q){switch(typeof $){case"bigint":return $;case"number":return r(Number.isInteger($),"underflow",Q||"value",$),r($>=-IW&&$<=IW,"overflow",Q||"value",$),BigInt($);case"string":try{if($==="")throw Error("empty string");if($[0]==="-"&&$[1]!=="-")return-BigInt($.substring(1));return BigInt($)}catch(Z){r(!1,`invalid BigNumberish string: ${Z.message}`,Q||"value",$)}}r(!1,"invalid BigNumberish value",Q||"value",$)}function LX($,Q){let Z=e0($,Q);return P0(Z>=qV,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:$}),Z}function R4($){if($ instanceof Uint8Array){let Q="0x0";for(let Z of $)Q+=zh[Z>>4],Q+=zh[Z&15];return BigInt(Q)}return e0($)}function G1($,Q){switch(typeof $){case"bigint":return r($>=-IW&&$<=IW,"overflow",Q||"value",$),Number($);case"number":return r(Number.isInteger($),"underflow",Q||"value",$),r($>=-IW&&$<=IW,"overflow",Q||"value",$),$;case"string":try{if($==="")throw Error("empty string");return G1(BigInt($),Q)}catch(Z){r(!1,`invalid numeric string: ${Z.message}`,Q||"value",$)}}r(!1,"invalid numeric value",Q||"value",$)}function _W($){return G1(R4($))}function n8($,Q){let Z=LX($,"value"),X=Z.toString(16);if(Q==null){if(X.length%2)X="0"+X}else{let Y=G1(Q,"width");if(Y===0&&Z===qV)return"0x";P0(Y*2>=X.length,`value exceeds width (${Y} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:$});while(X.length<Y*2)X="0"+X}return"0x"+X}function k5($,Q){let Z=LX($,"value");if(Z===qV){let z=Q!=null?G1(Q,"width"):0;return new Uint8Array(z)}let X=Z.toString(16);if(X.length%2)X="0"+X;if(Q!=null){let z=G1(Q,"width");while(X.length<z*2)X="00"+X;P0(z*2===X.length,`value exceeds width (${z} bytes)`,"NUMERIC_FAULT",{operation:"toBeArray",fault:"overflow",value:$})}let Y=new Uint8Array(X.length/2);for(let z=0;z<Y.length;z++){let J=z*2;Y[z]=parseInt(X.substring(J,J+2),16)}return Y}function y8($){let Q=F0(q7($)?$:k5($)).substring(2);while(Q.startsWith("0"))Q=Q.substring(1);if(Q==="")Q="0";return"0x"+Q}var qV,K3,IW=9007199254740991,zh="0123456789abcdef";var SW=p(()=>{W7();W3();qV=BigInt(0),K3=BigInt(1)});function LY0($){if(IP==null){IP={};for(let Z=0;Z<_P.length;Z++)IP[_P[Z]]=BigInt(Z)}let Q=IP[$];return r(Q!=null,"invalid base58 value","letter",$),Q}function TX($){let Q=x0($),Z=R4(Q),X="";while(Z)X=_P[Number(Z%rF)]+X,Z/=rF;for(let Y=0;Y<Q.length;Y++){if(Q[Y])break;X=_P[0]+X}return X}function fW($){let Q=TY0;for(let Z=0;Z<$.length;Z++)Q*=rF,Q+=LY0($[Z]);return Q}var _P="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",IP=null,TY0,rF;var qh=p(()=>{W7();W3();SW();TY0=BigInt(0),rF=BigInt(58)});function kW($){$=atob($);let Q=new Uint8Array($.length);for(let Z=0;Z<$.length;Z++)Q[Z]=$.charCodeAt(Z);return x0(Q)}function xW($){let Q=x0($),Z="";for(let X=0;X<Q.length;X++)Z+=String.fromCharCode(Q[X]);return btoa(Z)}var aF=p(()=>{W7()});class HQ{filter;emitter;#$;constructor($,Q,Z){this.#$=Q,r0(this,{emitter:$,filter:Z})}async removeListener(){if(this.#$==null)return;await this.emitter.off(this.filter,this.#$)}}var Wh=()=>{};function FY0($,Q,Z,X,Y){r(!1,`invalid codepoint at offset ${Q}; ${$}`,"bytes",Z)}function Kh($,Q,Z,X,Y){if($==="BAD_PREFIX"||$==="UNEXPECTED_CONTINUE"){let z=0;for(let J=Q+1;J<Z.length;J++){if(Z[J]>>6!==2)break;z++}return z}if($==="OVERRUN")return Z.length-Q-1;return 0}function AY0($,Q,Z,X,Y){if($==="OVERLONG")return r(typeof Y==="number","invalid bad code point for replacement","badCodepoint",Y),X.push(Y),0;return X.push(65533),Kh($,Q,Z,X,Y)}function Gh($,Q){if(Q==null)Q=WV.error;let Z=x0($,"bytes"),X=[],Y=0;while(Y<Z.length){let z=Z[Y++];if(z>>7===0){X.push(z);continue}let J=null,q=null;if((z&224)===192)J=1,q=127;else if((z&240)===224)J=2,q=2047;else if((z&248)===240)J=3,q=65535;else{if((z&192)===128)Y+=Q("UNEXPECTED_CONTINUE",Y-1,Z,X);else Y+=Q("BAD_PREFIX",Y-1,Z,X);continue}if(Y-1+J>=Z.length){Y+=Q("OVERRUN",Y-1,Z,X);continue}let W=z&(1<<8-J-1)-1;for(let G=0;G<J;G++){let U=Z[Y];if((U&192)!=128){Y+=Q("MISSING_CONTINUE",Y,Z,X),W=null;break}W=W<<6|U&63,Y++}if(W===null)continue;if(W>1114111){Y+=Q("OUT_OF_RANGE",Y-1-J,Z,X,W);continue}if(W>=55296&&W<=57343){Y+=Q("UTF16_SURROGATE",Y-1-J,Z,X,W);continue}if(W<=q){Y+=Q("OVERLONG",Y-1-J,Z,X,W);continue}X.push(W)}return X}function p5($,Q){if(r(typeof $==="string","invalid string value","str",$),Q!=null)CX(Q),$=$.normalize(Q);let Z=[];for(let X=0;X<$.length;X++){let Y=$.charCodeAt(X);if(Y<128)Z.push(Y);else if(Y<2048)Z.push(Y>>6|192),Z.push(Y&63|128);else if((Y&64512)==55296){X++;let z=$.charCodeAt(X);r(X<$.length&&(z&64512)===56320,"invalid surrogate pair","str",$);let J=65536+((Y&1023)<<10)+(z&1023);Z.push(J>>18|240),Z.push(J>>12&63|128),Z.push(J>>6&63|128),Z.push(J&63|128)}else Z.push(Y>>12|224),Z.push(Y>>6&63|128),Z.push(Y&63|128)}return new Uint8Array(Z)}function wY0($){return $.map((Q)=>{if(Q<=65535)return String.fromCharCode(Q);return Q-=65536,String.fromCharCode((Q>>10&1023)+55296,(Q&1023)+56320)}).join("")}function u9($,Q){return wY0(Gh($,Q))}function SP($,Q){return Gh(p5($,Q))}var WV;var fP=p(()=>{W7();W3();WV=Object.freeze({error:FY0,ignore:Kh,replace:AY0})});function kP($){async function Q(Z,X){P0(X==null||!X.cancelled,"request cancelled before sending","CANCELLED");let Y=Z.url.split(":")[0].toLowerCase();P0(Y==="http"||Y==="https",`unsupported protocol ${Y}`,"UNSUPPORTED_OPERATION",{info:{protocol:Y},operation:"request"}),P0(Y==="https"||!Z.credentials||Z.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let z=null,J=new AbortController,q=setTimeout(()=>{z=H5("request timeout","TIMEOUT"),J.abort()},Z.timeout);if(X)X.addListener(()=>{z=H5("request cancelled","CANCELLED"),J.abort()});let W=Object.assign({},$,{method:Z.method,headers:new Headers(Array.from(Z)),body:Z.body||void 0,signal:J.signal}),G;try{G=await fetch(Z.url,W)}catch(H){if(clearTimeout(q),z)throw z;throw H}clearTimeout(q);let U={};G.headers.forEach((H,N)=>{U[N.toLowerCase()]=H});let D=await G.arrayBuffer(),P=D==null?null:new Uint8Array(D);return{statusCode:G.status,statusMessage:G.statusText,headers:U,body:P}}return Q}var AB0;var Uh=p(()=>{W3();AB0=kP({})});async function Dh($,Q){try{let Z=$.match(IY0);if(!Z)throw Error("invalid data");return new K7(200,"OK",{"content-type":Z[1]||"text/plain"},Z[2]?kW(Z[3]):SY0(Z[3]))}catch(Z){return new K7(599,"BAD REQUEST (invalid data: URI)",{},null,new n5($))}}function Mh($){async function Q(Z,X){try{let Y=Z.match(_Y0);if(!Y)throw Error("invalid link");return new n5(`${$}${Y[2]}`)}catch(Y){return new K7(599,"BAD REQUEST (invalid IPFS URI)",{},null,new n5(Z))}}return Q}class bW{#$;#Q;constructor($){this.#$=[],this.#Q=!1,Ph.set($,()=>{if(this.#Q)return;this.#Q=!0;for(let Q of this.#$)setTimeout(()=>{Q()},0);this.#$=[]})}addListener($){P0(!this.#Q,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#$.push($)}get cancelled(){return this.#Q}checkSignal(){P0(!this.cancelled,"cancelled","CANCELLED",{})}}function bP($){if($==null)throw Error("missing signal; should not happen");return $.checkSignal(),$}function Oh(){return new Date().getTime()}function SY0($){return p5($.replace(/%([0-9a-f][0-9a-f])/gi,(Q,Z)=>{return String.fromCharCode(parseInt(Z,16))}))}function fY0($){return new Promise((Q)=>setTimeout(Q,$))}var BY0=12,EY0=250,Vh,IY0,_Y0,sF=!1,xP,Ph,n5,K7;var Hh=p(()=>{aF();W7();W3();fP();Uh();Vh=kP(),IY0=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),_Y0=new RegExp("^ipfs://(ipfs/)?(.*)$","i");xP={data:Dh,ipfs:Mh("https://gateway.ipfs.io/ipfs/")},Ph=new WeakMap;n5=class n5{#$;#Q;#Z;#X;#Y;#z;#J;#W;#U;#K;#q;#D;#G;#O;#V;get url(){return this.#z}set url($){this.#z=String($)}get body(){if(this.#J==null)return null;return new Uint8Array(this.#J)}set body($){if($==null)this.#J=void 0,this.#W=void 0;else if(typeof $==="string")this.#J=p5($),this.#W="text/plain";else if($ instanceof Uint8Array)this.#J=$,this.#W="application/octet-stream";else if(typeof $==="object")this.#J=p5(JSON.stringify($)),this.#W="application/json";else throw Error("invalid body")}hasBody(){return this.#J!=null}get method(){if(this.#X)return this.#X;if(this.hasBody())return"POST";return"GET"}set method($){if($==null)$="";this.#X=String($).toUpperCase()}get headers(){let $=Object.assign({},this.#Z);if(this.#U)$.authorization=`Basic ${xW(p5(this.#U))}`;if(this.allowGzip)$["accept-encoding"]="gzip";if($["content-type"]==null&&this.#W)$["content-type"]=this.#W;if(this.body)$["content-length"]=String(this.body.length);return $}getHeader($){return this.headers[$.toLowerCase()]}setHeader($,Q){this.#Z[String($).toLowerCase()]=String(Q)}clearHeaders(){this.#Z={}}[Symbol.iterator](){let $=this.headers,Q=Object.keys($),Z=0;return{next:()=>{if(Z<Q.length){let X=Q[Z++];return{value:[X,$[X]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#U||null}setCredentials($,Q){r(!$.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#U=`${$}:${Q}`}get allowGzip(){return this.#Q}set allowGzip($){this.#Q=!!$}get allowInsecureAuthentication(){return!!this.#$}set allowInsecureAuthentication($){this.#$=!!$}get timeout(){return this.#Y}set timeout($){r($>=0,"timeout must be non-zero","timeout",$),this.#Y=$}get preflightFunc(){return this.#K||null}set preflightFunc($){this.#K=$}get processFunc(){return this.#q||null}set processFunc($){this.#q=$}get retryFunc(){return this.#D||null}set retryFunc($){this.#D=$}get getUrlFunc(){return this.#V||Vh}set getUrlFunc($){this.#V=$}constructor($){this.#z=String($),this.#$=!1,this.#Q=!0,this.#Z={},this.#X="",this.#Y=300000,this.#O={slotInterval:EY0,maxAttempts:BY0},this.#V=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#J?F0(this.#J):"null"}>`}setThrottleParams($){if($.slotInterval!=null)this.#O.slotInterval=$.slotInterval;if($.maxAttempts!=null)this.#O.maxAttempts=$.maxAttempts}async#M($,Q,Z,X,Y){if($>=this.#O.maxAttempts)return Y.makeServerError("exceeded maximum retry limit");if(P0(Oh()<=Q,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:X}),Z>0)await fY0(Z);let z=this.clone(),J=(z.url.split(":")[0]||"").toLowerCase();if(J in xP){let G=await xP[J](z.url,bP(X.#G));if(G instanceof K7){let U=G;if(this.processFunc){bP(X.#G);try{U=await this.processFunc(z,U)}catch(D){if(D.throttle==null||typeof D.stall!=="number")U.makeServerError("error in post-processing function",D).assertOk()}}return U}z=G}if(this.preflightFunc)z=await this.preflightFunc(z);let q=await this.getUrlFunc(z,bP(X.#G)),W=new K7(q.statusCode,q.statusMessage,q.headers,q.body,X);if(W.statusCode===301||W.statusCode===302){try{let G=W.headers.location||"";return z.redirect(G).#M($+1,Q,0,X,W)}catch(G){}return W}else if(W.statusCode===429){if(this.retryFunc==null||await this.retryFunc(z,W,$)){let G=W.headers["retry-after"],U=this.#O.slotInterval*Math.trunc(Math.random()*Math.pow(2,$));if(typeof G==="string"&&G.match(/^[1-9][0-9]*$/))U=parseInt(G);return z.clone().#M($+1,Q,U,X,W)}}if(this.processFunc){bP(X.#G);try{W=await this.processFunc(z,W)}catch(G){if(G.throttle==null||typeof G.stall!=="number")W.makeServerError("error in post-processing function",G).assertOk();let U=this.#O.slotInterval*Math.trunc(Math.random()*Math.pow(2,$));if(G.stall>=0)U=G.stall;return z.clone().#M($+1,Q,U,X,W)}}return W}send(){return P0(this.#G==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#G=new bW(this),this.#M(0,Oh()+this.timeout,0,this,new K7(0,"",{},null,this))}cancel(){P0(this.#G!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});let $=Ph.get(this);if(!$)throw Error("missing signal; should not happen");$()}redirect($){let Q=this.url.split(":")[0].toLowerCase(),Z=$.split(":")[0].toLowerCase();P0(this.method==="GET"&&(Q!=="https"||Z!=="http")&&$.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify($)})`});let X=new n5($);if(X.method="GET",X.allowGzip=this.allowGzip,X.timeout=this.timeout,X.#Z=Object.assign({},this.#Z),this.#J)X.#J=new Uint8Array(this.#J);return X.#W=this.#W,X}clone(){let $=new n5(this.url);if($.#X=this.#X,this.#J)$.#J=this.#J;if($.#W=this.#W,$.#Z=Object.assign({},this.#Z),$.#U=this.#U,this.allowGzip)$.allowGzip=!0;if($.timeout=this.timeout,this.allowInsecureAuthentication)$.allowInsecureAuthentication=!0;return $.#K=this.#K,$.#q=this.#q,$.#D=this.#D,$.#O=Object.assign({},this.#O),$.#V=this.#V,$}static lockConfig(){sF=!0}static getGateway($){return xP[$.toLowerCase()]||null}static registerGateway($,Q){if($=$.toLowerCase(),$==="http"||$==="https")throw Error(`cannot intercept ${$}; use registerGetUrl`);if(sF)throw Error("gateways locked");xP[$]=Q}static registerGetUrl($){if(sF)throw Error("gateways locked");Vh=$}static createGetUrlFunc($){return kP($)}static createDataGateway(){return Dh}static createIpfsGatewayFunc($){return Mh($)}};K7=class K7{#$;#Q;#Z;#X;#Y;#z;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#X?F0(this.#X):"null"}>`}get statusCode(){return this.#$}get statusMessage(){return this.#Q}get headers(){return Object.assign({},this.#Z)}get body(){return this.#X==null?null:new Uint8Array(this.#X)}get bodyText(){try{return this.#X==null?"":u9(this.#X)}catch($){P0(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch($){P0(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){let $=this.headers,Q=Object.keys($),Z=0;return{next:()=>{if(Z<Q.length){let X=Q[Z++];return{value:[X,$[X]],done:!1}}return{value:void 0,done:!0}}}}constructor($,Q,Z,X,Y){this.#$=$,this.#Q=Q,this.#Z=Object.keys(Z).reduce((z,J)=>{return z[J.toLowerCase()]=String(Z[J]),z},{}),this.#X=X==null?null:new Uint8Array(X),this.#Y=Y||null,this.#z={message:""}}makeServerError($,Q){let Z;if(!$)$=`${this.statusCode} ${this.statusMessage}`,Z=`CLIENT ESCALATED SERVER ERROR (${$})`;else Z=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${$})`;let X=new K7(599,Z,this.headers,this.body,this.#Y||void 0);return X.#z={message:$,error:Q},X}throwThrottleError($,Q){if(Q==null)Q=-1;else r(Number.isInteger(Q)&&Q>=0,"invalid stall timeout","stall",Q);let Z=Error($||"throttling requests");throw r0(Z,{stall:Q,throttle:!0}),Z}getHeader($){return this.headers[$.toLowerCase()]}hasBody(){return this.#X!=null}get request(){return this.#Y}ok(){return this.#z.message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:$,error:Q}=this.#z;if($==="")$=`server response ${this.statusCode} ${this.statusMessage}`;let Z=null;if(this.request)Z=this.request.url;let X=null;try{if(this.#X)X=u9(this.#X)}catch(Y){}P0(!1,$,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:Q,info:{requestUrl:Z,responseBody:X,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}});function pJ($){let Q=gW;while(Q.length<$)Q+=Q;return BigInt("1"+Q.substring(0,$))}function KV($,Q,Z){let X=BigInt(Q.width);if(Q.signed){let Y=yW<<X-yW;if(P0(Z==null||$>=-Y&&$<Y,"overflow","NUMERIC_FAULT",{operation:Z,fault:"overflow",value:$}),$>G3)$=X$(a2($,X),X);else $=-X$(a2(-$,X),X)}else{let Y=yW<<X;P0(Z==null||$>=0&&$<Y,"overflow","NUMERIC_FAULT",{operation:Z,fault:"overflow",value:$}),$=($%Y+Y)%Y&Y-yW}return $}function tF($){if(typeof $==="number")$=`fixed128x${$}`;let Q=!0,Z=128,X=18;if(typeof $==="string")if($==="fixed");else if($==="ufixed")Q=!1;else{let z=$.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);r(z,"invalid fixed format","format",$),Q=z[1]!=="u",Z=parseInt(z[2]),X=parseInt(z[3])}else if($){let z=$,J=(q,W,G)=>{if(z[q]==null)return G;return r(typeof z[q]===W,"invalid fixed format ("+q+" not "+W+")","format."+q,z[q]),z[q]};Q=J("signed","boolean",Q),Z=J("width","number",Z),X=J("decimals","number",X)}r(Z%8===0,"invalid FixedNumber width (not byte aligned)","format.width",Z),r(X<=80,"invalid FixedNumber decimals (too large)","format.decimals",X);let Y=(Q?"":"u")+"fixed"+String(Z)+"x"+String(X);return{signed:Q,width:Z,decimals:X,name:Y}}function bY0($,Q){let Z="";if($<G3)Z="-",$*=kY0;let X=$.toString();if(Q===0)return Z+X;while(X.length<=Q)X=gW+X;let Y=X.length-Q;X=X.substring(0,Y)+"."+X.substring(Y);while(X[0]==="0"&&X[1]!==".")X=X.substring(1);while(X[X.length-1]==="0"&&X[X.length-2]!==".")X=X.substring(0,X.length-1);return Z+X}class s2{format;#$;#Q;#Z;_value;constructor($,Q,Z){W9($,vW,"FixedNumber"),this.#Q=Q,this.#$=Z;let X=bY0(Q,Z.decimals);r0(this,{format:Z.name,_value:X}),this.#Z=pJ(Z.decimals)}get signed(){return this.#$.signed}get width(){return this.#$.width}get decimals(){return this.#$.decimals}get value(){return this.#Q}#X($){r(this.format===$.format,"incompatible format; use fixedNumber.toFormat","other",$)}#Y($,Q){return $=KV($,this.#$,Q),new s2(vW,$,this.#$)}#z($,Q){return this.#X($),this.#Y(this.#Q+$.#Q,Q)}addUnsafe($){return this.#z($)}add($){return this.#z($,"add")}#J($,Q){return this.#X($),this.#Y(this.#Q-$.#Q,Q)}subUnsafe($){return this.#J($)}sub($){return this.#J($,"sub")}#W($,Q){return this.#X($),this.#Y(this.#Q*$.#Q/this.#Z,Q)}mulUnsafe($){return this.#W($)}mul($){return this.#W($,"mul")}mulSignal($){this.#X($);let Q=this.#Q*$.#Q;return P0(Q%this.#Z===G3,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#Y(Q/this.#Z,"mulSignal")}#U($,Q){return P0($.#Q!==G3,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#X($),this.#Y(this.#Q*this.#Z/$.#Q,Q)}divUnsafe($){return this.#U($)}div($){return this.#U($,"div")}divSignal($){P0($.#Q!==G3,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#X($);let Q=this.#Q*this.#Z;return P0(Q%$.#Q===G3,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#Y(Q/$.#Q,"divSignal")}cmp($){let Q=this.value,Z=$.value,X=this.decimals-$.decimals;if(X>0)Z*=pJ(X);else if(X<0)Q*=pJ(-X);if(Q<Z)return-1;if(Q>Z)return 1;return 0}eq($){return this.cmp($)===0}lt($){return this.cmp($)<0}lte($){return this.cmp($)<=0}gt($){return this.cmp($)>0}gte($){return this.cmp($)>=0}floor(){let $=this.#Q;if(this.#Q<G3)$-=this.#Z-yW;return $=this.#Q/this.#Z*this.#Z,this.#Y($,"floor")}ceiling(){let $=this.#Q;if(this.#Q>G3)$+=this.#Z-yW;return $=this.#Q/this.#Z*this.#Z,this.#Y($,"ceiling")}round($){if($==null)$=0;if($>=this.decimals)return this;let Q=this.decimals-$,Z=xY0*pJ(Q-1),X=this.value+Z,Y=pJ(Q);return X=X/Y*Y,KV(X,this.#$,"round"),new s2(vW,X,this.#$)}isZero(){return this.#Q===G3}isNegative(){return this.#Q<G3}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat($){return s2.fromString(this.toString(),$)}static fromValue($,Q,Z){let X=Q==null?0:G1(Q),Y=tF(Z),z=e0($,"value"),J=X-Y.decimals;if(J>0){let q=pJ(J);P0(z%q===G3,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:$}),z/=q}else if(J<0)z*=pJ(-J);return KV(z,Y,"fromValue"),new s2(vW,z,Y)}static fromString($,Q){let Z=$.match(/^(-?)([0-9]*)\.?([0-9]*)$/);r(Z&&Z[2].length+Z[3].length>0,"invalid FixedNumber string value","value",$);let X=tF(Q),Y=Z[2]||"0",z=Z[3]||"";while(z.length<X.decimals)z+=gW;P0(z.substring(X.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:$}),z=z.substring(0,X.decimals);let J=BigInt(Z[1]+Y+z);return KV(J,X,"fromString"),new s2(vW,J,X)}static fromBytes($,Q){let Z=R4(x0($,"value")),X=tF(Q);if(X.signed)Z=X$(Z,X.width);return KV(Z,X,"fromBytes"),new s2(vW,Z,X)}}var kY0,G3,yW,xY0,vW,gW="0000";var eF=p(()=>{W7();W3();SW();kY0=BigInt(-1),G3=BigInt(0),yW=BigInt(1),xY0=BigInt(5),vW={};while(gW.length<80)gW+=gW});function vY0($){let Q=$.toString(16);while(Q.length<2)Q="0"+Q;return"0x"+Q}function jh($,Q,Z){let X=0;for(let Y=0;Y<Z;Y++)X=X*256+$[Q+Y];return X}function Rh($,Q,Z,X){let Y=[];while(Z<Q+1+X){let z=Nh($,Z);Y.push(z.result),Z+=z.consumed,P0(Z<=Q+1+X,"child data too short","BUFFER_OVERRUN",{buffer:$,length:X,offset:Q})}return{consumed:1+X,result:Y}}function Nh($,Q){P0($.length!==0,"data too short","BUFFER_OVERRUN",{buffer:$,length:0,offset:1});let Z=(X)=>{P0(X<=$.length,"data short segment too short","BUFFER_OVERRUN",{buffer:$,length:$.length,offset:X})};if($[Q]>=248){let X=$[Q]-247;Z(Q+1+X);let Y=jh($,Q+1,X);return Z(Q+1+X+Y),Rh($,Q,Q+1+X,X+Y)}else if($[Q]>=192){let X=$[Q]-192;return Z(Q+1+X),Rh($,Q,Q+1,X)}else if($[Q]>=184){let X=$[Q]-183;Z(Q+1+X);let Y=jh($,Q+1,X);Z(Q+1+X+Y);let z=F0($.slice(Q+1+X,Q+1+X+Y));return{consumed:1+X+Y,result:z}}else if($[Q]>=128){let X=$[Q]-128;Z(Q+1+X);let Y=F0($.slice(Q+1,Q+1+X));return{consumed:1+X,result:Y}}return{consumed:1,result:vY0($[Q])}}function J$($){let Q=x0($,"data"),Z=Nh(Q,0);return r(Z.consumed===Q.length,"unexpected junk after rlp payload","data",$),Z.result}var Ch=p(()=>{W7();W3();W7()});function Lh($){let Q=[];while($)Q.unshift($&255),$>>=8;return Q}function Fh($){if(Array.isArray($)){let X=[];if($.forEach(function(z){X=X.concat(Fh(z))}),X.length<=55)return X.unshift(192+X.length),X;let Y=Lh(X.length);return Y.unshift(247+Y.length),Y.concat(X)}let Q=Array.prototype.slice.call(x0($,"object"));if(Q.length===1&&Q[0]<=127)return Q;else if(Q.length<=55)return Q.unshift(128+Q.length),Q;let Z=Lh(Q.length);return Z.unshift(183+Z.length),Z.concat(Q)}function T9($){let Q="0x";for(let Z of Fh($))Q+=Th[Z>>4],Q+=Th[Z&15];return Q}var Th="0123456789abcdef";var Ah=p(()=>{W7()});function FX($,Q){let Z=18;if(typeof Q==="string"){let X=wh.indexOf(Q);r(X>=0,"invalid unit","unit",Q),Z=3*X}else if(Q!=null)Z=G1(Q,"unit");return s2.fromValue($,Z,{decimals:Z,width:512}).toString()}function uJ($,Q){r(typeof $==="string","value must be a string","value",$);let Z=18;if(typeof Q==="string"){let X=wh.indexOf(Q);r(X>=0,"invalid unit","unit",Q),Z=3*X}else if(Q!=null)Z=G1(Q,"unit");return s2.fromString($,{decimals:Z,width:512}).value}function vP($){return FX($,18)}function yP($){return uJ($,18)}var wh;var Bh=p(()=>{W3();eF();SW();wh=["wei","kwei","mwei","gwei","szabo","finney","ether"]});function hW($){let Q=x0($,"randomBytes");Q[6]=Q[6]&15|64,Q[8]=Q[8]&63|128;let Z=F0(Q);return[Z.substring(2,10),Z.substring(10,14),Z.substring(14,18),Z.substring(18,22),Z.substring(22,34)].join("-")}var Eh=p(()=>{W7()});var J1=p(()=>{qh();aF();W7();W3();Wh();Hh();eF();SW();Ch();Ah();Bh();fP();Eh()});function cJ($){return Sh.get($)}function Ih($,Q){Sh.set($,Q)}function GV($,Q){let Z=Error(`deferred error during ABI decoding triggered accessing ${$}`);throw Z.error=Q,Z}function QA($,Q,Z){if($.indexOf(null)>=0)return Q.map((X,Y)=>{if(X instanceof D2)return QA(cJ(X),X,Z);return X});return $.reduce((X,Y,z)=>{let J=Q.getValue(Y);if(!(Y in X)){if(Z&&J instanceof D2)J=QA(cJ(J),J,Z);X[Y]=J}return X},{})}function UV($){let Q=[],Z=function(X,Y){if(!Array.isArray(Y))return;for(let z in Y){let J=X.slice();J.push(z);try{Z(J,Y[z])}catch(q){Q.push({path:J,error:q})}}};return Z([],$),Q}function _h($){let Q=k5($);if(P0(Q.length<=F9,"value out-of-bounds","BUFFER_OVERRUN",{buffer:Q,length:F9,offset:Q.length}),Q.length!==F9)Q=f6(S1([$A.slice(Q.length%F9),Q]));return Q}class r8{name;type;localName;dynamic;constructor($,Q,Z,X){r0(this,{name:$,type:Q,localName:Z,dynamic:X},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError($,Q){r(!1,$,this.localName,Q)}}class mW{#$;#Q;constructor(){this.#$=[],this.#Q=0}get data(){return S1(this.#$)}get length(){return this.#Q}#Z($){return this.#$.push($),this.#Q+=$.length,$.length}appendWriter($){return this.#Z(f6($.data))}writeBytes($){let Q=f6($),Z=Q.length%F9;if(Z)Q=f6(S1([Q,$A.slice(Z)]));return this.#Z(Q)}writeValue($){return this.#Z(_h($))}writeUpdatableValue(){let $=this.#$.length;return this.#$.push($A),this.#Q+=F9,(Q)=>{this.#$[$]=_h(Q)}}}class hP{allowLoose;#$;#Q;#Z;#X;#Y;constructor($,Q,Z){r0(this,{allowLoose:!!Q}),this.#$=f6($),this.#Z=0,this.#X=null,this.#Y=Z!=null?Z:1024,this.#Q=0}get data(){return F0(this.#$)}get dataLength(){return this.#$.length}get consumed(){return this.#Q}get bytes(){return new Uint8Array(this.#$)}#z($){if(this.#X)return this.#X.#z($);this.#Z+=$,P0(this.#Y<1||this.#Z<=this.#Y*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#Y} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:f6(this.#$),offset:this.#Q,length:$,info:{bytesRead:this.#Z,dataLength:this.dataLength}})}#J($,Q,Z){let X=Math.ceil(Q/F9)*F9;if(this.#Q+X>this.#$.length)if(this.allowLoose&&Z&&this.#Q+Q<=this.#$.length)X=Q;else P0(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:f6(this.#$),length:this.#$.length,offset:this.#Q+X});return this.#$.slice(this.#Q,this.#Q+X)}subReader($){let Q=new hP(this.#$.slice(this.#Q+$),this.allowLoose,this.#Y);return Q.#X=this,Q}readBytes($,Q){let Z=this.#J(0,$,!!Q);return this.#z($),this.#Q+=Z.length,Z.slice(0,$)}readValue(){return R4(this.readBytes(F9))}readIndex(){return _W(this.readBytes(F9))}}var F9=32,$A,yY0,gP,Sh,D2;var G7=p(()=>{J1();$A=new Uint8Array(F9),yY0=["then"],gP={},Sh=new WeakMap;D2=class D2 extends Array{#$;constructor(...$){let Q=$[0],Z=$[1],X=($[2]||[]).slice(),Y=!0;if(Q!==gP)Z=$,X=[],Y=!1;super(Z.length);Z.forEach((q,W)=>{this[W]=q});let z=X.reduce((q,W)=>{if(typeof W==="string")q.set(W,(q.get(W)||0)+1);return q},new Map);if(Ih(this,Object.freeze(Z.map((q,W)=>{let G=X[W];if(G!=null&&z.get(G)===1)return G;return null}))),this.#$=[],this.#$==null)this.#$;if(!Y)return;Object.freeze(this);let J=new Proxy(this,{get:(q,W,G)=>{if(typeof W==="string"){if(W.match(/^[0-9]+$/)){let D=G1(W,"%index");if(D<0||D>=this.length)throw RangeError("out of result range");let P=q[D];if(P instanceof Error)GV(`index ${D}`,P);return P}if(yY0.indexOf(W)>=0)return Reflect.get(q,W,G);let U=q[W];if(U instanceof Function)return function(...D){return U.apply(this===G?q:this,D)};else if(!(W in q))return q.getValue.apply(this===G?q:this,[W])}return Reflect.get(q,W,G)}});return Ih(J,cJ(this)),J}toArray($){let Q=[];return this.forEach((Z,X)=>{if(Z instanceof Error)GV(`index ${X}`,Z);if($&&Z instanceof D2)Z=Z.toArray($);Q.push(Z)}),Q}toObject($){let Q=cJ(this);return Q.reduce((Z,X,Y)=>{return P0(X!=null,`value at index ${Y} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),QA(Q,this,$)},{})}slice($,Q){if($==null)$=0;if($<0){if($+=this.length,$<0)$=0}if(Q==null)Q=this.length;if(Q<0){if(Q+=this.length,Q<0)Q=0}if(Q>this.length)Q=this.length;let Z=cJ(this),X=[],Y=[];for(let z=$;z<Q;z++)X.push(this[z]),Y.push(Z[z]);return new D2(gP,X,Y)}filter($,Q){let Z=cJ(this),X=[],Y=[];for(let z=0;z<this.length;z++){let J=this[z];if(J instanceof Error)GV(`index ${z}`,J);if($.call(Q,J,z,this))X.push(J),Y.push(Z[z])}return new D2(gP,X,Y)}map($,Q){let Z=[];for(let X=0;X<this.length;X++){let Y=this[X];if(Y instanceof Error)GV(`index ${X}`,Y);Z.push($.call(Q,Y,X,this))}return Z}getValue($){let Q=cJ(this).indexOf($);if(Q===-1)return;let Z=this[Q];if(Z instanceof Error)GV(`property ${JSON.stringify($)}`,Z.error);return Z}static fromItems($,Q){return new D2(gP,$,Q)}}});function c9($){if(!Number.isSafeInteger($)||$<0)throw Error(`Wrong positive integer: ${$}`)}function VV($,...Q){if(!($ instanceof Uint8Array))throw Error("Expected Uint8Array");if(Q.length>0&&!Q.includes($.length))throw Error(`Expected Uint8Array of length ${Q}, not of length=${$.length}`)}function mP($){if(typeof $!=="function"||typeof $.create!=="function")throw Error("Hash should be wrapped by utils.wrapConstructor");c9($.outputLen),c9($.blockLen)}function jQ($,Q=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(Q&&$.finished)throw Error("Hash#digest() has already been called")}function pP($,Q){VV($);let Z=Q.outputLen;if($.length<Z)throw Error(`digestInto() expects output buffer of length at least ${Z}`)}var pW=()=>{};var uP;var fh=p(()=>{uP=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:void 0});async function cP($,Q,Z){let X=Date.now();for(let Y=0;Y<$;Y++){Z(Y);let z=Date.now()-X;if(z>=0&&z<Q)continue;await hY0(),X+=z}}function mY0($){if(typeof $!=="string")throw Error(`utf8ToBytes expected string, got ${typeof $}`);return new Uint8Array(new TextEncoder().encode($))}function z$($){if(typeof $==="string")$=mY0($);if(!kh($))throw Error(`expected Uint8Array, got ${typeof $}`);return $}function xh(...$){let Q=new Uint8Array($.reduce((X,Y)=>X+Y.length,0)),Z=0;return $.forEach((X)=>{if(!kh(X))throw Error("Uint8Array expected");Q.set(X,Z),Z+=X.length}),Q}class dJ{clone(){return this._cloneInto()}}function dP($,Q){if(Q!==void 0&&pY0.call(Q)!=="[object Object]")throw Error("Options should be object or undefined");return Object.assign($,Q)}function AX($){let Q=(X)=>$().update(z$(X)).digest(),Z=$();return Q.outputLen=Z.outputLen,Q.blockLen=Z.blockLen,Q.create=()=>$(),Q}function bh($=32){if(uP&&typeof uP.getRandomValues==="function")return uP.getRandomValues(new Uint8Array($));throw Error("crypto.getRandomValues must be defined")}var kh=($)=>$ instanceof Uint8Array,uW=($)=>new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4)),cW=($)=>new DataView($.buffer,$.byteOffset,$.byteLength),U3=($,Q)=>$<<32-Q|$>>>Q,gY0,hY0=async()=>{},pY0;var q$=p(()=>{fh();/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */gY0=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!gY0)throw Error("Non little-endian hardware is not supported");pY0={}.toString});var ZA,lJ=($,Q,Z)=>new ZA($,Q).update(Z).digest();var lP=p(()=>{pW();q$();ZA=class ZA extends dJ{constructor($,Q){super();this.finished=!1,this.destroyed=!1,mP($);let Z=z$(Q);if(this.iHash=$.create(),typeof this.iHash.update!=="function")throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let X=this.blockLen,Y=new Uint8Array(X);Y.set(Z.length>X?$.create().update(Z).digest():Z);for(let z=0;z<Y.length;z++)Y[z]^=54;this.iHash.update(Y),this.oHash=$.create();for(let z=0;z<Y.length;z++)Y[z]^=106;this.oHash.update(Y),Y.fill(0)}update($){return jQ(this),this.iHash.update($),this}digestInto($){jQ(this),VV($,this.outputLen),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||($=Object.create(Object.getPrototypeOf(this),{}));let{oHash:Q,iHash:Z,finished:X,destroyed:Y,blockLen:z,outputLen:J}=this;return $=$,$.finished=X,$.destroyed=Y,$.blockLen=z,$.outputLen=J,$.oHash=Q._cloneInto($.oHash),$.iHash=Z._cloneInto($.iHash),$}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};lJ.create=($,Q)=>new ZA($,Q)});function uY0($,Q,Z,X){mP($);let Y=dP({dkLen:32,asyncTick:10},X),{c:z,dkLen:J,asyncTick:q}=Y;if(c9(z),c9(J),c9(q),z<1)throw Error("PBKDF2: iterations (c) should be >= 1");let W=z$(Q),G=z$(Z),U=new Uint8Array(J),D=lJ.create($,W),P=D._cloneInto().update(G);return{c:z,dkLen:J,asyncTick:q,DK:U,PRF:D,PRFSalt:P}}function cY0($,Q,Z,X,Y){if($.destroy(),Q.destroy(),X)X.destroy();return Y.fill(0),Z}function OV($,Q,Z,X){let{c:Y,dkLen:z,DK:J,PRF:q,PRFSalt:W}=uY0($,Q,Z,X),G,U=new Uint8Array(4),D=cW(U),P=new Uint8Array(q.outputLen);for(let H=1,N=0;N<z;H++,N+=q.outputLen){let C=J.subarray(N,N+q.outputLen);D.setInt32(0,H,!1),(G=W._cloneInto(G)).update(U).digestInto(P),C.set(P.subarray(0,C.length));for(let L=1;L<Y;L++){q._cloneInto(G).update(P).digestInto(P);for(let B=0;B<C.length;B++)C[B]^=P[B]}}return cY0(q,W,J,G,P)}var XA=p(()=>{pW();lP();q$()});function dY0($,Q,Z,X){if(typeof $.setBigUint64==="function")return $.setBigUint64(Q,Z,X);let Y=BigInt(32),z=BigInt(4294967295),J=Number(Z>>Y&z),q=Number(Z&z),W=X?4:0,G=X?0:4;$.setUint32(Q+W,J,X),$.setUint32(Q+G,q,X)}var iJ;var iP=p(()=>{pW();q$();iJ=class iJ extends dJ{constructor($,Q,Z,X){super();this.blockLen=$,this.outputLen=Q,this.padOffset=Z,this.isLE=X,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array($),this.view=cW(this.buffer)}update($){jQ(this);let{view:Q,buffer:Z,blockLen:X}=this;$=z$($);let Y=$.length;for(let z=0;z<Y;){let J=Math.min(X-this.pos,Y-z);if(J===X){let q=cW($);for(;X<=Y-z;z+=X)this.process(q,z);continue}if(Z.set($.subarray(z,z+J),this.pos),this.pos+=J,z+=J,this.pos===X)this.process(Q,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){jQ(this),pP($,this),this.finished=!0;let{buffer:Q,view:Z,blockLen:X,isLE:Y}=this,{pos:z}=this;if(Q[z++]=128,this.buffer.subarray(z).fill(0),this.padOffset>X-z)this.process(Z,0),z=0;for(let U=z;U<X;U++)Q[U]=0;dY0(Z,X-8,BigInt(this.length*8),Y),this.process(Z,0);let J=cW($),q=this.outputLen;if(q%4)throw Error("_sha2: outputLen should be aligned to 32bit");let W=q/4,G=this.get();if(W>G.length)throw Error("_sha2: outputLen bigger than state");for(let U=0;U<W;U++)J.setUint32(4*U,G[U],Y)}digest(){let{buffer:$,outputLen:Q}=this;this.digestInto($);let Z=$.slice(0,Q);return this.destroy(),Z}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:Q,buffer:Z,length:X,finished:Y,destroyed:z,pos:J}=this;if($.length=X,$.pos=J,$.finished=Y,$.destroyed=z,X%Q)$.buffer.set(Z);return $}}});var lY0=($,Q,Z)=>$&Q^~$&Z,iY0=($,Q,Z)=>$&Q^$&Z^Q&Z,oY0,wX,BX,vh,RQ;var oP=p(()=>{iP();q$();oY0=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),wX=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),BX=new Uint32Array(64);vh=class vh extends iJ{constructor(){super(64,32,8,!1);this.A=wX[0]|0,this.B=wX[1]|0,this.C=wX[2]|0,this.D=wX[3]|0,this.E=wX[4]|0,this.F=wX[5]|0,this.G=wX[6]|0,this.H=wX[7]|0}get(){let{A:$,B:Q,C:Z,D:X,E:Y,F:z,G:J,H:q}=this;return[$,Q,Z,X,Y,z,J,q]}set($,Q,Z,X,Y,z,J,q){this.A=$|0,this.B=Q|0,this.C=Z|0,this.D=X|0,this.E=Y|0,this.F=z|0,this.G=J|0,this.H=q|0}process($,Q){for(let U=0;U<16;U++,Q+=4)BX[U]=$.getUint32(Q,!1);for(let U=16;U<64;U++){let D=BX[U-15],P=BX[U-2],H=U3(D,7)^U3(D,18)^D>>>3,N=U3(P,17)^U3(P,19)^P>>>10;BX[U]=N+BX[U-7]+H+BX[U-16]|0}let{A:Z,B:X,C:Y,D:z,E:J,F:q,G:W,H:G}=this;for(let U=0;U<64;U++){let D=U3(J,6)^U3(J,11)^U3(J,25),P=G+D+lY0(J,q,W)+oY0[U]+BX[U]|0,N=(U3(Z,2)^U3(Z,13)^U3(Z,22))+iY0(Z,X,Y)|0;G=W,W=q,q=J,J=z+P|0,z=Y,Y=X,X=Z,Z=P+N|0}Z=Z+this.A|0,X=X+this.B|0,Y=Y+this.C|0,z=z+this.D|0,J=J+this.E|0,q=q+this.F|0,W=W+this.G|0,G=G+this.H|0,this.set(Z,X,Y,z,J,q,W,G)}roundClean(){BX.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};RQ=AX(()=>new vh)});function yh($,Q=!1){if(Q)return{h:Number($&nP),l:Number($>>YA&nP)};return{h:Number($>>YA&nP)|0,l:Number($&nP)|0}}function JA($,Q=!1){let Z=new Uint32Array($.length),X=new Uint32Array($.length);for(let Y=0;Y<$.length;Y++){let{h:z,l:J}=yh($[Y],Q);[Z[Y],X[Y]]=[z,J]}return[Z,X]}function XJ0($,Q,Z,X){let Y=(Q>>>0)+(X>>>0);return{h:$+Z+(Y/4294967296|0)|0,l:Y|0}}var nP,YA,nY0=($,Q)=>BigInt($>>>0)<<YA|BigInt(Q>>>0),rY0=($,Q,Z)=>$>>>Z,aY0=($,Q,Z)=>$<<32-Z|Q>>>Z,sY0=($,Q,Z)=>$>>>Z|Q<<32-Z,tY0=($,Q,Z)=>$<<32-Z|Q>>>Z,eY0=($,Q,Z)=>$<<64-Z|Q>>>Z-32,$J0=($,Q,Z)=>$>>>Z-32|Q<<64-Z,QJ0=($,Q)=>Q,ZJ0=($,Q)=>$,zA=($,Q,Z)=>$<<Z|Q>>>32-Z,qA=($,Q,Z)=>Q<<Z|$>>>32-Z,WA=($,Q,Z)=>Q<<Z-32|$>>>64-Z,KA=($,Q,Z)=>$<<Z-32|Q>>>64-Z,YJ0=($,Q,Z)=>($>>>0)+(Q>>>0)+(Z>>>0),JJ0=($,Q,Z,X)=>Q+Z+X+($/4294967296|0)|0,zJ0=($,Q,Z,X)=>($>>>0)+(Q>>>0)+(Z>>>0)+(X>>>0),qJ0=($,Q,Z,X,Y)=>Q+Z+X+Y+($/4294967296|0)|0,WJ0=($,Q,Z,X,Y)=>($>>>0)+(Q>>>0)+(Z>>>0)+(X>>>0)+(Y>>>0),KJ0=($,Q,Z,X,Y,z)=>Q+Z+X+Y+z+($/4294967296|0)|0,GJ0,q5;var GA=p(()=>{nP=BigInt(4294967295),YA=BigInt(32);GJ0={fromBig:yh,split:JA,toBig:nY0,shrSH:rY0,shrSL:aY0,rotrSH:sY0,rotrSL:tY0,rotrBH:eY0,rotrBL:$J0,rotr32H:QJ0,rotr32L:ZJ0,rotlSH:zA,rotlSL:qA,rotlBH:WA,rotlBL:KA,add:XJ0,add3L:YJ0,add3H:JJ0,add4L:zJ0,add4H:qJ0,add5H:KJ0,add5L:WJ0},q5=GJ0});var UJ0,VJ0,EX,IX,gh,rP;var hh=p(()=>{iP();GA();q$();[UJ0,VJ0]=(()=>q5.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(($)=>BigInt($))))(),EX=new Uint32Array(80),IX=new Uint32Array(80);gh=class gh extends iJ{constructor(){super(128,64,16,!1);this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:$,Al:Q,Bh:Z,Bl:X,Ch:Y,Cl:z,Dh:J,Dl:q,Eh:W,El:G,Fh:U,Fl:D,Gh:P,Gl:H,Hh:N,Hl:C}=this;return[$,Q,Z,X,Y,z,J,q,W,G,U,D,P,H,N,C]}set($,Q,Z,X,Y,z,J,q,W,G,U,D,P,H,N,C){this.Ah=$|0,this.Al=Q|0,this.Bh=Z|0,this.Bl=X|0,this.Ch=Y|0,this.Cl=z|0,this.Dh=J|0,this.Dl=q|0,this.Eh=W|0,this.El=G|0,this.Fh=U|0,this.Fl=D|0,this.Gh=P|0,this.Gl=H|0,this.Hh=N|0,this.Hl=C|0}process($,Q){for(let E=0;E<16;E++,Q+=4)EX[E]=$.getUint32(Q),IX[E]=$.getUint32(Q+=4);for(let E=16;E<80;E++){let I=EX[E-15]|0,_=IX[E-15]|0,f=q5.rotrSH(I,_,1)^q5.rotrSH(I,_,8)^q5.shrSH(I,_,7),x=q5.rotrSL(I,_,1)^q5.rotrSL(I,_,8)^q5.shrSL(I,_,7),g=EX[E-2]|0,h=IX[E-2]|0,v=q5.rotrSH(g,h,19)^q5.rotrBH(g,h,61)^q5.shrSH(g,h,6),b=q5.rotrSL(g,h,19)^q5.rotrBL(g,h,61)^q5.shrSL(g,h,6),m=q5.add4L(x,b,IX[E-7],IX[E-16]),K=q5.add4H(m,f,v,EX[E-7],EX[E-16]);EX[E]=K|0,IX[E]=m|0}let{Ah:Z,Al:X,Bh:Y,Bl:z,Ch:J,Cl:q,Dh:W,Dl:G,Eh:U,El:D,Fh:P,Fl:H,Gh:N,Gl:C,Hh:L,Hl:B}=this;for(let E=0;E<80;E++){let I=q5.rotrSH(U,D,14)^q5.rotrSH(U,D,18)^q5.rotrBH(U,D,41),_=q5.rotrSL(U,D,14)^q5.rotrSL(U,D,18)^q5.rotrBL(U,D,41),f=U&P^~U&N,x=D&H^~D&C,g=q5.add5L(B,_,x,VJ0[E],IX[E]),h=q5.add5H(g,L,I,f,UJ0[E],EX[E]),v=g|0,b=q5.rotrSH(Z,X,28)^q5.rotrBH(Z,X,34)^q5.rotrBH(Z,X,39),m=q5.rotrSL(Z,X,28)^q5.rotrBL(Z,X,34)^q5.rotrBL(Z,X,39),K=Z&Y^Z&J^Y&J,M=X&z^X&q^z&q;L=N|0,B=C|0,N=P|0,C=H|0,P=U|0,H=D|0,{h:U,l:D}=q5.add(W|0,G|0,h|0,v|0),W=J|0,G=q|0,J=Y|0,q=z|0,Y=Z|0,z=X|0;let j=q5.add3L(v,m,M);Z=q5.add3H(j,h,b,K),X=j|0}({h:Z,l:X}=q5.add(this.Ah|0,this.Al|0,Z|0,X|0)),{h:Y,l:z}=q5.add(this.Bh|0,this.Bl|0,Y|0,z|0),{h:J,l:q}=q5.add(this.Ch|0,this.Cl|0,J|0,q|0),{h:W,l:G}=q5.add(this.Dh|0,this.Dl|0,W|0,G|0),{h:U,l:D}=q5.add(this.Eh|0,this.El|0,U|0,D|0),{h:P,l:H}=q5.add(this.Fh|0,this.Fl|0,P|0,H|0),{h:N,l:C}=q5.add(this.Gh|0,this.Gl|0,N|0,C|0),{h:L,l:B}=q5.add(this.Hh|0,this.Hl|0,L|0,B|0),this.set(Z,X,Y,z,J,q,W,G,U,D,P,H,N,C,L,B)}roundClean(){EX.fill(0),IX.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};rP=AX(()=>new gh)});function OJ0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw Error("unable to locate global object")}function UA($){switch($){case"sha256":return RQ.create();case"sha512":return rP.create()}r(!1,"invalid hashing algorithm name","algorithm",$)}function uh($,Q){let Z={sha256:RQ,sha512:rP}[$];return r(Z!=null,"invalid hmac algorithm","algorithm",$),lJ.create(Z,Q)}function ch($,Q,Z,X,Y){let z={sha256:RQ,sha512:rP}[Y];return r(z!=null,"invalid pbkdf2 algorithm","algorithm",Y),OV(z,$,Q,{c:Z,dkLen:X})}function dh($){P0(ph!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),r(Number.isInteger($)&&$>0&&$<=1024,"invalid length","length",$);let Q=new Uint8Array($);return ph.getRandomValues(Q),Q}var mh,ph;var DV=p(()=>{lP();XA();oP();hh();J1();mh=OJ0(),ph=mh.crypto||mh.msCrypto});function U7($,Q,Z){let X=x0(Q,"key"),Y=x0(Z,"data");return F0(oh($,X,Y))}var lh=!1,ih=function($,Q,Z){return uh($,Q).update(Z).digest()},oh;var nh=p(()=>{DV();J1();oh=ih;U7._=ih;U7.lock=function(){lh=!0};U7.register=function($){if(lh)throw Error("computeHmac is locked");oh=$};Object.freeze(U7)});function CJ0($,Q=24){let Z=new Uint32Array(10);for(let X=24-Q;X<24;X++){for(let J=0;J<10;J++)Z[J]=$[J]^$[J+10]^$[J+20]^$[J+30]^$[J+40];for(let J=0;J<10;J+=2){let q=(J+8)%10,W=(J+2)%10,G=Z[W],U=Z[W+1],D=rh(G,U,1)^Z[q],P=ah(G,U,1)^Z[q+1];for(let H=0;H<50;H+=10)$[J+H]^=D,$[J+H+1]^=P}let Y=$[2],z=$[3];for(let J=0;J<24;J++){let q=th[J],W=rh(Y,z,q),G=ah(Y,z,q),U=sh[J];Y=$[U],z=$[U+1],$[U]=W,$[U+1]=G}for(let J=0;J<50;J+=10){for(let q=0;q<10;q++)Z[q]=$[J+q];for(let q=0;q<10;q++)$[J+q]^=~Z[(q+2)%10]&Z[(q+4)%10]}$[0]^=RJ0[X],$[1]^=NJ0[X]}Z.fill(0)}var sh,th,eh,DJ0,MV,MJ0,PJ0,HJ0,jJ0,RJ0,NJ0,rh=($,Q,Z)=>Z>32?WA($,Q,Z):zA($,Q,Z),ah=($,Q,Z)=>Z>32?KA($,Q,Z):qA($,Q,Z),VA,LJ0=($,Q,Z)=>AX(()=>new VA(Q,$,Z)),$m;var Qm=p(()=>{pW();GA();q$();[sh,th,eh]=[[],[],[]],DJ0=BigInt(0),MV=BigInt(1),MJ0=BigInt(2),PJ0=BigInt(7),HJ0=BigInt(256),jJ0=BigInt(113);for(let $=0,Q=MV,Z=1,X=0;$<24;$++){[Z,X]=[X,(2*Z+3*X)%5],sh.push(2*(5*X+Z)),th.push(($+1)*($+2)/2%64);let Y=DJ0;for(let z=0;z<7;z++)if(Q=(Q<<MV^(Q>>PJ0)*jJ0)%HJ0,Q&MJ0)Y^=MV<<(MV<<BigInt(z))-MV;eh.push(Y)}[RJ0,NJ0]=JA(eh,!0);VA=class VA extends dJ{constructor($,Q,Z,X=!1,Y=24){super();if(this.blockLen=$,this.suffix=Q,this.outputLen=Z,this.enableXOF=X,this.rounds=Y,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,c9(Z),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=uW(this.state)}keccak(){CJ0(this.state32,this.rounds),this.posOut=0,this.pos=0}update($){jQ(this);let{blockLen:Q,state:Z}=this;$=z$($);let X=$.length;for(let Y=0;Y<X;){let z=Math.min(Q-this.pos,X-Y);for(let J=0;J<z;J++)Z[this.pos++]^=$[Y++];if(this.pos===Q)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:$,suffix:Q,pos:Z,blockLen:X}=this;if($[Z]^=Q,(Q&128)!==0&&Z===X-1)this.keccak();$[X-1]^=128,this.keccak()}writeInto($){jQ(this,!1),VV($),this.finish();let Q=this.state,{blockLen:Z}=this;for(let X=0,Y=$.length;X<Y;){if(this.posOut>=Z)this.keccak();let z=Math.min(Z-this.posOut,Y-X);$.set(Q.subarray(this.posOut,this.posOut+z),X),this.posOut+=z,X+=z}return $}xofInto($){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto($)}xof($){return c9($),this.xofInto(new Uint8Array($))}digestInto($){if(pP($,this),this.finished)throw Error("digest() was already called");return this.writeInto($),this.destroy(),$}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto($){let{blockLen:Q,suffix:Z,outputLen:X,rounds:Y,enableXOF:z}=this;return $||($=new VA(Q,Z,X,z,Y)),$.state32.set(this.state32),$.pos=this.pos,$.posOut=this.posOut,$.finished=this.finished,$.rounds=Y,$.suffix=Z,$.outputLen=X,$.enableXOF=z,$.destroyed=this.destroyed,$}};$m=LJ0(1,136,32)});function p1($){let Q=x0($,"data");return F0(Ym(Q))}var Zm=!1,Xm=function($){return $m($)},Ym;var Jm=p(()=>{Qm();J1();Ym=Xm;p1._=Xm;p1.lock=function(){Zm=!0};p1.register=function($){if(Zm)throw TypeError("keccak256 is locked");Ym=$};Object.freeze(p1)});function zm($,Q,Z,X){if($===0)return Q^Z^X;else if($===1)return Q&Z|~Q&X;else if($===2)return(Q|~Z)^X;else if($===3)return Q&X|Z&~X;else return Q^(Z|~X)}var TJ0,qm,FJ0,OA,DA,Wm,AJ0,wJ0,BJ0,EJ0,aP=($,Q)=>$<<Q|$>>>32-Q,sP,Km,Gm;var Um=p(()=>{iP();q$();TJ0=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),qm=Uint8Array.from({length:16},($,Q)=>Q),FJ0=qm.map(($)=>(9*$+5)%16),OA=[qm],DA=[FJ0];for(let $=0;$<4;$++)for(let Q of[OA,DA])Q.push(Q[$].map((Z)=>TJ0[Z]));Wm=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(($)=>new Uint8Array($)),AJ0=OA.map(($,Q)=>$.map((Z)=>Wm[Q][Z])),wJ0=DA.map(($,Q)=>$.map((Z)=>Wm[Q][Z])),BJ0=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),EJ0=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);sP=new Uint32Array(16);Km=class Km extends iJ{constructor(){super(64,20,8,!0);this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:$,h1:Q,h2:Z,h3:X,h4:Y}=this;return[$,Q,Z,X,Y]}set($,Q,Z,X,Y){this.h0=$|0,this.h1=Q|0,this.h2=Z|0,this.h3=X|0,this.h4=Y|0}process($,Q){for(let P=0;P<16;P++,Q+=4)sP[P]=$.getUint32(Q,!0);let Z=this.h0|0,X=Z,Y=this.h1|0,z=Y,J=this.h2|0,q=J,W=this.h3|0,G=W,U=this.h4|0,D=U;for(let P=0;P<5;P++){let H=4-P,N=BJ0[P],C=EJ0[P],L=OA[P],B=DA[P],E=AJ0[P],I=wJ0[P];for(let _=0;_<16;_++){let f=aP(Z+zm(P,Y,J,W)+sP[L[_]]+N,E[_])+U|0;Z=U,U=W,W=aP(J,10)|0,J=Y,Y=f}for(let _=0;_<16;_++){let f=aP(X+zm(H,z,q,G)+sP[B[_]]+C,I[_])+D|0;X=D,D=G,G=aP(q,10)|0,q=z,z=f}}this.set(this.h1+J+G|0,this.h2+W+D|0,this.h3+U+X|0,this.h4+Z+z|0,this.h0+Y+q|0)}roundClean(){sP.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};Gm=AX(()=>new Km)});function V7($){let Q=x0($,"data");return F0(Dm(Q))}var Vm=!1,Om=function($){return Gm($)},Dm;var Mm=p(()=>{Um();J1();Dm=Om;V7._=Om;V7.lock=function(){Vm=!0};V7.register=function($){if(Vm)throw TypeError("ripemd160 is locked");Dm=$};Object.freeze(V7)});function d9($,Q,Z,X,Y){let z=x0($,"password"),J=x0(Q,"salt");return F0(jm(z,J,Z,X,Y))}var Pm=!1,Hm=function($,Q,Z,X,Y){return ch($,Q,Z,X,Y)},jm;var Rm=p(()=>{DV();J1();jm=Hm;d9._=Hm;d9.lock=function(){Pm=!0};d9.register=function($){if(Pm)throw Error("pbkdf2 is locked");jm=$};Object.freeze(d9)});function A9($){return Lm($)}var Nm=!1,Cm=function($){return new Uint8Array(dh($))},Lm;var Tm=p(()=>{DV();Lm=Cm;A9._=Cm;A9.lock=function(){Nm=!0};A9.register=function($){if(Nm)throw Error("randomBytes is locked");Lm=$};Object.freeze(A9)});function Fm($,Q,Z,X,Y,z){let J=$[Q++]^Z[X++],q=$[Q++]^Z[X++],W=$[Q++]^Z[X++],G=$[Q++]^Z[X++],U=$[Q++]^Z[X++],D=$[Q++]^Z[X++],P=$[Q++]^Z[X++],H=$[Q++]^Z[X++],N=$[Q++]^Z[X++],C=$[Q++]^Z[X++],L=$[Q++]^Z[X++],B=$[Q++]^Z[X++],E=$[Q++]^Z[X++],I=$[Q++]^Z[X++],_=$[Q++]^Z[X++],f=$[Q++]^Z[X++],x=J,g=q,h=W,v=G,b=U,m=D,K=P,M=H,j=N,O=C,R=L,F=B,A=E,T=I,V=_,w=f;for(let k=0;k<8;k+=2)b^=t5(x+A|0,7),j^=t5(b+x|0,9),A^=t5(j+b|0,13),x^=t5(A+j|0,18),O^=t5(m+g|0,7),T^=t5(O+m|0,9),g^=t5(T+O|0,13),m^=t5(g+T|0,18),V^=t5(R+K|0,7),h^=t5(V+R|0,9),K^=t5(h+V|0,13),R^=t5(K+h|0,18),v^=t5(w+F|0,7),M^=t5(v+w|0,9),F^=t5(M+v|0,13),w^=t5(F+M|0,18),g^=t5(x+v|0,7),h^=t5(g+x|0,9),v^=t5(h+g|0,13),x^=t5(v+h|0,18),K^=t5(m+b|0,7),M^=t5(K+m|0,9),b^=t5(M+K|0,13),m^=t5(b+M|0,18),F^=t5(R+O|0,7),j^=t5(F+R|0,9),O^=t5(j+F|0,13),R^=t5(O+j|0,18),A^=t5(w+V|0,7),T^=t5(A+w|0,9),V^=t5(T+A|0,13),w^=t5(V+T|0,18);Y[z++]=J+x|0,Y[z++]=q+g|0,Y[z++]=W+h|0,Y[z++]=G+v|0,Y[z++]=U+b|0,Y[z++]=D+m|0,Y[z++]=P+K|0,Y[z++]=H+M|0,Y[z++]=N+j|0,Y[z++]=C+O|0,Y[z++]=L+R|0,Y[z++]=B+F|0,Y[z++]=E+A|0,Y[z++]=I+T|0,Y[z++]=_+V|0,Y[z++]=f+w|0}function dW($,Q,Z,X,Y){let z=X+0,J=X+16*Y;for(let q=0;q<16;q++)Z[J+q]=$[Q+(2*Y-1)*16+q];for(let q=0;q<Y;q++,z+=16,Q+=16){if(Fm(Z,J,$,Q,Z,z),q>0)J+=16;Fm(Z,z,$,Q+=16,Z,J)}}function Am($,Q,Z){let X=dP({dkLen:32,asyncTick:10,maxmem:1073742848},Z),{N:Y,r:z,p:J,dkLen:q,asyncTick:W,maxmem:G,onProgress:U}=X;if(c9(Y),c9(z),c9(J),c9(q),c9(W),c9(G),U!==void 0&&typeof U!=="function")throw Error("progressCb should be function");let D=128*z,P=D/4;if(Y<=1||(Y&Y-1)!==0||Y>=2**(D/8)||Y>4294967296)throw Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(J<0||J>137438953440/D)throw Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(q<0||q>137438953440)throw Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");let H=D*(Y+J);if(H>G)throw Error(`Scrypt: parameters too large, ${H} (128 * r * (N + p)) > ${G} (maxmem)`);let N=OV(RQ,$,Q,{c:1,dkLen:D*J}),C=uW(N),L=uW(new Uint8Array(D*Y)),B=uW(new Uint8Array(D)),E=()=>{};if(U){let I=2*Y*J,_=Math.max(Math.floor(I/1e4),1),f=0;E=()=>{if(f++,U&&(!(f%_)||f===I))U(f/I)}}return{N:Y,r:z,p:J,dkLen:q,blockSize32:P,V:L,B32:C,B:N,tmp:B,blockMixCb:E,asyncTick:W}}function wm($,Q,Z,X,Y){let z=OV(RQ,$,Z,{c:1,dkLen:Q});return Z.fill(0),X.fill(0),Y.fill(0),z}function Bm($,Q,Z){let{N:X,r:Y,p:z,dkLen:J,blockSize32:q,V:W,B32:G,B:U,tmp:D,blockMixCb:P}=Am($,Q,Z);for(let H=0;H<z;H++){let N=q*H;for(let C=0;C<q;C++)W[C]=G[N+C];for(let C=0,L=0;C<X-1;C++)dW(W,L,W,L+=q,Y),P();dW(W,(X-1)*q,G,N,Y),P();for(let C=0;C<X;C++){let L=G[N+q-16]%X;for(let B=0;B<q;B++)D[B]=G[N+B]^W[L*q+B];dW(D,0,G,N,Y),P()}}return wm($,J,U,W,D)}async function Em($,Q,Z){let{N:X,r:Y,p:z,dkLen:J,blockSize32:q,V:W,B32:G,B:U,tmp:D,blockMixCb:P,asyncTick:H}=Am($,Q,Z);for(let N=0;N<z;N++){let C=q*N;for(let B=0;B<q;B++)W[B]=G[C+B];let L=0;await cP(X-1,H,()=>{dW(W,L,W,L+=q,Y),P()}),dW(W,(X-1)*q,G,C,Y),P(),await cP(X,H,()=>{let B=G[C+q-16]%X;for(let E=0;E<q;E++)D[E]=G[C+E]^W[B*q+E];dW(D,0,G,C,Y),P()})}return wm($,J,U,W,D)}var t5=($,Q)=>$<<Q|$>>>32-Q;var Im=p(()=>{pW();oP();XA();q$()});async function O7($,Q,Z,X,Y,z,J){let q=x0($,"passwd"),W=x0(Q,"salt");return F0(await xm(q,W,Z,X,Y,z,J))}function D7($,Q,Z,X,Y,z){let J=x0($,"passwd"),q=x0(Q,"salt");return F0(bm(J,q,Z,X,Y,z))}var _m=!1,Sm=!1,fm=async function($,Q,Z,X,Y,z,J){return await Em($,Q,{N:Z,r:X,p:Y,dkLen:z,onProgress:J})},km=function($,Q,Z,X,Y,z){return Bm($,Q,{N:Z,r:X,p:Y,dkLen:z})},xm,bm;var vm=p(()=>{Im();J1();xm=fm,bm=km;O7._=fm;O7.lock=function(){Sm=!0};O7.register=function($){if(Sm)throw Error("scrypt is locked");xm=$};Object.freeze(O7);D7._=km;D7.lock=function(){_m=!0};D7.register=function($){if(_m)throw Error("scryptSync is locked");bm=$};Object.freeze(D7)});function V8($){let Q=x0($,"data");return F0(hm(Q))}function _X($){let Q=x0($,"data");return F0(mm(Q))}var ym=function($){return UA("sha256").update($).digest()},gm=function($){return UA("sha512").update($).digest()},hm,mm,pm=!1,um=!1;var cm=p(()=>{DV();J1();hm=ym,mm=gm;V8._=ym;V8.lock=function(){pm=!0};V8.register=function($){if(pm)throw Error("sha256 is locked");hm=$};Object.freeze(V8);_X._=gm;_X.lock=function(){um=!0};_X.register=function($){if(um)throw Error("sha512 is locked");mm=$};Object.freeze(V8)});var jA={};x1(jA,{validateObject:()=>fX,utf8ToBytes:()=>kJ0,numberToVarBytesBE:()=>SJ0,numberToHexUnpadded:()=>im,numberToBytesLE:()=>QH,numberToBytesBE:()=>SX,hexToNumber:()=>PA,hexToBytes:()=>nJ,equalBytes:()=>fJ0,ensureBytes:()=>N4,createHmacDrbg:()=>HA,concatBytes:()=>lW,bytesToNumberLE:()=>$H,bytesToNumberBE:()=>NQ,bytesToHex:()=>oJ,bitSet:()=>vJ0,bitMask:()=>PV,bitLen:()=>xJ0,bitGet:()=>bJ0});function oJ($){if(!eP($))throw Error("Uint8Array expected");let Q="";for(let Z=0;Z<$.length;Z++)Q+=_J0[$[Z]];return Q}function im($){let Q=$.toString(16);return Q.length&1?`0${Q}`:Q}function PA($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);return BigInt($===""?"0":`0x${$}`)}function nJ($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);let Q=$.length;if(Q%2)throw Error("padded hex string expected, got unpadded hex of length "+Q);let Z=new Uint8Array(Q/2);for(let X=0;X<Z.length;X++){let Y=X*2,z=$.slice(Y,Y+2),J=Number.parseInt(z,16);if(Number.isNaN(J)||J<0)throw Error("Invalid byte sequence");Z[X]=J}return Z}function NQ($){return PA(oJ($))}function $H($){if(!eP($))throw Error("Uint8Array expected");return PA(oJ(Uint8Array.from($).reverse()))}function SX($,Q){return nJ($.toString(16).padStart(Q*2,"0"))}function QH($,Q){return SX($,Q).reverse()}function SJ0($){return nJ(im($))}function N4($,Q,Z){let X;if(typeof Q==="string")try{X=nJ(Q)}catch(z){throw Error(`${$} must be valid hex string, got "${Q}". Cause: ${z}`)}else if(eP(Q))X=Uint8Array.from(Q);else throw Error(`${$} must be hex string or Uint8Array`);let Y=X.length;if(typeof Z==="number"&&Y!==Z)throw Error(`${$} expected ${Z} bytes, got ${Y}`);return X}function lW(...$){let Q=new Uint8Array($.reduce((X,Y)=>X+Y.length,0)),Z=0;return $.forEach((X)=>{if(!eP(X))throw Error("Uint8Array expected");Q.set(X,Z),Z+=X.length}),Q}function fJ0($,Q){if($.length!==Q.length)return!1;for(let Z=0;Z<$.length;Z++)if($[Z]!==Q[Z])return!1;return!0}function kJ0($){if(typeof $!=="string")throw Error(`utf8ToBytes expected string, got ${typeof $}`);return new Uint8Array(new TextEncoder().encode($))}function xJ0($){let Q;for(Q=0;$>lm;$>>=tP,Q+=1);return Q}function bJ0($,Q){return $>>BigInt(Q)&tP}function HA($,Q,Z){if(typeof $!=="number"||$<2)throw Error("hashLen must be a number");if(typeof Q!=="number"||Q<2)throw Error("qByteLen must be a number");if(typeof Z!=="function")throw Error("hmacFn must be a function");let X=MA($),Y=MA($),z=0,J=()=>{X.fill(1),Y.fill(0),z=0},q=(...D)=>Z(Y,X,...D),W=(D=MA())=>{if(Y=q(dm([0]),D),X=q(),D.length===0)return;Y=q(dm([1]),D),X=q()},G=()=>{if(z++>=1000)throw Error("drbg: tried 1000 values");let D=0,P=[];while(D<Q){X=q();let H=X.slice();P.push(H),D+=X.length}return lW(...P)};return(D,P)=>{J(),W(D);let H=void 0;while(!(H=P(G())))W();return J(),H}}function fX($,Q,Z={}){let X=(Y,z,J)=>{let q=yJ0[z];if(typeof q!=="function")throw Error(`Invalid validator "${z}", expected function`);let W=$[Y];if(J&&W===void 0)return;if(!q(W,$))throw Error(`Invalid param ${String(Y)}=${W} (${typeof W}), expected ${z}`)};for(let[Y,z]of Object.entries(Q))X(Y,z,!1);for(let[Y,z]of Object.entries(Z))X(Y,z,!0);return $}var lm,tP,IJ0,eP=($)=>$ instanceof Uint8Array,_J0,vJ0=($,Q,Z)=>{return $|(Z?tP:lm)<<BigInt(Q)},PV=($)=>(IJ0<<BigInt($-1))-tP,MA=($)=>new Uint8Array($),dm=($)=>Uint8Array.from($),yJ0;var HV=p(()=>{/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */lm=BigInt(0),tP=BigInt(1),IJ0=BigInt(2),_J0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));yJ0={bigint:($)=>typeof $==="bigint",function:($)=>typeof $==="function",boolean:($)=>typeof $==="boolean",string:($)=>typeof $==="string",stringOrUint8Array:($)=>typeof $==="string"||$ instanceof Uint8Array,isSafeInteger:($)=>Number.isSafeInteger($),array:($)=>Array.isArray($),field:($,Q)=>Q.Fp.isValid($),hash:($)=>typeof $==="function"&&Number.isSafeInteger($.outputLen)}});function l9($,Q){let Z=$%Q;return Z>=a8?Z:Q+Z}function pJ0($,Q,Z){if(Z<=a8||Q<a8)throw Error("Expected power/modulo > 0");if(Z===O8)return a8;let X=O8;while(Q>a8){if(Q&O8)X=X*$%Z;$=$*$%Z,Q>>=O8}return X}function C4($,Q,Z){let X=$;while(Q-- >a8)X*=X,X%=Z;return X}function ZH($,Q){if($===a8||Q<=a8)throw Error(`invert: expected positive integers, got n=${$} mod=${Q}`);let Z=l9($,Q),X=Q,Y=a8,z=O8,J=O8,q=a8;while(Z!==a8){let G=X/Z,U=X%Z,D=Y-J*G,P=z-q*G;X=Z,Z=U,Y=J,z=q,J=D,q=P}if(X!==O8)throw Error("invert: does not exist");return l9(Y,Q)}function uJ0($){let Q=($-O8)/rJ,Z,X,Y;for(Z=$-O8,X=0;Z%rJ===a8;Z/=rJ,X++);for(Y=rJ;Y<$&&pJ0(Y,Q,$)!==$-O8;Y++);if(X===1){let J=($+O8)/RA;return function(W,G){let U=W.pow(G,J);if(!W.eql(W.sqr(U),G))throw Error("Cannot find square root");return U}}let z=(Z+O8)/rJ;return function(q,W){if(q.pow(W,Q)===q.neg(q.ONE))throw Error("Cannot find square root");let G=X,U=q.pow(q.mul(q.ONE,Y),Z),D=q.pow(W,z),P=q.pow(W,Z);while(!q.eql(P,q.ONE)){if(q.eql(P,q.ZERO))return q.ZERO;let H=1;for(let C=q.sqr(P);H<G;H++){if(q.eql(C,q.ONE))break;C=q.sqr(C)}let N=q.pow(U,O8<<BigInt(G-H-1));U=q.sqr(N),D=q.mul(D,N),P=q.mul(P,U),G=H}return D}}function cJ0($){if($%RA===gJ0){let Q=($+O8)/RA;return function(X,Y){let z=X.pow(Y,Q);if(!X.eql(X.sqr(z),Y))throw Error("Cannot find square root");return z}}if($%nm===om){let Q=($-om)/nm;return function(X,Y){let z=X.mul(Y,rJ),J=X.pow(z,Q),q=X.mul(Y,J),W=X.mul(X.mul(q,rJ),J),G=X.mul(q,X.sub(W,X.ONE));if(!X.eql(X.sqr(G),Y))throw Error("Cannot find square root");return G}}if($%mJ0===hJ0);return uJ0($)}function NA($){let Q={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},Z=dJ0.reduce((X,Y)=>{return X[Y]="function",X},Q);return fX($,Z)}function lJ0($,Q,Z){if(Z<a8)throw Error("Expected power > 0");if(Z===a8)return $.ONE;if(Z===O8)return Q;let X=$.ONE,Y=Q;while(Z>a8){if(Z&O8)X=$.mul(X,Y);Y=$.sqr(Y),Z>>=O8}return X}function iJ0($,Q){let Z=Array(Q.length),X=Q.reduce((z,J,q)=>{if($.is0(J))return z;return Z[q]=z,$.mul(z,J)},$.ONE),Y=$.inv(X);return Q.reduceRight((z,J,q)=>{if($.is0(J))return z;return Z[q]=$.mul(z,Z[q]),$.mul(z,J)},Y),Z}function CA($,Q){let Z=Q!==void 0?Q:$.toString(2).length,X=Math.ceil(Z/8);return{nBitLength:Z,nByteLength:X}}function rm($,Q,Z=!1,X={}){if($<=a8)throw Error(`Expected Field ORDER > 0, got ${$}`);let{nBitLength:Y,nByteLength:z}=CA($,Q);if(z>2048)throw Error("Field lengths over 2048 bytes are not supported");let J=cJ0($),q=Object.freeze({ORDER:$,BITS:Y,BYTES:z,MASK:PV(Y),ZERO:a8,ONE:O8,create:(W)=>l9(W,$),isValid:(W)=>{if(typeof W!=="bigint")throw Error(`Invalid field element: expected bigint, got ${typeof W}`);return a8<=W&&W<$},is0:(W)=>W===a8,isOdd:(W)=>(W&O8)===O8,neg:(W)=>l9(-W,$),eql:(W,G)=>W===G,sqr:(W)=>l9(W*W,$),add:(W,G)=>l9(W+G,$),sub:(W,G)=>l9(W-G,$),mul:(W,G)=>l9(W*G,$),pow:(W,G)=>lJ0(q,W,G),div:(W,G)=>l9(W*ZH(G,$),$),sqrN:(W)=>W*W,addN:(W,G)=>W+G,subN:(W,G)=>W-G,mulN:(W,G)=>W*G,inv:(W)=>ZH(W,$),sqrt:X.sqrt||((W)=>J(q,W)),invertBatch:(W)=>iJ0(q,W),cmov:(W,G,U)=>U?G:W,toBytes:(W)=>Z?QH(W,z):SX(W,z),fromBytes:(W)=>{if(W.length!==z)throw Error(`Fp.fromBytes: expected ${z}, got ${W.length}`);return Z?$H(W):NQ(W)}});return Object.freeze(q)}function am($){if(typeof $!=="bigint")throw Error("field order must be bigint");let Q=$.toString(2).length;return Math.ceil(Q/8)}function LA($){let Q=am($);return Q+Math.ceil(Q/2)}function sm($,Q,Z=!1){let X=$.length,Y=am(Q),z=LA(Q);if(X<16||X<z||X>1024)throw Error(`expected ${z}-1024 bytes of input, got ${X}`);let J=Z?NQ($):$H($),q=l9(J,Q-O8)+O8;return Z?QH(q,Y):SX(q,Y)}var a8,O8,rJ,gJ0,RA,om,nm,hJ0,mJ0,dJ0;var XH=p(()=>{HV();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */a8=BigInt(0),O8=BigInt(1),rJ=BigInt(2),gJ0=BigInt(3),RA=BigInt(4),om=BigInt(5),nm=BigInt(8),hJ0=BigInt(9),mJ0=BigInt(16);dJ0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function tm($,Q){let Z=(Y,z)=>{let J=z.negate();return Y?J:z},X=(Y)=>{let z=Math.ceil(Q/Y)+1,J=2**(Y-1);return{windows:z,windowSize:J}};return{constTimeNegate:Z,unsafeLadder(Y,z){let J=$.ZERO,q=Y;while(z>nJ0){if(z&TA)J=J.add(q);q=q.double(),z>>=TA}return J},precomputeWindow(Y,z){let{windows:J,windowSize:q}=X(z),W=[],G=Y,U=G;for(let D=0;D<J;D++){U=G,W.push(U);for(let P=1;P<q;P++)U=U.add(G),W.push(U);G=U.double()}return W},wNAF(Y,z,J){let{windows:q,windowSize:W}=X(Y),G=$.ZERO,U=$.BASE,D=BigInt(2**Y-1),P=2**Y,H=BigInt(Y);for(let N=0;N<q;N++){let C=N*W,L=Number(J&D);if(J>>=H,L>W)L-=P,J+=TA;let B=C,E=C+Math.abs(L)-1,I=N%2!==0,_=L<0;if(L===0)U=U.add(Z(I,z[B]));else G=G.add(Z(_,z[E]))}return{p:G,f:U}},wNAFCached(Y,z,J,q){let W=Y._WINDOW_SIZE||1,G=z.get(Y);if(!G){if(G=this.precomputeWindow(Y,W),W!==1)z.set(Y,q(G))}return this.wNAF(W,G,J)}}}function FA($){return NA($.Fp),fX($,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...CA($.n,$.nBitLength),...$,...{p:$.Fp.ORDER}})}var nJ0,TA;var em=p(()=>{XH();HV();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */nJ0=BigInt(0),TA=BigInt(1)});function rJ0($){let Q=FA($);fX(Q,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:Z,Fp:X,a:Y}=Q;if(Z){if(!X.eql(Y,X.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof Z!=="object"||typeof Z.beta!=="bigint"||typeof Z.splitScalar!=="function")throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...Q})}function tJ0($){let Q=rJ0($),{Fp:Z}=Q,X=Q.toBytes||((N,C,L)=>{let B=C.toAffine();return lW(Uint8Array.from([4]),Z.toBytes(B.x),Z.toBytes(B.y))}),Y=Q.fromBytes||((N)=>{let C=N.subarray(1),L=Z.fromBytes(C.subarray(0,Z.BYTES)),B=Z.fromBytes(C.subarray(Z.BYTES,2*Z.BYTES));return{x:L,y:B}});function z(N){let{a:C,b:L}=Q,B=Z.sqr(N),E=Z.mul(B,N);return Z.add(Z.add(E,Z.mul(N,C)),L)}if(!Z.eql(Z.sqr(Q.Gy),z(Q.Gx)))throw Error("bad generator point: equation left != right");function J(N){return typeof N==="bigint"&&CQ<N&&N<Q.n}function q(N){if(!J(N))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function W(N){let{allowedPrivateKeyLengths:C,nByteLength:L,wrapPrivateKey:B,n:E}=Q;if(C&&typeof N!=="bigint"){if(N instanceof Uint8Array)N=oJ(N);if(typeof N!=="string"||!C.includes(N.length))throw Error("Invalid key");N=N.padStart(L*2,"0")}let I;try{I=typeof N==="bigint"?N:NQ(N4("private key",N,L))}catch(_){throw Error(`private key must be ${L} bytes, hex or bigint, not ${typeof N}`)}if(B)I=l9(I,E);return q(I),I}let G=new Map;function U(N){if(!(N instanceof D))throw Error("ProjectivePoint expected")}class D{constructor(N,C,L){if(this.px=N,this.py=C,this.pz=L,N==null||!Z.isValid(N))throw Error("x required");if(C==null||!Z.isValid(C))throw Error("y required");if(L==null||!Z.isValid(L))throw Error("z required")}static fromAffine(N){let{x:C,y:L}=N||{};if(!N||!Z.isValid(C)||!Z.isValid(L))throw Error("invalid affine point");if(N instanceof D)throw Error("projective point not allowed");let B=(E)=>Z.eql(E,Z.ZERO);if(B(C)&&B(L))return D.ZERO;return new D(C,L,Z.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(N){let C=Z.invertBatch(N.map((L)=>L.pz));return N.map((L,B)=>L.toAffine(C[B])).map(D.fromAffine)}static fromHex(N){let C=D.fromAffine(Y(N4("pointHex",N)));return C.assertValidity(),C}static fromPrivateKey(N){return D.BASE.multiply(W(N))}_setWindowSize(N){this._WINDOW_SIZE=N,G.delete(this)}assertValidity(){if(this.is0()){if(Q.allowInfinityPoint&&!Z.is0(this.py))return;throw Error("bad point: ZERO")}let{x:N,y:C}=this.toAffine();if(!Z.isValid(N)||!Z.isValid(C))throw Error("bad point: x or y not FE");let L=Z.sqr(C),B=z(N);if(!Z.eql(L,B))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:N}=this.toAffine();if(Z.isOdd)return!Z.isOdd(N);throw Error("Field doesn't support isOdd")}equals(N){U(N);let{px:C,py:L,pz:B}=this,{px:E,py:I,pz:_}=N,f=Z.eql(Z.mul(C,_),Z.mul(E,B)),x=Z.eql(Z.mul(L,_),Z.mul(I,B));return f&&x}negate(){return new D(this.px,Z.neg(this.py),this.pz)}double(){let{a:N,b:C}=Q,L=Z.mul(C,$p),{px:B,py:E,pz:I}=this,_=Z.ZERO,f=Z.ZERO,x=Z.ZERO,g=Z.mul(B,B),h=Z.mul(E,E),v=Z.mul(I,I),b=Z.mul(B,E);return b=Z.add(b,b),x=Z.mul(B,I),x=Z.add(x,x),_=Z.mul(N,x),f=Z.mul(L,v),f=Z.add(_,f),_=Z.sub(h,f),f=Z.add(h,f),f=Z.mul(_,f),_=Z.mul(b,_),x=Z.mul(L,x),v=Z.mul(N,v),b=Z.sub(g,v),b=Z.mul(N,b),b=Z.add(b,x),x=Z.add(g,g),g=Z.add(x,g),g=Z.add(g,v),g=Z.mul(g,b),f=Z.add(f,g),v=Z.mul(E,I),v=Z.add(v,v),g=Z.mul(v,b),_=Z.sub(_,g),x=Z.mul(v,h),x=Z.add(x,x),x=Z.add(x,x),new D(_,f,x)}add(N){U(N);let{px:C,py:L,pz:B}=this,{px:E,py:I,pz:_}=N,f=Z.ZERO,x=Z.ZERO,g=Z.ZERO,h=Q.a,v=Z.mul(Q.b,$p),b=Z.mul(C,E),m=Z.mul(L,I),K=Z.mul(B,_),M=Z.add(C,L),j=Z.add(E,I);M=Z.mul(M,j),j=Z.add(b,m),M=Z.sub(M,j),j=Z.add(C,B);let O=Z.add(E,_);return j=Z.mul(j,O),O=Z.add(b,K),j=Z.sub(j,O),O=Z.add(L,B),f=Z.add(I,_),O=Z.mul(O,f),f=Z.add(m,K),O=Z.sub(O,f),g=Z.mul(h,j),f=Z.mul(v,K),g=Z.add(f,g),f=Z.sub(m,g),g=Z.add(m,g),x=Z.mul(f,g),m=Z.add(b,b),m=Z.add(m,b),K=Z.mul(h,K),j=Z.mul(v,j),m=Z.add(m,K),K=Z.sub(b,K),K=Z.mul(h,K),j=Z.add(j,K),b=Z.mul(m,j),x=Z.add(x,b),b=Z.mul(O,j),f=Z.mul(M,f),f=Z.sub(f,b),b=Z.mul(M,m),g=Z.mul(O,g),g=Z.add(g,b),new D(f,x,g)}subtract(N){return this.add(N.negate())}is0(){return this.equals(D.ZERO)}wNAF(N){return H.wNAFCached(this,G,N,(C)=>{let L=Z.invertBatch(C.map((B)=>B.pz));return C.map((B,E)=>B.toAffine(L[E])).map(D.fromAffine)})}multiplyUnsafe(N){let C=D.ZERO;if(N===CQ)return C;if(q(N),N===M7)return this;let{endo:L}=Q;if(!L)return H.unsafeLadder(this,N);let{k1neg:B,k1:E,k2neg:I,k2:_}=L.splitScalar(N),f=C,x=C,g=this;while(E>CQ||_>CQ){if(E&M7)f=f.add(g);if(_&M7)x=x.add(g);g=g.double(),E>>=M7,_>>=M7}if(B)f=f.negate();if(I)x=x.negate();return x=new D(Z.mul(x.px,L.beta),x.py,x.pz),f.add(x)}multiply(N){q(N);let C=N,L,B,{endo:E}=Q;if(E){let{k1neg:I,k1:_,k2neg:f,k2:x}=E.splitScalar(C),{p:g,f:h}=this.wNAF(_),{p:v,f:b}=this.wNAF(x);g=H.constTimeNegate(I,g),v=H.constTimeNegate(f,v),v=new D(Z.mul(v.px,E.beta),v.py,v.pz),L=g.add(v),B=h.add(b)}else{let{p:I,f:_}=this.wNAF(C);L=I,B=_}return D.normalizeZ([L,B])[0]}multiplyAndAddUnsafe(N,C,L){let B=D.BASE,E=(_,f)=>f===CQ||f===M7||!_.equals(B)?_.multiplyUnsafe(f):_.multiply(f),I=E(this,C).add(E(N,L));return I.is0()?void 0:I}toAffine(N){let{px:C,py:L,pz:B}=this,E=this.is0();if(N==null)N=E?Z.ONE:Z.inv(B);let I=Z.mul(C,N),_=Z.mul(L,N),f=Z.mul(B,N);if(E)return{x:Z.ZERO,y:Z.ZERO};if(!Z.eql(f,Z.ONE))throw Error("invZ was invalid");return{x:I,y:_}}isTorsionFree(){let{h:N,isTorsionFree:C}=Q;if(N===M7)return!0;if(C)return C(D,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:N,clearCofactor:C}=Q;if(N===M7)return this;if(C)return C(D,this);return this.multiplyUnsafe(Q.h)}toRawBytes(N=!0){return this.assertValidity(),X(D,this,N)}toHex(N=!0){return oJ(this.toRawBytes(N))}}D.BASE=new D(Q.Gx,Q.Gy,Z.ONE),D.ZERO=new D(Z.ZERO,Z.ONE,Z.ZERO);let P=Q.nBitLength,H=tm(D,Q.endo?Math.ceil(P/2):P);return{CURVE:Q,ProjectivePoint:D,normPrivateKeyToScalar:W,weierstrassEquation:z,isWithinCurveOrder:J}}function eJ0($){let Q=FA($);return fX(Q,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...Q})}function Qp($){let Q=eJ0($),{Fp:Z,n:X}=Q,Y=Z.BYTES+1,z=2*Z.BYTES+1;function J(O){return CQ<O&&O<Z.ORDER}function q(O){return l9(O,X)}function W(O){return ZH(O,X)}let{ProjectivePoint:G,normPrivateKeyToScalar:U,weierstrassEquation:D,isWithinCurveOrder:P}=tJ0({...Q,toBytes(O,R,F){let A=R.toAffine(),T=Z.toBytes(A.x),V=lW;if(F)return V(Uint8Array.from([R.hasEvenY()?2:3]),T);else return V(Uint8Array.from([4]),T,Z.toBytes(A.y))},fromBytes(O){let R=O.length,F=O[0],A=O.subarray(1);if(R===Y&&(F===2||F===3)){let T=NQ(A);if(!J(T))throw Error("Point is not on curve");let V=D(T),w=Z.sqrt(V),k=(w&M7)===M7;if((F&1)===1!==k)w=Z.neg(w);return{x:T,y:w}}else if(R===z&&F===4){let T=Z.fromBytes(A.subarray(0,Z.BYTES)),V=Z.fromBytes(A.subarray(Z.BYTES,2*Z.BYTES));return{x:T,y:V}}else throw Error(`Point of length ${R} was invalid. Expected ${Y} compressed bytes or ${z} uncompressed bytes`)}}),H=(O)=>oJ(SX(O,Q.nByteLength));function N(O){let R=X>>M7;return O>R}function C(O){return N(O)?q(-O):O}let L=(O,R,F)=>NQ(O.slice(R,F));class B{constructor(O,R,F){this.r=O,this.s=R,this.recovery=F,this.assertValidity()}static fromCompact(O){let R=Q.nByteLength;return O=N4("compactSignature",O,R*2),new B(L(O,0,R),L(O,R,2*R))}static fromDER(O){let{r:R,s:F}=aJ.toSig(N4("DER",O));return new B(R,F)}assertValidity(){if(!P(this.r))throw Error("r must be 0 < r < CURVE.n");if(!P(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(O){return new B(this.r,this.s,O)}recoverPublicKey(O){let{r:R,s:F,recovery:A}=this,T=g(N4("msgHash",O));if(A==null||![0,1,2,3].includes(A))throw Error("recovery id invalid");let V=A===2||A===3?R+Q.n:R;if(V>=Z.ORDER)throw Error("recovery id 2 or 3 invalid");let w=(A&1)===0?"02":"03",k=G.fromHex(w+H(V)),S=W(V),y=q(-T*S),u=q(F*S),c=G.BASE.multiplyAndAddUnsafe(k,y,u);if(!c)throw Error("point at infinify");return c.assertValidity(),c}hasHighS(){return N(this.s)}normalizeS(){return this.hasHighS()?new B(this.r,q(-this.s),this.recovery):this}toDERRawBytes(){return nJ(this.toDERHex())}toDERHex(){return aJ.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return nJ(this.toCompactHex())}toCompactHex(){return H(this.r)+H(this.s)}}let E={isValidPrivateKey(O){try{return U(O),!0}catch(R){return!1}},normPrivateKeyToScalar:U,randomPrivateKey:()=>{let O=LA(Q.n);return sm(Q.randomBytes(O),Q.n)},precompute(O=8,R=G.BASE){return R._setWindowSize(O),R.multiply(BigInt(3)),R}};function I(O,R=!0){return G.fromPrivateKey(O).toRawBytes(R)}function _(O){let R=O instanceof Uint8Array,F=typeof O==="string",A=(R||F)&&O.length;if(R)return A===Y||A===z;if(F)return A===2*Y||A===2*z;if(O instanceof G)return!0;return!1}function f(O,R,F=!0){if(_(O))throw Error("first arg must be private key");if(!_(R))throw Error("second arg must be public key");return G.fromHex(R).multiply(U(O)).toRawBytes(F)}let x=Q.bits2int||function(O){let R=NQ(O),F=O.length*8-Q.nBitLength;return F>0?R>>BigInt(F):R},g=Q.bits2int_modN||function(O){return q(x(O))},h=PV(Q.nBitLength);function v(O){if(typeof O!=="bigint")throw Error("bigint expected");if(!(CQ<=O&&O<h))throw Error(`bigint expected < 2^${Q.nBitLength}`);return SX(O,Q.nByteLength)}function b(O,R,F=m){if(["recovered","canonical"].some((e)=>(e in F)))throw Error("sign() legacy options not supported");let{hash:A,randomBytes:T}=Q,{lowS:V,prehash:w,extraEntropy:k}=F;if(V==null)V=!0;if(O=N4("msgHash",O),w)O=N4("prehashed msgHash",A(O));let S=g(O),y=U(R),u=[v(y),v(S)];if(k!=null){let e=k===!0?T(Z.BYTES):k;u.push(N4("extraEntropy",e))}let c=lW(...u),o=S;function z0(e){let s=x(e);if(!P(s))return;let J0=W(s),t=G.BASE.multiply(s).toAffine(),Z0=q(t.x);if(Z0===CQ)return;let N0=q(J0*q(o+Z0*y));if(N0===CQ)return;let i=(t.x===Z0?0:2)|Number(t.y&M7),l=N0;if(V&&N(N0))l=C(N0),i^=1;return new B(Z0,l,i)}return{seed:c,k2sig:z0}}let m={lowS:Q.lowS,prehash:!1},K={lowS:Q.lowS,prehash:!1};function M(O,R,F=m){let{seed:A,k2sig:T}=b(O,R,F),V=Q;return HA(V.hash.outputLen,V.nByteLength,V.hmac)(A,T)}G.BASE._setWindowSize(8);function j(O,R,F,A=K){let T=O;if(R=N4("msgHash",R),F=N4("publicKey",F),"strict"in A)throw Error("options.strict was renamed to lowS");let{lowS:V,prehash:w}=A,k=void 0,S;try{if(typeof T==="string"||T instanceof Uint8Array)try{k=B.fromDER(T)}catch(t){if(!(t instanceof aJ.Err))throw t;k=B.fromCompact(T)}else if(typeof T==="object"&&typeof T.r==="bigint"&&typeof T.s==="bigint"){let{r:t,s:Z0}=T;k=new B(t,Z0)}else throw Error("PARSE");S=G.fromHex(F)}catch(t){if(t.message==="PARSE")throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(V&&k.hasHighS())return!1;if(w)R=Q.hash(R);let{r:y,s:u}=k,c=g(R),o=W(u),z0=q(c*o),e=q(y*o),s=G.BASE.multiplyAndAddUnsafe(S,z0,e)?.toAffine();if(!s)return!1;return q(s.x)===y}return{CURVE:Q,getPublicKey:I,getSharedSecret:f,sign:M,verify:j,ProjectivePoint:G,Signature:B,utils:E}}var aJ0,sJ0,aJ,CQ,M7,BI0,$p,EI0;var Zp=p(()=>{XH();HV();HV();em();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */({bytesToNumberBE:aJ0,hexToBytes:sJ0}=jA),aJ={Err:class extends Error{constructor(Q=""){super(Q)}},_parseInt($){let{Err:Q}=aJ;if($.length<2||$[0]!==2)throw new Q("Invalid signature integer tag");let Z=$[1],X=$.subarray(2,Z+2);if(!Z||X.length!==Z)throw new Q("Invalid signature integer: wrong length");if(X[0]&128)throw new Q("Invalid signature integer: negative");if(X[0]===0&&!(X[1]&128))throw new Q("Invalid signature integer: unnecessary leading zero");return{d:aJ0(X),l:$.subarray(Z+2)}},toSig($){let{Err:Q}=aJ,Z=typeof $==="string"?sJ0($):$;if(!(Z instanceof Uint8Array))throw Error("ui8a expected");let X=Z.length;if(X<2||Z[0]!=48)throw new Q("Invalid signature tag");if(Z[1]!==X-2)throw new Q("Invalid signature: incorrect length");let{d:Y,l:z}=aJ._parseInt(Z.subarray(2)),{d:J,l:q}=aJ._parseInt(z);if(q.length)throw new Q("Invalid signature: left bytes after parsing");return{r:Y,s:J}},hexFromSig($){let Q=(G)=>Number.parseInt(G[0],16)&8?"00"+G:G,Z=(G)=>{let U=G.toString(16);return U.length&1?`0${U}`:U},X=Q(Z($.s)),Y=Q(Z($.r)),z=X.length/2,J=Y.length/2,q=Z(z),W=Z(J);return`30${Z(J+z+4)}02${W}${Y}02${q}${X}`}},CQ=BigInt(0),M7=BigInt(1),BI0=BigInt(2),$p=BigInt(3),EI0=BigInt(4)});function $z0($){return{hash:$,hmac:(Q,...Z)=>lJ($,Q,xh(...Z)),randomBytes:bh}}function Xp($,Q){let Z=(X)=>Qp({...$,...$z0(X)});return Object.freeze({...Z(Q),create:Z})}var Yp=p(()=>{lP();q$();Zp();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */});function Zz0($){let Q=qp,Z=BigInt(3),X=BigInt(6),Y=BigInt(11),z=BigInt(22),J=BigInt(23),q=BigInt(44),W=BigInt(88),G=$*$*$%Q,U=G*G*$%Q,D=C4(U,Z,Q)*U%Q,P=C4(D,Z,Q)*U%Q,H=C4(P,AA,Q)*G%Q,N=C4(H,Y,Q)*H%Q,C=C4(N,z,Q)*N%Q,L=C4(C,q,Q)*C%Q,B=C4(L,W,Q)*L%Q,E=C4(B,q,Q)*C%Q,I=C4(E,Z,Q)*U%Q,_=C4(I,J,Q)*N%Q,f=C4(_,X,Q)*G%Q,x=C4(f,AA,Q);if(!wA.eql(wA.sqr(x),$))throw Error("Cannot find square root");return x}var qp,Jp,Qz0,AA,zp=($,Q)=>($+Q/AA)/Q,wA,LQ,yI0,gI0;var Wp=p(()=>{oP();XH();Yp();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */qp=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Jp=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Qz0=BigInt(1),AA=BigInt(2);wA=rm(qp,void 0,void 0,{sqrt:Zz0}),LQ=Xp({a:BigInt(0),b:BigInt(7),Fp:wA,n:Jp,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:($)=>{let Q=Jp,Z=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),X=-Qz0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),Y=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),z=Z,J=BigInt("0x100000000000000000000000000000000"),q=zp(z*$,Q),W=zp(-X*$,Q),G=l9($-q*Z-W*Y,Q),U=l9(-q*X-W*z,Q),D=G>J,P=U>J;if(D)G=Q-G;if(P)U=Q-U;if(G>J||U>J)throw Error("splitScalar: Endomorphism failed, k="+$);return{k1neg:D,k1:G,k2neg:P,k2:U}}}},RQ),yI0=BigInt(0),gI0=LQ.ProjectivePoint});var P7="0x0000000000000000000000000000000000000000";var sJ="0x0000000000000000000000000000000000000000000000000000000000000000";var YH,JH,zH,qH,WH;var Kp=p(()=>{YH=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),JH=BigInt("1000000000000000000"),zH=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),qH=BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1),WH=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff")});var KH="",iW=`\x19Ethereum Signed Message:
`;var oW=p(()=>{Kp()});function BA($){return U8(k5($),32)}var Gp,Up,EA,Vp,Op,GH,Dp,Xz0,Yz0,tJ,q6;var IA=p(()=>{oW();J1();Gp=BigInt(0),Up=BigInt(1),EA=BigInt(2),Vp=BigInt(27),Op=BigInt(28),GH=BigInt(35),Dp=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Xz0=Dp/EA,Yz0=Symbol.for("nodejs.util.inspect.custom"),tJ={};q6=class q6{#$;#Q;#Z;#X;get r(){return this.#$}set r($){r(O2($)===32,"invalid r","value",$),this.#$=F0($)}get s(){return r(parseInt(this.#Q.substring(0,3))<8,"non-canonical s; use ._s","s",this.#Q),this.#Q}set s($){r(O2($)===32,"invalid s","value",$),this.#Q=F0($)}get _s(){return this.#Q}isValid(){return BigInt(this.#Q)<=Xz0}get v(){return this.#Z}set v($){let Q=G1($,"value");r(Q===27||Q===28,"invalid v","v",$),this.#Z=Q}get networkV(){return this.#X}get legacyChainId(){let $=this.networkV;if($==null)return null;return q6.getChainId($)}get yParity(){return this.v===27?0:1}get yParityAndS(){let $=x0(this.s);if(this.yParity)$[0]|=128;return F0($)}get compactSerialized(){return S1([this.r,this.yParityAndS])}get serialized(){return S1([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor($,Q,Z,X){W9($,tJ,"Signature"),this.#$=Q,this.#Q=Z,this.#Z=X,this.#X=null}getCanonical(){if(this.isValid())return this;let $=Dp-BigInt(this._s),Q=55-this.v,Z=new q6(tJ,this.r,BA($),Q);if(this.networkV)Z.#X=this.networkV;return Z}clone(){let $=new q6(tJ,this.r,this._s,this.v);if(this.networkV)$.#X=this.networkV;return $}toJSON(){let $=this.networkV;return{_type:"signature",networkV:$!=null?$.toString():null,r:this.r,s:this._s,v:this.v}}[Yz0](){return this.toString()}toString(){if(this.isValid())return`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`;return`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId($){let Q=e0($,"v");if(Q==Vp||Q==Op)return Gp;return r(Q>=GH,"invalid EIP-155 v","v",$),(Q-GH)/EA}static getChainIdV($,Q){return e0($)*EA+BigInt(35+Q-27)}static getNormalizedV($){let Q=e0($);if(Q===Gp||Q===Vp)return 27;if(Q===Up||Q===Op)return 28;return r(Q>=GH,"invalid v","v",$),Q&Up?27:28}static from($){function Q(W,G){r(W,G,"signature",$)}if($==null)return new q6(tJ,sJ,sJ,27);if(typeof $==="string"){let W=x0($,"signature");if(W.length===64){let G=F0(W.slice(0,32)),U=W.slice(32,64),D=U[0]&128?28:27;return U[0]&=127,new q6(tJ,G,F0(U),D)}if(W.length===65){let G=F0(W.slice(0,32)),U=F0(W.slice(32,64)),D=q6.getNormalizedV(W[64]);return new q6(tJ,G,U,D)}Q(!1,"invalid raw signature length")}if($ instanceof q6)return $.clone();let Z=$.r;Q(Z!=null,"missing r");let X=BA(Z),Y=function(W,G){if(W!=null)return BA(W);if(G!=null){Q(J5(G,32),"invalid yParityAndS");let U=x0(G);return U[0]&=127,F0(U)}Q(!1,"missing s")}($.s,$.yParityAndS),{networkV:z,v:J}=function(W,G,U){if(W!=null){let D=e0(W);return{networkV:D>=GH?D:void 0,v:q6.getNormalizedV(D)}}if(G!=null)return Q(J5(G,32),"invalid yParityAndS"),{v:x0(G)[0]&128?28:27};if(U!=null){switch(G1(U,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}Q(!1,"invalid yParity")}Q(!1,"missing v")}($.v,$.yParityAndS,$.yParity),q=new q6(tJ,X,Y,J);if(z)q.#X=z;return Q($.yParity==null||G1($.yParity,"sig.yParity")===q.yParity,"yParity mismatch"),Q($.yParityAndS==null||$.yParityAndS===q.yParityAndS,"yParityAndS mismatch"),q}}});class D8{#$;constructor($){r(O2($)===32,"invalid private key","privateKey","[REDACTED]"),this.#$=F0($)}get privateKey(){return this.#$}get publicKey(){return D8.computePublicKey(this.#$)}get compressedPublicKey(){return D8.computePublicKey(this.#$,!0)}sign($){r(O2($)===32,"invalid digest length","digest",$);let Q=LQ.sign(f6($),f6(this.#$),{lowS:!0});return q6.from({r:n8(Q.r,32),s:n8(Q.s,32),v:Q.recovery?28:27})}computeSharedSecret($){let Q=D8.computePublicKey($);return F0(LQ.getSharedSecret(f6(this.#$),x0(Q),!1))}static computePublicKey($,Q){let Z=x0($,"key");if(Z.length===32){let Y=LQ.getPublicKey(Z,!!Q);return F0(Y)}if(Z.length===64){let Y=new Uint8Array(65);Y[0]=4,Y.set(Z,1),Z=Y}let X=LQ.ProjectivePoint.fromHex(Z);return F0(X.toRawBytes(Q))}static recoverPublicKey($,Q){r(O2($)===32,"invalid digest length","digest",$);let Z=q6.from(Q),X=LQ.Signature.fromCompact(f6(S1([Z.r,Z.s])));X=X.addRecoveryBit(Z.yParity);let Y=X.recoverPublicKey(f6($));return r(Y!=null,"invalid signature for digest","signature",Q),"0x"+Y.toHex(!1)}static addPoints($,Q,Z){let X=LQ.ProjectivePoint.fromHex(D8.computePublicKey($).substring(2)),Y=LQ.ProjectivePoint.fromHex(D8.computePublicKey(Q).substring(2));return"0x"+X.add(Y).toHex(!!Z)}}var Mp=p(()=>{Wp();J1();IA()});function _A(){U7.lock(),p1.lock(),d9.lock(),A9.lock(),V7.lock(),O7.lock(),D7.lock(),V8.lock(),_X.lock(),A9.lock()}var g8=p(()=>{nh();Jm();Mm();Rm();Tm();vm();cm();Mp();IA()});function Pp($){$=$.toLowerCase();let Q=$.substring(2).split(""),Z=new Uint8Array(40);for(let Y=0;Y<40;Y++)Z[Y]=Q[Y].charCodeAt(0);let X=x0(p1(Z));for(let Y=0;Y<40;Y+=2){if(X[Y>>1]>>4>=8)Q[Y]=Q[Y].toUpperCase();if((X[Y>>1]&15)>=8)Q[Y+1]=Q[Y+1].toUpperCase()}return"0x"+Q.join("")}function jp($){$=$.toUpperCase(),$=$.substring(4)+$.substring(0,2)+"00";let Q=$.split("").map((X)=>{return SA[X]}).join("");while(Q.length>=Hp){let X=Q.substring(0,Hp);Q=parseInt(X,10)%97+Q.substring(X.length)}let Z=String(98-parseInt(Q,10)%97);while(Z.length<2)Z="0"+Z;return Z}function Wz0($){$=$.toLowerCase();let Q=Jz0;for(let Z=0;Z<$.length;Z++)Q=Q*zz0+qz0[$[Z]];return Q}function R1($){if(r(typeof $==="string","invalid address","address",$),$.match(/^(0x)?[0-9a-fA-F]{40}$/)){if(!$.startsWith("0x"))$="0x"+$;let Q=Pp($);return r(!$.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||Q===$,"bad address checksum","address",$),Q}if($.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){r($.substring(2,4)===jp($),"bad icap checksum","address",$);let Q=Wz0($.substring(4)).toString(16);while(Q.length<40)Q="0"+Q;return Pp("0x"+Q)}r(!1,"invalid address","address",$)}function UH($){let Q=BigInt(R1($)).toString(36).toUpperCase();while(Q.length<30)Q="0"+Q;return"XE"+jp("XE00"+Q)+Q}var Jz0,zz0,SA,Hp=15,qz0;var VH=p(()=>{g8();J1();Jz0=BigInt(0),zz0=BigInt(36);SA={};for(let $=0;$<10;$++)SA[String($)]=String($);for(let $=0;$<26;$++)SA[String.fromCharCode(65+$)]=String(10+$);qz0=function(){let $={};for(let Q=0;Q<36;Q++){let Z="0123456789abcdefghijklmnopqrstuvwxyz"[Q];$[Z]=BigInt(Q)}return $}()});function kX($){let Q=R1($.from),X=e0($.nonce,"tx.nonce").toString(16);if(X==="0")X="0x";else if(X.length%2)X="0x0"+X;else X="0x"+X;return R1(m5(p1(T9([Q,X])),12))}function OH($,Q,Z){let X=R1($),Y=x0(Q,"salt"),z=x0(Z,"initCodeHash");return r(Y.length===32,"salt must be 32 bytes","salt",Q),r(z.length===32,"initCodeHash must be 32 bytes","initCodeHash",Z),R1(m5(p1(S1(["0xff",X,Y,z])),12))}var Rp=p(()=>{g8();J1();VH()});function eJ($){return $&&typeof $.getAddress==="function"}function DH($){try{return R1($),!0}catch(Q){}return!1}async function fA($,Q){let Z=await Q;if(Z==null||Z==="0x0000000000000000000000000000000000000000")P0(typeof $!=="string","unconfigured name","UNCONFIGURED_NAME",{value:$}),r(!1,"invalid AddressLike value; did not resolve to a value address","target",$);return R1(Z)}function k6($,Q){if(typeof $==="string"){if($.match(/^0x[0-9a-f]{40}$/i))return R1($);return P0(Q!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),fA($,Q.resolveName($))}else if(eJ($))return fA($,$.getAddress());else if($&&typeof $.then==="function")return fA($,$);r(!1,"unsupported addressable value","target",$)}var Np=p(()=>{J1();VH()});var F8=p(()=>{VH();Rp();Np()});function U1($,Q){let Z=!1;if(Q<0)Z=!0,Q*=-1;return new C5(V3,`${Z?"":"u"}int${Q}`,$,{signed:Z,width:Q})}function e5($,Q){return new C5(V3,`bytes${Q?Q:""}`,$,{size:Q})}class C5{type;value;#$;_typedSymbol;constructor($,Q,Z,X){if(X==null)X=null;W9(V3,$,"Typed"),r0(this,{_typedSymbol:Cp,type:Q,value:Z}),this.#$=X,this.format()}format(){if(this.type==="array")throw Error("");else if(this.type==="dynamicArray")throw Error("");else if(this.type==="tuple")return`tuple(${this.value.map(($)=>$.format()).join(",")})`;return this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#$}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");if(this.#$===!0)return-1;if(this.#$===!1)return this.value.length;return null}static from($,Q){return new C5(V3,$,Q)}static uint8($){return U1($,8)}static uint16($){return U1($,16)}static uint24($){return U1($,24)}static uint32($){return U1($,32)}static uint40($){return U1($,40)}static uint48($){return U1($,48)}static uint56($){return U1($,56)}static uint64($){return U1($,64)}static uint72($){return U1($,72)}static uint80($){return U1($,80)}static uint88($){return U1($,88)}static uint96($){return U1($,96)}static uint104($){return U1($,104)}static uint112($){return U1($,112)}static uint120($){return U1($,120)}static uint128($){return U1($,128)}static uint136($){return U1($,136)}static uint144($){return U1($,144)}static uint152($){return U1($,152)}static uint160($){return U1($,160)}static uint168($){return U1($,168)}static uint176($){return U1($,176)}static uint184($){return U1($,184)}static uint192($){return U1($,192)}static uint200($){return U1($,200)}static uint208($){return U1($,208)}static uint216($){return U1($,216)}static uint224($){return U1($,224)}static uint232($){return U1($,232)}static uint240($){return U1($,240)}static uint248($){return U1($,248)}static uint256($){return U1($,256)}static uint($){return U1($,256)}static int8($){return U1($,-8)}static int16($){return U1($,-16)}static int24($){return U1($,-24)}static int32($){return U1($,-32)}static int40($){return U1($,-40)}static int48($){return U1($,-48)}static int56($){return U1($,-56)}static int64($){return U1($,-64)}static int72($){return U1($,-72)}static int80($){return U1($,-80)}static int88($){return U1($,-88)}static int96($){return U1($,-96)}static int104($){return U1($,-104)}static int112($){return U1($,-112)}static int120($){return U1($,-120)}static int128($){return U1($,-128)}static int136($){return U1($,-136)}static int144($){return U1($,-144)}static int152($){return U1($,-152)}static int160($){return U1($,-160)}static int168($){return U1($,-168)}static int176($){return U1($,-176)}static int184($){return U1($,-184)}static int192($){return U1($,-192)}static int200($){return U1($,-200)}static int208($){return U1($,-208)}static int216($){return U1($,-216)}static int224($){return U1($,-224)}static int232($){return U1($,-232)}static int240($){return U1($,-240)}static int248($){return U1($,-248)}static int256($){return U1($,-256)}static int($){return U1($,-256)}static bytes1($){return e5($,1)}static bytes2($){return e5($,2)}static bytes3($){return e5($,3)}static bytes4($){return e5($,4)}static bytes5($){return e5($,5)}static bytes6($){return e5($,6)}static bytes7($){return e5($,7)}static bytes8($){return e5($,8)}static bytes9($){return e5($,9)}static bytes10($){return e5($,10)}static bytes11($){return e5($,11)}static bytes12($){return e5($,12)}static bytes13($){return e5($,13)}static bytes14($){return e5($,14)}static bytes15($){return e5($,15)}static bytes16($){return e5($,16)}static bytes17($){return e5($,17)}static bytes18($){return e5($,18)}static bytes19($){return e5($,19)}static bytes20($){return e5($,20)}static bytes21($){return e5($,21)}static bytes22($){return e5($,22)}static bytes23($){return e5($,23)}static bytes24($){return e5($,24)}static bytes25($){return e5($,25)}static bytes26($){return e5($,26)}static bytes27($){return e5($,27)}static bytes28($){return e5($,28)}static bytes29($){return e5($,29)}static bytes30($){return e5($,30)}static bytes31($){return e5($,31)}static bytes32($){return e5($,32)}static address($){return new C5(V3,"address",$)}static bool($){return new C5(V3,"bool",!!$)}static bytes($){return new C5(V3,"bytes",$)}static string($){return new C5(V3,"string",$)}static array($,Q){throw Error("not implemented yet")}static tuple($,Q){throw Error("not implemented yet")}static overrides($){return new C5(V3,"overrides",Object.assign({},$))}static isTyped($){return $&&typeof $==="object"&&"_typedSymbol"in $&&$._typedSymbol===Cp}static dereference($,Q){if(C5.isTyped($)){if($.type!==Q)throw Error(`invalid type: expecetd ${Q}, got ${$.type}`);return $.value}return $}}var V3,Cp;var W$=p(()=>{J1();V3={};Cp=Symbol.for("_ethers_typed")});var kA;var Lp=p(()=>{F8();SW();W$();G7();kA=class kA extends r8{constructor($){super("address","address",$,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode($,Q){let Z=C5.dereference(Q,"string");try{Z=R1(Z)}catch(X){return this._throwError(X.message,Q)}return $.writeValue(Z)}decode($){return R1(n8($.readValue(),20))}}});var xA;var Tp=p(()=>{G7();xA=class xA extends r8{coder;constructor($){super($.name,$.type,"_",$.dynamic);this.coder=$}defaultValue(){return this.coder.defaultValue()}encode($,Q){return this.coder.encode($,Q)}decode($){return this.coder.decode($)}}});function bA($,Q,Z){let X=[];if(Array.isArray(Z))X=Z;else if(Z&&typeof Z==="object"){let W={};X=Q.map((G)=>{let U=G.localName;return P0(U,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:G},value:Z}),P0(!W[U],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:G},value:Z}),W[U]=!0,Z[U]})}else r(!1,"invalid tuple value","tuple",Z);r(Q.length===X.length,"types/value length mismatch","tuple",Z);let Y=new mW,z=new mW,J=[];Q.forEach((W,G)=>{let U=X[G];if(W.dynamic){let D=z.length;W.encode(z,U);let P=Y.writeUpdatableValue();J.push((H)=>{P(H+D)})}else W.encode(Y,U)}),J.forEach((W)=>{W(Y.length)});let q=$.appendWriter(Y);return q+=$.appendWriter(z),q}function vA($,Q){let Z=[],X=[],Y=$.subReader(0);return Q.forEach((z)=>{let J=null;if(z.dynamic){let q=$.readIndex(),W=Y.subReader(q);try{J=z.decode(W)}catch(G){if(o5(G,"BUFFER_OVERRUN"))throw G;J=G,J.baseType=z.name,J.name=z.localName,J.type=z.type}}else try{J=z.decode($)}catch(q){if(o5(q,"BUFFER_OVERRUN"))throw q;J=q,J.baseType=z.name,J.name=z.localName,J.type=z.type}if(J==null)throw Error("investigate");Z.push(J),X.push(z.localName||null)}),D2.fromItems(Z,X)}var yA;var gA=p(()=>{J1();W$();G7();Tp();yA=class yA extends r8{coder;length;constructor($,Q,Z){let X=$.type+"["+(Q>=0?Q:"")+"]",Y=Q===-1||$.dynamic;super("array",X,Z,Y);r0(this,{coder:$,length:Q})}defaultValue(){let $=this.coder.defaultValue(),Q=[];for(let Z=0;Z<this.length;Z++)Q.push($);return Q}encode($,Q){let Z=C5.dereference(Q,"array");if(!Array.isArray(Z))this._throwError("expected array value",Z);let X=this.length;if(X===-1)X=Z.length,$.writeValue(Z.length);NX(Z.length,X,"coder array"+(this.localName?" "+this.localName:""));let Y=[];for(let z=0;z<Z.length;z++)Y.push(this.coder);return bA($,Y,Z)}decode($){let Q=this.length;if(Q===-1)Q=$.readIndex(),P0(Q*F9<=$.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:$.bytes,offset:Q*F9,length:$.dataLength});let Z=[];for(let X=0;X<Q;X++)Z.push(new xA(this.coder));return vA($,Z)}}});var hA;var Fp=p(()=>{W$();G7();hA=class hA extends r8{constructor($){super("bool","bool",$,!1)}defaultValue(){return!1}encode($,Q){let Z=C5.dereference(Q,"bool");return $.writeValue(Z?1:0)}decode($){return!!$.readValue()}}});var MH,mA;var pA=p(()=>{J1();G7();MH=class MH extends r8{constructor($,Q){super($,$,Q,!0)}defaultValue(){return"0x"}encode($,Q){Q=f6(Q);let Z=$.writeValue(Q.length);return Z+=$.writeBytes(Q),Z}decode($){return $.readBytes($.readIndex(),!0)}};mA=class mA extends MH{constructor($){super("bytes",$)}decode($){return F0(super.decode($))}}});var uA;var Ap=p(()=>{J1();W$();G7();uA=class uA extends r8{size;constructor($,Q){let Z="bytes"+String($);super(Z,Z,Q,!1);r0(this,{size:$},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode($,Q){let Z=f6(C5.dereference(Q,this.type));if(Z.length!==this.size)this._throwError("incorrect data length",Q);return $.writeBytes(Z)}decode($){return F0($.readBytes(this.size))}}});var Kz0,cA;var wp=p(()=>{G7();Kz0=new Uint8Array([]);cA=class cA extends r8{constructor($){super("null","",$,!1)}defaultValue(){return null}encode($,Q){if(Q!=null)this._throwError("not null",Q);return $.writeBytes(Kz0)}decode($){return $.readBytes(0),null}}});var Gz0,Uz0,Vz0,dA;var Bp=p(()=>{J1();W$();G7();Gz0=BigInt(0),Uz0=BigInt(1),Vz0=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");dA=class dA extends r8{size;signed;constructor($,Q,Z){let X=(Q?"int":"uint")+$*8;super(X,X,Z,!1);r0(this,{size:$,signed:Q},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode($,Q){let Z=e0(C5.dereference(Q,this.type)),X=a2(Vz0,F9*8);if(this.signed){let Y=a2(X,this.size*8-1);if(Z>Y||Z<-(Y+Uz0))this._throwError("value out-of-bounds",Q);Z=Y$(Z,8*F9)}else if(Z<Gz0||Z>a2(X,this.size*8))this._throwError("value out-of-bounds",Q);return $.writeValue(Z)}decode($){let Q=a2($.readValue(),this.size*8);if(this.signed)Q=X$(Q,this.size*8);return Q}}});var lA;var Ep=p(()=>{fP();W$();pA();lA=class lA extends MH{constructor($){super("string",$)}defaultValue(){return""}encode($,Q){return super.encode($,p5(C5.dereference(Q,"string")))}decode($){return u9(super.decode($))}}});var nW;var Ip=p(()=>{W$();G7();gA();nW=class nW extends r8{coders;constructor($,Q){let Z=!1,X=[];$.forEach((z)=>{if(z.dynamic)Z=!0;X.push(z.type)});let Y="tuple("+X.join(",")+")";super("tuple",Y,Q,Z);r0(this,{coders:Object.freeze($.slice())})}defaultValue(){let $=[];this.coders.forEach((Z)=>{$.push(Z.defaultValue())});let Q=this.coders.reduce((Z,X)=>{let Y=X.localName;if(Y){if(!Z[Y])Z[Y]=0;Z[Y]++}return Z},{});return this.coders.forEach((Z,X)=>{let Y=Z.localName;if(!Y||Q[Y]!==1)return;if(Y==="length")Y="_length";if($[Y]!=null)return;$[Y]=$[X]}),Object.freeze($)}encode($,Q){let Z=C5.dereference(Q,"tuple");return bA($,this.coders,Z)}decode($){return vA($,this.coders)}}});function iA($,Q){return{address:R1($),storageKeys:Q.map((Z,X)=>{return r(J5(Z,32),"invalid slot",`storageKeys[${X}]`,Z),Z.toLowerCase()})}}function K9($){if(Array.isArray($))return $.map((Z,X)=>{if(Array.isArray(Z))return r(Z.length===2,"invalid slot set",`value[${X}]`,Z),iA(Z[0],Z[1]);return r(Z!=null&&typeof Z==="object","invalid address-slot set","value",$),iA(Z.address,Z.storageKeys)});r($!=null&&typeof $==="object","invalid access list","value",$);let Q=Object.keys($).map((Z)=>{let X=$[Z].reduce((Y,z)=>{return Y[z]=!0,Y},{});return iA(Z,Object.keys(X).sort())});return Q.sort((Z,X)=>Z.address.localeCompare(X.address)),Q}var oA=p(()=>{F8();J1()});function xX($){return{address:R1($.address),nonce:e0($.nonce!=null?$.nonce:0),chainId:e0($.chainId!=null?$.chainId:0),signature:q6.from($.signature)}}var nA=p(()=>{F8();g8();J1()});function H7($){let Q;if(typeof $==="string")Q=D8.computePublicKey($,!1);else Q=$.publicKey;return R1(p1("0x"+Q.substring(4)).substring(26))}function j7($,Q){return H7(D8.recoverPublicKey($,Q))}var rA=p(()=>{F8();g8()});function Rz0($){return{blobToKzgCommitment:(X)=>{if("computeBlobProof"in $){if("blobToKzgCommitment"in $&&typeof $.blobToKzgCommitment==="function")return x0($.blobToKzgCommitment(F0(X)))}else if("blobToKzgCommitment"in $&&typeof $.blobToKzgCommitment==="function")return x0($.blobToKzgCommitment(X));if("blobToKZGCommitment"in $&&typeof $.blobToKZGCommitment==="function")return x0($.blobToKZGCommitment(F0(X)));r(!1,"unsupported KZG library","kzg",$)},computeBlobKzgProof:(X,Y)=>{if("computeBlobProof"in $&&typeof $.computeBlobProof==="function")return x0($.computeBlobProof(F0(X),F0(Y)));if("computeBlobKzgProof"in $&&typeof $.computeBlobKzgProof==="function")return $.computeBlobKzgProof(X,Y);if("computeBlobKZGProof"in $&&typeof $.computeBlobKZGProof==="function")return x0($.computeBlobKZGProof(F0(X),F0(Y)));r(!1,"unsupported KZG library","kzg",$)}}}function _p($,Q){let Z=$.toString(16);while(Z.length<2)Z="0"+Z;return Z+=V8(Q).substring(4),"0x"+Z}function rW($){if($==="0x")return null;return R1($)}function HH($,Q){try{return K9($)}catch(Z){r(!1,Z.message,Q,$)}}function Nz0($,Q){try{if(!Array.isArray($))throw Error("authorizationList: invalid array");let Z=[];for(let X=0;X<$.length;X++){let Y=$[X];if(!Array.isArray(Y))throw Error(`authorization[${X}]: invalid array`);if(Y.length!==6)throw Error(`authorization[${X}]: wrong length`);if(!Y[1])throw Error(`authorization[${X}]: null address`);Z.push({address:rW(Y[1]),nonce:F6(Y[2],"nonce"),chainId:F6(Y[0],"chainId"),signature:q6.from({yParity:$z(Y[3],"yParity"),r:U8(Y[4],32),s:U8(Y[5],32)})})}return Z}catch(Z){r(!1,Z.message,Q,$)}}function $z($,Q){if($==="0x")return 0;return G1($,Q)}function F6($,Q){if($==="0x")return G9;let Z=e0($,Q);return r(Z<=Hz0,"value exceeds uint size",Q,Z),Z}function x5($,Q){let Z=e0($,"value"),X=k5(Z);return r(X.length<=32,"value too large",`tx.${Q}`,Z),X}function jH($){return K9($).map((Q)=>[Q.address,Q.storageKeys])}function Cz0($){return $.map((Q)=>{return[x5(Q.chainId,"chainId"),Q.address,x5(Q.nonce,"nonce"),x5(Q.signature.yParity,"yParity"),k5(Q.signature.r),k5(Q.signature._s)]})}function Lz0($,Q){r(Array.isArray($),`invalid ${Q}`,"value",$);for(let Z=0;Z<$.length;Z++)r(J5($[Z],32),"invalid ${ param } hash",`value[${Z}]`,$[Z]);return $}function Tz0($){let Q=J$($);r(Array.isArray(Q)&&(Q.length===9||Q.length===6),"invalid field count for legacy transaction","data",$);let Z={type:0,nonce:$z(Q[0],"nonce"),gasPrice:F6(Q[1],"gasPrice"),gasLimit:F6(Q[2],"gasLimit"),to:rW(Q[3]),value:F6(Q[4],"value"),data:F0(Q[5]),chainId:G9};if(Q.length===6)return Z;let X=F6(Q[6],"v"),Y=F6(Q[7],"r"),z=F6(Q[8],"s");if(Y===G9&&z===G9)Z.chainId=X;else{let J=(X-Pz0)/Oz0;if(J<G9)J=G9;Z.chainId=J,r(J!==G9||(X===Dz0||X===Mz0),"non-canonical legacy v","v",Q[6]),Z.signature=q6.from({r:U8(Q[7],32),s:U8(Q[8],32),v:X})}return Z}function Fz0($,Q){let Z=[x5($.nonce,"nonce"),x5($.gasPrice||0,"gasPrice"),x5($.gasLimit,"gasLimit"),$.to||"0x",x5($.value,"value"),$.data],X=G9;if($.chainId!=G9)X=e0($.chainId,"tx.chainId"),r(!Q||Q.networkV==null||Q.legacyChainId===X,"tx.chainId/sig.v mismatch","sig",Q);else if($.signature){let z=$.signature.legacyChainId;if(z!=null)X=z}if(!Q){if(X!==G9)Z.push(k5(X)),Z.push("0x"),Z.push("0x");return T9(Z)}let Y=BigInt(27+Q.yParity);if(X!==G9)Y=q6.getChainIdV(X,Q.v);else if(BigInt(Q.v)!==Y)r(!1,"tx.chainId/sig.v mismatch","sig",Q);return Z.push(k5(Y)),Z.push(k5(Q.r)),Z.push(k5(Q._s)),T9(Z)}function RH($,Q){let Z;try{if(Z=$z(Q[0],"yParity"),Z!==0&&Z!==1)throw Error("bad yParity")}catch(J){r(!1,"invalid yParity","yParity",Q[0])}let X=U8(Q[1],32),Y=U8(Q[2],32),z=q6.from({r:X,s:Y,yParity:Z});$.signature=z}function Az0($){let Q=J$(x0($).slice(1));r(Array.isArray(Q)&&(Q.length===9||Q.length===12),"invalid field count for transaction type: 2","data",F0($));let Z={type:2,chainId:F6(Q[0],"chainId"),nonce:$z(Q[1],"nonce"),maxPriorityFeePerGas:F6(Q[2],"maxPriorityFeePerGas"),maxFeePerGas:F6(Q[3],"maxFeePerGas"),gasPrice:null,gasLimit:F6(Q[4],"gasLimit"),to:rW(Q[5]),value:F6(Q[6],"value"),data:F0(Q[7]),accessList:HH(Q[8],"accessList")};if(Q.length===9)return Z;return RH(Z,Q.slice(9)),Z}function wz0($,Q){let Z=[x5($.chainId,"chainId"),x5($.nonce,"nonce"),x5($.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),x5($.maxFeePerGas||0,"maxFeePerGas"),x5($.gasLimit,"gasLimit"),$.to||"0x",x5($.value,"value"),$.data,jH($.accessList||[])];if(Q)Z.push(x5(Q.yParity,"yParity")),Z.push(k5(Q.r)),Z.push(k5(Q.s));return S1(["0x02",T9(Z)])}function Bz0($){let Q=J$(x0($).slice(1));r(Array.isArray(Q)&&(Q.length===8||Q.length===11),"invalid field count for transaction type: 1","data",F0($));let Z={type:1,chainId:F6(Q[0],"chainId"),nonce:$z(Q[1],"nonce"),gasPrice:F6(Q[2],"gasPrice"),gasLimit:F6(Q[3],"gasLimit"),to:rW(Q[4]),value:F6(Q[5],"value"),data:F0(Q[6]),accessList:HH(Q[7],"accessList")};if(Q.length===8)return Z;return RH(Z,Q.slice(8)),Z}function Ez0($,Q){let Z=[x5($.chainId,"chainId"),x5($.nonce,"nonce"),x5($.gasPrice||0,"gasPrice"),x5($.gasLimit,"gasLimit"),$.to||"0x",x5($.value,"value"),$.data,jH($.accessList||[])];if(Q)Z.push(x5(Q.yParity,"recoveryParam")),Z.push(k5(Q.r)),Z.push(k5(Q.s));return S1(["0x01",T9(Z)])}function Iz0($){let Q=J$(x0($).slice(1)),Z="3",X=null,Y=null;if(Q.length===4&&Array.isArray(Q[0])){Z="3 (network format)";let J=Q[1],q=Q[2],W=Q[3];r(Array.isArray(J),"invalid network format: blobs not an array","fields[1]",J),r(Array.isArray(q),"invalid network format: commitments not an array","fields[2]",q),r(Array.isArray(W),"invalid network format: proofs not an array","fields[3]",W),r(J.length===q.length,"invalid network format: blobs/commitments length mismatch","fields",Q),r(J.length===W.length,"invalid network format: blobs/proofs length mismatch","fields",Q),Y=[];for(let G=0;G<Q[1].length;G++)Y.push({data:J[G],commitment:q[G],proof:W[G]});Q=Q[0]}else if(Q.length===5&&Array.isArray(Q[0])){Z="3 (EIP-7594 network format)",X=G1(Q[1]);let J=Q[2],q=Q[3],W=Q[4];r(X===1,`unsupported EIP-7594 network format version: ${X}`,"fields[1]",X),r(Array.isArray(J),"invalid EIP-7594 network format: blobs not an array","fields[2]",J),r(Array.isArray(q),"invalid EIP-7594 network format: commitments not an array","fields[3]",q),r(Array.isArray(W),"invalid EIP-7594 network format: proofs not an array","fields[4]",W),r(J.length===q.length,"invalid network format: blobs/commitments length mismatch","fields",Q),r(J.length*PH===W.length,"invalid network format: blobs/proofs length mismatch","fields",Q),Y=[];for(let G=0;G<J.length;G++){let U=[];for(let D=0;D<PH;D++)U.push(W[G*PH+D]);Y.push({data:J[G],commitment:q[G],proof:S1(U)})}Q=Q[0]}r(Array.isArray(Q)&&(Q.length===11||Q.length===14),`invalid field count for transaction type: ${Z}`,"data",F0($));let z={type:3,chainId:F6(Q[0],"chainId"),nonce:$z(Q[1],"nonce"),maxPriorityFeePerGas:F6(Q[2],"maxPriorityFeePerGas"),maxFeePerGas:F6(Q[3],"maxFeePerGas"),gasPrice:null,gasLimit:F6(Q[4],"gasLimit"),to:rW(Q[5]),value:F6(Q[6],"value"),data:F0(Q[7]),accessList:HH(Q[8],"accessList"),maxFeePerBlobGas:F6(Q[9],"maxFeePerBlobGas"),blobVersionedHashes:Q[10],blobWrapperVersion:X};if(Y)z.blobs=Y;r(z.to!=null,`invalid address for transaction type: ${Z}`,"data",$),r(Array.isArray(z.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",$);for(let J=0;J<z.blobVersionedHashes.length;J++)r(J5(z.blobVersionedHashes[J],32),`invalid blobVersionedHash at index ${J}: must be length 32`,"data",$);if(Q.length===11)return z;return RH(z,Q.slice(11)),z}function _z0($,Q,Z){let X=[x5($.chainId,"chainId"),x5($.nonce,"nonce"),x5($.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),x5($.maxFeePerGas||0,"maxFeePerGas"),x5($.gasLimit,"gasLimit"),$.to||P7,x5($.value,"value"),$.data,jH($.accessList||[]),x5($.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Lz0($.blobVersionedHashes||[],"blobVersionedHashes")];if(Q){if(X.push(x5(Q.yParity,"yParity")),X.push(k5(Q.r)),X.push(k5(Q.s)),Z){if($.blobWrapperVersion!=null){let Y=k5($.blobWrapperVersion),z=[];for(let{proof:J}of Z){let q=x0(J),W=q.length/PH;for(let G=0;G<q.length;G+=W)z.push(q.subarray(G,G+W))}return S1(["0x03",T9([X,Y,Z.map((J)=>J.data),Z.map((J)=>J.commitment),z])])}return S1(["0x03",T9([X,Z.map((Y)=>Y.data),Z.map((Y)=>Y.commitment),Z.map((Y)=>Y.proof)])])}}return S1(["0x03",T9(X)])}function Sz0($){let Q=J$(x0($).slice(1));r(Array.isArray(Q)&&(Q.length===10||Q.length===13),"invalid field count for transaction type: 4","data",F0($));let Z={type:4,chainId:F6(Q[0],"chainId"),nonce:$z(Q[1],"nonce"),maxPriorityFeePerGas:F6(Q[2],"maxPriorityFeePerGas"),maxFeePerGas:F6(Q[3],"maxFeePerGas"),gasPrice:null,gasLimit:F6(Q[4],"gasLimit"),to:rW(Q[5]),value:F6(Q[6],"value"),data:F0(Q[7]),accessList:HH(Q[8],"accessList"),authorizationList:Nz0(Q[9],"authorizationList")};if(Q.length===10)return Z;return RH(Z,Q.slice(10)),Z}function fz0($,Q){let Z=[x5($.chainId,"chainId"),x5($.nonce,"nonce"),x5($.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),x5($.maxFeePerGas||0,"maxFeePerGas"),x5($.gasLimit,"gasLimit"),$.to||"0x",x5($.value,"value"),$.data,jH($.accessList||[]),Cz0($.authorizationList||[])];if(Q)Z.push(x5(Q.yParity,"yParity")),Z.push(k5(Q.r)),Z.push(k5(Q.s));return S1(["0x04",T9(Z)])}var G9,Oz0,Dz0,Mz0,Pz0,Hz0,jz0,aA=131072,PH=128,A8;var Sp=p(()=>{F8();g8();J1();oA();nA();rA();G9=BigInt(0),Oz0=BigInt(2),Dz0=BigInt(27),Mz0=BigInt(28),Pz0=BigInt(35),Hz0=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),jz0=Symbol.for("nodejs.util.inspect.custom");A8=class A8{#$;#Q;#Z;#X;#Y;#z;#J;#W;#U;#K;#q;#D;#G;#O;#V;#M;#H;#j;get type(){return this.#$}set type($){switch($){case null:this.#$=null;break;case 0:case"legacy":this.#$=0;break;case 1:case"berlin":case"eip-2930":this.#$=1;break;case 2:case"london":case"eip-1559":this.#$=2;break;case 3:case"cancun":case"eip-4844":this.#$=3;break;case 4:case"pectra":case"eip-7702":this.#$=4;break;default:r(!1,"unsupported transaction type","type",$)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){let $=this.#Q;if($==null&&this.type===3)return P7;return $}set to($){this.#Q=$==null?null:R1($)}get nonce(){return this.#X}set nonce($){this.#X=G1($,"value")}get gasLimit(){return this.#Y}set gasLimit($){this.#Y=e0($)}get gasPrice(){let $=this.#z;if($==null&&(this.type===0||this.type===1))return G9;return $}set gasPrice($){this.#z=$==null?null:e0($,"gasPrice")}get maxPriorityFeePerGas(){let $=this.#J;if($==null){if(this.type===2||this.type===3)return G9;return null}return $}set maxPriorityFeePerGas($){this.#J=$==null?null:e0($,"maxPriorityFeePerGas")}get maxFeePerGas(){let $=this.#W;if($==null){if(this.type===2||this.type===3)return G9;return null}return $}set maxFeePerGas($){this.#W=$==null?null:e0($,"maxFeePerGas")}get data(){return this.#Z}set data($){this.#Z=F0($)}get value(){return this.#U}set value($){this.#U=e0($,"value")}get chainId(){return this.#K}set chainId($){this.#K=e0($)}get signature(){return this.#q||null}set signature($){this.#q=$==null?null:q6.from($)}isValid(){let $=this.signature;if($&&!$.isValid())return!1;let Q=this.authorizationList;if(Q){for(let Z of Q)if(!Z.signature.isValid())return!1}return!0}get accessList(){let $=this.#D||null;if($==null){if(this.type===1||this.type===2||this.type===3)return[];return null}return $}set accessList($){this.#D=$==null?null:K9($)}get authorizationList(){let $=this.#H||null;if($==null){if(this.type===4)return[]}return $}set authorizationList($){this.#H=$==null?null:$.map((Q)=>xX(Q))}get maxFeePerBlobGas(){let $=this.#G;if($==null&&this.type===3)return G9;return $}set maxFeePerBlobGas($){this.#G=$==null?null:e0($,"maxFeePerBlobGas")}get blobVersionedHashes(){let $=this.#O;if($==null&&this.type===3)return[];return $}set blobVersionedHashes($){if($!=null){r(Array.isArray($),"blobVersionedHashes must be an Array","value",$),$=$.slice();for(let Q=0;Q<$.length;Q++)r(J5($[Q],32),"invalid blobVersionedHash",`value[${Q}]`,$[Q])}this.#O=$}get blobs(){if(this.#M==null)return null;return this.#M.map(($)=>Object.assign({},$))}set blobs($){if($==null){this.#M=null;return}let Q=[],Z=[];for(let X=0;X<$.length;X++){let Y=$[X];if(q7(Y)){P0(this.#V,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let z=x0(Y);if(r(z.length<=aA,"blob is too large",`blobs[${X}]`,Y),z.length!==aA){let W=new Uint8Array(aA);W.set(z),z=W}let J=this.#V.blobToKzgCommitment(z),q=F0(this.#V.computeBlobKzgProof(z,J));Q.push({data:F0(z),commitment:F0(J),proof:q}),Z.push(_p(1,J))}else{let z=F0(Y.data),J=F0(Y.commitment),q=F0(Y.proof);Q.push({data:z,commitment:J,proof:q}),Z.push(_p(1,J))}}this.#M=Q,this.#O=Z}get kzg(){return this.#V}set kzg($){if($==null)this.#V=null;else this.#V=Rz0($)}get blobWrapperVersion(){return this.#j}set blobWrapperVersion($){this.#j=$}constructor(){this.#$=null,this.#Q=null,this.#X=0,this.#Y=G9,this.#z=null,this.#J=null,this.#W=null,this.#Z="0x",this.#U=G9,this.#K=G9,this.#q=null,this.#D=null,this.#G=null,this.#O=null,this.#V=null,this.#M=null,this.#H=null,this.#j=null}get hash(){if(this.signature==null)return null;return p1(this.#R(!0,!1))}get unsignedHash(){return p1(this.unsignedSerialized)}get from(){if(this.signature==null)return null;return j7(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){if(this.signature==null)return null;return D8.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}#R($,Q){P0(!$||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});let Z=$?this.signature:null;switch(this.inferType()){case 0:return Fz0(this,Z);case 1:return Ez0(this,Z);case 2:return wz0(this,Z);case 3:return _z0(this,Z,Q?this.blobs:null);case 4:return fz0(this,Z)}P0(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#R(!0,!0)}get unsignedSerialized(){return this.#R(!1,!1)}inferType(){let $=this.inferTypes();if($.indexOf(2)>=0)return 2;return $.pop()}inferTypes(){let $=this.gasPrice!=null,Q=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,Z=this.accessList!=null,X=this.#G!=null||this.#O;if(this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null)P0(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this});P0(!Q||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),P0(this.type!==0||!Z,"legacy transaction cannot have accessList","BAD_DATA",{value:this});let Y=[];if(this.type!=null)Y.push(this.type);else if(this.authorizationList&&this.authorizationList.length)Y.push(4);else if(Q)Y.push(2);else if($){if(Y.push(1),!Z)Y.push(0)}else if(Z)Y.push(1),Y.push(2);else if(X&&this.to)Y.push(3);else Y.push(0),Y.push(1),Y.push(2),Y.push(3);return Y.sort(),Y}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return A8.from(this)}toJSON(){let $=(Q)=>{if(Q==null)return null;return Q.toString()};return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:$(this.gasLimit),gasPrice:$(this.gasPrice),maxPriorityFeePerGas:$(this.maxPriorityFeePerGas),maxFeePerGas:$(this.maxFeePerGas),value:$(this.value),chainId:$(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[jz0](){return this.toString()}toString(){let $=[],Q=(X)=>{let Y=this[X];if(typeof Y==="string")Y=JSON.stringify(Y);$.push(`${X}: ${Y}`)};if(this.type)Q("type");if(Q("to"),Q("data"),Q("nonce"),Q("gasLimit"),Q("value"),this.chainId!=null)Q("chainId");if(this.signature)Q("from"),$.push(`signature: ${this.signature.toString()}`);let Z=this.authorizationList;if(Z){let X=[];for(let Y of Z){let z=[];if(z.push(`address: ${JSON.stringify(Y.address)}`),Y.nonce!=null)z.push(`nonce: ${Y.nonce}`);if(Y.chainId!=null)z.push(`chainId: ${Y.chainId}`);if(Y.signature)z.push(`signature: ${Y.signature.toString()}`);X.push(`Authorization { ${z.join(", ")} }`)}$.push(`authorizations: [ ${X.join(", ")} ]`)}return`Transaction { ${$.join(", ")} }`}static from($){if($==null)return new A8;if(typeof $==="string"){let Z=x0($);if(Z[0]>=127)return A8.from(Tz0(Z));switch(Z[0]){case 1:return A8.from(Bz0(Z));case 2:return A8.from(Az0(Z));case 3:return A8.from(Iz0(Z));case 4:return A8.from(Sz0(Z))}P0(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}let Q=new A8;if($.type!=null)Q.type=$.type;if($.to!=null)Q.to=$.to;if($.nonce!=null)Q.nonce=$.nonce;if($.gasLimit!=null)Q.gasLimit=$.gasLimit;if($.gasPrice!=null)Q.gasPrice=$.gasPrice;if($.maxPriorityFeePerGas!=null)Q.maxPriorityFeePerGas=$.maxPriorityFeePerGas;if($.maxFeePerGas!=null)Q.maxFeePerGas=$.maxFeePerGas;if($.maxFeePerBlobGas!=null)Q.maxFeePerBlobGas=$.maxFeePerBlobGas;if($.data!=null)Q.data=$.data;if($.value!=null)Q.value=$.value;if($.chainId!=null)Q.chainId=$.chainId;if($.signature!=null)Q.signature=q6.from($.signature);if($.accessList!=null)Q.accessList=$.accessList;if($.authorizationList!=null)Q.authorizationList=$.authorizationList;if($.blobVersionedHashes!=null)Q.blobVersionedHashes=$.blobVersionedHashes;if($.kzg!=null)Q.kzg=$.kzg;if($.blobWrapperVersion!=null)Q.blobWrapperVersion=$.blobWrapperVersion;if($.blobs!=null)Q.blobs=$.blobs;if($.hash!=null)r(Q.isSigned(),"unsigned transaction cannot define '.hash'","tx",$),r(Q.hash===$.hash,"hash mismatch","tx",$);if($.from!=null)r(Q.isSigned(),"unsigned transaction cannot define '.from'","tx",$),r(Q.from.toLowerCase()===($.from||"").toLowerCase(),"from mismatch","tx",$);return Q}}});var M2=p(()=>{oA();nA();rA();Sp()});function Qz($){return r(typeof $.address==="string","invalid address for hashAuthorization","auth.address",$),p1(S1(["0x05",T9([$.chainId!=null?k5($.chainId):"0x",R1($.address),$.nonce!=null?k5($.nonce):"0x"])]))}function NH($,Q){return j7(Qz($),Q)}var fp=p(()=>{F8();g8();M2();J1()});function U9($){return p1(p5($))}var sA=p(()=>{g8();J1()});function xz0($){let Q=0;function Z(){return $[Q++]<<8|$[Q++]}let X=Z(),Y=1,z=[0,1];for(let f=1;f<X;f++)z.push(Y+=Z());let J=Z(),q=Q;Q+=J;let W=0,G=0;function U(){if(W==0)G=G<<8|$[Q++],W=8;return G>>--W&1}let D=31,P=2**D,H=P>>>1,N=H>>1,C=P-1,L=0;for(let f=0;f<D;f++)L=L<<1|U();let B=[],E=0,I=P;while(!0){let f=Math.floor(((L-E+1)*Y-1)/I),x=0,g=X;while(g-x>1){let b=x+g>>>1;if(f<z[b])g=b;else x=b}if(x==0)break;B.push(x);let h=E+Math.floor(I*z[x]/Y),v=E+Math.floor(I*z[x+1]/Y)-1;while(((h^v)&H)==0)L=L<<1&C|U(),h=h<<1&C,v=v<<1&C|1;while(h&~v&N)L=L&H|L<<1&C>>>1|U(),h=h<<1^H,v=(v^H)<<1|H|1;E=h,I=1+v-h}let _=X-4;return B.map((f)=>{switch(f-_){case 3:return _+65792+($[q++]<<16|$[q++]<<8|$[q++]);case 2:return _+256+($[q++]<<8|$[q++]);case 1:return _+$[q++];default:return f-1}})}function bz0($){let Q=0;return()=>$[Q++]}function gp($){return bz0(xz0(vz0($)))}function vz0($){let Q=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((Y,z)=>Q[Y.charCodeAt(0)]=z);let Z=$.length,X=new Uint8Array(6*Z>>3);for(let Y=0,z=0,J=0,q=0;Y<Z;Y++)if(q=q<<6|Q[$.charCodeAt(Y)],J+=6,J>=8)X[z++]=q>>(J-=8);return X}function yz0($){return $&1?~$>>1:$>>1}function gz0($,Q){let Z=Array($);for(let X=0,Y=0;X<$;X++)Z[X]=Y+=yz0(Q());return Z}function NV($,Q=0){let Z=[];while(!0){let X=$(),Y=$();if(!Y)break;Q+=X;for(let z=0;z<Y;z++)Z.push(Q+z);Q+=Y+1}return Z}function hp($){return CV(()=>{let Q=NV($);if(Q.length)return Q})}function mp($){let Q=[];while(!0){let Z=$();if(Z==0)break;Q.push(hz0(Z,$))}while(!0){let Z=$()-1;if(Z<0)break;Q.push(mz0(Z,$))}return Q.flat()}function CV($){let Q=[];while(!0){let Z=$(Q.length);if(!Z)break;Q.push(Z)}return Q}function pp($,Q,Z){let X=Array($).fill().map(()=>[]);for(let Y=0;Y<Q;Y++)gz0($,Z).forEach((z,J)=>X[J].push(z));return X}function hz0($,Q){let Z=1+Q(),X=Q(),Y=CV(Q);return pp(Y.length,1+$,Q).flatMap((J,q)=>{let[W,...G]=J;return Array(Y[q]).fill().map((U,D)=>{let P=D*X;return[W+D*Z,G.map((H)=>H+P)]})})}function mz0($,Q){let Z=1+Q();return pp(Z,1+$,Q).map((Y)=>[Y[0],Y.slice(1)])}function pz0($){let Q=[],Z=NV($);return Y(X([]),[]),Q;function X(z){let J=$(),q=CV(()=>{let W=NV($).map((G)=>Z[G]);if(W.length)return X(W)});return{S:J,B:q,Q:z}}function Y({S:z,B:J},q,W){if(z&4&&W===q[q.length-1])return;if(z&2)W=q[q.length-1];if(z&1)Q.push(q);for(let G of J)for(let U of G.Q)Y(G,[...q,U],W)}}function uz0($){return $.toString(16).toUpperCase().padStart(2,"0")}function up($){return`{${uz0($)}}`}function cz0($){let Q=[];for(let Z=0,X=$.length;Z<X;){let Y=$.codePointAt(Z);Z+=Y<65536?1:2,Q.push(Y)}return Q}function tW($){let Z=$.length;if(Z<4096)return String.fromCodePoint(...$);let X=[];for(let Y=0;Y<Z;)X.push(String.fromCodePoint(...$.slice(Y,Y+=4096)));return X.join("")}function dz0($,Q){let Z=$.length,X=Z-Q.length;for(let Y=0;X==0&&Y<Z;Y++)X=$[Y]-Q[Y];return X}function jV($){return $>>24&255}function lp($){return $&16777215}function sz0(){let $=gp(lz0);eA=new Map(hp($).flatMap((Q,Z)=>Q.map((X)=>[X,Z+1<<24]))),bp=new Set(NV($)),$w=new Map,CH=new Map;for(let[Q,Z]of mp($)){if(!bp.has(Q)&&Z.length==2){let[X,Y]=Z,z=CH.get(X);if(!z)z=new Map,CH.set(X,z);z.set(Y,Q)}$w.set(Q,Z.reverse())}}function ip($){return $>=LV&&$<oz0}function tz0($,Q){if($>=LH&&$<nz0&&Q>=TH&&Q<rz0)return LV+($-LH)*AH+(Q-TH)*eW;else if(ip($)&&Q>FH&&Q<az0&&($-LV)%eW==0)return $+(Q-FH);else{let Z=CH.get($);if(Z){if(Z=Z.get(Q),Z)return Z}return-1}}function op($){if(!eA)sz0();let Q=[],Z=[],X=!1;function Y(z){let J=eA.get(z);if(J)X=!0,z|=J;Q.push(z)}for(let z of $)while(!0){if(z<128)Q.push(z);else if(ip(z)){let J=z-LV,q=J/AH|0,W=J%AH/eW|0,G=J%eW;if(Y(LH+q),Y(TH+W),G>0)Y(FH+G)}else{let J=$w.get(z);if(J)Z.push(...J);else Y(z)}if(!Z.length)break;z=Z.pop()}if(X&&Q.length>1){let z=jV(Q[0]);for(let J=1;J<Q.length;J++){let q=jV(Q[J]);if(q==0||z<=q){z=q;continue}let W=J-1;while(!0){let G=Q[W+1];if(Q[W+1]=Q[W],Q[W]=G,!W)break;if(z=jV(Q[--W]),z<=q)break}z=jV(Q[J])}}return Q}function ez0($){let Q=[],Z=[],X=-1,Y=0;for(let z of $){let J=jV(z),q=lp(z);if(X==-1)if(J==0)X=q;else Q.push(q);else if(Y>0&&Y>=J){if(J==0)Q.push(X,...Z),Z.length=0,X=q;else Z.push(q);Y=J}else{let W=tz0(X,q);if(W>=0)X=W;else if(Y==0&&J==0)Q.push(X),X=q;else Z.push(q),Y=J}}if(X>=0)Q.push(X,...Z);return Q}function np($){return op($).map(lp)}function $q0($){return ez0(op($))}function TV($,Q){return $.P.has(Q)||$.Q.has(Q)}function Yw(){if(Qw)return;let $=gp(kz0),Q=()=>NV($),Z=()=>new Set(Q()),X=(U,D)=>D.forEach((P)=>U.add(P));Qw=new Map(mp($)),ep=Z(),Xz=Q(),Zw=new Set(Q().map((U)=>Xz[U])),Xz=new Set(Xz),$u=Z(),Qq0=Z();let Y=hp($),z=$(),J=()=>{let U=new Set;return Q().forEach((D)=>X(U,Y[D])),X(U,Q()),U};sW=CV((U)=>{let D=CV($).map((P)=>P+96);if(D.length){let P=U>=z;if(D[0]-=32,D=tW(D),P)D=`Restricted[${D}]`;let H=J(),N=J(),C=!$();return{N:D,P:H,Q:N,M:C,R:P}}}),tA=Z(),aW=new Map;let q=Q().concat(wH(tA)).sort((U,D)=>U-D);q.forEach((U,D)=>{let P=$(),H=q[D]=P?q[D-P]:{V:[],M:new Map};if(H.V.push(U),!tA.has(U))aW.set(U,H)});for(let{V:U,M:D}of new Set(aW.values())){let P=[];for(let N of U){let C=sW.filter((B)=>TV(B,N)),L=P.find(({G:B})=>C.some((E)=>B.has(E)));if(!L)L={G:new Set,V:[]},P.push(L);L.V.push(N),X(L.G,C)}let H=P.flatMap((N)=>wH(N.G));for(let{G:N,V:C}of P){let L=new Set(H.filter((B)=>!N.has(B)));for(let B of C)D.set(B,L)}}Zz=new Set;let W=new Set,G=(U)=>Zz.has(U)?W.add(U):Zz.add(U);for(let U of sW){for(let D of U.P)G(D);for(let D of U.Q)G(D)}for(let U of Zz)if(!aW.has(U)&&!W.has(U))aW.set(U,sp);X(Zz,np(Zz)),yp=pz0($).map((U)=>tp.from(U)).sort(dz0),Xw=new Map;for(let U of yp){let D=[Xw];for(let P of U){let H=D.map((N)=>{let C=N.get(P);if(!C)C=new Map,N.set(P,C);return C});if(P===ap)D.push(...H);else D=H}for(let P of D)P.V=U}}function Jw($){return(Qu($)?"":`${zw(BH([$]))} `)+up($)}function zw($){return`"${$}"`}function Zq0($){if($.length>=4&&$[2]==vp&&$[3]==vp)throw Error(`invalid label extension: "${tW($.slice(0,4))}"`)}function Xq0($){for(let Z=$.lastIndexOf(95);Z>0;)if($[--Z]!==95)throw Error("underscore allowed only at start")}function Yq0($){let Q=$[0],Z=kp.get(Q);if(Z)throw RV(`leading ${Z}`);let X=$.length,Y=-1;for(let z=1;z<X;z++){Q=$[z];let J=kp.get(Q);if(J){if(Y==z)throw RV(`${Z} + ${J}`);Y=z+1,Z=J}}if(Y==X)throw RV(`trailing ${Z}`)}function BH($,Q=1/0,Z=up){let X=[];if(Jq0($[0]))X.push("");if($.length>Q)Q>>=1,$=[...$.slice(0,Q),8230,...$.slice(-Q)];let Y=0,z=$.length;for(let J=0;J<z;J++){let q=$[J];if(Qu(q))X.push(tW($.slice(Y,J))),X.push(Z(q)),Y=J+1}return X.push(tW($.slice(Y,z))),X.join("")}function Jq0($){return Yw(),Xz.has($)}function Qu($){return Yw(),$u.has($)}function Zu($){return Kq0(zq0($,$q0,Vq0))}function zq0($,Q,Z){if(!$)return[];Yw();let X=0;return $.split(rp).map((Y)=>{let z=cz0(Y),J={input:z,offset:X};X+=z.length+1;try{let q=J.tokens=Uq0(z,Q,Z),W=q.length,G;if(!W)throw Error("empty label");let U=J.output=q.flat();if(Xq0(U),!(J.emoji=W>1||q[0].is_emoji)&&U.every((P)=>P<128))Zq0(U),G="ASCII";else{let P=q.flatMap((H)=>H.is_emoji?[]:H);if(!P.length)G="Emoji";else{if(Xz.has(U[0]))throw RV("leading combining mark");for(let C=1;C<W;C++){let L=q[C];if(!L.is_emoji&&Xz.has(L[0]))throw RV(`emoji + combining mark: "${tW(q[C-1])} + ${BH([L[0]])}"`)}Yq0(U);let H=wH(new Set(P)),[N]=Wq0(H);Gq0(N,P),qq0(N,H),G=N.N}}J.type=G}catch(q){J.error=q}return J})}function qq0($,Q){let Z,X=[];for(let Y of Q){let z=aW.get(Y);if(z===sp)return;if(z){let J=z.M.get(Y);if(Z=Z?Z.filter((q)=>J.has(q)):wH(J),!Z.length)return}else X.push(Y)}if(Z){for(let Y of Z)if(X.every((z)=>TV(Y,z)))throw Error(`whole-script confusable: ${$.N}/${Y.N}`)}}function Wq0($){let Q=sW;for(let Z of $){let X=Q.filter((Y)=>TV(Y,Z));if(!X.length)if(!sW.some((Y)=>TV(Y,Z)))throw Xu(Z);else throw Yu(Q[0],Z);if(Q=X,X.length==1)break}return Q}function Kq0($){return $.map(({input:Q,error:Z,output:X})=>{if(Z){let Y=Z.message;throw Error($.length==1?Y:`Invalid label ${zw(BH(Q,63))}: ${Y}`)}return tW(X)}).join(rp)}function Xu($){return Error(`disallowed character: ${Jw($)}`)}function Yu($,Q){let Z=Jw(Q),X=sW.find((Y)=>Y.P.has(Q));if(X)Z=`${X.N} ${Z}`;return Error(`illegal mixture: ${$.N} + ${Z}`)}function RV($){return Error(`illegal placement: ${$}`)}function Gq0($,Q){for(let Z of Q)if(!TV($,Z))throw Yu($,Z);if($.M){let Z=np(Q);for(let X=1,Y=Z.length;X<Y;X++)if(Zw.has(Z[X])){let z=X+1;for(let J;z<Y&&Zw.has(J=Z[z]);z++)for(let q=X;q<z;q++)if(Z[q]==J)throw Error(`duplicate non-spacing marks: ${Jw(J)}`);if(z-X>xp)throw Error(`excessive non-spacing marks: ${zw(BH(Z.slice(X-1,z)))} (${z-X}/${xp})`);X=z}}}function Uq0($,Q,Z){let X=[],Y=[];$=$.slice().reverse();while($.length){let z=Oq0($);if(z){if(Y.length)X.push(Q(Y)),Y=[];X.push(Z(z))}else{let J=$.pop();if(Zz.has(J))Y.push(J);else{let q=Qw.get(J);if(q)Y.push(...q);else if(!ep.has(J))throw Xu(J)}}}if(Y.length)X.push(Q(Y));return X}function Vq0($){return $.filter((Q)=>Q!=ap)}function Oq0($,Q){let Z=Xw,X,Y=$.length;while(Y){if(Z=Z.get($[--Y]),!Z)break;let{V:z}=Z;if(z){if(X=z,Q)Q.push(...$.slice(Y).reverse());$.length=Y}}return X}var kz0="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI",kp,xp=4,lz0="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g",LV=44032,LH=4352,TH=4449,FH=4519,cp=19,dp=21,eW=28,AH,iz0,oz0,nz0,rz0,az0,eA,bp,$w,CH,vp=45,rp=".",ap=65039,sp=1,wH=($)=>Array.from($),tp,Qw,ep,Xz,Zw,$u,Qq0,sW,tA,aW,Zz,yp,Xw;var Ju=p(()=>{kp=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);AH=dp*eW,iz0=cp*AH,oz0=LV+iz0,nz0=LH+cp,rz0=TH+dp,az0=FH+eW;tp=class tp extends Array{get is_emoji(){return!0}}});function zu($){return r($.length!==0,"invalid ENS name; empty component","comp",$),$}function qw($){let Q=p5(FV($)),Z=[];if($.length===0)return Z;let X=0;for(let Y=0;Y<Q.length;Y++)if(Q[Y]===46)Z.push(zu(Q.slice(X,Y))),X=Y+1;return r(X<Q.length,"invalid ENS name; empty component","name",$),Z.push(zu(Q.slice(X))),Z}function FV($){try{if($.length===0)throw Error("empty label");return Zu($)}catch(Q){r(!1,`invalid ENS name (${Q.message})`,"name",$)}}function EH($){try{return qw($).length!==0}catch(Q){}return!1}function TQ($){r(typeof $==="string","invalid ENS name; not a string","name",$),r($.length,"invalid ENS name (empty label)","name",$);let Q=qu,Z=qw($);while(Z.length)Q=p1(S1([Q,p1(Z.pop())]));return F0(Q)}function $K($,Q){let Z=Q!=null?Q:63;return r(Z<=255,"DNS encoded label cannot exceed 255","length",Z),F0(S1(qw($).map((X)=>{r(X.length<=Z,`label ${JSON.stringify($)} exceeds ${Z} bytes`,"name",$);let Y=new Uint8Array(X.length+1);return Y.set(X,1),Y[0]=Y.length-1,Y})))+"00"}var qu;var Wu=p(()=>{g8();J1();Ju();qu=new Uint8Array(32);qu.fill(0)});function Yz($){if(typeof $==="string")$=p5($);return p1(S1([p5(iW),p5(String($.length)),$]))}function IH($,Q){let Z=Yz($);return j7(Z,Q)}var Ku=p(()=>{g8();oW();M2();J1()});function Gu($,Q,Z){switch($){case"address":if(Z)return x0(U8(Q,32));return x0(R1(Q));case"string":return p5(Q);case"bytes":return x0(Q);case"bool":if(Q=Q?"0x01":"0x00",Z)return x0(U8(Q,32));return x0(Q)}let X=$.match(Mq0);if(X){let Y=X[1]==="int",z=parseInt(X[2]||"256");if(r((!X[2]||X[2]===String(z))&&z%8===0&&z!==0&&z<=256,"invalid number type","type",$),Z)z=256;if(Y)Q=Y$(Q,z);return x0(U8(k5(Q),z/8))}if(X=$.match(Dq0),X){let Y=parseInt(X[1]);if(r(String(Y)===X[1]&&Y!==0&&Y<=32,"invalid bytes type","type",$),r(O2(Q)===Y,`invalid value for ${$}`,"value",Q),Z)return x0(Z$(Q,32));return Q}if(X=$.match(Pq0),X&&Array.isArray(Q)){let Y=X[1],z=parseInt(X[2]||String(Q.length));r(z===Q.length,`invalid array length for ${$}`,"value",Q);let J=[];return Q.forEach(function(q){J.push(Gu(Y,q,!0))}),x0(S1(J))}r(!1,"invalid type","type",$)}function QK($,Q){r($.length===Q.length,"wrong number of values; expected ${ types.length }","values",Q);let Z=[];return $.forEach(function(X,Y){Z.push(Gu(X,Q[Y]))}),F0(S1(Z))}function _H($,Q){return p1(QK($,Q))}function SH($,Q){return V8(QK($,Q))}var Dq0,Mq0,Pq0;var Uu=p(()=>{F8();g8();J1();Dq0=new RegExp("^bytes([0-9]+)$"),Mq0=new RegExp("^(u?int)([0-9]*)$"),Pq0=new RegExp("^(.*)\\[([0-9]*)\\]$")});function Rq0($){let Q=x0($),Z=Q.length%32;if(Z)return S1([Q,Mu.slice(Z)]);return F0(Q)}function Ou($){return function(Q){return r(typeof Q==="string",`invalid domain value for ${JSON.stringify($)}`,`domain.${$}`,Q),Q}}function Kw($){{let Q=$.match(/^(u?)int(\d+)$/);if(Q){let Z=Q[1]==="",X=parseInt(Q[2]);r(X%8===0&&X!==0&&X<=256&&Q[2]===String(X),"invalid numeric width","type",$);let Y=a2(jq0,Z?X-1:X),z=Z?(Y+Hu)*Hq0:Pu;return function(J){let q=e0(J,"value");return r(q>=z&&q<=Y,`value out-of-bounds for ${$}`,"value",q),n8(Z?Y$(q,256):q,32)}}}{let Q=$.match(/^bytes(\d+)$/);if(Q){let Z=parseInt(Q[1]);return r(Z!==0&&Z<=32&&Q[1]===String(Z),"invalid bytes width","type",$),function(X){let Y=x0(X);return r(Y.length===Z,`invalid length for ${$}`,"value",X),Rq0(X)}}}switch($){case"address":return function(Q){return U8(R1(Q),32)};case"bool":return function(Q){return!Q?Cq0:Nq0};case"bytes":return function(Q){return p1(Q)};case"string":return function(Q){return U9(Q)}}return null}function Du($,Q){return`${$}(${Q.map(({name:Z,type:X})=>X+" "+Z).join(",")})`}function fH($){let Q=$.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);if(Q)return{base:Q[1],index:Q[2]+Q[4],array:{base:Q[1],prefix:Q[1]+Q[2],count:Q[5]?parseInt(Q[5]):-1}};return{base:$}}class M8{primaryType;#$;get types(){return JSON.parse(this.#$)}#Q;#Z;constructor($){this.#Q=new Map,this.#Z=new Map;let Q=new Map,Z=new Map,X=new Map,Y={};Object.keys($).forEach((q)=>{Y[q]=$[q].map(({name:W,type:G})=>{let{base:U,index:D}=fH(G);if(U==="int"&&!$.int)U="int256";if(U==="uint"&&!$.uint)U="uint256";return{name:W,type:U+(D||"")}}),Q.set(q,new Set),Z.set(q,[]),X.set(q,new Set)}),this.#$=JSON.stringify(Y);for(let q in Y){let W=new Set;for(let G of Y[q]){r(!W.has(G.name),`duplicate variable name ${JSON.stringify(G.name)} in ${JSON.stringify(q)}`,"types",$),W.add(G.name);let U=fH(G.type).base;if(r(U!==q,`circular type reference to ${JSON.stringify(U)}`,"types",$),Kw(U))continue;r(Z.has(U),`unknown type ${JSON.stringify(U)}`,"types",$),Z.get(U).push(q),Q.get(q).add(U)}}let z=Array.from(Z.keys()).filter((q)=>Z.get(q).length===0);r(z.length!==0,"missing primary type","types",$),r(z.length===1,`ambiguous primary types or unused types: ${z.map((q)=>JSON.stringify(q)).join(", ")}`,"types",$),r0(this,{primaryType:z[0]});function J(q,W){r(!W.has(q),`circular type reference to ${JSON.stringify(q)}`,"types",$),W.add(q);for(let G of Q.get(q)){if(!Z.has(G))continue;J(G,W);for(let U of W)X.get(U).add(G)}W.delete(q)}J(this.primaryType,new Set);for(let[q,W]of X){let G=Array.from(W);G.sort(),this.#Q.set(q,Du(q,Y[q])+G.map((U)=>Du(U,Y[U])).join(""))}}getEncoder($){let Q=this.#Z.get($);if(!Q)Q=this.#X($),this.#Z.set($,Q);return Q}#X($){{let X=Kw($);if(X)return X}let Q=fH($).array;if(Q){let X=Q.prefix,Y=this.getEncoder(X);return(z)=>{r(Q.count===-1||Q.count===z.length,`array length mismatch; expected length ${Q.count}`,"value",z);let J=z.map(Y);if(this.#Q.has(X))J=J.map(p1);return p1(S1(J))}}let Z=this.types[$];if(Z){let X=U9(this.#Q.get($));return(Y)=>{let z=Z.map(({name:J,type:q})=>{let W=this.getEncoder(q)(Y[J]);if(this.#Q.has(q))return p1(W);return W});return z.unshift(X),S1(z)}}r(!1,`unknown type: ${$}`,"type",$)}encodeType($){let Q=this.#Q.get($);return r(Q,`unknown type: ${JSON.stringify($)}`,"name",$),Q}encodeData($,Q){return this.getEncoder($)(Q)}hashStruct($,Q){return p1(this.encodeData($,Q))}encode($){return this.encodeData(this.primaryType,$)}hash($){return this.hashStruct(this.primaryType,$)}_visit($,Q,Z){if(Kw($))return Z($,Q);let X=fH($).array;if(X)return r(X.count===-1||X.count===Q.length,`array length mismatch; expected length ${X.count}`,"value",Q),Q.map((z)=>this._visit(X.prefix,z,Z));let Y=this.types[$];if(Y)return Y.reduce((z,{name:J,type:q})=>{return z[J]=this._visit(q,Q[J],Z),z},{});r(!1,`unknown type: ${$}`,"type",$)}visit($,Q){return this._visit(this.primaryType,$,Q)}static from($){return new M8($)}static getPrimaryType($){return M8.from($).primaryType}static hashStruct($,Q,Z){return M8.from(Q).hashStruct($,Z)}static hashDomain($){let Q=[];for(let Z in $){if($[Z]==null)continue;let X=Vu[Z];r(X,`invalid typed-data domain key: ${JSON.stringify(Z)}`,"domain",$),Q.push({name:Z,type:X})}return Q.sort((Z,X)=>{return Ww.indexOf(Z.name)-Ww.indexOf(X.name)}),M8.hashStruct("EIP712Domain",{EIP712Domain:Q},$)}static encode($,Q,Z){return S1(["0x1901",M8.hashDomain($),M8.from(Q).hash(Z)])}static hash($,Q,Z){return p1(M8.encode($,Q,Z))}static async resolveNames($,Q,Z,X){$=Object.assign({},$);for(let J in $)if($[J]==null)delete $[J];let Y={};if($.verifyingContract&&!J5($.verifyingContract,20))Y[$.verifyingContract]="0x";let z=M8.from(Q);z.visit(Z,(J,q)=>{if(J==="address"&&!J5(q,20))Y[q]="0x";return q});for(let J in Y)Y[J]=await X(J);if($.verifyingContract&&Y[$.verifyingContract])$.verifyingContract=Y[$.verifyingContract];return Z=z.visit(Z,(J,q)=>{if(J==="address"&&Y[q])return Y[q];return q}),{domain:$,value:Z}}static getPayload($,Q,Z){M8.hashDomain($);let X={},Y=[];Ww.forEach((q)=>{let W=$[q];if(W==null)return;X[q]=Lq0[q](W),Y.push({name:q,type:Vu[q]})});let z=M8.from(Q);Q=z.types;let J=Object.assign({},Q);return r(J.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",Q),J.EIP712Domain=Y,z.encode(Z),{types:J,domain:X,primaryType:z.primaryType,message:z.visit(Z,(q,W)=>{if(q.match(/^bytes(\d*)/))return F0(x0(W));if(q.match(/^u?int/))return e0(W).toString();switch(q){case"address":return W.toLowerCase();case"bool":return!!W;case"string":return r(typeof W==="string","invalid string","value",W),W}r(!1,"unsupported type","type",q)})}}}function kH($,Q,Z,X){return j7(M8.hash($,Q,Z),X)}var Mu,Hq0,Pu,Hu,jq0,Nq0,Cq0,Vu,Ww,Lq0;var ju=p(()=>{F8();g8();M2();J1();sA();Mu=new Uint8Array(32);Mu.fill(0);Hq0=BigInt(-1),Pu=BigInt(0),Hu=BigInt(1),jq0=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");Nq0=n8(Hu,32),Cq0=n8(Pu,32),Vu={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Ww=["name","version","chainId","verifyingContract","salt"];Lq0={name:Ou("name"),version:Ou("version"),chainId:function($){let Q=e0($,"domain.chainId");if(r(Q>=0,"invalid chain ID","domain.chainId",$),Number.isSafeInteger(Q))return Number(Q);return y8(Q)},verifyingContract:function($){try{return R1($).toLowerCase()}catch(Q){}r(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",$)},salt:function($){let Q=x0($,"domain.salt");return r(Q.length===32,'invalid domain value "salt"',"domain.salt",$),F0(Q)}}});var K$=p(()=>{fp();sA();Wu();Ku();Uu();ju()});function j2($){let Q=new Set;return $.forEach((Z)=>Q.add(Z)),Object.freeze(Q)}class R7{#$;#Q;get offset(){return this.#$}get length(){return this.#Q.length-this.#$}constructor($){this.#$=0,this.#Q=$.slice()}clone(){return new R7(this.#Q)}reset(){this.#$=0}#Z($=0,Q=0){return new R7(this.#Q.slice($,Q).map((Z)=>{return Object.freeze(Object.assign({},Z,{match:Z.match-$,linkBack:Z.linkBack-$,linkNext:Z.linkNext-$}))}))}popKeyword($){let Q=this.peek();if(Q.type!=="KEYWORD"||!$.has(Q.text))throw Error(`expected keyword ${Q.text}`);return this.pop().text}popType($){if(this.peek().type!==$){let Q=this.peek();throw Error(`expected ${$}; got ${Q.type} ${JSON.stringify(Q.text)}`)}return this.pop().text}popParen(){let $=this.peek();if($.type!=="OPEN_PAREN")throw Error("bad start");let Q=this.#Z(this.#$+1,$.match+1);return this.#$=$.match+1,Q}popParams(){let $=this.peek();if($.type!=="OPEN_PAREN")throw Error("bad start");let Q=[];while(this.#$<$.match-1){let Z=this.peek().linkNext;Q.push(this.#Z(this.#$+1,Z)),this.#$=Z}return this.#$=$.match+1,Q}peek(){if(this.#$>=this.#Q.length)throw Error("out-of-bounds");return this.#Q[this.#$]}peekKeyword($){let Q=this.peekType("KEYWORD");return Q!=null&&$.has(Q)?Q:null}peekType($){if(this.length===0)return null;let Q=this.peek();return Q.type===$?Q.text:null}pop(){let $=this.peek();return this.#$++,$}toString(){let $=[];for(let Q=this.#$;Q<this.#Q.length;Q++){let Z=this.#Q[Q];$.push(`${Z.type}:${Z.text}`)}return`<TokenString ${$.join(" ")}>`}}function bX($){let Q=[],Z=(J)=>{let q=z<$.length?JSON.stringify($[z]):"$EOI";throw Error(`invalid token ${q} at ${z}: ${J}`)},X=[],Y=[],z=0;while(z<$.length){let J=$.substring(z),q=J.match(Sq0);if(q)z+=q[1].length,J=$.substring(z);let W={depth:X.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:z,value:-1};Q.push(W);let G=_q0[J[0]]||"";if(G){if(W.type=G,W.text=J[0],z++,G==="OPEN_PAREN")X.push(Q.length-1),Y.push(Q.length-1);else if(G=="CLOSE_PAREN"){if(X.length===0)Z("no matching open bracket");W.match=X.pop(),Q[W.match].match=Q.length-1,W.depth--,W.linkBack=Y.pop(),Q[W.linkBack].linkNext=Q.length-1}else if(G==="COMMA")W.linkBack=Y.pop(),Q[W.linkBack].linkNext=Q.length-1,Y.push(Q.length-1);else if(G==="OPEN_BRACKET")W.type="BRACKET";else if(G==="CLOSE_BRACKET"){let U=Q.pop().text;if(Q.length>0&&Q[Q.length-1].type==="NUMBER"){let D=Q.pop().text;U=D+U,Q[Q.length-1].value=G1(D)}if(Q.length===0||Q[Q.length-1].type!=="BRACKET")throw Error("missing opening bracket");Q[Q.length-1].text+=U}continue}if(q=J.match(kq0),q){if(W.text=q[1],z+=W.text.length,Iq0.has(W.text)){W.type="KEYWORD";continue}if(W.text.match(ku)){W.type="TYPE";continue}W.type="ID";continue}if(q=J.match(fq0),q){W.text=q[1],W.type="NUMBER",z+=W.text.length;continue}throw Error(`unexpected token ${JSON.stringify(J[0])} at position ${z}`)}return new R7(Q.map((J)=>Object.freeze(J)))}function Ru($,Q){let Z=[];for(let X in Q.keys())if($.has(X))Z.push(X);if(Z.length>1)throw Error(`conflicting types: ${Z.join(", ")}`)}function xH($,Q){if(Q.peekKeyword(_u)){let Z=Q.pop().text;if(Z!==$)throw Error(`expected ${$}, got ${Z}`)}return Q.popType("ID")}function AQ($,Q){let Z=new Set;while(!0){let X=$.peekType("KEYWORD");if(X==null||Q&&!Q.has(X))break;if($.pop(),Z.has(X))throw Error(`duplicate keywords: ${JSON.stringify(X)}`);Z.add(X)}return Object.freeze(Z)}function xu($){let Q=AQ($,Aq0);if(Ru(Q,j2("constant payable nonpayable".split(" "))),Ru(Q,j2("pure view payable nonpayable".split(" "))),Q.has("view"))return"view";if(Q.has("pure"))return"pure";if(Q.has("payable"))return"payable";if(Q.has("nonpayable"))return"nonpayable";if(Q.has("constant"))return"view";return"nonpayable"}function FQ($,Q){return $.popParams().map((Z)=>$6.from(Z,Q))}function bu($){if($.peekType("AT")){if($.pop(),$.peekType("NUMBER"))return e0($.pop().text);throw Error("invalid gas")}return null}function Jz($){if($.length)throw Error(`unexpected tokens at offset ${$.offset}: ${$.toString()}`)}function Nu($){let Q=$.match(ku);if(r(Q,"invalid type","type",$),$==="uint")return"uint256";if($==="int")return"int256";if(Q[2]){let Z=parseInt(Q[2]);r(Z!==0&&Z<=32,"invalid bytes length","type",$)}else if(Q[3]){let Z=parseInt(Q[3]);r(Z!==0&&Z<=256&&Z%8===0,"invalid numeric width","type",$)}return $}class $6{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor($,Q,Z,X,Y,z,J,q){if(W9($,t6,"ParamType"),Object.defineProperty(this,e2,{value:Cu}),z)z=Object.freeze(z.slice());if(X==="array"){if(J==null||q==null)throw Error("")}else if(J!=null||q!=null)throw Error("");if(X==="tuple"){if(z==null)throw Error("")}else if(z!=null)throw Error("");r0(this,{name:Q,type:Z,baseType:X,indexed:Y,components:z,arrayLength:J,arrayChildren:q})}format($){if($==null)$="sighash";if($==="json"){let Z=this.name||"";if(this.isArray()){let Y=JSON.parse(this.arrayChildren.format("json"));return Y.name=Z,Y.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(Y)}let X={type:this.baseType==="tuple"?"tuple":this.type,name:Z};if(typeof this.indexed==="boolean")X.indexed=this.indexed;if(this.isTuple())X.components=this.components.map((Y)=>JSON.parse(Y.format($)));return JSON.stringify(X)}let Q="";if(this.isArray())Q+=this.arrayChildren.format($),Q+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`;else if(this.isTuple())Q+="("+this.components.map((Z)=>Z.format($)).join($==="full"?", ":",")+")";else Q+=this.type;if($!=="sighash"){if(this.indexed===!0)Q+=" indexed";if($==="full"&&this.name)Q+=" "+this.name}return Q}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk($,Q){if(this.isArray()){if(!Array.isArray($))throw Error("invalid array value");if(this.arrayLength!==-1&&$.length!==this.arrayLength)throw Error("array is wrong length");let Z=this;return $.map((X)=>Z.arrayChildren.walk(X,Q))}if(this.isTuple()){if(!Array.isArray($))throw Error("invalid tuple value");if($.length!==this.components.length)throw Error("array is wrong length");let Z=this;return $.map((X,Y)=>Z.components[Y].walk(X,Q))}return Q(this.type,$)}#$($,Q,Z,X){if(this.isArray()){if(!Array.isArray(Q))throw Error("invalid array value");if(this.arrayLength!==-1&&Q.length!==this.arrayLength)throw Error("array is wrong length");let z=this.arrayChildren,J=Q.slice();J.forEach((q,W)=>{z.#$($,q,Z,(G)=>{J[W]=G})}),X(J);return}if(this.isTuple()){let z=this.components,J;if(Array.isArray(Q))J=Q.slice();else{if(Q==null||typeof Q!=="object")throw Error("invalid tuple value");J=z.map((q)=>{if(!q.name)throw Error("cannot use object value with unnamed components");if(!(q.name in Q))throw Error(`missing value for component ${q.name}`);return Q[q.name]})}if(J.length!==this.components.length)throw Error("array is wrong length");J.forEach((q,W)=>{z[W].#$($,q,Z,(G)=>{J[W]=G})}),X(J);return}let Y=Z(this.type,Q);if(Y.then)$.push(async function(){X(await Y)}());else X(Y)}async walkAsync($,Q){let Z=[],X=[$];if(this.#$(Z,$,Q,(Y)=>{X[0]=Y}),Z.length)await Promise.all(Z);return X[0]}static from($,Q){if($6.isParamType($))return $;if(typeof $==="string")try{return $6.from(bX($),Q)}catch(J){r(!1,"invalid param type","obj",$)}else if($ instanceof R7){let J="",q="",W=null;if(AQ($,j2(["tuple"])).has("tuple")||$.peekType("OPEN_PAREN"))q="tuple",W=$.popParams().map((N)=>$6.from(N)),J=`tuple(${W.map((N)=>N.format()).join(",")})`;else J=Nu($.popType("TYPE")),q=J;let G=null,U=null;while($.length&&$.peekType("BRACKET")){let N=$.pop();G=new $6(t6,"",J,q,null,W,U,G),U=N.value,J+=N.text,q="array",W=null}let D=null;if(AQ($,wq0).has("indexed")){if(!Q)throw Error("");D=!0}let H=$.peekType("ID")?$.pop().text:"";if($.length)throw Error("leftover tokens");return new $6(t6,H,J,q,D,W,U,G)}let Z=$.name;r(!Z||typeof Z==="string"&&Z.match(fu),"invalid name","obj.name",Z);let X=$.indexed;if(X!=null)r(Q,"parameter cannot be indexed","obj.indexed",$.indexed),X=!!X;let Y=$.type,z=Y.match(xq0);if(z){let J=parseInt(z[2]||"-1"),q=$6.from({type:z[1],components:$.components});return new $6(t6,Z||"",Y,"array",X,null,J,q)}if(Y==="tuple"||Y.startsWith("tuple(")||Y.startsWith("(")){let J=$.components!=null?$.components.map((W)=>$6.from(W)):null;return new $6(t6,Z||"",Y,"tuple",X,J,null,null)}return Y=Nu($.type),new $6(t6,Z||"",Y,Y,X,null,null,null)}static isParamType($){return $&&$[e2]===Cu}}class N7{type;inputs;constructor($,Q,Z){W9($,t6,"Fragment"),Z=Object.freeze(Z.slice()),r0(this,{type:Q,inputs:Z})}static from($){if(typeof $==="string"){try{N7.from(JSON.parse($))}catch(Q){}return N7.from(bX($))}if($ instanceof R7)switch($.peekKeyword(_u)){case"constructor":return t2.from($);case"error":return s8.from($);case"event":return P2.from($);case"fallback":case"receive":return L4.from($);case"function":return H2.from($);case"struct":return O3.from($)}else if(typeof $==="object"){switch($.type){case"constructor":return t2.from($);case"error":return s8.from($);case"event":return P2.from($);case"fallback":case"receive":return L4.from($);case"function":return H2.from($);case"struct":return O3.from($)}P0(!1,`unsupported type: ${$.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}r(!1,"unsupported frgament object","obj",$)}static isConstructor($){return t2.isFragment($)}static isError($){return s8.isFragment($)}static isEvent($){return P2.isFragment($)}static isFunction($){return H2.isFragment($)}static isStruct($){return O3.isFragment($)}}function AV($,Q){return"("+Q.map((Z)=>Z.format($)).join($==="full"?", ":",")+")"}var Tq0="external public payable override",Fq0,Eu="constant external internal payable private public pure view override",Aq0,Iu="constructor error event fallback function receive struct",_u,Su="calldata memory storage payable indexed",wq0,Bq0="tuple returns",Eq0,Iq0,_q0,Sq0,fq0,kq0,fu,ku,xq0,t6,e2,Cu="_ParamTypeInternal",Lu="_ErrorInternal",Tu="_EventInternal",Fu="_ConstructorInternal",Au="_FallbackInternal",wu="_FunctionInternal",Bu="_StructInternal",wQ,s8,P2,t2,L4,H2,O3;var bH=p(()=>{J1();K$();Fq0=j2(Tq0.split(" ")),Aq0=j2(Eu.split(" ")),_u=j2(Iu.split(" ")),wq0=j2(Su.split(" ")),Eq0=[Iu,Su,Bq0,Eu].join(" "),Iq0=j2(Eq0.split(" ")),_q0={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Sq0=new RegExp("^(\\s*)"),fq0=new RegExp("^([0-9]+)"),kq0=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),fu=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),ku=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");xq0=new RegExp(/^(.*)\[([0-9]*)\]$/);t6={},e2=Symbol.for("_ethers_internal");wQ=class wQ extends N7{name;constructor($,Q,Z,X){super($,Q,X);r(typeof Z==="string"&&Z.match(fu),"invalid identifier","name",Z),X=Object.freeze(X.slice()),r0(this,{name:Z})}};s8=class s8 extends wQ{constructor($,Q,Z){super($,"error",Q,Z);Object.defineProperty(this,e2,{value:Lu})}get selector(){return U9(this.format("sighash")).substring(0,10)}format($){if($==null)$="sighash";if($==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((Z)=>JSON.parse(Z.format($)))});let Q=[];if($!=="sighash")Q.push("error");return Q.push(this.name+AV($,this.inputs)),Q.join(" ")}static from($){if(s8.isFragment($))return $;if(typeof $==="string")return s8.from(bX($));else if($ instanceof R7){let Q=xH("error",$),Z=FQ($);return Jz($),new s8(t6,Q,Z)}return new s8(t6,$.name,$.inputs?$.inputs.map($6.from):[])}static isFragment($){return $&&$[e2]===Lu}};P2=class P2 extends wQ{anonymous;constructor($,Q,Z,X){super($,"event",Q,Z);Object.defineProperty(this,e2,{value:Tu}),r0(this,{anonymous:X})}get topicHash(){return U9(this.format("sighash"))}format($){if($==null)$="sighash";if($==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((Z)=>JSON.parse(Z.format($)))});let Q=[];if($!=="sighash")Q.push("event");if(Q.push(this.name+AV($,this.inputs)),$!=="sighash"&&this.anonymous)Q.push("anonymous");return Q.join(" ")}static getTopicHash($,Q){return Q=(Q||[]).map((X)=>$6.from(X)),new P2(t6,$,Q,!1).topicHash}static from($){if(P2.isFragment($))return $;if(typeof $==="string")try{return P2.from(bX($))}catch(Q){r(!1,"invalid event fragment","obj",$)}else if($ instanceof R7){let Q=xH("event",$),Z=FQ($,!0),X=!!AQ($,j2(["anonymous"])).has("anonymous");return Jz($),new P2(t6,Q,Z,X)}return new P2(t6,$.name,$.inputs?$.inputs.map((Q)=>$6.from(Q,!0)):[],!!$.anonymous)}static isFragment($){return $&&$[e2]===Tu}};t2=class t2 extends N7{payable;gas;constructor($,Q,Z,X,Y){super($,Q,Z);Object.defineProperty(this,e2,{value:Fu}),r0(this,{payable:X,gas:Y})}format($){if(P0($!=null&&$!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),$==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map((Z)=>JSON.parse(Z.format($)))});let Q=[`constructor${AV($,this.inputs)}`];if(this.payable)Q.push("payable");if(this.gas!=null)Q.push(`@${this.gas.toString()}`);return Q.join(" ")}static from($){if(t2.isFragment($))return $;if(typeof $==="string")try{return t2.from(bX($))}catch(Q){r(!1,"invalid constuctor fragment","obj",$)}else if($ instanceof R7){AQ($,j2(["constructor"]));let Q=FQ($),Z=!!AQ($,Fq0).has("payable"),X=bu($);return Jz($),new t2(t6,"constructor",Q,Z,X)}return new t2(t6,"constructor",$.inputs?$.inputs.map($6.from):[],!!$.payable,$.gas!=null?$.gas:null)}static isFragment($){return $&&$[e2]===Fu}};L4=class L4 extends N7{payable;constructor($,Q,Z){super($,"fallback",Q);Object.defineProperty(this,e2,{value:Au}),r0(this,{payable:Z})}format($){let Q=this.inputs.length===0?"receive":"fallback";if($==="json"){let Z=this.payable?"payable":"nonpayable";return JSON.stringify({type:Q,stateMutability:Z})}return`${Q}()${this.payable?" payable":""}`}static from($){if(L4.isFragment($))return $;if(typeof $==="string")try{return L4.from(bX($))}catch(Q){r(!1,"invalid fallback fragment","obj",$)}else if($ instanceof R7){let Q=$.toString(),Z=$.peekKeyword(j2(["fallback","receive"]));if(r(Z,"type must be fallback or receive","obj",Q),$.popKeyword(j2(["fallback","receive"]))==="receive"){let J=FQ($);return r(J.length===0,"receive cannot have arguments","obj.inputs",J),AQ($,j2(["payable"])),Jz($),new L4(t6,[],!0)}let Y=FQ($);if(Y.length)r(Y.length===1&&Y[0].type==="bytes","invalid fallback inputs","obj.inputs",Y.map((J)=>J.format("minimal")).join(", "));else Y=[$6.from("bytes")];let z=xu($);if(r(z==="nonpayable"||z==="payable","fallback cannot be constants","obj.stateMutability",z),AQ($,j2(["returns"])).has("returns")){let J=FQ($);r(J.length===1&&J[0].type==="bytes","invalid fallback outputs","obj.outputs",J.map((q)=>q.format("minimal")).join(", "))}return Jz($),new L4(t6,Y,z==="payable")}if($.type==="receive")return new L4(t6,[],!0);if($.type==="fallback"){let Q=[$6.from("bytes")],Z=$.stateMutability==="payable";return new L4(t6,Q,Z)}r(!1,"invalid fallback description","obj",$)}static isFragment($){return $&&$[e2]===Au}};H2=class H2 extends wQ{constant;outputs;stateMutability;payable;gas;constructor($,Q,Z,X,Y,z){super($,"function",Q,X);Object.defineProperty(this,e2,{value:wu}),Y=Object.freeze(Y.slice()),r0(this,{constant:Z==="view"||Z==="pure",gas:z,outputs:Y,payable:Z==="payable",stateMutability:Z})}get selector(){return U9(this.format("sighash")).substring(0,10)}format($){if($==null)$="sighash";if($==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map((Z)=>JSON.parse(Z.format($))),outputs:this.outputs.map((Z)=>JSON.parse(Z.format($)))});let Q=[];if($!=="sighash")Q.push("function");if(Q.push(this.name+AV($,this.inputs)),$!=="sighash"){if(this.stateMutability!=="nonpayable")Q.push(this.stateMutability);if(this.outputs&&this.outputs.length)Q.push("returns"),Q.push(AV($,this.outputs));if(this.gas!=null)Q.push(`@${this.gas.toString()}`)}return Q.join(" ")}static getSelector($,Q){return Q=(Q||[]).map((X)=>$6.from(X)),new H2(t6,$,"view",Q,[],null).selector}static from($){if(H2.isFragment($))return $;if(typeof $==="string")try{return H2.from(bX($))}catch(Z){r(!1,"invalid function fragment","obj",$)}else if($ instanceof R7){let Z=xH("function",$),X=FQ($),Y=xu($),z=[];if(AQ($,j2(["returns"])).has("returns"))z=FQ($);let J=bu($);return Jz($),new H2(t6,Z,Y,X,z,J)}let Q=$.stateMutability;if(Q==null){if(Q="payable",typeof $.constant==="boolean"){if(Q="view",!$.constant){if(Q="payable",typeof $.payable==="boolean"&&!$.payable)Q="nonpayable"}}else if(typeof $.payable==="boolean"&&!$.payable)Q="nonpayable"}return new H2(t6,$.name,Q,$.inputs?$.inputs.map($6.from):[],$.outputs?$.outputs.map($6.from):[],$.gas!=null?$.gas:null)}static isFragment($){return $&&$[e2]===wu}};O3=class O3 extends wQ{constructor($,Q,Z){super($,"struct",Q,Z);Object.defineProperty(this,e2,{value:Bu})}format(){throw Error("@TODO")}static from($){if(typeof $==="string")try{return O3.from(bX($))}catch(Q){r(!1,"invalid struct fragment","obj",$)}else if($ instanceof R7){let Q=xH("struct",$),Z=FQ($);return Jz($),new O3(t6,Q,Z)}return new O3(t6,$.name,$.inputs?$.inputs.map($6.from):[])}static isFragment($){return $&&$[e2]===Bu}}});function yq0($,Q,Z,X){let Y="missing revert data",z=null,J=null,q=null;if(Z){Y="execution reverted";let G=x0(Z);if(Z=F0(Z),G.length===0)Y+=" (no data present; likely require(false) occurred",z="require(false)";else if(G.length%32!==4)Y+=" (could not decode reason; invalid data length)";else if(F0(G.slice(0,4))==="0x08c379a0")try{z=X.decode(["string"],G.slice(4))[0],q={signature:"Error(string)",name:"Error",args:[z]},Y+=`: ${JSON.stringify(z)}`}catch(U){Y+=" (could not decode reason; invalid string data)"}else if(F0(G.slice(0,4))==="0x4e487b71")try{let U=Number(X.decode(["uint256"],G.slice(4))[0]);q={signature:"Panic(uint256)",name:"Panic",args:[U]},z=`Panic due to ${D3.get(U)||"UNKNOWN"}(${U})`,Y+=`: ${z}`}catch(U){Y+=" (could not decode panic code)"}else Y+=" (unknown custom error)"}let W={to:Q.to?R1(Q.to):null,data:Q.data||"0x"};if(Q.from)W.from=R1(Q.from);return H5(Y,"CALL_EXCEPTION",{action:$,data:Z,reason:z,transaction:W,invocation:J,revert:q})}class $4{#$($){if($.isArray())return new yA(this.#$($.arrayChildren),$.arrayLength,$.name);if($.isTuple())return new nW($.components.map((Z)=>this.#$(Z)),$.name);switch($.baseType){case"address":return new kA($.name);case"bool":return new hA($.name);case"string":return new lA($.name);case"bytes":return new mA($.name);case"":return new cA($.name)}let Q=$.type.match(vq0);if(Q){let Z=parseInt(Q[2]||"256");return r(Z!==0&&Z<=256&&Z%8===0,"invalid "+Q[1]+" bit length","param",$),new dA(Z/8,Q[1]==="int",$.name)}if(Q=$.type.match(bq0),Q){let Z=parseInt(Q[1]);return r(Z!==0&&Z<=32,"invalid bytes length","param",$),new uA(Z,$.name)}r(!1,"invalid type","type",$.type)}getDefaultValue($){let Q=$.map((X)=>this.#$($6.from(X)));return new nW(Q,"_").defaultValue()}encode($,Q){NX(Q.length,$.length,"types/values length mismatch");let Z=$.map((z)=>this.#$($6.from(z))),X=new nW(Z,"_"),Y=new mW;return X.encode(Y,Q),Y.data}decode($,Q,Z){let X=$.map((z)=>this.#$($6.from(z)));return new nW(X,"_").decode(new hP(Q,Z,vu))}static _setDefaultMaxInflation($){r(typeof $==="number"&&Number.isInteger($),"invalid defaultMaxInflation factor","value",$),vu=$}static defaultAbiCoder(){if(Gw==null)Gw=new $4;return Gw}static getBuiltinCallException($,Q,Z){return yq0($,Q,Z,$4.defaultAbiCoder())}}var D3,bq0,vq0,Gw=null,vu=1024;var Uw=p(()=>{J1();G7();Lp();gA();Fp();pA();Ap();wp();Bp();Ep();Ip();bH();F8();J1();D3=new Map;D3.set(0,"GENERIC_PANIC");D3.set(1,"ASSERT_FALSE");D3.set(17,"OVERFLOW");D3.set(18,"DIVIDE_BY_ZERO");D3.set(33,"ENUM_RANGE_ERROR");D3.set(34,"BAD_STORAGE_DATA");D3.set(49,"STACK_UNDERFLOW");D3.set(50,"ARRAY_RANGE_ERROR");D3.set(65,"OUT_OF_MEMORY");D3.set(81,"UNINITIALIZED_FUNCTION_CALL");bq0=new RegExp(/^bytes([0-9]*)$/),vq0=new RegExp(/^(u?int)([0-9]*)$/)});function vH($){let Q=p5($);if(Q.length>31)throw Error("bytes32 string must be less than 32 bytes");return Z$(Q,32)}function yH($){let Q=x0($,"bytes");if(Q.length!==32)throw Error("invalid bytes32 - not 32 bytes long");if(Q[31]!==0)throw Error("invalid bytes32 string - no null terminator");let Z=31;while(Q[Z-1]===0)Z--;return u9(Q.slice(0,Z))}var yu=p(()=>{J1()});class ZK{fragment;name;signature;topic;args;constructor($,Q,Z){let X=$.name,Y=$.format();r0(this,{fragment:$,name:X,signature:Y,topic:Q,args:Z})}}class XK{fragment;name;args;signature;selector;value;constructor($,Q,Z,X){let Y=$.name,z=$.format();r0(this,{fragment:$,name:Y,args:Z,signature:z,selector:Q,value:X})}}class YK{fragment;name;args;signature;selector;constructor($,Q,Z){let X=$.name,Y=$.format();r0(this,{fragment:$,name:X,args:Z,signature:Y,selector:Q})}}class zz{hash;_isIndexed;static isIndexed($){return!!($&&$._isIndexed)}constructor($){r0(this,{hash:$,_isIndexed:!0})}}class Q4{fragments;deploy;fallback;receive;#$;#Q;#Z;#X;constructor($){let Q=[];if(typeof $==="string")Q=JSON.parse($);else Q=$;this.#Z=new Map,this.#$=new Map,this.#Q=new Map;let Z=[];for(let z of Q)try{Z.push(N7.from(z))}catch(J){console.log(`[Warning] Invalid Fragment ${JSON.stringify(z)}:`,J.message)}r0(this,{fragments:Object.freeze(Z)});let X=null,Y=!1;if(this.#X=this.getAbiCoder(),this.fragments.forEach((z,J)=>{let q;switch(z.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}r0(this,{deploy:z});return;case"fallback":if(z.inputs.length===0)Y=!0;else r(!X||z.payable!==X.payable,"conflicting fallback fragments",`fragments[${J}]`,z),X=z,Y=X.payable;return;case"function":q=this.#Z;break;case"event":q=this.#Q;break;case"error":q=this.#$;break;default:return}let W=z.format();if(q.has(W))return;q.set(W,z)}),!this.deploy)r0(this,{deploy:t2.from("constructor()")});r0(this,{fallback:X,receive:Y})}format($){let Q=$?"minimal":"full";return this.fragments.map((X)=>X.format(Q))}formatJson(){let $=this.fragments.map((Q)=>Q.format("json"));return JSON.stringify($.map((Q)=>JSON.parse(Q)))}getAbiCoder(){return $4.defaultAbiCoder()}#Y($,Q,Z){if(J5($)){let Y=$.toLowerCase();for(let z of this.#Z.values())if(Y===z.selector)return z;return null}if($.indexOf("(")===-1){let Y=[];for(let[z,J]of this.#Z)if(z.split("(")[0]===$)Y.push(J);if(Q){let z=Q.length>0?Q[Q.length-1]:null,J=Q.length,q=!0;if(C5.isTyped(z)&&z.type==="overrides")q=!1,J--;for(let W=Y.length-1;W>=0;W--){let G=Y[W].inputs.length;if(G!==J&&(!q||G!==J-1))Y.splice(W,1)}for(let W=Y.length-1;W>=0;W--){let G=Y[W].inputs;for(let U=0;U<Q.length;U++){if(!C5.isTyped(Q[U]))continue;if(U>=G.length){if(Q[U].type==="overrides")continue;Y.splice(W,1);break}if(Q[U].type!==G[U].baseType){Y.splice(W,1);break}}}}if(Y.length===1&&Q&&Q.length!==Y[0].inputs.length){let z=Q[Q.length-1];if(z==null||Array.isArray(z)||typeof z!=="object")Y.splice(0,1)}if(Y.length===0)return null;if(Y.length>1&&Z){let z=Y.map((J)=>JSON.stringify(J.format())).join(", ");r(!1,`ambiguous function description (i.e. matches ${z})`,"key",$)}return Y[0]}let X=this.#Z.get(H2.from($).format());if(X)return X;return null}getFunctionName($){let Q=this.#Y($,null,!1);return r(Q,"no matching function","key",$),Q.name}hasFunction($){return!!this.#Y($,null,!1)}getFunction($,Q){return this.#Y($,Q||null,!0)}forEachFunction($){let Q=Array.from(this.#Z.keys());Q.sort((Z,X)=>Z.localeCompare(X));for(let Z=0;Z<Q.length;Z++){let X=Q[Z];$(this.#Z.get(X),Z)}}#z($,Q,Z){if(J5($)){let Y=$.toLowerCase();for(let z of this.#Q.values())if(Y===z.topicHash)return z;return null}if($.indexOf("(")===-1){let Y=[];for(let[z,J]of this.#Q)if(z.split("(")[0]===$)Y.push(J);if(Q){for(let z=Y.length-1;z>=0;z--)if(Y[z].inputs.length<Q.length)Y.splice(z,1);for(let z=Y.length-1;z>=0;z--){let J=Y[z].inputs;for(let q=0;q<Q.length;q++){if(!C5.isTyped(Q[q]))continue;if(Q[q].type!==J[q].baseType){Y.splice(z,1);break}}}}if(Y.length===0)return null;if(Y.length>1&&Z){let z=Y.map((J)=>JSON.stringify(J.format())).join(", ");r(!1,`ambiguous event description (i.e. matches ${z})`,"key",$)}return Y[0]}let X=this.#Q.get(P2.from($).format());if(X)return X;return null}getEventName($){let Q=this.#z($,null,!1);return r(Q,"no matching event","key",$),Q.name}hasEvent($){return!!this.#z($,null,!1)}getEvent($,Q){return this.#z($,Q||null,!0)}forEachEvent($){let Q=Array.from(this.#Q.keys());Q.sort((Z,X)=>Z.localeCompare(X));for(let Z=0;Z<Q.length;Z++){let X=Q[Z];$(this.#Q.get(X),Z)}}getError($,Q){if(J5($)){let X=$.toLowerCase();if(hu[X])return s8.from(hu[X].signature);for(let Y of this.#$.values())if(X===Y.selector)return Y;return null}if($.indexOf("(")===-1){let X=[];for(let[Y,z]of this.#$)if(Y.split("(")[0]===$)X.push(z);if(X.length===0){if($==="Error")return s8.from("error Error(string)");if($==="Panic")return s8.from("error Panic(uint256)");return null}else if(X.length>1){let Y=X.map((z)=>JSON.stringify(z.format())).join(", ");r(!1,`ambiguous error description (i.e. ${Y})`,"name",$)}return X[0]}if($=s8.from($).format(),$==="Error(string)")return s8.from("error Error(string)");if($==="Panic(uint256)")return s8.from("error Panic(uint256)");let Z=this.#$.get($);if(Z)return Z;return null}forEachError($){let Q=Array.from(this.#$.keys());Q.sort((Z,X)=>Z.localeCompare(X));for(let Z=0;Z<Q.length;Z++){let X=Q[Z];$(this.#$.get(X),Z)}}_decodeParams($,Q){return this.#X.decode($,Q)}_encodeParams($,Q){return this.#X.encode($,Q)}encodeDeploy($){return this._encodeParams(this.deploy.inputs,$||[])}decodeErrorResult($,Q){if(typeof $==="string"){let Z=this.getError($);r(Z,"unknown error","fragment",$),$=Z}return r(m5(Q,0,4)===$.selector,`data signature does not match error ${$.name}.`,"data",Q),this._decodeParams($.inputs,m5(Q,4))}encodeErrorResult($,Q){if(typeof $==="string"){let Z=this.getError($);r(Z,"unknown error","fragment",$),$=Z}return S1([$.selector,this._encodeParams($.inputs,Q||[])])}decodeFunctionData($,Q){if(typeof $==="string"){let Z=this.getFunction($);r(Z,"unknown function","fragment",$),$=Z}return r(m5(Q,0,4)===$.selector,`data signature does not match function ${$.name}.`,"data",Q),this._decodeParams($.inputs,m5(Q,4))}encodeFunctionData($,Q){if(typeof $==="string"){let Z=this.getFunction($);r(Z,"unknown function","fragment",$),$=Z}return S1([$.selector,this._encodeParams($.inputs,Q||[])])}decodeFunctionResult($,Q){if(typeof $==="string"){let Y=this.getFunction($);r(Y,"unknown function","fragment",$),$=Y}let Z="invalid length for result data",X=f6(Q);if(X.length%32===0)try{return this.#X.decode($.outputs,X)}catch(Y){Z="could not decode result data"}P0(!1,Z,"BAD_DATA",{value:F0(X),info:{method:$.name,signature:$.format()}})}makeError($,Q){let Z=x0($,"data"),X=$4.getBuiltinCallException("call",Q,Z),Y="execution reverted (unknown custom error)";if(X.message.startsWith("execution reverted (unknown custom error)")){let J=F0(Z.slice(0,4)),q=this.getError(J);if(q)try{let W=this.#X.decode(q.inputs,Z.slice(4));X.revert={name:q.name,signature:q.format(),args:W},X.reason=X.revert.signature,X.message=`execution reverted: ${X.reason}`}catch(W){X.message="execution reverted (coult not decode custom error)"}}let z=this.parseTransaction(Q);if(z)X.invocation={method:z.name,signature:z.signature,args:z.args};return X}encodeFunctionResult($,Q){if(typeof $==="string"){let Z=this.getFunction($);r(Z,"unknown function","fragment",$),$=Z}return F0(this.#X.encode($.outputs,Q||[]))}encodeFilterTopics($,Q){if(typeof $==="string"){let Y=this.getEvent($);r(Y,"unknown event","eventFragment",$),$=Y}P0(Q.length<=$.inputs.length,`too many arguments for ${$.format()}`,"UNEXPECTED_ARGUMENT",{count:Q.length,expectedCount:$.inputs.length});let Z=[];if(!$.anonymous)Z.push($.topicHash);let X=(Y,z)=>{if(Y.type==="string")return U9(z);else if(Y.type==="bytes")return p1(F0(z));if(Y.type==="bool"&&typeof z==="boolean")z=z?"0x01":"0x00";else if(Y.type.match(/^u?int/))z=n8(z);else if(Y.type.match(/^bytes/))z=Z$(z,32);else if(Y.type==="address")this.#X.encode(["address"],[z]);return U8(F0(z),32)};Q.forEach((Y,z)=>{let J=$.inputs[z];if(!J.indexed){r(Y==null,"cannot filter non-indexed parameters; must be null","contract."+J.name,Y);return}if(Y==null)Z.push(null);else if(J.baseType==="array"||J.baseType==="tuple")r(!1,"filtering with tuples or arrays not supported","contract."+J.name,Y);else if(Array.isArray(Y))Z.push(Y.map((q)=>X(J,q)));else Z.push(X(J,Y))});while(Z.length&&Z[Z.length-1]===null)Z.pop();return Z}encodeEventLog($,Q){if(typeof $==="string"){let z=this.getEvent($);r(z,"unknown event","eventFragment",$),$=z}let Z=[],X=[],Y=[];if(!$.anonymous)Z.push($.topicHash);return r(Q.length===$.inputs.length,"event arguments/values mismatch","values",Q),$.inputs.forEach((z,J)=>{let q=Q[J];if(z.indexed)if(z.type==="string")Z.push(U9(q));else if(z.type==="bytes")Z.push(p1(q));else if(z.baseType==="tuple"||z.baseType==="array")throw Error("not implemented");else Z.push(this.#X.encode([z.type],[q]));else X.push(z),Y.push(q)}),{data:this.#X.encode(X,Y),topics:Z}}decodeEventLog($,Q,Z){if(typeof $==="string"){let P=this.getEvent($);r(P,"unknown event","eventFragment",$),$=P}if(Z!=null&&!$.anonymous){let P=$.topicHash;r(J5(Z[0],32)&&Z[0].toLowerCase()===P,"fragment/topic mismatch","topics[0]",Z[0]),Z=Z.slice(1)}let X=[],Y=[],z=[];$.inputs.forEach((P,H)=>{if(P.indexed)if(P.type==="string"||P.type==="bytes"||P.baseType==="tuple"||P.baseType==="array")X.push($6.from({type:"bytes32",name:P.name})),z.push(!0);else X.push(P),z.push(!1);else Y.push(P),z.push(!1)});let J=Z!=null?this.#X.decode(X,S1(Z)):null,q=this.#X.decode(Y,Q,!0),W=[],G=[],U=0,D=0;return $.inputs.forEach((P,H)=>{let N=null;if(P.indexed)if(J==null)N=new zz(null);else if(z[H])N=new zz(J[D++]);else try{N=J[D++]}catch(C){N=C}else try{N=q[U++]}catch(C){N=C}W.push(N),G.push(P.name||null)}),D2.fromItems(W,G)}parseTransaction($){let Q=x0($.data,"tx.data"),Z=e0($.value!=null?$.value:0,"tx.value"),X=this.getFunction(F0(Q.slice(0,4)));if(!X)return null;let Y=this.#X.decode(X.inputs,Q.slice(4));return new XK(X,X.selector,Y,Z)}parseCallResult($){throw Error("@TODO")}parseLog($){let Q=this.getEvent($.topics[0]);if(!Q||Q.anonymous)return null;return new ZK(Q,Q.topicHash,this.decodeEventLog(Q,$.data,$.topics))}parseError($){let Q=F0($),Z=this.getError(m5(Q,0,4));if(!Z)return null;let X=this.#X.decode(Z.inputs,m5(Q,4));return new YK(Z,Z.selector,X)}static from($){if($ instanceof Q4)return $;if(typeof $==="string")return new Q4(JSON.parse($));if(typeof $.formatJson==="function")return new Q4($.formatJson());if(typeof $.format==="function")return new Q4($.format("json"));return new Q4($)}}var gu,hu;var mu=p(()=>{g8();K$();J1();Uw();G7();bH();W$();gu={"0":"generic panic","1":"assert(false)","17":"arithmetic overflow","18":"division or modulo by zero","33":"enum overflow","34":"invalid encoded storage byte array accessed","49":"out-of-bounds array access; popping on an empty array","50":"out-of-bounds access of an array or bytesN","65":"out of memory","81":"uninitialized function"},hu={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:($)=>{return`reverted with reason string ${JSON.stringify($)}`}},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:($)=>{let Q="unknown panic code";if($>=0&&$<=255&&gu[$.toString()])Q=gu[$.toString()];return`reverted with panic code 0x${$.toString(16)} (${Q})`}}}});var JK=p(()=>{Uw();yu();bH();mu();W$()});function zK($){if($==null)return null;return $}function w8($){if($==null)return null;return $.toString()}class vX{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor($,Q,Z){r0(this,{gasPrice:zK($),maxFeePerGas:zK(Q),maxPriorityFeePerGas:zK(Z)})}toJSON(){let{gasPrice:$,maxFeePerGas:Q,maxPriorityFeePerGas:Z}=this;return{_type:"FeeData",gasPrice:w8($),maxFeePerGas:w8(Q),maxPriorityFeePerGas:w8(Z)}}}function T4($){let Q={};if($.to)Q.to=$.to;if($.from)Q.from=$.from;if($.data)Q.data=F0($.data);let Z="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(let Y of Z){if(!(Y in $)||$[Y]==null)continue;Q[Y]=e0($[Y],`request.${Y}`)}let X="type,nonce".split(/,/);for(let Y of X){if(!(Y in $)||$[Y]==null)continue;Q[Y]=G1($[Y],`request.${Y}`)}if($.accessList)Q.accessList=K9($.accessList);if($.authorizationList)Q.authorizationList=$.authorizationList.slice();if("blockTag"in $)Q.blockTag=$.blockTag;if("enableCcipRead"in $)Q.enableCcipRead=!!$.enableCcipRead;if("customData"in $)Q.customData=$.customData;if("blobVersionedHashes"in $&&$.blobVersionedHashes)Q.blobVersionedHashes=$.blobVersionedHashes.slice();if("kzg"in $)Q.kzg=$.kzg;if("blobWrapperVersion"in $)Q.blobWrapperVersion=$.blobWrapperVersion;if("blobs"in $&&$.blobs)Q.blobs=$.blobs.map((Y)=>{if(q7(Y))return F0(Y);return Object.assign({},Y)});return Q}class F4{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor($,Q){this.provider=Q;let Z=Object.freeze($.topics.slice());r0(this,{transactionHash:$.transactionHash,blockHash:$.blockHash,blockNumber:$.blockNumber,removed:$.removed,address:$.address,data:$.data,topics:Z,index:$.index,transactionIndex:$.transactionIndex})}toJSON(){let{address:$,blockHash:Q,blockNumber:Z,data:X,index:Y,removed:z,topics:J,transactionHash:q,transactionIndex:W}=this;return{_type:"log",address:$,blockHash:Q,blockNumber:Z,data:X,index:Y,removed:z,topics:J,transactionHash:q,transactionIndex:W}}async getBlock(){let $=await this.provider.getBlock(this.blockHash);return P0(!!$,"failed to find transaction","UNKNOWN_ERROR",{}),$}async getTransaction(){let $=await this.provider.getTransaction(this.transactionHash);return P0(!!$,"failed to find transaction","UNKNOWN_ERROR",{}),$}async getTransactionReceipt(){let $=await this.provider.getTransactionReceipt(this.transactionHash);return P0(!!$,"failed to find transaction receipt","UNKNOWN_ERROR",{}),$}removedEvent(){return hq0(this)}}class M3{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#$;constructor($,Q){this.provider=Q,this.blockNumber=$.blockNumber!=null?$.blockNumber:null,this.blockHash=$.blockHash!=null?$.blockHash:null,this.hash=$.hash,this.index=$.index,this.type=$.type,this.from=$.from,this.to=$.to||null,this.gasLimit=$.gasLimit,this.nonce=$.nonce,this.data=$.data,this.value=$.value,this.gasPrice=$.gasPrice,this.maxPriorityFeePerGas=$.maxPriorityFeePerGas!=null?$.maxPriorityFeePerGas:null,this.maxFeePerGas=$.maxFeePerGas!=null?$.maxFeePerGas:null,this.maxFeePerBlobGas=$.maxFeePerBlobGas!=null?$.maxFeePerBlobGas:null,this.chainId=$.chainId,this.signature=$.signature,this.accessList=$.accessList!=null?$.accessList:null,this.blobVersionedHashes=$.blobVersionedHashes!=null?$.blobVersionedHashes:null,this.authorizationList=$.authorizationList!=null?$.authorizationList:null,this.#$=-1}toJSON(){let{blockNumber:$,blockHash:Q,index:Z,hash:X,type:Y,to:z,from:J,nonce:q,data:W,signature:G,accessList:U,blobVersionedHashes:D}=this;return{_type:"TransactionResponse",accessList:U,blockNumber:$,blockHash:Q,blobVersionedHashes:D,chainId:w8(this.chainId),data:W,from:J,gasLimit:w8(this.gasLimit),gasPrice:w8(this.gasPrice),hash:X,maxFeePerGas:w8(this.maxFeePerGas),maxPriorityFeePerGas:w8(this.maxPriorityFeePerGas),maxFeePerBlobGas:w8(this.maxFeePerBlobGas),nonce:q,signature:G,to:z,index:Z,type:Y,value:w8(this.value)}}async getBlock(){let $=this.blockNumber;if($==null){let Z=await this.getTransaction();if(Z)$=Z.blockNumber}if($==null)return null;let Q=this.provider.getBlock($);if(Q==null)throw Error("TODO");return Q}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){let{tx:Q,blockNumber:Z}=await T6({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});if(Q==null||Q.blockNumber==null)return 0;return Z-Q.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait($,Q){let Z=$==null?1:$,X=Q==null?0:Q,Y=this.#$,z=-1,J=Y===-1?!0:!1,q=async()=>{if(J)return null;let{blockNumber:D,nonce:P}=await T6({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(P<this.nonce){Y=D;return}if(J)return null;let H=await this.getTransaction();if(H&&H.blockNumber!=null)return;if(z===-1){if(z=Y-3,z<this.#$)z=this.#$}while(z<=D){if(J)return null;let N=await this.provider.getBlock(z,!0);if(N==null)return;for(let C of N)if(C===this.hash)return;for(let C=0;C<N.length;C++){let L=await N.getTransaction(C);if(L.from===this.from&&L.nonce===this.nonce){if(J)return null;let B=await this.provider.getTransactionReceipt(L.hash);if(B==null)return;if(D-B.blockNumber+1<Z)return;let E="replaced";if(L.data===this.data&&L.to===this.to&&L.value===this.value)E="repriced";else if(L.data==="0x"&&L.from===L.to&&L.value===pu)E="cancelled";P0(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:E==="replaced"||E==="cancelled",reason:E,replacement:L.replaceableTransaction(Y),hash:L.hash,receipt:B})}}z++}return},W=(D)=>{if(D==null||D.status!==0)return D;P0(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:D.to,from:D.from,data:""},receipt:D})},G=await this.provider.getTransactionReceipt(this.hash);if(Z===0)return W(G);if(G){if(Z===1||await G.confirmations()>=Z)return W(G)}else if(await q(),Z===0)return null;return await new Promise((D,P)=>{let H=[],N=()=>{H.forEach((L)=>L())};if(H.push(()=>{J=!0}),X>0){let L=setTimeout(()=>{N(),P(H5("wait for transaction timeout","TIMEOUT"))},X);H.push(()=>{clearTimeout(L)})}let C=async(L)=>{if(await L.confirmations()>=Z){N();try{D(W(L))}catch(B){P(B)}}};if(H.push(()=>{this.provider.off(this.hash,C)}),this.provider.on(this.hash,C),Y>=0){let L=async()=>{try{await q()}catch(B){if(o5(B,"TRANSACTION_REPLACED")){N(),P(B);return}}if(!J)this.provider.once("block",L)};H.push(()=>{this.provider.off("block",L)}),this.provider.once("block",L)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return P0(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),cu(this)}reorderedEvent($){return P0(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),P0(!$||$.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),uu(this,$)}replaceableTransaction($){r(Number.isInteger($)&&$>=0,"invalid startBlock","startBlock",$);let Q=new M3(this,this.provider);return Q.#$=$,Q}}function gq0($){return{orphan:"drop-block",hash:$.hash,number:$.number}}function uu($,Q){return{orphan:"reorder-transaction",tx:$,other:Q}}function cu($){return{orphan:"drop-transaction",tx:$}}function hq0($){return{orphan:"drop-log",log:{transactionHash:$.transactionHash,blockHash:$.blockHash,blockNumber:$.blockNumber,address:$.address,data:$.data,topics:Object.freeze($.topics.slice()),index:$.index}}}var pu,qz,BQ;var qK=p(()=>{J1();M2();pu=BigInt(0);qz=class qz{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#$;constructor($,Q){this.#$=$.transactions.map((Z)=>{if(typeof Z!=="string")return new M3(Z,Q);return Z}),r0(this,{provider:Q,hash:zK($.hash),number:$.number,timestamp:$.timestamp,parentHash:$.parentHash,parentBeaconBlockRoot:$.parentBeaconBlockRoot,nonce:$.nonce,difficulty:$.difficulty,gasLimit:$.gasLimit,gasUsed:$.gasUsed,blobGasUsed:$.blobGasUsed,excessBlobGas:$.excessBlobGas,miner:$.miner,prevRandao:zK($.prevRandao),extraData:$.extraData,baseFeePerGas:zK($.baseFeePerGas),stateRoot:$.stateRoot,receiptsRoot:$.receiptsRoot})}get transactions(){return this.#$.map(($)=>{if(typeof $==="string")return $;return $.hash})}get prefetchedTransactions(){let $=this.#$.slice();if($.length===0)return[];return P0(typeof $[0]==="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),$}toJSON(){let{baseFeePerGas:$,difficulty:Q,extraData:Z,gasLimit:X,gasUsed:Y,hash:z,miner:J,prevRandao:q,nonce:W,number:G,parentHash:U,parentBeaconBlockRoot:D,stateRoot:P,receiptsRoot:H,timestamp:N,transactions:C}=this;return{_type:"Block",baseFeePerGas:w8($),difficulty:w8(Q),extraData:Z,gasLimit:w8(X),gasUsed:w8(Y),blobGasUsed:w8(this.blobGasUsed),excessBlobGas:w8(this.excessBlobGas),hash:z,miner:J,prevRandao:q,nonce:W,number:G,parentHash:U,timestamp:N,parentBeaconBlockRoot:D,stateRoot:P,receiptsRoot:H,transactions:C}}[Symbol.iterator](){let $=0,Q=this.transactions;return{next:()=>{if($<this.length)return{value:Q[$++],done:!1};return{value:void 0,done:!0}}}}get length(){return this.#$.length}get date(){if(this.timestamp==null)return null;return new Date(this.timestamp*1000)}async getTransaction($){let Q=void 0;if(typeof $==="number")Q=this.#$[$];else{let Z=$.toLowerCase();for(let X of this.#$)if(typeof X==="string"){if(X!==Z)continue;Q=X;break}else{if(X.hash!==Z)continue;Q=X;break}}if(Q==null)throw Error("no such tx");if(typeof Q==="string")return await this.provider.getTransaction(Q);else return Q}getPrefetchedTransaction($){let Q=this.prefetchedTransactions;if(typeof $==="number")return Q[$];$=$.toLowerCase();for(let Z of Q)if(Z.hash===$)return Z;r(!1,"no matching transaction","indexOrHash",$)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw Error("");return gq0(this)}};BQ=class BQ{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#$;constructor($,Q){this.#$=Object.freeze($.logs.map((X)=>{return new F4(X,Q)}));let Z=pu;if($.effectiveGasPrice!=null)Z=$.effectiveGasPrice;else if($.gasPrice!=null)Z=$.gasPrice;r0(this,{provider:Q,to:$.to,from:$.from,contractAddress:$.contractAddress,hash:$.hash,index:$.index,blockHash:$.blockHash,blockNumber:$.blockNumber,logsBloom:$.logsBloom,gasUsed:$.gasUsed,cumulativeGasUsed:$.cumulativeGasUsed,blobGasUsed:$.blobGasUsed,gasPrice:Z,blobGasPrice:$.blobGasPrice,type:$.type,status:$.status,root:$.root})}get logs(){return this.#$}toJSON(){let{to:$,from:Q,contractAddress:Z,hash:X,index:Y,blockHash:z,blockNumber:J,logsBloom:q,logs:W,status:G,root:U}=this;return{_type:"TransactionReceipt",blockHash:z,blockNumber:J,contractAddress:Z,cumulativeGasUsed:w8(this.cumulativeGasUsed),from:Q,gasPrice:w8(this.gasPrice),blobGasUsed:w8(this.blobGasUsed),blobGasPrice:w8(this.blobGasPrice),gasUsed:w8(this.gasUsed),hash:X,index:Y,logs:W,logsBloom:q,root:U,status:G,to:$}}get length(){return this.logs.length}[Symbol.iterator](){let $=0;return{next:()=>{if($<this.length)return{value:this.logs[$++],done:!1};return{value:void 0,done:!0}}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){let $=await this.provider.getBlock(this.blockHash);if($==null)throw Error("TODO");return $}async getTransaction(){let $=await this.provider.getTransaction(this.hash);if($==null)throw Error("TODO");return $}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return cu(this)}reorderedEvent($){return P0(!$||$.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),uu(this,$)}}});var EQ,yX,WK,IQ,gX,Wz;var Vw=p(()=>{qK();J1();EQ=class EQ extends F4{interface;fragment;args;constructor($,Q,Z){super($,$.provider);let X=Q.decodeEventLog(Z,$.data,$.topics);r0(this,{args:X,fragment:Z,interface:Q})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}};yX=class yX extends F4{error;constructor($,Q){super($,$.provider);r0(this,{error:Q})}};WK=class WK extends BQ{#$;constructor($,Q,Z){super(Z,Q);this.#$=$}get logs(){return super.logs.map(($)=>{let Q=$.topics.length?this.#$.getEvent($.topics[0]):null;if(Q)try{return new EQ($,this.#$,Q)}catch(Z){return new yX($,Z)}return $})}};IQ=class IQ extends M3{#$;constructor($,Q,Z){super(Z,Q);this.#$=$}async wait($,Q){let Z=await super.wait($,Q);if(Z==null)return null;return new WK(this.#$,this.provider,Z)}};gX=class gX extends HQ{log;constructor($,Q,Z,X){super($,Q,Z);r0(this,{log:X})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}};Wz=class Wz extends gX{constructor($,Q,Z,X,Y){super($,Q,Z,new EQ(Y,$.interface,X));let z=$.interface.decodeEventLog(X,this.log.data,this.log.topics);r0(this,{args:z,fragment:X})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}});function iu($){return $&&typeof $.call==="function"}function ou($){return $&&typeof $.estimateGas==="function"}function mH($){return $&&typeof $.resolveName==="function"}function nu($){return $&&typeof $.sendTransaction==="function"}function ru($){if($!=null){if(mH($))return $;if($.provider)return $.provider}return}class au{#$;fragment;constructor($,Q,Z){if(r0(this,{fragment:Q}),Q.inputs.length<Z.length)throw Error("too many arguments");let X=Gz($.runner,"resolveName"),Y=mH(X)?X:null;this.#$=async function(){let z=await Promise.all(Q.inputs.map((J,q)=>{if(Z[q]==null)return null;return J.walkAsync(Z[q],(G,U)=>{if(G==="address"){if(Array.isArray(U))return Promise.all(U.map((D)=>k6(D,Y)));return k6(U,Y)}return U})}));return $.interface.encodeFilterTopics(Q,z)}()}getTopicFilter(){return this.#$}}function Gz($,Q){if($==null)return null;if(typeof $[Q]==="function")return $;if($.provider&&typeof $.provider[Q]==="function")return $.provider;return null}function Kz($){if($==null)return null;return $.provider||null}async function pH($,Q){let Z=C5.dereference($,"overrides");r(typeof Z==="object","invalid overrides parameter","overrides",$);let X=T4(Z);if(r(X.to==null||(Q||[]).indexOf("to")>=0,"cannot override to","overrides.to",X.to),r(X.data==null||(Q||[]).indexOf("data")>=0,"cannot override data","overrides.data",X.data),X.from)X.from=X.from;return X}async function Mw($,Q,Z){let X=Gz($,"resolveName"),Y=mH(X)?X:null;return await Promise.all(Q.map((z,J)=>{return z.walkAsync(Z[J],(q,W)=>{if(W=C5.dereference(W,q),q==="address")return k6(W,Y);return W})}))}function mq0($){let Q=async function(J){let q=await pH(J,["data"]);if(q.to=await $.getAddress(),q.from)q.from=await k6(q.from,ru($.runner));let W=$.interface,G=e0(q.value||du,"overrides.value")===du,U=(q.data||"0x")==="0x";if(W.fallback&&!W.fallback.payable&&W.receive&&!U&&!G)r(!1,"cannot send data to receive or send value to non-payable fallback","overrides",J);r(W.fallback||U,"cannot send data to receive-only contract","overrides.data",q.data);let D=W.receive||W.fallback&&W.fallback.payable;return r(D||G,"cannot send value to non-payable fallback","overrides.value",q.value),r(W.fallback||U,"cannot send data to receive-only contract","overrides.data",q.data),q},Z=async function(J){let q=Gz($.runner,"call");P0(iu(q),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let W=await Q(J);try{return await q.call(W)}catch(G){if(PQ(G)&&G.data)throw $.interface.makeError(G.data,W);throw G}},X=async function(J){let q=$.runner;P0(nu(q),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let W=await q.sendTransaction(await Q(J)),G=Kz($.runner);return new IQ($.interface,G,W)},Y=async function(J){let q=Gz($.runner,"estimateGas");return P0(ou(q),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await q.estimateGas(await Q(J))},z=async(J)=>{return await X(J)};return r0(z,{_contract:$,estimateGas:Y,populateTransaction:Q,send:X,staticCall:Z}),z}function pq0($,Q){let Z=function(...G){let U=$.interface.getFunction(Q,G);return P0(U,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:Q,args:G}}),U},X=async function(...G){let U=Z(...G),D={};if(U.inputs.length+1===G.length){if(D=await pH(G.pop()),D.from)D.from=await k6(D.from,ru($.runner))}if(U.inputs.length!==G.length)throw Error("internal error: fragment inputs doesn't match arguments; should not happen");let P=await Mw($.runner,U.inputs,G);return Object.assign({},D,await T6({to:$.getAddress(),data:$.interface.encodeFunctionData(U,P)}))},Y=async function(...G){let U=await q(...G);if(U.length===1)return U[0];return U},z=async function(...G){let U=$.runner;P0(nu(U),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let D=await U.sendTransaction(await X(...G)),P=Kz($.runner);return new IQ($.interface,P,D)},J=async function(...G){let U=Gz($.runner,"estimateGas");return P0(ou(U),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await U.estimateGas(await X(...G))},q=async function(...G){let U=Gz($.runner,"call");P0(iu(U),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let D=await X(...G),P="0x";try{P=await U.call(D)}catch(N){if(PQ(N)&&N.data)throw $.interface.makeError(N.data,D);throw N}let H=Z(...G);return $.interface.decodeFunctionResult(H,P)},W=async(...G)=>{if(Z(...G).constant)return await Y(...G);return await z(...G)};return r0(W,{name:$.interface.getFunctionName(Q),_contract:$,_key:Q,getFragment:Z,estimateGas:J,populateTransaction:X,send:z,staticCall:Y,staticCallResult:q}),Object.defineProperty(W,"fragment",{configurable:!1,enumerable:!0,get:()=>{let G=$.interface.getFunction(Q);return P0(G,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:Q}}),G}}),W}function uq0($,Q){let Z=function(...Y){let z=$.interface.getEvent(Q,Y);return P0(z,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:Q,args:Y}}),z},X=function(...Y){return new au($,Z(...Y),Y)};return r0(X,{name:$.interface.getEventName(Q),_contract:$,_key:Q,getFragment:Z}),Object.defineProperty(X,"fragment",{configurable:!1,enumerable:!0,get:()=>{let Y=$.interface.getEvent(Q);return P0(Y,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:Q}}),Y}}),X}function cq0($,Q){su.set($[hH],Q)}function A4($){return su.get($[hH])}function dq0($){return $&&typeof $==="object"&&"getTopicFilter"in $&&typeof $.getTopicFilter==="function"&&$.fragment}async function Pw($,Q){let Z,X=null;if(Array.isArray(Q)){let z=function(J){if(J5(J,32))return J;let q=$.interface.getEvent(J);return r(q,"unknown fragment","name",J),q.topicHash};Z=Q.map((J)=>{if(J==null)return null;if(Array.isArray(J))return J.map(z);return z(J)})}else if(Q==="*")Z=[null];else if(typeof Q==="string")if(J5(Q,32))Z=[Q];else X=$.interface.getEvent(Q),r(X,"unknown fragment","event",Q),Z=[X.topicHash];else if(dq0(Q))Z=await Q.getTopicFilter();else if("fragment"in Q)X=Q.fragment,Z=[X.topicHash];else r(!1,"unknown event name","event",Q);Z=Z.map((z)=>{if(z==null)return null;if(Array.isArray(z)){let J=Array.from(new Set(z.map((q)=>q.toLowerCase())).values());if(J.length===1)return J[0];return J.sort(),J}return z.toLowerCase()});let Y=Z.map((z)=>{if(z==null)return"null";if(Array.isArray(z))return z.join("|");return z}).join("&");return{fragment:X,tag:Y,topics:Z}}async function wV($,Q){let{subs:Z}=A4($);return Z.get((await Pw($,Q)).tag)||null}async function lu($,Q,Z){let X=Kz($.runner);P0(X,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:Q});let{fragment:Y,tag:z,topics:J}=await Pw($,Z),{addr:q,subs:W}=A4($),G=W.get(z);if(!G){let D={address:q?q:$,topics:J},P=(L)=>{let B=Y;if(B==null)try{B=$.interface.getEvent(L.topics[0])}catch(E){}if(B){let E=B,I=Y?$.interface.decodeEventLog(Y,L.data,L.topics):[];Dw($,Z,I,(_)=>{return new Wz($,_,Z,E,L)})}else Dw($,Z,[],(E)=>{return new gX($,E,Z,L)})},H=[];G={tag:z,listeners:[],start:()=>{if(H.length)return;H.push(X.on(D,P))},stop:async()=>{if(H.length==0)return;let L=H;H=[],await Promise.all(L),X.off(D,P)}},W.set(z,G)}return G}async function lq0($,Q,Z,X){await Ow;let Y=await wV($,Q);if(!Y)return!1;let z=Y.listeners.length;if(Y.listeners=Y.listeners.filter(({listener:J,once:q})=>{let W=Array.from(Z);if(X)W.push(X(q?null:J));try{J.call($,...W)}catch(G){}return!q}),Y.listeners.length===0)Y.stop(),A4($).subs.delete(Y.tag);return z>0}async function Dw($,Q,Z,X){try{await Ow}catch(z){}let Y=lq0($,Q,Z,X);return Ow=Y,await Y}function iq0(){return C7}var du,hH,su,Ow,gH,C7,Z4;var Hw=p(()=>{JK();F8();qK();J1();Vw();du=BigInt(0);hH=Symbol.for("_ethersInternal_contract"),su=new WeakMap;Ow=Promise.resolve();gH=["then"];C7=class C7{target;interface;runner;filters;[hH];fallback;constructor($,Q,Z,X){if(r(typeof $==="string"||eJ($),"invalid value for Contract target","target",$),Z==null)Z=null;let Y=Q4.from(Q);r0(this,{target:$,runner:Z,interface:Y}),Object.defineProperty(this,hH,{value:{}});let z,J=null,q=null;if(X){let U=Kz(Z);q=new IQ(this.interface,U,X)}let W=new Map;if(typeof $==="string")if(J5($))J=$,z=Promise.resolve($);else{let U=Gz(Z,"resolveName");if(!mH(U))throw H5("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});z=U.resolveName($).then((D)=>{if(D==null)throw H5("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:$});return A4(this).addr=D,D})}else z=$.getAddress().then((U)=>{if(U==null)throw Error("TODO");return A4(this).addr=U,U});cq0(this,{addrPromise:z,addr:J,deployTx:q,subs:W});let G=new Proxy({},{get:(U,D,P)=>{if(typeof D==="symbol"||gH.indexOf(D)>=0)return Reflect.get(U,D,P);try{return this.getEvent(D)}catch(H){if(!o5(H,"INVALID_ARGUMENT")||H.argument!=="key")throw H}return},has:(U,D)=>{if(gH.indexOf(D)>=0)return Reflect.has(U,D);return Reflect.has(U,D)||this.interface.hasEvent(String(D))}});return r0(this,{filters:G}),r0(this,{fallback:Y.receive||Y.fallback?mq0(this):null}),new Proxy(this,{get:(U,D,P)=>{if(typeof D==="symbol"||D in U||gH.indexOf(D)>=0)return Reflect.get(U,D,P);try{return U.getFunction(D)}catch(H){if(!o5(H,"INVALID_ARGUMENT")||H.argument!=="key")throw H}return},has:(U,D)=>{if(typeof D==="symbol"||D in U||gH.indexOf(D)>=0)return Reflect.has(U,D);return U.interface.hasFunction(D)}})}connect($){return new C7(this.target,this.interface,$)}attach($){return new C7($,this.interface,this.runner)}async getAddress(){return await A4(this).addrPromise}async getDeployedCode(){let $=Kz(this.runner);P0($,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});let Q=await $.getCode(await this.getAddress());if(Q==="0x")return null;return Q}async waitForDeployment(){let $=this.deploymentTransaction();if($)return await $.wait(),this;if(await this.getDeployedCode()!=null)return this;let Z=Kz(this.runner);return P0(Z!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((X,Y)=>{let z=async()=>{try{if(await this.getDeployedCode()!=null)return X(this);Z.once("block",z)}catch(J){Y(J)}};z()})}deploymentTransaction(){return A4(this).deployTx}getFunction($){if(typeof $!=="string")$=$.format();return pq0(this,$)}getEvent($){if(typeof $!=="string")$=$.format();return uq0(this,$)}async queryTransaction($){throw Error("@TODO")}async queryFilter($,Q,Z){if(Q==null)Q=0;if(Z==null)Z="latest";let{addr:X,addrPromise:Y}=A4(this),z=X?X:await Y,{fragment:J,topics:q}=await Pw(this,$),W={address:z,topics:q,fromBlock:Q,toBlock:Z},G=Kz(this.runner);return P0(G,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await G.getLogs(W)).map((U)=>{let D=J;if(D==null)try{D=this.interface.getEvent(U.topics[0])}catch(P){}if(D)try{return new EQ(U,this.interface,D)}catch(P){return new yX(U,P)}return new F4(U,G)})}async on($,Q){let Z=await lu(this,"on",$);return Z.listeners.push({listener:Q,once:!1}),Z.start(),this}async once($,Q){let Z=await lu(this,"once",$);return Z.listeners.push({listener:Q,once:!0}),Z.start(),this}async emit($,...Q){return await Dw(this,$,Q,null)}async listenerCount($){if($){let X=await wV(this,$);if(!X)return 0;return X.listeners.length}let{subs:Q}=A4(this),Z=0;for(let{listeners:X}of Q.values())Z+=X.length;return Z}async listeners($){if($){let X=await wV(this,$);if(!X)return[];return X.listeners.map(({listener:Y})=>Y)}let{subs:Q}=A4(this),Z=[];for(let{listeners:X}of Q.values())Z=Z.concat(X.map(({listener:Y})=>Y));return Z}async off($,Q){let Z=await wV(this,$);if(!Z)return this;if(Q){let X=Z.listeners.map(({listener:Y})=>Y).indexOf(Q);if(X>=0)Z.listeners.splice(X,1)}if(Q==null||Z.listeners.length===0)Z.stop(),A4(this).subs.delete(Z.tag);return this}async removeAllListeners($){if($){let Q=await wV(this,$);if(!Q)return this;Q.stop(),A4(this).subs.delete(Q.tag)}else{let{subs:Q}=A4(this);for(let{tag:Z,stop:X}of Q.values())X(),Q.delete(Z)}return this}async addListener($,Q){return await this.on($,Q)}async removeListener($,Q){return await this.off($,Q)}static buildClass($){class Q extends C7{constructor(Z,X=null){super(Z,$,X)}}return Q}static from($,Q,Z){if(Z==null)Z=null;return new this($,Q,Z)}};Z4=class Z4 extends iq0(){}});class KK{interface;bytecode;runner;constructor($,Q,Z){let X=Q4.from($);if(Q instanceof Uint8Array)Q=F0(x0(Q));else{if(typeof Q==="object")Q=Q.object;if(!Q.startsWith("0x"))Q="0x"+Q;Q=F0(x0(Q))}r0(this,{bytecode:Q,interface:X,runner:Z||null})}attach($){return new C7($,this.interface,this.runner)}async getDeployTransaction(...$){let Q={},Z=this.interface.deploy;if(Z.inputs.length+1===$.length)Q=await pH($.pop());if(Z.inputs.length!==$.length)throw Error("incorrect number of arguments to constructor");let X=await Mw(this.runner,Z.inputs,$),Y=S1([this.bytecode,this.interface.encodeDeploy(X)]);return Object.assign({},Q,{data:Y})}async deploy(...$){let Q=await this.getDeployTransaction(...$);P0(this.runner&&typeof this.runner.sendTransaction==="function","factory runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let Z=await this.runner.sendTransaction(Q),X=kX(Z);return new C7(X,this.interface,this.runner,Z)}connect($){return new KK(this.interface,this.bytecode,$)}static fromSolidity($,Q){if(r($!=null,"bad compiler output","output",$),typeof $==="string")$=JSON.parse($);let Z=$.abi,X="";if($.bytecode)X=$.bytecode;else if($.evm&&$.evm.bytecode)X=$.evm.bytecode;return new this(Z,X,Q)}}var tu=p(()=>{JK();F8();J1();Hw()});var BV=p(()=>{Hw();tu();Vw()});function jw($){if($.match(/^ipfs:\/\/ipfs\//i))$=$.substring(12);else if($.match(/^ipfs:\/\//i))$=$.substring(7);else r(!1,"unsupported IPFS format","link",$);return`https://gateway.ipfs.io/ipfs/${$}`}class GK{name;constructor($){r0(this,{name:$})}connect($){return this}supportsCoinType($){return!1}async encodeAddress($,Q){throw Error("unsupported coin")}async decodeAddress($,Q){throw Error("unsupported coin")}}class P3{provider;address;name;#$;#Q;constructor($,Q,Z){r0(this,{provider:$,address:Q,name:Z}),this.#$=null,this.#Q=new Z4(Q,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],$)}async supportsWildcard(){if(this.#$==null)this.#$=(async()=>{try{return await this.#Q.supportsInterface("0x9061b923")}catch($){if(o5($,"CALL_EXCEPTION"))return!1;throw this.#$=null,$}})();return await this.#$}async#Z($,Q){Q=(Q||[]).slice();let Z=this.#Q.interface;Q.unshift(TQ(this.name));let X=null;if(await this.supportsWildcard())X=Z.getFunction($),P0(X,"missing fragment","UNKNOWN_ERROR",{info:{funcName:$}}),Q=[$K(this.name,255),Z.encodeFunctionData(X,Q)],$="resolve(bytes,bytes)";Q.push({enableCcipRead:!0});try{let Y=await this.#Q[$](...Q);if(X)return Z.decodeFunctionResult(X,Y)[0];return Y}catch(Y){if(!o5(Y,"CALL_EXCEPTION"))throw Y}return null}async getAddress($){if($==null)$=60;if($===60)try{let Y=await this.#Z("addr(bytes32)");if(Y==null||Y===P7)return null;return Y}catch(Y){if(o5(Y,"CALL_EXCEPTION"))return null;throw Y}if($>=0&&$<2147483648){let Y=$+2147483648,z=await this.#Z("addr(bytes32,uint)",[Y]);if(J5(z,20))return R1(z)}let Q=null;for(let Y of this.provider.plugins){if(!(Y instanceof GK))continue;if(Y.supportsCoinType($)){Q=Y;break}}if(Q==null)return null;let Z=await this.#Z("addr(bytes32,uint)",[$]);if(Z==null||Z==="0x")return null;let X=await Q.decodeAddress($,Z);if(X!=null)return X;P0(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${$})`,info:{coinType:$,data:Z}})}async getText($){let Q=await this.#Z("text(bytes32,string)",[$]);if(Q==null||Q==="0x")return null;return Q}async getContentHash(){let $=await this.#Z("contenthash(bytes32)");if($==null||$==="0x")return null;let Q=$.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(Q){let X=Q[1]==="e3010170"?"ipfs":"ipns",Y=parseInt(Q[4],16);if(Q[5].length===Y*2)return`${X}://${TX("0x"+Q[2])}`}let Z=$.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(Z&&Z[1].length===64)return`bzz://${Z[1]}`;P0(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:$}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){let $=[{type:"name",value:this.name}];try{let Q=await this.getText("avatar");if(Q==null)return $.push({type:"!avatar",value:""}),{url:null,linkage:$};$.push({type:"avatar",value:Q});for(let Z=0;Z<eu.length;Z++){let X=Q.match(eu[Z]);if(X==null)continue;let Y=X[1].toLowerCase();switch(Y){case"https":case"data":return $.push({type:"url",value:Q}),{linkage:$,url:Q};case"ipfs":{let z=jw(Q);return $.push({type:"ipfs",value:Q}),$.push({type:"url",value:z}),{linkage:$,url:z}}case"erc721":case"erc1155":{let z=Y==="erc721"?"tokenURI(uint256)":"uri(uint256)";$.push({type:Y,value:Q});let J=await this.getAddress();if(J==null)return $.push({type:"!owner",value:""}),{url:null,linkage:$};let q=(X[2]||"").split("/");if(q.length!==2)return $.push({type:`!${Y}caip`,value:X[2]||""}),{url:null,linkage:$};let W=q[1],G=new Z4(q[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(Y==="erc721"){let N=await G.ownerOf(W);if(J!==N)return $.push({type:"!owner",value:N}),{url:null,linkage:$};$.push({type:"owner",value:N})}else if(Y==="erc1155"){let N=await G.balanceOf(J,W);if(!N)return $.push({type:"!balance",value:"0"}),{url:null,linkage:$};$.push({type:"balance",value:N.toString()})}let U=await G[z](W);if(U==null||U==="0x")return $.push({type:"!metadata-url",value:""}),{url:null,linkage:$};if($.push({type:"metadata-url-base",value:U}),Y==="erc1155")U=U.replace("{id}",n8(W,32).substring(2)),$.push({type:"metadata-url-expanded",value:U});if(U.match(/^ipfs:/i))U=jw(U);$.push({type:"metadata-url",value:U});let D={},P=await new n5(U).send();P.assertOk();try{D=P.bodyJson}catch(N){try{$.push({type:"!metadata",value:P.bodyText})}catch(C){let L=P.body;if(L)$.push({type:"!metadata",value:F0(L)});return{url:null,linkage:$}}return{url:null,linkage:$}}if(!D)return $.push({type:"!metadata",value:""}),{url:null,linkage:$};$.push({type:"metadata",value:JSON.stringify(D)});let H=D.image;if(typeof H!=="string")return $.push({type:"!imageUrl",value:""}),{url:null,linkage:$};if(H.match(/^(https:\/\/|data:)/i));else{if(H.match($c)==null)return $.push({type:"!imageUrl-ipfs",value:H}),{url:null,linkage:$};$.push({type:"imageUrl-ipfs",value:H}),H=jw(H)}return $.push({type:"url",value:H}),{linkage:$,url:H}}}}}catch(Q){}return{linkage:$,url:null}}static async getEnsAddress($){let Q=await $.getNetwork(),Z=Q.getPlugin("org.ethers.plugins.network.Ens");return P0(Z,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:Q}}),Z.address}static async#X($,Q){let Z=await P3.getEnsAddress($);try{let Y=await new Z4(Z,["function resolver(bytes32) view returns (address)"],$).resolver(TQ(Q),{enableCcipRead:!0});if(Y===P7)return null;return Y}catch(X){throw X}return null}static async fromName($,Q){let Z=Q;while(!0){if(Z===""||Z===".")return null;if(Q!=="eth"&&Z==="eth")return null;let X=await P3.#X($,Z);if(X!=null){let Y=new P3($,X,Q);if(Z!==Q&&!await Y.supportsWildcard())return null;return Y}Z=Z.split(".").slice(1).join(".")}}}var $c,eu;var Rw=p(()=>{F8();oW();BV();K$();J1();$c=new RegExp("^(ipfs)://(.*)$","i"),eu=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),$c,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")]});function b5($,Q){return function(Z){if(Z==null)return Q;return $(Z)}}function EV($,Q){return(Z)=>{if(Q&&Z==null)return null;if(!Array.isArray(Z))throw Error("not an array");return Z.map((X)=>$(X))}}function IV($,Q){return(Z)=>{let X={};for(let Y in $){let z=Y;if(Q&&Y in Q&&!(z in Z)){for(let J of Q[Y])if(J in Z){z=J;break}}try{let J=$[Y](Z[z]);if(J!==void 0)X[Y]=J}catch(J){let q=J instanceof Error?J.message:"not-an-error";P0(!1,`invalid value for value.${Y} (${q})`,"BAD_DATA",{value:Z})}}return X}}function oq0($){switch($){case!0:case"true":return!0;case!1:case"false":return!1}r(!1,`invalid boolean; ${JSON.stringify($)}`,"value",$)}function UK($){return r(J5($,!0),"invalid data","value",$),$}function w9($){return r(J5($,32),"invalid hash","value",$),$}function Zc($){return nq0($)}function Xc($){let Q=rq0($);return Q.transactions=$.transactions.map((Z)=>{if(typeof Z==="string")return Z;return Nw(Z)}),Q}function sq0($){return aq0($)}function Yc($){return tq0($)}function Nw($){if($.to&&e0($.to)===Qc)$.to="0x0000000000000000000000000000000000000000";let Q=IV({hash:w9,index:b5(G1,void 0),type:(Z)=>{if(Z==="0x"||Z==null)return 0;return G1(Z)},accessList:b5(K9,null),blobVersionedHashes:b5(EV(w9,!0),null),authorizationList:b5(EV((Z)=>{let X;if(Z.signature)X=Z.signature;else{let Y=Z.yParity;if(Y==="0x1b")Y=0;else if(Y==="0x1c")Y=1;X=Object.assign({},Z,{yParity:Y})}return{address:R1(Z.address),chainId:e0(Z.chainId),nonce:e0(Z.nonce),signature:q6.from(X)}},!1),null),blockHash:b5(w9,null),blockNumber:b5(G1,null),transactionIndex:b5(G1,null),from:R1,gasPrice:b5(e0),maxPriorityFeePerGas:b5(e0),maxFeePerGas:b5(e0),maxFeePerBlobGas:b5(e0,null),gasLimit:e0,to:b5(R1,null),value:e0,nonce:G1,data:UK,creates:b5(R1,null),chainId:b5(e0,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})($);if(Q.to==null&&Q.creates==null)Q.creates=kX(Q);if(($.type===1||$.type===2)&&$.accessList==null)Q.accessList=[];if($.signature)Q.signature=q6.from($.signature);else Q.signature=q6.from($);if(Q.chainId==null){let Z=Q.signature.legacyChainId;if(Z!=null)Q.chainId=Z}if(Q.blockHash&&e0(Q.blockHash)===Qc)Q.blockHash=null;return Q}var Qc,nq0,rq0,aq0,tq0;var Jc=p(()=>{F8();g8();M2();J1();Qc=BigInt(0);nq0=IV({address:R1,blockHash:w9,blockNumber:G1,data:UK,index:G1,removed:b5(oq0,!1),topics:EV(w9),transactionHash:w9,transactionIndex:G1},{index:["logIndex"]});rq0=IV({hash:b5(w9),parentHash:w9,parentBeaconBlockRoot:b5(w9,null),number:G1,timestamp:G1,nonce:b5(UK),difficulty:e0,gasLimit:e0,gasUsed:e0,stateRoot:b5(w9,null),receiptsRoot:b5(w9,null),blobGasUsed:b5(e0,null),excessBlobGas:b5(e0,null),miner:b5(R1),prevRandao:b5(w9,null),extraData:UK,baseFeePerGas:b5(e0)},{prevRandao:["mixHash"]});aq0=IV({transactionIndex:G1,blockNumber:G1,transactionHash:w9,address:R1,topics:EV(w9),data:UK,index:G1,blockHash:w9},{index:["logIndex"]});tq0=IV({to:b5(R1,null),from:b5(R1,null),contractAddress:b5(R1,null),index:G1,root:b5(F0),gasUsed:e0,blobGasUsed:b5(e0,null),logsBloom:b5(UK),blockHash:w9,hash:w9,logs:EV(sq0),blockNumber:G1,cumulativeGasUsed:e0,effectiveGasPrice:b5(e0),blobGasPrice:b5(e0,null),status:b5(G1),type:b5(G1,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]})});class L7{name;constructor($){r0(this,{name:$})}clone(){return new L7(this.name)}}var eq0="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",_Q,SQ,VK,Uz;var uH=p(()=>{J1();_Q=class _Q extends L7{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor($,Q){if($==null)$=0;super(`org.ethers.network.plugins.GasCost#${$||0}`);let Z={effectiveBlock:$};function X(Y,z){let J=(Q||{})[Y];if(J==null)J=z;r(typeof J==="number",`invalud value for ${Y}`,"costs",Q),Z[Y]=J}X("txBase",21000),X("txCreate",32000),X("txDataZero",4),X("txDataNonzero",16),X("txAccessListStorageKey",1900),X("txAccessListAddress",2400),r0(this,Z)}clone(){return new _Q(this.effectiveBlock,this)}};SQ=class SQ extends L7{address;targetNetwork;constructor($,Q){super("org.ethers.plugins.network.Ens");r0(this,{address:$||eq0,targetNetwork:Q==null?1:Q})}clone(){return new SQ(this.address,this.targetNetwork)}};VK=class VK extends L7{#$;get feeDataFunc(){return this.#$}constructor($){super("org.ethers.plugins.network.FeeData");this.#$=$}async getFeeData($){return await this.#$($)}clone(){return new VK(this.#$)}};Uz=class Uz extends L7{#$;#Q;get url(){return this.#$}get processFunc(){return this.#Q}constructor($,Q){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");this.#$=$,this.#Q=Q}clone(){return this}}});class W5{#$;#Q;#Z;constructor($,Q){this.#$=$,this.#Q=e0(Q),this.#Z=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#$}set name($){this.#$=$}get chainId(){return this.#Q}set chainId($){this.#Q=e0($,"chainId")}matches($){if($==null)return!1;if(typeof $==="string"){try{return this.chainId===e0($)}catch(Q){}return this.name===$}if(typeof $==="number"||typeof $==="bigint"){try{return this.chainId===e0($)}catch(Q){}return!1}if(typeof $==="object"){if($.chainId!=null){try{return this.chainId===e0($.chainId)}catch(Q){}return!1}if($.name!=null)return this.name===$.name;return!1}return!1}get plugins(){return Array.from(this.#Z.values())}attachPlugin($){if(this.#Z.get($.name))throw Error(`cannot replace existing plugin: ${$.name} `);return this.#Z.set($.name,$.clone()),this}getPlugin($){return this.#Z.get($)||null}getPlugins($){return this.plugins.filter((Q)=>Q.name.split("#")[0]===$)}clone(){let $=new W5(this.name,this.chainId);return this.plugins.forEach((Q)=>{$.attachPlugin(Q.clone())}),$}computeIntrinsicGas($){let Q=this.getPlugin("org.ethers.plugins.network.GasCost")||new _Q,Z=Q.txBase;if($.to==null)Z+=Q.txCreate;if($.data)for(let X=2;X<$.data.length;X+=2)if($.data.substring(X,X+2)==="00")Z+=Q.txDataZero;else Z+=Q.txDataNonzero;if($.accessList){let X=K9($.accessList);for(let Y in X)Z+=Q.txAccessListAddress+Q.txAccessListStorageKey*X[Y].storageKeys.length}return Z}static from($){if($W0(),$==null)return W5.from("mainnet");if(typeof $==="number")$=BigInt($);if(typeof $==="string"||typeof $==="bigint"){let Q=Cw.get($);if(Q)return Q();if(typeof $==="bigint")return new W5("unknown",$);r(!1,"unknown network","network",$)}if(typeof $.clone==="function")return $.clone();if(typeof $==="object"){r(typeof $.name==="string"&&typeof $.chainId==="number","invalid network object name or chainId","network",$);let Q=new W5($.name,$.chainId);if($.ensAddress||$.ensNetwork!=null)Q.attachPlugin(new SQ($.ensAddress,$.ensNetwork));return Q}r(!1,"invalid network","network",$)}static register($,Q){if(typeof $==="number")$=BigInt($);let Z=Cw.get($);if(Z)r(!1,`conflicting network for ${JSON.stringify(Z.name)}`,"nameOrChainId",$);Cw.set($,Q)}}function zc($,Q){let Z=String($);if(!Z.match(/^[0-9.]+$/))throw Error(`invalid gwei value: ${$}`);let X=Z.split(".");if(X.length===1)X.push("");if(X.length!==2)throw Error(`invalid gwei value: ${$}`);while(X[1].length<Q)X[1]+="0";if(X[1].length>9){let Y=BigInt(X[1].substring(0,9));if(!X[1].substring(9).match(/^0+$/))Y++;X[1]=Y.toString()}return BigInt(X[0]+X[1])}function qc($){return new Uz($,async(Q,Z,X)=>{X.setHeader("User-Agent","ethers");let Y;try{let[z,J]=await Promise.all([X.send(),Q()]);Y=z;let q=Y.bodyJson.standard;return{gasPrice:J.gasPrice,maxFeePerGas:zc(q.maxFee,9),maxPriorityFeePerGas:zc(q.maxPriorityFee,9)}}catch(z){P0(!1,`error encountered with polygon gas station (${JSON.stringify(X.url)})`,"SERVER_ERROR",{request:X,response:Y,error:z})}})}function $W0(){if(Wc)return;Wc=!0;function $(Q,Z,X){let Y=function(){let z=new W5(Q,Z);if(X.ensNetwork!=null)z.attachPlugin(new SQ(null,X.ensNetwork));return z.attachPlugin(new _Q),(X.plugins||[]).forEach((J)=>{z.attachPlugin(J)}),z};if(W5.register(Q,Y),W5.register(Z,Y),X.altNames)X.altNames.forEach((z)=>{W5.register(z,Y)})}$("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),$("ropsten",3,{ensNetwork:3}),$("rinkeby",4,{ensNetwork:4}),$("goerli",5,{ensNetwork:5}),$("kovan",42,{ensNetwork:42}),$("sepolia",11155111,{ensNetwork:11155111}),$("holesky",17000,{ensNetwork:17000}),$("classic",61,{}),$("classicKotti",6,{}),$("arbitrum",42161,{ensNetwork:1}),$("arbitrum-goerli",421613,{}),$("arbitrum-sepolia",421614,{}),$("base",8453,{ensNetwork:1}),$("base-goerli",84531,{}),$("base-sepolia",84532,{}),$("bnb",56,{ensNetwork:1}),$("bnbt",97,{}),$("filecoin",314,{}),$("filecoin-calibration",314159,{}),$("linea",59144,{ensNetwork:1}),$("linea-goerli",59140,{}),$("linea-sepolia",59141,{}),$("matic",137,{ensNetwork:1,plugins:[qc("https://gasstation.polygon.technology/v2")]}),$("matic-amoy",80002,{}),$("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[qc("https://gasstation-testnet.polygon.technology/v2")]}),$("optimism",10,{ensNetwork:1,plugins:[]}),$("optimism-goerli",420,{}),$("optimism-sepolia",11155420,{}),$("xdai",100,{ensNetwork:1})}var Cw,Wc=!1;var R2=p(()=>{M2();J1();uH();Cw=new Map});function Lw($){return JSON.parse(JSON.stringify($))}class Tw{#$;#Q;#Z;#X;constructor($){this.#$=$,this.#Q=null,this.#Z=4000,this.#X=-2}get pollingInterval(){return this.#Z}set pollingInterval($){this.#Z=$}async#Y(){try{let $=await this.#$.getBlockNumber();if(this.#X===-2){this.#X=$;return}if($!==this.#X){for(let Q=this.#X+1;Q<=$;Q++){if(this.#Q==null)return;await this.#$.emit("block",Q)}this.#X=$}}catch($){}if(this.#Q==null)return;this.#Q=this.#$._setTimeout(this.#Y.bind(this),this.#Z)}start(){if(this.#Q)return;this.#Q=this.#$._setTimeout(this.#Y.bind(this),this.#Z),this.#Y()}stop(){if(!this.#Q)return;this.#$._clearTimeout(this.#Q),this.#Q=null}pause($){if(this.stop(),$)this.#X=-2}resume(){this.start()}}class cH{#$;#Q;#Z;constructor($){this.#$=$,this.#Z=!1,this.#Q=(Q)=>{this._poll(Q,this.#$)}}async _poll($,Q){throw Error("sub-classes must override this")}start(){if(this.#Z)return;this.#Z=!0,this.#Q(-2),this.#$.on("block",this.#Q)}stop(){if(!this.#Z)return;this.#Z=!1,this.#$.off("block",this.#Q)}pause($){this.stop()}resume(){this.start()}}class Vz{#$;#Q;#Z;#X;#Y;constructor($,Q){this.#$=$,this.#Q=Lw(Q),this.#Z=this.#z.bind(this),this.#X=!1,this.#Y=-2}async#z($){if(this.#Y===-2)return;let Q=Lw(this.#Q);Q.fromBlock=this.#Y+1,Q.toBlock=$;let Z=await this.#$.getLogs(Q);if(Z.length===0){if(this.#Y<$-60)this.#Y=$-60;return}for(let X of Z)this.#$.emit(this.#Q,X),this.#Y=X.blockNumber}start(){if(this.#X)return;if(this.#X=!0,this.#Y===-2)this.#$.getBlockNumber().then(($)=>{this.#Y=$});this.#$.on("block",this.#Z)}stop(){if(!this.#X)return;this.#X=!1,this.#$.off("block",this.#Z)}pause($){if(this.stop(),$)this.#Y=-2}resume(){this.start()}}var Fw,Aw,ww;var dH=p(()=>{Fw=class Fw extends cH{#$;#Q;constructor($,Q){super($);this.#$=Q,this.#Q=-2}pause($){if($)this.#Q=-2;super.pause($)}async _poll($,Q){let Z=await Q.getBlock(this.#$);if(Z==null)return;if(this.#Q===-2)this.#Q=Z.number;else if(Z.number>this.#Q)Q.emit(this.#$,Z.number),this.#Q=Z.number}};Aw=class Aw extends cH{#$;constructor($,Q){super($);this.#$=Lw(Q)}async _poll($,Q){throw Error("@TODO")}};ww=class ww extends cH{#$;constructor($,Q){super($);this.#$=Q}async _poll($,Q){let Z=await Q.getTransactionReceipt(this.#$);if(Z)Q.emit(this.#$,Z)}}});function lH($){return $&&typeof $.then==="function"}function iH($,Q){return $+":"+JSON.stringify(Q,(Z,X)=>{if(X==null)return"null";if(typeof X==="bigint")return`bigint:${X.toString()}`;if(typeof X==="string")return X.toLowerCase();if(typeof X==="object"&&!Array.isArray(X)){let Y=Object.keys(X);return Y.sort(),Y.reduce((z,J)=>{return z[J]=X[J],z},{})}return X})}class H3{name;constructor($){r0(this,{name:$})}start(){}stop(){}pause($){}resume(){}}function XW0($){return JSON.parse(JSON.stringify($))}function Iw($){return $=Array.from(new Set($).values()),$.sort(),$}async function Bw($,Q){if($==null)throw Error("invalid event");if(Array.isArray($))$={topics:$};if(typeof $==="string")switch($){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:$,tag:$}}if(J5($,32)){let Z=$.toLowerCase();return{type:"transaction",tag:iH("tx",{hash:Z}),hash:Z}}if($.orphan){let Z=$;return{type:"orphan",tag:iH("orphan",Z),filter:XW0(Z)}}if($.address||$.topics){let Z=$,X={topics:(Z.topics||[]).map((Y)=>{if(Y==null)return null;if(Array.isArray(Y))return Iw(Y.map((z)=>z.toLowerCase()));return Y.toLowerCase()})};if(Z.address){let Y=[],z=[],J=(q)=>{if(J5(q))Y.push(q);else z.push((async()=>{Y.push(await k6(q,Q))})())};if(Array.isArray(Z.address))Z.address.forEach(J);else J(Z.address);if(z.length)await Promise.all(z);X.address=Iw(Y.map((q)=>q.toLowerCase()))}return{filter:X,tag:iH("event",X),type:"event"}}r(!1,"unknown ProviderEvent","event",$)}function Ew(){return new Date().getTime()}class T7{#$;#Q;#Z;#X;#Y;#z;#J;#W;#U;#K;#q;#D;constructor($,Q){if(this.#D=Object.assign({},YW0,Q||{}),$==="any")this.#z=!0,this.#Y=null;else if($){let Z=W5.from($);this.#z=!1,this.#Y=Promise.resolve(Z),setTimeout(()=>{this.emit("network",Z,null)},0)}else this.#z=!1,this.#Y=null;this.#W=-1,this.#J=new Map,this.#$=new Map,this.#Q=new Map,this.#Z=null,this.#X=!1,this.#U=1,this.#K=new Map,this.#q=!1}get pollingInterval(){return this.#D.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#Q.values())}attachPlugin($){if(this.#Q.get($.name))throw Error(`cannot replace existing plugin: ${$.name} `);return this.#Q.set($.name,$.connect(this)),this}getPlugin($){return this.#Q.get($)||null}get disableCcipRead(){return this.#q}set disableCcipRead($){this.#q=!!$}async#G($){let Q=this.#D.cacheTimeout;if(Q<0)return await this._perform($);let Z=iH($.method,$),X=this.#J.get(Z);if(!X)X=this._perform($),this.#J.set(Z,X),setTimeout(()=>{if(this.#J.get(Z)===X)this.#J.delete(Z)},Q);return await X}async ccipReadFetch($,Q,Z){if(this.disableCcipRead||Z.length===0||$.to==null)return null;let X=$.to.toLowerCase(),Y=Q.toLowerCase(),z=[];for(let J=0;J<Z.length;J++){let q=Z[J],W=q.replace("{sender}",X).replace("{data}",Y),G=new n5(W);if(q.indexOf("{data}")===-1)G.body={data:Y,sender:X};this.emit("debug",{action:"sendCcipReadFetchRequest",request:G,index:J,urls:Z});let U="unknown error",D;try{D=await G.send()}catch(P){z.push(P.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:G,result:{error:P}});continue}try{let P=D.bodyJson;if(P.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:G,result:P}),P.data;if(P.message)U=P.message;this.emit("debug",{action:"receiveCcipReadFetchError",request:G,result:P})}catch(P){}P0(D.statusCode<400||D.statusCode>=500,`response not found during CCIP fetch: ${U}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:$,info:{url:q,errorMessage:U}}),z.push(U)}P0(!1,`error encountered during CCIP fetch: ${z.map((J)=>JSON.stringify(J)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:$,info:{urls:Z,errorMessages:z}})}_wrapBlock($,Q){return new qz(Xc($),this)}_wrapLog($,Q){return new F4(Zc($),this)}_wrapTransactionReceipt($,Q){return new BQ(Yc($),this)}_wrapTransactionResponse($,Q){return new M3(Nw($),this)}_detectNetwork(){P0(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform($){P0(!1,`unsupported method: ${$.method}`,"UNSUPPORTED_OPERATION",{operation:$.method,info:$})}async getBlockNumber(){let $=G1(await this.#G({method:"getBlockNumber"}),"%response");if(this.#W>=0)this.#W=$;return $}_getAddress($){return k6($,this)}_getBlockTag($){if($==null)return"latest";switch($){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return $}if(J5($)){if(J5($,32))return $;return y8($)}if(typeof $==="bigint")$=G1($,"blockTag");if(typeof $==="number"){if($>=0)return y8($);if(this.#W>=0)return y8(this.#W+$);return this.getBlockNumber().then((Q)=>y8(Q+$))}r(!1,"invalid blockTag","blockTag",$)}_getFilter($){let Q=($.topics||[]).map((q)=>{if(q==null)return null;if(Array.isArray(q))return Iw(q.map((W)=>W.toLowerCase()));return q.toLowerCase()}),Z="blockHash"in $?$.blockHash:void 0,X=(q,W,G)=>{let U=void 0;switch(q.length){case 0:break;case 1:U=q[0];break;default:q.sort(),U=q}if(Z){if(W!=null||G!=null)throw Error("invalid filter")}let D={};if(U)D.address=U;if(Q.length)D.topics=Q;if(W)D.fromBlock=W;if(G)D.toBlock=G;if(Z)D.blockHash=Z;return D},Y=[];if($.address)if(Array.isArray($.address))for(let q of $.address)Y.push(this._getAddress(q));else Y.push(this._getAddress($.address));let z=void 0;if("fromBlock"in $)z=this._getBlockTag($.fromBlock);let J=void 0;if("toBlock"in $)J=this._getBlockTag($.toBlock);if(Y.filter((q)=>typeof q!=="string").length||z!=null&&typeof z!=="string"||J!=null&&typeof J!=="string")return Promise.all([Promise.all(Y),z,J]).then((q)=>{return X(q[0],q[1],q[2])});return X(Y,z,J)}_getTransactionRequest($){let Q=T4($),Z=[];if(["to","from"].forEach((X)=>{if(Q[X]==null)return;let Y=k6(Q[X],this);if(lH(Y))Z.push(async function(){Q[X]=await Y}());else Q[X]=Y}),Q.blockTag!=null){let X=this._getBlockTag(Q.blockTag);if(lH(X))Z.push(async function(){Q.blockTag=await X}());else Q.blockTag=X}if(Z.length)return async function(){return await Promise.all(Z),Q}();return Q}async getNetwork(){if(this.#Y==null){let X=(async()=>{try{let Y=await this._detectNetwork();return this.emit("network",Y,null),Y}catch(Y){if(this.#Y===X)this.#Y=null;throw Y}})();return this.#Y=X,(await X).clone()}let $=this.#Y,[Q,Z]=await Promise.all([$,this._detectNetwork()]);if(Q.chainId!==Z.chainId)if(this.#z){if(this.emit("network",Z,Q),this.#Y===$)this.#Y=Promise.resolve(Z)}else P0(!1,`network changed: ${Q.chainId} => ${Z.chainId} `,"NETWORK_ERROR",{event:"changed"});return Q.clone()}async getFeeData(){let $=await this.getNetwork(),Q=async()=>{let{_block:X,gasPrice:Y,priorityFee:z}=await T6({_block:this.#H("latest",!1),gasPrice:(async()=>{try{let G=await this.#G({method:"getGasPrice"});return e0(G,"%response")}catch(G){}return null})(),priorityFee:(async()=>{try{let G=await this.#G({method:"getPriorityFee"});return e0(G,"%response")}catch(G){}return null})()}),J=null,q=null,W=this._wrapBlock(X,$);if(W&&W.baseFeePerGas)q=z!=null?z:BigInt("1000000000"),J=W.baseFeePerGas*QW0+q;return new vX(Y,J,q)},Z=$.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(Z){let X=new n5(Z.url),Y=await Z.processFunc(Q,this,X);return new vX(Y.gasPrice,Y.maxFeePerGas,Y.maxPriorityFeePerGas)}return await Q()}async estimateGas($){let Q=this._getTransactionRequest($);if(lH(Q))Q=await Q;return e0(await this.#G({method:"estimateGas",transaction:Q}),"%response")}async#O($,Q,Z){P0(Z<ZW0,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},$,{blockTag:Q,enableCcipRead:!0})});let X=T4($);try{return F0(await this._perform({method:"call",transaction:X,blockTag:Q}))}catch(Y){if(!this.disableCcipRead&&PQ(Y)&&Y.data&&Z>=0&&Q==="latest"&&X.to!=null&&m5(Y.data,0,4)==="0x556f1830"){let z=Y.data,J=await k6(X.to,this),q;try{q=KW0(m5(Y.data,4))}catch(U){P0(!1,U.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:X,info:{data:z}})}P0(q.sender.toLowerCase()===J.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:z,reason:"OffchainLookup",transaction:X,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:q.errorArgs}});let W=await this.ccipReadFetch(X,q.calldata,q.urls);P0(W!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:X,info:{data:Y.data,errorArgs:q.errorArgs}});let G={to:J,data:S1([q.selector,WW0([W,q.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:G});try{let U=await this.#O(G,Q,Z+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},G),result:U}),U}catch(U){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},G),error:U}),U}}throw Y}}async#V($){let{value:Q}=await T6({network:this.getNetwork(),value:$});return Q}async call($){let{tx:Q,blockTag:Z}=await T6({tx:this._getTransactionRequest($),blockTag:this._getBlockTag($.blockTag)});return await this.#V(this.#O(Q,Z,$.enableCcipRead?0:-1))}async#M($,Q,Z){let X=this._getAddress(Q),Y=this._getBlockTag(Z);if(typeof X!=="string"||typeof Y!=="string")[X,Y]=await Promise.all([X,Y]);return await this.#V(this.#G(Object.assign($,{address:X,blockTag:Y})))}async getBalance($,Q){return e0(await this.#M({method:"getBalance"},$,Q),"%response")}async getTransactionCount($,Q){return G1(await this.#M({method:"getTransactionCount"},$,Q),"%response")}async getCode($,Q){return F0(await this.#M({method:"getCode"},$,Q))}async getStorage($,Q,Z){let X=e0(Q,"position");return F0(await this.#M({method:"getStorage",position:X},$,Z))}async broadcastTransaction($){let{blockNumber:Q,hash:Z,network:X}=await T6({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:$}),network:this.getNetwork()}),Y=A8.from($);if(Y.hash!==Z)throw Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(Y,X).replaceableTransaction(Q)}async#H($,Q){if(J5($,32))return await this.#G({method:"getBlock",blockHash:$,includeTransactions:Q});let Z=this._getBlockTag($);if(typeof Z!=="string")Z=await Z;return await this.#G({method:"getBlock",blockTag:Z,includeTransactions:Q})}async getBlock($,Q){let{network:Z,params:X}=await T6({network:this.getNetwork(),params:this.#H($,!!Q)});if(X==null)return null;return this._wrapBlock(X,Z)}async getTransaction($){let{network:Q,params:Z}=await T6({network:this.getNetwork(),params:this.#G({method:"getTransaction",hash:$})});if(Z==null)return null;return this._wrapTransactionResponse(Z,Q)}async getTransactionReceipt($){let{network:Q,params:Z}=await T6({network:this.getNetwork(),params:this.#G({method:"getTransactionReceipt",hash:$})});if(Z==null)return null;if(Z.gasPrice==null&&Z.effectiveGasPrice==null){let X=await this.#G({method:"getTransaction",hash:$});if(X==null)throw Error("report this; could not find tx or effectiveGasPrice");Z.effectiveGasPrice=X.gasPrice}return this._wrapTransactionReceipt(Z,Q)}async getTransactionResult($){let{result:Q}=await T6({network:this.getNetwork(),result:this.#G({method:"getTransactionResult",hash:$})});if(Q==null)return null;return F0(Q)}async getLogs($){let Q=this._getFilter($);if(lH(Q))Q=await Q;let{network:Z,params:X}=await T6({network:this.getNetwork(),params:this.#G({method:"getLogs",filter:Q})});return X.map((Y)=>this._wrapLog(Y,Z))}_getProvider($){P0(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver($){return await P3.fromName(this,$)}async getAvatar($){let Q=await this.getResolver($);if(Q)return await Q.getAvatar();return null}async resolveName($){let Q=await this.getResolver($);if(Q)return await Q.getAddress();return null}async lookupAddress($){$=R1($);let Q=TQ($.substring(2).toLowerCase()+".addr.reverse");try{let Z=await P3.getEnsAddress(this),Y=await new Z4(Z,["function resolver(bytes32) view returns (address)"],this).resolver(Q);if(Y==null||Y===P7)return null;let J=await new Z4(Y,["function name(bytes32) view returns (string)"],this).name(Q);if(await this.resolveName(J)!==$)return null;return J}catch(Z){if(o5(Z,"BAD_DATA")&&Z.value==="0x")return null;if(o5(Z,"CALL_EXCEPTION"))return null;throw Z}return null}async waitForTransaction($,Q,Z){let X=Q!=null?Q:1;if(X===0)return this.getTransactionReceipt($);return new Promise(async(Y,z)=>{let J=null,q=async(W)=>{try{let G=await this.getTransactionReceipt($);if(G!=null){if(W-G.blockNumber+1>=X){if(Y(G),J)clearTimeout(J),J=null;return}}}catch(G){console.log("EEE",G)}this.once("block",q)};if(Z!=null)J=setTimeout(()=>{if(J==null)return;J=null,this.off("block",q),z(H5("timeout","TIMEOUT",{reason:"timeout"}))},Z);q(await this.getBlockNumber())})}async waitForBlock($){P0(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout($){let Q=this.#K.get($);if(!Q)return;if(Q.timer)clearTimeout(Q.timer);this.#K.delete($)}_setTimeout($,Q){if(Q==null)Q=0;let Z=this.#U++,X=()=>{this.#K.delete(Z),$()};if(this.paused)this.#K.set(Z,{timer:null,func:X,time:Q});else{let Y=setTimeout(X,Q);this.#K.set(Z,{timer:Y,func:X,time:Ew()})}return Z}_forEachSubscriber($){for(let Q of this.#$.values())$(Q.subscriber)}_getSubscriber($){switch($.type){case"debug":case"error":case"network":return new H3($.type);case"block":{let Q=new Tw(this);return Q.pollingInterval=this.pollingInterval,Q}case"safe":case"finalized":return new Fw(this,$.type);case"event":return new Vz(this,$.filter);case"transaction":return new ww(this,$.hash);case"orphan":return new Aw(this,$.filter)}throw Error(`unsupported event: ${$.type}`)}_recoverSubscriber($,Q){for(let Z of this.#$.values())if(Z.subscriber===$){if(Z.started)Z.subscriber.stop();if(Z.subscriber=Q,Z.started)Q.start();if(this.#Z!=null)Q.pause(this.#Z);break}}async#j($,Q){let Z=await Bw($,this);if(Z.type==="event"&&Q&&Q.length>0&&Q[0].removed===!0)Z=await Bw({orphan:"drop-log",log:Q[0]},this);return this.#$.get(Z.tag)||null}async#R($){let Q=await Bw($,this),Z=Q.tag,X=this.#$.get(Z);if(!X)X={subscriber:this._getSubscriber(Q),tag:Z,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#$.set(Z,X);return X}async on($,Q){let Z=await this.#R($);if(Z.listeners.push({listener:Q,once:!1}),!Z.started){if(Z.subscriber.start(),Z.started=!0,this.#Z!=null)Z.subscriber.pause(this.#Z)}return this}async once($,Q){let Z=await this.#R($);if(Z.listeners.push({listener:Q,once:!0}),!Z.started){if(Z.subscriber.start(),Z.started=!0,this.#Z!=null)Z.subscriber.pause(this.#Z)}return this}async emit($,...Q){let Z=await this.#j($,Q);if(!Z||Z.listeners.length===0)return!1;let X=Z.listeners.length;if(Z.listeners=Z.listeners.filter(({listener:Y,once:z})=>{let J=new HQ(this,z?null:Y,$);try{Y.call(this,...Q,J)}catch(q){}return!z}),Z.listeners.length===0){if(Z.started)Z.subscriber.stop();this.#$.delete(Z.tag)}return X>0}async listenerCount($){if($){let Z=await this.#j($);if(!Z)return 0;return Z.listeners.length}let Q=0;for(let{listeners:Z}of this.#$.values())Q+=Z.length;return Q}async listeners($){if($){let Z=await this.#j($);if(!Z)return[];return Z.listeners.map(({listener:X})=>X)}let Q=[];for(let{listeners:Z}of this.#$.values())Q=Q.concat(Z.map(({listener:X})=>X));return Q}async off($,Q){let Z=await this.#j($);if(!Z)return this;if(Q){let X=Z.listeners.map(({listener:Y})=>Y).indexOf(Q);if(X>=0)Z.listeners.splice(X,1)}if(!Q||Z.listeners.length===0){if(Z.started)Z.subscriber.stop();this.#$.delete(Z.tag)}return this}async removeAllListeners($){if($){let{tag:Q,started:Z,subscriber:X}=await this.#R($);if(Z)X.stop();this.#$.delete(Q)}else for(let[Q,{started:Z,subscriber:X}]of this.#$){if(Z)X.stop();this.#$.delete(Q)}return this}async addListener($,Q){return await this.on($,Q)}async removeListener($,Q){return this.off($,Q)}get destroyed(){return this.#X}destroy(){this.removeAllListeners();for(let $ of this.#K.keys())this._clearTimeout($);this.#X=!0}get paused(){return this.#Z!=null}set paused($){if(!!$===this.paused)return;if(this.paused)this.resume();else this.pause(!1)}pause($){if(this.#W=-1,this.#Z!=null){if(this.#Z==!!$)return;P0(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber((Q)=>Q.pause($)),this.#Z=!!$;for(let Q of this.#K.values()){if(Q.timer)clearTimeout(Q.timer);Q.time=Ew()-Q.time}}resume(){if(this.#Z==null)return;this._forEachSubscriber(($)=>$.resume()),this.#Z=null;for(let $ of this.#K.values()){let Q=$.time;if(Q<0)Q=0;$.time=Ew(),setTimeout($.func,Q)}}}function JW0($,Q){try{let Z=_w($,Q);if(Z)return u9(Z)}catch(Z){}return null}function _w($,Q){if($==="0x")return null;try{let Z=G1(m5($,Q,Q+32)),X=G1(m5($,Z,Z+32));return m5($,Z+32,Z+32+X)}catch(Z){}return null}function Kc($){let Q=k5($);if(Q.length>32)throw Error("internal; should not happen");let Z=new Uint8Array(32);return Z.set(Q,32-Q.length),Z}function zW0($){if($.length%32===0)return $;let Q=new Uint8Array(Math.ceil($.length/32)*32);return Q.set($),Q}function WW0($){let Q=[],Z=0;for(let X=0;X<$.length;X++)Q.push(qW0),Z+=32;for(let X=0;X<$.length;X++){let Y=x0($[X]);Q[X]=Kc(Z),Q.push(Kc(Y.length)),Q.push(zW0(Y)),Z+=32+Math.ceil(Y.length/32)*32}return S1(Q)}function KW0($){let Q={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};P0(O2($)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});let Z=m5($,0,32);P0(m5(Z,0,12)===m5(Gc,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),Q.sender=m5(Z,12);try{let X=[],Y=G1(m5($,32,64)),z=G1(m5($,Y,Y+32)),J=m5($,Y+32);for(let q=0;q<z;q++){let W=JW0(J,q*32);if(W==null)throw Error("abort");X.push(W)}Q.urls=X}catch(X){P0(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{let X=_w($,64);if(X==null)throw Error("abort");Q.calldata=X}catch(X){P0(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}P0(m5($,100,128)===m5(Gc,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),Q.selector=m5($,96,100);try{let X=_w($,128);if(X==null)throw Error("abort");Q.extraData=X}catch(X){P0(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return Q.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map((X)=>Q[X]),Q}var QW0,ZW0=10,YW0,qW0,Gc="0x0000000000000000000000000000000000000000000000000000000000000000";var OK=p(()=>{F8();oW();BV();K$();M2();J1();Rw();Jc();R2();qK();dH();QW0=BigInt(2);YW0={cacheTimeout:250,pollingInterval:4000};qW0=new Uint8Array([])});function Oz($,Q){if($.provider)return $.provider;P0(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:Q})}async function Uc($,Q){let Z=T4(Q);if(Z.to!=null)Z.to=k6(Z.to,$);if(Z.from!=null){let X=Z.from;Z.from=Promise.all([$.getAddress(),k6(X,$)]).then(([Y,z])=>{return r(Y.toLowerCase()===z.toLowerCase(),"transaction from mismatch","tx.from",z),Y})}else Z.from=$.getAddress();return await T6(Z)}class F7{provider;constructor($){r0(this,{provider:$||null})}async getNonce($){return Oz(this,"getTransactionCount").getTransactionCount(await this.getAddress(),$)}async populateCall($){return await Uc(this,$)}async populateTransaction($){let Q=Oz(this,"populateTransaction"),Z=await Uc(this,$);if(Z.nonce==null)Z.nonce=await this.getNonce("pending");if(Z.gasLimit==null)Z.gasLimit=await this.estimateGas(Z);let X=await this.provider.getNetwork();if(Z.chainId!=null){let z=e0(Z.chainId);r(z===X.chainId,"transaction chainId mismatch","tx.chainId",$.chainId)}else Z.chainId=X.chainId;let Y=Z.maxFeePerGas!=null||Z.maxPriorityFeePerGas!=null;if(Z.gasPrice!=null&&(Z.type===2||Y))r(!1,"eip-1559 transaction do not support gasPrice","tx",$);else if((Z.type===0||Z.type===1)&&Y)r(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",$);if((Z.type===2||Z.type==null)&&(Z.maxFeePerGas!=null&&Z.maxPriorityFeePerGas!=null))Z.type=2;else if(Z.type===0||Z.type===1){let z=await Q.getFeeData();if(P0(z.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),Z.gasPrice==null)Z.gasPrice=z.gasPrice}else{let z=await Q.getFeeData();if(Z.type==null)if(z.maxFeePerGas!=null&&z.maxPriorityFeePerGas!=null){if(Z.authorizationList&&Z.authorizationList.length)Z.type=4;else Z.type=2;if(Z.gasPrice!=null){let J=Z.gasPrice;delete Z.gasPrice,Z.maxFeePerGas=J,Z.maxPriorityFeePerGas=J}else{if(Z.maxFeePerGas==null)Z.maxFeePerGas=z.maxFeePerGas;if(Z.maxPriorityFeePerGas==null)Z.maxPriorityFeePerGas=z.maxPriorityFeePerGas}}else if(z.gasPrice!=null){if(P0(!Y,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),Z.gasPrice==null)Z.gasPrice=z.gasPrice;Z.type=0}else P0(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else if(Z.type===2||Z.type===3||Z.type===4){if(Z.maxFeePerGas==null)Z.maxFeePerGas=z.maxFeePerGas;if(Z.maxPriorityFeePerGas==null)Z.maxPriorityFeePerGas=z.maxPriorityFeePerGas}}return await T6(Z)}async populateAuthorization($){let Q=Object.assign({},$);if(Q.chainId==null)Q.chainId=(await Oz(this,"getNetwork").getNetwork()).chainId;if(Q.nonce==null)Q.nonce=await this.getNonce();return Q}async estimateGas($){return Oz(this,"estimateGas").estimateGas(await this.populateCall($))}async call($){return Oz(this,"call").call(await this.populateCall($))}async resolveName($){return await Oz(this,"resolveName").resolveName($)}async sendTransaction($){let Q=Oz(this,"sendTransaction"),Z=await this.populateTransaction($);delete Z.from;let X=A8.from(Z);return await Q.broadcastTransaction(await this.signTransaction(X))}authorize($){P0(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var hX;var oH=p(()=>{F8();M2();J1();qK();hX=class hX extends F7{address;constructor($,Q){super(Q);r0(this,{address:$})}async getAddress(){return this.address}connect($){return new hX(this.address,$)}#$($,Q){P0(!1,`VoidSigner cannot sign ${$}`,"UNSUPPORTED_OPERATION",{operation:Q})}async signTransaction($){this.#$("transactions","signTransaction")}async signMessage($){this.#$("messages","signMessage")}async signTypedData($,Q,Z){this.#$("typed-data","signTypedData")}}});function V9($){if(Vc.has($))return;Vc.add($),console.log("========= NOTICE ========="),console.log(`Request-Rate Exceeded for ${$} (this message will not be repeated)`),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.org/api-keys/"),console.log("==========================")}var Vc;var fQ=p(()=>{Vc=new Set});function GW0($){return JSON.parse(JSON.stringify($))}class Sw{#$;#Q;#Z;#X;#Y;#z;constructor($){this.#$=$,this.#Q=null,this.#Z=this.#J.bind(this),this.#X=!1,this.#Y=null,this.#z=!1}_subscribe($){throw Error("subclasses must override this")}_emitResults($,Q){throw Error("subclasses must override this")}_recover($){throw Error("subclasses must override this")}async#J($){try{if(this.#Q==null)this.#Q=this._subscribe(this.#$);let Q=null;try{Q=await this.#Q}catch(Y){if(!o5(Y,"UNSUPPORTED_OPERATION")||Y.operation!=="eth_newFilter")throw Y}if(Q==null){this.#Q=null,this.#$._recoverSubscriber(this,this._recover(this.#$));return}let Z=await this.#$.getNetwork();if(!this.#Y)this.#Y=Z;if(this.#Y.chainId!==Z.chainId)throw Error("chaid changed");if(this.#z)return;let X=await this.#$.send("eth_getFilterChanges",[Q]);await this._emitResults(this.#$,X)}catch(Q){console.log("@TODO",Q)}this.#$.once("block",this.#Z)}#W(){let $=this.#Q;if($)this.#Q=null,$.then((Q)=>{if(this.#$.destroyed)return;this.#$.send("eth_uninstallFilter",[Q])})}start(){if(this.#X)return;this.#X=!0,this.#J(-2)}stop(){if(!this.#X)return;this.#X=!1,this.#z=!0,this.#W(),this.#$.off("block",this.#Z)}pause($){if($)this.#W();this.#$.off("block",this.#Z)}resume(){this.start()}}var fw,kw;var Oc=p(()=>{J1();dH();fw=class fw extends Sw{#$;constructor($,Q){super($);this.#$=GW0(Q)}_recover($){return new Vz($,this.#$)}async _subscribe($){return await $.send("eth_newFilter",[this.#$])}async _emitResults($,Q){for(let Z of Q)$.emit(this.#$,$._wrapLog(Z,$._network))}};kw=class kw extends Sw{async _subscribe($){return await $.send("eth_newPendingTransactionFilter",[])}async _emitResults($,Q){for(let Z of Q)$.emit("pending",Z)}}});function nH($){if($==null||UW0.indexOf(typeof $)>=0)return $;if(typeof $.getAddress==="function")return $;if(Array.isArray($))return $.map(nH);if(typeof $==="object")return Object.keys($).reduce((Q,Z)=>{return Q[Z]=$[Z],Q},{});throw Error(`should not happen: ${$} (${typeof $})`)}function VW0($){return new Promise((Q)=>{setTimeout(Q,$)})}function DK($){if($)return $.toLowerCase();return $}function Dc($){return $&&typeof $.pollingInterval==="number"}function xw($){if($==null)return null;if(typeof $.message==="string"&&$.message.match(/revert/i)&&J5($.data))return{message:$.message,data:$.data};if(typeof $==="object"){for(let Q in $){let Z=xw($[Q]);if(Z)return Z}return null}if(typeof $==="string")try{return xw(JSON.parse($))}catch(Q){}return null}function bw($,Q){if($==null)return;if(typeof $.message==="string")Q.push($.message);if(typeof $==="object")for(let Z in $)bw($[Z],Q);if(typeof $==="string")try{return bw(JSON.parse($),Q)}catch(Z){}}function OW0($){let Q=[];return bw($,Q),Q}var UW0,Mc,mX,pX,rH,m6;var w4=p(()=>{JK();F8();K$();M2();J1();OK();oH();R2();Oc();dH();UW0="bigint,boolean,function,number,string,symbol".split(/,/g);Mc={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1048576,batchMaxCount:100,cacheTimeout:250,pollingInterval:4000};mX=class mX extends F7{address;constructor($,Q){super($);Q=R1(Q),r0(this,{address:Q})}connect($){P0(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction($){return await this.populateCall($)}async sendUncheckedTransaction($){let Q=nH($),Z=[];if(Q.from){let Y=Q.from;Z.push((async()=>{let z=await k6(Y,this.provider);r(z!=null&&z.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",$),Q.from=z})())}else Q.from=this.address;if(Q.gasLimit==null)Z.push((async()=>{Q.gasLimit=await this.provider.estimateGas({...Q,from:this.address})})());if(Q.to!=null){let Y=Q.to;Z.push((async()=>{Q.to=await k6(Y,this.provider)})())}if(Z.length)await Promise.all(Z);let X=this.provider.getRpcTransaction(Q);return this.provider.send("eth_sendTransaction",[X])}async sendTransaction($){let Q=await this.provider.getBlockNumber(),Z=await this.sendUncheckedTransaction($);return await new Promise((X,Y)=>{let z=[1000,100],J=0,q=async()=>{try{let W=await this.provider.getTransaction(Z);if(W!=null){X(W.replaceableTransaction(Q));return}}catch(W){if(o5(W,"CANCELLED")||o5(W,"BAD_DATA")||o5(W,"NETWORK_ERROR")||o5(W,"UNSUPPORTED_OPERATION")){if(W.info==null)W.info={};W.info.sendTransactionHash=Z,Y(W);return}if(o5(W,"INVALID_ARGUMENT")){if(J++,W.info==null)W.info={};if(W.info.sendTransactionHash=Z,J>10){Y(W);return}}this.provider.emit("error",H5("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:W}))}this.provider._setTimeout(()=>{q()},z.pop()||4000)};q()})}async signTransaction($){let Q=nH($);if(Q.from){let X=await k6(Q.from,this.provider);r(X!=null&&X.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",$),Q.from=X}else Q.from=this.address;let Z=this.provider.getRpcTransaction(Q);return await this.provider.send("eth_signTransaction",[Z])}async signMessage($){let Q=typeof $==="string"?p5($):$;return await this.provider.send("personal_sign",[F0(Q),this.address.toLowerCase()])}async signTypedData($,Q,Z){let X=nH(Z),Y=await M8.resolveNames($,Q,X,async(z)=>{let J=await k6(z);return r(J!=null,"TypedData does not support null address","value",z),J});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(M8.getPayload(Y.domain,Q,Y.value))])}async unlock($){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),$,null])}async _legacySignMessage($){let Q=typeof $==="string"?p5($):$;return await this.provider.send("eth_sign",[this.address.toLowerCase(),F0(Q)])}};pX=class pX extends T7{#$;#Q;#Z;#X;#Y;#z;#J;#W(){if(this.#X)return;let $=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");this.#X=setTimeout(()=>{this.#X=null;let Q=this.#Z;this.#Z=[];while(Q.length){let Z=[Q.shift()];while(Q.length){if(Z.length===this.#$.batchMaxCount)break;if(Z.push(Q.shift()),JSON.stringify(Z.map((Y)=>Y.payload)).length>this.#$.batchMaxSize){Q.unshift(Z.pop());break}}(async()=>{let X=Z.length===1?Z[0].payload:Z.map((Y)=>Y.payload);this.emit("debug",{action:"sendRpcPayload",payload:X});try{let Y=await this._send(X);this.emit("debug",{action:"receiveRpcResult",result:Y});for(let{resolve:z,reject:J,payload:q}of Z){if(this.destroyed){J(H5("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:q.method}));continue}let W=Y.filter((G)=>G.id===q.id)[0];if(W==null){let G=H5("missing response for request","BAD_DATA",{value:Y,info:{payload:q}});this.emit("error",G),J(G);continue}if("error"in W){J(this.getRpcError(q,W));continue}z(W.result)}}catch(Y){this.emit("debug",{action:"receiveRpcError",error:Y});for(let{reject:z}of Z)z(Y)}})()}},$)}constructor($,Q){super($,Q);this.#Q=1,this.#$=Object.assign({},Mc,Q||{}),this.#Z=[],this.#X=null,this.#z=null,this.#J=null;{let X=null,Y=new Promise((z)=>{X=z});this.#Y={promise:Y,resolve:X}}let Z=this._getOption("staticNetwork");if(typeof Z==="boolean"){if(r(!Z||$!=="any","staticNetwork cannot be used on special network 'any'","options",Q),Z&&$!=null)this.#z=W5.from($)}else if(Z)r($==null||Z.matches($),"staticNetwork MUST match network object","options",Q),this.#z=Z}_getOption($){return this.#$[$]}get _network(){return P0(this.#z,"network is not available yet","NETWORK_ERROR"),this.#z}async _perform($){if($.method==="call"||$.method==="estimateGas"){let Z=$.transaction;if(Z&&Z.type!=null&&e0(Z.type)){if(Z.maxFeePerGas==null&&Z.maxPriorityFeePerGas==null){let X=await this.getFeeData();if(X.maxFeePerGas==null&&X.maxPriorityFeePerGas==null)$=Object.assign({},$,{transaction:Object.assign({},Z,{type:void 0})})}}}let Q=this.getRpcRequest($);if(Q!=null)return await this.send(Q.method,Q.args);return super._perform($)}async _detectNetwork(){let $=this._getOption("staticNetwork");if($)if($===!0){if(this.#z)return this.#z}else return $;if(this.#J)return await this.#J;if(this.ready)return this.#J=(async()=>{try{let Q=W5.from(e0(await this.send("eth_chainId",[])));return this.#J=null,Q}catch(Q){throw this.#J=null,Q}})(),await this.#J;return this.#J=(async()=>{let Q={id:this.#Q++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:Q});let Z;try{Z=(await this._send(Q))[0],this.#J=null}catch(X){throw this.#J=null,this.emit("debug",{action:"receiveRpcError",error:X}),X}if(this.emit("debug",{action:"receiveRpcResult",result:Z}),"result"in Z)return W5.from(e0(Z.result));throw this.getRpcError(Q,Z)})(),await this.#J}_start(){if(this.#Y==null||this.#Y.resolve==null)return;this.#Y.resolve(),this.#Y=null,(async()=>{while(this.#z==null&&!this.destroyed)try{this.#z=await this._detectNetwork()}catch($){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",H5("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:$}})),await VW0(1000)}this.#W()})()}async _waitUntilReady(){if(this.#Y==null)return;return await this.#Y.promise}_getSubscriber($){if($.type==="pending")return new kw(this);if($.type==="event"){if(this._getOption("polling"))return new Vz(this,$.filter);return new fw(this,$.filter)}if($.type==="orphan"&&$.filter.orphan==="drop-log")return new H3("orphan");return super._getSubscriber($)}get ready(){return this.#Y==null}getRpcTransaction($){let Q={};if(["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((Z)=>{if($[Z]==null)return;let X=Z;if(Z==="gasLimit")X="gas";Q[X]=y8(e0($[Z],`tx.${Z}`))}),["from","to","data"].forEach((Z)=>{if($[Z]==null)return;Q[Z]=F0($[Z])}),$.accessList)Q.accessList=K9($.accessList);if($.blobVersionedHashes)Q.blobVersionedHashes=$.blobVersionedHashes.map((Z)=>Z.toLowerCase());if($.authorizationList)Q.authorizationList=$.authorizationList.map((Z)=>{let X=xX(Z);return{address:X.address,nonce:y8(X.nonce),chainId:y8(X.chainId),yParity:y8(X.signature.yParity),r:y8(X.signature.r),s:y8(X.signature.s)}});return Q}getRpcRequest($){switch($.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[DK($.address),$.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[DK($.address),$.blockTag]};case"getCode":return{method:"eth_getCode",args:[DK($.address),$.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[DK($.address),"0x"+$.position.toString(16),$.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[$.signedTransaction]};case"getBlock":if("blockTag"in $)return{method:"eth_getBlockByNumber",args:[$.blockTag,!!$.includeTransactions]};else if("blockHash"in $)return{method:"eth_getBlockByHash",args:[$.blockHash,!!$.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[$.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[$.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction($.transaction),$.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction($.transaction)]};case"getLogs":if($.filter&&$.filter.address!=null)if(Array.isArray($.filter.address))$.filter.address=$.filter.address.map(DK);else $.filter.address=DK($.filter.address);return{method:"eth_getLogs",args:[$.filter]}}return null}getRpcError($,Q){let{method:Z}=$,{error:X}=Q;if(Z==="eth_estimateGas"&&X.message){let J=X.message;if(!J.match(/revert/i)&&J.match(/insufficient funds/i))return H5("insufficient funds","INSUFFICIENT_FUNDS",{transaction:$.params[0],info:{payload:$,error:X}});else if(J.match(/nonce/i)&&J.match(/too low/i))return H5("nonce has already been used","NONCE_EXPIRED",{transaction:$.params[0],info:{payload:$,error:X}})}if(Z==="eth_call"||Z==="eth_estimateGas"){let J=xw(X),q=$4.getBuiltinCallException(Z==="eth_call"?"call":"estimateGas",$.params[0],J?J.data:null);return q.info={error:X,payload:$},q}let Y=JSON.stringify(OW0(X));if(typeof X.message==="string"&&X.message.match(/user denied|ethers-user-denied/i))return H5("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[Z]||"unknown",reason:"rejected",info:{payload:$,error:X}});if(Z==="eth_sendRawTransaction"||Z==="eth_sendTransaction"){let J=$.params[0];if(Y.match(/insufficient funds|base fee exceeds gas limit/i))return H5("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:J,info:{error:X}});if(Y.match(/nonce/i)&&Y.match(/too low/i))return H5("nonce has already been used","NONCE_EXPIRED",{transaction:J,info:{error:X}});if(Y.match(/replacement transaction/i)&&Y.match(/underpriced/i))return H5("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:J,info:{error:X}});if(Y.match(/only replay-protected/i))return H5("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:Z,info:{transaction:J,info:{error:X}}})}let z=!!Y.match(/the method .* does not exist/i);if(!z){if(X&&X.details&&X.details.startsWith("Unauthorized method:"))z=!0}if(z)return H5("unsupported operation","UNSUPPORTED_OPERATION",{operation:$.method,info:{error:X,payload:$}});return H5("could not coalesce error","UNKNOWN_ERROR",{error:X,payload:$})}send($,Q){if(this.destroyed)return Promise.reject(H5("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:$}));let Z=this.#Q++,X=new Promise((Y,z)=>{this.#Z.push({resolve:Y,reject:z,payload:{method:$,params:Q,id:Z,jsonrpc:"2.0"}})});return this.#W(),X}async getSigner($){if($==null)$=0;let Q=this.send("eth_accounts",[]);if(typeof $==="number"){let X=await Q;if($>=X.length)throw Error("no such account");return new mX(this,X[$])}let{accounts:Z}=await T6({network:this.getNetwork(),accounts:Q});$=R1($);for(let X of Z)if(R1(X)===$)return new mX(this,$);throw Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map((Q)=>new mX(this,Q))}destroy(){if(this.#X)clearTimeout(this.#X),this.#X=null;for(let{payload:$,reject:Q}of this.#Z)Q(H5("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:$.method}));this.#Z=[],super.destroy()}};rH=class rH extends pX{#$;constructor($,Q){super($,Q);let Z=this._getOption("pollingInterval");if(Z==null)Z=Mc.pollingInterval;this.#$=Z}_getSubscriber($){let Q=super._getSubscriber($);if(Dc(Q))Q.pollingInterval=this.#$;return Q}get pollingInterval(){return this.#$}set pollingInterval($){if(!Number.isInteger($)||$<0)throw Error("invalid interval");this.#$=$,this._forEachSubscriber((Q)=>{if(Dc(Q))Q.pollingInterval=this.#$})}};m6=class m6 extends rH{#$;constructor($,Q,Z){if($==null)$="http://localhost:8545";super(Q,Z);if(typeof $==="string")this.#$=new n5($);else this.#$=$.clone()}_getConnection(){return this.#$.clone()}async send($,Q){return await this._start(),await super.send($,Q)}async _send($){let Q=this._getConnection();Q.body=JSON.stringify($),Q.setHeader("content-type","application/json");let Z=await Q.send();Z.assertOk();let X=Z.bodyJson;if(!Array.isArray(X))X=[X];return X}}});function DW0($){switch($){case"mainnet":return"rpc.ankr.com/eth";case"goerli":return"rpc.ankr.com/eth_goerli";case"sepolia":return"rpc.ankr.com/eth_sepolia";case"arbitrum":return"rpc.ankr.com/arbitrum";case"base":return"rpc.ankr.com/base";case"base-goerli":return"rpc.ankr.com/base_goerli";case"base-sepolia":return"rpc.ankr.com/base_sepolia";case"bnb":return"rpc.ankr.com/bsc";case"bnbt":return"rpc.ankr.com/bsc_testnet_chapel";case"filecoin":return"rpc.ankr.com/filecoin";case"filecoin-calibration":return"rpc.ankr.com/filecoin_testnet";case"matic":return"rpc.ankr.com/polygon";case"matic-mumbai":return"rpc.ankr.com/polygon_mumbai";case"optimism":return"rpc.ankr.com/optimism";case"optimism-goerli":return"rpc.ankr.com/optimism_testnet";case"optimism-sepolia":return"rpc.ankr.com/optimism_sepolia"}r(!1,"unsupported network","network",$)}var aH="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972",kQ;var vw=p(()=>{J1();fQ();R2();w4();kQ=class kQ extends m6{apiKey;constructor($,Q){if($==null)$="mainnet";let Z=W5.from($);if(Q==null)Q=aH;let X={polling:!0,staticNetwork:Z},Y=kQ.getRequest(Z,Q);super(Y,Z,X);r0(this,{apiKey:Q})}_getProvider($){try{return new kQ($,this.apiKey)}catch(Q){}return super._getProvider($)}static getRequest($,Q){if(Q==null)Q=aH;let Z=new n5(`https://${DW0($.name)}/${Q}`);if(Z.allowGzip=!0,Q===aH)Z.retryFunc=async(X,Y,z)=>{return V9("AnkrProvider"),!0};return Z}getRpcError($,Q){if($.method==="eth_sendRawTransaction"){if(Q&&Q.error&&Q.error.message==="INTERNAL_ERROR: could not replace existing tx")Q.error.message="replacement transaction underpriced"}return super.getRpcError($,Q)}isCommunityResource(){return this.apiKey===aH}}});function MW0($){switch($){case"mainnet":return"eth-mainnet.g.alchemy.com";case"goerli":return"eth-goerli.g.alchemy.com";case"sepolia":return"eth-sepolia.g.alchemy.com";case"arbitrum":return"arb-mainnet.g.alchemy.com";case"arbitrum-goerli":return"arb-goerli.g.alchemy.com";case"arbitrum-sepolia":return"arb-sepolia.g.alchemy.com";case"base":return"base-mainnet.g.alchemy.com";case"base-goerli":return"base-goerli.g.alchemy.com";case"base-sepolia":return"base-sepolia.g.alchemy.com";case"matic":return"polygon-mainnet.g.alchemy.com";case"matic-amoy":return"polygon-amoy.g.alchemy.com";case"matic-mumbai":return"polygon-mumbai.g.alchemy.com";case"optimism":return"opt-mainnet.g.alchemy.com";case"optimism-goerli":return"opt-goerli.g.alchemy.com";case"optimism-sepolia":return"opt-sepolia.g.alchemy.com"}r(!1,"unsupported network","network",$)}var sH="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC",xQ;var yw=p(()=>{J1();fQ();R2();w4();xQ=class xQ extends m6{apiKey;constructor($,Q){if($==null)$="mainnet";let Z=W5.from($);if(Q==null)Q=sH;let X=xQ.getRequest(Z,Q);super(X,Z,{staticNetwork:Z});r0(this,{apiKey:Q})}_getProvider($){try{return new xQ($,this.apiKey)}catch(Q){}return super._getProvider($)}async _perform($){if($.method==="getTransactionResult"){let{trace:Q,tx:Z}=await T6({trace:this.send("trace_transaction",[$.hash]),tx:this.getTransaction($.hash)});if(Q==null||Z==null)return null;let X,Y=!1;try{X=Q[0].result.output,Y=Q[0].error==="Reverted"}catch(z){}if(X)return P0(!Y,"an error occurred during transaction executions","CALL_EXCEPTION",{action:"getTransactionResult",data:X,reason:null,transaction:Z,invocation:null,revert:null}),X;P0(!1,"could not parse trace result","BAD_DATA",{value:Q})}return await super._perform($)}isCommunityResource(){return this.apiKey===sH}static getRequest($,Q){if(Q==null)Q=sH;let Z=new n5(`https://${MW0($.name)}/v2/${Q}`);if(Z.allowGzip=!0,Q===sH)Z.retryFunc=async(X,Y,z)=>{return V9("alchemy"),!0};return Z}}});function tH($){switch($){case"mainnet":return"39f1d67cedf8b7831010a665328c9197";case"arbitrum":return"0550c209db33c3abf4cc927e1e18cea1";case"bnb":return"98b5a77e531614387366f6fc5da097f8";case"matic":return"cd9d4d70377471aa7c142ec4a4205249"}r(!1,"unsupported network","network",$)}function PW0($){switch($){case"mainnet":return"ethereum-mainnet.core.chainstack.com";case"arbitrum":return"arbitrum-mainnet.core.chainstack.com";case"bnb":return"bsc-mainnet.core.chainstack.com";case"matic":return"polygon-mainnet.core.chainstack.com"}r(!1,"unsupported network","network",$)}var bQ;var gw=p(()=>{J1();fQ();R2();w4();bQ=class bQ extends m6{apiKey;constructor($,Q){if($==null)$="mainnet";let Z=W5.from($);if(Q==null)Q=tH(Z.name);let X=bQ.getRequest(Z,Q);super(X,Z,{staticNetwork:Z});r0(this,{apiKey:Q})}_getProvider($){try{return new bQ($,this.apiKey)}catch(Q){}return super._getProvider($)}isCommunityResource(){return this.apiKey===tH(this._network.name)}static getRequest($,Q){if(Q==null)Q=tH($.name);let Z=new n5(`https://${PW0($.name)}/${Q}`);if(Z.allowGzip=!0,Q===tH($.name))Z.retryFunc=async(X,Y,z)=>{return V9("ChainstackProvider"),!0};return Z}}});var Dz;var hw=p(()=>{J1();R2();w4();Dz=class Dz extends m6{constructor($){if($==null)$="mainnet";let Q=W5.from($);r(Q.name==="mainnet","unsupported network","network",$);super("https://cloudflare-eth.com/",Q,{staticNetwork:Q})}}});function jW0($){return $&&typeof $.then==="function"}var HW0,Pc=2000,Hc="org.ethers.plugins.provider.Etherscan",MK,RW0,NW0=1,Mz;var mw=p(()=>{JK();BV();M2();J1();OK();R2();uH();fQ();HW0="1 11155111 17000 560048 2741 11124 33111 33139 42170 42161 421614 43114 43113 8453 84532 80069 80094 199 1029 81457 168587773 56 97 42220 11142220 252 2523 100 999 737373 747474 59144 59141 5000 5003 43521 143 10143 1287 1284 1285 10 11155420 204 5611 80002 137 534352 534351 1329 1328 146 14601 988 2201 1923 1924 167013 167000 130 1301 480 4801 51 50 324 300".split(/ /g);MK=class MK extends L7{baseUrl;constructor($){super(Hc);r0(this,{baseUrl:$})}clone(){return new MK(this.baseUrl)}};RW0=["enableCcipRead"];Mz=class Mz extends T7{network;apiKey;#$;constructor($,Q){let Z=Q!=null?Q:null;super();let X=W5.from($);r(HW0.indexOf(`${X.chainId}`)>=0,"unsupported network","network",X),this.#$=X.getPlugin(Hc),r0(this,{apiKey:Z,network:X})}getBaseUrl(){if(this.#$)return this.#$.baseUrl;switch(this.network.name){case"mainnet":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"holesky":return"https://api-holesky.etherscan.io";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"base":return"https://api.basescan.org";case"base-sepolia":return"https://api-sepolia.basescan.org";case"bnb":return"https://api.bscscan.com";case"bnbt":return"https://api-testnet.bscscan.com";case"matic":return"https://api.polygonscan.com";case"matic-amoy":return"https://api-amoy.polygonscan.com";case"matic-mumbai":return"https://api-testnet.polygonscan.com";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io";default:}r(!1,"unsupported network","network",this.network)}getUrl($,Q){let Z=Object.keys(Q).reduce((X,Y)=>{let z=Q[Y];if(z!=null)X+=`&${Y}=${z}`;return X},"");if(this.apiKey)Z+=`&apikey=${this.apiKey}`;return`https://api.etherscan.io/v2/api?chainid=${this.network.chainId}&module=${$}${Z}`}getPostUrl(){return`https://api.etherscan.io/v2/api?chainid=${this.network.chainId}`}getPostData($,Q){return Q.module=$,Q.apikey=this.apiKey,Q.chainid=this.network.chainId,Q}async detectNetwork(){return this.network}async fetch($,Q,Z){let X=NW0++,Y=Z?this.getPostUrl():this.getUrl($,Q),z=Z?this.getPostData($,Q):null;this.emit("debug",{action:"sendRequest",id:X,url:Y,payload:z});let J=new n5(Y);if(J.setThrottleParams({slotInterval:1000}),J.retryFunc=(G,U,D)=>{if(this.isCommunityResource())V9("Etherscan");return Promise.resolve(!0)},J.processFunc=async(G,U)=>{let D=U.hasBody()?JSON.parse(u9(U.body)):{},P=(typeof D.result==="string"?D.result:"").toLowerCase().indexOf("rate limit")>=0;if($==="proxy"){if(D&&D.status==0&&D.message=="NOTOK"&&P)this.emit("debug",{action:"receiveError",id:X,reason:"proxy-NOTOK",error:D}),U.throwThrottleError(D.result,Pc)}else if(P)this.emit("debug",{action:"receiveError",id:X,reason:"null result",error:D.result}),U.throwThrottleError(D.result,Pc);return U},z)J.setHeader("content-type","application/x-www-form-urlencoded; charset=UTF-8"),J.body=Object.keys(z).map((G)=>`${G}=${z[G]}`).join("&");let q=await J.send();try{q.assertOk()}catch(G){this.emit("debug",{action:"receiveError",id:X,error:G,reason:"assertOk"}),P0(!1,"response error","SERVER_ERROR",{request:J,response:q})}if(!q.hasBody())this.emit("debug",{action:"receiveError",id:X,error:"missing body",reason:"null body"}),P0(!1,"missing response","SERVER_ERROR",{request:J,response:q});let W=JSON.parse(u9(q.body));if($==="proxy"){if(W.jsonrpc!="2.0")this.emit("debug",{action:"receiveError",id:X,result:W,reason:"invalid JSON-RPC"}),P0(!1,"invalid JSON-RPC response (missing jsonrpc='2.0')","SERVER_ERROR",{request:J,response:q,info:{result:W}});if(W.error)this.emit("debug",{action:"receiveError",id:X,result:W,reason:"JSON-RPC error"}),P0(!1,"error response","SERVER_ERROR",{request:J,response:q,info:{result:W}});return this.emit("debug",{action:"receiveRequest",id:X,result:W}),W.result}else{if(W.status==0&&(W.message==="No records found"||W.message==="No transactions found"))return this.emit("debug",{action:"receiveRequest",id:X,result:W}),W.result;if(W.status!=1||typeof W.message==="string"&&!W.message.match(/^OK/))this.emit("debug",{action:"receiveError",id:X,result:W}),P0(!1,"error response","SERVER_ERROR",{request:J,response:q,info:{result:W}});return this.emit("debug",{action:"receiveRequest",id:X,result:W}),W.result}}_getTransactionPostData($){let Q={};for(let Z in $){if(RW0.indexOf(Z)>=0)continue;if($[Z]==null)continue;let X=$[Z];if(Z==="type"&&X===0)continue;if(Z==="blockTag"&&X==="latest")continue;if({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[Z])X=y8(X);else if(Z==="accessList")X="["+K9(X).map((Y)=>{return`{address:"${Y.address}",storageKeys:["${Y.storageKeys.join('","')}"]}`}).join(",")+"]";else if(Z==="blobVersionedHashes"){if(X.length===0)continue;P0(!1,"Etherscan API does not support blobVersionedHashes","UNSUPPORTED_OPERATION",{operation:"_getTransactionPostData",info:{transaction:$}})}else X=F0(X);Q[Z]=X}return Q}_checkError($,Q,Z){let X="";if(o5(Q,"SERVER_ERROR")){try{X=Q.info.result.error.message}catch(Y){}if(!X)try{X=Q.info.message}catch(Y){}}if($.method==="estimateGas"){if(!X.match(/revert/i)&&X.match(/insufficient funds/i))P0(!1,"insufficient funds","INSUFFICIENT_FUNDS",{transaction:$.transaction})}if($.method==="call"||$.method==="estimateGas"){if(X.match(/execution reverted/i)){let Y="";try{Y=Q.info.result.error.data}catch(J){}let z=$4.getBuiltinCallException($.method,$.transaction,Y);throw z.info={request:$,error:Q},z}}if(X){if($.method==="broadcastTransaction"){let Y=A8.from($.signedTransaction);if(X.match(/replacement/i)&&X.match(/underpriced/i))P0(!1,"replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:Y});if(X.match(/insufficient funds/))P0(!1,"insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:Y});if(X.match(/same hash was already imported|transaction nonce is too low|nonce too low/))P0(!1,"nonce has already been used","NONCE_EXPIRED",{transaction:Y})}}throw Q}async _detectNetwork(){return this.network}async _perform($){switch($.method){case"chainId":return this.network.chainId;case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getPriorityFee":if(this.network.name==="mainnet")return"1000000000";else if(this.network.name==="optimism")return"1000000";else throw Error("fallback onto the AbstractProvider default");case"getBalance":return this.fetch("account",{action:"balance",address:$.address,tag:$.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:$.address,tag:$.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:$.address,tag:$.blockTag});case"getStorage":return this.fetch("proxy",{action:"eth_getStorageAt",address:$.address,position:$.position,tag:$.blockTag});case"broadcastTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:$.signedTransaction},!0).catch((Q)=>{return this._checkError($,Q,$.signedTransaction)});case"getBlock":if("blockTag"in $)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:$.blockTag,boolean:$.includeTransactions?"true":"false"});P0(!1,"getBlock by blockHash not supported by Etherscan","UNSUPPORTED_OPERATION",{operation:"getBlock(blockHash)"});case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:$.hash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:$.hash});case"call":{if($.blockTag!=="latest")throw Error("EtherscanProvider does not support blockTag for call");let Q=this._getTransactionPostData($.transaction);Q.module="proxy",Q.action="eth_call";try{return await this.fetch("proxy",Q,!0)}catch(Z){return this._checkError($,Z,$.transaction)}}case"estimateGas":{let Q=this._getTransactionPostData($.transaction);Q.module="proxy",Q.action="eth_estimateGas";try{return await this.fetch("proxy",Q,!0)}catch(Z){return this._checkError($,Z,$.transaction)}}default:break}return super._perform($)}async getNetwork(){return this.network}async getEtherPrice(){if(this.network.name!=="mainnet")return 0;return parseFloat((await this.fetch("stats",{action:"ethprice"})).ethusd)}async getContract($){let Q=this._getAddress($);if(jW0(Q))Q=await Q;try{let Z=await this.fetch("contract",{action:"getabi",address:Q}),X=JSON.parse(Z);return new Z4(Q,X,this)}catch(Z){return null}}isCommunityResource(){return this.apiKey==null}}});function CW0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw Error("unable to locate global object")}var jc;var Rc=p(()=>{jc=CW0().WebSocket});class uX{#$;#Q;get filter(){return JSON.parse(this.#Q)}#Z;#X;#Y;constructor($,Q){this.#$=$,this.#Q=JSON.stringify(Q),this.#Z=null,this.#X=null,this.#Y=null}start(){this.#Z=this.#$.send("eth_subscribe",this.filter).then(($)=>{return this.#$._register($,this),$})}stop(){this.#Z.then(($)=>{if(this.#$.destroyed)return;this.#$.send("eth_unsubscribe",[$])}),this.#Z=null}pause($){P0($,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"}),this.#X=!!$}resume(){this.#X=null}_handleMessage($){if(this.#Z==null)return;if(this.#X===null){let Q=this.#Y;if(Q==null)Q=this._emit(this.#$,$);else Q=Q.then(async()=>{await this._emit(this.#$,$)});this.#Y=Q.then(()=>{if(this.#Y===Q)this.#Y=null})}}async _emit($,Q){throw Error("sub-classes must implemente this; _emit")}}var PK,HK,jK,Pz;var eH=p(()=>{OK();J1();w4();PK=class PK extends uX{constructor($){super($,["newHeads"])}async _emit($,Q){$.emit("block",parseInt(Q.number))}};HK=class HK extends uX{constructor($){super($,["newPendingTransactions"])}async _emit($,Q){$.emit("pending",Q)}};jK=class jK extends uX{#$;get logFilter(){return JSON.parse(this.#$)}constructor($,Q){super($,["logs",Q]);this.#$=JSON.stringify(Q)}async _emit($,Q){$.emit(this.logFilter,$._wrapLog(Q,$._network))}};Pz=class Pz extends pX{#$;#Q;#Z;constructor($,Q){let Z=Object.assign({},Q!=null?Q:{});if(r(Z.batchMaxCount==null||Z.batchMaxCount===1,"sockets-based providers do not support batches","options.batchMaxCount",Q),Z.batchMaxCount=1,Z.staticNetwork==null)Z.staticNetwork=!0;super($,Z);this.#$=new Map,this.#Q=new Map,this.#Z=new Map}_getSubscriber($){switch($.type){case"close":return new H3("close");case"block":return new PK(this);case"pending":return new HK(this);case"event":return new jK(this,$.filter);case"orphan":if($.filter.orphan==="drop-log")return new H3("drop-log")}return super._getSubscriber($)}_register($,Q){this.#Q.set($,Q);let Z=this.#Z.get($);if(Z){for(let X of Z)Q._handleMessage(X);this.#Z.delete($)}}async _send($){r(!Array.isArray($),"WebSocket does not support batch send","payload",$);let Q=new Promise((Z,X)=>{this.#$.set($.id,{payload:$,resolve:Z,reject:X})});return await this._waitUntilReady(),await this._write(JSON.stringify($)),[await Q]}async _processMessage($){let Q=JSON.parse($);if(Q&&typeof Q==="object"&&"id"in Q){let Z=this.#$.get(Q.id);if(Z==null){this.emit("error",H5("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:Q}));return}this.#$.delete(Q.id),Z.resolve(Q)}else if(Q&&Q.method==="eth_subscription"){let Z=Q.params.subscription,X=this.#Q.get(Z);if(X)X._handleMessage(Q.params.result);else{let Y=this.#Z.get(Z);if(Y==null)Y=[],this.#Z.set(Z,Y);Y.push(Q.params.result)}}else{this.emit("error",H5("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:Q}));return}}async _write($){throw Error("sub-classes must override this")}}});var vQ;var $j=p(()=>{Rc();eH();vQ=class vQ extends Pz{#$;#Q;get websocket(){if(this.#Q==null)throw Error("websocket closed");return this.#Q}constructor($,Q,Z){super(Q,Z);if(typeof $==="string")this.#$=()=>{return new jc($)},this.#Q=this.#$();else if(typeof $==="function")this.#$=$,this.#Q=$();else this.#$=null,this.#Q=$;this.websocket.onopen=async()=>{try{await this._start(),this.resume()}catch(X){console.log("failed to start WebsocketProvider",X)}},this.websocket.onmessage=(X)=>{this._processMessage(X.data)}}async _write($){this.websocket.send($)}async destroy(){if(this.#Q!=null)this.#Q.close(),this.#Q=null;super.destroy()}}});function LW0($){switch($){case"mainnet":return"mainnet.infura.io";case"goerli":return"goerli.infura.io";case"sepolia":return"sepolia.infura.io";case"arbitrum":return"arbitrum-mainnet.infura.io";case"arbitrum-goerli":return"arbitrum-goerli.infura.io";case"arbitrum-sepolia":return"arbitrum-sepolia.infura.io";case"base":return"base-mainnet.infura.io";case"base-goerlia":case"base-goerli":return"base-goerli.infura.io";case"base-sepolia":return"base-sepolia.infura.io";case"bnb":return"bsc-mainnet.infura.io";case"bnbt":return"bsc-testnet.infura.io";case"linea":return"linea-mainnet.infura.io";case"linea-goerli":return"linea-goerli.infura.io";case"linea-sepolia":return"linea-sepolia.infura.io";case"matic":return"polygon-mainnet.infura.io";case"matic-amoy":return"polygon-amoy.infura.io";case"matic-mumbai":return"polygon-mumbai.infura.io";case"optimism":return"optimism-mainnet.infura.io";case"optimism-goerli":return"optimism-goerli.infura.io";case"optimism-sepolia":return"optimism-sepolia.infura.io"}r(!1,"unsupported network","network",$)}var _V="84842078b09946638c03157f83405213",RK,G$;var pw=p(()=>{J1();fQ();R2();w4();$j();RK=class RK extends vQ{projectId;projectSecret;constructor($,Q){let Z=new G$($,Q),X=Z._getConnection();P0(!X.credentials,"INFURA WebSocket project secrets unsupported","UNSUPPORTED_OPERATION",{operation:"InfuraProvider.getWebSocketProvider()"});let Y=X.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(Y,Z._network);r0(this,{projectId:Z.projectId,projectSecret:Z.projectSecret})}isCommunityResource(){return this.projectId===_V}};G$=class G$ extends m6{projectId;projectSecret;constructor($,Q,Z){if($==null)$="mainnet";let X=W5.from($);if(Q==null)Q=_V;if(Z==null)Z=null;let Y=G$.getRequest(X,Q,Z);super(Y,X,{staticNetwork:X});r0(this,{projectId:Q,projectSecret:Z})}_getProvider($){try{return new G$($,this.projectId,this.projectSecret)}catch(Q){}return super._getProvider($)}isCommunityResource(){return this.projectId===_V}static getWebSocketProvider($,Q){return new RK($,Q)}static getRequest($,Q,Z){if(Q==null)Q=_V;if(Z==null)Z=null;let X=new n5(`https://${LW0($.name)}/v3/${Q}`);if(X.allowGzip=!0,Z)X.setCredentials("",Z);if(Q===_V)X.retryFunc=async(Y,z,J)=>{return V9("InfuraProvider"),!0};return X}}});function TW0($){switch($){case"mainnet":return"ethers.quiknode.pro";case"goerli":return"ethers.ethereum-goerli.quiknode.pro";case"sepolia":return"ethers.ethereum-sepolia.quiknode.pro";case"holesky":return"ethers.ethereum-holesky.quiknode.pro";case"arbitrum":return"ethers.arbitrum-mainnet.quiknode.pro";case"arbitrum-goerli":return"ethers.arbitrum-goerli.quiknode.pro";case"arbitrum-sepolia":return"ethers.arbitrum-sepolia.quiknode.pro";case"base":return"ethers.base-mainnet.quiknode.pro";case"base-goerli":return"ethers.base-goerli.quiknode.pro";case"base-spolia":return"ethers.base-sepolia.quiknode.pro";case"bnb":return"ethers.bsc.quiknode.pro";case"bnbt":return"ethers.bsc-testnet.quiknode.pro";case"matic":return"ethers.matic.quiknode.pro";case"matic-mumbai":return"ethers.matic-testnet.quiknode.pro";case"optimism":return"ethers.optimism.quiknode.pro";case"optimism-goerli":return"ethers.optimism-goerli.quiknode.pro";case"optimism-sepolia":return"ethers.optimism-sepolia.quiknode.pro";case"xdai":return"ethers.xdai.quiknode.pro"}r(!1,"unsupported network","network",$)}var Qj="919b412a057b5e9c9b6dce193c5a60242d6efadb",yQ;var uw=p(()=>{J1();fQ();R2();w4();yQ=class yQ extends m6{token;constructor($,Q){if($==null)$="mainnet";let Z=W5.from($);if(Q==null)Q=Qj;let X=yQ.getRequest(Z,Q);super(X,Z,{staticNetwork:Z});r0(this,{token:Q})}_getProvider($){try{return new yQ($,this.token)}catch(Q){}return super._getProvider($)}isCommunityResource(){return this.token===Qj}static getRequest($,Q){if(Q==null)Q=Qj;let Z=new n5(`https://${TW0($.name)}/${Q}`);if(Z.allowGzip=!0,Q===Qj)Z.retryFunc=async(X,Y,z)=>{return V9("QuickNodeProvider"),!0};return Z}}});function wW0($){for(let Q=$.length-1;Q>0;Q--){let Z=Math.floor(Math.random()*(Q+1)),X=$[Q];$[Q]=$[Z],$[Z]=X}}function BW0($){return new Promise((Q)=>{setTimeout(Q,$)})}function iw(){return new Date().getTime()}function cw($){return JSON.stringify($,(Q,Z)=>{if(typeof Z==="bigint")return{type:"bigint",value:Z.toString()};return Z})}async function EW0($,Q){while($.blockNumber<0||$.blockNumber<Q){if(!$._updateNumber)$._updateNumber=(async()=>{try{let Z=await $.provider.getBlockNumber();if(Z>$.blockNumber)$.blockNumber=Z}catch(Z){$.blockNumber=-2,$._lastFatalError=Z,$._lastFatalErrorTimestamp=iw()}$._updateNumber=null})();if(await $._updateNumber,$.outOfSync++,$._lastFatalError)break}}function NK($){if($==null)return"null";if(Array.isArray($))return"["+$.map(NK).join(",")+"]";if(typeof $==="object"&&typeof $.toJSON==="function")return NK($.toJSON());switch(typeof $){case"boolean":case"symbol":return $.toString();case"bigint":case"number":return BigInt($).toString();case"string":return JSON.stringify($);case"object":{let Q=Object.keys($);return Q.sort(),"{"+Q.map((Z)=>`${JSON.stringify(Z)}:${NK($[Z])}`).join(",")+"}"}}throw console.log("Could not serialize",$),Error("Hmm...")}function dw($,Q){if("error"in Q){let X=Q.error,Y;if(o5(X,"CALL_EXCEPTION"))Y=NK(Object.assign({},X,{shortMessage:void 0,reason:void 0,info:void 0}));else Y=NK(X);return{tag:Y,value:X}}let Z=Q.result;return{tag:NK(Z),value:Z}}function Zj($,Q){let Z=new Map;for(let{value:Y,tag:z,weight:J}of Q){let q=Z.get(z)||{value:Y,weight:0};q.weight+=J,Z.set(z,q)}let X=null;for(let Y of Z.values())if(Y.weight>=$&&(!X||Y.weight>X.weight))X=Y;if(X)return X.value;return}function ow($,Q){let Z=0,X=new Map,Y=null,z=[];for(let{value:q,tag:W,weight:G}of Q)if(q instanceof Error){let U=X.get(W)||{value:q,weight:0};if(U.weight+=G,X.set(W,U),Y==null||U.weight>Y.weight)Y=U}else z.push(BigInt(q)),Z+=G;if(Z<$){if(Y&&Y.weight>=$)return Y.value;return}z.sort((q,W)=>q<W?-1:W>q?1:0);let J=Math.floor(z.length/2);if(z.length%2)return z[J];return(z[J-1]+z[J]+FW0)/AW0}function lw($,Q){let Z=Zj($,Q);if(Z!==void 0)return Z;for(let X of Q)if(X.value)return X.value;return}function IW0($,Q){if($===1)return G1(ow($,Q),"%internal");let Z=new Map,X=(J,q)=>{let W=Z.get(J)||{result:J,weight:0};W.weight+=q,Z.set(J,W)};for(let{weight:J,value:q}of Q){let W=G1(q);X(W-1,J),X(W,J),X(W+1,J)}let Y=0,z=void 0;for(let{weight:J,result:q}of Z.values())if(J>=$&&(J>Y||z!=null&&J===Y&&q>z))Y=J,z=q;return z}var FW0,AW0,Nc,Cc,Hz;var nw=p(()=>{J1();OK();R2();FW0=BigInt("1"),AW0=BigInt("2");Nc={stallTimeout:400,priority:1,weight:1},Cc={blockNumber:-2,requests:0,lateResponses:0,errorResponses:0,outOfSync:-1,unsupportedEvents:0,rollingDuration:0,score:0,_network:null,_updateNumber:null,_totalTime:0,_lastFatalError:null,_lastFatalErrorTimestamp:0};Hz=class Hz extends T7{quorum;eventQuorum;eventWorkers;#$;#Q;#Z;constructor($,Q,Z){super(Q,Z);if(this.#$=$.map((X)=>{if(X instanceof T7)return Object.assign({provider:X},Nc,Cc);else return Object.assign({},Nc,X,Cc)}),this.#Q=-2,this.#Z=null,Z&&Z.quorum!=null)this.quorum=Z.quorum;else this.quorum=Math.ceil(this.#$.reduce((X,Y)=>{return X+=Y.weight,X},0)/2);this.eventQuorum=1,this.eventWorkers=1,r(this.quorum<=this.#$.reduce((X,Y)=>X+Y.weight,0),"quorum exceed provider weight","quorum",this.quorum)}get providerConfigs(){return this.#$.map(($)=>{let Q=Object.assign({},$);for(let Z in Q)if(Z[0]==="_")delete Q[Z];return Q})}async _detectNetwork(){return W5.from(e0(await this._perform({method:"chainId"})))}async _translatePerform($,Q){switch(Q.method){case"broadcastTransaction":return await $.broadcastTransaction(Q.signedTransaction);case"call":return await $.call(Object.assign({},Q.transaction,{blockTag:Q.blockTag}));case"chainId":return(await $.getNetwork()).chainId;case"estimateGas":return await $.estimateGas(Q.transaction);case"getBalance":return await $.getBalance(Q.address,Q.blockTag);case"getBlock":{let Z="blockHash"in Q?Q.blockHash:Q.blockTag;return await $.getBlock(Z,Q.includeTransactions)}case"getBlockNumber":return await $.getBlockNumber();case"getCode":return await $.getCode(Q.address,Q.blockTag);case"getGasPrice":return(await $.getFeeData()).gasPrice;case"getPriorityFee":return(await $.getFeeData()).maxPriorityFeePerGas;case"getLogs":return await $.getLogs(Q.filter);case"getStorage":return await $.getStorage(Q.address,Q.position,Q.blockTag);case"getTransaction":return await $.getTransaction(Q.hash);case"getTransactionCount":return await $.getTransactionCount(Q.address,Q.blockTag);case"getTransactionReceipt":return await $.getTransactionReceipt(Q.hash);case"getTransactionResult":return await $.getTransactionResult(Q.hash)}}#X($){let Q=Array.from($).map((X)=>X.config),Z=this.#$.slice();wW0(Z),Z.sort((X,Y)=>X.priority-Y.priority);for(let X of Z){if(X._lastFatalError)continue;if(Q.indexOf(X)===-1)return X}return null}#Y($,Q){let Z=this.#X($);if(Z==null)return null;let X={config:Z,result:null,didBump:!1,perform:null,staller:null},Y=iw();return X.perform=(async()=>{try{Z.requests++;let J=await this._translatePerform(Z.provider,Q);X.result={result:J}}catch(J){Z.errorResponses++,X.result={error:J}}let z=iw()-Y;Z._totalTime+=z,Z.rollingDuration=0.95*Z.rollingDuration+0.05*z,X.perform=null})(),X.staller=(async()=>{await BW0(Z.stallTimeout),X.staller=null})(),$.add(X),X}async#z(){let $=this.#Z;if(!$){let Q=[];this.#$.forEach((Z)=>{Q.push((async()=>{if(await EW0(Z,0),!Z._lastFatalError)Z._network=await Z.provider.getNetwork()})())}),this.#Z=$=(async()=>{await Promise.all(Q);let Z=null;for(let X of this.#$){if(X._lastFatalError)continue;let Y=X._network;if(Z==null)Z=Y.chainId;else if(Y.chainId!==Z)P0(!1,"cannot mix providers on different networks","UNSUPPORTED_OPERATION",{operation:"new FallbackProvider"})}})()}await $}async#J($,Q){let Z=[];for(let X of $)if(X.result!=null){let{tag:Y,value:z}=dw(Q.method,X.result);Z.push({tag:Y,value:z,weight:X.config.weight})}if(Z.reduce((X,Y)=>X+Y.weight,0)<this.quorum)return;switch(Q.method){case"getBlockNumber":{if(this.#Q===-2)this.#Q=Math.ceil(G1(ow(this.quorum,this.#$.filter((Y)=>!Y._lastFatalError).map((Y)=>({value:Y.blockNumber,tag:G1(Y.blockNumber).toString(),weight:Y.weight})))));let X=IW0(this.quorum,Z);if(X===void 0)return;if(X>this.#Q)this.#Q=X;return this.#Q}case"getGasPrice":case"getPriorityFee":case"estimateGas":return ow(this.quorum,Z);case"getBlock":if("blockTag"in Q&&Q.blockTag==="pending")return lw(this.quorum,Z);return Zj(this.quorum,Z);case"call":case"chainId":case"getBalance":case"getTransactionCount":case"getCode":case"getStorage":case"getTransaction":case"getTransactionReceipt":case"getLogs":return Zj(this.quorum,Z);case"broadcastTransaction":return lw(this.quorum,Z)}P0(!1,"unsupported method","UNSUPPORTED_OPERATION",{operation:`_perform(${cw(Q.method)})`})}async#W($,Q){if($.size===0)throw Error("no runners?!");let Z=[],X=0;for(let z of $){if(z.perform)Z.push(z.perform);if(z.staller){Z.push(z.staller);continue}if(z.didBump)continue;z.didBump=!0,X++}let Y=await this.#J($,Q);if(Y!==void 0){if(Y instanceof Error)throw Y;return Y}for(let z=0;z<X;z++)this.#Y($,Q);return P0(Z.length>0,"quorum not met","SERVER_ERROR",{request:"%sub-requests",info:{request:Q,results:Array.from($).map((z)=>cw(z.result))}}),await Promise.race(Z),await this.#W($,Q)}async _perform($){if($.method==="broadcastTransaction"){let Y=this.#$.map((q)=>null),z=this.#$.map(async({provider:q,weight:W},G)=>{try{let U=await q._perform($);Y[G]=Object.assign(dw($.method,{result:U}),{weight:W})}catch(U){Y[G]=Object.assign(dw($.method,{error:U}),{weight:W})}});while(!0){let q=Y.filter((U)=>U!=null);for(let{value:U}of q)if(!(U instanceof Error))return U;let W=Zj(this.quorum,Y.filter((U)=>U!=null));if(o5(W,"INSUFFICIENT_FUNDS"))throw W;let G=z.filter((U,D)=>Y[D]==null);if(G.length===0)break;await Promise.race(G)}let J=lw(this.quorum,Y);if(P0(J!==void 0,"problem multi-broadcasting","SERVER_ERROR",{request:"%sub-requests",info:{request:$,results:Y.map(cw)}}),J instanceof Error)throw J;return J}await this.#z();let Q=new Set,Z=0;while(!0){let Y=this.#Y(Q,$);if(Y==null)break;if(Z+=Y.config.weight,Z>=this.quorum)break}let X=await this.#W(Q,$);for(let Y of Q)if(Y.perform&&Y.result==null)Y.config.lateResponses++;return X}async destroy(){for(let{provider:$}of this.#$)$.destroy();super.destroy()}}});function _W0($){return $&&typeof $.send==="function"&&typeof $.close==="function"}function Xj($,Q){if(Q==null)Q={};let Z=(J)=>{if(Q[J]==="-")return!1;if(typeof Q.exclusive==="string")return J===Q.exclusive;if(Array.isArray(Q.exclusive))return Q.exclusive.indexOf(J)!==-1;return!0};if(typeof $==="string"&&$.match(/^https?:/))return new m6($);if(typeof $==="string"&&$.match(/^wss?:/)||_W0($))return new vQ($);let X=null;try{X=W5.from($)}catch(J){}let Y=[];if(Z("publicPolygon")&&X){if(X.name==="matic")Y.push(new m6("https://polygon-rpc.com/",X,{staticNetwork:X}));else if(X.name==="matic-amoy")Y.push(new m6("https://rpc-amoy.polygon.technology/",X,{staticNetwork:X}))}if(Z("alchemy"))try{Y.push(new xQ($,Q.alchemy))}catch(J){}if(Z("ankr")&&Q.ankr!=null)try{Y.push(new kQ($,Q.ankr))}catch(J){}if(Z("chainstack"))try{Y.push(new bQ($,Q.chainstack))}catch(J){}if(Z("cloudflare"))try{Y.push(new Dz($))}catch(J){}if(Z("etherscan"))try{Y.push(new Mz($,Q.etherscan))}catch(J){}if(Z("infura"))try{let J=Q.infura,q=void 0;if(typeof J==="object")q=J.projectSecret,J=J.projectId;Y.push(new G$($,J,q))}catch(J){}if(Z("quicknode"))try{let J=Q.quicknode;Y.push(new yQ($,J))}catch(J){}if(P0(Y.length,"unsupported default network","UNSUPPORTED_OPERATION",{operation:"getDefaultProvider"}),Y.length===1)return Y[0];let z=Math.floor(Y.length/2);if(z>2)z=2;if(X&&SW0.indexOf(X.name)!==-1)z=1;if(Q&&Q.quorum)z=Q.quorum;return new Hz(Y,void 0,{quorum:z})}var SW0;var Lc=p(()=>{J1();vw();yw();gw();hw();mw();pw();uw();nw();w4();R2();$j();SW0="goerli kovan sepolia classicKotti optimism-goerli arbitrum-goerli matic-mumbai bnbt".split(" ")});var CK;var Tc=p(()=>{J1();oH();CK=class CK extends F7{signer;#$;#Q;constructor($){super($.provider);r0(this,{signer:$}),this.#$=null,this.#Q=0}async getAddress(){return this.signer.getAddress()}connect($){return new CK(this.signer.connect($))}async getNonce($){if($==="pending"){if(this.#$==null)this.#$=super.getNonce("pending");let Q=this.#Q;return await this.#$+Q}return super.getNonce($)}increment(){this.#Q++}reset(){this.#Q=0,this.#$=null}async sendTransaction($){let Q=this.getNonce("pending");return this.increment(),$=await this.signer.populateTransaction($),$.nonce=await Q,await this.signer.sendTransaction($)}signTransaction($){return this.signer.signTransaction($)}signMessage($){return this.signer.signMessage($)}signTypedData($,Q,Z){return this.signer.signTypedData($,Q,Z)}}});var U$;var Fc=p(()=>{J1();w4();U$=class U$ extends rH{#$;#Q;constructor($,Q,Z){let X=Object.assign({},Z!=null?Z:{},{batchMaxCount:1});r($&&$.request,"invalid EIP-1193 provider","ethereum",$);super(Q,X);if(this.#Q=null,Z&&Z.providerInfo)this.#Q=Z.providerInfo;this.#$=async(Y,z)=>{let J={method:Y,params:z};this.emit("debug",{action:"sendEip1193Request",payload:J});try{let q=await $.request(J);return this.emit("debug",{action:"receiveEip1193Result",result:q}),q}catch(q){let W=Error(q.message);throw W.code=q.code,W.data=q.data,W.payload=J,this.emit("debug",{action:"receiveEip1193Error",error:W}),W}}}get providerInfo(){return this.#Q}async send($,Q){return await this._start(),await super.send($,Q)}async _send($){r(!Array.isArray($),"EIP-1193 does not support batch request","payload",$);try{let Q=await this.#$($.method,$.params||[]);return[{id:$.id,result:Q}]}catch(Q){return[{id:$.id,error:{code:Q.code,data:Q.data,message:Q.message}}]}}getRpcError($,Q){switch(Q=JSON.parse(JSON.stringify(Q)),Q.error.code||-1){case 4001:Q.error.message=`ethers-user-denied: ${Q.error.message}`;break;case 4200:Q.error.message=`ethers-unsupported: ${Q.error.message}`;break}return super.getRpcError($,Q)}async hasSigner($){if($==null)$=0;let Q=await this.send("eth_accounts",[]);if(typeof $==="number")return Q.length>$;return $=$.toLowerCase(),Q.filter((Z)=>Z.toLowerCase()===$).length!==0}async getSigner($){if($==null)$=0;if(!await this.hasSigner($))try{await this.#$("eth_requestAccounts",[])}catch(Q){let Z=Q.payload;throw this.getRpcError(Z,{id:Z.id,error:Q})}return await super.getSigner($)}static async discover($){if($==null)$={};if($.provider)return new U$($.provider);let Q=$.window?$.window:typeof window<"u"?window:null;if(Q==null)return null;let Z=$.anyProvider;if(Z&&Q.ethereum)return new U$(Q.ethereum);if(!(("addEventListener"in Q)&&("dispatchEvent"in Q)&&("removeEventListener"in Q)))return null;let X=$.timeout?$.timeout:300;if(X===0)return null;return await new Promise((Y,z)=>{let J=[],q=(U)=>{if(J.push(U.detail),Z)W()},W=()=>{if(clearTimeout(G),J.length)if($&&$.filter){let U=$.filter(J.map((D)=>Object.assign({},D.info)));if(U==null)Y(null);else if(U instanceof U$)Y(U);else{let D=null;if(U.uuid)D=J.filter((H)=>U.uuid===H.info.uuid)[0];if(D){let{provider:P,info:H}=D;Y(new U$(P,void 0,{providerInfo:H}))}else z(H5("filter returned unknown info","UNSUPPORTED_OPERATION",{value:U}))}}else{let{provider:U,info:D}=J[0];Y(new U$(U,void 0,{providerInfo:D}))}else Y(null);Q.removeEventListener("eip6963:announceProvider",q)},G=setTimeout(()=>{W()},X);Q.addEventListener("eip6963:announceProvider",q),Q.dispatchEvent(new Event("eip6963:requestProvider"))})}}});function fW0($){switch($){case"mainnet":return"https://eth.blockscout.com/api/eth-rpc";case"sepolia":return"https://eth-sepolia.blockscout.com/api/eth-rpc";case"holesky":return"https://eth-holesky.blockscout.com/api/eth-rpc";case"classic":return"https://etc.blockscout.com/api/eth-rpc";case"arbitrum":return"https://arbitrum.blockscout.com/api/eth-rpc";case"base":return"https://base.blockscout.com/api/eth-rpc";case"base-sepolia":return"https://base-sepolia.blockscout.com/api/eth-rpc";case"matic":return"https://polygon.blockscout.com/api/eth-rpc";case"optimism":return"https://optimism.blockscout.com/api/eth-rpc";case"optimism-sepolia":return"https://optimism-sepolia.blockscout.com/api/eth-rpc";case"xdai":return"https://gnosis.blockscout.com/api/eth-rpc"}r(!1,"unsupported network","network",$)}var jz;var Ac=p(()=>{J1();R2();w4();jz=class jz extends m6{apiKey;constructor($,Q){if($==null)$="mainnet";let Z=W5.from($);if(Q==null)Q=null;let X=jz.getRequest(Z);super(X,Z,{staticNetwork:Z});r0(this,{apiKey:Q})}_getProvider($){try{return new jz($,this.apiKey)}catch(Q){}return super._getProvider($)}isCommunityResource(){return this.apiKey===null}getRpcRequest($){let Q=super.getRpcRequest($);if(Q&&Q.method==="eth_estimateGas"&&Q.args.length==1)Q.args=Q.args.slice(),Q.args.push("latest");return Q}getRpcError($,Q){let Z=Q?Q.error:null;if(Z&&Z.code===-32015&&!J5(Z.data||"",!0)){let X={"assert(false)":"01","arithmetic underflow or overflow":"11","division or modulo by zero":"12","out-of-bounds array access; popping on an empty array":"31","out-of-bounds access of an array or bytesN":"32"},Y="";if(Z.message==="VM execution error.")Y=X[Z.data]||"";else if(X[Z.message||""])Y=X[Z.message||""];if(Y)Z.message+=` (reverted: ${Z.data})`,Z.data="0x4e487b7100000000000000000000000000000000000000000000000000000000000000"+Y}else if(Z&&Z.code===-32000){if(Z.message==="wrong transaction nonce")Z.message+=" (nonce too low)"}return super.getRpcError($,Q)}static getRequest($){let Q=new n5(fW0($.name));return Q.allowGzip=!0,Q}}});function kW0($){switch($){case"mainnet":return"eth-mainnet.gateway.pokt.network";case"goerli":return"eth-goerli.gateway.pokt.network";case"matic":return"poly-mainnet.gateway.pokt.network";case"matic-mumbai":return"polygon-mumbai-rpc.gateway.pokt.network"}r(!1,"unsupported network","network",$)}var Yj="62e1ad51b37b8e00394bda3b",Rz;var wc=p(()=>{J1();fQ();R2();w4();Rz=class Rz extends m6{applicationId;applicationSecret;constructor($,Q,Z){if($==null)$="mainnet";let X=W5.from($);if(Q==null)Q=Yj;if(Z==null)Z=null;let Y={staticNetwork:X},z=Rz.getRequest(X,Q,Z);super(z,X,Y);r0(this,{applicationId:Q,applicationSecret:Z})}_getProvider($){try{return new Rz($,this.applicationId,this.applicationSecret)}catch(Q){}return super._getProvider($)}static getRequest($,Q,Z){if(Q==null)Q=Yj;let X=new n5(`https://${kW0($.name)}/v1/lb/${Q}`);if(X.allowGzip=!0,Z)X.setCredentials("",Z);if(Q===Yj)X.retryFunc=async(Y,z,J)=>{return V9("PocketProvider"),!0};return X}isCommunityResource(){return this.applicationId===Yj}}});var Jj=void 0;var Bc=()=>{};var zj=p(()=>{OK();oH();fQ();Lc();Rw();R2();Tc();uH();qK();nw();w4();Fc();yw();Ac();vw();hw();gw();mw();pw();wc();uw();Bc();eH();$j();eH()});var V$;var qj=p(()=>{F8();K$();zj();M2();J1();V$=class V$ extends F7{address;#$;constructor($,Q){super(Q);r($&&typeof $.sign==="function","invalid private key","privateKey","[ REDACTED ]"),this.#$=$;let Z=H7(this.signingKey.publicKey);r0(this,{address:Z})}get signingKey(){return this.#$}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect($){return new V$(this.#$,$)}async signTransaction($){$=T4($);let{to:Q,from:Z}=await T6({to:$.to?k6($.to,this):void 0,from:$.from?k6($.from,this):void 0});if(Q!=null)$.to=Q;if(Z!=null)$.from=Z;if($.from!=null)r(R1($.from)===this.address,"transaction from address mismatch","tx.from",$.from),delete $.from;let X=A8.from($);return X.signature=this.signingKey.sign(X.unsignedHash),X.serialized}async signMessage($){return this.signMessageSync($)}signMessageSync($){return this.signingKey.sign(Yz($)).serialized}authorizeSync($){r(typeof $.address==="string","invalid address for authorizeSync","auth.address",$);let Q=this.signingKey.sign(Qz($));return Object.assign({},{address:R1($.address),nonce:e0($.nonce||0),chainId:e0($.chainId||0)},{signature:Q})}async authorize($){return $=Object.assign({},$,{address:await k6($.address,this)}),this.authorizeSync(await this.populateAuthorization($))}async signTypedData($,Q,Z){let X=await M8.resolveNames($,Q,Z,async(Y)=>{P0(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:Y}});let z=await this.provider.resolveName(Y);return P0(z!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:Y}),z});return this.signingKey.sign(M8.hash(X.domain,Q,X.value)).serialized}}});function Ec($,Q){let Z=97;return $.reduce((X,Y)=>{if(Y===Q)Z++;else if(Y.match(xW0))X.push(String.fromCharCode(Z)+Y);else Z=97,X.push(Y);return X},[])}function bW0($,Q){for(let Y=Wj.length-1;Y>=0;Y--)$=$.split(Wj[Y]).join(Q.substring(2*Y,2*Y+2));let Z=[],X=$.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(Y,z,J,q)=>{if(J)for(let W=parseInt(J);W>=0;W--)Z.push(";");else Z.push(z.toLowerCase());return""});if(X)throw Error(`leftovers: ${JSON.stringify(X)}`);return Ec(Ec(Z,";"),":")}function Kj($){return r($[0]==="0","unsupported auwl data","data",$),bW0($.substring(1+2*Wj.length),$.substring(1,1+2*Wj.length))}var Wj=" !#$%&'()*+,-./<=>?@[]^_`{|}~",xW0;var rw=p(()=>{J1();xW0=/^[a-z]*$/i});class Nz{locale;constructor($){r0(this,{locale:$})}split($){return $.toLowerCase().split(/\s+/g)}join($){return $.join(" ")}}var aw=p(()=>{J1()});var gQ;var Gj=p(()=>{K$();J1();rw();aw();gQ=class gQ extends Nz{#$;#Q;constructor($,Q,Z){super($);this.#$=Q,this.#Q=Z,this.#Z=null}get _data(){return this.#$}_decodeWords(){return Kj(this.#$)}#Z;#X(){if(this.#Z==null){let $=this._decodeWords();if(U9($.join(`
`)+`
`)!==this.#Q)throw Error(`BIP39 Wordlist for ${this.locale} FAILED`);this.#Z=$}return this.#Z}getWord($){let Q=this.#X();return r($>=0&&$<Q.length,`invalid word index: ${$}`,"index",$),Q[$]}getWordIndex($){return this.#X().indexOf($)}}});var vW0="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",yW0="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60",sw=null,N2;var SV=p(()=>{Gj();N2=class N2 extends gQ{constructor(){super("en",vW0,yW0)}static wordlist(){if(sw==null)sw=new N2;return sw}}});function Ic($){return(1<<$)-1<<8-$&255}function gW0($){return(1<<$)-1&255}function tw($,Q){if(CX("NFKD"),Q==null)Q=N2.wordlist();let Z=Q.split($);r(Z.length%3===0&&Z.length>=12&&Z.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");let X=new Uint8Array(Math.ceil(11*Z.length/8)),Y=0;for(let G=0;G<Z.length;G++){let U=Q.getWordIndex(Z[G].normalize("NFKD"));r(U>=0,`invalid mnemonic word at index ${G}`,"mnemonic","[ REDACTED ]");for(let D=0;D<11;D++){if(U&1<<10-D)X[Y>>3]|=1<<7-Y%8;Y++}}let z=32*Z.length/3,J=Z.length/3,q=Ic(J),W=x0(V8(X.slice(0,z/8)))[0]&q;return r(W===(X[X.length-1]&q),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),F0(X.slice(0,z/8))}function ew($,Q){if(r($.length%4===0&&$.length>=16&&$.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),Q==null)Q=N2.wordlist();let Z=[0],X=11;for(let J=0;J<$.length;J++)if(X>8)Z[Z.length-1]<<=8,Z[Z.length-1]|=$[J],X-=8;else Z[Z.length-1]<<=X,Z[Z.length-1]|=$[J]>>8-X,Z.push($[J]&gW0(8-X)),X+=3;let Y=$.length/4,z=parseInt(V8($).substring(2,4),16)&Ic(Y);return Z[Z.length-1]<<=Y,Z[Z.length-1]|=z>>8-Y,Q.join(Z.map((J)=>Q.getWord(J)))}class A7{phrase;password;wordlist;entropy;constructor($,Q,Z,X,Y){if(X==null)X="";if(Y==null)Y=N2.wordlist();W9($,$B,"Mnemonic"),r0(this,{phrase:Z,password:X,wordlist:Y,entropy:Q})}computeSeed(){let $=p5("mnemonic"+this.password,"NFKD");return d9(p5(this.phrase,"NFKD"),$,2048,64,"sha512")}static fromPhrase($,Q,Z){let X=tw($,Z);return $=ew(x0(X),Z),new A7($B,X,$,Q,Z)}static fromEntropy($,Q,Z){let X=x0($,"entropy"),Y=ew(X,Z);return new A7($B,F0(X),Y,Q,Z)}static entropyToPhrase($,Q){let Z=x0($,"entropy");return ew(Z,Q)}static phraseToEntropy($,Q){return tw($,Q)}static isValidMnemonic($,Q){try{return tw($,Q),!0}catch(Z){}return!1}}var $B;var Uj=p(()=>{g8();J1();SV();$B={}});function ZB($){let Q=[];for(let Z=0;Z<$.length;Z+=4)Q.push($[Z]<<24|$[Z+1]<<16|$[Z+2]<<8|$[Z+3]);return Q}class Dj{get key(){return B9(this,Oj,"f").slice()}constructor($){if(Oj.set(this,void 0),B7.set(this,void 0),O$.set(this,void 0),!(this instanceof Dj))throw Error("AES must be instanitated with `new`");QB(this,Oj,new Uint8Array($),"f");let Q=hW0[this.key.length];if(Q==null)throw TypeError("invalid key size (must be 16, 24 or 32 bytes)");QB(this,O$,[],"f"),QB(this,B7,[],"f");for(let G=0;G<=Q;G++)B9(this,O$,"f").push([0,0,0,0]),B9(this,B7,"f").push([0,0,0,0]);let Z=(Q+1)*4,X=this.key.length/4,Y=ZB(this.key),z;for(let G=0;G<X;G++)z=G>>2,B9(this,O$,"f")[z][G%4]=Y[G],B9(this,B7,"f")[Q-z][G%4]=Y[G];let J=0,q=X,W;while(q<Z){if(W=Y[X-1],Y[0]^=w7[W>>16&255]<<24^w7[W>>8&255]<<16^w7[W&255]<<8^w7[W>>24&255]^mW0[J]<<24,J+=1,X!=8)for(let P=1;P<X;P++)Y[P]^=Y[P-1];else{for(let P=1;P<X/2;P++)Y[P]^=Y[P-1];W=Y[X/2-1],Y[X/2]^=w7[W&255]^w7[W>>8&255]<<8^w7[W>>16&255]<<16^w7[W>>24&255]<<24;for(let P=X/2+1;P<X;P++)Y[P]^=Y[P-1]}let G=0,U,D;while(G<X&&q<Z)U=q>>2,D=q%4,B9(this,O$,"f")[U][D]=Y[G],B9(this,B7,"f")[Q-U][D]=Y[G++],q++}for(let G=1;G<Q;G++)for(let U=0;U<4;U++)W=B9(this,B7,"f")[G][U],B9(this,B7,"f")[G][U]=rW0[W>>24&255]^aW0[W>>16&255]^sW0[W>>8&255]^tW0[W&255]}encrypt($){if($.length!=16)throw TypeError("invalid plaintext size (must be 16 bytes)");let Q=B9(this,O$,"f").length-1,Z=[0,0,0,0],X=ZB($);for(let J=0;J<4;J++)X[J]^=B9(this,O$,"f")[0][J];for(let J=1;J<Q;J++){for(let q=0;q<4;q++)Z[q]=pW0[X[q]>>24&255]^uW0[X[(q+1)%4]>>16&255]^cW0[X[(q+2)%4]>>8&255]^dW0[X[(q+3)%4]&255]^B9(this,O$,"f")[J][q];X=Z.slice()}let Y=new Uint8Array(16),z=0;for(let J=0;J<4;J++)z=B9(this,O$,"f")[Q][J],Y[4*J]=(w7[X[J]>>24&255]^z>>24)&255,Y[4*J+1]=(w7[X[(J+1)%4]>>16&255]^z>>16)&255,Y[4*J+2]=(w7[X[(J+2)%4]>>8&255]^z>>8)&255,Y[4*J+3]=(w7[X[(J+3)%4]&255]^z)&255;return Y}decrypt($){if($.length!=16)throw TypeError("invalid ciphertext size (must be 16 bytes)");let Q=B9(this,B7,"f").length-1,Z=[0,0,0,0],X=ZB($);for(let J=0;J<4;J++)X[J]^=B9(this,B7,"f")[0][J];for(let J=1;J<Q;J++){for(let q=0;q<4;q++)Z[q]=lW0[X[q]>>24&255]^iW0[X[(q+3)%4]>>16&255]^oW0[X[(q+2)%4]>>8&255]^nW0[X[(q+1)%4]&255]^B9(this,B7,"f")[J][q];X=Z.slice()}let Y=new Uint8Array(16),z=0;for(let J=0;J<4;J++)z=B9(this,B7,"f")[Q][J],Y[4*J]=(Vj[X[J]>>24&255]^z>>24)&255,Y[4*J+1]=(Vj[X[(J+3)%4]>>16&255]^z>>16)&255,Y[4*J+2]=(Vj[X[(J+2)%4]>>8&255]^z>>8)&255,Y[4*J+3]=(Vj[X[(J+1)%4]&255]^z)&255;return Y}}var B9=function($,Q,Z,X){if(Z==="a"&&!X)throw TypeError("Private accessor was defined without a getter");if(typeof Q==="function"?$!==Q||!X:!Q.has($))throw TypeError("Cannot read private member from an object whose class did not declare it");return Z==="m"?X:Z==="a"?X.call($):X?X.value:Q.get($)},QB=function($,Q,Z,X,Y){if(X==="m")throw TypeError("Private method is not writable");if(X==="a"&&!Y)throw TypeError("Private accessor was defined without a setter");if(typeof Q==="function"?$!==Q||!Y:!Q.has($))throw TypeError("Cannot write private member to an object whose class did not declare it");return X==="a"?Y.call($,Z):Y?Y.value=Z:Q.set($,Z),Z},Oj,B7,O$,hW0,mW0,w7,Vj,pW0,uW0,cW0,dW0,lW0,iW0,oW0,nW0,rW0,aW0,sW0,tW0;var _c=p(()=>{/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */hW0={16:10,24:12,32:14},mW0=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],w7=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Vj=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],pW0=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],uW0=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],cW0=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],dW0=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],lW0=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],iW0=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],oW0=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239000,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],nW0=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998000,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],rW0=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],aW0=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],sW0=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239000,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],tW0=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998000,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];Oj=new WeakMap,B7=new WeakMap,O$=new WeakMap});class fV{constructor($,Q,Z){if(Z&&!(this instanceof Z))throw Error(`${$} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new Dj(Q)},name:{enumerable:!0,value:$}})}}var XB=p(()=>{_c()});var Mj=function($,Q,Z,X,Y){if(X==="m")throw TypeError("Private method is not writable");if(X==="a"&&!Y)throw TypeError("Private accessor was defined without a setter");if(typeof Q==="function"?$!==Q||!Y:!Q.has($))throw TypeError("Cannot write private member to an object whose class did not declare it");return X==="a"?Y.call($,Z):Y?Y.value=Z:Q.set($,Z),Z},LK=function($,Q,Z,X){if(Z==="a"&&!X)throw TypeError("Private accessor was defined without a getter");if(typeof Q==="function"?$!==Q||!X:!Q.has($))throw TypeError("Cannot read private member from an object whose class did not declare it");return Z==="m"?X:Z==="a"?X.call($):X?X.value:Q.get($)},kV,hQ,xV;var Sc=p(()=>{XB();xV=class xV extends fV{constructor($,Q){super("ECC",$,xV);if(kV.set(this,void 0),hQ.set(this,void 0),Q){if(Q.length%16)throw TypeError("invalid iv size (must be 16 bytes)");Mj(this,kV,new Uint8Array(Q),"f")}else Mj(this,kV,new Uint8Array(16),"f");Mj(this,hQ,this.iv,"f")}get iv(){return new Uint8Array(LK(this,kV,"f"))}encrypt($){if($.length%16)throw TypeError("invalid plaintext size (must be multiple of 16 bytes)");let Q=new Uint8Array($.length);for(let Z=0;Z<$.length;Z+=16){for(let X=0;X<16;X++)LK(this,hQ,"f")[X]^=$[Z+X];Mj(this,hQ,this.aes.encrypt(LK(this,hQ,"f")),"f"),Q.set(LK(this,hQ,"f"),Z)}return Q}decrypt($){if($.length%16)throw TypeError("invalid ciphertext size (must be multiple of 16 bytes)");let Q=new Uint8Array($.length);for(let Z=0;Z<$.length;Z+=16){let X=this.aes.decrypt($.subarray(Z,Z+16));for(let Y=0;Y<16;Y++)Q[Z+Y]=X[Y]^LK(this,hQ,"f")[Y],LK(this,hQ,"f")[Y]=$[Z+Y]}return Q}};kV=new WeakMap,hQ=new WeakMap});var TK=function($,Q,Z,X,Y){if(X==="m")throw TypeError("Private method is not writable");if(X==="a"&&!Y)throw TypeError("Private accessor was defined without a setter");if(typeof Q==="function"?$!==Q||!Y:!Q.has($))throw TypeError("Cannot write private member to an object whose class did not declare it");return X==="a"?Y.call($,Z):Y?Y.value=Z:Q.set($,Z),Z},E7=function($,Q,Z,X){if(Z==="a"&&!X)throw TypeError("Private accessor was defined without a getter");if(typeof Q==="function"?$!==Q||!X:!Q.has($))throw TypeError("Cannot read private member from an object whose class did not declare it");return Z==="m"?X:Z==="a"?X.call($):X?X.value:Q.get($)},bV,Cz,I7,cX;var fc=p(()=>{XB();cX=class cX extends fV{constructor($,Q){super("CTR",$,cX);if(bV.set(this,void 0),Cz.set(this,void 0),I7.set(this,void 0),TK(this,I7,new Uint8Array(16),"f"),E7(this,I7,"f").fill(0),TK(this,bV,E7(this,I7,"f"),"f"),TK(this,Cz,16,"f"),Q==null)Q=1;if(typeof Q==="number")this.setCounterValue(Q);else this.setCounterBytes(Q)}get counter(){return new Uint8Array(E7(this,I7,"f"))}setCounterValue($){if(!Number.isInteger($)||$<0||$>Number.MAX_SAFE_INTEGER)throw TypeError("invalid counter initial integer value");for(let Q=15;Q>=0;--Q)E7(this,I7,"f")[Q]=$%256,$=Math.floor($/256)}setCounterBytes($){if($.length!==16)throw TypeError("invalid counter initial Uint8Array value length");E7(this,I7,"f").set($)}increment(){for(let $=15;$>=0;$--)if(E7(this,I7,"f")[$]===255)E7(this,I7,"f")[$]=0;else{E7(this,I7,"f")[$]++;break}}encrypt($){var Q,Z;let X=new Uint8Array($);for(let Y=0;Y<X.length;Y++){if(E7(this,Cz,"f")===16)TK(this,bV,this.aes.encrypt(E7(this,I7,"f")),"f"),TK(this,Cz,0,"f"),this.increment();X[Y]^=E7(this,bV,"f")[TK(this,Cz,(Z=E7(this,Cz,"f"),Q=Z++,Z),"f"),Q]}return X}decrypt($){return this.encrypt($)}};bV=new WeakMap,Cz=new WeakMap,I7=new WeakMap});function YB($){if($.length<16)throw TypeError("PKCS#7 invalid length");let Q=$[$.length-1];if(Q>16)throw TypeError("PKCS#7 padding byte out of range");let Z=$.length-Q;for(let X=0;X<Q;X++)if($[Z+X]!==Q)throw TypeError("PKCS#7 invalid padding byte");return new Uint8Array($.subarray(0,Z))}var JB=p(()=>{Sc();fc()});function zB($){if(typeof $==="string"&&!$.startsWith("0x"))$="0x"+$;return f6($)}function FK($,Q){$=String($);while($.length<Q)$="0"+$;return $}function Lz($){if(typeof $==="string")return p5($,"NFKC");return f6($)}function e6($,Q){let Z=Q.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);r(Z!=null,"invalid path","path",Q);let X=Z[1],Y=Z[3],z=Z[4]==="!",J=$;for(let q of X.toLowerCase().split(".")){if(Array.isArray(J)){if(!q.match(/^[0-9]+$/))break;J=J[parseInt(q)]}else if(typeof J==="object"){let W=null;for(let G in J)if(G.toLowerCase()===q){W=J[G];break}J=W}else J=null;if(J==null)break}if(r(!z||J!=null,"missing required value","path",X),Y&&J!=null){if(Y==="int"){if(typeof J==="string"&&J.match(/^-?[0-9]+$/))return parseInt(J);else if(Number.isSafeInteger(J))return J}if(Y==="number"){if(typeof J==="string"&&J.match(/^-?[0-9.]*$/))return parseFloat(J)}if(Y==="data"){if(typeof J==="string")return zB(J)}if(Y==="array"&&Array.isArray(J))return J;if(Y===typeof J)return J;r(!1,`wrong type found for ${Y} `,"path",X)}return J}var qB=p(()=>{J1()});function Tz($){try{let Q=JSON.parse($);if((Q.version!=null?parseInt(Q.version):0)===3)return!0}catch(Q){}return!1}function eW0($,Q,Z){if(e6($,"crypto.cipher:string")==="aes-128-ctr"){let Y=e6($,"crypto.cipherparams.iv:data!"),z=new cX(Q,Y);return F0(z.decrypt(Z))}P0(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}function Pj($,Q){let Z=x0(Q),X=e6($,"crypto.ciphertext:data!"),Y=F0(p1(S1([Z.slice(16,32),X]))).substring(2);r(Y===e6($,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");let z=eW0($,Z.slice(0,16),X),J=H7(z);if($.address){let G=$.address.toLowerCase();if(!G.startsWith("0x"))G="0x"+G;r(R1(G)===J,"keystore address/privateKey mismatch","address",$.address)}let q={address:J,privateKey:z};if(e6($,"x-ethers.version:string")==="0.1"){let G=Z.slice(32,64),U=e6($,"x-ethers.mnemonicCiphertext:data!"),D=e6($,"x-ethers.mnemonicCounter:data!"),P=new cX(G,D);q.mnemonic={path:e6($,"x-ethers.path:string")||xc,locale:e6($,"x-ethers.locale:string")||"en",entropy:F0(x0(P.decrypt(U)))}}return q}function bc($){let Q=e6($,"crypto.kdf:string");if(Q&&typeof Q==="string"){if(Q.toLowerCase()==="scrypt"){let Z=e6($,"crypto.kdfparams.salt:data!"),X=e6($,"crypto.kdfparams.n:int!"),Y=e6($,"crypto.kdfparams.r:int!"),z=e6($,"crypto.kdfparams.p:int!");r(X>0&&(X&X-1)===0,"invalid kdf.N","kdf.N",X),r(Y>0&&z>0,"invalid kdf","kdf",Q);let J=e6($,"crypto.kdfparams.dklen:int!");return r(J===32,"invalid kdf.dklen","kdf.dflen",J),{name:"scrypt",salt:Z,N:X,r:Y,p:z,dkLen:64}}else if(Q.toLowerCase()==="pbkdf2"){let Z=e6($,"crypto.kdfparams.salt:data!"),X=e6($,"crypto.kdfparams.prf:string!"),Y=X.split("-").pop();r(Y==="sha256"||Y==="sha512","invalid kdf.pdf","kdf.pdf",X);let z=e6($,"crypto.kdfparams.c:int!"),J=e6($,"crypto.kdfparams.dklen:int!");return r(J===32,"invalid kdf.dklen","kdf.dklen",J),{name:"pbkdf2",salt:Z,count:z,dkLen:J,algorithm:Y}}}r(!1,"unsupported key-derivation function","kdf",Q)}function AK($,Q){let Z=JSON.parse($),X=Lz(Q),Y=bc(Z);if(Y.name==="pbkdf2"){let{salt:D,count:P,dkLen:H,algorithm:N}=Y,C=d9(X,D,P,H,N);return Pj(Z,C)}P0(Y.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:Y});let{salt:z,N:J,r:q,p:W,dkLen:G}=Y,U=D7(X,z,J,q,W,G);return Pj(Z,U)}function kc($){return new Promise((Q)=>{setTimeout(()=>{Q()},$)})}async function wK($,Q,Z){let X=JSON.parse($),Y=Lz(Q),z=bc(X);if(z.name==="pbkdf2"){if(Z)Z(0),await kc(0);let{salt:P,count:H,dkLen:N,algorithm:C}=z,L=d9(Y,P,H,N,C);if(Z)Z(1),await kc(0);return Pj(X,L)}P0(z.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:z});let{salt:J,N:q,r:W,p:G,dkLen:U}=z,D=await O7(Y,J,q,W,G,U,Z);return Pj(X,D)}function vc($){let Q=$.salt!=null?x0($.salt,"options.salt"):A9(32),Z=131072,X=8,Y=1;if($.scrypt){if($.scrypt.N)Z=$.scrypt.N;if($.scrypt.r)X=$.scrypt.r;if($.scrypt.p)Y=$.scrypt.p}return r(typeof Z==="number"&&Z>0&&Number.isSafeInteger(Z)&&(BigInt(Z)&BigInt(Z-1))===BigInt(0),"invalid scrypt N parameter","options.N",Z),r(typeof X==="number"&&X>0&&Number.isSafeInteger(X),"invalid scrypt r parameter","options.r",X),r(typeof Y==="number"&&Y>0&&Number.isSafeInteger(Y),"invalid scrypt p parameter","options.p",Y),{name:"scrypt",dkLen:32,salt:Q,N:Z,r:X,p:Y}}function yc($,Q,Z,X){let Y=x0(Z.privateKey,"privateKey"),z=X.iv!=null?x0(X.iv,"options.iv"):A9(16);r(z.length===16,"invalid options.iv length","options.iv",X.iv);let J=X.uuid!=null?x0(X.uuid,"options.uuid"):A9(16);r(J.length===16,"invalid options.uuid length","options.uuid",X.iv);let q=$.slice(0,16),W=$.slice(16,32),G=new cX(q,z),U=x0(G.encrypt(Y)),D=p1(S1([W,U])),P={address:Z.address.substring(2).toLowerCase(),id:hW(J),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:F0(z).substring(2)},ciphertext:F0(U).substring(2),kdf:"scrypt",kdfparams:{salt:F0(Q.salt).substring(2),n:Q.N,dklen:32,p:Q.p,r:Q.r},mac:D.substring(2)}};if(Z.mnemonic){let H=X.client!=null?X.client:`ethers/${mJ}`,N=Z.mnemonic.path||xc,C=Z.mnemonic.locale||"en",L=$.slice(32,64),B=x0(Z.mnemonic.entropy,"account.mnemonic.entropy"),E=A9(16),I=new cX(L,E),_=x0(I.encrypt(B)),f=new Date,g="UTC--"+(f.getUTCFullYear()+"-"+FK(f.getUTCMonth()+1,2)+"-"+FK(f.getUTCDate(),2)+"T"+FK(f.getUTCHours(),2)+"-"+FK(f.getUTCMinutes(),2)+"-"+FK(f.getUTCSeconds(),2)+".0Z")+"--"+P.address;P["x-ethers"]={client:H,gethFilename:g,path:N,locale:C,mnemonicCounter:F0(E).substring(2),mnemonicCiphertext:F0(_).substring(2),version:"0.1"}}return JSON.stringify(P)}function dX($,Q,Z){if(Z==null)Z={};let X=Lz(Q),Y=vc(Z),z=D7(X,Y.salt,Y.N,Y.r,Y.p,64);return yc(x0(z),Y,$,Z)}async function lX($,Q,Z){if(Z==null)Z={};let X=Lz(Q),Y=vc(Z),z=await O7(X,Y.salt,Y.N,Y.r,Y.p,64,Z.progressCallback);return yc(x0(z),Y,$,Z)}var xc="m/44'/60'/0'/0/0";var Hj=p(()=>{JB();F8();g8();M2();J1();qB()});function jj($,Q){let Z="";while($)Z=ZK0[$%16]+Z,$=Math.trunc($/16);while(Z.length<Q*2)Z="0"+Z;return"0x"+Z}function WB($){let Q=x0($),Z=m5(V8(V8(Q)),0,4),X=S1([Q,Z]);return TX(X)}function gc($,Q,Z,X){let Y=new Uint8Array(37);if($&M$)P0(X!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),Y.set(x0(X),1);else Y.set(x0(Z));for(let J=24;J>=0;J-=8)Y[33+(J>>3)]=$>>24-J&255;let z=x0(U7("sha512",Q,Y));return{IL:z.slice(0,32),IR:z.slice(32)}}function hc($,Q){let Z=Q.split("/");if(r(Z.length>0,"invalid path","path",Q),Z[0]==="m")r($.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${$.depth}`,"path",Q),Z.shift();let X=$;for(let Y=0;Y<Z.length;Y++){let z=Z[Y];if(z.match(/^[0-9]+'$/)){let J=parseInt(z.substring(0,z.length-1));r(J<M$,"invalid path index",`path[${Y}]`,z),X=X.deriveChild(M$+J)}else if(z.match(/^[0-9]+$/)){let J=parseInt(z);r(J<M$,"invalid path index",`path[${Y}]`,z),X=X.deriveChild(J)}else r(!1,"invalid path component",`path[${Y}]`,z)}return X}function Rj($){let Q=G1($,"index");return r(Q>=0&&Q<M$,"invalid account index","index",Q),`m/44'/60'/${Q}'/0/0`}function BK($){let Q=G1($,"index");return r(Q>=0&&Q<M$,"invalid account index","index",Q),`m/44'/60'/0'/0/${Q}`}var Fz="m/44'/60'/0'/0/0",$K0,M$=2147483648,QK0,ZK0="0123456789abcdef",D$,t8,mQ;var KB=p(()=>{g8();zj();M2();J1();SV();qj();Uj();Hj();$K0=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),QK0=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");D$={};t8=class t8 extends V${publicKey;fingerprint;parentFingerprint;mnemonic;chainCode;path;index;depth;constructor($,Q,Z,X,Y,z,J,q,W){super(Q,W);W9($,D$,"HDNodeWallet"),r0(this,{publicKey:Q.compressedPublicKey});let G=m5(V7(V8(this.publicKey)),0,4);r0(this,{parentFingerprint:Z,fingerprint:G,chainCode:X,path:Y,index:z,depth:J}),r0(this,{mnemonic:q})}connect($){return new t8(D$,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,$)}#$(){let $={address:this.address,privateKey:this.privateKey},Q=this.mnemonic;if(this.path&&Q&&Q.wordlist.locale==="en"&&Q.password==="")$.mnemonic={path:this.path,locale:"en",entropy:Q.entropy};return $}async encrypt($,Q){return await lX(this.#$(),$,{progressCallback:Q})}encryptSync($){return dX(this.#$(),$)}get extendedKey(){return P0(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),WB(S1(["0x0488ADE4",jj(this.depth,1),this.parentFingerprint,jj(this.index,4),this.chainCode,S1(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new mQ(D$,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild($){let Q=G1($,"index");r(Q<=4294967295,"invalid index","index",Q);let Z=this.path;if(Z){if(Z+="/"+(Q&~M$),Q&M$)Z+="'"}let{IR:X,IL:Y}=gc(Q,this.chainCode,this.publicKey,this.privateKey),z=new D8(n8((R4(Y)+BigInt(this.privateKey))%QK0,32));return new t8(D$,z,this.fingerprint,F0(X),Z,Q,this.depth+1,this.mnemonic,this.provider)}derivePath($){return hc(this,$)}static#Q($,Q){r(q7($),"invalid seed","seed","[REDACTED]");let Z=x0($,"seed");r(Z.length>=16&&Z.length<=64,"invalid seed","seed","[REDACTED]");let X=x0(U7("sha512",$K0,Z)),Y=new D8(F0(X.slice(0,32)));return new t8(D$,Y,"0x00000000",F0(X.slice(32)),"m",0,0,Q,null)}static fromExtendedKey($){let Q=k5(fW($));r(Q.length===82||WB(Q.slice(0,78))===$,"invalid extended key","extendedKey","[ REDACTED ]");let Z=Q[4],X=F0(Q.slice(5,9)),Y=parseInt(F0(Q.slice(9,13)).substring(2),16),z=F0(Q.slice(13,45)),J=Q.slice(45,78);switch(F0(Q.slice(0,4))){case"0x0488b21e":case"0x043587cf":{let q=F0(J);return new mQ(D$,H7(q),q,X,z,null,Y,Z,null)}case"0x0488ade4":case"0x04358394 ":if(J[0]!==0)break;return new t8(D$,new D8(J.slice(1)),X,z,null,Y,Z,null,null)}r(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom($,Q,Z){if($==null)$="";if(Q==null)Q=Fz;if(Z==null)Z=N2.wordlist();let X=A7.fromEntropy(A9(16),$,Z);return t8.#Q(X.computeSeed(),X).derivePath(Q)}static fromMnemonic($,Q){if(!Q)Q=Fz;return t8.#Q($.computeSeed(),$).derivePath(Q)}static fromPhrase($,Q,Z,X){if(Q==null)Q="";if(Z==null)Z=Fz;if(X==null)X=N2.wordlist();let Y=A7.fromPhrase($,Q,X);return t8.#Q(Y.computeSeed(),Y).derivePath(Z)}static fromSeed($){return t8.#Q($,null)}};mQ=class mQ extends hX{publicKey;fingerprint;parentFingerprint;chainCode;path;index;depth;constructor($,Q,Z,X,Y,z,J,q,W){super(Q,W);W9($,D$,"HDNodeVoidWallet"),r0(this,{publicKey:Z});let G=m5(V7(V8(Z)),0,4);r0(this,{publicKey:Z,fingerprint:G,parentFingerprint:X,chainCode:Y,path:z,index:J,depth:q})}connect($){return new mQ(D$,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,$)}get extendedKey(){return P0(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),WB(S1(["0x0488B21E",jj(this.depth,1),this.parentFingerprint,jj(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild($){let Q=G1($,"index");r(Q<=4294967295,"invalid index","index",Q);let Z=this.path;if(Z){if(Z+="/"+(Q&~M$),Q&M$)Z+="'"}let{IR:X,IL:Y}=gc(Q,this.chainCode,this.publicKey,null),z=D8.addPoints(Y,this.publicKey,!0),J=H7(z);return new mQ(D$,J,z,this.fingerprint,F0(X),Z,Q,this.depth+1,this.provider)}derivePath($){return hc(this,$)}}});function Az($){try{if(JSON.parse($).encseed)return!0}catch(Q){}return!1}function wz($,Q){let Z=JSON.parse($),X=Lz(Q),Y=R1(e6(Z,"ethaddr:string!")),z=zB(e6(Z,"encseed:string!"));r(z&&z.length%16===0,"invalid encseed","json",$);let J=x0(d9(X,X,2000,32,"sha256")).slice(0,16),q=z.slice(0,16),W=z.slice(16),G=new xV(J,q),U=YB(x0(G.decrypt(W))),D="";for(let P=0;P<U.length;P++)D+=String.fromCharCode(U[P]);return{address:Y,privateKey:U9(D)}}var GB=p(()=>{JB();F8();g8();K$();J1();qB()});function mc($){return new Promise((Q)=>{setTimeout(()=>{Q()},$)})}var pQ;var pc=p(()=>{g8();J1();qj();KB();GB();Hj();Uj();pQ=class pQ extends V${constructor($,Q){if(typeof $==="string"&&!$.startsWith("0x"))$="0x"+$;let Z=typeof $==="string"?new D8($):$;super(Z,Q)}connect($){return new pQ(this.signingKey,$)}async encrypt($,Q){let Z={address:this.address,privateKey:this.privateKey};return await lX(Z,$,{progressCallback:Q})}encryptSync($){let Q={address:this.address,privateKey:this.privateKey};return dX(Q,$)}static#$($){if(r($,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in $&&$.mnemonic&&$.mnemonic.locale==="en"){let Z=A7.fromEntropy($.mnemonic.entropy),X=t8.fromMnemonic(Z,$.mnemonic.path);if(X.address===$.address&&X.privateKey===$.privateKey)return X;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}let Q=new pQ($.privateKey);return r(Q.address===$.address,"address/privateKey mismatch","json","[ REDACTED ]"),Q}static async fromEncryptedJson($,Q,Z){let X=null;if(Tz($))X=await wK($,Q,Z);else if(Az($)){if(Z)Z(0),await mc(0);if(X=wz($,Q),Z)Z(1),await mc(0)}return pQ.#$(X)}static fromEncryptedJsonSync($,Q){let Z=null;if(Tz($))Z=AK($,Q);else if(Az($))Z=wz($,Q);else r(!1,"invalid JSON wallet","json","[ REDACTED ]");return pQ.#$(Z)}static createRandom($){let Q=t8.createRandom();if($)return Q.connect($);return Q}static fromPhrase($,Q){let Z=t8.fromPhrase($);if(Q)return Z.connect(Q);return Z}}});var uc=p(()=>{qj();KB();GB();Hj();Uj();pc()});function cc($,Q){let Z=(1<<$)-1,X=[],Y=0,z=0,J=0;for(let q=0;q<Q.length;q++){Y=Y<<6|")!@#$%^&*(ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".indexOf(Q[q]),z+=6;while(z>=$){let W=Y>>z-$;if(Y&=(1<<z-$)-1,z-=$,W===0)J+=Z;else X.push(W+J),J=0}}return X}function dc($,Q){let Z=Kj($).join(",");return Q.split(/,/g).forEach((X)=>{let Y=X.match(/^([a-z]*)([0-9]+)([0-9])(.*)$/);r(Y!==null,"internal error parsing accents","accents",Q);let z=0,J=cc(parseInt(Y[3]),Y[4]),q=parseInt(Y[2]),W=new RegExp(`([${Y[1]}])`,"g");Z=Z.replace(W,(G,U)=>{if(--J[z]===0)U=String.fromCharCode(U.charCodeAt(0),q),z++;return U})}),Z.split(",")}var lc=p(()=>{J1();rw()});var vV;var ic=p(()=>{Gj();lc();vV=class vV extends gQ{#$;constructor($,Q,Z,X){super($,Q,X);this.#$=Z}get _accent(){return this.#$}_decodeWords(){return dc(this._data,this._accent)}}});var Nj;var oc=p(()=>{SV();Nj={en:N2.wordlist()}});var nc=p(()=>{aw();SV();Gj();ic();oc()});var M0={};x1(M0,{zeroPadValue:()=>U8,zeroPadBytes:()=>Z$,wordlists:()=>Nj,version:()=>mJ,verifyTypedData:()=>kH,verifyMessage:()=>IH,verifyAuthorization:()=>NH,uuidV4:()=>hW,toUtf8String:()=>u9,toUtf8CodePoints:()=>SP,toUtf8Bytes:()=>p5,toTwos:()=>Y$,toQuantity:()=>y8,toNumber:()=>_W,toBigInt:()=>R4,toBeHex:()=>n8,toBeArray:()=>k5,stripZerosLeft:()=>EP,solidityPackedSha256:()=>SH,solidityPackedKeccak256:()=>_H,solidityPacked:()=>QK,showThrottleMessage:()=>V9,sha512:()=>_X,sha256:()=>V8,scryptSync:()=>D7,scrypt:()=>O7,ripemd160:()=>V7,resolveProperties:()=>T6,resolveAddress:()=>k6,recoverAddress:()=>j7,randomBytes:()=>A9,pbkdf2:()=>d9,parseUnits:()=>uJ,parseEther:()=>yP,namehash:()=>TQ,mask:()=>a2,makeError:()=>H5,lock:()=>_A,keccak256:()=>p1,isValidName:()=>EH,isKeystoreJson:()=>Tz,isHexString:()=>J5,isError:()=>o5,isCrowdsaleJson:()=>Az,isCallException:()=>PQ,isBytesLike:()=>q7,isAddressable:()=>eJ,isAddress:()=>DH,id:()=>U9,hexlify:()=>F0,hashMessage:()=>Yz,hashAuthorization:()=>Qz,getUint:()=>LX,getNumber:()=>G1,getIndexedAccountPath:()=>BK,getIcapAddress:()=>UH,getDefaultProvider:()=>Xj,getCreateAddress:()=>kX,getCreate2Address:()=>OH,getBytesCopy:()=>f6,getBytes:()=>x0,getBigInt:()=>e0,getAddress:()=>R1,getAccountPath:()=>Rj,fromTwos:()=>X$,formatUnits:()=>FX,formatEther:()=>vP,ensNormalize:()=>FV,encryptKeystoreJsonSync:()=>dX,encryptKeystoreJson:()=>lX,encodeRlp:()=>T9,encodeBytes32String:()=>vH,encodeBase64:()=>xW,encodeBase58:()=>TX,dnsEncode:()=>$K,defineProperties:()=>r0,defaultPath:()=>Fz,decryptKeystoreJsonSync:()=>AK,decryptKeystoreJson:()=>wK,decryptCrowdsaleJson:()=>wz,decodeRlp:()=>J$,decodeBytes32String:()=>yH,decodeBase64:()=>kW,decodeBase58:()=>fW,dataSlice:()=>m5,dataLength:()=>O2,copyRequest:()=>T4,concat:()=>S1,computeHmac:()=>U7,computeAddress:()=>H7,checkResultErrors:()=>UV,authorizationify:()=>xX,assertPrivate:()=>W9,assertNormalize:()=>CX,assertArgumentCount:()=>NX,assertArgument:()=>r,assert:()=>P0,accessListify:()=>K9,ZeroHash:()=>sJ,ZeroAddress:()=>P7,WordlistOwlA:()=>vV,WordlistOwl:()=>gQ,Wordlist:()=>Nz,WeiPerEther:()=>JH,WebSocketProvider:()=>vQ,Wallet:()=>pQ,VoidSigner:()=>hX,Utf8ErrorFuncs:()=>WV,UnmanagedSubscriber:()=>H3,UndecodedEventLog:()=>yX,TypedDataEncoder:()=>M8,Typed:()=>C5,TransactionResponse:()=>M3,TransactionReceipt:()=>BQ,TransactionDescription:()=>XK,Transaction:()=>A8,StructFragment:()=>O3,SocketSubscriber:()=>uX,SocketProvider:()=>Pz,SocketPendingSubscriber:()=>HK,SocketEventSubscriber:()=>jK,SocketBlockSubscriber:()=>PK,SigningKey:()=>D8,Signature:()=>q6,Result:()=>D2,QuickNodeProvider:()=>yQ,PocketProvider:()=>Rz,ParamType:()=>$6,NonceManager:()=>CK,NetworkPlugin:()=>L7,Network:()=>W5,NamedFragment:()=>wQ,N:()=>YH,MulticoinProviderPlugin:()=>GK,Mnemonic:()=>A7,MinInt256:()=>qH,MessagePrefix:()=>iW,MaxUint256:()=>zH,MaxInt256:()=>WH,LogDescription:()=>ZK,Log:()=>F4,LangEn:()=>N2,JsonRpcSigner:()=>mX,JsonRpcProvider:()=>m6,JsonRpcApiProvider:()=>pX,IpcSocketProvider:()=>Jj,Interface:()=>Q4,InfuraWebSocketProvider:()=>RK,InfuraProvider:()=>G$,Indexed:()=>zz,HDNodeWallet:()=>t8,HDNodeVoidWallet:()=>mQ,GasCostPlugin:()=>_Q,FunctionFragment:()=>H2,Fragment:()=>N7,FixedNumber:()=>s2,FetchUrlFeeDataNetworkPlugin:()=>Uz,FetchResponse:()=>K7,FetchRequest:()=>n5,FetchCancelSignal:()=>bW,FeeDataNetworkPlugin:()=>VK,FeeData:()=>vX,FallbackProvider:()=>Hz,FallbackFragment:()=>L4,EventPayload:()=>HQ,EventLog:()=>EQ,EventFragment:()=>P2,EtherscanProvider:()=>Mz,EtherscanPlugin:()=>MK,EtherSymbol:()=>KH,ErrorFragment:()=>s8,ErrorDescription:()=>YK,EnsResolver:()=>P3,EnsPlugin:()=>SQ,ContractUnknownEventPayload:()=>gX,ContractTransactionResponse:()=>IQ,ContractTransactionReceipt:()=>WK,ContractFactory:()=>KK,ContractEventPayload:()=>Wz,Contract:()=>Z4,ConstructorFragment:()=>t2,CloudflareProvider:()=>Dz,ChainstackProvider:()=>bQ,BrowserProvider:()=>U$,BlockscoutProvider:()=>jz,Block:()=>qz,BaseWallet:()=>V$,BaseContract:()=>C7,AnkrProvider:()=>kQ,AlchemyProvider:()=>xQ,AbstractSigner:()=>F7,AbstractProvider:()=>T7,AbiCoder:()=>$4});var UB=p(()=>{JK();F8();oW();BV();g8();K$();zj();M2();J1();uc();nc()});var VB={};x1(VB,{zeroPadValue:()=>U8,zeroPadBytes:()=>Z$,wordlists:()=>Nj,version:()=>mJ,verifyTypedData:()=>kH,verifyMessage:()=>IH,verifyAuthorization:()=>NH,uuidV4:()=>hW,toUtf8String:()=>u9,toUtf8CodePoints:()=>SP,toUtf8Bytes:()=>p5,toTwos:()=>Y$,toQuantity:()=>y8,toNumber:()=>_W,toBigInt:()=>R4,toBeHex:()=>n8,toBeArray:()=>k5,stripZerosLeft:()=>EP,solidityPackedSha256:()=>SH,solidityPackedKeccak256:()=>_H,solidityPacked:()=>QK,showThrottleMessage:()=>V9,sha512:()=>_X,sha256:()=>V8,scryptSync:()=>D7,scrypt:()=>O7,ripemd160:()=>V7,resolveProperties:()=>T6,resolveAddress:()=>k6,recoverAddress:()=>j7,randomBytes:()=>A9,pbkdf2:()=>d9,parseUnits:()=>uJ,parseEther:()=>yP,namehash:()=>TQ,mask:()=>a2,makeError:()=>H5,lock:()=>_A,keccak256:()=>p1,isValidName:()=>EH,isKeystoreJson:()=>Tz,isHexString:()=>J5,isError:()=>o5,isCrowdsaleJson:()=>Az,isCallException:()=>PQ,isBytesLike:()=>q7,isAddressable:()=>eJ,isAddress:()=>DH,id:()=>U9,hexlify:()=>F0,hashMessage:()=>Yz,hashAuthorization:()=>Qz,getUint:()=>LX,getNumber:()=>G1,getIndexedAccountPath:()=>BK,getIcapAddress:()=>UH,getDefaultProvider:()=>Xj,getCreateAddress:()=>kX,getCreate2Address:()=>OH,getBytesCopy:()=>f6,getBytes:()=>x0,getBigInt:()=>e0,getAddress:()=>R1,getAccountPath:()=>Rj,fromTwos:()=>X$,formatUnits:()=>FX,formatEther:()=>vP,ethers:()=>M0,ensNormalize:()=>FV,encryptKeystoreJsonSync:()=>dX,encryptKeystoreJson:()=>lX,encodeRlp:()=>T9,encodeBytes32String:()=>vH,encodeBase64:()=>xW,encodeBase58:()=>TX,dnsEncode:()=>$K,defineProperties:()=>r0,defaultPath:()=>Fz,decryptKeystoreJsonSync:()=>AK,decryptKeystoreJson:()=>wK,decryptCrowdsaleJson:()=>wz,decodeRlp:()=>J$,decodeBytes32String:()=>yH,decodeBase64:()=>kW,decodeBase58:()=>fW,dataSlice:()=>m5,dataLength:()=>O2,copyRequest:()=>T4,concat:()=>S1,computeHmac:()=>U7,computeAddress:()=>H7,checkResultErrors:()=>UV,authorizationify:()=>xX,assertPrivate:()=>W9,assertNormalize:()=>CX,assertArgumentCount:()=>NX,assertArgument:()=>r,assert:()=>P0,accessListify:()=>K9,ZeroHash:()=>sJ,ZeroAddress:()=>P7,WordlistOwlA:()=>vV,WordlistOwl:()=>gQ,Wordlist:()=>Nz,WeiPerEther:()=>JH,WebSocketProvider:()=>vQ,Wallet:()=>pQ,VoidSigner:()=>hX,Utf8ErrorFuncs:()=>WV,UnmanagedSubscriber:()=>H3,UndecodedEventLog:()=>yX,TypedDataEncoder:()=>M8,Typed:()=>C5,TransactionResponse:()=>M3,TransactionReceipt:()=>BQ,TransactionDescription:()=>XK,Transaction:()=>A8,StructFragment:()=>O3,SocketSubscriber:()=>uX,SocketProvider:()=>Pz,SocketPendingSubscriber:()=>HK,SocketEventSubscriber:()=>jK,SocketBlockSubscriber:()=>PK,SigningKey:()=>D8,Signature:()=>q6,Result:()=>D2,QuickNodeProvider:()=>yQ,PocketProvider:()=>Rz,ParamType:()=>$6,NonceManager:()=>CK,NetworkPlugin:()=>L7,Network:()=>W5,NamedFragment:()=>wQ,N:()=>YH,MulticoinProviderPlugin:()=>GK,Mnemonic:()=>A7,MinInt256:()=>qH,MessagePrefix:()=>iW,MaxUint256:()=>zH,MaxInt256:()=>WH,LogDescription:()=>ZK,Log:()=>F4,LangEn:()=>N2,JsonRpcSigner:()=>mX,JsonRpcProvider:()=>m6,JsonRpcApiProvider:()=>pX,IpcSocketProvider:()=>Jj,Interface:()=>Q4,InfuraWebSocketProvider:()=>RK,InfuraProvider:()=>G$,Indexed:()=>zz,HDNodeWallet:()=>t8,HDNodeVoidWallet:()=>mQ,GasCostPlugin:()=>_Q,FunctionFragment:()=>H2,Fragment:()=>N7,FixedNumber:()=>s2,FetchUrlFeeDataNetworkPlugin:()=>Uz,FetchResponse:()=>K7,FetchRequest:()=>n5,FetchCancelSignal:()=>bW,FeeDataNetworkPlugin:()=>VK,FeeData:()=>vX,FallbackProvider:()=>Hz,FallbackFragment:()=>L4,EventPayload:()=>HQ,EventLog:()=>EQ,EventFragment:()=>P2,EtherscanProvider:()=>Mz,EtherscanPlugin:()=>MK,EtherSymbol:()=>KH,ErrorFragment:()=>s8,ErrorDescription:()=>YK,EnsResolver:()=>P3,EnsPlugin:()=>SQ,ContractUnknownEventPayload:()=>gX,ContractTransactionResponse:()=>IQ,ContractTransactionReceipt:()=>WK,ContractFactory:()=>KK,ContractEventPayload:()=>Wz,Contract:()=>Z4,ConstructorFragment:()=>t2,CloudflareProvider:()=>Dz,ChainstackProvider:()=>bQ,BrowserProvider:()=>U$,BlockscoutProvider:()=>jz,Block:()=>qz,BaseWallet:()=>V$,BaseContract:()=>C7,AnkrProvider:()=>kQ,AlchemyProvider:()=>xQ,AbstractSigner:()=>F7,AbstractProvider:()=>T7,AbiCoder:()=>$4});var A6=p(()=>{UB();UB()});var Yd={};x1(Yd,{types:()=>VK0,promisify:()=>$d,log:()=>sc,isUndefined:()=>EK,isSymbol:()=>DK0,isString:()=>wj,isRegExp:()=>Cj,isPrimitive:()=>MK0,isObject:()=>IK,isNumber:()=>ac,isNullOrUndefined:()=>OK0,isNull:()=>Aj,isFunction:()=>Tj,isError:()=>Lj,isDate:()=>PB,isBuffer:()=>PK0,isBoolean:()=>jB,isArray:()=>rc,inspect:()=>Bz,inherits:()=>tc,format:()=>HB,deprecate:()=>YK0,default:()=>RK0,debuglog:()=>JK0,callbackifyOnRejected:()=>CB,callbackify:()=>Qd,_extend:()=>NB,TextEncoder:()=>Zd,TextDecoder:()=>Xd});function HB($,...Q){if(!wj($)){var Z=[$];for(var X=0;X<Q.length;X++)Z.push(Bz(Q[X]));return Z.join(" ")}var X=0,Y=Q.length,z=String($).replace(XK0,function(q){if(q==="%%")return"%";if(X>=Y)return q;switch(q){case"%s":return String(Q[X++]);case"%d":return Number(Q[X++]);case"%j":try{return JSON.stringify(Q[X++])}catch(W){return"[Circular]"}default:return q}});for(var J=Q[X];X<Y;J=Q[++X])if(Aj(J)||!IK(J))z+=" "+J;else z+=" "+Bz(J);return z}function YK0($,Q){if(typeof process>"u"||process?.noDeprecation===!0)return $;var Z=!1;function X(...Y){if(!Z){if(process.throwDeprecation)throw Error(Q);else if(process.traceDeprecation)console.trace(Q);else console.error(Q);Z=!0}return $.apply(this,...Y)}return X}function zK0($,Q){var Z=Bz.styles[Q];if(Z)return"\x1B["+Bz.colors[Z][0]+"m"+$+"\x1B["+Bz.colors[Z][1]+"m";else return $}function qK0($,Q){return $}function WK0($){var Q={};return $.forEach(function(Z,X){Q[Z]=!0}),Q}function Fj($,Q,Z){if($.customInspect&&Q&&Tj(Q.inspect)&&Q.inspect!==Bz&&!(Q.constructor&&Q.constructor.prototype===Q)){var X=Q.inspect(Z,$);if(!wj(X))X=Fj($,X,Z);return X}var Y=KK0($,Q);if(Y)return Y;var z=Object.keys(Q),J=WK0(z);if($.showHidden)z=Object.getOwnPropertyNames(Q);if(Lj(Q)&&(z.indexOf("message")>=0||z.indexOf("description")>=0))return OB(Q);if(z.length===0){if(Tj(Q)){var q=Q.name?": "+Q.name:"";return $.stylize("[Function"+q+"]","special")}if(Cj(Q))return $.stylize(RegExp.prototype.toString.call(Q),"regexp");if(PB(Q))return $.stylize(Date.prototype.toString.call(Q),"date");if(Lj(Q))return OB(Q)}var W="",G=!1,U=["{","}"];if(rc(Q))G=!0,U=["[","]"];if(Tj(Q)){var D=Q.name?": "+Q.name:"";W=" [Function"+D+"]"}if(Cj(Q))W=" "+RegExp.prototype.toString.call(Q);if(PB(Q))W=" "+Date.prototype.toUTCString.call(Q);if(Lj(Q))W=" "+OB(Q);if(z.length===0&&(!G||Q.length==0))return U[0]+W+U[1];if(Z<0)if(Cj(Q))return $.stylize(RegExp.prototype.toString.call(Q),"regexp");else return $.stylize("[Object]","special");$.seen.push(Q);var P;if(G)P=GK0($,Q,Z,J,z);else P=z.map(function(H){return MB($,Q,Z,J,H,G)});return $.seen.pop(),UK0(P,W,U)}function KK0($,Q){if(EK(Q))return $.stylize("undefined","undefined");if(wj(Q)){var Z="'"+JSON.stringify(Q).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return $.stylize(Z,"string")}if(ac(Q))return $.stylize(""+Q,"number");if(jB(Q))return $.stylize(""+Q,"boolean");if(Aj(Q))return $.stylize("null","null")}function OB($){return"["+Error.prototype.toString.call($)+"]"}function GK0($,Q,Z,X,Y){var z=[];for(var J=0,q=Q.length;J<q;++J)if(ec(Q,String(J)))z.push(MB($,Q,Z,X,String(J),!0));else z.push("");return Y.forEach(function(W){if(!W.match(/^\d+$/))z.push(MB($,Q,Z,X,W,!0))}),z}function MB($,Q,Z,X,Y,z){var J,q,W;if(W=Object.getOwnPropertyDescriptor(Q,Y)||{value:Q[Y]},W.get)if(W.set)q=$.stylize("[Getter/Setter]","special");else q=$.stylize("[Getter]","special");else if(W.set)q=$.stylize("[Setter]","special");if(!ec(X,Y))J="["+Y+"]";if(!q)if($.seen.indexOf(W.value)<0){if(Aj(Z))q=Fj($,W.value,null);else q=Fj($,W.value,Z-1);if(q.indexOf(`
`)>-1)if(z)q=q.split(`
`).map(function(G){return"  "+G}).join(`
`).slice(2);else q=`
`+q.split(`
`).map(function(G){return"   "+G}).join(`
`)}else q=$.stylize("[Circular]","special");if(EK(J)){if(z&&Y.match(/^\d+$/))return q;if(J=JSON.stringify(""+Y),J.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/))J=J.slice(1,-1),J=$.stylize(J,"name");else J=J.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),J=$.stylize(J,"string")}return J+": "+q}function UK0($,Q,Z){var X=0,Y=$.reduce(function(z,J){if(X++,J.indexOf(`
`)>=0)X++;return z+J.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(Y>60)return Z[0]+(Q===""?"":Q+`
 `)+" "+$.join(`,
  `)+" "+Z[1];return Z[0]+Q+" "+$.join(", ")+" "+Z[1]}function rc($){return Array.isArray($)}function jB($){return typeof $==="boolean"}function Aj($){return $===null}function OK0($){return $==null}function ac($){return typeof $==="number"}function wj($){return typeof $==="string"}function DK0($){return typeof $==="symbol"}function EK($){return $===void 0}function Cj($){return IK($)&&RB($)==="[object RegExp]"}function IK($){return typeof $==="object"&&$!==null}function PB($){return IK($)&&RB($)==="[object Date]"}function Lj($){return IK($)&&(RB($)==="[object Error]"||$ instanceof Error)}function Tj($){return typeof $==="function"}function MK0($){return $===null||typeof $==="boolean"||typeof $==="number"||typeof $==="string"||typeof $==="symbol"||typeof $>"u"}function PK0($){return $ instanceof Buffer}function RB($){return Object.prototype.toString.call($)}function DB($){return $<10?"0"+$.toString(10):$.toString(10)}function jK0(){var $=new Date,Q=[DB($.getHours()),DB($.getMinutes()),DB($.getSeconds())].join(":");return[$.getDate(),HK0[$.getMonth()],Q].join(" ")}function sc(...$){console.log("%s - %s",jK0(),HB.apply(null,$))}function tc($,Q){if(Q)$.super_=Q,$.prototype=Object.create(Q.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}})}function NB($,Q){if(!Q||!IK(Q))return $;var Z=Object.keys(Q),X=Z.length;while(X--)$[Z[X]]=Q[Z[X]];return $}function ec($,Q){return Object.prototype.hasOwnProperty.call($,Q)}function CB($,Q){if(!$){var Z=Error("Promise was rejected with a falsy value");Z.reason=$,$=Z}return Q($)}function Qd($){if(typeof $!=="function")throw TypeError('The "original" argument must be of type Function');function Q(...Z){var X=Z.pop();if(typeof X!=="function")throw TypeError("The last argument must be of type Function");var Y=this,z=function(...J){return X.apply(Y,...J)};$.apply(this,Z).then(function(J){process.nextTick(z.bind(null,null,J))},function(J){process.nextTick(CB.bind(null,J,z))})}return Object.setPrototypeOf(Q,Object.getPrototypeOf($)),Object.defineProperties(Q,Object.getOwnPropertyDescriptors($)),Q}var XK0,JK0,Bz,VK0=()=>{},HK0,$d,Zd,Xd,RK0;var Jd=p(()=>{XK0=/%[sdj%]/g;JK0=(($={},Q={},Z)=>((Z=typeof process<"u"&&!1)&&(Z=Z.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase()),Q=new RegExp("^"+Z+"$","i"),(X)=>{if(X=X.toUpperCase(),!$[X])if(Q.test(X))$[X]=function(...Y){console.error("%s: %s",X,pid,HB.apply(null,...Y))};else $[X]=function(){};return $[X]}))(),Bz=(($)=>($.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},$.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},$.custom=Symbol.for("nodejs.util.inspect.custom"),$))(function($,Q,...Z){var X={seen:[],stylize:qK0};if(Z.length>=1)X.depth=Z[0];if(Z.length>=2)X.colors=Z[1];if(jB(Q))X.showHidden=Q;else if(Q)NB(X,Q);if(EK(X.showHidden))X.showHidden=!1;if(EK(X.depth))X.depth=2;if(EK(X.colors))X.colors=!1;if(X.colors)X.stylize=zK0;return Fj(X,$,X.depth)});HK0=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];$d=(($)=>($.custom=Symbol.for("nodejs.util.promisify.custom"),$))(function($){if(typeof $!=="function")throw TypeError('The "original" argument must be of type Function');if(kCustomPromisifiedSymbol&&$[kCustomPromisifiedSymbol]){var Q=$[kCustomPromisifiedSymbol];if(typeof Q!=="function")throw TypeError('The "nodejs.util.promisify.custom" argument must be of type Function');return Object.defineProperty(Q,kCustomPromisifiedSymbol,{value:Q,enumerable:!1,writable:!1,configurable:!0}),Q}function Q(...Z){var X,Y,z=new Promise(function(J,q){X=J,Y=q});Z.push(function(J,q){if(J)Y(J);else X(q)});try{$.apply(this,Z)}catch(J){Y(J)}return z}if(Object.setPrototypeOf(Q,Object.getPrototypeOf($)),kCustomPromisifiedSymbol)Object.defineProperty(Q,kCustomPromisifiedSymbol,{value:Q,enumerable:!1,writable:!1,configurable:!0});return Object.defineProperties(Q,Object.getOwnPropertyDescriptors($))});({TextEncoder:Zd,TextDecoder:Xd}=globalThis),RK0={TextEncoder:Zd,TextDecoder:Xd,promisify:$d,log:sc,inherits:tc,_extend:NB,callbackifyOnRejected:CB,callbackify:Qd}});var AB=_1((qg0,Od)=>{var V6=($,Q)=>()=>(Q||$((Q={exports:{}}).exports,Q),Q.exports),$8=V6(($,Q)=>{class Z extends Error{constructor(X){if(!Array.isArray(X))throw TypeError(`Expected input to be an Array, got ${typeof X}`);let Y="";for(let z=0;z<X.length;z++)Y+=`    ${X[z].stack}
`;super(Y);this.name="AggregateError",this.errors=X}}Q.exports={AggregateError:Z,ArrayIsArray(X){return Array.isArray(X)},ArrayPrototypeIncludes(X,Y){return X.includes(Y)},ArrayPrototypeIndexOf(X,Y){return X.indexOf(Y)},ArrayPrototypeJoin(X,Y){return X.join(Y)},ArrayPrototypeMap(X,Y){return X.map(Y)},ArrayPrototypePop(X,Y){return X.pop(Y)},ArrayPrototypePush(X,Y){return X.push(Y)},ArrayPrototypeSlice(X,Y,z){return X.slice(Y,z)},Error,FunctionPrototypeCall(X,Y,...z){return X.call(Y,...z)},FunctionPrototypeSymbolHasInstance(X,Y){return Function.prototype[Symbol.hasInstance].call(X,Y)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(X,Y){return Object.defineProperties(X,Y)},ObjectDefineProperty(X,Y,z){return Object.defineProperty(X,Y,z)},ObjectGetOwnPropertyDescriptor(X,Y){return Object.getOwnPropertyDescriptor(X,Y)},ObjectKeys(X){return Object.keys(X)},ObjectSetPrototypeOf(X,Y){return Object.setPrototypeOf(X,Y)},Promise,PromisePrototypeCatch(X,Y){return X.catch(Y)},PromisePrototypeThen(X,Y,z){return X.then(Y,z)},PromiseReject(X){return Promise.reject(X)},PromiseResolve(X){return Promise.resolve(X)},ReflectApply:Reflect.apply,RegExpPrototypeTest(X,Y){return X.test(Y)},SafeSet:Set,String,StringPrototypeSlice(X,Y,z){return X.slice(Y,z)},StringPrototypeToLowerCase(X){return X.toLowerCase()},StringPrototypeToUpperCase(X){return X.toUpperCase()},StringPrototypeTrim(X){return X.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(X,Y,z){return X.set(Y,z)},Boolean,Uint8Array}}),zd=V6(($,Q)=>{Q.exports={format(Z,...X){return Z.replace(/%([sdifj])/g,function(...[Y,z]){let J=X.shift();if(z==="f")return J.toFixed(6);else if(z==="j")return JSON.stringify(J);else if(z==="s"&&typeof J==="object")return`${J.constructor!==Object?J.constructor.name:""} {}`.trim();else return J.toString()})},inspect(Z){switch(typeof Z){case"string":if(Z.includes("'")){if(!Z.includes('"'))return`"${Z}"`;else if(!Z.includes("`")&&!Z.includes("${"))return`\`${Z}\``}return`'${Z}'`;case"number":if(isNaN(Z))return"NaN";else if(Object.is(Z,-0))return String(Z);return Z;case"bigint":return`${String(Z)}n`;case"boolean":case"undefined":return String(Z);case"object":return"{}"}}}}),C2=V6(($,Q)=>{var{format:Z,inspect:X}=zd(),{AggregateError:Y}=$8(),z=globalThis.AggregateError||Y,J=Symbol("kIsNodeError"),q=["string","function","number","object","Function","Object","boolean","bigint","symbol"],W=/^([A-Z][a-z0-9]*)+$/,G={};function U(B,E){if(!B)throw new G.ERR_INTERNAL_ASSERTION(E)}function D(B){let E="",I=B.length,_=B[0]==="-"?1:0;for(;I>=_+4;I-=3)E=`_${B.slice(I-3,I)}${E}`;return`${B.slice(0,I)}${E}`}function P(B,E,I){if(typeof E==="function")return U(E.length<=I.length,`Code: ${B}; The provided arguments length (${I.length}) does not match the required ones (${E.length}).`),E(...I);let _=(E.match(/%[dfijoOs]/g)||[]).length;if(U(_===I.length,`Code: ${B}; The provided arguments length (${I.length}) does not match the required ones (${_}).`),I.length===0)return E;return Z(E,...I)}function H(B,E,I){if(!I)I=Error;class _ extends I{constructor(...f){super(P(B,E,f))}toString(){return`${this.name} [${B}]: ${this.message}`}}Object.defineProperties(_.prototype,{name:{value:I.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${B}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),_.prototype.code=B,_.prototype[J]=!0,G[B]=_}function N(B){let E="__node_internal_"+B.name;return Object.defineProperty(B,"name",{value:E}),B}function C(B,E){if(B&&E&&B!==E){if(Array.isArray(E.errors))return E.errors.push(B),E;let I=new z([E,B],E.message);return I.code=E.code,I}return B||E}class L extends Error{constructor(B="The operation was aborted",E=void 0){if(E!==void 0&&typeof E!=="object")throw new G.ERR_INVALID_ARG_TYPE("options","Object",E);super(B,E);this.code="ABORT_ERR",this.name="AbortError"}}H("ERR_ASSERTION","%s",Error),H("ERR_INVALID_ARG_TYPE",(B,E,I)=>{if(U(typeof B==="string","'name' must be a string"),!Array.isArray(E))E=[E];let _="The ";if(B.endsWith(" argument"))_+=`${B} `;else _+=`"${B}" ${B.includes(".")?"property":"argument"} `;_+="must be ";let f=[],x=[],g=[];for(let v of E)if(U(typeof v==="string","All expected entries have to be of type string"),q.includes(v))f.push(v.toLowerCase());else if(W.test(v))x.push(v);else U(v!=="object",'The value "object" should be written as "Object"'),g.push(v);if(x.length>0){let v=f.indexOf("object");if(v!==-1)f.splice(f,v,1),x.push("Object")}if(f.length>0){switch(f.length){case 1:_+=`of type ${f[0]}`;break;case 2:_+=`one of type ${f[0]} or ${f[1]}`;break;default:{let v=f.pop();_+=`one of type ${f.join(", ")}, or ${v}`}}if(x.length>0||g.length>0)_+=" or "}if(x.length>0){switch(x.length){case 1:_+=`an instance of ${x[0]}`;break;case 2:_+=`an instance of ${x[0]} or ${x[1]}`;break;default:{let v=x.pop();_+=`an instance of ${x.join(", ")}, or ${v}`}}if(g.length>0)_+=" or "}switch(g.length){case 0:break;case 1:if(g[0].toLowerCase()!==g[0])_+="an ";_+=`${g[0]}`;break;case 2:_+=`one of ${g[0]} or ${g[1]}`;break;default:{let v=g.pop();_+=`one of ${g.join(", ")}, or ${v}`}}if(I==null)_+=`. Received ${I}`;else if(typeof I==="function"&&I.name)_+=`. Received function ${I.name}`;else if(typeof I==="object"){var h;if((h=I.constructor)!==null&&h!==void 0&&h.name)_+=`. Received an instance of ${I.constructor.name}`;else{let v=X(I,{depth:-1});_+=`. Received ${v}`}}else{let v=X(I,{colors:!1});if(v.length>25)v=`${v.slice(0,25)}...`;_+=`. Received type ${typeof I} (${v})`}return _},TypeError),H("ERR_INVALID_ARG_VALUE",(B,E,I="is invalid")=>{let _=X(E);if(_.length>128)_=_.slice(0,128)+"...";return`The ${B.includes(".")?"property":"argument"} '${B}' ${I}. Received ${_}`},TypeError),H("ERR_INVALID_RETURN_VALUE",(B,E,I)=>{var _;let f=I!==null&&I!==void 0&&(_=I.constructor)!==null&&_!==void 0&&_.name?`instance of ${I.constructor.name}`:`type ${typeof I}`;return`Expected ${B} to be returned from the "${E}" function but got ${f}.`},TypeError),H("ERR_MISSING_ARGS",(...B)=>{U(B.length>0,"At least one arg needs to be specified");let E,I=B.length;switch(B=(Array.isArray(B)?B:[B]).map((_)=>`"${_}"`).join(" or "),I){case 1:E+=`The ${B[0]} argument`;break;case 2:E+=`The ${B[0]} and ${B[1]} arguments`;break;default:{let _=B.pop();E+=`The ${B.join(", ")}, and ${_} arguments`}break}return`${E} must be specified`},TypeError),H("ERR_OUT_OF_RANGE",(B,E,I)=>{U(E,'Missing "range" argument');let _;if(Number.isInteger(I)&&Math.abs(I)>4294967296)_=D(String(I));else if(typeof I==="bigint"){_=String(I);let f=BigInt(2)**BigInt(32);if(I>f||I<-f)_=D(_);_+="n"}else _=X(I);return`The value of "${B}" is out of range. It must be ${E}. Received ${_}`},RangeError),H("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),H("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),H("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),H("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),H("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),H("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),H("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),H("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),H("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),H("ERR_STREAM_WRITE_AFTER_END","write after end",Error),H("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Q.exports={AbortError:L,aggregateTwoErrors:N(C),hideStackFrames:N,codes:G}}),NK0=V6(($,Q)=>{Object.defineProperty($,"__esModule",{value:!0});var Z=new WeakMap,X=new WeakMap;function Y(b){let m=Z.get(b);return console.assert(m!=null,"'this' is expected an Event object, but got",b),m}function z(b){if(b.passiveListener!=null){if(typeof console<"u"&&typeof console.error==="function")console.error("Unable to preventDefault inside passive event listener invocation.",b.passiveListener);return}if(!b.event.cancelable)return;if(b.canceled=!0,typeof b.event.preventDefault==="function")b.event.preventDefault()}function J(b,m){Z.set(this,{eventTarget:b,event:m,eventPhase:2,currentTarget:b,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:m.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let K=Object.keys(m);for(let M=0;M<K.length;++M){let j=K[M];if(!(j in this))Object.defineProperty(this,j,q(j))}}if(J.prototype={get type(){return Y(this).event.type},get target(){return Y(this).eventTarget},get currentTarget(){return Y(this).currentTarget},composedPath(){let b=Y(this).currentTarget;if(b==null)return[];return[b]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return Y(this).eventPhase},stopPropagation(){let b=Y(this);if(b.stopped=!0,typeof b.event.stopPropagation==="function")b.event.stopPropagation()},stopImmediatePropagation(){let b=Y(this);if(b.stopped=!0,b.immediateStopped=!0,typeof b.event.stopImmediatePropagation==="function")b.event.stopImmediatePropagation()},get bubbles(){return Boolean(Y(this).event.bubbles)},get cancelable(){return Boolean(Y(this).event.cancelable)},preventDefault(){z(Y(this))},get defaultPrevented(){return Y(this).canceled},get composed(){return Boolean(Y(this).event.composed)},get timeStamp(){return Y(this).timeStamp},get srcElement(){return Y(this).eventTarget},get cancelBubble(){return Y(this).stopped},set cancelBubble(b){if(!b)return;let m=Y(this);if(m.stopped=!0,typeof m.event.cancelBubble==="boolean")m.event.cancelBubble=!0},get returnValue(){return!Y(this).canceled},set returnValue(b){if(!b)z(Y(this))},initEvent(){}},Object.defineProperty(J.prototype,"constructor",{value:J,configurable:!0,writable:!0}),typeof window<"u"&&typeof window.Event<"u")Object.setPrototypeOf(J.prototype,window.Event.prototype),X.set(window.Event.prototype,J);function q(b){return{get(){return Y(this).event[b]},set(m){Y(this).event[b]=m},configurable:!0,enumerable:!0}}function W(b){return{value(){let m=Y(this).event;return m[b].apply(m,arguments)},configurable:!0,enumerable:!0}}function G(b,m){let K=Object.keys(m);if(K.length===0)return b;function M(j,O){b.call(this,j,O)}M.prototype=Object.create(b.prototype,{constructor:{value:M,configurable:!0,writable:!0}});for(let j=0;j<K.length;++j){let O=K[j];if(!(O in b.prototype)){let R=typeof Object.getOwnPropertyDescriptor(m,O).value==="function";Object.defineProperty(M.prototype,O,R?W(O):q(O))}}return M}function U(b){if(b==null||b===Object.prototype)return J;let m=X.get(b);if(m==null)m=G(U(Object.getPrototypeOf(b)),b),X.set(b,m);return m}function D(b,m){return new(U(Object.getPrototypeOf(m)))(b,m)}function P(b){return Y(b).immediateStopped}function H(b,m){Y(b).eventPhase=m}function N(b,m){Y(b).currentTarget=m}function C(b,m){Y(b).passiveListener=m}var L=new WeakMap,B=1,E=2,I=3;function _(b){return b!==null&&typeof b==="object"}function f(b){let m=L.get(b);if(m==null)throw TypeError("'this' is expected an EventTarget object, but got another value.");return m}function x(b){return{get(){let m=f(this).get(b);while(m!=null){if(m.listenerType===I)return m.listener;m=m.next}return null},set(m){if(typeof m!=="function"&&!_(m))m=null;let K=f(this),M=null,j=K.get(b);while(j!=null){if(j.listenerType===I)if(M!==null)M.next=j.next;else if(j.next!==null)K.set(b,j.next);else K.delete(b);else M=j;j=j.next}if(m!==null){let O={listener:m,listenerType:I,passive:!1,once:!1,next:null};if(M===null)K.set(b,O);else M.next=O}},configurable:!0,enumerable:!0}}function g(b,m){Object.defineProperty(b,`on${m}`,x(m))}function h(b){function m(){v.call(this)}m.prototype=Object.create(v.prototype,{constructor:{value:m,configurable:!0,writable:!0}});for(let K=0;K<b.length;++K)g(m.prototype,b[K]);return m}function v(){if(this instanceof v){L.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return h(arguments[0]);if(arguments.length>0){let b=Array(arguments.length);for(let m=0;m<arguments.length;++m)b[m]=arguments[m];return h(b)}throw TypeError("Cannot call a class as a function")}if(v.prototype={addEventListener(b,m,K){if(m==null)return;if(typeof m!=="function"&&!_(m))throw TypeError("'listener' should be a function or an object.");let M=f(this),j=_(K),O=(j?Boolean(K.capture):Boolean(K))?B:E,R={listener:m,listenerType:O,passive:j&&Boolean(K.passive),once:j&&Boolean(K.once),next:null},F=M.get(b);if(F===void 0){M.set(b,R);return}let A=null;while(F!=null){if(F.listener===m&&F.listenerType===O)return;A=F,F=F.next}A.next=R},removeEventListener(b,m,K){if(m==null)return;let M=f(this),j=(_(K)?Boolean(K.capture):Boolean(K))?B:E,O=null,R=M.get(b);while(R!=null){if(R.listener===m&&R.listenerType===j){if(O!==null)O.next=R.next;else if(R.next!==null)M.set(b,R.next);else M.delete(b);return}O=R,R=R.next}},dispatchEvent(b){if(b==null||typeof b.type!=="string")throw TypeError('"event.type" should be a string.');let m=f(this),K=b.type,M=m.get(K);if(M==null)return!0;let j=D(this,b),O=null;while(M!=null){if(M.once)if(O!==null)O.next=M.next;else if(M.next!==null)m.set(K,M.next);else m.delete(K);else O=M;if(C(j,M.passive?M.listener:null),typeof M.listener==="function")try{M.listener.call(this,j)}catch(R){if(typeof console<"u"&&typeof console.error==="function")console.error(R)}else if(M.listenerType!==I&&typeof M.listener.handleEvent==="function")M.listener.handleEvent(j);if(P(j))break;M=M.next}return C(j,null),H(j,0),N(j,null),!j.defaultPrevented}},Object.defineProperty(v.prototype,"constructor",{value:v,configurable:!0,writable:!0}),typeof window<"u"&&typeof window.EventTarget<"u")Object.setPrototypeOf(v.prototype,window.EventTarget.prototype);$.defineEventAttribute=g,$.EventTarget=v,$.default=v,Q.exports=v,Q.exports.EventTarget=Q.exports.default=v,Q.exports.defineEventAttribute=g}),yV=V6(($,Q)=>{Object.defineProperty($,"__esModule",{value:!0});var Z=NK0();class X extends Z.EventTarget{constructor(){super();throw TypeError("AbortSignal cannot be constructed directly")}get aborted(){let U=J.get(this);if(typeof U!=="boolean")throw TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return U}}Z.defineEventAttribute(X.prototype,"abort");function Y(){let U=Object.create(X.prototype);return Z.EventTarget.call(U),J.set(U,!1),U}function z(U){if(J.get(U)!==!1)return;J.set(U,!0),U.dispatchEvent({type:"abort"})}var J=new WeakMap;if(Object.defineProperties(X.prototype,{aborted:{enumerable:!0}}),typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol")Object.defineProperty(X.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});class q{constructor(){W.set(this,Y())}get signal(){return G(this)}abort(){z(G(this))}}var W=new WeakMap;function G(U){let D=W.get(U);if(D==null)throw TypeError(`Expected 'this' to be an 'AbortController' object, but got ${U===null?"null":typeof U}`);return D}if(Object.defineProperties(q.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol")Object.defineProperty(q.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});$.AbortController=q,$.AbortSignal=X,$.default=q,Q.exports=q,Q.exports.AbortController=Q.exports.default=q,Q.exports.AbortSignal=X}),X4=V6(($,Q)=>{var Z=(s6(),Q5(T8)),{format:X,inspect:Y}=zd(),{codes:{ERR_INVALID_ARG_TYPE:z}}=C2(),{kResistStopPropagation:J,AggregateError:q,SymbolDispose:W}=$8(),G=globalThis.AbortSignal||yV().AbortSignal,U=globalThis.AbortController||yV().AbortController,D=Object.getPrototypeOf(async function(){}).constructor,P=globalThis.Blob||Z.Blob,H=typeof P<"u"?function(L){return L instanceof P}:function(L){return!1},N=(L,B)=>{if(L!==void 0&&(L===null||typeof L!=="object"||!("aborted"in L)))throw new z(B,"AbortSignal",L)},C=(L,B)=>{if(typeof L!=="function")throw new z(B,"Function",L)};Q.exports={AggregateError:q,kEmptyObject:Object.freeze({}),once(L){let B=!1;return function(...E){if(B)return;B=!0,L.apply(this,E)}},createDeferredPromise:function(){let L,B;return{promise:new Promise((E,I)=>{L=E,B=I}),resolve:L,reject:B}},promisify(L){return new Promise((B,E)=>{L((I,..._)=>{if(I)return E(I);return B(..._)})})},debuglog(){return function(){}},format:X,inspect:Y,types:{isAsyncFunction(L){return L instanceof D},isArrayBufferView(L){return ArrayBuffer.isView(L)}},isBlob:H,deprecate(L,B){return L},addAbortListener:(HW(),Q5(PW)).addAbortListener||function(L,B){if(L===void 0)throw new z("signal","AbortSignal",L);N(L,"signal"),C(B,"listener");let E;if(L.aborted)queueMicrotask(()=>B());else L.addEventListener("abort",B,{__proto__:null,once:!0,[J]:!0}),E=()=>{L.removeEventListener("abort",B)};return{__proto__:null,[W](){var I;(I=E)===null||I===void 0||I()}}},AbortSignalAny:G.any||function(L){if(L.length===1)return L[0];let B=new U,E=()=>B.abort();return L.forEach((I)=>{N(I,"signals"),I.addEventListener("abort",E,{once:!0})}),B.signal.addEventListener("abort",()=>{L.forEach((I)=>I.removeEventListener("abort",E))},{once:!0}),B.signal}},Q.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),gV=V6(($,Q)=>{var{ArrayIsArray:Z,ArrayPrototypeIncludes:X,ArrayPrototypeJoin:Y,ArrayPrototypeMap:z,NumberIsInteger:J,NumberIsNaN:q,NumberMAX_SAFE_INTEGER:W,NumberMIN_SAFE_INTEGER:G,NumberParseInt:U,ObjectPrototypeHasOwnProperty:D,RegExpPrototypeExec:P,String:H,StringPrototypeToUpperCase:N,StringPrototypeTrim:C}=$8(),{hideStackFrames:L,codes:{ERR_SOCKET_BAD_PORT:B,ERR_INVALID_ARG_TYPE:E,ERR_INVALID_ARG_VALUE:I,ERR_OUT_OF_RANGE:_,ERR_UNKNOWN_SIGNAL:f}}=C2(),{normalizeEncoding:x}=X4(),{isAsyncFunction:g,isArrayBufferView:h}=X4().types,v={};function b(a){return a===(a|0)}function m(a){return a===a>>>0}var K=/^[0-7]+$/,M="must be a 32-bit unsigned integer or an octal string";function j(a,X0,n0){if(typeof a>"u")a=n0;if(typeof a==="string"){if(P(K,a)===null)throw new I(X0,a,M);a=U(a,8)}return F(a,X0),a}var O=L((a,X0,n0=G,W0=W)=>{if(typeof a!=="number")throw new E(X0,"number",a);if(!J(a))throw new _(X0,"an integer",a);if(a<n0||a>W0)throw new _(X0,`>= ${n0} && <= ${W0}`,a)}),R=L((a,X0,n0=-2147483648,W0=2147483647)=>{if(typeof a!=="number")throw new E(X0,"number",a);if(!J(a))throw new _(X0,"an integer",a);if(a<n0||a>W0)throw new _(X0,`>= ${n0} && <= ${W0}`,a)}),F=L((a,X0,n0=!1)=>{if(typeof a!=="number")throw new E(X0,"number",a);if(!J(a))throw new _(X0,"an integer",a);let W0=n0?1:0,V0=4294967295;if(a<W0||a>V0)throw new _(X0,`>= ${W0} && <= ${V0}`,a)});function A(a,X0){if(typeof a!=="string")throw new E(X0,"string",a)}function T(a,X0,n0=void 0,W0){if(typeof a!=="number")throw new E(X0,"number",a);if(n0!=null&&a<n0||W0!=null&&a>W0||(n0!=null||W0!=null)&&q(a))throw new _(X0,`${n0!=null?`>= ${n0}`:""}${n0!=null&&W0!=null?" && ":""}${W0!=null?`<= ${W0}`:""}`,a)}var V=L((a,X0,n0)=>{if(!X(n0,a)){let W0="must be one of: "+Y(z(n0,(V0)=>typeof V0==="string"?`'${V0}'`:H(V0)),", ");throw new I(X0,a,W0)}});function w(a,X0){if(typeof a!=="boolean")throw new E(X0,"boolean",a)}function k(a,X0,n0){return a==null||!D(a,X0)?n0:a[X0]}var S=L((a,X0,n0=null)=>{let W0=k(n0,"allowArray",!1),V0=k(n0,"allowFunction",!1);if(!k(n0,"nullable",!1)&&a===null||!W0&&Z(a)||typeof a!=="object"&&(!V0||typeof a!=="function"))throw new E(X0,"Object",a)}),y=L((a,X0)=>{if(a!=null&&typeof a!=="object"&&typeof a!=="function")throw new E(X0,"a dictionary",a)}),u=L((a,X0,n0=0)=>{if(!Z(a))throw new E(X0,"Array",a);if(a.length<n0){let W0=`must be longer than ${n0}`;throw new I(X0,a,W0)}});function c(a,X0){u(a,X0);for(let n0=0;n0<a.length;n0++)A(a[n0],`${X0}[${n0}]`)}function o(a,X0){u(a,X0);for(let n0=0;n0<a.length;n0++)w(a[n0],`${X0}[${n0}]`)}function z0(a,X0){u(a,X0);for(let n0=0;n0<a.length;n0++){let W0=a[n0],V0=`${X0}[${n0}]`;if(W0==null)throw new E(V0,"AbortSignal",W0);Z0(W0,V0)}}function e(a,X0="signal"){if(A(a,X0),v[a]===void 0){if(v[N(a)]!==void 0)throw new f(a+" (signals must use all capital letters)");throw new f(a)}}var s=L((a,X0="buffer")=>{if(!h(a))throw new E(X0,["Buffer","TypedArray","DataView"],a)});function J0(a,X0){let n0=x(X0),W0=a.length;if(n0==="hex"&&W0%2!==0)throw new I("encoding",X0,`is invalid for data of length ${W0}`)}function t(a,X0="Port",n0=!0){if(typeof a!=="number"&&typeof a!=="string"||typeof a==="string"&&C(a).length===0||+a!==+a>>>0||a>65535||a===0&&!n0)throw new B(X0,a,n0);return a|0}var Z0=L((a,X0)=>{if(a!==void 0&&(a===null||typeof a!=="object"||!("aborted"in a)))throw new E(X0,"AbortSignal",a)}),N0=L((a,X0)=>{if(typeof a!=="function")throw new E(X0,"Function",a)}),i=L((a,X0)=>{if(typeof a!=="function"||g(a))throw new E(X0,"Function",a)}),l=L((a,X0)=>{if(a!==void 0)throw new E(X0,"undefined",a)});function q0(a,X0,n0){if(!X(n0,a))throw new E(X0,`('${Y(n0,"|")}')`,a)}var Y0=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function K0(a,X0){if(typeof a>"u"||!P(Y0,a))throw new I(X0,a,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function k0(a){if(typeof a==="string")return K0(a,"hints"),a;else if(Z(a)){let X0=a.length,n0="";if(X0===0)return n0;for(let W0=0;W0<X0;W0++){let V0=a[W0];if(K0(V0,"hints"),n0+=V0,W0!==X0-1)n0+=", "}return n0}throw new I("hints",a,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Q.exports={isInt32:b,isUint32:m,parseFileMode:j,validateArray:u,validateStringArray:c,validateBooleanArray:o,validateAbortSignalArray:z0,validateBoolean:w,validateBuffer:s,validateDictionary:y,validateEncoding:J0,validateFunction:N0,validateInt32:R,validateInteger:O,validateNumber:T,validateObject:S,validateOneOf:V,validatePlainFunction:i,validatePort:t,validateSignalName:e,validateString:A,validateUint32:F,validateUndefined:l,validateUnion:q0,validateAbortSignal:Z0,validateLinkHeaderValue:k0}}),Ez=V6(($,Q)=>{Q.exports=globalThis.process}),cQ=V6(($,Q)=>{var{SymbolAsyncIterator:Z,SymbolIterator:X,SymbolFor:Y}=$8(),z=Y("nodejs.stream.destroyed"),J=Y("nodejs.stream.errored"),q=Y("nodejs.stream.readable"),W=Y("nodejs.stream.writable"),G=Y("nodejs.stream.disturbed"),U=Y("nodejs.webstream.isClosedPromise"),D=Y("nodejs.webstream.controllerErrorFunction");function P(k,S=!1){var y;return!!(k&&typeof k.pipe==="function"&&typeof k.on==="function"&&(!S||typeof k.pause==="function"&&typeof k.resume==="function")&&(!k._writableState||((y=k._readableState)===null||y===void 0?void 0:y.readable)!==!1)&&(!k._writableState||k._readableState))}function H(k){var S;return!!(k&&typeof k.write==="function"&&typeof k.on==="function"&&(!k._readableState||((S=k._writableState)===null||S===void 0?void 0:S.writable)!==!1))}function N(k){return!!(k&&typeof k.pipe==="function"&&k._readableState&&typeof k.on==="function"&&typeof k.write==="function")}function C(k){return k&&(k._readableState||k._writableState||typeof k.write==="function"&&typeof k.on==="function"||typeof k.pipe==="function"&&typeof k.on==="function")}function L(k){return!!(k&&!C(k)&&typeof k.pipeThrough==="function"&&typeof k.getReader==="function"&&typeof k.cancel==="function")}function B(k){return!!(k&&!C(k)&&typeof k.getWriter==="function"&&typeof k.abort==="function")}function E(k){return!!(k&&!C(k)&&typeof k.readable==="object"&&typeof k.writable==="object")}function I(k){return L(k)||B(k)||E(k)}function _(k,S){if(k==null)return!1;if(S===!0)return typeof k[Z]==="function";if(S===!1)return typeof k[X]==="function";return typeof k[Z]==="function"||typeof k[X]==="function"}function f(k){if(!C(k))return null;let{_writableState:S,_readableState:y}=k,u=S||y;return!!(k.destroyed||k[z]||u!==null&&u!==void 0&&u.destroyed)}function x(k){if(!H(k))return null;if(k.writableEnded===!0)return!0;let S=k._writableState;if(S!==null&&S!==void 0&&S.errored)return!1;if(typeof(S===null||S===void 0?void 0:S.ended)!=="boolean")return null;return S.ended}function g(k,S){if(!H(k))return null;if(k.writableFinished===!0)return!0;let y=k._writableState;if(y!==null&&y!==void 0&&y.errored)return!1;if(typeof(y===null||y===void 0?void 0:y.finished)!=="boolean")return null;return!!(y.finished||S===!1&&y.ended===!0&&y.length===0)}function h(k){if(!P(k))return null;if(k.readableEnded===!0)return!0;let S=k._readableState;if(!S||S.errored)return!1;if(typeof(S===null||S===void 0?void 0:S.ended)!=="boolean")return null;return S.ended}function v(k,S){if(!P(k))return null;let y=k._readableState;if(y!==null&&y!==void 0&&y.errored)return!1;if(typeof(y===null||y===void 0?void 0:y.endEmitted)!=="boolean")return null;return!!(y.endEmitted||S===!1&&y.ended===!0&&y.length===0)}function b(k){if(k&&k[q]!=null)return k[q];if(typeof(k===null||k===void 0?void 0:k.readable)!=="boolean")return null;if(f(k))return!1;return P(k)&&k.readable&&!v(k)}function m(k){if(k&&k[W]!=null)return k[W];if(typeof(k===null||k===void 0?void 0:k.writable)!=="boolean")return null;if(f(k))return!1;return H(k)&&k.writable&&!x(k)}function K(k,S){if(!C(k))return null;if(f(k))return!0;if((S===null||S===void 0?void 0:S.readable)!==!1&&b(k))return!1;if((S===null||S===void 0?void 0:S.writable)!==!1&&m(k))return!1;return!0}function M(k){var S,y;if(!C(k))return null;if(k.writableErrored)return k.writableErrored;return(S=(y=k._writableState)===null||y===void 0?void 0:y.errored)!==null&&S!==void 0?S:null}function j(k){var S,y;if(!C(k))return null;if(k.readableErrored)return k.readableErrored;return(S=(y=k._readableState)===null||y===void 0?void 0:y.errored)!==null&&S!==void 0?S:null}function O(k){if(!C(k))return null;if(typeof k.closed==="boolean")return k.closed;let{_writableState:S,_readableState:y}=k;if(typeof(S===null||S===void 0?void 0:S.closed)==="boolean"||typeof(y===null||y===void 0?void 0:y.closed)==="boolean")return(S===null||S===void 0?void 0:S.closed)||(y===null||y===void 0?void 0:y.closed);if(typeof k._closed==="boolean"&&R(k))return k._closed;return null}function R(k){return typeof k._closed==="boolean"&&typeof k._defaultKeepAlive==="boolean"&&typeof k._removedConnection==="boolean"&&typeof k._removedContLen==="boolean"}function F(k){return typeof k._sent100==="boolean"&&R(k)}function A(k){var S;return typeof k._consuming==="boolean"&&typeof k._dumped==="boolean"&&((S=k.req)===null||S===void 0?void 0:S.upgradeOrConnect)===void 0}function T(k){if(!C(k))return null;let{_writableState:S,_readableState:y}=k,u=S||y;return!u&&F(k)||!!(u&&u.autoDestroy&&u.emitClose&&u.closed===!1)}function V(k){var S;return!!(k&&((S=k[G])!==null&&S!==void 0?S:k.readableDidRead||k.readableAborted))}function w(k){var S,y,u,c,o,z0,e,s,J0,t;return!!(k&&((S=(y=(u=(c=(o=(z0=k[J])!==null&&z0!==void 0?z0:k.readableErrored)!==null&&o!==void 0?o:k.writableErrored)!==null&&c!==void 0?c:(e=k._readableState)===null||e===void 0?void 0:e.errorEmitted)!==null&&u!==void 0?u:(s=k._writableState)===null||s===void 0?void 0:s.errorEmitted)!==null&&y!==void 0?y:(J0=k._readableState)===null||J0===void 0?void 0:J0.errored)!==null&&S!==void 0?S:(t=k._writableState)===null||t===void 0?void 0:t.errored))}Q.exports={isDestroyed:f,kIsDestroyed:z,isDisturbed:V,kIsDisturbed:G,isErrored:w,kIsErrored:J,isReadable:b,kIsReadable:q,kIsClosedPromise:U,kControllerErrorFunction:D,kIsWritable:W,isClosed:O,isDuplexNodeStream:N,isFinished:K,isIterable:_,isReadableNodeStream:P,isReadableStream:L,isReadableEnded:h,isReadableFinished:v,isReadableErrored:j,isNodeStream:C,isWebStream:I,isWritable:m,isWritableNodeStream:H,isWritableStream:B,isWritableEnded:x,isWritableFinished:g,isWritableErrored:M,isServerRequest:A,isServerResponse:F,willEmitClose:T,isTransformStream:E}}),iX=V6(($,Q)=>{var Z=Ez(),{AbortError:X,codes:Y}=C2(),{ERR_INVALID_ARG_TYPE:z,ERR_STREAM_PREMATURE_CLOSE:J}=Y,{kEmptyObject:q,once:W}=X4(),{validateAbortSignal:G,validateFunction:U,validateObject:D,validateBoolean:P}=gV(),{Promise:H,PromisePrototypeThen:N,SymbolDispose:C}=$8(),{isClosed:L,isReadable:B,isReadableNodeStream:E,isReadableStream:I,isReadableFinished:_,isReadableErrored:f,isWritable:x,isWritableNodeStream:g,isWritableStream:h,isWritableFinished:v,isWritableErrored:b,isNodeStream:m,willEmitClose:K,kIsClosedPromise:M}=cQ(),j;function O(V){return V.setHeader&&typeof V.abort==="function"}var R=()=>{};function F(V,w,k){var S,y;if(arguments.length===2)k=w,w=q;else if(w==null)w=q;else D(w,"options");if(U(k,"callback"),G(w.signal,"options.signal"),k=W(k),I(V)||h(V))return A(V,w,k);if(!m(V))throw new z("stream",["ReadableStream","WritableStream","Stream"],V);let u=(S=w.readable)!==null&&S!==void 0?S:E(V),c=(y=w.writable)!==null&&y!==void 0?y:g(V),o=V._writableState,z0=V._readableState,e=()=>{if(!V.writable)t()},s=K(V)&&E(V)===u&&g(V)===c,J0=v(V,!1),t=()=>{if(J0=!0,V.destroyed)s=!1;if(s&&(!V.readable||u))return;if(!u||Z0)k.call(V)},Z0=_(V,!1),N0=()=>{if(Z0=!0,V.destroyed)s=!1;if(s&&(!V.writable||c))return;if(!c||J0)k.call(V)},i=(a)=>{k.call(V,a)},l=L(V),q0=()=>{l=!0;let a=b(V)||f(V);if(a&&typeof a!=="boolean")return k.call(V,a);if(u&&!Z0&&E(V,!0)){if(!_(V,!1))return k.call(V,new J)}if(c&&!J0){if(!v(V,!1))return k.call(V,new J)}k.call(V)},Y0=()=>{l=!0;let a=b(V)||f(V);if(a&&typeof a!=="boolean")return k.call(V,a);k.call(V)},K0=()=>{V.req.on("finish",t)};if(O(V)){if(V.on("complete",t),!s)V.on("abort",q0);if(V.req)K0();else V.on("request",K0)}else if(c&&!o)V.on("end",e),V.on("close",e);if(!s&&typeof V.aborted==="boolean")V.on("aborted",q0);if(V.on("end",N0),V.on("finish",t),w.error!==!1)V.on("error",i);if(V.on("close",q0),l)Z.nextTick(q0);else if(o!==null&&o!==void 0&&o.errorEmitted||z0!==null&&z0!==void 0&&z0.errorEmitted){if(!s)Z.nextTick(Y0)}else if(!u&&(!s||B(V))&&(J0||x(V)===!1))Z.nextTick(Y0);else if(!c&&(!s||x(V))&&(Z0||B(V)===!1))Z.nextTick(Y0);else if(z0&&V.req&&V.aborted)Z.nextTick(Y0);let k0=()=>{if(k=R,V.removeListener("aborted",q0),V.removeListener("complete",t),V.removeListener("abort",q0),V.removeListener("request",K0),V.req)V.req.removeListener("finish",t);V.removeListener("end",e),V.removeListener("close",e),V.removeListener("finish",t),V.removeListener("end",N0),V.removeListener("error",i),V.removeListener("close",q0)};if(w.signal&&!l){let a=()=>{let X0=k;k0(),X0.call(V,new X(void 0,{cause:w.signal.reason}))};if(w.signal.aborted)Z.nextTick(a);else{j=j||X4().addAbortListener;let X0=j(w.signal,a),n0=k;k=W((...W0)=>{X0[C](),n0.apply(V,W0)})}}return k0}function A(V,w,k){let S=!1,y=R;if(w.signal)if(y=()=>{S=!0,k.call(V,new X(void 0,{cause:w.signal.reason}))},w.signal.aborted)Z.nextTick(y);else{j=j||X4().addAbortListener;let c=j(w.signal,y),o=k;k=W((...z0)=>{c[C](),o.apply(V,z0)})}let u=(...c)=>{if(!S)Z.nextTick(()=>k.apply(V,c))};return N(V[M].promise,u,u),R}function T(V,w){var k;let S=!1;if(w===null)w=q;if((k=w)!==null&&k!==void 0&&k.cleanup)P(w.cleanup,"cleanup"),S=w.cleanup;return new H((y,u)=>{let c=F(V,w,(o)=>{if(S)c();if(o)u(o);else y()})})}Q.exports=F,Q.exports.finished=T}),_K=V6(($,Q)=>{var Z=Ez(),{aggregateTwoErrors:X,codes:{ERR_MULTIPLE_CALLBACK:Y},AbortError:z}=C2(),{Symbol:J}=$8(),{kIsDestroyed:q,isDestroyed:W,isFinished:G,isServerRequest:U}=cQ(),D=J("kDestroy"),P=J("kConstruct");function H(K,M,j){if(K){if(K.stack,M&&!M.errored)M.errored=K;if(j&&!j.errored)j.errored=K}}function N(K,M){let j=this._readableState,O=this._writableState,R=O||j;if(O!==null&&O!==void 0&&O.destroyed||j!==null&&j!==void 0&&j.destroyed){if(typeof M==="function")M();return this}if(H(K,O,j),O)O.destroyed=!0;if(j)j.destroyed=!0;if(!R.constructed)this.once(D,function(F){C(this,X(F,K),M)});else C(this,K,M);return this}function C(K,M,j){let O=!1;function R(F){if(O)return;O=!0;let{_readableState:A,_writableState:T}=K;if(H(F,T,A),T)T.closed=!0;if(A)A.closed=!0;if(typeof j==="function")j(F);if(F)Z.nextTick(L,K,F);else Z.nextTick(B,K)}try{K._destroy(M||null,R)}catch(F){R(F)}}function L(K,M){E(K,M),B(K)}function B(K){let{_readableState:M,_writableState:j}=K;if(j)j.closeEmitted=!0;if(M)M.closeEmitted=!0;if(j!==null&&j!==void 0&&j.emitClose||M!==null&&M!==void 0&&M.emitClose)K.emit("close")}function E(K,M){let{_readableState:j,_writableState:O}=K;if(O!==null&&O!==void 0&&O.errorEmitted||j!==null&&j!==void 0&&j.errorEmitted)return;if(O)O.errorEmitted=!0;if(j)j.errorEmitted=!0;K.emit("error",M)}function I(){let K=this._readableState,M=this._writableState;if(K)K.constructed=!0,K.closed=!1,K.closeEmitted=!1,K.destroyed=!1,K.errored=null,K.errorEmitted=!1,K.reading=!1,K.ended=K.readable===!1,K.endEmitted=K.readable===!1;if(M)M.constructed=!0,M.destroyed=!1,M.closed=!1,M.closeEmitted=!1,M.errored=null,M.errorEmitted=!1,M.finalCalled=!1,M.prefinished=!1,M.ended=M.writable===!1,M.ending=M.writable===!1,M.finished=M.writable===!1}function _(K,M,j){let{_readableState:O,_writableState:R}=K;if(R!==null&&R!==void 0&&R.destroyed||O!==null&&O!==void 0&&O.destroyed)return this;if(O!==null&&O!==void 0&&O.autoDestroy||R!==null&&R!==void 0&&R.autoDestroy)K.destroy(M);else if(M){if(M.stack,R&&!R.errored)R.errored=M;if(O&&!O.errored)O.errored=M;if(j)Z.nextTick(E,K,M);else E(K,M)}}function f(K,M){if(typeof K._construct!=="function")return;let{_readableState:j,_writableState:O}=K;if(j)j.constructed=!1;if(O)O.constructed=!1;if(K.once(P,M),K.listenerCount(P)>1)return;Z.nextTick(x,K)}function x(K){let M=!1;function j(O){if(M){_(K,O!==null&&O!==void 0?O:new Y);return}M=!0;let{_readableState:R,_writableState:F}=K,A=F||R;if(R)R.constructed=!0;if(F)F.constructed=!0;if(A.destroyed)K.emit(D,O);else if(O)_(K,O,!0);else Z.nextTick(g,K)}try{K._construct((O)=>{Z.nextTick(j,O)})}catch(O){Z.nextTick(j,O)}}function g(K){K.emit(P)}function h(K){return(K===null||K===void 0?void 0:K.setHeader)&&typeof K.abort==="function"}function v(K){K.emit("close")}function b(K,M){K.emit("error",M),Z.nextTick(v,K)}function m(K,M){if(!K||W(K))return;if(!M&&!G(K))M=new z;if(U(K))K.socket=null,K.destroy(M);else if(h(K))K.abort();else if(h(K.req))K.req.abort();else if(typeof K.destroy==="function")K.destroy(M);else if(typeof K.close==="function")K.close();else if(M)Z.nextTick(b,K,M);else Z.nextTick(v,K);if(!K.destroyed)K[q]=!0}Q.exports={construct:f,destroyer:m,destroy:N,undestroy:I,errorOrDestroy:_}}),LB=V6(($,Q)=>{var{ArrayIsArray:Z,ObjectSetPrototypeOf:X}=$8(),{EventEmitter:Y}=(HW(),Q5(PW));function z(q){Y.call(this,q)}X(z.prototype,Y.prototype),X(z,Y),z.prototype.pipe=function(q,W){let G=this;function U(B){if(q.writable&&q.write(B)===!1&&G.pause)G.pause()}G.on("data",U);function D(){if(G.readable&&G.resume)G.resume()}if(q.on("drain",D),!q._isStdio&&(!W||W.end!==!1))G.on("end",H),G.on("close",N);let P=!1;function H(){if(P)return;P=!0,q.end()}function N(){if(P)return;if(P=!0,typeof q.destroy==="function")q.destroy()}function C(B){if(L(),Y.listenerCount(this,"error")===0)this.emit("error",B)}J(G,"error",C),J(q,"error",C);function L(){G.removeListener("data",U),q.removeListener("drain",D),G.removeListener("end",H),G.removeListener("close",N),G.removeListener("error",C),q.removeListener("error",C),G.removeListener("end",L),G.removeListener("close",L),q.removeListener("close",L)}return G.on("end",L),G.on("close",L),q.on("close",L),q.emit("pipe",G),q};function J(q,W,G){if(typeof q.prependListener==="function")return q.prependListener(W,G);if(!q._events||!q._events[W])q.on(W,G);else if(Z(q._events[W]))q._events[W].unshift(G);else q._events[W]=[G,q._events[W]]}Q.exports={Stream:z,prependListener:J}}),Bj=V6(($,Q)=>{var{SymbolDispose:Z}=$8(),{AbortError:X,codes:Y}=C2(),{isNodeStream:z,isWebStream:J,kControllerErrorFunction:q}=cQ(),W=iX(),{ERR_INVALID_ARG_TYPE:G}=Y,U,D=(P,H)=>{if(typeof P!=="object"||!("aborted"in P))throw new G(H,"AbortSignal",P)};Q.exports.addAbortSignal=function(P,H){if(D(P,"signal"),!z(H)&&!J(H))throw new G("stream",["ReadableStream","WritableStream","Stream"],H);return Q.exports.addAbortSignalNoValidate(P,H)},Q.exports.addAbortSignalNoValidate=function(P,H){if(typeof P!=="object"||!("aborted"in P))return H;let N=z(H)?()=>{H.destroy(new X(void 0,{cause:P.reason}))}:()=>{H[q](new X(void 0,{cause:P.reason}))};if(P.aborted)N();else{U=U||X4().addAbortListener;let C=U(P,N);W(H,C[Z])}return H}}),CK0=V6(($,Q)=>{var{StringPrototypeSlice:Z,SymbolIterator:X,TypedArrayPrototypeSet:Y,Uint8Array:z}=$8(),{Buffer:J}=(s6(),Q5(T8)),{inspect:q}=X4();Q.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(W){let G={data:W,next:null};if(this.length>0)this.tail.next=G;else this.head=G;this.tail=G,++this.length}unshift(W){let G={data:W,next:this.head};if(this.length===0)this.tail=G;this.head=G,++this.length}shift(){if(this.length===0)return;let W=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;return--this.length,W}clear(){this.head=this.tail=null,this.length=0}join(W){if(this.length===0)return"";let G=this.head,U=""+G.data;while((G=G.next)!==null)U+=W+G.data;return U}concat(W){if(this.length===0)return J.alloc(0);let G=J.allocUnsafe(W>>>0),U=this.head,D=0;while(U)Y(G,U.data,D),D+=U.data.length,U=U.next;return G}consume(W,G){let U=this.head.data;if(W<U.length){let D=U.slice(0,W);return this.head.data=U.slice(W),D}if(W===U.length)return this.shift();return G?this._getString(W):this._getBuffer(W)}first(){return this.head.data}*[X](){for(let W=this.head;W;W=W.next)yield W.data}_getString(W){let G="",U=this.head,D=0;do{let P=U.data;if(W>P.length)G+=P,W-=P.length;else{if(W===P.length)if(G+=P,++D,U.next)this.head=U.next;else this.head=this.tail=null;else G+=Z(P,0,W),this.head=U,U.data=Z(P,W);break}++D}while((U=U.next)!==null);return this.length-=D,G}_getBuffer(W){let G=J.allocUnsafe(W),U=W,D=this.head,P=0;do{let H=D.data;if(W>H.length)Y(G,H,U-W),W-=H.length;else{if(W===H.length)if(Y(G,H,U-W),++P,D.next)this.head=D.next;else this.head=this.tail=null;else Y(G,new z(H.buffer,H.byteOffset,W),U-W),this.head=D,D.data=H.slice(W);break}++P}while((D=D.next)!==null);return this.length-=P,G}[Symbol.for("nodejs.util.inspect.custom")](W,G){return q(this,{...G,depth:0,customInspect:!1})}}}),Ej=V6(($,Q)=>{var{MathFloor:Z,NumberIsInteger:X}=$8(),{validateInteger:Y}=gV(),{ERR_INVALID_ARG_VALUE:z}=C2().codes,J=16384,q=16;function W(P,H,N){return P.highWaterMark!=null?P.highWaterMark:H?P[N]:null}function G(P){return P?q:J}function U(P,H){if(Y(H,"value",0),P)q=H;else J=H}function D(P,H,N,C){let L=W(H,C,N);if(L!=null){if(!X(L)||L<0){let B=C?`options.${N}`:"options.highWaterMark";throw new z(B,L)}return Z(L)}return G(P.objectMode)}Q.exports={getHighWaterMark:D,getDefaultHighWaterMark:G,setDefaultHighWaterMark:U}}),LK0=V6(($,Q)=>{/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Z=(s6(),Q5(T8)),X=Z.Buffer;function Y(J,q){for(var W in J)q[W]=J[W]}if(X.from&&X.alloc&&X.allocUnsafe&&X.allocUnsafeSlow)Q.exports=Z;else Y(Z,$),$.Buffer=z;function z(J,q,W){return X(J,q,W)}z.prototype=Object.create(X.prototype),Y(X,z),z.from=function(J,q,W){if(typeof J==="number")throw TypeError("Argument must not be a number");return X(J,q,W)},z.alloc=function(J,q,W){if(typeof J!=="number")throw TypeError("Argument must be a number");var G=X(J);if(q!==void 0)if(typeof W==="string")G.fill(q,W);else G.fill(q);else G.fill(0);return G},z.allocUnsafe=function(J){if(typeof J!=="number")throw TypeError("Argument must be a number");return X(J)},z.allocUnsafeSlow=function(J){if(typeof J!=="number")throw TypeError("Argument must be a number");return Z.SlowBuffer(J)}}),TK0=V6(($)=>{var Q=LK0().Buffer,Z=Q.isEncoding||function(E){switch(E=""+E,E&&E.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function X(E){if(!E)return"utf8";var I;while(!0)switch(E){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return E;default:if(I)return;E=(""+E).toLowerCase(),I=!0}}function Y(E){var I=X(E);if(typeof I!=="string"&&(Q.isEncoding===Z||!Z(E)))throw Error("Unknown encoding: "+E);return I||E}$.StringDecoder=z;function z(E){this.encoding=Y(E);var I;switch(this.encoding){case"utf16le":this.text=P,this.end=H,I=4;break;case"utf8":this.fillLast=G,I=4;break;case"base64":this.text=N,this.end=C,I=3;break;default:this.write=L,this.end=B;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Q.allocUnsafe(I)}z.prototype.write=function(E){if(E.length===0)return"";var I,_;if(this.lastNeed){if(I=this.fillLast(E),I===void 0)return"";_=this.lastNeed,this.lastNeed=0}else _=0;if(_<E.length)return I?I+this.text(E,_):this.text(E,_);return I||""},z.prototype.end=D,z.prototype.text=U,z.prototype.fillLast=function(E){if(this.lastNeed<=E.length)return E.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);E.copy(this.lastChar,this.lastTotal-this.lastNeed,0,E.length),this.lastNeed-=E.length};function J(E){if(E<=127)return 0;else if(E>>5===6)return 2;else if(E>>4===14)return 3;else if(E>>3===30)return 4;return E>>6===2?-1:-2}function q(E,I,_){var f=I.length-1;if(f<_)return 0;var x=J(I[f]);if(x>=0){if(x>0)E.lastNeed=x-1;return x}if(--f<_||x===-2)return 0;if(x=J(I[f]),x>=0){if(x>0)E.lastNeed=x-2;return x}if(--f<_||x===-2)return 0;if(x=J(I[f]),x>=0){if(x>0)if(x===2)x=0;else E.lastNeed=x-3;return x}return 0}function W(E,I,_){if((I[0]&192)!==128)return E.lastNeed=0,"";if(E.lastNeed>1&&I.length>1){if((I[1]&192)!==128)return E.lastNeed=1,"";if(E.lastNeed>2&&I.length>2){if((I[2]&192)!==128)return E.lastNeed=2,""}}}function G(E){var I=this.lastTotal-this.lastNeed,_=W(this,E,I);if(_!==void 0)return _;if(this.lastNeed<=E.length)return E.copy(this.lastChar,I,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);E.copy(this.lastChar,I,0,E.length),this.lastNeed-=E.length}function U(E,I){var _=q(this,E,I);if(!this.lastNeed)return E.toString("utf8",I);this.lastTotal=_;var f=E.length-(_-this.lastNeed);return E.copy(this.lastChar,0,f),E.toString("utf8",I,f)}function D(E){var I=E&&E.length?this.write(E):"";if(this.lastNeed)return I+"";return I}function P(E,I){if((E.length-I)%2===0){var _=E.toString("utf16le",I);if(_){var f=_.charCodeAt(_.length-1);if(f>=55296&&f<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=E[E.length-2],this.lastChar[1]=E[E.length-1],_.slice(0,-1)}return _}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=E[E.length-1],E.toString("utf16le",I,E.length-1)}function H(E){var I=E&&E.length?this.write(E):"";if(this.lastNeed){var _=this.lastTotal-this.lastNeed;return I+this.lastChar.toString("utf16le",0,_)}return I}function N(E,I){var _=(E.length-I)%3;if(_===0)return E.toString("base64",I);if(this.lastNeed=3-_,this.lastTotal=3,_===1)this.lastChar[0]=E[E.length-1];else this.lastChar[0]=E[E.length-2],this.lastChar[1]=E[E.length-1];return E.toString("base64",I,E.length-_)}function C(E){var I=E&&E.length?this.write(E):"";if(this.lastNeed)return I+this.lastChar.toString("base64",0,3-this.lastNeed);return I}function L(E){return E.toString(this.encoding)}function B(E){return E&&E.length?this.write(E):""}}),qd=V6(($,Q)=>{var Z=Ez(),{PromisePrototypeThen:X,SymbolAsyncIterator:Y,SymbolIterator:z}=$8(),{Buffer:J}=(s6(),Q5(T8)),{ERR_INVALID_ARG_TYPE:q,ERR_STREAM_NULL_VALUES:W}=C2().codes;function G(U,D,P){let H;if(typeof D==="string"||D instanceof J)return new U({objectMode:!0,...P,read(){this.push(D),this.push(null)}});let N;if(D&&D[Y])N=!0,H=D[Y]();else if(D&&D[z])N=!1,H=D[z]();else throw new q("iterable",["Iterable"],D);let C=new U({objectMode:!0,highWaterMark:1,...P}),L=!1;C._read=function(){if(!L)L=!0,E()},C._destroy=function(I,_){X(B(I),()=>Z.nextTick(_,I),(f)=>Z.nextTick(_,f||I))};async function B(I){let _=I!==void 0&&I!==null,f=typeof H.throw==="function";if(_&&f){let{value:x,done:g}=await H.throw(I);if(await x,g)return}if(typeof H.return==="function"){let{value:x}=await H.return();await x}}async function E(){for(;;){try{let{value:I,done:_}=N?await H.next():H.next();if(_)C.push(null);else{let f=I&&typeof I.then==="function"?await I:I;if(f===null)throw L=!1,new W;else if(C.push(f))continue;else L=!1}}catch(I){C.destroy(I)}break}}return C}Q.exports=G}),Ij=V6(($,Q)=>{var Z=Ez(),{ArrayPrototypeIndexOf:X,NumberIsInteger:Y,NumberIsNaN:z,NumberParseInt:J,ObjectDefineProperties:q,ObjectKeys:W,ObjectSetPrototypeOf:G,Promise:U,SafeSet:D,SymbolAsyncDispose:P,SymbolAsyncIterator:H,Symbol:N}=$8();Q.exports=W0,W0.ReadableState=n0;var{EventEmitter:C}=(HW(),Q5(PW)),{Stream:L,prependListener:B}=LB(),{Buffer:E}=(s6(),Q5(T8)),{addAbortSignal:I}=Bj(),_=iX(),f=X4().debuglog("stream",(d)=>{f=d}),x=CK0(),g=_K(),{getHighWaterMark:h,getDefaultHighWaterMark:v}=Ej(),{aggregateTwoErrors:b,codes:{ERR_INVALID_ARG_TYPE:m,ERR_METHOD_NOT_IMPLEMENTED:K,ERR_OUT_OF_RANGE:M,ERR_STREAM_PUSH_AFTER_EOF:j,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:O},AbortError:R}=C2(),{validateObject:F}=gV(),A=N("kPaused"),{StringDecoder:T}=TK0(),V=qd();G(W0.prototype,L.prototype),G(W0,L);var w=()=>{},{errorOrDestroy:k}=g,S=1,y=2,u=4,c=8,o=16,z0=32,e=64,s=128,J0=256,t=512,Z0=1024,N0=2048,i=4096,l=8192,q0=16384,Y0=32768,K0=65536,k0=131072,a=262144;function X0(d){return{enumerable:!1,get(){return(this.state&d)!==0},set($0){if($0)this.state|=d;else this.state&=~d}}}q(n0.prototype,{objectMode:X0(S),ended:X0(y),endEmitted:X0(u),reading:X0(c),constructed:X0(o),sync:X0(z0),needReadable:X0(e),emittedReadable:X0(s),readableListening:X0(J0),resumeScheduled:X0(t),errorEmitted:X0(Z0),emitClose:X0(N0),autoDestroy:X0(i),destroyed:X0(l),closed:X0(q0),closeEmitted:X0(Y0),multiAwaitDrain:X0(K0),readingMore:X0(k0),dataEmitted:X0(a)});function n0(d,$0,G0){if(typeof G0!=="boolean")G0=$0 instanceof uQ();if(this.state=N0|i|o|z0,d&&d.objectMode)this.state|=S;if(G0&&d&&d.readableObjectMode)this.state|=S;if(this.highWaterMark=d?h(this,d,"readableHighWaterMark",G0):v(!1),this.buffer=new x,this.length=0,this.pipes=[],this.flowing=null,this[A]=null,d&&d.emitClose===!1)this.state&=~N0;if(d&&d.autoDestroy===!1)this.state&=~i;if(this.errored=null,this.defaultEncoding=d&&d.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,d&&d.encoding)this.decoder=new T(d.encoding),this.encoding=d.encoding}function W0(d){if(!(this instanceof W0))return new W0(d);let $0=this instanceof uQ();if(this._readableState=new n0(d,this,$0),d){if(typeof d.read==="function")this._read=d.read;if(typeof d.destroy==="function")this._destroy=d.destroy;if(typeof d.construct==="function")this._construct=d.construct;if(d.signal&&!$0)I(d.signal,this)}L.call(this,d),g.construct(this,()=>{if(this._readableState.needReadable)B0(this,this._readableState)})}W0.prototype.destroy=g.destroy,W0.prototype._undestroy=g.undestroy,W0.prototype._destroy=function(d,$0){$0(d)},W0.prototype[C.captureRejectionSymbol]=function(d){this.destroy(d)},W0.prototype[P]=function(){let d;if(!this.destroyed)d=this.readableEnded?null:new R,this.destroy(d);return new U(($0,G0)=>_(this,(O0)=>O0&&O0!==d?G0(O0):$0(null)))},W0.prototype.push=function(d,$0){return V0(this,d,$0,!1)},W0.prototype.unshift=function(d,$0){return V0(this,d,$0,!0)};function V0(d,$0,G0,O0){f("readableAddChunk",$0);let s0=d._readableState,E0;if((s0.state&S)===0){if(typeof $0==="string"){if(G0=G0||s0.defaultEncoding,s0.encoding!==G0)if(O0&&s0.encoding)$0=E.from($0,G0).toString(s0.encoding);else $0=E.from($0,G0),G0=""}else if($0 instanceof E)G0="";else if(L._isUint8Array($0))$0=L._uint8ArrayToBuffer($0),G0="";else if($0!=null)E0=new m("chunk",["string","Buffer","Uint8Array"],$0)}if(E0)k(d,E0);else if($0===null)s0.state&=~c,T0(d,s0);else if((s0.state&S)!==0||$0&&$0.length>0)if(O0)if((s0.state&u)!==0)k(d,new O);else if(s0.destroyed||s0.errored)return!1;else H1(d,s0,$0,!0);else if(s0.ended)k(d,new j);else if(s0.destroyed||s0.errored)return!1;else if(s0.state&=~c,s0.decoder&&!G0)if($0=s0.decoder.write($0),s0.objectMode||$0.length!==0)H1(d,s0,$0,!1);else B0(d,s0);else H1(d,s0,$0,!1);else if(!O0)s0.state&=~c,B0(d,s0);return!s0.ended&&(s0.length<s0.highWaterMark||s0.length===0)}function H1(d,$0,G0,O0){if($0.flowing&&$0.length===0&&!$0.sync&&d.listenerCount("data")>0){if(($0.state&K0)!==0)$0.awaitDrainWriters.clear();else $0.awaitDrainWriters=null;$0.dataEmitted=!0,d.emit("data",G0)}else{if($0.length+=$0.objectMode?1:G0.length,O0)$0.buffer.unshift(G0);else $0.buffer.push(G0);if(($0.state&e)!==0)R0(d)}B0(d,$0)}W0.prototype.isPaused=function(){let d=this._readableState;return d[A]===!0||d.flowing===!1},W0.prototype.setEncoding=function(d){let $0=new T(d);this._readableState.decoder=$0,this._readableState.encoding=this._readableState.decoder.encoding;let G0=this._readableState.buffer,O0="";for(let s0 of G0)O0+=$0.write(s0);if(G0.clear(),O0!=="")G0.push(O0);return this._readableState.length=O0.length,this};var D0=1073741824;function j0(d){if(d>D0)throw new M("size","<= 1GiB",d);else d--,d|=d>>>1,d|=d>>>2,d|=d>>>4,d|=d>>>8,d|=d>>>16,d++;return d}function g1(d,$0){if(d<=0||$0.length===0&&$0.ended)return 0;if(($0.state&S)!==0)return 1;if(z(d)){if($0.flowing&&$0.length)return $0.buffer.first().length;return $0.length}if(d<=$0.length)return d;return $0.ended?$0.length:0}W0.prototype.read=function(d){if(f("read",d),d===void 0)d=NaN;else if(!Y(d))d=J(d,10);let $0=this._readableState,G0=d;if(d>$0.highWaterMark)$0.highWaterMark=j0(d);if(d!==0)$0.state&=~s;if(d===0&&$0.needReadable&&(($0.highWaterMark!==0?$0.length>=$0.highWaterMark:$0.length>0)||$0.ended)){if(f("read: emitReadable",$0.length,$0.ended),$0.length===0&&$0.ended)o6(this);else R0(this);return null}if(d=g1(d,$0),d===0&&$0.ended){if($0.length===0)o6(this);return null}let O0=($0.state&e)!==0;if(f("need readable",O0),$0.length===0||$0.length-d<$0.highWaterMark)O0=!0,f("length less than watermark",O0);if($0.ended||$0.reading||$0.destroyed||$0.errored||!$0.constructed)O0=!1,f("reading, ended or constructing",O0);else if(O0){if(f("do read"),$0.state|=c|z0,$0.length===0)$0.state|=e;try{this._read($0.highWaterMark)}catch(E0){k(this,E0)}if($0.state&=~z0,!$0.reading)d=g1(G0,$0)}let s0;if(d>0)s0=v0(d,$0);else s0=null;if(s0===null)$0.needReadable=$0.length<=$0.highWaterMark,d=0;else if($0.length-=d,$0.multiAwaitDrain)$0.awaitDrainWriters.clear();else $0.awaitDrainWriters=null;if($0.length===0){if(!$0.ended)$0.needReadable=!0;if(G0!==d&&$0.ended)o6(this)}if(s0!==null&&!$0.errorEmitted&&!$0.closeEmitted)$0.dataEmitted=!0,this.emit("data",s0);return s0};function T0(d,$0){if(f("onEofChunk"),$0.ended)return;if($0.decoder){let G0=$0.decoder.end();if(G0&&G0.length)$0.buffer.push(G0),$0.length+=$0.objectMode?1:G0.length}if($0.ended=!0,$0.sync)R0(d);else $0.needReadable=!1,$0.emittedReadable=!0,s1(d)}function R0(d){let $0=d._readableState;if(f("emitReadable",$0.needReadable,$0.emittedReadable),$0.needReadable=!1,!$0.emittedReadable)f("emitReadable",$0.flowing),$0.emittedReadable=!0,Z.nextTick(s1,d)}function s1(d){let $0=d._readableState;if(f("emitReadable_",$0.destroyed,$0.length,$0.ended),!$0.destroyed&&!$0.errored&&($0.length||$0.ended))d.emit("readable"),$0.emittedReadable=!1;$0.needReadable=!$0.flowing&&!$0.ended&&$0.length<=$0.highWaterMark,u0(d)}function B0(d,$0){if(!$0.readingMore&&$0.constructed)$0.readingMore=!0,Z.nextTick(C0,d,$0)}function C0(d,$0){while(!$0.reading&&!$0.ended&&($0.length<$0.highWaterMark||$0.flowing&&$0.length===0)){let G0=$0.length;if(f("maybeReadMore read 0"),d.read(0),G0===$0.length)break}$0.readingMore=!1}W0.prototype._read=function(d){throw new K("_read()")},W0.prototype.pipe=function(d,$0){let G0=this,O0=this._readableState;if(O0.pipes.length===1){if(!O0.multiAwaitDrain)O0.multiAwaitDrain=!0,O0.awaitDrainWriters=new D(O0.awaitDrainWriters?[O0.awaitDrainWriters]:[])}O0.pipes.push(d),f("pipe count=%d opts=%j",O0.pipes.length,$0);let s0=(!$0||$0.end!==!1)&&d!==Z.stdout&&d!==Z.stderr?S0:k1;if(O0.endEmitted)Z.nextTick(s0);else G0.once("end",s0);d.on("unpipe",E0);function E0(g5,P5){if(f("onunpipe"),g5===G0){if(P5&&P5.hasUnpiped===!1)P5.hasUnpiped=!0,p0()}}function S0(){f("onend"),d.end()}let T5,g0=!1;function p0(){if(f("cleanup"),d.removeListener("close",S6),d.removeListener("finish",m1),T5)d.removeListener("drain",T5);if(d.removeListener("error",o0),d.removeListener("unpipe",E0),G0.removeListener("end",S0),G0.removeListener("end",k1),G0.removeListener("data",h0),g0=!0,T5&&O0.awaitDrainWriters&&(!d._writableState||d._writableState.needDrain))T5()}function _6(){if(!g0){if(O0.pipes.length===1&&O0.pipes[0]===d)f("false write response, pause",0),O0.awaitDrainWriters=d,O0.multiAwaitDrain=!1;else if(O0.pipes.length>1&&O0.pipes.includes(d))f("false write response, pause",O0.awaitDrainWriters.size),O0.awaitDrainWriters.add(d);G0.pause()}if(!T5)T5=g6(G0,d),d.on("drain",T5)}G0.on("data",h0);function h0(g5){f("ondata");let P5=d.write(g5);if(f("dest.write",P5),P5===!1)_6()}function o0(g5){if(f("onerror",g5),k1(),d.removeListener("error",o0),d.listenerCount("error")===0){let P5=d._writableState||d._readableState;if(P5&&!P5.errorEmitted)k(d,g5);else d.emit("error",g5)}}B(d,"error",o0);function S6(){d.removeListener("finish",m1),k1()}d.once("close",S6);function m1(){f("onfinish"),d.removeListener("close",S6),k1()}d.once("finish",m1);function k1(){f("unpipe"),G0.unpipe(d)}if(d.emit("pipe",G0),d.writableNeedDrain===!0)_6();else if(!O0.flowing)f("pipe resume"),G0.resume();return d};function g6(d,$0){return function(){let G0=d._readableState;if(G0.awaitDrainWriters===$0)f("pipeOnDrain",1),G0.awaitDrainWriters=null;else if(G0.multiAwaitDrain)f("pipeOnDrain",G0.awaitDrainWriters.size),G0.awaitDrainWriters.delete($0);if((!G0.awaitDrainWriters||G0.awaitDrainWriters.size===0)&&d.listenerCount("data"))d.resume()}}W0.prototype.unpipe=function(d){let $0=this._readableState,G0={hasUnpiped:!1};if($0.pipes.length===0)return this;if(!d){let s0=$0.pipes;$0.pipes=[],this.pause();for(let E0=0;E0<s0.length;E0++)s0[E0].emit("unpipe",this,{hasUnpiped:!1});return this}let O0=X($0.pipes,d);if(O0===-1)return this;if($0.pipes.splice(O0,1),$0.pipes.length===0)this.pause();return d.emit("unpipe",this,G0),this},W0.prototype.on=function(d,$0){let G0=L.prototype.on.call(this,d,$0),O0=this._readableState;if(d==="data"){if(O0.readableListening=this.listenerCount("readable")>0,O0.flowing!==!1)this.resume()}else if(d==="readable"){if(!O0.endEmitted&&!O0.readableListening){if(O0.readableListening=O0.needReadable=!0,O0.flowing=!1,O0.emittedReadable=!1,f("on readable",O0.length,O0.reading),O0.length)R0(this);else if(!O0.reading)Z.nextTick(l0,this)}}return G0},W0.prototype.addListener=W0.prototype.on,W0.prototype.removeListener=function(d,$0){let G0=L.prototype.removeListener.call(this,d,$0);if(d==="readable")Z.nextTick(m0,this);return G0},W0.prototype.off=W0.prototype.removeListener,W0.prototype.removeAllListeners=function(d){let $0=L.prototype.removeAllListeners.apply(this,arguments);if(d==="readable"||d===void 0)Z.nextTick(m0,this);return $0};function m0(d){let $0=d._readableState;if($0.readableListening=d.listenerCount("readable")>0,$0.resumeScheduled&&$0[A]===!1)$0.flowing=!0;else if(d.listenerCount("data")>0)d.resume();else if(!$0.readableListening)$0.flowing=null}function l0(d){f("readable nexttick read 0"),d.read(0)}W0.prototype.resume=function(){let d=this._readableState;if(!d.flowing)f("resume"),d.flowing=!d.readableListening,C6(this,d);return d[A]=!1,this};function C6(d,$0){if(!$0.resumeScheduled)$0.resumeScheduled=!0,Z.nextTick(y0,d,$0)}function y0(d,$0){if(f("resume",$0.reading),!$0.reading)d.read(0);if($0.resumeScheduled=!1,d.emit("resume"),u0(d),$0.flowing&&!$0.reading)d.read(0)}W0.prototype.pause=function(){if(f("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1)f("pause"),this._readableState.flowing=!1,this.emit("pause");return this._readableState[A]=!0,this};function u0(d){let $0=d._readableState;f("flow",$0.flowing);while($0.flowing&&d.read()!==null);}W0.prototype.wrap=function(d){let $0=!1;d.on("data",(O0)=>{if(!this.push(O0)&&d.pause)$0=!0,d.pause()}),d.on("end",()=>{this.push(null)}),d.on("error",(O0)=>{k(this,O0)}),d.on("close",()=>{this.destroy()}),d.on("destroy",()=>{this.destroy()}),this._read=()=>{if($0&&d.resume)$0=!1,d.resume()};let G0=W(d);for(let O0=1;O0<G0.length;O0++){let s0=G0[O0];if(this[s0]===void 0&&typeof d[s0]==="function")this[s0]=d[s0].bind(d)}return this},W0.prototype[H]=function(){return W8(this)},W0.prototype.iterator=function(d){if(d!==void 0)F(d,"options");return W8(this,d)};function W8(d,$0){if(typeof d.read!=="function")d=W0.wrap(d,{objectMode:!0});let G0=d0(d,$0);return G0.stream=d,G0}async function*d0(d,$0){let G0=w;function O0(S0){if(this===d)G0(),G0=w;else G0=S0}d.on("readable",O0);let s0,E0=_(d,{writable:!1},(S0)=>{s0=S0?b(s0,S0):null,G0(),G0=w});try{while(!0){let S0=d.destroyed?null:d.read();if(S0!==null)yield S0;else if(s0)throw s0;else if(s0===null)return;else await new U(O0)}}catch(S0){throw s0=b(s0,S0),s0}finally{if((s0||($0===null||$0===void 0?void 0:$0.destroyOnReturn)!==!1)&&(s0===void 0||d._readableState.autoDestroy))g.destroyer(d,null);else d.off("readable",O0),E0()}}q(W0.prototype,{readable:{__proto__:null,get(){let d=this._readableState;return!!d&&d.readable!==!1&&!d.destroyed&&!d.errorEmitted&&!d.endEmitted},set(d){if(this._readableState)this._readableState.readable=!!d}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(d){if(this._readableState)this._readableState.flowing=d}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(d){if(!this._readableState)return;this._readableState.destroyed=d}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),q(n0.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[A]!==!1},set(d){this[A]=!!d}}}),W0._fromList=v0;function v0(d,$0){if($0.length===0)return null;let G0;if($0.objectMode)G0=$0.buffer.shift();else if(!d||d>=$0.length){if($0.decoder)G0=$0.buffer.join("");else if($0.buffer.length===1)G0=$0.buffer.first();else G0=$0.buffer.concat($0.length);$0.buffer.clear()}else G0=$0.buffer.consume(d,$0.decoder);return G0}function o6(d){let $0=d._readableState;if(f("endReadable",$0.endEmitted),!$0.endEmitted)$0.ended=!0,Z.nextTick(i0,$0,d)}function i0(d,$0){if(f("endReadableNT",d.endEmitted,d.length),!d.errored&&!d.closeEmitted&&!d.endEmitted&&d.length===0){if(d.endEmitted=!0,$0.emit("end"),$0.writable&&$0.allowHalfOpen===!1)Z.nextTick(c0,$0);else if(d.autoDestroy){let G0=$0._writableState;if(!G0||G0.autoDestroy&&(G0.finished||G0.writable===!1))$0.destroy()}}}function c0(d){if(d.writable&&!d.writableEnded&&!d.destroyed)d.end()}W0.from=function(d,$0){return V(W0,d,$0)};var M5;function _0(){if(M5===void 0)M5={};return M5}W0.fromWeb=function(d,$0){return _0().newStreamReadableFromReadableStream(d,$0)},W0.toWeb=function(d,$0){return _0().newReadableStreamFromStreamReadable(d,$0)},W0.wrap=function(d,$0){var G0,O0;return new W0({objectMode:(G0=(O0=d.readableObjectMode)!==null&&O0!==void 0?O0:d.objectMode)!==null&&G0!==void 0?G0:!0,...$0,destroy(s0,E0){g.destroyer(d,s0),E0(s0)}}).wrap(d)}}),TB=V6(($,Q)=>{var Z=Ez(),{ArrayPrototypeSlice:X,Error:Y,FunctionPrototypeSymbolHasInstance:z,ObjectDefineProperty:J,ObjectDefineProperties:q,ObjectSetPrototypeOf:W,StringPrototypeToLowerCase:G,Symbol:U,SymbolHasInstance:D}=$8();Q.exports=F,F.WritableState=O;var{EventEmitter:P}=(HW(),Q5(PW)),H=LB().Stream,{Buffer:N}=(s6(),Q5(T8)),C=_K(),{addAbortSignal:L}=Bj(),{getHighWaterMark:B,getDefaultHighWaterMark:E}=Ej(),{ERR_INVALID_ARG_TYPE:I,ERR_METHOD_NOT_IMPLEMENTED:_,ERR_MULTIPLE_CALLBACK:f,ERR_STREAM_CANNOT_PIPE:x,ERR_STREAM_DESTROYED:g,ERR_STREAM_ALREADY_FINISHED:h,ERR_STREAM_NULL_VALUES:v,ERR_STREAM_WRITE_AFTER_END:b,ERR_UNKNOWN_ENCODING:m}=C2().codes,{errorOrDestroy:K}=C;W(F.prototype,H.prototype),W(F,H);function M(){}var j=U("kOnFinished");function O(i,l,q0){if(typeof q0!=="boolean")q0=l instanceof uQ();if(this.objectMode=!!(i&&i.objectMode),q0)this.objectMode=this.objectMode||!!(i&&i.writableObjectMode);this.highWaterMark=i?B(this,i,"writableHighWaterMark",q0):E(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let Y0=!!(i&&i.decodeStrings===!1);this.decodeStrings=!Y0,this.defaultEncoding=i&&i.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=k.bind(void 0,l),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,R(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!i||i.emitClose!==!1,this.autoDestroy=!i||i.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[j]=[]}function R(i){i.buffered=[],i.bufferedIndex=0,i.allBuffers=!0,i.allNoop=!0}O.prototype.getBuffer=function(){return X(this.buffered,this.bufferedIndex)},J(O.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function F(i){let l=this instanceof uQ();if(!l&&!z(F,this))return new F(i);if(this._writableState=new O(i,this,l),i){if(typeof i.write==="function")this._write=i.write;if(typeof i.writev==="function")this._writev=i.writev;if(typeof i.destroy==="function")this._destroy=i.destroy;if(typeof i.final==="function")this._final=i.final;if(typeof i.construct==="function")this._construct=i.construct;if(i.signal)L(i.signal,this)}H.call(this,i),C.construct(this,()=>{let q0=this._writableState;if(!q0.writing)c(this,q0);s(this,q0)})}J(F,D,{__proto__:null,value:function(i){if(z(this,i))return!0;if(this!==F)return!1;return i&&i._writableState instanceof O}}),F.prototype.pipe=function(){K(this,new x)};function A(i,l,q0,Y0){let K0=i._writableState;if(typeof q0==="function")Y0=q0,q0=K0.defaultEncoding;else{if(!q0)q0=K0.defaultEncoding;else if(q0!=="buffer"&&!N.isEncoding(q0))throw new m(q0);if(typeof Y0!=="function")Y0=M}if(l===null)throw new v;else if(!K0.objectMode)if(typeof l==="string"){if(K0.decodeStrings!==!1)l=N.from(l,q0),q0="buffer"}else if(l instanceof N)q0="buffer";else if(H._isUint8Array(l))l=H._uint8ArrayToBuffer(l),q0="buffer";else throw new I("chunk",["string","Buffer","Uint8Array"],l);let k0;if(K0.ending)k0=new b;else if(K0.destroyed)k0=new g("write");if(k0)return Z.nextTick(Y0,k0),K(i,k0,!0),k0;return K0.pendingcb++,T(i,K0,l,q0,Y0)}F.prototype.write=function(i,l,q0){return A(this,i,l,q0)===!0},F.prototype.cork=function(){this._writableState.corked++},F.prototype.uncork=function(){let i=this._writableState;if(i.corked){if(i.corked--,!i.writing)c(this,i)}},F.prototype.setDefaultEncoding=function(i){if(typeof i==="string")i=G(i);if(!N.isEncoding(i))throw new m(i);return this._writableState.defaultEncoding=i,this};function T(i,l,q0,Y0,K0){let k0=l.objectMode?1:q0.length;l.length+=k0;let a=l.length<l.highWaterMark;if(!a)l.needDrain=!0;if(l.writing||l.corked||l.errored||!l.constructed){if(l.buffered.push({chunk:q0,encoding:Y0,callback:K0}),l.allBuffers&&Y0!=="buffer")l.allBuffers=!1;if(l.allNoop&&K0!==M)l.allNoop=!1}else l.writelen=k0,l.writecb=K0,l.writing=!0,l.sync=!0,i._write(q0,Y0,l.onwrite),l.sync=!1;return a&&!l.errored&&!l.destroyed}function V(i,l,q0,Y0,K0,k0,a){if(l.writelen=Y0,l.writecb=a,l.writing=!0,l.sync=!0,l.destroyed)l.onwrite(new g("write"));else if(q0)i._writev(K0,l.onwrite);else i._write(K0,k0,l.onwrite);l.sync=!1}function w(i,l,q0,Y0){--l.pendingcb,Y0(q0),u(l),K(i,q0)}function k(i,l){let q0=i._writableState,Y0=q0.sync,K0=q0.writecb;if(typeof K0!=="function"){K(i,new f);return}if(q0.writing=!1,q0.writecb=null,q0.length-=q0.writelen,q0.writelen=0,l){if(l.stack,!q0.errored)q0.errored=l;if(i._readableState&&!i._readableState.errored)i._readableState.errored=l;if(Y0)Z.nextTick(w,i,q0,l,K0);else w(i,q0,l,K0)}else{if(q0.buffered.length>q0.bufferedIndex)c(i,q0);if(Y0)if(q0.afterWriteTickInfo!==null&&q0.afterWriteTickInfo.cb===K0)q0.afterWriteTickInfo.count++;else q0.afterWriteTickInfo={count:1,cb:K0,stream:i,state:q0},Z.nextTick(S,q0.afterWriteTickInfo);else y(i,q0,1,K0)}}function S({stream:i,state:l,count:q0,cb:Y0}){return l.afterWriteTickInfo=null,y(i,l,q0,Y0)}function y(i,l,q0,Y0){if(!l.ending&&!i.destroyed&&l.length===0&&l.needDrain)l.needDrain=!1,i.emit("drain");while(q0-- >0)l.pendingcb--,Y0();if(l.destroyed)u(l);s(i,l)}function u(i){if(i.writing)return;for(let K0=i.bufferedIndex;K0<i.buffered.length;++K0){var l;let{chunk:k0,callback:a}=i.buffered[K0],X0=i.objectMode?1:k0.length;i.length-=X0,a((l=i.errored)!==null&&l!==void 0?l:new g("write"))}let q0=i[j].splice(0);for(let K0=0;K0<q0.length;K0++){var Y0;q0[K0]((Y0=i.errored)!==null&&Y0!==void 0?Y0:new g("end"))}R(i)}function c(i,l){if(l.corked||l.bufferProcessing||l.destroyed||!l.constructed)return;let{buffered:q0,bufferedIndex:Y0,objectMode:K0}=l,k0=q0.length-Y0;if(!k0)return;let a=Y0;if(l.bufferProcessing=!0,k0>1&&i._writev){l.pendingcb-=k0-1;let X0=l.allNoop?M:(W0)=>{for(let V0=a;V0<q0.length;++V0)q0[V0].callback(W0)},n0=l.allNoop&&a===0?q0:X(q0,a);n0.allBuffers=l.allBuffers,V(i,l,!0,l.length,n0,"",X0),R(l)}else{do{let{chunk:X0,encoding:n0,callback:W0}=q0[a];q0[a++]=null;let V0=K0?1:X0.length;V(i,l,!1,V0,X0,n0,W0)}while(a<q0.length&&!l.writing);if(a===q0.length)R(l);else if(a>256)q0.splice(0,a),l.bufferedIndex=0;else l.bufferedIndex=a}l.bufferProcessing=!1}F.prototype._write=function(i,l,q0){if(this._writev)this._writev([{chunk:i,encoding:l}],q0);else throw new _("_write()")},F.prototype._writev=null,F.prototype.end=function(i,l,q0){let Y0=this._writableState;if(typeof i==="function")q0=i,i=null,l=null;else if(typeof l==="function")q0=l,l=null;let K0;if(i!==null&&i!==void 0){let k0=A(this,i,l);if(k0 instanceof Y)K0=k0}if(Y0.corked)Y0.corked=1,this.uncork();if(K0);else if(!Y0.errored&&!Y0.ending)Y0.ending=!0,s(this,Y0,!0),Y0.ended=!0;else if(Y0.finished)K0=new h("end");else if(Y0.destroyed)K0=new g("end");if(typeof q0==="function")if(K0||Y0.finished)Z.nextTick(q0,K0);else Y0[j].push(q0);return this};function o(i){return i.ending&&!i.destroyed&&i.constructed&&i.length===0&&!i.errored&&i.buffered.length===0&&!i.finished&&!i.writing&&!i.errorEmitted&&!i.closeEmitted}function z0(i,l){let q0=!1;function Y0(K0){if(q0){K(i,K0!==null&&K0!==void 0?K0:f());return}if(q0=!0,l.pendingcb--,K0){let k0=l[j].splice(0);for(let a=0;a<k0.length;a++)k0[a](K0);K(i,K0,l.sync)}else if(o(l))l.prefinished=!0,i.emit("prefinish"),l.pendingcb++,Z.nextTick(J0,i,l)}l.sync=!0,l.pendingcb++;try{i._final(Y0)}catch(K0){Y0(K0)}l.sync=!1}function e(i,l){if(!l.prefinished&&!l.finalCalled)if(typeof i._final==="function"&&!l.destroyed)l.finalCalled=!0,z0(i,l);else l.prefinished=!0,i.emit("prefinish")}function s(i,l,q0){if(o(l)){if(e(i,l),l.pendingcb===0){if(q0)l.pendingcb++,Z.nextTick((Y0,K0)=>{if(o(K0))J0(Y0,K0);else K0.pendingcb--},i,l);else if(o(l))l.pendingcb++,J0(i,l)}}}function J0(i,l){l.pendingcb--,l.finished=!0;let q0=l[j].splice(0);for(let Y0=0;Y0<q0.length;Y0++)q0[Y0]();if(i.emit("finish"),l.autoDestroy){let Y0=i._readableState;if(!Y0||Y0.autoDestroy&&(Y0.endEmitted||Y0.readable===!1))i.destroy()}}q(F.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(i){if(this._writableState)this._writableState.destroyed=i}},writable:{__proto__:null,get(){let i=this._writableState;return!!i&&i.writable!==!1&&!i.destroyed&&!i.errored&&!i.ending&&!i.ended},set(i){if(this._writableState)this._writableState.writable=!!i}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let i=this._writableState;if(!i)return!1;return!i.destroyed&&!i.ending&&i.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var t=C.destroy;F.prototype.destroy=function(i,l){let q0=this._writableState;if(!q0.destroyed&&(q0.bufferedIndex<q0.buffered.length||q0[j].length))Z.nextTick(u,q0);return t.call(this,i,l),this},F.prototype._undestroy=C.undestroy,F.prototype._destroy=function(i,l){l(i)},F.prototype[P.captureRejectionSymbol]=function(i){this.destroy(i)};var Z0;function N0(){if(Z0===void 0)Z0={};return Z0}F.fromWeb=function(i,l){return N0().newStreamWritableFromWritableStream(i,l)},F.toWeb=function(i){return N0().newWritableStreamFromStreamWritable(i)}}),FK0=V6(($,Q)=>{var Z=Ez(),X=(s6(),Q5(T8)),{isReadable:Y,isWritable:z,isIterable:J,isNodeStream:q,isReadableNodeStream:W,isWritableNodeStream:G,isDuplexNodeStream:U,isReadableStream:D,isWritableStream:P}=cQ(),H=iX(),{AbortError:N,codes:{ERR_INVALID_ARG_TYPE:C,ERR_INVALID_RETURN_VALUE:L}}=C2(),{destroyer:B}=_K(),E=uQ(),I=Ij(),_=TB(),{createDeferredPromise:f}=X4(),x=qd(),g=globalThis.Blob||X.Blob,h=typeof g<"u"?function(j){return j instanceof g}:function(j){return!1},v=globalThis.AbortController||yV().AbortController,{FunctionPrototypeCall:b}=$8();class m extends E{constructor(j){super(j);if((j===null||j===void 0?void 0:j.readable)===!1)this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0;if((j===null||j===void 0?void 0:j.writable)===!1)this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0}}Q.exports=function j(O,R){if(U(O))return O;if(W(O))return M({readable:O});if(G(O))return M({writable:O});if(q(O))return M({writable:!1,readable:!1});if(D(O))return M({readable:I.fromWeb(O)});if(P(O))return M({writable:_.fromWeb(O)});if(typeof O==="function"){let{value:A,write:T,final:V,destroy:w}=K(O);if(J(A))return x(m,A,{objectMode:!0,write:T,final:V,destroy:w});let k=A===null||A===void 0?void 0:A.then;if(typeof k==="function"){let S,y=b(k,A,(u)=>{if(u!=null)throw new L("nully","body",u)},(u)=>{B(S,u)});return S=new m({objectMode:!0,readable:!1,write:T,final(u){V(async()=>{try{await y,Z.nextTick(u,null)}catch(c){Z.nextTick(u,c)}})},destroy:w})}throw new L("Iterable, AsyncIterable or AsyncFunction",R,A)}if(h(O))return j(O.arrayBuffer());if(J(O))return x(m,O,{objectMode:!0,writable:!1});if(D(O===null||O===void 0?void 0:O.readable)&&P(O===null||O===void 0?void 0:O.writable))return m.fromWeb(O);if(typeof(O===null||O===void 0?void 0:O.writable)==="object"||typeof(O===null||O===void 0?void 0:O.readable)==="object"){let A=O!==null&&O!==void 0&&O.readable?W(O===null||O===void 0?void 0:O.readable)?O===null||O===void 0?void 0:O.readable:j(O.readable):void 0,T=O!==null&&O!==void 0&&O.writable?G(O===null||O===void 0?void 0:O.writable)?O===null||O===void 0?void 0:O.writable:j(O.writable):void 0;return M({readable:A,writable:T})}let F=O===null||O===void 0?void 0:O.then;if(typeof F==="function"){let A;return b(F,O,(T)=>{if(T!=null)A.push(T);A.push(null)},(T)=>{B(A,T)}),A=new m({objectMode:!0,writable:!1,read(){}})}throw new C(R,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],O)};function K(j){let{promise:O,resolve:R}=f(),F=new v,A=F.signal;return{value:j(async function*(){while(!0){let T=O;O=null;let{chunk:V,done:w,cb:k}=await T;if(Z.nextTick(k),w)return;if(A.aborted)throw new N(void 0,{cause:A.reason});({promise:O,resolve:R}=f()),yield V}}(),{signal:A}),write(T,V,w){let k=R;R=null,k({chunk:T,done:!1,cb:w})},final(T){let V=R;R=null,V({done:!0,cb:T})},destroy(T,V){F.abort(),V(T)}}}function M(j){let O=j.readable&&typeof j.readable.read!=="function"?I.wrap(j.readable):j.readable,R=j.writable,F=!!Y(O),A=!!z(R),T,V,w,k,S;function y(u){let c=k;if(k=null,c)c(u);else if(u)S.destroy(u)}if(S=new m({readableObjectMode:!!(O!==null&&O!==void 0&&O.readableObjectMode),writableObjectMode:!!(R!==null&&R!==void 0&&R.writableObjectMode),readable:F,writable:A}),A)H(R,(u)=>{if(A=!1,u)B(O,u);y(u)}),S._write=function(u,c,o){if(R.write(u,c))o();else T=o},S._final=function(u){R.end(),V=u},R.on("drain",function(){if(T){let u=T;T=null,u()}}),R.on("finish",function(){if(V){let u=V;V=null,u()}});if(F)H(O,(u)=>{if(F=!1,u)B(O,u);y(u)}),O.on("readable",function(){if(w){let u=w;w=null,u()}}),O.on("end",function(){S.push(null)}),S._read=function(){while(!0){let u=O.read();if(u===null){w=S._read;return}if(!S.push(u))return}};return S._destroy=function(u,c){if(!u&&k!==null)u=new N;if(w=null,T=null,V=null,k===null)c(u);else k=c,B(R,u),B(O,u)},S}}),uQ=V6(($,Q)=>{var{ObjectDefineProperties:Z,ObjectGetOwnPropertyDescriptor:X,ObjectKeys:Y,ObjectSetPrototypeOf:z}=$8();Q.exports=W;var J=Ij(),q=TB();z(W.prototype,J.prototype),z(W,J);{let P=Y(q.prototype);for(let H=0;H<P.length;H++){let N=P[H];if(!W.prototype[N])W.prototype[N]=q.prototype[N]}}function W(P){if(!(this instanceof W))return new W(P);if(J.call(this,P),q.call(this,P),P){if(this.allowHalfOpen=P.allowHalfOpen!==!1,P.readable===!1)this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0;if(P.writable===!1)this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0}else this.allowHalfOpen=!0}Z(W.prototype,{writable:{__proto__:null,...X(q.prototype,"writable")},writableHighWaterMark:{__proto__:null,...X(q.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...X(q.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...X(q.prototype,"writableBuffer")},writableLength:{__proto__:null,...X(q.prototype,"writableLength")},writableFinished:{__proto__:null,...X(q.prototype,"writableFinished")},writableCorked:{__proto__:null,...X(q.prototype,"writableCorked")},writableEnded:{__proto__:null,...X(q.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...X(q.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){if(this._readableState===void 0||this._writableState===void 0)return!1;return this._readableState.destroyed&&this._writableState.destroyed},set(P){if(this._readableState&&this._writableState)this._readableState.destroyed=P,this._writableState.destroyed=P}}});var G;function U(){if(G===void 0)G={};return G}W.fromWeb=function(P,H){return U().newStreamDuplexFromReadableWritablePair(P,H)},W.toWeb=function(P){return U().newReadableWritablePairFromDuplex(P)};var D;W.from=function(P){if(!D)D=FK0();return D(P,"body")}}),Wd=V6(($,Q)=>{var{ObjectSetPrototypeOf:Z,Symbol:X}=$8();Q.exports=W;var{ERR_METHOD_NOT_IMPLEMENTED:Y}=C2().codes,z=uQ(),{getHighWaterMark:J}=Ej();Z(W.prototype,z.prototype),Z(W,z);var q=X("kCallback");function W(D){if(!(this instanceof W))return new W(D);let P=D?J(this,D,"readableHighWaterMark",!0):null;if(P===0)D={...D,highWaterMark:null,readableHighWaterMark:P,writableHighWaterMark:D.writableHighWaterMark||0};if(z.call(this,D),this._readableState.sync=!1,this[q]=null,D){if(typeof D.transform==="function")this._transform=D.transform;if(typeof D.flush==="function")this._flush=D.flush}this.on("prefinish",U)}function G(D){if(typeof this._flush==="function"&&!this.destroyed)this._flush((P,H)=>{if(P){if(D)D(P);else this.destroy(P);return}if(H!=null)this.push(H);if(this.push(null),D)D()});else if(this.push(null),D)D()}function U(){if(this._final!==G)G.call(this)}W.prototype._final=G,W.prototype._transform=function(D,P,H){throw new Y("_transform()")},W.prototype._write=function(D,P,H){let N=this._readableState,C=this._writableState,L=N.length;this._transform(D,P,(B,E)=>{if(B){H(B);return}if(E!=null)this.push(E);if(C.ended||L===N.length||N.length<N.highWaterMark)H();else this[q]=H})},W.prototype._read=function(){if(this[q]){let D=this[q];this[q]=null,D()}}}),Kd=V6(($,Q)=>{var{ObjectSetPrototypeOf:Z}=$8();Q.exports=Y;var X=Wd();Z(Y.prototype,X.prototype),Z(Y,X);function Y(z){if(!(this instanceof Y))return new Y(z);X.call(this,z)}Y.prototype._transform=function(z,J,q){q(null,z)}}),FB=V6(($,Q)=>{var Z=Ez(),{ArrayIsArray:X,Promise:Y,SymbolAsyncIterator:z,SymbolDispose:J}=$8(),q=iX(),{once:W}=X4(),G=_K(),U=uQ(),{aggregateTwoErrors:D,codes:{ERR_INVALID_ARG_TYPE:P,ERR_INVALID_RETURN_VALUE:H,ERR_MISSING_ARGS:N,ERR_STREAM_DESTROYED:C,ERR_STREAM_PREMATURE_CLOSE:L},AbortError:B}=C2(),{validateFunction:E,validateAbortSignal:I}=gV(),{isIterable:_,isReadable:f,isReadableNodeStream:x,isNodeStream:g,isTransformStream:h,isWebStream:v,isReadableStream:b,isReadableFinished:m}=cQ(),K=globalThis.AbortController||yV().AbortController,M,j,O;function R(u,c,o){let z0=!1;u.on("close",()=>{z0=!0});let e=q(u,{readable:c,writable:o},(s)=>{z0=!s});return{destroy:(s)=>{if(z0)return;z0=!0,G.destroyer(u,s||new C("pipe"))},cleanup:e}}function F(u){return E(u[u.length-1],"streams[stream.length - 1]"),u.pop()}function A(u){if(_(u))return u;else if(x(u))return T(u);throw new P("val",["Readable","Iterable","AsyncIterable"],u)}async function*T(u){if(!j)j=Ij();yield*j.prototype[z].call(u)}async function V(u,c,o,{end:z0}){let e,s=null,J0=(N0)=>{if(N0)e=N0;if(s){let i=s;s=null,i()}},t=()=>new Y((N0,i)=>{if(e)i(e);else s=()=>{if(e)i(e);else N0()}});c.on("drain",J0);let Z0=q(c,{readable:!1},J0);try{if(c.writableNeedDrain)await t();for await(let N0 of u)if(!c.write(N0))await t();if(z0)c.end(),await t();o()}catch(N0){o(e!==N0?D(e,N0):N0)}finally{Z0(),c.off("drain",J0)}}async function w(u,c,o,{end:z0}){if(h(c))c=c.writable;let e=c.getWriter();try{for await(let s of u)await e.ready,e.write(s).catch(()=>{});if(await e.ready,z0)await e.close();o()}catch(s){try{await e.abort(s),o(s)}catch(J0){o(J0)}}}function k(...u){return S(u,W(F(u)))}function S(u,c,o){if(u.length===1&&X(u[0]))u=u[0];if(u.length<2)throw new N("streams");let z0=new K,e=z0.signal,s=o===null||o===void 0?void 0:o.signal,J0=[];I(s,"options.signal");function t(){K0(new B)}O=O||X4().addAbortListener;let Z0;if(s)Z0=O(s,t);let N0,i,l=[],q0=0;function Y0(W0){K0(W0,--q0===0)}function K0(W0,V0){var H1;if(W0&&(!N0||N0.code==="ERR_STREAM_PREMATURE_CLOSE"))N0=W0;if(!N0&&!V0)return;while(l.length)l.shift()(N0);if((H1=Z0)===null||H1===void 0||H1[J](),z0.abort(),V0){if(!N0)J0.forEach((D0)=>D0());Z.nextTick(c,N0,i)}}let k0;for(let W0=0;W0<u.length;W0++){let V0=u[W0],H1=W0<u.length-1,D0=W0>0,j0=H1||(o===null||o===void 0?void 0:o.end)!==!1,g1=W0===u.length-1;if(g(V0)){let T0=function(R0){if(R0&&R0.name!=="AbortError"&&R0.code!=="ERR_STREAM_PREMATURE_CLOSE")Y0(R0)};var a=T0;if(j0){let{destroy:R0,cleanup:s1}=R(V0,H1,D0);if(l.push(R0),f(V0)&&g1)J0.push(s1)}if(V0.on("error",T0),f(V0)&&g1)J0.push(()=>{V0.removeListener("error",T0)})}if(W0===0)if(typeof V0==="function"){if(k0=V0({signal:e}),!_(k0))throw new H("Iterable, AsyncIterable or Stream","source",k0)}else if(_(V0)||x(V0)||h(V0))k0=V0;else k0=U.from(V0);else if(typeof V0==="function"){if(h(k0)){var X0;k0=A((X0=k0)===null||X0===void 0?void 0:X0.readable)}else k0=A(k0);if(k0=V0(k0,{signal:e}),H1){if(!_(k0,!0))throw new H("AsyncIterable",`transform[${W0-1}]`,k0)}else{var n0;if(!M)M=Kd();let T0=new M({objectMode:!0}),R0=(n0=k0)===null||n0===void 0?void 0:n0.then;if(typeof R0==="function")q0++,R0.call(k0,(C0)=>{if(i=C0,C0!=null)T0.write(C0);if(j0)T0.end();Z.nextTick(Y0)},(C0)=>{T0.destroy(C0),Z.nextTick(Y0,C0)});else if(_(k0,!0))q0++,V(k0,T0,Y0,{end:j0});else if(b(k0)||h(k0)){let C0=k0.readable||k0;q0++,V(C0,T0,Y0,{end:j0})}else throw new H("AsyncIterable or Promise","destination",k0);k0=T0;let{destroy:s1,cleanup:B0}=R(k0,!1,!0);if(l.push(s1),g1)J0.push(B0)}}else if(g(V0)){if(x(k0)){q0+=2;let T0=y(k0,V0,Y0,{end:j0});if(f(V0)&&g1)J0.push(T0)}else if(h(k0)||b(k0)){let T0=k0.readable||k0;q0++,V(T0,V0,Y0,{end:j0})}else if(_(k0))q0++,V(k0,V0,Y0,{end:j0});else throw new P("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],k0);k0=V0}else if(v(V0)){if(x(k0))q0++,w(A(k0),V0,Y0,{end:j0});else if(b(k0)||_(k0))q0++,w(k0,V0,Y0,{end:j0});else if(h(k0))q0++,w(k0.readable,V0,Y0,{end:j0});else throw new P("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],k0);k0=V0}else k0=U.from(V0)}if(e!==null&&e!==void 0&&e.aborted||s!==null&&s!==void 0&&s.aborted)Z.nextTick(t);return k0}function y(u,c,o,{end:z0}){let e=!1;if(c.on("close",()=>{if(!e)o(new L)}),u.pipe(c,{end:!1}),z0){let J0=function(){e=!0,c.end()};var s=J0;if(m(u))Z.nextTick(J0);else u.once("end",J0)}else o();return q(u,{readable:!0,writable:!1},(J0)=>{let t=u._readableState;if(J0&&J0.code==="ERR_STREAM_PREMATURE_CLOSE"&&t&&t.ended&&!t.errored&&!t.errorEmitted)u.once("end",o).once("error",o);else o(J0)}),q(c,{readable:!1,writable:!0},o)}Q.exports={pipelineImpl:S,pipeline:k}}),Gd=V6(($,Q)=>{var{pipeline:Z}=FB(),X=uQ(),{destroyer:Y}=_K(),{isNodeStream:z,isReadable:J,isWritable:q,isWebStream:W,isTransformStream:G,isWritableStream:U,isReadableStream:D}=cQ(),{AbortError:P,codes:{ERR_INVALID_ARG_VALUE:H,ERR_MISSING_ARGS:N}}=C2(),C=iX();Q.exports=function(...L){if(L.length===0)throw new N("streams");if(L.length===1)return X.from(L[0]);let B=[...L];if(typeof L[0]==="function")L[0]=X.from(L[0]);if(typeof L[L.length-1]==="function"){let K=L.length-1;L[K]=X.from(L[K])}for(let K=0;K<L.length;++K){if(!z(L[K])&&!W(L[K]))continue;if(K<L.length-1&&!(J(L[K])||D(L[K])||G(L[K])))throw new H(`streams[${K}]`,B[K],"must be readable");if(K>0&&!(q(L[K])||U(L[K])||G(L[K])))throw new H(`streams[${K}]`,B[K],"must be writable")}let E,I,_,f,x;function g(K){let M=f;if(f=null,M)M(K);else if(K)x.destroy(K);else if(!m&&!b)x.destroy()}let h=L[0],v=Z(L,g),b=!!(q(h)||U(h)||G(h)),m=!!(J(v)||D(v)||G(v));if(x=new X({writableObjectMode:!!(h!==null&&h!==void 0&&h.writableObjectMode),readableObjectMode:!!(v!==null&&v!==void 0&&v.readableObjectMode),writable:b,readable:m}),b){if(z(h))x._write=function(M,j,O){if(h.write(M,j))O();else E=O},x._final=function(M){h.end(),I=M},h.on("drain",function(){if(E){let M=E;E=null,M()}});else if(W(h)){let M=(G(h)?h.writable:h).getWriter();x._write=async function(j,O,R){try{await M.ready,M.write(j).catch(()=>{}),R()}catch(F){R(F)}},x._final=async function(j){try{await M.ready,M.close().catch(()=>{}),I=j}catch(O){j(O)}}}let K=G(v)?v.readable:v;C(K,()=>{if(I){let M=I;I=null,M()}})}if(m){if(z(v))v.on("readable",function(){if(_){let K=_;_=null,K()}}),v.on("end",function(){x.push(null)}),x._read=function(){while(!0){let K=v.read();if(K===null){_=x._read;return}if(!x.push(K))return}};else if(W(v)){let K=(G(v)?v.readable:v).getReader();x._read=async function(){while(!0)try{let{value:M,done:j}=await K.read();if(!x.push(M))return;if(j){x.push(null);return}}catch{return}}}}return x._destroy=function(K,M){if(!K&&f!==null)K=new P;if(_=null,E=null,I=null,f===null)M(K);else if(f=M,z(v))Y(v,K)},x}}),AK0=V6(($,Q)=>{var Z=globalThis.AbortController||yV().AbortController,{codes:{ERR_INVALID_ARG_VALUE:X,ERR_INVALID_ARG_TYPE:Y,ERR_MISSING_ARGS:z,ERR_OUT_OF_RANGE:J},AbortError:q}=C2(),{validateAbortSignal:W,validateInteger:G,validateObject:U}=gV(),D=$8().Symbol("kWeak"),P=$8().Symbol("kResistStopPropagation"),{finished:H}=iX(),N=Gd(),{addAbortSignalNoValidate:C}=Bj(),{isWritable:L,isNodeStream:B}=cQ(),{deprecate:E}=X4(),{ArrayPrototypePush:I,Boolean:_,MathFloor:f,Number:x,NumberIsNaN:g,Promise:h,PromiseReject:v,PromiseResolve:b,PromisePrototypeThen:m,Symbol:K}=$8(),M=K("kEmpty"),j=K("kEof");function O(s,J0){if(J0!=null)U(J0,"options");if((J0===null||J0===void 0?void 0:J0.signal)!=null)W(J0.signal,"options.signal");if(B(s)&&!L(s))throw new X("stream",s,"must be writable");let t=N(this,s);if(J0!==null&&J0!==void 0&&J0.signal)C(J0.signal,t);return t}function R(s,J0){if(typeof s!=="function")throw new Y("fn",["Function","AsyncFunction"],s);if(J0!=null)U(J0,"options");if((J0===null||J0===void 0?void 0:J0.signal)!=null)W(J0.signal,"options.signal");let t=1;if((J0===null||J0===void 0?void 0:J0.concurrency)!=null)t=f(J0.concurrency);let Z0=t-1;if((J0===null||J0===void 0?void 0:J0.highWaterMark)!=null)Z0=f(J0.highWaterMark);return G(t,"options.concurrency",1),G(Z0,"options.highWaterMark",0),Z0+=t,async function*(){let N0=X4().AbortSignalAny([J0===null||J0===void 0?void 0:J0.signal].filter(_)),i=this,l=[],q0={signal:N0},Y0,K0,k0=!1,a=0;function X0(){k0=!0,n0()}function n0(){a-=1,W0()}function W0(){if(K0&&!k0&&a<t&&l.length<Z0)K0(),K0=null}async function V0(){try{for await(let H1 of i){if(k0)return;if(N0.aborted)throw new q;try{if(H1=s(H1,q0),H1===M)continue;H1=b(H1)}catch(D0){H1=v(D0)}if(a+=1,m(H1,n0,X0),l.push(H1),Y0)Y0(),Y0=null;if(!k0&&(l.length>=Z0||a>=t))await new h((D0)=>{K0=D0})}l.push(j)}catch(H1){let D0=v(H1);m(D0,n0,X0),l.push(D0)}finally{if(k0=!0,Y0)Y0(),Y0=null}}V0();try{while(!0){while(l.length>0){let H1=await l[0];if(H1===j)return;if(N0.aborted)throw new q;if(H1!==M)yield H1;l.shift(),W0()}await new h((H1)=>{Y0=H1})}}finally{if(k0=!0,K0)K0(),K0=null}}.call(this)}function F(s=void 0){if(s!=null)U(s,"options");if((s===null||s===void 0?void 0:s.signal)!=null)W(s.signal,"options.signal");return async function*(){let J0=0;for await(let Z0 of this){var t;if(s!==null&&s!==void 0&&(t=s.signal)!==null&&t!==void 0&&t.aborted)throw new q({cause:s.signal.reason});yield[J0++,Z0]}}.call(this)}async function A(s,J0=void 0){for await(let t of k.call(this,s,J0))return!0;return!1}async function T(s,J0=void 0){if(typeof s!=="function")throw new Y("fn",["Function","AsyncFunction"],s);return!await A.call(this,async(...t)=>{return!await s(...t)},J0)}async function V(s,J0){for await(let t of k.call(this,s,J0))return t;return}async function w(s,J0){if(typeof s!=="function")throw new Y("fn",["Function","AsyncFunction"],s);async function t(Z0,N0){return await s(Z0,N0),M}for await(let Z0 of R.call(this,t,J0));}function k(s,J0){if(typeof s!=="function")throw new Y("fn",["Function","AsyncFunction"],s);async function t(Z0,N0){if(await s(Z0,N0))return Z0;return M}return R.call(this,t,J0)}class S extends z{constructor(){super("reduce");this.message="Reduce of an empty stream requires an initial value"}}async function y(s,J0,t){var Z0;if(typeof s!=="function")throw new Y("reducer",["Function","AsyncFunction"],s);if(t!=null)U(t,"options");if((t===null||t===void 0?void 0:t.signal)!=null)W(t.signal,"options.signal");let N0=arguments.length>1;if(t!==null&&t!==void 0&&(Z0=t.signal)!==null&&Z0!==void 0&&Z0.aborted){let K0=new q(void 0,{cause:t.signal.reason});throw this.once("error",()=>{}),await H(this.destroy(K0)),K0}let i=new Z,l=i.signal;if(t!==null&&t!==void 0&&t.signal){let K0={once:!0,[D]:this,[P]:!0};t.signal.addEventListener("abort",()=>i.abort(),K0)}let q0=!1;try{for await(let K0 of this){var Y0;if(q0=!0,t!==null&&t!==void 0&&(Y0=t.signal)!==null&&Y0!==void 0&&Y0.aborted)throw new q;if(!N0)J0=K0,N0=!0;else J0=await s(J0,K0,{signal:l})}if(!q0&&!N0)throw new S}finally{i.abort()}return J0}async function u(s){if(s!=null)U(s,"options");if((s===null||s===void 0?void 0:s.signal)!=null)W(s.signal,"options.signal");let J0=[];for await(let Z0 of this){var t;if(s!==null&&s!==void 0&&(t=s.signal)!==null&&t!==void 0&&t.aborted)throw new q(void 0,{cause:s.signal.reason});I(J0,Z0)}return J0}function c(s,J0){let t=R.call(this,s,J0);return async function*(){for await(let Z0 of t)yield*Z0}.call(this)}function o(s){if(s=x(s),g(s))return 0;if(s<0)throw new J("number",">= 0",s);return s}function z0(s,J0=void 0){if(J0!=null)U(J0,"options");if((J0===null||J0===void 0?void 0:J0.signal)!=null)W(J0.signal,"options.signal");return s=o(s),async function*(){var t;if(J0!==null&&J0!==void 0&&(t=J0.signal)!==null&&t!==void 0&&t.aborted)throw new q;for await(let N0 of this){var Z0;if(J0!==null&&J0!==void 0&&(Z0=J0.signal)!==null&&Z0!==void 0&&Z0.aborted)throw new q;if(s--<=0)yield N0}}.call(this)}function e(s,J0=void 0){if(J0!=null)U(J0,"options");if((J0===null||J0===void 0?void 0:J0.signal)!=null)W(J0.signal,"options.signal");return s=o(s),async function*(){var t;if(J0!==null&&J0!==void 0&&(t=J0.signal)!==null&&t!==void 0&&t.aborted)throw new q;for await(let N0 of this){var Z0;if(J0!==null&&J0!==void 0&&(Z0=J0.signal)!==null&&Z0!==void 0&&Z0.aborted)throw new q;if(s-- >0)yield N0;if(s<=0)return}}.call(this)}Q.exports.streamReturningOperators={asIndexedPairs:E(F,"readable.asIndexedPairs will be removed in a future version."),drop:z0,filter:k,flatMap:c,map:R,take:e,compose:O},Q.exports.promiseReturningOperators={every:T,forEach:w,reduce:y,toArray:u,some:A,find:V}}),Ud=V6(($,Q)=>{var{ArrayPrototypePop:Z,Promise:X}=$8(),{isIterable:Y,isNodeStream:z,isWebStream:J}=cQ(),{pipelineImpl:q}=FB(),{finished:W}=iX();Vd();function G(...U){return new X((D,P)=>{let H,N,C=U[U.length-1];if(C&&typeof C==="object"&&!z(C)&&!Y(C)&&!J(C)){let L=Z(U);H=L.signal,N=L.end}q(U,(L,B)=>{if(L)P(L);else D(B)},{signal:H,end:N})})}Q.exports={finished:W,pipeline:G}}),Vd=V6(($,Q)=>{var{Buffer:Z}=(s6(),Q5(T8)),{ObjectDefineProperty:X,ObjectKeys:Y,ReflectApply:z}=$8(),{promisify:{custom:J}}=X4(),{streamReturningOperators:q,promiseReturningOperators:W}=AK0(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:G}}=C2(),U=Gd(),{setDefaultHighWaterMark:D,getDefaultHighWaterMark:P}=Ej(),{pipeline:H}=FB(),{destroyer:N}=_K(),C=iX(),L=Ud(),B=cQ(),E=Q.exports=LB().Stream;E.isDestroyed=B.isDestroyed,E.isDisturbed=B.isDisturbed,E.isErrored=B.isErrored,E.isReadable=B.isReadable,E.isWritable=B.isWritable,E.Readable=Ij();for(let _ of Y(q)){let f=function(...g){if(new.target)throw G();return E.Readable.from(z(x,this,g))},x=q[_];X(f,"name",{__proto__:null,value:x.name}),X(f,"length",{__proto__:null,value:x.length}),X(E.Readable.prototype,_,{__proto__:null,value:f,enumerable:!1,configurable:!0,writable:!0})}for(let _ of Y(W)){let f=function(...g){if(new.target)throw G();return z(x,this,g)},x=W[_];X(f,"name",{__proto__:null,value:x.name}),X(f,"length",{__proto__:null,value:x.length}),X(E.Readable.prototype,_,{__proto__:null,value:f,enumerable:!1,configurable:!0,writable:!0})}E.Writable=TB(),E.Duplex=uQ(),E.Transform=Wd(),E.PassThrough=Kd(),E.pipeline=H;var{addAbortSignal:I}=Bj();E.addAbortSignal=I,E.finished=C,E.destroy=N,E.compose=U,E.setDefaultHighWaterMark=D,E.getDefaultHighWaterMark=P,X(E,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return L}}),X(H,J,{__proto__:null,enumerable:!0,get(){return L.pipeline}}),X(C,J,{__proto__:null,enumerable:!0,get(){return L.finished}}),E.Stream=E,E._isUint8Array=function(_){return _ instanceof Uint8Array},E._uint8ArrayToBuffer=function(_){return Z.from(_.buffer,_.byteOffset,_.byteLength)}}),wK0=V6(($,Q)=>{var Z=AB();{let X=Vd(),Y=Ud(),z=X.Readable.destroy;Q.exports=X.Readable,Q.exports._uint8ArrayToBuffer=X._uint8ArrayToBuffer,Q.exports._isUint8Array=X._isUint8Array,Q.exports.isDisturbed=X.isDisturbed,Q.exports.isErrored=X.isErrored,Q.exports.isReadable=X.isReadable,Q.exports.Readable=X.Readable,Q.exports.Writable=X.Writable,Q.exports.Duplex=X.Duplex,Q.exports.Transform=X.Transform,Q.exports.PassThrough=X.PassThrough,Q.exports.addAbortSignal=X.addAbortSignal,Q.exports.finished=X.finished,Q.exports.destroy=X.destroy,Q.exports.destroy=z,Q.exports.pipeline=X.pipeline,Q.exports.compose=X.compose,Object.defineProperty(X,"promises",{configurable:!0,enumerable:!0,get(){return Y}}),Q.exports.Stream=X.Stream}Q.exports.default=Q.exports});Od.exports=wK0()});var O9={};x1(O9,{webcrypto:()=>eU0,rng:()=>UU0,randomUUID:()=>aU0,randomFillSync:()=>lU0,randomFill:()=>dU0,randomBytes:()=>VU0,publicEncrypt:()=>mU0,publicDecrypt:()=>uU0,pseudoRandomBytes:()=>GU0,prng:()=>KU0,privateEncrypt:()=>pU0,privateDecrypt:()=>cU0,pbkdf2Sync:()=>RU0,pbkdf2:()=>jU0,listCiphers:()=>IU0,getRandomValues:()=>rU0,getHashes:()=>HU0,getDiffieHellman:()=>fU0,getCurves:()=>tU0,getCiphers:()=>EU0,default:()=>$V0,createVerify:()=>yU0,createSign:()=>bU0,createHmac:()=>PU0,createHash:()=>DU0,createECDH:()=>hU0,createDiffieHellmanGroup:()=>SU0,createDiffieHellman:()=>kU0,createDecipheriv:()=>BU0,createDecipher:()=>AU0,createCredentials:()=>iU0,createCipheriv:()=>TU0,createCipher:()=>CU0,constants:()=>oU0,Verify:()=>gU0,Sign:()=>vU0,Hmac:()=>MU0,Hash:()=>OU0,DiffieHellmanGroup:()=>_U0,DiffieHellman:()=>xU0,Decipheriv:()=>wU0,Decipher:()=>FU0,DEFAULT_ENCODING:()=>nU0,Cipheriv:()=>LU0,Cipher:()=>NU0});function tU0(){return sU0}var BK0,EK0,Dd,IK0,_K0,SK0=($,Q,Z)=>{Z=$!=null?BK0(EK0($)):{};let X=Q||!$||!$.__esModule?Dd(Z,"default",{value:$,enumerable:!0}):Z;for(let Y of IK0($))if(!_K0.call(X,Y))Dd(X,Y,{get:()=>$[Y],enumerable:!0});return X},A0=($,Q)=>()=>(Q||$((Q={exports:{}}).exports,Q),Q.exports),_j,Sj,Pd,fK0,BB,EB,L2,kK0,mV,Hd,xK0,bK0,vK0,yK0,jd,gK0,hK0,mK0,pK0,uK0,cK0,dK0,lK0,iK0,oK0,pV,fj,Rd,nK0,Nd,Cd,rK0,uV,IB,_B,aK0,Ld,SB,sK0,Td,tK0,Fd,Ad,eK0,$G0,QG0,ZG0,XG0,YG0,JG0,zG0,qG0,WG0,KG0,GG0,UG0,VG0,fB,wd,OG0,Bd,DG0,MG0,PG0,HG0,dQ,oX,Ed,_7,Id,kj,jG0,B4,RG0,NG0,CG0,_d,P$,cV,Sd,LG0,fd,TG0,kd,FG0,AG0,wG0,BG0,kB,EG0,xB,IG0,_G0,SG0,fG0,kG0,xG0,bG0,vG0,yG0,gG0,hG0,mG0,pG0,uG0,Md,cG0,hV,dG0,xd,bd,lG0,iG0,vd,oG0,nG0,dV,rG0,aG0,sG0,tG0,eG0,$U0,yd,QU0,gd,hd,md,bB,pd,ZU0,ud,XU0,YU0,wB,JU0,zU0,qU0,WU0,O5,KU0,GU0,UU0,VU0,OU0,DU0,MU0,PU0,HU0,jU0,RU0,NU0,CU0,LU0,TU0,FU0,AU0,wU0,BU0,EU0,IU0,_U0,SU0,fU0,kU0,xU0,bU0,vU0,yU0,gU0,hU0,mU0,pU0,uU0,cU0,dU0,lU0,iU0,oU0,nU0="buffer",rU0=($)=>{return crypto.getRandomValues($)},aU0=()=>{return crypto.randomUUID()},sU0,eU0,$V0;var E9=p(()=>{BK0=Object.create,{getPrototypeOf:EK0,defineProperty:Dd,getOwnPropertyNames:IK0}=Object,_K0=Object.prototype.hasOwnProperty,_j=A0(($,Q)=>{Q.exports=(E9(),Q5(O9)).randomBytes}),Sj=A0(($,Q)=>{Q.exports=(E9(),Q5(O9)).createHash}),Pd=A0(($,Q)=>{Q.exports=(E9(),Q5(O9)).createHmac}),fK0=A0(($,Q)=>{Q.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}}),BB=A0(($,Q)=>{var Z=isFinite,X=Math.pow(2,30)-1;Q.exports=function(Y,z){if(typeof Y!=="number")throw TypeError("Iterations not a number");if(Y<0||!Z(Y))throw TypeError("Bad iterations");if(typeof z!=="number")throw TypeError("Key length not a number");if(z<0||z>X||z!==z)throw TypeError("Bad key length")}}),EB=A0(($,Q)=>{var Z;if(globalThis.process&&globalThis.process.browser)Z="utf-8";else if(globalThis.process&&globalThis.process.version)X=parseInt(process.version.split(".")[0].slice(1),10),Z=X>=6?"utf-8":"binary";else Z="utf-8";var X;Q.exports=Z}),L2=A0(($,Q)=>{/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Z=(s6(),Q5(T8)),X=Z.Buffer;function Y(J,q){for(var W in J)q[W]=J[W]}if(X.from&&X.alloc&&X.allocUnsafe&&X.allocUnsafeSlow)Q.exports=Z;else Y(Z,$),$.Buffer=z;function z(J,q,W){return X(J,q,W)}z.prototype=Object.create(X.prototype),Y(X,z),z.from=function(J,q,W){if(typeof J==="number")throw TypeError("Argument must not be a number");return X(J,q,W)},z.alloc=function(J,q,W){if(typeof J!=="number")throw TypeError("Argument must be a number");var G=X(J);if(q!==void 0)if(typeof W==="string")G.fill(q,W);else G.fill(q);else G.fill(0);return G},z.allocUnsafe=function(J){if(typeof J!=="number")throw TypeError("Argument must be a number");return X(J)},z.allocUnsafeSlow=function(J){if(typeof J!=="number")throw TypeError("Argument must be a number");return Z.SlowBuffer(J)}}),kK0=A0(($,Q)=>{var Z={}.toString;Q.exports=Array.isArray||function(X){return Z.call(X)=="[object Array]"}}),mV=A0(($,Q)=>{Q.exports=TypeError}),Hd=A0(($,Q)=>{Q.exports=Object}),xK0=A0(($,Q)=>{Q.exports=Error}),bK0=A0(($,Q)=>{Q.exports=EvalError}),vK0=A0(($,Q)=>{Q.exports=RangeError}),yK0=A0(($,Q)=>{Q.exports=ReferenceError}),jd=A0(($,Q)=>{Q.exports=SyntaxError}),gK0=A0(($,Q)=>{Q.exports=URIError}),hK0=A0(($,Q)=>{Q.exports=Math.abs}),mK0=A0(($,Q)=>{Q.exports=Math.floor}),pK0=A0(($,Q)=>{Q.exports=Math.max}),uK0=A0(($,Q)=>{Q.exports=Math.min}),cK0=A0(($,Q)=>{Q.exports=Math.pow}),dK0=A0(($,Q)=>{Q.exports=Math.round}),lK0=A0(($,Q)=>{Q.exports=Number.isNaN||function(Z){return Z!==Z}}),iK0=A0(($,Q)=>{var Z=lK0();Q.exports=function(X){if(Z(X)||X===0)return X;return X<0?-1:1}}),oK0=A0(($,Q)=>{Q.exports=Object.getOwnPropertyDescriptor}),pV=A0(($,Q)=>{var Z=oK0();if(Z)try{Z([],"length")}catch(X){Z=null}Q.exports=Z}),fj=A0(($,Q)=>{var Z=Object.defineProperty||!1;if(Z)try{Z({},"a",{value:1})}catch(X){Z=!1}Q.exports=Z}),Rd=A0(($,Q)=>{Q.exports=function(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function")return!1;if(typeof Symbol.iterator==="symbol")return!0;var Z={},X=Symbol("test"),Y=Object(X);if(typeof X==="string")return!1;if(Object.prototype.toString.call(X)!=="[object Symbol]")return!1;if(Object.prototype.toString.call(Y)!=="[object Symbol]")return!1;var z=42;Z[X]=z;for(var J in Z)return!1;if(typeof Object.keys==="function"&&Object.keys(Z).length!==0)return!1;if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(Z).length!==0)return!1;var q=Object.getOwnPropertySymbols(Z);if(q.length!==1||q[0]!==X)return!1;if(!Object.prototype.propertyIsEnumerable.call(Z,X))return!1;if(typeof Object.getOwnPropertyDescriptor==="function"){var W=Object.getOwnPropertyDescriptor(Z,X);if(W.value!==z||W.enumerable!==!0)return!1}return!0}}),nK0=A0(($,Q)=>{var Z=typeof Symbol<"u"&&Symbol,X=Rd();Q.exports=function(){if(typeof Z!=="function")return!1;if(typeof Symbol!=="function")return!1;if(typeof Z("foo")!=="symbol")return!1;if(typeof Symbol("bar")!=="symbol")return!1;return X()}}),Nd=A0(($,Q)=>{Q.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null}),Cd=A0(($,Q)=>{var Z=Hd();Q.exports=Z.getPrototypeOf||null}),rK0=A0(($,Q)=>{var Z="Function.prototype.bind called on incompatible ",X=Object.prototype.toString,Y=Math.max,z="[object Function]",J=function(G,U){var D=[];for(var P=0;P<G.length;P+=1)D[P]=G[P];for(var H=0;H<U.length;H+=1)D[H+G.length]=U[H];return D},q=function(G,U){var D=[];for(var P=U||0,H=0;P<G.length;P+=1,H+=1)D[H]=G[P];return D},W=function(G,U){var D="";for(var P=0;P<G.length;P+=1)if(D+=G[P],P+1<G.length)D+=U;return D};Q.exports=function(G){var U=this;if(typeof U!=="function"||X.apply(U)!==z)throw TypeError(Z+U);var D=q(arguments,1),P,H=function(){if(this instanceof P){var E=U.apply(this,J(D,arguments));if(Object(E)===E)return E;return this}return U.apply(G,J(D,arguments))},N=Y(0,U.length-D.length),C=[];for(var L=0;L<N;L++)C[L]="$"+L;if(P=Function("binder","return function ("+W(C,",")+"){ return binder.apply(this,arguments); }")(H),U.prototype){var B=function(){};B.prototype=U.prototype,P.prototype=new B,B.prototype=null}return P}}),uV=A0(($,Q)=>{var Z=rK0();Q.exports=Function.prototype.bind||Z}),IB=A0(($,Q)=>{Q.exports=Function.prototype.call}),_B=A0(($,Q)=>{Q.exports=Function.prototype.apply}),aK0=A0(($,Q)=>{Q.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply}),Ld=A0(($,Q)=>{var Z=uV(),X=_B(),Y=IB(),z=aK0();Q.exports=z||Z.call(Y,X)}),SB=A0(($,Q)=>{var Z=uV(),X=mV(),Y=IB(),z=Ld();Q.exports=function(J){if(J.length<1||typeof J[0]!=="function")throw new X("a function is required");return z(Z,Y,J)}}),sK0=A0(($,Q)=>{var Z=SB(),X=pV(),Y;try{Y=[].__proto__===Array.prototype}catch(W){if(!W||typeof W!=="object"||!("code"in W)||W.code!=="ERR_PROTO_ACCESS")throw W}var z=!!Y&&X&&X(Object.prototype,"__proto__"),J=Object,q=J.getPrototypeOf;Q.exports=z&&typeof z.get==="function"?Z([z.get]):typeof q==="function"?function(W){return q(W==null?W:J(W))}:!1}),Td=A0(($,Q)=>{var Z=Nd(),X=Cd(),Y=sK0();Q.exports=Z?function(z){return Z(z)}:X?function(z){if(!z||typeof z!=="object"&&typeof z!=="function")throw TypeError("getProto: not an object");return X(z)}:Y?function(z){return Y(z)}:null}),tK0=A0(($,Q)=>{var Z=Function.prototype.call,X=Object.prototype.hasOwnProperty,Y=uV();Q.exports=Y.call(Z,X)}),Fd=A0(($,Q)=>{var Z,X=Hd(),Y=xK0(),z=bK0(),J=vK0(),q=yK0(),W=jd(),G=mV(),U=gK0(),D=hK0(),P=mK0(),H=pK0(),N=uK0(),C=cK0(),L=dK0(),B=iK0(),E=Function,I=function(J0){try{return E('"use strict"; return ('+J0+").constructor;")()}catch(t){}},_=pV(),f=fj(),x=function(){throw new G},g=_?function(){try{return arguments.callee,x}catch(J0){try{return _(arguments,"callee").get}catch(t){return x}}}():x,h=nK0()(),v=Td(),b=Cd(),m=Nd(),K=_B(),M=IB(),j={},O=typeof Uint8Array>"u"||!v?Z:v(Uint8Array),R={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Z:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Z:ArrayBuffer,"%ArrayIteratorPrototype%":h&&v?v([][Symbol.iterator]()):Z,"%AsyncFromSyncIteratorPrototype%":Z,"%AsyncFunction%":j,"%AsyncGenerator%":j,"%AsyncGeneratorFunction%":j,"%AsyncIteratorPrototype%":j,"%Atomics%":typeof Atomics>"u"?Z:Atomics,"%BigInt%":typeof BigInt>"u"?Z:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Z:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Z:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Z:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Y,"%eval%":eval,"%EvalError%":z,"%Float16Array%":typeof Float16Array>"u"?Z:Float16Array,"%Float32Array%":typeof Float32Array>"u"?Z:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Z:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Z:FinalizationRegistry,"%Function%":E,"%GeneratorFunction%":j,"%Int8Array%":typeof Int8Array>"u"?Z:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Z:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Z:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h&&v?v(v([][Symbol.iterator]())):Z,"%JSON%":typeof JSON==="object"?JSON:Z,"%Map%":typeof Map>"u"?Z:Map,"%MapIteratorPrototype%":typeof Map>"u"||!h||!v?Z:v(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":X,"%Object.getOwnPropertyDescriptor%":_,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Z:Promise,"%Proxy%":typeof Proxy>"u"?Z:Proxy,"%RangeError%":J,"%ReferenceError%":q,"%Reflect%":typeof Reflect>"u"?Z:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Z:Set,"%SetIteratorPrototype%":typeof Set>"u"||!h||!v?Z:v(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Z:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h&&v?v(""[Symbol.iterator]()):Z,"%Symbol%":h?Symbol:Z,"%SyntaxError%":W,"%ThrowTypeError%":g,"%TypedArray%":O,"%TypeError%":G,"%Uint8Array%":typeof Uint8Array>"u"?Z:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Z:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Z:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Z:Uint32Array,"%URIError%":U,"%WeakMap%":typeof WeakMap>"u"?Z:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Z:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Z:WeakSet,"%Function.prototype.call%":M,"%Function.prototype.apply%":K,"%Object.defineProperty%":f,"%Object.getPrototypeOf%":b,"%Math.abs%":D,"%Math.floor%":P,"%Math.max%":H,"%Math.min%":N,"%Math.pow%":C,"%Math.round%":L,"%Math.sign%":B,"%Reflect.getPrototypeOf%":m};if(v)try{null.error}catch(J0){F=v(v(J0)),R["%Error.prototype%"]=F}var F,A=function J0(t){var Z0;if(t==="%AsyncFunction%")Z0=I("async function () {}");else if(t==="%GeneratorFunction%")Z0=I("function* () {}");else if(t==="%AsyncGeneratorFunction%")Z0=I("async function* () {}");else if(t==="%AsyncGenerator%"){var N0=J0("%AsyncGeneratorFunction%");if(N0)Z0=N0.prototype}else if(t==="%AsyncIteratorPrototype%"){var i=J0("%AsyncGenerator%");if(i&&v)Z0=v(i.prototype)}return R[t]=Z0,Z0},T={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},V=uV(),w=tK0(),k=V.call(M,Array.prototype.concat),S=V.call(K,Array.prototype.splice),y=V.call(M,String.prototype.replace),u=V.call(M,String.prototype.slice),c=V.call(M,RegExp.prototype.exec),o=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,z0=/\\(\\)?/g,e=function(J0){var t=u(J0,0,1),Z0=u(J0,-1);if(t==="%"&&Z0!=="%")throw new W("invalid intrinsic syntax, expected closing `%`");else if(Z0==="%"&&t!=="%")throw new W("invalid intrinsic syntax, expected opening `%`");var N0=[];return y(J0,o,function(i,l,q0,Y0){N0[N0.length]=q0?y(Y0,z0,"$1"):l||i}),N0},s=function(J0,t){var Z0=J0,N0;if(w(T,Z0))N0=T[Z0],Z0="%"+N0[0]+"%";if(w(R,Z0)){var i=R[Z0];if(i===j)i=A(Z0);if(typeof i>"u"&&!t)throw new G("intrinsic "+J0+" exists, but is not available. Please file an issue!");return{alias:N0,name:Z0,value:i}}throw new W("intrinsic "+J0+" does not exist!")};Q.exports=function(J0,t){if(typeof J0!=="string"||J0.length===0)throw new G("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!=="boolean")throw new G('"allowMissing" argument must be a boolean');if(c(/^%?[^%]*%?$/,J0)===null)throw new W("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Z0=e(J0),N0=Z0.length>0?Z0[0]:"",i=s("%"+N0+"%",t),l=i.name,q0=i.value,Y0=!1,K0=i.alias;if(K0)N0=K0[0],S(Z0,k([0,1],K0));for(var k0=1,a=!0;k0<Z0.length;k0+=1){var X0=Z0[k0],n0=u(X0,0,1),W0=u(X0,-1);if((n0==='"'||n0==="'"||n0==="`"||(W0==='"'||W0==="'"||W0==="`"))&&n0!==W0)throw new W("property names with quotes must have matching quotes");if(X0==="constructor"||!a)Y0=!0;if(N0+="."+X0,l="%"+N0+"%",w(R,l))q0=R[l];else if(q0!=null){if(!(X0 in q0)){if(!t)throw new G("base intrinsic for "+J0+" exists, but the property is not available.");return}if(_&&k0+1>=Z0.length){var V0=_(q0,X0);if(a=!!V0,a&&"get"in V0&&!("originalValue"in V0.get))q0=V0.get;else q0=q0[X0]}else a=w(q0,X0),q0=q0[X0];if(a&&!Y0)R[l]=q0}}return q0}}),Ad=A0(($,Q)=>{var Z=Fd(),X=SB(),Y=X([Z("%String.prototype.indexOf%")]);Q.exports=function(z,J){var q=Z(z,!!J);if(typeof q==="function"&&Y(z,".prototype.")>-1)return X([q]);return q}}),eK0=A0(($,Q)=>{var Z=Function.prototype.toString,X=typeof Reflect==="object"&&Reflect!==null&&Reflect.apply,Y,z;if(typeof X==="function"&&typeof Object.defineProperty==="function")try{Y=Object.defineProperty({},"length",{get:function(){throw z}}),z={},X(function(){throw 42},null,Y)}catch(_){if(_!==z)X=null}else X=null;var J=/^\s*class\b/,q=function(_){try{var f=Z.call(_);return J.test(f)}catch(x){return!1}},W=function(_){try{if(q(_))return!1;return Z.call(_),!0}catch(f){return!1}},G=Object.prototype.toString,U="[object Object]",D="[object Function]",P="[object GeneratorFunction]",H="[object HTMLAllCollection]",N="[object HTML document.all class]",C="[object HTMLCollection]",L=typeof Symbol==="function"&&!!Symbol.toStringTag,B=!(0 in[,]),E=function(){return!1};if(typeof document==="object"){if(I=document.all,G.call(I)===G.call(document.all))E=function(_){if((B||!_)&&(typeof _>"u"||typeof _==="object"))try{var f=G.call(_);return(f===H||f===N||f===C||f===U)&&_("")==null}catch(x){}return!1}}var I;Q.exports=X?function(_){if(E(_))return!0;if(!_)return!1;if(typeof _!=="function"&&typeof _!=="object")return!1;try{X(_,null,Y)}catch(f){if(f!==z)return!1}return!q(_)&&W(_)}:function(_){if(E(_))return!0;if(!_)return!1;if(typeof _!=="function"&&typeof _!=="object")return!1;if(L)return W(_);if(q(_))return!1;var f=G.call(_);if(f!==D&&f!==P&&!/^\[object HTML/.test(f))return!1;return W(_)}}),$G0=A0(($,Q)=>{var Z=eK0(),X=Object.prototype.toString,Y=Object.prototype.hasOwnProperty,z=function(G,U,D){for(var P=0,H=G.length;P<H;P++)if(Y.call(G,P))if(D==null)U(G[P],P,G);else U.call(D,G[P],P,G)},J=function(G,U,D){for(var P=0,H=G.length;P<H;P++)if(D==null)U(G.charAt(P),P,G);else U.call(D,G.charAt(P),P,G)},q=function(G,U,D){for(var P in G)if(Y.call(G,P))if(D==null)U(G[P],P,G);else U.call(D,G[P],P,G)};function W(G){return X.call(G)==="[object Array]"}Q.exports=function(G,U,D){if(!Z(U))throw TypeError("iterator must be a function");var P;if(arguments.length>=3)P=D;if(W(G))z(G,U,P);else if(typeof G==="string")J(G,U,P);else q(G,U,P)}}),QG0=A0(($,Q)=>{Q.exports=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]}),ZG0=A0(($,Q)=>{var Z=QG0(),X=typeof globalThis>"u"?globalThis:globalThis;Q.exports=function(){var Y=[];for(var z=0;z<Z.length;z++)if(typeof X[Z[z]]==="function")Y[Y.length]=Z[z];return Y}}),XG0=A0(($,Q)=>{var Z=fj(),X=jd(),Y=mV(),z=pV();Q.exports=function(J,q,W){if(!J||typeof J!=="object"&&typeof J!=="function")throw new Y("`obj` must be an object or a function`");if(typeof q!=="string"&&typeof q!=="symbol")throw new Y("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!=="boolean"&&arguments[3]!==null)throw new Y("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!=="boolean"&&arguments[4]!==null)throw new Y("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!=="boolean"&&arguments[5]!==null)throw new Y("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!=="boolean")throw new Y("`loose`, if provided, must be a boolean");var G=arguments.length>3?arguments[3]:null,U=arguments.length>4?arguments[4]:null,D=arguments.length>5?arguments[5]:null,P=arguments.length>6?arguments[6]:!1,H=!!z&&z(J,q);if(Z)Z(J,q,{configurable:D===null&&H?H.configurable:!D,enumerable:G===null&&H?H.enumerable:!G,value:W,writable:U===null&&H?H.writable:!U});else if(P||!G&&!U&&!D)J[q]=W;else throw new X("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}}),YG0=A0(($,Q)=>{var Z=fj(),X=function(){return!!Z};X.hasArrayLengthDefineBug=function(){if(!Z)return null;try{return Z([],"length",{value:1}).length!==1}catch(Y){return!0}},Q.exports=X}),JG0=A0(($,Q)=>{var Z=Fd(),X=XG0(),Y=YG0()(),z=pV(),J=mV(),q=Z("%Math.floor%");Q.exports=function(W,G){if(typeof W!=="function")throw new J("`fn` is not a function");if(typeof G!=="number"||G<0||G>4294967295||q(G)!==G)throw new J("`length` must be a positive 32-bit integer");var U=arguments.length>2&&!!arguments[2],D=!0,P=!0;if("length"in W&&z){var H=z(W,"length");if(H&&!H.configurable)D=!1;if(H&&!H.writable)P=!1}if(D||P||!U)if(Y)X(W,"length",G,!0,!0);else X(W,"length",G);return W}}),zG0=A0(($,Q)=>{var Z=uV(),X=_B(),Y=Ld();Q.exports=function(){return Y(Z,X,arguments)}}),qG0=A0(($,Q)=>{var Z=JG0(),X=fj(),Y=SB(),z=zG0();if(Q.exports=function(J){var q=Y(arguments),W=J.length-(arguments.length-1);return Z(q,1+(W>0?W:0),!0)},X)X(Q.exports,"apply",{value:z});else Q.exports.apply=z}),WG0=A0(($,Q)=>{var Z=Rd();Q.exports=function(){return Z()&&!!Symbol.toStringTag}}),KG0=A0(($,Q)=>{var Z=$G0(),X=ZG0(),Y=qG0(),z=Ad(),J=pV(),q=Td(),W=z("Object.prototype.toString"),G=WG0()(),U=typeof globalThis>"u"?globalThis:globalThis,D=X(),P=z("String.prototype.slice"),H=z("Array.prototype.indexOf",!0)||function(B,E){for(var I=0;I<B.length;I+=1)if(B[I]===E)return I;return-1},N={__proto__:null};if(G&&J&&q)Z(D,function(B){var E=new U[B];if(Symbol.toStringTag in E&&q){var I=q(E),_=J(I,Symbol.toStringTag);if(!_&&I){var f=q(I);_=J(f,Symbol.toStringTag)}N["$"+B]=Y(_.get)}});else Z(D,function(B){var E=new U[B],I=E.slice||E.set;if(I)N["$"+B]=Y(I)});var C=function(B){var E=!1;return Z(N,function(I,_){if(!E)try{if("$"+I(B)===_)E=P(_,1)}catch(f){}}),E},L=function(B){var E=!1;return Z(N,function(I,_){if(!E)try{I(B),E=P(_,1)}catch(f){}}),E};Q.exports=function(B){if(!B||typeof B!=="object")return!1;if(!G){var E=P(W(B),8,-1);if(H(D,E)>-1)return E;if(E!=="Object")return!1;return L(B)}if(!J)return null;return C(B)}}),GG0=A0(($,Q)=>{var Z=KG0();Q.exports=function(X){return!!Z(X)}}),UG0=A0(($,Q)=>{var Z=mV(),X=Ad(),Y=X("TypedArray.prototype.buffer",!0),z=GG0();Q.exports=Y||function(J){if(!z(J))throw new Z("Not a Typed Array");return J.buffer}}),VG0=A0(($,Q)=>{var Z=L2().Buffer,X=kK0(),Y=UG0(),z=ArrayBuffer.isView||function(G){try{return Y(G),!0}catch(U){return!1}},J=typeof Uint8Array<"u",q=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",W=q&&(Z.prototype instanceof Uint8Array||Z.TYPED_ARRAY_SUPPORT);Q.exports=function(G,U){if(Z.isBuffer(G)){if(G.constructor&&!("isBuffer"in G))return Z.from(G);return G}if(typeof G==="string")return Z.from(G,U);if(q&&z(G)){if(G.byteLength===0)return Z.alloc(0);if(W){var D=Z.from(G.buffer,G.byteOffset,G.byteLength);if(D.byteLength===G.byteLength)return D}var P=G instanceof Uint8Array?G:new Uint8Array(G.buffer,G.byteOffset,G.byteLength),H=Z.from(P);if(H.length===G.byteLength)return H}if(J&&G instanceof Uint8Array)return Z.from(G);var N=X(G);if(N)for(var C=0;C<G.length;C+=1){var L=G[C];if(typeof L!=="number"||L<0||L>255||~~L!==L)throw RangeError("Array items must be numbers in the range 0-255.")}if(N||Z.isBuffer(G)&&G.constructor&&typeof G.constructor.isBuffer==="function"&&G.constructor.isBuffer(G))return Z.from(G);throw TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')}}),fB=A0(($,Q)=>{var Z=L2().Buffer,X=VG0(),Y=typeof Uint8Array<"u",z=Y&&typeof ArrayBuffer<"u",J=z&&ArrayBuffer.isView;Q.exports=function(q,W,G){if(typeof q==="string"||Z.isBuffer(q)||Y&&q instanceof Uint8Array||J&&J(q))return X(q,W);throw TypeError(G+" must be a string, a Buffer, a Uint8Array, or a DataView")}}),wd=A0(($,Q)=>{var Z={__proto__:null,md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,"sha512-256":32,rmd160:20,ripemd160:20},X={__proto__:null,"sha-1":"sha1","sha-224":"sha224","sha-256":"sha256","sha-384":"sha384","sha-512":"sha512","ripemd-160":"ripemd160"},Y=Pd(),z=L2().Buffer,J=BB(),q=EB(),W=fB();function G(U,D,P,H,N){J(P,H),U=W(U,q,"Password"),D=W(D,q,"Salt");var C=(N||"sha1").toLowerCase(),L=X[C]||C,B=Z[L];if(typeof B!=="number"||!B)throw TypeError("Digest algorithm not supported: "+N);var E=z.allocUnsafe(H),I=z.allocUnsafe(D.length+4);D.copy(I,0,0,D.length);var _=0,f=B,x=Math.ceil(H/f);for(var g=1;g<=x;g++){I.writeUInt32BE(g,D.length);var h=Y(L,U).update(I).digest(),v=h;for(var b=1;b<P;b++){v=Y(L,U).update(v).digest();for(var m=0;m<f;m++)h[m]^=v[m]}h.copy(E,_),_+=f}return E}Q.exports=G}),OG0=A0(($,Q)=>{var Z=L2().Buffer,X=BB(),Y=EB(),z=wd(),J=fB(),q,W=globalThis.crypto&&globalThis.crypto.subtle,G={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},U=[],D;function P(){if(D)return D;if(globalThis.process&&globalThis.process.nextTick)D=globalThis.process.nextTick;else if(globalThis.queueMicrotask)D=globalThis.queueMicrotask;else if(globalThis.setImmediate)D=globalThis.setImmediate;else D=globalThis.setTimeout;return D}function H(L,B,E,I,_){return W.importKey("raw",L,{name:"PBKDF2"},!1,["deriveBits"]).then(function(f){return W.deriveBits({name:"PBKDF2",salt:B,iterations:E,hash:{name:_}},f,I<<3)}).then(function(f){return Z.from(f)})}function N(L){if(globalThis.process&&!globalThis.process.browser)return Promise.resolve(!1);if(!W||!W.importKey||!W.deriveBits)return Promise.resolve(!1);if(U[L]!==void 0)return U[L];q=q||Z.alloc(8);var B=H(q,q,10,128,L).then(function(){return!0},function(){return!1});return U[L]=B,B}function C(L,B){L.then(function(E){P()(function(){B(null,E)})},function(E){P()(function(){B(E)})})}Q.exports=function(L,B,E,I,_,f){if(typeof _==="function")f=_,_=void 0;if(X(E,I),L=J(L,Y,"Password"),B=J(B,Y,"Salt"),typeof f!=="function")throw Error("No callback provided to pbkdf2");_=_||"sha1";var x=G[_.toLowerCase()];if(!x||typeof globalThis.Promise!=="function"){P()(function(){var g;try{g=z(L,B,E,I,_)}catch(h){f(h);return}f(null,g)});return}C(N(x).then(function(g){if(g)return H(L,B,E,I,x);return z(L,B,E,I,_)}),f)}}),Bd=A0(($)=>{var Q=(E9(),Q5(O9)),Z=BB(),X=EB(),Y=fB();function z(q,W,G,U,D,P){if(Z(G,U),q=Y(q,X,"Password"),W=Y(W,X,"Salt"),typeof D==="function")P=D,D="sha1";if(typeof P!=="function")throw Error("No callback provided to pbkdf2");return Q.pbkdf2(q,W,G,U,D,P)}function J(q,W,G,U,D){return Z(G,U),q=Y(q,X,"Password"),W=Y(W,X,"Salt"),D=D||"sha1",Q.pbkdf2Sync(q,W,G,U,D)}if(!Q.pbkdf2Sync||Q.pbkdf2Sync.toString().indexOf("keylen, digest")===-1)$.pbkdf2Sync=wd(),$.pbkdf2=OG0();else $.pbkdf2Sync=J,$.pbkdf2=z}),DG0=A0(($)=>{var Q=(E9(),Q5(O9));$.createCipher=$.Cipher=Q.createCipher,$.createCipheriv=$.Cipheriv=Q.createCipheriv,$.createDecipher=$.Decipher=Q.createDecipher,$.createDecipheriv=$.Decipheriv=Q.createDecipheriv,$.listCiphers=$.getCiphers=Q.getCiphers}),MG0=A0(($)=>{var Q=(E9(),Q5(O9));$.DiffieHellmanGroup=Q.DiffieHellmanGroup,$.createDiffieHellmanGroup=Q.createDiffieHellmanGroup,$.getDiffieHellman=Q.getDiffieHellman,$.createDiffieHellman=Q.createDiffieHellman,$.DiffieHellman=Q.DiffieHellman}),PG0=A0(($)=>{var Q=(E9(),Q5(O9));$.createSign=Q.createSign,$.Sign=Q.Sign,$.createVerify=Q.createVerify,$.Verify=Q.Verify}),HG0=A0(($,Q)=>{Q.exports={name:"elliptic",version:"6.6.1",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}}),dQ=A0(($,Q)=>{(function(Z,X){function Y(K,M){if(!K)throw Error(M||"Assertion failed")}function z(K,M){K.super_=M;var j=function(){};j.prototype=M.prototype,K.prototype=new j,K.prototype.constructor=K}function J(K,M,j){if(J.isBN(K))return K;if(this.negative=0,this.words=null,this.length=0,this.red=null,K!==null){if(M==="le"||M==="be")j=M,M=10;this._init(K||0,M||10,j||"be")}}if(typeof Z==="object")Z.exports=J;else X.BN=J;J.BN=J,J.wordSize=26;var q;try{if(typeof window<"u"&&typeof window.Buffer<"u")q=window.Buffer;else q=(s6(),Q5(T8)).Buffer}catch(K){}J.isBN=function(K){if(K instanceof J)return!0;return K!==null&&typeof K==="object"&&K.constructor.wordSize===J.wordSize&&Array.isArray(K.words)},J.max=function(K,M){if(K.cmp(M)>0)return K;return M},J.min=function(K,M){if(K.cmp(M)<0)return K;return M},J.prototype._init=function(K,M,j){if(typeof K==="number")return this._initNumber(K,M,j);if(typeof K==="object")return this._initArray(K,M,j);if(M==="hex")M=16;Y(M===(M|0)&&M>=2&&M<=36),K=K.toString().replace(/\s+/g,"");var O=0;if(K[0]==="-")O++,this.negative=1;if(O<K.length){if(M===16)this._parseHex(K,O,j);else if(this._parseBase(K,M,O),j==="le")this._initArray(this.toArray(),M,j)}},J.prototype._initNumber=function(K,M,j){if(K<0)this.negative=1,K=-K;if(K<67108864)this.words=[K&67108863],this.length=1;else if(K<4503599627370496)this.words=[K&67108863,K/67108864&67108863],this.length=2;else Y(K<9007199254740992),this.words=[K&67108863,K/67108864&67108863,1],this.length=3;if(j!=="le")return;this._initArray(this.toArray(),M,j)},J.prototype._initArray=function(K,M,j){if(Y(typeof K.length==="number"),K.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(K.length/3),this.words=Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var R,F,A=0;if(j==="be"){for(O=K.length-1,R=0;O>=0;O-=3)if(F=K[O]|K[O-1]<<8|K[O-2]<<16,this.words[R]|=F<<A&67108863,this.words[R+1]=F>>>26-A&67108863,A+=24,A>=26)A-=26,R++}else if(j==="le"){for(O=0,R=0;O<K.length;O+=3)if(F=K[O]|K[O+1]<<8|K[O+2]<<16,this.words[R]|=F<<A&67108863,this.words[R+1]=F>>>26-A&67108863,A+=24,A>=26)A-=26,R++}return this.strip()};function W(K,M){var j=K.charCodeAt(M);if(j>=65&&j<=70)return j-55;else if(j>=97&&j<=102)return j-87;else return j-48&15}function G(K,M,j){var O=W(K,j);if(j-1>=M)O|=W(K,j-1)<<4;return O}J.prototype._parseHex=function(K,M,j){this.length=Math.ceil((K.length-M)/6),this.words=Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var R=0,F=0,A;if(j==="be")for(O=K.length-1;O>=M;O-=2)if(A=G(K,M,O)<<R,this.words[F]|=A&67108863,R>=18)R-=18,F+=1,this.words[F]|=A>>>26;else R+=8;else{var T=K.length-M;for(O=T%2===0?M+1:M;O<K.length;O+=2)if(A=G(K,M,O)<<R,this.words[F]|=A&67108863,R>=18)R-=18,F+=1,this.words[F]|=A>>>26;else R+=8}this.strip()};function U(K,M,j,O){var R=0,F=Math.min(K.length,j);for(var A=M;A<F;A++){var T=K.charCodeAt(A)-48;if(R*=O,T>=49)R+=T-49+10;else if(T>=17)R+=T-17+10;else R+=T}return R}J.prototype._parseBase=function(K,M,j){this.words=[0],this.length=1;for(var O=0,R=1;R<=67108863;R*=M)O++;O--,R=R/M|0;var F=K.length-j,A=F%O,T=Math.min(F,F-A)+j,V=0;for(var w=j;w<T;w+=O)if(V=U(K,w,w+O,M),this.imuln(R),this.words[0]+V<67108864)this.words[0]+=V;else this._iaddn(V);if(A!==0){var k=1;V=U(K,w,K.length,M);for(w=0;w<A;w++)k*=M;if(this.imuln(k),this.words[0]+V<67108864)this.words[0]+=V;else this._iaddn(V)}this.strip()},J.prototype.copy=function(K){K.words=Array(this.length);for(var M=0;M<this.length;M++)K.words[M]=this.words[M];K.length=this.length,K.negative=this.negative,K.red=this.red},J.prototype.clone=function(){var K=new J(null);return this.copy(K),K},J.prototype._expand=function(K){while(this.length<K)this.words[this.length++]=0;return this},J.prototype.strip=function(){while(this.length>1&&this.words[this.length-1]===0)this.length--;return this._normSign()},J.prototype._normSign=function(){if(this.length===1&&this.words[0]===0)this.negative=0;return this},J.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var D=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],P=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],H=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];if(J.prototype.toString=function(K,M){K=K||10,M=M|0||1;var j;if(K===16||K==="hex"){j="";var O=0,R=0;for(var F=0;F<this.length;F++){var A=this.words[F],T=((A<<O|R)&16777215).toString(16);if(R=A>>>24-O&16777215,O+=2,O>=26)O-=26,F--;if(R!==0||F!==this.length-1)j=D[6-T.length]+T+j;else j=T+j}if(R!==0)j=R.toString(16)+j;while(j.length%M!==0)j="0"+j;if(this.negative!==0)j="-"+j;return j}if(K===(K|0)&&K>=2&&K<=36){var V=P[K],w=H[K];j="";var k=this.clone();k.negative=0;while(!k.isZero()){var S=k.modn(w).toString(K);if(k=k.idivn(w),!k.isZero())j=D[V-S.length]+S+j;else j=S+j}if(this.isZero())j="0"+j;while(j.length%M!==0)j="0"+j;if(this.negative!==0)j="-"+j;return j}Y(!1,"Base should be between 2 and 36")},J.prototype.toNumber=function(){var K=this.words[0];if(this.length===2)K+=this.words[1]*67108864;else if(this.length===3&&this.words[2]===1)K+=4503599627370496+this.words[1]*67108864;else if(this.length>2)Y(!1,"Number can only safely store up to 53 bits");return this.negative!==0?-K:K},J.prototype.toJSON=function(){return this.toString(16)},J.prototype.toBuffer=function(K,M){return Y(typeof q<"u"),this.toArrayLike(q,K,M)},J.prototype.toArray=function(K,M){return this.toArrayLike(Array,K,M)},J.prototype.toArrayLike=function(K,M,j){var O=this.byteLength(),R=j||Math.max(1,O);Y(O<=R,"byte array longer than desired length"),Y(R>0,"Requested array length <= 0"),this.strip();var F=M==="le",A=new K(R),T,V,w=this.clone();if(!F){for(V=0;V<R-O;V++)A[V]=0;for(V=0;!w.isZero();V++)T=w.andln(255),w.iushrn(8),A[R-V-1]=T}else{for(V=0;!w.isZero();V++)T=w.andln(255),w.iushrn(8),A[V]=T;for(;V<R;V++)A[V]=0}return A},Math.clz32)J.prototype._countBits=function(K){return 32-Math.clz32(K)};else J.prototype._countBits=function(K){var M=K,j=0;if(M>=4096)j+=13,M>>>=13;if(M>=64)j+=7,M>>>=7;if(M>=8)j+=4,M>>>=4;if(M>=2)j+=2,M>>>=2;return j+M};J.prototype._zeroBits=function(K){if(K===0)return 26;var M=K,j=0;if((M&8191)===0)j+=13,M>>>=13;if((M&127)===0)j+=7,M>>>=7;if((M&15)===0)j+=4,M>>>=4;if((M&3)===0)j+=2,M>>>=2;if((M&1)===0)j++;return j},J.prototype.bitLength=function(){var K=this.words[this.length-1],M=this._countBits(K);return(this.length-1)*26+M};function N(K){var M=Array(K.bitLength());for(var j=0;j<M.length;j++){var O=j/26|0,R=j%26;M[j]=(K.words[O]&1<<R)>>>R}return M}J.prototype.zeroBits=function(){if(this.isZero())return 0;var K=0;for(var M=0;M<this.length;M++){var j=this._zeroBits(this.words[M]);if(K+=j,j!==26)break}return K},J.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},J.prototype.toTwos=function(K){if(this.negative!==0)return this.abs().inotn(K).iaddn(1);return this.clone()},J.prototype.fromTwos=function(K){if(this.testn(K-1))return this.notn(K).iaddn(1).ineg();return this.clone()},J.prototype.isNeg=function(){return this.negative!==0},J.prototype.neg=function(){return this.clone().ineg()},J.prototype.ineg=function(){if(!this.isZero())this.negative^=1;return this},J.prototype.iuor=function(K){while(this.length<K.length)this.words[this.length++]=0;for(var M=0;M<K.length;M++)this.words[M]=this.words[M]|K.words[M];return this.strip()},J.prototype.ior=function(K){return Y((this.negative|K.negative)===0),this.iuor(K)},J.prototype.or=function(K){if(this.length>K.length)return this.clone().ior(K);return K.clone().ior(this)},J.prototype.uor=function(K){if(this.length>K.length)return this.clone().iuor(K);return K.clone().iuor(this)},J.prototype.iuand=function(K){var M;if(this.length>K.length)M=K;else M=this;for(var j=0;j<M.length;j++)this.words[j]=this.words[j]&K.words[j];return this.length=M.length,this.strip()},J.prototype.iand=function(K){return Y((this.negative|K.negative)===0),this.iuand(K)},J.prototype.and=function(K){if(this.length>K.length)return this.clone().iand(K);return K.clone().iand(this)},J.prototype.uand=function(K){if(this.length>K.length)return this.clone().iuand(K);return K.clone().iuand(this)},J.prototype.iuxor=function(K){var M,j;if(this.length>K.length)M=this,j=K;else M=K,j=this;for(var O=0;O<j.length;O++)this.words[O]=M.words[O]^j.words[O];if(this!==M)for(;O<M.length;O++)this.words[O]=M.words[O];return this.length=M.length,this.strip()},J.prototype.ixor=function(K){return Y((this.negative|K.negative)===0),this.iuxor(K)},J.prototype.xor=function(K){if(this.length>K.length)return this.clone().ixor(K);return K.clone().ixor(this)},J.prototype.uxor=function(K){if(this.length>K.length)return this.clone().iuxor(K);return K.clone().iuxor(this)},J.prototype.inotn=function(K){Y(typeof K==="number"&&K>=0);var M=Math.ceil(K/26)|0,j=K%26;if(this._expand(M),j>0)M--;for(var O=0;O<M;O++)this.words[O]=~this.words[O]&67108863;if(j>0)this.words[O]=~this.words[O]&67108863>>26-j;return this.strip()},J.prototype.notn=function(K){return this.clone().inotn(K)},J.prototype.setn=function(K,M){Y(typeof K==="number"&&K>=0);var j=K/26|0,O=K%26;if(this._expand(j+1),M)this.words[j]=this.words[j]|1<<O;else this.words[j]=this.words[j]&~(1<<O);return this.strip()},J.prototype.iadd=function(K){var M;if(this.negative!==0&&K.negative===0)return this.negative=0,M=this.isub(K),this.negative^=1,this._normSign();else if(this.negative===0&&K.negative!==0)return K.negative=0,M=this.isub(K),K.negative=1,M._normSign();var j,O;if(this.length>K.length)j=this,O=K;else j=K,O=this;var R=0;for(var F=0;F<O.length;F++)M=(j.words[F]|0)+(O.words[F]|0)+R,this.words[F]=M&67108863,R=M>>>26;for(;R!==0&&F<j.length;F++)M=(j.words[F]|0)+R,this.words[F]=M&67108863,R=M>>>26;if(this.length=j.length,R!==0)this.words[this.length]=R,this.length++;else if(j!==this)for(;F<j.length;F++)this.words[F]=j.words[F];return this},J.prototype.add=function(K){var M;if(K.negative!==0&&this.negative===0)return K.negative=0,M=this.sub(K),K.negative^=1,M;else if(K.negative===0&&this.negative!==0)return this.negative=0,M=K.sub(this),this.negative=1,M;if(this.length>K.length)return this.clone().iadd(K);return K.clone().iadd(this)},J.prototype.isub=function(K){if(K.negative!==0){K.negative=0;var M=this.iadd(K);return K.negative=1,M._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(K),this.negative=1,this._normSign();var j=this.cmp(K);if(j===0)return this.negative=0,this.length=1,this.words[0]=0,this;var O,R;if(j>0)O=this,R=K;else O=K,R=this;var F=0;for(var A=0;A<R.length;A++)M=(O.words[A]|0)-(R.words[A]|0)+F,F=M>>26,this.words[A]=M&67108863;for(;F!==0&&A<O.length;A++)M=(O.words[A]|0)+F,F=M>>26,this.words[A]=M&67108863;if(F===0&&A<O.length&&O!==this)for(;A<O.length;A++)this.words[A]=O.words[A];if(this.length=Math.max(this.length,A),O!==this)this.negative=1;return this.strip()},J.prototype.sub=function(K){return this.clone().isub(K)};function C(K,M,j){j.negative=M.negative^K.negative;var O=K.length+M.length|0;j.length=O,O=O-1|0;var R=K.words[0]|0,F=M.words[0]|0,A=R*F,T=A&67108863,V=A/67108864|0;j.words[0]=T;for(var w=1;w<O;w++){var k=V>>>26,S=V&67108863,y=Math.min(w,M.length-1);for(var u=Math.max(0,w-K.length+1);u<=y;u++){var c=w-u|0;R=K.words[c]|0,F=M.words[u]|0,A=R*F+S,k+=A/67108864|0,S=A&67108863}j.words[w]=S|0,V=k|0}if(V!==0)j.words[w]=V|0;else j.length--;return j.strip()}var L=function(K,M,j){var O=K.words,R=M.words,F=j.words,A=0,T,V,w,k=O[0]|0,S=k&8191,y=k>>>13,u=O[1]|0,c=u&8191,o=u>>>13,z0=O[2]|0,e=z0&8191,s=z0>>>13,J0=O[3]|0,t=J0&8191,Z0=J0>>>13,N0=O[4]|0,i=N0&8191,l=N0>>>13,q0=O[5]|0,Y0=q0&8191,K0=q0>>>13,k0=O[6]|0,a=k0&8191,X0=k0>>>13,n0=O[7]|0,W0=n0&8191,V0=n0>>>13,H1=O[8]|0,D0=H1&8191,j0=H1>>>13,g1=O[9]|0,T0=g1&8191,R0=g1>>>13,s1=R[0]|0,B0=s1&8191,C0=s1>>>13,g6=R[1]|0,m0=g6&8191,l0=g6>>>13,C6=R[2]|0,y0=C6&8191,u0=C6>>>13,W8=R[3]|0,d0=W8&8191,v0=W8>>>13,o6=R[4]|0,i0=o6&8191,c0=o6>>>13,M5=R[5]|0,_0=M5&8191,d=M5>>>13,$0=R[6]|0,G0=$0&8191,O0=$0>>>13,s0=R[7]|0,E0=s0&8191,S0=s0>>>13,T5=R[8]|0,g0=T5&8191,p0=T5>>>13,_6=R[9]|0,h0=_6&8191,o0=_6>>>13;j.negative=K.negative^M.negative,j.length=19,T=Math.imul(S,B0),V=Math.imul(S,C0),V=V+Math.imul(y,B0)|0,w=Math.imul(y,C0);var S6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(S6>>>26)|0,S6&=67108863,T=Math.imul(c,B0),V=Math.imul(c,C0),V=V+Math.imul(o,B0)|0,w=Math.imul(o,C0),T=T+Math.imul(S,m0)|0,V=V+Math.imul(S,l0)|0,V=V+Math.imul(y,m0)|0,w=w+Math.imul(y,l0)|0;var m1=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(m1>>>26)|0,m1&=67108863,T=Math.imul(e,B0),V=Math.imul(e,C0),V=V+Math.imul(s,B0)|0,w=Math.imul(s,C0),T=T+Math.imul(c,m0)|0,V=V+Math.imul(c,l0)|0,V=V+Math.imul(o,m0)|0,w=w+Math.imul(o,l0)|0,T=T+Math.imul(S,y0)|0,V=V+Math.imul(S,u0)|0,V=V+Math.imul(y,y0)|0,w=w+Math.imul(y,u0)|0;var k1=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(k1>>>26)|0,k1&=67108863,T=Math.imul(t,B0),V=Math.imul(t,C0),V=V+Math.imul(Z0,B0)|0,w=Math.imul(Z0,C0),T=T+Math.imul(e,m0)|0,V=V+Math.imul(e,l0)|0,V=V+Math.imul(s,m0)|0,w=w+Math.imul(s,l0)|0,T=T+Math.imul(c,y0)|0,V=V+Math.imul(c,u0)|0,V=V+Math.imul(o,y0)|0,w=w+Math.imul(o,u0)|0,T=T+Math.imul(S,d0)|0,V=V+Math.imul(S,v0)|0,V=V+Math.imul(y,d0)|0,w=w+Math.imul(y,v0)|0;var g5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(g5>>>26)|0,g5&=67108863,T=Math.imul(i,B0),V=Math.imul(i,C0),V=V+Math.imul(l,B0)|0,w=Math.imul(l,C0),T=T+Math.imul(t,m0)|0,V=V+Math.imul(t,l0)|0,V=V+Math.imul(Z0,m0)|0,w=w+Math.imul(Z0,l0)|0,T=T+Math.imul(e,y0)|0,V=V+Math.imul(e,u0)|0,V=V+Math.imul(s,y0)|0,w=w+Math.imul(s,u0)|0,T=T+Math.imul(c,d0)|0,V=V+Math.imul(c,v0)|0,V=V+Math.imul(o,d0)|0,w=w+Math.imul(o,v0)|0,T=T+Math.imul(S,i0)|0,V=V+Math.imul(S,c0)|0,V=V+Math.imul(y,i0)|0,w=w+Math.imul(y,c0)|0;var P5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(P5>>>26)|0,P5&=67108863,T=Math.imul(Y0,B0),V=Math.imul(Y0,C0),V=V+Math.imul(K0,B0)|0,w=Math.imul(K0,C0),T=T+Math.imul(i,m0)|0,V=V+Math.imul(i,l0)|0,V=V+Math.imul(l,m0)|0,w=w+Math.imul(l,l0)|0,T=T+Math.imul(t,y0)|0,V=V+Math.imul(t,u0)|0,V=V+Math.imul(Z0,y0)|0,w=w+Math.imul(Z0,u0)|0,T=T+Math.imul(e,d0)|0,V=V+Math.imul(e,v0)|0,V=V+Math.imul(s,d0)|0,w=w+Math.imul(s,v0)|0,T=T+Math.imul(c,i0)|0,V=V+Math.imul(c,c0)|0,V=V+Math.imul(o,i0)|0,w=w+Math.imul(o,c0)|0,T=T+Math.imul(S,_0)|0,V=V+Math.imul(S,d)|0,V=V+Math.imul(y,_0)|0,w=w+Math.imul(y,d)|0;var v1=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(v1>>>26)|0,v1&=67108863,T=Math.imul(a,B0),V=Math.imul(a,C0),V=V+Math.imul(X0,B0)|0,w=Math.imul(X0,C0),T=T+Math.imul(Y0,m0)|0,V=V+Math.imul(Y0,l0)|0,V=V+Math.imul(K0,m0)|0,w=w+Math.imul(K0,l0)|0,T=T+Math.imul(i,y0)|0,V=V+Math.imul(i,u0)|0,V=V+Math.imul(l,y0)|0,w=w+Math.imul(l,u0)|0,T=T+Math.imul(t,d0)|0,V=V+Math.imul(t,v0)|0,V=V+Math.imul(Z0,d0)|0,w=w+Math.imul(Z0,v0)|0,T=T+Math.imul(e,i0)|0,V=V+Math.imul(e,c0)|0,V=V+Math.imul(s,i0)|0,w=w+Math.imul(s,c0)|0,T=T+Math.imul(c,_0)|0,V=V+Math.imul(c,d)|0,V=V+Math.imul(o,_0)|0,w=w+Math.imul(o,d)|0,T=T+Math.imul(S,G0)|0,V=V+Math.imul(S,O0)|0,V=V+Math.imul(y,G0)|0,w=w+Math.imul(y,O0)|0;var o1=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(o1>>>26)|0,o1&=67108863,T=Math.imul(W0,B0),V=Math.imul(W0,C0),V=V+Math.imul(V0,B0)|0,w=Math.imul(V0,C0),T=T+Math.imul(a,m0)|0,V=V+Math.imul(a,l0)|0,V=V+Math.imul(X0,m0)|0,w=w+Math.imul(X0,l0)|0,T=T+Math.imul(Y0,y0)|0,V=V+Math.imul(Y0,u0)|0,V=V+Math.imul(K0,y0)|0,w=w+Math.imul(K0,u0)|0,T=T+Math.imul(i,d0)|0,V=V+Math.imul(i,v0)|0,V=V+Math.imul(l,d0)|0,w=w+Math.imul(l,v0)|0,T=T+Math.imul(t,i0)|0,V=V+Math.imul(t,c0)|0,V=V+Math.imul(Z0,i0)|0,w=w+Math.imul(Z0,c0)|0,T=T+Math.imul(e,_0)|0,V=V+Math.imul(e,d)|0,V=V+Math.imul(s,_0)|0,w=w+Math.imul(s,d)|0,T=T+Math.imul(c,G0)|0,V=V+Math.imul(c,O0)|0,V=V+Math.imul(o,G0)|0,w=w+Math.imul(o,O0)|0,T=T+Math.imul(S,E0)|0,V=V+Math.imul(S,S0)|0,V=V+Math.imul(y,E0)|0,w=w+Math.imul(y,S0)|0;var Y6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(Y6>>>26)|0,Y6&=67108863,T=Math.imul(D0,B0),V=Math.imul(D0,C0),V=V+Math.imul(j0,B0)|0,w=Math.imul(j0,C0),T=T+Math.imul(W0,m0)|0,V=V+Math.imul(W0,l0)|0,V=V+Math.imul(V0,m0)|0,w=w+Math.imul(V0,l0)|0,T=T+Math.imul(a,y0)|0,V=V+Math.imul(a,u0)|0,V=V+Math.imul(X0,y0)|0,w=w+Math.imul(X0,u0)|0,T=T+Math.imul(Y0,d0)|0,V=V+Math.imul(Y0,v0)|0,V=V+Math.imul(K0,d0)|0,w=w+Math.imul(K0,v0)|0,T=T+Math.imul(i,i0)|0,V=V+Math.imul(i,c0)|0,V=V+Math.imul(l,i0)|0,w=w+Math.imul(l,c0)|0,T=T+Math.imul(t,_0)|0,V=V+Math.imul(t,d)|0,V=V+Math.imul(Z0,_0)|0,w=w+Math.imul(Z0,d)|0,T=T+Math.imul(e,G0)|0,V=V+Math.imul(e,O0)|0,V=V+Math.imul(s,G0)|0,w=w+Math.imul(s,O0)|0,T=T+Math.imul(c,E0)|0,V=V+Math.imul(c,S0)|0,V=V+Math.imul(o,E0)|0,w=w+Math.imul(o,S0)|0,T=T+Math.imul(S,g0)|0,V=V+Math.imul(S,p0)|0,V=V+Math.imul(y,g0)|0,w=w+Math.imul(y,p0)|0;var J6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(J6>>>26)|0,J6&=67108863,T=Math.imul(T0,B0),V=Math.imul(T0,C0),V=V+Math.imul(R0,B0)|0,w=Math.imul(R0,C0),T=T+Math.imul(D0,m0)|0,V=V+Math.imul(D0,l0)|0,V=V+Math.imul(j0,m0)|0,w=w+Math.imul(j0,l0)|0,T=T+Math.imul(W0,y0)|0,V=V+Math.imul(W0,u0)|0,V=V+Math.imul(V0,y0)|0,w=w+Math.imul(V0,u0)|0,T=T+Math.imul(a,d0)|0,V=V+Math.imul(a,v0)|0,V=V+Math.imul(X0,d0)|0,w=w+Math.imul(X0,v0)|0,T=T+Math.imul(Y0,i0)|0,V=V+Math.imul(Y0,c0)|0,V=V+Math.imul(K0,i0)|0,w=w+Math.imul(K0,c0)|0,T=T+Math.imul(i,_0)|0,V=V+Math.imul(i,d)|0,V=V+Math.imul(l,_0)|0,w=w+Math.imul(l,d)|0,T=T+Math.imul(t,G0)|0,V=V+Math.imul(t,O0)|0,V=V+Math.imul(Z0,G0)|0,w=w+Math.imul(Z0,O0)|0,T=T+Math.imul(e,E0)|0,V=V+Math.imul(e,S0)|0,V=V+Math.imul(s,E0)|0,w=w+Math.imul(s,S0)|0,T=T+Math.imul(c,g0)|0,V=V+Math.imul(c,p0)|0,V=V+Math.imul(o,g0)|0,w=w+Math.imul(o,p0)|0,T=T+Math.imul(S,h0)|0,V=V+Math.imul(S,o0)|0,V=V+Math.imul(y,h0)|0,w=w+Math.imul(y,o0)|0;var _5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(_5>>>26)|0,_5&=67108863,T=Math.imul(T0,m0),V=Math.imul(T0,l0),V=V+Math.imul(R0,m0)|0,w=Math.imul(R0,l0),T=T+Math.imul(D0,y0)|0,V=V+Math.imul(D0,u0)|0,V=V+Math.imul(j0,y0)|0,w=w+Math.imul(j0,u0)|0,T=T+Math.imul(W0,d0)|0,V=V+Math.imul(W0,v0)|0,V=V+Math.imul(V0,d0)|0,w=w+Math.imul(V0,v0)|0,T=T+Math.imul(a,i0)|0,V=V+Math.imul(a,c0)|0,V=V+Math.imul(X0,i0)|0,w=w+Math.imul(X0,c0)|0,T=T+Math.imul(Y0,_0)|0,V=V+Math.imul(Y0,d)|0,V=V+Math.imul(K0,_0)|0,w=w+Math.imul(K0,d)|0,T=T+Math.imul(i,G0)|0,V=V+Math.imul(i,O0)|0,V=V+Math.imul(l,G0)|0,w=w+Math.imul(l,O0)|0,T=T+Math.imul(t,E0)|0,V=V+Math.imul(t,S0)|0,V=V+Math.imul(Z0,E0)|0,w=w+Math.imul(Z0,S0)|0,T=T+Math.imul(e,g0)|0,V=V+Math.imul(e,p0)|0,V=V+Math.imul(s,g0)|0,w=w+Math.imul(s,p0)|0,T=T+Math.imul(c,h0)|0,V=V+Math.imul(c,o0)|0,V=V+Math.imul(o,h0)|0,w=w+Math.imul(o,o0)|0;var S5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(S5>>>26)|0,S5&=67108863,T=Math.imul(T0,y0),V=Math.imul(T0,u0),V=V+Math.imul(R0,y0)|0,w=Math.imul(R0,u0),T=T+Math.imul(D0,d0)|0,V=V+Math.imul(D0,v0)|0,V=V+Math.imul(j0,d0)|0,w=w+Math.imul(j0,v0)|0,T=T+Math.imul(W0,i0)|0,V=V+Math.imul(W0,c0)|0,V=V+Math.imul(V0,i0)|0,w=w+Math.imul(V0,c0)|0,T=T+Math.imul(a,_0)|0,V=V+Math.imul(a,d)|0,V=V+Math.imul(X0,_0)|0,w=w+Math.imul(X0,d)|0,T=T+Math.imul(Y0,G0)|0,V=V+Math.imul(Y0,O0)|0,V=V+Math.imul(K0,G0)|0,w=w+Math.imul(K0,O0)|0,T=T+Math.imul(i,E0)|0,V=V+Math.imul(i,S0)|0,V=V+Math.imul(l,E0)|0,w=w+Math.imul(l,S0)|0,T=T+Math.imul(t,g0)|0,V=V+Math.imul(t,p0)|0,V=V+Math.imul(Z0,g0)|0,w=w+Math.imul(Z0,p0)|0,T=T+Math.imul(e,h0)|0,V=V+Math.imul(e,o0)|0,V=V+Math.imul(s,h0)|0,w=w+Math.imul(s,o0)|0;var F5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(F5>>>26)|0,F5&=67108863,T=Math.imul(T0,d0),V=Math.imul(T0,v0),V=V+Math.imul(R0,d0)|0,w=Math.imul(R0,v0),T=T+Math.imul(D0,i0)|0,V=V+Math.imul(D0,c0)|0,V=V+Math.imul(j0,i0)|0,w=w+Math.imul(j0,c0)|0,T=T+Math.imul(W0,_0)|0,V=V+Math.imul(W0,d)|0,V=V+Math.imul(V0,_0)|0,w=w+Math.imul(V0,d)|0,T=T+Math.imul(a,G0)|0,V=V+Math.imul(a,O0)|0,V=V+Math.imul(X0,G0)|0,w=w+Math.imul(X0,O0)|0,T=T+Math.imul(Y0,E0)|0,V=V+Math.imul(Y0,S0)|0,V=V+Math.imul(K0,E0)|0,w=w+Math.imul(K0,S0)|0,T=T+Math.imul(i,g0)|0,V=V+Math.imul(i,p0)|0,V=V+Math.imul(l,g0)|0,w=w+Math.imul(l,p0)|0,T=T+Math.imul(t,h0)|0,V=V+Math.imul(t,o0)|0,V=V+Math.imul(Z0,h0)|0,w=w+Math.imul(Z0,o0)|0;var h5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(h5>>>26)|0,h5&=67108863,T=Math.imul(T0,i0),V=Math.imul(T0,c0),V=V+Math.imul(R0,i0)|0,w=Math.imul(R0,c0),T=T+Math.imul(D0,_0)|0,V=V+Math.imul(D0,d)|0,V=V+Math.imul(j0,_0)|0,w=w+Math.imul(j0,d)|0,T=T+Math.imul(W0,G0)|0,V=V+Math.imul(W0,O0)|0,V=V+Math.imul(V0,G0)|0,w=w+Math.imul(V0,O0)|0,T=T+Math.imul(a,E0)|0,V=V+Math.imul(a,S0)|0,V=V+Math.imul(X0,E0)|0,w=w+Math.imul(X0,S0)|0,T=T+Math.imul(Y0,g0)|0,V=V+Math.imul(Y0,p0)|0,V=V+Math.imul(K0,g0)|0,w=w+Math.imul(K0,p0)|0,T=T+Math.imul(i,h0)|0,V=V+Math.imul(i,o0)|0,V=V+Math.imul(l,h0)|0,w=w+Math.imul(l,o0)|0;var A5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(A5>>>26)|0,A5&=67108863,T=Math.imul(T0,_0),V=Math.imul(T0,d),V=V+Math.imul(R0,_0)|0,w=Math.imul(R0,d),T=T+Math.imul(D0,G0)|0,V=V+Math.imul(D0,O0)|0,V=V+Math.imul(j0,G0)|0,w=w+Math.imul(j0,O0)|0,T=T+Math.imul(W0,E0)|0,V=V+Math.imul(W0,S0)|0,V=V+Math.imul(V0,E0)|0,w=w+Math.imul(V0,S0)|0,T=T+Math.imul(a,g0)|0,V=V+Math.imul(a,p0)|0,V=V+Math.imul(X0,g0)|0,w=w+Math.imul(X0,p0)|0,T=T+Math.imul(Y0,h0)|0,V=V+Math.imul(Y0,o0)|0,V=V+Math.imul(K0,h0)|0,w=w+Math.imul(K0,o0)|0;var z6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(z6>>>26)|0,z6&=67108863,T=Math.imul(T0,G0),V=Math.imul(T0,O0),V=V+Math.imul(R0,G0)|0,w=Math.imul(R0,O0),T=T+Math.imul(D0,E0)|0,V=V+Math.imul(D0,S0)|0,V=V+Math.imul(j0,E0)|0,w=w+Math.imul(j0,S0)|0,T=T+Math.imul(W0,g0)|0,V=V+Math.imul(W0,p0)|0,V=V+Math.imul(V0,g0)|0,w=w+Math.imul(V0,p0)|0,T=T+Math.imul(a,h0)|0,V=V+Math.imul(a,o0)|0,V=V+Math.imul(X0,h0)|0,w=w+Math.imul(X0,o0)|0;var n6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(n6>>>26)|0,n6&=67108863,T=Math.imul(T0,E0),V=Math.imul(T0,S0),V=V+Math.imul(R0,E0)|0,w=Math.imul(R0,S0),T=T+Math.imul(D0,g0)|0,V=V+Math.imul(D0,p0)|0,V=V+Math.imul(j0,g0)|0,w=w+Math.imul(j0,p0)|0,T=T+Math.imul(W0,h0)|0,V=V+Math.imul(W0,o0)|0,V=V+Math.imul(V0,h0)|0,w=w+Math.imul(V0,o0)|0;var K8=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(K8>>>26)|0,K8&=67108863,T=Math.imul(T0,g0),V=Math.imul(T0,p0),V=V+Math.imul(R0,g0)|0,w=Math.imul(R0,p0),T=T+Math.imul(D0,h0)|0,V=V+Math.imul(D0,o0)|0,V=V+Math.imul(j0,h0)|0,w=w+Math.imul(j0,o0)|0;var b6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(b6>>>26)|0,b6&=67108863,T=Math.imul(T0,h0),V=Math.imul(T0,o0),V=V+Math.imul(R0,h0)|0,w=Math.imul(R0,o0);var r6=(A+T|0)+((V&8191)<<13)|0;if(A=(w+(V>>>13)|0)+(r6>>>26)|0,r6&=67108863,F[0]=S6,F[1]=m1,F[2]=k1,F[3]=g5,F[4]=P5,F[5]=v1,F[6]=o1,F[7]=Y6,F[8]=J6,F[9]=_5,F[10]=S5,F[11]=F5,F[12]=h5,F[13]=A5,F[14]=z6,F[15]=n6,F[16]=K8,F[17]=b6,F[18]=r6,A!==0)F[19]=A,j.length++;return j};if(!Math.imul)L=C;function B(K,M,j){j.negative=M.negative^K.negative,j.length=K.length+M.length;var O=0,R=0;for(var F=0;F<j.length-1;F++){var A=R;R=0;var T=O&67108863,V=Math.min(F,M.length-1);for(var w=Math.max(0,F-K.length+1);w<=V;w++){var k=F-w,S=K.words[k]|0,y=M.words[w]|0,u=S*y,c=u&67108863;A=A+(u/67108864|0)|0,c=c+T|0,T=c&67108863,A=A+(c>>>26)|0,R+=A>>>26,A&=67108863}j.words[F]=T,O=A,A=R}if(O!==0)j.words[F]=O;else j.length--;return j.strip()}function E(K,M,j){var O=new I;return O.mulp(K,M,j)}J.prototype.mulTo=function(K,M){var j,O=this.length+K.length;if(this.length===10&&K.length===10)j=L(this,K,M);else if(O<63)j=C(this,K,M);else if(O<1024)j=B(this,K,M);else j=E(this,K,M);return j};function I(K,M){this.x=K,this.y=M}I.prototype.makeRBT=function(K){var M=Array(K),j=J.prototype._countBits(K)-1;for(var O=0;O<K;O++)M[O]=this.revBin(O,j,K);return M},I.prototype.revBin=function(K,M,j){if(K===0||K===j-1)return K;var O=0;for(var R=0;R<M;R++)O|=(K&1)<<M-R-1,K>>=1;return O},I.prototype.permute=function(K,M,j,O,R,F){for(var A=0;A<F;A++)O[A]=M[K[A]],R[A]=j[K[A]]},I.prototype.transform=function(K,M,j,O,R,F){this.permute(F,K,M,j,O,R);for(var A=1;A<R;A<<=1){var T=A<<1,V=Math.cos(2*Math.PI/T),w=Math.sin(2*Math.PI/T);for(var k=0;k<R;k+=T){var S=V,y=w;for(var u=0;u<A;u++){var c=j[k+u],o=O[k+u],z0=j[k+u+A],e=O[k+u+A],s=S*z0-y*e;if(e=S*e+y*z0,z0=s,j[k+u]=c+z0,O[k+u]=o+e,j[k+u+A]=c-z0,O[k+u+A]=o-e,u!==T)s=V*S-w*y,y=V*y+w*S,S=s}}}},I.prototype.guessLen13b=function(K,M){var j=Math.max(M,K)|1,O=j&1,R=0;for(j=j/2|0;j;j=j>>>1)R++;return 1<<R+1+O},I.prototype.conjugate=function(K,M,j){if(j<=1)return;for(var O=0;O<j/2;O++){var R=K[O];K[O]=K[j-O-1],K[j-O-1]=R,R=M[O],M[O]=-M[j-O-1],M[j-O-1]=-R}},I.prototype.normalize13b=function(K,M){var j=0;for(var O=0;O<M/2;O++){var R=Math.round(K[2*O+1]/M)*8192+Math.round(K[2*O]/M)+j;if(K[O]=R&67108863,R<67108864)j=0;else j=R/67108864|0}return K},I.prototype.convert13b=function(K,M,j,O){var R=0;for(var F=0;F<M;F++)R=R+(K[F]|0),j[2*F]=R&8191,R=R>>>13,j[2*F+1]=R&8191,R=R>>>13;for(F=2*M;F<O;++F)j[F]=0;Y(R===0),Y((R&-8192)===0)},I.prototype.stub=function(K){var M=Array(K);for(var j=0;j<K;j++)M[j]=0;return M},I.prototype.mulp=function(K,M,j){var O=2*this.guessLen13b(K.length,M.length),R=this.makeRBT(O),F=this.stub(O),A=Array(O),T=Array(O),V=Array(O),w=Array(O),k=Array(O),S=Array(O),y=j.words;y.length=O,this.convert13b(K.words,K.length,A,O),this.convert13b(M.words,M.length,w,O),this.transform(A,F,T,V,O,R),this.transform(w,F,k,S,O,R);for(var u=0;u<O;u++){var c=T[u]*k[u]-V[u]*S[u];V[u]=T[u]*S[u]+V[u]*k[u],T[u]=c}return this.conjugate(T,V,O),this.transform(T,V,y,F,O,R),this.conjugate(y,F,O),this.normalize13b(y,O),j.negative=K.negative^M.negative,j.length=K.length+M.length,j.strip()},J.prototype.mul=function(K){var M=new J(null);return M.words=Array(this.length+K.length),this.mulTo(K,M)},J.prototype.mulf=function(K){var M=new J(null);return M.words=Array(this.length+K.length),E(this,K,M)},J.prototype.imul=function(K){return this.clone().mulTo(K,this)},J.prototype.imuln=function(K){Y(typeof K==="number"),Y(K<67108864);var M=0;for(var j=0;j<this.length;j++){var O=(this.words[j]|0)*K,R=(O&67108863)+(M&67108863);M>>=26,M+=O/67108864|0,M+=R>>>26,this.words[j]=R&67108863}if(M!==0)this.words[j]=M,this.length++;return this.length=K===0?1:this.length,this},J.prototype.muln=function(K){return this.clone().imuln(K)},J.prototype.sqr=function(){return this.mul(this)},J.prototype.isqr=function(){return this.imul(this.clone())},J.prototype.pow=function(K){var M=N(K);if(M.length===0)return new J(1);var j=this;for(var O=0;O<M.length;O++,j=j.sqr())if(M[O]!==0)break;if(++O<M.length)for(var R=j.sqr();O<M.length;O++,R=R.sqr()){if(M[O]===0)continue;j=j.mul(R)}return j},J.prototype.iushln=function(K){Y(typeof K==="number"&&K>=0);var M=K%26,j=(K-M)/26,O=67108863>>>26-M<<26-M,R;if(M!==0){var F=0;for(R=0;R<this.length;R++){var A=this.words[R]&O,T=(this.words[R]|0)-A<<M;this.words[R]=T|F,F=A>>>26-M}if(F)this.words[R]=F,this.length++}if(j!==0){for(R=this.length-1;R>=0;R--)this.words[R+j]=this.words[R];for(R=0;R<j;R++)this.words[R]=0;this.length+=j}return this.strip()},J.prototype.ishln=function(K){return Y(this.negative===0),this.iushln(K)},J.prototype.iushrn=function(K,M,j){Y(typeof K==="number"&&K>=0);var O;if(M)O=(M-M%26)/26;else O=0;var R=K%26,F=Math.min((K-R)/26,this.length),A=67108863^67108863>>>R<<R,T=j;if(O-=F,O=Math.max(0,O),T){for(var V=0;V<F;V++)T.words[V]=this.words[V];T.length=F}if(F===0);else if(this.length>F){this.length-=F;for(V=0;V<this.length;V++)this.words[V]=this.words[V+F]}else this.words[0]=0,this.length=1;var w=0;for(V=this.length-1;V>=0&&(w!==0||V>=O);V--){var k=this.words[V]|0;this.words[V]=w<<26-R|k>>>R,w=k&A}if(T&&w!==0)T.words[T.length++]=w;if(this.length===0)this.words[0]=0,this.length=1;return this.strip()},J.prototype.ishrn=function(K,M,j){return Y(this.negative===0),this.iushrn(K,M,j)},J.prototype.shln=function(K){return this.clone().ishln(K)},J.prototype.ushln=function(K){return this.clone().iushln(K)},J.prototype.shrn=function(K){return this.clone().ishrn(K)},J.prototype.ushrn=function(K){return this.clone().iushrn(K)},J.prototype.testn=function(K){Y(typeof K==="number"&&K>=0);var M=K%26,j=(K-M)/26,O=1<<M;if(this.length<=j)return!1;var R=this.words[j];return!!(R&O)},J.prototype.imaskn=function(K){Y(typeof K==="number"&&K>=0);var M=K%26,j=(K-M)/26;if(Y(this.negative===0,"imaskn works only with positive numbers"),this.length<=j)return this;if(M!==0)j++;if(this.length=Math.min(j,this.length),M!==0){var O=67108863^67108863>>>M<<M;this.words[this.length-1]&=O}return this.strip()},J.prototype.maskn=function(K){return this.clone().imaskn(K)},J.prototype.iaddn=function(K){if(Y(typeof K==="number"),Y(K<67108864),K<0)return this.isubn(-K);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<K)return this.words[0]=K-(this.words[0]|0),this.negative=0,this;return this.negative=0,this.isubn(K),this.negative=1,this}return this._iaddn(K)},J.prototype._iaddn=function(K){this.words[0]+=K;for(var M=0;M<this.length&&this.words[M]>=67108864;M++)if(this.words[M]-=67108864,M===this.length-1)this.words[M+1]=1;else this.words[M+1]++;return this.length=Math.max(this.length,M+1),this},J.prototype.isubn=function(K){if(Y(typeof K==="number"),Y(K<67108864),K<0)return this.iaddn(-K);if(this.negative!==0)return this.negative=0,this.iaddn(K),this.negative=1,this;if(this.words[0]-=K,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var M=0;M<this.length&&this.words[M]<0;M++)this.words[M]+=67108864,this.words[M+1]-=1;return this.strip()},J.prototype.addn=function(K){return this.clone().iaddn(K)},J.prototype.subn=function(K){return this.clone().isubn(K)},J.prototype.iabs=function(){return this.negative=0,this},J.prototype.abs=function(){return this.clone().iabs()},J.prototype._ishlnsubmul=function(K,M,j){var O=K.length+j,R;this._expand(O);var F,A=0;for(R=0;R<K.length;R++){F=(this.words[R+j]|0)+A;var T=(K.words[R]|0)*M;F-=T&67108863,A=(F>>26)-(T/67108864|0),this.words[R+j]=F&67108863}for(;R<this.length-j;R++)F=(this.words[R+j]|0)+A,A=F>>26,this.words[R+j]=F&67108863;if(A===0)return this.strip();Y(A===-1),A=0;for(R=0;R<this.length;R++)F=-(this.words[R]|0)+A,A=F>>26,this.words[R]=F&67108863;return this.negative=1,this.strip()},J.prototype._wordDiv=function(K,M){var j=this.length-K.length,O=this.clone(),R=K,F=R.words[R.length-1]|0,A=this._countBits(F);if(j=26-A,j!==0)R=R.ushln(j),O.iushln(j),F=R.words[R.length-1]|0;var T=O.length-R.length,V;if(M!=="mod"){V=new J(null),V.length=T+1,V.words=Array(V.length);for(var w=0;w<V.length;w++)V.words[w]=0}var k=O.clone()._ishlnsubmul(R,1,T);if(k.negative===0){if(O=k,V)V.words[T]=1}for(var S=T-1;S>=0;S--){var y=(O.words[R.length+S]|0)*67108864+(O.words[R.length+S-1]|0);y=Math.min(y/F|0,67108863),O._ishlnsubmul(R,y,S);while(O.negative!==0)if(y--,O.negative=0,O._ishlnsubmul(R,1,S),!O.isZero())O.negative^=1;if(V)V.words[S]=y}if(V)V.strip();if(O.strip(),M!=="div"&&j!==0)O.iushrn(j);return{div:V||null,mod:O}},J.prototype.divmod=function(K,M,j){if(Y(!K.isZero()),this.isZero())return{div:new J(0),mod:new J(0)};var O,R,F;if(this.negative!==0&&K.negative===0){if(F=this.neg().divmod(K,M),M!=="mod")O=F.div.neg();if(M!=="div"){if(R=F.mod.neg(),j&&R.negative!==0)R.iadd(K)}return{div:O,mod:R}}if(this.negative===0&&K.negative!==0){if(F=this.divmod(K.neg(),M),M!=="mod")O=F.div.neg();return{div:O,mod:F.mod}}if((this.negative&K.negative)!==0){if(F=this.neg().divmod(K.neg(),M),M!=="div"){if(R=F.mod.neg(),j&&R.negative!==0)R.isub(K)}return{div:F.div,mod:R}}if(K.length>this.length||this.cmp(K)<0)return{div:new J(0),mod:this};if(K.length===1){if(M==="div")return{div:this.divn(K.words[0]),mod:null};if(M==="mod")return{div:null,mod:new J(this.modn(K.words[0]))};return{div:this.divn(K.words[0]),mod:new J(this.modn(K.words[0]))}}return this._wordDiv(K,M)},J.prototype.div=function(K){return this.divmod(K,"div",!1).div},J.prototype.mod=function(K){return this.divmod(K,"mod",!1).mod},J.prototype.umod=function(K){return this.divmod(K,"mod",!0).mod},J.prototype.divRound=function(K){var M=this.divmod(K);if(M.mod.isZero())return M.div;var j=M.div.negative!==0?M.mod.isub(K):M.mod,O=K.ushrn(1),R=K.andln(1),F=j.cmp(O);if(F<0||R===1&&F===0)return M.div;return M.div.negative!==0?M.div.isubn(1):M.div.iaddn(1)},J.prototype.modn=function(K){Y(K<=67108863);var M=67108864%K,j=0;for(var O=this.length-1;O>=0;O--)j=(M*j+(this.words[O]|0))%K;return j},J.prototype.idivn=function(K){Y(K<=67108863);var M=0;for(var j=this.length-1;j>=0;j--){var O=(this.words[j]|0)+M*67108864;this.words[j]=O/K|0,M=O%K}return this.strip()},J.prototype.divn=function(K){return this.clone().idivn(K)},J.prototype.egcd=function(K){Y(K.negative===0),Y(!K.isZero());var M=this,j=K.clone();if(M.negative!==0)M=M.umod(K);else M=M.clone();var O=new J(1),R=new J(0),F=new J(0),A=new J(1),T=0;while(M.isEven()&&j.isEven())M.iushrn(1),j.iushrn(1),++T;var V=j.clone(),w=M.clone();while(!M.isZero()){for(var k=0,S=1;(M.words[0]&S)===0&&k<26;++k,S<<=1);if(k>0){M.iushrn(k);while(k-- >0){if(O.isOdd()||R.isOdd())O.iadd(V),R.isub(w);O.iushrn(1),R.iushrn(1)}}for(var y=0,u=1;(j.words[0]&u)===0&&y<26;++y,u<<=1);if(y>0){j.iushrn(y);while(y-- >0){if(F.isOdd()||A.isOdd())F.iadd(V),A.isub(w);F.iushrn(1),A.iushrn(1)}}if(M.cmp(j)>=0)M.isub(j),O.isub(F),R.isub(A);else j.isub(M),F.isub(O),A.isub(R)}return{a:F,b:A,gcd:j.iushln(T)}},J.prototype._invmp=function(K){Y(K.negative===0),Y(!K.isZero());var M=this,j=K.clone();if(M.negative!==0)M=M.umod(K);else M=M.clone();var O=new J(1),R=new J(0),F=j.clone();while(M.cmpn(1)>0&&j.cmpn(1)>0){for(var A=0,T=1;(M.words[0]&T)===0&&A<26;++A,T<<=1);if(A>0){M.iushrn(A);while(A-- >0){if(O.isOdd())O.iadd(F);O.iushrn(1)}}for(var V=0,w=1;(j.words[0]&w)===0&&V<26;++V,w<<=1);if(V>0){j.iushrn(V);while(V-- >0){if(R.isOdd())R.iadd(F);R.iushrn(1)}}if(M.cmp(j)>=0)M.isub(j),O.isub(R);else j.isub(M),R.isub(O)}var k;if(M.cmpn(1)===0)k=O;else k=R;if(k.cmpn(0)<0)k.iadd(K);return k},J.prototype.gcd=function(K){if(this.isZero())return K.abs();if(K.isZero())return this.abs();var M=this.clone(),j=K.clone();M.negative=0,j.negative=0;for(var O=0;M.isEven()&&j.isEven();O++)M.iushrn(1),j.iushrn(1);do{while(M.isEven())M.iushrn(1);while(j.isEven())j.iushrn(1);var R=M.cmp(j);if(R<0){var F=M;M=j,j=F}else if(R===0||j.cmpn(1)===0)break;M.isub(j)}while(!0);return j.iushln(O)},J.prototype.invm=function(K){return this.egcd(K).a.umod(K)},J.prototype.isEven=function(){return(this.words[0]&1)===0},J.prototype.isOdd=function(){return(this.words[0]&1)===1},J.prototype.andln=function(K){return this.words[0]&K},J.prototype.bincn=function(K){Y(typeof K==="number");var M=K%26,j=(K-M)/26,O=1<<M;if(this.length<=j)return this._expand(j+1),this.words[j]|=O,this;var R=O;for(var F=j;R!==0&&F<this.length;F++){var A=this.words[F]|0;A+=R,R=A>>>26,A&=67108863,this.words[F]=A}if(R!==0)this.words[F]=R,this.length++;return this},J.prototype.isZero=function(){return this.length===1&&this.words[0]===0},J.prototype.cmpn=function(K){var M=K<0;if(this.negative!==0&&!M)return-1;if(this.negative===0&&M)return 1;this.strip();var j;if(this.length>1)j=1;else{if(M)K=-K;Y(K<=67108863,"Number is too big");var O=this.words[0]|0;j=O===K?0:O<K?-1:1}if(this.negative!==0)return-j|0;return j},J.prototype.cmp=function(K){if(this.negative!==0&&K.negative===0)return-1;if(this.negative===0&&K.negative!==0)return 1;var M=this.ucmp(K);if(this.negative!==0)return-M|0;return M},J.prototype.ucmp=function(K){if(this.length>K.length)return 1;if(this.length<K.length)return-1;var M=0;for(var j=this.length-1;j>=0;j--){var O=this.words[j]|0,R=K.words[j]|0;if(O===R)continue;if(O<R)M=-1;else if(O>R)M=1;break}return M},J.prototype.gtn=function(K){return this.cmpn(K)===1},J.prototype.gt=function(K){return this.cmp(K)===1},J.prototype.gten=function(K){return this.cmpn(K)>=0},J.prototype.gte=function(K){return this.cmp(K)>=0},J.prototype.ltn=function(K){return this.cmpn(K)===-1},J.prototype.lt=function(K){return this.cmp(K)===-1},J.prototype.lten=function(K){return this.cmpn(K)<=0},J.prototype.lte=function(K){return this.cmp(K)<=0},J.prototype.eqn=function(K){return this.cmpn(K)===0},J.prototype.eq=function(K){return this.cmp(K)===0},J.red=function(K){return new b(K)},J.prototype.toRed=function(K){return Y(!this.red,"Already a number in reduction context"),Y(this.negative===0,"red works only with positives"),K.convertTo(this)._forceRed(K)},J.prototype.fromRed=function(){return Y(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},J.prototype._forceRed=function(K){return this.red=K,this},J.prototype.forceRed=function(K){return Y(!this.red,"Already a number in reduction context"),this._forceRed(K)},J.prototype.redAdd=function(K){return Y(this.red,"redAdd works only with red numbers"),this.red.add(this,K)},J.prototype.redIAdd=function(K){return Y(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,K)},J.prototype.redSub=function(K){return Y(this.red,"redSub works only with red numbers"),this.red.sub(this,K)},J.prototype.redISub=function(K){return Y(this.red,"redISub works only with red numbers"),this.red.isub(this,K)},J.prototype.redShl=function(K){return Y(this.red,"redShl works only with red numbers"),this.red.shl(this,K)},J.prototype.redMul=function(K){return Y(this.red,"redMul works only with red numbers"),this.red._verify2(this,K),this.red.mul(this,K)},J.prototype.redIMul=function(K){return Y(this.red,"redMul works only with red numbers"),this.red._verify2(this,K),this.red.imul(this,K)},J.prototype.redSqr=function(){return Y(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},J.prototype.redISqr=function(){return Y(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},J.prototype.redSqrt=function(){return Y(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},J.prototype.redInvm=function(){return Y(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},J.prototype.redNeg=function(){return Y(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},J.prototype.redPow=function(K){return Y(this.red&&!K.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,K)};var _={k256:null,p224:null,p192:null,p25519:null};function f(K,M){this.name=K,this.p=new J(M,16),this.n=this.p.bitLength(),this.k=new J(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}f.prototype._tmp=function(){var K=new J(null);return K.words=Array(Math.ceil(this.n/13)),K},f.prototype.ireduce=function(K){var M=K,j;do this.split(M,this.tmp),M=this.imulK(M),M=M.iadd(this.tmp),j=M.bitLength();while(j>this.n);var O=j<this.n?-1:M.ucmp(this.p);if(O===0)M.words[0]=0,M.length=1;else if(O>0)M.isub(this.p);else if(M.strip!==void 0)M.strip();else M._strip();return M},f.prototype.split=function(K,M){K.iushrn(this.n,0,M)},f.prototype.imulK=function(K){return K.imul(this.k)};function x(){f.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}z(x,f),x.prototype.split=function(K,M){var j=4194303,O=Math.min(K.length,9);for(var R=0;R<O;R++)M.words[R]=K.words[R];if(M.length=O,K.length<=9){K.words[0]=0,K.length=1;return}var F=K.words[9];M.words[M.length++]=F&j;for(R=10;R<K.length;R++){var A=K.words[R]|0;K.words[R-10]=(A&j)<<4|F>>>22,F=A}if(F>>>=22,K.words[R-10]=F,F===0&&K.length>10)K.length-=10;else K.length-=9},x.prototype.imulK=function(K){K.words[K.length]=0,K.words[K.length+1]=0,K.length+=2;var M=0;for(var j=0;j<K.length;j++){var O=K.words[j]|0;M+=O*977,K.words[j]=M&67108863,M=O*64+(M/67108864|0)}if(K.words[K.length-1]===0){if(K.length--,K.words[K.length-1]===0)K.length--}return K};function g(){f.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}z(g,f);function h(){f.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}z(h,f);function v(){f.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}z(v,f),v.prototype.imulK=function(K){var M=0;for(var j=0;j<K.length;j++){var O=(K.words[j]|0)*19+M,R=O&67108863;O>>>=26,K.words[j]=R,M=O}if(M!==0)K.words[K.length++]=M;return K},J._prime=function(K){if(_[K])return _[K];var M;if(K==="k256")M=new x;else if(K==="p224")M=new g;else if(K==="p192")M=new h;else if(K==="p25519")M=new v;else throw Error("Unknown prime "+K);return _[K]=M,M};function b(K){if(typeof K==="string"){var M=J._prime(K);this.m=M.p,this.prime=M}else Y(K.gtn(1),"modulus must be greater than 1"),this.m=K,this.prime=null}b.prototype._verify1=function(K){Y(K.negative===0,"red works only with positives"),Y(K.red,"red works only with red numbers")},b.prototype._verify2=function(K,M){Y((K.negative|M.negative)===0,"red works only with positives"),Y(K.red&&K.red===M.red,"red works only with red numbers")},b.prototype.imod=function(K){if(this.prime)return this.prime.ireduce(K)._forceRed(this);return K.umod(this.m)._forceRed(this)},b.prototype.neg=function(K){if(K.isZero())return K.clone();return this.m.sub(K)._forceRed(this)},b.prototype.add=function(K,M){this._verify2(K,M);var j=K.add(M);if(j.cmp(this.m)>=0)j.isub(this.m);return j._forceRed(this)},b.prototype.iadd=function(K,M){this._verify2(K,M);var j=K.iadd(M);if(j.cmp(this.m)>=0)j.isub(this.m);return j},b.prototype.sub=function(K,M){this._verify2(K,M);var j=K.sub(M);if(j.cmpn(0)<0)j.iadd(this.m);return j._forceRed(this)},b.prototype.isub=function(K,M){this._verify2(K,M);var j=K.isub(M);if(j.cmpn(0)<0)j.iadd(this.m);return j},b.prototype.shl=function(K,M){return this._verify1(K),this.imod(K.ushln(M))},b.prototype.imul=function(K,M){return this._verify2(K,M),this.imod(K.imul(M))},b.prototype.mul=function(K,M){return this._verify2(K,M),this.imod(K.mul(M))},b.prototype.isqr=function(K){return this.imul(K,K.clone())},b.prototype.sqr=function(K){return this.mul(K,K)},b.prototype.sqrt=function(K){if(K.isZero())return K.clone();var M=this.m.andln(3);if(Y(M%2===1),M===3){var j=this.m.add(new J(1)).iushrn(2);return this.pow(K,j)}var O=this.m.subn(1),R=0;while(!O.isZero()&&O.andln(1)===0)R++,O.iushrn(1);Y(!O.isZero());var F=new J(1).toRed(this),A=F.redNeg(),T=this.m.subn(1).iushrn(1),V=this.m.bitLength();V=new J(2*V*V).toRed(this);while(this.pow(V,T).cmp(A)!==0)V.redIAdd(A);var w=this.pow(V,O),k=this.pow(K,O.addn(1).iushrn(1)),S=this.pow(K,O),y=R;while(S.cmp(F)!==0){var u=S;for(var c=0;u.cmp(F)!==0;c++)u=u.redSqr();Y(c<y);var o=this.pow(w,new J(1).iushln(y-c-1));k=k.redMul(o),w=o.redSqr(),S=S.redMul(w),y=c}return k},b.prototype.invm=function(K){var M=K._invmp(this.m);if(M.negative!==0)return M.negative=0,this.imod(M).redNeg();else return this.imod(M)},b.prototype.pow=function(K,M){if(M.isZero())return new J(1).toRed(this);if(M.cmpn(1)===0)return K.clone();var j=4,O=Array(1<<j);O[0]=new J(1).toRed(this),O[1]=K;for(var R=2;R<O.length;R++)O[R]=this.mul(O[R-1],K);var F=O[0],A=0,T=0,V=M.bitLength()%26;if(V===0)V=26;for(R=M.length-1;R>=0;R--){var w=M.words[R];for(var k=V-1;k>=0;k--){var S=w>>k&1;if(F!==O[0])F=this.sqr(F);if(S===0&&A===0){T=0;continue}if(A<<=1,A|=S,T++,T!==j&&(R!==0||k!==0))continue;F=this.mul(F,O[A]),T=0,A=0}V=26}return F},b.prototype.convertTo=function(K){var M=K.umod(this.m);return M===K?M.clone():M},b.prototype.convertFrom=function(K){var M=K.clone();return M.red=null,M},J.mont=function(K){return new m(K)};function m(K){if(b.call(this,K),this.shift=this.m.bitLength(),this.shift%26!==0)this.shift+=26-this.shift%26;this.r=new J(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}z(m,b),m.prototype.convertTo=function(K){return this.imod(K.ushln(this.shift))},m.prototype.convertFrom=function(K){var M=this.imod(K.mul(this.rinv));return M.red=null,M},m.prototype.imul=function(K,M){if(K.isZero()||M.isZero())return K.words[0]=0,K.length=1,K;var j=K.imul(M),O=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=j.isub(O).iushrn(this.shift),F=R;if(R.cmp(this.m)>=0)F=R.isub(this.m);else if(R.cmpn(0)<0)F=R.iadd(this.m);return F._forceRed(this)},m.prototype.mul=function(K,M){if(K.isZero()||M.isZero())return new J(0)._forceRed(this);var j=K.mul(M),O=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=j.isub(O).iushrn(this.shift),F=R;if(R.cmp(this.m)>=0)F=R.isub(this.m);else if(R.cmpn(0)<0)F=R.iadd(this.m);return F._forceRed(this)},m.prototype.invm=function(K){var M=this.imod(K._invmp(this.m).mul(this.r2));return M._forceRed(this)}})(typeof Q>"u"||Q,$)}),oX=A0(($,Q)=>{Q.exports=Z;function Z(X,Y){if(!X)throw Error(Y||"Assertion failed")}Z.equal=function(X,Y,z){if(X!=Y)throw Error(z||"Assertion failed: "+X+" != "+Y)}}),Ed=A0(($)=>{var Q=$;function Z(z,J){if(Array.isArray(z))return z.slice();if(!z)return[];var q=[];if(typeof z!=="string"){for(var W=0;W<z.length;W++)q[W]=z[W]|0;return q}if(J==="hex"){if(z=z.replace(/[^a-z0-9]+/ig,""),z.length%2!==0)z="0"+z;for(var W=0;W<z.length;W+=2)q.push(parseInt(z[W]+z[W+1],16))}else for(var W=0;W<z.length;W++){var G=z.charCodeAt(W),U=G>>8,D=G&255;if(U)q.push(U,D);else q.push(D)}return q}Q.toArray=Z;function X(z){if(z.length===1)return"0"+z;else return z}Q.zero2=X;function Y(z){var J="";for(var q=0;q<z.length;q++)J+=X(z[q].toString(16));return J}Q.toHex=Y,Q.encode=function(z,J){if(J==="hex")return Y(z);else return z}}),_7=A0(($)=>{var Q=$,Z=dQ(),X=oX(),Y=Ed();Q.assert=X,Q.toArray=Y.toArray,Q.zero2=Y.zero2,Q.toHex=Y.toHex,Q.encode=Y.encode;function z(U,D,P){var H=Array(Math.max(U.bitLength(),P)+1),N;for(N=0;N<H.length;N+=1)H[N]=0;var C=1<<D+1,L=U.clone();for(N=0;N<H.length;N++){var B,E=L.andln(C-1);if(L.isOdd()){if(E>(C>>1)-1)B=(C>>1)-E;else B=E;L.isubn(B)}else B=0;H[N]=B,L.iushrn(1)}return H}Q.getNAF=z;function J(U,D){var P=[[],[]];U=U.clone(),D=D.clone();var H=0,N=0,C;while(U.cmpn(-H)>0||D.cmpn(-N)>0){var L=U.andln(3)+H&3,B=D.andln(3)+N&3;if(L===3)L=-1;if(B===3)B=-1;var E;if((L&1)===0)E=0;else if(C=U.andln(7)+H&7,(C===3||C===5)&&B===2)E=-L;else E=L;P[0].push(E);var I;if((B&1)===0)I=0;else if(C=D.andln(7)+N&7,(C===3||C===5)&&L===2)I=-B;else I=B;if(P[1].push(I),2*H===E+1)H=1-H;if(2*N===I+1)N=1-N;U.iushrn(1),D.iushrn(1)}return P}Q.getJSF=J;function q(U,D,P){var H="_"+D;U.prototype[D]=function(){return this[H]!==void 0?this[H]:this[H]=P.call(this)}}Q.cachedProperty=q;function W(U){return typeof U==="string"?Q.toArray(U,"hex"):U}Q.parseBytes=W;function G(U){return new Z(U,"hex","le")}Q.intFromLE=G}),Id=A0(($,Q)=>{var Z;Q.exports=function(z){if(!Z)Z=new X(null);return Z.generate(z)};function X(z){this.rand=z}if(Q.exports.Rand=X,X.prototype.generate=function(z){return this._rand(z)},X.prototype._rand=function(z){if(this.rand.getBytes)return this.rand.getBytes(z);var J=new Uint8Array(z);for(var q=0;q<J.length;q++)J[q]=this.rand.getByte();return J},typeof self==="object"){if(self.crypto&&self.crypto.getRandomValues)X.prototype._rand=function(z){var J=new Uint8Array(z);return self.crypto.getRandomValues(J),J};else if(self.msCrypto&&self.msCrypto.getRandomValues)X.prototype._rand=function(z){var J=new Uint8Array(z);return self.msCrypto.getRandomValues(J),J};else if(typeof window==="object")X.prototype._rand=function(){throw Error("Not implemented yet")}}else try{if(Y=(E9(),Q5(O9)),typeof Y.randomBytes!=="function")throw Error("Not supported");X.prototype._rand=function(z){return Y.randomBytes(z)}}catch(z){}var Y}),kj=A0(($,Q)=>{var Z=dQ(),X=_7(),Y=X.getNAF,z=X.getJSF,J=X.assert;function q(G,U){this.type=G,this.p=new Z(U.p,16),this.red=U.prime?Z.red(U.prime):Z.mont(this.p),this.zero=new Z(0).toRed(this.red),this.one=new Z(1).toRed(this.red),this.two=new Z(2).toRed(this.red),this.n=U.n&&new Z(U.n,16),this.g=U.g&&this.pointFromJSON(U.g,U.gRed),this._wnafT1=[,,,,],this._wnafT2=[,,,,],this._wnafT3=[,,,,],this._wnafT4=[,,,,],this._bitLength=this.n?this.n.bitLength():0;var D=this.n&&this.p.div(this.n);if(!D||D.cmpn(100)>0)this.redN=null;else this._maxwellTrick=!0,this.redN=this.n.toRed(this.red)}Q.exports=q,q.prototype.point=function(){throw Error("Not implemented")},q.prototype.validate=function(){throw Error("Not implemented")},q.prototype._fixedNafMul=function(G,U){J(G.precomputed);var D=G._getDoubles(),P=Y(U,1,this._bitLength),H=(1<<D.step+1)-(D.step%2===0?2:1);H/=3;var N=[],C,L;for(C=0;C<P.length;C+=D.step){L=0;for(var B=C+D.step-1;B>=C;B--)L=(L<<1)+P[B];N.push(L)}var E=this.jpoint(null,null,null),I=this.jpoint(null,null,null);for(var _=H;_>0;_--){for(C=0;C<N.length;C++)if(L=N[C],L===_)I=I.mixedAdd(D.points[C]);else if(L===-_)I=I.mixedAdd(D.points[C].neg());E=E.add(I)}return E.toP()},q.prototype._wnafMul=function(G,U){var D=4,P=G._getNAFPoints(D);D=P.wnd;var H=P.points,N=Y(U,D,this._bitLength),C=this.jpoint(null,null,null);for(var L=N.length-1;L>=0;L--){for(var B=0;L>=0&&N[L]===0;L--)B++;if(L>=0)B++;if(C=C.dblp(B),L<0)break;var E=N[L];if(J(E!==0),G.type==="affine")if(E>0)C=C.mixedAdd(H[E-1>>1]);else C=C.mixedAdd(H[-E-1>>1].neg());else if(E>0)C=C.add(H[E-1>>1]);else C=C.add(H[-E-1>>1].neg())}return G.type==="affine"?C.toP():C},q.prototype._wnafMulAdd=function(G,U,D,P,H){var N=this._wnafT1,C=this._wnafT2,L=this._wnafT3,B=0,E,I,_;for(E=0;E<P;E++){_=U[E];var f=_._getNAFPoints(G);N[E]=f.wnd,C[E]=f.points}for(E=P-1;E>=1;E-=2){var x=E-1,g=E;if(N[x]!==1||N[g]!==1){L[x]=Y(D[x],N[x],this._bitLength),L[g]=Y(D[g],N[g],this._bitLength),B=Math.max(L[x].length,B),B=Math.max(L[g].length,B);continue}var h=[U[x],null,null,U[g]];if(U[x].y.cmp(U[g].y)===0)h[1]=U[x].add(U[g]),h[2]=U[x].toJ().mixedAdd(U[g].neg());else if(U[x].y.cmp(U[g].y.redNeg())===0)h[1]=U[x].toJ().mixedAdd(U[g]),h[2]=U[x].add(U[g].neg());else h[1]=U[x].toJ().mixedAdd(U[g]),h[2]=U[x].toJ().mixedAdd(U[g].neg());var v=[-3,-1,-5,-7,0,7,5,1,3],b=z(D[x],D[g]);B=Math.max(b[0].length,B),L[x]=Array(B),L[g]=Array(B);for(I=0;I<B;I++){var m=b[0][I]|0,K=b[1][I]|0;L[x][I]=v[(m+1)*3+(K+1)],L[g][I]=0,C[x]=h}}var M=this.jpoint(null,null,null),j=this._wnafT4;for(E=B;E>=0;E--){var O=0;while(E>=0){var R=!0;for(I=0;I<P;I++)if(j[I]=L[I][E]|0,j[I]!==0)R=!1;if(!R)break;O++,E--}if(E>=0)O++;if(M=M.dblp(O),E<0)break;for(I=0;I<P;I++){var F=j[I];if(F===0)continue;else if(F>0)_=C[I][F-1>>1];else if(F<0)_=C[I][-F-1>>1].neg();if(_.type==="affine")M=M.mixedAdd(_);else M=M.add(_)}}for(E=0;E<P;E++)C[E]=null;if(H)return M;else return M.toP()};function W(G,U){this.curve=G,this.type=U,this.precomputed=null}q.BasePoint=W,W.prototype.eq=function(){throw Error("Not implemented")},W.prototype.validate=function(){return this.curve.validate(this)},q.prototype.decodePoint=function(G,U){G=X.toArray(G,U);var D=this.p.byteLength();if((G[0]===4||G[0]===6||G[0]===7)&&G.length-1===2*D){if(G[0]===6)J(G[G.length-1]%2===0);else if(G[0]===7)J(G[G.length-1]%2===1);var P=this.point(G.slice(1,1+D),G.slice(1+D,1+2*D));return P}else if((G[0]===2||G[0]===3)&&G.length-1===D)return this.pointFromX(G.slice(1,1+D),G[0]===3);throw Error("Unknown point format")},W.prototype.encodeCompressed=function(G){return this.encode(G,!0)},W.prototype._encode=function(G){var U=this.curve.p.byteLength(),D=this.getX().toArray("be",U);if(G)return[this.getY().isEven()?2:3].concat(D);return[4].concat(D,this.getY().toArray("be",U))},W.prototype.encode=function(G,U){return X.encode(this._encode(U),G)},W.prototype.precompute=function(G){if(this.precomputed)return this;var U={doubles:null,naf:null,beta:null};return U.naf=this._getNAFPoints(8),U.doubles=this._getDoubles(4,G),U.beta=this._getBeta(),this.precomputed=U,this},W.prototype._hasDoubles=function(G){if(!this.precomputed)return!1;var U=this.precomputed.doubles;if(!U)return!1;return U.points.length>=Math.ceil((G.bitLength()+1)/U.step)},W.prototype._getDoubles=function(G,U){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;var D=[this],P=this;for(var H=0;H<U;H+=G){for(var N=0;N<G;N++)P=P.dbl();D.push(P)}return{step:G,points:D}},W.prototype._getNAFPoints=function(G){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;var U=[this],D=(1<<G)-1,P=D===1?null:this.dbl();for(var H=1;H<D;H++)U[H]=U[H-1].add(P);return{wnd:G,points:U}},W.prototype._getBeta=function(){return null},W.prototype.dblp=function(G){var U=this;for(var D=0;D<G;D++)U=U.dbl();return U}}),jG0=A0(($,Q)=>{if(typeof Object.create==="function")Q.exports=function(Z,X){if(X)Z.super_=X,Z.prototype=Object.create(X.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}})};else Q.exports=function(Z,X){if(X){Z.super_=X;var Y=function(){};Y.prototype=X.prototype,Z.prototype=new Y,Z.prototype.constructor=Z}}}),B4=A0(($,Q)=>{try{if(Z=(Jd(),Q5(Yd)),typeof Z.inherits!=="function")throw"";Q.exports=Z.inherits}catch(X){Q.exports=jG0()}var Z}),RG0=A0(($,Q)=>{var Z=_7(),X=dQ(),Y=B4(),z=kj(),J=Z.assert;function q(U){z.call(this,"short",U),this.a=new X(U.a,16).toRed(this.red),this.b=new X(U.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(U),this._endoWnafT1=[,,,,],this._endoWnafT2=[,,,,]}Y(q,z),Q.exports=q,q.prototype._getEndomorphism=function(U){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;var D,P;if(U.beta)D=new X(U.beta,16).toRed(this.red);else{var H=this._getEndoRoots(this.p);D=H[0].cmp(H[1])<0?H[0]:H[1],D=D.toRed(this.red)}if(U.lambda)P=new X(U.lambda,16);else{var N=this._getEndoRoots(this.n);if(this.g.mul(N[0]).x.cmp(this.g.x.redMul(D))===0)P=N[0];else P=N[1],J(this.g.mul(P).x.cmp(this.g.x.redMul(D))===0)}var C;if(U.basis)C=U.basis.map(function(L){return{a:new X(L.a,16),b:new X(L.b,16)}});else C=this._getEndoBasis(P);return{beta:D,lambda:P,basis:C}},q.prototype._getEndoRoots=function(U){var D=U===this.p?this.red:X.mont(U),P=new X(2).toRed(D).redInvm(),H=P.redNeg(),N=new X(3).toRed(D).redNeg().redSqrt().redMul(P),C=H.redAdd(N).fromRed(),L=H.redSub(N).fromRed();return[C,L]},q.prototype._getEndoBasis=function(U){var D=this.n.ushrn(Math.floor(this.n.bitLength()/2)),P=U,H=this.n.clone(),N=new X(1),C=new X(0),L=new X(0),B=new X(1),E,I,_,f,x,g,h,v=0,b,m;while(P.cmpn(0)!==0){var K=H.div(P);b=H.sub(K.mul(P)),m=L.sub(K.mul(N));var M=B.sub(K.mul(C));if(!_&&b.cmp(D)<0)E=h.neg(),I=N,_=b.neg(),f=m;else if(_&&++v===2)break;h=b,H=P,P=b,L=N,N=m,B=C,C=M}x=b.neg(),g=m;var j=_.sqr().add(f.sqr()),O=x.sqr().add(g.sqr());if(O.cmp(j)>=0)x=E,g=I;if(_.negative)_=_.neg(),f=f.neg();if(x.negative)x=x.neg(),g=g.neg();return[{a:_,b:f},{a:x,b:g}]},q.prototype._endoSplit=function(U){var D=this.endo.basis,P=D[0],H=D[1],N=H.b.mul(U).divRound(this.n),C=P.b.neg().mul(U).divRound(this.n),L=N.mul(P.a),B=C.mul(H.a),E=N.mul(P.b),I=C.mul(H.b),_=U.sub(L).sub(B),f=E.add(I).neg();return{k1:_,k2:f}},q.prototype.pointFromX=function(U,D){if(U=new X(U,16),!U.red)U=U.toRed(this.red);var P=U.redSqr().redMul(U).redIAdd(U.redMul(this.a)).redIAdd(this.b),H=P.redSqrt();if(H.redSqr().redSub(P).cmp(this.zero)!==0)throw Error("invalid point");var N=H.fromRed().isOdd();if(D&&!N||!D&&N)H=H.redNeg();return this.point(U,H)},q.prototype.validate=function(U){if(U.inf)return!0;var{x:D,y:P}=U,H=this.a.redMul(D),N=D.redSqr().redMul(D).redIAdd(H).redIAdd(this.b);return P.redSqr().redISub(N).cmpn(0)===0},q.prototype._endoWnafMulAdd=function(U,D,P){var H=this._endoWnafT1,N=this._endoWnafT2;for(var C=0;C<U.length;C++){var L=this._endoSplit(D[C]),B=U[C],E=B._getBeta();if(L.k1.negative)L.k1.ineg(),B=B.neg(!0);if(L.k2.negative)L.k2.ineg(),E=E.neg(!0);H[C*2]=B,H[C*2+1]=E,N[C*2]=L.k1,N[C*2+1]=L.k2}var I=this._wnafMulAdd(1,H,N,C*2,P);for(var _=0;_<C*2;_++)H[_]=null,N[_]=null;return I};function W(U,D,P,H){if(z.BasePoint.call(this,U,"affine"),D===null&&P===null)this.x=null,this.y=null,this.inf=!0;else{if(this.x=new X(D,16),this.y=new X(P,16),H)this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);this.inf=!1}}Y(W,z.BasePoint),q.prototype.point=function(U,D,P){return new W(this,U,D,P)},q.prototype.pointFromJSON=function(U,D){return W.fromJSON(this,U,D)},W.prototype._getBeta=function(){if(!this.curve.endo)return;var U=this.precomputed;if(U&&U.beta)return U.beta;var D=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(U){var P=this.curve,H=function(N){return P.point(N.x.redMul(P.endo.beta),N.y)};U.beta=D,D.precomputed={beta:null,naf:U.naf&&{wnd:U.naf.wnd,points:U.naf.points.map(H)},doubles:U.doubles&&{step:U.doubles.step,points:U.doubles.points.map(H)}}}return D},W.prototype.toJSON=function(){if(!this.precomputed)return[this.x,this.y];return[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]},W.fromJSON=function(U,D,P){if(typeof D==="string")D=JSON.parse(D);var H=U.point(D[0],D[1],P);if(!D[2])return H;function N(L){return U.point(L[0],L[1],P)}var C=D[2];return H.precomputed={beta:null,doubles:C.doubles&&{step:C.doubles.step,points:[H].concat(C.doubles.points.map(N))},naf:C.naf&&{wnd:C.naf.wnd,points:[H].concat(C.naf.points.map(N))}},H},W.prototype.inspect=function(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},W.prototype.isInfinity=function(){return this.inf},W.prototype.add=function(U){if(this.inf)return U;if(U.inf)return this;if(this.eq(U))return this.dbl();if(this.neg().eq(U))return this.curve.point(null,null);if(this.x.cmp(U.x)===0)return this.curve.point(null,null);var D=this.y.redSub(U.y);if(D.cmpn(0)!==0)D=D.redMul(this.x.redSub(U.x).redInvm());var P=D.redSqr().redISub(this.x).redISub(U.x),H=D.redMul(this.x.redSub(P)).redISub(this.y);return this.curve.point(P,H)},W.prototype.dbl=function(){if(this.inf)return this;var U=this.y.redAdd(this.y);if(U.cmpn(0)===0)return this.curve.point(null,null);var D=this.curve.a,P=this.x.redSqr(),H=U.redInvm(),N=P.redAdd(P).redIAdd(P).redIAdd(D).redMul(H),C=N.redSqr().redISub(this.x.redAdd(this.x)),L=N.redMul(this.x.redSub(C)).redISub(this.y);return this.curve.point(C,L)},W.prototype.getX=function(){return this.x.fromRed()},W.prototype.getY=function(){return this.y.fromRed()},W.prototype.mul=function(U){if(U=new X(U,16),this.isInfinity())return this;else if(this._hasDoubles(U))return this.curve._fixedNafMul(this,U);else if(this.curve.endo)return this.curve._endoWnafMulAdd([this],[U]);else return this.curve._wnafMul(this,U)},W.prototype.mulAdd=function(U,D,P){var H=[this,D],N=[U,P];if(this.curve.endo)return this.curve._endoWnafMulAdd(H,N);else return this.curve._wnafMulAdd(1,H,N,2)},W.prototype.jmulAdd=function(U,D,P){var H=[this,D],N=[U,P];if(this.curve.endo)return this.curve._endoWnafMulAdd(H,N,!0);else return this.curve._wnafMulAdd(1,H,N,2,!0)},W.prototype.eq=function(U){return this===U||this.inf===U.inf&&(this.inf||this.x.cmp(U.x)===0&&this.y.cmp(U.y)===0)},W.prototype.neg=function(U){if(this.inf)return this;var D=this.curve.point(this.x,this.y.redNeg());if(U&&this.precomputed){var P=this.precomputed,H=function(N){return N.neg()};D.precomputed={naf:P.naf&&{wnd:P.naf.wnd,points:P.naf.points.map(H)},doubles:P.doubles&&{step:P.doubles.step,points:P.doubles.points.map(H)}}}return D},W.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var U=this.curve.jpoint(this.x,this.y,this.curve.one);return U};function G(U,D,P,H){if(z.BasePoint.call(this,U,"jacobian"),D===null&&P===null&&H===null)this.x=this.curve.one,this.y=this.curve.one,this.z=new X(0);else this.x=new X(D,16),this.y=new X(P,16),this.z=new X(H,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);this.zOne=this.z===this.curve.one}Y(G,z.BasePoint),q.prototype.jpoint=function(U,D,P){return new G(this,U,D,P)},G.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var U=this.z.redInvm(),D=U.redSqr(),P=this.x.redMul(D),H=this.y.redMul(D).redMul(U);return this.curve.point(P,H)},G.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},G.prototype.add=function(U){if(this.isInfinity())return U;if(U.isInfinity())return this;var D=U.z.redSqr(),P=this.z.redSqr(),H=this.x.redMul(D),N=U.x.redMul(P),C=this.y.redMul(D.redMul(U.z)),L=U.y.redMul(P.redMul(this.z)),B=H.redSub(N),E=C.redSub(L);if(B.cmpn(0)===0)if(E.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl();var I=B.redSqr(),_=I.redMul(B),f=H.redMul(I),x=E.redSqr().redIAdd(_).redISub(f).redISub(f),g=E.redMul(f.redISub(x)).redISub(C.redMul(_)),h=this.z.redMul(U.z).redMul(B);return this.curve.jpoint(x,g,h)},G.prototype.mixedAdd=function(U){if(this.isInfinity())return U.toJ();if(U.isInfinity())return this;var D=this.z.redSqr(),P=this.x,H=U.x.redMul(D),N=this.y,C=U.y.redMul(D).redMul(this.z),L=P.redSub(H),B=N.redSub(C);if(L.cmpn(0)===0)if(B.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl();var E=L.redSqr(),I=E.redMul(L),_=P.redMul(E),f=B.redSqr().redIAdd(I).redISub(_).redISub(_),x=B.redMul(_.redISub(f)).redISub(N.redMul(I)),g=this.z.redMul(L);return this.curve.jpoint(f,x,g)},G.prototype.dblp=function(U){if(U===0)return this;if(this.isInfinity())return this;if(!U)return this.dbl();var D;if(this.curve.zeroA||this.curve.threeA){var P=this;for(D=0;D<U;D++)P=P.dbl();return P}var H=this.curve.a,N=this.curve.tinv,C=this.x,L=this.y,B=this.z,E=B.redSqr().redSqr(),I=L.redAdd(L);for(D=0;D<U;D++){var _=C.redSqr(),f=I.redSqr(),x=f.redSqr(),g=_.redAdd(_).redIAdd(_).redIAdd(H.redMul(E)),h=C.redMul(f),v=g.redSqr().redISub(h.redAdd(h)),b=h.redISub(v),m=g.redMul(b);m=m.redIAdd(m).redISub(x);var K=I.redMul(B);if(D+1<U)E=E.redMul(x);C=v,B=K,I=m}return this.curve.jpoint(C,I.redMul(N),B)},G.prototype.dbl=function(){if(this.isInfinity())return this;if(this.curve.zeroA)return this._zeroDbl();else if(this.curve.threeA)return this._threeDbl();else return this._dbl()},G.prototype._zeroDbl=function(){var U,D,P;if(this.zOne){var H=this.x.redSqr(),N=this.y.redSqr(),C=N.redSqr(),L=this.x.redAdd(N).redSqr().redISub(H).redISub(C);L=L.redIAdd(L);var B=H.redAdd(H).redIAdd(H),E=B.redSqr().redISub(L).redISub(L),I=C.redIAdd(C);I=I.redIAdd(I),I=I.redIAdd(I),U=E,D=B.redMul(L.redISub(E)).redISub(I),P=this.y.redAdd(this.y)}else{var _=this.x.redSqr(),f=this.y.redSqr(),x=f.redSqr(),g=this.x.redAdd(f).redSqr().redISub(_).redISub(x);g=g.redIAdd(g);var h=_.redAdd(_).redIAdd(_),v=h.redSqr(),b=x.redIAdd(x);b=b.redIAdd(b),b=b.redIAdd(b),U=v.redISub(g).redISub(g),D=h.redMul(g.redISub(U)).redISub(b),P=this.y.redMul(this.z),P=P.redIAdd(P)}return this.curve.jpoint(U,D,P)},G.prototype._threeDbl=function(){var U,D,P;if(this.zOne){var H=this.x.redSqr(),N=this.y.redSqr(),C=N.redSqr(),L=this.x.redAdd(N).redSqr().redISub(H).redISub(C);L=L.redIAdd(L);var B=H.redAdd(H).redIAdd(H).redIAdd(this.curve.a),E=B.redSqr().redISub(L).redISub(L);U=E;var I=C.redIAdd(C);I=I.redIAdd(I),I=I.redIAdd(I),D=B.redMul(L.redISub(E)).redISub(I),P=this.y.redAdd(this.y)}else{var _=this.z.redSqr(),f=this.y.redSqr(),x=this.x.redMul(f),g=this.x.redSub(_).redMul(this.x.redAdd(_));g=g.redAdd(g).redIAdd(g);var h=x.redIAdd(x);h=h.redIAdd(h);var v=h.redAdd(h);U=g.redSqr().redISub(v),P=this.y.redAdd(this.z).redSqr().redISub(f).redISub(_);var b=f.redSqr();b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b),D=g.redMul(h.redISub(U)).redISub(b)}return this.curve.jpoint(U,D,P)},G.prototype._dbl=function(){var U=this.curve.a,D=this.x,P=this.y,H=this.z,N=H.redSqr().redSqr(),C=D.redSqr(),L=P.redSqr(),B=C.redAdd(C).redIAdd(C).redIAdd(U.redMul(N)),E=D.redAdd(D);E=E.redIAdd(E);var I=E.redMul(L),_=B.redSqr().redISub(I.redAdd(I)),f=I.redISub(_),x=L.redSqr();x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var g=B.redMul(f).redISub(x),h=P.redAdd(P).redMul(H);return this.curve.jpoint(_,g,h)},G.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var U=this.x.redSqr(),D=this.y.redSqr(),P=this.z.redSqr(),H=D.redSqr(),N=U.redAdd(U).redIAdd(U),C=N.redSqr(),L=this.x.redAdd(D).redSqr().redISub(U).redISub(H);L=L.redIAdd(L),L=L.redAdd(L).redIAdd(L),L=L.redISub(C);var B=L.redSqr(),E=H.redIAdd(H);E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E);var I=N.redIAdd(L).redSqr().redISub(C).redISub(B).redISub(E),_=D.redMul(I);_=_.redIAdd(_),_=_.redIAdd(_);var f=this.x.redMul(B).redISub(_);f=f.redIAdd(f),f=f.redIAdd(f);var x=this.y.redMul(I.redMul(E.redISub(I)).redISub(L.redMul(B)));x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var g=this.z.redAdd(L).redSqr().redISub(P).redISub(B);return this.curve.jpoint(f,x,g)},G.prototype.mul=function(U,D){return U=new X(U,D),this.curve._wnafMul(this,U)},G.prototype.eq=function(U){if(U.type==="affine")return this.eq(U.toJ());if(this===U)return!0;var D=this.z.redSqr(),P=U.z.redSqr();if(this.x.redMul(P).redISub(U.x.redMul(D)).cmpn(0)!==0)return!1;var H=D.redMul(this.z),N=P.redMul(U.z);return this.y.redMul(N).redISub(U.y.redMul(H)).cmpn(0)===0},G.prototype.eqXToP=function(U){var D=this.z.redSqr(),P=U.toRed(this.curve.red).redMul(D);if(this.x.cmp(P)===0)return!0;var H=U.clone(),N=this.curve.redN.redMul(D);for(;;){if(H.iadd(this.curve.n),H.cmp(this.curve.p)>=0)return!1;if(P.redIAdd(N),this.x.cmp(P)===0)return!0}},G.prototype.inspect=function(){if(this.isInfinity())return"<EC JPoint Infinity>";return"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},G.prototype.isInfinity=function(){return this.z.cmpn(0)===0}}),NG0=A0(($,Q)=>{var Z=dQ(),X=B4(),Y=kj(),z=_7();function J(W){Y.call(this,"mont",W),this.a=new Z(W.a,16).toRed(this.red),this.b=new Z(W.b,16).toRed(this.red),this.i4=new Z(4).toRed(this.red).redInvm(),this.two=new Z(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}X(J,Y),Q.exports=J,J.prototype.validate=function(W){var G=W.normalize().x,U=G.redSqr(),D=U.redMul(G).redAdd(U.redMul(this.a)).redAdd(G),P=D.redSqrt();return P.redSqr().cmp(D)===0};function q(W,G,U){if(Y.BasePoint.call(this,W,"projective"),G===null&&U===null)this.x=this.curve.one,this.z=this.curve.zero;else{if(this.x=new Z(G,16),this.z=new Z(U,16),!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red)}}X(q,Y.BasePoint),J.prototype.decodePoint=function(W,G){return this.point(z.toArray(W,G),1)},J.prototype.point=function(W,G){return new q(this,W,G)},J.prototype.pointFromJSON=function(W){return q.fromJSON(this,W)},q.prototype.precompute=function(){},q.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},q.fromJSON=function(W,G){return new q(W,G[0],G[1]||W.one)},q.prototype.inspect=function(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},q.prototype.isInfinity=function(){return this.z.cmpn(0)===0},q.prototype.dbl=function(){var W=this.x.redAdd(this.z),G=W.redSqr(),U=this.x.redSub(this.z),D=U.redSqr(),P=G.redSub(D),H=G.redMul(D),N=P.redMul(D.redAdd(this.curve.a24.redMul(P)));return this.curve.point(H,N)},q.prototype.add=function(){throw Error("Not supported on Montgomery curve")},q.prototype.diffAdd=function(W,G){var U=this.x.redAdd(this.z),D=this.x.redSub(this.z),P=W.x.redAdd(W.z),H=W.x.redSub(W.z),N=H.redMul(U),C=P.redMul(D),L=G.z.redMul(N.redAdd(C).redSqr()),B=G.x.redMul(N.redISub(C).redSqr());return this.curve.point(L,B)},q.prototype.mul=function(W){var G=W.clone(),U=this,D=this.curve.point(null,null),P=this;for(var H=[];G.cmpn(0)!==0;G.iushrn(1))H.push(G.andln(1));for(var N=H.length-1;N>=0;N--)if(H[N]===0)U=U.diffAdd(D,P),D=D.dbl();else D=U.diffAdd(D,P),U=U.dbl();return D},q.prototype.mulAdd=function(){throw Error("Not supported on Montgomery curve")},q.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve")},q.prototype.eq=function(W){return this.getX().cmp(W.getX())===0},q.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},q.prototype.getX=function(){return this.normalize(),this.x.fromRed()}}),CG0=A0(($,Q)=>{var Z=_7(),X=dQ(),Y=B4(),z=kj(),J=Z.assert;function q(G){this.twisted=(G.a|0)!==1,this.mOneA=this.twisted&&(G.a|0)===-1,this.extended=this.mOneA,z.call(this,"edwards",G),this.a=new X(G.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new X(G.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new X(G.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),J(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(G.c|0)===1}Y(q,z),Q.exports=q,q.prototype._mulA=function(G){if(this.mOneA)return G.redNeg();else return this.a.redMul(G)},q.prototype._mulC=function(G){if(this.oneC)return G;else return this.c.redMul(G)},q.prototype.jpoint=function(G,U,D,P){return this.point(G,U,D,P)},q.prototype.pointFromX=function(G,U){if(G=new X(G,16),!G.red)G=G.toRed(this.red);var D=G.redSqr(),P=this.c2.redSub(this.a.redMul(D)),H=this.one.redSub(this.c2.redMul(this.d).redMul(D)),N=P.redMul(H.redInvm()),C=N.redSqrt();if(C.redSqr().redSub(N).cmp(this.zero)!==0)throw Error("invalid point");var L=C.fromRed().isOdd();if(U&&!L||!U&&L)C=C.redNeg();return this.point(G,C)},q.prototype.pointFromY=function(G,U){if(G=new X(G,16),!G.red)G=G.toRed(this.red);var D=G.redSqr(),P=D.redSub(this.c2),H=D.redMul(this.d).redMul(this.c2).redSub(this.a),N=P.redMul(H.redInvm());if(N.cmp(this.zero)===0)if(U)throw Error("invalid point");else return this.point(this.zero,G);var C=N.redSqrt();if(C.redSqr().redSub(N).cmp(this.zero)!==0)throw Error("invalid point");if(C.fromRed().isOdd()!==U)C=C.redNeg();return this.point(C,G)},q.prototype.validate=function(G){if(G.isInfinity())return!0;G.normalize();var U=G.x.redSqr(),D=G.y.redSqr(),P=U.redMul(this.a).redAdd(D),H=this.c2.redMul(this.one.redAdd(this.d.redMul(U).redMul(D)));return P.cmp(H)===0};function W(G,U,D,P,H){if(z.BasePoint.call(this,G,"projective"),U===null&&D===null&&P===null)this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0;else{if(this.x=new X(U,16),this.y=new X(D,16),this.z=P?new X(P,16):this.curve.one,this.t=H&&new X(H,16),!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);if(this.t&&!this.t.red)this.t=this.t.toRed(this.curve.red);if(this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t){if(this.t=this.x.redMul(this.y),!this.zOne)this.t=this.t.redMul(this.z.redInvm())}}}Y(W,z.BasePoint),q.prototype.pointFromJSON=function(G){return W.fromJSON(this,G)},q.prototype.point=function(G,U,D,P){return new W(this,G,U,D,P)},W.fromJSON=function(G,U){return new W(G,U[0],U[1],U[2])},W.prototype.inspect=function(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},W.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},W.prototype._extDbl=function(){var G=this.x.redSqr(),U=this.y.redSqr(),D=this.z.redSqr();D=D.redIAdd(D);var P=this.curve._mulA(G),H=this.x.redAdd(this.y).redSqr().redISub(G).redISub(U),N=P.redAdd(U),C=N.redSub(D),L=P.redSub(U),B=H.redMul(C),E=N.redMul(L),I=H.redMul(L),_=C.redMul(N);return this.curve.point(B,E,_,I)},W.prototype._projDbl=function(){var G=this.x.redAdd(this.y).redSqr(),U=this.x.redSqr(),D=this.y.redSqr(),P,H,N,C,L,B;if(this.curve.twisted){C=this.curve._mulA(U);var E=C.redAdd(D);if(this.zOne)P=G.redSub(U).redSub(D).redMul(E.redSub(this.curve.two)),H=E.redMul(C.redSub(D)),N=E.redSqr().redSub(E).redSub(E);else L=this.z.redSqr(),B=E.redSub(L).redISub(L),P=G.redSub(U).redISub(D).redMul(B),H=E.redMul(C.redSub(D)),N=E.redMul(B)}else C=U.redAdd(D),L=this.curve._mulC(this.z).redSqr(),B=C.redSub(L).redSub(L),P=this.curve._mulC(G.redISub(C)).redMul(B),H=this.curve._mulC(C).redMul(U.redISub(D)),N=C.redMul(B);return this.curve.point(P,H,N)},W.prototype.dbl=function(){if(this.isInfinity())return this;if(this.curve.extended)return this._extDbl();else return this._projDbl()},W.prototype._extAdd=function(G){var U=this.y.redSub(this.x).redMul(G.y.redSub(G.x)),D=this.y.redAdd(this.x).redMul(G.y.redAdd(G.x)),P=this.t.redMul(this.curve.dd).redMul(G.t),H=this.z.redMul(G.z.redAdd(G.z)),N=D.redSub(U),C=H.redSub(P),L=H.redAdd(P),B=D.redAdd(U),E=N.redMul(C),I=L.redMul(B),_=N.redMul(B),f=C.redMul(L);return this.curve.point(E,I,f,_)},W.prototype._projAdd=function(G){var U=this.z.redMul(G.z),D=U.redSqr(),P=this.x.redMul(G.x),H=this.y.redMul(G.y),N=this.curve.d.redMul(P).redMul(H),C=D.redSub(N),L=D.redAdd(N),B=this.x.redAdd(this.y).redMul(G.x.redAdd(G.y)).redISub(P).redISub(H),E=U.redMul(C).redMul(B),I,_;if(this.curve.twisted)I=U.redMul(L).redMul(H.redSub(this.curve._mulA(P))),_=C.redMul(L);else I=U.redMul(L).redMul(H.redSub(P)),_=this.curve._mulC(C).redMul(L);return this.curve.point(E,I,_)},W.prototype.add=function(G){if(this.isInfinity())return G;if(G.isInfinity())return this;if(this.curve.extended)return this._extAdd(G);else return this._projAdd(G)},W.prototype.mul=function(G){if(this._hasDoubles(G))return this.curve._fixedNafMul(this,G);else return this.curve._wnafMul(this,G)},W.prototype.mulAdd=function(G,U,D){return this.curve._wnafMulAdd(1,[this,U],[G,D],2,!1)},W.prototype.jmulAdd=function(G,U,D){return this.curve._wnafMulAdd(1,[this,U],[G,D],2,!0)},W.prototype.normalize=function(){if(this.zOne)return this;var G=this.z.redInvm();if(this.x=this.x.redMul(G),this.y=this.y.redMul(G),this.t)this.t=this.t.redMul(G);return this.z=this.curve.one,this.zOne=!0,this},W.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},W.prototype.getX=function(){return this.normalize(),this.x.fromRed()},W.prototype.getY=function(){return this.normalize(),this.y.fromRed()},W.prototype.eq=function(G){return this===G||this.getX().cmp(G.getX())===0&&this.getY().cmp(G.getY())===0},W.prototype.eqXToP=function(G){var U=G.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(U)===0)return!0;var D=G.clone(),P=this.curve.redN.redMul(this.z);for(;;){if(D.iadd(this.curve.n),D.cmp(this.curve.p)>=0)return!1;if(U.redIAdd(P),this.x.cmp(U)===0)return!0}},W.prototype.toP=W.prototype.normalize,W.prototype.mixedAdd=W.prototype.add}),_d=A0(($)=>{var Q=$;Q.base=kj(),Q.short=RG0(),Q.mont=NG0(),Q.edwards=CG0()}),P$=A0(($)=>{var Q=oX(),Z=B4();$.inherits=Z;function X(M,j){if((M.charCodeAt(j)&64512)!==55296)return!1;if(j<0||j+1>=M.length)return!1;return(M.charCodeAt(j+1)&64512)===56320}function Y(M,j){if(Array.isArray(M))return M.slice();if(!M)return[];var O=[];if(typeof M==="string"){if(!j){var R=0;for(var F=0;F<M.length;F++){var A=M.charCodeAt(F);if(A<128)O[R++]=A;else if(A<2048)O[R++]=A>>6|192,O[R++]=A&63|128;else if(X(M,F))A=65536+((A&1023)<<10)+(M.charCodeAt(++F)&1023),O[R++]=A>>18|240,O[R++]=A>>12&63|128,O[R++]=A>>6&63|128,O[R++]=A&63|128;else O[R++]=A>>12|224,O[R++]=A>>6&63|128,O[R++]=A&63|128}}else if(j==="hex"){if(M=M.replace(/[^a-z0-9]+/ig,""),M.length%2!==0)M="0"+M;for(F=0;F<M.length;F+=2)O.push(parseInt(M[F]+M[F+1],16))}}else for(F=0;F<M.length;F++)O[F]=M[F]|0;return O}$.toArray=Y;function z(M){var j="";for(var O=0;O<M.length;O++)j+=W(M[O].toString(16));return j}$.toHex=z;function J(M){var j=M>>>24|M>>>8&65280|M<<8&16711680|(M&255)<<24;return j>>>0}$.htonl=J;function q(M,j){var O="";for(var R=0;R<M.length;R++){var F=M[R];if(j==="little")F=J(F);O+=G(F.toString(16))}return O}$.toHex32=q;function W(M){if(M.length===1)return"0"+M;else return M}$.zero2=W;function G(M){if(M.length===7)return"0"+M;else if(M.length===6)return"00"+M;else if(M.length===5)return"000"+M;else if(M.length===4)return"0000"+M;else if(M.length===3)return"00000"+M;else if(M.length===2)return"000000"+M;else if(M.length===1)return"0000000"+M;else return M}$.zero8=G;function U(M,j,O,R){var F=O-j;Q(F%4===0);var A=Array(F/4);for(var T=0,V=j;T<A.length;T++,V+=4){var w;if(R==="big")w=M[V]<<24|M[V+1]<<16|M[V+2]<<8|M[V+3];else w=M[V+3]<<24|M[V+2]<<16|M[V+1]<<8|M[V];A[T]=w>>>0}return A}$.join32=U;function D(M,j){var O=Array(M.length*4);for(var R=0,F=0;R<M.length;R++,F+=4){var A=M[R];if(j==="big")O[F]=A>>>24,O[F+1]=A>>>16&255,O[F+2]=A>>>8&255,O[F+3]=A&255;else O[F+3]=A>>>24,O[F+2]=A>>>16&255,O[F+1]=A>>>8&255,O[F]=A&255}return O}$.split32=D;function P(M,j){return M>>>j|M<<32-j}$.rotr32=P;function H(M,j){return M<<j|M>>>32-j}$.rotl32=H;function N(M,j){return M+j>>>0}$.sum32=N;function C(M,j,O){return M+j+O>>>0}$.sum32_3=C;function L(M,j,O,R){return M+j+O+R>>>0}$.sum32_4=L;function B(M,j,O,R,F){return M+j+O+R+F>>>0}$.sum32_5=B;function E(M,j,O,R){var F=M[j],A=M[j+1],T=R+A>>>0,V=(T<R?1:0)+O+F;M[j]=V>>>0,M[j+1]=T}$.sum64=E;function I(M,j,O,R){var F=j+R>>>0,A=(F<j?1:0)+M+O;return A>>>0}$.sum64_hi=I;function _(M,j,O,R){var F=j+R;return F>>>0}$.sum64_lo=_;function f(M,j,O,R,F,A,T,V){var w=0,k=j;k=k+R>>>0,w+=k<j?1:0,k=k+A>>>0,w+=k<A?1:0,k=k+V>>>0,w+=k<V?1:0;var S=M+O+F+T+w;return S>>>0}$.sum64_4_hi=f;function x(M,j,O,R,F,A,T,V){var w=j+R+A+V;return w>>>0}$.sum64_4_lo=x;function g(M,j,O,R,F,A,T,V,w,k){var S=0,y=j;y=y+R>>>0,S+=y<j?1:0,y=y+A>>>0,S+=y<A?1:0,y=y+V>>>0,S+=y<V?1:0,y=y+k>>>0,S+=y<k?1:0;var u=M+O+F+T+w+S;return u>>>0}$.sum64_5_hi=g;function h(M,j,O,R,F,A,T,V,w,k){var S=j+R+A+V+k;return S>>>0}$.sum64_5_lo=h;function v(M,j,O){var R=j<<32-O|M>>>O;return R>>>0}$.rotr64_hi=v;function b(M,j,O){var R=M<<32-O|j>>>O;return R>>>0}$.rotr64_lo=b;function m(M,j,O){return M>>>O}$.shr64_hi=m;function K(M,j,O){var R=M<<32-O|j>>>O;return R>>>0}$.shr64_lo=K}),cV=A0(($)=>{var Q=P$(),Z=oX();function X(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}$.BlockHash=X,X.prototype.update=function(Y,z){if(Y=Q.toArray(Y,z),!this.pending)this.pending=Y;else this.pending=this.pending.concat(Y);if(this.pendingTotal+=Y.length,this.pending.length>=this._delta8){Y=this.pending;var J=Y.length%this._delta8;if(this.pending=Y.slice(Y.length-J,Y.length),this.pending.length===0)this.pending=null;Y=Q.join32(Y,0,Y.length-J,this.endian);for(var q=0;q<Y.length;q+=this._delta32)this._update(Y,q,q+this._delta32)}return this},X.prototype.digest=function(Y){return this.update(this._pad()),Z(this.pending===null),this._digest(Y)},X.prototype._pad=function(){var Y=this.pendingTotal,z=this._delta8,J=z-(Y+this.padLength)%z,q=Array(J+this.padLength);q[0]=128;for(var W=1;W<J;W++)q[W]=0;if(Y<<=3,this.endian==="big"){for(var G=8;G<this.padLength;G++)q[W++]=0;q[W++]=0,q[W++]=0,q[W++]=0,q[W++]=0,q[W++]=Y>>>24&255,q[W++]=Y>>>16&255,q[W++]=Y>>>8&255,q[W++]=Y&255}else{q[W++]=Y&255,q[W++]=Y>>>8&255,q[W++]=Y>>>16&255,q[W++]=Y>>>24&255,q[W++]=0,q[W++]=0,q[W++]=0,q[W++]=0;for(G=8;G<this.padLength;G++)q[W++]=0}return q}}),Sd=A0(($)=>{var Q=P$(),Z=Q.rotr32;function X(D,P,H,N){if(D===0)return Y(P,H,N);if(D===1||D===3)return J(P,H,N);if(D===2)return z(P,H,N)}$.ft_1=X;function Y(D,P,H){return D&P^~D&H}$.ch32=Y;function z(D,P,H){return D&P^D&H^P&H}$.maj32=z;function J(D,P,H){return D^P^H}$.p32=J;function q(D){return Z(D,2)^Z(D,13)^Z(D,22)}$.s0_256=q;function W(D){return Z(D,6)^Z(D,11)^Z(D,25)}$.s1_256=W;function G(D){return Z(D,7)^Z(D,18)^D>>>3}$.g0_256=G;function U(D){return Z(D,17)^Z(D,19)^D>>>10}$.g1_256=U}),LG0=A0(($,Q)=>{var Z=P$(),X=cV(),Y=Sd(),z=Z.rotl32,J=Z.sum32,q=Z.sum32_5,W=Y.ft_1,G=X.BlockHash,U=[1518500249,1859775393,2400959708,3395469782];function D(){if(!(this instanceof D))return new D;G.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=Array(80)}Z.inherits(D,G),Q.exports=D,D.blockSize=512,D.outSize=160,D.hmacStrength=80,D.padLength=64,D.prototype._update=function(P,H){var N=this.W;for(var C=0;C<16;C++)N[C]=P[H+C];for(;C<N.length;C++)N[C]=z(N[C-3]^N[C-8]^N[C-14]^N[C-16],1);var L=this.h[0],B=this.h[1],E=this.h[2],I=this.h[3],_=this.h[4];for(C=0;C<N.length;C++){var f=~~(C/20),x=q(z(L,5),W(f,B,E,I),_,N[C],U[f]);_=I,I=E,E=z(B,30),B=L,L=x}this.h[0]=J(this.h[0],L),this.h[1]=J(this.h[1],B),this.h[2]=J(this.h[2],E),this.h[3]=J(this.h[3],I),this.h[4]=J(this.h[4],_)},D.prototype._digest=function(P){if(P==="hex")return Z.toHex32(this.h,"big");else return Z.split32(this.h,"big")}}),fd=A0(($,Q)=>{var Z=P$(),X=cV(),Y=Sd(),z=oX(),J=Z.sum32,q=Z.sum32_4,W=Z.sum32_5,G=Y.ch32,U=Y.maj32,D=Y.s0_256,P=Y.s1_256,H=Y.g0_256,N=Y.g1_256,C=X.BlockHash,L=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function B(){if(!(this instanceof B))return new B;C.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=L,this.W=Array(64)}Z.inherits(B,C),Q.exports=B,B.blockSize=512,B.outSize=256,B.hmacStrength=192,B.padLength=64,B.prototype._update=function(E,I){var _=this.W;for(var f=0;f<16;f++)_[f]=E[I+f];for(;f<_.length;f++)_[f]=q(N(_[f-2]),_[f-7],H(_[f-15]),_[f-16]);var x=this.h[0],g=this.h[1],h=this.h[2],v=this.h[3],b=this.h[4],m=this.h[5],K=this.h[6],M=this.h[7];z(this.k.length===_.length);for(f=0;f<_.length;f++){var j=W(M,P(b),G(b,m,K),this.k[f],_[f]),O=J(D(x),U(x,g,h));M=K,K=m,m=b,b=J(v,j),v=h,h=g,g=x,x=J(j,O)}this.h[0]=J(this.h[0],x),this.h[1]=J(this.h[1],g),this.h[2]=J(this.h[2],h),this.h[3]=J(this.h[3],v),this.h[4]=J(this.h[4],b),this.h[5]=J(this.h[5],m),this.h[6]=J(this.h[6],K),this.h[7]=J(this.h[7],M)},B.prototype._digest=function(E){if(E==="hex")return Z.toHex32(this.h,"big");else return Z.split32(this.h,"big")}}),TG0=A0(($,Q)=>{var Z=P$(),X=fd();function Y(){if(!(this instanceof Y))return new Y;X.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Z.inherits(Y,X),Q.exports=Y,Y.blockSize=512,Y.outSize=224,Y.hmacStrength=192,Y.padLength=64,Y.prototype._digest=function(z){if(z==="hex")return Z.toHex32(this.h.slice(0,7),"big");else return Z.split32(this.h.slice(0,7),"big")}}),kd=A0(($,Q)=>{var Z=P$(),X=cV(),Y=oX(),z=Z.rotr64_hi,J=Z.rotr64_lo,q=Z.shr64_hi,W=Z.shr64_lo,G=Z.sum64,U=Z.sum64_hi,D=Z.sum64_lo,P=Z.sum64_4_hi,H=Z.sum64_4_lo,N=Z.sum64_5_hi,C=Z.sum64_5_lo,L=X.BlockHash,B=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function E(){if(!(this instanceof E))return new E;L.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=B,this.W=Array(160)}Z.inherits(E,L),Q.exports=E,E.blockSize=1024,E.outSize=512,E.hmacStrength=192,E.padLength=128,E.prototype._prepareBlock=function(O,R){var F=this.W;for(var A=0;A<32;A++)F[A]=O[R+A];for(;A<F.length;A+=2){var T=M(F[A-4],F[A-3]),V=j(F[A-4],F[A-3]),w=F[A-14],k=F[A-13],S=m(F[A-30],F[A-29]),y=K(F[A-30],F[A-29]),u=F[A-32],c=F[A-31];F[A]=P(T,V,w,k,S,y,u,c),F[A+1]=H(T,V,w,k,S,y,u,c)}},E.prototype._update=function(O,R){this._prepareBlock(O,R);var F=this.W,A=this.h[0],T=this.h[1],V=this.h[2],w=this.h[3],k=this.h[4],S=this.h[5],y=this.h[6],u=this.h[7],c=this.h[8],o=this.h[9],z0=this.h[10],e=this.h[11],s=this.h[12],J0=this.h[13],t=this.h[14],Z0=this.h[15];Y(this.k.length===F.length);for(var N0=0;N0<F.length;N0+=2){var i=t,l=Z0,q0=v(c,o),Y0=b(c,o),K0=I(c,o,z0,e,s,J0),k0=_(c,o,z0,e,s,J0),a=this.k[N0],X0=this.k[N0+1],n0=F[N0],W0=F[N0+1],V0=N(i,l,q0,Y0,K0,k0,a,X0,n0,W0),H1=C(i,l,q0,Y0,K0,k0,a,X0,n0,W0);i=g(A,T),l=h(A,T),q0=f(A,T,V,w,k,S),Y0=x(A,T,V,w,k,S);var D0=U(i,l,q0,Y0),j0=D(i,l,q0,Y0);t=s,Z0=J0,s=z0,J0=e,z0=c,e=o,c=U(y,u,V0,H1),o=D(u,u,V0,H1),y=k,u=S,k=V,S=w,V=A,w=T,A=U(V0,H1,D0,j0),T=D(V0,H1,D0,j0)}G(this.h,0,A,T),G(this.h,2,V,w),G(this.h,4,k,S),G(this.h,6,y,u),G(this.h,8,c,o),G(this.h,10,z0,e),G(this.h,12,s,J0),G(this.h,14,t,Z0)},E.prototype._digest=function(O){if(O==="hex")return Z.toHex32(this.h,"big");else return Z.split32(this.h,"big")};function I(O,R,F,A,T){var V=O&F^~O&T;if(V<0)V+=4294967296;return V}function _(O,R,F,A,T,V){var w=R&A^~R&V;if(w<0)w+=4294967296;return w}function f(O,R,F,A,T){var V=O&F^O&T^F&T;if(V<0)V+=4294967296;return V}function x(O,R,F,A,T,V){var w=R&A^R&V^A&V;if(w<0)w+=4294967296;return w}function g(O,R){var F=z(O,R,28),A=z(R,O,2),T=z(R,O,7),V=F^A^T;if(V<0)V+=4294967296;return V}function h(O,R){var F=J(O,R,28),A=J(R,O,2),T=J(R,O,7),V=F^A^T;if(V<0)V+=4294967296;return V}function v(O,R){var F=z(O,R,14),A=z(O,R,18),T=z(R,O,9),V=F^A^T;if(V<0)V+=4294967296;return V}function b(O,R){var F=J(O,R,14),A=J(O,R,18),T=J(R,O,9),V=F^A^T;if(V<0)V+=4294967296;return V}function m(O,R){var F=z(O,R,1),A=z(O,R,8),T=q(O,R,7),V=F^A^T;if(V<0)V+=4294967296;return V}function K(O,R){var F=J(O,R,1),A=J(O,R,8),T=W(O,R,7),V=F^A^T;if(V<0)V+=4294967296;return V}function M(O,R){var F=z(O,R,19),A=z(R,O,29),T=q(O,R,6),V=F^A^T;if(V<0)V+=4294967296;return V}function j(O,R){var F=J(O,R,19),A=J(R,O,29),T=W(O,R,6),V=F^A^T;if(V<0)V+=4294967296;return V}}),FG0=A0(($,Q)=>{var Z=P$(),X=kd();function Y(){if(!(this instanceof Y))return new Y;X.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Z.inherits(Y,X),Q.exports=Y,Y.blockSize=1024,Y.outSize=384,Y.hmacStrength=192,Y.padLength=128,Y.prototype._digest=function(z){if(z==="hex")return Z.toHex32(this.h.slice(0,12),"big");else return Z.split32(this.h.slice(0,12),"big")}}),AG0=A0(($)=>{$.sha1=LG0(),$.sha224=TG0(),$.sha256=fd(),$.sha384=FG0(),$.sha512=kd()}),wG0=A0(($)=>{var Q=P$(),Z=cV(),X=Q.rotl32,Y=Q.sum32,z=Q.sum32_3,J=Q.sum32_4,q=Z.BlockHash;function W(){if(!(this instanceof W))return new W;q.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Q.inherits(W,q),$.ripemd160=W,W.blockSize=512,W.outSize=160,W.hmacStrength=192,W.padLength=64,W.prototype._update=function(L,B){var E=this.h[0],I=this.h[1],_=this.h[2],f=this.h[3],x=this.h[4],g=E,h=I,v=_,b=f,m=x;for(var K=0;K<80;K++){var M=Y(X(J(E,G(K,I,_,f),L[P[K]+B],U(K)),N[K]),x);E=x,x=f,f=X(_,10),_=I,I=M,M=Y(X(J(g,G(79-K,h,v,b),L[H[K]+B],D(K)),C[K]),m),g=m,m=b,b=X(v,10),v=h,h=M}M=z(this.h[1],_,b),this.h[1]=z(this.h[2],f,m),this.h[2]=z(this.h[3],x,g),this.h[3]=z(this.h[4],E,h),this.h[4]=z(this.h[0],I,v),this.h[0]=M},W.prototype._digest=function(L){if(L==="hex")return Q.toHex32(this.h,"little");else return Q.split32(this.h,"little")};function G(L,B,E,I){if(L<=15)return B^E^I;else if(L<=31)return B&E|~B&I;else if(L<=47)return(B|~E)^I;else if(L<=63)return B&I|E&~I;else return B^(E|~I)}function U(L){if(L<=15)return 0;else if(L<=31)return 1518500249;else if(L<=47)return 1859775393;else if(L<=63)return 2400959708;else return 2840853838}function D(L){if(L<=15)return 1352829926;else if(L<=31)return 1548603684;else if(L<=47)return 1836072691;else if(L<=63)return 2053994217;else return 0}var P=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],H=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],N=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],C=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]}),BG0=A0(($,Q)=>{var Z=P$(),X=oX();function Y(z,J,q){if(!(this instanceof Y))return new Y(z,J,q);this.Hash=z,this.blockSize=z.blockSize/8,this.outSize=z.outSize/8,this.inner=null,this.outer=null,this._init(Z.toArray(J,q))}Q.exports=Y,Y.prototype._init=function(z){if(z.length>this.blockSize)z=new this.Hash().update(z).digest();X(z.length<=this.blockSize);for(var J=z.length;J<this.blockSize;J++)z.push(0);for(J=0;J<z.length;J++)z[J]^=54;this.inner=new this.Hash().update(z);for(J=0;J<z.length;J++)z[J]^=106;this.outer=new this.Hash().update(z)},Y.prototype.update=function(z,J){return this.inner.update(z,J),this},Y.prototype.digest=function(z){return this.outer.update(this.inner.digest()),this.outer.digest(z)}}),kB=A0(($)=>{var Q=$;Q.utils=P$(),Q.common=cV(),Q.sha=AG0(),Q.ripemd=wG0(),Q.hmac=BG0(),Q.sha1=Q.sha.sha1,Q.sha256=Q.sha.sha256,Q.sha224=Q.sha.sha224,Q.sha384=Q.sha.sha384,Q.sha512=Q.sha.sha512,Q.ripemd160=Q.ripemd.ripemd160}),EG0=A0(($,Q)=>{Q.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}}),xB=A0(($)=>{var Q=$,Z=kB(),X=_d(),Y=_7(),z=Y.assert;function J(G){if(G.type==="short")this.curve=new X.short(G);else if(G.type==="edwards")this.curve=new X.edwards(G);else this.curve=new X.mont(G);this.g=this.curve.g,this.n=this.curve.n,this.hash=G.hash,z(this.g.validate(),"Invalid curve"),z(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}Q.PresetCurve=J;function q(G,U){Object.defineProperty(Q,G,{configurable:!0,enumerable:!0,get:function(){var D=new J(U);return Object.defineProperty(Q,G,{configurable:!0,enumerable:!0,value:D}),D}})}q("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Z.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),q("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Z.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),q("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Z.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),q("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Z.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),q("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Z.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),q("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Z.sha256,gRed:!1,g:["9"]}),q("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Z.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var W;try{W=EG0()}catch(G){W=void 0}q("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Z.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",W]})}),IG0=A0(($,Q)=>{var Z=kB(),X=Ed(),Y=oX();function z(J){if(!(this instanceof z))return new z(J);this.hash=J.hash,this.predResist=!!J.predResist,this.outLen=this.hash.outSize,this.minEntropy=J.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var q=X.toArray(J.entropy,J.entropyEnc||"hex"),W=X.toArray(J.nonce,J.nonceEnc||"hex"),G=X.toArray(J.pers,J.persEnc||"hex");Y(q.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(q,W,G)}Q.exports=z,z.prototype._init=function(J,q,W){var G=J.concat(q).concat(W);this.K=Array(this.outLen/8),this.V=Array(this.outLen/8);for(var U=0;U<this.V.length;U++)this.K[U]=0,this.V[U]=1;this._update(G),this._reseed=1,this.reseedInterval=281474976710656},z.prototype._hmac=function(){return new Z.hmac(this.hash,this.K)},z.prototype._update=function(J){var q=this._hmac().update(this.V).update([0]);if(J)q=q.update(J);if(this.K=q.digest(),this.V=this._hmac().update(this.V).digest(),!J)return;this.K=this._hmac().update(this.V).update([1]).update(J).digest(),this.V=this._hmac().update(this.V).digest()},z.prototype.reseed=function(J,q,W,G){if(typeof q!=="string")G=W,W=q,q=null;J=X.toArray(J,q),W=X.toArray(W,G),Y(J.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(J.concat(W||[])),this._reseed=1},z.prototype.generate=function(J,q,W,G){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");if(typeof q!=="string")G=W,W=q,q=null;if(W)W=X.toArray(W,G||"hex"),this._update(W);var U=[];while(U.length<J)this.V=this._hmac().update(this.V).digest(),U=U.concat(this.V);var D=U.slice(0,J);return this._update(W),this._reseed++,X.encode(D,q)}}),_G0=A0(($,Q)=>{var Z=dQ(),X=_7(),Y=X.assert;function z(J,q){if(this.ec=J,this.priv=null,this.pub=null,q.priv)this._importPrivate(q.priv,q.privEnc);if(q.pub)this._importPublic(q.pub,q.pubEnc)}Q.exports=z,z.fromPublic=function(J,q,W){if(q instanceof z)return q;return new z(J,{pub:q,pubEnc:W})},z.fromPrivate=function(J,q,W){if(q instanceof z)return q;return new z(J,{priv:q,privEnc:W})},z.prototype.validate=function(){var J=this.getPublic();if(J.isInfinity())return{result:!1,reason:"Invalid public key"};if(!J.validate())return{result:!1,reason:"Public key is not a point"};if(!J.mul(this.ec.curve.n).isInfinity())return{result:!1,reason:"Public key * N != O"};return{result:!0,reason:null}},z.prototype.getPublic=function(J,q){if(typeof J==="string")q=J,J=null;if(!this.pub)this.pub=this.ec.g.mul(this.priv);if(!q)return this.pub;return this.pub.encode(q,J)},z.prototype.getPrivate=function(J){if(J==="hex")return this.priv.toString(16,2);else return this.priv},z.prototype._importPrivate=function(J,q){this.priv=new Z(J,q||16),this.priv=this.priv.umod(this.ec.curve.n)},z.prototype._importPublic=function(J,q){if(J.x||J.y){if(this.ec.curve.type==="mont")Y(J.x,"Need x coordinate");else if(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")Y(J.x&&J.y,"Need both x and y coordinate");this.pub=this.ec.curve.point(J.x,J.y);return}this.pub=this.ec.curve.decodePoint(J,q)},z.prototype.derive=function(J){if(!J.validate())Y(J.validate(),"public point not validated");return J.mul(this.priv).getX()},z.prototype.sign=function(J,q,W){return this.ec.sign(J,this,q,W)},z.prototype.verify=function(J,q,W){return this.ec.verify(J,q,this,void 0,W)},z.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}}),SG0=A0(($,Q)=>{var Z=dQ(),X=_7(),Y=X.assert;function z(U,D){if(U instanceof z)return U;if(this._importDER(U,D))return;if(Y(U.r&&U.s,"Signature without r or s"),this.r=new Z(U.r,16),this.s=new Z(U.s,16),U.recoveryParam===void 0)this.recoveryParam=null;else this.recoveryParam=U.recoveryParam}Q.exports=z;function J(){this.place=0}function q(U,D){var P=U[D.place++];if(!(P&128))return P;var H=P&15;if(H===0||H>4)return!1;if(U[D.place]===0)return!1;var N=0;for(var C=0,L=D.place;C<H;C++,L++)N<<=8,N|=U[L],N>>>=0;if(N<=127)return!1;return D.place=L,N}function W(U){var D=0,P=U.length-1;while(!U[D]&&!(U[D+1]&128)&&D<P)D++;if(D===0)return U;return U.slice(D)}z.prototype._importDER=function(U,D){U=X.toArray(U,D);var P=new J;if(U[P.place++]!==48)return!1;var H=q(U,P);if(H===!1)return!1;if(H+P.place!==U.length)return!1;if(U[P.place++]!==2)return!1;var N=q(U,P);if(N===!1)return!1;if((U[P.place]&128)!==0)return!1;var C=U.slice(P.place,N+P.place);if(P.place+=N,U[P.place++]!==2)return!1;var L=q(U,P);if(L===!1)return!1;if(U.length!==L+P.place)return!1;if((U[P.place]&128)!==0)return!1;var B=U.slice(P.place,L+P.place);if(C[0]===0)if(C[1]&128)C=C.slice(1);else return!1;if(B[0]===0)if(B[1]&128)B=B.slice(1);else return!1;return this.r=new Z(C),this.s=new Z(B),this.recoveryParam=null,!0};function G(U,D){if(D<128){U.push(D);return}var P=1+(Math.log(D)/Math.LN2>>>3);U.push(P|128);while(--P)U.push(D>>>(P<<3)&255);U.push(D)}z.prototype.toDER=function(U){var D=this.r.toArray(),P=this.s.toArray();if(D[0]&128)D=[0].concat(D);if(P[0]&128)P=[0].concat(P);D=W(D),P=W(P);while(!P[0]&&!(P[1]&128))P=P.slice(1);var H=[2];G(H,D.length),H=H.concat(D),H.push(2),G(H,P.length);var N=H.concat(P),C=[48];return G(C,N.length),C=C.concat(N),X.encode(C,U)}}),fG0=A0(($,Q)=>{var Z=dQ(),X=IG0(),Y=_7(),z=xB(),J=Id(),q=Y.assert,W=_G0(),G=SG0();function U(D){if(!(this instanceof U))return new U(D);if(typeof D==="string")q(Object.prototype.hasOwnProperty.call(z,D),"Unknown curve "+D),D=z[D];if(D instanceof z.PresetCurve)D={curve:D};this.curve=D.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=D.curve.g,this.g.precompute(D.curve.n.bitLength()+1),this.hash=D.hash||D.curve.hash}Q.exports=U,U.prototype.keyPair=function(D){return new W(this,D)},U.prototype.keyFromPrivate=function(D,P){return W.fromPrivate(this,D,P)},U.prototype.keyFromPublic=function(D,P){return W.fromPublic(this,D,P)},U.prototype.genKeyPair=function(D){if(!D)D={};var P=new X({hash:this.hash,pers:D.pers,persEnc:D.persEnc||"utf8",entropy:D.entropy||J(this.hash.hmacStrength),entropyEnc:D.entropy&&D.entropyEnc||"utf8",nonce:this.n.toArray()}),H=this.n.byteLength(),N=this.n.sub(new Z(2));for(;;){var C=new Z(P.generate(H));if(C.cmp(N)>0)continue;return C.iaddn(1),this.keyFromPrivate(C)}},U.prototype._truncateToN=function(D,P,H){var N;if(Z.isBN(D)||typeof D==="number")D=new Z(D,16),N=D.byteLength();else if(typeof D==="object")N=D.length,D=new Z(D,16);else{var C=D.toString();N=C.length+1>>>1,D=new Z(C,16)}if(typeof H!=="number")H=N*8;var L=H-this.n.bitLength();if(L>0)D=D.ushrn(L);if(!P&&D.cmp(this.n)>=0)return D.sub(this.n);else return D},U.prototype.sign=function(D,P,H,N){if(typeof H==="object")N=H,H=null;if(!N)N={};if(typeof D!=="string"&&typeof D!=="number"&&!Z.isBN(D)){q(typeof D==="object"&&D&&typeof D.length==="number","Expected message to be an array-like, a hex string, or a BN instance"),q(D.length>>>0===D.length);for(var C=0;C<D.length;C++)q((D[C]&255)===D[C])}P=this.keyFromPrivate(P,H),D=this._truncateToN(D,!1,N.msgBitLength),q(!D.isNeg(),"Can not sign a negative message");var L=this.n.byteLength(),B=P.getPrivate().toArray("be",L),E=D.toArray("be",L);q(new Z(E).eq(D),"Can not sign message");var I=new X({hash:this.hash,entropy:B,nonce:E,pers:N.pers,persEnc:N.persEnc||"utf8"}),_=this.n.sub(new Z(1));for(var f=0;;f++){var x=N.k?N.k(f):new Z(I.generate(this.n.byteLength()));if(x=this._truncateToN(x,!0),x.cmpn(1)<=0||x.cmp(_)>=0)continue;var g=this.g.mul(x);if(g.isInfinity())continue;var h=g.getX(),v=h.umod(this.n);if(v.cmpn(0)===0)continue;var b=x.invm(this.n).mul(v.mul(P.getPrivate()).iadd(D));if(b=b.umod(this.n),b.cmpn(0)===0)continue;var m=(g.getY().isOdd()?1:0)|(h.cmp(v)!==0?2:0);if(N.canonical&&b.cmp(this.nh)>0)b=this.n.sub(b),m^=1;return new G({r:v,s:b,recoveryParam:m})}},U.prototype.verify=function(D,P,H,N,C){if(!C)C={};D=this._truncateToN(D,!1,C.msgBitLength),H=this.keyFromPublic(H,N),P=new G(P,"hex");var{r:L,s:B}=P;if(L.cmpn(1)<0||L.cmp(this.n)>=0)return!1;if(B.cmpn(1)<0||B.cmp(this.n)>=0)return!1;var E=B.invm(this.n),I=E.mul(D).umod(this.n),_=E.mul(L).umod(this.n),f;if(!this.curve._maxwellTrick){if(f=this.g.mulAdd(I,H.getPublic(),_),f.isInfinity())return!1;return f.getX().umod(this.n).cmp(L)===0}if(f=this.g.jmulAdd(I,H.getPublic(),_),f.isInfinity())return!1;return f.eqXToP(L)},U.prototype.recoverPubKey=function(D,P,H,N){q((3&H)===H,"The recovery param is more than two bits"),P=new G(P,N);var C=this.n,L=new Z(D),B=P.r,E=P.s,I=H&1,_=H>>1;if(B.cmp(this.curve.p.umod(this.curve.n))>=0&&_)throw Error("Unable to find sencond key candinate");if(_)B=this.curve.pointFromX(B.add(this.curve.n),I);else B=this.curve.pointFromX(B,I);var f=P.r.invm(C),x=C.sub(L).mul(f).umod(C),g=E.mul(f).umod(C);return this.g.mulAdd(x,B,g)},U.prototype.getKeyRecoveryParam=function(D,P,H,N){if(P=new G(P,N),P.recoveryParam!==null)return P.recoveryParam;for(var C=0;C<4;C++){var L;try{L=this.recoverPubKey(D,P,C)}catch(B){continue}if(L.eq(H))return C}throw Error("Unable to find valid recovery factor")}}),kG0=A0(($,Q)=>{var Z=_7(),X=Z.assert,Y=Z.parseBytes,z=Z.cachedProperty;function J(q,W){if(this.eddsa=q,this._secret=Y(W.secret),q.isPoint(W.pub))this._pub=W.pub;else this._pubBytes=Y(W.pub)}J.fromPublic=function(q,W){if(W instanceof J)return W;return new J(q,{pub:W})},J.fromSecret=function(q,W){if(W instanceof J)return W;return new J(q,{secret:W})},J.prototype.secret=function(){return this._secret},z(J,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),z(J,"pub",function(){if(this._pubBytes)return this.eddsa.decodePoint(this._pubBytes);return this.eddsa.g.mul(this.priv())}),z(J,"privBytes",function(){var q=this.eddsa,W=this.hash(),G=q.encodingLength-1,U=W.slice(0,q.encodingLength);return U[0]&=248,U[G]&=127,U[G]|=64,U}),z(J,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),z(J,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),z(J,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),J.prototype.sign=function(q){return X(this._secret,"KeyPair can only verify"),this.eddsa.sign(q,this)},J.prototype.verify=function(q,W){return this.eddsa.verify(q,W,this)},J.prototype.getSecret=function(q){return X(this._secret,"KeyPair is public only"),Z.encode(this.secret(),q)},J.prototype.getPublic=function(q){return Z.encode(this.pubBytes(),q)},Q.exports=J}),xG0=A0(($,Q)=>{var Z=dQ(),X=_7(),Y=X.assert,z=X.cachedProperty,J=X.parseBytes;function q(W,G){if(this.eddsa=W,typeof G!=="object")G=J(G);if(Array.isArray(G))Y(G.length===W.encodingLength*2,"Signature has invalid size"),G={R:G.slice(0,W.encodingLength),S:G.slice(W.encodingLength)};if(Y(G.R&&G.S,"Signature without R or S"),W.isPoint(G.R))this._R=G.R;if(G.S instanceof Z)this._S=G.S;this._Rencoded=Array.isArray(G.R)?G.R:G.Rencoded,this._Sencoded=Array.isArray(G.S)?G.S:G.Sencoded}z(q,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),z(q,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),z(q,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),z(q,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),q.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},q.prototype.toHex=function(){return X.encode(this.toBytes(),"hex").toUpperCase()},Q.exports=q}),bG0=A0(($,Q)=>{var Z=kB(),X=xB(),Y=_7(),z=Y.assert,J=Y.parseBytes,q=kG0(),W=xG0();function G(U){if(z(U==="ed25519","only tested with ed25519 so far"),!(this instanceof G))return new G(U);U=X[U].curve,this.curve=U,this.g=U.g,this.g.precompute(U.n.bitLength()+1),this.pointClass=U.point().constructor,this.encodingLength=Math.ceil(U.n.bitLength()/8),this.hash=Z.sha512}Q.exports=G,G.prototype.sign=function(U,D){U=J(U);var P=this.keyFromSecret(D),H=this.hashInt(P.messagePrefix(),U),N=this.g.mul(H),C=this.encodePoint(N),L=this.hashInt(C,P.pubBytes(),U).mul(P.priv()),B=H.add(L).umod(this.curve.n);return this.makeSignature({R:N,S:B,Rencoded:C})},G.prototype.verify=function(U,D,P){if(U=J(U),D=this.makeSignature(D),D.S().gte(D.eddsa.curve.n)||D.S().isNeg())return!1;var H=this.keyFromPublic(P),N=this.hashInt(D.Rencoded(),H.pubBytes(),U),C=this.g.mul(D.S()),L=D.R().add(H.pub().mul(N));return L.eq(C)},G.prototype.hashInt=function(){var U=this.hash();for(var D=0;D<arguments.length;D++)U.update(arguments[D]);return Y.intFromLE(U.digest()).umod(this.curve.n)},G.prototype.keyFromPublic=function(U){return q.fromPublic(this,U)},G.prototype.keyFromSecret=function(U){return q.fromSecret(this,U)},G.prototype.makeSignature=function(U){if(U instanceof W)return U;return new W(this,U)},G.prototype.encodePoint=function(U){var D=U.getY().toArray("le",this.encodingLength);return D[this.encodingLength-1]|=U.getX().isOdd()?128:0,D},G.prototype.decodePoint=function(U){U=Y.parseBytes(U);var D=U.length-1,P=U.slice(0,D).concat(U[D]&-129),H=(U[D]&128)!==0,N=Y.intFromLE(P);return this.curve.pointFromY(N,H)},G.prototype.encodeInt=function(U){return U.toArray("le",this.encodingLength)},G.prototype.decodeInt=function(U){return Y.intFromLE(U)},G.prototype.isPoint=function(U){return U instanceof this.pointClass}}),vG0=A0(($)=>{var Q=$;Q.version=HG0().version,Q.utils=_7(),Q.rand=Id(),Q.curve=_d(),Q.curves=xB(),Q.ec=fG0(),Q.eddsa=bG0()}),yG0=A0(($,Q)=>{(function(Z,X){function Y(K,M){if(!K)throw Error(M||"Assertion failed")}function z(K,M){K.super_=M;var j=function(){};j.prototype=M.prototype,K.prototype=new j,K.prototype.constructor=K}function J(K,M,j){if(J.isBN(K))return K;if(this.negative=0,this.words=null,this.length=0,this.red=null,K!==null){if(M==="le"||M==="be")j=M,M=10;this._init(K||0,M||10,j||"be")}}if(typeof Z==="object")Z.exports=J;else X.BN=J;J.BN=J,J.wordSize=26;var q;try{if(typeof window<"u"&&typeof window.Buffer<"u")q=window.Buffer;else q=(s6(),Q5(T8)).Buffer}catch(K){}J.isBN=function(K){if(K instanceof J)return!0;return K!==null&&typeof K==="object"&&K.constructor.wordSize===J.wordSize&&Array.isArray(K.words)},J.max=function(K,M){if(K.cmp(M)>0)return K;return M},J.min=function(K,M){if(K.cmp(M)<0)return K;return M},J.prototype._init=function(K,M,j){if(typeof K==="number")return this._initNumber(K,M,j);if(typeof K==="object")return this._initArray(K,M,j);if(M==="hex")M=16;Y(M===(M|0)&&M>=2&&M<=36),K=K.toString().replace(/\s+/g,"");var O=0;if(K[0]==="-")O++,this.negative=1;if(O<K.length){if(M===16)this._parseHex(K,O,j);else if(this._parseBase(K,M,O),j==="le")this._initArray(this.toArray(),M,j)}},J.prototype._initNumber=function(K,M,j){if(K<0)this.negative=1,K=-K;if(K<67108864)this.words=[K&67108863],this.length=1;else if(K<4503599627370496)this.words=[K&67108863,K/67108864&67108863],this.length=2;else Y(K<9007199254740992),this.words=[K&67108863,K/67108864&67108863,1],this.length=3;if(j!=="le")return;this._initArray(this.toArray(),M,j)},J.prototype._initArray=function(K,M,j){if(Y(typeof K.length==="number"),K.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(K.length/3),this.words=Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var R,F,A=0;if(j==="be"){for(O=K.length-1,R=0;O>=0;O-=3)if(F=K[O]|K[O-1]<<8|K[O-2]<<16,this.words[R]|=F<<A&67108863,this.words[R+1]=F>>>26-A&67108863,A+=24,A>=26)A-=26,R++}else if(j==="le"){for(O=0,R=0;O<K.length;O+=3)if(F=K[O]|K[O+1]<<8|K[O+2]<<16,this.words[R]|=F<<A&67108863,this.words[R+1]=F>>>26-A&67108863,A+=24,A>=26)A-=26,R++}return this.strip()};function W(K,M){var j=K.charCodeAt(M);if(j>=65&&j<=70)return j-55;else if(j>=97&&j<=102)return j-87;else return j-48&15}function G(K,M,j){var O=W(K,j);if(j-1>=M)O|=W(K,j-1)<<4;return O}J.prototype._parseHex=function(K,M,j){this.length=Math.ceil((K.length-M)/6),this.words=Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var R=0,F=0,A;if(j==="be")for(O=K.length-1;O>=M;O-=2)if(A=G(K,M,O)<<R,this.words[F]|=A&67108863,R>=18)R-=18,F+=1,this.words[F]|=A>>>26;else R+=8;else{var T=K.length-M;for(O=T%2===0?M+1:M;O<K.length;O+=2)if(A=G(K,M,O)<<R,this.words[F]|=A&67108863,R>=18)R-=18,F+=1,this.words[F]|=A>>>26;else R+=8}this.strip()};function U(K,M,j,O){var R=0,F=Math.min(K.length,j);for(var A=M;A<F;A++){var T=K.charCodeAt(A)-48;if(R*=O,T>=49)R+=T-49+10;else if(T>=17)R+=T-17+10;else R+=T}return R}J.prototype._parseBase=function(K,M,j){this.words=[0],this.length=1;for(var O=0,R=1;R<=67108863;R*=M)O++;O--,R=R/M|0;var F=K.length-j,A=F%O,T=Math.min(F,F-A)+j,V=0;for(var w=j;w<T;w+=O)if(V=U(K,w,w+O,M),this.imuln(R),this.words[0]+V<67108864)this.words[0]+=V;else this._iaddn(V);if(A!==0){var k=1;V=U(K,w,K.length,M);for(w=0;w<A;w++)k*=M;if(this.imuln(k),this.words[0]+V<67108864)this.words[0]+=V;else this._iaddn(V)}this.strip()},J.prototype.copy=function(K){K.words=Array(this.length);for(var M=0;M<this.length;M++)K.words[M]=this.words[M];K.length=this.length,K.negative=this.negative,K.red=this.red},J.prototype.clone=function(){var K=new J(null);return this.copy(K),K},J.prototype._expand=function(K){while(this.length<K)this.words[this.length++]=0;return this},J.prototype.strip=function(){while(this.length>1&&this.words[this.length-1]===0)this.length--;return this._normSign()},J.prototype._normSign=function(){if(this.length===1&&this.words[0]===0)this.negative=0;return this},J.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var D=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],P=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],H=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];if(J.prototype.toString=function(K,M){K=K||10,M=M|0||1;var j;if(K===16||K==="hex"){j="";var O=0,R=0;for(var F=0;F<this.length;F++){var A=this.words[F],T=((A<<O|R)&16777215).toString(16);if(R=A>>>24-O&16777215,O+=2,O>=26)O-=26,F--;if(R!==0||F!==this.length-1)j=D[6-T.length]+T+j;else j=T+j}if(R!==0)j=R.toString(16)+j;while(j.length%M!==0)j="0"+j;if(this.negative!==0)j="-"+j;return j}if(K===(K|0)&&K>=2&&K<=36){var V=P[K],w=H[K];j="";var k=this.clone();k.negative=0;while(!k.isZero()){var S=k.modn(w).toString(K);if(k=k.idivn(w),!k.isZero())j=D[V-S.length]+S+j;else j=S+j}if(this.isZero())j="0"+j;while(j.length%M!==0)j="0"+j;if(this.negative!==0)j="-"+j;return j}Y(!1,"Base should be between 2 and 36")},J.prototype.toNumber=function(){var K=this.words[0];if(this.length===2)K+=this.words[1]*67108864;else if(this.length===3&&this.words[2]===1)K+=4503599627370496+this.words[1]*67108864;else if(this.length>2)Y(!1,"Number can only safely store up to 53 bits");return this.negative!==0?-K:K},J.prototype.toJSON=function(){return this.toString(16)},J.prototype.toBuffer=function(K,M){return Y(typeof q<"u"),this.toArrayLike(q,K,M)},J.prototype.toArray=function(K,M){return this.toArrayLike(Array,K,M)},J.prototype.toArrayLike=function(K,M,j){var O=this.byteLength(),R=j||Math.max(1,O);Y(O<=R,"byte array longer than desired length"),Y(R>0,"Requested array length <= 0"),this.strip();var F=M==="le",A=new K(R),T,V,w=this.clone();if(!F){for(V=0;V<R-O;V++)A[V]=0;for(V=0;!w.isZero();V++)T=w.andln(255),w.iushrn(8),A[R-V-1]=T}else{for(V=0;!w.isZero();V++)T=w.andln(255),w.iushrn(8),A[V]=T;for(;V<R;V++)A[V]=0}return A},Math.clz32)J.prototype._countBits=function(K){return 32-Math.clz32(K)};else J.prototype._countBits=function(K){var M=K,j=0;if(M>=4096)j+=13,M>>>=13;if(M>=64)j+=7,M>>>=7;if(M>=8)j+=4,M>>>=4;if(M>=2)j+=2,M>>>=2;return j+M};J.prototype._zeroBits=function(K){if(K===0)return 26;var M=K,j=0;if((M&8191)===0)j+=13,M>>>=13;if((M&127)===0)j+=7,M>>>=7;if((M&15)===0)j+=4,M>>>=4;if((M&3)===0)j+=2,M>>>=2;if((M&1)===0)j++;return j},J.prototype.bitLength=function(){var K=this.words[this.length-1],M=this._countBits(K);return(this.length-1)*26+M};function N(K){var M=Array(K.bitLength());for(var j=0;j<M.length;j++){var O=j/26|0,R=j%26;M[j]=(K.words[O]&1<<R)>>>R}return M}J.prototype.zeroBits=function(){if(this.isZero())return 0;var K=0;for(var M=0;M<this.length;M++){var j=this._zeroBits(this.words[M]);if(K+=j,j!==26)break}return K},J.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},J.prototype.toTwos=function(K){if(this.negative!==0)return this.abs().inotn(K).iaddn(1);return this.clone()},J.prototype.fromTwos=function(K){if(this.testn(K-1))return this.notn(K).iaddn(1).ineg();return this.clone()},J.prototype.isNeg=function(){return this.negative!==0},J.prototype.neg=function(){return this.clone().ineg()},J.prototype.ineg=function(){if(!this.isZero())this.negative^=1;return this},J.prototype.iuor=function(K){while(this.length<K.length)this.words[this.length++]=0;for(var M=0;M<K.length;M++)this.words[M]=this.words[M]|K.words[M];return this.strip()},J.prototype.ior=function(K){return Y((this.negative|K.negative)===0),this.iuor(K)},J.prototype.or=function(K){if(this.length>K.length)return this.clone().ior(K);return K.clone().ior(this)},J.prototype.uor=function(K){if(this.length>K.length)return this.clone().iuor(K);return K.clone().iuor(this)},J.prototype.iuand=function(K){var M;if(this.length>K.length)M=K;else M=this;for(var j=0;j<M.length;j++)this.words[j]=this.words[j]&K.words[j];return this.length=M.length,this.strip()},J.prototype.iand=function(K){return Y((this.negative|K.negative)===0),this.iuand(K)},J.prototype.and=function(K){if(this.length>K.length)return this.clone().iand(K);return K.clone().iand(this)},J.prototype.uand=function(K){if(this.length>K.length)return this.clone().iuand(K);return K.clone().iuand(this)},J.prototype.iuxor=function(K){var M,j;if(this.length>K.length)M=this,j=K;else M=K,j=this;for(var O=0;O<j.length;O++)this.words[O]=M.words[O]^j.words[O];if(this!==M)for(;O<M.length;O++)this.words[O]=M.words[O];return this.length=M.length,this.strip()},J.prototype.ixor=function(K){return Y((this.negative|K.negative)===0),this.iuxor(K)},J.prototype.xor=function(K){if(this.length>K.length)return this.clone().ixor(K);return K.clone().ixor(this)},J.prototype.uxor=function(K){if(this.length>K.length)return this.clone().iuxor(K);return K.clone().iuxor(this)},J.prototype.inotn=function(K){Y(typeof K==="number"&&K>=0);var M=Math.ceil(K/26)|0,j=K%26;if(this._expand(M),j>0)M--;for(var O=0;O<M;O++)this.words[O]=~this.words[O]&67108863;if(j>0)this.words[O]=~this.words[O]&67108863>>26-j;return this.strip()},J.prototype.notn=function(K){return this.clone().inotn(K)},J.prototype.setn=function(K,M){Y(typeof K==="number"&&K>=0);var j=K/26|0,O=K%26;if(this._expand(j+1),M)this.words[j]=this.words[j]|1<<O;else this.words[j]=this.words[j]&~(1<<O);return this.strip()},J.prototype.iadd=function(K){var M;if(this.negative!==0&&K.negative===0)return this.negative=0,M=this.isub(K),this.negative^=1,this._normSign();else if(this.negative===0&&K.negative!==0)return K.negative=0,M=this.isub(K),K.negative=1,M._normSign();var j,O;if(this.length>K.length)j=this,O=K;else j=K,O=this;var R=0;for(var F=0;F<O.length;F++)M=(j.words[F]|0)+(O.words[F]|0)+R,this.words[F]=M&67108863,R=M>>>26;for(;R!==0&&F<j.length;F++)M=(j.words[F]|0)+R,this.words[F]=M&67108863,R=M>>>26;if(this.length=j.length,R!==0)this.words[this.length]=R,this.length++;else if(j!==this)for(;F<j.length;F++)this.words[F]=j.words[F];return this},J.prototype.add=function(K){var M;if(K.negative!==0&&this.negative===0)return K.negative=0,M=this.sub(K),K.negative^=1,M;else if(K.negative===0&&this.negative!==0)return this.negative=0,M=K.sub(this),this.negative=1,M;if(this.length>K.length)return this.clone().iadd(K);return K.clone().iadd(this)},J.prototype.isub=function(K){if(K.negative!==0){K.negative=0;var M=this.iadd(K);return K.negative=1,M._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(K),this.negative=1,this._normSign();var j=this.cmp(K);if(j===0)return this.negative=0,this.length=1,this.words[0]=0,this;var O,R;if(j>0)O=this,R=K;else O=K,R=this;var F=0;for(var A=0;A<R.length;A++)M=(O.words[A]|0)-(R.words[A]|0)+F,F=M>>26,this.words[A]=M&67108863;for(;F!==0&&A<O.length;A++)M=(O.words[A]|0)+F,F=M>>26,this.words[A]=M&67108863;if(F===0&&A<O.length&&O!==this)for(;A<O.length;A++)this.words[A]=O.words[A];if(this.length=Math.max(this.length,A),O!==this)this.negative=1;return this.strip()},J.prototype.sub=function(K){return this.clone().isub(K)};function C(K,M,j){j.negative=M.negative^K.negative;var O=K.length+M.length|0;j.length=O,O=O-1|0;var R=K.words[0]|0,F=M.words[0]|0,A=R*F,T=A&67108863,V=A/67108864|0;j.words[0]=T;for(var w=1;w<O;w++){var k=V>>>26,S=V&67108863,y=Math.min(w,M.length-1);for(var u=Math.max(0,w-K.length+1);u<=y;u++){var c=w-u|0;R=K.words[c]|0,F=M.words[u]|0,A=R*F+S,k+=A/67108864|0,S=A&67108863}j.words[w]=S|0,V=k|0}if(V!==0)j.words[w]=V|0;else j.length--;return j.strip()}var L=function(K,M,j){var O=K.words,R=M.words,F=j.words,A=0,T,V,w,k=O[0]|0,S=k&8191,y=k>>>13,u=O[1]|0,c=u&8191,o=u>>>13,z0=O[2]|0,e=z0&8191,s=z0>>>13,J0=O[3]|0,t=J0&8191,Z0=J0>>>13,N0=O[4]|0,i=N0&8191,l=N0>>>13,q0=O[5]|0,Y0=q0&8191,K0=q0>>>13,k0=O[6]|0,a=k0&8191,X0=k0>>>13,n0=O[7]|0,W0=n0&8191,V0=n0>>>13,H1=O[8]|0,D0=H1&8191,j0=H1>>>13,g1=O[9]|0,T0=g1&8191,R0=g1>>>13,s1=R[0]|0,B0=s1&8191,C0=s1>>>13,g6=R[1]|0,m0=g6&8191,l0=g6>>>13,C6=R[2]|0,y0=C6&8191,u0=C6>>>13,W8=R[3]|0,d0=W8&8191,v0=W8>>>13,o6=R[4]|0,i0=o6&8191,c0=o6>>>13,M5=R[5]|0,_0=M5&8191,d=M5>>>13,$0=R[6]|0,G0=$0&8191,O0=$0>>>13,s0=R[7]|0,E0=s0&8191,S0=s0>>>13,T5=R[8]|0,g0=T5&8191,p0=T5>>>13,_6=R[9]|0,h0=_6&8191,o0=_6>>>13;j.negative=K.negative^M.negative,j.length=19,T=Math.imul(S,B0),V=Math.imul(S,C0),V=V+Math.imul(y,B0)|0,w=Math.imul(y,C0);var S6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(S6>>>26)|0,S6&=67108863,T=Math.imul(c,B0),V=Math.imul(c,C0),V=V+Math.imul(o,B0)|0,w=Math.imul(o,C0),T=T+Math.imul(S,m0)|0,V=V+Math.imul(S,l0)|0,V=V+Math.imul(y,m0)|0,w=w+Math.imul(y,l0)|0;var m1=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(m1>>>26)|0,m1&=67108863,T=Math.imul(e,B0),V=Math.imul(e,C0),V=V+Math.imul(s,B0)|0,w=Math.imul(s,C0),T=T+Math.imul(c,m0)|0,V=V+Math.imul(c,l0)|0,V=V+Math.imul(o,m0)|0,w=w+Math.imul(o,l0)|0,T=T+Math.imul(S,y0)|0,V=V+Math.imul(S,u0)|0,V=V+Math.imul(y,y0)|0,w=w+Math.imul(y,u0)|0;var k1=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(k1>>>26)|0,k1&=67108863,T=Math.imul(t,B0),V=Math.imul(t,C0),V=V+Math.imul(Z0,B0)|0,w=Math.imul(Z0,C0),T=T+Math.imul(e,m0)|0,V=V+Math.imul(e,l0)|0,V=V+Math.imul(s,m0)|0,w=w+Math.imul(s,l0)|0,T=T+Math.imul(c,y0)|0,V=V+Math.imul(c,u0)|0,V=V+Math.imul(o,y0)|0,w=w+Math.imul(o,u0)|0,T=T+Math.imul(S,d0)|0,V=V+Math.imul(S,v0)|0,V=V+Math.imul(y,d0)|0,w=w+Math.imul(y,v0)|0;var g5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(g5>>>26)|0,g5&=67108863,T=Math.imul(i,B0),V=Math.imul(i,C0),V=V+Math.imul(l,B0)|0,w=Math.imul(l,C0),T=T+Math.imul(t,m0)|0,V=V+Math.imul(t,l0)|0,V=V+Math.imul(Z0,m0)|0,w=w+Math.imul(Z0,l0)|0,T=T+Math.imul(e,y0)|0,V=V+Math.imul(e,u0)|0,V=V+Math.imul(s,y0)|0,w=w+Math.imul(s,u0)|0,T=T+Math.imul(c,d0)|0,V=V+Math.imul(c,v0)|0,V=V+Math.imul(o,d0)|0,w=w+Math.imul(o,v0)|0,T=T+Math.imul(S,i0)|0,V=V+Math.imul(S,c0)|0,V=V+Math.imul(y,i0)|0,w=w+Math.imul(y,c0)|0;var P5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(P5>>>26)|0,P5&=67108863,T=Math.imul(Y0,B0),V=Math.imul(Y0,C0),V=V+Math.imul(K0,B0)|0,w=Math.imul(K0,C0),T=T+Math.imul(i,m0)|0,V=V+Math.imul(i,l0)|0,V=V+Math.imul(l,m0)|0,w=w+Math.imul(l,l0)|0,T=T+Math.imul(t,y0)|0,V=V+Math.imul(t,u0)|0,V=V+Math.imul(Z0,y0)|0,w=w+Math.imul(Z0,u0)|0,T=T+Math.imul(e,d0)|0,V=V+Math.imul(e,v0)|0,V=V+Math.imul(s,d0)|0,w=w+Math.imul(s,v0)|0,T=T+Math.imul(c,i0)|0,V=V+Math.imul(c,c0)|0,V=V+Math.imul(o,i0)|0,w=w+Math.imul(o,c0)|0,T=T+Math.imul(S,_0)|0,V=V+Math.imul(S,d)|0,V=V+Math.imul(y,_0)|0,w=w+Math.imul(y,d)|0;var v1=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(v1>>>26)|0,v1&=67108863,T=Math.imul(a,B0),V=Math.imul(a,C0),V=V+Math.imul(X0,B0)|0,w=Math.imul(X0,C0),T=T+Math.imul(Y0,m0)|0,V=V+Math.imul(Y0,l0)|0,V=V+Math.imul(K0,m0)|0,w=w+Math.imul(K0,l0)|0,T=T+Math.imul(i,y0)|0,V=V+Math.imul(i,u0)|0,V=V+Math.imul(l,y0)|0,w=w+Math.imul(l,u0)|0,T=T+Math.imul(t,d0)|0,V=V+Math.imul(t,v0)|0,V=V+Math.imul(Z0,d0)|0,w=w+Math.imul(Z0,v0)|0,T=T+Math.imul(e,i0)|0,V=V+Math.imul(e,c0)|0,V=V+Math.imul(s,i0)|0,w=w+Math.imul(s,c0)|0,T=T+Math.imul(c,_0)|0,V=V+Math.imul(c,d)|0,V=V+Math.imul(o,_0)|0,w=w+Math.imul(o,d)|0,T=T+Math.imul(S,G0)|0,V=V+Math.imul(S,O0)|0,V=V+Math.imul(y,G0)|0,w=w+Math.imul(y,O0)|0;var o1=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(o1>>>26)|0,o1&=67108863,T=Math.imul(W0,B0),V=Math.imul(W0,C0),V=V+Math.imul(V0,B0)|0,w=Math.imul(V0,C0),T=T+Math.imul(a,m0)|0,V=V+Math.imul(a,l0)|0,V=V+Math.imul(X0,m0)|0,w=w+Math.imul(X0,l0)|0,T=T+Math.imul(Y0,y0)|0,V=V+Math.imul(Y0,u0)|0,V=V+Math.imul(K0,y0)|0,w=w+Math.imul(K0,u0)|0,T=T+Math.imul(i,d0)|0,V=V+Math.imul(i,v0)|0,V=V+Math.imul(l,d0)|0,w=w+Math.imul(l,v0)|0,T=T+Math.imul(t,i0)|0,V=V+Math.imul(t,c0)|0,V=V+Math.imul(Z0,i0)|0,w=w+Math.imul(Z0,c0)|0,T=T+Math.imul(e,_0)|0,V=V+Math.imul(e,d)|0,V=V+Math.imul(s,_0)|0,w=w+Math.imul(s,d)|0,T=T+Math.imul(c,G0)|0,V=V+Math.imul(c,O0)|0,V=V+Math.imul(o,G0)|0,w=w+Math.imul(o,O0)|0,T=T+Math.imul(S,E0)|0,V=V+Math.imul(S,S0)|0,V=V+Math.imul(y,E0)|0,w=w+Math.imul(y,S0)|0;var Y6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(Y6>>>26)|0,Y6&=67108863,T=Math.imul(D0,B0),V=Math.imul(D0,C0),V=V+Math.imul(j0,B0)|0,w=Math.imul(j0,C0),T=T+Math.imul(W0,m0)|0,V=V+Math.imul(W0,l0)|0,V=V+Math.imul(V0,m0)|0,w=w+Math.imul(V0,l0)|0,T=T+Math.imul(a,y0)|0,V=V+Math.imul(a,u0)|0,V=V+Math.imul(X0,y0)|0,w=w+Math.imul(X0,u0)|0,T=T+Math.imul(Y0,d0)|0,V=V+Math.imul(Y0,v0)|0,V=V+Math.imul(K0,d0)|0,w=w+Math.imul(K0,v0)|0,T=T+Math.imul(i,i0)|0,V=V+Math.imul(i,c0)|0,V=V+Math.imul(l,i0)|0,w=w+Math.imul(l,c0)|0,T=T+Math.imul(t,_0)|0,V=V+Math.imul(t,d)|0,V=V+Math.imul(Z0,_0)|0,w=w+Math.imul(Z0,d)|0,T=T+Math.imul(e,G0)|0,V=V+Math.imul(e,O0)|0,V=V+Math.imul(s,G0)|0,w=w+Math.imul(s,O0)|0,T=T+Math.imul(c,E0)|0,V=V+Math.imul(c,S0)|0,V=V+Math.imul(o,E0)|0,w=w+Math.imul(o,S0)|0,T=T+Math.imul(S,g0)|0,V=V+Math.imul(S,p0)|0,V=V+Math.imul(y,g0)|0,w=w+Math.imul(y,p0)|0;var J6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(J6>>>26)|0,J6&=67108863,T=Math.imul(T0,B0),V=Math.imul(T0,C0),V=V+Math.imul(R0,B0)|0,w=Math.imul(R0,C0),T=T+Math.imul(D0,m0)|0,V=V+Math.imul(D0,l0)|0,V=V+Math.imul(j0,m0)|0,w=w+Math.imul(j0,l0)|0,T=T+Math.imul(W0,y0)|0,V=V+Math.imul(W0,u0)|0,V=V+Math.imul(V0,y0)|0,w=w+Math.imul(V0,u0)|0,T=T+Math.imul(a,d0)|0,V=V+Math.imul(a,v0)|0,V=V+Math.imul(X0,d0)|0,w=w+Math.imul(X0,v0)|0,T=T+Math.imul(Y0,i0)|0,V=V+Math.imul(Y0,c0)|0,V=V+Math.imul(K0,i0)|0,w=w+Math.imul(K0,c0)|0,T=T+Math.imul(i,_0)|0,V=V+Math.imul(i,d)|0,V=V+Math.imul(l,_0)|0,w=w+Math.imul(l,d)|0,T=T+Math.imul(t,G0)|0,V=V+Math.imul(t,O0)|0,V=V+Math.imul(Z0,G0)|0,w=w+Math.imul(Z0,O0)|0,T=T+Math.imul(e,E0)|0,V=V+Math.imul(e,S0)|0,V=V+Math.imul(s,E0)|0,w=w+Math.imul(s,S0)|0,T=T+Math.imul(c,g0)|0,V=V+Math.imul(c,p0)|0,V=V+Math.imul(o,g0)|0,w=w+Math.imul(o,p0)|0,T=T+Math.imul(S,h0)|0,V=V+Math.imul(S,o0)|0,V=V+Math.imul(y,h0)|0,w=w+Math.imul(y,o0)|0;var _5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(_5>>>26)|0,_5&=67108863,T=Math.imul(T0,m0),V=Math.imul(T0,l0),V=V+Math.imul(R0,m0)|0,w=Math.imul(R0,l0),T=T+Math.imul(D0,y0)|0,V=V+Math.imul(D0,u0)|0,V=V+Math.imul(j0,y0)|0,w=w+Math.imul(j0,u0)|0,T=T+Math.imul(W0,d0)|0,V=V+Math.imul(W0,v0)|0,V=V+Math.imul(V0,d0)|0,w=w+Math.imul(V0,v0)|0,T=T+Math.imul(a,i0)|0,V=V+Math.imul(a,c0)|0,V=V+Math.imul(X0,i0)|0,w=w+Math.imul(X0,c0)|0,T=T+Math.imul(Y0,_0)|0,V=V+Math.imul(Y0,d)|0,V=V+Math.imul(K0,_0)|0,w=w+Math.imul(K0,d)|0,T=T+Math.imul(i,G0)|0,V=V+Math.imul(i,O0)|0,V=V+Math.imul(l,G0)|0,w=w+Math.imul(l,O0)|0,T=T+Math.imul(t,E0)|0,V=V+Math.imul(t,S0)|0,V=V+Math.imul(Z0,E0)|0,w=w+Math.imul(Z0,S0)|0,T=T+Math.imul(e,g0)|0,V=V+Math.imul(e,p0)|0,V=V+Math.imul(s,g0)|0,w=w+Math.imul(s,p0)|0,T=T+Math.imul(c,h0)|0,V=V+Math.imul(c,o0)|0,V=V+Math.imul(o,h0)|0,w=w+Math.imul(o,o0)|0;var S5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(S5>>>26)|0,S5&=67108863,T=Math.imul(T0,y0),V=Math.imul(T0,u0),V=V+Math.imul(R0,y0)|0,w=Math.imul(R0,u0),T=T+Math.imul(D0,d0)|0,V=V+Math.imul(D0,v0)|0,V=V+Math.imul(j0,d0)|0,w=w+Math.imul(j0,v0)|0,T=T+Math.imul(W0,i0)|0,V=V+Math.imul(W0,c0)|0,V=V+Math.imul(V0,i0)|0,w=w+Math.imul(V0,c0)|0,T=T+Math.imul(a,_0)|0,V=V+Math.imul(a,d)|0,V=V+Math.imul(X0,_0)|0,w=w+Math.imul(X0,d)|0,T=T+Math.imul(Y0,G0)|0,V=V+Math.imul(Y0,O0)|0,V=V+Math.imul(K0,G0)|0,w=w+Math.imul(K0,O0)|0,T=T+Math.imul(i,E0)|0,V=V+Math.imul(i,S0)|0,V=V+Math.imul(l,E0)|0,w=w+Math.imul(l,S0)|0,T=T+Math.imul(t,g0)|0,V=V+Math.imul(t,p0)|0,V=V+Math.imul(Z0,g0)|0,w=w+Math.imul(Z0,p0)|0,T=T+Math.imul(e,h0)|0,V=V+Math.imul(e,o0)|0,V=V+Math.imul(s,h0)|0,w=w+Math.imul(s,o0)|0;var F5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(F5>>>26)|0,F5&=67108863,T=Math.imul(T0,d0),V=Math.imul(T0,v0),V=V+Math.imul(R0,d0)|0,w=Math.imul(R0,v0),T=T+Math.imul(D0,i0)|0,V=V+Math.imul(D0,c0)|0,V=V+Math.imul(j0,i0)|0,w=w+Math.imul(j0,c0)|0,T=T+Math.imul(W0,_0)|0,V=V+Math.imul(W0,d)|0,V=V+Math.imul(V0,_0)|0,w=w+Math.imul(V0,d)|0,T=T+Math.imul(a,G0)|0,V=V+Math.imul(a,O0)|0,V=V+Math.imul(X0,G0)|0,w=w+Math.imul(X0,O0)|0,T=T+Math.imul(Y0,E0)|0,V=V+Math.imul(Y0,S0)|0,V=V+Math.imul(K0,E0)|0,w=w+Math.imul(K0,S0)|0,T=T+Math.imul(i,g0)|0,V=V+Math.imul(i,p0)|0,V=V+Math.imul(l,g0)|0,w=w+Math.imul(l,p0)|0,T=T+Math.imul(t,h0)|0,V=V+Math.imul(t,o0)|0,V=V+Math.imul(Z0,h0)|0,w=w+Math.imul(Z0,o0)|0;var h5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(h5>>>26)|0,h5&=67108863,T=Math.imul(T0,i0),V=Math.imul(T0,c0),V=V+Math.imul(R0,i0)|0,w=Math.imul(R0,c0),T=T+Math.imul(D0,_0)|0,V=V+Math.imul(D0,d)|0,V=V+Math.imul(j0,_0)|0,w=w+Math.imul(j0,d)|0,T=T+Math.imul(W0,G0)|0,V=V+Math.imul(W0,O0)|0,V=V+Math.imul(V0,G0)|0,w=w+Math.imul(V0,O0)|0,T=T+Math.imul(a,E0)|0,V=V+Math.imul(a,S0)|0,V=V+Math.imul(X0,E0)|0,w=w+Math.imul(X0,S0)|0,T=T+Math.imul(Y0,g0)|0,V=V+Math.imul(Y0,p0)|0,V=V+Math.imul(K0,g0)|0,w=w+Math.imul(K0,p0)|0,T=T+Math.imul(i,h0)|0,V=V+Math.imul(i,o0)|0,V=V+Math.imul(l,h0)|0,w=w+Math.imul(l,o0)|0;var A5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(A5>>>26)|0,A5&=67108863,T=Math.imul(T0,_0),V=Math.imul(T0,d),V=V+Math.imul(R0,_0)|0,w=Math.imul(R0,d),T=T+Math.imul(D0,G0)|0,V=V+Math.imul(D0,O0)|0,V=V+Math.imul(j0,G0)|0,w=w+Math.imul(j0,O0)|0,T=T+Math.imul(W0,E0)|0,V=V+Math.imul(W0,S0)|0,V=V+Math.imul(V0,E0)|0,w=w+Math.imul(V0,S0)|0,T=T+Math.imul(a,g0)|0,V=V+Math.imul(a,p0)|0,V=V+Math.imul(X0,g0)|0,w=w+Math.imul(X0,p0)|0,T=T+Math.imul(Y0,h0)|0,V=V+Math.imul(Y0,o0)|0,V=V+Math.imul(K0,h0)|0,w=w+Math.imul(K0,o0)|0;var z6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(z6>>>26)|0,z6&=67108863,T=Math.imul(T0,G0),V=Math.imul(T0,O0),V=V+Math.imul(R0,G0)|0,w=Math.imul(R0,O0),T=T+Math.imul(D0,E0)|0,V=V+Math.imul(D0,S0)|0,V=V+Math.imul(j0,E0)|0,w=w+Math.imul(j0,S0)|0,T=T+Math.imul(W0,g0)|0,V=V+Math.imul(W0,p0)|0,V=V+Math.imul(V0,g0)|0,w=w+Math.imul(V0,p0)|0,T=T+Math.imul(a,h0)|0,V=V+Math.imul(a,o0)|0,V=V+Math.imul(X0,h0)|0,w=w+Math.imul(X0,o0)|0;var n6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(n6>>>26)|0,n6&=67108863,T=Math.imul(T0,E0),V=Math.imul(T0,S0),V=V+Math.imul(R0,E0)|0,w=Math.imul(R0,S0),T=T+Math.imul(D0,g0)|0,V=V+Math.imul(D0,p0)|0,V=V+Math.imul(j0,g0)|0,w=w+Math.imul(j0,p0)|0,T=T+Math.imul(W0,h0)|0,V=V+Math.imul(W0,o0)|0,V=V+Math.imul(V0,h0)|0,w=w+Math.imul(V0,o0)|0;var K8=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(K8>>>26)|0,K8&=67108863,T=Math.imul(T0,g0),V=Math.imul(T0,p0),V=V+Math.imul(R0,g0)|0,w=Math.imul(R0,p0),T=T+Math.imul(D0,h0)|0,V=V+Math.imul(D0,o0)|0,V=V+Math.imul(j0,h0)|0,w=w+Math.imul(j0,o0)|0;var b6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(b6>>>26)|0,b6&=67108863,T=Math.imul(T0,h0),V=Math.imul(T0,o0),V=V+Math.imul(R0,h0)|0,w=Math.imul(R0,o0);var r6=(A+T|0)+((V&8191)<<13)|0;if(A=(w+(V>>>13)|0)+(r6>>>26)|0,r6&=67108863,F[0]=S6,F[1]=m1,F[2]=k1,F[3]=g5,F[4]=P5,F[5]=v1,F[6]=o1,F[7]=Y6,F[8]=J6,F[9]=_5,F[10]=S5,F[11]=F5,F[12]=h5,F[13]=A5,F[14]=z6,F[15]=n6,F[16]=K8,F[17]=b6,F[18]=r6,A!==0)F[19]=A,j.length++;return j};if(!Math.imul)L=C;function B(K,M,j){j.negative=M.negative^K.negative,j.length=K.length+M.length;var O=0,R=0;for(var F=0;F<j.length-1;F++){var A=R;R=0;var T=O&67108863,V=Math.min(F,M.length-1);for(var w=Math.max(0,F-K.length+1);w<=V;w++){var k=F-w,S=K.words[k]|0,y=M.words[w]|0,u=S*y,c=u&67108863;A=A+(u/67108864|0)|0,c=c+T|0,T=c&67108863,A=A+(c>>>26)|0,R+=A>>>26,A&=67108863}j.words[F]=T,O=A,A=R}if(O!==0)j.words[F]=O;else j.length--;return j.strip()}function E(K,M,j){var O=new I;return O.mulp(K,M,j)}J.prototype.mulTo=function(K,M){var j,O=this.length+K.length;if(this.length===10&&K.length===10)j=L(this,K,M);else if(O<63)j=C(this,K,M);else if(O<1024)j=B(this,K,M);else j=E(this,K,M);return j};function I(K,M){this.x=K,this.y=M}I.prototype.makeRBT=function(K){var M=Array(K),j=J.prototype._countBits(K)-1;for(var O=0;O<K;O++)M[O]=this.revBin(O,j,K);return M},I.prototype.revBin=function(K,M,j){if(K===0||K===j-1)return K;var O=0;for(var R=0;R<M;R++)O|=(K&1)<<M-R-1,K>>=1;return O},I.prototype.permute=function(K,M,j,O,R,F){for(var A=0;A<F;A++)O[A]=M[K[A]],R[A]=j[K[A]]},I.prototype.transform=function(K,M,j,O,R,F){this.permute(F,K,M,j,O,R);for(var A=1;A<R;A<<=1){var T=A<<1,V=Math.cos(2*Math.PI/T),w=Math.sin(2*Math.PI/T);for(var k=0;k<R;k+=T){var S=V,y=w;for(var u=0;u<A;u++){var c=j[k+u],o=O[k+u],z0=j[k+u+A],e=O[k+u+A],s=S*z0-y*e;if(e=S*e+y*z0,z0=s,j[k+u]=c+z0,O[k+u]=o+e,j[k+u+A]=c-z0,O[k+u+A]=o-e,u!==T)s=V*S-w*y,y=V*y+w*S,S=s}}}},I.prototype.guessLen13b=function(K,M){var j=Math.max(M,K)|1,O=j&1,R=0;for(j=j/2|0;j;j=j>>>1)R++;return 1<<R+1+O},I.prototype.conjugate=function(K,M,j){if(j<=1)return;for(var O=0;O<j/2;O++){var R=K[O];K[O]=K[j-O-1],K[j-O-1]=R,R=M[O],M[O]=-M[j-O-1],M[j-O-1]=-R}},I.prototype.normalize13b=function(K,M){var j=0;for(var O=0;O<M/2;O++){var R=Math.round(K[2*O+1]/M)*8192+Math.round(K[2*O]/M)+j;if(K[O]=R&67108863,R<67108864)j=0;else j=R/67108864|0}return K},I.prototype.convert13b=function(K,M,j,O){var R=0;for(var F=0;F<M;F++)R=R+(K[F]|0),j[2*F]=R&8191,R=R>>>13,j[2*F+1]=R&8191,R=R>>>13;for(F=2*M;F<O;++F)j[F]=0;Y(R===0),Y((R&-8192)===0)},I.prototype.stub=function(K){var M=Array(K);for(var j=0;j<K;j++)M[j]=0;return M},I.prototype.mulp=function(K,M,j){var O=2*this.guessLen13b(K.length,M.length),R=this.makeRBT(O),F=this.stub(O),A=Array(O),T=Array(O),V=Array(O),w=Array(O),k=Array(O),S=Array(O),y=j.words;y.length=O,this.convert13b(K.words,K.length,A,O),this.convert13b(M.words,M.length,w,O),this.transform(A,F,T,V,O,R),this.transform(w,F,k,S,O,R);for(var u=0;u<O;u++){var c=T[u]*k[u]-V[u]*S[u];V[u]=T[u]*S[u]+V[u]*k[u],T[u]=c}return this.conjugate(T,V,O),this.transform(T,V,y,F,O,R),this.conjugate(y,F,O),this.normalize13b(y,O),j.negative=K.negative^M.negative,j.length=K.length+M.length,j.strip()},J.prototype.mul=function(K){var M=new J(null);return M.words=Array(this.length+K.length),this.mulTo(K,M)},J.prototype.mulf=function(K){var M=new J(null);return M.words=Array(this.length+K.length),E(this,K,M)},J.prototype.imul=function(K){return this.clone().mulTo(K,this)},J.prototype.imuln=function(K){Y(typeof K==="number"),Y(K<67108864);var M=0;for(var j=0;j<this.length;j++){var O=(this.words[j]|0)*K,R=(O&67108863)+(M&67108863);M>>=26,M+=O/67108864|0,M+=R>>>26,this.words[j]=R&67108863}if(M!==0)this.words[j]=M,this.length++;return this.length=K===0?1:this.length,this},J.prototype.muln=function(K){return this.clone().imuln(K)},J.prototype.sqr=function(){return this.mul(this)},J.prototype.isqr=function(){return this.imul(this.clone())},J.prototype.pow=function(K){var M=N(K);if(M.length===0)return new J(1);var j=this;for(var O=0;O<M.length;O++,j=j.sqr())if(M[O]!==0)break;if(++O<M.length)for(var R=j.sqr();O<M.length;O++,R=R.sqr()){if(M[O]===0)continue;j=j.mul(R)}return j},J.prototype.iushln=function(K){Y(typeof K==="number"&&K>=0);var M=K%26,j=(K-M)/26,O=67108863>>>26-M<<26-M,R;if(M!==0){var F=0;for(R=0;R<this.length;R++){var A=this.words[R]&O,T=(this.words[R]|0)-A<<M;this.words[R]=T|F,F=A>>>26-M}if(F)this.words[R]=F,this.length++}if(j!==0){for(R=this.length-1;R>=0;R--)this.words[R+j]=this.words[R];for(R=0;R<j;R++)this.words[R]=0;this.length+=j}return this.strip()},J.prototype.ishln=function(K){return Y(this.negative===0),this.iushln(K)},J.prototype.iushrn=function(K,M,j){Y(typeof K==="number"&&K>=0);var O;if(M)O=(M-M%26)/26;else O=0;var R=K%26,F=Math.min((K-R)/26,this.length),A=67108863^67108863>>>R<<R,T=j;if(O-=F,O=Math.max(0,O),T){for(var V=0;V<F;V++)T.words[V]=this.words[V];T.length=F}if(F===0);else if(this.length>F){this.length-=F;for(V=0;V<this.length;V++)this.words[V]=this.words[V+F]}else this.words[0]=0,this.length=1;var w=0;for(V=this.length-1;V>=0&&(w!==0||V>=O);V--){var k=this.words[V]|0;this.words[V]=w<<26-R|k>>>R,w=k&A}if(T&&w!==0)T.words[T.length++]=w;if(this.length===0)this.words[0]=0,this.length=1;return this.strip()},J.prototype.ishrn=function(K,M,j){return Y(this.negative===0),this.iushrn(K,M,j)},J.prototype.shln=function(K){return this.clone().ishln(K)},J.prototype.ushln=function(K){return this.clone().iushln(K)},J.prototype.shrn=function(K){return this.clone().ishrn(K)},J.prototype.ushrn=function(K){return this.clone().iushrn(K)},J.prototype.testn=function(K){Y(typeof K==="number"&&K>=0);var M=K%26,j=(K-M)/26,O=1<<M;if(this.length<=j)return!1;var R=this.words[j];return!!(R&O)},J.prototype.imaskn=function(K){Y(typeof K==="number"&&K>=0);var M=K%26,j=(K-M)/26;if(Y(this.negative===0,"imaskn works only with positive numbers"),this.length<=j)return this;if(M!==0)j++;if(this.length=Math.min(j,this.length),M!==0){var O=67108863^67108863>>>M<<M;this.words[this.length-1]&=O}return this.strip()},J.prototype.maskn=function(K){return this.clone().imaskn(K)},J.prototype.iaddn=function(K){if(Y(typeof K==="number"),Y(K<67108864),K<0)return this.isubn(-K);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<K)return this.words[0]=K-(this.words[0]|0),this.negative=0,this;return this.negative=0,this.isubn(K),this.negative=1,this}return this._iaddn(K)},J.prototype._iaddn=function(K){this.words[0]+=K;for(var M=0;M<this.length&&this.words[M]>=67108864;M++)if(this.words[M]-=67108864,M===this.length-1)this.words[M+1]=1;else this.words[M+1]++;return this.length=Math.max(this.length,M+1),this},J.prototype.isubn=function(K){if(Y(typeof K==="number"),Y(K<67108864),K<0)return this.iaddn(-K);if(this.negative!==0)return this.negative=0,this.iaddn(K),this.negative=1,this;if(this.words[0]-=K,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var M=0;M<this.length&&this.words[M]<0;M++)this.words[M]+=67108864,this.words[M+1]-=1;return this.strip()},J.prototype.addn=function(K){return this.clone().iaddn(K)},J.prototype.subn=function(K){return this.clone().isubn(K)},J.prototype.iabs=function(){return this.negative=0,this},J.prototype.abs=function(){return this.clone().iabs()},J.prototype._ishlnsubmul=function(K,M,j){var O=K.length+j,R;this._expand(O);var F,A=0;for(R=0;R<K.length;R++){F=(this.words[R+j]|0)+A;var T=(K.words[R]|0)*M;F-=T&67108863,A=(F>>26)-(T/67108864|0),this.words[R+j]=F&67108863}for(;R<this.length-j;R++)F=(this.words[R+j]|0)+A,A=F>>26,this.words[R+j]=F&67108863;if(A===0)return this.strip();Y(A===-1),A=0;for(R=0;R<this.length;R++)F=-(this.words[R]|0)+A,A=F>>26,this.words[R]=F&67108863;return this.negative=1,this.strip()},J.prototype._wordDiv=function(K,M){var j=this.length-K.length,O=this.clone(),R=K,F=R.words[R.length-1]|0,A=this._countBits(F);if(j=26-A,j!==0)R=R.ushln(j),O.iushln(j),F=R.words[R.length-1]|0;var T=O.length-R.length,V;if(M!=="mod"){V=new J(null),V.length=T+1,V.words=Array(V.length);for(var w=0;w<V.length;w++)V.words[w]=0}var k=O.clone()._ishlnsubmul(R,1,T);if(k.negative===0){if(O=k,V)V.words[T]=1}for(var S=T-1;S>=0;S--){var y=(O.words[R.length+S]|0)*67108864+(O.words[R.length+S-1]|0);y=Math.min(y/F|0,67108863),O._ishlnsubmul(R,y,S);while(O.negative!==0)if(y--,O.negative=0,O._ishlnsubmul(R,1,S),!O.isZero())O.negative^=1;if(V)V.words[S]=y}if(V)V.strip();if(O.strip(),M!=="div"&&j!==0)O.iushrn(j);return{div:V||null,mod:O}},J.prototype.divmod=function(K,M,j){if(Y(!K.isZero()),this.isZero())return{div:new J(0),mod:new J(0)};var O,R,F;if(this.negative!==0&&K.negative===0){if(F=this.neg().divmod(K,M),M!=="mod")O=F.div.neg();if(M!=="div"){if(R=F.mod.neg(),j&&R.negative!==0)R.iadd(K)}return{div:O,mod:R}}if(this.negative===0&&K.negative!==0){if(F=this.divmod(K.neg(),M),M!=="mod")O=F.div.neg();return{div:O,mod:F.mod}}if((this.negative&K.negative)!==0){if(F=this.neg().divmod(K.neg(),M),M!=="div"){if(R=F.mod.neg(),j&&R.negative!==0)R.isub(K)}return{div:F.div,mod:R}}if(K.length>this.length||this.cmp(K)<0)return{div:new J(0),mod:this};if(K.length===1){if(M==="div")return{div:this.divn(K.words[0]),mod:null};if(M==="mod")return{div:null,mod:new J(this.modn(K.words[0]))};return{div:this.divn(K.words[0]),mod:new J(this.modn(K.words[0]))}}return this._wordDiv(K,M)},J.prototype.div=function(K){return this.divmod(K,"div",!1).div},J.prototype.mod=function(K){return this.divmod(K,"mod",!1).mod},J.prototype.umod=function(K){return this.divmod(K,"mod",!0).mod},J.prototype.divRound=function(K){var M=this.divmod(K);if(M.mod.isZero())return M.div;var j=M.div.negative!==0?M.mod.isub(K):M.mod,O=K.ushrn(1),R=K.andln(1),F=j.cmp(O);if(F<0||R===1&&F===0)return M.div;return M.div.negative!==0?M.div.isubn(1):M.div.iaddn(1)},J.prototype.modn=function(K){Y(K<=67108863);var M=67108864%K,j=0;for(var O=this.length-1;O>=0;O--)j=(M*j+(this.words[O]|0))%K;return j},J.prototype.idivn=function(K){Y(K<=67108863);var M=0;for(var j=this.length-1;j>=0;j--){var O=(this.words[j]|0)+M*67108864;this.words[j]=O/K|0,M=O%K}return this.strip()},J.prototype.divn=function(K){return this.clone().idivn(K)},J.prototype.egcd=function(K){Y(K.negative===0),Y(!K.isZero());var M=this,j=K.clone();if(M.negative!==0)M=M.umod(K);else M=M.clone();var O=new J(1),R=new J(0),F=new J(0),A=new J(1),T=0;while(M.isEven()&&j.isEven())M.iushrn(1),j.iushrn(1),++T;var V=j.clone(),w=M.clone();while(!M.isZero()){for(var k=0,S=1;(M.words[0]&S)===0&&k<26;++k,S<<=1);if(k>0){M.iushrn(k);while(k-- >0){if(O.isOdd()||R.isOdd())O.iadd(V),R.isub(w);O.iushrn(1),R.iushrn(1)}}for(var y=0,u=1;(j.words[0]&u)===0&&y<26;++y,u<<=1);if(y>0){j.iushrn(y);while(y-- >0){if(F.isOdd()||A.isOdd())F.iadd(V),A.isub(w);F.iushrn(1),A.iushrn(1)}}if(M.cmp(j)>=0)M.isub(j),O.isub(F),R.isub(A);else j.isub(M),F.isub(O),A.isub(R)}return{a:F,b:A,gcd:j.iushln(T)}},J.prototype._invmp=function(K){Y(K.negative===0),Y(!K.isZero());var M=this,j=K.clone();if(M.negative!==0)M=M.umod(K);else M=M.clone();var O=new J(1),R=new J(0),F=j.clone();while(M.cmpn(1)>0&&j.cmpn(1)>0){for(var A=0,T=1;(M.words[0]&T)===0&&A<26;++A,T<<=1);if(A>0){M.iushrn(A);while(A-- >0){if(O.isOdd())O.iadd(F);O.iushrn(1)}}for(var V=0,w=1;(j.words[0]&w)===0&&V<26;++V,w<<=1);if(V>0){j.iushrn(V);while(V-- >0){if(R.isOdd())R.iadd(F);R.iushrn(1)}}if(M.cmp(j)>=0)M.isub(j),O.isub(R);else j.isub(M),R.isub(O)}var k;if(M.cmpn(1)===0)k=O;else k=R;if(k.cmpn(0)<0)k.iadd(K);return k},J.prototype.gcd=function(K){if(this.isZero())return K.abs();if(K.isZero())return this.abs();var M=this.clone(),j=K.clone();M.negative=0,j.negative=0;for(var O=0;M.isEven()&&j.isEven();O++)M.iushrn(1),j.iushrn(1);do{while(M.isEven())M.iushrn(1);while(j.isEven())j.iushrn(1);var R=M.cmp(j);if(R<0){var F=M;M=j,j=F}else if(R===0||j.cmpn(1)===0)break;M.isub(j)}while(!0);return j.iushln(O)},J.prototype.invm=function(K){return this.egcd(K).a.umod(K)},J.prototype.isEven=function(){return(this.words[0]&1)===0},J.prototype.isOdd=function(){return(this.words[0]&1)===1},J.prototype.andln=function(K){return this.words[0]&K},J.prototype.bincn=function(K){Y(typeof K==="number");var M=K%26,j=(K-M)/26,O=1<<M;if(this.length<=j)return this._expand(j+1),this.words[j]|=O,this;var R=O;for(var F=j;R!==0&&F<this.length;F++){var A=this.words[F]|0;A+=R,R=A>>>26,A&=67108863,this.words[F]=A}if(R!==0)this.words[F]=R,this.length++;return this},J.prototype.isZero=function(){return this.length===1&&this.words[0]===0},J.prototype.cmpn=function(K){var M=K<0;if(this.negative!==0&&!M)return-1;if(this.negative===0&&M)return 1;this.strip();var j;if(this.length>1)j=1;else{if(M)K=-K;Y(K<=67108863,"Number is too big");var O=this.words[0]|0;j=O===K?0:O<K?-1:1}if(this.negative!==0)return-j|0;return j},J.prototype.cmp=function(K){if(this.negative!==0&&K.negative===0)return-1;if(this.negative===0&&K.negative!==0)return 1;var M=this.ucmp(K);if(this.negative!==0)return-M|0;return M},J.prototype.ucmp=function(K){if(this.length>K.length)return 1;if(this.length<K.length)return-1;var M=0;for(var j=this.length-1;j>=0;j--){var O=this.words[j]|0,R=K.words[j]|0;if(O===R)continue;if(O<R)M=-1;else if(O>R)M=1;break}return M},J.prototype.gtn=function(K){return this.cmpn(K)===1},J.prototype.gt=function(K){return this.cmp(K)===1},J.prototype.gten=function(K){return this.cmpn(K)>=0},J.prototype.gte=function(K){return this.cmp(K)>=0},J.prototype.ltn=function(K){return this.cmpn(K)===-1},J.prototype.lt=function(K){return this.cmp(K)===-1},J.prototype.lten=function(K){return this.cmpn(K)<=0},J.prototype.lte=function(K){return this.cmp(K)<=0},J.prototype.eqn=function(K){return this.cmpn(K)===0},J.prototype.eq=function(K){return this.cmp(K)===0},J.red=function(K){return new b(K)},J.prototype.toRed=function(K){return Y(!this.red,"Already a number in reduction context"),Y(this.negative===0,"red works only with positives"),K.convertTo(this)._forceRed(K)},J.prototype.fromRed=function(){return Y(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},J.prototype._forceRed=function(K){return this.red=K,this},J.prototype.forceRed=function(K){return Y(!this.red,"Already a number in reduction context"),this._forceRed(K)},J.prototype.redAdd=function(K){return Y(this.red,"redAdd works only with red numbers"),this.red.add(this,K)},J.prototype.redIAdd=function(K){return Y(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,K)},J.prototype.redSub=function(K){return Y(this.red,"redSub works only with red numbers"),this.red.sub(this,K)},J.prototype.redISub=function(K){return Y(this.red,"redISub works only with red numbers"),this.red.isub(this,K)},J.prototype.redShl=function(K){return Y(this.red,"redShl works only with red numbers"),this.red.shl(this,K)},J.prototype.redMul=function(K){return Y(this.red,"redMul works only with red numbers"),this.red._verify2(this,K),this.red.mul(this,K)},J.prototype.redIMul=function(K){return Y(this.red,"redMul works only with red numbers"),this.red._verify2(this,K),this.red.imul(this,K)},J.prototype.redSqr=function(){return Y(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},J.prototype.redISqr=function(){return Y(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},J.prototype.redSqrt=function(){return Y(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},J.prototype.redInvm=function(){return Y(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},J.prototype.redNeg=function(){return Y(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},J.prototype.redPow=function(K){return Y(this.red&&!K.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,K)};var _={k256:null,p224:null,p192:null,p25519:null};function f(K,M){this.name=K,this.p=new J(M,16),this.n=this.p.bitLength(),this.k=new J(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}f.prototype._tmp=function(){var K=new J(null);return K.words=Array(Math.ceil(this.n/13)),K},f.prototype.ireduce=function(K){var M=K,j;do this.split(M,this.tmp),M=this.imulK(M),M=M.iadd(this.tmp),j=M.bitLength();while(j>this.n);var O=j<this.n?-1:M.ucmp(this.p);if(O===0)M.words[0]=0,M.length=1;else if(O>0)M.isub(this.p);else if(M.strip!==void 0)M.strip();else M._strip();return M},f.prototype.split=function(K,M){K.iushrn(this.n,0,M)},f.prototype.imulK=function(K){return K.imul(this.k)};function x(){f.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}z(x,f),x.prototype.split=function(K,M){var j=4194303,O=Math.min(K.length,9);for(var R=0;R<O;R++)M.words[R]=K.words[R];if(M.length=O,K.length<=9){K.words[0]=0,K.length=1;return}var F=K.words[9];M.words[M.length++]=F&j;for(R=10;R<K.length;R++){var A=K.words[R]|0;K.words[R-10]=(A&j)<<4|F>>>22,F=A}if(F>>>=22,K.words[R-10]=F,F===0&&K.length>10)K.length-=10;else K.length-=9},x.prototype.imulK=function(K){K.words[K.length]=0,K.words[K.length+1]=0,K.length+=2;var M=0;for(var j=0;j<K.length;j++){var O=K.words[j]|0;M+=O*977,K.words[j]=M&67108863,M=O*64+(M/67108864|0)}if(K.words[K.length-1]===0){if(K.length--,K.words[K.length-1]===0)K.length--}return K};function g(){f.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}z(g,f);function h(){f.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}z(h,f);function v(){f.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}z(v,f),v.prototype.imulK=function(K){var M=0;for(var j=0;j<K.length;j++){var O=(K.words[j]|0)*19+M,R=O&67108863;O>>>=26,K.words[j]=R,M=O}if(M!==0)K.words[K.length++]=M;return K},J._prime=function(K){if(_[K])return _[K];var M;if(K==="k256")M=new x;else if(K==="p224")M=new g;else if(K==="p192")M=new h;else if(K==="p25519")M=new v;else throw Error("Unknown prime "+K);return _[K]=M,M};function b(K){if(typeof K==="string"){var M=J._prime(K);this.m=M.p,this.prime=M}else Y(K.gtn(1),"modulus must be greater than 1"),this.m=K,this.prime=null}b.prototype._verify1=function(K){Y(K.negative===0,"red works only with positives"),Y(K.red,"red works only with red numbers")},b.prototype._verify2=function(K,M){Y((K.negative|M.negative)===0,"red works only with positives"),Y(K.red&&K.red===M.red,"red works only with red numbers")},b.prototype.imod=function(K){if(this.prime)return this.prime.ireduce(K)._forceRed(this);return K.umod(this.m)._forceRed(this)},b.prototype.neg=function(K){if(K.isZero())return K.clone();return this.m.sub(K)._forceRed(this)},b.prototype.add=function(K,M){this._verify2(K,M);var j=K.add(M);if(j.cmp(this.m)>=0)j.isub(this.m);return j._forceRed(this)},b.prototype.iadd=function(K,M){this._verify2(K,M);var j=K.iadd(M);if(j.cmp(this.m)>=0)j.isub(this.m);return j},b.prototype.sub=function(K,M){this._verify2(K,M);var j=K.sub(M);if(j.cmpn(0)<0)j.iadd(this.m);return j._forceRed(this)},b.prototype.isub=function(K,M){this._verify2(K,M);var j=K.isub(M);if(j.cmpn(0)<0)j.iadd(this.m);return j},b.prototype.shl=function(K,M){return this._verify1(K),this.imod(K.ushln(M))},b.prototype.imul=function(K,M){return this._verify2(K,M),this.imod(K.imul(M))},b.prototype.mul=function(K,M){return this._verify2(K,M),this.imod(K.mul(M))},b.prototype.isqr=function(K){return this.imul(K,K.clone())},b.prototype.sqr=function(K){return this.mul(K,K)},b.prototype.sqrt=function(K){if(K.isZero())return K.clone();var M=this.m.andln(3);if(Y(M%2===1),M===3){var j=this.m.add(new J(1)).iushrn(2);return this.pow(K,j)}var O=this.m.subn(1),R=0;while(!O.isZero()&&O.andln(1)===0)R++,O.iushrn(1);Y(!O.isZero());var F=new J(1).toRed(this),A=F.redNeg(),T=this.m.subn(1).iushrn(1),V=this.m.bitLength();V=new J(2*V*V).toRed(this);while(this.pow(V,T).cmp(A)!==0)V.redIAdd(A);var w=this.pow(V,O),k=this.pow(K,O.addn(1).iushrn(1)),S=this.pow(K,O),y=R;while(S.cmp(F)!==0){var u=S;for(var c=0;u.cmp(F)!==0;c++)u=u.redSqr();Y(c<y);var o=this.pow(w,new J(1).iushln(y-c-1));k=k.redMul(o),w=o.redSqr(),S=S.redMul(w),y=c}return k},b.prototype.invm=function(K){var M=K._invmp(this.m);if(M.negative!==0)return M.negative=0,this.imod(M).redNeg();else return this.imod(M)},b.prototype.pow=function(K,M){if(M.isZero())return new J(1).toRed(this);if(M.cmpn(1)===0)return K.clone();var j=4,O=Array(1<<j);O[0]=new J(1).toRed(this),O[1]=K;for(var R=2;R<O.length;R++)O[R]=this.mul(O[R-1],K);var F=O[0],A=0,T=0,V=M.bitLength()%26;if(V===0)V=26;for(R=M.length-1;R>=0;R--){var w=M.words[R];for(var k=V-1;k>=0;k--){var S=w>>k&1;if(F!==O[0])F=this.sqr(F);if(S===0&&A===0){T=0;continue}if(A<<=1,A|=S,T++,T!==j&&(R!==0||k!==0))continue;F=this.mul(F,O[A]),T=0,A=0}V=26}return F},b.prototype.convertTo=function(K){var M=K.umod(this.m);return M===K?M.clone():M},b.prototype.convertFrom=function(K){var M=K.clone();return M.red=null,M},J.mont=function(K){return new m(K)};function m(K){if(b.call(this,K),this.shift=this.m.bitLength(),this.shift%26!==0)this.shift+=26-this.shift%26;this.r=new J(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}z(m,b),m.prototype.convertTo=function(K){return this.imod(K.ushln(this.shift))},m.prototype.convertFrom=function(K){var M=this.imod(K.mul(this.rinv));return M.red=null,M},m.prototype.imul=function(K,M){if(K.isZero()||M.isZero())return K.words[0]=0,K.length=1,K;var j=K.imul(M),O=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=j.isub(O).iushrn(this.shift),F=R;if(R.cmp(this.m)>=0)F=R.isub(this.m);else if(R.cmpn(0)<0)F=R.iadd(this.m);return F._forceRed(this)},m.prototype.mul=function(K,M){if(K.isZero()||M.isZero())return new J(0)._forceRed(this);var j=K.mul(M),O=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=j.isub(O).iushrn(this.shift),F=R;if(R.cmp(this.m)>=0)F=R.isub(this.m);else if(R.cmpn(0)<0)F=R.iadd(this.m);return F._forceRed(this)},m.prototype.invm=function(K){var M=this.imod(K._invmp(this.m).mul(this.r2));return M._forceRed(this)}})(typeof Q>"u"||Q,$)}),gG0=A0(($,Q)=>{var Z=vG0(),X=yG0();Q.exports=function(q){return new z(q)};var Y={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};Y.p224=Y.secp224r1,Y.p256=Y.secp256r1=Y.prime256v1,Y.p192=Y.secp192r1=Y.prime192v1,Y.p384=Y.secp384r1,Y.p521=Y.secp521r1;function z(q){if(this.curveType=Y[q],!this.curveType)this.curveType={name:q};this.curve=new Z.ec(this.curveType.name),this.keys=void 0}z.prototype.generateKeys=function(q,W){return this.keys=this.curve.genKeyPair(),this.getPublicKey(q,W)},z.prototype.computeSecret=function(q,W,G){if(W=W||"utf8",!Buffer.isBuffer(q))q=new Buffer(q,W);var U=this.curve.keyFromPublic(q).getPublic(),D=U.mul(this.keys.getPrivate()).getX();return J(D,G,this.curveType.byteLength)},z.prototype.getPublicKey=function(q,W){var G=this.keys.getPublic(W==="compressed",!0);if(W==="hybrid")if(G[G.length-1]%2)G[0]=7;else G[0]=6;return J(G,q)},z.prototype.getPrivateKey=function(q){return J(this.keys.getPrivate(),q)},z.prototype.setPublicKey=function(q,W){if(W=W||"utf8",!Buffer.isBuffer(q))q=new Buffer(q,W);return this.keys._importPublic(q),this},z.prototype.setPrivateKey=function(q,W){if(W=W||"utf8",!Buffer.isBuffer(q))q=new Buffer(q,W);var G=new X(q);return G=G.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(G),this};function J(q,W,G){if(!Array.isArray(q))q=q.toArray();var U=new Buffer(q);if(G&&U.length<G){var D=new Buffer(G-U.length);D.fill(0),U=Buffer.concat([D,U])}if(!W)return U;else return U.toString(W)}}),hG0=A0(($,Q)=>{var Z=(E9(),Q5(O9)).createECDH;Q.exports=Z||gG0()}),mG0=A0(($,Q)=>{(function(Z,X){function Y(K,M){if(!K)throw Error(M||"Assertion failed")}function z(K,M){K.super_=M;var j=function(){};j.prototype=M.prototype,K.prototype=new j,K.prototype.constructor=K}function J(K,M,j){if(J.isBN(K))return K;if(this.negative=0,this.words=null,this.length=0,this.red=null,K!==null){if(M==="le"||M==="be")j=M,M=10;this._init(K||0,M||10,j||"be")}}if(typeof Z==="object")Z.exports=J;else X.BN=J;J.BN=J,J.wordSize=26;var q;try{if(typeof window<"u"&&typeof window.Buffer<"u")q=window.Buffer;else q=(s6(),Q5(T8)).Buffer}catch(K){}J.isBN=function(K){if(K instanceof J)return!0;return K!==null&&typeof K==="object"&&K.constructor.wordSize===J.wordSize&&Array.isArray(K.words)},J.max=function(K,M){if(K.cmp(M)>0)return K;return M},J.min=function(K,M){if(K.cmp(M)<0)return K;return M},J.prototype._init=function(K,M,j){if(typeof K==="number")return this._initNumber(K,M,j);if(typeof K==="object")return this._initArray(K,M,j);if(M==="hex")M=16;Y(M===(M|0)&&M>=2&&M<=36),K=K.toString().replace(/\s+/g,"");var O=0;if(K[0]==="-")O++,this.negative=1;if(O<K.length){if(M===16)this._parseHex(K,O,j);else if(this._parseBase(K,M,O),j==="le")this._initArray(this.toArray(),M,j)}},J.prototype._initNumber=function(K,M,j){if(K<0)this.negative=1,K=-K;if(K<67108864)this.words=[K&67108863],this.length=1;else if(K<4503599627370496)this.words=[K&67108863,K/67108864&67108863],this.length=2;else Y(K<9007199254740992),this.words=[K&67108863,K/67108864&67108863,1],this.length=3;if(j!=="le")return;this._initArray(this.toArray(),M,j)},J.prototype._initArray=function(K,M,j){if(Y(typeof K.length==="number"),K.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(K.length/3),this.words=Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var R,F,A=0;if(j==="be"){for(O=K.length-1,R=0;O>=0;O-=3)if(F=K[O]|K[O-1]<<8|K[O-2]<<16,this.words[R]|=F<<A&67108863,this.words[R+1]=F>>>26-A&67108863,A+=24,A>=26)A-=26,R++}else if(j==="le"){for(O=0,R=0;O<K.length;O+=3)if(F=K[O]|K[O+1]<<8|K[O+2]<<16,this.words[R]|=F<<A&67108863,this.words[R+1]=F>>>26-A&67108863,A+=24,A>=26)A-=26,R++}return this.strip()};function W(K,M){var j=K.charCodeAt(M);if(j>=65&&j<=70)return j-55;else if(j>=97&&j<=102)return j-87;else return j-48&15}function G(K,M,j){var O=W(K,j);if(j-1>=M)O|=W(K,j-1)<<4;return O}J.prototype._parseHex=function(K,M,j){this.length=Math.ceil((K.length-M)/6),this.words=Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var R=0,F=0,A;if(j==="be")for(O=K.length-1;O>=M;O-=2)if(A=G(K,M,O)<<R,this.words[F]|=A&67108863,R>=18)R-=18,F+=1,this.words[F]|=A>>>26;else R+=8;else{var T=K.length-M;for(O=T%2===0?M+1:M;O<K.length;O+=2)if(A=G(K,M,O)<<R,this.words[F]|=A&67108863,R>=18)R-=18,F+=1,this.words[F]|=A>>>26;else R+=8}this.strip()};function U(K,M,j,O){var R=0,F=Math.min(K.length,j);for(var A=M;A<F;A++){var T=K.charCodeAt(A)-48;if(R*=O,T>=49)R+=T-49+10;else if(T>=17)R+=T-17+10;else R+=T}return R}J.prototype._parseBase=function(K,M,j){this.words=[0],this.length=1;for(var O=0,R=1;R<=67108863;R*=M)O++;O--,R=R/M|0;var F=K.length-j,A=F%O,T=Math.min(F,F-A)+j,V=0;for(var w=j;w<T;w+=O)if(V=U(K,w,w+O,M),this.imuln(R),this.words[0]+V<67108864)this.words[0]+=V;else this._iaddn(V);if(A!==0){var k=1;V=U(K,w,K.length,M);for(w=0;w<A;w++)k*=M;if(this.imuln(k),this.words[0]+V<67108864)this.words[0]+=V;else this._iaddn(V)}this.strip()},J.prototype.copy=function(K){K.words=Array(this.length);for(var M=0;M<this.length;M++)K.words[M]=this.words[M];K.length=this.length,K.negative=this.negative,K.red=this.red},J.prototype.clone=function(){var K=new J(null);return this.copy(K),K},J.prototype._expand=function(K){while(this.length<K)this.words[this.length++]=0;return this},J.prototype.strip=function(){while(this.length>1&&this.words[this.length-1]===0)this.length--;return this._normSign()},J.prototype._normSign=function(){if(this.length===1&&this.words[0]===0)this.negative=0;return this},J.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var D=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],P=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],H=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];if(J.prototype.toString=function(K,M){K=K||10,M=M|0||1;var j;if(K===16||K==="hex"){j="";var O=0,R=0;for(var F=0;F<this.length;F++){var A=this.words[F],T=((A<<O|R)&16777215).toString(16);if(R=A>>>24-O&16777215,O+=2,O>=26)O-=26,F--;if(R!==0||F!==this.length-1)j=D[6-T.length]+T+j;else j=T+j}if(R!==0)j=R.toString(16)+j;while(j.length%M!==0)j="0"+j;if(this.negative!==0)j="-"+j;return j}if(K===(K|0)&&K>=2&&K<=36){var V=P[K],w=H[K];j="";var k=this.clone();k.negative=0;while(!k.isZero()){var S=k.modn(w).toString(K);if(k=k.idivn(w),!k.isZero())j=D[V-S.length]+S+j;else j=S+j}if(this.isZero())j="0"+j;while(j.length%M!==0)j="0"+j;if(this.negative!==0)j="-"+j;return j}Y(!1,"Base should be between 2 and 36")},J.prototype.toNumber=function(){var K=this.words[0];if(this.length===2)K+=this.words[1]*67108864;else if(this.length===3&&this.words[2]===1)K+=4503599627370496+this.words[1]*67108864;else if(this.length>2)Y(!1,"Number can only safely store up to 53 bits");return this.negative!==0?-K:K},J.prototype.toJSON=function(){return this.toString(16)},J.prototype.toBuffer=function(K,M){return Y(typeof q<"u"),this.toArrayLike(q,K,M)},J.prototype.toArray=function(K,M){return this.toArrayLike(Array,K,M)},J.prototype.toArrayLike=function(K,M,j){var O=this.byteLength(),R=j||Math.max(1,O);Y(O<=R,"byte array longer than desired length"),Y(R>0,"Requested array length <= 0"),this.strip();var F=M==="le",A=new K(R),T,V,w=this.clone();if(!F){for(V=0;V<R-O;V++)A[V]=0;for(V=0;!w.isZero();V++)T=w.andln(255),w.iushrn(8),A[R-V-1]=T}else{for(V=0;!w.isZero();V++)T=w.andln(255),w.iushrn(8),A[V]=T;for(;V<R;V++)A[V]=0}return A},Math.clz32)J.prototype._countBits=function(K){return 32-Math.clz32(K)};else J.prototype._countBits=function(K){var M=K,j=0;if(M>=4096)j+=13,M>>>=13;if(M>=64)j+=7,M>>>=7;if(M>=8)j+=4,M>>>=4;if(M>=2)j+=2,M>>>=2;return j+M};J.prototype._zeroBits=function(K){if(K===0)return 26;var M=K,j=0;if((M&8191)===0)j+=13,M>>>=13;if((M&127)===0)j+=7,M>>>=7;if((M&15)===0)j+=4,M>>>=4;if((M&3)===0)j+=2,M>>>=2;if((M&1)===0)j++;return j},J.prototype.bitLength=function(){var K=this.words[this.length-1],M=this._countBits(K);return(this.length-1)*26+M};function N(K){var M=Array(K.bitLength());for(var j=0;j<M.length;j++){var O=j/26|0,R=j%26;M[j]=(K.words[O]&1<<R)>>>R}return M}J.prototype.zeroBits=function(){if(this.isZero())return 0;var K=0;for(var M=0;M<this.length;M++){var j=this._zeroBits(this.words[M]);if(K+=j,j!==26)break}return K},J.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},J.prototype.toTwos=function(K){if(this.negative!==0)return this.abs().inotn(K).iaddn(1);return this.clone()},J.prototype.fromTwos=function(K){if(this.testn(K-1))return this.notn(K).iaddn(1).ineg();return this.clone()},J.prototype.isNeg=function(){return this.negative!==0},J.prototype.neg=function(){return this.clone().ineg()},J.prototype.ineg=function(){if(!this.isZero())this.negative^=1;return this},J.prototype.iuor=function(K){while(this.length<K.length)this.words[this.length++]=0;for(var M=0;M<K.length;M++)this.words[M]=this.words[M]|K.words[M];return this.strip()},J.prototype.ior=function(K){return Y((this.negative|K.negative)===0),this.iuor(K)},J.prototype.or=function(K){if(this.length>K.length)return this.clone().ior(K);return K.clone().ior(this)},J.prototype.uor=function(K){if(this.length>K.length)return this.clone().iuor(K);return K.clone().iuor(this)},J.prototype.iuand=function(K){var M;if(this.length>K.length)M=K;else M=this;for(var j=0;j<M.length;j++)this.words[j]=this.words[j]&K.words[j];return this.length=M.length,this.strip()},J.prototype.iand=function(K){return Y((this.negative|K.negative)===0),this.iuand(K)},J.prototype.and=function(K){if(this.length>K.length)return this.clone().iand(K);return K.clone().iand(this)},J.prototype.uand=function(K){if(this.length>K.length)return this.clone().iuand(K);return K.clone().iuand(this)},J.prototype.iuxor=function(K){var M,j;if(this.length>K.length)M=this,j=K;else M=K,j=this;for(var O=0;O<j.length;O++)this.words[O]=M.words[O]^j.words[O];if(this!==M)for(;O<M.length;O++)this.words[O]=M.words[O];return this.length=M.length,this.strip()},J.prototype.ixor=function(K){return Y((this.negative|K.negative)===0),this.iuxor(K)},J.prototype.xor=function(K){if(this.length>K.length)return this.clone().ixor(K);return K.clone().ixor(this)},J.prototype.uxor=function(K){if(this.length>K.length)return this.clone().iuxor(K);return K.clone().iuxor(this)},J.prototype.inotn=function(K){Y(typeof K==="number"&&K>=0);var M=Math.ceil(K/26)|0,j=K%26;if(this._expand(M),j>0)M--;for(var O=0;O<M;O++)this.words[O]=~this.words[O]&67108863;if(j>0)this.words[O]=~this.words[O]&67108863>>26-j;return this.strip()},J.prototype.notn=function(K){return this.clone().inotn(K)},J.prototype.setn=function(K,M){Y(typeof K==="number"&&K>=0);var j=K/26|0,O=K%26;if(this._expand(j+1),M)this.words[j]=this.words[j]|1<<O;else this.words[j]=this.words[j]&~(1<<O);return this.strip()},J.prototype.iadd=function(K){var M;if(this.negative!==0&&K.negative===0)return this.negative=0,M=this.isub(K),this.negative^=1,this._normSign();else if(this.negative===0&&K.negative!==0)return K.negative=0,M=this.isub(K),K.negative=1,M._normSign();var j,O;if(this.length>K.length)j=this,O=K;else j=K,O=this;var R=0;for(var F=0;F<O.length;F++)M=(j.words[F]|0)+(O.words[F]|0)+R,this.words[F]=M&67108863,R=M>>>26;for(;R!==0&&F<j.length;F++)M=(j.words[F]|0)+R,this.words[F]=M&67108863,R=M>>>26;if(this.length=j.length,R!==0)this.words[this.length]=R,this.length++;else if(j!==this)for(;F<j.length;F++)this.words[F]=j.words[F];return this},J.prototype.add=function(K){var M;if(K.negative!==0&&this.negative===0)return K.negative=0,M=this.sub(K),K.negative^=1,M;else if(K.negative===0&&this.negative!==0)return this.negative=0,M=K.sub(this),this.negative=1,M;if(this.length>K.length)return this.clone().iadd(K);return K.clone().iadd(this)},J.prototype.isub=function(K){if(K.negative!==0){K.negative=0;var M=this.iadd(K);return K.negative=1,M._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(K),this.negative=1,this._normSign();var j=this.cmp(K);if(j===0)return this.negative=0,this.length=1,this.words[0]=0,this;var O,R;if(j>0)O=this,R=K;else O=K,R=this;var F=0;for(var A=0;A<R.length;A++)M=(O.words[A]|0)-(R.words[A]|0)+F,F=M>>26,this.words[A]=M&67108863;for(;F!==0&&A<O.length;A++)M=(O.words[A]|0)+F,F=M>>26,this.words[A]=M&67108863;if(F===0&&A<O.length&&O!==this)for(;A<O.length;A++)this.words[A]=O.words[A];if(this.length=Math.max(this.length,A),O!==this)this.negative=1;return this.strip()},J.prototype.sub=function(K){return this.clone().isub(K)};function C(K,M,j){j.negative=M.negative^K.negative;var O=K.length+M.length|0;j.length=O,O=O-1|0;var R=K.words[0]|0,F=M.words[0]|0,A=R*F,T=A&67108863,V=A/67108864|0;j.words[0]=T;for(var w=1;w<O;w++){var k=V>>>26,S=V&67108863,y=Math.min(w,M.length-1);for(var u=Math.max(0,w-K.length+1);u<=y;u++){var c=w-u|0;R=K.words[c]|0,F=M.words[u]|0,A=R*F+S,k+=A/67108864|0,S=A&67108863}j.words[w]=S|0,V=k|0}if(V!==0)j.words[w]=V|0;else j.length--;return j.strip()}var L=function(K,M,j){var O=K.words,R=M.words,F=j.words,A=0,T,V,w,k=O[0]|0,S=k&8191,y=k>>>13,u=O[1]|0,c=u&8191,o=u>>>13,z0=O[2]|0,e=z0&8191,s=z0>>>13,J0=O[3]|0,t=J0&8191,Z0=J0>>>13,N0=O[4]|0,i=N0&8191,l=N0>>>13,q0=O[5]|0,Y0=q0&8191,K0=q0>>>13,k0=O[6]|0,a=k0&8191,X0=k0>>>13,n0=O[7]|0,W0=n0&8191,V0=n0>>>13,H1=O[8]|0,D0=H1&8191,j0=H1>>>13,g1=O[9]|0,T0=g1&8191,R0=g1>>>13,s1=R[0]|0,B0=s1&8191,C0=s1>>>13,g6=R[1]|0,m0=g6&8191,l0=g6>>>13,C6=R[2]|0,y0=C6&8191,u0=C6>>>13,W8=R[3]|0,d0=W8&8191,v0=W8>>>13,o6=R[4]|0,i0=o6&8191,c0=o6>>>13,M5=R[5]|0,_0=M5&8191,d=M5>>>13,$0=R[6]|0,G0=$0&8191,O0=$0>>>13,s0=R[7]|0,E0=s0&8191,S0=s0>>>13,T5=R[8]|0,g0=T5&8191,p0=T5>>>13,_6=R[9]|0,h0=_6&8191,o0=_6>>>13;j.negative=K.negative^M.negative,j.length=19,T=Math.imul(S,B0),V=Math.imul(S,C0),V=V+Math.imul(y,B0)|0,w=Math.imul(y,C0);var S6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(S6>>>26)|0,S6&=67108863,T=Math.imul(c,B0),V=Math.imul(c,C0),V=V+Math.imul(o,B0)|0,w=Math.imul(o,C0),T=T+Math.imul(S,m0)|0,V=V+Math.imul(S,l0)|0,V=V+Math.imul(y,m0)|0,w=w+Math.imul(y,l0)|0;var m1=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(m1>>>26)|0,m1&=67108863,T=Math.imul(e,B0),V=Math.imul(e,C0),V=V+Math.imul(s,B0)|0,w=Math.imul(s,C0),T=T+Math.imul(c,m0)|0,V=V+Math.imul(c,l0)|0,V=V+Math.imul(o,m0)|0,w=w+Math.imul(o,l0)|0,T=T+Math.imul(S,y0)|0,V=V+Math.imul(S,u0)|0,V=V+Math.imul(y,y0)|0,w=w+Math.imul(y,u0)|0;var k1=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(k1>>>26)|0,k1&=67108863,T=Math.imul(t,B0),V=Math.imul(t,C0),V=V+Math.imul(Z0,B0)|0,w=Math.imul(Z0,C0),T=T+Math.imul(e,m0)|0,V=V+Math.imul(e,l0)|0,V=V+Math.imul(s,m0)|0,w=w+Math.imul(s,l0)|0,T=T+Math.imul(c,y0)|0,V=V+Math.imul(c,u0)|0,V=V+Math.imul(o,y0)|0,w=w+Math.imul(o,u0)|0,T=T+Math.imul(S,d0)|0,V=V+Math.imul(S,v0)|0,V=V+Math.imul(y,d0)|0,w=w+Math.imul(y,v0)|0;var g5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(g5>>>26)|0,g5&=67108863,T=Math.imul(i,B0),V=Math.imul(i,C0),V=V+Math.imul(l,B0)|0,w=Math.imul(l,C0),T=T+Math.imul(t,m0)|0,V=V+Math.imul(t,l0)|0,V=V+Math.imul(Z0,m0)|0,w=w+Math.imul(Z0,l0)|0,T=T+Math.imul(e,y0)|0,V=V+Math.imul(e,u0)|0,V=V+Math.imul(s,y0)|0,w=w+Math.imul(s,u0)|0,T=T+Math.imul(c,d0)|0,V=V+Math.imul(c,v0)|0,V=V+Math.imul(o,d0)|0,w=w+Math.imul(o,v0)|0,T=T+Math.imul(S,i0)|0,V=V+Math.imul(S,c0)|0,V=V+Math.imul(y,i0)|0,w=w+Math.imul(y,c0)|0;var P5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(P5>>>26)|0,P5&=67108863,T=Math.imul(Y0,B0),V=Math.imul(Y0,C0),V=V+Math.imul(K0,B0)|0,w=Math.imul(K0,C0),T=T+Math.imul(i,m0)|0,V=V+Math.imul(i,l0)|0,V=V+Math.imul(l,m0)|0,w=w+Math.imul(l,l0)|0,T=T+Math.imul(t,y0)|0,V=V+Math.imul(t,u0)|0,V=V+Math.imul(Z0,y0)|0,w=w+Math.imul(Z0,u0)|0,T=T+Math.imul(e,d0)|0,V=V+Math.imul(e,v0)|0,V=V+Math.imul(s,d0)|0,w=w+Math.imul(s,v0)|0,T=T+Math.imul(c,i0)|0,V=V+Math.imul(c,c0)|0,V=V+Math.imul(o,i0)|0,w=w+Math.imul(o,c0)|0,T=T+Math.imul(S,_0)|0,V=V+Math.imul(S,d)|0,V=V+Math.imul(y,_0)|0,w=w+Math.imul(y,d)|0;var v1=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(v1>>>26)|0,v1&=67108863,T=Math.imul(a,B0),V=Math.imul(a,C0),V=V+Math.imul(X0,B0)|0,w=Math.imul(X0,C0),T=T+Math.imul(Y0,m0)|0,V=V+Math.imul(Y0,l0)|0,V=V+Math.imul(K0,m0)|0,w=w+Math.imul(K0,l0)|0,T=T+Math.imul(i,y0)|0,V=V+Math.imul(i,u0)|0,V=V+Math.imul(l,y0)|0,w=w+Math.imul(l,u0)|0,T=T+Math.imul(t,d0)|0,V=V+Math.imul(t,v0)|0,V=V+Math.imul(Z0,d0)|0,w=w+Math.imul(Z0,v0)|0,T=T+Math.imul(e,i0)|0,V=V+Math.imul(e,c0)|0,V=V+Math.imul(s,i0)|0,w=w+Math.imul(s,c0)|0,T=T+Math.imul(c,_0)|0,V=V+Math.imul(c,d)|0,V=V+Math.imul(o,_0)|0,w=w+Math.imul(o,d)|0,T=T+Math.imul(S,G0)|0,V=V+Math.imul(S,O0)|0,V=V+Math.imul(y,G0)|0,w=w+Math.imul(y,O0)|0;var o1=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(o1>>>26)|0,o1&=67108863,T=Math.imul(W0,B0),V=Math.imul(W0,C0),V=V+Math.imul(V0,B0)|0,w=Math.imul(V0,C0),T=T+Math.imul(a,m0)|0,V=V+Math.imul(a,l0)|0,V=V+Math.imul(X0,m0)|0,w=w+Math.imul(X0,l0)|0,T=T+Math.imul(Y0,y0)|0,V=V+Math.imul(Y0,u0)|0,V=V+Math.imul(K0,y0)|0,w=w+Math.imul(K0,u0)|0,T=T+Math.imul(i,d0)|0,V=V+Math.imul(i,v0)|0,V=V+Math.imul(l,d0)|0,w=w+Math.imul(l,v0)|0,T=T+Math.imul(t,i0)|0,V=V+Math.imul(t,c0)|0,V=V+Math.imul(Z0,i0)|0,w=w+Math.imul(Z0,c0)|0,T=T+Math.imul(e,_0)|0,V=V+Math.imul(e,d)|0,V=V+Math.imul(s,_0)|0,w=w+Math.imul(s,d)|0,T=T+Math.imul(c,G0)|0,V=V+Math.imul(c,O0)|0,V=V+Math.imul(o,G0)|0,w=w+Math.imul(o,O0)|0,T=T+Math.imul(S,E0)|0,V=V+Math.imul(S,S0)|0,V=V+Math.imul(y,E0)|0,w=w+Math.imul(y,S0)|0;var Y6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(Y6>>>26)|0,Y6&=67108863,T=Math.imul(D0,B0),V=Math.imul(D0,C0),V=V+Math.imul(j0,B0)|0,w=Math.imul(j0,C0),T=T+Math.imul(W0,m0)|0,V=V+Math.imul(W0,l0)|0,V=V+Math.imul(V0,m0)|0,w=w+Math.imul(V0,l0)|0,T=T+Math.imul(a,y0)|0,V=V+Math.imul(a,u0)|0,V=V+Math.imul(X0,y0)|0,w=w+Math.imul(X0,u0)|0,T=T+Math.imul(Y0,d0)|0,V=V+Math.imul(Y0,v0)|0,V=V+Math.imul(K0,d0)|0,w=w+Math.imul(K0,v0)|0,T=T+Math.imul(i,i0)|0,V=V+Math.imul(i,c0)|0,V=V+Math.imul(l,i0)|0,w=w+Math.imul(l,c0)|0,T=T+Math.imul(t,_0)|0,V=V+Math.imul(t,d)|0,V=V+Math.imul(Z0,_0)|0,w=w+Math.imul(Z0,d)|0,T=T+Math.imul(e,G0)|0,V=V+Math.imul(e,O0)|0,V=V+Math.imul(s,G0)|0,w=w+Math.imul(s,O0)|0,T=T+Math.imul(c,E0)|0,V=V+Math.imul(c,S0)|0,V=V+Math.imul(o,E0)|0,w=w+Math.imul(o,S0)|0,T=T+Math.imul(S,g0)|0,V=V+Math.imul(S,p0)|0,V=V+Math.imul(y,g0)|0,w=w+Math.imul(y,p0)|0;var J6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(J6>>>26)|0,J6&=67108863,T=Math.imul(T0,B0),V=Math.imul(T0,C0),V=V+Math.imul(R0,B0)|0,w=Math.imul(R0,C0),T=T+Math.imul(D0,m0)|0,V=V+Math.imul(D0,l0)|0,V=V+Math.imul(j0,m0)|0,w=w+Math.imul(j0,l0)|0,T=T+Math.imul(W0,y0)|0,V=V+Math.imul(W0,u0)|0,V=V+Math.imul(V0,y0)|0,w=w+Math.imul(V0,u0)|0,T=T+Math.imul(a,d0)|0,V=V+Math.imul(a,v0)|0,V=V+Math.imul(X0,d0)|0,w=w+Math.imul(X0,v0)|0,T=T+Math.imul(Y0,i0)|0,V=V+Math.imul(Y0,c0)|0,V=V+Math.imul(K0,i0)|0,w=w+Math.imul(K0,c0)|0,T=T+Math.imul(i,_0)|0,V=V+Math.imul(i,d)|0,V=V+Math.imul(l,_0)|0,w=w+Math.imul(l,d)|0,T=T+Math.imul(t,G0)|0,V=V+Math.imul(t,O0)|0,V=V+Math.imul(Z0,G0)|0,w=w+Math.imul(Z0,O0)|0,T=T+Math.imul(e,E0)|0,V=V+Math.imul(e,S0)|0,V=V+Math.imul(s,E0)|0,w=w+Math.imul(s,S0)|0,T=T+Math.imul(c,g0)|0,V=V+Math.imul(c,p0)|0,V=V+Math.imul(o,g0)|0,w=w+Math.imul(o,p0)|0,T=T+Math.imul(S,h0)|0,V=V+Math.imul(S,o0)|0,V=V+Math.imul(y,h0)|0,w=w+Math.imul(y,o0)|0;var _5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(_5>>>26)|0,_5&=67108863,T=Math.imul(T0,m0),V=Math.imul(T0,l0),V=V+Math.imul(R0,m0)|0,w=Math.imul(R0,l0),T=T+Math.imul(D0,y0)|0,V=V+Math.imul(D0,u0)|0,V=V+Math.imul(j0,y0)|0,w=w+Math.imul(j0,u0)|0,T=T+Math.imul(W0,d0)|0,V=V+Math.imul(W0,v0)|0,V=V+Math.imul(V0,d0)|0,w=w+Math.imul(V0,v0)|0,T=T+Math.imul(a,i0)|0,V=V+Math.imul(a,c0)|0,V=V+Math.imul(X0,i0)|0,w=w+Math.imul(X0,c0)|0,T=T+Math.imul(Y0,_0)|0,V=V+Math.imul(Y0,d)|0,V=V+Math.imul(K0,_0)|0,w=w+Math.imul(K0,d)|0,T=T+Math.imul(i,G0)|0,V=V+Math.imul(i,O0)|0,V=V+Math.imul(l,G0)|0,w=w+Math.imul(l,O0)|0,T=T+Math.imul(t,E0)|0,V=V+Math.imul(t,S0)|0,V=V+Math.imul(Z0,E0)|0,w=w+Math.imul(Z0,S0)|0,T=T+Math.imul(e,g0)|0,V=V+Math.imul(e,p0)|0,V=V+Math.imul(s,g0)|0,w=w+Math.imul(s,p0)|0,T=T+Math.imul(c,h0)|0,V=V+Math.imul(c,o0)|0,V=V+Math.imul(o,h0)|0,w=w+Math.imul(o,o0)|0;var S5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(S5>>>26)|0,S5&=67108863,T=Math.imul(T0,y0),V=Math.imul(T0,u0),V=V+Math.imul(R0,y0)|0,w=Math.imul(R0,u0),T=T+Math.imul(D0,d0)|0,V=V+Math.imul(D0,v0)|0,V=V+Math.imul(j0,d0)|0,w=w+Math.imul(j0,v0)|0,T=T+Math.imul(W0,i0)|0,V=V+Math.imul(W0,c0)|0,V=V+Math.imul(V0,i0)|0,w=w+Math.imul(V0,c0)|0,T=T+Math.imul(a,_0)|0,V=V+Math.imul(a,d)|0,V=V+Math.imul(X0,_0)|0,w=w+Math.imul(X0,d)|0,T=T+Math.imul(Y0,G0)|0,V=V+Math.imul(Y0,O0)|0,V=V+Math.imul(K0,G0)|0,w=w+Math.imul(K0,O0)|0,T=T+Math.imul(i,E0)|0,V=V+Math.imul(i,S0)|0,V=V+Math.imul(l,E0)|0,w=w+Math.imul(l,S0)|0,T=T+Math.imul(t,g0)|0,V=V+Math.imul(t,p0)|0,V=V+Math.imul(Z0,g0)|0,w=w+Math.imul(Z0,p0)|0,T=T+Math.imul(e,h0)|0,V=V+Math.imul(e,o0)|0,V=V+Math.imul(s,h0)|0,w=w+Math.imul(s,o0)|0;var F5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(F5>>>26)|0,F5&=67108863,T=Math.imul(T0,d0),V=Math.imul(T0,v0),V=V+Math.imul(R0,d0)|0,w=Math.imul(R0,v0),T=T+Math.imul(D0,i0)|0,V=V+Math.imul(D0,c0)|0,V=V+Math.imul(j0,i0)|0,w=w+Math.imul(j0,c0)|0,T=T+Math.imul(W0,_0)|0,V=V+Math.imul(W0,d)|0,V=V+Math.imul(V0,_0)|0,w=w+Math.imul(V0,d)|0,T=T+Math.imul(a,G0)|0,V=V+Math.imul(a,O0)|0,V=V+Math.imul(X0,G0)|0,w=w+Math.imul(X0,O0)|0,T=T+Math.imul(Y0,E0)|0,V=V+Math.imul(Y0,S0)|0,V=V+Math.imul(K0,E0)|0,w=w+Math.imul(K0,S0)|0,T=T+Math.imul(i,g0)|0,V=V+Math.imul(i,p0)|0,V=V+Math.imul(l,g0)|0,w=w+Math.imul(l,p0)|0,T=T+Math.imul(t,h0)|0,V=V+Math.imul(t,o0)|0,V=V+Math.imul(Z0,h0)|0,w=w+Math.imul(Z0,o0)|0;var h5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(h5>>>26)|0,h5&=67108863,T=Math.imul(T0,i0),V=Math.imul(T0,c0),V=V+Math.imul(R0,i0)|0,w=Math.imul(R0,c0),T=T+Math.imul(D0,_0)|0,V=V+Math.imul(D0,d)|0,V=V+Math.imul(j0,_0)|0,w=w+Math.imul(j0,d)|0,T=T+Math.imul(W0,G0)|0,V=V+Math.imul(W0,O0)|0,V=V+Math.imul(V0,G0)|0,w=w+Math.imul(V0,O0)|0,T=T+Math.imul(a,E0)|0,V=V+Math.imul(a,S0)|0,V=V+Math.imul(X0,E0)|0,w=w+Math.imul(X0,S0)|0,T=T+Math.imul(Y0,g0)|0,V=V+Math.imul(Y0,p0)|0,V=V+Math.imul(K0,g0)|0,w=w+Math.imul(K0,p0)|0,T=T+Math.imul(i,h0)|0,V=V+Math.imul(i,o0)|0,V=V+Math.imul(l,h0)|0,w=w+Math.imul(l,o0)|0;var A5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(A5>>>26)|0,A5&=67108863,T=Math.imul(T0,_0),V=Math.imul(T0,d),V=V+Math.imul(R0,_0)|0,w=Math.imul(R0,d),T=T+Math.imul(D0,G0)|0,V=V+Math.imul(D0,O0)|0,V=V+Math.imul(j0,G0)|0,w=w+Math.imul(j0,O0)|0,T=T+Math.imul(W0,E0)|0,V=V+Math.imul(W0,S0)|0,V=V+Math.imul(V0,E0)|0,w=w+Math.imul(V0,S0)|0,T=T+Math.imul(a,g0)|0,V=V+Math.imul(a,p0)|0,V=V+Math.imul(X0,g0)|0,w=w+Math.imul(X0,p0)|0,T=T+Math.imul(Y0,h0)|0,V=V+Math.imul(Y0,o0)|0,V=V+Math.imul(K0,h0)|0,w=w+Math.imul(K0,o0)|0;var z6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(z6>>>26)|0,z6&=67108863,T=Math.imul(T0,G0),V=Math.imul(T0,O0),V=V+Math.imul(R0,G0)|0,w=Math.imul(R0,O0),T=T+Math.imul(D0,E0)|0,V=V+Math.imul(D0,S0)|0,V=V+Math.imul(j0,E0)|0,w=w+Math.imul(j0,S0)|0,T=T+Math.imul(W0,g0)|0,V=V+Math.imul(W0,p0)|0,V=V+Math.imul(V0,g0)|0,w=w+Math.imul(V0,p0)|0,T=T+Math.imul(a,h0)|0,V=V+Math.imul(a,o0)|0,V=V+Math.imul(X0,h0)|0,w=w+Math.imul(X0,o0)|0;var n6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(n6>>>26)|0,n6&=67108863,T=Math.imul(T0,E0),V=Math.imul(T0,S0),V=V+Math.imul(R0,E0)|0,w=Math.imul(R0,S0),T=T+Math.imul(D0,g0)|0,V=V+Math.imul(D0,p0)|0,V=V+Math.imul(j0,g0)|0,w=w+Math.imul(j0,p0)|0,T=T+Math.imul(W0,h0)|0,V=V+Math.imul(W0,o0)|0,V=V+Math.imul(V0,h0)|0,w=w+Math.imul(V0,o0)|0;var K8=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(K8>>>26)|0,K8&=67108863,T=Math.imul(T0,g0),V=Math.imul(T0,p0),V=V+Math.imul(R0,g0)|0,w=Math.imul(R0,p0),T=T+Math.imul(D0,h0)|0,V=V+Math.imul(D0,o0)|0,V=V+Math.imul(j0,h0)|0,w=w+Math.imul(j0,o0)|0;var b6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(b6>>>26)|0,b6&=67108863,T=Math.imul(T0,h0),V=Math.imul(T0,o0),V=V+Math.imul(R0,h0)|0,w=Math.imul(R0,o0);var r6=(A+T|0)+((V&8191)<<13)|0;if(A=(w+(V>>>13)|0)+(r6>>>26)|0,r6&=67108863,F[0]=S6,F[1]=m1,F[2]=k1,F[3]=g5,F[4]=P5,F[5]=v1,F[6]=o1,F[7]=Y6,F[8]=J6,F[9]=_5,F[10]=S5,F[11]=F5,F[12]=h5,F[13]=A5,F[14]=z6,F[15]=n6,F[16]=K8,F[17]=b6,F[18]=r6,A!==0)F[19]=A,j.length++;return j};if(!Math.imul)L=C;function B(K,M,j){j.negative=M.negative^K.negative,j.length=K.length+M.length;var O=0,R=0;for(var F=0;F<j.length-1;F++){var A=R;R=0;var T=O&67108863,V=Math.min(F,M.length-1);for(var w=Math.max(0,F-K.length+1);w<=V;w++){var k=F-w,S=K.words[k]|0,y=M.words[w]|0,u=S*y,c=u&67108863;A=A+(u/67108864|0)|0,c=c+T|0,T=c&67108863,A=A+(c>>>26)|0,R+=A>>>26,A&=67108863}j.words[F]=T,O=A,A=R}if(O!==0)j.words[F]=O;else j.length--;return j.strip()}function E(K,M,j){var O=new I;return O.mulp(K,M,j)}J.prototype.mulTo=function(K,M){var j,O=this.length+K.length;if(this.length===10&&K.length===10)j=L(this,K,M);else if(O<63)j=C(this,K,M);else if(O<1024)j=B(this,K,M);else j=E(this,K,M);return j};function I(K,M){this.x=K,this.y=M}I.prototype.makeRBT=function(K){var M=Array(K),j=J.prototype._countBits(K)-1;for(var O=0;O<K;O++)M[O]=this.revBin(O,j,K);return M},I.prototype.revBin=function(K,M,j){if(K===0||K===j-1)return K;var O=0;for(var R=0;R<M;R++)O|=(K&1)<<M-R-1,K>>=1;return O},I.prototype.permute=function(K,M,j,O,R,F){for(var A=0;A<F;A++)O[A]=M[K[A]],R[A]=j[K[A]]},I.prototype.transform=function(K,M,j,O,R,F){this.permute(F,K,M,j,O,R);for(var A=1;A<R;A<<=1){var T=A<<1,V=Math.cos(2*Math.PI/T),w=Math.sin(2*Math.PI/T);for(var k=0;k<R;k+=T){var S=V,y=w;for(var u=0;u<A;u++){var c=j[k+u],o=O[k+u],z0=j[k+u+A],e=O[k+u+A],s=S*z0-y*e;if(e=S*e+y*z0,z0=s,j[k+u]=c+z0,O[k+u]=o+e,j[k+u+A]=c-z0,O[k+u+A]=o-e,u!==T)s=V*S-w*y,y=V*y+w*S,S=s}}}},I.prototype.guessLen13b=function(K,M){var j=Math.max(M,K)|1,O=j&1,R=0;for(j=j/2|0;j;j=j>>>1)R++;return 1<<R+1+O},I.prototype.conjugate=function(K,M,j){if(j<=1)return;for(var O=0;O<j/2;O++){var R=K[O];K[O]=K[j-O-1],K[j-O-1]=R,R=M[O],M[O]=-M[j-O-1],M[j-O-1]=-R}},I.prototype.normalize13b=function(K,M){var j=0;for(var O=0;O<M/2;O++){var R=Math.round(K[2*O+1]/M)*8192+Math.round(K[2*O]/M)+j;if(K[O]=R&67108863,R<67108864)j=0;else j=R/67108864|0}return K},I.prototype.convert13b=function(K,M,j,O){var R=0;for(var F=0;F<M;F++)R=R+(K[F]|0),j[2*F]=R&8191,R=R>>>13,j[2*F+1]=R&8191,R=R>>>13;for(F=2*M;F<O;++F)j[F]=0;Y(R===0),Y((R&-8192)===0)},I.prototype.stub=function(K){var M=Array(K);for(var j=0;j<K;j++)M[j]=0;return M},I.prototype.mulp=function(K,M,j){var O=2*this.guessLen13b(K.length,M.length),R=this.makeRBT(O),F=this.stub(O),A=Array(O),T=Array(O),V=Array(O),w=Array(O),k=Array(O),S=Array(O),y=j.words;y.length=O,this.convert13b(K.words,K.length,A,O),this.convert13b(M.words,M.length,w,O),this.transform(A,F,T,V,O,R),this.transform(w,F,k,S,O,R);for(var u=0;u<O;u++){var c=T[u]*k[u]-V[u]*S[u];V[u]=T[u]*S[u]+V[u]*k[u],T[u]=c}return this.conjugate(T,V,O),this.transform(T,V,y,F,O,R),this.conjugate(y,F,O),this.normalize13b(y,O),j.negative=K.negative^M.negative,j.length=K.length+M.length,j.strip()},J.prototype.mul=function(K){var M=new J(null);return M.words=Array(this.length+K.length),this.mulTo(K,M)},J.prototype.mulf=function(K){var M=new J(null);return M.words=Array(this.length+K.length),E(this,K,M)},J.prototype.imul=function(K){return this.clone().mulTo(K,this)},J.prototype.imuln=function(K){Y(typeof K==="number"),Y(K<67108864);var M=0;for(var j=0;j<this.length;j++){var O=(this.words[j]|0)*K,R=(O&67108863)+(M&67108863);M>>=26,M+=O/67108864|0,M+=R>>>26,this.words[j]=R&67108863}if(M!==0)this.words[j]=M,this.length++;return this.length=K===0?1:this.length,this},J.prototype.muln=function(K){return this.clone().imuln(K)},J.prototype.sqr=function(){return this.mul(this)},J.prototype.isqr=function(){return this.imul(this.clone())},J.prototype.pow=function(K){var M=N(K);if(M.length===0)return new J(1);var j=this;for(var O=0;O<M.length;O++,j=j.sqr())if(M[O]!==0)break;if(++O<M.length)for(var R=j.sqr();O<M.length;O++,R=R.sqr()){if(M[O]===0)continue;j=j.mul(R)}return j},J.prototype.iushln=function(K){Y(typeof K==="number"&&K>=0);var M=K%26,j=(K-M)/26,O=67108863>>>26-M<<26-M,R;if(M!==0){var F=0;for(R=0;R<this.length;R++){var A=this.words[R]&O,T=(this.words[R]|0)-A<<M;this.words[R]=T|F,F=A>>>26-M}if(F)this.words[R]=F,this.length++}if(j!==0){for(R=this.length-1;R>=0;R--)this.words[R+j]=this.words[R];for(R=0;R<j;R++)this.words[R]=0;this.length+=j}return this.strip()},J.prototype.ishln=function(K){return Y(this.negative===0),this.iushln(K)},J.prototype.iushrn=function(K,M,j){Y(typeof K==="number"&&K>=0);var O;if(M)O=(M-M%26)/26;else O=0;var R=K%26,F=Math.min((K-R)/26,this.length),A=67108863^67108863>>>R<<R,T=j;if(O-=F,O=Math.max(0,O),T){for(var V=0;V<F;V++)T.words[V]=this.words[V];T.length=F}if(F===0);else if(this.length>F){this.length-=F;for(V=0;V<this.length;V++)this.words[V]=this.words[V+F]}else this.words[0]=0,this.length=1;var w=0;for(V=this.length-1;V>=0&&(w!==0||V>=O);V--){var k=this.words[V]|0;this.words[V]=w<<26-R|k>>>R,w=k&A}if(T&&w!==0)T.words[T.length++]=w;if(this.length===0)this.words[0]=0,this.length=1;return this.strip()},J.prototype.ishrn=function(K,M,j){return Y(this.negative===0),this.iushrn(K,M,j)},J.prototype.shln=function(K){return this.clone().ishln(K)},J.prototype.ushln=function(K){return this.clone().iushln(K)},J.prototype.shrn=function(K){return this.clone().ishrn(K)},J.prototype.ushrn=function(K){return this.clone().iushrn(K)},J.prototype.testn=function(K){Y(typeof K==="number"&&K>=0);var M=K%26,j=(K-M)/26,O=1<<M;if(this.length<=j)return!1;var R=this.words[j];return!!(R&O)},J.prototype.imaskn=function(K){Y(typeof K==="number"&&K>=0);var M=K%26,j=(K-M)/26;if(Y(this.negative===0,"imaskn works only with positive numbers"),this.length<=j)return this;if(M!==0)j++;if(this.length=Math.min(j,this.length),M!==0){var O=67108863^67108863>>>M<<M;this.words[this.length-1]&=O}return this.strip()},J.prototype.maskn=function(K){return this.clone().imaskn(K)},J.prototype.iaddn=function(K){if(Y(typeof K==="number"),Y(K<67108864),K<0)return this.isubn(-K);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<K)return this.words[0]=K-(this.words[0]|0),this.negative=0,this;return this.negative=0,this.isubn(K),this.negative=1,this}return this._iaddn(K)},J.prototype._iaddn=function(K){this.words[0]+=K;for(var M=0;M<this.length&&this.words[M]>=67108864;M++)if(this.words[M]-=67108864,M===this.length-1)this.words[M+1]=1;else this.words[M+1]++;return this.length=Math.max(this.length,M+1),this},J.prototype.isubn=function(K){if(Y(typeof K==="number"),Y(K<67108864),K<0)return this.iaddn(-K);if(this.negative!==0)return this.negative=0,this.iaddn(K),this.negative=1,this;if(this.words[0]-=K,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var M=0;M<this.length&&this.words[M]<0;M++)this.words[M]+=67108864,this.words[M+1]-=1;return this.strip()},J.prototype.addn=function(K){return this.clone().iaddn(K)},J.prototype.subn=function(K){return this.clone().isubn(K)},J.prototype.iabs=function(){return this.negative=0,this},J.prototype.abs=function(){return this.clone().iabs()},J.prototype._ishlnsubmul=function(K,M,j){var O=K.length+j,R;this._expand(O);var F,A=0;for(R=0;R<K.length;R++){F=(this.words[R+j]|0)+A;var T=(K.words[R]|0)*M;F-=T&67108863,A=(F>>26)-(T/67108864|0),this.words[R+j]=F&67108863}for(;R<this.length-j;R++)F=(this.words[R+j]|0)+A,A=F>>26,this.words[R+j]=F&67108863;if(A===0)return this.strip();Y(A===-1),A=0;for(R=0;R<this.length;R++)F=-(this.words[R]|0)+A,A=F>>26,this.words[R]=F&67108863;return this.negative=1,this.strip()},J.prototype._wordDiv=function(K,M){var j=this.length-K.length,O=this.clone(),R=K,F=R.words[R.length-1]|0,A=this._countBits(F);if(j=26-A,j!==0)R=R.ushln(j),O.iushln(j),F=R.words[R.length-1]|0;var T=O.length-R.length,V;if(M!=="mod"){V=new J(null),V.length=T+1,V.words=Array(V.length);for(var w=0;w<V.length;w++)V.words[w]=0}var k=O.clone()._ishlnsubmul(R,1,T);if(k.negative===0){if(O=k,V)V.words[T]=1}for(var S=T-1;S>=0;S--){var y=(O.words[R.length+S]|0)*67108864+(O.words[R.length+S-1]|0);y=Math.min(y/F|0,67108863),O._ishlnsubmul(R,y,S);while(O.negative!==0)if(y--,O.negative=0,O._ishlnsubmul(R,1,S),!O.isZero())O.negative^=1;if(V)V.words[S]=y}if(V)V.strip();if(O.strip(),M!=="div"&&j!==0)O.iushrn(j);return{div:V||null,mod:O}},J.prototype.divmod=function(K,M,j){if(Y(!K.isZero()),this.isZero())return{div:new J(0),mod:new J(0)};var O,R,F;if(this.negative!==0&&K.negative===0){if(F=this.neg().divmod(K,M),M!=="mod")O=F.div.neg();if(M!=="div"){if(R=F.mod.neg(),j&&R.negative!==0)R.iadd(K)}return{div:O,mod:R}}if(this.negative===0&&K.negative!==0){if(F=this.divmod(K.neg(),M),M!=="mod")O=F.div.neg();return{div:O,mod:F.mod}}if((this.negative&K.negative)!==0){if(F=this.neg().divmod(K.neg(),M),M!=="div"){if(R=F.mod.neg(),j&&R.negative!==0)R.isub(K)}return{div:F.div,mod:R}}if(K.length>this.length||this.cmp(K)<0)return{div:new J(0),mod:this};if(K.length===1){if(M==="div")return{div:this.divn(K.words[0]),mod:null};if(M==="mod")return{div:null,mod:new J(this.modn(K.words[0]))};return{div:this.divn(K.words[0]),mod:new J(this.modn(K.words[0]))}}return this._wordDiv(K,M)},J.prototype.div=function(K){return this.divmod(K,"div",!1).div},J.prototype.mod=function(K){return this.divmod(K,"mod",!1).mod},J.prototype.umod=function(K){return this.divmod(K,"mod",!0).mod},J.prototype.divRound=function(K){var M=this.divmod(K);if(M.mod.isZero())return M.div;var j=M.div.negative!==0?M.mod.isub(K):M.mod,O=K.ushrn(1),R=K.andln(1),F=j.cmp(O);if(F<0||R===1&&F===0)return M.div;return M.div.negative!==0?M.div.isubn(1):M.div.iaddn(1)},J.prototype.modn=function(K){Y(K<=67108863);var M=67108864%K,j=0;for(var O=this.length-1;O>=0;O--)j=(M*j+(this.words[O]|0))%K;return j},J.prototype.idivn=function(K){Y(K<=67108863);var M=0;for(var j=this.length-1;j>=0;j--){var O=(this.words[j]|0)+M*67108864;this.words[j]=O/K|0,M=O%K}return this.strip()},J.prototype.divn=function(K){return this.clone().idivn(K)},J.prototype.egcd=function(K){Y(K.negative===0),Y(!K.isZero());var M=this,j=K.clone();if(M.negative!==0)M=M.umod(K);else M=M.clone();var O=new J(1),R=new J(0),F=new J(0),A=new J(1),T=0;while(M.isEven()&&j.isEven())M.iushrn(1),j.iushrn(1),++T;var V=j.clone(),w=M.clone();while(!M.isZero()){for(var k=0,S=1;(M.words[0]&S)===0&&k<26;++k,S<<=1);if(k>0){M.iushrn(k);while(k-- >0){if(O.isOdd()||R.isOdd())O.iadd(V),R.isub(w);O.iushrn(1),R.iushrn(1)}}for(var y=0,u=1;(j.words[0]&u)===0&&y<26;++y,u<<=1);if(y>0){j.iushrn(y);while(y-- >0){if(F.isOdd()||A.isOdd())F.iadd(V),A.isub(w);F.iushrn(1),A.iushrn(1)}}if(M.cmp(j)>=0)M.isub(j),O.isub(F),R.isub(A);else j.isub(M),F.isub(O),A.isub(R)}return{a:F,b:A,gcd:j.iushln(T)}},J.prototype._invmp=function(K){Y(K.negative===0),Y(!K.isZero());var M=this,j=K.clone();if(M.negative!==0)M=M.umod(K);else M=M.clone();var O=new J(1),R=new J(0),F=j.clone();while(M.cmpn(1)>0&&j.cmpn(1)>0){for(var A=0,T=1;(M.words[0]&T)===0&&A<26;++A,T<<=1);if(A>0){M.iushrn(A);while(A-- >0){if(O.isOdd())O.iadd(F);O.iushrn(1)}}for(var V=0,w=1;(j.words[0]&w)===0&&V<26;++V,w<<=1);if(V>0){j.iushrn(V);while(V-- >0){if(R.isOdd())R.iadd(F);R.iushrn(1)}}if(M.cmp(j)>=0)M.isub(j),O.isub(R);else j.isub(M),R.isub(O)}var k;if(M.cmpn(1)===0)k=O;else k=R;if(k.cmpn(0)<0)k.iadd(K);return k},J.prototype.gcd=function(K){if(this.isZero())return K.abs();if(K.isZero())return this.abs();var M=this.clone(),j=K.clone();M.negative=0,j.negative=0;for(var O=0;M.isEven()&&j.isEven();O++)M.iushrn(1),j.iushrn(1);do{while(M.isEven())M.iushrn(1);while(j.isEven())j.iushrn(1);var R=M.cmp(j);if(R<0){var F=M;M=j,j=F}else if(R===0||j.cmpn(1)===0)break;M.isub(j)}while(!0);return j.iushln(O)},J.prototype.invm=function(K){return this.egcd(K).a.umod(K)},J.prototype.isEven=function(){return(this.words[0]&1)===0},J.prototype.isOdd=function(){return(this.words[0]&1)===1},J.prototype.andln=function(K){return this.words[0]&K},J.prototype.bincn=function(K){Y(typeof K==="number");var M=K%26,j=(K-M)/26,O=1<<M;if(this.length<=j)return this._expand(j+1),this.words[j]|=O,this;var R=O;for(var F=j;R!==0&&F<this.length;F++){var A=this.words[F]|0;A+=R,R=A>>>26,A&=67108863,this.words[F]=A}if(R!==0)this.words[F]=R,this.length++;return this},J.prototype.isZero=function(){return this.length===1&&this.words[0]===0},J.prototype.cmpn=function(K){var M=K<0;if(this.negative!==0&&!M)return-1;if(this.negative===0&&M)return 1;this.strip();var j;if(this.length>1)j=1;else{if(M)K=-K;Y(K<=67108863,"Number is too big");var O=this.words[0]|0;j=O===K?0:O<K?-1:1}if(this.negative!==0)return-j|0;return j},J.prototype.cmp=function(K){if(this.negative!==0&&K.negative===0)return-1;if(this.negative===0&&K.negative!==0)return 1;var M=this.ucmp(K);if(this.negative!==0)return-M|0;return M},J.prototype.ucmp=function(K){if(this.length>K.length)return 1;if(this.length<K.length)return-1;var M=0;for(var j=this.length-1;j>=0;j--){var O=this.words[j]|0,R=K.words[j]|0;if(O===R)continue;if(O<R)M=-1;else if(O>R)M=1;break}return M},J.prototype.gtn=function(K){return this.cmpn(K)===1},J.prototype.gt=function(K){return this.cmp(K)===1},J.prototype.gten=function(K){return this.cmpn(K)>=0},J.prototype.gte=function(K){return this.cmp(K)>=0},J.prototype.ltn=function(K){return this.cmpn(K)===-1},J.prototype.lt=function(K){return this.cmp(K)===-1},J.prototype.lten=function(K){return this.cmpn(K)<=0},J.prototype.lte=function(K){return this.cmp(K)<=0},J.prototype.eqn=function(K){return this.cmpn(K)===0},J.prototype.eq=function(K){return this.cmp(K)===0},J.red=function(K){return new b(K)},J.prototype.toRed=function(K){return Y(!this.red,"Already a number in reduction context"),Y(this.negative===0,"red works only with positives"),K.convertTo(this)._forceRed(K)},J.prototype.fromRed=function(){return Y(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},J.prototype._forceRed=function(K){return this.red=K,this},J.prototype.forceRed=function(K){return Y(!this.red,"Already a number in reduction context"),this._forceRed(K)},J.prototype.redAdd=function(K){return Y(this.red,"redAdd works only with red numbers"),this.red.add(this,K)},J.prototype.redIAdd=function(K){return Y(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,K)},J.prototype.redSub=function(K){return Y(this.red,"redSub works only with red numbers"),this.red.sub(this,K)},J.prototype.redISub=function(K){return Y(this.red,"redISub works only with red numbers"),this.red.isub(this,K)},J.prototype.redShl=function(K){return Y(this.red,"redShl works only with red numbers"),this.red.shl(this,K)},J.prototype.redMul=function(K){return Y(this.red,"redMul works only with red numbers"),this.red._verify2(this,K),this.red.mul(this,K)},J.prototype.redIMul=function(K){return Y(this.red,"redMul works only with red numbers"),this.red._verify2(this,K),this.red.imul(this,K)},J.prototype.redSqr=function(){return Y(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},J.prototype.redISqr=function(){return Y(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},J.prototype.redSqrt=function(){return Y(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},J.prototype.redInvm=function(){return Y(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},J.prototype.redNeg=function(){return Y(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},J.prototype.redPow=function(K){return Y(this.red&&!K.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,K)};var _={k256:null,p224:null,p192:null,p25519:null};function f(K,M){this.name=K,this.p=new J(M,16),this.n=this.p.bitLength(),this.k=new J(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}f.prototype._tmp=function(){var K=new J(null);return K.words=Array(Math.ceil(this.n/13)),K},f.prototype.ireduce=function(K){var M=K,j;do this.split(M,this.tmp),M=this.imulK(M),M=M.iadd(this.tmp),j=M.bitLength();while(j>this.n);var O=j<this.n?-1:M.ucmp(this.p);if(O===0)M.words[0]=0,M.length=1;else if(O>0)M.isub(this.p);else if(M.strip!==void 0)M.strip();else M._strip();return M},f.prototype.split=function(K,M){K.iushrn(this.n,0,M)},f.prototype.imulK=function(K){return K.imul(this.k)};function x(){f.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}z(x,f),x.prototype.split=function(K,M){var j=4194303,O=Math.min(K.length,9);for(var R=0;R<O;R++)M.words[R]=K.words[R];if(M.length=O,K.length<=9){K.words[0]=0,K.length=1;return}var F=K.words[9];M.words[M.length++]=F&j;for(R=10;R<K.length;R++){var A=K.words[R]|0;K.words[R-10]=(A&j)<<4|F>>>22,F=A}if(F>>>=22,K.words[R-10]=F,F===0&&K.length>10)K.length-=10;else K.length-=9},x.prototype.imulK=function(K){K.words[K.length]=0,K.words[K.length+1]=0,K.length+=2;var M=0;for(var j=0;j<K.length;j++){var O=K.words[j]|0;M+=O*977,K.words[j]=M&67108863,M=O*64+(M/67108864|0)}if(K.words[K.length-1]===0){if(K.length--,K.words[K.length-1]===0)K.length--}return K};function g(){f.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}z(g,f);function h(){f.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}z(h,f);function v(){f.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}z(v,f),v.prototype.imulK=function(K){var M=0;for(var j=0;j<K.length;j++){var O=(K.words[j]|0)*19+M,R=O&67108863;O>>>=26,K.words[j]=R,M=O}if(M!==0)K.words[K.length++]=M;return K},J._prime=function(K){if(_[K])return _[K];var M;if(K==="k256")M=new x;else if(K==="p224")M=new g;else if(K==="p192")M=new h;else if(K==="p25519")M=new v;else throw Error("Unknown prime "+K);return _[K]=M,M};function b(K){if(typeof K==="string"){var M=J._prime(K);this.m=M.p,this.prime=M}else Y(K.gtn(1),"modulus must be greater than 1"),this.m=K,this.prime=null}b.prototype._verify1=function(K){Y(K.negative===0,"red works only with positives"),Y(K.red,"red works only with red numbers")},b.prototype._verify2=function(K,M){Y((K.negative|M.negative)===0,"red works only with positives"),Y(K.red&&K.red===M.red,"red works only with red numbers")},b.prototype.imod=function(K){if(this.prime)return this.prime.ireduce(K)._forceRed(this);return K.umod(this.m)._forceRed(this)},b.prototype.neg=function(K){if(K.isZero())return K.clone();return this.m.sub(K)._forceRed(this)},b.prototype.add=function(K,M){this._verify2(K,M);var j=K.add(M);if(j.cmp(this.m)>=0)j.isub(this.m);return j._forceRed(this)},b.prototype.iadd=function(K,M){this._verify2(K,M);var j=K.iadd(M);if(j.cmp(this.m)>=0)j.isub(this.m);return j},b.prototype.sub=function(K,M){this._verify2(K,M);var j=K.sub(M);if(j.cmpn(0)<0)j.iadd(this.m);return j._forceRed(this)},b.prototype.isub=function(K,M){this._verify2(K,M);var j=K.isub(M);if(j.cmpn(0)<0)j.iadd(this.m);return j},b.prototype.shl=function(K,M){return this._verify1(K),this.imod(K.ushln(M))},b.prototype.imul=function(K,M){return this._verify2(K,M),this.imod(K.imul(M))},b.prototype.mul=function(K,M){return this._verify2(K,M),this.imod(K.mul(M))},b.prototype.isqr=function(K){return this.imul(K,K.clone())},b.prototype.sqr=function(K){return this.mul(K,K)},b.prototype.sqrt=function(K){if(K.isZero())return K.clone();var M=this.m.andln(3);if(Y(M%2===1),M===3){var j=this.m.add(new J(1)).iushrn(2);return this.pow(K,j)}var O=this.m.subn(1),R=0;while(!O.isZero()&&O.andln(1)===0)R++,O.iushrn(1);Y(!O.isZero());var F=new J(1).toRed(this),A=F.redNeg(),T=this.m.subn(1).iushrn(1),V=this.m.bitLength();V=new J(2*V*V).toRed(this);while(this.pow(V,T).cmp(A)!==0)V.redIAdd(A);var w=this.pow(V,O),k=this.pow(K,O.addn(1).iushrn(1)),S=this.pow(K,O),y=R;while(S.cmp(F)!==0){var u=S;for(var c=0;u.cmp(F)!==0;c++)u=u.redSqr();Y(c<y);var o=this.pow(w,new J(1).iushln(y-c-1));k=k.redMul(o),w=o.redSqr(),S=S.redMul(w),y=c}return k},b.prototype.invm=function(K){var M=K._invmp(this.m);if(M.negative!==0)return M.negative=0,this.imod(M).redNeg();else return this.imod(M)},b.prototype.pow=function(K,M){if(M.isZero())return new J(1).toRed(this);if(M.cmpn(1)===0)return K.clone();var j=4,O=Array(1<<j);O[0]=new J(1).toRed(this),O[1]=K;for(var R=2;R<O.length;R++)O[R]=this.mul(O[R-1],K);var F=O[0],A=0,T=0,V=M.bitLength()%26;if(V===0)V=26;for(R=M.length-1;R>=0;R--){var w=M.words[R];for(var k=V-1;k>=0;k--){var S=w>>k&1;if(F!==O[0])F=this.sqr(F);if(S===0&&A===0){T=0;continue}if(A<<=1,A|=S,T++,T!==j&&(R!==0||k!==0))continue;F=this.mul(F,O[A]),T=0,A=0}V=26}return F},b.prototype.convertTo=function(K){var M=K.umod(this.m);return M===K?M.clone():M},b.prototype.convertFrom=function(K){var M=K.clone();return M.red=null,M},J.mont=function(K){return new m(K)};function m(K){if(b.call(this,K),this.shift=this.m.bitLength(),this.shift%26!==0)this.shift+=26-this.shift%26;this.r=new J(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}z(m,b),m.prototype.convertTo=function(K){return this.imod(K.ushln(this.shift))},m.prototype.convertFrom=function(K){var M=this.imod(K.mul(this.rinv));return M.red=null,M},m.prototype.imul=function(K,M){if(K.isZero()||M.isZero())return K.words[0]=0,K.length=1,K;var j=K.imul(M),O=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=j.isub(O).iushrn(this.shift),F=R;if(R.cmp(this.m)>=0)F=R.isub(this.m);else if(R.cmpn(0)<0)F=R.iadd(this.m);return F._forceRed(this)},m.prototype.mul=function(K,M){if(K.isZero()||M.isZero())return new J(0)._forceRed(this);var j=K.mul(M),O=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=j.isub(O).iushrn(this.shift),F=R;if(R.cmp(this.m)>=0)F=R.isub(this.m);else if(R.cmpn(0)<0)F=R.iadd(this.m);return F._forceRed(this)},m.prototype.invm=function(K){var M=this.imod(K._invmp(this.m).mul(this.r2));return M._forceRed(this)}})(typeof Q>"u"||Q,$)}),pG0=A0(($)=>{var Q=dV(),Z=B4(),X=$;X.define=function(z,J){return new Y(z,J)};function Y(z,J){this.name=z,this.body=J,this.decoders={},this.encoders={}}Y.prototype._createNamed=function(z){var J;try{J=(()=>{throw new Error("Cannot require module "+"vm");})().runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch(q){J=function(W){this._initNamed(W)}}return Z(J,z),J.prototype._initNamed=function(q){z.call(this,q)},new J(this)},Y.prototype._getDecoder=function(z){if(z=z||"der",!this.decoders.hasOwnProperty(z))this.decoders[z]=this._createNamed(Q.decoders[z]);return this.decoders[z]},Y.prototype.decode=function(z,J,q){return this._getDecoder(J).decode(z,q)},Y.prototype._getEncoder=function(z){if(z=z||"der",!this.encoders.hasOwnProperty(z))this.encoders[z]=this._createNamed(Q.encoders[z]);return this.encoders[z]},Y.prototype.encode=function(z,J,q){return this._getEncoder(J).encode(z,q)}}),uG0=A0(($)=>{var Q=B4();function Z(Y){this._reporterState={obj:null,path:[],options:Y||{},errors:[]}}$.Reporter=Z,Z.prototype.isError=function(Y){return Y instanceof X},Z.prototype.save=function(){var Y=this._reporterState;return{obj:Y.obj,pathLen:Y.path.length}},Z.prototype.restore=function(Y){var z=this._reporterState;z.obj=Y.obj,z.path=z.path.slice(0,Y.pathLen)},Z.prototype.enterKey=function(Y){return this._reporterState.path.push(Y)},Z.prototype.exitKey=function(Y){var z=this._reporterState;z.path=z.path.slice(0,Y-1)},Z.prototype.leaveKey=function(Y,z,J){var q=this._reporterState;if(this.exitKey(Y),q.obj!==null)q.obj[z]=J},Z.prototype.path=function(){return this._reporterState.path.join("/")},Z.prototype.enterObject=function(){var Y=this._reporterState,z=Y.obj;return Y.obj={},z},Z.prototype.leaveObject=function(Y){var z=this._reporterState,J=z.obj;return z.obj=Y,J},Z.prototype.error=function(Y){var z,J=this._reporterState,q=Y instanceof X;if(q)z=Y;else z=new X(J.path.map(function(W){return"["+JSON.stringify(W)+"]"}).join(""),Y.message||Y,Y.stack);if(!J.options.partial)throw z;if(!q)J.errors.push(z);return z},Z.prototype.wrapResult=function(Y){var z=this._reporterState;if(!z.options.partial)return Y;return{result:this.isError(Y)?null:Y,errors:z.errors}};function X(Y,z){this.path=Y,this.rethrow(z)}Q(X,Error),X.prototype.rethrow=function(Y){if(this.message=Y+" at: "+(this.path||"(shallow)"),Error.captureStackTrace)Error.captureStackTrace(this,X);if(!this.stack)try{throw Error(this.message)}catch(z){this.stack=z.stack}return this}}),Md=A0(($)=>{var Q=B4(),Z=hV().Reporter,X=(s6(),Q5(T8)).Buffer;function Y(J,q){if(Z.call(this,q),!X.isBuffer(J)){this.error("Input not Buffer");return}this.base=J,this.offset=0,this.length=J.length}Q(Y,Z),$.DecoderBuffer=Y,Y.prototype.save=function(){return{offset:this.offset,reporter:Z.prototype.save.call(this)}},Y.prototype.restore=function(J){var q=new Y(this.base);return q.offset=J.offset,q.length=this.offset,this.offset=J.offset,Z.prototype.restore.call(this,J.reporter),q},Y.prototype.isEmpty=function(){return this.offset===this.length},Y.prototype.readUInt8=function(J){if(this.offset+1<=this.length)return this.base.readUInt8(this.offset++,!0);else return this.error(J||"DecoderBuffer overrun")},Y.prototype.skip=function(J,q){if(!(this.offset+J<=this.length))return this.error(q||"DecoderBuffer overrun");var W=new Y(this.base);return W._reporterState=this._reporterState,W.offset=this.offset,W.length=this.offset+J,this.offset+=J,W},Y.prototype.raw=function(J){return this.base.slice(J?J.offset:this.offset,this.length)};function z(J,q){if(Array.isArray(J))this.length=0,this.value=J.map(function(W){if(!(W instanceof z))W=new z(W,q);return this.length+=W.length,W},this);else if(typeof J==="number"){if(!(0<=J&&J<=255))return q.error("non-byte EncoderBuffer value");this.value=J,this.length=1}else if(typeof J==="string")this.value=J,this.length=X.byteLength(J);else if(X.isBuffer(J))this.value=J,this.length=J.length;else return q.error("Unsupported type: "+typeof J)}$.EncoderBuffer=z,z.prototype.join=function(J,q){if(!J)J=new X(this.length);if(!q)q=0;if(this.length===0)return J;if(Array.isArray(this.value))this.value.forEach(function(W){W.join(J,q),q+=W.length});else{if(typeof this.value==="number")J[q]=this.value;else if(typeof this.value==="string")J.write(this.value,q);else if(X.isBuffer(this.value))this.value.copy(J,q);q+=this.length}return J}}),cG0=A0(($,Q)=>{var Z=hV().Reporter,X=hV().EncoderBuffer,Y=hV().DecoderBuffer,z=oX(),J=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],q=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(J),W=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function G(D,P){var H={};if(this._baseState=H,H.enc=D,H.parent=P||null,H.children=null,H.tag=null,H.args=null,H.reverseArgs=null,H.choice=null,H.optional=!1,H.any=!1,H.obj=!1,H.use=null,H.useDecoder=null,H.key=null,H.default=null,H.explicit=null,H.implicit=null,H.contains=null,!H.parent)H.children=[],this._wrap()}Q.exports=G;var U=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];G.prototype.clone=function(){var D=this._baseState,P={};U.forEach(function(N){P[N]=D[N]});var H=new this.constructor(P.parent);return H._baseState=P,H},G.prototype._wrap=function(){var D=this._baseState;q.forEach(function(P){this[P]=function(){var H=new this.constructor(this);return D.children.push(H),H[P].apply(H,arguments)}},this)},G.prototype._init=function(D){var P=this._baseState;z(P.parent===null),D.call(this),P.children=P.children.filter(function(H){return H._baseState.parent===this},this),z.equal(P.children.length,1,"Root node can have only one child")},G.prototype._useArgs=function(D){var P=this._baseState,H=D.filter(function(N){return N instanceof this.constructor},this);if(D=D.filter(function(N){return!(N instanceof this.constructor)},this),H.length!==0)z(P.children===null),P.children=H,H.forEach(function(N){N._baseState.parent=this},this);if(D.length!==0)z(P.args===null),P.args=D,P.reverseArgs=D.map(function(N){if(typeof N!=="object"||N.constructor!==Object)return N;var C={};return Object.keys(N).forEach(function(L){if(L==(L|0))L|=0;var B=N[L];C[B]=L}),C})},W.forEach(function(D){G.prototype[D]=function(){var P=this._baseState;throw Error(D+" not implemented for encoding: "+P.enc)}}),J.forEach(function(D){G.prototype[D]=function(){var P=this._baseState,H=Array.prototype.slice.call(arguments);return z(P.tag===null),P.tag=D,this._useArgs(H),this}}),G.prototype.use=function(D){z(D);var P=this._baseState;return z(P.use===null),P.use=D,this},G.prototype.optional=function(){var D=this._baseState;return D.optional=!0,this},G.prototype.def=function(D){var P=this._baseState;return z(P.default===null),P.default=D,P.optional=!0,this},G.prototype.explicit=function(D){var P=this._baseState;return z(P.explicit===null&&P.implicit===null),P.explicit=D,this},G.prototype.implicit=function(D){var P=this._baseState;return z(P.explicit===null&&P.implicit===null),P.implicit=D,this},G.prototype.obj=function(){var D=this._baseState,P=Array.prototype.slice.call(arguments);if(D.obj=!0,P.length!==0)this._useArgs(P);return this},G.prototype.key=function(D){var P=this._baseState;return z(P.key===null),P.key=D,this},G.prototype.any=function(){var D=this._baseState;return D.any=!0,this},G.prototype.choice=function(D){var P=this._baseState;return z(P.choice===null),P.choice=D,this._useArgs(Object.keys(D).map(function(H){return D[H]})),this},G.prototype.contains=function(D){var P=this._baseState;return z(P.use===null),P.contains=D,this},G.prototype._decode=function(D,P){var H=this._baseState;if(H.parent===null)return D.wrapResult(H.children[0]._decode(D,P));var N=H.default,C=!0,L=null;if(H.key!==null)L=D.enterKey(H.key);if(H.optional){var B=null;if(H.explicit!==null)B=H.explicit;else if(H.implicit!==null)B=H.implicit;else if(H.tag!==null)B=H.tag;if(B===null&&!H.any){var E=D.save();try{if(H.choice===null)this._decodeGeneric(H.tag,D,P);else this._decodeChoice(D,P);C=!0}catch(h){C=!1}D.restore(E)}else if(C=this._peekTag(D,B,H.any),D.isError(C))return C}var I;if(H.obj&&C)I=D.enterObject();if(C){if(H.explicit!==null){var _=this._decodeTag(D,H.explicit);if(D.isError(_))return _;D=_}var f=D.offset;if(H.use===null&&H.choice===null){if(H.any)var E=D.save();var x=this._decodeTag(D,H.implicit!==null?H.implicit:H.tag,H.any);if(D.isError(x))return x;if(H.any)N=D.raw(E);else D=x}if(P&&P.track&&H.tag!==null)P.track(D.path(),f,D.length,"tagged");if(P&&P.track&&H.tag!==null)P.track(D.path(),D.offset,D.length,"content");if(H.any)N=N;else if(H.choice===null)N=this._decodeGeneric(H.tag,D,P);else N=this._decodeChoice(D,P);if(D.isError(N))return N;if(!H.any&&H.choice===null&&H.children!==null)H.children.forEach(function(h){h._decode(D,P)});if(H.contains&&(H.tag==="octstr"||H.tag==="bitstr")){var g=new Y(N);N=this._getUse(H.contains,D._reporterState.obj)._decode(g,P)}}if(H.obj&&C)N=D.leaveObject(I);if(H.key!==null&&(N!==null||C===!0))D.leaveKey(L,H.key,N);else if(L!==null)D.exitKey(L);return N},G.prototype._decodeGeneric=function(D,P,H){var N=this._baseState;if(D==="seq"||D==="set")return null;if(D==="seqof"||D==="setof")return this._decodeList(P,D,N.args[0],H);else if(/str$/.test(D))return this._decodeStr(P,D,H);else if(D==="objid"&&N.args)return this._decodeObjid(P,N.args[0],N.args[1],H);else if(D==="objid")return this._decodeObjid(P,null,null,H);else if(D==="gentime"||D==="utctime")return this._decodeTime(P,D,H);else if(D==="null_")return this._decodeNull(P,H);else if(D==="bool")return this._decodeBool(P,H);else if(D==="objDesc")return this._decodeStr(P,D,H);else if(D==="int"||D==="enum")return this._decodeInt(P,N.args&&N.args[0],H);if(N.use!==null)return this._getUse(N.use,P._reporterState.obj)._decode(P,H);else return P.error("unknown tag: "+D)},G.prototype._getUse=function(D,P){var H=this._baseState;if(H.useDecoder=this._use(D,P),z(H.useDecoder._baseState.parent===null),H.useDecoder=H.useDecoder._baseState.children[0],H.implicit!==H.useDecoder._baseState.implicit)H.useDecoder=H.useDecoder.clone(),H.useDecoder._baseState.implicit=H.implicit;return H.useDecoder},G.prototype._decodeChoice=function(D,P){var H=this._baseState,N=null,C=!1;if(Object.keys(H.choice).some(function(L){var B=D.save(),E=H.choice[L];try{var I=E._decode(D,P);if(D.isError(I))return!1;N={type:L,value:I},C=!0}catch(_){return D.restore(B),!1}return!0},this),!C)return D.error("Choice not matched");return N},G.prototype._createEncoderBuffer=function(D){return new X(D,this.reporter)},G.prototype._encode=function(D,P,H){var N=this._baseState;if(N.default!==null&&N.default===D)return;var C=this._encodeValue(D,P,H);if(C===void 0)return;if(this._skipDefault(C,P,H))return;return C},G.prototype._encodeValue=function(D,P,H){var N=this._baseState;if(N.parent===null)return N.children[0]._encode(D,P||new Z);var E=null;if(this.reporter=P,N.optional&&D===void 0)if(N.default!==null)D=N.default;else return;var C=null,L=!1;if(N.any)E=this._createEncoderBuffer(D);else if(N.choice)E=this._encodeChoice(D,P);else if(N.contains)C=this._getUse(N.contains,H)._encode(D,P),L=!0;else if(N.children)C=N.children.map(function(f){if(f._baseState.tag==="null_")return f._encode(null,P,D);if(f._baseState.key===null)return P.error("Child should have a key");var x=P.enterKey(f._baseState.key);if(typeof D!=="object")return P.error("Child expected, but input is not object");var g=f._encode(D[f._baseState.key],P,D);return P.leaveKey(x),g},this).filter(function(f){return f}),C=this._createEncoderBuffer(C);else if(N.tag==="seqof"||N.tag==="setof"){if(!(N.args&&N.args.length===1))return P.error("Too many args for : "+N.tag);if(!Array.isArray(D))return P.error("seqof/setof, but data is not Array");var B=this.clone();B._baseState.implicit=null,C=this._createEncoderBuffer(D.map(function(f){var x=this._baseState;return this._getUse(x.args[0],D)._encode(f,P)},B))}else if(N.use!==null)E=this._getUse(N.use,H)._encode(D,P);else C=this._encodePrimitive(N.tag,D),L=!0;var E;if(!N.any&&N.choice===null){var I=N.implicit!==null?N.implicit:N.tag,_=N.implicit===null?"universal":"context";if(I===null){if(N.use===null)P.error("Tag could be omitted only for .use()")}else if(N.use===null)E=this._encodeComposite(I,L,_,C)}if(N.explicit!==null)E=this._encodeComposite(N.explicit,!1,"context",E);return E},G.prototype._encodeChoice=function(D,P){var H=this._baseState,N=H.choice[D.type];if(!N)z(!1,D.type+" not found in "+JSON.stringify(Object.keys(H.choice)));return N._encode(D.value,P)},G.prototype._encodePrimitive=function(D,P){var H=this._baseState;if(/str$/.test(D))return this._encodeStr(P,D);else if(D==="objid"&&H.args)return this._encodeObjid(P,H.reverseArgs[0],H.args[1]);else if(D==="objid")return this._encodeObjid(P,null,null);else if(D==="gentime"||D==="utctime")return this._encodeTime(P,D);else if(D==="null_")return this._encodeNull();else if(D==="int"||D==="enum")return this._encodeInt(P,H.args&&H.reverseArgs[0]);else if(D==="bool")return this._encodeBool(P);else if(D==="objDesc")return this._encodeStr(P,D);else throw Error("Unsupported tag: "+D)},G.prototype._isNumstr=function(D){return/^[0-9 ]*$/.test(D)},G.prototype._isPrintstr=function(D){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(D)}}),hV=A0(($)=>{var Q=$;Q.Reporter=uG0().Reporter,Q.DecoderBuffer=Md().DecoderBuffer,Q.EncoderBuffer=Md().EncoderBuffer,Q.Node=cG0()}),dG0=A0(($)=>{var Q=xd();$.tagClass={0:"universal",1:"application",2:"context",3:"private"},$.tagClassByName=Q._reverse($.tagClass),$.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},$.tagByName=Q._reverse($.tag)}),xd=A0(($)=>{var Q=$;Q._reverse=function(Z){var X={};return Object.keys(Z).forEach(function(Y){if((Y|0)==Y)Y=Y|0;var z=Z[Y];X[z]=Y}),X},Q.der=dG0()}),bd=A0(($,Q)=>{var Z=B4(),X=dV(),Y=X.base,z=X.bignum,J=X.constants.der;function q(D){this.enc="der",this.name=D.name,this.entity=D,this.tree=new W,this.tree._init(D.body)}Q.exports=q,q.prototype.decode=function(D,P){if(!(D instanceof Y.DecoderBuffer))D=new Y.DecoderBuffer(D,P);return this.tree._decode(D,P)};function W(D){Y.Node.call(this,"der",D)}Z(W,Y.Node),W.prototype._peekTag=function(D,P,H){if(D.isEmpty())return!1;var N=D.save(),C=G(D,'Failed to peek tag: "'+P+'"');if(D.isError(C))return C;return D.restore(N),C.tag===P||C.tagStr===P||C.tagStr+"of"===P||H},W.prototype._decodeTag=function(D,P,H){var N=G(D,'Failed to decode tag of "'+P+'"');if(D.isError(N))return N;var C=U(D,N.primitive,'Failed to get length of "'+P+'"');if(D.isError(C))return C;if(!H&&N.tag!==P&&N.tagStr!==P&&N.tagStr+"of"!==P)return D.error('Failed to match tag: "'+P+'"');if(N.primitive||C!==null)return D.skip(C,'Failed to match body of: "'+P+'"');var L=D.save(),B=this._skipUntilEnd(D,'Failed to skip indefinite length body: "'+this.tag+'"');if(D.isError(B))return B;return C=D.offset-L.offset,D.restore(L),D.skip(C,'Failed to match body of: "'+P+'"')},W.prototype._skipUntilEnd=function(D,P){while(!0){var H=G(D,P);if(D.isError(H))return H;var N=U(D,H.primitive,P);if(D.isError(N))return N;var C;if(H.primitive||N!==null)C=D.skip(N);else C=this._skipUntilEnd(D,P);if(D.isError(C))return C;if(H.tagStr==="end")break}},W.prototype._decodeList=function(D,P,H,N){var C=[];while(!D.isEmpty()){var L=this._peekTag(D,"end");if(D.isError(L))return L;var B=H.decode(D,"der",N);if(D.isError(B)&&L)break;C.push(B)}return C},W.prototype._decodeStr=function(D,P){if(P==="bitstr"){var H=D.readUInt8();if(D.isError(H))return H;return{unused:H,data:D.raw()}}else if(P==="bmpstr"){var N=D.raw();if(N.length%2===1)return D.error("Decoding of string type: bmpstr length mismatch");var C="";for(var L=0;L<N.length/2;L++)C+=String.fromCharCode(N.readUInt16BE(L*2));return C}else if(P==="numstr"){var B=D.raw().toString("ascii");if(!this._isNumstr(B))return D.error("Decoding of string type: numstr unsupported characters");return B}else if(P==="octstr")return D.raw();else if(P==="objDesc")return D.raw();else if(P==="printstr"){var E=D.raw().toString("ascii");if(!this._isPrintstr(E))return D.error("Decoding of string type: printstr unsupported characters");return E}else if(/str$/.test(P))return D.raw().toString();else return D.error("Decoding of string type: "+P+" unsupported")},W.prototype._decodeObjid=function(D,P,H){var N,C=[],L=0;while(!D.isEmpty()){var B=D.readUInt8();if(L<<=7,L|=B&127,(B&128)===0)C.push(L),L=0}if(B&128)C.push(L);var E=C[0]/40|0,I=C[0]%40;if(H)N=C;else N=[E,I].concat(C.slice(1));if(P){var _=P[N.join(" ")];if(_===void 0)_=P[N.join(".")];if(_!==void 0)N=_}return N},W.prototype._decodeTime=function(D,P){var H=D.raw().toString();if(P==="gentime")var N=H.slice(0,4)|0,C=H.slice(4,6)|0,L=H.slice(6,8)|0,B=H.slice(8,10)|0,E=H.slice(10,12)|0,I=H.slice(12,14)|0;else if(P==="utctime"){var N=H.slice(0,2)|0,C=H.slice(2,4)|0,L=H.slice(4,6)|0,B=H.slice(6,8)|0,E=H.slice(8,10)|0,I=H.slice(10,12)|0;if(N<70)N=2000+N;else N=1900+N}else return D.error("Decoding "+P+" time is not supported yet");return Date.UTC(N,C-1,L,B,E,I,0)},W.prototype._decodeNull=function(D){return null},W.prototype._decodeBool=function(D){var P=D.readUInt8();if(D.isError(P))return P;else return P!==0},W.prototype._decodeInt=function(D,P){var H=D.raw(),N=new z(H);if(P)N=P[N.toString(10)]||N;return N},W.prototype._use=function(D,P){if(typeof D==="function")D=D(P);return D._getDecoder("der").tree};function G(D,P){var H=D.readUInt8(P);if(D.isError(H))return H;var N=J.tagClass[H>>6],C=(H&32)===0;if((H&31)===31){var L=H;H=0;while((L&128)===128){if(L=D.readUInt8(P),D.isError(L))return L;H<<=7,H|=L&127}}else H&=31;var B=J.tag[H];return{cls:N,primitive:C,tag:H,tagStr:B}}function U(D,P,H){var N=D.readUInt8(H);if(D.isError(N))return N;if(!P&&N===128)return null;if((N&128)===0)return N;var C=N&127;if(C>4)return D.error("length octect is too long");N=0;for(var L=0;L<C;L++){N<<=8;var B=D.readUInt8(H);if(D.isError(B))return B;N|=B}return N}}),lG0=A0(($,Q)=>{var Z=B4(),X=(s6(),Q5(T8)).Buffer,Y=bd();function z(J){Y.call(this,J),this.enc="pem"}Z(z,Y),Q.exports=z,z.prototype.decode=function(J,q){var W=J.toString().split(/[\r\n]+/g),G=q.label.toUpperCase(),U=/^-----(BEGIN|END) ([^-]+)-----$/,D=-1,P=-1;for(var H=0;H<W.length;H++){var N=W[H].match(U);if(N===null)continue;if(N[2]!==G)continue;if(D===-1){if(N[1]!=="BEGIN")break;D=H}else{if(N[1]!=="END")break;P=H;break}}if(D===-1||P===-1)throw Error("PEM section not found for: "+G);var C=W.slice(D+1,P).join("");C.replace(/[^a-z0-9\+\/=]+/gi,"");var L=new X(C,"base64");return Y.prototype.decode.call(this,L,q)}}),iG0=A0(($)=>{var Q=$;Q.der=bd(),Q.pem=lG0()}),vd=A0(($,Q)=>{var Z=B4(),X=(s6(),Q5(T8)).Buffer,Y=dV(),z=Y.base,J=Y.constants.der;function q(D){this.enc="der",this.name=D.name,this.entity=D,this.tree=new W,this.tree._init(D.body)}Q.exports=q,q.prototype.encode=function(D,P){return this.tree._encode(D,P).join()};function W(D){z.Node.call(this,"der",D)}Z(W,z.Node),W.prototype._encodeComposite=function(D,P,H,N){var C=U(D,P,H,this.reporter);if(N.length<128){var E=new X(2);return E[0]=C,E[1]=N.length,this._createEncoderBuffer([E,N])}var L=1;for(var B=N.length;B>=256;B>>=8)L++;var E=new X(2+L);E[0]=C,E[1]=128|L;for(var B=1+L,I=N.length;I>0;B--,I>>=8)E[B]=I&255;return this._createEncoderBuffer([E,N])},W.prototype._encodeStr=function(D,P){if(P==="bitstr")return this._createEncoderBuffer([D.unused|0,D.data]);else if(P==="bmpstr"){var H=new X(D.length*2);for(var N=0;N<D.length;N++)H.writeUInt16BE(D.charCodeAt(N),N*2);return this._createEncoderBuffer(H)}else if(P==="numstr"){if(!this._isNumstr(D))return this.reporter.error("Encoding of string type: numstr supports only digits and space");return this._createEncoderBuffer(D)}else if(P==="printstr"){if(!this._isPrintstr(D))return this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark");return this._createEncoderBuffer(D)}else if(/str$/.test(P))return this._createEncoderBuffer(D);else if(P==="objDesc")return this._createEncoderBuffer(D);else return this.reporter.error("Encoding of string type: "+P+" unsupported")},W.prototype._encodeObjid=function(D,P,H){if(typeof D==="string"){if(!P)return this.reporter.error("string objid given, but no values map found");if(!P.hasOwnProperty(D))return this.reporter.error("objid not found in values map");D=P[D].split(/[\s\.]+/g);for(var N=0;N<D.length;N++)D[N]|=0}else if(Array.isArray(D)){D=D.slice();for(var N=0;N<D.length;N++)D[N]|=0}if(!Array.isArray(D))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(D));if(!H){if(D[1]>=40)return this.reporter.error("Second objid identifier OOB");D.splice(0,2,D[0]*40+D[1])}var C=0;for(var N=0;N<D.length;N++){var L=D[N];for(C++;L>=128;L>>=7)C++}var B=new X(C),E=B.length-1;for(var N=D.length-1;N>=0;N--){var L=D[N];B[E--]=L&127;while((L>>=7)>0)B[E--]=128|L&127}return this._createEncoderBuffer(B)};function G(D){if(D<10)return"0"+D;else return D}W.prototype._encodeTime=function(D,P){var H,N=new Date(D);if(P==="gentime")H=[G(N.getFullYear()),G(N.getUTCMonth()+1),G(N.getUTCDate()),G(N.getUTCHours()),G(N.getUTCMinutes()),G(N.getUTCSeconds()),"Z"].join("");else if(P==="utctime")H=[G(N.getFullYear()%100),G(N.getUTCMonth()+1),G(N.getUTCDate()),G(N.getUTCHours()),G(N.getUTCMinutes()),G(N.getUTCSeconds()),"Z"].join("");else this.reporter.error("Encoding "+P+" time is not supported yet");return this._encodeStr(H,"octstr")},W.prototype._encodeNull=function(){return this._createEncoderBuffer("")},W.prototype._encodeInt=function(D,P){if(typeof D==="string"){if(!P)return this.reporter.error("String int or enum given, but no values map");if(!P.hasOwnProperty(D))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(D));D=P[D]}if(typeof D!=="number"&&!X.isBuffer(D)){var H=D.toArray();if(!D.sign&&H[0]&128)H.unshift(0);D=new X(H)}if(X.isBuffer(D)){var N=D.length;if(D.length===0)N++;var L=new X(N);if(D.copy(L),D.length===0)L[0]=0;return this._createEncoderBuffer(L)}if(D<128)return this._createEncoderBuffer(D);if(D<256)return this._createEncoderBuffer([0,D]);var N=1;for(var C=D;C>=256;C>>=8)N++;var L=Array(N);for(var C=L.length-1;C>=0;C--)L[C]=D&255,D>>=8;if(L[0]&128)L.unshift(0);return this._createEncoderBuffer(new X(L))},W.prototype._encodeBool=function(D){return this._createEncoderBuffer(D?255:0)},W.prototype._use=function(D,P){if(typeof D==="function")D=D(P);return D._getEncoder("der").tree},W.prototype._skipDefault=function(D,P,H){var N=this._baseState,C;if(N.default===null)return!1;var L=D.join();if(N.defaultBuffer===void 0)N.defaultBuffer=this._encodeValue(N.default,P,H).join();if(L.length!==N.defaultBuffer.length)return!1;for(C=0;C<L.length;C++)if(L[C]!==N.defaultBuffer[C])return!1;return!0};function U(D,P,H,N){var C;if(D==="seqof")D="seq";else if(D==="setof")D="set";if(J.tagByName.hasOwnProperty(D))C=J.tagByName[D];else if(typeof D==="number"&&(D|0)===D)C=D;else return N.error("Unknown tag: "+D);if(C>=31)return N.error("Multi-octet tag encoding unsupported");if(!P)C|=32;return C|=J.tagClassByName[H||"universal"]<<6,C}}),oG0=A0(($,Q)=>{var Z=B4(),X=vd();function Y(z){X.call(this,z),this.enc="pem"}Z(Y,X),Q.exports=Y,Y.prototype.encode=function(z,J){var q=X.prototype.encode.call(this,z),W=q.toString("base64"),G=["-----BEGIN "+J.label+"-----"];for(var U=0;U<W.length;U+=64)G.push(W.slice(U,U+64));return G.push("-----END "+J.label+"-----"),G.join(`
`)}}),nG0=A0(($)=>{var Q=$;Q.der=vd(),Q.pem=oG0()}),dV=A0(($)=>{var Q=$;Q.bignum=mG0(),Q.define=pG0().define,Q.base=hV(),Q.constants=xd(),Q.decoders=iG0(),Q.encoders=nG0()}),rG0=A0(($,Q)=>{var Z=dV(),X=Z.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),Y=Z.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),z=Z.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),J=Z.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(z),this.key("subjectPublicKey").bitstr())}),q=Z.define("RelativeDistinguishedName",function(){this.setof(Y)}),W=Z.define("RDNSequence",function(){this.seqof(q)}),G=Z.define("Name",function(){this.choice({rdnSequence:this.use(W)})}),U=Z.define("Validity",function(){this.seq().obj(this.key("notBefore").use(X),this.key("notAfter").use(X))}),D=Z.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),P=Z.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(z),this.key("issuer").use(G),this.key("validity").use(U),this.key("subject").use(G),this.key("subjectPublicKeyInfo").use(J),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(D).optional())}),H=Z.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(P),this.key("signatureAlgorithm").use(z),this.key("signatureValue").bitstr())});Q.exports=H}),aG0=A0(($)=>{var Q=dV();$.certificate=rG0();var Z=Q.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});$.RSAPrivateKey=Z;var X=Q.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});$.RSAPublicKey=X;var Y=Q.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),z=Q.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(Y),this.key("subjectPublicKey").bitstr())});$.PublicKey=z;var J=Q.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(Y),this.key("subjectPrivateKey").octstr())});$.PrivateKey=J;var q=Q.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});$.EncryptedPrivateKey=q;var W=Q.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});$.DSAPrivateKey=W,$.DSAparam=Q.define("DSAparam",function(){this.int()});var G=Q.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),U=Q.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(G),this.key("publicKey").optional().explicit(1).bitstr())});$.ECPrivateKey=U,$.signature=Q.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})}),sG0=A0(($,Q)=>{Q.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}}),tG0=A0(($,Q)=>{var Z=L2().Buffer,X=AB().Transform,Y=B4();function z(G){X.call(this),this._block=Z.allocUnsafe(G),this._blockSize=G,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}Y(z,X),z.prototype._transform=function(G,U,D){var P=null;try{this.update(G,U)}catch(H){P=H}D(P)},z.prototype._flush=function(G){var U=null;try{this.push(this.digest())}catch(D){U=D}G(U)};var J=typeof Uint8Array<"u",q=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(Z.prototype instanceof Uint8Array||Z.TYPED_ARRAY_SUPPORT);function W(G,U){if(G instanceof Z)return G;if(typeof G==="string")return Z.from(G,U);if(q&&ArrayBuffer.isView(G)){if(G.byteLength===0)return Z.alloc(0);var D=Z.from(G.buffer,G.byteOffset,G.byteLength);if(D.byteLength===G.byteLength)return D}if(J&&G instanceof Uint8Array)return Z.from(G);if(Z.isBuffer(G)&&G.constructor&&typeof G.constructor.isBuffer==="function"&&G.constructor.isBuffer(G))return Z.from(G);throw TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}z.prototype.update=function(G,U){if(this._finalized)throw Error("Digest already called");G=W(G,U);var D=this._block,P=0;while(this._blockOffset+G.length-P>=this._blockSize){for(var H=this._blockOffset;H<this._blockSize;)D[H++]=G[P++];this._update(),this._blockOffset=0}while(P<G.length)D[this._blockOffset++]=G[P++];for(var N=0,C=G.length*8;C>0;++N)if(this._length[N]+=C,C=this._length[N]/4294967296|0,C>0)this._length[N]-=4294967296*C;return this},z.prototype._update=function(){throw Error("_update is not implemented")},z.prototype.digest=function(G){if(this._finalized)throw Error("Digest already called");this._finalized=!0;var U=this._digest();if(G!==void 0)U=U.toString(G);this._block.fill(0),this._blockOffset=0;for(var D=0;D<4;++D)this._length[D]=0;return U},z.prototype._digest=function(){throw Error("_digest is not implemented")},Q.exports=z}),eG0=A0(($,Q)=>{var Z=B4(),X=tG0(),Y=L2().Buffer,z=Array(16);function J(){X.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}Z(J,X),J.prototype._update=function(){var P=z;for(var H=0;H<16;++H)P[H]=this._block.readInt32LE(H*4);var N=this._a,C=this._b,L=this._c,B=this._d;N=W(N,C,L,B,P[0],3614090360,7),B=W(B,N,C,L,P[1],3905402710,12),L=W(L,B,N,C,P[2],606105819,17),C=W(C,L,B,N,P[3],3250441966,22),N=W(N,C,L,B,P[4],4118548399,7),B=W(B,N,C,L,P[5],1200080426,12),L=W(L,B,N,C,P[6],2821735955,17),C=W(C,L,B,N,P[7],4249261313,22),N=W(N,C,L,B,P[8],1770035416,7),B=W(B,N,C,L,P[9],2336552879,12),L=W(L,B,N,C,P[10],4294925233,17),C=W(C,L,B,N,P[11],2304563134,22),N=W(N,C,L,B,P[12],1804603682,7),B=W(B,N,C,L,P[13],4254626195,12),L=W(L,B,N,C,P[14],2792965006,17),C=W(C,L,B,N,P[15],1236535329,22),N=G(N,C,L,B,P[1],4129170786,5),B=G(B,N,C,L,P[6],3225465664,9),L=G(L,B,N,C,P[11],643717713,14),C=G(C,L,B,N,P[0],3921069994,20),N=G(N,C,L,B,P[5],3593408605,5),B=G(B,N,C,L,P[10],38016083,9),L=G(L,B,N,C,P[15],3634488961,14),C=G(C,L,B,N,P[4],3889429448,20),N=G(N,C,L,B,P[9],568446438,5),B=G(B,N,C,L,P[14],3275163606,9),L=G(L,B,N,C,P[3],4107603335,14),C=G(C,L,B,N,P[8],1163531501,20),N=G(N,C,L,B,P[13],2850285829,5),B=G(B,N,C,L,P[2],4243563512,9),L=G(L,B,N,C,P[7],1735328473,14),C=G(C,L,B,N,P[12],2368359562,20),N=U(N,C,L,B,P[5],4294588738,4),B=U(B,N,C,L,P[8],2272392833,11),L=U(L,B,N,C,P[11],1839030562,16),C=U(C,L,B,N,P[14],4259657740,23),N=U(N,C,L,B,P[1],2763975236,4),B=U(B,N,C,L,P[4],1272893353,11),L=U(L,B,N,C,P[7],4139469664,16),C=U(C,L,B,N,P[10],3200236656,23),N=U(N,C,L,B,P[13],681279174,4),B=U(B,N,C,L,P[0],3936430074,11),L=U(L,B,N,C,P[3],3572445317,16),C=U(C,L,B,N,P[6],76029189,23),N=U(N,C,L,B,P[9],3654602809,4),B=U(B,N,C,L,P[12],3873151461,11),L=U(L,B,N,C,P[15],530742520,16),C=U(C,L,B,N,P[2],3299628645,23),N=D(N,C,L,B,P[0],4096336452,6),B=D(B,N,C,L,P[7],1126891415,10),L=D(L,B,N,C,P[14],2878612391,15),C=D(C,L,B,N,P[5],4237533241,21),N=D(N,C,L,B,P[12],1700485571,6),B=D(B,N,C,L,P[3],2399980690,10),L=D(L,B,N,C,P[10],4293915773,15),C=D(C,L,B,N,P[1],2240044497,21),N=D(N,C,L,B,P[8],1873313359,6),B=D(B,N,C,L,P[15],4264355552,10),L=D(L,B,N,C,P[6],2734768916,15),C=D(C,L,B,N,P[13],1309151649,21),N=D(N,C,L,B,P[4],4149444226,6),B=D(B,N,C,L,P[11],3174756917,10),L=D(L,B,N,C,P[2],718787259,15),C=D(C,L,B,N,P[9],3951481745,21),this._a=this._a+N|0,this._b=this._b+C|0,this._c=this._c+L|0,this._d=this._d+B|0},J.prototype._digest=function(){if(this._block[this._blockOffset++]=128,this._blockOffset>56)this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0;this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var P=Y.allocUnsafe(16);return P.writeInt32LE(this._a,0),P.writeInt32LE(this._b,4),P.writeInt32LE(this._c,8),P.writeInt32LE(this._d,12),P};function q(P,H){return P<<H|P>>>32-H}function W(P,H,N,C,L,B,E){return q(P+(H&N|~H&C)+L+B|0,E)+H|0}function G(P,H,N,C,L,B,E){return q(P+(H&C|N&~C)+L+B|0,E)+H|0}function U(P,H,N,C,L,B,E){return q(P+(H^N^C)+L+B|0,E)+H|0}function D(P,H,N,C,L,B,E){return q(P+(N^(H|~C))+L+B|0,E)+H|0}Q.exports=J}),$U0=A0(($,Q)=>{var Z=L2().Buffer,X=eG0();function Y(z,J,q,W){if(!Z.isBuffer(z))z=Z.from(z,"binary");if(J){if(!Z.isBuffer(J))J=Z.from(J,"binary");if(J.length!==8)throw RangeError("salt should be Buffer with 8 byte length")}var G=q/8,U=Z.alloc(G),D=Z.alloc(W||0),P=Z.alloc(0);while(G>0||W>0){var H=new X;if(H.update(P),H.update(z),J)H.update(J);P=H.digest();var N=0;if(G>0){var C=U.length-G;N=Math.min(G,P.length),P.copy(U,C,0,N),G-=N}if(N<P.length&&W>0){var L=D.length-W,B=Math.min(W,P.length-N);P.copy(D,L,N,N+B),W-=B}}return P.fill(0),{key:U,iv:D}}Q.exports=Y}),yd=A0(($)=>{var Q=(E9(),Q5(O9));$.createCipher=$.Cipher=Q.createCipher,$.createCipheriv=$.Cipheriv=Q.createCipheriv,$.createDecipher=$.Decipher=Q.createDecipher,$.createDecipheriv=$.Decipheriv=Q.createDecipheriv,$.listCiphers=$.getCiphers=Q.getCiphers}),QU0=A0(($,Q)=>{var Z=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,X=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,Y=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,z=$U0(),J=yd(),q=L2().Buffer;Q.exports=function(W,G){var U=W.toString(),D=U.match(Z),P;if(!D){var H=U.match(Y);P=q.from(H[2].replace(/[\r\n]/g,""),"base64")}else{var N="aes"+D[1],C=q.from(D[2],"hex"),L=q.from(D[3].replace(/[\r\n]/g,""),"base64"),B=z(G,C.slice(0,8),parseInt(D[1],10)).key,E=[],I=J.createDecipheriv(N,B,C);E.push(I.update(L)),E.push(I.final()),P=q.concat(E)}var _=U.match(X)[1];return{tag:_,data:P}}}),gd=A0(($,Q)=>{var Z=aG0(),X=sG0(),Y=QU0(),z=yd(),J=Bd().pbkdf2Sync,q=L2().Buffer;function W(U,D){var P=U.algorithm.decrypt.kde.kdeparams.salt,H=parseInt(U.algorithm.decrypt.kde.kdeparams.iters.toString(),10),N=X[U.algorithm.decrypt.cipher.algo.join(".")],C=U.algorithm.decrypt.cipher.iv,L=U.subjectPrivateKey,B=parseInt(N.split("-")[1],10)/8,E=J(D,P,H,B,"sha1"),I=z.createDecipheriv(N,E,C),_=[];return _.push(I.update(L)),_.push(I.final()),q.concat(_)}function G(U){var D;if(typeof U==="object"&&!q.isBuffer(U))D=U.passphrase,U=U.key;if(typeof U==="string")U=q.from(U);var P=Y(U,D),H=P.tag,N=P.data,C,L;switch(H){case"CERTIFICATE":L=Z.certificate.decode(N,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":if(!L)L=Z.PublicKey.decode(N,"der");switch(C=L.algorithm.algorithm.join("."),C){case"1.2.840.113549.1.1.1":return Z.RSAPublicKey.decode(L.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return L.subjectPrivateKey=L.subjectPublicKey,{type:"ec",data:L};case"1.2.840.10040.4.1":return L.algorithm.params.pub_key=Z.DSAparam.decode(L.subjectPublicKey.data,"der"),{type:"dsa",data:L.algorithm.params};default:throw Error("unknown key id "+C)}case"ENCRYPTED PRIVATE KEY":N=Z.EncryptedPrivateKey.decode(N,"der"),N=W(N,D);case"PRIVATE KEY":switch(L=Z.PrivateKey.decode(N,"der"),C=L.algorithm.algorithm.join("."),C){case"1.2.840.113549.1.1.1":return Z.RSAPrivateKey.decode(L.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:L.algorithm.curve,privateKey:Z.ECPrivateKey.decode(L.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return L.algorithm.params.priv_key=Z.DSAparam.decode(L.subjectPrivateKey,"der"),{type:"dsa",params:L.algorithm.params};default:throw Error("unknown key id "+C)}case"RSA PUBLIC KEY":return Z.RSAPublicKey.decode(N,"der");case"RSA PRIVATE KEY":return Z.RSAPrivateKey.decode(N,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:Z.DSAPrivateKey.decode(N,"der")};case"EC PRIVATE KEY":return N=Z.ECPrivateKey.decode(N,"der"),{curve:N.parameters.value,privateKey:N.privateKey};default:throw Error("unknown key type "+H)}}G.signature=Z.signature,Q.exports=G}),hd=A0(($,Q)=>{var Z=Sj(),X=L2().Buffer;Q.exports=function(z,J){var q=X.alloc(0),W=0,G;while(q.length<J)G=Y(W++),q=X.concat([q,Z("sha1").update(z).update(G).digest()]);return q.slice(0,J)};function Y(z){var J=X.allocUnsafe(4);return J.writeUInt32BE(z,0),J}}),md=A0(($,Q)=>{Q.exports=function(Z,X){var Y=Z.length,z=-1;while(++z<Y)Z[z]^=X[z];return Z}}),bB=A0(($,Q)=>{(function(Z,X){function Y(K,M){if(!K)throw Error(M||"Assertion failed")}function z(K,M){K.super_=M;var j=function(){};j.prototype=M.prototype,K.prototype=new j,K.prototype.constructor=K}function J(K,M,j){if(J.isBN(K))return K;if(this.negative=0,this.words=null,this.length=0,this.red=null,K!==null){if(M==="le"||M==="be")j=M,M=10;this._init(K||0,M||10,j||"be")}}if(typeof Z==="object")Z.exports=J;else X.BN=J;J.BN=J,J.wordSize=26;var q;try{if(typeof window<"u"&&typeof window.Buffer<"u")q=window.Buffer;else q=(s6(),Q5(T8)).Buffer}catch(K){}J.isBN=function(K){if(K instanceof J)return!0;return K!==null&&typeof K==="object"&&K.constructor.wordSize===J.wordSize&&Array.isArray(K.words)},J.max=function(K,M){if(K.cmp(M)>0)return K;return M},J.min=function(K,M){if(K.cmp(M)<0)return K;return M},J.prototype._init=function(K,M,j){if(typeof K==="number")return this._initNumber(K,M,j);if(typeof K==="object")return this._initArray(K,M,j);if(M==="hex")M=16;Y(M===(M|0)&&M>=2&&M<=36),K=K.toString().replace(/\s+/g,"");var O=0;if(K[0]==="-")O++,this.negative=1;if(O<K.length){if(M===16)this._parseHex(K,O,j);else if(this._parseBase(K,M,O),j==="le")this._initArray(this.toArray(),M,j)}},J.prototype._initNumber=function(K,M,j){if(K<0)this.negative=1,K=-K;if(K<67108864)this.words=[K&67108863],this.length=1;else if(K<4503599627370496)this.words=[K&67108863,K/67108864&67108863],this.length=2;else Y(K<9007199254740992),this.words=[K&67108863,K/67108864&67108863,1],this.length=3;if(j!=="le")return;this._initArray(this.toArray(),M,j)},J.prototype._initArray=function(K,M,j){if(Y(typeof K.length==="number"),K.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(K.length/3),this.words=Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var R,F,A=0;if(j==="be"){for(O=K.length-1,R=0;O>=0;O-=3)if(F=K[O]|K[O-1]<<8|K[O-2]<<16,this.words[R]|=F<<A&67108863,this.words[R+1]=F>>>26-A&67108863,A+=24,A>=26)A-=26,R++}else if(j==="le"){for(O=0,R=0;O<K.length;O+=3)if(F=K[O]|K[O+1]<<8|K[O+2]<<16,this.words[R]|=F<<A&67108863,this.words[R+1]=F>>>26-A&67108863,A+=24,A>=26)A-=26,R++}return this.strip()};function W(K,M){var j=K.charCodeAt(M);if(j>=65&&j<=70)return j-55;else if(j>=97&&j<=102)return j-87;else return j-48&15}function G(K,M,j){var O=W(K,j);if(j-1>=M)O|=W(K,j-1)<<4;return O}J.prototype._parseHex=function(K,M,j){this.length=Math.ceil((K.length-M)/6),this.words=Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var R=0,F=0,A;if(j==="be")for(O=K.length-1;O>=M;O-=2)if(A=G(K,M,O)<<R,this.words[F]|=A&67108863,R>=18)R-=18,F+=1,this.words[F]|=A>>>26;else R+=8;else{var T=K.length-M;for(O=T%2===0?M+1:M;O<K.length;O+=2)if(A=G(K,M,O)<<R,this.words[F]|=A&67108863,R>=18)R-=18,F+=1,this.words[F]|=A>>>26;else R+=8}this.strip()};function U(K,M,j,O){var R=0,F=Math.min(K.length,j);for(var A=M;A<F;A++){var T=K.charCodeAt(A)-48;if(R*=O,T>=49)R+=T-49+10;else if(T>=17)R+=T-17+10;else R+=T}return R}J.prototype._parseBase=function(K,M,j){this.words=[0],this.length=1;for(var O=0,R=1;R<=67108863;R*=M)O++;O--,R=R/M|0;var F=K.length-j,A=F%O,T=Math.min(F,F-A)+j,V=0;for(var w=j;w<T;w+=O)if(V=U(K,w,w+O,M),this.imuln(R),this.words[0]+V<67108864)this.words[0]+=V;else this._iaddn(V);if(A!==0){var k=1;V=U(K,w,K.length,M);for(w=0;w<A;w++)k*=M;if(this.imuln(k),this.words[0]+V<67108864)this.words[0]+=V;else this._iaddn(V)}this.strip()},J.prototype.copy=function(K){K.words=Array(this.length);for(var M=0;M<this.length;M++)K.words[M]=this.words[M];K.length=this.length,K.negative=this.negative,K.red=this.red},J.prototype.clone=function(){var K=new J(null);return this.copy(K),K},J.prototype._expand=function(K){while(this.length<K)this.words[this.length++]=0;return this},J.prototype.strip=function(){while(this.length>1&&this.words[this.length-1]===0)this.length--;return this._normSign()},J.prototype._normSign=function(){if(this.length===1&&this.words[0]===0)this.negative=0;return this},J.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var D=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],P=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],H=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];if(J.prototype.toString=function(K,M){K=K||10,M=M|0||1;var j;if(K===16||K==="hex"){j="";var O=0,R=0;for(var F=0;F<this.length;F++){var A=this.words[F],T=((A<<O|R)&16777215).toString(16);if(R=A>>>24-O&16777215,O+=2,O>=26)O-=26,F--;if(R!==0||F!==this.length-1)j=D[6-T.length]+T+j;else j=T+j}if(R!==0)j=R.toString(16)+j;while(j.length%M!==0)j="0"+j;if(this.negative!==0)j="-"+j;return j}if(K===(K|0)&&K>=2&&K<=36){var V=P[K],w=H[K];j="";var k=this.clone();k.negative=0;while(!k.isZero()){var S=k.modn(w).toString(K);if(k=k.idivn(w),!k.isZero())j=D[V-S.length]+S+j;else j=S+j}if(this.isZero())j="0"+j;while(j.length%M!==0)j="0"+j;if(this.negative!==0)j="-"+j;return j}Y(!1,"Base should be between 2 and 36")},J.prototype.toNumber=function(){var K=this.words[0];if(this.length===2)K+=this.words[1]*67108864;else if(this.length===3&&this.words[2]===1)K+=4503599627370496+this.words[1]*67108864;else if(this.length>2)Y(!1,"Number can only safely store up to 53 bits");return this.negative!==0?-K:K},J.prototype.toJSON=function(){return this.toString(16)},J.prototype.toBuffer=function(K,M){return Y(typeof q<"u"),this.toArrayLike(q,K,M)},J.prototype.toArray=function(K,M){return this.toArrayLike(Array,K,M)},J.prototype.toArrayLike=function(K,M,j){var O=this.byteLength(),R=j||Math.max(1,O);Y(O<=R,"byte array longer than desired length"),Y(R>0,"Requested array length <= 0"),this.strip();var F=M==="le",A=new K(R),T,V,w=this.clone();if(!F){for(V=0;V<R-O;V++)A[V]=0;for(V=0;!w.isZero();V++)T=w.andln(255),w.iushrn(8),A[R-V-1]=T}else{for(V=0;!w.isZero();V++)T=w.andln(255),w.iushrn(8),A[V]=T;for(;V<R;V++)A[V]=0}return A},Math.clz32)J.prototype._countBits=function(K){return 32-Math.clz32(K)};else J.prototype._countBits=function(K){var M=K,j=0;if(M>=4096)j+=13,M>>>=13;if(M>=64)j+=7,M>>>=7;if(M>=8)j+=4,M>>>=4;if(M>=2)j+=2,M>>>=2;return j+M};J.prototype._zeroBits=function(K){if(K===0)return 26;var M=K,j=0;if((M&8191)===0)j+=13,M>>>=13;if((M&127)===0)j+=7,M>>>=7;if((M&15)===0)j+=4,M>>>=4;if((M&3)===0)j+=2,M>>>=2;if((M&1)===0)j++;return j},J.prototype.bitLength=function(){var K=this.words[this.length-1],M=this._countBits(K);return(this.length-1)*26+M};function N(K){var M=Array(K.bitLength());for(var j=0;j<M.length;j++){var O=j/26|0,R=j%26;M[j]=(K.words[O]&1<<R)>>>R}return M}J.prototype.zeroBits=function(){if(this.isZero())return 0;var K=0;for(var M=0;M<this.length;M++){var j=this._zeroBits(this.words[M]);if(K+=j,j!==26)break}return K},J.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},J.prototype.toTwos=function(K){if(this.negative!==0)return this.abs().inotn(K).iaddn(1);return this.clone()},J.prototype.fromTwos=function(K){if(this.testn(K-1))return this.notn(K).iaddn(1).ineg();return this.clone()},J.prototype.isNeg=function(){return this.negative!==0},J.prototype.neg=function(){return this.clone().ineg()},J.prototype.ineg=function(){if(!this.isZero())this.negative^=1;return this},J.prototype.iuor=function(K){while(this.length<K.length)this.words[this.length++]=0;for(var M=0;M<K.length;M++)this.words[M]=this.words[M]|K.words[M];return this.strip()},J.prototype.ior=function(K){return Y((this.negative|K.negative)===0),this.iuor(K)},J.prototype.or=function(K){if(this.length>K.length)return this.clone().ior(K);return K.clone().ior(this)},J.prototype.uor=function(K){if(this.length>K.length)return this.clone().iuor(K);return K.clone().iuor(this)},J.prototype.iuand=function(K){var M;if(this.length>K.length)M=K;else M=this;for(var j=0;j<M.length;j++)this.words[j]=this.words[j]&K.words[j];return this.length=M.length,this.strip()},J.prototype.iand=function(K){return Y((this.negative|K.negative)===0),this.iuand(K)},J.prototype.and=function(K){if(this.length>K.length)return this.clone().iand(K);return K.clone().iand(this)},J.prototype.uand=function(K){if(this.length>K.length)return this.clone().iuand(K);return K.clone().iuand(this)},J.prototype.iuxor=function(K){var M,j;if(this.length>K.length)M=this,j=K;else M=K,j=this;for(var O=0;O<j.length;O++)this.words[O]=M.words[O]^j.words[O];if(this!==M)for(;O<M.length;O++)this.words[O]=M.words[O];return this.length=M.length,this.strip()},J.prototype.ixor=function(K){return Y((this.negative|K.negative)===0),this.iuxor(K)},J.prototype.xor=function(K){if(this.length>K.length)return this.clone().ixor(K);return K.clone().ixor(this)},J.prototype.uxor=function(K){if(this.length>K.length)return this.clone().iuxor(K);return K.clone().iuxor(this)},J.prototype.inotn=function(K){Y(typeof K==="number"&&K>=0);var M=Math.ceil(K/26)|0,j=K%26;if(this._expand(M),j>0)M--;for(var O=0;O<M;O++)this.words[O]=~this.words[O]&67108863;if(j>0)this.words[O]=~this.words[O]&67108863>>26-j;return this.strip()},J.prototype.notn=function(K){return this.clone().inotn(K)},J.prototype.setn=function(K,M){Y(typeof K==="number"&&K>=0);var j=K/26|0,O=K%26;if(this._expand(j+1),M)this.words[j]=this.words[j]|1<<O;else this.words[j]=this.words[j]&~(1<<O);return this.strip()},J.prototype.iadd=function(K){var M;if(this.negative!==0&&K.negative===0)return this.negative=0,M=this.isub(K),this.negative^=1,this._normSign();else if(this.negative===0&&K.negative!==0)return K.negative=0,M=this.isub(K),K.negative=1,M._normSign();var j,O;if(this.length>K.length)j=this,O=K;else j=K,O=this;var R=0;for(var F=0;F<O.length;F++)M=(j.words[F]|0)+(O.words[F]|0)+R,this.words[F]=M&67108863,R=M>>>26;for(;R!==0&&F<j.length;F++)M=(j.words[F]|0)+R,this.words[F]=M&67108863,R=M>>>26;if(this.length=j.length,R!==0)this.words[this.length]=R,this.length++;else if(j!==this)for(;F<j.length;F++)this.words[F]=j.words[F];return this},J.prototype.add=function(K){var M;if(K.negative!==0&&this.negative===0)return K.negative=0,M=this.sub(K),K.negative^=1,M;else if(K.negative===0&&this.negative!==0)return this.negative=0,M=K.sub(this),this.negative=1,M;if(this.length>K.length)return this.clone().iadd(K);return K.clone().iadd(this)},J.prototype.isub=function(K){if(K.negative!==0){K.negative=0;var M=this.iadd(K);return K.negative=1,M._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(K),this.negative=1,this._normSign();var j=this.cmp(K);if(j===0)return this.negative=0,this.length=1,this.words[0]=0,this;var O,R;if(j>0)O=this,R=K;else O=K,R=this;var F=0;for(var A=0;A<R.length;A++)M=(O.words[A]|0)-(R.words[A]|0)+F,F=M>>26,this.words[A]=M&67108863;for(;F!==0&&A<O.length;A++)M=(O.words[A]|0)+F,F=M>>26,this.words[A]=M&67108863;if(F===0&&A<O.length&&O!==this)for(;A<O.length;A++)this.words[A]=O.words[A];if(this.length=Math.max(this.length,A),O!==this)this.negative=1;return this.strip()},J.prototype.sub=function(K){return this.clone().isub(K)};function C(K,M,j){j.negative=M.negative^K.negative;var O=K.length+M.length|0;j.length=O,O=O-1|0;var R=K.words[0]|0,F=M.words[0]|0,A=R*F,T=A&67108863,V=A/67108864|0;j.words[0]=T;for(var w=1;w<O;w++){var k=V>>>26,S=V&67108863,y=Math.min(w,M.length-1);for(var u=Math.max(0,w-K.length+1);u<=y;u++){var c=w-u|0;R=K.words[c]|0,F=M.words[u]|0,A=R*F+S,k+=A/67108864|0,S=A&67108863}j.words[w]=S|0,V=k|0}if(V!==0)j.words[w]=V|0;else j.length--;return j.strip()}var L=function(K,M,j){var O=K.words,R=M.words,F=j.words,A=0,T,V,w,k=O[0]|0,S=k&8191,y=k>>>13,u=O[1]|0,c=u&8191,o=u>>>13,z0=O[2]|0,e=z0&8191,s=z0>>>13,J0=O[3]|0,t=J0&8191,Z0=J0>>>13,N0=O[4]|0,i=N0&8191,l=N0>>>13,q0=O[5]|0,Y0=q0&8191,K0=q0>>>13,k0=O[6]|0,a=k0&8191,X0=k0>>>13,n0=O[7]|0,W0=n0&8191,V0=n0>>>13,H1=O[8]|0,D0=H1&8191,j0=H1>>>13,g1=O[9]|0,T0=g1&8191,R0=g1>>>13,s1=R[0]|0,B0=s1&8191,C0=s1>>>13,g6=R[1]|0,m0=g6&8191,l0=g6>>>13,C6=R[2]|0,y0=C6&8191,u0=C6>>>13,W8=R[3]|0,d0=W8&8191,v0=W8>>>13,o6=R[4]|0,i0=o6&8191,c0=o6>>>13,M5=R[5]|0,_0=M5&8191,d=M5>>>13,$0=R[6]|0,G0=$0&8191,O0=$0>>>13,s0=R[7]|0,E0=s0&8191,S0=s0>>>13,T5=R[8]|0,g0=T5&8191,p0=T5>>>13,_6=R[9]|0,h0=_6&8191,o0=_6>>>13;j.negative=K.negative^M.negative,j.length=19,T=Math.imul(S,B0),V=Math.imul(S,C0),V=V+Math.imul(y,B0)|0,w=Math.imul(y,C0);var S6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(S6>>>26)|0,S6&=67108863,T=Math.imul(c,B0),V=Math.imul(c,C0),V=V+Math.imul(o,B0)|0,w=Math.imul(o,C0),T=T+Math.imul(S,m0)|0,V=V+Math.imul(S,l0)|0,V=V+Math.imul(y,m0)|0,w=w+Math.imul(y,l0)|0;var m1=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(m1>>>26)|0,m1&=67108863,T=Math.imul(e,B0),V=Math.imul(e,C0),V=V+Math.imul(s,B0)|0,w=Math.imul(s,C0),T=T+Math.imul(c,m0)|0,V=V+Math.imul(c,l0)|0,V=V+Math.imul(o,m0)|0,w=w+Math.imul(o,l0)|0,T=T+Math.imul(S,y0)|0,V=V+Math.imul(S,u0)|0,V=V+Math.imul(y,y0)|0,w=w+Math.imul(y,u0)|0;var k1=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(k1>>>26)|0,k1&=67108863,T=Math.imul(t,B0),V=Math.imul(t,C0),V=V+Math.imul(Z0,B0)|0,w=Math.imul(Z0,C0),T=T+Math.imul(e,m0)|0,V=V+Math.imul(e,l0)|0,V=V+Math.imul(s,m0)|0,w=w+Math.imul(s,l0)|0,T=T+Math.imul(c,y0)|0,V=V+Math.imul(c,u0)|0,V=V+Math.imul(o,y0)|0,w=w+Math.imul(o,u0)|0,T=T+Math.imul(S,d0)|0,V=V+Math.imul(S,v0)|0,V=V+Math.imul(y,d0)|0,w=w+Math.imul(y,v0)|0;var g5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(g5>>>26)|0,g5&=67108863,T=Math.imul(i,B0),V=Math.imul(i,C0),V=V+Math.imul(l,B0)|0,w=Math.imul(l,C0),T=T+Math.imul(t,m0)|0,V=V+Math.imul(t,l0)|0,V=V+Math.imul(Z0,m0)|0,w=w+Math.imul(Z0,l0)|0,T=T+Math.imul(e,y0)|0,V=V+Math.imul(e,u0)|0,V=V+Math.imul(s,y0)|0,w=w+Math.imul(s,u0)|0,T=T+Math.imul(c,d0)|0,V=V+Math.imul(c,v0)|0,V=V+Math.imul(o,d0)|0,w=w+Math.imul(o,v0)|0,T=T+Math.imul(S,i0)|0,V=V+Math.imul(S,c0)|0,V=V+Math.imul(y,i0)|0,w=w+Math.imul(y,c0)|0;var P5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(P5>>>26)|0,P5&=67108863,T=Math.imul(Y0,B0),V=Math.imul(Y0,C0),V=V+Math.imul(K0,B0)|0,w=Math.imul(K0,C0),T=T+Math.imul(i,m0)|0,V=V+Math.imul(i,l0)|0,V=V+Math.imul(l,m0)|0,w=w+Math.imul(l,l0)|0,T=T+Math.imul(t,y0)|0,V=V+Math.imul(t,u0)|0,V=V+Math.imul(Z0,y0)|0,w=w+Math.imul(Z0,u0)|0,T=T+Math.imul(e,d0)|0,V=V+Math.imul(e,v0)|0,V=V+Math.imul(s,d0)|0,w=w+Math.imul(s,v0)|0,T=T+Math.imul(c,i0)|0,V=V+Math.imul(c,c0)|0,V=V+Math.imul(o,i0)|0,w=w+Math.imul(o,c0)|0,T=T+Math.imul(S,_0)|0,V=V+Math.imul(S,d)|0,V=V+Math.imul(y,_0)|0,w=w+Math.imul(y,d)|0;var v1=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(v1>>>26)|0,v1&=67108863,T=Math.imul(a,B0),V=Math.imul(a,C0),V=V+Math.imul(X0,B0)|0,w=Math.imul(X0,C0),T=T+Math.imul(Y0,m0)|0,V=V+Math.imul(Y0,l0)|0,V=V+Math.imul(K0,m0)|0,w=w+Math.imul(K0,l0)|0,T=T+Math.imul(i,y0)|0,V=V+Math.imul(i,u0)|0,V=V+Math.imul(l,y0)|0,w=w+Math.imul(l,u0)|0,T=T+Math.imul(t,d0)|0,V=V+Math.imul(t,v0)|0,V=V+Math.imul(Z0,d0)|0,w=w+Math.imul(Z0,v0)|0,T=T+Math.imul(e,i0)|0,V=V+Math.imul(e,c0)|0,V=V+Math.imul(s,i0)|0,w=w+Math.imul(s,c0)|0,T=T+Math.imul(c,_0)|0,V=V+Math.imul(c,d)|0,V=V+Math.imul(o,_0)|0,w=w+Math.imul(o,d)|0,T=T+Math.imul(S,G0)|0,V=V+Math.imul(S,O0)|0,V=V+Math.imul(y,G0)|0,w=w+Math.imul(y,O0)|0;var o1=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(o1>>>26)|0,o1&=67108863,T=Math.imul(W0,B0),V=Math.imul(W0,C0),V=V+Math.imul(V0,B0)|0,w=Math.imul(V0,C0),T=T+Math.imul(a,m0)|0,V=V+Math.imul(a,l0)|0,V=V+Math.imul(X0,m0)|0,w=w+Math.imul(X0,l0)|0,T=T+Math.imul(Y0,y0)|0,V=V+Math.imul(Y0,u0)|0,V=V+Math.imul(K0,y0)|0,w=w+Math.imul(K0,u0)|0,T=T+Math.imul(i,d0)|0,V=V+Math.imul(i,v0)|0,V=V+Math.imul(l,d0)|0,w=w+Math.imul(l,v0)|0,T=T+Math.imul(t,i0)|0,V=V+Math.imul(t,c0)|0,V=V+Math.imul(Z0,i0)|0,w=w+Math.imul(Z0,c0)|0,T=T+Math.imul(e,_0)|0,V=V+Math.imul(e,d)|0,V=V+Math.imul(s,_0)|0,w=w+Math.imul(s,d)|0,T=T+Math.imul(c,G0)|0,V=V+Math.imul(c,O0)|0,V=V+Math.imul(o,G0)|0,w=w+Math.imul(o,O0)|0,T=T+Math.imul(S,E0)|0,V=V+Math.imul(S,S0)|0,V=V+Math.imul(y,E0)|0,w=w+Math.imul(y,S0)|0;var Y6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(Y6>>>26)|0,Y6&=67108863,T=Math.imul(D0,B0),V=Math.imul(D0,C0),V=V+Math.imul(j0,B0)|0,w=Math.imul(j0,C0),T=T+Math.imul(W0,m0)|0,V=V+Math.imul(W0,l0)|0,V=V+Math.imul(V0,m0)|0,w=w+Math.imul(V0,l0)|0,T=T+Math.imul(a,y0)|0,V=V+Math.imul(a,u0)|0,V=V+Math.imul(X0,y0)|0,w=w+Math.imul(X0,u0)|0,T=T+Math.imul(Y0,d0)|0,V=V+Math.imul(Y0,v0)|0,V=V+Math.imul(K0,d0)|0,w=w+Math.imul(K0,v0)|0,T=T+Math.imul(i,i0)|0,V=V+Math.imul(i,c0)|0,V=V+Math.imul(l,i0)|0,w=w+Math.imul(l,c0)|0,T=T+Math.imul(t,_0)|0,V=V+Math.imul(t,d)|0,V=V+Math.imul(Z0,_0)|0,w=w+Math.imul(Z0,d)|0,T=T+Math.imul(e,G0)|0,V=V+Math.imul(e,O0)|0,V=V+Math.imul(s,G0)|0,w=w+Math.imul(s,O0)|0,T=T+Math.imul(c,E0)|0,V=V+Math.imul(c,S0)|0,V=V+Math.imul(o,E0)|0,w=w+Math.imul(o,S0)|0,T=T+Math.imul(S,g0)|0,V=V+Math.imul(S,p0)|0,V=V+Math.imul(y,g0)|0,w=w+Math.imul(y,p0)|0;var J6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(J6>>>26)|0,J6&=67108863,T=Math.imul(T0,B0),V=Math.imul(T0,C0),V=V+Math.imul(R0,B0)|0,w=Math.imul(R0,C0),T=T+Math.imul(D0,m0)|0,V=V+Math.imul(D0,l0)|0,V=V+Math.imul(j0,m0)|0,w=w+Math.imul(j0,l0)|0,T=T+Math.imul(W0,y0)|0,V=V+Math.imul(W0,u0)|0,V=V+Math.imul(V0,y0)|0,w=w+Math.imul(V0,u0)|0,T=T+Math.imul(a,d0)|0,V=V+Math.imul(a,v0)|0,V=V+Math.imul(X0,d0)|0,w=w+Math.imul(X0,v0)|0,T=T+Math.imul(Y0,i0)|0,V=V+Math.imul(Y0,c0)|0,V=V+Math.imul(K0,i0)|0,w=w+Math.imul(K0,c0)|0,T=T+Math.imul(i,_0)|0,V=V+Math.imul(i,d)|0,V=V+Math.imul(l,_0)|0,w=w+Math.imul(l,d)|0,T=T+Math.imul(t,G0)|0,V=V+Math.imul(t,O0)|0,V=V+Math.imul(Z0,G0)|0,w=w+Math.imul(Z0,O0)|0,T=T+Math.imul(e,E0)|0,V=V+Math.imul(e,S0)|0,V=V+Math.imul(s,E0)|0,w=w+Math.imul(s,S0)|0,T=T+Math.imul(c,g0)|0,V=V+Math.imul(c,p0)|0,V=V+Math.imul(o,g0)|0,w=w+Math.imul(o,p0)|0,T=T+Math.imul(S,h0)|0,V=V+Math.imul(S,o0)|0,V=V+Math.imul(y,h0)|0,w=w+Math.imul(y,o0)|0;var _5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(_5>>>26)|0,_5&=67108863,T=Math.imul(T0,m0),V=Math.imul(T0,l0),V=V+Math.imul(R0,m0)|0,w=Math.imul(R0,l0),T=T+Math.imul(D0,y0)|0,V=V+Math.imul(D0,u0)|0,V=V+Math.imul(j0,y0)|0,w=w+Math.imul(j0,u0)|0,T=T+Math.imul(W0,d0)|0,V=V+Math.imul(W0,v0)|0,V=V+Math.imul(V0,d0)|0,w=w+Math.imul(V0,v0)|0,T=T+Math.imul(a,i0)|0,V=V+Math.imul(a,c0)|0,V=V+Math.imul(X0,i0)|0,w=w+Math.imul(X0,c0)|0,T=T+Math.imul(Y0,_0)|0,V=V+Math.imul(Y0,d)|0,V=V+Math.imul(K0,_0)|0,w=w+Math.imul(K0,d)|0,T=T+Math.imul(i,G0)|0,V=V+Math.imul(i,O0)|0,V=V+Math.imul(l,G0)|0,w=w+Math.imul(l,O0)|0,T=T+Math.imul(t,E0)|0,V=V+Math.imul(t,S0)|0,V=V+Math.imul(Z0,E0)|0,w=w+Math.imul(Z0,S0)|0,T=T+Math.imul(e,g0)|0,V=V+Math.imul(e,p0)|0,V=V+Math.imul(s,g0)|0,w=w+Math.imul(s,p0)|0,T=T+Math.imul(c,h0)|0,V=V+Math.imul(c,o0)|0,V=V+Math.imul(o,h0)|0,w=w+Math.imul(o,o0)|0;var S5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(S5>>>26)|0,S5&=67108863,T=Math.imul(T0,y0),V=Math.imul(T0,u0),V=V+Math.imul(R0,y0)|0,w=Math.imul(R0,u0),T=T+Math.imul(D0,d0)|0,V=V+Math.imul(D0,v0)|0,V=V+Math.imul(j0,d0)|0,w=w+Math.imul(j0,v0)|0,T=T+Math.imul(W0,i0)|0,V=V+Math.imul(W0,c0)|0,V=V+Math.imul(V0,i0)|0,w=w+Math.imul(V0,c0)|0,T=T+Math.imul(a,_0)|0,V=V+Math.imul(a,d)|0,V=V+Math.imul(X0,_0)|0,w=w+Math.imul(X0,d)|0,T=T+Math.imul(Y0,G0)|0,V=V+Math.imul(Y0,O0)|0,V=V+Math.imul(K0,G0)|0,w=w+Math.imul(K0,O0)|0,T=T+Math.imul(i,E0)|0,V=V+Math.imul(i,S0)|0,V=V+Math.imul(l,E0)|0,w=w+Math.imul(l,S0)|0,T=T+Math.imul(t,g0)|0,V=V+Math.imul(t,p0)|0,V=V+Math.imul(Z0,g0)|0,w=w+Math.imul(Z0,p0)|0,T=T+Math.imul(e,h0)|0,V=V+Math.imul(e,o0)|0,V=V+Math.imul(s,h0)|0,w=w+Math.imul(s,o0)|0;var F5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(F5>>>26)|0,F5&=67108863,T=Math.imul(T0,d0),V=Math.imul(T0,v0),V=V+Math.imul(R0,d0)|0,w=Math.imul(R0,v0),T=T+Math.imul(D0,i0)|0,V=V+Math.imul(D0,c0)|0,V=V+Math.imul(j0,i0)|0,w=w+Math.imul(j0,c0)|0,T=T+Math.imul(W0,_0)|0,V=V+Math.imul(W0,d)|0,V=V+Math.imul(V0,_0)|0,w=w+Math.imul(V0,d)|0,T=T+Math.imul(a,G0)|0,V=V+Math.imul(a,O0)|0,V=V+Math.imul(X0,G0)|0,w=w+Math.imul(X0,O0)|0,T=T+Math.imul(Y0,E0)|0,V=V+Math.imul(Y0,S0)|0,V=V+Math.imul(K0,E0)|0,w=w+Math.imul(K0,S0)|0,T=T+Math.imul(i,g0)|0,V=V+Math.imul(i,p0)|0,V=V+Math.imul(l,g0)|0,w=w+Math.imul(l,p0)|0,T=T+Math.imul(t,h0)|0,V=V+Math.imul(t,o0)|0,V=V+Math.imul(Z0,h0)|0,w=w+Math.imul(Z0,o0)|0;var h5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(h5>>>26)|0,h5&=67108863,T=Math.imul(T0,i0),V=Math.imul(T0,c0),V=V+Math.imul(R0,i0)|0,w=Math.imul(R0,c0),T=T+Math.imul(D0,_0)|0,V=V+Math.imul(D0,d)|0,V=V+Math.imul(j0,_0)|0,w=w+Math.imul(j0,d)|0,T=T+Math.imul(W0,G0)|0,V=V+Math.imul(W0,O0)|0,V=V+Math.imul(V0,G0)|0,w=w+Math.imul(V0,O0)|0,T=T+Math.imul(a,E0)|0,V=V+Math.imul(a,S0)|0,V=V+Math.imul(X0,E0)|0,w=w+Math.imul(X0,S0)|0,T=T+Math.imul(Y0,g0)|0,V=V+Math.imul(Y0,p0)|0,V=V+Math.imul(K0,g0)|0,w=w+Math.imul(K0,p0)|0,T=T+Math.imul(i,h0)|0,V=V+Math.imul(i,o0)|0,V=V+Math.imul(l,h0)|0,w=w+Math.imul(l,o0)|0;var A5=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(A5>>>26)|0,A5&=67108863,T=Math.imul(T0,_0),V=Math.imul(T0,d),V=V+Math.imul(R0,_0)|0,w=Math.imul(R0,d),T=T+Math.imul(D0,G0)|0,V=V+Math.imul(D0,O0)|0,V=V+Math.imul(j0,G0)|0,w=w+Math.imul(j0,O0)|0,T=T+Math.imul(W0,E0)|0,V=V+Math.imul(W0,S0)|0,V=V+Math.imul(V0,E0)|0,w=w+Math.imul(V0,S0)|0,T=T+Math.imul(a,g0)|0,V=V+Math.imul(a,p0)|0,V=V+Math.imul(X0,g0)|0,w=w+Math.imul(X0,p0)|0,T=T+Math.imul(Y0,h0)|0,V=V+Math.imul(Y0,o0)|0,V=V+Math.imul(K0,h0)|0,w=w+Math.imul(K0,o0)|0;var z6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(z6>>>26)|0,z6&=67108863,T=Math.imul(T0,G0),V=Math.imul(T0,O0),V=V+Math.imul(R0,G0)|0,w=Math.imul(R0,O0),T=T+Math.imul(D0,E0)|0,V=V+Math.imul(D0,S0)|0,V=V+Math.imul(j0,E0)|0,w=w+Math.imul(j0,S0)|0,T=T+Math.imul(W0,g0)|0,V=V+Math.imul(W0,p0)|0,V=V+Math.imul(V0,g0)|0,w=w+Math.imul(V0,p0)|0,T=T+Math.imul(a,h0)|0,V=V+Math.imul(a,o0)|0,V=V+Math.imul(X0,h0)|0,w=w+Math.imul(X0,o0)|0;var n6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(n6>>>26)|0,n6&=67108863,T=Math.imul(T0,E0),V=Math.imul(T0,S0),V=V+Math.imul(R0,E0)|0,w=Math.imul(R0,S0),T=T+Math.imul(D0,g0)|0,V=V+Math.imul(D0,p0)|0,V=V+Math.imul(j0,g0)|0,w=w+Math.imul(j0,p0)|0,T=T+Math.imul(W0,h0)|0,V=V+Math.imul(W0,o0)|0,V=V+Math.imul(V0,h0)|0,w=w+Math.imul(V0,o0)|0;var K8=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(K8>>>26)|0,K8&=67108863,T=Math.imul(T0,g0),V=Math.imul(T0,p0),V=V+Math.imul(R0,g0)|0,w=Math.imul(R0,p0),T=T+Math.imul(D0,h0)|0,V=V+Math.imul(D0,o0)|0,V=V+Math.imul(j0,h0)|0,w=w+Math.imul(j0,o0)|0;var b6=(A+T|0)+((V&8191)<<13)|0;A=(w+(V>>>13)|0)+(b6>>>26)|0,b6&=67108863,T=Math.imul(T0,h0),V=Math.imul(T0,o0),V=V+Math.imul(R0,h0)|0,w=Math.imul(R0,o0);var r6=(A+T|0)+((V&8191)<<13)|0;if(A=(w+(V>>>13)|0)+(r6>>>26)|0,r6&=67108863,F[0]=S6,F[1]=m1,F[2]=k1,F[3]=g5,F[4]=P5,F[5]=v1,F[6]=o1,F[7]=Y6,F[8]=J6,F[9]=_5,F[10]=S5,F[11]=F5,F[12]=h5,F[13]=A5,F[14]=z6,F[15]=n6,F[16]=K8,F[17]=b6,F[18]=r6,A!==0)F[19]=A,j.length++;return j};if(!Math.imul)L=C;function B(K,M,j){j.negative=M.negative^K.negative,j.length=K.length+M.length;var O=0,R=0;for(var F=0;F<j.length-1;F++){var A=R;R=0;var T=O&67108863,V=Math.min(F,M.length-1);for(var w=Math.max(0,F-K.length+1);w<=V;w++){var k=F-w,S=K.words[k]|0,y=M.words[w]|0,u=S*y,c=u&67108863;A=A+(u/67108864|0)|0,c=c+T|0,T=c&67108863,A=A+(c>>>26)|0,R+=A>>>26,A&=67108863}j.words[F]=T,O=A,A=R}if(O!==0)j.words[F]=O;else j.length--;return j.strip()}function E(K,M,j){var O=new I;return O.mulp(K,M,j)}J.prototype.mulTo=function(K,M){var j,O=this.length+K.length;if(this.length===10&&K.length===10)j=L(this,K,M);else if(O<63)j=C(this,K,M);else if(O<1024)j=B(this,K,M);else j=E(this,K,M);return j};function I(K,M){this.x=K,this.y=M}I.prototype.makeRBT=function(K){var M=Array(K),j=J.prototype._countBits(K)-1;for(var O=0;O<K;O++)M[O]=this.revBin(O,j,K);return M},I.prototype.revBin=function(K,M,j){if(K===0||K===j-1)return K;var O=0;for(var R=0;R<M;R++)O|=(K&1)<<M-R-1,K>>=1;return O},I.prototype.permute=function(K,M,j,O,R,F){for(var A=0;A<F;A++)O[A]=M[K[A]],R[A]=j[K[A]]},I.prototype.transform=function(K,M,j,O,R,F){this.permute(F,K,M,j,O,R);for(var A=1;A<R;A<<=1){var T=A<<1,V=Math.cos(2*Math.PI/T),w=Math.sin(2*Math.PI/T);for(var k=0;k<R;k+=T){var S=V,y=w;for(var u=0;u<A;u++){var c=j[k+u],o=O[k+u],z0=j[k+u+A],e=O[k+u+A],s=S*z0-y*e;if(e=S*e+y*z0,z0=s,j[k+u]=c+z0,O[k+u]=o+e,j[k+u+A]=c-z0,O[k+u+A]=o-e,u!==T)s=V*S-w*y,y=V*y+w*S,S=s}}}},I.prototype.guessLen13b=function(K,M){var j=Math.max(M,K)|1,O=j&1,R=0;for(j=j/2|0;j;j=j>>>1)R++;return 1<<R+1+O},I.prototype.conjugate=function(K,M,j){if(j<=1)return;for(var O=0;O<j/2;O++){var R=K[O];K[O]=K[j-O-1],K[j-O-1]=R,R=M[O],M[O]=-M[j-O-1],M[j-O-1]=-R}},I.prototype.normalize13b=function(K,M){var j=0;for(var O=0;O<M/2;O++){var R=Math.round(K[2*O+1]/M)*8192+Math.round(K[2*O]/M)+j;if(K[O]=R&67108863,R<67108864)j=0;else j=R/67108864|0}return K},I.prototype.convert13b=function(K,M,j,O){var R=0;for(var F=0;F<M;F++)R=R+(K[F]|0),j[2*F]=R&8191,R=R>>>13,j[2*F+1]=R&8191,R=R>>>13;for(F=2*M;F<O;++F)j[F]=0;Y(R===0),Y((R&-8192)===0)},I.prototype.stub=function(K){var M=Array(K);for(var j=0;j<K;j++)M[j]=0;return M},I.prototype.mulp=function(K,M,j){var O=2*this.guessLen13b(K.length,M.length),R=this.makeRBT(O),F=this.stub(O),A=Array(O),T=Array(O),V=Array(O),w=Array(O),k=Array(O),S=Array(O),y=j.words;y.length=O,this.convert13b(K.words,K.length,A,O),this.convert13b(M.words,M.length,w,O),this.transform(A,F,T,V,O,R),this.transform(w,F,k,S,O,R);for(var u=0;u<O;u++){var c=T[u]*k[u]-V[u]*S[u];V[u]=T[u]*S[u]+V[u]*k[u],T[u]=c}return this.conjugate(T,V,O),this.transform(T,V,y,F,O,R),this.conjugate(y,F,O),this.normalize13b(y,O),j.negative=K.negative^M.negative,j.length=K.length+M.length,j.strip()},J.prototype.mul=function(K){var M=new J(null);return M.words=Array(this.length+K.length),this.mulTo(K,M)},J.prototype.mulf=function(K){var M=new J(null);return M.words=Array(this.length+K.length),E(this,K,M)},J.prototype.imul=function(K){return this.clone().mulTo(K,this)},J.prototype.imuln=function(K){Y(typeof K==="number"),Y(K<67108864);var M=0;for(var j=0;j<this.length;j++){var O=(this.words[j]|0)*K,R=(O&67108863)+(M&67108863);M>>=26,M+=O/67108864|0,M+=R>>>26,this.words[j]=R&67108863}if(M!==0)this.words[j]=M,this.length++;return this.length=K===0?1:this.length,this},J.prototype.muln=function(K){return this.clone().imuln(K)},J.prototype.sqr=function(){return this.mul(this)},J.prototype.isqr=function(){return this.imul(this.clone())},J.prototype.pow=function(K){var M=N(K);if(M.length===0)return new J(1);var j=this;for(var O=0;O<M.length;O++,j=j.sqr())if(M[O]!==0)break;if(++O<M.length)for(var R=j.sqr();O<M.length;O++,R=R.sqr()){if(M[O]===0)continue;j=j.mul(R)}return j},J.prototype.iushln=function(K){Y(typeof K==="number"&&K>=0);var M=K%26,j=(K-M)/26,O=67108863>>>26-M<<26-M,R;if(M!==0){var F=0;for(R=0;R<this.length;R++){var A=this.words[R]&O,T=(this.words[R]|0)-A<<M;this.words[R]=T|F,F=A>>>26-M}if(F)this.words[R]=F,this.length++}if(j!==0){for(R=this.length-1;R>=0;R--)this.words[R+j]=this.words[R];for(R=0;R<j;R++)this.words[R]=0;this.length+=j}return this.strip()},J.prototype.ishln=function(K){return Y(this.negative===0),this.iushln(K)},J.prototype.iushrn=function(K,M,j){Y(typeof K==="number"&&K>=0);var O;if(M)O=(M-M%26)/26;else O=0;var R=K%26,F=Math.min((K-R)/26,this.length),A=67108863^67108863>>>R<<R,T=j;if(O-=F,O=Math.max(0,O),T){for(var V=0;V<F;V++)T.words[V]=this.words[V];T.length=F}if(F===0);else if(this.length>F){this.length-=F;for(V=0;V<this.length;V++)this.words[V]=this.words[V+F]}else this.words[0]=0,this.length=1;var w=0;for(V=this.length-1;V>=0&&(w!==0||V>=O);V--){var k=this.words[V]|0;this.words[V]=w<<26-R|k>>>R,w=k&A}if(T&&w!==0)T.words[T.length++]=w;if(this.length===0)this.words[0]=0,this.length=1;return this.strip()},J.prototype.ishrn=function(K,M,j){return Y(this.negative===0),this.iushrn(K,M,j)},J.prototype.shln=function(K){return this.clone().ishln(K)},J.prototype.ushln=function(K){return this.clone().iushln(K)},J.prototype.shrn=function(K){return this.clone().ishrn(K)},J.prototype.ushrn=function(K){return this.clone().iushrn(K)},J.prototype.testn=function(K){Y(typeof K==="number"&&K>=0);var M=K%26,j=(K-M)/26,O=1<<M;if(this.length<=j)return!1;var R=this.words[j];return!!(R&O)},J.prototype.imaskn=function(K){Y(typeof K==="number"&&K>=0);var M=K%26,j=(K-M)/26;if(Y(this.negative===0,"imaskn works only with positive numbers"),this.length<=j)return this;if(M!==0)j++;if(this.length=Math.min(j,this.length),M!==0){var O=67108863^67108863>>>M<<M;this.words[this.length-1]&=O}return this.strip()},J.prototype.maskn=function(K){return this.clone().imaskn(K)},J.prototype.iaddn=function(K){if(Y(typeof K==="number"),Y(K<67108864),K<0)return this.isubn(-K);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<K)return this.words[0]=K-(this.words[0]|0),this.negative=0,this;return this.negative=0,this.isubn(K),this.negative=1,this}return this._iaddn(K)},J.prototype._iaddn=function(K){this.words[0]+=K;for(var M=0;M<this.length&&this.words[M]>=67108864;M++)if(this.words[M]-=67108864,M===this.length-1)this.words[M+1]=1;else this.words[M+1]++;return this.length=Math.max(this.length,M+1),this},J.prototype.isubn=function(K){if(Y(typeof K==="number"),Y(K<67108864),K<0)return this.iaddn(-K);if(this.negative!==0)return this.negative=0,this.iaddn(K),this.negative=1,this;if(this.words[0]-=K,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var M=0;M<this.length&&this.words[M]<0;M++)this.words[M]+=67108864,this.words[M+1]-=1;return this.strip()},J.prototype.addn=function(K){return this.clone().iaddn(K)},J.prototype.subn=function(K){return this.clone().isubn(K)},J.prototype.iabs=function(){return this.negative=0,this},J.prototype.abs=function(){return this.clone().iabs()},J.prototype._ishlnsubmul=function(K,M,j){var O=K.length+j,R;this._expand(O);var F,A=0;for(R=0;R<K.length;R++){F=(this.words[R+j]|0)+A;var T=(K.words[R]|0)*M;F-=T&67108863,A=(F>>26)-(T/67108864|0),this.words[R+j]=F&67108863}for(;R<this.length-j;R++)F=(this.words[R+j]|0)+A,A=F>>26,this.words[R+j]=F&67108863;if(A===0)return this.strip();Y(A===-1),A=0;for(R=0;R<this.length;R++)F=-(this.words[R]|0)+A,A=F>>26,this.words[R]=F&67108863;return this.negative=1,this.strip()},J.prototype._wordDiv=function(K,M){var j=this.length-K.length,O=this.clone(),R=K,F=R.words[R.length-1]|0,A=this._countBits(F);if(j=26-A,j!==0)R=R.ushln(j),O.iushln(j),F=R.words[R.length-1]|0;var T=O.length-R.length,V;if(M!=="mod"){V=new J(null),V.length=T+1,V.words=Array(V.length);for(var w=0;w<V.length;w++)V.words[w]=0}var k=O.clone()._ishlnsubmul(R,1,T);if(k.negative===0){if(O=k,V)V.words[T]=1}for(var S=T-1;S>=0;S--){var y=(O.words[R.length+S]|0)*67108864+(O.words[R.length+S-1]|0);y=Math.min(y/F|0,67108863),O._ishlnsubmul(R,y,S);while(O.negative!==0)if(y--,O.negative=0,O._ishlnsubmul(R,1,S),!O.isZero())O.negative^=1;if(V)V.words[S]=y}if(V)V.strip();if(O.strip(),M!=="div"&&j!==0)O.iushrn(j);return{div:V||null,mod:O}},J.prototype.divmod=function(K,M,j){if(Y(!K.isZero()),this.isZero())return{div:new J(0),mod:new J(0)};var O,R,F;if(this.negative!==0&&K.negative===0){if(F=this.neg().divmod(K,M),M!=="mod")O=F.div.neg();if(M!=="div"){if(R=F.mod.neg(),j&&R.negative!==0)R.iadd(K)}return{div:O,mod:R}}if(this.negative===0&&K.negative!==0){if(F=this.divmod(K.neg(),M),M!=="mod")O=F.div.neg();return{div:O,mod:F.mod}}if((this.negative&K.negative)!==0){if(F=this.neg().divmod(K.neg(),M),M!=="div"){if(R=F.mod.neg(),j&&R.negative!==0)R.isub(K)}return{div:F.div,mod:R}}if(K.length>this.length||this.cmp(K)<0)return{div:new J(0),mod:this};if(K.length===1){if(M==="div")return{div:this.divn(K.words[0]),mod:null};if(M==="mod")return{div:null,mod:new J(this.modn(K.words[0]))};return{div:this.divn(K.words[0]),mod:new J(this.modn(K.words[0]))}}return this._wordDiv(K,M)},J.prototype.div=function(K){return this.divmod(K,"div",!1).div},J.prototype.mod=function(K){return this.divmod(K,"mod",!1).mod},J.prototype.umod=function(K){return this.divmod(K,"mod",!0).mod},J.prototype.divRound=function(K){var M=this.divmod(K);if(M.mod.isZero())return M.div;var j=M.div.negative!==0?M.mod.isub(K):M.mod,O=K.ushrn(1),R=K.andln(1),F=j.cmp(O);if(F<0||R===1&&F===0)return M.div;return M.div.negative!==0?M.div.isubn(1):M.div.iaddn(1)},J.prototype.modn=function(K){Y(K<=67108863);var M=67108864%K,j=0;for(var O=this.length-1;O>=0;O--)j=(M*j+(this.words[O]|0))%K;return j},J.prototype.idivn=function(K){Y(K<=67108863);var M=0;for(var j=this.length-1;j>=0;j--){var O=(this.words[j]|0)+M*67108864;this.words[j]=O/K|0,M=O%K}return this.strip()},J.prototype.divn=function(K){return this.clone().idivn(K)},J.prototype.egcd=function(K){Y(K.negative===0),Y(!K.isZero());var M=this,j=K.clone();if(M.negative!==0)M=M.umod(K);else M=M.clone();var O=new J(1),R=new J(0),F=new J(0),A=new J(1),T=0;while(M.isEven()&&j.isEven())M.iushrn(1),j.iushrn(1),++T;var V=j.clone(),w=M.clone();while(!M.isZero()){for(var k=0,S=1;(M.words[0]&S)===0&&k<26;++k,S<<=1);if(k>0){M.iushrn(k);while(k-- >0){if(O.isOdd()||R.isOdd())O.iadd(V),R.isub(w);O.iushrn(1),R.iushrn(1)}}for(var y=0,u=1;(j.words[0]&u)===0&&y<26;++y,u<<=1);if(y>0){j.iushrn(y);while(y-- >0){if(F.isOdd()||A.isOdd())F.iadd(V),A.isub(w);F.iushrn(1),A.iushrn(1)}}if(M.cmp(j)>=0)M.isub(j),O.isub(F),R.isub(A);else j.isub(M),F.isub(O),A.isub(R)}return{a:F,b:A,gcd:j.iushln(T)}},J.prototype._invmp=function(K){Y(K.negative===0),Y(!K.isZero());var M=this,j=K.clone();if(M.negative!==0)M=M.umod(K);else M=M.clone();var O=new J(1),R=new J(0),F=j.clone();while(M.cmpn(1)>0&&j.cmpn(1)>0){for(var A=0,T=1;(M.words[0]&T)===0&&A<26;++A,T<<=1);if(A>0){M.iushrn(A);while(A-- >0){if(O.isOdd())O.iadd(F);O.iushrn(1)}}for(var V=0,w=1;(j.words[0]&w)===0&&V<26;++V,w<<=1);if(V>0){j.iushrn(V);while(V-- >0){if(R.isOdd())R.iadd(F);R.iushrn(1)}}if(M.cmp(j)>=0)M.isub(j),O.isub(R);else j.isub(M),R.isub(O)}var k;if(M.cmpn(1)===0)k=O;else k=R;if(k.cmpn(0)<0)k.iadd(K);return k},J.prototype.gcd=function(K){if(this.isZero())return K.abs();if(K.isZero())return this.abs();var M=this.clone(),j=K.clone();M.negative=0,j.negative=0;for(var O=0;M.isEven()&&j.isEven();O++)M.iushrn(1),j.iushrn(1);do{while(M.isEven())M.iushrn(1);while(j.isEven())j.iushrn(1);var R=M.cmp(j);if(R<0){var F=M;M=j,j=F}else if(R===0||j.cmpn(1)===0)break;M.isub(j)}while(!0);return j.iushln(O)},J.prototype.invm=function(K){return this.egcd(K).a.umod(K)},J.prototype.isEven=function(){return(this.words[0]&1)===0},J.prototype.isOdd=function(){return(this.words[0]&1)===1},J.prototype.andln=function(K){return this.words[0]&K},J.prototype.bincn=function(K){Y(typeof K==="number");var M=K%26,j=(K-M)/26,O=1<<M;if(this.length<=j)return this._expand(j+1),this.words[j]|=O,this;var R=O;for(var F=j;R!==0&&F<this.length;F++){var A=this.words[F]|0;A+=R,R=A>>>26,A&=67108863,this.words[F]=A}if(R!==0)this.words[F]=R,this.length++;return this},J.prototype.isZero=function(){return this.length===1&&this.words[0]===0},J.prototype.cmpn=function(K){var M=K<0;if(this.negative!==0&&!M)return-1;if(this.negative===0&&M)return 1;this.strip();var j;if(this.length>1)j=1;else{if(M)K=-K;Y(K<=67108863,"Number is too big");var O=this.words[0]|0;j=O===K?0:O<K?-1:1}if(this.negative!==0)return-j|0;return j},J.prototype.cmp=function(K){if(this.negative!==0&&K.negative===0)return-1;if(this.negative===0&&K.negative!==0)return 1;var M=this.ucmp(K);if(this.negative!==0)return-M|0;return M},J.prototype.ucmp=function(K){if(this.length>K.length)return 1;if(this.length<K.length)return-1;var M=0;for(var j=this.length-1;j>=0;j--){var O=this.words[j]|0,R=K.words[j]|0;if(O===R)continue;if(O<R)M=-1;else if(O>R)M=1;break}return M},J.prototype.gtn=function(K){return this.cmpn(K)===1},J.prototype.gt=function(K){return this.cmp(K)===1},J.prototype.gten=function(K){return this.cmpn(K)>=0},J.prototype.gte=function(K){return this.cmp(K)>=0},J.prototype.ltn=function(K){return this.cmpn(K)===-1},J.prototype.lt=function(K){return this.cmp(K)===-1},J.prototype.lten=function(K){return this.cmpn(K)<=0},J.prototype.lte=function(K){return this.cmp(K)<=0},J.prototype.eqn=function(K){return this.cmpn(K)===0},J.prototype.eq=function(K){return this.cmp(K)===0},J.red=function(K){return new b(K)},J.prototype.toRed=function(K){return Y(!this.red,"Already a number in reduction context"),Y(this.negative===0,"red works only with positives"),K.convertTo(this)._forceRed(K)},J.prototype.fromRed=function(){return Y(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},J.prototype._forceRed=function(K){return this.red=K,this},J.prototype.forceRed=function(K){return Y(!this.red,"Already a number in reduction context"),this._forceRed(K)},J.prototype.redAdd=function(K){return Y(this.red,"redAdd works only with red numbers"),this.red.add(this,K)},J.prototype.redIAdd=function(K){return Y(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,K)},J.prototype.redSub=function(K){return Y(this.red,"redSub works only with red numbers"),this.red.sub(this,K)},J.prototype.redISub=function(K){return Y(this.red,"redISub works only with red numbers"),this.red.isub(this,K)},J.prototype.redShl=function(K){return Y(this.red,"redShl works only with red numbers"),this.red.shl(this,K)},J.prototype.redMul=function(K){return Y(this.red,"redMul works only with red numbers"),this.red._verify2(this,K),this.red.mul(this,K)},J.prototype.redIMul=function(K){return Y(this.red,"redMul works only with red numbers"),this.red._verify2(this,K),this.red.imul(this,K)},J.prototype.redSqr=function(){return Y(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},J.prototype.redISqr=function(){return Y(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},J.prototype.redSqrt=function(){return Y(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},J.prototype.redInvm=function(){return Y(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},J.prototype.redNeg=function(){return Y(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},J.prototype.redPow=function(K){return Y(this.red&&!K.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,K)};var _={k256:null,p224:null,p192:null,p25519:null};function f(K,M){this.name=K,this.p=new J(M,16),this.n=this.p.bitLength(),this.k=new J(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}f.prototype._tmp=function(){var K=new J(null);return K.words=Array(Math.ceil(this.n/13)),K},f.prototype.ireduce=function(K){var M=K,j;do this.split(M,this.tmp),M=this.imulK(M),M=M.iadd(this.tmp),j=M.bitLength();while(j>this.n);var O=j<this.n?-1:M.ucmp(this.p);if(O===0)M.words[0]=0,M.length=1;else if(O>0)M.isub(this.p);else if(M.strip!==void 0)M.strip();else M._strip();return M},f.prototype.split=function(K,M){K.iushrn(this.n,0,M)},f.prototype.imulK=function(K){return K.imul(this.k)};function x(){f.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}z(x,f),x.prototype.split=function(K,M){var j=4194303,O=Math.min(K.length,9);for(var R=0;R<O;R++)M.words[R]=K.words[R];if(M.length=O,K.length<=9){K.words[0]=0,K.length=1;return}var F=K.words[9];M.words[M.length++]=F&j;for(R=10;R<K.length;R++){var A=K.words[R]|0;K.words[R-10]=(A&j)<<4|F>>>22,F=A}if(F>>>=22,K.words[R-10]=F,F===0&&K.length>10)K.length-=10;else K.length-=9},x.prototype.imulK=function(K){K.words[K.length]=0,K.words[K.length+1]=0,K.length+=2;var M=0;for(var j=0;j<K.length;j++){var O=K.words[j]|0;M+=O*977,K.words[j]=M&67108863,M=O*64+(M/67108864|0)}if(K.words[K.length-1]===0){if(K.length--,K.words[K.length-1]===0)K.length--}return K};function g(){f.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}z(g,f);function h(){f.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}z(h,f);function v(){f.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}z(v,f),v.prototype.imulK=function(K){var M=0;for(var j=0;j<K.length;j++){var O=(K.words[j]|0)*19+M,R=O&67108863;O>>>=26,K.words[j]=R,M=O}if(M!==0)K.words[K.length++]=M;return K},J._prime=function(K){if(_[K])return _[K];var M;if(K==="k256")M=new x;else if(K==="p224")M=new g;else if(K==="p192")M=new h;else if(K==="p25519")M=new v;else throw Error("Unknown prime "+K);return _[K]=M,M};function b(K){if(typeof K==="string"){var M=J._prime(K);this.m=M.p,this.prime=M}else Y(K.gtn(1),"modulus must be greater than 1"),this.m=K,this.prime=null}b.prototype._verify1=function(K){Y(K.negative===0,"red works only with positives"),Y(K.red,"red works only with red numbers")},b.prototype._verify2=function(K,M){Y((K.negative|M.negative)===0,"red works only with positives"),Y(K.red&&K.red===M.red,"red works only with red numbers")},b.prototype.imod=function(K){if(this.prime)return this.prime.ireduce(K)._forceRed(this);return K.umod(this.m)._forceRed(this)},b.prototype.neg=function(K){if(K.isZero())return K.clone();return this.m.sub(K)._forceRed(this)},b.prototype.add=function(K,M){this._verify2(K,M);var j=K.add(M);if(j.cmp(this.m)>=0)j.isub(this.m);return j._forceRed(this)},b.prototype.iadd=function(K,M){this._verify2(K,M);var j=K.iadd(M);if(j.cmp(this.m)>=0)j.isub(this.m);return j},b.prototype.sub=function(K,M){this._verify2(K,M);var j=K.sub(M);if(j.cmpn(0)<0)j.iadd(this.m);return j._forceRed(this)},b.prototype.isub=function(K,M){this._verify2(K,M);var j=K.isub(M);if(j.cmpn(0)<0)j.iadd(this.m);return j},b.prototype.shl=function(K,M){return this._verify1(K),this.imod(K.ushln(M))},b.prototype.imul=function(K,M){return this._verify2(K,M),this.imod(K.imul(M))},b.prototype.mul=function(K,M){return this._verify2(K,M),this.imod(K.mul(M))},b.prototype.isqr=function(K){return this.imul(K,K.clone())},b.prototype.sqr=function(K){return this.mul(K,K)},b.prototype.sqrt=function(K){if(K.isZero())return K.clone();var M=this.m.andln(3);if(Y(M%2===1),M===3){var j=this.m.add(new J(1)).iushrn(2);return this.pow(K,j)}var O=this.m.subn(1),R=0;while(!O.isZero()&&O.andln(1)===0)R++,O.iushrn(1);Y(!O.isZero());var F=new J(1).toRed(this),A=F.redNeg(),T=this.m.subn(1).iushrn(1),V=this.m.bitLength();V=new J(2*V*V).toRed(this);while(this.pow(V,T).cmp(A)!==0)V.redIAdd(A);var w=this.pow(V,O),k=this.pow(K,O.addn(1).iushrn(1)),S=this.pow(K,O),y=R;while(S.cmp(F)!==0){var u=S;for(var c=0;u.cmp(F)!==0;c++)u=u.redSqr();Y(c<y);var o=this.pow(w,new J(1).iushln(y-c-1));k=k.redMul(o),w=o.redSqr(),S=S.redMul(w),y=c}return k},b.prototype.invm=function(K){var M=K._invmp(this.m);if(M.negative!==0)return M.negative=0,this.imod(M).redNeg();else return this.imod(M)},b.prototype.pow=function(K,M){if(M.isZero())return new J(1).toRed(this);if(M.cmpn(1)===0)return K.clone();var j=4,O=Array(1<<j);O[0]=new J(1).toRed(this),O[1]=K;for(var R=2;R<O.length;R++)O[R]=this.mul(O[R-1],K);var F=O[0],A=0,T=0,V=M.bitLength()%26;if(V===0)V=26;for(R=M.length-1;R>=0;R--){var w=M.words[R];for(var k=V-1;k>=0;k--){var S=w>>k&1;if(F!==O[0])F=this.sqr(F);if(S===0&&A===0){T=0;continue}if(A<<=1,A|=S,T++,T!==j&&(R!==0||k!==0))continue;F=this.mul(F,O[A]),T=0,A=0}V=26}return F},b.prototype.convertTo=function(K){var M=K.umod(this.m);return M===K?M.clone():M},b.prototype.convertFrom=function(K){var M=K.clone();return M.red=null,M},J.mont=function(K){return new m(K)};function m(K){if(b.call(this,K),this.shift=this.m.bitLength(),this.shift%26!==0)this.shift+=26-this.shift%26;this.r=new J(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}z(m,b),m.prototype.convertTo=function(K){return this.imod(K.ushln(this.shift))},m.prototype.convertFrom=function(K){var M=this.imod(K.mul(this.rinv));return M.red=null,M},m.prototype.imul=function(K,M){if(K.isZero()||M.isZero())return K.words[0]=0,K.length=1,K;var j=K.imul(M),O=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=j.isub(O).iushrn(this.shift),F=R;if(R.cmp(this.m)>=0)F=R.isub(this.m);else if(R.cmpn(0)<0)F=R.iadd(this.m);return F._forceRed(this)},m.prototype.mul=function(K,M){if(K.isZero()||M.isZero())return new J(0)._forceRed(this);var j=K.mul(M),O=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=j.isub(O).iushrn(this.shift),F=R;if(R.cmp(this.m)>=0)F=R.isub(this.m);else if(R.cmpn(0)<0)F=R.iadd(this.m);return F._forceRed(this)},m.prototype.invm=function(K){var M=this.imod(K._invmp(this.m).mul(this.r2));return M._forceRed(this)}})(typeof Q>"u"||Q,$)}),pd=A0(($,Q)=>{var Z=bB(),X=L2().Buffer;function Y(z,J){return X.from(z.toRed(Z.mont(J.modulus)).redPow(new Z(J.publicExponent)).fromRed().toArray())}Q.exports=Y}),ZU0=A0(($,Q)=>{(function(Z,X){function Y(O,R){if(!O)throw Error(R||"Assertion failed")}function z(O,R){O.super_=R;var F=function(){};F.prototype=R.prototype,O.prototype=new F,O.prototype.constructor=O}function J(O,R,F){if(J.isBN(O))return O;if(this.negative=0,this.words=null,this.length=0,this.red=null,O!==null){if(R==="le"||R==="be")F=R,R=10;this._init(O||0,R||10,F||"be")}}if(typeof Z==="object")Z.exports=J;else X.BN=J;J.BN=J,J.wordSize=26;var q;try{if(typeof window<"u"&&typeof window.Buffer<"u")q=window.Buffer;else q=(s6(),Q5(T8)).Buffer}catch(O){}J.isBN=function(O){if(O instanceof J)return!0;return O!==null&&typeof O==="object"&&O.constructor.wordSize===J.wordSize&&Array.isArray(O.words)},J.max=function(O,R){if(O.cmp(R)>0)return O;return R},J.min=function(O,R){if(O.cmp(R)<0)return O;return R},J.prototype._init=function(O,R,F){if(typeof O==="number")return this._initNumber(O,R,F);if(typeof O==="object")return this._initArray(O,R,F);if(R==="hex")R=16;Y(R===(R|0)&&R>=2&&R<=36),O=O.toString().replace(/\s+/g,"");var A=0;if(O[0]==="-")A++,this.negative=1;if(A<O.length){if(R===16)this._parseHex(O,A,F);else if(this._parseBase(O,R,A),F==="le")this._initArray(this.toArray(),R,F)}},J.prototype._initNumber=function(O,R,F){if(O<0)this.negative=1,O=-O;if(O<67108864)this.words=[O&67108863],this.length=1;else if(O<4503599627370496)this.words=[O&67108863,O/67108864&67108863],this.length=2;else Y(O<9007199254740992),this.words=[O&67108863,O/67108864&67108863,1],this.length=3;if(F!=="le")return;this._initArray(this.toArray(),R,F)},J.prototype._initArray=function(O,R,F){if(Y(typeof O.length==="number"),O.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(O.length/3),this.words=Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var T,V,w=0;if(F==="be"){for(A=O.length-1,T=0;A>=0;A-=3)if(V=O[A]|O[A-1]<<8|O[A-2]<<16,this.words[T]|=V<<w&67108863,this.words[T+1]=V>>>26-w&67108863,w+=24,w>=26)w-=26,T++}else if(F==="le"){for(A=0,T=0;A<O.length;A+=3)if(V=O[A]|O[A+1]<<8|O[A+2]<<16,this.words[T]|=V<<w&67108863,this.words[T+1]=V>>>26-w&67108863,w+=24,w>=26)w-=26,T++}return this._strip()};function W(O,R){var F=O.charCodeAt(R);if(F>=48&&F<=57)return F-48;else if(F>=65&&F<=70)return F-55;else if(F>=97&&F<=102)return F-87;else Y(!1,"Invalid character in "+O)}function G(O,R,F){var A=W(O,F);if(F-1>=R)A|=W(O,F-1)<<4;return A}J.prototype._parseHex=function(O,R,F){this.length=Math.ceil((O.length-R)/6),this.words=Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var T=0,V=0,w;if(F==="be")for(A=O.length-1;A>=R;A-=2)if(w=G(O,R,A)<<T,this.words[V]|=w&67108863,T>=18)T-=18,V+=1,this.words[V]|=w>>>26;else T+=8;else{var k=O.length-R;for(A=k%2===0?R+1:R;A<O.length;A+=2)if(w=G(O,R,A)<<T,this.words[V]|=w&67108863,T>=18)T-=18,V+=1,this.words[V]|=w>>>26;else T+=8}this._strip()};function U(O,R,F,A){var T=0,V=0,w=Math.min(O.length,F);for(var k=R;k<w;k++){var S=O.charCodeAt(k)-48;if(T*=A,S>=49)V=S-49+10;else if(S>=17)V=S-17+10;else V=S;Y(S>=0&&V<A,"Invalid character"),T+=V}return T}J.prototype._parseBase=function(O,R,F){this.words=[0],this.length=1;for(var A=0,T=1;T<=67108863;T*=R)A++;A--,T=T/R|0;var V=O.length-F,w=V%A,k=Math.min(V,V-w)+F,S=0;for(var y=F;y<k;y+=A)if(S=U(O,y,y+A,R),this.imuln(T),this.words[0]+S<67108864)this.words[0]+=S;else this._iaddn(S);if(w!==0){var u=1;S=U(O,y,O.length,R);for(y=0;y<w;y++)u*=R;if(this.imuln(u),this.words[0]+S<67108864)this.words[0]+=S;else this._iaddn(S)}this._strip()},J.prototype.copy=function(O){O.words=Array(this.length);for(var R=0;R<this.length;R++)O.words[R]=this.words[R];O.length=this.length,O.negative=this.negative,O.red=this.red};function D(O,R){O.words=R.words,O.length=R.length,O.negative=R.negative,O.red=R.red}if(J.prototype._move=function(O){D(O,this)},J.prototype.clone=function(){var O=new J(null);return this.copy(O),O},J.prototype._expand=function(O){while(this.length<O)this.words[this.length++]=0;return this},J.prototype._strip=function(){while(this.length>1&&this.words[this.length-1]===0)this.length--;return this._normSign()},J.prototype._normSign=function(){if(this.length===1&&this.words[0]===0)this.negative=0;return this},typeof Symbol<"u"&&typeof Symbol.for==="function")try{J.prototype[Symbol.for("nodejs.util.inspect.custom")]=P}catch(O){J.prototype.inspect=P}else J.prototype.inspect=P;function P(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var H=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],N=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];if(J.prototype.toString=function(O,R){O=O||10,R=R|0||1;var F;if(O===16||O==="hex"){F="";var A=0,T=0;for(var V=0;V<this.length;V++){var w=this.words[V],k=((w<<A|T)&16777215).toString(16);if(T=w>>>24-A&16777215,A+=2,A>=26)A-=26,V--;if(T!==0||V!==this.length-1)F=H[6-k.length]+k+F;else F=k+F}if(T!==0)F=T.toString(16)+F;while(F.length%R!==0)F="0"+F;if(this.negative!==0)F="-"+F;return F}if(O===(O|0)&&O>=2&&O<=36){var S=N[O],y=C[O];F="";var u=this.clone();u.negative=0;while(!u.isZero()){var c=u.modrn(y).toString(O);if(u=u.idivn(y),!u.isZero())F=H[S-c.length]+c+F;else F=c+F}if(this.isZero())F="0"+F;while(F.length%R!==0)F="0"+F;if(this.negative!==0)F="-"+F;return F}Y(!1,"Base should be between 2 and 36")},J.prototype.toNumber=function(){var O=this.words[0];if(this.length===2)O+=this.words[1]*67108864;else if(this.length===3&&this.words[2]===1)O+=4503599627370496+this.words[1]*67108864;else if(this.length>2)Y(!1,"Number can only safely store up to 53 bits");return this.negative!==0?-O:O},J.prototype.toJSON=function(){return this.toString(16,2)},q)J.prototype.toBuffer=function(O,R){return this.toArrayLike(q,O,R)};J.prototype.toArray=function(O,R){return this.toArrayLike(Array,O,R)};var L=function(O,R){if(O.allocUnsafe)return O.allocUnsafe(R);return new O(R)};if(J.prototype.toArrayLike=function(O,R,F){this._strip();var A=this.byteLength(),T=F||Math.max(1,A);Y(A<=T,"byte array longer than desired length"),Y(T>0,"Requested array length <= 0");var V=L(O,T),w=R==="le"?"LE":"BE";return this["_toArrayLike"+w](V,A),V},J.prototype._toArrayLikeLE=function(O,R){var F=0,A=0;for(var T=0,V=0;T<this.length;T++){var w=this.words[T]<<V|A;if(O[F++]=w&255,F<O.length)O[F++]=w>>8&255;if(F<O.length)O[F++]=w>>16&255;if(V===6){if(F<O.length)O[F++]=w>>24&255;A=0,V=0}else A=w>>>24,V+=2}if(F<O.length){O[F++]=A;while(F<O.length)O[F++]=0}},J.prototype._toArrayLikeBE=function(O,R){var F=O.length-1,A=0;for(var T=0,V=0;T<this.length;T++){var w=this.words[T]<<V|A;if(O[F--]=w&255,F>=0)O[F--]=w>>8&255;if(F>=0)O[F--]=w>>16&255;if(V===6){if(F>=0)O[F--]=w>>24&255;A=0,V=0}else A=w>>>24,V+=2}if(F>=0){O[F--]=A;while(F>=0)O[F--]=0}},Math.clz32)J.prototype._countBits=function(O){return 32-Math.clz32(O)};else J.prototype._countBits=function(O){var R=O,F=0;if(R>=4096)F+=13,R>>>=13;if(R>=64)F+=7,R>>>=7;if(R>=8)F+=4,R>>>=4;if(R>=2)F+=2,R>>>=2;return F+R};J.prototype._zeroBits=function(O){if(O===0)return 26;var R=O,F=0;if((R&8191)===0)F+=13,R>>>=13;if((R&127)===0)F+=7,R>>>=7;if((R&15)===0)F+=4,R>>>=4;if((R&3)===0)F+=2,R>>>=2;if((R&1)===0)F++;return F},J.prototype.bitLength=function(){var O=this.words[this.length-1],R=this._countBits(O);return(this.length-1)*26+R};function B(O){var R=Array(O.bitLength());for(var F=0;F<R.length;F++){var A=F/26|0,T=F%26;R[F]=O.words[A]>>>T&1}return R}J.prototype.zeroBits=function(){if(this.isZero())return 0;var O=0;for(var R=0;R<this.length;R++){var F=this._zeroBits(this.words[R]);if(O+=F,F!==26)break}return O},J.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},J.prototype.toTwos=function(O){if(this.negative!==0)return this.abs().inotn(O).iaddn(1);return this.clone()},J.prototype.fromTwos=function(O){if(this.testn(O-1))return this.notn(O).iaddn(1).ineg();return this.clone()},J.prototype.isNeg=function(){return this.negative!==0},J.prototype.neg=function(){return this.clone().ineg()},J.prototype.ineg=function(){if(!this.isZero())this.negative^=1;return this},J.prototype.iuor=function(O){while(this.length<O.length)this.words[this.length++]=0;for(var R=0;R<O.length;R++)this.words[R]=this.words[R]|O.words[R];return this._strip()},J.prototype.ior=function(O){return Y((this.negative|O.negative)===0),this.iuor(O)},J.prototype.or=function(O){if(this.length>O.length)return this.clone().ior(O);return O.clone().ior(this)},J.prototype.uor=function(O){if(this.length>O.length)return this.clone().iuor(O);return O.clone().iuor(this)},J.prototype.iuand=function(O){var R;if(this.length>O.length)R=O;else R=this;for(var F=0;F<R.length;F++)this.words[F]=this.words[F]&O.words[F];return this.length=R.length,this._strip()},J.prototype.iand=function(O){return Y((this.negative|O.negative)===0),this.iuand(O)},J.prototype.and=function(O){if(this.length>O.length)return this.clone().iand(O);return O.clone().iand(this)},J.prototype.uand=function(O){if(this.length>O.length)return this.clone().iuand(O);return O.clone().iuand(this)},J.prototype.iuxor=function(O){var R,F;if(this.length>O.length)R=this,F=O;else R=O,F=this;for(var A=0;A<F.length;A++)this.words[A]=R.words[A]^F.words[A];if(this!==R)for(;A<R.length;A++)this.words[A]=R.words[A];return this.length=R.length,this._strip()},J.prototype.ixor=function(O){return Y((this.negative|O.negative)===0),this.iuxor(O)},J.prototype.xor=function(O){if(this.length>O.length)return this.clone().ixor(O);return O.clone().ixor(this)},J.prototype.uxor=function(O){if(this.length>O.length)return this.clone().iuxor(O);return O.clone().iuxor(this)},J.prototype.inotn=function(O){Y(typeof O==="number"&&O>=0);var R=Math.ceil(O/26)|0,F=O%26;if(this._expand(R),F>0)R--;for(var A=0;A<R;A++)this.words[A]=~this.words[A]&67108863;if(F>0)this.words[A]=~this.words[A]&67108863>>26-F;return this._strip()},J.prototype.notn=function(O){return this.clone().inotn(O)},J.prototype.setn=function(O,R){Y(typeof O==="number"&&O>=0);var F=O/26|0,A=O%26;if(this._expand(F+1),R)this.words[F]=this.words[F]|1<<A;else this.words[F]=this.words[F]&~(1<<A);return this._strip()},J.prototype.iadd=function(O){var R;if(this.negative!==0&&O.negative===0)return this.negative=0,R=this.isub(O),this.negative^=1,this._normSign();else if(this.negative===0&&O.negative!==0)return O.negative=0,R=this.isub(O),O.negative=1,R._normSign();var F,A;if(this.length>O.length)F=this,A=O;else F=O,A=this;var T=0;for(var V=0;V<A.length;V++)R=(F.words[V]|0)+(A.words[V]|0)+T,this.words[V]=R&67108863,T=R>>>26;for(;T!==0&&V<F.length;V++)R=(F.words[V]|0)+T,this.words[V]=R&67108863,T=R>>>26;if(this.length=F.length,T!==0)this.words[this.length]=T,this.length++;else if(F!==this)for(;V<F.length;V++)this.words[V]=F.words[V];return this},J.prototype.add=function(O){var R;if(O.negative!==0&&this.negative===0)return O.negative=0,R=this.sub(O),O.negative^=1,R;else if(O.negative===0&&this.negative!==0)return this.negative=0,R=O.sub(this),this.negative=1,R;if(this.length>O.length)return this.clone().iadd(O);return O.clone().iadd(this)},J.prototype.isub=function(O){if(O.negative!==0){O.negative=0;var R=this.iadd(O);return O.negative=1,R._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(O),this.negative=1,this._normSign();var F=this.cmp(O);if(F===0)return this.negative=0,this.length=1,this.words[0]=0,this;var A,T;if(F>0)A=this,T=O;else A=O,T=this;var V=0;for(var w=0;w<T.length;w++)R=(A.words[w]|0)-(T.words[w]|0)+V,V=R>>26,this.words[w]=R&67108863;for(;V!==0&&w<A.length;w++)R=(A.words[w]|0)+V,V=R>>26,this.words[w]=R&67108863;if(V===0&&w<A.length&&A!==this)for(;w<A.length;w++)this.words[w]=A.words[w];if(this.length=Math.max(this.length,w),A!==this)this.negative=1;return this._strip()},J.prototype.sub=function(O){return this.clone().isub(O)};function E(O,R,F){F.negative=R.negative^O.negative;var A=O.length+R.length|0;F.length=A,A=A-1|0;var T=O.words[0]|0,V=R.words[0]|0,w=T*V,k=w&67108863,S=w/67108864|0;F.words[0]=k;for(var y=1;y<A;y++){var u=S>>>26,c=S&67108863,o=Math.min(y,R.length-1);for(var z0=Math.max(0,y-O.length+1);z0<=o;z0++){var e=y-z0|0;T=O.words[e]|0,V=R.words[z0]|0,w=T*V+c,u+=w/67108864|0,c=w&67108863}F.words[y]=c|0,S=u|0}if(S!==0)F.words[y]=S|0;else F.length--;return F._strip()}var I=function(O,R,F){var A=O.words,T=R.words,V=F.words,w=0,k,S,y,u=A[0]|0,c=u&8191,o=u>>>13,z0=A[1]|0,e=z0&8191,s=z0>>>13,J0=A[2]|0,t=J0&8191,Z0=J0>>>13,N0=A[3]|0,i=N0&8191,l=N0>>>13,q0=A[4]|0,Y0=q0&8191,K0=q0>>>13,k0=A[5]|0,a=k0&8191,X0=k0>>>13,n0=A[6]|0,W0=n0&8191,V0=n0>>>13,H1=A[7]|0,D0=H1&8191,j0=H1>>>13,g1=A[8]|0,T0=g1&8191,R0=g1>>>13,s1=A[9]|0,B0=s1&8191,C0=s1>>>13,g6=T[0]|0,m0=g6&8191,l0=g6>>>13,C6=T[1]|0,y0=C6&8191,u0=C6>>>13,W8=T[2]|0,d0=W8&8191,v0=W8>>>13,o6=T[3]|0,i0=o6&8191,c0=o6>>>13,M5=T[4]|0,_0=M5&8191,d=M5>>>13,$0=T[5]|0,G0=$0&8191,O0=$0>>>13,s0=T[6]|0,E0=s0&8191,S0=s0>>>13,T5=T[7]|0,g0=T5&8191,p0=T5>>>13,_6=T[8]|0,h0=_6&8191,o0=_6>>>13,S6=T[9]|0,m1=S6&8191,k1=S6>>>13;F.negative=O.negative^R.negative,F.length=19,k=Math.imul(c,m0),S=Math.imul(c,l0),S=S+Math.imul(o,m0)|0,y=Math.imul(o,l0);var g5=(w+k|0)+((S&8191)<<13)|0;w=(y+(S>>>13)|0)+(g5>>>26)|0,g5&=67108863,k=Math.imul(e,m0),S=Math.imul(e,l0),S=S+Math.imul(s,m0)|0,y=Math.imul(s,l0),k=k+Math.imul(c,y0)|0,S=S+Math.imul(c,u0)|0,S=S+Math.imul(o,y0)|0,y=y+Math.imul(o,u0)|0;var P5=(w+k|0)+((S&8191)<<13)|0;w=(y+(S>>>13)|0)+(P5>>>26)|0,P5&=67108863,k=Math.imul(t,m0),S=Math.imul(t,l0),S=S+Math.imul(Z0,m0)|0,y=Math.imul(Z0,l0),k=k+Math.imul(e,y0)|0,S=S+Math.imul(e,u0)|0,S=S+Math.imul(s,y0)|0,y=y+Math.imul(s,u0)|0,k=k+Math.imul(c,d0)|0,S=S+Math.imul(c,v0)|0,S=S+Math.imul(o,d0)|0,y=y+Math.imul(o,v0)|0;var v1=(w+k|0)+((S&8191)<<13)|0;w=(y+(S>>>13)|0)+(v1>>>26)|0,v1&=67108863,k=Math.imul(i,m0),S=Math.imul(i,l0),S=S+Math.imul(l,m0)|0,y=Math.imul(l,l0),k=k+Math.imul(t,y0)|0,S=S+Math.imul(t,u0)|0,S=S+Math.imul(Z0,y0)|0,y=y+Math.imul(Z0,u0)|0,k=k+Math.imul(e,d0)|0,S=S+Math.imul(e,v0)|0,S=S+Math.imul(s,d0)|0,y=y+Math.imul(s,v0)|0,k=k+Math.imul(c,i0)|0,S=S+Math.imul(c,c0)|0,S=S+Math.imul(o,i0)|0,y=y+Math.imul(o,c0)|0;var o1=(w+k|0)+((S&8191)<<13)|0;w=(y+(S>>>13)|0)+(o1>>>26)|0,o1&=67108863,k=Math.imul(Y0,m0),S=Math.imul(Y0,l0),S=S+Math.imul(K0,m0)|0,y=Math.imul(K0,l0),k=k+Math.imul(i,y0)|0,S=S+Math.imul(i,u0)|0,S=S+Math.imul(l,y0)|0,y=y+Math.imul(l,u0)|0,k=k+Math.imul(t,d0)|0,S=S+Math.imul(t,v0)|0,S=S+Math.imul(Z0,d0)|0,y=y+Math.imul(Z0,v0)|0,k=k+Math.imul(e,i0)|0,S=S+Math.imul(e,c0)|0,S=S+Math.imul(s,i0)|0,y=y+Math.imul(s,c0)|0,k=k+Math.imul(c,_0)|0,S=S+Math.imul(c,d)|0,S=S+Math.imul(o,_0)|0,y=y+Math.imul(o,d)|0;var Y6=(w+k|0)+((S&8191)<<13)|0;w=(y+(S>>>13)|0)+(Y6>>>26)|0,Y6&=67108863,k=Math.imul(a,m0),S=Math.imul(a,l0),S=S+Math.imul(X0,m0)|0,y=Math.imul(X0,l0),k=k+Math.imul(Y0,y0)|0,S=S+Math.imul(Y0,u0)|0,S=S+Math.imul(K0,y0)|0,y=y+Math.imul(K0,u0)|0,k=k+Math.imul(i,d0)|0,S=S+Math.imul(i,v0)|0,S=S+Math.imul(l,d0)|0,y=y+Math.imul(l,v0)|0,k=k+Math.imul(t,i0)|0,S=S+Math.imul(t,c0)|0,S=S+Math.imul(Z0,i0)|0,y=y+Math.imul(Z0,c0)|0,k=k+Math.imul(e,_0)|0,S=S+Math.imul(e,d)|0,S=S+Math.imul(s,_0)|0,y=y+Math.imul(s,d)|0,k=k+Math.imul(c,G0)|0,S=S+Math.imul(c,O0)|0,S=S+Math.imul(o,G0)|0,y=y+Math.imul(o,O0)|0;var J6=(w+k|0)+((S&8191)<<13)|0;w=(y+(S>>>13)|0)+(J6>>>26)|0,J6&=67108863,k=Math.imul(W0,m0),S=Math.imul(W0,l0),S=S+Math.imul(V0,m0)|0,y=Math.imul(V0,l0),k=k+Math.imul(a,y0)|0,S=S+Math.imul(a,u0)|0,S=S+Math.imul(X0,y0)|0,y=y+Math.imul(X0,u0)|0,k=k+Math.imul(Y0,d0)|0,S=S+Math.imul(Y0,v0)|0,S=S+Math.imul(K0,d0)|0,y=y+Math.imul(K0,v0)|0,k=k+Math.imul(i,i0)|0,S=S+Math.imul(i,c0)|0,S=S+Math.imul(l,i0)|0,y=y+Math.imul(l,c0)|0,k=k+Math.imul(t,_0)|0,S=S+Math.imul(t,d)|0,S=S+Math.imul(Z0,_0)|0,y=y+Math.imul(Z0,d)|0,k=k+Math.imul(e,G0)|0,S=S+Math.imul(e,O0)|0,S=S+Math.imul(s,G0)|0,y=y+Math.imul(s,O0)|0,k=k+Math.imul(c,E0)|0,S=S+Math.imul(c,S0)|0,S=S+Math.imul(o,E0)|0,y=y+Math.imul(o,S0)|0;var _5=(w+k|0)+((S&8191)<<13)|0;w=(y+(S>>>13)|0)+(_5>>>26)|0,_5&=67108863,k=Math.imul(D0,m0),S=Math.imul(D0,l0),S=S+Math.imul(j0,m0)|0,y=Math.imul(j0,l0),k=k+Math.imul(W0,y0)|0,S=S+Math.imul(W0,u0)|0,S=S+Math.imul(V0,y0)|0,y=y+Math.imul(V0,u0)|0,k=k+Math.imul(a,d0)|0,S=S+Math.imul(a,v0)|0,S=S+Math.imul(X0,d0)|0,y=y+Math.imul(X0,v0)|0,k=k+Math.imul(Y0,i0)|0,S=S+Math.imul(Y0,c0)|0,S=S+Math.imul(K0,i0)|0,y=y+Math.imul(K0,c0)|0,k=k+Math.imul(i,_0)|0,S=S+Math.imul(i,d)|0,S=S+Math.imul(l,_0)|0,y=y+Math.imul(l,d)|0,k=k+Math.imul(t,G0)|0,S=S+Math.imul(t,O0)|0,S=S+Math.imul(Z0,G0)|0,y=y+Math.imul(Z0,O0)|0,k=k+Math.imul(e,E0)|0,S=S+Math.imul(e,S0)|0,S=S+Math.imul(s,E0)|0,y=y+Math.imul(s,S0)|0,k=k+Math.imul(c,g0)|0,S=S+Math.imul(c,p0)|0,S=S+Math.imul(o,g0)|0,y=y+Math.imul(o,p0)|0;var S5=(w+k|0)+((S&8191)<<13)|0;w=(y+(S>>>13)|0)+(S5>>>26)|0,S5&=67108863,k=Math.imul(T0,m0),S=Math.imul(T0,l0),S=S+Math.imul(R0,m0)|0,y=Math.imul(R0,l0),k=k+Math.imul(D0,y0)|0,S=S+Math.imul(D0,u0)|0,S=S+Math.imul(j0,y0)|0,y=y+Math.imul(j0,u0)|0,k=k+Math.imul(W0,d0)|0,S=S+Math.imul(W0,v0)|0,S=S+Math.imul(V0,d0)|0,y=y+Math.imul(V0,v0)|0,k=k+Math.imul(a,i0)|0,S=S+Math.imul(a,c0)|0,S=S+Math.imul(X0,i0)|0,y=y+Math.imul(X0,c0)|0,k=k+Math.imul(Y0,_0)|0,S=S+Math.imul(Y0,d)|0,S=S+Math.imul(K0,_0)|0,y=y+Math.imul(K0,d)|0,k=k+Math.imul(i,G0)|0,S=S+Math.imul(i,O0)|0,S=S+Math.imul(l,G0)|0,y=y+Math.imul(l,O0)|0,k=k+Math.imul(t,E0)|0,S=S+Math.imul(t,S0)|0,S=S+Math.imul(Z0,E0)|0,y=y+Math.imul(Z0,S0)|0,k=k+Math.imul(e,g0)|0,S=S+Math.imul(e,p0)|0,S=S+Math.imul(s,g0)|0,y=y+Math.imul(s,p0)|0,k=k+Math.imul(c,h0)|0,S=S+Math.imul(c,o0)|0,S=S+Math.imul(o,h0)|0,y=y+Math.imul(o,o0)|0;var F5=(w+k|0)+((S&8191)<<13)|0;w=(y+(S>>>13)|0)+(F5>>>26)|0,F5&=67108863,k=Math.imul(B0,m0),S=Math.imul(B0,l0),S=S+Math.imul(C0,m0)|0,y=Math.imul(C0,l0),k=k+Math.imul(T0,y0)|0,S=S+Math.imul(T0,u0)|0,S=S+Math.imul(R0,y0)|0,y=y+Math.imul(R0,u0)|0,k=k+Math.imul(D0,d0)|0,S=S+Math.imul(D0,v0)|0,S=S+Math.imul(j0,d0)|0,y=y+Math.imul(j0,v0)|0,k=k+Math.imul(W0,i0)|0,S=S+Math.imul(W0,c0)|0,S=S+Math.imul(V0,i0)|0,y=y+Math.imul(V0,c0)|0,k=k+Math.imul(a,_0)|0,S=S+Math.imul(a,d)|0,S=S+Math.imul(X0,_0)|0,y=y+Math.imul(X0,d)|0,k=k+Math.imul(Y0,G0)|0,S=S+Math.imul(Y0,O0)|0,S=S+Math.imul(K0,G0)|0,y=y+Math.imul(K0,O0)|0,k=k+Math.imul(i,E0)|0,S=S+Math.imul(i,S0)|0,S=S+Math.imul(l,E0)|0,y=y+Math.imul(l,S0)|0,k=k+Math.imul(t,g0)|0,S=S+Math.imul(t,p0)|0,S=S+Math.imul(Z0,g0)|0,y=y+Math.imul(Z0,p0)|0,k=k+Math.imul(e,h0)|0,S=S+Math.imul(e,o0)|0,S=S+Math.imul(s,h0)|0,y=y+Math.imul(s,o0)|0,k=k+Math.imul(c,m1)|0,S=S+Math.imul(c,k1)|0,S=S+Math.imul(o,m1)|0,y=y+Math.imul(o,k1)|0;var h5=(w+k|0)+((S&8191)<<13)|0;w=(y+(S>>>13)|0)+(h5>>>26)|0,h5&=67108863,k=Math.imul(B0,y0),S=Math.imul(B0,u0),S=S+Math.imul(C0,y0)|0,y=Math.imul(C0,u0),k=k+Math.imul(T0,d0)|0,S=S+Math.imul(T0,v0)|0,S=S+Math.imul(R0,d0)|0,y=y+Math.imul(R0,v0)|0,k=k+Math.imul(D0,i0)|0,S=S+Math.imul(D0,c0)|0,S=S+Math.imul(j0,i0)|0,y=y+Math.imul(j0,c0)|0,k=k+Math.imul(W0,_0)|0,S=S+Math.imul(W0,d)|0,S=S+Math.imul(V0,_0)|0,y=y+Math.imul(V0,d)|0,k=k+Math.imul(a,G0)|0,S=S+Math.imul(a,O0)|0,S=S+Math.imul(X0,G0)|0,y=y+Math.imul(X0,O0)|0,k=k+Math.imul(Y0,E0)|0,S=S+Math.imul(Y0,S0)|0,S=S+Math.imul(K0,E0)|0,y=y+Math.imul(K0,S0)|0,k=k+Math.imul(i,g0)|0,S=S+Math.imul(i,p0)|0,S=S+Math.imul(l,g0)|0,y=y+Math.imul(l,p0)|0,k=k+Math.imul(t,h0)|0,S=S+Math.imul(t,o0)|0,S=S+Math.imul(Z0,h0)|0,y=y+Math.imul(Z0,o0)|0,k=k+Math.imul(e,m1)|0,S=S+Math.imul(e,k1)|0,S=S+Math.imul(s,m1)|0,y=y+Math.imul(s,k1)|0;var A5=(w+k|0)+((S&8191)<<13)|0;w=(y+(S>>>13)|0)+(A5>>>26)|0,A5&=67108863,k=Math.imul(B0,d0),S=Math.imul(B0,v0),S=S+Math.imul(C0,d0)|0,y=Math.imul(C0,v0),k=k+Math.imul(T0,i0)|0,S=S+Math.imul(T0,c0)|0,S=S+Math.imul(R0,i0)|0,y=y+Math.imul(R0,c0)|0,k=k+Math.imul(D0,_0)|0,S=S+Math.imul(D0,d)|0,S=S+Math.imul(j0,_0)|0,y=y+Math.imul(j0,d)|0,k=k+Math.imul(W0,G0)|0,S=S+Math.imul(W0,O0)|0,S=S+Math.imul(V0,G0)|0,y=y+Math.imul(V0,O0)|0,k=k+Math.imul(a,E0)|0,S=S+Math.imul(a,S0)|0,S=S+Math.imul(X0,E0)|0,y=y+Math.imul(X0,S0)|0,k=k+Math.imul(Y0,g0)|0,S=S+Math.imul(Y0,p0)|0,S=S+Math.imul(K0,g0)|0,y=y+Math.imul(K0,p0)|0,k=k+Math.imul(i,h0)|0,S=S+Math.imul(i,o0)|0,S=S+Math.imul(l,h0)|0,y=y+Math.imul(l,o0)|0,k=k+Math.imul(t,m1)|0,S=S+Math.imul(t,k1)|0,S=S+Math.imul(Z0,m1)|0,y=y+Math.imul(Z0,k1)|0;var z6=(w+k|0)+((S&8191)<<13)|0;w=(y+(S>>>13)|0)+(z6>>>26)|0,z6&=67108863,k=Math.imul(B0,i0),S=Math.imul(B0,c0),S=S+Math.imul(C0,i0)|0,y=Math.imul(C0,c0),k=k+Math.imul(T0,_0)|0,S=S+Math.imul(T0,d)|0,S=S+Math.imul(R0,_0)|0,y=y+Math.imul(R0,d)|0,k=k+Math.imul(D0,G0)|0,S=S+Math.imul(D0,O0)|0,S=S+Math.imul(j0,G0)|0,y=y+Math.imul(j0,O0)|0,k=k+Math.imul(W0,E0)|0,S=S+Math.imul(W0,S0)|0,S=S+Math.imul(V0,E0)|0,y=y+Math.imul(V0,S0)|0,k=k+Math.imul(a,g0)|0,S=S+Math.imul(a,p0)|0,S=S+Math.imul(X0,g0)|0,y=y+Math.imul(X0,p0)|0,k=k+Math.imul(Y0,h0)|0,S=S+Math.imul(Y0,o0)|0,S=S+Math.imul(K0,h0)|0,y=y+Math.imul(K0,o0)|0,k=k+Math.imul(i,m1)|0,S=S+Math.imul(i,k1)|0,S=S+Math.imul(l,m1)|0,y=y+Math.imul(l,k1)|0;var n6=(w+k|0)+((S&8191)<<13)|0;w=(y+(S>>>13)|0)+(n6>>>26)|0,n6&=67108863,k=Math.imul(B0,_0),S=Math.imul(B0,d),S=S+Math.imul(C0,_0)|0,y=Math.imul(C0,d),k=k+Math.imul(T0,G0)|0,S=S+Math.imul(T0,O0)|0,S=S+Math.imul(R0,G0)|0,y=y+Math.imul(R0,O0)|0,k=k+Math.imul(D0,E0)|0,S=S+Math.imul(D0,S0)|0,S=S+Math.imul(j0,E0)|0,y=y+Math.imul(j0,S0)|0,k=k+Math.imul(W0,g0)|0,S=S+Math.imul(W0,p0)|0,S=S+Math.imul(V0,g0)|0,y=y+Math.imul(V0,p0)|0,k=k+Math.imul(a,h0)|0,S=S+Math.imul(a,o0)|0,S=S+Math.imul(X0,h0)|0,y=y+Math.imul(X0,o0)|0,k=k+Math.imul(Y0,m1)|0,S=S+Math.imul(Y0,k1)|0,S=S+Math.imul(K0,m1)|0,y=y+Math.imul(K0,k1)|0;var K8=(w+k|0)+((S&8191)<<13)|0;w=(y+(S>>>13)|0)+(K8>>>26)|0,K8&=67108863,k=Math.imul(B0,G0),S=Math.imul(B0,O0),S=S+Math.imul(C0,G0)|0,y=Math.imul(C0,O0),k=k+Math.imul(T0,E0)|0,S=S+Math.imul(T0,S0)|0,S=S+Math.imul(R0,E0)|0,y=y+Math.imul(R0,S0)|0,k=k+Math.imul(D0,g0)|0,S=S+Math.imul(D0,p0)|0,S=S+Math.imul(j0,g0)|0,y=y+Math.imul(j0,p0)|0,k=k+Math.imul(W0,h0)|0,S=S+Math.imul(W0,o0)|0,S=S+Math.imul(V0,h0)|0,y=y+Math.imul(V0,o0)|0,k=k+Math.imul(a,m1)|0,S=S+Math.imul(a,k1)|0,S=S+Math.imul(X0,m1)|0,y=y+Math.imul(X0,k1)|0;var b6=(w+k|0)+((S&8191)<<13)|0;w=(y+(S>>>13)|0)+(b6>>>26)|0,b6&=67108863,k=Math.imul(B0,E0),S=Math.imul(B0,S0),S=S+Math.imul(C0,E0)|0,y=Math.imul(C0,S0),k=k+Math.imul(T0,g0)|0,S=S+Math.imul(T0,p0)|0,S=S+Math.imul(R0,g0)|0,y=y+Math.imul(R0,p0)|0,k=k+Math.imul(D0,h0)|0,S=S+Math.imul(D0,o0)|0,S=S+Math.imul(j0,h0)|0,y=y+Math.imul(j0,o0)|0,k=k+Math.imul(W0,m1)|0,S=S+Math.imul(W0,k1)|0,S=S+Math.imul(V0,m1)|0,y=y+Math.imul(V0,k1)|0;var r6=(w+k|0)+((S&8191)<<13)|0;w=(y+(S>>>13)|0)+(r6>>>26)|0,r6&=67108863,k=Math.imul(B0,g0),S=Math.imul(B0,p0),S=S+Math.imul(C0,g0)|0,y=Math.imul(C0,p0),k=k+Math.imul(T0,h0)|0,S=S+Math.imul(T0,o0)|0,S=S+Math.imul(R0,h0)|0,y=y+Math.imul(R0,o0)|0,k=k+Math.imul(D0,m1)|0,S=S+Math.imul(D0,k1)|0,S=S+Math.imul(j0,m1)|0,y=y+Math.imul(j0,k1)|0;var XX=(w+k|0)+((S&8191)<<13)|0;w=(y+(S>>>13)|0)+(XX>>>26)|0,XX&=67108863,k=Math.imul(B0,h0),S=Math.imul(B0,o0),S=S+Math.imul(C0,h0)|0,y=Math.imul(C0,o0),k=k+Math.imul(T0,m1)|0,S=S+Math.imul(T0,k1)|0,S=S+Math.imul(R0,m1)|0,y=y+Math.imul(R0,k1)|0;var o8=(w+k|0)+((S&8191)<<13)|0;w=(y+(S>>>13)|0)+(o8>>>26)|0,o8&=67108863,k=Math.imul(B0,m1),S=Math.imul(B0,k1),S=S+Math.imul(C0,m1)|0,y=Math.imul(C0,k1);var zQ=(w+k|0)+((S&8191)<<13)|0;if(w=(y+(S>>>13)|0)+(zQ>>>26)|0,zQ&=67108863,V[0]=g5,V[1]=P5,V[2]=v1,V[3]=o1,V[4]=Y6,V[5]=J6,V[6]=_5,V[7]=S5,V[8]=F5,V[9]=h5,V[10]=A5,V[11]=z6,V[12]=n6,V[13]=K8,V[14]=b6,V[15]=r6,V[16]=XX,V[17]=o8,V[18]=zQ,w!==0)V[19]=w,F.length++;return F};if(!Math.imul)I=E;function _(O,R,F){F.negative=R.negative^O.negative,F.length=O.length+R.length;var A=0,T=0;for(var V=0;V<F.length-1;V++){var w=T;T=0;var k=A&67108863,S=Math.min(V,R.length-1);for(var y=Math.max(0,V-O.length+1);y<=S;y++){var u=V-y,c=O.words[u]|0,o=R.words[y]|0,z0=c*o,e=z0&67108863;w=w+(z0/67108864|0)|0,e=e+k|0,k=e&67108863,w=w+(e>>>26)|0,T+=w>>>26,w&=67108863}F.words[V]=k,A=w,w=T}if(A!==0)F.words[V]=A;else F.length--;return F._strip()}function f(O,R,F){return _(O,R,F)}J.prototype.mulTo=function(O,R){var F,A=this.length+O.length;if(this.length===10&&O.length===10)F=I(this,O,R);else if(A<63)F=E(this,O,R);else if(A<1024)F=_(this,O,R);else F=f(this,O,R);return F};function x(O,R){this.x=O,this.y=R}x.prototype.makeRBT=function(O){var R=Array(O),F=J.prototype._countBits(O)-1;for(var A=0;A<O;A++)R[A]=this.revBin(A,F,O);return R},x.prototype.revBin=function(O,R,F){if(O===0||O===F-1)return O;var A=0;for(var T=0;T<R;T++)A|=(O&1)<<R-T-1,O>>=1;return A},x.prototype.permute=function(O,R,F,A,T,V){for(var w=0;w<V;w++)A[w]=R[O[w]],T[w]=F[O[w]]},x.prototype.transform=function(O,R,F,A,T,V){this.permute(V,O,R,F,A,T);for(var w=1;w<T;w<<=1){var k=w<<1,S=Math.cos(2*Math.PI/k),y=Math.sin(2*Math.PI/k);for(var u=0;u<T;u+=k){var c=S,o=y;for(var z0=0;z0<w;z0++){var e=F[u+z0],s=A[u+z0],J0=F[u+z0+w],t=A[u+z0+w],Z0=c*J0-o*t;if(t=c*t+o*J0,J0=Z0,F[u+z0]=e+J0,A[u+z0]=s+t,F[u+z0+w]=e-J0,A[u+z0+w]=s-t,z0!==k)Z0=S*c-y*o,o=S*o+y*c,c=Z0}}}},x.prototype.guessLen13b=function(O,R){var F=Math.max(R,O)|1,A=F&1,T=0;for(F=F/2|0;F;F=F>>>1)T++;return 1<<T+1+A},x.prototype.conjugate=function(O,R,F){if(F<=1)return;for(var A=0;A<F/2;A++){var T=O[A];O[A]=O[F-A-1],O[F-A-1]=T,T=R[A],R[A]=-R[F-A-1],R[F-A-1]=-T}},x.prototype.normalize13b=function(O,R){var F=0;for(var A=0;A<R/2;A++){var T=Math.round(O[2*A+1]/R)*8192+Math.round(O[2*A]/R)+F;if(O[A]=T&67108863,T<67108864)F=0;else F=T/67108864|0}return O},x.prototype.convert13b=function(O,R,F,A){var T=0;for(var V=0;V<R;V++)T=T+(O[V]|0),F[2*V]=T&8191,T=T>>>13,F[2*V+1]=T&8191,T=T>>>13;for(V=2*R;V<A;++V)F[V]=0;Y(T===0),Y((T&-8192)===0)},x.prototype.stub=function(O){var R=Array(O);for(var F=0;F<O;F++)R[F]=0;return R},x.prototype.mulp=function(O,R,F){var A=2*this.guessLen13b(O.length,R.length),T=this.makeRBT(A),V=this.stub(A),w=Array(A),k=Array(A),S=Array(A),y=Array(A),u=Array(A),c=Array(A),o=F.words;o.length=A,this.convert13b(O.words,O.length,w,A),this.convert13b(R.words,R.length,y,A),this.transform(w,V,k,S,A,T),this.transform(y,V,u,c,A,T);for(var z0=0;z0<A;z0++){var e=k[z0]*u[z0]-S[z0]*c[z0];S[z0]=k[z0]*c[z0]+S[z0]*u[z0],k[z0]=e}return this.conjugate(k,S,A),this.transform(k,S,o,V,A,T),this.conjugate(o,V,A),this.normalize13b(o,A),F.negative=O.negative^R.negative,F.length=O.length+R.length,F._strip()},J.prototype.mul=function(O){var R=new J(null);return R.words=Array(this.length+O.length),this.mulTo(O,R)},J.prototype.mulf=function(O){var R=new J(null);return R.words=Array(this.length+O.length),f(this,O,R)},J.prototype.imul=function(O){return this.clone().mulTo(O,this)},J.prototype.imuln=function(O){var R=O<0;if(R)O=-O;Y(typeof O==="number"),Y(O<67108864);var F=0;for(var A=0;A<this.length;A++){var T=(this.words[A]|0)*O,V=(T&67108863)+(F&67108863);F>>=26,F+=T/67108864|0,F+=V>>>26,this.words[A]=V&67108863}if(F!==0)this.words[A]=F,this.length++;return this.length=O===0?1:this.length,R?this.ineg():this},J.prototype.muln=function(O){return this.clone().imuln(O)},J.prototype.sqr=function(){return this.mul(this)},J.prototype.isqr=function(){return this.imul(this.clone())},J.prototype.pow=function(O){var R=B(O);if(R.length===0)return new J(1);var F=this;for(var A=0;A<R.length;A++,F=F.sqr())if(R[A]!==0)break;if(++A<R.length)for(var T=F.sqr();A<R.length;A++,T=T.sqr()){if(R[A]===0)continue;F=F.mul(T)}return F},J.prototype.iushln=function(O){Y(typeof O==="number"&&O>=0);var R=O%26,F=(O-R)/26,A=67108863>>>26-R<<26-R,T;if(R!==0){var V=0;for(T=0;T<this.length;T++){var w=this.words[T]&A,k=(this.words[T]|0)-w<<R;this.words[T]=k|V,V=w>>>26-R}if(V)this.words[T]=V,this.length++}if(F!==0){for(T=this.length-1;T>=0;T--)this.words[T+F]=this.words[T];for(T=0;T<F;T++)this.words[T]=0;this.length+=F}return this._strip()},J.prototype.ishln=function(O){return Y(this.negative===0),this.iushln(O)},J.prototype.iushrn=function(O,R,F){Y(typeof O==="number"&&O>=0);var A;if(R)A=(R-R%26)/26;else A=0;var T=O%26,V=Math.min((O-T)/26,this.length),w=67108863^67108863>>>T<<T,k=F;if(A-=V,A=Math.max(0,A),k){for(var S=0;S<V;S++)k.words[S]=this.words[S];k.length=V}if(V===0);else if(this.length>V){this.length-=V;for(S=0;S<this.length;S++)this.words[S]=this.words[S+V]}else this.words[0]=0,this.length=1;var y=0;for(S=this.length-1;S>=0&&(y!==0||S>=A);S--){var u=this.words[S]|0;this.words[S]=y<<26-T|u>>>T,y=u&w}if(k&&y!==0)k.words[k.length++]=y;if(this.length===0)this.words[0]=0,this.length=1;return this._strip()},J.prototype.ishrn=function(O,R,F){return Y(this.negative===0),this.iushrn(O,R,F)},J.prototype.shln=function(O){return this.clone().ishln(O)},J.prototype.ushln=function(O){return this.clone().iushln(O)},J.prototype.shrn=function(O){return this.clone().ishrn(O)},J.prototype.ushrn=function(O){return this.clone().iushrn(O)},J.prototype.testn=function(O){Y(typeof O==="number"&&O>=0);var R=O%26,F=(O-R)/26,A=1<<R;if(this.length<=F)return!1;var T=this.words[F];return!!(T&A)},J.prototype.imaskn=function(O){Y(typeof O==="number"&&O>=0);var R=O%26,F=(O-R)/26;if(Y(this.negative===0,"imaskn works only with positive numbers"),this.length<=F)return this;if(R!==0)F++;if(this.length=Math.min(F,this.length),R!==0){var A=67108863^67108863>>>R<<R;this.words[this.length-1]&=A}return this._strip()},J.prototype.maskn=function(O){return this.clone().imaskn(O)},J.prototype.iaddn=function(O){if(Y(typeof O==="number"),Y(O<67108864),O<0)return this.isubn(-O);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<=O)return this.words[0]=O-(this.words[0]|0),this.negative=0,this;return this.negative=0,this.isubn(O),this.negative=1,this}return this._iaddn(O)},J.prototype._iaddn=function(O){this.words[0]+=O;for(var R=0;R<this.length&&this.words[R]>=67108864;R++)if(this.words[R]-=67108864,R===this.length-1)this.words[R+1]=1;else this.words[R+1]++;return this.length=Math.max(this.length,R+1),this},J.prototype.isubn=function(O){if(Y(typeof O==="number"),Y(O<67108864),O<0)return this.iaddn(-O);if(this.negative!==0)return this.negative=0,this.iaddn(O),this.negative=1,this;if(this.words[0]-=O,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var R=0;R<this.length&&this.words[R]<0;R++)this.words[R]+=67108864,this.words[R+1]-=1;return this._strip()},J.prototype.addn=function(O){return this.clone().iaddn(O)},J.prototype.subn=function(O){return this.clone().isubn(O)},J.prototype.iabs=function(){return this.negative=0,this},J.prototype.abs=function(){return this.clone().iabs()},J.prototype._ishlnsubmul=function(O,R,F){var A=O.length+F,T;this._expand(A);var V,w=0;for(T=0;T<O.length;T++){V=(this.words[T+F]|0)+w;var k=(O.words[T]|0)*R;V-=k&67108863,w=(V>>26)-(k/67108864|0),this.words[T+F]=V&67108863}for(;T<this.length-F;T++)V=(this.words[T+F]|0)+w,w=V>>26,this.words[T+F]=V&67108863;if(w===0)return this._strip();Y(w===-1),w=0;for(T=0;T<this.length;T++)V=-(this.words[T]|0)+w,w=V>>26,this.words[T]=V&67108863;return this.negative=1,this._strip()},J.prototype._wordDiv=function(O,R){var F=this.length-O.length,A=this.clone(),T=O,V=T.words[T.length-1]|0,w=this._countBits(V);if(F=26-w,F!==0)T=T.ushln(F),A.iushln(F),V=T.words[T.length-1]|0;var k=A.length-T.length,S;if(R!=="mod"){S=new J(null),S.length=k+1,S.words=Array(S.length);for(var y=0;y<S.length;y++)S.words[y]=0}var u=A.clone()._ishlnsubmul(T,1,k);if(u.negative===0){if(A=u,S)S.words[k]=1}for(var c=k-1;c>=0;c--){var o=(A.words[T.length+c]|0)*67108864+(A.words[T.length+c-1]|0);o=Math.min(o/V|0,67108863),A._ishlnsubmul(T,o,c);while(A.negative!==0)if(o--,A.negative=0,A._ishlnsubmul(T,1,c),!A.isZero())A.negative^=1;if(S)S.words[c]=o}if(S)S._strip();if(A._strip(),R!=="div"&&F!==0)A.iushrn(F);return{div:S||null,mod:A}},J.prototype.divmod=function(O,R,F){if(Y(!O.isZero()),this.isZero())return{div:new J(0),mod:new J(0)};var A,T,V;if(this.negative!==0&&O.negative===0){if(V=this.neg().divmod(O,R),R!=="mod")A=V.div.neg();if(R!=="div"){if(T=V.mod.neg(),F&&T.negative!==0)T.iadd(O)}return{div:A,mod:T}}if(this.negative===0&&O.negative!==0){if(V=this.divmod(O.neg(),R),R!=="mod")A=V.div.neg();return{div:A,mod:V.mod}}if((this.negative&O.negative)!==0){if(V=this.neg().divmod(O.neg(),R),R!=="div"){if(T=V.mod.neg(),F&&T.negative!==0)T.isub(O)}return{div:V.div,mod:T}}if(O.length>this.length||this.cmp(O)<0)return{div:new J(0),mod:this};if(O.length===1){if(R==="div")return{div:this.divn(O.words[0]),mod:null};if(R==="mod")return{div:null,mod:new J(this.modrn(O.words[0]))};return{div:this.divn(O.words[0]),mod:new J(this.modrn(O.words[0]))}}return this._wordDiv(O,R)},J.prototype.div=function(O){return this.divmod(O,"div",!1).div},J.prototype.mod=function(O){return this.divmod(O,"mod",!1).mod},J.prototype.umod=function(O){return this.divmod(O,"mod",!0).mod},J.prototype.divRound=function(O){var R=this.divmod(O);if(R.mod.isZero())return R.div;var F=R.div.negative!==0?R.mod.isub(O):R.mod,A=O.ushrn(1),T=O.andln(1),V=F.cmp(A);if(V<0||T===1&&V===0)return R.div;return R.div.negative!==0?R.div.isubn(1):R.div.iaddn(1)},J.prototype.modrn=function(O){var R=O<0;if(R)O=-O;Y(O<=67108863);var F=67108864%O,A=0;for(var T=this.length-1;T>=0;T--)A=(F*A+(this.words[T]|0))%O;return R?-A:A},J.prototype.modn=function(O){return this.modrn(O)},J.prototype.idivn=function(O){var R=O<0;if(R)O=-O;Y(O<=67108863);var F=0;for(var A=this.length-1;A>=0;A--){var T=(this.words[A]|0)+F*67108864;this.words[A]=T/O|0,F=T%O}return this._strip(),R?this.ineg():this},J.prototype.divn=function(O){return this.clone().idivn(O)},J.prototype.egcd=function(O){Y(O.negative===0),Y(!O.isZero());var R=this,F=O.clone();if(R.negative!==0)R=R.umod(O);else R=R.clone();var A=new J(1),T=new J(0),V=new J(0),w=new J(1),k=0;while(R.isEven()&&F.isEven())R.iushrn(1),F.iushrn(1),++k;var S=F.clone(),y=R.clone();while(!R.isZero()){for(var u=0,c=1;(R.words[0]&c)===0&&u<26;++u,c<<=1);if(u>0){R.iushrn(u);while(u-- >0){if(A.isOdd()||T.isOdd())A.iadd(S),T.isub(y);A.iushrn(1),T.iushrn(1)}}for(var o=0,z0=1;(F.words[0]&z0)===0&&o<26;++o,z0<<=1);if(o>0){F.iushrn(o);while(o-- >0){if(V.isOdd()||w.isOdd())V.iadd(S),w.isub(y);V.iushrn(1),w.iushrn(1)}}if(R.cmp(F)>=0)R.isub(F),A.isub(V),T.isub(w);else F.isub(R),V.isub(A),w.isub(T)}return{a:V,b:w,gcd:F.iushln(k)}},J.prototype._invmp=function(O){Y(O.negative===0),Y(!O.isZero());var R=this,F=O.clone();if(R.negative!==0)R=R.umod(O);else R=R.clone();var A=new J(1),T=new J(0),V=F.clone();while(R.cmpn(1)>0&&F.cmpn(1)>0){for(var w=0,k=1;(R.words[0]&k)===0&&w<26;++w,k<<=1);if(w>0){R.iushrn(w);while(w-- >0){if(A.isOdd())A.iadd(V);A.iushrn(1)}}for(var S=0,y=1;(F.words[0]&y)===0&&S<26;++S,y<<=1);if(S>0){F.iushrn(S);while(S-- >0){if(T.isOdd())T.iadd(V);T.iushrn(1)}}if(R.cmp(F)>=0)R.isub(F),A.isub(T);else F.isub(R),T.isub(A)}var u;if(R.cmpn(1)===0)u=A;else u=T;if(u.cmpn(0)<0)u.iadd(O);return u},J.prototype.gcd=function(O){if(this.isZero())return O.abs();if(O.isZero())return this.abs();var R=this.clone(),F=O.clone();R.negative=0,F.negative=0;for(var A=0;R.isEven()&&F.isEven();A++)R.iushrn(1),F.iushrn(1);do{while(R.isEven())R.iushrn(1);while(F.isEven())F.iushrn(1);var T=R.cmp(F);if(T<0){var V=R;R=F,F=V}else if(T===0||F.cmpn(1)===0)break;R.isub(F)}while(!0);return F.iushln(A)},J.prototype.invm=function(O){return this.egcd(O).a.umod(O)},J.prototype.isEven=function(){return(this.words[0]&1)===0},J.prototype.isOdd=function(){return(this.words[0]&1)===1},J.prototype.andln=function(O){return this.words[0]&O},J.prototype.bincn=function(O){Y(typeof O==="number");var R=O%26,F=(O-R)/26,A=1<<R;if(this.length<=F)return this._expand(F+1),this.words[F]|=A,this;var T=A;for(var V=F;T!==0&&V<this.length;V++){var w=this.words[V]|0;w+=T,T=w>>>26,w&=67108863,this.words[V]=w}if(T!==0)this.words[V]=T,this.length++;return this},J.prototype.isZero=function(){return this.length===1&&this.words[0]===0},J.prototype.cmpn=function(O){var R=O<0;if(this.negative!==0&&!R)return-1;if(this.negative===0&&R)return 1;this._strip();var F;if(this.length>1)F=1;else{if(R)O=-O;Y(O<=67108863,"Number is too big");var A=this.words[0]|0;F=A===O?0:A<O?-1:1}if(this.negative!==0)return-F|0;return F},J.prototype.cmp=function(O){if(this.negative!==0&&O.negative===0)return-1;if(this.negative===0&&O.negative!==0)return 1;var R=this.ucmp(O);if(this.negative!==0)return-R|0;return R},J.prototype.ucmp=function(O){if(this.length>O.length)return 1;if(this.length<O.length)return-1;var R=0;for(var F=this.length-1;F>=0;F--){var A=this.words[F]|0,T=O.words[F]|0;if(A===T)continue;if(A<T)R=-1;else if(A>T)R=1;break}return R},J.prototype.gtn=function(O){return this.cmpn(O)===1},J.prototype.gt=function(O){return this.cmp(O)===1},J.prototype.gten=function(O){return this.cmpn(O)>=0},J.prototype.gte=function(O){return this.cmp(O)>=0},J.prototype.ltn=function(O){return this.cmpn(O)===-1},J.prototype.lt=function(O){return this.cmp(O)===-1},J.prototype.lten=function(O){return this.cmpn(O)<=0},J.prototype.lte=function(O){return this.cmp(O)<=0},J.prototype.eqn=function(O){return this.cmpn(O)===0},J.prototype.eq=function(O){return this.cmp(O)===0},J.red=function(O){return new M(O)},J.prototype.toRed=function(O){return Y(!this.red,"Already a number in reduction context"),Y(this.negative===0,"red works only with positives"),O.convertTo(this)._forceRed(O)},J.prototype.fromRed=function(){return Y(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},J.prototype._forceRed=function(O){return this.red=O,this},J.prototype.forceRed=function(O){return Y(!this.red,"Already a number in reduction context"),this._forceRed(O)},J.prototype.redAdd=function(O){return Y(this.red,"redAdd works only with red numbers"),this.red.add(this,O)},J.prototype.redIAdd=function(O){return Y(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,O)},J.prototype.redSub=function(O){return Y(this.red,"redSub works only with red numbers"),this.red.sub(this,O)},J.prototype.redISub=function(O){return Y(this.red,"redISub works only with red numbers"),this.red.isub(this,O)},J.prototype.redShl=function(O){return Y(this.red,"redShl works only with red numbers"),this.red.shl(this,O)},J.prototype.redMul=function(O){return Y(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.mul(this,O)},J.prototype.redIMul=function(O){return Y(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.imul(this,O)},J.prototype.redSqr=function(){return Y(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},J.prototype.redISqr=function(){return Y(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},J.prototype.redSqrt=function(){return Y(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},J.prototype.redInvm=function(){return Y(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},J.prototype.redNeg=function(){return Y(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},J.prototype.redPow=function(O){return Y(this.red&&!O.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,O)};var g={k256:null,p224:null,p192:null,p25519:null};function h(O,R){this.name=O,this.p=new J(R,16),this.n=this.p.bitLength(),this.k=new J(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}h.prototype._tmp=function(){var O=new J(null);return O.words=Array(Math.ceil(this.n/13)),O},h.prototype.ireduce=function(O){var R=O,F;do this.split(R,this.tmp),R=this.imulK(R),R=R.iadd(this.tmp),F=R.bitLength();while(F>this.n);var A=F<this.n?-1:R.ucmp(this.p);if(A===0)R.words[0]=0,R.length=1;else if(A>0)R.isub(this.p);else if(R.strip!==void 0)R.strip();else R._strip();return R},h.prototype.split=function(O,R){O.iushrn(this.n,0,R)},h.prototype.imulK=function(O){return O.imul(this.k)};function v(){h.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}z(v,h),v.prototype.split=function(O,R){var F=4194303,A=Math.min(O.length,9);for(var T=0;T<A;T++)R.words[T]=O.words[T];if(R.length=A,O.length<=9){O.words[0]=0,O.length=1;return}var V=O.words[9];R.words[R.length++]=V&F;for(T=10;T<O.length;T++){var w=O.words[T]|0;O.words[T-10]=(w&F)<<4|V>>>22,V=w}if(V>>>=22,O.words[T-10]=V,V===0&&O.length>10)O.length-=10;else O.length-=9},v.prototype.imulK=function(O){O.words[O.length]=0,O.words[O.length+1]=0,O.length+=2;var R=0;for(var F=0;F<O.length;F++){var A=O.words[F]|0;R+=A*977,O.words[F]=R&67108863,R=A*64+(R/67108864|0)}if(O.words[O.length-1]===0){if(O.length--,O.words[O.length-1]===0)O.length--}return O};function b(){h.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}z(b,h);function m(){h.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}z(m,h);function K(){h.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}z(K,h),K.prototype.imulK=function(O){var R=0;for(var F=0;F<O.length;F++){var A=(O.words[F]|0)*19+R,T=A&67108863;A>>>=26,O.words[F]=T,R=A}if(R!==0)O.words[O.length++]=R;return O},J._prime=function(O){if(g[O])return g[O];var R;if(O==="k256")R=new v;else if(O==="p224")R=new b;else if(O==="p192")R=new m;else if(O==="p25519")R=new K;else throw Error("Unknown prime "+O);return g[O]=R,R};function M(O){if(typeof O==="string"){var R=J._prime(O);this.m=R.p,this.prime=R}else Y(O.gtn(1),"modulus must be greater than 1"),this.m=O,this.prime=null}M.prototype._verify1=function(O){Y(O.negative===0,"red works only with positives"),Y(O.red,"red works only with red numbers")},M.prototype._verify2=function(O,R){Y((O.negative|R.negative)===0,"red works only with positives"),Y(O.red&&O.red===R.red,"red works only with red numbers")},M.prototype.imod=function(O){if(this.prime)return this.prime.ireduce(O)._forceRed(this);return D(O,O.umod(this.m)._forceRed(this)),O},M.prototype.neg=function(O){if(O.isZero())return O.clone();return this.m.sub(O)._forceRed(this)},M.prototype.add=function(O,R){this._verify2(O,R);var F=O.add(R);if(F.cmp(this.m)>=0)F.isub(this.m);return F._forceRed(this)},M.prototype.iadd=function(O,R){this._verify2(O,R);var F=O.iadd(R);if(F.cmp(this.m)>=0)F.isub(this.m);return F},M.prototype.sub=function(O,R){this._verify2(O,R);var F=O.sub(R);if(F.cmpn(0)<0)F.iadd(this.m);return F._forceRed(this)},M.prototype.isub=function(O,R){this._verify2(O,R);var F=O.isub(R);if(F.cmpn(0)<0)F.iadd(this.m);return F},M.prototype.shl=function(O,R){return this._verify1(O),this.imod(O.ushln(R))},M.prototype.imul=function(O,R){return this._verify2(O,R),this.imod(O.imul(R))},M.prototype.mul=function(O,R){return this._verify2(O,R),this.imod(O.mul(R))},M.prototype.isqr=function(O){return this.imul(O,O.clone())},M.prototype.sqr=function(O){return this.mul(O,O)},M.prototype.sqrt=function(O){if(O.isZero())return O.clone();var R=this.m.andln(3);if(Y(R%2===1),R===3){var F=this.m.add(new J(1)).iushrn(2);return this.pow(O,F)}var A=this.m.subn(1),T=0;while(!A.isZero()&&A.andln(1)===0)T++,A.iushrn(1);Y(!A.isZero());var V=new J(1).toRed(this),w=V.redNeg(),k=this.m.subn(1).iushrn(1),S=this.m.bitLength();S=new J(2*S*S).toRed(this);while(this.pow(S,k).cmp(w)!==0)S.redIAdd(w);var y=this.pow(S,A),u=this.pow(O,A.addn(1).iushrn(1)),c=this.pow(O,A),o=T;while(c.cmp(V)!==0){var z0=c;for(var e=0;z0.cmp(V)!==0;e++)z0=z0.redSqr();Y(e<o);var s=this.pow(y,new J(1).iushln(o-e-1));u=u.redMul(s),y=s.redSqr(),c=c.redMul(y),o=e}return u},M.prototype.invm=function(O){var R=O._invmp(this.m);if(R.negative!==0)return R.negative=0,this.imod(R).redNeg();else return this.imod(R)},M.prototype.pow=function(O,R){if(R.isZero())return new J(1).toRed(this);if(R.cmpn(1)===0)return O.clone();var F=4,A=Array(1<<F);A[0]=new J(1).toRed(this),A[1]=O;for(var T=2;T<A.length;T++)A[T]=this.mul(A[T-1],O);var V=A[0],w=0,k=0,S=R.bitLength()%26;if(S===0)S=26;for(T=R.length-1;T>=0;T--){var y=R.words[T];for(var u=S-1;u>=0;u--){var c=y>>u&1;if(V!==A[0])V=this.sqr(V);if(c===0&&w===0){k=0;continue}if(w<<=1,w|=c,k++,k!==F&&(T!==0||u!==0))continue;V=this.mul(V,A[w]),k=0,w=0}S=26}return V},M.prototype.convertTo=function(O){var R=O.umod(this.m);return R===O?R.clone():R},M.prototype.convertFrom=function(O){var R=O.clone();return R.red=null,R},J.mont=function(O){return new j(O)};function j(O){if(M.call(this,O),this.shift=this.m.bitLength(),this.shift%26!==0)this.shift+=26-this.shift%26;this.r=new J(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}z(j,M),j.prototype.convertTo=function(O){return this.imod(O.ushln(this.shift))},j.prototype.convertFrom=function(O){var R=this.imod(O.mul(this.rinv));return R.red=null,R},j.prototype.imul=function(O,R){if(O.isZero()||R.isZero())return O.words[0]=0,O.length=1,O;var F=O.imul(R),A=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=F.isub(A).iushrn(this.shift),V=T;if(T.cmp(this.m)>=0)V=T.isub(this.m);else if(T.cmpn(0)<0)V=T.iadd(this.m);return V._forceRed(this)},j.prototype.mul=function(O,R){if(O.isZero()||R.isZero())return new J(0)._forceRed(this);var F=O.mul(R),A=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=F.isub(A).iushrn(this.shift),V=T;if(T.cmp(this.m)>=0)V=T.isub(this.m);else if(T.cmpn(0)<0)V=T.iadd(this.m);return V._forceRed(this)},j.prototype.invm=function(O){var R=this.imod(O._invmp(this.m).mul(this.r2));return R._forceRed(this)}})(typeof Q>"u"||Q,$)}),ud=A0(($,Q)=>{var Z=ZU0(),X=_j(),Y=L2().Buffer;function z(W){var G=W.modulus.byteLength(),U;do U=new Z(X(G));while(U.cmp(W.modulus)>=0||!U.umod(W.prime1)||!U.umod(W.prime2));return U}function J(W){var G=z(W),U=G.toRed(Z.mont(W.modulus)).redPow(new Z(W.publicExponent)).fromRed();return{blinder:U,unblinder:G.invm(W.modulus)}}function q(W,G){var U=J(G),D=G.modulus.byteLength(),P=new Z(W).mul(U.blinder).umod(G.modulus),H=P.toRed(Z.mont(G.prime1)),N=P.toRed(Z.mont(G.prime2)),C=G.coefficient,L=G.prime1,B=G.prime2,E=H.redPow(G.exponent1).fromRed(),I=N.redPow(G.exponent2).fromRed(),_=E.isub(I).imul(C).umod(L).imul(B);return I.iadd(_).imul(U.unblinder).umod(G.modulus).toArrayLike(Y,"be",D)}q.getr=z,Q.exports=q}),XU0=A0(($,Q)=>{var Z=gd(),X=_j(),Y=Sj(),z=hd(),J=md(),q=bB(),W=pd(),G=ud(),U=L2().Buffer;Q.exports=function(N,C,L){var B;if(N.padding)B=N.padding;else if(L)B=1;else B=4;var E=Z(N),I;if(B===4)I=D(E,C);else if(B===1)I=P(E,C,L);else if(B===3){if(I=new q(C),I.cmp(E.modulus)>=0)throw Error("data too long for modulus")}else throw Error("unknown padding");if(L)return G(I,E);else return W(I,E)};function D(N,C){var L=N.modulus.byteLength(),B=C.length,E=Y("sha1").update(U.alloc(0)).digest(),I=E.length,_=2*I;if(B>L-_-2)throw Error("message too long");var f=U.alloc(L-B-_-2),x=L-I-1,g=X(I),h=J(U.concat([E,f,U.alloc(1,1),C],x),z(g,x)),v=J(g,z(h,I));return new q(U.concat([U.alloc(1),v,h],L))}function P(N,C,L){var B=C.length,E=N.modulus.byteLength();if(B>E-11)throw Error("message too long");var I;if(L)I=U.alloc(E-B-3,255);else I=H(E-B-3);return new q(U.concat([U.from([0,L?1:2]),I,U.alloc(1),C],E))}function H(N){var C=U.allocUnsafe(N),L=0,B=X(N*2),E=0,I;while(L<N){if(E===B.length)B=X(N*2),E=0;if(I=B[E++],I)C[L++]=I}return C}}),YU0=A0(($,Q)=>{var Z=gd(),X=hd(),Y=md(),z=bB(),J=ud(),q=Sj(),W=pd(),G=L2().Buffer;Q.exports=function(H,N,C){var L;if(H.padding)L=H.padding;else if(C)L=1;else L=4;var B=Z(H),E=B.modulus.byteLength();if(N.length>E||new z(N).cmp(B.modulus)>=0)throw Error("decryption error");var I;if(C)I=W(new z(N),B);else I=J(N,B);var _=G.alloc(E-I.length);if(I=G.concat([_,I],E),L===4)return U(B,I);else if(L===1)return D(B,I,C);else if(L===3)return I;else throw Error("unknown padding")};function U(H,N){var C=H.modulus.byteLength(),L=q("sha1").update(G.alloc(0)).digest(),B=L.length;if(N[0]!==0)throw Error("decryption error");var E=N.slice(1,B+1),I=N.slice(B+1),_=Y(E,X(I,B)),f=Y(I,X(_,C-B-1));if(P(L,f.slice(0,B)))throw Error("decryption error");var x=B;while(f[x]===0)x++;if(f[x++]!==1)throw Error("decryption error");return f.slice(x)}function D(H,N,C){var L=N.slice(0,2),B=2,E=0;while(N[B++]!==0)if(B>=N.length){E++;break}var I=N.slice(2,B-1);if(L.toString("hex")!=="0002"&&!C||L.toString("hex")!=="0001"&&C)E++;if(I.length<8)E++;if(E)throw Error("decryption error");return N.slice(B)}function P(H,N){H=G.from(H),N=G.from(N);var C=0,L=H.length;if(H.length!==N.length)C++,L=Math.min(H.length,N.length);var B=-1;while(++B<L)C+=H[B]^N[B];return C}}),wB=A0(($)=>{$.publicEncrypt=XU0(),$.privateDecrypt=YU0(),$.privateEncrypt=function(Q,Z){return $.publicEncrypt(Q,Z,!0)},$.publicDecrypt=function(Q,Z){return $.privateDecrypt(Q,Z,!0)}}),JU0=A0(($)=>{var Q=(E9(),Q5(O9));if(typeof Q.publicEncrypt!=="function")Q=wB();if($.publicEncrypt=Q.publicEncrypt,$.privateDecrypt=Q.privateDecrypt,typeof Q.privateEncrypt!=="function")$.privateEncrypt=wB().privateEncrypt;else $.privateEncrypt=Q.privateEncrypt;if(typeof Q.publicDecrypt!=="function")$.publicDecrypt=wB().publicDecrypt;else $.publicDecrypt=Q.publicDecrypt}),zU0=A0(($)=>{var Q=L2(),Z=_j(),X=Q.Buffer,Y=Q.kMaxLength,z=globalThis.crypto||globalThis.msCrypto,J=Math.pow(2,32)-1;function q(P,H){if(typeof P!=="number"||P!==P)throw TypeError("offset must be a number");if(P>J||P<0)throw TypeError("offset must be a uint32");if(P>Y||P>H)throw RangeError("offset out of range")}function W(P,H,N){if(typeof P!=="number"||P!==P)throw TypeError("size must be a number");if(P>J||P<0)throw TypeError("size must be a uint32");if(P+H>N||P>Y)throw RangeError("buffer too small")}z&&z.getRandomValues,$.randomFill=G,$.randomFillSync=D;function G(P,H,N,C){if(!X.isBuffer(P)&&!(P instanceof globalThis.Uint8Array))throw TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof H==="function")C=H,H=0,N=P.length;else if(typeof N==="function")C=N,N=P.length-H;else if(typeof C!=="function")throw TypeError('"cb" argument must be a function');return q(H,P.length),W(N,H,P.length),U(P,H,N,C)}function U(P,H,N,C){if(!1)var L,B;if(C){Z(N,function(I,_){if(I)return C(I);_.copy(P,H),C(null,P)});return}var E=Z(N);return E.copy(P,H),P}function D(P,H,N){if(typeof H>"u")H=0;if(!X.isBuffer(P)&&!(P instanceof globalThis.Uint8Array))throw TypeError('"buf" argument must be a Buffer or Uint8Array');if(q(H,P.length),N===void 0)N=P.length-H;return W(N,H,P.length),U(P,H,N)}}),qU0=A0(($,Q)=>{var Z=(E9(),Q5(O9));if(typeof Z.randomFill==="function"&&typeof Z.randomFillSync==="function")$.randomFill=Z.randomFill,$.randomFillSync=Z.randomFillSync;else Q.exports=zU0()}),WU0=A0(($)=>{$.randomBytes=$.rng=$.pseudoRandomBytes=$.prng=_j(),$.createHash=$.Hash=Sj(),$.createHmac=$.Hmac=Pd();var Q=fK0(),Z=Object.keys(Q),X=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(Z);$.getHashes=function(){return X};var Y=Bd();$.pbkdf2=Y.pbkdf2,$.pbkdf2Sync=Y.pbkdf2Sync;var z=DG0();$.Cipher=z.Cipher,$.createCipher=z.createCipher,$.Cipheriv=z.Cipheriv,$.createCipheriv=z.createCipheriv,$.Decipher=z.Decipher,$.createDecipher=z.createDecipher,$.Decipheriv=z.Decipheriv,$.createDecipheriv=z.createDecipheriv,$.getCiphers=z.getCiphers,$.listCiphers=z.listCiphers;var J=MG0();$.DiffieHellmanGroup=J.DiffieHellmanGroup,$.createDiffieHellmanGroup=J.createDiffieHellmanGroup,$.getDiffieHellman=J.getDiffieHellman,$.createDiffieHellman=J.createDiffieHellman,$.DiffieHellman=J.DiffieHellman;var q=PG0();$.createSign=q.createSign,$.Sign=q.Sign,$.createVerify=q.createVerify,$.Verify=q.Verify,$.createECDH=hG0();var W=JU0();$.publicEncrypt=W.publicEncrypt,$.privateEncrypt=W.privateEncrypt,$.publicDecrypt=W.publicDecrypt,$.privateDecrypt=W.privateDecrypt;var G=qU0();$.randomFill=G.randomFill,$.randomFillSync=G.randomFillSync,$.createCredentials=function(){throw Error(`sorry, createCredentials is not implemented yet
we accept pull requests
https://github.com/browserify/crypto-browserify`)},$.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}}),O5=SK0(WU0(),1),KU0=O5.prng,GU0=O5.pseudoRandomBytes,UU0=O5.rng,VU0=O5.randomBytes,OU0=O5.Hash,DU0=O5.createHash,MU0=O5.Hmac,PU0=O5.createHmac,HU0=O5.getHashes,jU0=O5.pbkdf2,RU0=O5.pbkdf2Sync,NU0=O5.Cipher,CU0=O5.createCipher,LU0=O5.Cipheriv,TU0=O5.createCipheriv,FU0=O5.Decipher,AU0=O5.createDecipher,wU0=O5.Decipheriv,BU0=O5.createDecipheriv,EU0=O5.getCiphers,IU0=O5.listCiphers,_U0=O5.DiffieHellmanGroup,SU0=O5.createDiffieHellmanGroup,fU0=O5.getDiffieHellman,kU0=O5.createDiffieHellman,xU0=O5.DiffieHellman,bU0=O5.createSign,vU0=O5.Sign,yU0=O5.createVerify,gU0=O5.Verify,hU0=O5.createECDH,mU0=O5.publicEncrypt,pU0=O5.privateEncrypt,uU0=O5.publicDecrypt,cU0=O5.privateDecrypt,dU0=O5.randomFill,lU0=O5.randomFillSync,iU0=O5.createCredentials,oU0=O5.constants,sU0=["p192","p224","p256","p384","p521","curve25519","ed25519","secp256k1","secp224r1","prime256v1","prime192v1","ed25519","secp384r1","secp521r1"];eU0=crypto,$V0=crypto});function od($){let{a:Q,b:Z}=P8,X=q1($*$),Y=q1(X*$);return q1(Y+Q*$+Z)}function nd($){if(!($ instanceof W6))throw TypeError("JacobianPoint expected")}class W6{constructor($,Q,Z){this.x=$,this.y=Q,this.z=Z}static fromAffine($){if(!($ instanceof y6))throw TypeError("JacobianPoint#fromAffine: expected Point");if($.equals(y6.ZERO))return W6.ZERO;return new W6($.x,$.y,p6)}static toAffineBatch($){let Q=zV0($.map((Z)=>Z.z));return $.map((Z,X)=>Z.toAffine(Q[X]))}static normalizeZ($){return W6.toAffineBatch($).map(W6.fromAffine)}equals($){nd($);let{x:Q,y:Z,z:X}=this,{x:Y,y:z,z:J}=$,q=q1(X*X),W=q1(J*J),G=q1(Q*W),U=q1(Y*q),D=q1(q1(Z*J)*W),P=q1(q1(z*X)*q);return G===U&&D===P}negate(){return new W6(this.x,q1(-this.y),this.z)}double(){let{x:$,y:Q,z:Z}=this,X=q1($*$),Y=q1(Q*Q),z=q1(Y*Y),J=$+Y,q=q1(rX*(q1(J*J)-X-z)),W=q1(iV*X),G=q1(W*W),U=q1(G-rX*q),D=q1(W*(q-U)-cd*z),P=q1(rX*Q*Z);return new W6(U,D,P)}add($){nd($);let{x:Q,y:Z,z:X}=this,{x:Y,y:z,z:J}=$;if(Y===u5||z===u5)return this;if(Q===u5||Z===u5)return $;let q=q1(X*X),W=q1(J*J),G=q1(Q*W),U=q1(Y*q),D=q1(q1(Z*J)*W),P=q1(q1(z*X)*q),H=q1(U-G),N=q1(P-D);if(H===u5)if(N===u5)return this.double();else return W6.ZERO;let C=q1(H*H),L=q1(H*C),B=q1(G*C),E=q1(N*N-L-rX*B),I=q1(N*(B-E)-D*L),_=q1(X*J*H);return new W6(E,I,_)}subtract($){return this.add($.negate())}multiplyUnsafe($){let Q=W6.ZERO;if(typeof $==="bigint"&&$===u5)return Q;let Z=sd($);if(Z===p6)return this;if(!bj){let U=Q,D=this;while(Z>u5){if(Z&p6)U=U.add(D);D=D.double(),Z>>=p6}return U}let{k1neg:X,k1:Y,k2neg:z,k2:J}=xj.splitScalar(Z),q=Q,W=Q,G=this;while(Y>u5||J>u5){if(Y&p6)q=q.add(G);if(J&p6)W=W.add(G);G=G.double(),Y>>=p6,J>>=p6}if(X)q=q.negate();if(z)W=W.negate();return W=new W6(q1(W.x*xj.beta),W.y,W.z),q.add(W)}precomputeWindow($){let Q=bj?128/$+1:256/$+1,Z=[],X=this,Y=X;for(let z=0;z<Q;z++){Y=X,Z.push(Y);for(let J=1;J<2**($-1);J++)Y=Y.add(X),Z.push(Y);X=Y.double()}return Z}wNAF($,Q){if(!Q&&this.equals(W6.BASE))Q=y6.BASE;let Z=Q&&Q._WINDOW_SIZE||1;if(256%Z)throw Error("Point#wNAF: Invalid precomputation window, must be power of 2");let X=Q&&yB.get(Q);if(!X){if(X=this.precomputeWindow(Z),Q&&Z!==1)X=W6.normalizeZ(X),yB.set(Q,X)}let{ZERO:Y,BASE:z}=W6,J=1+(bj?128/Z:256/Z),q=2**(Z-1),W=BigInt(2**Z-1),G=2**Z,U=BigInt(Z);for(let D=0;D<J;D++){let P=D*q,H=Number($&W);if($>>=U,H>q)H-=G,$+=p6;let N=P,C=P+Math.abs(H)-1,L=D%2!==0,B=H<0;if(H===0)z=z.add(vj(L,X[N]));else Y=Y.add(vj(B,X[C]))}return{p:Y,f:z}}multiply($,Q){let Z=sd($),X,Y;if(bj){let{k1neg:z,k1:J,k2neg:q,k2:W}=xj.splitScalar(Z),{p:G,f:U}=this.wNAF(J,Q),{p:D,f:P}=this.wNAF(W,Q);G=vj(z,G),D=vj(q,D),D=new W6(q1(D.x*xj.beta),D.y,D.z),X=G.add(D),Y=U.add(P)}else{let{p:z,f:J}=this.wNAF(Z,Q);X=z,Y=J}return W6.normalizeZ([X,Y])[0]}toAffine($){let{x:Q,y:Z,z:X}=this,Y=this.equals(W6.ZERO);if($==null)$=Y?cd:vK(X);let z=$,J=q1(z*z),q=q1(J*z),W=q1(Q*J),G=q1(Z*q),U=q1(X*z);if(Y)return y6.ZERO;if(U!==p6)throw Error("invZ was invalid");return new y6(W,G)}}function vj($,Q){let Z=Q.negate();return $?Z:Q}class y6{constructor($,Q){this.x=$,this.y=Q}_setWindowSize($){this._WINDOW_SIZE=$,yB.delete(this)}hasEvenY(){return this.y%rX===u5}static fromCompressedHex($){let Q=$.length===32,Z=sX(Q?$:$.subarray(1));if(!vB(Z))throw Error("Point is not on curve");let X=od(Z),Y=JV0(X),z=(Y&p6)===p6;if(Q){if(z)Y=q1(-Y)}else if(($[0]&1)===1!==z)Y=q1(-Y);let J=new y6(Z,Y);return J.assertValidity(),J}static fromUncompressedHex($){let Q=sX($.subarray(1,j3+1)),Z=sX($.subarray(j3+1,j3*2+1)),X=new y6(Q,Z);return X.assertValidity(),X}static fromHex($){let Q=bK($),Z=Q.length,X=Q[0];if(Z===j3)return this.fromCompressedHex(Q);if(Z===ld&&(X===2||X===3))return this.fromCompressedHex(Q);if(Z===id&&X===4)return this.fromUncompressedHex(Q);throw Error(`Point.fromHex: received invalid point. Expected 32-${ld} compressed bytes or ${id} uncompressed bytes, not ${Z}`)}static fromPrivateKey($){return y6.BASE.multiply(hj($))}static fromSignature($,Q,Z){let{r:X,s:Y}=ed(Q);if(![0,1,2,3].includes(Z))throw Error("Cannot recover: invalid recovery bit");let z=mB(bK($)),{n:J}=P8,q=Z===2||Z===3?X+J:X,W=vK(q,J),G=q1(-z*W,J),U=q1(Y*W,J),D=Z&1?"03":"02",P=y6.fromHex(D+SK(q)),H=y6.BASE.multiplyAndAddUnsafe(P,G,U);if(!H)throw Error("Cannot recover signature: point at infinify");return H.assertValidity(),H}toRawBytes($=!1){return Iz(this.toHex($))}toHex($=!1){let Q=SK(this.x);if($)return`${this.hasEvenY()?"02":"03"}${Q}`;else return`04${Q}${SK(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let{x:Q,y:Z}=this;if(!vB(Q)||!vB(Z))throw Error("Point is not on elliptic curve");let X=q1(Z*Z),Y=od(Q);if(q1(X-Y)!==u5)throw Error("Point is not on elliptic curve")}equals($){return this.x===$.x&&this.y===$.y}negate(){return new y6(this.x,q1(-this.y))}double(){return W6.fromAffine(this).double().toAffine()}add($){return W6.fromAffine(this).add(W6.fromAffine($)).toAffine()}subtract($){return this.add($.negate())}multiply($){return W6.fromAffine(this).multiply($,this).toAffine()}multiplyAndAddUnsafe($,Q,Z){let X=W6.fromAffine(this),Y=Q===u5||Q===p6||this!==y6.BASE?X.multiplyUnsafe(Q):X.multiply(Q),z=W6.fromAffine($).multiplyUnsafe(Z),J=Y.add(z);return J.equals(W6.ZERO)?void 0:J.toAffine()}}function rd($){return Number.parseInt($[0],16)>=8?"00"+$:$}function ad($){if($.length<2||$[0]!==2)throw Error(`Invalid signature integer tag: ${xK($)}`);let Q=$[1],Z=$.subarray(2,Q+2);if(!Q||Z.length!==Q)throw Error("Invalid signature integer: wrong length");if(Z[0]===0&&Z[1]<=127)throw Error("Invalid signature integer: trailing length");return{data:sX(Z),left:$.subarray(Q+2)}}function ZV0($){if($.length<2||$[0]!=48)throw Error(`Invalid signature tag: ${xK($)}`);if($[1]!==$.length-2)throw Error("Invalid signature: incorrect length");let{data:Q,left:Z}=ad($.subarray(2)),{data:X,left:Y}=ad(Z);if(Y.length)throw Error(`Invalid signature: left bytes after parsing: ${xK(Y)}`);return{r:Q,s:X}}class aX{constructor($,Q){this.r=$,this.s=Q,this.assertValidity()}static fromCompact($){let Q=$ instanceof Uint8Array,Z="Signature.fromCompact";if(typeof $!=="string"&&!Q)throw TypeError("Signature.fromCompact: Expected string or Uint8Array");let X=Q?xK($):$;if(X.length!==128)throw Error("Signature.fromCompact: Expected 64-byte hex");return new aX(gj(X.slice(0,64)),gj(X.slice(64,128)))}static fromDER($){let Q=$ instanceof Uint8Array;if(typeof $!=="string"&&!Q)throw TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:Z,s:X}=ZV0(Q?$:Iz($));return new aX(Z,X)}static fromHex($){return this.fromDER($)}assertValidity(){let{r:$,s:Q}=this;if(!nV($))throw Error("Invalid Signature: r must be 0 < r < n");if(!nV(Q))throw Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let $=P8.n>>p6;return this.s>$}normalizeS(){return this.hasHighS()?new aX(this.r,q1(-this.s,P8.n)):this}toDERRawBytes(){return Iz(this.toDERHex())}toDERHex(){let $=rd(lV(this.s)),Q=rd(lV(this.r)),Z=$.length/2,X=Q.length/2,Y=lV(Z),z=lV(X);return`30${lV(X+Z+4)}02${z}${Q}02${Y}${$}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Iz(this.toCompactHex())}toCompactHex(){return SK(this.r)+SK(this.s)}}function nX(...$){if(!$.every((X)=>X instanceof Uint8Array))throw Error("Uint8Array list expected");if($.length===1)return $[0];let Q=$.reduce((X,Y)=>X+Y.length,0),Z=new Uint8Array(Q);for(let X=0,Y=0;X<$.length;X++){let z=$[X];Z.set(z,Y),Y+=z.length}return Z}function xK($){if(!($ instanceof Uint8Array))throw Error("Expected Uint8Array");let Q="";for(let Z=0;Z<$.length;Z++)Q+=XV0[$[Z]];return Q}function SK($){if(typeof $!=="bigint")throw Error("Expected bigint");if(!(u5<=$&&$<YV0))throw Error("Expected number 0 <= n < 2^256");return $.toString(16).padStart(64,"0")}function gB($){let Q=Iz(SK($));if(Q.length!==32)throw Error("Error: expected 32 bytes");return Q}function lV($){let Q=$.toString(16);return Q.length&1?`0${Q}`:Q}function gj($){if(typeof $!=="string")throw TypeError("hexToNumber: expected string, got "+typeof $);return BigInt(`0x${$}`)}function Iz($){if(typeof $!=="string")throw TypeError("hexToBytes: expected string, got "+typeof $);if($.length%2)throw Error("hexToBytes: received invalid unpadded hex"+$.length);let Q=new Uint8Array($.length/2);for(let Z=0;Z<Q.length;Z++){let X=Z*2,Y=$.slice(X,X+2),z=Number.parseInt(Y,16);if(Number.isNaN(z)||z<0)throw Error("Invalid byte sequence");Q[Z]=z}return Q}function sX($){return gj(xK($))}function bK($){return $ instanceof Uint8Array?Uint8Array.from($):Iz($)}function sd($){if(typeof $==="number"&&Number.isSafeInteger($)&&$>0)return BigInt($);if(typeof $==="bigint"&&nV($))return $;throw TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function q1($,Q=P8.P){let Z=$%Q;return Z>=u5?Z:Q+Z}function S7($,Q){let{P:Z}=P8,X=$;while(Q-- >u5)X*=X,X%=Z;return X}function JV0($){let{P:Q}=P8,Z=BigInt(6),X=BigInt(11),Y=BigInt(22),z=BigInt(23),J=BigInt(44),q=BigInt(88),W=$*$*$%Q,G=W*W*$%Q,U=S7(G,iV)*G%Q,D=S7(U,iV)*G%Q,P=S7(D,rX)*W%Q,H=S7(P,X)*P%Q,N=S7(H,Y)*H%Q,C=S7(N,J)*N%Q,L=S7(C,q)*C%Q,B=S7(L,J)*N%Q,E=S7(B,iV)*G%Q,I=S7(E,z)*H%Q,_=S7(I,Z)*W%Q,f=S7(_,rX);if(f*f%Q!==$)throw Error("Cannot find square root");return f}function vK($,Q=P8.P){if($===u5||Q<=u5)throw Error(`invert: expected positive integers, got n=${$} mod=${Q}`);let Z=q1($,Q),X=Q,Y=u5,z=p6,J=p6,q=u5;while(Z!==u5){let G=X/Z,U=X%Z,D=Y-J*G,P=z-q*G;X=Z,Z=U,Y=J,z=q,J=D,q=P}if(X!==p6)throw Error("invert: does not exist");return q1(Y,Q)}function zV0($,Q=P8.P){let Z=Array($.length),X=$.reduce((z,J,q)=>{if(J===u5)return z;return Z[q]=z,q1(z*J,Q)},p6),Y=vK(X,Q);return $.reduceRight((z,J,q)=>{if(J===u5)return z;return Z[q]=q1(z*Z[q],Q),q1(z*J,Q)},Y),Z}function qV0($){let Q=$.length*8-kK*8,Z=sX($);return Q>0?Z>>BigInt(Q):Z}function mB($,Q=!1){let Z=qV0($);if(Q)return Z;let{n:X}=P8;return Z>=X?Z-X:Z}class td{constructor($,Q){if(this.hashLen=$,this.qByteLen=Q,typeof $!=="number"||$<2)throw Error("hashLen must be a number");if(typeof Q!=="number"||Q<2)throw Error("qByteLen must be a number");this.v=new Uint8Array($).fill(1),this.k=new Uint8Array($).fill(0),this.counter=0}hmac(...$){return R3.hmacSha256(this.k,...$)}hmacSync(...$){return oV(this.k,...$)}checkSync(){if(typeof oV!=="function")throw new hB("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1000)throw Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed($=new Uint8Array){if(this.k=await this.hmac(this.v,Uint8Array.from([0]),$),this.v=await this.hmac(this.v),$.length===0)return;this.k=await this.hmac(this.v,Uint8Array.from([1]),$),this.v=await this.hmac(this.v)}reseedSync($=new Uint8Array){if(this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),$),this.v=this.hmacSync(this.v),$.length===0)return;this.k=this.hmacSync(this.v,Uint8Array.from([1]),$),this.v=this.hmacSync(this.v)}async generate(){this.incr();let $=0,Q=[];while($<this.qByteLen){this.v=await this.hmac(this.v);let Z=this.v.slice();Q.push(Z),$+=this.v.length}return nX(...Q)}generateSync(){this.checkSync(),this.incr();let $=0,Q=[];while($<this.qByteLen){this.v=this.hmacSync(this.v);let Z=this.v.slice();Q.push(Z),$+=this.v.length}return nX(...Q)}}function nV($){return u5<$&&$<P8.n}function vB($){return u5<$&&$<P8.P}function WV0($,Q,Z,X=!0){let{n:Y}=P8,z=mB($,!0);if(!nV(z))return;let J=vK(z,Y),q=y6.BASE.multiply(z),W=q1(q.x,Y);if(W===u5)return;let G=q1(J*q1(Q+Z*W,Y),Y);if(G===u5)return;let U=new aX(W,G),D=(q.x===U.r?0:2)|Number(q.y&p6);if(X&&U.hasHighS())U=U.normalizeS(),D^=1;return{sig:U,recovery:D}}function hj($){let Q;if(typeof $==="bigint")Q=$;else if(typeof $==="number"&&Number.isSafeInteger($)&&$>0)Q=BigInt($);else if(typeof $==="string"){if($.length!==2*kK)throw Error("Expected 32 bytes of private key");Q=gj($)}else if($ instanceof Uint8Array){if($.length!==kK)throw Error("Expected 32 bytes of private key");Q=sX($)}else throw TypeError("Expected valid private key");if(!nV(Q))throw Error("Expected private key: 0 < key < n");return Q}function KV0($){if($ instanceof y6)return $.assertValidity(),$;else return y6.fromHex($)}function ed($){if($ instanceof aX)return $.assertValidity(),$;try{return aX.fromDER($)}catch(Q){return aX.fromCompact($)}}function yK($,Q=!1){return y6.fromPrivateKey($).toRawBytes(Q)}function $l($){let Q=$.length>j3?$.slice(0,j3):$;return sX(Q)}function GV0($){let Q=$l($),Z=q1(Q,P8.n);return Ql(Z<u5?Q:Z)}function Ql($){return gB($)}function UV0($,Q,Z){if($==null)throw Error(`sign: expected valid message hash, not "${$}"`);let X=bK($),Y=hj(Q),z=[Ql(Y),GV0(X)];if(Z!=null){if(Z===!0)Z=R3.randomBytes(j3);let W=bK(Z);if(W.length!==j3)throw Error(`sign: Expected ${j3} bytes of extra data`);z.push(W)}let J=nX(...z),q=$l(X);return{seed:J,m:q,d:Y}}function VV0($,Q){let{sig:Z,recovery:X}=$,{der:Y,recovered:z}=Object.assign({canonical:!0,der:!0},Q),J=Y?Z.toDERRawBytes():Z.toCompactRawBytes();return z?[J,X]:J}function Zl($,Q,Z={}){let{seed:X,m:Y,d:z}=UV0($,Q,Z.extraEntropy),J=new td(QV0,kK);J.reseedSync(X);let q;while(!(q=WV0(J.generateSync(),Y,z,Z.canonical)))J.reseedSync();return VV0(q,Z)}function mj($,Q,Z,X=OV0){let Y;try{Y=ed($),Q=bK(Q)}catch(C){return!1}let{r:z,s:J}=Y;if(X.strict&&Y.hasHighS())return!1;let q=mB(Q),W;try{W=KV0(Z)}catch(C){return!1}let{n:G}=P8,U=vK(J,G),D=q1(q*U,G),P=q1(z*U,G),H=y6.BASE.multiplyAndAddUnsafe(W,D,P);if(!H)return!1;return q1(H.x,G)===z}var u5,p6,rX,iV,cd,P8,dd=($,Q)=>($+Q/rX)/Q,xj,j3=32,kK=32,QV0=32,ld,id,bj,hB,yB,XV0,YV0,fK,oV,OV0,E4,yj,R3;var pB=p(()=>{E9();/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */u5=BigInt(0),p6=BigInt(1),rX=BigInt(2),iV=BigInt(3),cd=BigInt(8),P8=Object.freeze({a:u5,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:p6,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),xj={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar($){let{n:Q}=P8,Z=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),X=-p6*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),Y=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),z=Z,J=BigInt("0x100000000000000000000000000000000"),q=dd(z*$,Q),W=dd(-X*$,Q),G=q1($-q*Z-W*Y,Q),U=q1(-q*X-W*z,Q),D=G>J,P=U>J;if(D)G=Q-G;if(P)U=Q-U;if(G>J||U>J)throw Error("splitScalarEndo: Endomorphism failed, k="+$);return{k1neg:D,k1:G,k2neg:P,k2:U}}},ld=j3+1,id=2*j3+1;bj=P8.a===u5;hB=class hB extends Error{constructor($){super($)}};W6.BASE=new W6(P8.Gx,P8.Gy,p6);W6.ZERO=new W6(u5,p6,u5);yB=new WeakMap;y6.BASE=new y6(P8.Gx,P8.Gy);y6.ZERO=new y6(u5,u5);XV0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));YV0=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");OV0={strict:!0};y6.BASE._setWindowSize(8);E4={node:O9,web:typeof self==="object"&&"crypto"in self?self.crypto:void 0},yj={},R3={bytesToHex:xK,hexToBytes:Iz,concatBytes:nX,mod:q1,invert:vK,isValidPrivateKey($){try{return hj($),!0}catch(Q){return!1}},_bigintTo32Bytes:gB,_normalizePrivateKey:hj,hashToPrivateKey:($)=>{$=bK($);let Q=kK+8;if($.length<Q||$.length>1024)throw Error("Expected valid bytes of private key as per FIPS 186");let Z=q1(sX($),P8.n-p6)+p6;return gB(Z)},randomBytes:($=32)=>{if(E4.web)return E4.web.getRandomValues(new Uint8Array($));else if(E4.node){let{randomBytes:Q}=E4.node;return Uint8Array.from(Q($))}else throw Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>R3.hashToPrivateKey(R3.randomBytes(kK+8)),precompute($=8,Q=y6.BASE){let Z=Q===y6.BASE?Q:new y6(Q.x,Q.y);return Z._setWindowSize($),Z.multiply(iV),Z},sha256:async(...$)=>{if(E4.web){let Q=await E4.web.subtle.digest("SHA-256",nX(...$));return new Uint8Array(Q)}else if(E4.node){let{createHash:Q}=E4.node,Z=Q("sha256");return $.forEach((X)=>Z.update(X)),Uint8Array.from(Z.digest())}else throw Error("The environment doesn't have sha256 function")},hmacSha256:async($,...Q)=>{if(E4.web){let Z=await E4.web.subtle.importKey("raw",$,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),X=nX(...Q),Y=await E4.web.subtle.sign("HMAC",Z,X);return new Uint8Array(Y)}else if(E4.node){let{createHmac:Z}=E4.node,X=Z("sha256",$);return Q.forEach((Y)=>X.update(Y)),Uint8Array.from(X.digest())}else throw Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async($,...Q)=>{let Z=yj[$];if(Z===void 0){let X=await R3.sha256(Uint8Array.from($,(Y)=>Y.charCodeAt(0)));Z=nX(X,X),yj[$]=Z}return R3.sha256(Z,...Q)},taggedHashSync:($,...Q)=>{if(typeof fK!=="function")throw new hB("sha256Sync is undefined, you need to set it");let Z=yj[$];if(Z===void 0){let X=fK(Uint8Array.from($,(Y)=>Y.charCodeAt(0)));Z=nX(X,X),yj[$]=Z}return fK(Z,...Q)},_JacobianPoint:W6};Object.defineProperties(R3,{sha256Sync:{configurable:!1,get(){return fK},set($){if(!fK)fK=$}},hmacSha256Sync:{configurable:!1,get(){return oV},set($){if(!oV)oV=$}}})});function Jl($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function gK($,Q=""){if(!Number.isSafeInteger($)||$<0){let Z=Q&&`"${Q}" `;throw Error(`${Z}expected integer >= 0, got ${$}`)}}function T2($,Q,Z=""){let X=Jl($),Y=$?.length,z=Q!==void 0;if(!X||z&&Y!==Q){let J=Z&&`"${Z}" `,q=z?` of length ${Q}`:"",W=X?`length=${Y}`:`type=${typeof $}`;throw Error(J+"expected Uint8Array"+q+", got "+W)}return $}function zl($){if(typeof $!=="function"||typeof $.create!=="function")throw Error("Hash must wrapped by utils.createHasher");gK($.outputLen),gK($.blockLen)}function hK($,Q=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(Q&&$.finished)throw Error("Hash#digest() has already been called")}function ql($,Q){T2($,void 0,"digestInto() output");let Z=Q.outputLen;if($.length<Z)throw Error('"digestInto() output" expected to be of length >='+Z)}function iQ(...$){for(let Q=0;Q<$.length;Q++)$[Q].fill(0)}function pj($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function N3($,Q){return $<<32-Q|$>>>Q}function uB($){if(T2($),Wl)return $.toHex();let Q="";for(let Z=0;Z<$.length;Z++)Q+=DV0[$[Z]];return Q}function Yl($){if($>=lQ._0&&$<=lQ._9)return $-lQ._0;if($>=lQ.A&&$<=lQ.F)return $-(lQ.A-10);if($>=lQ.a&&$<=lQ.f)return $-(lQ.a-10);return}function cB($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);if(Wl)return Uint8Array.fromHex($);let Q=$.length,Z=Q/2;if(Q%2)throw Error("hex string expected, got unpadded hex of length "+Q);let X=new Uint8Array(Z);for(let Y=0,z=0;Y<Z;Y++,z+=2){let J=Yl($.charCodeAt(z)),q=Yl($.charCodeAt(z+1));if(J===void 0||q===void 0){let W=$[z]+$[z+1];throw Error('hex string expected, got non-hex character "'+W+'" at index '+z)}X[Y]=J*16+q}return X}function uj(...$){let Q=0;for(let X=0;X<$.length;X++){let Y=$[X];T2(Y),Q+=Y.length}let Z=new Uint8Array(Q);for(let X=0,Y=0;X<$.length;X++){let z=$[X];Z.set(z,Y),Y+=z.length}return Z}function Kl($,Q={}){let Z=(Y,z)=>$(z).update(Y).digest(),X=$(void 0);return Z.outputLen=X.outputLen,Z.blockLen=X.blockLen,Z.create=(Y)=>$(Y),Object.assign(Z,Q),Object.freeze(Z)}function dB($=32){let Q=typeof globalThis==="object"?globalThis.crypto:null;if(typeof Q?.getRandomValues!=="function")throw Error("crypto.getRandomValues must be defined");return Q.getRandomValues(new Uint8Array($))}var Wl,DV0,lQ,Gl=($)=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,$])});var _z=p(()=>{/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Wl=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")(),DV0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));lQ={_0:48,_9:57,A:65,F:70,a:97,f:102}});class lB{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor($,Q){if(zl($),T2(Q,void 0,"key"),this.iHash=$.create(),typeof this.iHash.update!=="function")throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let Z=this.blockLen,X=new Uint8Array(Z);X.set(Q.length>Z?$.create().update(Q).digest():Q);for(let Y=0;Y<X.length;Y++)X[Y]^=54;this.iHash.update(X),this.oHash=$.create();for(let Y=0;Y<X.length;Y++)X[Y]^=106;this.oHash.update(X),iQ(X)}update($){return hK(this),this.iHash.update($),this}digestInto($){hK(this),T2($,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||=Object.create(Object.getPrototypeOf(this),{});let{oHash:Q,iHash:Z,finished:X,destroyed:Y,blockLen:z,outputLen:J}=this;return $=$,$.finished=X,$.destroyed=Y,$.blockLen=z,$.outputLen=J,$.oHash=Q._cloneInto($.oHash),$.iHash=Z._cloneInto($.iHash),$}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}var cj=($,Q,Z)=>new lB($,Q).update(Z).digest();var Ul=p(()=>{_z();cj.create=($,Q)=>new lB($,Q)});function Vl($,Q,Z){return $&Q^~$&Z}function Ol($,Q,Z){return $&Q^$&Z^Q&Z}class dj{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor($,Q,Z,X){this.blockLen=$,this.outputLen=Q,this.padOffset=Z,this.isLE=X,this.buffer=new Uint8Array($),this.view=pj(this.buffer)}update($){hK(this),T2($);let{view:Q,buffer:Z,blockLen:X}=this,Y=$.length;for(let z=0;z<Y;){let J=Math.min(X-this.pos,Y-z);if(J===X){let q=pj($);for(;X<=Y-z;z+=X)this.process(q,z);continue}if(Z.set($.subarray(z,z+J),this.pos),this.pos+=J,z+=J,this.pos===X)this.process(Q,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){hK(this),ql($,this),this.finished=!0;let{buffer:Q,view:Z,blockLen:X,isLE:Y}=this,{pos:z}=this;if(Q[z++]=128,iQ(this.buffer.subarray(z)),this.padOffset>X-z)this.process(Z,0),z=0;for(let U=z;U<X;U++)Q[U]=0;Z.setBigUint64(X-8,BigInt(this.length*8),Y),this.process(Z,0);let J=pj($),q=this.outputLen;if(q%4)throw Error("_sha2: outputLen must be aligned to 32bit");let W=q/4,G=this.get();if(W>G.length)throw Error("_sha2: outputLen bigger than state");for(let U=0;U<W;U++)J.setUint32(4*U,G[U],Y)}digest(){let{buffer:$,outputLen:Q}=this;this.digestInto($);let Z=$.slice(0,Q);return this.destroy(),Z}_cloneInto($){$||=new this.constructor,$.set(...this.get());let{blockLen:Q,buffer:Z,length:X,finished:Y,destroyed:z,pos:J}=this;if($.destroyed=z,$.finished=Y,$.length=X,$.pos=J,X%Q)$.buffer.set(Z);return $}clone(){return this._cloneInto()}}var oQ,nQ,I9,_9;var Dl=p(()=>{_z();oQ=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),nQ=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),I9=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),_9=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209])});function MV0($,Q=!1){if(Q)return{h:Number($&lj),l:Number($>>Ml&lj)};return{h:Number($>>Ml&lj)|0,l:Number($&lj)|0}}function Pl($,Q=!1){let Z=$.length,X=new Uint32Array(Z),Y=new Uint32Array(Z);for(let z=0;z<Z;z++){let{h:J,l:q}=MV0($[z],Q);[X[z],Y[z]]=[J,q]}return[X,Y]}function H$($,Q,Z,X){let Y=(Q>>>0)+(X>>>0);return{h:$+Z+(Y/4294967296|0)|0,l:Y|0}}var lj,Ml,iB=($,Q,Z)=>$>>>Z,oB=($,Q,Z)=>$<<32-Z|Q>>>Z,Sz=($,Q,Z)=>$>>>Z|Q<<32-Z,fz=($,Q,Z)=>$<<32-Z|Q>>>Z,rV=($,Q,Z)=>$<<64-Z|Q>>>Z-32,aV=($,Q,Z)=>$>>>Z-32|Q<<64-Z,Hl=($,Q,Z)=>($>>>0)+(Q>>>0)+(Z>>>0),jl=($,Q,Z,X)=>Q+Z+X+($/4294967296|0)|0,Rl=($,Q,Z,X)=>($>>>0)+(Q>>>0)+(Z>>>0)+(X>>>0),Nl=($,Q,Z,X,Y)=>Q+Z+X+Y+($/4294967296|0)|0,Cl=($,Q,Z,X,Y)=>($>>>0)+(Q>>>0)+(Z>>>0)+(X>>>0)+(Y>>>0),Ll=($,Q,Z,X,Y,z)=>Q+Z+X+Y+z+($/4294967296|0)|0;var Tl=p(()=>{lj=BigInt(4294967295),Ml=BigInt(32)});var HV0,tX,nB,Fl,jV0,Al,RV0,NV0,eX,$Y,sV,CV0,LV0,i9,o9,TV0,FV0,mK;var rB=p(()=>{Dl();Tl();_z();HV0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tX=new Uint32Array(64);nB=class nB extends dj{constructor($){super(64,$,8,!1)}get(){let{A:$,B:Q,C:Z,D:X,E:Y,F:z,G:J,H:q}=this;return[$,Q,Z,X,Y,z,J,q]}set($,Q,Z,X,Y,z,J,q){this.A=$|0,this.B=Q|0,this.C=Z|0,this.D=X|0,this.E=Y|0,this.F=z|0,this.G=J|0,this.H=q|0}process($,Q){for(let U=0;U<16;U++,Q+=4)tX[U]=$.getUint32(Q,!1);for(let U=16;U<64;U++){let D=tX[U-15],P=tX[U-2],H=N3(D,7)^N3(D,18)^D>>>3,N=N3(P,17)^N3(P,19)^P>>>10;tX[U]=N+tX[U-7]+H+tX[U-16]|0}let{A:Z,B:X,C:Y,D:z,E:J,F:q,G:W,H:G}=this;for(let U=0;U<64;U++){let D=N3(J,6)^N3(J,11)^N3(J,25),P=G+D+Vl(J,q,W)+HV0[U]+tX[U]|0,N=(N3(Z,2)^N3(Z,13)^N3(Z,22))+Ol(Z,X,Y)|0;G=W,W=q,q=J,J=z+P|0,z=Y,Y=X,X=Z,Z=P+N|0}Z=Z+this.A|0,X=X+this.B|0,Y=Y+this.C|0,z=z+this.D|0,J=J+this.E|0,q=q+this.F|0,W=W+this.G|0,G=G+this.H|0,this.set(Z,X,Y,z,J,q,W,G)}roundClean(){iQ(tX)}destroy(){this.set(0,0,0,0,0,0,0,0),iQ(this.buffer)}};Fl=class Fl extends nB{A=oQ[0]|0;B=oQ[1]|0;C=oQ[2]|0;D=oQ[3]|0;E=oQ[4]|0;F=oQ[5]|0;G=oQ[6]|0;H=oQ[7]|0;constructor(){super(32)}};jV0=class jV0 extends nB{A=nQ[0]|0;B=nQ[1]|0;C=nQ[2]|0;D=nQ[3]|0;E=nQ[4]|0;F=nQ[5]|0;G=nQ[6]|0;H=nQ[7]|0;constructor(){super(28)}};Al=(()=>Pl(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(($)=>BigInt($))))(),RV0=(()=>Al[0])(),NV0=(()=>Al[1])(),eX=new Uint32Array(80),$Y=new Uint32Array(80);sV=class sV extends dj{constructor($){super(128,$,16,!1)}get(){let{Ah:$,Al:Q,Bh:Z,Bl:X,Ch:Y,Cl:z,Dh:J,Dl:q,Eh:W,El:G,Fh:U,Fl:D,Gh:P,Gl:H,Hh:N,Hl:C}=this;return[$,Q,Z,X,Y,z,J,q,W,G,U,D,P,H,N,C]}set($,Q,Z,X,Y,z,J,q,W,G,U,D,P,H,N,C){this.Ah=$|0,this.Al=Q|0,this.Bh=Z|0,this.Bl=X|0,this.Ch=Y|0,this.Cl=z|0,this.Dh=J|0,this.Dl=q|0,this.Eh=W|0,this.El=G|0,this.Fh=U|0,this.Fl=D|0,this.Gh=P|0,this.Gl=H|0,this.Hh=N|0,this.Hl=C|0}process($,Q){for(let E=0;E<16;E++,Q+=4)eX[E]=$.getUint32(Q),$Y[E]=$.getUint32(Q+=4);for(let E=16;E<80;E++){let I=eX[E-15]|0,_=$Y[E-15]|0,f=Sz(I,_,1)^Sz(I,_,8)^iB(I,_,7),x=fz(I,_,1)^fz(I,_,8)^oB(I,_,7),g=eX[E-2]|0,h=$Y[E-2]|0,v=Sz(g,h,19)^rV(g,h,61)^iB(g,h,6),b=fz(g,h,19)^aV(g,h,61)^oB(g,h,6),m=Rl(x,b,$Y[E-7],$Y[E-16]),K=Nl(m,f,v,eX[E-7],eX[E-16]);eX[E]=K|0,$Y[E]=m|0}let{Ah:Z,Al:X,Bh:Y,Bl:z,Ch:J,Cl:q,Dh:W,Dl:G,Eh:U,El:D,Fh:P,Fl:H,Gh:N,Gl:C,Hh:L,Hl:B}=this;for(let E=0;E<80;E++){let I=Sz(U,D,14)^Sz(U,D,18)^rV(U,D,41),_=fz(U,D,14)^fz(U,D,18)^aV(U,D,41),f=U&P^~U&N,x=D&H^~D&C,g=Cl(B,_,x,NV0[E],$Y[E]),h=Ll(g,L,I,f,RV0[E],eX[E]),v=g|0,b=Sz(Z,X,28)^rV(Z,X,34)^rV(Z,X,39),m=fz(Z,X,28)^aV(Z,X,34)^aV(Z,X,39),K=Z&Y^Z&J^Y&J,M=X&z^X&q^z&q;L=N|0,B=C|0,N=P|0,C=H|0,P=U|0,H=D|0,{h:U,l:D}=H$(W|0,G|0,h|0,v|0),W=J|0,G=q|0,J=Y|0,q=z|0,Y=Z|0,z=X|0;let j=Hl(v,m,M);Z=jl(j,h,b,K),X=j|0}({h:Z,l:X}=H$(this.Ah|0,this.Al|0,Z|0,X|0)),{h:Y,l:z}=H$(this.Bh|0,this.Bl|0,Y|0,z|0),{h:J,l:q}=H$(this.Ch|0,this.Cl|0,J|0,q|0),{h:W,l:G}=H$(this.Dh|0,this.Dl|0,W|0,G|0),{h:U,l:D}=H$(this.Eh|0,this.El|0,U|0,D|0),{h:P,l:H}=H$(this.Fh|0,this.Fl|0,P|0,H|0),{h:N,l:C}=H$(this.Gh|0,this.Gl|0,N|0,C|0),{h:L,l:B}=H$(this.Hh|0,this.Hl|0,L|0,B|0),this.set(Z,X,Y,z,J,q,W,G,U,D,P,H,N,C,L,B)}roundClean(){iQ(eX,$Y)}destroy(){iQ(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};CV0=class CV0 extends sV{Ah=_9[0]|0;Al=_9[1]|0;Bh=_9[2]|0;Bl=_9[3]|0;Ch=_9[4]|0;Cl=_9[5]|0;Dh=_9[6]|0;Dl=_9[7]|0;Eh=_9[8]|0;El=_9[9]|0;Fh=_9[10]|0;Fl=_9[11]|0;Gh=_9[12]|0;Gl=_9[13]|0;Hh=_9[14]|0;Hl=_9[15]|0;constructor(){super(64)}};LV0=class LV0 extends sV{Ah=I9[0]|0;Al=I9[1]|0;Bh=I9[2]|0;Bl=I9[3]|0;Ch=I9[4]|0;Cl=I9[5]|0;Dh=I9[6]|0;Dl=I9[7]|0;Eh=I9[8]|0;El=I9[9]|0;Fh=I9[10]|0;Fl=I9[11]|0;Gh=I9[12]|0;Gl=I9[13]|0;Hh=I9[14]|0;Hl=I9[15]|0;constructor(){super(48)}};i9=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),o9=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);TV0=class TV0 extends sV{Ah=i9[0]|0;Al=i9[1]|0;Bh=i9[2]|0;Bl=i9[3]|0;Ch=i9[4]|0;Cl=i9[5]|0;Dh=i9[6]|0;Dl=i9[7]|0;Eh=i9[8]|0;El=i9[9]|0;Fh=i9[10]|0;Fl=i9[11]|0;Gh=i9[12]|0;Gl=i9[13]|0;Hh=i9[14]|0;Hl=i9[15]|0;constructor(){super(28)}};FV0=class FV0 extends sV{Ah=o9[0]|0;Al=o9[1]|0;Bh=o9[2]|0;Bl=o9[3]|0;Ch=o9[4]|0;Cl=o9[5]|0;Dh=o9[6]|0;Dl=o9[7]|0;Eh=o9[8]|0;El=o9[9]|0;Fh=o9[10]|0;Fl=o9[11]|0;Gh=o9[12]|0;Gl=o9[13]|0;Hh=o9[14]|0;Hl=o9[15]|0;constructor(){super(32)}};mK=Kl(()=>new Fl,Gl(1))});var oj=_1((_l)=>{Object.defineProperty(_l,"__esModule",{value:!0});_l.output=_l.exists=_l.hash=_l.bytes=_l.bool=_l.number=void 0;function ij($){if(!Number.isSafeInteger($)||$<0)throw Error(`Wrong positive integer: ${$}`)}_l.number=ij;function wl($){if(typeof $!=="boolean")throw Error(`Expected boolean, not ${$}`)}_l.bool=wl;function aB($,...Q){if(!($ instanceof Uint8Array))throw Error("Expected Uint8Array");if(Q.length>0&&!Q.includes($.length))throw Error(`Expected Uint8Array of length ${Q}, not of length=${$.length}`)}_l.bytes=aB;function Bl($){if(typeof $!=="function"||typeof $.create!=="function")throw Error("Hash should be wrapped by utils.wrapConstructor");ij($.outputLen),ij($.blockLen)}_l.hash=Bl;function El($,Q=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(Q&&$.finished)throw Error("Hash#digest() has already been called")}_l.exists=El;function Il($,Q){aB($);let Z=Q.outputLen;if($.length<Z)throw Error(`digestInto() expects output buffer of length at least ${Z}`)}_l.output=Il;var AV0={number:ij,bool:wl,bytes:aB,hash:Bl,exists:El,output:Il};_l.default=AV0});var xl=_1((fl)=>{Object.defineProperty(fl,"__esModule",{value:!0});fl.crypto=void 0;fl.crypto=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var kz=_1((yl)=>{/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(yl,"__esModule",{value:!0});yl.randomBytes=yl.wrapXOFConstructorWithOpts=yl.wrapConstructorWithOpts=yl.wrapConstructor=yl.checkOpts=yl.Hash=yl.concatBytes=yl.toBytes=yl.utf8ToBytes=yl.asyncLoop=yl.nextTick=yl.hexToBytes=yl.bytesToHex=yl.isLE=yl.rotr=yl.createView=yl.u32=yl.u8=void 0;var sB=xl(),tB=($)=>$ instanceof Uint8Array,fV0=($)=>new Uint8Array($.buffer,$.byteOffset,$.byteLength);yl.u8=fV0;var kV0=($)=>new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4));yl.u32=kV0;var xV0=($)=>new DataView($.buffer,$.byteOffset,$.byteLength);yl.createView=xV0;var bV0=($,Q)=>$<<32-Q|$>>>Q;yl.rotr=bV0;yl.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!yl.isLE)throw Error("Non little-endian hardware is not supported");var vV0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));function yV0($){if(!tB($))throw Error("Uint8Array expected");let Q="";for(let Z=0;Z<$.length;Z++)Q+=vV0[$[Z]];return Q}yl.bytesToHex=yV0;function gV0($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);let Q=$.length;if(Q%2)throw Error("padded hex string expected, got unpadded hex of length "+Q);let Z=new Uint8Array(Q/2);for(let X=0;X<Z.length;X++){let Y=X*2,z=$.slice(Y,Y+2),J=Number.parseInt(z,16);if(Number.isNaN(J)||J<0)throw Error("Invalid byte sequence");Z[X]=J}return Z}yl.hexToBytes=gV0;var hV0=async()=>{};yl.nextTick=hV0;async function mV0($,Q,Z){let X=Date.now();for(let Y=0;Y<$;Y++){Z(Y);let z=Date.now()-X;if(z>=0&&z<Q)continue;await yl.nextTick(),X+=z}}yl.asyncLoop=mV0;function bl($){if(typeof $!=="string")throw Error(`utf8ToBytes expected string, got ${typeof $}`);return new Uint8Array(new TextEncoder().encode($))}yl.utf8ToBytes=bl;function nj($){if(typeof $==="string")$=bl($);if(!tB($))throw Error(`expected Uint8Array, got ${typeof $}`);return $}yl.toBytes=nj;function pV0(...$){let Q=new Uint8Array($.reduce((X,Y)=>X+Y.length,0)),Z=0;return $.forEach((X)=>{if(!tB(X))throw Error("Uint8Array expected");Q.set(X,Z),Z+=X.length}),Q}yl.concatBytes=pV0;class vl{clone(){return this._cloneInto()}}yl.Hash=vl;var uV0={}.toString;function cV0($,Q){if(Q!==void 0&&uV0.call(Q)!=="[object Object]")throw Error("Options should be object or undefined");return Object.assign($,Q)}yl.checkOpts=cV0;function dV0($){let Q=(X)=>$().update(nj(X)).digest(),Z=$();return Q.outputLen=Z.outputLen,Q.blockLen=Z.blockLen,Q.create=()=>$(),Q}yl.wrapConstructor=dV0;function lV0($){let Q=(X,Y)=>$(Y).update(nj(X)).digest(),Z=$({});return Q.outputLen=Z.outputLen,Q.blockLen=Z.blockLen,Q.create=(X)=>$(X),Q}yl.wrapConstructorWithOpts=lV0;function iV0($){let Q=(X,Y)=>$(Y).update(nj(X)).digest(),Z=$({});return Q.outputLen=Z.outputLen,Q.blockLen=Z.blockLen,Q.create=(X)=>$(X),Q}yl.wrapXOFConstructorWithOpts=iV0;function oV0($=32){if(sB.crypto&&typeof sB.crypto.getRandomValues==="function")return sB.crypto.getRandomValues(new Uint8Array($));throw Error("crypto.getRandomValues must be defined")}yl.randomBytes=oV0});var $E=_1((ul)=>{Object.defineProperty(ul,"__esModule",{value:!0});ul.SHA2=void 0;var eB=oj(),tV=kz();function KO0($,Q,Z,X){if(typeof $.setBigUint64==="function")return $.setBigUint64(Q,Z,X);let Y=BigInt(32),z=BigInt(4294967295),J=Number(Z>>Y&z),q=Number(Z&z),W=X?4:0,G=X?0:4;$.setUint32(Q+W,J,X),$.setUint32(Q+G,q,X)}class pl extends tV.Hash{constructor($,Q,Z,X){super();this.blockLen=$,this.outputLen=Q,this.padOffset=Z,this.isLE=X,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array($),this.view=(0,tV.createView)(this.buffer)}update($){(0,eB.exists)(this);let{view:Q,buffer:Z,blockLen:X}=this;$=(0,tV.toBytes)($);let Y=$.length;for(let z=0;z<Y;){let J=Math.min(X-this.pos,Y-z);if(J===X){let q=(0,tV.createView)($);for(;X<=Y-z;z+=X)this.process(q,z);continue}if(Z.set($.subarray(z,z+J),this.pos),this.pos+=J,z+=J,this.pos===X)this.process(Q,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){(0,eB.exists)(this),(0,eB.output)($,this),this.finished=!0;let{buffer:Q,view:Z,blockLen:X,isLE:Y}=this,{pos:z}=this;if(Q[z++]=128,this.buffer.subarray(z).fill(0),this.padOffset>X-z)this.process(Z,0),z=0;for(let U=z;U<X;U++)Q[U]=0;KO0(Z,X-8,BigInt(this.length*8),Y),this.process(Z,0);let J=(0,tV.createView)($),q=this.outputLen;if(q%4)throw Error("_sha2: outputLen should be aligned to 32bit");let W=q/4,G=this.get();if(W>G.length)throw Error("_sha2: outputLen bigger than state");for(let U=0;U<W;U++)J.setUint32(4*U,G[U],Y)}digest(){let{buffer:$,outputLen:Q}=this;this.digestInto($);let Z=$.slice(0,Q);return this.destroy(),Z}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:Q,buffer:Z,length:X,finished:Y,destroyed:z,pos:J}=this;if($.length=X,$.pos=J,$.finished=Y,$.destroyed=z,X%Q)$.buffer.set(Z);return $}}ul.SHA2=pl});var ol=_1((ll)=>{Object.defineProperty(ll,"__esModule",{value:!0});ll.sha224=ll.sha256=void 0;var GO0=$E(),f7=kz(),UO0=($,Q,Z)=>$&Q^~$&Z,VO0=($,Q,Z)=>$&Q^$&Z^Q&Z,OO0=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),QY=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ZY=new Uint32Array(64);class QE extends GO0.SHA2{constructor(){super(64,32,8,!1);this.A=QY[0]|0,this.B=QY[1]|0,this.C=QY[2]|0,this.D=QY[3]|0,this.E=QY[4]|0,this.F=QY[5]|0,this.G=QY[6]|0,this.H=QY[7]|0}get(){let{A:$,B:Q,C:Z,D:X,E:Y,F:z,G:J,H:q}=this;return[$,Q,Z,X,Y,z,J,q]}set($,Q,Z,X,Y,z,J,q){this.A=$|0,this.B=Q|0,this.C=Z|0,this.D=X|0,this.E=Y|0,this.F=z|0,this.G=J|0,this.H=q|0}process($,Q){for(let U=0;U<16;U++,Q+=4)ZY[U]=$.getUint32(Q,!1);for(let U=16;U<64;U++){let D=ZY[U-15],P=ZY[U-2],H=(0,f7.rotr)(D,7)^(0,f7.rotr)(D,18)^D>>>3,N=(0,f7.rotr)(P,17)^(0,f7.rotr)(P,19)^P>>>10;ZY[U]=N+ZY[U-7]+H+ZY[U-16]|0}let{A:Z,B:X,C:Y,D:z,E:J,F:q,G:W,H:G}=this;for(let U=0;U<64;U++){let D=(0,f7.rotr)(J,6)^(0,f7.rotr)(J,11)^(0,f7.rotr)(J,25),P=G+D+UO0(J,q,W)+OO0[U]+ZY[U]|0,N=((0,f7.rotr)(Z,2)^(0,f7.rotr)(Z,13)^(0,f7.rotr)(Z,22))+VO0(Z,X,Y)|0;G=W,W=q,q=J,J=z+P|0,z=Y,Y=X,X=Z,Z=P+N|0}Z=Z+this.A|0,X=X+this.B|0,Y=Y+this.C|0,z=z+this.D|0,J=J+this.E|0,q=q+this.F|0,W=W+this.G|0,G=G+this.H|0,this.set(Z,X,Y,z,J,q,W,G)}roundClean(){ZY.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class dl extends QE{constructor(){super();this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}ll.sha256=(0,f7.wrapConstructor)(()=>new QE);ll.sha224=(0,f7.wrapConstructor)(()=>new dl)});var Hi=_1((Mi)=>{Object.defineProperty(Mi,"__esModule",{value:!0});Mi.add5L=Mi.add5H=Mi.add4H=Mi.add4L=Mi.add3H=Mi.add3L=Mi.add=Mi.rotlBL=Mi.rotlBH=Mi.rotlSL=Mi.rotlSH=Mi.rotr32L=Mi.rotr32H=Mi.rotrBL=Mi.rotrBH=Mi.rotrSL=Mi.rotrSH=Mi.shrSL=Mi.shrSH=Mi.toBig=Mi.split=Mi.fromBig=void 0;var rj=BigInt(4294967295),ZE=BigInt(32);function XE($,Q=!1){if(Q)return{h:Number($&rj),l:Number($>>ZE&rj)};return{h:Number($>>ZE&rj)|0,l:Number($&rj)|0}}Mi.fromBig=XE;function nl($,Q=!1){let Z=new Uint32Array($.length),X=new Uint32Array($.length);for(let Y=0;Y<$.length;Y++){let{h:z,l:J}=XE($[Y],Q);[Z[Y],X[Y]]=[z,J]}return[Z,X]}Mi.split=nl;var rl=($,Q)=>BigInt($>>>0)<<ZE|BigInt(Q>>>0);Mi.toBig=rl;var al=($,Q,Z)=>$>>>Z;Mi.shrSH=al;var sl=($,Q,Z)=>$<<32-Z|Q>>>Z;Mi.shrSL=sl;var tl=($,Q,Z)=>$>>>Z|Q<<32-Z;Mi.rotrSH=tl;var el=($,Q,Z)=>$<<32-Z|Q>>>Z;Mi.rotrSL=el;var $i=($,Q,Z)=>$<<64-Z|Q>>>Z-32;Mi.rotrBH=$i;var Qi=($,Q,Z)=>$>>>Z-32|Q<<64-Z;Mi.rotrBL=Qi;var Zi=($,Q)=>Q;Mi.rotr32H=Zi;var Xi=($,Q)=>$;Mi.rotr32L=Xi;var Yi=($,Q,Z)=>$<<Z|Q>>>32-Z;Mi.rotlSH=Yi;var Ji=($,Q,Z)=>Q<<Z|$>>>32-Z;Mi.rotlSL=Ji;var zi=($,Q,Z)=>Q<<Z-32|$>>>64-Z;Mi.rotlBH=zi;var qi=($,Q,Z)=>$<<Z-32|Q>>>64-Z;Mi.rotlBL=qi;function Wi($,Q,Z,X){let Y=(Q>>>0)+(X>>>0);return{h:$+Z+(Y/4294967296|0)|0,l:Y|0}}Mi.add=Wi;var Ki=($,Q,Z)=>($>>>0)+(Q>>>0)+(Z>>>0);Mi.add3L=Ki;var Gi=($,Q,Z,X)=>Q+Z+X+($/4294967296|0)|0;Mi.add3H=Gi;var Ui=($,Q,Z,X)=>($>>>0)+(Q>>>0)+(Z>>>0)+(X>>>0);Mi.add4L=Ui;var Vi=($,Q,Z,X,Y)=>Q+Z+X+Y+($/4294967296|0)|0;Mi.add4H=Vi;var Oi=($,Q,Z,X,Y)=>($>>>0)+(Q>>>0)+(Z>>>0)+(X>>>0)+(Y>>>0);Mi.add5L=Oi;var Di=($,Q,Z,X,Y,z)=>Q+Z+X+Y+z+($/4294967296|0)|0;Mi.add5H=Di;var MO0={fromBig:XE,split:nl,toBig:rl,shrSH:al,shrSL:sl,rotrSH:tl,rotrSL:el,rotrBH:$i,rotrBL:Qi,rotr32H:Zi,rotr32L:Xi,rotlSH:Yi,rotlSL:Ji,rotlBH:zi,rotlBL:qi,add:Wi,add3L:Ki,add3H:Gi,add4L:Ui,add4H:Vi,add5H:Di,add5L:Oi};Mi.default=MO0});var Ti=_1((Ci)=>{Object.defineProperty(Ci,"__esModule",{value:!0});Ci.sha384=Ci.sha512_256=Ci.sha512_224=Ci.sha512=Ci.SHA512=void 0;var gO0=$E(),V5=Hi(),aj=kz(),[hO0,mO0]=(()=>V5.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(($)=>BigInt($))))(),XY=new Uint32Array(80),YY=new Uint32Array(80);class pK extends gO0.SHA2{constructor(){super(128,64,16,!1);this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:$,Al:Q,Bh:Z,Bl:X,Ch:Y,Cl:z,Dh:J,Dl:q,Eh:W,El:G,Fh:U,Fl:D,Gh:P,Gl:H,Hh:N,Hl:C}=this;return[$,Q,Z,X,Y,z,J,q,W,G,U,D,P,H,N,C]}set($,Q,Z,X,Y,z,J,q,W,G,U,D,P,H,N,C){this.Ah=$|0,this.Al=Q|0,this.Bh=Z|0,this.Bl=X|0,this.Ch=Y|0,this.Cl=z|0,this.Dh=J|0,this.Dl=q|0,this.Eh=W|0,this.El=G|0,this.Fh=U|0,this.Fl=D|0,this.Gh=P|0,this.Gl=H|0,this.Hh=N|0,this.Hl=C|0}process($,Q){for(let E=0;E<16;E++,Q+=4)XY[E]=$.getUint32(Q),YY[E]=$.getUint32(Q+=4);for(let E=16;E<80;E++){let I=XY[E-15]|0,_=YY[E-15]|0,f=V5.default.rotrSH(I,_,1)^V5.default.rotrSH(I,_,8)^V5.default.shrSH(I,_,7),x=V5.default.rotrSL(I,_,1)^V5.default.rotrSL(I,_,8)^V5.default.shrSL(I,_,7),g=XY[E-2]|0,h=YY[E-2]|0,v=V5.default.rotrSH(g,h,19)^V5.default.rotrBH(g,h,61)^V5.default.shrSH(g,h,6),b=V5.default.rotrSL(g,h,19)^V5.default.rotrBL(g,h,61)^V5.default.shrSL(g,h,6),m=V5.default.add4L(x,b,YY[E-7],YY[E-16]),K=V5.default.add4H(m,f,v,XY[E-7],XY[E-16]);XY[E]=K|0,YY[E]=m|0}let{Ah:Z,Al:X,Bh:Y,Bl:z,Ch:J,Cl:q,Dh:W,Dl:G,Eh:U,El:D,Fh:P,Fl:H,Gh:N,Gl:C,Hh:L,Hl:B}=this;for(let E=0;E<80;E++){let I=V5.default.rotrSH(U,D,14)^V5.default.rotrSH(U,D,18)^V5.default.rotrBH(U,D,41),_=V5.default.rotrSL(U,D,14)^V5.default.rotrSL(U,D,18)^V5.default.rotrBL(U,D,41),f=U&P^~U&N,x=D&H^~D&C,g=V5.default.add5L(B,_,x,mO0[E],YY[E]),h=V5.default.add5H(g,L,I,f,hO0[E],XY[E]),v=g|0,b=V5.default.rotrSH(Z,X,28)^V5.default.rotrBH(Z,X,34)^V5.default.rotrBH(Z,X,39),m=V5.default.rotrSL(Z,X,28)^V5.default.rotrBL(Z,X,34)^V5.default.rotrBL(Z,X,39),K=Z&Y^Z&J^Y&J,M=X&z^X&q^z&q;L=N|0,B=C|0,N=P|0,C=H|0,P=U|0,H=D|0,{h:U,l:D}=V5.default.add(W|0,G|0,h|0,v|0),W=J|0,G=q|0,J=Y|0,q=z|0,Y=Z|0,z=X|0;let j=V5.default.add3L(v,m,M);Z=V5.default.add3H(j,h,b,K),X=j|0}({h:Z,l:X}=V5.default.add(this.Ah|0,this.Al|0,Z|0,X|0)),{h:Y,l:z}=V5.default.add(this.Bh|0,this.Bl|0,Y|0,z|0),{h:J,l:q}=V5.default.add(this.Ch|0,this.Cl|0,J|0,q|0),{h:W,l:G}=V5.default.add(this.Dh|0,this.Dl|0,W|0,G|0),{h:U,l:D}=V5.default.add(this.Eh|0,this.El|0,U|0,D|0),{h:P,l:H}=V5.default.add(this.Fh|0,this.Fl|0,P|0,H|0),{h:N,l:C}=V5.default.add(this.Gh|0,this.Gl|0,N|0,C|0),{h:L,l:B}=V5.default.add(this.Hh|0,this.Hl|0,L|0,B|0),this.set(Z,X,Y,z,J,q,W,G,U,D,P,H,N,C,L,B)}roundClean(){XY.fill(0),YY.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Ci.SHA512=pK;class ji extends pK{constructor(){super();this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class Ri extends pK{constructor(){super();this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Ni extends pK{constructor(){super();this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}Ci.sha512=(0,aj.wrapConstructor)(()=>new pK);Ci.sha512_224=(0,aj.wrapConstructor)(()=>new ji);Ci.sha512_256=(0,aj.wrapConstructor)(()=>new Ri);Ci.sha384=(0,aj.wrapConstructor)(()=>new Ni)});var wi=_1((Ai)=>{Object.defineProperty(Ai,"__esModule",{value:!0});Ai.hmac=Ai.HMAC=void 0;var sj=oj(),Fi=kz();class tj extends Fi.Hash{constructor($,Q){super();this.finished=!1,this.destroyed=!1,(0,sj.hash)($);let Z=(0,Fi.toBytes)(Q);if(this.iHash=$.create(),typeof this.iHash.update!=="function")throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let X=this.blockLen,Y=new Uint8Array(X);Y.set(Z.length>X?$.create().update(Z).digest():Z);for(let z=0;z<Y.length;z++)Y[z]^=54;this.iHash.update(Y),this.oHash=$.create();for(let z=0;z<Y.length;z++)Y[z]^=106;this.oHash.update(Y),Y.fill(0)}update($){return(0,sj.exists)(this),this.iHash.update($),this}digestInto($){(0,sj.exists)(this),(0,sj.bytes)($,this.outputLen),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||($=Object.create(Object.getPrototypeOf(this),{}));let{oHash:Q,iHash:Z,finished:X,destroyed:Y,blockLen:z,outputLen:J}=this;return $=$,$.finished=X,$.destroyed=Y,$.blockLen=z,$.outputLen=J,$.oHash=Q._cloneInto($.oHash),$.iHash=Z._cloneInto($.iHash),$}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}Ai.HMAC=tj;var lO0=($,Q,Z)=>new tj($,Q).update(Z).digest();Ai.hmac=lO0;Ai.hmac.create=($,Q)=>new tj($,Q)});var Si=_1((Ii)=>{Object.defineProperty(Ii,"__esModule",{value:!0});Ii.pbkdf2Async=Ii.pbkdf2=void 0;var ej=oj(),oO0=wi(),uK=kz();function Bi($,Q,Z,X){(0,ej.hash)($);let Y=(0,uK.checkOpts)({dkLen:32,asyncTick:10},X),{c:z,dkLen:J,asyncTick:q}=Y;if((0,ej.number)(z),(0,ej.number)(J),(0,ej.number)(q),z<1)throw Error("PBKDF2: iterations (c) should be >= 1");let W=(0,uK.toBytes)(Q),G=(0,uK.toBytes)(Z),U=new Uint8Array(J),D=oO0.hmac.create($,W),P=D._cloneInto().update(G);return{c:z,dkLen:J,asyncTick:q,DK:U,PRF:D,PRFSalt:P}}function Ei($,Q,Z,X,Y){if($.destroy(),Q.destroy(),X)X.destroy();return Y.fill(0),Z}function nO0($,Q,Z,X){let{c:Y,dkLen:z,DK:J,PRF:q,PRFSalt:W}=Bi($,Q,Z,X),G,U=new Uint8Array(4),D=(0,uK.createView)(U),P=new Uint8Array(q.outputLen);for(let H=1,N=0;N<z;H++,N+=q.outputLen){let C=J.subarray(N,N+q.outputLen);D.setInt32(0,H,!1),(G=W._cloneInto(G)).update(U).digestInto(P),C.set(P.subarray(0,C.length));for(let L=1;L<Y;L++){q._cloneInto(G).update(P).digestInto(P);for(let B=0;B<C.length;B++)C[B]^=P[B]}}return Ei(q,W,J,G,P)}Ii.pbkdf2=nO0;async function rO0($,Q,Z,X){let{c:Y,dkLen:z,asyncTick:J,DK:q,PRF:W,PRFSalt:G}=Bi($,Q,Z,X),U,D=new Uint8Array(4),P=(0,uK.createView)(D),H=new Uint8Array(W.outputLen);for(let N=1,C=0;C<z;N++,C+=W.outputLen){let L=q.subarray(C,C+W.outputLen);P.setInt32(0,N,!1),(U=G._cloneInto(U)).update(D).digestInto(H),L.set(H.subarray(0,L.length)),await(0,uK.asyncLoop)(Y-1,J,()=>{W._cloneInto(U).update(H).digestInto(H);for(let B=0;B<L.length;B++)L[B]^=H[B]})}return Ei(W,G,q,U,H)}Ii.pbkdf2Async=rO0});var fi=_1((wg0,sO0)=>{sO0.exports=["abdikace","abeceda","adresa","agrese","akce","aktovka","alej","alkohol","amputace","ananas","andulka","anekdota","anketa","antika","anulovat","archa","arogance","asfalt","asistent","aspirace","astma","astronom","atlas","atletika","atol","autobus","azyl","babka","bachor","bacil","baculka","badatel","bageta","bagr","bahno","bakterie","balada","baletka","balkon","balonek","balvan","balza","bambus","bankomat","barbar","baret","barman","baroko","barva","baterka","batoh","bavlna","bazalka","bazilika","bazuka","bedna","beran","beseda","bestie","beton","bezinka","bezmoc","beztak","bicykl","bidlo","biftek","bikiny","bilance","biograf","biolog","bitva","bizon","blahobyt","blatouch","blecha","bledule","blesk","blikat","blizna","blokovat","bloudit","blud","bobek","bobr","bodlina","bodnout","bohatost","bojkot","bojovat","bokorys","bolest","borec","borovice","bota","boubel","bouchat","bouda","boule","bourat","boxer","bradavka","brambora","branka","bratr","brepta","briketa","brko","brloh","bronz","broskev","brunetka","brusinka","brzda","brzy","bublina","bubnovat","buchta","buditel","budka","budova","bufet","bujarost","bukvice","buldok","bulva","bunda","bunkr","burza","butik","buvol","buzola","bydlet","bylina","bytovka","bzukot","capart","carevna","cedr","cedule","cejch","cejn","cela","celer","celkem","celnice","cenina","cennost","cenovka","centrum","cenzor","cestopis","cetka","chalupa","chapadlo","charita","chata","chechtat","chemie","chichot","chirurg","chlad","chleba","chlubit","chmel","chmura","chobot","chochol","chodba","cholera","chomout","chopit","choroba","chov","chrapot","chrlit","chrt","chrup","chtivost","chudina","chutnat","chvat","chvilka","chvost","chyba","chystat","chytit","cibule","cigareta","cihelna","cihla","cinkot","cirkus","cisterna","citace","citrus","cizinec","cizost","clona","cokoliv","couvat","ctitel","ctnost","cudnost","cuketa","cukr","cupot","cvaknout","cval","cvik","cvrkot","cyklista","daleko","dareba","datel","datum","dcera","debata","dechovka","decibel","deficit","deflace","dekl","dekret","demokrat","deprese","derby","deska","detektiv","dikobraz","diktovat","dioda","diplom","disk","displej","divadlo","divoch","dlaha","dlouho","dluhopis","dnes","dobro","dobytek","docent","dochutit","dodnes","dohled","dohoda","dohra","dojem","dojnice","doklad","dokola","doktor","dokument","dolar","doleva","dolina","doma","dominant","domluvit","domov","donutit","dopad","dopis","doplnit","doposud","doprovod","dopustit","dorazit","dorost","dort","dosah","doslov","dostatek","dosud","dosyta","dotaz","dotek","dotknout","doufat","doutnat","dovozce","dozadu","doznat","dozorce","drahota","drak","dramatik","dravec","draze","drdol","drobnost","drogerie","drozd","drsnost","drtit","drzost","duben","duchovno","dudek","duha","duhovka","dusit","dusno","dutost","dvojice","dvorec","dynamit","ekolog","ekonomie","elektron","elipsa","email","emise","emoce","empatie","epizoda","epocha","epopej","epos","esej","esence","eskorta","eskymo","etiketa","euforie","evoluce","exekuce","exkurze","expedice","exploze","export","extrakt","facka","fajfka","fakulta","fanatik","fantazie","farmacie","favorit","fazole","federace","fejeton","fenka","fialka","figurant","filozof","filtr","finance","finta","fixace","fjord","flanel","flirt","flotila","fond","fosfor","fotbal","fotka","foton","frakce","freska","fronta","fukar","funkce","fyzika","galeje","garant","genetika","geolog","gilotina","glazura","glejt","golem","golfista","gotika","graf","gramofon","granule","grep","gril","grog","groteska","guma","hadice","hadr","hala","halenka","hanba","hanopis","harfa","harpuna","havran","hebkost","hejkal","hejno","hejtman","hektar","helma","hematom","herec","herna","heslo","hezky","historik","hladovka","hlasivky","hlava","hledat","hlen","hlodavec","hloh","hloupost","hltat","hlubina","hluchota","hmat","hmota","hmyz","hnis","hnojivo","hnout","hoblina","hoboj","hoch","hodiny","hodlat","hodnota","hodovat","hojnost","hokej","holinka","holka","holub","homole","honitba","honorace","horal","horda","horizont","horko","horlivec","hormon","hornina","horoskop","horstvo","hospoda","hostina","hotovost","houba","houf","houpat","houska","hovor","hradba","hranice","hravost","hrazda","hrbolek","hrdina","hrdlo","hrdost","hrnek","hrobka","hromada","hrot","hrouda","hrozen","hrstka","hrubost","hryzat","hubenost","hubnout","hudba","hukot","humr","husita","hustota","hvozd","hybnost","hydrant","hygiena","hymna","hysterik","idylka","ihned","ikona","iluze","imunita","infekce","inflace","inkaso","inovace","inspekce","internet","invalida","investor","inzerce","ironie","jablko","jachta","jahoda","jakmile","jakost","jalovec","jantar","jarmark","jaro","jasan","jasno","jatka","javor","jazyk","jedinec","jedle","jednatel","jehlan","jekot","jelen","jelito","jemnost","jenom","jepice","jeseter","jevit","jezdec","jezero","jinak","jindy","jinoch","jiskra","jistota","jitrnice","jizva","jmenovat","jogurt","jurta","kabaret","kabel","kabinet","kachna","kadet","kadidlo","kahan","kajak","kajuta","kakao","kaktus","kalamita","kalhoty","kalibr","kalnost","kamera","kamkoliv","kamna","kanibal","kanoe","kantor","kapalina","kapela","kapitola","kapka","kaple","kapota","kapr","kapusta","kapybara","karamel","karotka","karton","kasa","katalog","katedra","kauce","kauza","kavalec","kazajka","kazeta","kazivost","kdekoliv","kdesi","kedluben","kemp","keramika","kino","klacek","kladivo","klam","klapot","klasika","klaun","klec","klenba","klepat","klesnout","klid","klima","klisna","klobouk","klokan","klopa","kloub","klubovna","klusat","kluzkost","kmen","kmitat","kmotr","kniha","knot","koalice","koberec","kobka","kobliha","kobyla","kocour","kohout","kojenec","kokos","koktejl","kolaps","koleda","kolize","kolo","komando","kometa","komik","komnata","komora","kompas","komunita","konat","koncept","kondice","konec","konfese","kongres","konina","konkurs","kontakt","konzerva","kopanec","kopie","kopnout","koprovka","korbel","korektor","kormidlo","koroptev","korpus","koruna","koryto","korzet","kosatec","kostka","kotel","kotleta","kotoul","koukat","koupelna","kousek","kouzlo","kovboj","koza","kozoroh","krabice","krach","krajina","kralovat","krasopis","kravata","kredit","krejcar","kresba","kreveta","kriket","kritik","krize","krkavec","krmelec","krmivo","krocan","krok","kronika","kropit","kroupa","krovka","krtek","kruhadlo","krupice","krutost","krvinka","krychle","krypta","krystal","kryt","kudlanka","kufr","kujnost","kukla","kulajda","kulich","kulka","kulomet","kultura","kuna","kupodivu","kurt","kurzor","kutil","kvalita","kvasinka","kvestor","kynolog","kyselina","kytara","kytice","kytka","kytovec","kyvadlo","labrador","lachtan","ladnost","laik","lakomec","lamela","lampa","lanovka","lasice","laso","lastura","latinka","lavina","lebka","leckdy","leden","lednice","ledovka","ledvina","legenda","legie","legrace","lehce","lehkost","lehnout","lektvar","lenochod","lentilka","lepenka","lepidlo","letadlo","letec","letmo","letokruh","levhart","levitace","levobok","libra","lichotka","lidojed","lidskost","lihovina","lijavec","lilek","limetka","linie","linka","linoleum","listopad","litina","litovat","lobista","lodivod","logika","logoped","lokalita","loket","lomcovat","lopata","lopuch","lord","losos","lotr","loudal","louh","louka","louskat","lovec","lstivost","lucerna","lucifer","lump","lusk","lustrace","lvice","lyra","lyrika","lysina","madam","madlo","magistr","mahagon","majetek","majitel","majorita","makak","makovice","makrela","malba","malina","malovat","malvice","maminka","mandle","manko","marnost","masakr","maskot","masopust","matice","matrika","maturita","mazanec","mazivo","mazlit","mazurka","mdloba","mechanik","meditace","medovina","melasa","meloun","mentolka","metla","metoda","metr","mezera","migrace","mihnout","mihule","mikina","mikrofon","milenec","milimetr","milost","mimika","mincovna","minibar","minomet","minulost","miska","mistr","mixovat","mladost","mlha","mlhovina","mlok","mlsat","mluvit","mnich","mnohem","mobil","mocnost","modelka","modlitba","mohyla","mokro","molekula","momentka","monarcha","monokl","monstrum","montovat","monzun","mosaz","moskyt","most","motivace","motorka","motyka","moucha","moudrost","mozaika","mozek","mozol","mramor","mravenec","mrkev","mrtvola","mrzet","mrzutost","mstitel","mudrc","muflon","mulat","mumie","munice","muset","mutace","muzeum","muzikant","myslivec","mzda","nabourat","nachytat","nadace","nadbytek","nadhoz","nadobro","nadpis","nahlas","nahnat","nahodile","nahradit","naivita","najednou","najisto","najmout","naklonit","nakonec","nakrmit","nalevo","namazat","namluvit","nanometr","naoko","naopak","naostro","napadat","napevno","naplnit","napnout","naposled","naprosto","narodit","naruby","narychlo","nasadit","nasekat","naslepo","nastat","natolik","navenek","navrch","navzdory","nazvat","nebe","nechat","necky","nedaleko","nedbat","neduh","negace","nehet","nehoda","nejen","nejprve","neklid","nelibost","nemilost","nemoc","neochota","neonka","nepokoj","nerost","nerv","nesmysl","nesoulad","netvor","neuron","nevina","nezvykle","nicota","nijak","nikam","nikdy","nikl","nikterak","nitro","nocleh","nohavice","nominace","nora","norek","nositel","nosnost","nouze","noviny","novota","nozdra","nuda","nudle","nuget","nutit","nutnost","nutrie","nymfa","obal","obarvit","obava","obdiv","obec","obehnat","obejmout","obezita","obhajoba","obilnice","objasnit","objekt","obklopit","oblast","oblek","obliba","obloha","obluda","obnos","obohatit","obojek","obout","obrazec","obrna","obruba","obrys","obsah","obsluha","obstarat","obuv","obvaz","obvinit","obvod","obvykle","obyvatel","obzor","ocas","ocel","ocenit","ochladit","ochota","ochrana","ocitnout","odboj","odbyt","odchod","odcizit","odebrat","odeslat","odevzdat","odezva","odhadce","odhodit","odjet","odjinud","odkaz","odkoupit","odliv","odluka","odmlka","odolnost","odpad","odpis","odplout","odpor","odpustit","odpykat","odrazka","odsoudit","odstup","odsun","odtok","odtud","odvaha","odveta","odvolat","odvracet","odznak","ofina","ofsajd","ohlas","ohnisko","ohrada","ohrozit","ohryzek","okap","okenice","oklika","okno","okouzlit","okovy","okrasa","okres","okrsek","okruh","okupant","okurka","okusit","olejnina","olizovat","omak","omeleta","omezit","omladina","omlouvat","omluva","omyl","onehdy","opakovat","opasek","operace","opice","opilost","opisovat","opora","opozice","opravdu","oproti","orbital","orchestr","orgie","orlice","orloj","ortel","osada","oschnout","osika","osivo","oslava","oslepit","oslnit","oslovit","osnova","osoba","osolit","ospalec","osten","ostraha","ostuda","ostych","osvojit","oteplit","otisk","otop","otrhat","otrlost","otrok","otruby","otvor","ovanout","ovar","oves","ovlivnit","ovoce","oxid","ozdoba","pachatel","pacient","padouch","pahorek","pakt","palanda","palec","palivo","paluba","pamflet","pamlsek","panenka","panika","panna","panovat","panstvo","pantofle","paprika","parketa","parodie","parta","paruka","paryba","paseka","pasivita","pastelka","patent","patrona","pavouk","pazneht","pazourek","pecka","pedagog","pejsek","peklo","peloton","penalta","pendrek","penze","periskop","pero","pestrost","petarda","petice","petrolej","pevnina","pexeso","pianista","piha","pijavice","pikle","piknik","pilina","pilnost","pilulka","pinzeta","pipeta","pisatel","pistole","pitevna","pivnice","pivovar","placenta","plakat","plamen","planeta","plastika","platit","plavidlo","plaz","plech","plemeno","plenta","ples","pletivo","plevel","plivat","plnit","plno","plocha","plodina","plomba","plout","pluk","plyn","pobavit","pobyt","pochod","pocit","poctivec","podat","podcenit","podepsat","podhled","podivit","podklad","podmanit","podnik","podoba","podpora","podraz","podstata","podvod","podzim","poezie","pohanka","pohnutka","pohovor","pohroma","pohyb","pointa","pojistka","pojmout","pokazit","pokles","pokoj","pokrok","pokuta","pokyn","poledne","polibek","polknout","poloha","polynom","pomalu","pominout","pomlka","pomoc","pomsta","pomyslet","ponechat","ponorka","ponurost","popadat","popel","popisek","poplach","poprosit","popsat","popud","poradce","porce","porod","porucha","poryv","posadit","posed","posila","poskok","poslanec","posoudit","pospolu","postava","posudek","posyp","potah","potkan","potlesk","potomek","potrava","potupa","potvora","poukaz","pouto","pouzdro","povaha","povidla","povlak","povoz","povrch","povstat","povyk","povzdech","pozdrav","pozemek","poznatek","pozor","pozvat","pracovat","prahory","praktika","prales","praotec","praporek","prase","pravda","princip","prkno","probudit","procento","prodej","profese","prohra","projekt","prolomit","promile","pronikat","propad","prorok","prosba","proton","proutek","provaz","prskavka","prsten","prudkost","prut","prvek","prvohory","psanec","psovod","pstruh","ptactvo","puberta","puch","pudl","pukavec","puklina","pukrle","pult","pumpa","punc","pupen","pusa","pusinka","pustina","putovat","putyka","pyramida","pysk","pytel","racek","rachot","radiace","radnice","radon","raft","ragby","raketa","rakovina","rameno","rampouch","rande","rarach","rarita","rasovna","rastr","ratolest","razance","razidlo","reagovat","reakce","recept","redaktor","referent","reflex","rejnok","reklama","rekord","rekrut","rektor","reputace","revize","revma","revolver","rezerva","riskovat","riziko","robotika","rodokmen","rohovka","rokle","rokoko","romaneto","ropovod","ropucha","rorejs","rosol","rostlina","rotmistr","rotoped","rotunda","roubenka","roucho","roup","roura","rovina","rovnice","rozbor","rozchod","rozdat","rozeznat","rozhodce","rozinka","rozjezd","rozkaz","rozloha","rozmar","rozpad","rozruch","rozsah","roztok","rozum","rozvod","rubrika","ruchadlo","rukavice","rukopis","ryba","rybolov","rychlost","rydlo","rypadlo","rytina","ryzost","sadista","sahat","sako","samec","samizdat","samota","sanitka","sardinka","sasanka","satelit","sazba","sazenice","sbor","schovat","sebranka","secese","sedadlo","sediment","sedlo","sehnat","sejmout","sekera","sekta","sekunda","sekvoje","semeno","seno","servis","sesadit","seshora","seskok","seslat","sestra","sesuv","sesypat","setba","setina","setkat","setnout","setrvat","sever","seznam","shoda","shrnout","sifon","silnice","sirka","sirotek","sirup","situace","skafandr","skalisko","skanzen","skaut","skeptik","skica","skladba","sklenice","sklo","skluz","skoba","skokan","skoro","skripta","skrz","skupina","skvost","skvrna","slabika","sladidlo","slanina","slast","slavnost","sledovat","slepec","sleva","slezina","slib","slina","sliznice","slon","sloupek","slovo","sluch","sluha","slunce","slupka","slza","smaragd","smetana","smilstvo","smlouva","smog","smrad","smrk","smrtka","smutek","smysl","snad","snaha","snob","sobota","socha","sodovka","sokol","sopka","sotva","souboj","soucit","soudce","souhlas","soulad","soumrak","souprava","soused","soutok","souviset","spalovna","spasitel","spis","splav","spodek","spojenec","spolu","sponzor","spornost","spousta","sprcha","spustit","sranda","sraz","srdce","srna","srnec","srovnat","srpen","srst","srub","stanice","starosta","statika","stavba","stehno","stezka","stodola","stolek","stopa","storno","stoupat","strach","stres","strhnout","strom","struna","studna","stupnice","stvol","styk","subjekt","subtropy","suchar","sudost","sukno","sundat","sunout","surikata","surovina","svah","svalstvo","svetr","svatba","svazek","svisle","svitek","svoboda","svodidlo","svorka","svrab","sykavka","sykot","synek","synovec","sypat","sypkost","syrovost","sysel","sytost","tabletka","tabule","tahoun","tajemno","tajfun","tajga","tajit","tajnost","taktika","tamhle","tampon","tancovat","tanec","tanker","tapeta","tavenina","tazatel","technika","tehdy","tekutina","telefon","temnota","tendence","tenista","tenor","teplota","tepna","teprve","terapie","termoska","textil","ticho","tiskopis","titulek","tkadlec","tkanina","tlapka","tleskat","tlukot","tlupa","tmel","toaleta","topinka","topol","torzo","touha","toulec","tradice","traktor","tramp","trasa","traverza","trefit","trest","trezor","trhavina","trhlina","trochu","trojice","troska","trouba","trpce","trpitel","trpkost","trubec","truchlit","truhlice","trus","trvat","tudy","tuhnout","tuhost","tundra","turista","turnaj","tuzemsko","tvaroh","tvorba","tvrdost","tvrz","tygr","tykev","ubohost","uboze","ubrat","ubrousek","ubrus","ubytovna","ucho","uctivost","udivit","uhradit","ujednat","ujistit","ujmout","ukazatel","uklidnit","uklonit","ukotvit","ukrojit","ulice","ulita","ulovit","umyvadlo","unavit","uniforma","uniknout","upadnout","uplatnit","uplynout","upoutat","upravit","uran","urazit","usednout","usilovat","usmrtit","usnadnit","usnout","usoudit","ustlat","ustrnout","utahovat","utkat","utlumit","utonout","utopenec","utrousit","uvalit","uvolnit","uvozovka","uzdravit","uzel","uzenina","uzlina","uznat","vagon","valcha","valoun","vana","vandal","vanilka","varan","varhany","varovat","vcelku","vchod","vdova","vedro","vegetace","vejce","velbloud","veletrh","velitel","velmoc","velryba","venkov","veranda","verze","veselka","veskrze","vesnice","vespodu","vesta","veterina","veverka","vibrace","vichr","videohra","vidina","vidle","vila","vinice","viset","vitalita","vize","vizitka","vjezd","vklad","vkus","vlajka","vlak","vlasec","vlevo","vlhkost","vliv","vlnovka","vloupat","vnucovat","vnuk","voda","vodivost","vodoznak","vodstvo","vojensky","vojna","vojsko","volant","volba","volit","volno","voskovka","vozidlo","vozovna","vpravo","vrabec","vracet","vrah","vrata","vrba","vrcholek","vrhat","vrstva","vrtule","vsadit","vstoupit","vstup","vtip","vybavit","vybrat","vychovat","vydat","vydra","vyfotit","vyhledat","vyhnout","vyhodit","vyhradit","vyhubit","vyjasnit","vyjet","vyjmout","vyklopit","vykonat","vylekat","vymazat","vymezit","vymizet","vymyslet","vynechat","vynikat","vynutit","vypadat","vyplatit","vypravit","vypustit","vyrazit","vyrovnat","vyrvat","vyslovit","vysoko","vystavit","vysunout","vysypat","vytasit","vytesat","vytratit","vyvinout","vyvolat","vyvrhel","vyzdobit","vyznat","vzadu","vzbudit","vzchopit","vzdor","vzduch","vzdychat","vzestup","vzhledem","vzkaz","vzlykat","vznik","vzorek","vzpoura","vztah","vztek","xylofon","zabrat","zabydlet","zachovat","zadarmo","zadusit","zafoukat","zahltit","zahodit","zahrada","zahynout","zajatec","zajet","zajistit","zaklepat","zakoupit","zalepit","zamezit","zamotat","zamyslet","zanechat","zanikat","zaplatit","zapojit","zapsat","zarazit","zastavit","zasunout","zatajit","zatemnit","zatknout","zaujmout","zavalit","zavelet","zavinit","zavolat","zavrtat","zazvonit","zbavit","zbrusu","zbudovat","zbytek","zdaleka","zdarma","zdatnost","zdivo","zdobit","zdroj","zdvih","zdymadlo","zelenina","zeman","zemina","zeptat","zezadu","zezdola","zhatit","zhltnout","zhluboka","zhotovit","zhruba","zima","zimnice","zjemnit","zklamat","zkoumat","zkratka","zkumavka","zlato","zlehka","zloba","zlom","zlost","zlozvyk","zmapovat","zmar","zmatek","zmije","zmizet","zmocnit","zmodrat","zmrzlina","zmutovat","znak","znalost","znamenat","znovu","zobrazit","zotavit","zoubek","zoufale","zplodit","zpomalit","zprava","zprostit","zprudka","zprvu","zrada","zranit","zrcadlo","zrnitost","zrno","zrovna","zrychlit","zrzavost","zticha","ztratit","zubovina","zubr","zvednout","zvenku","zvesela","zvon","zvrat","zvukovod","zvyk"]});var ki=_1((Bg0,tO0)=>{tO0.exports=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]});var xi=_1((Eg0,eO0)=>{eO0.exports=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]});var bi=_1((Ig0,$D0)=>{$D0.exports=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]});var vi=_1((_g0,QD0)=>{QD0.exports=["abaisser","abandon","abdiquer","abeille","abolir","aborder","aboutir","aboyer","abrasif","abreuver","abriter","abroger","abrupt","absence","absolu","absurde","abusif","abyssal","academie","acajou","acarien","accabler","accepter","acclamer","accolade","accroche","accuser","acerbe","achat","acheter","aciduler","acier","acompte","acquerir","acronyme","acteur","actif","actuel","adepte","adequat","adhesif","adjectif","adjuger","admettre","admirer","adopter","adorer","adoucir","adresse","adroit","adulte","adverbe","aerer","aeronef","affaire","affecter","affiche","affreux","affubler","agacer","agencer","agile","agiter","agrafer","agreable","agrume","aider","aiguille","ailier","aimable","aisance","ajouter","ajuster","alarmer","alchimie","alerte","algebre","algue","aliener","aliment","alleger","alliage","allouer","allumer","alourdir","alpaga","altesse","alveole","amateur","ambigu","ambre","amenager","amertume","amidon","amiral","amorcer","amour","amovible","amphibie","ampleur","amusant","analyse","anaphore","anarchie","anatomie","ancien","aneantir","angle","angoisse","anguleux","animal","annexer","annonce","annuel","anodin","anomalie","anonyme","anormal","antenne","antidote","anxieux","apaiser","aperitif","aplanir","apologie","appareil","appeler","apporter","appuyer","aquarium","aqueduc","arbitre","arbuste","ardeur","ardoise","argent","arlequin","armature","armement","armoire","armure","arpenter","arracher","arriver","arroser","arsenic","arteriel","article","aspect","asphalte","aspirer","assaut","asservir","assiette","associer","assurer","asticot","astre","astuce","atelier","atome","atrium","atroce","attaque","attentif","attirer","attraper","aubaine","auberge","audace","audible","augurer","aurore","automne","autruche","avaler","avancer","avarice","avenir","averse","aveugle","aviateur","avide","avion","aviser","avoine","avouer","avril","axial","axiome","badge","bafouer","bagage","baguette","baignade","balancer","balcon","baleine","balisage","bambin","bancaire","bandage","banlieue","banniere","banquier","barbier","baril","baron","barque","barrage","bassin","bastion","bataille","bateau","batterie","baudrier","bavarder","belette","belier","belote","benefice","berceau","berger","berline","bermuda","besace","besogne","betail","beurre","biberon","bicycle","bidule","bijou","bilan","bilingue","billard","binaire","biologie","biopsie","biotype","biscuit","bison","bistouri","bitume","bizarre","blafard","blague","blanchir","blessant","blinder","blond","bloquer","blouson","bobard","bobine","boire","boiser","bolide","bonbon","bondir","bonheur","bonifier","bonus","bordure","borne","botte","boucle","boueux","bougie","boulon","bouquin","bourse","boussole","boutique","boxeur","branche","brasier","brave","brebis","breche","breuvage","bricoler","brigade","brillant","brioche","brique","brochure","broder","bronzer","brousse","broyeur","brume","brusque","brutal","bruyant","buffle","buisson","bulletin","bureau","burin","bustier","butiner","butoir","buvable","buvette","cabanon","cabine","cachette","cadeau","cadre","cafeine","caillou","caisson","calculer","calepin","calibre","calmer","calomnie","calvaire","camarade","camera","camion","campagne","canal","caneton","canon","cantine","canular","capable","caporal","caprice","capsule","capter","capuche","carabine","carbone","caresser","caribou","carnage","carotte","carreau","carton","cascade","casier","casque","cassure","causer","caution","cavalier","caverne","caviar","cedille","ceinture","celeste","cellule","cendrier","censurer","central","cercle","cerebral","cerise","cerner","cerveau","cesser","chagrin","chaise","chaleur","chambre","chance","chapitre","charbon","chasseur","chaton","chausson","chavirer","chemise","chenille","chequier","chercher","cheval","chien","chiffre","chignon","chimere","chiot","chlorure","chocolat","choisir","chose","chouette","chrome","chute","cigare","cigogne","cimenter","cinema","cintrer","circuler","cirer","cirque","citerne","citoyen","citron","civil","clairon","clameur","claquer","classe","clavier","client","cligner","climat","clivage","cloche","clonage","cloporte","cobalt","cobra","cocasse","cocotier","coder","codifier","coffre","cogner","cohesion","coiffer","coincer","colere","colibri","colline","colmater","colonel","combat","comedie","commande","compact","concert","conduire","confier","congeler","connoter","consonne","contact","convexe","copain","copie","corail","corbeau","cordage","corniche","corpus","correct","cortege","cosmique","costume","coton","coude","coupure","courage","couteau","couvrir","coyote","crabe","crainte","cravate","crayon","creature","crediter","cremeux","creuser","crevette","cribler","crier","cristal","critere","croire","croquer","crotale","crucial","cruel","crypter","cubique","cueillir","cuillere","cuisine","cuivre","culminer","cultiver","cumuler","cupide","curatif","curseur","cyanure","cycle","cylindre","cynique","daigner","damier","danger","danseur","dauphin","debattre","debiter","deborder","debrider","debutant","decaler","decembre","dechirer","decider","declarer","decorer","decrire","decupler","dedale","deductif","deesse","defensif","defiler","defrayer","degager","degivrer","deglutir","degrafer","dejeuner","delice","deloger","demander","demeurer","demolir","denicher","denouer","dentelle","denuder","depart","depenser","dephaser","deplacer","deposer","deranger","derober","desastre","descente","desert","designer","desobeir","dessiner","destrier","detacher","detester","detourer","detresse","devancer","devenir","deviner","devoir","diable","dialogue","diamant","dicter","differer","digerer","digital","digne","diluer","dimanche","diminuer","dioxyde","directif","diriger","discuter","disposer","dissiper","distance","divertir","diviser","docile","docteur","dogme","doigt","domaine","domicile","dompter","donateur","donjon","donner","dopamine","dortoir","dorure","dosage","doseur","dossier","dotation","douanier","double","douceur","douter","doyen","dragon","draper","dresser","dribbler","droiture","duperie","duplexe","durable","durcir","dynastie","eblouir","ecarter","echarpe","echelle","eclairer","eclipse","eclore","ecluse","ecole","economie","ecorce","ecouter","ecraser","ecremer","ecrivain","ecrou","ecume","ecureuil","edifier","eduquer","effacer","effectif","effigie","effort","effrayer","effusion","egaliser","egarer","ejecter","elaborer","elargir","electron","elegant","elephant","eleve","eligible","elitisme","eloge","elucider","eluder","emballer","embellir","embryon","emeraude","emission","emmener","emotion","emouvoir","empereur","employer","emporter","emprise","emulsion","encadrer","enchere","enclave","encoche","endiguer","endosser","endroit","enduire","energie","enfance","enfermer","enfouir","engager","engin","englober","enigme","enjamber","enjeu","enlever","ennemi","ennuyeux","enrichir","enrobage","enseigne","entasser","entendre","entier","entourer","entraver","enumerer","envahir","enviable","envoyer","enzyme","eolien","epaissir","epargne","epatant","epaule","epicerie","epidemie","epier","epilogue","epine","episode","epitaphe","epoque","epreuve","eprouver","epuisant","equerre","equipe","eriger","erosion","erreur","eruption","escalier","espadon","espece","espiegle","espoir","esprit","esquiver","essayer","essence","essieu","essorer","estime","estomac","estrade","etagere","etaler","etanche","etatique","eteindre","etendoir","eternel","ethanol","ethique","ethnie","etirer","etoffer","etoile","etonnant","etourdir","etrange","etroit","etude","euphorie","evaluer","evasion","eventail","evidence","eviter","evolutif","evoquer","exact","exagerer","exaucer","exceller","excitant","exclusif","excuse","executer","exemple","exercer","exhaler","exhorter","exigence","exiler","exister","exotique","expedier","explorer","exposer","exprimer","exquis","extensif","extraire","exulter","fable","fabuleux","facette","facile","facture","faiblir","falaise","fameux","famille","farceur","farfelu","farine","farouche","fasciner","fatal","fatigue","faucon","fautif","faveur","favori","febrile","feconder","federer","felin","femme","femur","fendoir","feodal","fermer","feroce","ferveur","festival","feuille","feutre","fevrier","fiasco","ficeler","fictif","fidele","figure","filature","filetage","filiere","filleul","filmer","filou","filtrer","financer","finir","fiole","firme","fissure","fixer","flairer","flamme","flasque","flatteur","fleau","fleche","fleur","flexion","flocon","flore","fluctuer","fluide","fluvial","folie","fonderie","fongible","fontaine","forcer","forgeron","formuler","fortune","fossile","foudre","fougere","fouiller","foulure","fourmi","fragile","fraise","franchir","frapper","frayeur","fregate","freiner","frelon","fremir","frenesie","frere","friable","friction","frisson","frivole","froid","fromage","frontal","frotter","fruit","fugitif","fuite","fureur","furieux","furtif","fusion","futur","gagner","galaxie","galerie","gambader","garantir","gardien","garnir","garrigue","gazelle","gazon","geant","gelatine","gelule","gendarme","general","genie","genou","gentil","geologie","geometre","geranium","germe","gestuel","geyser","gibier","gicler","girafe","givre","glace","glaive","glisser","globe","gloire","glorieux","golfeur","gomme","gonfler","gorge","gorille","goudron","gouffre","goulot","goupille","gourmand","goutte","graduel","graffiti","graine","grand","grappin","gratuit","gravir","grenat","griffure","griller","grimper","grogner","gronder","grotte","groupe","gruger","grutier","gruyere","guepard","guerrier","guide","guimauve","guitare","gustatif","gymnaste","gyrostat","habitude","hachoir","halte","hameau","hangar","hanneton","haricot","harmonie","harpon","hasard","helium","hematome","herbe","herisson","hermine","heron","hesiter","heureux","hiberner","hibou","hilarant","histoire","hiver","homard","hommage","homogene","honneur","honorer","honteux","horde","horizon","horloge","hormone","horrible","houleux","housse","hublot","huileux","humain","humble","humide","humour","hurler","hydromel","hygiene","hymne","hypnose","idylle","ignorer","iguane","illicite","illusion","image","imbiber","imiter","immense","immobile","immuable","impact","imperial","implorer","imposer","imprimer","imputer","incarner","incendie","incident","incliner","incolore","indexer","indice","inductif","inedit","ineptie","inexact","infini","infliger","informer","infusion","ingerer","inhaler","inhiber","injecter","injure","innocent","inoculer","inonder","inscrire","insecte","insigne","insolite","inspirer","instinct","insulter","intact","intense","intime","intrigue","intuitif","inutile","invasion","inventer","inviter","invoquer","ironique","irradier","irreel","irriter","isoler","ivoire","ivresse","jaguar","jaillir","jambe","janvier","jardin","jauger","jaune","javelot","jetable","jeton","jeudi","jeunesse","joindre","joncher","jongler","joueur","jouissif","journal","jovial","joyau","joyeux","jubiler","jugement","junior","jupon","juriste","justice","juteux","juvenile","kayak","kimono","kiosque","label","labial","labourer","lacerer","lactose","lagune","laine","laisser","laitier","lambeau","lamelle","lampe","lanceur","langage","lanterne","lapin","largeur","larme","laurier","lavabo","lavoir","lecture","legal","leger","legume","lessive","lettre","levier","lexique","lezard","liasse","liberer","libre","licence","licorne","liege","lievre","ligature","ligoter","ligue","limer","limite","limonade","limpide","lineaire","lingot","lionceau","liquide","lisiere","lister","lithium","litige","littoral","livreur","logique","lointain","loisir","lombric","loterie","louer","lourd","loutre","louve","loyal","lubie","lucide","lucratif","lueur","lugubre","luisant","lumiere","lunaire","lundi","luron","lutter","luxueux","machine","magasin","magenta","magique","maigre","maillon","maintien","mairie","maison","majorer","malaxer","malefice","malheur","malice","mallette","mammouth","mandater","maniable","manquant","manteau","manuel","marathon","marbre","marchand","mardi","maritime","marqueur","marron","marteler","mascotte","massif","materiel","matiere","matraque","maudire","maussade","mauve","maximal","mechant","meconnu","medaille","medecin","mediter","meduse","meilleur","melange","melodie","membre","memoire","menacer","mener","menhir","mensonge","mentor","mercredi","merite","merle","messager","mesure","metal","meteore","methode","metier","meuble","miauler","microbe","miette","mignon","migrer","milieu","million","mimique","mince","mineral","minimal","minorer","minute","miracle","miroiter","missile","mixte","mobile","moderne","moelleux","mondial","moniteur","monnaie","monotone","monstre","montagne","monument","moqueur","morceau","morsure","mortier","moteur","motif","mouche","moufle","moulin","mousson","mouton","mouvant","multiple","munition","muraille","murene","murmure","muscle","museum","musicien","mutation","muter","mutuel","myriade","myrtille","mystere","mythique","nageur","nappe","narquois","narrer","natation","nation","nature","naufrage","nautique","navire","nebuleux","nectar","nefaste","negation","negliger","negocier","neige","nerveux","nettoyer","neurone","neutron","neveu","niche","nickel","nitrate","niveau","noble","nocif","nocturne","noirceur","noisette","nomade","nombreux","nommer","normatif","notable","notifier","notoire","nourrir","nouveau","novateur","novembre","novice","nuage","nuancer","nuire","nuisible","numero","nuptial","nuque","nutritif","obeir","objectif","obliger","obscur","observer","obstacle","obtenir","obturer","occasion","occuper","ocean","octobre","octroyer","octupler","oculaire","odeur","odorant","offenser","officier","offrir","ogive","oiseau","oisillon","olfactif","olivier","ombrage","omettre","onctueux","onduler","onereux","onirique","opale","opaque","operer","opinion","opportun","opprimer","opter","optique","orageux","orange","orbite","ordonner","oreille","organe","orgueil","orifice","ornement","orque","ortie","osciller","osmose","ossature","otarie","ouragan","ourson","outil","outrager","ouvrage","ovation","oxyde","oxygene","ozone","paisible","palace","palmares","palourde","palper","panache","panda","pangolin","paniquer","panneau","panorama","pantalon","papaye","papier","papoter","papyrus","paradoxe","parcelle","paresse","parfumer","parler","parole","parrain","parsemer","partager","parure","parvenir","passion","pasteque","paternel","patience","patron","pavillon","pavoiser","payer","paysage","peigne","peintre","pelage","pelican","pelle","pelouse","peluche","pendule","penetrer","penible","pensif","penurie","pepite","peplum","perdrix","perforer","periode","permuter","perplexe","persil","perte","peser","petale","petit","petrir","peuple","pharaon","phobie","phoque","photon","phrase","physique","piano","pictural","piece","pierre","pieuvre","pilote","pinceau","pipette","piquer","pirogue","piscine","piston","pivoter","pixel","pizza","placard","plafond","plaisir","planer","plaque","plastron","plateau","pleurer","plexus","pliage","plomb","plonger","pluie","plumage","pochette","poesie","poete","pointe","poirier","poisson","poivre","polaire","policier","pollen","polygone","pommade","pompier","ponctuel","ponderer","poney","portique","position","posseder","posture","potager","poteau","potion","pouce","poulain","poumon","pourpre","poussin","pouvoir","prairie","pratique","precieux","predire","prefixe","prelude","prenom","presence","pretexte","prevoir","primitif","prince","prison","priver","probleme","proceder","prodige","profond","progres","proie","projeter","prologue","promener","propre","prospere","proteger","prouesse","proverbe","prudence","pruneau","psychose","public","puceron","puiser","pulpe","pulsar","punaise","punitif","pupitre","purifier","puzzle","pyramide","quasar","querelle","question","quietude","quitter","quotient","racine","raconter","radieux","ragondin","raideur","raisin","ralentir","rallonge","ramasser","rapide","rasage","ratisser","ravager","ravin","rayonner","reactif","reagir","realiser","reanimer","recevoir","reciter","reclamer","recolter","recruter","reculer","recycler","rediger","redouter","refaire","reflexe","reformer","refrain","refuge","regalien","region","reglage","regulier","reiterer","rejeter","rejouer","relatif","relever","relief","remarque","remede","remise","remonter","remplir","remuer","renard","renfort","renifler","renoncer","rentrer","renvoi","replier","reporter","reprise","reptile","requin","reserve","resineux","resoudre","respect","rester","resultat","retablir","retenir","reticule","retomber","retracer","reunion","reussir","revanche","revivre","revolte","revulsif","richesse","rideau","rieur","rigide","rigoler","rincer","riposter","risible","risque","rituel","rival","riviere","rocheux","romance","rompre","ronce","rondin","roseau","rosier","rotatif","rotor","rotule","rouge","rouille","rouleau","routine","royaume","ruban","rubis","ruche","ruelle","rugueux","ruiner","ruisseau","ruser","rustique","rythme","sabler","saboter","sabre","sacoche","safari","sagesse","saisir","salade","salive","salon","saluer","samedi","sanction","sanglier","sarcasme","sardine","saturer","saugrenu","saumon","sauter","sauvage","savant","savonner","scalpel","scandale","scelerat","scenario","sceptre","schema","science","scinder","score","scrutin","sculpter","seance","secable","secher","secouer","secreter","sedatif","seduire","seigneur","sejour","selectif","semaine","sembler","semence","seminal","senateur","sensible","sentence","separer","sequence","serein","sergent","serieux","serrure","serum","service","sesame","sevir","sevrage","sextuple","sideral","siecle","sieger","siffler","sigle","signal","silence","silicium","simple","sincere","sinistre","siphon","sirop","sismique","situer","skier","social","socle","sodium","soigneux","soldat","soleil","solitude","soluble","sombre","sommeil","somnoler","sonde","songeur","sonnette","sonore","sorcier","sortir","sosie","sottise","soucieux","soudure","souffle","soulever","soupape","source","soutirer","souvenir","spacieux","spatial","special","sphere","spiral","stable","station","sternum","stimulus","stipuler","strict","studieux","stupeur","styliste","sublime","substrat","subtil","subvenir","succes","sucre","suffixe","suggerer","suiveur","sulfate","superbe","supplier","surface","suricate","surmener","surprise","sursaut","survie","suspect","syllabe","symbole","symetrie","synapse","syntaxe","systeme","tabac","tablier","tactile","tailler","talent","talisman","talonner","tambour","tamiser","tangible","tapis","taquiner","tarder","tarif","tartine","tasse","tatami","tatouage","taupe","taureau","taxer","temoin","temporel","tenaille","tendre","teneur","tenir","tension","terminer","terne","terrible","tetine","texte","theme","theorie","therapie","thorax","tibia","tiede","timide","tirelire","tiroir","tissu","titane","titre","tituber","toboggan","tolerant","tomate","tonique","tonneau","toponyme","torche","tordre","tornade","torpille","torrent","torse","tortue","totem","toucher","tournage","tousser","toxine","traction","trafic","tragique","trahir","train","trancher","travail","trefle","tremper","tresor","treuil","triage","tribunal","tricoter","trilogie","triomphe","tripler","triturer","trivial","trombone","tronc","tropical","troupeau","tuile","tulipe","tumulte","tunnel","turbine","tuteur","tutoyer","tuyau","tympan","typhon","typique","tyran","ubuesque","ultime","ultrason","unanime","unifier","union","unique","unitaire","univers","uranium","urbain","urticant","usage","usine","usuel","usure","utile","utopie","vacarme","vaccin","vagabond","vague","vaillant","vaincre","vaisseau","valable","valise","vallon","valve","vampire","vanille","vapeur","varier","vaseux","vassal","vaste","vecteur","vedette","vegetal","vehicule","veinard","veloce","vendredi","venerer","venger","venimeux","ventouse","verdure","verin","vernir","verrou","verser","vertu","veston","veteran","vetuste","vexant","vexer","viaduc","viande","victoire","vidange","video","vignette","vigueur","vilain","village","vinaigre","violon","vipere","virement","virtuose","virus","visage","viseur","vision","visqueux","visuel","vital","vitesse","viticole","vitrine","vivace","vivipare","vocation","voguer","voile","voisin","voiture","volaille","volcan","voltiger","volume","vorace","vortex","voter","vouloir","voyage","voyelle","wagon","xenon","yacht","zebre","zenith","zeste","zoologie"]});var yi=_1((Sg0,ZD0)=>{ZD0.exports=["abaco","abbaglio","abbinato","abete","abisso","abolire","abrasivo","abrogato","accadere","accenno","accusato","acetone","achille","acido","acqua","acre","acrilico","acrobata","acuto","adagio","addebito","addome","adeguato","aderire","adipe","adottare","adulare","affabile","affetto","affisso","affranto","aforisma","afoso","africano","agave","agente","agevole","aggancio","agire","agitare","agonismo","agricolo","agrumeto","aguzzo","alabarda","alato","albatro","alberato","albo","albume","alce","alcolico","alettone","alfa","algebra","aliante","alibi","alimento","allagato","allegro","allievo","allodola","allusivo","almeno","alogeno","alpaca","alpestre","altalena","alterno","alticcio","altrove","alunno","alveolo","alzare","amalgama","amanita","amarena","ambito","ambrato","ameba","america","ametista","amico","ammasso","ammenda","ammirare","ammonito","amore","ampio","ampliare","amuleto","anacardo","anagrafe","analista","anarchia","anatra","anca","ancella","ancora","andare","andrea","anello","angelo","angolare","angusto","anima","annegare","annidato","anno","annuncio","anonimo","anticipo","anzi","apatico","apertura","apode","apparire","appetito","appoggio","approdo","appunto","aprile","arabica","arachide","aragosta","araldica","arancio","aratura","arazzo","arbitro","archivio","ardito","arenile","argento","argine","arguto","aria","armonia","arnese","arredato","arringa","arrosto","arsenico","arso","artefice","arzillo","asciutto","ascolto","asepsi","asettico","asfalto","asino","asola","aspirato","aspro","assaggio","asse","assoluto","assurdo","asta","astenuto","astice","astratto","atavico","ateismo","atomico","atono","attesa","attivare","attorno","attrito","attuale","ausilio","austria","autista","autonomo","autunno","avanzato","avere","avvenire","avviso","avvolgere","azione","azoto","azzimo","azzurro","babele","baccano","bacino","baco","badessa","badilata","bagnato","baita","balcone","baldo","balena","ballata","balzano","bambino","bandire","baraonda","barbaro","barca","baritono","barlume","barocco","basilico","basso","batosta","battuto","baule","bava","bavosa","becco","beffa","belgio","belva","benda","benevole","benigno","benzina","bere","berlina","beta","bibita","bici","bidone","bifido","biga","bilancia","bimbo","binocolo","biologo","bipede","bipolare","birbante","birra","biscotto","bisesto","bisnonno","bisonte","bisturi","bizzarro","blando","blatta","bollito","bonifico","bordo","bosco","botanico","bottino","bozzolo","braccio","bradipo","brama","branca","bravura","bretella","brevetto","brezza","briglia","brillante","brindare","broccolo","brodo","bronzina","brullo","bruno","bubbone","buca","budino","buffone","buio","bulbo","buono","burlone","burrasca","bussola","busta","cadetto","caduco","calamaro","calcolo","calesse","calibro","calmo","caloria","cambusa","camerata","camicia","cammino","camola","campale","canapa","candela","cane","canino","canotto","cantina","capace","capello","capitolo","capogiro","cappero","capra","capsula","carapace","carcassa","cardo","carisma","carovana","carretto","cartolina","casaccio","cascata","caserma","caso","cassone","castello","casuale","catasta","catena","catrame","cauto","cavillo","cedibile","cedrata","cefalo","celebre","cellulare","cena","cenone","centesimo","ceramica","cercare","certo","cerume","cervello","cesoia","cespo","ceto","chela","chiaro","chicca","chiedere","chimera","china","chirurgo","chitarra","ciao","ciclismo","cifrare","cigno","cilindro","ciottolo","circa","cirrosi","citrico","cittadino","ciuffo","civetta","civile","classico","clinica","cloro","cocco","codardo","codice","coerente","cognome","collare","colmato","colore","colposo","coltivato","colza","coma","cometa","commando","comodo","computer","comune","conciso","condurre","conferma","congelare","coniuge","connesso","conoscere","consumo","continuo","convegno","coperto","copione","coppia","copricapo","corazza","cordata","coricato","cornice","corolla","corpo","corredo","corsia","cortese","cosmico","costante","cottura","covato","cratere","cravatta","creato","credere","cremoso","crescita","creta","criceto","crinale","crisi","critico","croce","cronaca","crostata","cruciale","crusca","cucire","cuculo","cugino","cullato","cupola","curatore","cursore","curvo","cuscino","custode","dado","daino","dalmata","damerino","daniela","dannoso","danzare","datato","davanti","davvero","debutto","decennio","deciso","declino","decollo","decreto","dedicato","definito","deforme","degno","delegare","delfino","delirio","delta","demenza","denotato","dentro","deposito","derapata","derivare","deroga","descritto","deserto","desiderio","desumere","detersivo","devoto","diametro","dicembre","diedro","difeso","diffuso","digerire","digitale","diluvio","dinamico","dinnanzi","dipinto","diploma","dipolo","diradare","dire","dirotto","dirupo","disagio","discreto","disfare","disgelo","disposto","distanza","disumano","dito","divano","divelto","dividere","divorato","doblone","docente","doganale","dogma","dolce","domato","domenica","dominare","dondolo","dono","dormire","dote","dottore","dovuto","dozzina","drago","druido","dubbio","dubitare","ducale","duna","duomo","duplice","duraturo","ebano","eccesso","ecco","eclissi","economia","edera","edicola","edile","editoria","educare","egemonia","egli","egoismo","egregio","elaborato","elargire","elegante","elencato","eletto","elevare","elfico","elica","elmo","elsa","eluso","emanato","emblema","emesso","emiro","emotivo","emozione","empirico","emulo","endemico","enduro","energia","enfasi","enoteca","entrare","enzima","epatite","epilogo","episodio","epocale","eppure","equatore","erario","erba","erboso","erede","eremita","erigere","ermetico","eroe","erosivo","errante","esagono","esame","esanime","esaudire","esca","esempio","esercito","esibito","esigente","esistere","esito","esofago","esortato","esoso","espanso","espresso","essenza","esso","esteso","estimare","estonia","estroso","esultare","etilico","etnico","etrusco","etto","euclideo","europa","evaso","evidenza","evitato","evoluto","evviva","fabbrica","faccenda","fachiro","falco","famiglia","fanale","fanfara","fango","fantasma","fare","farfalla","farinoso","farmaco","fascia","fastoso","fasullo","faticare","fato","favoloso","febbre","fecola","fede","fegato","felpa","feltro","femmina","fendere","fenomeno","fermento","ferro","fertile","fessura","festivo","fetta","feudo","fiaba","fiducia","fifa","figurato","filo","finanza","finestra","finire","fiore","fiscale","fisico","fiume","flacone","flamenco","flebo","flemma","florido","fluente","fluoro","fobico","focaccia","focoso","foderato","foglio","folata","folclore","folgore","fondente","fonetico","fonia","fontana","forbito","forchetta","foresta","formica","fornaio","foro","fortezza","forzare","fosfato","fosso","fracasso","frana","frassino","fratello","freccetta","frenata","fresco","frigo","frollino","fronde","frugale","frutta","fucilata","fucsia","fuggente","fulmine","fulvo","fumante","fumetto","fumoso","fune","funzione","fuoco","furbo","furgone","furore","fuso","futile","gabbiano","gaffe","galateo","gallina","galoppo","gambero","gamma","garanzia","garbo","garofano","garzone","gasdotto","gasolio","gastrico","gatto","gaudio","gazebo","gazzella","geco","gelatina","gelso","gemello","gemmato","gene","genitore","gennaio","genotipo","gergo","ghepardo","ghiaccio","ghisa","giallo","gilda","ginepro","giocare","gioiello","giorno","giove","girato","girone","gittata","giudizio","giurato","giusto","globulo","glutine","gnomo","gobba","golf","gomito","gommone","gonfio","gonna","governo","gracile","grado","grafico","grammo","grande","grattare","gravoso","grazia","greca","gregge","grifone","grigio","grinza","grotta","gruppo","guadagno","guaio","guanto","guardare","gufo","guidare","ibernato","icona","identico","idillio","idolo","idra","idrico","idrogeno","igiene","ignaro","ignorato","ilare","illeso","illogico","illudere","imballo","imbevuto","imbocco","imbuto","immane","immerso","immolato","impacco","impeto","impiego","importo","impronta","inalare","inarcare","inattivo","incanto","incendio","inchino","incisivo","incluso","incontro","incrocio","incubo","indagine","india","indole","inedito","infatti","infilare","inflitto","ingaggio","ingegno","inglese","ingordo","ingrosso","innesco","inodore","inoltrare","inondato","insano","insetto","insieme","insonnia","insulina","intasato","intero","intonaco","intuito","inumidire","invalido","invece","invito","iperbole","ipnotico","ipotesi","ippica","iride","irlanda","ironico","irrigato","irrorare","isolato","isotopo","isterico","istituto","istrice","italia","iterare","labbro","labirinto","lacca","lacerato","lacrima","lacuna","laddove","lago","lampo","lancetta","lanterna","lardoso","larga","laringe","lastra","latenza","latino","lattuga","lavagna","lavoro","legale","leggero","lembo","lentezza","lenza","leone","lepre","lesivo","lessato","lesto","letterale","leva","levigato","libero","lido","lievito","lilla","limatura","limitare","limpido","lineare","lingua","liquido","lira","lirica","lisca","lite","litigio","livrea","locanda","lode","logica","lombare","londra","longevo","loquace","lorenzo","loto","lotteria","luce","lucidato","lumaca","luminoso","lungo","lupo","luppolo","lusinga","lusso","lutto","macabro","macchina","macero","macinato","madama","magico","maglia","magnete","magro","maiolica","malafede","malgrado","malinteso","malsano","malto","malumore","mana","mancia","mandorla","mangiare","manifesto","mannaro","manovra","mansarda","mantide","manubrio","mappa","maratona","marcire","maretta","marmo","marsupio","maschera","massaia","mastino","materasso","matricola","mattone","maturo","mazurca","meandro","meccanico","mecenate","medesimo","meditare","mega","melassa","melis","melodia","meninge","meno","mensola","mercurio","merenda","merlo","meschino","mese","messere","mestolo","metallo","metodo","mettere","miagolare","mica","micelio","michele","microbo","midollo","miele","migliore","milano","milite","mimosa","minerale","mini","minore","mirino","mirtillo","miscela","missiva","misto","misurare","mitezza","mitigare","mitra","mittente","mnemonico","modello","modifica","modulo","mogano","mogio","mole","molosso","monastero","monco","mondina","monetario","monile","monotono","monsone","montato","monviso","mora","mordere","morsicato","mostro","motivato","motosega","motto","movenza","movimento","mozzo","mucca","mucosa","muffa","mughetto","mugnaio","mulatto","mulinello","multiplo","mummia","munto","muovere","murale","musa","muscolo","musica","mutevole","muto","nababbo","nafta","nanometro","narciso","narice","narrato","nascere","nastrare","naturale","nautica","naviglio","nebulosa","necrosi","negativo","negozio","nemmeno","neofita","neretto","nervo","nessuno","nettuno","neutrale","neve","nevrotico","nicchia","ninfa","nitido","nobile","nocivo","nodo","nome","nomina","nordico","normale","norvegese","nostrano","notare","notizia","notturno","novella","nucleo","nulla","numero","nuovo","nutrire","nuvola","nuziale","oasi","obbedire","obbligo","obelisco","oblio","obolo","obsoleto","occasione","occhio","occidente","occorrere","occultare","ocra","oculato","odierno","odorare","offerta","offrire","offuscato","oggetto","oggi","ognuno","olandese","olfatto","oliato","oliva","ologramma","oltre","omaggio","ombelico","ombra","omega","omissione","ondoso","onere","onice","onnivoro","onorevole","onta","operato","opinione","opposto","oracolo","orafo","ordine","orecchino","orefice","orfano","organico","origine","orizzonte","orma","ormeggio","ornativo","orologio","orrendo","orribile","ortensia","ortica","orzata","orzo","osare","oscurare","osmosi","ospedale","ospite","ossa","ossidare","ostacolo","oste","otite","otre","ottagono","ottimo","ottobre","ovale","ovest","ovino","oviparo","ovocito","ovunque","ovviare","ozio","pacchetto","pace","pacifico","padella","padrone","paese","paga","pagina","palazzina","palesare","pallido","palo","palude","pandoro","pannello","paolo","paonazzo","paprica","parabola","parcella","parere","pargolo","pari","parlato","parola","partire","parvenza","parziale","passivo","pasticca","patacca","patologia","pattume","pavone","peccato","pedalare","pedonale","peggio","peloso","penare","pendice","penisola","pennuto","penombra","pensare","pentola","pepe","pepita","perbene","percorso","perdonato","perforare","pergamena","periodo","permesso","perno","perplesso","persuaso","pertugio","pervaso","pesatore","pesista","peso","pestifero","petalo","pettine","petulante","pezzo","piacere","pianta","piattino","piccino","picozza","piega","pietra","piffero","pigiama","pigolio","pigro","pila","pilifero","pillola","pilota","pimpante","pineta","pinna","pinolo","pioggia","piombo","piramide","piretico","pirite","pirolisi","pitone","pizzico","placebo","planare","plasma","platano","plenario","pochezza","poderoso","podismo","poesia","poggiare","polenta","poligono","pollice","polmonite","polpetta","polso","poltrona","polvere","pomice","pomodoro","ponte","popoloso","porfido","poroso","porpora","porre","portata","posa","positivo","possesso","postulato","potassio","potere","pranzo","prassi","pratica","precluso","predica","prefisso","pregiato","prelievo","premere","prenotare","preparato","presenza","pretesto","prevalso","prima","principe","privato","problema","procura","produrre","profumo","progetto","prolunga","promessa","pronome","proposta","proroga","proteso","prova","prudente","prugna","prurito","psiche","pubblico","pudica","pugilato","pugno","pulce","pulito","pulsante","puntare","pupazzo","pupilla","puro","quadro","qualcosa","quasi","querela","quota","raccolto","raddoppio","radicale","radunato","raffica","ragazzo","ragione","ragno","ramarro","ramingo","ramo","randagio","rantolare","rapato","rapina","rappreso","rasatura","raschiato","rasente","rassegna","rastrello","rata","ravveduto","reale","recepire","recinto","recluta","recondito","recupero","reddito","redimere","regalato","registro","regola","regresso","relazione","remare","remoto","renna","replica","reprimere","reputare","resa","residente","responso","restauro","rete","retina","retorica","rettifica","revocato","riassunto","ribadire","ribelle","ribrezzo","ricarica","ricco","ricevere","riciclato","ricordo","ricreduto","ridicolo","ridurre","rifasare","riflesso","riforma","rifugio","rigare","rigettato","righello","rilassato","rilevato","rimanere","rimbalzo","rimedio","rimorchio","rinascita","rincaro","rinforzo","rinnovo","rinomato","rinsavito","rintocco","rinuncia","rinvenire","riparato","ripetuto","ripieno","riportare","ripresa","ripulire","risata","rischio","riserva","risibile","riso","rispetto","ristoro","risultato","risvolto","ritardo","ritegno","ritmico","ritrovo","riunione","riva","riverso","rivincita","rivolto","rizoma","roba","robotico","robusto","roccia","roco","rodaggio","rodere","roditore","rogito","rollio","romantico","rompere","ronzio","rosolare","rospo","rotante","rotondo","rotula","rovescio","rubizzo","rubrica","ruga","rullino","rumine","rumoroso","ruolo","rupe","russare","rustico","sabato","sabbiare","sabotato","sagoma","salasso","saldatura","salgemma","salivare","salmone","salone","saltare","saluto","salvo","sapere","sapido","saporito","saraceno","sarcasmo","sarto","sassoso","satellite","satira","satollo","saturno","savana","savio","saziato","sbadiglio","sbalzo","sbancato","sbarra","sbattere","sbavare","sbendare","sbirciare","sbloccato","sbocciato","sbrinare","sbruffone","sbuffare","scabroso","scadenza","scala","scambiare","scandalo","scapola","scarso","scatenare","scavato","scelto","scenico","scettro","scheda","schiena","sciarpa","scienza","scindere","scippo","sciroppo","scivolo","sclerare","scodella","scolpito","scomparto","sconforto","scoprire","scorta","scossone","scozzese","scriba","scrollare","scrutinio","scuderia","scultore","scuola","scuro","scusare","sdebitare","sdoganare","seccatura","secondo","sedano","seggiola","segnalato","segregato","seguito","selciato","selettivo","sella","selvaggio","semaforo","sembrare","seme","seminato","sempre","senso","sentire","sepolto","sequenza","serata","serbato","sereno","serio","serpente","serraglio","servire","sestina","setola","settimana","sfacelo","sfaldare","sfamato","sfarzoso","sfaticato","sfera","sfida","sfilato","sfinge","sfocato","sfoderare","sfogo","sfoltire","sforzato","sfratto","sfruttato","sfuggito","sfumare","sfuso","sgabello","sgarbato","sgonfiare","sgorbio","sgrassato","sguardo","sibilo","siccome","sierra","sigla","signore","silenzio","sillaba","simbolo","simpatico","simulato","sinfonia","singolo","sinistro","sino","sintesi","sinusoide","sipario","sisma","sistole","situato","slitta","slogatura","sloveno","smarrito","smemorato","smentito","smeraldo","smilzo","smontare","smottato","smussato","snellire","snervato","snodo","sobbalzo","sobrio","soccorso","sociale","sodale","soffitto","sogno","soldato","solenne","solido","sollazzo","solo","solubile","solvente","somatico","somma","sonda","sonetto","sonnifero","sopire","soppeso","sopra","sorgere","sorpasso","sorriso","sorso","sorteggio","sorvolato","sospiro","sosta","sottile","spada","spalla","spargere","spatola","spavento","spazzola","specie","spedire","spegnere","spelatura","speranza","spessore","spettrale","spezzato","spia","spigoloso","spillato","spinoso","spirale","splendido","sportivo","sposo","spranga","sprecare","spronato","spruzzo","spuntino","squillo","sradicare","srotolato","stabile","stacco","staffa","stagnare","stampato","stantio","starnuto","stasera","statuto","stelo","steppa","sterzo","stiletto","stima","stirpe","stivale","stizzoso","stonato","storico","strappo","stregato","stridulo","strozzare","strutto","stuccare","stufo","stupendo","subentro","succoso","sudore","suggerito","sugo","sultano","suonare","superbo","supporto","surgelato","surrogato","sussurro","sutura","svagare","svedese","sveglio","svelare","svenuto","svezia","sviluppo","svista","svizzera","svolta","svuotare","tabacco","tabulato","tacciare","taciturno","tale","talismano","tampone","tannino","tara","tardivo","targato","tariffa","tarpare","tartaruga","tasto","tattico","taverna","tavolata","tazza","teca","tecnico","telefono","temerario","tempo","temuto","tendone","tenero","tensione","tentacolo","teorema","terme","terrazzo","terzetto","tesi","tesserato","testato","tetro","tettoia","tifare","tigella","timbro","tinto","tipico","tipografo","tiraggio","tiro","titanio","titolo","titubante","tizio","tizzone","toccare","tollerare","tolto","tombola","tomo","tonfo","tonsilla","topazio","topologia","toppa","torba","tornare","torrone","tortora","toscano","tossire","tostatura","totano","trabocco","trachea","trafila","tragedia","tralcio","tramonto","transito","trapano","trarre","trasloco","trattato","trave","treccia","tremolio","trespolo","tributo","tricheco","trifoglio","trillo","trincea","trio","tristezza","triturato","trivella","tromba","trono","troppo","trottola","trovare","truccato","tubatura","tuffato","tulipano","tumulto","tunisia","turbare","turchino","tuta","tutela","ubicato","uccello","uccisore","udire","uditivo","uffa","ufficio","uguale","ulisse","ultimato","umano","umile","umorismo","uncinetto","ungere","ungherese","unicorno","unificato","unisono","unitario","unte","uovo","upupa","uragano","urgenza","urlo","usanza","usato","uscito","usignolo","usuraio","utensile","utilizzo","utopia","vacante","vaccinato","vagabondo","vagliato","valanga","valgo","valico","valletta","valoroso","valutare","valvola","vampata","vangare","vanitoso","vano","vantaggio","vanvera","vapore","varano","varcato","variante","vasca","vedetta","vedova","veduto","vegetale","veicolo","velcro","velina","velluto","veloce","venato","vendemmia","vento","verace","verbale","vergogna","verifica","vero","verruca","verticale","vescica","vessillo","vestale","veterano","vetrina","vetusto","viandante","vibrante","vicenda","vichingo","vicinanza","vidimare","vigilia","vigneto","vigore","vile","villano","vimini","vincitore","viola","vipera","virgola","virologo","virulento","viscoso","visione","vispo","vissuto","visura","vita","vitello","vittima","vivanda","vivido","viziare","voce","voga","volatile","volere","volpe","voragine","vulcano","zampogna","zanna","zappato","zattera","zavorra","zefiro","zelante","zelo","zenzero","zerbino","zibetto","zinco","zircone","zitto","zolla","zotico","zucchero","zufolo","zulu","zuppa"]});var gi=_1((fg0,XD0)=>{XD0.exports=["abaco","abdomen","abeja","abierto","abogado","abono","aborto","abrazo","abrir","abuelo","abuso","acabar","academia","acceso","accion","aceite","acelga","acento","aceptar","acido","aclarar","acne","acoger","acoso","activo","acto","actriz","actuar","acudir","acuerdo","acusar","adicto","admitir","adoptar","adorno","aduana","adulto","aereo","afectar","aficion","afinar","afirmar","agil","agitar","agonia","agosto","agotar","agregar","agrio","agua","agudo","aguila","aguja","ahogo","ahorro","aire","aislar","ajedrez","ajeno","ajuste","alacran","alambre","alarma","alba","album","alcalde","aldea","alegre","alejar","alerta","aleta","alfiler","alga","algodon","aliado","aliento","alivio","alma","almeja","almibar","altar","alteza","altivo","alto","altura","alumno","alzar","amable","amante","amapola","amargo","amasar","ambar","ambito","ameno","amigo","amistad","amor","amparo","amplio","ancho","anciano","ancla","andar","anden","anemia","angulo","anillo","animo","anis","anotar","antena","antiguo","antojo","anual","anular","anuncio","anadir","anejo","ano","apagar","aparato","apetito","apio","aplicar","apodo","aporte","apoyo","aprender","aprobar","apuesta","apuro","arado","arana","arar","arbitro","arbol","arbusto","archivo","arco","arder","ardilla","arduo","area","arido","aries","armonia","arnes","aroma","arpa","arpon","arreglo","arroz","arruga","arte","artista","asa","asado","asalto","ascenso","asegurar","aseo","asesor","asiento","asilo","asistir","asno","asombro","aspero","astilla","astro","astuto","asumir","asunto","atajo","ataque","atar","atento","ateo","atico","atleta","atomo","atraer","atroz","atun","audaz","audio","auge","aula","aumento","ausente","autor","aval","avance","avaro","ave","avellana","avena","avestruz","avion","aviso","ayer","ayuda","ayuno","azafran","azar","azote","azucar","azufre","azul","baba","babor","bache","bahia","baile","bajar","balanza","balcon","balde","bambu","banco","banda","bano","barba","barco","barniz","barro","bascula","baston","basura","batalla","bateria","batir","batuta","baul","bazar","bebe","bebida","bello","besar","beso","bestia","bicho","bien","bingo","blanco","bloque","blusa","boa","bobina","bobo","boca","bocina","boda","bodega","boina","bola","bolero","bolsa","bomba","bondad","bonito","bono","bonsai","borde","borrar","bosque","bote","botin","boveda","bozal","bravo","brazo","brecha","breve","brillo","brinco","brisa","broca","broma","bronce","brote","bruja","brusco","bruto","buceo","bucle","bueno","buey","bufanda","bufon","buho","buitre","bulto","burbuja","burla","burro","buscar","butaca","buzon","caballo","cabeza","cabina","cabra","cacao","cadaver","cadena","caer","cafe","caida","caiman","caja","cajon","cal","calamar","calcio","caldo","calidad","calle","calma","calor","calvo","cama","cambio","camello","camino","campo","cancer","candil","canela","canguro","canica","canto","cana","canon","caoba","caos","capaz","capitan","capote","captar","capucha","cara","carbon","carcel","careta","carga","carino","carne","carpeta","carro","carta","casa","casco","casero","caspa","castor","catorce","catre","caudal","causa","cazo","cebolla","ceder","cedro","celda","celebre","celoso","celula","cemento","ceniza","centro","cerca","cerdo","cereza","cero","cerrar","certeza","cesped","cetro","chacal","chaleco","champu","chancla","chapa","charla","chico","chiste","chivo","choque","choza","chuleta","chupar","ciclon","ciego","cielo","cien","cierto","cifra","cigarro","cima","cinco","cine","cinta","cipres","circo","ciruela","cisne","cita","ciudad","clamor","clan","claro","clase","clave","cliente","clima","clinica","cobre","coccion","cochino","cocina","coco","codigo","codo","cofre","coger","cohete","cojin","cojo","cola","colcha","colegio","colgar","colina","collar","colmo","columna","combate","comer","comida","comodo","compra","conde","conejo","conga","conocer","consejo","contar","copa","copia","corazon","corbata","corcho","cordon","corona","correr","coser","cosmos","costa","craneo","crater","crear","crecer","creido","crema","cria","crimen","cripta","crisis","cromo","cronica","croqueta","crudo","cruz","cuadro","cuarto","cuatro","cubo","cubrir","cuchara","cuello","cuento","cuerda","cuesta","cueva","cuidar","culebra","culpa","culto","cumbre","cumplir","cuna","cuneta","cuota","cupon","cupula","curar","curioso","curso","curva","cutis","dama","danza","dar","dardo","datil","deber","debil","decada","decir","dedo","defensa","definir","dejar","delfin","delgado","delito","demora","denso","dental","deporte","derecho","derrota","desayuno","deseo","desfile","desnudo","destino","desvio","detalle","detener","deuda","dia","diablo","diadema","diamante","diana","diario","dibujo","dictar","diente","dieta","diez","dificil","digno","dilema","diluir","dinero","directo","dirigir","disco","diseno","disfraz","diva","divino","doble","doce","dolor","domingo","don","donar","dorado","dormir","dorso","dos","dosis","dragon","droga","ducha","duda","duelo","dueno","dulce","duo","duque","durar","dureza","duro","ebano","ebrio","echar","eco","ecuador","edad","edicion","edificio","editor","educar","efecto","eficaz","eje","ejemplo","elefante","elegir","elemento","elevar","elipse","elite","elixir","elogio","eludir","embudo","emitir","emocion","empate","empeno","empleo","empresa","enano","encargo","enchufe","encia","enemigo","enero","enfado","enfermo","engano","enigma","enlace","enorme","enredo","ensayo","ensenar","entero","entrar","envase","envio","epoca","equipo","erizo","escala","escena","escolar","escribir","escudo","esencia","esfera","esfuerzo","espada","espejo","espia","esposa","espuma","esqui","estar","este","estilo","estufa","etapa","eterno","etica","etnia","evadir","evaluar","evento","evitar","exacto","examen","exceso","excusa","exento","exigir","exilio","existir","exito","experto","explicar","exponer","extremo","fabrica","fabula","fachada","facil","factor","faena","faja","falda","fallo","falso","faltar","fama","familia","famoso","faraon","farmacia","farol","farsa","fase","fatiga","fauna","favor","fax","febrero","fecha","feliz","feo","feria","feroz","fertil","fervor","festin","fiable","fianza","fiar","fibra","ficcion","ficha","fideo","fiebre","fiel","fiera","fiesta","figura","fijar","fijo","fila","filete","filial","filtro","fin","finca","fingir","finito","firma","flaco","flauta","flecha","flor","flota","fluir","flujo","fluor","fobia","foca","fogata","fogon","folio","folleto","fondo","forma","forro","fortuna","forzar","fosa","foto","fracaso","fragil","franja","frase","fraude","freir","freno","fresa","frio","frito","fruta","fuego","fuente","fuerza","fuga","fumar","funcion","funda","furgon","furia","fusil","futbol","futuro","gacela","gafas","gaita","gajo","gala","galeria","gallo","gamba","ganar","gancho","ganga","ganso","garaje","garza","gasolina","gastar","gato","gavilan","gemelo","gemir","gen","genero","genio","gente","geranio","gerente","germen","gesto","gigante","gimnasio","girar","giro","glaciar","globo","gloria","gol","golfo","goloso","golpe","goma","gordo","gorila","gorra","gota","goteo","gozar","grada","grafico","grano","grasa","gratis","grave","grieta","grillo","gripe","gris","grito","grosor","grua","grueso","grumo","grupo","guante","guapo","guardia","guerra","guia","guino","guion","guiso","guitarra","gusano","gustar","haber","habil","hablar","hacer","hacha","hada","hallar","hamaca","harina","haz","hazana","hebilla","hebra","hecho","helado","helio","hembra","herir","hermano","heroe","hervir","hielo","hierro","higado","higiene","hijo","himno","historia","hocico","hogar","hoguera","hoja","hombre","hongo","honor","honra","hora","hormiga","horno","hostil","hoyo","hueco","huelga","huerta","hueso","huevo","huida","huir","humano","humedo","humilde","humo","hundir","huracan","hurto","icono","ideal","idioma","idolo","iglesia","iglu","igual","ilegal","ilusion","imagen","iman","imitar","impar","imperio","imponer","impulso","incapaz","indice","inerte","infiel","informe","ingenio","inicio","inmenso","inmune","innato","insecto","instante","interes","intimo","intuir","inutil","invierno","ira","iris","ironia","isla","islote","jabali","jabon","jamon","jarabe","jardin","jarra","jaula","jazmin","jefe","jeringa","jinete","jornada","joroba","joven","joya","juerga","jueves","juez","jugador","jugo","juguete","juicio","junco","jungla","junio","juntar","jupiter","jurar","justo","juvenil","juzgar","kilo","koala","labio","lacio","lacra","lado","ladron","lagarto","lagrima","laguna","laico","lamer","lamina","lampara","lana","lancha","langosta","lanza","lapiz","largo","larva","lastima","lata","latex","latir","laurel","lavar","lazo","leal","leccion","leche","lector","leer","legion","legumbre","lejano","lengua","lento","lena","leon","leopardo","lesion","letal","letra","leve","leyenda","libertad","libro","licor","lider","lidiar","lienzo","liga","ligero","lima","limite","limon","limpio","lince","lindo","linea","lingote","lino","linterna","liquido","liso","lista","litera","litio","litro","llaga","llama","llanto","llave","llegar","llenar","llevar","llorar","llover","lluvia","lobo","locion","loco","locura","logica","logro","lombriz","lomo","lonja","lote","lucha","lucir","lugar","lujo","luna","lunes","lupa","lustro","luto","luz","maceta","macho","madera","madre","maduro","maestro","mafia","magia","mago","maiz","maldad","maleta","malla","malo","mama","mambo","mamut","manco","mando","manejar","manga","maniqui","manjar","mano","manso","manta","manana","mapa","maquina","mar","marco","marea","marfil","margen","marido","marmol","marron","martes","marzo","masa","mascara","masivo","matar","materia","matiz","matriz","maximo","mayor","mazorca","mecha","medalla","medio","medula","mejilla","mejor","melena","melon","memoria","menor","mensaje","mente","menu","mercado","merengue","merito","mes","meson","meta","meter","metodo","metro","mezcla","miedo","miel","miembro","miga","mil","milagro","militar","millon","mimo","mina","minero","minimo","minuto","miope","mirar","misa","miseria","misil","mismo","mitad","mito","mochila","mocion","moda","modelo","moho","mojar","molde","moler","molino","momento","momia","monarca","moneda","monja","monto","mono","morada","morder","moreno","morir","morro","morsa","mortal","mosca","mostrar","motivo","mover","movil","mozo","mucho","mudar","mueble","muela","muerte","muestra","mugre","mujer","mula","muleta","multa","mundo","muneca","mural","muro","musculo","museo","musgo","musica","muslo","nacar","nacion","nadar","naipe","naranja","nariz","narrar","nasal","natal","nativo","natural","nausea","naval","nave","navidad","necio","nectar","negar","negocio","negro","neon","nervio","neto","neutro","nevar","nevera","nicho","nido","niebla","nieto","ninez","nino","nitido","nivel","nobleza","noche","nomina","noria","norma","norte","nota","noticia","novato","novela","novio","nube","nuca","nucleo","nudillo","nudo","nuera","nueve","nuez","nulo","numero","nutria","oasis","obeso","obispo","objeto","obra","obrero","observar","obtener","obvio","oca","ocaso","oceano","ochenta","ocho","ocio","ocre","octavo","octubre","oculto","ocupar","ocurrir","odiar","odio","odisea","oeste","ofensa","oferta","oficio","ofrecer","ogro","oido","oir","ojo","ola","oleada","olfato","olivo","olla","olmo","olor","olvido","ombligo","onda","onza","opaco","opcion","opera","opinar","oponer","optar","optica","opuesto","oracion","orador","oral","orbita","orca","orden","oreja","organo","orgia","orgullo","oriente","origen","orilla","oro","orquesta","oruga","osadia","oscuro","osezno","oso","ostra","otono","otro","oveja","ovulo","oxido","oxigeno","oyente","ozono","pacto","padre","paella","pagina","pago","pais","pajaro","palabra","palco","paleta","palido","palma","paloma","palpar","pan","panal","panico","pantera","panuelo","papa","papel","papilla","paquete","parar","parcela","pared","parir","paro","parpado","parque","parrafo","parte","pasar","paseo","pasion","paso","pasta","pata","patio","patria","pausa","pauta","pavo","payaso","peaton","pecado","pecera","pecho","pedal","pedir","pegar","peine","pelar","peldano","pelea","peligro","pellejo","pelo","peluca","pena","pensar","penon","peon","peor","pepino","pequeno","pera","percha","perder","pereza","perfil","perico","perla","permiso","perro","persona","pesa","pesca","pesimo","pestana","petalo","petroleo","pez","pezuna","picar","pichon","pie","piedra","pierna","pieza","pijama","pilar","piloto","pimienta","pino","pintor","pinza","pina","piojo","pipa","pirata","pisar","piscina","piso","pista","piton","pizca","placa","plan","plata","playa","plaza","pleito","pleno","plomo","pluma","plural","pobre","poco","poder","podio","poema","poesia","poeta","polen","policia","pollo","polvo","pomada","pomelo","pomo","pompa","poner","porcion","portal","posada","poseer","posible","poste","potencia","potro","pozo","prado","precoz","pregunta","premio","prensa","preso","previo","primo","principe","prision","privar","proa","probar","proceso","producto","proeza","profesor","programa","prole","promesa","pronto","propio","proximo","prueba","publico","puchero","pudor","pueblo","puerta","puesto","pulga","pulir","pulmon","pulpo","pulso","puma","punto","punal","puno","pupa","pupila","pure","quedar","queja","quemar","querer","queso","quieto","quimica","quince","quitar","rabano","rabia","rabo","racion","radical","raiz","rama","rampa","rancho","rango","rapaz","rapido","rapto","rasgo","raspa","rato","rayo","raza","razon","reaccion","realidad","rebano","rebote","recaer","receta","rechazo","recoger","recreo","recto","recurso","red","redondo","reducir","reflejo","reforma","refran","refugio","regalo","regir","regla","regreso","rehen","reino","reir","reja","relato","relevo","relieve","relleno","reloj","remar","remedio","remo","rencor","rendir","renta","reparto","repetir","reposo","reptil","res","rescate","resina","respeto","resto","resumen","retiro","retorno","retrato","reunir","reves","revista","rey","rezar","rico","riego","rienda","riesgo","rifa","rigido","rigor","rincon","rinon","rio","riqueza","risa","ritmo","rito","rizo","roble","roce","rociar","rodar","rodeo","rodilla","roer","rojizo","rojo","romero","romper","ron","ronco","ronda","ropa","ropero","rosa","rosca","rostro","rotar","rubi","rubor","rudo","rueda","rugir","ruido","ruina","ruleta","rulo","rumbo","rumor","ruptura","ruta","rutina","sabado","saber","sabio","sable","sacar","sagaz","sagrado","sala","saldo","salero","salir","salmon","salon","salsa","salto","salud","salvar","samba","sancion","sandia","sanear","sangre","sanidad","sano","santo","sapo","saque","sardina","sarten","sastre","satan","sauna","saxofon","seccion","seco","secreto","secta","sed","seguir","seis","sello","selva","semana","semilla","senda","sensor","senal","senor","separar","sepia","sequia","ser","serie","sermon","servir","sesenta","sesion","seta","setenta","severo","sexo","sexto","sidra","siesta","siete","siglo","signo","silaba","silbar","silencio","silla","simbolo","simio","sirena","sistema","sitio","situar","sobre","socio","sodio","sol","solapa","soldado","soledad","solido","soltar","solucion","sombra","sondeo","sonido","sonoro","sonrisa","sopa","soplar","soporte","sordo","sorpresa","sorteo","sosten","sotano","suave","subir","suceso","sudor","suegra","suelo","sueno","suerte","sufrir","sujeto","sultan","sumar","superar","suplir","suponer","supremo","sur","surco","sureno","surgir","susto","sutil","tabaco","tabique","tabla","tabu","taco","tacto","tajo","talar","talco","talento","talla","talon","tamano","tambor","tango","tanque","tapa","tapete","tapia","tapon","taquilla","tarde","tarea","tarifa","tarjeta","tarot","tarro","tarta","tatuaje","tauro","taza","tazon","teatro","techo","tecla","tecnica","tejado","tejer","tejido","tela","telefono","tema","temor","templo","tenaz","tender","tener","tenis","tenso","teoria","terapia","terco","termino","ternura","terror","tesis","tesoro","testigo","tetera","texto","tez","tibio","tiburon","tiempo","tienda","tierra","tieso","tigre","tijera","tilde","timbre","timido","timo","tinta","tio","tipico","tipo","tira","tiron","titan","titere","titulo","tiza","toalla","tobillo","tocar","tocino","todo","toga","toldo","tomar","tono","tonto","topar","tope","toque","torax","torero","tormenta","torneo","toro","torpedo","torre","torso","tortuga","tos","tosco","toser","toxico","trabajo","tractor","traer","trafico","trago","traje","tramo","trance","trato","trauma","trazar","trebol","tregua","treinta","tren","trepar","tres","tribu","trigo","tripa","triste","triunfo","trofeo","trompa","tronco","tropa","trote","trozo","truco","trueno","trufa","tuberia","tubo","tuerto","tumba","tumor","tunel","tunica","turbina","turismo","turno","tutor","ubicar","ulcera","umbral","unidad","unir","universo","uno","untar","una","urbano","urbe","urgente","urna","usar","usuario","util","utopia","uva","vaca","vacio","vacuna","vagar","vago","vaina","vajilla","vale","valido","valle","valor","valvula","vampiro","vara","variar","varon","vaso","vecino","vector","vehiculo","veinte","vejez","vela","velero","veloz","vena","vencer","venda","veneno","vengar","venir","venta","venus","ver","verano","verbo","verde","vereda","verja","verso","verter","via","viaje","vibrar","vicio","victima","vida","video","vidrio","viejo","viernes","vigor","vil","villa","vinagre","vino","vinedo","violin","viral","virgo","virtud","visor","vispera","vista","vitamina","viudo","vivaz","vivero","vivir","vivo","volcan","volumen","volver","voraz","votar","voto","voz","vuelo","vulgar","yacer","yate","yegua","yema","yerno","yeso","yodo","yoga","yogur","zafiro","zanja","zapato","zarza","zona","zorro","zumo","zurdo"]});var hi=_1((kg0,YD0)=>{YD0.exports=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]});var mi=_1((xg0,JD0)=>{JD0.exports=["abacate","abaixo","abalar","abater","abduzir","abelha","aberto","abismo","abotoar","abranger","abreviar","abrigar","abrupto","absinto","absoluto","absurdo","abutre","acabado","acalmar","acampar","acanhar","acaso","aceitar","acelerar","acenar","acervo","acessar","acetona","achatar","acidez","acima","acionado","acirrar","aclamar","aclive","acolhida","acomodar","acoplar","acordar","acumular","acusador","adaptar","adega","adentro","adepto","adequar","aderente","adesivo","adeus","adiante","aditivo","adjetivo","adjunto","admirar","adorar","adquirir","adubo","adverso","advogado","aeronave","afastar","aferir","afetivo","afinador","afivelar","aflito","afluente","afrontar","agachar","agarrar","agasalho","agenciar","agilizar","agiota","agitado","agora","agradar","agreste","agrupar","aguardar","agulha","ajoelhar","ajudar","ajustar","alameda","alarme","alastrar","alavanca","albergue","albino","alcatra","aldeia","alecrim","alegria","alertar","alface","alfinete","algum","alheio","aliar","alicate","alienar","alinhar","aliviar","almofada","alocar","alpiste","alterar","altitude","alucinar","alugar","aluno","alusivo","alvo","amaciar","amador","amarelo","amassar","ambas","ambiente","ameixa","amenizar","amido","amistoso","amizade","amolador","amontoar","amoroso","amostra","amparar","ampliar","ampola","anagrama","analisar","anarquia","anatomia","andaime","anel","anexo","angular","animar","anjo","anomalia","anotado","ansioso","anterior","anuidade","anunciar","anzol","apagador","apalpar","apanhado","apego","apelido","apertada","apesar","apetite","apito","aplauso","aplicada","apoio","apontar","aposta","aprendiz","aprovar","aquecer","arame","aranha","arara","arcada","ardente","areia","arejar","arenito","aresta","argiloso","argola","arma","arquivo","arraial","arrebate","arriscar","arroba","arrumar","arsenal","arterial","artigo","arvoredo","asfaltar","asilado","aspirar","assador","assinar","assoalho","assunto","astral","atacado","atadura","atalho","atarefar","atear","atender","aterro","ateu","atingir","atirador","ativo","atoleiro","atracar","atrevido","atriz","atual","atum","auditor","aumentar","aura","aurora","autismo","autoria","autuar","avaliar","avante","avaria","avental","avesso","aviador","avisar","avulso","axila","azarar","azedo","azeite","azulejo","babar","babosa","bacalhau","bacharel","bacia","bagagem","baiano","bailar","baioneta","bairro","baixista","bajular","baleia","baliza","balsa","banal","bandeira","banho","banir","banquete","barato","barbado","baronesa","barraca","barulho","baseado","bastante","batata","batedor","batida","batom","batucar","baunilha","beber","beijo","beirada","beisebol","beldade","beleza","belga","beliscar","bendito","bengala","benzer","berimbau","berlinda","berro","besouro","bexiga","bezerro","bico","bicudo","bienal","bifocal","bifurcar","bigorna","bilhete","bimestre","bimotor","biologia","biombo","biosfera","bipolar","birrento","biscoito","bisneto","bispo","bissexto","bitola","bizarro","blindado","bloco","bloquear","boato","bobagem","bocado","bocejo","bochecha","boicotar","bolada","boletim","bolha","bolo","bombeiro","bonde","boneco","bonita","borbulha","borda","boreal","borracha","bovino","boxeador","branco","brasa","braveza","breu","briga","brilho","brincar","broa","brochura","bronzear","broto","bruxo","bucha","budismo","bufar","bule","buraco","busca","busto","buzina","cabana","cabelo","cabide","cabo","cabrito","cacau","cacetada","cachorro","cacique","cadastro","cadeado","cafezal","caiaque","caipira","caixote","cajado","caju","calafrio","calcular","caldeira","calibrar","calmante","calota","camada","cambista","camisa","camomila","campanha","camuflar","canavial","cancelar","caneta","canguru","canhoto","canivete","canoa","cansado","cantar","canudo","capacho","capela","capinar","capotar","capricho","captador","capuz","caracol","carbono","cardeal","careca","carimbar","carneiro","carpete","carreira","cartaz","carvalho","casaco","casca","casebre","castelo","casulo","catarata","cativar","caule","causador","cautelar","cavalo","caverna","cebola","cedilha","cegonha","celebrar","celular","cenoura","censo","centeio","cercar","cerrado","certeiro","cerveja","cetim","cevada","chacota","chaleira","chamado","chapada","charme","chatice","chave","chefe","chegada","cheiro","cheque","chicote","chifre","chinelo","chocalho","chover","chumbo","chutar","chuva","cicatriz","ciclone","cidade","cidreira","ciente","cigana","cimento","cinto","cinza","ciranda","circuito","cirurgia","citar","clareza","clero","clicar","clone","clube","coado","coagir","cobaia","cobertor","cobrar","cocada","coelho","coentro","coeso","cogumelo","coibir","coifa","coiote","colar","coleira","colher","colidir","colmeia","colono","coluna","comando","combinar","comentar","comitiva","comover","complexo","comum","concha","condor","conectar","confuso","congelar","conhecer","conjugar","consumir","contrato","convite","cooperar","copeiro","copiador","copo","coquetel","coragem","cordial","corneta","coronha","corporal","correio","cortejo","coruja","corvo","cosseno","costela","cotonete","couro","couve","covil","cozinha","cratera","cravo","creche","credor","creme","crer","crespo","criada","criminal","crioulo","crise","criticar","crosta","crua","cruzeiro","cubano","cueca","cuidado","cujo","culatra","culminar","culpar","cultura","cumprir","cunhado","cupido","curativo","curral","cursar","curto","cuspir","custear","cutelo","damasco","datar","debater","debitar","deboche","debulhar","decalque","decimal","declive","decote","decretar","dedal","dedicado","deduzir","defesa","defumar","degelo","degrau","degustar","deitado","deixar","delator","delegado","delinear","delonga","demanda","demitir","demolido","dentista","depenado","depilar","depois","depressa","depurar","deriva","derramar","desafio","desbotar","descanso","desenho","desfiado","desgaste","desigual","deslize","desmamar","desova","despesa","destaque","desviar","detalhar","detentor","detonar","detrito","deusa","dever","devido","devotado","dezena","diagrama","dialeto","didata","difuso","digitar","dilatado","diluente","diminuir","dinastia","dinheiro","diocese","direto","discreta","disfarce","disparo","disquete","dissipar","distante","ditador","diurno","diverso","divisor","divulgar","dizer","dobrador","dolorido","domador","dominado","donativo","donzela","dormente","dorsal","dosagem","dourado","doutor","drenagem","drible","drogaria","duelar","duende","dueto","duplo","duquesa","durante","duvidoso","eclodir","ecoar","ecologia","edificar","edital","educado","efeito","efetivar","ejetar","elaborar","eleger","eleitor","elenco","elevador","eliminar","elogiar","embargo","embolado","embrulho","embutido","emenda","emergir","emissor","empatia","empenho","empinado","empolgar","emprego","empurrar","emulador","encaixe","encenado","enchente","encontro","endeusar","endossar","enfaixar","enfeite","enfim","engajado","engenho","englobar","engomado","engraxar","enguia","enjoar","enlatar","enquanto","enraizar","enrolado","enrugar","ensaio","enseada","ensino","ensopado","entanto","enteado","entidade","entortar","entrada","entulho","envergar","enviado","envolver","enxame","enxerto","enxofre","enxuto","epiderme","equipar","ereto","erguido","errata","erva","ervilha","esbanjar","esbelto","escama","escola","escrita","escuta","esfinge","esfolar","esfregar","esfumado","esgrima","esmalte","espanto","espelho","espiga","esponja","espreita","espumar","esquerda","estaca","esteira","esticar","estofado","estrela","estudo","esvaziar","etanol","etiqueta","euforia","europeu","evacuar","evaporar","evasivo","eventual","evidente","evoluir","exagero","exalar","examinar","exato","exausto","excesso","excitar","exclamar","executar","exemplo","exibir","exigente","exonerar","expandir","expelir","expirar","explanar","exposto","expresso","expulsar","externo","extinto","extrato","fabricar","fabuloso","faceta","facial","fada","fadiga","faixa","falar","falta","familiar","fandango","fanfarra","fantoche","fardado","farelo","farinha","farofa","farpa","fartura","fatia","fator","favorita","faxina","fazenda","fechado","feijoada","feirante","felino","feminino","fenda","feno","fera","feriado","ferrugem","ferver","festejar","fetal","feudal","fiapo","fibrose","ficar","ficheiro","figurado","fileira","filho","filme","filtrar","firmeza","fisgada","fissura","fita","fivela","fixador","fixo","flacidez","flamingo","flanela","flechada","flora","flutuar","fluxo","focal","focinho","fofocar","fogo","foguete","foice","folgado","folheto","forjar","formiga","forno","forte","fosco","fossa","fragata","fralda","frango","frasco","fraterno","freira","frente","fretar","frieza","friso","fritura","fronha","frustrar","fruteira","fugir","fulano","fuligem","fundar","fungo","funil","furador","furioso","futebol","gabarito","gabinete","gado","gaiato","gaiola","gaivota","galega","galho","galinha","galocha","ganhar","garagem","garfo","gargalo","garimpo","garoupa","garrafa","gasoduto","gasto","gata","gatilho","gaveta","gazela","gelado","geleia","gelo","gemada","gemer","gemido","generoso","gengiva","genial","genoma","genro","geologia","gerador","germinar","gesso","gestor","ginasta","gincana","gingado","girafa","girino","glacial","glicose","global","glorioso","goela","goiaba","golfe","golpear","gordura","gorjeta","gorro","gostoso","goteira","governar","gracejo","gradual","grafite","gralha","grampo","granada","gratuito","graveto","graxa","grego","grelhar","greve","grilo","grisalho","gritaria","grosso","grotesco","grudado","grunhido","gruta","guache","guarani","guaxinim","guerrear","guiar","guincho","guisado","gula","guloso","guru","habitar","harmonia","haste","haver","hectare","herdar","heresia","hesitar","hiato","hibernar","hidratar","hiena","hino","hipismo","hipnose","hipoteca","hoje","holofote","homem","honesto","honrado","hormonal","hospedar","humorado","iate","ideia","idoso","ignorado","igreja","iguana","ileso","ilha","iludido","iluminar","ilustrar","imagem","imediato","imenso","imersivo","iminente","imitador","imortal","impacto","impedir","implante","impor","imprensa","impune","imunizar","inalador","inapto","inativo","incenso","inchar","incidir","incluir","incolor","indeciso","indireto","indutor","ineficaz","inerente","infantil","infestar","infinito","inflamar","informal","infrator","ingerir","inibido","inicial","inimigo","injetar","inocente","inodoro","inovador","inox","inquieto","inscrito","inseto","insistir","inspetor","instalar","insulto","intacto","integral","intimar","intocado","intriga","invasor","inverno","invicto","invocar","iogurte","iraniano","ironizar","irreal","irritado","isca","isento","isolado","isqueiro","italiano","janeiro","jangada","janta","jararaca","jardim","jarro","jasmim","jato","javali","jazida","jejum","joaninha","joelhada","jogador","joia","jornal","jorrar","jovem","juba","judeu","judoca","juiz","julgador","julho","jurado","jurista","juro","justa","labareda","laboral","lacre","lactante","ladrilho","lagarta","lagoa","laje","lamber","lamentar","laminar","lampejo","lanche","lapidar","lapso","laranja","lareira","largura","lasanha","lastro","lateral","latido","lavanda","lavoura","lavrador","laxante","lazer","lealdade","lebre","legado","legendar","legista","leigo","leiloar","leitura","lembrete","leme","lenhador","lentilha","leoa","lesma","leste","letivo","letreiro","levar","leveza","levitar","liberal","libido","liderar","ligar","ligeiro","limitar","limoeiro","limpador","linda","linear","linhagem","liquidez","listagem","lisura","litoral","livro","lixa","lixeira","locador","locutor","lojista","lombo","lona","longe","lontra","lorde","lotado","loteria","loucura","lousa","louvar","luar","lucidez","lucro","luneta","lustre","lutador","luva","macaco","macete","machado","macio","madeira","madrinha","magnata","magreza","maior","mais","malandro","malha","malote","maluco","mamilo","mamoeiro","mamute","manada","mancha","mandato","manequim","manhoso","manivela","manobrar","mansa","manter","manusear","mapeado","maquinar","marcador","maresia","marfim","margem","marinho","marmita","maroto","marquise","marreco","martelo","marujo","mascote","masmorra","massagem","mastigar","matagal","materno","matinal","matutar","maxilar","medalha","medida","medusa","megafone","meiga","melancia","melhor","membro","memorial","menino","menos","mensagem","mental","merecer","mergulho","mesada","mesclar","mesmo","mesquita","mestre","metade","meteoro","metragem","mexer","mexicano","micro","migalha","migrar","milagre","milenar","milhar","mimado","minerar","minhoca","ministro","minoria","miolo","mirante","mirtilo","misturar","mocidade","moderno","modular","moeda","moer","moinho","moita","moldura","moleza","molho","molinete","molusco","montanha","moqueca","morango","morcego","mordomo","morena","mosaico","mosquete","mostarda","motel","motim","moto","motriz","muda","muito","mulata","mulher","multar","mundial","munido","muralha","murcho","muscular","museu","musical","nacional","nadador","naja","namoro","narina","narrado","nascer","nativa","natureza","navalha","navegar","navio","neblina","nebuloso","negativa","negociar","negrito","nervoso","neta","neural","nevasca","nevoeiro","ninar","ninho","nitidez","nivelar","nobreza","noite","noiva","nomear","nominal","nordeste","nortear","notar","noticiar","noturno","novelo","novilho","novo","nublado","nudez","numeral","nupcial","nutrir","nuvem","obcecado","obedecer","objetivo","obrigado","obscuro","obstetra","obter","obturar","ocidente","ocioso","ocorrer","oculista","ocupado","ofegante","ofensiva","oferenda","oficina","ofuscado","ogiva","olaria","oleoso","olhar","oliveira","ombro","omelete","omisso","omitir","ondulado","oneroso","ontem","opcional","operador","oponente","oportuno","oposto","orar","orbitar","ordem","ordinal","orfanato","orgasmo","orgulho","oriental","origem","oriundo","orla","ortodoxo","orvalho","oscilar","ossada","osso","ostentar","otimismo","ousadia","outono","outubro","ouvido","ovelha","ovular","oxidar","oxigenar","pacato","paciente","pacote","pactuar","padaria","padrinho","pagar","pagode","painel","pairar","paisagem","palavra","palestra","palheta","palito","palmada","palpitar","pancada","panela","panfleto","panqueca","pantanal","papagaio","papelada","papiro","parafina","parcial","pardal","parede","partida","pasmo","passado","pastel","patamar","patente","patinar","patrono","paulada","pausar","peculiar","pedalar","pedestre","pediatra","pedra","pegada","peitoral","peixe","pele","pelicano","penca","pendurar","peneira","penhasco","pensador","pente","perceber","perfeito","pergunta","perito","permitir","perna","perplexo","persiana","pertence","peruca","pescado","pesquisa","pessoa","petiscar","piada","picado","piedade","pigmento","pilastra","pilhado","pilotar","pimenta","pincel","pinguim","pinha","pinote","pintar","pioneiro","pipoca","piquete","piranha","pires","pirueta","piscar","pistola","pitanga","pivete","planta","plaqueta","platina","plebeu","plumagem","pluvial","pneu","poda","poeira","poetisa","polegada","policiar","poluente","polvilho","pomar","pomba","ponderar","pontaria","populoso","porta","possuir","postal","pote","poupar","pouso","povoar","praia","prancha","prato","praxe","prece","predador","prefeito","premiar","prensar","preparar","presilha","pretexto","prevenir","prezar","primata","princesa","prisma","privado","processo","produto","profeta","proibido","projeto","prometer","propagar","prosa","protetor","provador","publicar","pudim","pular","pulmonar","pulseira","punhal","punir","pupilo","pureza","puxador","quadra","quantia","quarto","quase","quebrar","queda","queijo","quente","querido","quimono","quina","quiosque","rabanada","rabisco","rachar","racionar","radial","raiar","rainha","raio","raiva","rajada","ralado","ramal","ranger","ranhura","rapadura","rapel","rapidez","raposa","raquete","raridade","rasante","rascunho","rasgar","raspador","rasteira","rasurar","ratazana","ratoeira","realeza","reanimar","reaver","rebaixar","rebelde","rebolar","recado","recente","recheio","recibo","recordar","recrutar","recuar","rede","redimir","redonda","reduzida","reenvio","refinar","refletir","refogar","refresco","refugiar","regalia","regime","regra","reinado","reitor","rejeitar","relativo","remador","remendo","remorso","renovado","reparo","repelir","repleto","repolho","represa","repudiar","requerer","resenha","resfriar","resgatar","residir","resolver","respeito","ressaca","restante","resumir","retalho","reter","retirar","retomada","retratar","revelar","revisor","revolta","riacho","rica","rigidez","rigoroso","rimar","ringue","risada","risco","risonho","robalo","rochedo","rodada","rodeio","rodovia","roedor","roleta","romano","roncar","rosado","roseira","rosto","rota","roteiro","rotina","rotular","rouco","roupa","roxo","rubro","rugido","rugoso","ruivo","rumo","rupestre","russo","sabor","saciar","sacola","sacudir","sadio","safira","saga","sagrada","saibro","salada","saleiro","salgado","saliva","salpicar","salsicha","saltar","salvador","sambar","samurai","sanar","sanfona","sangue","sanidade","sapato","sarda","sargento","sarjeta","saturar","saudade","saxofone","sazonal","secar","secular","seda","sedento","sediado","sedoso","sedutor","segmento","segredo","segundo","seiva","seleto","selvagem","semanal","semente","senador","senhor","sensual","sentado","separado","sereia","seringa","serra","servo","setembro","setor","sigilo","silhueta","silicone","simetria","simpatia","simular","sinal","sincero","singular","sinopse","sintonia","sirene","siri","situado","soberano","sobra","socorro","sogro","soja","solda","soletrar","solteiro","sombrio","sonata","sondar","sonegar","sonhador","sono","soprano","soquete","sorrir","sorteio","sossego","sotaque","soterrar","sovado","sozinho","suavizar","subida","submerso","subsolo","subtrair","sucata","sucesso","suco","sudeste","sufixo","sugador","sugerir","sujeito","sulfato","sumir","suor","superior","suplicar","suposto","suprimir","surdina","surfista","surpresa","surreal","surtir","suspiro","sustento","tabela","tablete","tabuada","tacho","tagarela","talher","talo","talvez","tamanho","tamborim","tampa","tangente","tanto","tapar","tapioca","tardio","tarefa","tarja","tarraxa","tatuagem","taurino","taxativo","taxista","teatral","tecer","tecido","teclado","tedioso","teia","teimar","telefone","telhado","tempero","tenente","tensor","tentar","termal","terno","terreno","tese","tesoura","testado","teto","textura","texugo","tiara","tigela","tijolo","timbrar","timidez","tingido","tinteiro","tiragem","titular","toalha","tocha","tolerar","tolice","tomada","tomilho","tonel","tontura","topete","tora","torcido","torneio","torque","torrada","torto","tostar","touca","toupeira","toxina","trabalho","tracejar","tradutor","trafegar","trajeto","trama","trancar","trapo","traseiro","tratador","travar","treino","tremer","trepidar","trevo","triagem","tribo","triciclo","tridente","trilogia","trindade","triplo","triturar","triunfal","trocar","trombeta","trova","trunfo","truque","tubular","tucano","tudo","tulipa","tupi","turbo","turma","turquesa","tutelar","tutorial","uivar","umbigo","unha","unidade","uniforme","urologia","urso","urtiga","urubu","usado","usina","usufruir","vacina","vadiar","vagaroso","vaidoso","vala","valente","validade","valores","vantagem","vaqueiro","varanda","vareta","varrer","vascular","vasilha","vassoura","vazar","vazio","veado","vedar","vegetar","veicular","veleiro","velhice","veludo","vencedor","vendaval","venerar","ventre","verbal","verdade","vereador","vergonha","vermelho","verniz","versar","vertente","vespa","vestido","vetorial","viaduto","viagem","viajar","viatura","vibrador","videira","vidraria","viela","viga","vigente","vigiar","vigorar","vilarejo","vinco","vinheta","vinil","violeta","virada","virtude","visitar","visto","vitral","viveiro","vizinho","voador","voar","vogal","volante","voleibol","voltagem","volumoso","vontade","vulto","vuvuzela","xadrez","xarope","xeque","xeretar","xerife","xingar","zangado","zarpar","zebu","zelador","zombar","zoologia","zumbido"]});var pi=_1((bg0,zD0)=>{zD0.exports=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"]});var JE=_1((ui)=>{Object.defineProperty(ui,"__esModule",{value:!0});var I4={};ui.wordlists=I4;var Q8;ui._default=Q8;try{ui._default=Q8=fi(),I4.czech=Q8}catch($){}try{ui._default=Q8=ki(),I4.chinese_simplified=Q8}catch($){}try{ui._default=Q8=xi(),I4.chinese_traditional=Q8}catch($){}try{ui._default=Q8=bi(),I4.korean=Q8}catch($){}try{ui._default=Q8=vi(),I4.french=Q8}catch($){}try{ui._default=Q8=yi(),I4.italian=Q8}catch($){}try{ui._default=Q8=gi(),I4.spanish=Q8}catch($){}try{ui._default=Q8=hi(),I4.japanese=Q8,I4.JA=Q8}catch($){}try{ui._default=Q8=mi(),I4.portuguese=Q8}catch($){}try{ui._default=Q8=pi(),I4.english=Q8,I4.EN=Q8}catch($){}});var Qo=_1(($o)=>{Object.defineProperty($o,"__esModule",{value:!0});var WD0=ol(),di=Ti(),li=Si(),KD0=kz(),$R=JE(),eV=$R._default,ci="Invalid mnemonic",xz="Invalid entropy",GD0="Invalid mnemonic checksum",ii=`A wordlist is required but a default could not be found.
Please pass a 2048 word array explicitly.`;function $O($){return($||"").normalize("NFKD")}function oi($,Q,Z){while($.length<Z)$=Q+$;return $}function ni($){return parseInt($,2)}function ri($){return $.map((Q)=>oi(Q.toString(2),"0",8)).join("")}function ai($){let Z=$.length*8/32,X=WD0.sha256(Uint8Array.from($));return ri(Array.from(X)).slice(0,Z)}function si($){return"mnemonic"+($||"")}function UD0($,Q){let Z=Uint8Array.from(Buffer.from($O($),"utf8")),X=Uint8Array.from(Buffer.from(si($O(Q)),"utf8")),Y=li.pbkdf2(di.sha512,Z,X,{c:2048,dkLen:64});return Buffer.from(Y)}$o.mnemonicToSeedSync=UD0;function VD0($,Q){let Z=Uint8Array.from(Buffer.from($O($),"utf8")),X=Uint8Array.from(Buffer.from(si($O(Q)),"utf8"));return li.pbkdf2Async(di.sha512,Z,X,{c:2048,dkLen:64}).then((Y)=>Buffer.from(Y))}$o.mnemonicToSeed=VD0;function ti($,Q){if(Q=Q||eV,!Q)throw Error(ii);let Z=$O($).split(" ");if(Z.length%3!==0)throw Error(ci);let X=Z.map((U)=>{let D=Q.indexOf(U);if(D===-1)throw Error(ci);return oi(D.toString(2),"0",11)}).join(""),Y=Math.floor(X.length/33)*32,z=X.slice(0,Y),J=X.slice(Y),q=z.match(/(.{1,8})/g).map(ni);if(q.length<16)throw Error(xz);if(q.length>32)throw Error(xz);if(q.length%4!==0)throw Error(xz);let W=Buffer.from(q);if(ai(W)!==J)throw Error(GD0);return W.toString("hex")}$o.mnemonicToEntropy=ti;function ei($,Q){if(!Buffer.isBuffer($))$=Buffer.from($,"hex");if(Q=Q||eV,!Q)throw Error(ii);if($.length<16)throw TypeError(xz);if($.length>32)throw TypeError(xz);if($.length%4!==0)throw TypeError(xz);let Z=ri(Array.from($)),X=ai($),J=(Z+X).match(/(.{1,11})/g).map((q)=>{let W=ni(q);return Q[W]});return Q[0]===""?J.join(""):J.join(" ")}$o.entropyToMnemonic=ei;function OD0($,Q,Z){if($=$||128,$%32!==0)throw TypeError(xz);return Q=Q||((X)=>Buffer.from(KD0.randomBytes(X))),ei(Q($/8),Z)}$o.generateMnemonic=OD0;function DD0($,Q){try{ti($,Q)}catch(Z){return!1}return!0}$o.validateMnemonic=DD0;function MD0($){let Q=$R.wordlists[$];if(Q)eV=Q;else throw Error('Could not find wordlist for language "'+$+'"')}$o.setDefaultWordlist=MD0;function PD0(){if(!eV)throw Error("No Default Wordlist set");return Object.keys($R.wordlists).filter(($)=>{if($==="JA"||$==="EN")return!1;return $R.wordlists[$].every((Q,Z)=>Q===eV[Z])})[0]}$o.getDefaultWordlist=PD0;var HD0=JE();$o.wordlists=HD0.wordlists});var R$={};x1(R$,{verifyAccountSignature:()=>iK,validateAccountSignatures:()=>yD0,signDigest:()=>lK,signAccountFrame:()=>sQ,setRuntimeSeed:()=>yz,registerTestKeys:()=>qE,registerSignerPublicKey:()=>XO,registerSignerKey:()=>aQ,registerSeededKeys:()=>vD0,lockRuntimeSeedUpdates:()=>xD0,getSignerPublicKey:()=>cK,getSignerPrivateKey:()=>zE,getSignerAddress:()=>bD0,getCachedSignerPublicKey:()=>rQ,getCachedSignerPrivateKey:()=>gz,getCachedSignerAddress:()=>ZO,deriveSignerKeySync:()=>j$,deriveSignerKey:()=>XR,deriveSignerAddressSync:()=>dK,clearSignerKeys:()=>WE});async function XR($,Q){return j$($,Q)}function j$($,Q){let Z=SD0(Q);if(Z!==null)return kD0($,Z);let X=Yo.encode(Q);return cj(mK,Jo($),X)}function yz($){if(Xo){console.warn(" Runtime seed update ignored (crypto lock enabled)");return}k7.clear(),L3.clear(),bz.clear(),vz.clear(),QR.clear()}function xD0($){Xo=$}function gz($){return k7.get($)||null}function rQ($){let Q=vz.get($);if(Q)return Q;let Z=L3.get($);if(Z)return Z;let X=k7.get($);if(!X)return null;let Y=yK(X);return L3.set($,Y),Y}function ZO($){let Q=bz.get($);if(Q)return Q;let Z=k7.get($);if(!Z)return null;let X=QO(Z);return bz.set($,X),X}function zE($,Q){let Z=k7.get(Q);if(Z)return Z;if($?.runtimeSeed===void 0||$?.runtimeSeed===null)throw Error(`CRYPTO_DETERMINISM_VIOLATION: getSignerPrivateKey called without env.runtimeSeed for signer ${Q}`);return YR($.runtimeSeed,Q)}function cK($,Q){let Z=vz.get(Q);if(Z)return Z;let X=L3.get(Q);if(X)return X;let Y=k7.get(Q);if(Y){let q=yK(Y);return L3.set(Q,q),q}if($?.runtimeSeed===void 0||$?.runtimeSeed===null)return null;let z=YR($.runtimeSeed,Q),J=yK(z);return L3.set(Q,J),J}function dK($,Q){let Z=j$($,Q);return QO(Z)}function bD0($,Q){let Z=bz.get(Q);if(Z)return Z;let X=k7.get(Q);if(X){let J=QO(X);return bz.set(Q,J),J}if($?.runtimeSeed===void 0||$?.runtimeSeed===null)return null;let Y=YR($.runtimeSeed,Q),z=QO(Y);return bz.set(Q,z),z}async function vD0($,Q){yz($);for(let Z of Q){let X=await XR($,Z);aQ(Z,X)}console.log(`\uD83D\uDD11 Registered ${Q.length} keys from seed`)}function aQ($,Q){k7.set($,Q),L3.set($,yK(Q)),bz.set($,QO(Q))}function XO($,Q){if(console.log(`\uD83D\uDCDD registerSignerPublicKey: signerId=${$.slice(-4)}, publicKey type=${typeof Q}`),k7.has($)){console.log(` signerId ${$.slice(-4)} already has private key, skipping public key registration`);return}let Z=typeof Q==="string"?Uint8Array.from(Buffer.from(Q.replace(/^0x/,""),"hex")):Q;console.log(`\uD83D\uDCDD Public key bytes: ${Z.length}`),vz.set($,Z),L3.delete($),console.log(` Registered external public key for ${$.slice(-4)}, total: ${vz.size}`)}async function qE($){throw Error("registerTestKeys is disabled. Use runtimeSeed + numeric signerIds (1,2,3...)")}function WE(){k7.clear(),L3.clear(),vz.clear()}function sQ($,Q,Z){if($?.runtimeSeed===void 0||$?.runtimeSeed===null)throw Error(`CRYPTO_DETERMINISM_VIOLATION: signAccountFrame called without env.runtimeSeed for signer ${Q}`);console.log(`\uD83D\uDD11 signAccountFrame CALLED: signerId=${Q.slice(-4)}, frameHash=${Z.slice(0,10)}, source=env`),console.log("\uD83D\uDD11 Available signerKeys:",Array.from(k7.keys()).map((Y)=>Y.slice(-4))),console.log("\uD83D\uDD11 Available signerPublicKeys:",Array.from(L3.keys()).map((Y)=>Y.slice(-4)));let X=lK($.runtimeSeed,Q,Z);return console.log(` Signed frame ${Z.slice(0,10)} by ${Q.slice(-4)}: ${X.slice(0,20)}...`),X}function lK($,Q,Z){Zo();let X=YR($,Q),Y=Buffer.from(Z.replace("0x",""),"hex"),[z,J]=Zl(Y,X,{recovered:!0,der:!1});return`0x${Buffer.from(z).toString("hex")+J.toString(16).padStart(2,"0")}`}function iK($,Q,Z,X){let Y=$?.quietRuntimeLogs===!0,z=cK($,Q);if(!z){if(console.warn(` Cannot verify - no public key for signerId=${Q.slice(-4)}`),!Y)console.warn(" Available keys:",Array.from(L3.keys()).map((J)=>J.slice(-4))),console.warn(" Available external keys:",Array.from(vz.keys()).map((J)=>J.slice(-4)));return!1}try{let J=X.replace("0x",""),q=Buffer.from(J.slice(0,128),"hex"),W=Buffer.from(Z.replace("0x",""),"hex");return mj(q,W,z)}catch(J){return console.error(` Signature verification error for ${Q.slice(-4)}:`,J),!1}}function yD0($,Q,Z,X){let Y=[],z=new Set(X);for(let q of Z)for(let W of Array.from(z))if(iK($,W,Q,q)){Y.push(W),z.delete(W);break}return{valid:Y.length===X.length,validSigners:Y}}var ZR,Zo=()=>{if(R3.hmacSha256Sync)return;let Q=!(typeof window<"u"&&typeof window.document<"u")&&(typeof globalThis.Bun<"u"||typeof process<"u"&&!!process.versions?.node);try{if(Q){let Z=(E9(),Q5(O9));if(Z&&typeof Z.createHmac==="function"){R3.hmacSha256Sync=(X,...Y)=>{let z=Z.createHmac("sha256",Buffer.from(X));for(let J of Y)z.update(Buffer.from(J));return new Uint8Array(z.digest())};return}}}catch(Z){console.warn("Failed to configure secp256k1 HMAC via crypto:",Z)}R3.hmacSha256Sync=(Z,...X)=>{return cj(mK,Z,uj(...X))}},k7,L3,bz,vz,Xo=!1,Yo,BD0,QR,ED0=($)=>Array.from($).map((Q)=>Q.toString(16).padStart(2,"0")).join(""),ID0=()=>{let $=globalThis.Buffer;if(!$||typeof $.isBuffer!=="function")globalThis.Buffer=I0},Jo=($)=>typeof $==="string"?Yo.encode($):$,_D0=($)=>typeof $==="string"?$:BD0.decode($),SD0=($)=>{let Q=$.trim();if(/^s\d+$/.test(Q))throw Error(`DEPRECATED_SIGNER_PREFIX: signerId "${$}" must be numeric (e.g. "1")`);let Z=Q.match(/^(\d+)$/);if(!Z)return null;let X=Number(Z[1]);if(!Number.isFinite(X))return null;return X>0?X-1:0},fD0=($)=>{ID0();let Q=_D0($).trim(),Z=QR.get(Q);if(Z)return Z;let X=Q.toLowerCase().replace(/\s+/g," ");if(ZR.validateMnemonic(X))return QR.set(Q,X),X;let Y=mK(Jo(Q)),z=ZR.entropyToMnemonic(ED0(Y));return QR.set(Q,z),z},kD0=($,Q)=>{let Z=fD0($),X=BK(Q),Y=t8.fromPhrase(Z,void 0,X);return x0(Y.privateKey)},YR=($,Q)=>{console.log(`\uD83D\uDD0D getOrDeriveKey: signerId=${Q.slice(-4)}`);let Z=k7.get(Q);if(Z)return console.log(` Found cached key for ${Q.slice(-4)}`),Z;if(console.log(` No cached key for ${Q.slice(-4)}, deriving from env.runtimeSeed...`),$===void 0||$===null)throw Error(`CRYPTO_DETERMINISM_VIOLATION: getOrDeriveKey called without env.runtimeSeed for signer ${Q}`);let X=typeof $==="string"?$.length:$.length;console.log(` Deriving key from env seed (${X} bytes)`);let Y=j$($,Q);return aQ(Q,Y),console.log(` Derived and registered key for ${Q.slice(-4)}`),Y},QO=($)=>{let Q=yK($,!1);return`0x${p1(Q.slice(1)).slice(-40)}`.toLowerCase()};var H8=p(()=>{pB();Ul();rB();_z();A6();s6();ZR=V2(Qo(),1);Zo();k7=new Map,L3=new Map,bz=new Map,vz=new Map,Yo=new TextEncoder,BD0=new TextDecoder,QR=new Map});var GE={};x1(GE,{sep:()=>Po,resolve:()=>JR,relative:()=>Ko,posix:()=>jo,parse:()=>Mo,normalize:()=>KE,join:()=>Wo,isAbsolute:()=>qo,format:()=>Do,extname:()=>Oo,dirname:()=>Uo,delimiter:()=>Ho,default:()=>hD0,basename:()=>Vo,_makeLong:()=>Go});function N$($){if(typeof $!=="string")throw TypeError("Path must be a string. Received "+JSON.stringify($))}function zo($,Q){var Z="",X=0,Y=-1,z=0,J;for(var q=0;q<=$.length;++q){if(q<$.length)J=$.charCodeAt(q);else if(J===47)break;else J=47;if(J===47){if(Y===q-1||z===1);else if(Y!==q-1&&z===2){if(Z.length<2||X!==2||Z.charCodeAt(Z.length-1)!==46||Z.charCodeAt(Z.length-2)!==46){if(Z.length>2){var W=Z.lastIndexOf("/");if(W!==Z.length-1){if(W===-1)Z="",X=0;else Z=Z.slice(0,W),X=Z.length-1-Z.lastIndexOf("/");Y=q,z=0;continue}}else if(Z.length===2||Z.length===1){Z="",X=0,Y=q,z=0;continue}}if(Q){if(Z.length>0)Z+="/..";else Z="..";X=2}}else{if(Z.length>0)Z+="/"+$.slice(Y+1,q);else Z=$.slice(Y+1,q);X=q-Y-1}Y=q,z=0}else if(J===46&&z!==-1)++z;else z=-1}return Z}function gD0($,Q){var Z=Q.dir||Q.root,X=Q.base||(Q.name||"")+(Q.ext||"");if(!Z)return X;if(Z===Q.root)return Z+X;return Z+$+X}function JR(){var $="",Q=!1,Z;for(var X=arguments.length-1;X>=-1&&!Q;X--){var Y;if(X>=0)Y=arguments[X];else{if(Z===void 0)Z=process.cwd();Y=Z}if(N$(Y),Y.length===0)continue;$=Y+"/"+$,Q=Y.charCodeAt(0)===47}if($=zo($,!Q),Q)if($.length>0)return"/"+$;else return"/";else if($.length>0)return $;else return"."}function KE($){if(N$($),$.length===0)return".";var Q=$.charCodeAt(0)===47,Z=$.charCodeAt($.length-1)===47;if($=zo($,!Q),$.length===0&&!Q)$=".";if($.length>0&&Z)$+="/";if(Q)return"/"+$;return $}function qo($){return N$($),$.length>0&&$.charCodeAt(0)===47}function Wo(){if(arguments.length===0)return".";var $;for(var Q=0;Q<arguments.length;++Q){var Z=arguments[Q];if(N$(Z),Z.length>0)if($===void 0)$=Z;else $+="/"+Z}if($===void 0)return".";return KE($)}function Ko($,Q){if(N$($),N$(Q),$===Q)return"";if($=JR($),Q=JR(Q),$===Q)return"";var Z=1;for(;Z<$.length;++Z)if($.charCodeAt(Z)!==47)break;var X=$.length,Y=X-Z,z=1;for(;z<Q.length;++z)if(Q.charCodeAt(z)!==47)break;var J=Q.length,q=J-z,W=Y<q?Y:q,G=-1,U=0;for(;U<=W;++U){if(U===W){if(q>W){if(Q.charCodeAt(z+U)===47)return Q.slice(z+U+1);else if(U===0)return Q.slice(z+U)}else if(Y>W){if($.charCodeAt(Z+U)===47)G=U;else if(U===0)G=0}break}var D=$.charCodeAt(Z+U),P=Q.charCodeAt(z+U);if(D!==P)break;else if(D===47)G=U}var H="";for(U=Z+G+1;U<=X;++U)if(U===X||$.charCodeAt(U)===47)if(H.length===0)H+="..";else H+="/..";if(H.length>0)return H+Q.slice(z+G);else{if(z+=G,Q.charCodeAt(z)===47)++z;return Q.slice(z)}}function Go($){return $}function Uo($){if(N$($),$.length===0)return".";var Q=$.charCodeAt(0),Z=Q===47,X=-1,Y=!0;for(var z=$.length-1;z>=1;--z)if(Q=$.charCodeAt(z),Q===47){if(!Y){X=z;break}}else Y=!1;if(X===-1)return Z?"/":".";if(Z&&X===1)return"//";return $.slice(0,X)}function Vo($,Q){if(Q!==void 0&&typeof Q!=="string")throw TypeError('"ext" argument must be a string');N$($);var Z=0,X=-1,Y=!0,z;if(Q!==void 0&&Q.length>0&&Q.length<=$.length){if(Q.length===$.length&&Q===$)return"";var J=Q.length-1,q=-1;for(z=$.length-1;z>=0;--z){var W=$.charCodeAt(z);if(W===47){if(!Y){Z=z+1;break}}else{if(q===-1)Y=!1,q=z+1;if(J>=0)if(W===Q.charCodeAt(J)){if(--J===-1)X=z}else J=-1,X=q}}if(Z===X)X=q;else if(X===-1)X=$.length;return $.slice(Z,X)}else{for(z=$.length-1;z>=0;--z)if($.charCodeAt(z)===47){if(!Y){Z=z+1;break}}else if(X===-1)Y=!1,X=z+1;if(X===-1)return"";return $.slice(Z,X)}}function Oo($){N$($);var Q=-1,Z=0,X=-1,Y=!0,z=0;for(var J=$.length-1;J>=0;--J){var q=$.charCodeAt(J);if(q===47){if(!Y){Z=J+1;break}continue}if(X===-1)Y=!1,X=J+1;if(q===46){if(Q===-1)Q=J;else if(z!==1)z=1}else if(Q!==-1)z=-1}if(Q===-1||X===-1||z===0||z===1&&Q===X-1&&Q===Z+1)return"";return $.slice(Q,X)}function Do($){if($===null||typeof $!=="object")throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof $);return gD0("/",$)}function Mo($){N$($);var Q={root:"",dir:"",base:"",ext:"",name:""};if($.length===0)return Q;var Z=$.charCodeAt(0),X=Z===47,Y;if(X)Q.root="/",Y=1;else Y=0;var z=-1,J=0,q=-1,W=!0,G=$.length-1,U=0;for(;G>=Y;--G){if(Z=$.charCodeAt(G),Z===47){if(!W){J=G+1;break}continue}if(q===-1)W=!1,q=G+1;if(Z===46){if(z===-1)z=G;else if(U!==1)U=1}else if(z!==-1)U=-1}if(z===-1||q===-1||U===0||U===1&&z===q-1&&z===J+1){if(q!==-1)if(J===0&&X)Q.base=Q.name=$.slice(1,q);else Q.base=Q.name=$.slice(J,q)}else{if(J===0&&X)Q.name=$.slice(1,z),Q.base=$.slice(1,q);else Q.name=$.slice(J,z),Q.base=$.slice(J,q);Q.ext=$.slice(z,q)}if(J>0)Q.dir=$.slice(0,J-1);else if(X)Q.dir="/";return Q}var Po="/",Ho=":",jo,hD0;var UE=p(()=>{jo=(($)=>($.posix=$,$))({resolve:JR,normalize:KE,isAbsolute:qo,join:Wo,relative:Ko,_makeLong:Go,dirname:Uo,basename:Vo,extname:Oo,format:Do,parse:Mo,sep:Po,delimiter:Ho,win32:null,posix:null}),hD0=jo});var Ro={};x1(Ro,{loadJurisdictions:()=>VE,getCachedJurisdictions:()=>pD0,clearJurisdictionsCache:()=>mD0});function VE(){if(v5)throw Error("loadJurisdictions() not available in browser - use evm.ts generateJurisdictions() instead");if(_4)return _4;let $={version:"1.0.0",lastUpdated:new Date().toISOString(),jurisdictions:{},defaults:{timeout:30000,retryAttempts:3,gasLimit:1e6}};try{let Q=(()=>{throw new Error("Cannot require module "+"fs");})(),Z=(UE(),Q5(GE)),X=Z.resolve(process.cwd(),"jurisdictions","jurisdictions.json"),Y=Z.resolve(process.cwd(),"jurisdictions.json"),z=Q.existsSync(X)?X:Y;if(!Q.existsSync(z))return console.warn("INFO: jurisdictions.json not found in /jurisdictions/ or root; using defaults"),_4=$,_4;let J=Q.readFileSync(z,"utf8");return _4=JSON.parse(J),console.log("\uD83D\uDCCB Jurisdictions loaded from file (cached for future use)"),console.log(`   Version: ${_4?.version}`),console.log(`   Last updated: ${_4?.lastUpdated}`),console.log(`   Jurisdictions: ${Object.keys(_4?.jurisdictions||{}).join(", ")}`),_4}catch(Q){return console.error("ERROR: Failed to load jurisdictions.json:",Q),_4=$,_4}}function mD0(){_4=null,console.log("\uD83D\uDD04 Jurisdictions cache cleared")}function pD0(){return _4}var _4=null;var OE=p(()=>{B8()});function u6($){let Q=String($).toLowerCase();if(!Q.startsWith("0x"))return Q;let Z=Q.slice(2);if(!/^[0-9a-f]*$/.test(Z))return Q;if(Z.length===64)return Q;if(Z.length<64)return`0x${Z.padStart(64,"0")}`;return Q}function JO($,Q){let Z=u6($),X=u6(Q);if(Z===X)return 0;return Z<X?-1:1}function K5($,Q){return JO($,Q)<0}function DE($,Q){let Z=M0.getAddress($),X=u6(Q),Y=M0.solidityPacked(["address","bytes32"],[Z,X]);return M0.keccak256(Y)}function ME($,Q,Z){let X=$.trim();if(X.includes(":")&&!X.startsWith("0x")){let[G,U]=X.split(":",2);if(G&&U){let D=G.startsWith("0x")?G:`0x${G}`,P=ME(U,D,Z);return{...P,provider:D,inputType:"provider-scoped",entityId:DE(D,P.entityId)}}}let Y=X.match(/^(0x)?([0-9a-fA-F]{64})$/);if(Y){let G=u6(`0x${Y[2]}`);return{input:X,entityId:G,provider:Q,inputType:"full",shortId:YO(G),needsProfileLookup:!1}}let z=X.match(/^#?([0-9a-fA-F]{4})$/i);if(z){let G=z[1].toLowerCase();if(Z){let U=Z(G);if(U)return{input:X,entityId:u6(U),provider:Q,inputType:"short",shortId:G.toUpperCase(),needsProfileLookup:!1}}return{input:X,entityId:`0x${G.padEnd(64,"0")}`,provider:Q,inputType:"short",shortId:G.toUpperCase(),needsProfileLookup:!0}}let J=X.match(/^#?(\d+)$/);if(J){let G=BigInt(J[1]),U=BigInt(281474976710656);if(G>=0n&&G<U){let D=`0x${G.toString(16).padStart(64,"0")}`;return{input:X,entityId:D,provider:Q,inputType:"numbered",shortId:G.toString(),needsProfileLookup:!1}}}let q=X.match(/^@?([a-zA-Z][a-zA-Z0-9_.-]*)$/);if(q){let G=q[1].toLowerCase();if(Z){let D=Z(G);if(D)return{input:X,entityId:u6(D),provider:Q,inputType:"named",shortId:G,needsProfileLookup:!1}}let U=M0.keccak256(M0.toUtf8Bytes(G));return{input:X,entityId:U,provider:Q,inputType:"named",shortId:G,needsProfileLookup:!0}}let W=X.startsWith("0x")?X:`0x${X}`;return{input:X,entityId:u6(W),provider:Q,inputType:"full",shortId:YO(W),needsProfileLookup:!1}}function YO($){let Q=u6($),Z=Q.slice(2);try{let X=BigInt(Q),Y=BigInt(281474976710656);if(X>=0n&&X<Y)return X.toString()}catch{}return Z.slice(0,4).toUpperCase()}function No($,Q){let Z=YO($);if(Q)return`${Q.slice(2,6).toLowerCase()}:#${Z}`;return`#${Z}`}function Co($,Q){return u6($)===u6(Q)}function Lo($){let Q=$.trim();if(Q.includes(":")&&!Q.startsWith("0x")){let[Z]=Q.split(":",2);if(Z)return Z.startsWith("0x")?Z:`0x${Z}`}return null}var h8=p(()=>{A6()});function uD0($,Q){if(typeof Q==="bigint")return`BigInt(${Q.toString()})`;if(Q instanceof Map)return Object.fromEntries(Q);if(Q instanceof Set)return Array.from(Q);if(Q&&typeof Q==="object"&&Q.type==="Buffer"&&Array.isArray(Q.data))return`Buffer(${Q.data.length} bytes)`;if(typeof Q==="function")return`[Function: ${Q.name||"anonymous"}]`;return Q}function h1($,Q){try{return JSON.stringify($,uD0,Q)}catch(Z){return`[Error stringifying: ${Z.message}]`}}function cD0($,Q){if(typeof Q==="string"&&Q.startsWith("BigInt(")&&Q.endsWith(")")){let Z=Q.slice(7,-1);return BigInt(Z)}return Q}function PE($){try{return JSON.parse($,cD0)}catch(Q){throw Error(`Failed to parse JSON: ${Q.message}`)}}var WR={};x1(WR,{verifySignatureRecovery:()=>RE,unpackRealSignatures:()=>NE,testGasOptimization:()=>dD0,testFullCycle:()=>Bo,recoverHankoEntities:()=>wo,packRealSignatures:()=>Fo,detectSignatureCount:()=>Ao,createDirectHashSignature:()=>To,buildRealHanko:()=>qR});var jE=($)=>{if(typeof Buffer.concat==="function")return Buffer.concat($);else{let Q=$.reduce((Y,z)=>Y+z.length,0),Z=new Uint8Array(Q),X=0;for(let Y of $)Z.set(Y,X),X+=Y.length;return Buffer.from(Z)}},HE=($,Q)=>{if(typeof Buffer.alloc==="function")return Buffer.alloc($,Q);else{let Z=new Uint8Array($);if(Q!==void 0)Z.fill(Q);return Buffer.from(Z)}},To=async($,Q)=>{try{if($.length!==32)throw Error(`Invalid hash length: ${$.length} bytes (expected 32)`);let Z=M0.hexlify($);if(Z.length!==66)throw Error(`Invalid hash hex length: ${Z.length} (expected 66 with 0x prefix)`);let Y=new M0.SigningKey(M0.hexlify(Q)).sign(Z),z=M0.getBytes(Y.r),J=M0.getBytes(Y.s),q=Y.v,W=new Uint8Array(32),G=new Uint8Array(32);return W.set(z,32-z.length),G.set(J,32-J.length),console.log(`\uD83D\uDD11 Created signature: r=${M0.hexlify(z).slice(0,10)}..., s=${M0.hexlify(J).slice(0,10)}..., v=${q}`),jE([Buffer.from(W),Buffer.from(G),Buffer.from([q])])}catch(Z){throw console.error(` Failed to create direct hash signature: ${Z}`),Z}},RE=async($,Q,Z)=>{try{let X=M0.hexlify(Q.slice(0,32)),Y=M0.hexlify(Q.slice(32,64)),z=Q[64],J=z>=27?z-27:z,q=M0.recoverAddress(M0.hexlify($),{r:X,s:Y,v:z,yParity:J}),W=q.toLowerCase()===Z.toLowerCase();return console.log(`\uD83D\uDD0D Recovery test: expected=${Z.slice(0,10)}..., recovered=${q.slice(0,10)}..., match=${W}`),W}catch(X){return console.error(` Failed to verify signature recovery: ${X}`),!1}},Fo=($)=>{if(console.log(`\uD83D\uDCE6 Packing ${$.length} REAL signatures...`),$.length===0)return HE(0);for(let J=0;J<$.length;J++){if(!$[J]||$[J].length!==65)throw Error(`Invalid signature ${J}: ${$[J]?.length||0} bytes (expected 65)`);let q=$[J][64];if(q!==27&&q!==28)throw Error(`Invalid v value in signature ${J}: ${q} (expected 27 or 28)`)}let Q=HE($.length*64),Z=0;for(let J of $){let q=J.slice(0,64);Q.set(q,Z),Z+=64}let X=Math.ceil($.length/8),Y=HE(X);for(let J=0;J<$.length;J++){let q=$[J][64],W=Math.floor(J/8),G=J%8;if(q===28)Y[W]|=1<<G}let z=jE([Q,Y]);return console.log(` Packed ${$.length} real signatures: ${z.length} bytes`),z},Ao=($)=>{if($.length===0)return 0;for(let Q=1;Q<=16000;Q++){let Z=Q*64,X=Math.ceil(Q/8),Y=Z+X;if($.length===Y)return console.log(`\uD83D\uDD0D Detected ${Q} signatures from ${$.length} bytes`),Q;if(Y>$.length)break}throw Error(`Invalid packed signature length: ${$.length} bytes - cannot detect count`)},NE=($)=>{let Q=Ao($);if(console.log(`\uD83D\uDCE6 Unpacking ${Q} REAL signatures...`),Q===0)return[];let Z=Q*64,X=Math.ceil(Q/8),Y=Z+X;if($.length!==Y)throw Error(`Invalid packed signature length: ${$.length} (expected ${Y})`);let z=$.slice(0,Z),J=$.slice(Z),q=[];for(let W=0;W<Q;W++){let G=z.slice(W*64,(W+1)*64),U=Math.floor(W/8),D=W%8,H=(J[U]>>D&1)===0?27:28,N=jE([G,Buffer.from([H])]);q.push(N)}return console.log(` Unpacked ${q.length} real signatures`),q},qR=async($,Q)=>{console.log(`\uD83D\uDD8B  Building REAL hanko: ${Q.claims.length} claims, ${Q.privateKeys.length} signatures`);let Z=[],X=[];for(let q=0;q<Q.privateKeys.length;q++){let W=Q.privateKeys[q],G=new M0.Wallet(M0.hexlify(W));X.push(G.address),console.log(`\uD83D\uDD11 Signing with key ${q+1}/${Q.privateKeys.length}: ${G.address.slice(0,10)}...`);let U=await To($,W);if(Z.push(U),!await RE($,U,G.address))throw Error(`Signature verification failed for key ${q}`)}let Y=Fo(Z),z=Q.claims.map((q)=>({entityId:q.entityId,entityIndexes:q.entityIndexes,weights:q.weights,threshold:q.threshold})),J={placeholders:Q.noEntities,packedSignatures:Y,claims:z};return console.log(" Built REAL hanko with verifiable signatures"),console.log(`   \uD83D\uDCCB Signers: ${X.map((q)=>q.slice(0,10)+"...").join(", ")}`),console.log(`   \uD83D\uDCCA Signature count: ${Z.length} (detected from length)`),J},wo=async($,Q)=>{console.log("\uD83D\uDD0D Recovering hanko entities with flashloan governance...");let Z=NE($.packedSignatures),X=[];for(let Y=0;Y<Z.length;Y++)try{let z=Z[Y],J=M0.hexlify(z.slice(0,32)),q=M0.hexlify(z.slice(32,64)),W=z[64],G=W>=27?W-27:W,U=M0.recoverAddress(M0.hexlify(Q),{r:J,s:q,v:W,yParity:G}),D=Buffer.from(M0.zeroPadValue(U,32).slice(2),"hex");X.push(D),console.log(` Recovered signer ${Y+1}: ${U.slice(0,10)}...`)}catch(z){console.log(` Failed to recover signature ${Y+1}: ${z}`)}for(let Y=0;Y<$.claims.length;Y++){let z=$.claims[Y];if(!z)continue;console.log(`\uD83D\uDD04 Processing claim ${Y+1}/${$.claims.length}: Entity ${M0.hexlify(z.entityId).slice(0,10)}...`);let J=0,q=$.placeholders.length+Z.length+$.claims.length;for(let W=0;W<z.entityIndexes.length;W++){let G=z.entityIndexes[W];if(G===void 0)continue;if(G>=q){console.log(` Entity index ${G} out of bounds (max: ${q})`);continue}let U=G-$.placeholders.length-Z.length;if(U===Y){console.log(` Claim ${Y} cannot reference itself`);continue}if(G<$.placeholders.length){console.log(`  \uD83D\uDCCD Index ${G}: Placeholder (no power)`);continue}else if(G<$.placeholders.length+Z.length){let D=z.weights[W]||0;console.log(`  \uD83D\uDD11 Index ${G}: EOA signature (power: ${D})`),J+=D}else{let D=U,P=z.weights[W]||0;console.log(`  \uD83D\uDD25 Index ${G}: ASSUME claim ${D} = YES (power: ${P})`),J+=P}}if(J>=z.threshold)X.push(z.entityId),console.log(` Claim ${Y+1} passed: ${J}/${z.threshold} (flashloan assumption)`);else console.log(` Claim ${Y+1} failed: ${J}/${z.threshold}`)}return console.log(`\uD83D\uDCCA Flashloan recovery complete: ${X.length} yes, ${$.placeholders.length} placeholders`),{yesEntities:X,noEntities:$.placeholders,claims:$.claims}},Bo=async()=>{console.log(`
\uD83E\uDDEA === FULL CYCLE TEST: TypeScript  Solidity ===
`);let $=oK("sha256").update("Test hanko message").digest(),Q=zR(32),Z=zR(32),X=new M0.Wallet(M0.hexlify(Q)),Y=new M0.Wallet(M0.hexlify(Z));console.log(`\uD83D\uDCC4 Hash to sign: 0x${$.toString("hex")}`),console.log(`\uD83D\uDD11 Signer 1: ${X.address}`),console.log(`\uD83D\uDD11 Signer 2: ${Y.address}`);let z=await qR($,{noEntities:[],privateKeys:[Q,Z],claims:[{entityId:Buffer.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),entityIndexes:[0,1],weights:[1,1],threshold:2}]}),J=NE(z.packedSignatures);console.log(`
\uD83D\uDCE6 Signature verification:`);for(let W=0;W<J.length;W++){let G=W===0?X.address:Y.address,U=await RE($,J[W],G);console.log(`   Signature ${W+1}: ${U?"":""} ${G.slice(0,10)}...`)}let q=M0.AbiCoder.defaultAbiCoder().encode(["tuple(bytes32[],bytes,tuple(bytes32,uint256[],uint256[],uint256)[])"],[[z.placeholders.map((W)=>"0x"+Buffer.from(W).toString("hex")),"0x"+Buffer.from(z.packedSignatures).toString("hex"),z.claims.map((W)=>["0x"+Buffer.from(W.entityId).toString("hex"),W.entityIndexes,W.weights,W.threshold])]]);return console.log(`
\uD83D\uDCCB ABI Encoded hanko: ${q.length} bytes`),{hanko:z,abiEncoded:q,hashToSign:$}},dD0=async()=>{console.log(`
 === GAS OPTIMIZATION TEST ===
`);let{hanko:$,abiEncoded:Q,hashToSign:Z}=await Bo();console.log("\uD83D\uDCCA Method 1 - Full Hanko:"),console.log(`   Calldata size: ${Q.length} bytes`),console.log("   Solidity function: verifyHankoSignature(bytes,bytes32)");let X=await wo($,Z),Y=M0.AbiCoder.defaultAbiCoder().encode(["bytes32[]","bytes32[]","tuple(bytes32,uint256[],uint256[],uint256)[]"],[X.yesEntities.map((z)=>"0x"+Buffer.from(z).toString("hex")),X.noEntities.map((z)=>"0x"+Buffer.from(z).toString("hex")),X.claims.map((z)=>["0x"+Buffer.from(z.entityId).toString("hex"),z.entityIndexes,z.weights,z.threshold])]);console.log("\uD83D\uDCCA Method 2 - Pre-recovered:"),console.log(`   Calldata size: ${Y.length} bytes`),console.log("   Solidity function: verifyQuorumClaims(bytes32[],bytes32[],HankoClaim[])"),console.log(`   Gas savings: ~${Math.round((1-Y.length/Q.length)*100)}% calldata reduction`),console.log("   Additional savings: No signature recovery gas cost on-chain"),console.log(`
\uD83D\uDCA1 Recommendation: Use Method 2 for gas-sensitive applications`)};var zO=p(()=>{A6();B8()});var S4={};x1(S4,{verifyHankoForHash:()=>CE,signHashesAsSingleEntity:()=>KR,signEntityHashes:()=>Eo,buildQuorumHanko:()=>oD0});async function Eo($,Q,Z,X){if($?.runtimeSeed===void 0||$?.runtimeSeed===null)throw Error(`CRYPTO_DETERMINISM_VIOLATION: signEntityHashes called without env.runtimeSeed for entity ${Q.slice(-4)}`);let Y=[],{getSignerPrivateKey:z}=await Promise.resolve().then(() => (H8(),R$)),J=z($,Z);for(let q of X){let W=C$(q.replace("0x",""),"hex"),G=await qR(W,{noEntities:[],privateKeys:[J],claims:[{entityId:C$(Q.replace("0x","").padStart(64,"0"),"hex"),entityIndexes:[0],weights:[1],threshold:1}]}),U=(P)=>"0x"+Array.from(P).map((H)=>H.toString(16).padStart(2,"0")).join(""),D=M0.AbiCoder.defaultAbiCoder().encode(["tuple(bytes32[],bytes,tuple(bytes32,uint256[],uint256[],uint256)[])"],[[G.placeholders.map((P)=>U(C$(P))),U(C$(G.packedSignatures)),G.claims.map((P)=>[U(C$(P.entityId)),P.entityIndexes,P.weights,P.threshold])]]);Y.push(D)}return Y}async function oD0($,Q,Z,X,Y){console.log(`\uD83D\uDD10 BUILD-QUORUM-HANKO: ${X.length} signatures for hash ${Z.slice(0,18)}...`);let{getSignerAddress:z}=await Promise.resolve().then(() => (H8(),R$)),J=new Set(X.map((_)=>_.signerId)),q=[],W=[];for(let _ of Y.validators)if(J.has(_))q.push(_);else W.push(_);let G=[];for(let _ of W){let f=z($,_);if(!f){console.warn(` BUILD-QUORUM-HANKO: Cannot derive address for non-signing validator ${_}`);continue}G.push("0x"+f.replace("0x","").toLowerCase().padStart(64,"0"))}let U=[],D=[];for(let{signerId:_,signature:f}of X){if(!Y.validators.includes(_)){console.warn(` BUILD-QUORUM-HANKO: Unknown validator ${_} - skipping`);continue}let x=f.replace("0x","");if(x.length<130){console.warn(` Invalid signature from ${_}: too short (${x.length} hex chars)`);continue}let g=C$(x.slice(0,130),"hex"),h=x.slice(128,130),v=parseInt(h,16),b=v<27?v+27:v,m=lD0(65);m.set(g.slice(0,64),0),m[64]=b,U.push(m),D.push(_)}if(U.length===0)throw Error("BUILD-QUORUM-HANKO: No valid signatures provided");let{packRealSignatures:P}=await Promise.resolve().then(() => (zO(),WR)),H=P(U),N=[],C=[],L=new Map;D.forEach((_,f)=>L.set(_,f));let B=new Map;W.forEach((_,f)=>B.set(_,f));for(let _ of Y.validators){let f=L.get(_);if(f!==void 0)N.push(G.length+f);else{let x=B.get(_);if(x!==void 0)N.push(x)}C.push(Number(Y.shares[_]||1n))}let E=(_)=>"0x"+Array.from(_).map((f)=>f.toString(16).padStart(2,"0")).join(""),I=M0.AbiCoder.defaultAbiCoder().encode(["tuple(bytes32[],bytes,tuple(bytes32,uint256[],uint256[],uint256)[])"],[[G,E(H),[["0x"+Q.replace("0x","").padStart(64,"0"),N,C,Number(Y.threshold)]]]]);return console.log(` BUILD-QUORUM-HANKO: Created M-of-N hanko: ${U.length}/${Y.validators.length} signed, ${G.length} placeholders, threshold=${Y.threshold}`),I}async function CE($,Q,Z,X){try{let Y=M0.AbiCoder.defaultAbiCoder().decode(["tuple(bytes32[],bytes,tuple(bytes32,uint256[],uint256[],uint256)[])"],$),z={placeholders:Y[0][0].map((B)=>C$(B.replace("0x",""),"hex")),packedSignatures:C$(Y[0][1].replace("0x",""),"hex"),claims:Y[0][2].map((B)=>({entityId:C$(B[0].replace("0x",""),"hex"),entityIndexes:B[1].map((E)=>Number(E)),weights:B[2].map((E)=>Number(E)),threshold:Number(B[3])}))},{recoverHankoEntities:J}=await Promise.resolve().then(() => (zO(),WR)),q=C$(Q.replace("0x",""),"hex"),W=await J(z,q),{unpackRealSignatures:G}=await Promise.resolve().then(() => (zO(),WR)),U=G(z.packedSignatures);if(U.length===0)return console.warn(" Hanko rejected: No EOA signatures (circular claims not allowed in XLN)"),{valid:!1,entityId:null};let D=[];for(let B=0;B<U.length;B++){let E=U[B];if(!E||E.length<65){console.warn(` Hanko signature ${B} is invalid or too short`);continue}let I=M0.hexlify(E.slice(0,32)),_=M0.hexlify(E.slice(32,64)),f=E[64];if(f===void 0){console.warn(` Hanko signature ${B} missing recovery byte`);continue}let x=f>=27?f-27:f,g=M0.recoverAddress(M0.hexlify(q),{r:I,s:_,v:f,yParity:x});D.push(g.toLowerCase())}let P=Z.replace("0x","").padStart(64,"0"),H=z.claims.find((B)=>{return Array.from(B.entityId).map((I)=>I.toString(16).padStart(2,"0")).join("")===P});if(!H)return console.warn(` Hanko rejected: No claim found for entity ${Z.slice(-4)}`),{valid:!1,entityId:null};let N="0x"+Array.from(H.entityId).map((B)=>B.toString(16).padStart(2,"0")).join(""),C=[],L=!1;if(X&&X.eReplicas){let B=Array.from(X.eReplicas.values()).find((E)=>E.state?.entityId===Z);if(B){let E=B.state?.config?.validators||[],{getSignerAddress:I}=await Promise.resolve().then(() => (H8(),R$));C=E.map((_)=>{if(_.startsWith("0x"))return nK(_);return I(X,_)?.toLowerCase()}).filter(Boolean)}}if(C.length===0&&X?.gossip?.getProfiles){let B=X.gossip.getProfiles();console.log(`\uD83D\uDD0D HANKO-DEBUG: Looking for ${Z.slice(-4)} in ${B.length} gossip profiles`),console.log("\uD83D\uDD0D HANKO-DEBUG: Available profile entityIds:",B.map((I)=>I.entityId?.slice(-4)||"???"));let E=B.find((I)=>I.entityId===Z);if(E)console.log(` HANKO-DEBUG: Found profile for ${Z.slice(-4)}`);else console.log(` HANKO-DEBUG: Profile NOT FOUND for ${Z}`);if(E){let I=E.metadata?.board,_=E.metadata?.entityPublicKey;if(typeof _==="string"){let x=nK(_);if(x)C.push(x)}let f=Array.isArray(I)?I.map((x)=>({signer:x})):I?.validators||[];for(let x of f){if(!x)continue;if(typeof x==="string"){let g=nK(x);if(g)C.push(g);continue}if(x.publicKey){let g=nK(x.publicKey);if(g)C.push(g)}if(x.signer){let g=nK(x.signer);if(g)C.push(g)}}C=Array.from(new Set(C))}}if(C.length===0){console.log(`\uD83D\uDD0D HANKO-DEBUG: Trying getCachedSignerPublicKey for ${Z.slice(-4)} (full: ${Z})`);let B=rQ(Z);if(console.log(`\uD83D\uDD0D HANKO-DEBUG: getCachedSignerPublicKey returned ${B?"key found":"null"}`),B){let E="0x"+Array.from(B).map((_)=>_.toString(16).padStart(2,"0")).join(""),I=nK(E);if(I)C.push(I),console.log(` Using registered public key for ${Z.slice(-4)}`)}}if(C.length>0){for(let B of D)if(!C.includes(B))return console.warn(` Hanko rejected: Signer ${B.slice(0,10)} not in entity board validators`),console.warn("   Expected validators:",C.map((E)=>E.slice(0,10))),{valid:!1,entityId:null};console.log(` Board validation passed: ${D.length} signers match board validators`),L=!0}if(!L)return console.error(` SECURITY: Cannot verify board for entity ${Z.slice(-4)} - board/publicKey missing in replicas or gossip`),console.error("   Rejecting Hanko signature - board verification is mandatory for production"),{valid:!1,entityId:null};if(W.yesEntities.length>0)return console.log(` Hanko valid: ${U.length} EOA sigs, entity ${N.slice(-4)}`),{valid:!0,entityId:N};return{valid:!1,entityId:null}}catch(Y){return console.error(" Hanko verification error:",Y),{valid:!1,entityId:null}}}var C$=($,Q)=>{if(typeof $==="string"&&Q==="hex"){let Z=$.replace(/^0x/,"");return Uint8Array.from(Z.match(/.{1,2}/g)?.map((Y)=>parseInt(Y,16))||[])}if(typeof Buffer<"u"&&Buffer.from)return Buffer.from($,Q);if(typeof $==="string")return new TextEncoder().encode($);return new Uint8Array($)},lD0=($,Q)=>{if(typeof Buffer<"u"&&Buffer.alloc)return Buffer.alloc($,Q);let Z=new Uint8Array($);if(Q!==void 0)Z.fill(Q);return Z},iD0=($)=>{try{return M0.getAddress($).toLowerCase()}catch{return null}},nK=($)=>{let Q=$.startsWith("0x")?$:`0x${$}`;if(Q.length===42)return iD0(Q);if(Q.length===130||Q.length===132)try{return M0.computeAddress(Q).toLowerCase()}catch{return null}return null},KR;var F2=p(()=>{zO();A6();H8();KR=Eo});var n9={};x1(n9,{summarizeBatch:()=>sD0,shouldBroadcastBatch:()=>QM0,preflightBatchForE2:()=>_o,isBatchEmpty:()=>KO,initJBatch:()=>x7,getBatchSize:()=>tQ,encodeJBatch:()=>qO,detectPureC2R:()=>So,decodeJBatch:()=>aD0,createEmptyBatch:()=>GR,computeBatchHankoHash:()=>WO,cloneJBatch:()=>rK,broadcastBatch:()=>$M0,batchAddSettlement:()=>GO,batchAddRevealSecret:()=>UO,batchAddReserveToReserve:()=>LE,batchAddReserveToCollateral:()=>tD0,batchAddInsurance:()=>eD0,assertBatchNotPending:()=>eQ});function GR(){return{flashloans:[],reserveToReserve:[],reserveToCollateral:[],collateralToReserve:[],settlements:[],cooperativeUpdate:[],cooperativeDisputeProof:[],disputeStarts:[],disputeFinalizations:[],externalTokenToReserve:[],reserveToExternalToken:[],revealSecrets:[],hub_id:0}}function rK($){try{return structuredClone($)}catch{return{flashloans:$.flashloans.map((Q)=>({...Q})),reserveToReserve:$.reserveToReserve.map((Q)=>({...Q})),reserveToCollateral:$.reserveToCollateral.map((Q)=>({tokenId:Q.tokenId,receivingEntity:Q.receivingEntity,pairs:Q.pairs.map((Z)=>({...Z}))})),collateralToReserve:$.collateralToReserve.map((Q)=>({...Q})),settlements:$.settlements.map((Q)=>({...Q,diffs:Q.diffs.map((Z)=>({...Z})),forgiveDebtsInTokenIds:[...Q.forgiveDebtsInTokenIds],insuranceRegs:Q.insuranceRegs.map((Z)=>({...Z}))})),disputeStarts:$.disputeStarts.map((Q)=>({...Q})),disputeFinalizations:$.disputeFinalizations.map((Q)=>({...Q,finalProofbody:nD0(Q.finalProofbody)})),externalTokenToReserve:$.externalTokenToReserve.map((Q)=>({...Q})),reserveToExternalToken:$.reserveToExternalToken.map((Q)=>({...Q})),revealSecrets:$.revealSecrets.map((Q)=>({...Q})),hub_id:$.hub_id,cooperativeUpdate:[],cooperativeDisputeProof:[]}}}function qO($){return M0.AbiCoder.defaultAbiCoder().encode([Io],[$])}function aD0($){return M0.AbiCoder.defaultAbiCoder().decode([Io],$)[0]}function sD0($){let Q=(Z)=>Z.length>0?Z[0]:null;return{flashloans:{count:$.flashloans.length,sample:Q($.flashloans)},reserveToReserve:{count:$.reserveToReserve.length,sample:Q($.reserveToReserve)},reserveToCollateral:{count:$.reserveToCollateral.length,sample:Q($.reserveToCollateral)},settlements:{count:$.settlements.length,sample:$.settlements.length?{left:$.settlements[0]?.leftEntity,right:$.settlements[0]?.rightEntity,diffs:$.settlements[0]?.diffs.length??0,forgive:$.settlements[0]?.forgiveDebtsInTokenIds.length??0,insurance:$.settlements[0]?.insuranceRegs.length??0,sigLen:$.settlements[0]?.sig?.length??0}:null},disputeStarts:{count:$.disputeStarts.length,sample:Q($.disputeStarts)},disputeFinalizations:{count:$.disputeFinalizations.length,sample:Q($.disputeFinalizations)},externalTokenToReserve:{count:$.externalTokenToReserve.length,sample:Q($.externalTokenToReserve)},reserveToExternalToken:{count:$.reserveToExternalToken.length,sample:Q($.reserveToExternalToken)},revealSecrets:{count:$.revealSecrets.length,sample:Q($.revealSecrets)},hub_id:$.hub_id}}function _o($,Q,Z){let X=[],Y=u6($),z=Z??0,J="0x0000000000000000000000000000000000000000000000000000000000000000";for(let q of Q.externalTokenToReserve){let W=q.entity?u6(q.entity):"0x0000000000000000000000000000000000000000000000000000000000000000";if(W!=="0x0000000000000000000000000000000000000000000000000000000000000000"&&W!==Y)X.push(`externalTokenToReserve entity mismatch: ${W.slice(-4)} != ${Y.slice(-4)}`)}for(let q of Q.revealSecrets)if(!q.transformer||q.transformer==="0x0000000000000000000000000000000000000000")X.push("revealSecrets transformer=0");for(let q of Q.settlements){if(JO(q.leftEntity,q.rightEntity)>=0)X.push(`settlement left>=right: ${q.leftEntity.slice(-4)} >= ${q.rightEntity.slice(-4)}`);if((q.diffs.length>0||q.forgiveDebtsInTokenIds.length>0||q.insuranceRegs.length>0)&&(!q.sig||q.sig==="0x"))X.push(`settlement missing sig: ${q.leftEntity.slice(-4)}${q.rightEntity.slice(-4)}`);for(let G of q.insuranceRegs){if(u6(G.insured)===u6(G.insurer))X.push(`insuranceReg insured==insurer (${G.insured.slice(-4)})`);if(G.limit<=0n)X.push(`insuranceReg limit=0 (${G.insured.slice(-4)})`);if(z>0&&G.expiresAt<=BigInt(z))X.push(`insuranceReg expired (${G.insured.slice(-4)})`)}}for(let q of Q.disputeFinalizations){if(q.cooperative&&(!q.sig||q.sig==="0x"))X.push(`cooperative dispute finalize missing sig (${q.counterentity.slice(-4)})`);if(!q.cooperative&&q.sig&&q.sig!=="0x"){let W=typeof q.initialDisputeNonce==="bigint"?q.initialDisputeNonce:BigInt(q.initialDisputeNonce),G=typeof q.finalDisputeNonce==="bigint"?q.finalDisputeNonce:BigInt(q.finalDisputeNonce);if(W>=G)X.push(`counterdispute nonce order (${q.counterentity.slice(-4)})`)}}return X}function WO($,Q,Z,X){return M0.keccak256(M0.solidityPacked(["bytes32","uint256","address","bytes","uint256"],[rD0,$,Q,Z,X]))}function x7(){return{batch:GR(),jurisdiction:null,lastBroadcast:0,broadcastCount:0,failedAttempts:0,pendingBroadcast:!1}}function eQ($,Q){if($.pendingBroadcast)throw Error(` Cannot add ${Q}: jBatch has pending broadcast. Wait for HankoBatchProcessed or use j_clear_batch to abort.`)}function KO($){return $.flashloans.length===0&&$.reserveToReserve.length===0&&$.reserveToCollateral.length===0&&$.collateralToReserve.length===0&&$.settlements.length===0&&$.disputeStarts.length===0&&$.disputeFinalizations.length===0&&$.externalTokenToReserve.length===0&&$.reserveToExternalToken.length===0&&$.revealSecrets.length===0}function tD0($,Q,Z,X,Y){eQ($,"R2C");let z=$.batch.reserveToCollateral.find((J)=>J.receivingEntity===Q&&J.tokenId===X);if(z){let J=z.pairs.find((q)=>q.entity===Z);if(J)J.amount+=Y;else z.pairs.push({entity:Z,amount:Y})}else $.batch.reserveToCollateral.push({tokenId:X,receivingEntity:Q,pairs:[{entity:Z,amount:Y}]});console.log(`\uD83D\uDCE6 jBatch: Added RC ${Y} token ${X} for ${Q.slice(-4)}${Z.slice(-4)}`)}function So($,Q,Z){if($.length!==1)return{isPureC2R:!1};if(Q.length>0||Z.length>0)return{isPureC2R:!1};let X=$[0];if(X.collateralDiff>=0n)return{isPureC2R:!1};let Y=-X.collateralDiff;if(X.leftDiff===Y&&X.rightDiff===0n&&X.ondeltaDiff===-Y)return{isPureC2R:!0,withdrawer:"left",tokenId:X.tokenId,amount:Y};if(X.leftDiff===0n&&X.rightDiff===Y&&X.ondeltaDiff===0n)return{isPureC2R:!0,withdrawer:"right",tokenId:X.tokenId,amount:Y};return{isPureC2R:!1}}function GO($,Q,Z,X,Y=[],z=[],J,q="0x0000000000000000000000000000000000000000",W="0x",G=0,U){if(eQ($,"settlement"),Q>=Z)throw Error(`Settlement entities must be ordered: ${Q} >= ${Z}`);let D=X.length>0||Y.length>0||z.length>0;if(D&&(!J||J==="0x"))throw Error(`Settlement ${Q.slice(-4)}${Z.slice(-4)} missing hanko signature`);let P=So(X,Y,z);if(P.isPureC2R&&J){let C=P.withdrawer==="left"?Z:Q,L=P.withdrawer==="left"?Q:Z;if(U&&u6(U)!==u6(L));else{$.batch.collateralToReserve.push({counterparty:C,tokenId:P.tokenId,amount:P.amount,sig:J}),console.log(`\uD83D\uDCE6 jBatch: Added C2R shortcut ${Q.slice(-4)}${Z.slice(-4)}, ${P.withdrawer} withdraws ${P.amount} token ${P.tokenId}`);return}}let H=$.batch.settlements.find((C)=>C.leftEntity===Q&&C.rightEntity===Z);if(H){if(H.diffs.length>0&&D)throw Error(`Settlement ${Q.slice(-4)}${Z.slice(-4)} already queued - refuse to merge diffs without a fresh signature`);for(let C of X){let L=H.diffs.find((B)=>B.tokenId===C.tokenId);if(L)L.leftDiff+=C.leftDiff,L.rightDiff+=C.rightDiff,L.collateralDiff+=C.collateralDiff,L.ondeltaDiff+=C.ondeltaDiff;else H.diffs.push(C)}H.insuranceRegs.push(...z);for(let C of Y)if(!H.forgiveDebtsInTokenIds.includes(C))H.forgiveDebtsInTokenIds.push(C);if(D)H.sig=J||H.sig,H.entityProvider=q,H.hankoData=W,H.nonce=G}else $.batch.settlements.push({leftEntity:Q,rightEntity:Z,diffs:X,forgiveDebtsInTokenIds:Y,insuranceRegs:z,sig:J||"",entityProvider:q,hankoData:W,nonce:G});let N=z.length>0?`, ${z.length} insurance regs`:"";console.log(`\uD83D\uDCE6 jBatch: Added settlement ${Q.slice(-4)}${Z.slice(-4)}, ${X.length} tokens${N}`)}function eD0($,Q,Z,X){eQ($,"insurance");let[Y,z]=K5(Q,Z)?[Q,Z]:[Z,Q],J=$.batch.settlements.find((q)=>q.leftEntity===Y&&q.rightEntity===z);if(!J)J={leftEntity:Y,rightEntity:z,diffs:[],forgiveDebtsInTokenIds:[],insuranceRegs:[],sig:"",entityProvider:"0x0000000000000000000000000000000000000000",hankoData:"0x",nonce:0},$.batch.settlements.push(J);if(!J)throw Error("Failed to create settlement for insurance registration");J.insuranceRegs.push(X),console.log(`\uD83D\uDCE6 jBatch: Added insurance ${X.insurer.slice(-4)}${X.insured.slice(-4)}, ${X.limit} limit`)}function LE($,Q,Z,X){eQ($,"R2R"),$.batch.reserveToReserve.push({receivingEntity:Q,tokenId:Z,amount:X}),console.log(`\uD83D\uDCE6 jBatch: Added RR ${X} token ${Z} to ${Q.slice(-4)}`)}function UO($,Q,Z){if(eQ($,"secret reveal"),$.batch.revealSecrets.find((Y)=>Y.transformer===Q&&Y.secret===Z))return;$.batch.revealSecrets.push({transformer:Q,secret:Z}),console.log(`\uD83D\uDCE6 jBatch: Added secret reveal ${Z.slice(0,10)}... via ${Q.slice(0,10)}...`)}function tQ($){return $.flashloans.length+$.reserveToReserve.length+$.reserveToCollateral.length+$.collateralToReserve.length+$.settlements.length+$.disputeStarts.length+$.disputeFinalizations.length+$.externalTokenToReserve.length+$.reserveToExternalToken.length+$.revealSecrets.length}async function $M0($,Q,Z,X,Y,z,J){if(KO(Z.batch))return console.log("\uD83D\uDCE6 jBatch: Empty batch, skipping broadcast"),{success:!0};let q=tQ(Z.batch),W=Z.batch;console.log(`\uD83D\uDCE4 BATCH: ${Q.slice(-4)} | ${q} ops | RC=${W.reserveToCollateral.length} CR=${W.collateralToReserve.length} S=${W.settlements.length} RR=${W.reserveToReserve.length}`);let G=Y?.getEntityProviderAddress?.()||X?.entityProviderAddress||"0x0000000000000000000000000000000000000000",U=Y?.getDepositoryAddress?.()||X?.depositoryAddress||"0x0000000000000000000000000000000000000000",D=Y?.getChainId?.()??(X?.chainId!==void 0?BigInt(X.chainId):0n);try{if(!J)throw Error(`Missing signerId for batch broadcast from ${Q.slice(-4)}`);if(Y){Y.setBlockTimestamp?.(z);for(let k of Z.batch.settlements)if(k.diffs.length>0||k.forgiveDebtsInTokenIds.length>0||k.insuranceRegs.length>0){if(G==="0x0000000000000000000000000000000000000000")console.warn(" Settlement missing EntityProvider address (required for Hanko verification)");if(k.entityProvider=G,!k.sig||k.sig==="0x")throw Error(`Settlement ${k.leftEntity.slice(-4)}${k.rightEntity.slice(-4)} missing hanko signature`)}else if(!k.sig)k.sig="0x";if(U==="0x0000000000000000000000000000000000000000")throw Error("Missing depository address for batch broadcast");if(G==="0x0000000000000000000000000000000000000000")throw Error("Missing entity provider address for batch broadcast");if(!Y.getEntityNonce)throw Error("BrowserVM missing getEntityNonce for hanko batch signing");if(!D)throw Error("Missing chainId for batch hanko signing");let m=qO(Z.batch),K=u6(Q),M=await Y.getEntityNonce(K),j=M+1n,O=WO(D,U,m,j),{signHashesAsSingleEntity:R}=await Promise.resolve().then(() => (F2(),S4)),A=(await R($,K,J,[O]))[0];if(!A)throw Error("Failed to build batch hanko signature");let T={entityId:K,currentNonce:M.toString(),nextNonce:j.toString(),chainId:D.toString(),depository:U,entityProvider:G,hankoBytes:Math.max(A.length-2,0)/2,batchSize:tQ(Z.batch),r2r:Z.batch.reserveToReserve.length,r2c:Z.batch.reserveToCollateral.length,settlements:Z.batch.settlements.length,disputes:Z.batch.disputeStarts.length,finals:Z.batch.disputeFinalizations.length};console.log(`\uD83D\uDD10 BATCH-HANKO: ${h1(T)}`);let V=_o(K,Z.batch,Math.floor(z/1000));if(V.length>0)throw Error(`Batch preflight failed: ${V.join("; ")}`);console.log(`\uD83D\uDCE6 Calling Depository.processBatch() with full batch (${tQ(Z.batch)} ops)...`);let w=await Y.processBatch(m,G,A,j);return console.log(`    BrowserVM: ${w.length} events`),Z.pendingBroadcast=!0,Z.lastBroadcast=z,Z.broadcastCount++,Z.failedAttempts=0,{success:!0,events:w}}let{connectToEthereum:P}=await Promise.resolve().then(() => (A2(),$Z)),{depository:H,provider:N}=await P(X);for(let m of Z.batch.settlements)if(m.diffs.length>0||m.forgiveDebtsInTokenIds.length>0||m.insuranceRegs.length>0){if(G==="0x0000000000000000000000000000000000000000")console.warn(" Settlement missing EntityProvider address (required for Hanko verification)");if(m.entityProvider=G,!m.sig||m.sig==="0x")throw Error(`Settlement ${m.leftEntity.slice(-4)}${m.rightEntity.slice(-4)} missing hanko signature`)}else if(!m.sig)m.sig="0x";if(!D){if(!(await N.getNetwork()).chainId)throw Error("Missing chainId for batch hanko signing")}let C=D||BigInt((await N.getNetwork()).chainId),L=qO(Z.batch),B=u6(Q),E=M0.getAddress(`0x${B.slice(-40)}`),I=await H.entityNonces?.(E),_=BigInt(I??0)+1n,f=WO(C,U,L,_),{signHashesAsSingleEntity:x}=await Promise.resolve().then(() => (F2(),S4)),h=(await x($,Q,J,[f]))[0];if(!h)throw Error("Failed to build batch hanko signature");let b=await(await H.processBatch(L,G,h,_,{gasLimit:5000000})).wait();return console.log(`    Ethers: block=${b.blockNumber} gas=${b.gasUsed}`),Z.pendingBroadcast=!0,Z.lastBroadcast=z,Z.broadcastCount++,Z.failedAttempts=0,{success:!0,txHash:b.transactionHash}}catch(P){let H=P instanceof Error?P.message:String(P);if(console.error(`    BATCH FAIL: ${Q.slice(-4)} | ${H}`),P instanceof Error&&P.stack)console.error(`    BATCH FAIL STACK: ${P.stack}`);return Z.failedAttempts++,{success:!1,error:H}}}function QM0($,Q){if(KO($.batch))return!1;let Z=tQ($.batch),X=50,Y=5000;if(Z>=X)return console.log(`\uD83D\uDCE6 jBatch: Full (${Z}/${X}) - triggering broadcast`),!0;let z=Q-$.lastBroadcast;if(z>=Y)return console.log(`\uD83D\uDCE6 jBatch: Timeout (${z}ms) - triggering broadcast`),!0;return!1}var nD0=($)=>{if(!$)return $;try{return structuredClone($)}catch{return $}},Io="tuple(tuple(uint256 tokenId, uint256 amount)[] flashloans,tuple(bytes32 receivingEntity, uint256 tokenId, uint256 amount)[] reserveToReserve,tuple(uint256 tokenId, bytes32 receivingEntity, tuple(bytes32 entity, uint256 amount)[] pairs)[] reserveToCollateral,tuple(bytes32 counterparty, uint256 tokenId, uint256 amount, bytes sig)[] collateralToReserve,tuple(bytes32 leftEntity, bytes32 rightEntity, tuple(uint256 tokenId, int256 leftDiff, int256 rightDiff, int256 collateralDiff, int256 ondeltaDiff)[] diffs, uint256[] forgiveDebtsInTokenIds, tuple(bytes32 insured, bytes32 insurer, uint256 tokenId, uint256 limit, uint64 expiresAt)[] insuranceRegs, bytes sig, address entityProvider, bytes hankoData, uint256 nonce)[] settlements,tuple(bytes32 counterentity, uint256 cooperativeNonce, uint256 disputeNonce, bytes32 proofbodyHash, bytes sig, bytes initialArguments)[] disputeStarts,tuple(bytes32 counterentity, uint256 initialCooperativeNonce, uint256 finalCooperativeNonce, uint256 initialDisputeNonce, uint256 finalDisputeNonce, bytes32 initialProofbodyHash, tuple(int256[] offdeltas, uint256[] tokenIds, tuple(address transformerAddress, bytes encodedBatch, tuple(uint256 deltaIndex, uint256 rightAllowance, uint256 leftAllowance)[] allowances)[] transformers) finalProofbody, bytes finalArguments, bytes initialArguments, bytes sig, bool startedByLeft, uint256 disputeUntilBlock, bool cooperative)[] disputeFinalizations,tuple(bytes32 entity, address contractAddress, uint96 externalTokenId, uint8 tokenType, uint256 internalTokenId, uint256 amount)[] externalTokenToReserve,tuple(bytes32 receivingEntity, uint256 tokenId, uint256 amount)[] reserveToExternalToken,tuple(address transformer, bytes32 secret)[] revealSecrets,uint256 hub_id)",rD0;var c6=p(()=>{A6();h8();rD0=M0.keccak256(M0.toUtf8Bytes("XLN_DEPOSITORY_HANKO_V1"))});var TE,G5,f4,r9,Zh0;var w2=p(()=>{TE={MESSAGE_HISTORY:100,MEMPOOL_SIZE:1000,MAX_FRAME_SIZE_BYTES:1048576,MAX_ACCOUNTS_PER_ENTITY:1000,MAX_PROPOSALS_PER_ENTITY:100,MAX_VALIDATORS:100},G5={MAX_PAYMENT_AMOUNT:2n**128n-1n,MIN_PAYMENT_AMOUNT:1n,MAX_CREDIT_LIMIT:1000000000n*10n**6n,MAX_COLLATERAL:2n**64n-1n,MAX_ROUTE_HOPS:10},f4={MIN_TIMELOCK_DELTA_MS:1e4,MIN_FORWARD_TIMELOCK_MS:20000,MAX_HOPS:20,DEFAULT_EXPIRY_MS:30000,BASE_FEE_USD:0n,FEE_RATE_UBP:100n,FEE_DENOMINATOR:10000000n},r9={DEBUG_LOGGING:!1,DEBUG_CONSENSUS:!1,DEBUG_ACCOUNTS:!1,DEBUG_ROUTING:!1,LOG_BLOCKCHAIN_ERRORS:!0,DB_BATCH_SIZE:100,SNAPSHOT_INTERVAL:100},Zh0={MAX_NONCE_GAP:100,MAX_COUNTER_GAP:100,MAX_FRAME_AGE_MS:3600000,MIN_ENTITY_SHARES:1n,MAX_ENTITY_SHARES:2n**64n-1n}});function FE($){fo=$}function ZM0($){return $.map((Q)=>{if(typeof Q==="string")return Q;if(typeof Q==="bigint")return`${Q.toString()}n`;try{return JSON.stringify(Q)}catch{return String(Q)}}).join(" ")}function XM0($){return JY[$]??!1}function ko($,Q,...Z){if(XM0($)){let X=`[${$}]`;switch(Q){case"error":console.error(X,...Z);break;case"warn":console.warn(X,...Z);break;case"info":console.info(X,...Z);break;case"debug":default:console.log(X,...Z);break}}}function T3($,...Q){ko($,"debug",...Q)}function y1($,...Q){if(ko($,"error",...Q),fo)throw Error(`[FAIL_FAST] ${String($)}: ${ZM0(Q)}`)}function YM0(){console.log("\uD83D\uDCCA Current Log Configuration:"),Object.entries(JY).forEach(([$,Q])=>{console.log(`  ${Q?"":""} ${$}`)})}function JM0($,Q){JY[$]=Q,console.log(`\uD83D\uDD27 Log category "${$}" set to ${Q?"ON":"OFF"}`)}function zM0(){Object.keys(JY).forEach(($)=>{JY[$]=!0}),console.log(" All logs enabled")}function qM0(){Object.keys(JY).forEach(($)=>{JY[$]=!1}),console.log(" All logs disabled")}var JY,fo=!1;var hz=p(()=>{w2();JY={ENTITY_TX:r9.DEBUG_CONSENSUS,ACCOUNT_OPEN:r9.DEBUG_ACCOUNTS,SIGNER_LOOKUP:r9.DEBUG_CONSENSUS,PROCESS_TICK:r9.DEBUG_LOGGING,FRAME_CONSENSUS:r9.DEBUG_CONSENSUS,ENTITY_OUTPUT:r9.DEBUG_LOGGING,ENTITY_INPUT:r9.DEBUG_LOGGING,SERVER_TICK:r9.DEBUG_LOGGING,J_WATCHER:r9.LOG_BLOCKCHAIN_ERRORS,BLOCKCHAIN:r9.LOG_BLOCKCHAIN_ERRORS,GOSSIP:r9.DEBUG_LOGGING,R2R_FLOW:r9.DEBUG_ACCOUNTS,ACCOUNT_STATE:r9.DEBUG_ACCOUNTS};if(typeof window<"u")window.logConfig={show:YM0,set:JM0,enableAll:zM0,disableAll:qM0,config:JY},console.log("\uD83D\uDD27 Log config available at window.logConfig")});var mz;var xo=p(()=>{mz=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function WM0($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function zY($){if(!Number.isSafeInteger($)||$<0)throw Error("positive integer expected, got "+$)}function k4($,...Q){if(!WM0($))throw Error("Uint8Array expected");if(Q.length>0&&!Q.includes($.length))throw Error("Uint8Array expected of length "+Q+", got length="+$.length)}function vo($){if(typeof $!=="function"||typeof $.create!=="function")throw Error("Hash should be wrapped by utils.createHasher");zY($.outputLen),zY($.blockLen)}function L$($,Q=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(Q&&$.finished)throw Error("Hash#digest() has already been called")}function VO($,Q){k4($);let Z=Q.outputLen;if($.length<Z)throw Error("digestInto() expects output buffer of length at least "+Z)}function yo($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function T$(...$){for(let Q=0;Q<$.length;Q++)$[Q].fill(0)}function OO($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function F3($,Q){return $<<32-Q|$>>>Q}function GM0($){return $<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255}function UM0($){for(let Q=0;Q<$.length;Q++)$[Q]=GM0($[Q]);return $}function UR($){if(k4($),go)return $.toHex();let Q="";for(let Z=0;Z<$.length;Z++)Q+=VM0[$[Z]];return Q}function bo($){if($>=QZ._0&&$<=QZ._9)return $-QZ._0;if($>=QZ.A&&$<=QZ.F)return $-(QZ.A-10);if($>=QZ.a&&$<=QZ.f)return $-(QZ.a-10);return}function ho($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);if(go)return Uint8Array.fromHex($);let Q=$.length,Z=Q/2;if(Q%2)throw Error("hex string expected, got unpadded hex of length "+Q);let X=new Uint8Array(Z);for(let Y=0,z=0;Y<Z;Y++,z+=2){let J=bo($.charCodeAt(z)),q=bo($.charCodeAt(z+1));if(J===void 0||q===void 0){let W=$[z]+$[z+1];throw Error('hex string expected, got non-hex character "'+W+'" at index '+z)}X[Y]=J*16+q}return X}function A3($){if(typeof $!=="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function pz($){if(typeof $==="string")$=A3($);return k4($),$}function wE(...$){let Q=0;for(let X=0;X<$.length;X++){let Y=$[X];k4(Y),Q+=Y.length}let Z=new Uint8Array(Q);for(let X=0,Y=0;X<$.length;X++){let z=$[X];Z.set(z,Y),Y+=z.length}return Z}class uz{}function VR($){let Q=(X)=>$().update(pz(X)).digest(),Z=$();return Q.outputLen=Z.outputLen,Q.blockLen=Z.blockLen,Q.create=()=>$(),Q}function mo($=32){if(mz&&typeof mz.getRandomValues==="function")return mz.getRandomValues(new Uint8Array($));if(mz&&typeof mz.randomBytes==="function")return Uint8Array.from(mz.randomBytes($));throw Error("crypto.getRandomValues must be defined")}var KM0,AE,go,VM0,QZ;var F$=p(()=>{xo();/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */KM0=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();AE=KM0?($)=>$:UM0,go=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")(),VM0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));QZ={_0:48,_9:57,A:65,F:70,a:97,f:102}});function OM0($,Q,Z,X){if(typeof $.setBigUint64==="function")return $.setBigUint64(Q,Z,X);let Y=BigInt(32),z=BigInt(4294967295),J=Number(Z>>Y&z),q=Number(Z&z),W=X?4:0,G=X?0:4;$.setUint32(Q+W,J,X),$.setUint32(Q+G,q,X)}function po($,Q,Z){return $&Q^~$&Z}function uo($,Q,Z){return $&Q^$&Z^Q&Z}var BE,ZZ;var co=p(()=>{F$();BE=class BE extends uz{constructor($,Q,Z,X){super();this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=$,this.outputLen=Q,this.padOffset=Z,this.isLE=X,this.buffer=new Uint8Array($),this.view=OO(this.buffer)}update($){L$(this),$=pz($),k4($);let{view:Q,buffer:Z,blockLen:X}=this,Y=$.length;for(let z=0;z<Y;){let J=Math.min(X-this.pos,Y-z);if(J===X){let q=OO($);for(;X<=Y-z;z+=X)this.process(q,z);continue}if(Z.set($.subarray(z,z+J),this.pos),this.pos+=J,z+=J,this.pos===X)this.process(Q,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){L$(this),VO($,this),this.finished=!0;let{buffer:Q,view:Z,blockLen:X,isLE:Y}=this,{pos:z}=this;if(Q[z++]=128,T$(this.buffer.subarray(z)),this.padOffset>X-z)this.process(Z,0),z=0;for(let U=z;U<X;U++)Q[U]=0;OM0(Z,X-8,BigInt(this.length*8),Y),this.process(Z,0);let J=OO($),q=this.outputLen;if(q%4)throw Error("_sha2: outputLen should be aligned to 32bit");let W=q/4,G=this.get();if(W>G.length)throw Error("_sha2: outputLen bigger than state");for(let U=0;U<W;U++)J.setUint32(4*U,G[U],Y)}digest(){let{buffer:$,outputLen:Q}=this;this.digestInto($);let Z=$.slice(0,Q);return this.destroy(),Z}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:Q,buffer:Z,length:X,finished:Y,destroyed:z,pos:J}=this;if($.destroyed=z,$.finished=Y,$.length=X,$.pos=J,X%Q)$.buffer.set(Z);return $}clone(){return this._cloneInto()}};ZZ=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225])});function DM0($,Q=!1){if(Q)return{h:Number($&OR),l:Number($>>lo&OR)};return{h:Number($>>lo&OR)|0,l:Number($&OR)|0}}function io($,Q=!1){let Z=$.length,X=new Uint32Array(Z),Y=new Uint32Array(Z);for(let z=0;z<Z;z++){let{h:J,l:q}=DM0($[z],Q);[X[z],Y[z]]=[J,q]}return[X,Y]}var OR,lo,oo=($,Q,Z)=>$<<Z|Q>>>32-Z,no=($,Q,Z)=>Q<<Z|$>>>32-Z,ro=($,Q,Z)=>Q<<Z-32|$>>>64-Z,ao=($,Q,Z)=>$<<Z-32|Q>>>64-Z;var so=p(()=>{OR=BigInt(4294967295),lo=BigInt(32)});var MM0,qY,to,DR;var EE=p(()=>{co();F$();MM0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),qY=new Uint32Array(64);to=class to extends BE{constructor($=32){super(64,$,8,!1);this.A=ZZ[0]|0,this.B=ZZ[1]|0,this.C=ZZ[2]|0,this.D=ZZ[3]|0,this.E=ZZ[4]|0,this.F=ZZ[5]|0,this.G=ZZ[6]|0,this.H=ZZ[7]|0}get(){let{A:$,B:Q,C:Z,D:X,E:Y,F:z,G:J,H:q}=this;return[$,Q,Z,X,Y,z,J,q]}set($,Q,Z,X,Y,z,J,q){this.A=$|0,this.B=Q|0,this.C=Z|0,this.D=X|0,this.E=Y|0,this.F=z|0,this.G=J|0,this.H=q|0}process($,Q){for(let U=0;U<16;U++,Q+=4)qY[U]=$.getUint32(Q,!1);for(let U=16;U<64;U++){let D=qY[U-15],P=qY[U-2],H=F3(D,7)^F3(D,18)^D>>>3,N=F3(P,17)^F3(P,19)^P>>>10;qY[U]=N+qY[U-7]+H+qY[U-16]|0}let{A:Z,B:X,C:Y,D:z,E:J,F:q,G:W,H:G}=this;for(let U=0;U<64;U++){let D=F3(J,6)^F3(J,11)^F3(J,25),P=G+D+po(J,q,W)+MM0[U]+qY[U]|0,N=(F3(Z,2)^F3(Z,13)^F3(Z,22))+uo(Z,X,Y)|0;G=W,W=q,q=J,J=z+P|0,z=Y,Y=X,X=Z,Z=P+N|0}Z=Z+this.A|0,X=X+this.B|0,Y=Y+this.C|0,z=z+this.D|0,J=J+this.E|0,q=q+this.F|0,W=W+this.G|0,G=G+this.H|0,this.set(Z,X,Y,z,J,q,W,G)}roundClean(){T$(qY)}destroy(){this.set(0,0,0,0,0,0,0,0),T$(this.buffer)}};DR=VR(()=>new to)});var IE,_E=($,Q,Z)=>new IE($,Q).update(Z).digest();var eo=p(()=>{F$();IE=class IE extends uz{constructor($,Q){super();this.finished=!1,this.destroyed=!1,vo($);let Z=pz(Q);if(this.iHash=$.create(),typeof this.iHash.update!=="function")throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let X=this.blockLen,Y=new Uint8Array(X);Y.set(Z.length>X?$.create().update(Z).digest():Z);for(let z=0;z<Y.length;z++)Y[z]^=54;this.iHash.update(Y),this.oHash=$.create();for(let z=0;z<Y.length;z++)Y[z]^=106;this.oHash.update(Y),T$(Y)}update($){return L$(this),this.iHash.update($),this}digestInto($){L$(this),k4($,this.outputLen),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||($=Object.create(Object.getPrototypeOf(this),{}));let{oHash:Q,iHash:Z,finished:X,destroyed:Y,blockLen:z,outputLen:J}=this;return $=$,$.finished=X,$.destroyed=Y,$.blockLen=z,$.outputLen=J,$.oHash=Q._cloneInto($.oHash),$.iHash=Z._cloneInto($.iHash),$}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};_E.create=($,Q)=>new IE($,Q)});function cz($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function bE($){if(!cz($))throw Error("Uint8Array expected")}function aK($,Q){if(typeof Q!=="boolean")throw Error($+" boolean expected, got "+Q)}function DO($){let Q=$.toString(16);return Q.length&1?"0"+Q:Q}function Zn($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);return $===""?xE:BigInt("0x"+$)}function sK($){if(bE($),Xn)return $.toHex();let Q="";for(let Z=0;Z<$.length;Z++)Q+=PM0[$[Z]];return Q}function $n($){if($>=XZ._0&&$<=XZ._9)return $-XZ._0;if($>=XZ.A&&$<=XZ.F)return $-(XZ.A-10);if($>=XZ.a&&$<=XZ.f)return $-(XZ.a-10);return}function MO($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);if(Xn)return Uint8Array.fromHex($);let Q=$.length,Z=Q/2;if(Q%2)throw Error("hex string expected, got unpadded hex of length "+Q);let X=new Uint8Array(Z);for(let Y=0,z=0;Y<Z;Y++,z+=2){let J=$n($.charCodeAt(z)),q=$n($.charCodeAt(z+1));if(J===void 0||q===void 0){let W=$[z]+$[z+1];throw Error('hex string expected, got non-hex character "'+W+'" at index '+z)}X[Y]=J*16+q}return X}function YZ($){return Zn(sK($))}function vE($){return bE($),Zn(sK(Uint8Array.from($).reverse()))}function dz($,Q){return MO($.toString(16).padStart(Q*2,"0"))}function yE($,Q){return dz($,Q).reverse()}function x4($,Q,Z){let X;if(typeof Q==="string")try{X=MO(Q)}catch(z){throw Error($+" must be hex string or Uint8Array, cause: "+z)}else if(cz(Q))X=Uint8Array.from(Q);else throw Error($+" must be hex string or Uint8Array");let Y=X.length;if(typeof Z==="number"&&Y!==Z)throw Error($+" of length "+Z+" expected, got "+Y);return X}function PO(...$){let Q=0;for(let X=0;X<$.length;X++){let Y=$[X];bE(Y),Q+=Y.length}let Z=new Uint8Array(Q);for(let X=0,Y=0;X<$.length;X++){let z=$[X];Z.set(z,Y),Y+=z.length}return Z}function MR($,Q,Z){return SE($)&&SE(Q)&&SE(Z)&&Q<=$&&$<Z}function lz($,Q,Z,X){if(!MR(Q,Z,X))throw Error("expected valid "+$+": "+Z+" <= n < "+X+", got "+Q)}function Yn($){let Q;for(Q=0;$>xE;$>>=kE,Q+=1);return Q}function Jn($,Q,Z){if(typeof $!=="number"||$<2)throw Error("hashLen must be a number");if(typeof Q!=="number"||Q<2)throw Error("qByteLen must be a number");if(typeof Z!=="function")throw Error("hmacFn must be a function");let X=fE($),Y=fE($),z=0,J=()=>{X.fill(1),Y.fill(0),z=0},q=(...D)=>Z(Y,X,...D),W=(D=fE(0))=>{if(Y=q(Qn([0]),D),X=q(),D.length===0)return;Y=q(Qn([1]),D),X=q()},G=()=>{if(z++>=1000)throw Error("drbg: tried 1000 values");let D=0,P=[];while(D<Q){X=q();let H=X.slice();P.push(H),D+=X.length}return PO(...P)};return(D,P)=>{J(),W(D);let H=void 0;while(!(H=P(G())))W();return J(),H}}function oz($,Q,Z={}){let X=(Y,z,J)=>{let q=HM0[z];if(typeof q!=="function")throw Error("invalid validator function");let W=$[Y];if(J&&W===void 0)return;if(!q(W,$))throw Error("param "+String(Y)+" is invalid. Expected "+z+", got "+W)};for(let[Y,z]of Object.entries(Q))X(Y,z,!1);for(let[Y,z]of Object.entries(Z))X(Y,z,!0);return $}function gE($){let Q=new WeakMap;return(Z,...X)=>{let Y=Q.get(Z);if(Y!==void 0)return Y;let z=$(Z,...X);return Q.set(Z,z),z}}var xE,kE,Xn,PM0,XZ,SE=($)=>typeof $==="bigint"&&xE<=$,iz=($)=>(kE<<BigInt($))-kE,fE=($)=>new Uint8Array($),Qn=($)=>Uint8Array.from($),HM0;var PR=p(()=>{/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */xE=BigInt(0),kE=BigInt(1);Xn=typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function",PM0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));XZ={_0:48,_9:57,A:65,F:70,a:97,f:102};HM0={bigint:($)=>typeof $==="bigint",function:($)=>typeof $==="function",boolean:($)=>typeof $==="boolean",string:($)=>typeof $==="string",stringOrUint8Array:($)=>typeof $==="string"||cz($),isSafeInteger:($)=>Number.isSafeInteger($),array:($)=>Array.isArray($),field:($,Q)=>Q.Fp.isValid($),hash:($)=>typeof $==="function"&&Number.isSafeInteger($.outputLen)}});function a9($,Q){let Z=$%Q;return Z>=B2?Z:Q+Z}function b4($,Q,Z){let X=$;while(Q-- >B2)X*=X,X%=Z;return X}function HR($,Q){if($===B2)throw Error("invert: expected non-zero number");if(Q<=B2)throw Error("invert: expected positive modulus, got "+Q);let Z=a9($,Q),X=Q,Y=B2,z=S9,J=S9,q=B2;while(Z!==B2){let G=X/Z,U=X%Z,D=Y-J*G,P=z-q*G;X=Z,Z=U,Y=J,z=q,J=D,q=P}if(X!==S9)throw Error("invert: does not exist");return a9(Y,Q)}function CM0($){let Q=$-S9,Z=0;while(Q%nz===B2)Q/=nz,Z++;let X=nz,Y=HO($);while(X<$&&Wn(Y,X))if(X++>1000)throw Error("Cannot find square root: probably non-prime P");if(Z===1){let J=($+S9)/hE;return function(W,G){let U=W.pow(G,J);if(!W.eql(W.sqr(U),G))throw Error("Cannot find square root");return U}}let z=(Q+S9)/nz;return function(q,W){if(!Wn(q,W))throw Error("Cannot find square root");let G=Z,U=q.pow(q.mul(q.ONE,X),Q),D=q.pow(W,z),P=q.pow(W,Q);while(!q.eql(P,q.ONE)){if(q.eql(P,q.ZERO))return q.ZERO;let H=1;for(let C=q.sqr(P);H<G;H++){if(q.eql(C,q.ONE))break;C=q.sqr(C)}let N=q.pow(U,S9<<BigInt(G-H-1));U=q.sqr(N),D=q.mul(D,N),P=q.mul(P,U),G=H}return D}}function LM0($){if($%hE===jM0)return function(Z,X){let Y=($+S9)/hE,z=Z.pow(X,Y);if(!Z.eql(Z.sqr(z),X))throw Error("Cannot find square root");return z};if($%qn===zn)return function(Z,X){let Y=Z.mul(X,nz),z=($-zn)/qn,J=Z.pow(Y,z),q=Z.mul(X,J),W=Z.mul(Z.mul(q,nz),J),G=Z.mul(q,Z.sub(W,Z.ONE));if(!Z.eql(Z.sqr(G),X))throw Error("Cannot find square root");return G};if($%NM0===RM0);return CM0($)}function mE($){let Q={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},Z=TM0.reduce((X,Y)=>{return X[Y]="function",X},Q);return oz($,Z)}function FM0($,Q,Z){if(Z<B2)throw Error("invalid exponent, negatives unsupported");if(Z===B2)return $.ONE;if(Z===S9)return Q;let X=$.ONE,Y=Q;while(Z>B2){if(Z&S9)X=$.mul(X,Y);Y=$.sqr(Y),Z>>=S9}return X}function pE($,Q,Z=!1){let X=Array(Q.length).fill(Z?$.ZERO:void 0),Y=Q.reduce((J,q,W)=>{if($.is0(q))return J;return X[W]=J,$.mul(J,q)},$.ONE),z=$.inv(Y);return Q.reduceRight((J,q,W)=>{if($.is0(q))return J;return X[W]=$.mul(J,X[W]),$.mul(J,q)},z),X}function AM0($,Q){let Z=($.ORDER-S9)/nz,X=$.pow(Q,Z),Y=$.eql(X,$.ONE),z=$.eql(X,$.ZERO),J=$.eql(X,$.neg($.ONE));if(!Y&&!z&&!J)throw Error("Cannot find square root: probably non-prime P");return Y?1:z?0:-1}function Wn($,Q){let Z=AM0($,Q);return Z===0||Z===1}function uE($,Q){if(Q!==void 0)zY(Q);let Z=Q!==void 0?Q:$.toString(2).length,X=Math.ceil(Z/8);return{nBitLength:Z,nByteLength:X}}function HO($,Q,Z=!1,X={}){if($<=B2)throw Error("invalid field: expected ORDER > 0, got "+$);let{nBitLength:Y,nByteLength:z}=uE($,Q);if(z>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let J,q=Object.freeze({ORDER:$,isLE:Z,BITS:Y,BYTES:z,MASK:iz(Y),ZERO:B2,ONE:S9,create:(W)=>a9(W,$),isValid:(W)=>{if(typeof W!=="bigint")throw Error("invalid field element: expected bigint, got "+typeof W);return B2<=W&&W<$},is0:(W)=>W===B2,isOdd:(W)=>(W&S9)===S9,neg:(W)=>a9(-W,$),eql:(W,G)=>W===G,sqr:(W)=>a9(W*W,$),add:(W,G)=>a9(W+G,$),sub:(W,G)=>a9(W-G,$),mul:(W,G)=>a9(W*G,$),pow:(W,G)=>FM0(q,W,G),div:(W,G)=>a9(W*HR(G,$),$),sqrN:(W)=>W*W,addN:(W,G)=>W+G,subN:(W,G)=>W-G,mulN:(W,G)=>W*G,inv:(W)=>HR(W,$),sqrt:X.sqrt||((W)=>{if(!J)J=LM0($);return J(q,W)}),toBytes:(W)=>Z?yE(W,z):dz(W,z),fromBytes:(W)=>{if(W.length!==z)throw Error("Field.fromBytes: expected "+z+" bytes, got "+W.length);return Z?vE(W):YZ(W)},invertBatch:(W)=>pE(q,W),cmov:(W,G,U)=>U?G:W});return Object.freeze(q)}function Kn($){if(typeof $!=="bigint")throw Error("field order must be bigint");let Q=$.toString(2).length;return Math.ceil(Q/8)}function cE($){let Q=Kn($);return Q+Math.ceil(Q/2)}function Gn($,Q,Z=!1){let X=$.length,Y=Kn(Q),z=cE(Q);if(X<16||X<z||X>1024)throw Error("expected "+z+"-1024 bytes of input, got "+X);let J=Z?vE($):YZ($),q=a9(J,Q-S9)+S9;return Z?yE(q,Y):dz(q,Y)}var B2,S9,nz,jM0,hE,zn,qn,RM0,NM0,TM0;var jR=p(()=>{F$();PR();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */B2=BigInt(0),S9=BigInt(1),nz=BigInt(2),jM0=BigInt(3),hE=BigInt(4),zn=BigInt(5),qn=BigInt(8),RM0=BigInt(9),NM0=BigInt(16);TM0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function dE($,Q){let Z=Q.negate();return $?Z:Q}function On($,Q){if(!Number.isSafeInteger($)||$<=0||$>Q)throw Error("invalid window size, expected [1.."+Q+"], got W="+$)}function lE($,Q){On($,Q);let Z=Math.ceil(Q/$)+1,X=2**($-1),Y=2**$,z=iz($),J=BigInt($);return{windows:Z,windowSize:X,mask:z,maxNumber:Y,shiftBy:J}}function Vn($,Q,Z){let{windowSize:X,mask:Y,maxNumber:z,shiftBy:J}=Z,q=Number($&Y),W=$>>J;if(q>X)q-=z,W+=nE;let G=Q*X,U=G+Math.abs(q)-1,D=q===0,P=q<0,H=Q%2!==0;return{nextN:W,offset:U,isZero:D,isNeg:P,isNegF:H,offsetF:G}}function wM0($,Q){if(!Array.isArray($))throw Error("array expected");$.forEach((Z,X)=>{if(!(Z instanceof Q))throw Error("invalid point at index "+X)})}function BM0($,Q){if(!Array.isArray($))throw Error("array of scalars expected");$.forEach((Z,X)=>{if(!Q.isValid(Z))throw Error("invalid scalar at index "+X)})}function oE($){return Dn.get($)||1}function Mn($,Q){return{constTimeNegate:dE,hasPrecomputes(Z){return oE(Z)!==1},unsafeLadder(Z,X,Y=$.ZERO){let z=Z;while(X>Un){if(X&nE)Y=Y.add(z);z=z.double(),X>>=nE}return Y},precomputeWindow(Z,X){let{windows:Y,windowSize:z}=lE(X,Q),J=[],q=Z,W=q;for(let G=0;G<Y;G++){W=q,J.push(W);for(let U=1;U<z;U++)W=W.add(q),J.push(W);q=W.double()}return J},wNAF(Z,X,Y){let{ZERO:z,BASE:J}=$,q=lE(Z,Q);for(let W=0;W<q.windows;W++){let{nextN:G,offset:U,isZero:D,isNeg:P,isNegF:H,offsetF:N}=Vn(Y,W,q);if(Y=G,D)J=J.add(dE(H,X[N]));else z=z.add(dE(P,X[U]))}return{p:z,f:J}},wNAFUnsafe(Z,X,Y,z=$.ZERO){let J=lE(Z,Q);for(let q=0;q<J.windows;q++){if(Y===Un)break;let{nextN:W,offset:G,isZero:U,isNeg:D}=Vn(Y,q,J);if(Y=W,U)continue;else{let P=X[G];z=z.add(D?P.negate():P)}}return z},getPrecomputes(Z,X,Y){let z=iE.get(X);if(!z){if(z=this.precomputeWindow(X,Z),Z!==1)iE.set(X,Y(z))}return z},wNAFCached(Z,X,Y){let z=oE(Z);return this.wNAF(z,this.getPrecomputes(z,Z,Y),X)},wNAFCachedUnsafe(Z,X,Y,z){let J=oE(Z);if(J===1)return this.unsafeLadder(Z,X,z);return this.wNAFUnsafe(J,this.getPrecomputes(J,Z,Y),X,z)},setWindowSize(Z,X){On(X,Q),Dn.set(Z,X),iE.delete(Z)}}}function Pn($,Q,Z,X){if(wM0(Z,$),BM0(X,Q),Z.length!==X.length)throw Error("arrays of points and scalars must have equal length");let Y=$.ZERO,z=Yn(BigInt(Z.length)),J=z>12?z-3:z>4?z-2:z?2:1,q=iz(J),W=Array(Number(q)+1).fill(Y),G=Math.floor((Q.BITS-1)/J)*J,U=Y;for(let D=G;D>=0;D-=J){W.fill(Y);for(let H=0;H<X.length;H++){let N=X[H],C=Number(N>>BigInt(D)&q);W[C]=W[C].add(Z[H])}let P=Y;for(let H=W.length-1,N=Y;H>0;H--)N=N.add(W[H]),P=P.add(N);if(U=U.add(P),D!==0)for(let H=0;H<J;H++)U=U.double()}return U}function rE($){return mE($.Fp),oz($,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...uE($.n,$.nBitLength),...$,...{p:$.Fp.ORDER}})}var Un,nE,iE,Dn;var Hn=p(()=>{jR();PR();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Un=BigInt(0),nE=BigInt(1);iE=new WeakMap,Dn=new WeakMap});function jn($){if($.lowS!==void 0)aK("lowS",$.lowS);if($.prehash!==void 0)aK("prehash",$.prehash)}function EM0($){let Q=rE($);oz(Q,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:Z,Fp:X,a:Y}=Q;if(Z){if(!X.eql(Y,X.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof Z!=="object"||typeof Z.beta!=="bigint"||typeof Z.splitScalar!=="function")throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...Q})}function IM0($){let Q=EM0($),{Fp:Z}=Q,X=HO(Q.n,Q.nBitLength),Y=Q.toBytes||((C,L,B)=>{let E=L.toAffine();return PO(Uint8Array.from([4]),Z.toBytes(E.x),Z.toBytes(E.y))}),z=Q.fromBytes||((C)=>{let L=C.subarray(1),B=Z.fromBytes(L.subarray(0,Z.BYTES)),E=Z.fromBytes(L.subarray(Z.BYTES,2*Z.BYTES));return{x:B,y:E}});function J(C){let{a:L,b:B}=Q,E=Z.sqr(C),I=Z.mul(E,C);return Z.add(Z.add(I,Z.mul(C,L)),B)}if(!Z.eql(Z.sqr(Q.Gy),J(Q.Gx)))throw Error("bad generator point: equation left != right");function q(C){return MR(C,D9,Q.n)}function W(C){let{allowedPrivateKeyLengths:L,nByteLength:B,wrapPrivateKey:E,n:I}=Q;if(L&&typeof C!=="bigint"){if(cz(C))C=sK(C);if(typeof C!=="string"||!L.includes(C.length))throw Error("invalid private key");C=C.padStart(B*2,"0")}let _;try{_=typeof C==="bigint"?C:YZ(x4("private key",C,B))}catch(f){throw Error("invalid private key, expected hex or "+B+" bytes, got "+typeof C)}if(E)_=a9(_,I);return lz("private key",_,D9,I),_}function G(C){if(!(C instanceof P))throw Error("ProjectivePoint expected")}let U=gE((C,L)=>{let{px:B,py:E,pz:I}=C;if(Z.eql(I,Z.ONE))return{x:B,y:E};let _=C.is0();if(L==null)L=_?Z.ONE:Z.inv(I);let f=Z.mul(B,L),x=Z.mul(E,L),g=Z.mul(I,L);if(_)return{x:Z.ZERO,y:Z.ZERO};if(!Z.eql(g,Z.ONE))throw Error("invZ was invalid");return{x:f,y:x}}),D=gE((C)=>{if(C.is0()){if(Q.allowInfinityPoint&&!Z.is0(C.py))return;throw Error("bad point: ZERO")}let{x:L,y:B}=C.toAffine();if(!Z.isValid(L)||!Z.isValid(B))throw Error("bad point: x or y not FE");let E=Z.sqr(B),I=J(L);if(!Z.eql(E,I))throw Error("bad point: equation left != right");if(!C.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class P{constructor(C,L,B){if(C==null||!Z.isValid(C))throw Error("x required");if(L==null||!Z.isValid(L)||Z.is0(L))throw Error("y required");if(B==null||!Z.isValid(B))throw Error("z required");this.px=C,this.py=L,this.pz=B,Object.freeze(this)}static fromAffine(C){let{x:L,y:B}=C||{};if(!C||!Z.isValid(L)||!Z.isValid(B))throw Error("invalid affine point");if(C instanceof P)throw Error("projective point not allowed");let E=(I)=>Z.eql(I,Z.ZERO);if(E(L)&&E(B))return P.ZERO;return new P(L,B,Z.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){let L=pE(Z,C.map((B)=>B.pz));return C.map((B,E)=>B.toAffine(L[E])).map(P.fromAffine)}static fromHex(C){let L=P.fromAffine(z(x4("pointHex",C)));return L.assertValidity(),L}static fromPrivateKey(C){return P.BASE.multiply(W(C))}static msm(C,L){return Pn(P,X,C,L)}_setWindowSize(C){N.setWindowSize(this,C)}assertValidity(){D(this)}hasEvenY(){let{y:C}=this.toAffine();if(Z.isOdd)return!Z.isOdd(C);throw Error("Field doesn't support isOdd")}equals(C){G(C);let{px:L,py:B,pz:E}=this,{px:I,py:_,pz:f}=C,x=Z.eql(Z.mul(L,f),Z.mul(I,E)),g=Z.eql(Z.mul(B,f),Z.mul(_,E));return x&&g}negate(){return new P(this.px,Z.neg(this.py),this.pz)}double(){let{a:C,b:L}=Q,B=Z.mul(L,Rn),{px:E,py:I,pz:_}=this,f=Z.ZERO,x=Z.ZERO,g=Z.ZERO,h=Z.mul(E,E),v=Z.mul(I,I),b=Z.mul(_,_),m=Z.mul(E,I);return m=Z.add(m,m),g=Z.mul(E,_),g=Z.add(g,g),f=Z.mul(C,g),x=Z.mul(B,b),x=Z.add(f,x),f=Z.sub(v,x),x=Z.add(v,x),x=Z.mul(f,x),f=Z.mul(m,f),g=Z.mul(B,g),b=Z.mul(C,b),m=Z.sub(h,b),m=Z.mul(C,m),m=Z.add(m,g),g=Z.add(h,h),h=Z.add(g,h),h=Z.add(h,b),h=Z.mul(h,m),x=Z.add(x,h),b=Z.mul(I,_),b=Z.add(b,b),h=Z.mul(b,m),f=Z.sub(f,h),g=Z.mul(b,v),g=Z.add(g,g),g=Z.add(g,g),new P(f,x,g)}add(C){G(C);let{px:L,py:B,pz:E}=this,{px:I,py:_,pz:f}=C,x=Z.ZERO,g=Z.ZERO,h=Z.ZERO,v=Q.a,b=Z.mul(Q.b,Rn),m=Z.mul(L,I),K=Z.mul(B,_),M=Z.mul(E,f),j=Z.add(L,B),O=Z.add(I,_);j=Z.mul(j,O),O=Z.add(m,K),j=Z.sub(j,O),O=Z.add(L,E);let R=Z.add(I,f);return O=Z.mul(O,R),R=Z.add(m,M),O=Z.sub(O,R),R=Z.add(B,E),x=Z.add(_,f),R=Z.mul(R,x),x=Z.add(K,M),R=Z.sub(R,x),h=Z.mul(v,O),x=Z.mul(b,M),h=Z.add(x,h),x=Z.sub(K,h),h=Z.add(K,h),g=Z.mul(x,h),K=Z.add(m,m),K=Z.add(K,m),M=Z.mul(v,M),O=Z.mul(b,O),K=Z.add(K,M),M=Z.sub(m,M),M=Z.mul(v,M),O=Z.add(O,M),m=Z.mul(K,O),g=Z.add(g,m),m=Z.mul(R,O),x=Z.mul(j,x),x=Z.sub(x,m),m=Z.mul(j,K),h=Z.mul(R,h),h=Z.add(h,m),new P(x,g,h)}subtract(C){return this.add(C.negate())}is0(){return this.equals(P.ZERO)}wNAF(C){return N.wNAFCached(this,C,P.normalizeZ)}multiplyUnsafe(C){let{endo:L,n:B}=Q;lz("scalar",C,zZ,B);let E=P.ZERO;if(C===zZ)return E;if(this.is0()||C===D9)return this;if(!L||N.hasPrecomputes(this))return N.wNAFCachedUnsafe(this,C,P.normalizeZ);let{k1neg:I,k1:_,k2neg:f,k2:x}=L.splitScalar(C),g=E,h=E,v=this;while(_>zZ||x>zZ){if(_&D9)g=g.add(v);if(x&D9)h=h.add(v);v=v.double(),_>>=D9,x>>=D9}if(I)g=g.negate();if(f)h=h.negate();return h=new P(Z.mul(h.px,L.beta),h.py,h.pz),g.add(h)}multiply(C){let{endo:L,n:B}=Q;lz("scalar",C,D9,B);let E,I;if(L){let{k1neg:_,k1:f,k2neg:x,k2:g}=L.splitScalar(C),{p:h,f:v}=this.wNAF(f),{p:b,f:m}=this.wNAF(g);h=N.constTimeNegate(_,h),b=N.constTimeNegate(x,b),b=new P(Z.mul(b.px,L.beta),b.py,b.pz),E=h.add(b),I=v.add(m)}else{let{p:_,f}=this.wNAF(C);E=_,I=f}return P.normalizeZ([E,I])[0]}multiplyAndAddUnsafe(C,L,B){let E=P.BASE,I=(f,x)=>x===zZ||x===D9||!f.equals(E)?f.multiplyUnsafe(x):f.multiply(x),_=I(this,L).add(I(C,B));return _.is0()?void 0:_}toAffine(C){return U(this,C)}isTorsionFree(){let{h:C,isTorsionFree:L}=Q;if(C===D9)return!0;if(L)return L(P,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:C,clearCofactor:L}=Q;if(C===D9)return this;if(L)return L(P,this);return this.multiplyUnsafe(Q.h)}toRawBytes(C=!0){return aK("isCompressed",C),this.assertValidity(),Y(P,this,C)}toHex(C=!0){return aK("isCompressed",C),sK(this.toRawBytes(C))}}P.BASE=new P(Q.Gx,Q.Gy,Z.ONE),P.ZERO=new P(Z.ZERO,Z.ONE,Z.ZERO);let H=Q.nBitLength,N=Mn(P,Q.endo?Math.ceil(H/2):H);return{CURVE:Q,ProjectivePoint:P,normPrivateKeyToScalar:W,weierstrassEquation:J,isWithinCurveOrder:q}}function _M0($){let Q=rE($);return oz(Q,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...Q})}function Cn($){let Q=_M0($),{Fp:Z,n:X}=Q,Y=Z.BYTES+1,z=2*Z.BYTES+1;function J(j){return a9(j,X)}function q(j){return HR(j,X)}let{ProjectivePoint:W,normPrivateKeyToScalar:G,weierstrassEquation:U,isWithinCurveOrder:D}=IM0({...Q,toBytes(j,O,R){let F=O.toAffine(),A=Z.toBytes(F.x),T=PO;if(aK("isCompressed",R),R)return T(Uint8Array.from([O.hasEvenY()?2:3]),A);else return T(Uint8Array.from([4]),A,Z.toBytes(F.y))},fromBytes(j){let O=j.length,R=j[0],F=j.subarray(1);if(O===Y&&(R===2||R===3)){let A=YZ(F);if(!MR(A,D9,Z.ORDER))throw Error("Point is not on curve");let T=U(A),V;try{V=Z.sqrt(T)}catch(S){let y=S instanceof Error?": "+S.message:"";throw Error("Point is not on curve"+y)}let w=(V&D9)===D9;if((R&1)===1!==w)V=Z.neg(V);return{x:A,y:V}}else if(O===z&&R===4){let A=Z.fromBytes(F.subarray(0,Z.BYTES)),T=Z.fromBytes(F.subarray(Z.BYTES,2*Z.BYTES));return{x:A,y:T}}else{let A=Y,T=z;throw Error("invalid Point, expected length of "+A+", or uncompressed "+T+", got "+O)}}}),P=(j)=>sK(dz(j,Q.nByteLength));function H(j){let O=X>>D9;return j>O}function N(j){return H(j)?J(-j):j}let C=(j,O,R)=>YZ(j.slice(O,R));class L{constructor(j,O,R){if(lz("r",j,D9,X),lz("s",O,D9,X),this.r=j,this.s=O,R!=null)this.recovery=R;Object.freeze(this)}static fromCompact(j){let O=Q.nByteLength;return j=x4("compactSignature",j,O*2),new L(C(j,0,O),C(j,O,2*O))}static fromDER(j){let{r:O,s:R}=JZ.toSig(x4("DER",j));return new L(O,R)}assertValidity(){}addRecoveryBit(j){return new L(this.r,this.s,j)}recoverPublicKey(j){let{r:O,s:R,recovery:F}=this,A=x(x4("msgHash",j));if(F==null||![0,1,2,3].includes(F))throw Error("recovery id invalid");let T=F===2||F===3?O+Q.n:O;if(T>=Z.ORDER)throw Error("recovery id 2 or 3 invalid");let V=(F&1)===0?"02":"03",w=W.fromHex(V+P(T)),k=q(T),S=J(-A*k),y=J(R*k),u=W.BASE.multiplyAndAddUnsafe(w,S,y);if(!u)throw Error("point at infinify");return u.assertValidity(),u}hasHighS(){return H(this.s)}normalizeS(){return this.hasHighS()?new L(this.r,J(-this.s),this.recovery):this}toDERRawBytes(){return MO(this.toDERHex())}toDERHex(){return JZ.hexFromSig(this)}toCompactRawBytes(){return MO(this.toCompactHex())}toCompactHex(){return P(this.r)+P(this.s)}}let B={isValidPrivateKey(j){try{return G(j),!0}catch(O){return!1}},normPrivateKeyToScalar:G,randomPrivateKey:()=>{let j=cE(Q.n);return Gn(Q.randomBytes(j),Q.n)},precompute(j=8,O=W.BASE){return O._setWindowSize(j),O.multiply(BigInt(3)),O}};function E(j,O=!0){return W.fromPrivateKey(j).toRawBytes(O)}function I(j){let O=cz(j),R=typeof j==="string",F=(O||R)&&j.length;if(O)return F===Y||F===z;if(R)return F===2*Y||F===2*z;if(j instanceof W)return!0;return!1}function _(j,O,R=!0){if(I(j))throw Error("first arg must be private key");if(!I(O))throw Error("second arg must be public key");return W.fromHex(O).multiply(G(j)).toRawBytes(R)}let f=Q.bits2int||function(j){if(j.length>8192)throw Error("input is too large");let O=YZ(j),R=j.length*8-Q.nBitLength;return R>0?O>>BigInt(R):O},x=Q.bits2int_modN||function(j){return J(f(j))},g=iz(Q.nBitLength);function h(j){return lz("num < 2^"+Q.nBitLength,j,zZ,g),dz(j,Q.nByteLength)}function v(j,O,R=b){if(["recovered","canonical"].some((z0)=>(z0 in R)))throw Error("sign() legacy options not supported");let{hash:F,randomBytes:A}=Q,{lowS:T,prehash:V,extraEntropy:w}=R;if(T==null)T=!0;if(j=x4("msgHash",j),jn(R),V)j=x4("prehashed msgHash",F(j));let k=x(j),S=G(O),y=[h(S),h(k)];if(w!=null&&w!==!1){let z0=w===!0?A(Z.BYTES):w;y.push(x4("extraEntropy",z0))}let u=PO(...y),c=k;function o(z0){let e=f(z0);if(!D(e))return;let s=q(e),J0=W.BASE.multiply(e).toAffine(),t=J(J0.x);if(t===zZ)return;let Z0=J(s*J(c+t*S));if(Z0===zZ)return;let N0=(J0.x===t?0:2)|Number(J0.y&D9),i=Z0;if(T&&H(Z0))i=N(Z0),N0^=1;return new L(t,i,N0)}return{seed:u,k2sig:o}}let b={lowS:Q.lowS,prehash:!1},m={lowS:Q.lowS,prehash:!1};function K(j,O,R=b){let{seed:F,k2sig:A}=v(j,O,R),T=Q;return Jn(T.hash.outputLen,T.nByteLength,T.hmac)(F,A)}W.BASE._setWindowSize(8);function M(j,O,R,F=m){let A=j;O=x4("msgHash",O),R=x4("publicKey",R);let{lowS:T,prehash:V,format:w}=F;if(jn(F),"strict"in F)throw Error("options.strict was renamed to lowS");if(w!==void 0&&w!=="compact"&&w!=="der")throw Error("format must be compact or der");let k=typeof A==="string"||cz(A),S=!k&&!w&&typeof A==="object"&&A!==null&&typeof A.r==="bigint"&&typeof A.s==="bigint";if(!k&&!S)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");let y=void 0,u;try{if(S)y=new L(A.r,A.s);if(k){try{if(w!=="compact")y=L.fromDER(A)}catch(N0){if(!(N0 instanceof JZ.Err))throw N0}if(!y&&w!=="der")y=L.fromCompact(A)}u=W.fromHex(R)}catch(N0){return!1}if(!y)return!1;if(T&&y.hasHighS())return!1;if(V)O=Q.hash(O);let{r:c,s:o}=y,z0=x(O),e=q(o),s=J(z0*e),J0=J(c*e),t=W.BASE.multiplyAndAddUnsafe(u,s,J0)?.toAffine();if(!t)return!1;return J(t.x)===c}return{CURVE:Q,getPublicKey:E,getSharedSecret:_,sign:K,verify:M,ProjectivePoint:W,Signature:L,utils:B}}var Nn,JZ,zZ,D9,_h0,Rn,Sh0;var Ln=p(()=>{Hn();jR();PR();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Nn=class Nn extends Error{constructor($=""){super($)}};JZ={Err:Nn,_tlv:{encode:($,Q)=>{let{Err:Z}=JZ;if($<0||$>256)throw new Z("tlv.encode: wrong tag");if(Q.length&1)throw new Z("tlv.encode: unpadded data");let X=Q.length/2,Y=DO(X);if(Y.length/2&128)throw new Z("tlv.encode: long form length too big");let z=X>127?DO(Y.length/2|128):"";return DO($)+z+Y+Q},decode($,Q){let{Err:Z}=JZ,X=0;if($<0||$>256)throw new Z("tlv.encode: wrong tag");if(Q.length<2||Q[X++]!==$)throw new Z("tlv.decode: wrong tlv");let Y=Q[X++],z=!!(Y&128),J=0;if(!z)J=Y;else{let W=Y&127;if(!W)throw new Z("tlv.decode(long): indefinite length not supported");if(W>4)throw new Z("tlv.decode(long): byte length is too big");let G=Q.subarray(X,X+W);if(G.length!==W)throw new Z("tlv.decode: length bytes not complete");if(G[0]===0)throw new Z("tlv.decode(long): zero leftmost byte");for(let U of G)J=J<<8|U;if(X+=W,J<128)throw new Z("tlv.decode(long): not minimal encoding")}let q=Q.subarray(X,X+J);if(q.length!==J)throw new Z("tlv.decode: wrong value length");return{v:q,l:Q.subarray(X+J)}}},_int:{encode($){let{Err:Q}=JZ;if($<zZ)throw new Q("integer: negative integers are not allowed");let Z=DO($);if(Number.parseInt(Z[0],16)&8)Z="00"+Z;if(Z.length&1)throw new Q("unexpected DER parsing assertion: unpadded hex");return Z},decode($){let{Err:Q}=JZ;if($[0]&128)throw new Q("invalid signature integer: negative");if($[0]===0&&!($[1]&128))throw new Q("invalid signature integer: unnecessary leading zero");return YZ($)}},toSig($){let{Err:Q,_int:Z,_tlv:X}=JZ,Y=x4("signature",$),{v:z,l:J}=X.decode(48,Y);if(J.length)throw new Q("invalid signature: left bytes after parsing");let{v:q,l:W}=X.decode(2,z),{v:G,l:U}=X.decode(2,W);if(U.length)throw new Q("invalid signature: left bytes after parsing");return{r:Z.decode(q),s:Z.decode(G)}},hexFromSig($){let{_tlv:Q,_int:Z}=JZ,X=Q.encode(2,Z.encode($.r)),Y=Q.encode(2,Z.encode($.s)),z=X+Y;return Q.encode(48,z)}},zZ=BigInt(0),D9=BigInt(1),_h0=BigInt(2),Rn=BigInt(3),Sh0=BigInt(4)});function SM0($){return{hash:$,hmac:(Q,...Z)=>_E($,Q,wE(...Z)),randomBytes:mo}}function Tn($,Q){let Z=(X)=>Cn({...$,...SM0(X)});return{...Z(Q),create:Z}}var Fn=p(()=>{eo();F$();Ln();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */});function kM0($){let Q=Bn,Z=BigInt(3),X=BigInt(6),Y=BigInt(11),z=BigInt(22),J=BigInt(23),q=BigInt(44),W=BigInt(88),G=$*$*$%Q,U=G*G*$%Q,D=b4(U,Z,Q)*U%Q,P=b4(D,Z,Q)*U%Q,H=b4(P,aE,Q)*G%Q,N=b4(H,Y,Q)*H%Q,C=b4(N,z,Q)*N%Q,L=b4(C,q,Q)*C%Q,B=b4(L,W,Q)*L%Q,E=b4(B,q,Q)*C%Q,I=b4(E,Z,Q)*U%Q,_=b4(I,J,Q)*N%Q,f=b4(_,X,Q)*G%Q,x=b4(f,aE,Q);if(!sE.eql(sE.sqr(x),$))throw Error("Cannot find square root");return x}var Bn,An,fM0,aE,wn=($,Q)=>($+Q/aE)/Q,sE,A$,mh0,ph0;var En=p(()=>{EE();Fn();jR();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Bn=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),An=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),fM0=BigInt(1),aE=BigInt(2);sE=HO(Bn,void 0,void 0,{sqrt:kM0}),A$=Tn({a:BigInt(0),b:BigInt(7),Fp:sE,n:An,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:($)=>{let Q=An,Z=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),X=-fM0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),Y=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),z=Z,J=BigInt("0x100000000000000000000000000000000"),q=wn(z*$,Q),W=wn(-X*$,Q),G=a9($-q*Z-W*Y,Q),U=a9(-q*X-W*z,Q),D=G>J,P=U>J;if(D)G=Q-G;if(P)U=Q-U;if(G>J||U>J)throw Error("splitScalar: Endomorphism failed, k="+$);return{k1neg:D,k1:G,k2neg:P,k2:U}}}},DR),mh0=BigInt(0),ph0=A$.ProjectivePoint});var RR=p(()=>{En()});var In;var _n=p(()=>{F$();In=k4});function jO($){if(!($ instanceof Uint8Array))throw TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof $}`);return new TextDecoder().decode($)}function tE($){let Q=$.startsWith("0x")?$.substring(2):$;return ho(Q)}function X1($,Q){if($.length!==Q.length)return!1;for(let Z=0;Z<$.length;Z++)if($[Z]!==Q[Z])return!1;return!0}function rz($){return(Q)=>{return In(Q),$(Q)}}var RO=p(()=>{_n();F$();F$()});var NR;var eE=p(()=>{EE();RO();NR=rz(DR)});function n($,Q){return new $I({code:"ETHEREUMJS_DEFAULT_ERROR_CODE"},$,Q)}var $I;var QI=p(()=>{$I=class $I extends Error{constructor($,Q,Z){super(Q??$.code);if(this.type=$,Z!==void 0)this.stack=Z}getMetadata(){return this.type}toObject(){return{type:this.getMetadata(),message:this.message??"",stack:this.stack??"",className:this.constructor.name}}}});function Sn($){if($[0]===0)throw n("invalid RLP: extra zeros");return vM0(bM0($))}function fn($,Q){if($<56)return Uint8Array.from([$+Q]);let Z=YI($),X=Z.length/2,Y=YI(Q+55+X);return Uint8Array.from(XI(Y+Z))}function tK($,Q,Z){if(Z>$.length)throw n("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return $.slice(Q,Z)}function ZI($){let Q,Z,X,Y,z,J=[],q=$[0];if(q<=127)return{data:$.slice(0,1),remainder:$.subarray(1)};else if(q<=183){if(Q=q-127,q===128)X=Uint8Array.from([]);else X=tK($,1,Q);if(Q===2&&X[0]<128)throw n("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:X,remainder:$.subarray(Q)}}else if(q<=191){if(Z=q-182,$.length-1<Z)throw n("invalid RLP: not enough bytes for string length");if(Q=Sn(tK($,1,Z)),Q<=55)throw n("invalid RLP: expected string length to be greater than 55");return X=tK($,Z,Q+Z),{data:X,remainder:$.subarray(Q+Z)}}else if(q<=247){Q=q-191,Y=tK($,1,Q);while(Y.length)z=ZI(Y),J.push(z.data),Y=z.remainder;return{data:J,remainder:$.subarray(Q)}}else{if(Z=q-246,Q=Sn(tK($,1,Z)),Q<56)throw n("invalid RLP: encoded list too short");let W=Z+Q;if(W>$.length)throw n("invalid RLP: total length is larger than the data");Y=tK($,Z,W);while(Y.length)z=ZI(Y),J.push(z.data),Y=z.remainder;return{data:J,remainder:$.subarray(W)}}}function bM0($){let Q="";for(let Z=0;Z<$.length;Z++)Q+=xM0[$[Z]];return Q}function vM0($){let Q=Number.parseInt($,16);if(Number.isNaN(Q))throw n("Invalid byte sequence");return Q}function kn($){if($>=qZ._0&&$<=qZ._9)return $-qZ._0;if($>=qZ._A&&$<=qZ._F)return $-(qZ._A-10);if($>=qZ._a&&$<=qZ._f)return $-(qZ._a-10);return}function XI($){if($.slice(0,2)==="0x")$=$.slice(0,2);if(typeof $!=="string")throw n("hex string expected, got "+typeof $);let Q=$.length,Z=Q/2;if(Q%2)throw n("padded hex string expected, got unpadded hex of length "+Q);let X=new Uint8Array(Z);for(let Y=0,z=0;Y<Z;Y++,z+=2){let J=kn($.charCodeAt(z)),q=kn($.charCodeAt(z+1));if(J===void 0||q===void 0){let W=$[z]+$[z+1];throw n('hex string expected, got non-hex character "'+W+'" at index '+z)}X[Y]=J*16+q}return X}function xn(...$){if($.length===1)return $[0];let Q=$.reduce((X,Y)=>X+Y.length,0),Z=new Uint8Array(Q);for(let X=0,Y=0;X<$.length;X++){let z=$[X];Z.set(z,Y),Y+=z.length}return Z}function yM0($){return new TextEncoder().encode($)}function YI($){if($<0)throw n("Invalid integer as argument, must be unsigned!");let Q=$.toString(16);return Q.length%2?`0${Q}`:Q}function gM0($){return $.length%2?`0${$}`:$}function bn($){return $.length>=2&&$[0]==="0"&&$[1]==="x"}function hM0($){if(typeof $!=="string")return $;return bn($)?$.slice(2):$}function vn($){if($ instanceof Uint8Array)return $;if(typeof $==="string"){if(bn($))return XI(gM0(hM0($)));return yM0($)}if(typeof $==="number"||typeof $==="bigint"){if(!$)return Uint8Array.from([]);return XI(YI($))}if($===null||$===void 0)return Uint8Array.from([]);throw n("toBytes: received unsupported type "+typeof $)}function yn($){if(Array.isArray($)){let Z=[],X=0;for(let Y=0;Y<$.length;Y++){let z=yn($[Y]);Z.push(z),X+=z.length}return xn(fn(X,192),...Z)}let Q=vn($);if(Q.length===1&&Q[0]<128)return Q;return xn(fn(Q.length,128),Q)}function mM0($,Q=!1){if(typeof $>"u"||$===null||$.length===0)return Uint8Array.from([]);let Z=vn($),X=ZI(Z);if(Q)return{data:X.data,remainder:X.remainder.slice()};if(X.remainder.length!==0)throw n("invalid RLP: remainder must be zero");return X.data}var xM0,qZ,I1;var j8=p(()=>{QI();QI();xM0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));qZ={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};I1={encode:yn,decode:mM0}});var WZ=p(()=>{j8()});function WY($,Q){if(typeof $!=="string"||!$.match(/^0x[0-9A-Fa-f]*$/))return!1;if(typeof Q<"u"&&Q>0&&$.length!==2+2*Q)return!1;return!0}function NO($){let Q=$;if(typeof Q!=="string")throw n(`[padToEven] value must be type 'string', received ${typeof Q}`);if(Q.length%2)Q=`0${Q}`;return Q}var az=($)=>{if(typeof $!=="string")throw n(`[stripHexPrefix] input must be type 'string', received ${typeof $}`);return WY($)?$.slice(2):$};var CR=p(()=>{WZ()});var b7=function($){if(!($ instanceof Uint8Array)){let Q=`This method only supports Uint8Array but input was: ${$}`;throw n(Q)}},gn=function($){if(typeof $!=="string"){let Q=`This method only supports strings but input was: ${$}`;throw n(Q)}};var JI=p(()=>{WZ()});function un($,Q=!1){let Z=new ArrayBuffer(4);return new DataView(Z).setUint32(0,$,Q),new Uint8Array(Z)}var hn,$5,Q1=($)=>{if(!$.startsWith("0x"))throw n("input string must be 0x prefixed");return tE(NO(az($)))},v7=($)=>{if($.startsWith("0x"))throw n("input string cannot be 0x prefixed");return tE(NO($))},H0=($)=>{return`0x${$5($)}`},zI,L0=($,Q=!1)=>{if(Q)$.reverse();let Z=H0($);if(Z==="0x")return hn;if(Z.length===4)return zI[$[0]];if(Z.length===6)return zI[$[0]*256+$[1]];return BigInt(Z)},KY=($)=>{let Q=Number(L0($));if(!Number.isSafeInteger(Q))throw n("Number exceeds 53 bits");return Q},LR=($)=>{if(!Number.isSafeInteger($)||$<0)throw n(`Received an invalid integer type: ${$}`);return`0x${$.toString(16)}`},y7=($)=>{let Q=LR($);return Q1(Q)},Z5=($,Q=!1)=>{let Z=Q1(`0x${NO($.toString(16))}`);return Q?Z.reverse():Z},mn=($,Q,Z)=>{if(Z){if($.length<Q)return new Uint8Array([...$,...new Uint8Array(Q-$.length)]);return $.subarray(0,Q)}else{if($.length<Q)return new Uint8Array([...new Uint8Array(Q-$.length),...$]);return $.subarray(-Q)}},b1=($,Q)=>{return b7($),mn($,Q,!1)},E8=($,Q)=>{return b7($),mn($,Q,!0)},uM0=($)=>{let Q=$[0];while($.length>0&&Q.toString()==="0")$=$.slice(1),Q=$[0];return $},g7=($)=>{return b7($),uM0($)},F1=($)=>{if($===null||$===void 0)return new Uint8Array;if(Array.isArray($)||$ instanceof Uint8Array)return Uint8Array.from($);if(typeof $==="string"){if(!WY($))throw n(`Cannot convert string to Uint8Array. toBytes only supports 0x-prefixed hex strings and this string was given: ${$}`);return Q1($)}if(typeof $==="number")return y7($);if(typeof $==="bigint"){if($<hn)throw n(`Cannot convert negative bigint to Uint8Array. Given: ${$}`);let Q=$.toString(16);if(Q.length%2)Q="0"+Q;return v7(Q)}if($.toBytes!==void 0)return $.toBytes();throw n("invalid type")},v4=($,Q=50)=>{let Z=$ instanceof Uint8Array?H0($):$,X=Z.slice(0,2)==="0x"?Q+2:Q;if(Z.length<=X)return Z;return Z.slice(0,X)+""},h7=($)=>{for(let[Q,Z]of Object.entries($))if(Z!==void 0&&Z.length>0&&Z[0]===0)throw n(`${Q} cannot have leading zeroes, received: ${H0(Z)}`)},c1=($)=>{return`0x${$.toString(16)}`},TR=(...$)=>$.reduce((Q,Z)=>Z>Q?Z:Q),Y1=($)=>{return g7(Z5($))},pn=($,Q=!0)=>{let Z=Z5($);if(Q&&Z.length>20)throw Error(`Invalid address bytes length=${Z.length} strict=${Q}`);return b1(Z,20)},sz=($)=>{return g7(y7($))},d1=(...$)=>{if($.length===1)return $[0];let Q=$.reduce((X,Y)=>X+Y.length,0),Z=new Uint8Array(Q);for(let X=0,Y=0;X<$.length;X++){let z=$[X];Z.set(z,Y),Y+=z.length}return Z};var m7=p(()=>{RO();WZ();JI();CR();RO();hn=BigInt(0),$5=UR,zI=[];for(let $=0;$<=65535;$++)zI[$]=BigInt($)});var KZ,e8,FR,cM0,CO,LO,dM0="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",GZ,lM0="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",tz,iM0="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",w3,cn,dn,ln="0000000000000000000000000000000000000003",oM0=10485760,nM0=2097152,Cm0,rM0,Q0,A1,I8,on,eK,w$,$G,nn,ez,Z8,GY,Lm0,AR,QG,TO,Tm0,wR,rn,an,sn,tn,Fm0;var ZG=p(()=>{RR();eE();m7();KZ=BigInt("0xffffffffffffffff"),e8=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),FR=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),cM0=A$.CURVE.n,CO=A$.CURVE.n/BigInt(2),LO=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),GZ=Q1(dM0),tz=Q1(lM0),w3=Q1(iM0),cn=NR(new Uint8Array),dn=Uint8Array.from([128]),Cm0=oM0-nM0,rM0=BigInt(-1),Q0=BigInt(0),A1=BigInt(1),I8=BigInt(2),on=BigInt(3),eK=BigInt(7),w$=BigInt(8),$G=BigInt(27),nn=BigInt(28),ez=BigInt(31),Z8=BigInt(32),GY=BigInt(64),Lm0=BigInt(128),AR=BigInt(255),QG=BigInt(256),TO=BigInt(96),Tm0=BigInt(100),wR=BigInt(160),rn=BigInt(224),an=BigInt(79228162514264340000000000000),sn=BigInt(1461501637330903000000000000000000000000000000000),tn=BigInt(26959946667150640000000000000000000000000000000000000000000000000000),Fm0=I8**QG});var wm0,Bm0;var en=p(()=>{wm0=BigInt(1e9),Bm0=BigInt(1000000000000000000)});function XP0($,Q=24){let Z=new Uint32Array(10);for(let X=24-Q;X<24;X++){for(let J=0;J<10;J++)Z[J]=$[J]^$[J+10]^$[J+20]^$[J+30]^$[J+40];for(let J=0;J<10;J+=2){let q=(J+8)%10,W=(J+2)%10,G=Z[W],U=Z[W+1],D=$r(G,U,1)^Z[q],P=Qr(G,U,1)^Z[q+1];for(let H=0;H<50;H+=10)$[J+H]^=D,$[J+H+1]^=P}let Y=$[2],z=$[3];for(let J=0;J<24;J++){let q=Xr[J],W=$r(Y,z,q),G=Qr(Y,z,q),U=Zr[J];Y=$[U],z=$[U+1],$[U]=W,$[U+1]=G}for(let J=0;J<50;J+=10){for(let q=0;q<10;q++)Z[q]=$[J+q];for(let q=0;q<10;q++)$[J+q]^=~Z[(q+2)%10]&Z[(q+4)%10]}$[0]^=QP0[X],$[1]^=ZP0[X]}T$(Z)}var aM0,FO,sM0,tM0,eM0,$P0,Zr,Xr,Yr,Jr,QP0,ZP0,$r=($,Q,Z)=>Z>32?ro($,Q,Z):oo($,Q,Z),Qr=($,Q,Z)=>Z>32?ao($,Q,Z):no($,Q,Z),qI,BR=($,Q,Z)=>VR(()=>new qI(Q,$,Z)),zr,WI,qr,Wr;var Kr=p(()=>{so();F$();aM0=BigInt(0),FO=BigInt(1),sM0=BigInt(2),tM0=BigInt(7),eM0=BigInt(256),$P0=BigInt(113),Zr=[],Xr=[],Yr=[];for(let $=0,Q=FO,Z=1,X=0;$<24;$++){[Z,X]=[X,(2*Z+3*X)%5],Zr.push(2*(5*X+Z)),Xr.push(($+1)*($+2)/2%64);let Y=aM0;for(let z=0;z<7;z++)if(Q=(Q<<FO^(Q>>tM0)*$P0)%eM0,Q&sM0)Y^=FO<<(FO<<BigInt(z))-FO;Yr.push(Y)}Jr=io(Yr,!0),QP0=Jr[0],ZP0=Jr[1];qI=class qI extends uz{constructor($,Q,Z,X=!1,Y=24){super();if(this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=$,this.suffix=Q,this.outputLen=Z,this.enableXOF=X,this.rounds=Y,zY(Z),!(0<$&&$<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=yo(this.state)}clone(){return this._cloneInto()}keccak(){AE(this.state32),XP0(this.state32,this.rounds),AE(this.state32),this.posOut=0,this.pos=0}update($){L$(this),$=pz($),k4($);let{blockLen:Q,state:Z}=this,X=$.length;for(let Y=0;Y<X;){let z=Math.min(Q-this.pos,X-Y);for(let J=0;J<z;J++)Z[this.pos++]^=$[Y++];if(this.pos===Q)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:$,suffix:Q,pos:Z,blockLen:X}=this;if($[Z]^=Q,(Q&128)!==0&&Z===X-1)this.keccak();$[X-1]^=128,this.keccak()}writeInto($){L$(this,!1),k4($),this.finish();let Q=this.state,{blockLen:Z}=this;for(let X=0,Y=$.length;X<Y;){if(this.posOut>=Z)this.keccak();let z=Math.min(Z-this.posOut,Y-X);$.set(Q.subarray(this.posOut,this.posOut+z),X),this.posOut+=z,X+=z}return $}xofInto($){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto($)}xof($){return zY($),this.xofInto(new Uint8Array($))}digestInto($){if(VO($,this),this.finished)throw Error("digest() was already called");return this.writeInto($),this.destroy(),$}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,T$(this.state)}_cloneInto($){let{blockLen:Q,suffix:Z,outputLen:X,rounds:Y,enableXOF:z}=this;return $||($=new qI(Q,Z,X,z,Y)),$.state32.set(this.state32),$.pos=this.pos,$.posOut=this.posOut,$.finished=this.finished,$.rounds=Y,$.suffix=Z,$.outputLen=X,$.enableXOF=z,$.destroyed=this.destroyed,$}};zr=(()=>BR(1,144,28))(),WI=(()=>BR(1,136,32))(),qr=(()=>BR(1,104,48))(),Wr=(()=>BR(1,72,64))()});var bm0,UY,vm0,ym0;var KI=p(()=>{Kr();RO();bm0=rz(zr),UY=(()=>{let $=rz(WI);return $.create=WI.create,$})(),vm0=rz(qr),ym0=rz(Wr)});class c5{get version(){if(this._version!==null)return this._version;else throw Error(`version=${this._version} not loaded`)}set version($){this._version=$}get nonce(){if(this._nonce!==null)return this._nonce;else throw Error(`nonce=${this._nonce} not loaded`)}set nonce($){this._nonce=$}get balance(){if(this._balance!==null)return this._balance;else throw Error(`balance=${this._balance} not loaded`)}set balance($){this._balance=$}get storageRoot(){if(this._storageRoot!==null)return this._storageRoot;else throw Error(`storageRoot=${this._storageRoot} not loaded`)}set storageRoot($){this._storageRoot=$}get codeHash(){if(this._codeHash!==null)return this._codeHash;else throw Error(`codeHash=${this._codeHash} not loaded`)}set codeHash($){this._codeHash=$}get codeSize(){if(this._codeSize!==null)return this._codeSize;else throw Error(`codeSize=${this._codeSize} not loaded`)}set codeSize($){this._codeSize=$}constructor($=Q0,Q=Q0,Z=w3,X=GZ,Y=0,z=0){if(this._nonce=null,this._balance=null,this._storageRoot=null,this._codeHash=null,this._codeSize=null,this._version=null,this._nonce=$,this._balance=Q,this._storageRoot=Z,this._codeHash=X,Y===null&&X!==null&&!this.isContract())Y=0;this._codeSize=Y,this._version=z,this._validate()}_validate(){if(this._nonce!==null&&this._nonce<Q0)throw n("nonce must be greater than zero");if(this._balance!==null&&this._balance<Q0)throw n("balance must be greater than zero");if(this._storageRoot!==null&&this._storageRoot.length!==32)throw n("storageRoot must have a length of 32");if(this._codeHash!==null&&this._codeHash.length!==32)throw n("codeHash must have a length of 32");if(this._codeSize!==null&&this._codeSize<Q0)throw n("codeSize must be greater than zero")}raw(){return[Y1(this.nonce),Y1(this.balance),this.storageRoot,this.codeHash]}serialize(){return I1.encode(this.raw())}serializeWithPartialInfo(){let $=[],Q=sz(0),Z=sz(1);if(this._nonce!==null)$.push([Z,Y1(this._nonce)]);else $.push([Q]);if(this._balance!==null)$.push([Z,Y1(this._balance)]);else $.push([Q]);if(this._storageRoot!==null)$.push([Z,this._storageRoot]);else $.push([Q]);if(this._codeHash!==null)$.push([Z,this._codeHash]);else $.push([Q]);if(this._codeSize!==null)$.push([Z,sz(this._codeSize)]);else $.push([Q]);if(this._version!==null)$.push([Z,sz(this._version)]);else $.push([Q]);return I1.encode($)}isContract(){if(this._codeHash===null&&this._codeSize===null)throw Error("Insufficient data as codeHash=null and codeSize=null");return this._codeHash!==null&&!X1(this._codeHash,GZ)||this._codeSize!==null&&this._codeSize!==0}isEmpty(){if(this._balance!==null&&this.balance!==Q0||this._nonce===null&&this.nonce!==Q0||this._codeHash!==null&&!X1(this.codeHash,GZ))return!1;return this.balance===Q0&&this.nonce===Q0&&X1(this.codeHash,GZ)}}function UZ($){let{nonce:Q,balance:Z,storageRoot:X,codeHash:Y}=$;if(Q===null||Z===null||X===null||Y===null)throw Error("Partial fields not supported in fromAccountData");return new c5(Q!==void 0?L0(F1(Q)):void 0,Z!==void 0?L0(F1(Z)):void 0,X!==void 0?F1(X):void 0,Y!==void 0?F1(Y):void 0)}function YP0($){let[Q,Z,X,Y]=$;return new c5(L0(Q),L0(Z),X,Y)}function ER($){let Q=I1.decode($);if(!Array.isArray(Q))throw n("Invalid serialized account input. Must be array");return YP0(Q)}var Gr=function($){try{gn($)}catch{return!1}return/^0x[0-9a-fA-F]{40}$/.test($)},GI=function($,Q){if(b7($),b7(Q),L0(Q)===Q0)return UY(I1.encode([$,Uint8Array.from([])])).subarray(-20);return UY(I1.encode([$,Q])).subarray(-20)},UI=function($,Q,Z){if(b7($),b7(Q),b7(Z),$.length!==20)throw n("Expected from to be of length 20");if(Q.length!==32)throw n("Expected salt to be of length 32");return UY(d1(Q1("0xff"),$,Q,UY(Z))).subarray(-20)},VI=function($,Q=!1){if(b7($),Q&&$.length!==64)$=A$.ProjectivePoint.fromHex($).toRawBytes(!1).slice(1);if($.length!==64)throw n("Expected pubKey to be of length 64");return UY($).subarray(-20)},$q,JP0=function($){return b7($),A$.ProjectivePoint.fromPrivateKey($).toRawBytes(!1).slice(1)},Ur=function($){return $q(JP0($))},im0;var IR=p(()=>{j8();KI();RR();m7();ZG();WZ();JI();$q=VI,im0=new Uint8Array(0)});class Q6{constructor($){if($.length!==20)throw n("Invalid address length");this.bytes=$}equals($){return X1(this.bytes,$.bytes)}isZero(){return this.equals(new Q6(new Uint8Array(20)))}isPrecompileOrSystemAddress(){let $=L0(this.bytes),Q=Q0,Z=BigInt("0xffff");return $>=Q&&$<=Z}toString(){return H0(this.bytes)}toBytes(){return new Uint8Array(this.bytes)}}function E2(){return new Q6(new Uint8Array(20))}function Vr($){let Q=Z5($);if(Q.length>20)throw n(`Invalid address, too long: ${Q.length}`);return new Q6(b1(Q,20))}function M9($){if(!Gr($))throw n(`Invalid address input=${$}`);return new Q6(Q1($))}function Or($){if(!($ instanceof Uint8Array))throw n("Public key should be Uint8Array");let Q=VI($);return new Q6(Q)}function OI($){if(!($ instanceof Uint8Array))throw n("Private key should be Uint8Array");let Q=Ur($);return new Q6(Q)}var _R=p(()=>{IR();m7();ZG();WZ()});var Qq,VZ;var Dr=p(()=>{Qq={String:"string",Bytes:"view",Number:"number"},VZ={String:"string",Bytes:"view",JSON:"json"}});function X5($,Q){if($===null)return null;if($===void 0)return;if(typeof $==="string"&&!WY($))throw n(`A string must be provided with a 0x-prefix, given: ${$}`);else if(typeof $==="number"&&!Number.isSafeInteger($))throw n("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");let Z=F1($);switch(Q){case l1.Uint8Array:return Z;case l1.BigInt:return L0(Z);case l1.Number:{let X=L0(Z);if(X>BigInt(Number.MAX_SAFE_INTEGER))throw n("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(X)}case l1.PrefixedHexString:return H0(Z);default:throw n("unknown outputType")}}function zP0($){if($.length===0)return!0;let Q=$[0];if(Array.isArray(Q))return!0;return!1}function Mr($){return!zP0($)}var l1;var DI=p(()=>{m7();WZ();CR();l1={Number:0,BigInt:1,Uint8Array:2,PrefixedHexString:3}});function qP0($){let{index:Q,validatorIndex:Z,address:X,amount:Y}=$,z=X5(Q,l1.BigInt)===Q0?new Uint8Array:X5(Q,l1.Uint8Array),J=X5(Z,l1.BigInt)===Q0?new Uint8Array:X5(Z,l1.Uint8Array),q=X instanceof Q6?X.bytes:X5(X,l1.Uint8Array),W=X5(Y,l1.BigInt)===Q0?new Uint8Array:X5(Y,l1.Uint8Array);return[z,J,q,W]}class Pr{constructor($,Q,Z,X){this.index=$,this.validatorIndex=Q,this.address=Z,this.amount=X}raw(){return qP0(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.bytes,amount:this.amount}}toJSON(){return{index:c1(this.index),validatorIndex:c1(this.validatorIndex),address:H0(this.address.bytes),amount:c1(this.amount)}}}function Hr($){let{index:Q,validatorIndex:Z,address:X,amount:Y}=$,z=X5(Q,l1.BigInt),J=X5(Z,l1.BigInt),q=X instanceof Q6?X:new Q6(F1(X)),W=X5(Y,l1.BigInt);return new Pr(z,J,q,W)}var jr=p(()=>{_R();m7();ZG();DI()});function WP0($,Q){if($===Q0||$===A1)return $;if(Q===void 0)return $-$G;return $-(Q*I8+BigInt(35))}function KP0($){return $===Q0||$===A1}var VY=function($,Q,Z,X,Y){let z=d1(b1(Z,32),b1(X,32)),J=WP0(Q,Y);if(!KP0(J))throw n("Invalid signature v value");return A$.Signature.fromCompact(z).addRecoveryBit(Number(J)).recoverPublicKey($).toRawBytes(!1).slice(1)};var MI=p(()=>{RR();m7();ZG();WZ()});function Nr($){let[Q,Z,X,Y,z,J]=$;return{chainId:H0(Q),address:H0(Z),nonce:H0(X),yParity:H0(Y),r:H0(z),s:H0(J)}}function PI($){let Q=["chainId","address","nonce","yParity","r","s"];for(let Z of Q)if($[Z]===void 0)throw n(`EIP-7702 authorization list invalid: ${Z} is not defined`);return[Q1($.chainId),Q1($.address),Q1($.nonce),Q1($.yParity),Q1($.r),Q1($.s)]}function GP0($){let{chainId:Q,address:Z,nonce:X}=$,Y=Q1(Q),z=b1(Q1(Z),20),J=Q1(X);return[Y,z,J]}function UP0($){if(Array.isArray($)){let[Q,Z,X]=$;if(Z.length!==20)throw n("Cannot sign authority: address length should be 20 bytes");return d1(Rr,I1.encode([g7(Q),Z,g7(X)]))}else{let[Q,Z,X]=GP0($);return d1(Rr,I1.encode([Q,Z,X]))}}function VP0($){return UY(UP0($))}function Cr($){let Q=Array.isArray($)?$:PI($),[Z,X,Y,z,J,q]=Q,W=VP0([Z,X,Y]),G=VY(W,L0(z),J,q);return new Q6($q(G))}var Rr;var Lr=p(()=>{j8();KI();IR();_R();m7();MI();Rr=Q1("0x05")});function Tr($,Q,Z=0){let X=b1(Q.toBytes(),32),Y;if(typeof Z==="number")Y=E8(un(Number(Z),!0),32);else Y=E8(Z5(BigInt(Z),!0).slice(0,32),32);return $(d1(X,Y)).slice(0,31)}function HI($){let Q;if($<Xq-Zq)Q=BigInt(Zq)+$;else Q=AO+$;let Z=Q/BigInt(XG),X=Number(Q%BigInt(XG));return{treeIndex:Z,subIndex:X}}function jI($){let Q=Math.floor((Xq+$)/XG),Z=(Xq+$)%XG;return{treeIndex:Q,subIndex:Z}}var SR,fR,kR,OP0=31,Zq=64,Xq=128,XG=256,AO,Fr=($,Q)=>{switch(Q){case SR.BasicData:return d1($,fR);case SR.CodeHash:return d1($,kR);default:return d1($,Q)}};var Ar=p(()=>{m7();SR={BasicData:0,CodeHash:1},fR=y7(SR.BasicData),kR=y7(SR.CodeHash),AO=BigInt(256)**BigInt(OP0)});function PP0($,Q){let Z=new Uint8Array(Q*YG);return Z.set($),Z[$.byteLength]=128,Z}function HP0($){let Q=new Uint8Array(YG);for(let Z=0;Z<Br;Z++){let X=new Uint8Array(32);X.set($.subarray(Z*31,(Z+1)*31),0),Q.set(X,Z*32)}return H0(Q)}var DP0=32,Br=4096,YG,MP0=6,wr,Er=128,Ir=($)=>{let Q=Array.isArray($)?$:[$],Z=[];for(let X of Q){let Y=A3(X),z=Y.byteLength;if(z===0)throw Error("invalid blob data (0 bytes)");if(z>wr)throw Error(`blob data is too large (${z} bytes > ${wr} bytes)`);let J=Math.ceil(z/YG),q=PP0(Y,J);for(let W=0;W<J;W++){let G=q.subarray(W*YG,(W+1)*YG),U=HP0(G);Z.push(U)}}return Z},_r=($,Q)=>{let Z=[];for(let X of Q)Z.push($.blobToKzgCommitment(X).toLowerCase());return Z},Sr=($,Q,Z)=>{return Q.map((Y,z)=>$.computeBlobProof(Y,Z[z]).toLowerCase())},xR=($,Q)=>{let Z=new Uint8Array(32);return Z.set([Q],0),Z.set(NR(Q1($)).subarray(1),1),H0(Z)},fr=($)=>{let Q=[];for(let Z of $)Q.push(xR(Z,1));return Q},jP0=($,Q)=>{let Z=Q.reduce(([Y,z],J)=>{let q=$.computeCellsAndProofs(J);return[[...Y,...q[0]],[...z,...q[1]]]},[[],[]]),X=Array.from({length:Er},(Y,z)=>z);return[...Z,X]},kr=($,Q)=>{return jP0($,Q)[1]};var xr=p(()=>{eE();m7();YG=DP0*Br,wr=YG*MP0-1});var br=()=>{};class RI{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){if(this.permits>0)return this.permits-=1,Promise.resolve(!0);return new Promise(($)=>this.promiseResolverQueue.push($))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(this.permits===1&&this.promiseResolverQueue.length>0){this.permits-=1;let $=this.promiseResolverQueue.shift();if($)$(!0)}}}class bR{constructor($){this._database=$??new Map}async get($){let Q=$ instanceof Uint8Array?$5($):$.toString();return this._database.get(Q)}async put($,Q){let Z=$ instanceof Uint8Array?$5($):$.toString();this._database.set(Z,Q)}async del($){let Q=$ instanceof Uint8Array?$5($):$.toString();this._database.delete(Q)}async batch($){for(let Q of $){if(Q.type==="del")await this.del(Q.key);if(Q.type==="put")await this.put(Q.key,Q.value)}}shallowCopy(){return new bR(this._database)}open(){return Promise.resolve()}}var vr=p(()=>{m7()});var yr=()=>{};var gr=()=>{};class NI{constructor($){this.maxPoolSize=$,this.currentPoolSize=0,this.queue=[]}executeOrQueue($,Q){if(this.currentPoolSize<this.maxPoolSize)this.currentPoolSize++,Q(()=>{if(this.currentPoolSize--,this.queue.length>0){this.queue.sort((X,Y)=>Y.priority-X.priority);let Z=this.queue.shift();this.executeOrQueue(Z.priority,Z.fn)}});else this.queue.push({priority:$,fn:Q})}finished(){return this.currentPoolSize===0}}var Z1=p(()=>{CR();ZG();WZ();en();IR();_R();Dr();jr();MI();m7();DI();Lr();Ar();xr();br();vr();yr();gr()});var hr={};x1(hr,{BrowserVMEthersProvider:()=>JG});var JG;var vR=p(()=>{A6();Z1();JG=class JG extends M0.AbstractProvider{browserVM;_network;constructor($){super();this.browserVM=$;let Q=$.getChainId?.()??1337;this._network=new M0.Network("browservm",Q)}async _detectNetwork(){return this._network}async _perform($){switch($.method){case"chainId":return this.browserVM.getChainId?.()??1337;case"getBlockNumber":return Number(this.browserVM.getBlockNumber?.()??0);case"getGasPrice":return 1000000000n;case"getPriorityFee":return 1000000000n;case"getFeeData":return{gasPrice:1000000000n,maxFeePerGas:1000000000n,maxPriorityFeePerGas:1000000000n};case"getTransactionCount":{let Q=await this.browserVM.vm.stateManager.getAccount(M9(M0.getAddress($.address)));return Number(Q?.nonce||0n)}case"getBalance":return(await this.browserVM.vm.stateManager.getAccount(M9(M0.getAddress($.address))))?.balance||0n;case"getCode":{let Q=await this.browserVM.vm.stateManager.getCode(M9(M0.getAddress($.address)));return M0.hexlify(Q)}case"call":{let Q=await this.browserVM.vm.evm.runCall({to:M9(M0.getAddress($.transaction.to)),caller:$.transaction.from?M9(M0.getAddress($.transaction.from)):this.browserVM.deployerAddress,data:M0.getBytes($.transaction.data||"0x"),gasLimit:$.transaction.gasLimit||100000n});if(Q.execResult.exceptionError)throw Error(`Call failed: ${Q.execResult.exceptionError}`);return M0.hexlify(Q.execResult.returnValue)}case"broadcastTransaction":return await this.browserVM.executeSignedTx($.signedTransaction);case"getTransactionReceipt":{let Q=this.browserVM.getTransactionReceipt?.($.hash);if(!Q)return null;return{to:Q.to,from:Q.from,contractAddress:Q.contractAddress,hash:Q.transactionHash,index:0,blockHash:Q.blockHash,blockNumber:Q.blockNumber,logsBloom:"0x",gasUsed:100000n,cumulativeGasUsed:100000n,gasPrice:1n,status:Q.status,type:0,logs:Q.logs.map((Z,X)=>({transactionIndex:0,blockNumber:Z.blockNumber,transactionHash:Z.transactionHash,address:Z.address,topics:Z.topics,data:Z.data,logIndex:X,blockHash:Q.blockHash,removed:!1}))}}case"getTransaction":return null;case"estimateGas":return 1000000n;case"getBlock":{let Q=Number(this.browserVM.getBlockNumber?.()??0),Z="0x"+"0".repeat(64);return{hash:this.browserVM.getBlockHash?.()??Z,parentHash:Z,number:Q,timestamp:Math.floor((this.browserVM.getBlockTimestamp?.()??0)/1000),nonce:"0x0000000000000000",difficulty:0n,gasLimit:30000000n,gasUsed:0n,miner:"0x0000000000000000000000000000000000000000",extraData:"0x",baseFeePerGas:1n,transactions:[]}}case"getLogs":return[];default:throw Error(`Unsupported method: ${$.method}`)}}}});function gR($,Q){let[Z,X]=$.toLowerCase()<Q.toLowerCase()?[$,Q]:[Q,$];return M0.solidityPacked(["bytes32","bytes32"],[Z,X])}function hR($){let Q=$.toLowerCase().replace("0x","").padStart(64,"0");return M0.getAddress("0x"+Q.slice(-40))}function CI($,Q,Z,X){let Y=["ReserveUpdated","SecretRevealed","DisputeStarted","DisputeFinalized","InsuranceRegistered","InsuranceClaimed","DebtCreated","DebtEnforced","CooperativeClose"];for(let J of Y)$.on(J,(...q)=>{let W=q[q.length-1],G={name:J,args:W.args?Object.fromEntries(W.args.entries()):{},blockNumber:W.blockNumber??0,blockHash:W.blockHash??"0x",transactionHash:W.transactionHash??"0x"};Z.get(J)?.forEach((U)=>U(G)),X.forEach((U)=>U(G))});let z=["EntityRegistered","NameAssigned","NameTransferred","GovernanceEnabled"];for(let J of z)Q.on(J,(...q)=>{let W=q[q.length-1],G={name:J,args:W.args?Object.fromEntries(W.args.entries()):{},blockNumber:W.blockNumber??0,blockHash:W.blockHash??"0x",transactionHash:W.transactionHash??"0x"};Z.get(J)?.forEach((U)=>U(G)),X.forEach((U)=>U(G))})}var yR="0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80";var wO=p(()=>{A6()});function RP0($,Q=!1){if(Q)return{h:Number($&mR),l:Number($>>mr&mR)};return{h:Number($>>mr&mR)|0,l:Number($&mR)|0}}function pr($,Q=!1){let Z=$.length,X=new Uint32Array(Z),Y=new Uint32Array(Z);for(let z=0;z<Z;z++){let{h:J,l:q}=RP0($[z],Q);[X[z],Y[z]]=[J,q]}return[X,Y]}var mR,mr,ur=($,Q,Z)=>$<<Z|Q>>>32-Z,cr=($,Q,Z)=>Q<<Z|$>>>32-Z,dr=($,Q,Z)=>Q<<Z-32|$>>>64-Z,lr=($,Q,Z)=>$<<Z-32|Q>>>64-Z;var ir=p(()=>{mR=BigInt(4294967295),mr=BigInt(32)});function NP0($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function pR($){if(!Number.isSafeInteger($)||$<0)throw Error("positive integer expected, got "+$)}function Yq($,...Q){if(!NP0($))throw Error("Uint8Array expected");if(Q.length>0&&!Q.includes($.length))throw Error("Uint8Array expected of length "+Q+", got length="+$.length)}function uR($,Q=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(Q&&$.finished)throw Error("Hash#digest() has already been called")}function LI($,Q){Yq($);let Z=Q.outputLen;if($.length<Z)throw Error("digestInto() expects output buffer of length at least "+Z)}function or($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function TI(...$){for(let Q=0;Q<$.length;Q++)$[Q].fill(0)}function LP0($){return $<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255}function TP0($){for(let Q=0;Q<$.length;Q++)$[Q]=LP0($[Q]);return $}function FP0($){if(typeof $!=="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function AI($){if(typeof $==="string")$=FP0($);return Yq($),$}class wI{}function nr($){let Q=(X)=>$().update(AI(X)).digest(),Z=$();return Q.outputLen=Z.outputLen,Q.blockLen=Z.blockLen,Q.create=()=>$(),Q}var CP0,FI;var BI=p(()=>{/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */CP0=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();FI=CP0?($)=>$:TP0});function fP0($,Q=24){let Z=new Uint32Array(10);for(let X=24-Q;X<24;X++){for(let J=0;J<10;J++)Z[J]=$[J]^$[J+10]^$[J+20]^$[J+30]^$[J+40];for(let J=0;J<10;J+=2){let q=(J+8)%10,W=(J+2)%10,G=Z[W],U=Z[W+1],D=rr(G,U,1)^Z[q],P=ar(G,U,1)^Z[q+1];for(let H=0;H<50;H+=10)$[J+H]^=D,$[J+H+1]^=P}let Y=$[2],z=$[3];for(let J=0;J<24;J++){let q=tr[J],W=rr(Y,z,q),G=ar(Y,z,q),U=sr[J];Y=$[U],z=$[U+1],$[U]=W,$[U+1]=G}for(let J=0;J<50;J+=10){for(let q=0;q<10;q++)Z[q]=$[J+q];for(let q=0;q<10;q++)$[J+q]^=~Z[(q+2)%10]&Z[(q+4)%10]}$[0]^=_P0[X],$[1]^=SP0[X]}TI(Z)}var AP0,BO,wP0,BP0,EP0,IP0,sr,tr,er,$a,_P0,SP0,rr=($,Q,Z)=>Z>32?dr($,Q,Z):ur($,Q,Z),ar=($,Q,Z)=>Z>32?lr($,Q,Z):cr($,Q,Z),EI,cR=($,Q,Z)=>nr(()=>new EI(Q,$,Z)),Qa,II,Za,Xa;var Ya=p(()=>{ir();BI();AP0=BigInt(0),BO=BigInt(1),wP0=BigInt(2),BP0=BigInt(7),EP0=BigInt(256),IP0=BigInt(113),sr=[],tr=[],er=[];for(let $=0,Q=BO,Z=1,X=0;$<24;$++){[Z,X]=[X,(2*Z+3*X)%5],sr.push(2*(5*X+Z)),tr.push(($+1)*($+2)/2%64);let Y=AP0;for(let z=0;z<7;z++)if(Q=(Q<<BO^(Q>>BP0)*IP0)%EP0,Q&wP0)Y^=BO<<(BO<<BigInt(z))-BO;er.push(Y)}$a=pr(er,!0),_P0=$a[0],SP0=$a[1];EI=class EI extends wI{constructor($,Q,Z,X=!1,Y=24){super();if(this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=$,this.suffix=Q,this.outputLen=Z,this.enableXOF=X,this.rounds=Y,pR(Z),!(0<$&&$<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=or(this.state)}clone(){return this._cloneInto()}keccak(){FI(this.state32),fP0(this.state32,this.rounds),FI(this.state32),this.posOut=0,this.pos=0}update($){uR(this),$=AI($),Yq($);let{blockLen:Q,state:Z}=this,X=$.length;for(let Y=0;Y<X;){let z=Math.min(Q-this.pos,X-Y);for(let J=0;J<z;J++)Z[this.pos++]^=$[Y++];if(this.pos===Q)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:$,suffix:Q,pos:Z,blockLen:X}=this;if($[Z]^=Q,(Q&128)!==0&&Z===X-1)this.keccak();$[X-1]^=128,this.keccak()}writeInto($){uR(this,!1),Yq($),this.finish();let Q=this.state,{blockLen:Z}=this;for(let X=0,Y=$.length;X<Y;){if(this.posOut>=Z)this.keccak();let z=Math.min(Z-this.posOut,Y-X);$.set(Q.subarray(this.posOut,this.posOut+z),X),this.posOut+=z,X+=z}return $}xofInto($){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto($)}xof($){return pR($),this.xofInto(new Uint8Array($))}digestInto($){if(LI($,this),this.finished)throw Error("digest() was already called");return this.writeInto($),this.destroy(),$}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,TI(this.state)}_cloneInto($){let{blockLen:Q,suffix:Z,outputLen:X,rounds:Y,enableXOF:z}=this;return $||($=new EI(Q,Z,X,z,Y)),$.state32.set(this.state32),$.pos=this.pos,$.posOut=this.posOut,$.finished=this.finished,$.rounds=Y,$.suffix=Z,$.outputLen=X,$.enableXOF=z,$.destroyed=this.destroyed,$}};Qa=(()=>cR(1,144,28))(),II=(()=>cR(1,136,32))(),Za=(()=>cR(1,104,48))(),Xa=(()=>cR(1,72,64))()});var Ja;var za=p(()=>{BI();Ja=Yq});function EO($){return(Q)=>{return Ja(Q),$(Q)}}var qa=p(()=>{za()});var Lu0,Wa,Tu0,Fu0;var Ka=p(()=>{Ya();qa();Lu0=EO(Qa),Wa=(()=>{let $=EO(II);return $.create=II.create,$})(),Tu0=EO(Za),Fu0=EO(Xa)});class _I{constructor($,Q){if(Q?.customCrypto.keccak256!==void 0)this.keccakFunction=Q.customCrypto.keccak256;else this.keccakFunction=Wa;if(!$)this.bitvector=new Uint8Array(IO);else{if($.length!==IO)throw n("bitvectors must be 2048 bits long");this.bitvector=$}}add($){$=this.keccakFunction($);let Q=2047;for(let Z=0;Z<3;Z++){let X=new DataView($.buffer).getUint16(Z*2),Y=Q&X,z=Y>>3,J=1<<Y%8;this.bitvector[IO-z-1]|=J}}check($){$=this.keccakFunction($);let Q=2047,Z=!0;for(let X=0;X<3&&Z;X++){let Y=new DataView($.buffer).getUint16(X*2),z=Q&Y,J=z>>3,q=1<<z%8;Z=(this.bitvector[IO-J-1]&q)!==0}return Boolean(Z)}multiCheck($){return $.every((Q)=>this.check(Q))}or($){for(let Q=0;Q<=IO;Q++)this.bitvector[Q]=this.bitvector[Q]|$.bitvector[Q]}}var IO=256;var Ga=p(()=>{Z1();Ka()});var p7;var Ua=p(()=>{p7={name:"mainnet",chainId:1,defaultHardfork:"prague",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"The Ethereum main chain",url:"https://ethstats.net/",genesis:{gasLimit:5000,difficulty:17179869184,nonce:"0x0000000000000042",extraData:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"},depositContractAddress:"0x00000000219ab540356cBB839Cbe05303d7705Fa",hardforks:[{name:"chainstart",block:0,forkHash:"0xfc64ec04"},{name:"homestead",block:1150000,forkHash:"0x97c2c34c"},{name:"dao",block:1920000,forkHash:"0x91d1f948"},{name:"tangerineWhistle",block:2463000,forkHash:"0x7a64da13"},{name:"spuriousDragon",block:2675000,forkHash:"0x3edd5b10"},{name:"byzantium",block:4370000,forkHash:"0xa00bc324"},{name:"constantinople",block:7280000,forkHash:"0x668db0af"},{name:"petersburg",block:7280000,forkHash:"0x668db0af"},{name:"istanbul",block:9069000,forkHash:"0x879d6e30"},{name:"muirGlacier",block:9200000,forkHash:"0xe029e991"},{name:"berlin",block:12244000,forkHash:"0x0eb440f6"},{name:"london",block:12965000,forkHash:"0xb715077d"},{name:"arrowGlacier",block:13773000,forkHash:"0x20c327fc"},{name:"grayGlacier",block:15050000,forkHash:"0xf0afd0e3"},{name:"paris",block:15537394,forkHash:"0xf0afd0e3"},{name:"mergeNetsplitBlock",block:null,forkHash:null},{name:"shanghai",block:null,timestamp:"1681338455",forkHash:"0xdce96c2d"},{name:"cancun",block:null,timestamp:"1710338135",forkHash:"0x9f3d2254"},{name:"prague",block:null,timestamp:"1746612311",forkHash:"0xc376cf8b"},{name:"osaka",block:null,timestamp:"1764798551",forkHash:"0x5167e2a6"},{name:"bpo1",block:null,timestamp:"1765290071",forkHash:"0xcba2a1c0"},{name:"bpo2",block:null,timestamp:"1767747671",forkHash:"0x07c9462e"}],bootstrapNodes:[{ip:"18.138.108.67",port:30303,id:"d860a01f9722d78051619d1e2351aba3f43f943f6f00718d1b9baa4101932a1f5011f16bb2b1bb35db20d6fe28fa0bf09636d26a87d31de9ec6203eeedb1f666",location:"ap-southeast-1-001",comment:"bootnode-aws-ap-southeast-1-001"},{ip:"3.209.45.79",port:30303,id:"22a8232c3abc76a16ae9d6c3b164f98775fe226f0917b0ca871128a74a8e9630b458460865bab457221f1d448dd9791d24c4e5d88786180ac185df813a68d4de",location:"us-east-1-001",comment:"bootnode-aws-us-east-1-001"},{ip:"65.108.70.101",port:30303,id:"2b252ab6a1d0f971d9722cb839a42cb81db019ba44c08754628ab4a823487071b5695317c8ccd085219c3a03af063495b2f1da8d18218da2d6a82981b45e6ffc",location:"eu-west-1-001",comment:"bootnode-hetzner-hel"},{ip:"157.90.35.166",port:30303,id:"4aeb4ab6c14b23e2c4cfdce879c04b0748a20d8e9b59e25ded2a08143e265c6c25936e74cbc8e641e3312ca288673d91f2f93f8e277de3cfa444ecdaaf982052",location:"eu-central-1-001",comment:"bootnode-hetzner-fsn"}],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net"]}});var Oa=_1((_u0,SI)=>{var kP0=Object.prototype.hasOwnProperty,I2="~";function _O(){}if(Object.create){if(_O.prototype=Object.create(null),!new _O().__proto__)I2=!1}function xP0($,Q,Z){this.fn=$,this.context=Q,this.once=Z||!1}function Va($,Q,Z,X,Y){if(typeof Z!=="function")throw TypeError("The listener must be a function");var z=new xP0(Z,X||$,Y),J=I2?I2+Q:Q;if(!$._events[J])$._events[J]=z,$._eventsCount++;else if(!$._events[J].fn)$._events[J].push(z);else $._events[J]=[$._events[J],z];return $}function dR($,Q){if(--$._eventsCount===0)$._events=new _O;else delete $._events[Q]}function s9(){this._events=new _O,this._eventsCount=0}s9.prototype.eventNames=function(){var Q=[],Z,X;if(this._eventsCount===0)return Q;for(X in Z=this._events)if(kP0.call(Z,X))Q.push(I2?X.slice(1):X);if(Object.getOwnPropertySymbols)return Q.concat(Object.getOwnPropertySymbols(Z));return Q};s9.prototype.listeners=function(Q){var Z=I2?I2+Q:Q,X=this._events[Z];if(!X)return[];if(X.fn)return[X.fn];for(var Y=0,z=X.length,J=Array(z);Y<z;Y++)J[Y]=X[Y].fn;return J};s9.prototype.listenerCount=function(Q){var Z=I2?I2+Q:Q,X=this._events[Z];if(!X)return 0;if(X.fn)return 1;return X.length};s9.prototype.emit=function(Q,Z,X,Y,z,J){var q=I2?I2+Q:Q;if(!this._events[q])return!1;var W=this._events[q],G=arguments.length,U,D;if(W.fn){if(W.once)this.removeListener(Q,W.fn,void 0,!0);switch(G){case 1:return W.fn.call(W.context),!0;case 2:return W.fn.call(W.context,Z),!0;case 3:return W.fn.call(W.context,Z,X),!0;case 4:return W.fn.call(W.context,Z,X,Y),!0;case 5:return W.fn.call(W.context,Z,X,Y,z),!0;case 6:return W.fn.call(W.context,Z,X,Y,z,J),!0}for(D=1,U=Array(G-1);D<G;D++)U[D-1]=arguments[D];W.fn.apply(W.context,U)}else{var P=W.length,H;for(D=0;D<P;D++){if(W[D].once)this.removeListener(Q,W[D].fn,void 0,!0);switch(G){case 1:W[D].fn.call(W[D].context);break;case 2:W[D].fn.call(W[D].context,Z);break;case 3:W[D].fn.call(W[D].context,Z,X);break;case 4:W[D].fn.call(W[D].context,Z,X,Y);break;default:if(!U)for(H=1,U=Array(G-1);H<G;H++)U[H-1]=arguments[H];W[D].fn.apply(W[D].context,U)}}}return!0};s9.prototype.on=function(Q,Z,X){return Va(this,Q,Z,X,!1)};s9.prototype.once=function(Q,Z,X){return Va(this,Q,Z,X,!0)};s9.prototype.removeListener=function(Q,Z,X,Y){var z=I2?I2+Q:Q;if(!this._events[z])return this;if(!Z)return dR(this,z),this;var J=this._events[z];if(J.fn){if(J.fn===Z&&(!Y||J.once)&&(!X||J.context===X))dR(this,z)}else{for(var q=0,W=[],G=J.length;q<G;q++)if(J[q].fn!==Z||Y&&!J[q].once||X&&J[q].context!==X)W.push(J[q]);if(W.length)this._events[z]=W.length===1?W[0]:W;else dR(this,z)}return this};s9.prototype.removeAllListeners=function(Q){var Z;if(Q){if(Z=I2?I2+Q:Q,this._events[Z])dR(this,Z)}else this._events=new _O,this._eventsCount=0;return this};s9.prototype.off=s9.prototype.removeListener;s9.prototype.addListener=s9.prototype.on;s9.prefixed=I2;s9.EventEmitter=s9;if(typeof SI<"u")SI.exports=s9});var OY;var lR=p(()=>{OY=V2(Oa(),1)});var fI,bP0=($,Q)=>{let Z=Q===0?0:~~Q^-1;for(let X=0;X<$.length;X++)Z=fI[(Z^$[X])&255]^Z>>>8;return Z^-1},Da=($,Q)=>{return bP0($,Q)>>>0};var Ma=p(()=>{fI=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918000,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];if(typeof Int32Array<"u")fI=new Int32Array(fI)});var SO,xu0,bu0,w0,DY,OZ;var iR=p(()=>{Z1();SO={Mainnet:1,Sepolia:11155111,Holesky:17000,Hoodi:560048},xu0=Object.entries(SO).reduce(($,[Q,Z])=>{return $[Z]=Q,$},{}),bu0={[SO.Mainnet]:{name:"mainnet",blockNumber:Q0,stateRoot:Q1("0xd7f8974fb5ac78d9ac099b9ad5018bedc2ce0a72dad1827a1709da30580f0544")},[SO.Sepolia]:{name:"sepolia",blockNumber:Q0,stateRoot:Q1("0x5eb6e371a698b8d68f665192350ffcecbbbf322916f4b51bd79bb6887da3f494")},[SO.Holesky]:{name:"holesky",blockNumber:Q0,stateRoot:Q1("0x69d8c9d72f6fa4ad42d4702b433707212f90db395eb54dc20bc85de253788783")},[SO.Hoodi]:{name:"hoodi",blockNumber:Q0,stateRoot:Q1("0xda87d7f5f91c51508791bbcbd4aa5baf04917830b86985eeb9ad3d5bfb657576")}},w0={Chainstart:"chainstart",Homestead:"homestead",Dao:"dao",TangerineWhistle:"tangerineWhistle",SpuriousDragon:"spuriousDragon",Byzantium:"byzantium",Constantinople:"constantinople",Petersburg:"petersburg",Istanbul:"istanbul",MuirGlacier:"muirGlacier",Berlin:"berlin",London:"london",ArrowGlacier:"arrowGlacier",GrayGlacier:"grayGlacier",MergeNetsplitBlock:"mergeNetsplitBlock",Paris:"paris",Shanghai:"shanghai",Cancun:"cancun",Prague:"prague",Osaka:"osaka",Bpo1:"bpo1",Bpo2:"bpo2",Bpo3:"bpo3",Bpo4:"bpo4",Bpo5:"bpo5"},DY={ProofOfStake:"pos",ProofOfWork:"pow",ProofOfAuthority:"poa"},OZ={Ethash:"ethash",Clique:"clique",Casper:"casper"}});var zG;var Pa=p(()=>{iR();zG={1:{minimumHardfork:w0.Chainstart},606:{minimumHardfork:w0.Chainstart},608:{minimumHardfork:w0.Homestead},607:{minimumHardfork:w0.TangerineWhistle},609:{minimumHardfork:w0.SpuriousDragon},1013:{minimumHardfork:w0.Constantinople},1716:{minimumHardfork:w0.Constantinople},1679:{minimumHardfork:w0.Constantinople},2384:{minimumHardfork:w0.Istanbul},663:{minimumHardfork:w0.Chainstart,requiredEIPs:[3540,5450]},1153:{minimumHardfork:w0.Chainstart},1559:{minimumHardfork:w0.Berlin,requiredEIPs:[2930]},2565:{minimumHardfork:w0.Byzantium},2537:{minimumHardfork:w0.Chainstart},2718:{minimumHardfork:w0.Chainstart},2929:{minimumHardfork:w0.Chainstart},2930:{minimumHardfork:w0.Istanbul,requiredEIPs:[2718,2929]},2935:{minimumHardfork:w0.Chainstart},3198:{minimumHardfork:w0.London},3529:{minimumHardfork:w0.Berlin,requiredEIPs:[2929]},3540:{minimumHardfork:w0.London,requiredEIPs:[3541,3860]},3541:{minimumHardfork:w0.Berlin},3554:{minimumHardfork:w0.MuirGlacier},3607:{minimumHardfork:w0.Chainstart},3651:{minimumHardfork:w0.London,requiredEIPs:[2929]},3670:{minimumHardfork:w0.London,requiredEIPs:[3540]},3675:{minimumHardfork:w0.London},3855:{minimumHardfork:w0.Chainstart},3860:{minimumHardfork:w0.SpuriousDragon},4200:{minimumHardfork:w0.London,requiredEIPs:[3540,3670]},4345:{minimumHardfork:w0.London},4399:{minimumHardfork:w0.London},4750:{minimumHardfork:w0.London,requiredEIPs:[3540,3670,5450]},4788:{minimumHardfork:w0.Cancun},4844:{minimumHardfork:w0.Paris,requiredEIPs:[1559,2718,2930,4895]},4895:{minimumHardfork:w0.Paris},5133:{minimumHardfork:w0.GrayGlacier},5450:{minimumHardfork:w0.London,requiredEIPs:[3540,3670,4200,4750]},5656:{minimumHardfork:w0.Shanghai},6110:{minimumHardfork:w0.Cancun,requiredEIPs:[7685]},6206:{minimumHardfork:w0.London,requiredEIPs:[4750,5450]},6780:{minimumHardfork:w0.London},7002:{minimumHardfork:w0.Paris,requiredEIPs:[7685]},7069:{minimumHardfork:w0.Berlin,requiredEIPs:[2929]},7251:{minimumHardfork:w0.Paris,requiredEIPs:[7685]},7480:{minimumHardfork:w0.London,requiredEIPs:[3540,3670]},7516:{minimumHardfork:w0.Paris,requiredEIPs:[4844]},7594:{minimumHardfork:w0.Paris,requiredEIPs:[4844]},7620:{minimumHardfork:w0.London,requiredEIPs:[3540,3541,3670]},7623:{minimumHardfork:w0.Chainstart,requiredEIPs:[]},7685:{minimumHardfork:w0.Cancun,requiredEIPs:[3675]},7691:{minimumHardfork:w0.Paris,requiredEIPs:[4844]},7918:{minimumHardfork:w0.Paris,requiredEIPs:[4844]},7692:{minimumHardfork:w0.Cancun,requiredEIPs:[663,3540,3670,4200,4750,5450,6206,7069,7480,7620,7698]},7698:{minimumHardfork:w0.London,requiredEIPs:[3540,7620]},7702:{minimumHardfork:w0.Cancun,requiredEIPs:[2718,2929,2930]},7823:{minimumHardfork:w0.Byzantium},7709:{minimumHardfork:w0.Chainstart,requiredEIPs:[2935]},7825:{minimumHardfork:w0.Chainstart,requiredEIPs:[]},7864:{minimumHardfork:w0.London},7883:{minimumHardfork:w0.Chainstart},7939:{minimumHardfork:w0.Chainstart,requiredEIPs:[]},7951:{minimumHardfork:w0.Chainstart,requiredEIPs:[]},7934:{minimumHardfork:w0.Chainstart,requiredEIPs:[]}}});var Ha;var ja=p(()=>{Ha={chainstart:{eips:[1]},homestead:{eips:[606]},dao:{eips:[]},tangerineWhistle:{eips:[608]},spuriousDragon:{eips:[607]},byzantium:{eips:[609]},constantinople:{eips:[1013]},petersburg:{eips:[1716]},istanbul:{eips:[1679]},muirGlacier:{eips:[2384]},berlin:{eips:[2565,2929,2718,2930]},london:{eips:[1559,3198,3529,3541]},arrowGlacier:{eips:[4345]},grayGlacier:{eips:[5133]},paris:{consensus:{type:"pos",algorithm:"casper",casper:{}},eips:[3675,4399]},mergeNetsplitBlock:{eips:[]},shanghai:{eips:[3651,3855,3860,4895]},cancun:{eips:[1153,4844,4788,5656,6780,7516]},prague:{eips:[2537,2935,6110,7002,7251,7623,7685,7691,7702]},osaka:{eips:[7594,7823,7825,7883,7939,7951,7918]},bpo1:{eips:[],params:{target:10,max:15,blobGasPriceUpdateFraction:8346193}},bpo2:{eips:[],params:{target:14,max:21,blobGasPriceUpdateFraction:11684671}}}});class y4{constructor($){if(this._eips=[],this._paramsCache={},this._activatedEIPsCache=[],this.events=new OY.default,this._chainParams=JSON.parse(JSON.stringify($.chain)),this.DEFAULT_HARDFORK=this._chainParams.defaultHardfork??w0.Prague,this.HARDFORK_CHANGES=this.hardforks().map((Q)=>[Q.name,(this._chainParams.customHardforks&&this._chainParams.customHardforks[Q.name])??Ha[Q.name]]),this._hardfork=this.DEFAULT_HARDFORK,this._params=$.params?JSON.parse(JSON.stringify($.params)):{},$.hardfork!==void 0)this.setHardfork($.hardfork);if($.eips)this.setEIPs($.eips);if(this.customCrypto=$.customCrypto??{},Object.keys(this._paramsCache).length===0)this._buildParamsCache(),this._buildActivatedEIPsCache()}updateParams($){for(let[Q,Z]of Object.entries($))if(!(Q in this._params))this._params[Q]=JSON.parse(JSON.stringify(Z));else this._params[Q]=JSON.parse(JSON.stringify({...this._params[Q],...$[Q]}));this._buildParamsCache()}resetParams($){this._params=JSON.parse(JSON.stringify($)),this._buildParamsCache()}setHardfork($){let Q=!1;for(let Z of this.HARDFORK_CHANGES)if(Z[0]===$){if(this._hardfork!==$)this._hardfork=$,this._buildParamsCache(),this._buildActivatedEIPsCache(),this.events.emit("hardforkChanged",$);Q=!0}if(!Q)throw n(`Hardfork with name ${$} not supported`)}getHardforkBy($){let Q=X5($.blockNumber,l1.BigInt),Z=X5($.timestamp,l1.BigInt),X=this.hardforks().filter((q)=>q.block!==null||q.timestamp!==void 0),Y=X.findIndex((q)=>Q!==void 0&&q.block!==null&&BigInt(q.block)>Q||Z!==void 0&&q.timestamp!==void 0&&BigInt(q.timestamp)>Z);if(Y===-1)Y=X.length;else if(Y===0)throw Error("Must have at least one hardfork at block 0");if(Z===void 0){let q=X.slice(0,Y).reverse().findIndex((W)=>W.block!==null);Y=Y-q}Y=Y-1;let z=Y;for(;Y<X.length-1;Y++)if(X[Y].block!==X[Y+1].block||X[Y].timestamp!==X[Y+1].timestamp)break;if(Z!==void 0){if(X.slice(0,z).reduce((G,U)=>Math.max(Number(U.timestamp??"0"),G),0)>Z)throw Error("Maximum HF determined by timestamp is lower than the block number HF");if(X.slice(Y+1).reduce((G,U)=>Math.min(Number(U.timestamp??Z),G),Number(Z))<Z)throw Error("Maximum HF determined by block number is lower than timestamp HF")}return X[Y].name}setHardforkBy($){let Q=this.getHardforkBy($);return this.setHardfork(Q),Q}_getHardfork($){let Q=this.hardforks();for(let Z of Q)if(Z.name===$)return Z;return null}setEIPs($=[]){for(let Q of $){if(!(Q in zG))throw n(`${Q} not supported`);let Z=this.gteHardfork(zG[Q].minimumHardfork);if(!Z)throw n(`${Q} cannot be activated on hardfork ${this.hardfork()}, minimumHardfork: ${Z}`)}this._eips=$,this._buildParamsCache(),this._buildActivatedEIPsCache();for(let Q of $)if(zG[Q].requiredEIPs!==void 0){for(let Z of zG[Q].requiredEIPs)if(!($.includes(Z)||this.isActivatedEIP(Z)))throw n(`${Q} requires EIP ${Z}, but is not included in the EIP list`)}}_mergeWithParamsCache($){for(let[Q,Z]of Object.entries($))this._paramsCache[Q]=Z}_buildParamsCache(){this._paramsCache={};let $=this.hardfork();for(let Q of this.HARDFORK_CHANGES){if("eips"in Q[1]){let X=Q[1].eips??[];for(let Y of X)if(this._params[Y]!==void 0&&this._params[Y]!==null)this._mergeWithParamsCache(this._params[Y])}let Z=this._params[Q[0]];if(Z!==void 0&&Z!==null)this._mergeWithParamsCache(Z);if(Q[1].params!==void 0&&Q[1].params!==null)this._mergeWithParamsCache(Q[1].params);if(Q[0]===$)break}for(let Q of this._eips)if(this._params[Q]!==void 0&&this._params[Q]!==null)this._mergeWithParamsCache(this._params[Q])}_buildActivatedEIPsCache(){this._activatedEIPsCache=[];for(let[$,Q]of this.HARDFORK_CHANGES)if(this.gteHardfork($)&&"eips"in Q)this._activatedEIPsCache=this._activatedEIPsCache.concat(Q.eips??[]);this._activatedEIPsCache=this._activatedEIPsCache.concat(this._eips)}param($){if(!($ in this._paramsCache))throw n(`Missing parameter value for ${$}`);let Q=this._paramsCache[$];return BigInt(Q??0)}paramByHardfork($,Q){let Z;for(let X of this.HARDFORK_CHANGES){if("eips"in X[1]){let Y=X[1].eips;for(let z of Y){let q=this._params[z]?.[$];if(q!==void 0)Z=q}}else{let Y=X[1].params?.[$];if(Y!==void 0)Z=Y}if(X[0]===Q)break}if(Z===void 0)throw n(`Missing parameter value for ${$}`);return BigInt(Z??0)}paramByEIP($,Q){if(!(Q in zG))throw n(`${Q} not supported`);let Z=this._params[Q];if(Z?.[$]===void 0)throw n(`Missing parameter value for ${$}`);let X=Z[$];return BigInt(X??0)}paramByBlock($,Q,Z){let X=this.getHardforkBy({blockNumber:Q,timestamp:Z});return this.paramByHardfork($,X)}getBlobGasSchedule(){if(this.gteHardfork(w0.Bpo1))return{targetBlobGasPerBlock:this.param("target")*this.param("blobGasPerBlob"),maxBlobGasPerBlock:this.param("max")*this.param("blobGasPerBlob"),blobGasPriceUpdateFraction:this.param("blobGasPriceUpdateFraction")};return{targetBlobGasPerBlock:this.param("targetBlobGasPerBlock"),maxBlobGasPerBlock:this.param("maxBlobGasPerBlock"),blobGasPriceUpdateFraction:this.param("blobGasPriceUpdateFraction")}}isActivatedEIP($){if(this._activatedEIPsCache.includes($))return!0;return!1}hardforkIsActiveOnBlock($,Q){Q=X5(Q,l1.BigInt),$=$??this._hardfork;let Z=this.hardforkBlock($);if(typeof Z==="bigint"&&Z!==Q0&&Q>=Z)return!0;return!1}activeOnBlock($){return this.hardforkIsActiveOnBlock(null,$)}hardforkGteHardfork($,Q){$=$??this._hardfork;let Z=this.hardforks(),X=-1,Y=-1,z=0;for(let J of Z){if(J.name===$)X=z;if(J.name===Q)Y=z;z+=1}return X>=Y&&Y!==-1}gteHardfork($){return this.hardforkGteHardfork(null,$)}hardforkBlock($){$=$??this._hardfork;let Q=this._getHardfork($)?.block;if(Q===void 0||Q===null)return null;return BigInt(Q)}hardforkTimestamp($){$=$??this._hardfork;let Q=this._getHardfork($)?.timestamp;if(Q===void 0||Q===null)return null;return BigInt(Q)}eipBlock($){for(let Q of this.HARDFORK_CHANGES){let Z=Q[1];if("eips"in Z){if(Z.eips.includes($))return this.hardforkBlock(Q[0])}}return null}eipTimestamp($){for(let Q of this.HARDFORK_CHANGES){let Z=Q[1];if("eips"in Z){if(Z.eips.includes($))return this.hardforkTimestamp(Q[0])}}return null}nextHardforkBlockOrTimestamp($){let Q=$??this._hardfork,Z=this.hardforks(),X=Z.findIndex((W)=>W.name===Q);if(Q===w0.Paris)X-=1;if(X<0)return null;let Y=Z[X],z=Y.timestamp??Y.block;if(z===null||z===void 0)return null;let J=Z.slice(X+1).find((W)=>{let G=W.timestamp??W.block;return G!==null&&G!==void 0&&G!==z});if(J===void 0)return null;let q=J.timestamp??J.block;if(q===null||q===void 0)return null;return BigInt(q)}_calcForkHash($,Q){let Z=new Uint8Array(0),X=0;for(let J of this.hardforks()){let{block:q,timestamp:W,name:G}=J,U=W??q;if(U=U!==null?Number(U):null,typeof U==="number"&&U!==0&&U!==X&&G!==w0.Paris){let D=Q1(`0x${U.toString(16).padStart(16,"0")}`);Z=d1(Z,D),X=U}if(J.name===$)break}let Y=d1(Q,Z);return H0(y7(Da(Y)>>>0))}forkHash($,Q){$=$??this._hardfork;let Z=this._getHardfork($);if(Z===null||Z?.block===null&&Z?.timestamp===void 0)throw n("No fork hash calculation possible for future hardfork");if(Z?.forkHash!==null&&Z?.forkHash!==void 0)return Z.forkHash;if(!Q)throw n("genesisHash required for forkHash calculation");return this._calcForkHash($,Q)}hardforkForForkHash($){let Q=this.hardforks().filter((Z)=>{return Z.forkHash===$});return Q.length>=1?Q[Q.length-1]:null}setForkHashes($){for(let Q of this.hardforks()){let Z=Q.timestamp??Q.block;if((Q.forkHash===null||Q.forkHash===void 0)&&Z!==null&&Z!==void 0)Q.forkHash=this.forkHash(Q.name,$)}}genesis(){return this._chainParams.genesis}hardforks(){let $=this._chainParams.hardforks;if(this._chainParams.customHardforks!==void 0)this._chainParams.customHardforks;return $}bootstrapNodes(){return this._chainParams.bootstrapNodes}dnsNetworks(){return this._chainParams.dnsNetworks}hardfork(){return this._hardfork}chainId(){return BigInt(this._chainParams.chainId)}chainName(){return this._chainParams.name}eips(){return this._eips}consensusType(){let $=this.hardfork(),Q;for(let Z of this.HARDFORK_CHANGES){if("consensus"in Z[1])Q=Z[1].consensus.type;if(Z[0]===$)break}return Q??this._chainParams.consensus.type}consensusAlgorithm(){let $=this.hardfork(),Q;for(let Z of this.HARDFORK_CHANGES){if("consensus"in Z[1])Q=Z[1].consensus.algorithm;if(Z[0]===$)break}return Q??this._chainParams.consensus.algorithm}consensusConfig(){let $=this.hardfork(),Q;for(let Z of this.HARDFORK_CHANGES){if("consensus"in Z[1]){let X=Z[1],Y=X.consensus.algorithm;Q=X.consensus[Y]}if(Z[0]===$)break}return Q??this._chainParams.consensus[this.consensusAlgorithm()]??{}}copy(){let $=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return $.events=new OY.default,$}}var Ra=p(()=>{Z1();lR();Ma();Pa();iR();ja()});function Na($,Q,Z={}){return new y4({chain:{...Q,...$},...Z})}var Ca=p(()=>{$9()});var La=()=>{};var qG;var Ta=p(()=>{qG={BasicData:"basicData",CodeHash:"codeHash",Code:"code",Storage:"storage"}});var Fa=()=>{};var Aa=()=>{};var $9=p(()=>{Ua();Ra();Ca();iR();La();Ta();Fa();Aa()});function vP0($,Q=!1){if(Q)return{h:Number($&oR),l:Number($>>wa&oR)};return{h:Number($>>wa&oR)|0,l:Number($&oR)|0}}function Ba($,Q=!1){let Z=$.length,X=new Uint32Array(Z),Y=new Uint32Array(Z);for(let z=0;z<Z;z++){let{h:J,l:q}=vP0($[z],Q);[X[z],Y[z]]=[J,q]}return[X,Y]}var oR,wa,Ea=($,Q,Z)=>$<<Z|Q>>>32-Z,Ia=($,Q,Z)=>Q<<Z|$>>>32-Z,_a=($,Q,Z)=>Q<<Z-32|$>>>64-Z,Sa=($,Q,Z)=>$<<Z-32|Q>>>64-Z;var fa=p(()=>{oR=BigInt(4294967295),wa=BigInt(32)});function yP0($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function nR($){if(!Number.isSafeInteger($)||$<0)throw Error("positive integer expected, got "+$)}function Jq($,...Q){if(!yP0($))throw Error("Uint8Array expected");if(Q.length>0&&!Q.includes($.length))throw Error("Uint8Array expected of length "+Q+", got length="+$.length)}function rR($,Q=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(Q&&$.finished)throw Error("Hash#digest() has already been called")}function kI($,Q){Jq($);let Z=Q.outputLen;if($.length<Z)throw Error("digestInto() expects output buffer of length at least "+Z)}function ka($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function xI(...$){for(let Q=0;Q<$.length;Q++)$[Q].fill(0)}function hP0($){return $<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255}function mP0($){for(let Q=0;Q<$.length;Q++)$[Q]=hP0($[Q]);return $}function pP0($){if(typeof $!=="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function vI($){if(typeof $==="string")$=pP0($);return Jq($),$}class yI{}function xa($){let Q=(X)=>$().update(vI(X)).digest(),Z=$();return Q.outputLen=Z.outputLen,Q.blockLen=Z.blockLen,Q.create=()=>$(),Q}var gP0,bI;var gI=p(()=>{/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */gP0=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();bI=gP0?($)=>$:mP0});function rP0($,Q=24){let Z=new Uint32Array(10);for(let X=24-Q;X<24;X++){for(let J=0;J<10;J++)Z[J]=$[J]^$[J+10]^$[J+20]^$[J+30]^$[J+40];for(let J=0;J<10;J+=2){let q=(J+8)%10,W=(J+2)%10,G=Z[W],U=Z[W+1],D=ba(G,U,1)^Z[q],P=va(G,U,1)^Z[q+1];for(let H=0;H<50;H+=10)$[J+H]^=D,$[J+H+1]^=P}let Y=$[2],z=$[3];for(let J=0;J<24;J++){let q=ga[J],W=ba(Y,z,q),G=va(Y,z,q),U=ya[J];Y=$[U],z=$[U+1],$[U]=W,$[U+1]=G}for(let J=0;J<50;J+=10){for(let q=0;q<10;q++)Z[q]=$[J+q];for(let q=0;q<10;q++)$[J+q]^=~Z[(q+2)%10]&Z[(q+4)%10]}$[0]^=oP0[X],$[1]^=nP0[X]}xI(Z)}var uP0,fO,cP0,dP0,lP0,iP0,ya,ga,ha,ma,oP0,nP0,ba=($,Q,Z)=>Z>32?_a($,Q,Z):Ea($,Q,Z),va=($,Q,Z)=>Z>32?Sa($,Q,Z):Ia($,Q,Z),hI,aR=($,Q,Z)=>xa(()=>new hI(Q,$,Z)),pa,mI,ua,ca;var da=p(()=>{fa();gI();uP0=BigInt(0),fO=BigInt(1),cP0=BigInt(2),dP0=BigInt(7),lP0=BigInt(256),iP0=BigInt(113),ya=[],ga=[],ha=[];for(let $=0,Q=fO,Z=1,X=0;$<24;$++){[Z,X]=[X,(2*Z+3*X)%5],ya.push(2*(5*X+Z)),ga.push(($+1)*($+2)/2%64);let Y=uP0;for(let z=0;z<7;z++)if(Q=(Q<<fO^(Q>>dP0)*iP0)%lP0,Q&cP0)Y^=fO<<(fO<<BigInt(z))-fO;ha.push(Y)}ma=Ba(ha,!0),oP0=ma[0],nP0=ma[1];hI=class hI extends yI{constructor($,Q,Z,X=!1,Y=24){super();if(this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=$,this.suffix=Q,this.outputLen=Z,this.enableXOF=X,this.rounds=Y,nR(Z),!(0<$&&$<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=ka(this.state)}clone(){return this._cloneInto()}keccak(){bI(this.state32),rP0(this.state32,this.rounds),bI(this.state32),this.posOut=0,this.pos=0}update($){rR(this),$=vI($),Jq($);let{blockLen:Q,state:Z}=this,X=$.length;for(let Y=0;Y<X;){let z=Math.min(Q-this.pos,X-Y);for(let J=0;J<z;J++)Z[this.pos++]^=$[Y++];if(this.pos===Q)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:$,suffix:Q,pos:Z,blockLen:X}=this;if($[Z]^=Q,(Q&128)!==0&&Z===X-1)this.keccak();$[X-1]^=128,this.keccak()}writeInto($){rR(this,!1),Jq($),this.finish();let Q=this.state,{blockLen:Z}=this;for(let X=0,Y=$.length;X<Y;){if(this.posOut>=Z)this.keccak();let z=Math.min(Z-this.posOut,Y-X);$.set(Q.subarray(this.posOut,this.posOut+z),X),this.posOut+=z,X+=z}return $}xofInto($){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto($)}xof($){return nR($),this.xofInto(new Uint8Array($))}digestInto($){if(kI($,this),this.finished)throw Error("digest() was already called");return this.writeInto($),this.destroy(),$}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,xI(this.state)}_cloneInto($){let{blockLen:Q,suffix:Z,outputLen:X,rounds:Y,enableXOF:z}=this;return $||($=new hI(Q,Z,X,z,Y)),$.state32.set(this.state32),$.pos=this.pos,$.posOut=this.posOut,$.finished=this.finished,$.rounds=Y,$.suffix=Z,$.outputLen=X,$.enableXOF=z,$.destroyed=this.destroyed,$}};pa=(()=>aR(1,144,28))(),mI=(()=>aR(1,136,32))(),ua=(()=>aR(1,104,48))(),ca=(()=>aR(1,72,64))()});var la;var ia=p(()=>{gI();la=Jq});function kO($){return(Q)=>{return la(Q),$(Q)}}var oa=p(()=>{ia()});var Nc0,pI,Cc0,Lc0;var na=p(()=>{da();oa();Nc0=kO(pa),pI=(()=>{let $=kO(mI);return $.create=mI.create,$})(),Cc0=kO(ua),Lc0=kO(ca)});var ra=()=>{};class KG{heap;length;static#$=!1;static create($){let Q=ea($);if(!Q)return[];KG.#$=!0;let Z=new KG($,Q);return KG.#$=!1,Z}constructor($,Q){if(!KG.#$)throw TypeError("instantiate Stack using Stack.create(n)");this.heap=new Q($),this.length=0}push($){this.heap[this.length++]=$}pop(){return this.heap[--this.length]}}var WG,sa,uI,ta=($,Q,Z,X)=>{typeof uI.emitWarning==="function"?uI.emitWarning($,Q,Z,X):console.error(`[${Z}] ${Q}: ${$}`)},sR,aa,aP0=($)=>!sa.has($),Ac0,MY=($)=>$&&$===Math.floor($)&&$>0&&isFinite($),ea=($)=>!MY($)?null:$<=Math.pow(2,8)?Uint8Array:$<=Math.pow(2,16)?Uint16Array:$<=Math.pow(2,32)?Uint32Array:$<=Number.MAX_SAFE_INTEGER?xO:null,xO,tR;var $s=p(()=>{WG=typeof performance==="object"&&performance&&typeof performance.now==="function"?performance:Date,sa=new Set,uI=typeof process==="object"&&!!process?process:{},sR=globalThis.AbortController,aa=globalThis.AbortSignal;if(typeof sR>"u"){aa=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(X,Y){this._onabort.push(Y)}},sR=class{constructor(){Q()}signal=new aa;abort(X){if(this.signal.aborted)return;this.signal.reason=X,this.signal.aborted=!0;for(let Y of this.signal._onabort)Y(X);this.signal.onabort?.(X)}};let $=uI.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",Q=()=>{if(!$)return;$=!1,ta("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",Q)}}Ac0=Symbol("type");xO=class xO extends Array{constructor($){super($);this.fill(0)}};tR=class tR{#$;#Q;#Z;#X;#Y;#z;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#J;#W;#U;#K;#q;#D;#G;#O;#V;#M;#H;#j;#R;#C;#T;#E;#N;static unsafeExposeInternals($){return{starts:$.#R,ttls:$.#C,sizes:$.#j,keyMap:$.#U,keyList:$.#K,valList:$.#q,next:$.#D,prev:$.#G,get head(){return $.#O},get tail(){return $.#V},free:$.#M,isBackgroundFetch:(Q)=>$.#P(Q),backgroundFetch:(Q,Z,X,Y)=>$.#x(Q,Z,X,Y),moveToTail:(Q)=>$.#S(Q),indexes:(Q)=>$.#F(Q),rindexes:(Q)=>$.#A(Q),isStale:(Q)=>$.#L(Q)}}get max(){return this.#$}get maxSize(){return this.#Q}get calculatedSize(){return this.#W}get size(){return this.#J}get fetchMethod(){return this.#Y}get memoMethod(){return this.#z}get dispose(){return this.#Z}get disposeAfter(){return this.#X}constructor($){let{max:Q=0,ttl:Z,ttlResolution:X=1,ttlAutopurge:Y,updateAgeOnGet:z,updateAgeOnHas:J,allowStale:q,dispose:W,disposeAfter:G,noDisposeOnSet:U,noUpdateTTL:D,maxSize:P=0,maxEntrySize:H=0,sizeCalculation:N,fetchMethod:C,memoMethod:L,noDeleteOnFetchRejection:B,noDeleteOnStaleGet:E,allowStaleOnFetchRejection:I,allowStaleOnFetchAbort:_,ignoreFetchAbort:f}=$;if(Q!==0&&!MY(Q))throw TypeError("max option must be a nonnegative integer");let x=Q?ea(Q):Array;if(!x)throw Error("invalid max value: "+Q);if(this.#$=Q,this.#Q=P,this.maxEntrySize=H||this.#Q,this.sizeCalculation=N,this.sizeCalculation){if(!this.#Q&&!this.maxEntrySize)throw TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!=="function")throw TypeError("sizeCalculation set to non-function")}if(L!==void 0&&typeof L!=="function")throw TypeError("memoMethod must be a function if defined");if(this.#z=L,C!==void 0&&typeof C!=="function")throw TypeError("fetchMethod must be a function if specified");if(this.#Y=C,this.#E=!!C,this.#U=new Map,this.#K=Array(Q).fill(void 0),this.#q=Array(Q).fill(void 0),this.#D=new x(Q),this.#G=new x(Q),this.#O=0,this.#V=0,this.#M=KG.create(Q),this.#J=0,this.#W=0,typeof W==="function")this.#Z=W;if(typeof G==="function")this.#X=G,this.#H=[];else this.#X=void 0,this.#H=void 0;if(this.#T=!!this.#Z,this.#N=!!this.#X,this.noDisposeOnSet=!!U,this.noUpdateTTL=!!D,this.noDeleteOnFetchRejection=!!B,this.allowStaleOnFetchRejection=!!I,this.allowStaleOnFetchAbort=!!_,this.ignoreFetchAbort=!!f,this.maxEntrySize!==0){if(this.#Q!==0){if(!MY(this.#Q))throw TypeError("maxSize must be a positive integer if specified")}if(!MY(this.maxEntrySize))throw TypeError("maxEntrySize must be a positive integer if specified");this.#p()}if(this.allowStale=!!q,this.noDeleteOnStaleGet=!!E,this.updateAgeOnGet=!!z,this.updateAgeOnHas=!!J,this.ttlResolution=MY(X)||X===0?X:1,this.ttlAutopurge=!!Y,this.ttl=Z||0,this.ttl){if(!MY(this.ttl))throw TypeError("ttl must be a positive integer if specified");this.#b()}if(this.#$===0&&this.ttl===0&&this.#Q===0)throw TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#$&&!this.#Q){if(aP0("LRU_CACHE_UNBOUNDED"))sa.add("LRU_CACHE_UNBOUNDED"),ta("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning","LRU_CACHE_UNBOUNDED",tR)}}getRemainingTTL($){return this.#U.has($)?1/0:0}#b(){let $=new xO(this.#$),Q=new xO(this.#$);this.#C=$,this.#R=Q,this.#v=(Y,z,J=WG.now())=>{if(Q[Y]=z!==0?J:0,$[Y]=z,z!==0&&this.ttlAutopurge){let q=setTimeout(()=>{if(this.#L(Y))this.#w(this.#K[Y],"expire")},z+1);if(q.unref)q.unref()}},this.#I=(Y)=>{Q[Y]=$[Y]!==0?WG.now():0},this.#B=(Y,z)=>{if($[z]){let J=$[z],q=Q[z];if(!J||!q)return;Y.ttl=J,Y.start=q,Y.now=Z||X();let W=Y.now-q;Y.remainingTTL=J-W}};let Z=0,X=()=>{let Y=WG.now();if(this.ttlResolution>0){Z=Y;let z=setTimeout(()=>Z=0,this.ttlResolution);if(z.unref)z.unref()}return Y};this.getRemainingTTL=(Y)=>{let z=this.#U.get(Y);if(z===void 0)return 0;let J=$[z],q=Q[z];if(!J||!q)return 1/0;let W=(Z||X())-q;return J-W},this.#L=(Y)=>{let z=Q[Y],J=$[Y];return!!J&&!!z&&(Z||X())-z>J}}#I=()=>{};#B=()=>{};#v=()=>{};#L=()=>!1;#p(){let $=new xO(this.#$);this.#W=0,this.#j=$,this.#_=(Q)=>{this.#W-=$[Q],$[Q]=0},this.#y=(Q,Z,X,Y)=>{if(this.#P(Z))return 0;if(!MY(X))if(Y){if(typeof Y!=="function")throw TypeError("sizeCalculation must be a function");if(X=Y(Z,Q),!MY(X))throw TypeError("sizeCalculation return invalid (expect positive integer)")}else throw TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return X},this.#f=(Q,Z,X)=>{if($[Q]=Z,this.#Q){let Y=this.#Q-$[Q];while(this.#W>Y)this.#k(!0)}if(this.#W+=$[Q],X)X.entrySize=Z,X.totalCalculatedSize=this.#W}}#_=($)=>{};#f=($,Q,Z)=>{};#y=($,Q,Z,X)=>{if(Z||X)throw TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#F({allowStale:$=this.allowStale}={}){if(this.#J)for(let Q=this.#V;;){if(!this.#g(Q))break;if($||!this.#L(Q))yield Q;if(Q===this.#O)break;else Q=this.#G[Q]}}*#A({allowStale:$=this.allowStale}={}){if(this.#J)for(let Q=this.#O;;){if(!this.#g(Q))break;if($||!this.#L(Q))yield Q;if(Q===this.#V)break;else Q=this.#D[Q]}}#g($){return $!==void 0&&this.#U.get(this.#K[$])===$}*entries(){for(let $ of this.#F())if(this.#q[$]!==void 0&&this.#K[$]!==void 0&&!this.#P(this.#q[$]))yield[this.#K[$],this.#q[$]]}*rentries(){for(let $ of this.#A())if(this.#q[$]!==void 0&&this.#K[$]!==void 0&&!this.#P(this.#q[$]))yield[this.#K[$],this.#q[$]]}*keys(){for(let $ of this.#F()){let Q=this.#K[$];if(Q!==void 0&&!this.#P(this.#q[$]))yield Q}}*rkeys(){for(let $ of this.#A()){let Q=this.#K[$];if(Q!==void 0&&!this.#P(this.#q[$]))yield Q}}*values(){for(let $ of this.#F())if(this.#q[$]!==void 0&&!this.#P(this.#q[$]))yield this.#q[$]}*rvalues(){for(let $ of this.#A())if(this.#q[$]!==void 0&&!this.#P(this.#q[$]))yield this.#q[$]}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find($,Q={}){for(let Z of this.#F()){let X=this.#q[Z],Y=this.#P(X)?X.__staleWhileFetching:X;if(Y===void 0)continue;if($(Y,this.#K[Z],this))return this.get(this.#K[Z],Q)}}forEach($,Q=this){for(let Z of this.#F()){let X=this.#q[Z],Y=this.#P(X)?X.__staleWhileFetching:X;if(Y===void 0)continue;$.call(Q,Y,this.#K[Z],this)}}rforEach($,Q=this){for(let Z of this.#A()){let X=this.#q[Z],Y=this.#P(X)?X.__staleWhileFetching:X;if(Y===void 0)continue;$.call(Q,Y,this.#K[Z],this)}}purgeStale(){let $=!1;for(let Q of this.#A({allowStale:!0}))if(this.#L(Q))this.#w(this.#K[Q],"expire"),$=!0;return $}info($){let Q=this.#U.get($);if(Q===void 0)return;let Z=this.#q[Q],X=this.#P(Z)?Z.__staleWhileFetching:Z;if(X===void 0)return;let Y={value:X};if(this.#C&&this.#R){let z=this.#C[Q],J=this.#R[Q];if(z&&J){let q=z-(WG.now()-J);Y.ttl=q,Y.start=Date.now()}}if(this.#j)Y.size=this.#j[Q];return Y}dump(){let $=[];for(let Q of this.#F({allowStale:!0})){let Z=this.#K[Q],X=this.#q[Q],Y=this.#P(X)?X.__staleWhileFetching:X;if(Y===void 0||Z===void 0)continue;let z={value:Y};if(this.#C&&this.#R){z.ttl=this.#C[Q];let J=WG.now()-this.#R[Q];z.start=Math.floor(Date.now()-J)}if(this.#j)z.size=this.#j[Q];$.unshift([Z,z])}return $}load($){this.clear();for(let[Q,Z]of $){if(Z.start){let X=Date.now()-Z.start;Z.start=WG.now()-X}this.set(Q,Z.value,Z)}}set($,Q,Z={}){if(Q===void 0)return this.delete($),this;let{ttl:X=this.ttl,start:Y,noDisposeOnSet:z=this.noDisposeOnSet,sizeCalculation:J=this.sizeCalculation,status:q}=Z,{noUpdateTTL:W=this.noUpdateTTL}=Z,G=this.#y($,Q,Z.size||0,J);if(this.maxEntrySize&&G>this.maxEntrySize){if(q)q.set="miss",q.maxEntrySizeExceeded=!0;return this.#w($,"set"),this}let U=this.#J===0?void 0:this.#U.get($);if(U===void 0){if(U=this.#J===0?this.#V:this.#M.length!==0?this.#M.pop():this.#J===this.#$?this.#k(!1):this.#J,this.#K[U]=$,this.#q[U]=Q,this.#U.set($,U),this.#D[this.#V]=U,this.#G[U]=this.#V,this.#V=U,this.#J++,this.#f(U,G,q),q)q.set="add";W=!1}else{this.#S(U);let D=this.#q[U];if(Q!==D){if(this.#E&&this.#P(D)){D.__abortController.abort(Error("replaced"));let{__staleWhileFetching:P}=D;if(P!==void 0&&!z){if(this.#T)this.#Z?.(P,$,"set");if(this.#N)this.#H?.push([P,$,"set"])}}else if(!z){if(this.#T)this.#Z?.(D,$,"set");if(this.#N)this.#H?.push([D,$,"set"])}if(this.#_(U),this.#f(U,G,q),this.#q[U]=Q,q){q.set="replace";let P=D&&this.#P(D)?D.__staleWhileFetching:D;if(P!==void 0)q.oldValue=P}}else if(q)q.set="update"}if(X!==0&&!this.#C)this.#b();if(this.#C){if(!W)this.#v(U,X,Y);if(q)this.#B(q,U)}if(!z&&this.#N&&this.#H){let D=this.#H,P;while(P=D?.shift())this.#X?.(...P)}return this}pop(){try{while(this.#J){let $=this.#q[this.#O];if(this.#k(!0),this.#P($)){if($.__staleWhileFetching)return $.__staleWhileFetching}else if($!==void 0)return $}}finally{if(this.#N&&this.#H){let $=this.#H,Q;while(Q=$?.shift())this.#X?.(...Q)}}}#k($){let Q=this.#O,Z=this.#K[Q],X=this.#q[Q];if(this.#E&&this.#P(X))X.__abortController.abort(Error("evicted"));else if(this.#T||this.#N){if(this.#T)this.#Z?.(X,Z,"evict");if(this.#N)this.#H?.push([X,Z,"evict"])}if(this.#_(Q),$)this.#K[Q]=void 0,this.#q[Q]=void 0,this.#M.push(Q);if(this.#J===1)this.#O=this.#V=0,this.#M.length=0;else this.#O=this.#D[Q];return this.#U.delete(Z),this.#J--,Q}has($,Q={}){let{updateAgeOnHas:Z=this.updateAgeOnHas,status:X}=Q,Y=this.#U.get($);if(Y!==void 0){let z=this.#q[Y];if(this.#P(z)&&z.__staleWhileFetching===void 0)return!1;if(!this.#L(Y)){if(Z)this.#I(Y);if(X)X.has="hit",this.#B(X,Y);return!0}else if(X)X.has="stale",this.#B(X,Y)}else if(X)X.has="miss";return!1}peek($,Q={}){let{allowStale:Z=this.allowStale}=Q,X=this.#U.get($);if(X===void 0||!Z&&this.#L(X))return;let Y=this.#q[X];return this.#P(Y)?Y.__staleWhileFetching:Y}#x($,Q,Z,X){let Y=Q===void 0?void 0:this.#q[Q];if(this.#P(Y))return Y;let z=new sR,{signal:J}=Z;J?.addEventListener("abort",()=>z.abort(J.reason),{signal:z.signal});let q={signal:z.signal,options:Z,context:X},W=(N,C=!1)=>{let{aborted:L}=z.signal,B=Z.ignoreFetchAbort&&N!==void 0;if(Z.status)if(L&&!C){if(Z.status.fetchAborted=!0,Z.status.fetchError=z.signal.reason,B)Z.status.fetchAbortIgnored=!0}else Z.status.fetchResolved=!0;if(L&&!B&&!C)return U(z.signal.reason);let E=P;if(this.#q[Q]===P)if(N===void 0)if(E.__staleWhileFetching)this.#q[Q]=E.__staleWhileFetching;else this.#w($,"fetch");else{if(Z.status)Z.status.fetchUpdated=!0;this.set($,N,q.options)}return N},G=(N)=>{if(Z.status)Z.status.fetchRejected=!0,Z.status.fetchError=N;return U(N)},U=(N)=>{let{aborted:C}=z.signal,L=C&&Z.allowStaleOnFetchAbort,B=L||Z.allowStaleOnFetchRejection,E=B||Z.noDeleteOnFetchRejection,I=P;if(this.#q[Q]===P){if(!E||I.__staleWhileFetching===void 0)this.#w($,"fetch");else if(!L)this.#q[Q]=I.__staleWhileFetching}if(B){if(Z.status&&I.__staleWhileFetching!==void 0)Z.status.returnedStale=!0;return I.__staleWhileFetching}else if(I.__returned===I)throw N},D=(N,C)=>{let L=this.#Y?.($,Y,q);if(L&&L instanceof Promise)L.then((B)=>N(B===void 0?void 0:B),C);z.signal.addEventListener("abort",()=>{if(!Z.ignoreFetchAbort||Z.allowStaleOnFetchAbort){if(N(void 0),Z.allowStaleOnFetchAbort)N=(B)=>W(B,!0)}})};if(Z.status)Z.status.fetchDispatched=!0;let P=new Promise(D).then(W,G),H=Object.assign(P,{__abortController:z,__staleWhileFetching:Y,__returned:void 0});if(Q===void 0)this.set($,H,{...q.options,status:void 0}),Q=this.#U.get($);else this.#q[Q]=H;return H}#P($){if(!this.#E)return!1;let Q=$;return!!Q&&Q instanceof Promise&&Q.hasOwnProperty("__staleWhileFetching")&&Q.__abortController instanceof sR}async fetch($,Q={}){let{allowStale:Z=this.allowStale,updateAgeOnGet:X=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,ttl:z=this.ttl,noDisposeOnSet:J=this.noDisposeOnSet,size:q=0,sizeCalculation:W=this.sizeCalculation,noUpdateTTL:G=this.noUpdateTTL,noDeleteOnFetchRejection:U=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:D=this.allowStaleOnFetchRejection,ignoreFetchAbort:P=this.ignoreFetchAbort,allowStaleOnFetchAbort:H=this.allowStaleOnFetchAbort,context:N,forceRefresh:C=!1,status:L,signal:B}=Q;if(!this.#E){if(L)L.fetch="get";return this.get($,{allowStale:Z,updateAgeOnGet:X,noDeleteOnStaleGet:Y,status:L})}let E={allowStale:Z,updateAgeOnGet:X,noDeleteOnStaleGet:Y,ttl:z,noDisposeOnSet:J,size:q,sizeCalculation:W,noUpdateTTL:G,noDeleteOnFetchRejection:U,allowStaleOnFetchRejection:D,allowStaleOnFetchAbort:H,ignoreFetchAbort:P,status:L,signal:B},I=this.#U.get($);if(I===void 0){if(L)L.fetch="miss";let _=this.#x($,I,E,N);return _.__returned=_}else{let _=this.#q[I];if(this.#P(_)){let v=Z&&_.__staleWhileFetching!==void 0;if(L){if(L.fetch="inflight",v)L.returnedStale=!0}return v?_.__staleWhileFetching:_.__returned=_}let f=this.#L(I);if(!C&&!f){if(L)L.fetch="hit";if(this.#S(I),X)this.#I(I);if(L)this.#B(L,I);return _}let x=this.#x($,I,E,N),h=x.__staleWhileFetching!==void 0&&Z;if(L){if(L.fetch=f?"stale":"refresh",h&&f)L.returnedStale=!0}return h?x.__staleWhileFetching:x.__returned=x}}async forceFetch($,Q={}){let Z=await this.fetch($,Q);if(Z===void 0)throw Error("fetch() returned undefined");return Z}memo($,Q={}){let Z=this.#z;if(!Z)throw Error("no memoMethod provided to constructor");let{context:X,forceRefresh:Y,...z}=Q,J=this.get($,z);if(!Y&&J!==void 0)return J;let q=Z($,J,{options:z,context:X});return this.set($,q,z),q}get($,Q={}){let{allowStale:Z=this.allowStale,updateAgeOnGet:X=this.updateAgeOnGet,noDeleteOnStaleGet:Y=this.noDeleteOnStaleGet,status:z}=Q,J=this.#U.get($);if(J!==void 0){let q=this.#q[J],W=this.#P(q);if(z)this.#B(z,J);if(this.#L(J)){if(z)z.get="stale";if(!W){if(!Y)this.#w($,"expire");if(z&&Z)z.returnedStale=!0;return Z?q:void 0}else{if(z&&Z&&q.__staleWhileFetching!==void 0)z.returnedStale=!0;return Z?q.__staleWhileFetching:void 0}}else{if(z)z.get="hit";if(W)return q.__staleWhileFetching;if(this.#S(J),X)this.#I(J);return q}}else if(z)z.get="miss"}#h($,Q){this.#G[Q]=$,this.#D[$]=Q}#S($){if($!==this.#V){if($===this.#O)this.#O=this.#D[$];else this.#h(this.#G[$],this.#D[$]);this.#h(this.#V,$),this.#V=$}}delete($){return this.#w($,"delete")}#w($,Q){let Z=!1;if(this.#J!==0){let X=this.#U.get($);if(X!==void 0)if(Z=!0,this.#J===1)this.#m(Q);else{this.#_(X);let Y=this.#q[X];if(this.#P(Y))Y.__abortController.abort(Error("deleted"));else if(this.#T||this.#N){if(this.#T)this.#Z?.(Y,$,Q);if(this.#N)this.#H?.push([Y,$,Q])}if(this.#U.delete($),this.#K[X]=void 0,this.#q[X]=void 0,X===this.#V)this.#V=this.#G[X];else if(X===this.#O)this.#O=this.#D[X];else{let z=this.#G[X];this.#D[z]=this.#D[X];let J=this.#D[X];this.#G[J]=this.#G[X]}this.#J--,this.#M.push(X)}}if(this.#N&&this.#H?.length){let X=this.#H,Y;while(Y=X?.shift())this.#X?.(...Y)}return Z}clear(){return this.#m("delete")}#m($){for(let Q of this.#A({allowStale:!0})){let Z=this.#q[Q];if(this.#P(Z))Z.__abortController.abort(Error("deleted"));else{let X=this.#K[Q];if(this.#T)this.#Z?.(Z,X,$);if(this.#N)this.#H?.push([Z,X,$])}}if(this.#U.clear(),this.#q.fill(void 0),this.#K.fill(void 0),this.#C&&this.#R)this.#C.fill(0),this.#R.fill(0);if(this.#j)this.#j.fill(0);if(this.#O=0,this.#V=0,this.#M.length=0,this.#W=0,this.#J=0,this.#N&&this.#H){let Q=this.#H,Z;while(Z=Q?.shift())this.#X?.(...Z)}}}});class bO{constructor($){if(this._stats={cache:{reads:0,hits:0,writes:0},db:{reads:0,hits:0,writes:0}},this.db=$.db,this.cacheSize=$.cacheSize??0,this.valueEncoding=$.valueEncoding??VZ.String,this.checkpoints=[],this.cacheSize>0)this._cache=new tR({max:this.cacheSize,updateAgeOnGet:!0})}setCheckpoints($){this.checkpoints=[];for(let Q=0;Q<$.length;Q++)this.checkpoints.push({root:$[Q].root,keyValueMap:new Map($[Q].keyValueMap)})}hasCheckpoints(){return this.checkpoints.length>0}checkpoint($){this.checkpoints.push({keyValueMap:new Map,root:$})}async commit(){let{keyValueMap:$}=this.checkpoints.pop();if(!this.hasCheckpoints()){let Q=[];for(let[Z,X]of $.entries())if(X===void 0)Q.push({type:"del",key:v7(Z)});else Q.push({type:"put",key:v7(Z),value:X});await this.batch(Q)}else{let Q=this.checkpoints[this.checkpoints.length-1].keyValueMap;for(let[Z,X]of $.entries())Q.set(Z,X)}}async revert(){let{root:$}=this.checkpoints.pop();return $}async get($){let Q=$5($);if(this._cache!==void 0){let Y=this._cache.get(Q);if(this._stats.cache.reads+=1,Y!==void 0)return this._stats.cache.hits+=1,Y}for(let Y=this.checkpoints.length-1;Y>=0;Y--)if(this.checkpoints[Y].keyValueMap.has(Q))return this.checkpoints[Y].keyValueMap.get(Q);let Z=await this.db.get(Q,{keyEncoding:Qq.String,valueEncoding:this.valueEncoding});if(this._stats.db.reads+=1,Z!==void 0)this._stats.db.hits+=1;let X=Z!==void 0?Z instanceof Uint8Array?Z:v7(Z):void 0;if(this._cache?.set(Q,X),this.hasCheckpoints())this.checkpoints[this.checkpoints.length-1].keyValueMap.set(Q,X);return X}async put($,Q){let Z=$5($);if(this.hasCheckpoints())this.checkpoints[this.checkpoints.length-1].keyValueMap.set(Z,Q);else{let X=this.valueEncoding===VZ.Bytes?Q:$5(Q);if(await this.db.put(Z,X,{keyEncoding:Qq.String,valueEncoding:this.valueEncoding}),this._stats.db.writes+=1,this._cache!==void 0)this._cache.set(Z,Q),this._stats.cache.writes+=1}}async del($){let Q=$5($);if(this.hasCheckpoints())this.checkpoints[this.checkpoints.length-1].keyValueMap.set(Q,void 0);else if(await this.db.del(Q,{keyEncoding:Qq.String}),this._stats.db.writes+=1,this._cache!==void 0)this._cache.set(Q,void 0),this._stats.cache.writes+=1}async batch($){if(this.hasCheckpoints()){for(let Q of $)if(Q.type==="put")await this.put(Q.key,Q.value);else if(Q.type==="del")await this.del(Q.key)}else{let Q=$.map((Z)=>{let X={key:$5(Z.key),value:Z.type==="put"?Z.value:void 0,type:Z.type,opts:{...Z.opts,...{valueEncoding:this.valueEncoding}}};if(this._stats.db.writes+=1,Z.type==="put"&&this.valueEncoding===VZ.String)X.value=$5(X.value);return X});await this.db.batch(Q)}}stats($=!0){let Q={...this._stats,size:this._cache?.size??0};if($)this._stats={cache:{reads:0,hits:0,writes:0},db:{reads:0,hits:0,writes:0}};return Q}shallowCopy(){return new bO({db:this.db,cacheSize:this.cacheSize,valueEncoding:this.valueEncoding})}open(){return Promise.resolve()}}var cI=p(()=>{Z1();$s()});var Qs=p(()=>{cI()});var Xs=_1((fc0,Zs)=>{var GG=1000,UG=GG*60,VG=UG*60,zq=VG*24,sP0=zq*7,tP0=zq*365.25;Zs.exports=function($,Q){Q=Q||{};var Z=typeof $;if(Z==="string"&&$.length>0)return eP0($);else if(Z==="number"&&isFinite($))return Q.long?QH0($):$H0($);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify($))};function eP0($){if($=String($),$.length>100)return;var Q=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec($);if(!Q)return;var Z=parseFloat(Q[1]),X=(Q[2]||"ms").toLowerCase();switch(X){case"years":case"year":case"yrs":case"yr":case"y":return Z*tP0;case"weeks":case"week":case"w":return Z*sP0;case"days":case"day":case"d":return Z*zq;case"hours":case"hour":case"hrs":case"hr":case"h":return Z*VG;case"minutes":case"minute":case"mins":case"min":case"m":return Z*UG;case"seconds":case"second":case"secs":case"sec":case"s":return Z*GG;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return Z;default:return}}function $H0($){var Q=Math.abs($);if(Q>=zq)return Math.round($/zq)+"d";if(Q>=VG)return Math.round($/VG)+"h";if(Q>=UG)return Math.round($/UG)+"m";if(Q>=GG)return Math.round($/GG)+"s";return $+"ms"}function QH0($){var Q=Math.abs($);if(Q>=zq)return eR($,Q,zq,"day");if(Q>=VG)return eR($,Q,VG,"hour");if(Q>=UG)return eR($,Q,UG,"minute");if(Q>=GG)return eR($,Q,GG,"second");return $+" ms"}function eR($,Q,Z,X){var Y=Q>=Z*1.5;return Math.round($/Z)+" "+X+(Y?"s":"")}});var Js=_1((kc0,Ys)=>{function ZH0($){Z.debug=Z,Z.default=Z,Z.coerce=W,Z.disable=J,Z.enable=Y,Z.enabled=q,Z.humanize=Xs(),Z.destroy=G,Object.keys($).forEach((U)=>{Z[U]=$[U]}),Z.names=[],Z.skips=[],Z.formatters={};function Q(U){let D=0;for(let P=0;P<U.length;P++)D=(D<<5)-D+U.charCodeAt(P),D|=0;return Z.colors[Math.abs(D)%Z.colors.length]}Z.selectColor=Q;function Z(U){let D,P=null,H,N;function C(...L){if(!C.enabled)return;let B=C,E=Number(new Date),I=E-(D||E);if(B.diff=I,B.prev=D,B.curr=E,D=E,L[0]=Z.coerce(L[0]),typeof L[0]!=="string")L.unshift("%O");let _=0;L[0]=L[0].replace(/%([a-zA-Z%])/g,(x,g)=>{if(x==="%%")return"%";_++;let h=Z.formatters[g];if(typeof h==="function"){let v=L[_];x=h.call(B,v),L.splice(_,1),_--}return x}),Z.formatArgs.call(B,L),(B.log||Z.log).apply(B,L)}if(C.namespace=U,C.useColors=Z.useColors(),C.color=Z.selectColor(U),C.extend=X,C.destroy=Z.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(P!==null)return P;if(H!==Z.namespaces)H=Z.namespaces,N=Z.enabled(U);return N},set:(L)=>{P=L}}),typeof Z.init==="function")Z.init(C);return C}function X(U,D){let P=Z(this.namespace+(typeof D>"u"?":":D)+U);return P.log=this.log,P}function Y(U){Z.save(U),Z.namespaces=U,Z.names=[],Z.skips=[];let D=(typeof U==="string"?U:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let P of D)if(P[0]==="-")Z.skips.push(P.slice(1));else Z.names.push(P)}function z(U,D){let P=0,H=0,N=-1,C=0;while(P<U.length)if(H<D.length&&(D[H]===U[P]||D[H]==="*"))if(D[H]==="*")N=H,C=P,H++;else P++,H++;else if(N!==-1)H=N+1,C++,P=C;else return!1;while(H<D.length&&D[H]==="*")H++;return H===D.length}function J(){let U=[...Z.names,...Z.skips.map((D)=>"-"+D)].join(",");return Z.enable(""),U}function q(U){for(let D of Z.skips)if(z(U,D))return!1;for(let D of Z.names)if(z(U,D))return!0;return!1}function W(U){if(U instanceof Error)return U.stack||U.message;return U}function G(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return Z.enable(Z.load()),Z}Ys.exports=ZH0});var Y4=_1((zs,$N)=>{zs.formatArgs=YH0;zs.save=JH0;zs.load=zH0;zs.useColors=XH0;zs.storage=qH0();zs.destroy=(()=>{let $=!1;return()=>{if(!$)$=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();zs.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function XH0(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let $;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&($=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt($[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function YH0($){if($[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+$[0]+(this.useColors?"%c ":" ")+"+"+$N.exports.humanize(this.diff),!this.useColors)return;let Q="color: "+this.color;$.splice(1,0,Q,"color: inherit");let Z=0,X=0;$[0].replace(/%[a-zA-Z%]/g,(Y)=>{if(Y==="%%")return;if(Z++,Y==="%c")X=Z}),$.splice(X,0,Q)}zs.log=console.debug||console.log||(()=>{});function JH0($){try{if($)zs.storage.setItem("debug",$);else zs.storage.removeItem("debug")}catch(Q){}}function zH0(){let $;try{$=zs.storage.getItem("debug")||zs.storage.getItem("DEBUG")}catch(Q){}if(!$&&typeof process<"u"&&"env"in process)$=process.env.DEBUG;return $}function qH0(){try{return localStorage}catch($){}}$N.exports=Js()(zs);var{formatters:WH0}=$N.exports;WH0.j=function($){try{return JSON.stringify($)}catch(Q){return"[UnexpectedJSONParseError]: "+Q.message}}});class X8{constructor(){this._branches=Array(16).fill(null),this._value=null}static fromArray($){let Q=new X8;return Q._branches=$.slice(0,16),Q._value=$[16],Q}value($){if($!==null&&$!==void 0)this._value=$;return this._value&&this._value.length>0?this._value:null}setBranch($,Q){this._branches[$]=Q}raw(){return[...this._branches,this._value]}serialize(){return I1.encode(this.raw())}getBranch($){let Q=this._branches[$];if(Q!==null&&Q.length>0)return Q;else return null}getChildren(){let $=[];for(let Q=0;Q<16;Q++){let Z=this._branches[Q];if(Z!==null&&Z.length>0)$.push([Q,Z])}return $}}var QN=p(()=>{j8()});function qs($,Q){if($.length%2)$.unshift(1);else $.unshift(0),$.unshift(0);if(Q)$[0]+=2;return $}function Ws($){if($[0]%2)$=$.slice(1);else $=$.slice(2);return $}function Ks($){return $[0]>1}function PY($){let Q=[];for(let Z=0;Z<$.length;Z++){let X=Z*2;Q[X]=$[Z]>>4,++X,Q[X]=$[Z]%16}return Q}function ZN($){let Q=new Uint8Array($.length/2);for(let Z=0;Z<Q.length;Z++){let X=Z*2;Q[Z]=($[X]<<4)+$[++X]}return Q}function dI($,Q){let Z=0;while($[Z]===Q[Z]&&$.length>Z)Z++;return Z}class yO{constructor($,Q,Z){this._nibbles=$,this._value=Q,this._isLeaf=Z}static decodeKey($){return Ws($)}encodedKey(){return qs(this._nibbles.slice(0),this._isLeaf)}key($){if($!==void 0)this._nibbles=$;return this._nibbles.slice(0)}keyLength(){return this._nibbles.length}value($){if($!==void 0)this._value=$;return this._value}raw(){return[ZN(this.encodedKey()),this._value]}serialize(){return I1.encode(this.raw())}}var lI=p(()=>{j8()});var _2;var XN=p(()=>{lI();_2=class _2 extends yO{constructor($,Q){super($,Q,!1)}raw(){return super.raw()}}});var t9;var iI=p(()=>{lI();t9=class t9 extends yO{constructor($,Q){super($,Q,!0)}raw(){return super.raw()}}});function oI($){if($.length===17)return X8.fromArray($);else if($.length===2){let Q=PY($[0]);if(Ks(Q))return new t9(t9.decodeKey(Q),$[1]);return new _2(_2.decodeKey(Q),$[1])}else throw n("Invalid node")}function OG($){return Array.isArray($)&&!($ instanceof Uint8Array)}function Gs($){let Q=I1.decode(Uint8Array.from($));if(!OG(Q))throw n("Invalid node");return oI(Q)}var Us=p(()=>{j8();Z1();QN();XN();iI()});var YN=p(()=>{QN();XN();iI();Us()});var DG;var nI=p(()=>{Z1();DG=A3("__root__")});async function*JN($,Q=[],Z=async(z,J)=>{},X=async(z,J)=>!0,Y=new Set){if(X1($,this.EMPTY_TRIE_ROOT))return;try{let z=await this.lookupNode($);if(z===void 0||Y.has(H0(this.hash(z.serialize()))))return;if(Y.add(H0(this.hash(z.serialize()))),await Z(z,Q),await X(z,Q))yield{node:z,currentKey:Q};if(z instanceof X8)for(let[J,q]of z._branches.entries()){let W=[...Q,J],G=q instanceof Uint8Array?q:this.hash(I1.encode(q));yield*JN.bind(this)(G,W,Z,X,Y)}else if(z instanceof _2){let J=z.value(),q=[...Q,...z._nibbles];yield*JN.bind(this)(J,q,Z,X,Y)}}catch{return}}var Vs=p(()=>{j8();Z1();QN();XN()});class zN{constructor($,Q,Z){this.onNode=$,this.taskExecutor=new NI(Z),this.trie=Q,this.resolve=()=>{},this.reject=()=>{}}static async newWalk($,Q,Z,X){await new zN($,Q,X??500).startWalk(Z)}async startWalk($){return new Promise(async(Q,Z)=>{this.resolve=Q,this.reject=Z;let X;try{X=await this.trie.lookupNode($)}catch(Y){return this.reject(Y)}this.processNode($,X,[])})}allChildren($,Q=[]){if($ instanceof t9)return;let Z;if($ instanceof _2)Z=[[$.key(),$.value()]];else if($ instanceof X8)Z=$.getChildren().map((X)=>[[X[0]],X[1]]);if(!Z)return;for(let X of Z){let Y=X[0],z=X[1],J=Q.concat(Y),q=J.length;this.pushNodeToQueue(z,J,q)}}pushNodeToQueue($,Q=[],Z){this.taskExecutor.executeOrQueue(Z??Q.length,async(X)=>{let Y;try{Y=await this.trie.lookupNode($)}catch(z){return this.reject(z)}X(),this.processNode($,Y,Q)})}onlyBranchIndex($,Q=[],Z,X){if(!($ instanceof X8))throw n("Expected branch node");let Y=$.getBranch(Z);if(!Y)throw n("Could not get branch of childIndex");let z=Q.slice();z.push(Z);let J=X??z.length;this.pushNodeToQueue(Y,z,J)}processNode($,Q,Z=[]){if(this.onNode($,Q,Z,this),this.taskExecutor.finished())this.resolve()}}var rI=p(()=>{Z1();YN()});class B${constructor($){this._opts={useKeyHashing:!1,useKeyHashingFunction:pI,keyPrefix:void 0,useRootPersistence:!1,useNodePruning:!1,cacheSize:0,valueEncoding:VZ.String},this._lock=new RI,this._debug=Os.default("mpt:#"),this.walkTrieIterable=JN.bind(this);let Q;if($!==void 0){if($?.valueEncoding!==void 0&&$.db===void 0)throw n("`valueEncoding` can only be set if a `db` is provided");this._opts={...this._opts,...$},this._opts.useKeyHashingFunction=$.common?.customCrypto.keccak256??$.useKeyHashingFunction??pI,Q=$.db!==void 0?$.valueEncoding??VZ.String:VZ.Bytes}else Q=VZ.Bytes;if(this.DEBUG=typeof window>"u"?process?.env?.DEBUG?.includes("ethjs")??!1:!1,this.debug=this.DEBUG?(Z,X=[])=>{let Y=this._debug;for(let z of X)Y=Y.extend(z);Y(Z)}:(...Z)=>{},this.database($?.db??new bR,Q),this.EMPTY_TRIE_ROOT=this.hash(dn),this._hashLen=this.EMPTY_TRIE_ROOT.length,this._root=this.EMPTY_TRIE_ROOT,$?.root)this.root($.root);this.DEBUG&&this.debug(`Trie created:
    || Root: ${H0(this.root())}
    || Secure: ${this._opts.useKeyHashing}
    || Persistent: ${this._opts.useRootPersistence}
    || Pruning: ${this._opts.useNodePruning}
    || CacheSize: ${this._opts.cacheSize}
    || ----------------`)}database($,Q){if($!==void 0){if($ instanceof bO)throw n("Cannot pass in an instance of CheckpointDB");this._db=new bO({db:$,cacheSize:this._opts.cacheSize,valueEncoding:Q})}return this._db}root($){if($!==void 0){if($===null)$=this.EMPTY_TRIE_ROOT;if(this.DEBUG&&this.debug(`Setting root to ${H0($)}`),$.length!==this._hashLen)throw n(`Invalid root length. Roots are ${this._hashLen} bytes, got ${$.length} bytes`);this._root=$}return this._root}async checkRoot($){try{return await this.lookupNode($)!==null}catch(Q){if(Q.message==="Missing node in DB")return X1($,this.EMPTY_TRIE_ROOT);else throw Q}}async get($,Q=!1){this.DEBUG&&this.debug(`Key: ${H0($)}`,["get"]);let{node:Z,remaining:X}=await this.findPath(this.appliedKey($),Q),Y=null;if(Z&&X.length===0)Y=Z.value();return this.DEBUG&&this.debug(`Value: ${Y===null?"null":H0(Y)}`,["get"]),Y}async put($,Q,Z=!1){if(this.DEBUG&&this.debug(`Key: ${H0($)}`,["put"]),this.DEBUG&&this.debug(`Value: ${Q===null?"null":H0($)}`,["put"]),this._opts.useRootPersistence&&X1($,DG)===!0)throw n(`Attempted to set '${jO(DG)}' key but it is not allowed.`);if(Q===null||Q.length===0)return this.del($);await this._lock.acquire();let X=Z?$:this.appliedKey($);if(X1(this.root(),this.EMPTY_TRIE_ROOT)===!0)await this._createInitialNode(X,Q);else{let{remaining:Y,stack:z}=await this.findPath(X),J=[];if(this._opts.useNodePruning){let q=await this.get($);if(q===null||X1(q,Q)===!1)J=z.map((G)=>this.hash(G.serialize())).map((G)=>{return{type:"del",key:this._opts.keyPrefix?d1(this._opts.keyPrefix,G):G,opts:{keyEncoding:Qq.Bytes}}})}if(await this._updateNode(X,Q,Y,z),this._opts.useNodePruning)await this._db.batch(J)}await this.persistRoot(),this._lock.release()}async del($,Q=!1){this.DEBUG&&this.debug(`Key: ${H0($)}`,["del"]),await this._lock.acquire();let Z=Q?$:this.appliedKey($),{node:X,stack:Y}=await this.findPath(Z),z=[];if(this._opts.useNodePruning&&X!==null)z=Y.map((q)=>this.hash(q.serialize())).map((q)=>{return{type:"del",key:this._opts.keyPrefix?d1(this._opts.keyPrefix,q):q,opts:{keyEncoding:Qq.Bytes}}});if(X)await this._deleteNode(Z,Y);if(this._opts.useNodePruning)await this._db.batch(z);await this.persistRoot(),this._lock.release()}async findPath($,Q=!1,Z={stack:[]}){let X=PY($),Y=X.length,z=Array.from({length:Y}),J=0;for(let D=0;D<Z.stack.length-1;D++)z[D]=Z.stack[D],J+=z[D]instanceof X8?1:z[D].keyLength();this.DEBUG&&this.debug(`Target (${X.length}): [${X}]`,["find_path"]);let q=null,W=async(D,P,H,N)=>{if(z[J]=P,P instanceof X8)if(J===Y)q={node:P,remaining:[],stack:z};else{let C=X[J];this.DEBUG&&this.debug(`Looking for node on branch index: [${C}]`,["find_path","branch_node"]);let L=P.getBranch(C);if(this.DEBUG){let B;if(L===null)B="NULL";else B=`Branch index: ${C.toString()} - `,B+=L instanceof Uint8Array?`NodeHash: ${H0(L)}`:`Raw_Node: ${L.toString()}`;this.debug(B,["find_path","branch_node"])}if(!L)q={node:null,remaining:X.slice(J),stack:z};else J++,N.onlyBranchIndex(P,H,C)}else if(P instanceof t9){let C=J;if(Y-J>P.key().length){q={node:null,remaining:X.slice(C),stack:z};return}for(let L of P.key()){if(L!==X[J]){q={node:null,remaining:X.slice(C),stack:z};return}J++}q={node:P,remaining:[],stack:z}}else if(P instanceof _2){this.DEBUG&&this.debug(`Comparing node key to expected
|| Node_Key: [${P.key()}]
|| Expected: [${X.slice(J,J+P.key().length)}]
|| Matching: [${X.slice(J,J+P.key().length).toString()===P.key().toString()}]
            `,["find_path","extension_node"]);let C=J;for(let L of P.key()){if(this.DEBUG&&this.debug(`NextNode: ${P.value()}`,["find_path","extension_node"]),L!==X[J]){q={node:null,remaining:X.slice(C),stack:z};return}J++}N.allChildren(P,H)}},G=Z.stack[Z.stack.length-1],U=G!==void 0?this.hash(G.serialize()):this.root();try{this.DEBUG&&this.debug(`Walking trie from ${G===void 0?"ROOT":"NODE"}: ${H0(U)}`,["find_path"]),await this.walkTrie(U,W)}catch(D){if(D.message!=="Missing node in DB"||Q)throw D}if(q===null)q={node:null,remaining:[],stack:z};return this.DEBUG&&this.debug(q.node!==null?`Target Node FOUND for ${PY($)}`:"Target Node NOT FOUND",["find_path"]),q.stack=q.stack.filter((D)=>D!==void 0),this.DEBUG&&this.debug(`Result:
        || Node: ${q.node===null?"null":q.node.constructor.name}
        || Remaining: [${q.remaining}]
|| Stack: ${q.stack.map((D)=>D.constructor.name).join(", ")}`,["find_path"]),q}async walkTrie($,Q){await zN.newWalk(Q,this,$)}async walkAllNodes($){for await(let{node:Q,currentKey:Z}of this.walkTrieIterable(this.root()))await $(Q,Z)}async walkAllValueNodes($){for await(let{node:Q,currentKey:Z}of this.walkTrieIterable(this.root(),[],void 0,async(X)=>{return X instanceof t9||X instanceof X8&&X.value()!==null}))await $(Q,Z)}async _createInitialNode($,Q){let X=new t9(PY($),Q).serialize();this.root(this.hash(X));let Y=this.root();Y=this._opts.keyPrefix?d1(this._opts.keyPrefix,Y):Y,await this._db.put(Y,X),await this.persistRoot()}async lookupNode($){if(OG($)){let Y=oI($);return this.DEBUG&&this.debug(`${Y.constructor.name}`,["lookup_node","raw_node"]),Y}this.DEBUG&&this.debug(`${`${H0($)}`}`,["lookup_node","by_hash"]);let Q=this._opts.keyPrefix?d1(this._opts.keyPrefix,$):$,Z=await this._db.get(Q)??null;if(Z===null)throw n("Missing node in DB");let X=Gs(Z);return this.DEBUG&&this.debug(`${X.constructor.name} found in DB`,["lookup_node","by_hash"]),X}async _updateNode($,Q,Z,X){let Y=[],z=X.pop();if(!z)throw n("Stack underflow");let J=PY($),q=!1;if(z instanceof t9){let W=0;for(let G=0;G<X.length;G++){let U=X[G];if(U instanceof X8)W++;else W+=U.key().length}if(Z.length===0&&dI(z.key(),J.slice(W))===z.key().length)q=!0}if(q)z.value(Q),X.push(z);else if(z instanceof X8)if(X.push(z),Z.length!==0){Z.shift();let W=new t9(Z,Q);X.push(W)}else z.value(Q);else{let W=z.key(),G=dI(W,Z),U=new X8;if(G!==0){let D=z.key().slice(0,G),P=new _2(D,Q);X.push(P),W.splice(0,G),Z.splice(0,G)}if(X.push(U),W.length!==0){let D=W.shift();if(W.length!==0||z instanceof t9){z.key(W);let P=this._formatNode(z,!1,Y);U.setBranch(D,P)}else this._formatNode(z,!1,Y,!0),U.setBranch(D,z.value())}else U.value(z.value());if(Z.length!==0){Z.shift();let D=new t9(Z,Q);X.push(D)}else U.value(Q)}await this.saveStack(J,X,Y)}async _deleteNode($,Q){let Z=(W,G,U,D,P)=>{if(D===null||D===void 0||D instanceof X8){if(D!==null&&D!==void 0)P.push(D);if(U instanceof X8){let H=new _2([G],new Uint8Array);P.push(H),W.push(G)}else{let H=U.key();H.unshift(G),U.key(H.slice(0)),W=W.concat(H)}P.push(U)}else{let H=D.key();if(U instanceof X8)H.push(G),W.push(G),D.key(H),P.push(D);else{let N=U.key();N.unshift(G),W=W.concat(N),H=H.concat(N),U.key(H)}P.push(U)}return W},X=Q.pop();if(X===void 0)throw n("missing last node");let Y=Q.pop(),z=[],J=PY($);if(Y===void 0){this.root(this.EMPTY_TRIE_ROOT);return}if(X instanceof X8)X.value(null);else{if(!(Y instanceof X8))throw n("Expected branch node");let W=X.key();J.splice(J.length-W.length),this._formatNode(X,!1,z,!0),Y.setBranch(J.pop(),null),X=Y,Y=Q.pop()}let q=X.getChildren();if(q.length===1){let W=q[0][1],G=q[0][0];if(this._opts.useNodePruning)z.push({type:"del",key:OG(W)?this.appliedKey(I1.encode(W)):W});let U=await this.lookupNode(W);J=Z(J,G,U,Y,Q),await this.saveStack(J,Q,z)}else{if(Y)Q.push(Y);Q.push(X),await this.saveStack(J,Q,z)}}async saveStack($,Q,Z){let X;while(Q.length){let Y=Q.pop();if(Y===void 0)throw n("saveStack: missing node");if(Y instanceof t9||Y instanceof _2)$.splice($.length-Y.key().length);if(Y instanceof _2&&X!==void 0)Y.value(X);if(Y instanceof X8&&X!==void 0){let z=$.pop();Y.setBranch(z,X)}X=this._formatNode(Y,Q.length===0,Z)}if(X!==void 0)this.root(X);await this._db.batch(Z),await this.persistRoot()}_formatNode($,Q,Z,X=!1){let Y=$.serialize();if(Y.length>=32||Q){let z=this.hash(Y),J=this._opts.keyPrefix?d1(this._opts.keyPrefix,z):z;if(X){if(this._opts.useNodePruning)Z.push({type:"del",key:J})}else Z.push({type:"put",key:J,value:Y});return z}return $.raw()}async batch($,Q){for(let Z of $)if(Z.type==="put"){if(Z.value===null||Z.value===void 0)throw n("Invalid batch db operation");await this.put(Z.key,Z.value,Q)}else if(Z.type==="del")await this.del(Z.key,Q);await this.persistRoot()}async verifyPrunedIntegrity(){let $=[$5(this.root()),$5(this.appliedKey(DG))];for(let Q of this._db.db._database.keys()){if($.includes(Q))continue;let Z=!1;try{await this.walkTrie(this.root(),async function(X,Y,z,J){if(Z)return;if(Y instanceof X8){for(let q of Y._branches)if(q!==null&&$5(OG(q)?J.trie.appliedKey(I1.encode(q)):q)===Q){Z=!0;return}J.allChildren(Y,z)}if(Y instanceof _2){if($5(Y.value())===Q){Z=!0;return}J.allChildren(Y,z)}})}catch{return!1}if(!Z)return!1}return!0}shallowCopy($=!0,Q){let Z=new B$({...this._opts,db:this._db.db.shallowCopy(),root:this.root(),cacheSize:0,...Q??{}});if($&&this.hasCheckpoints())Z._db.setCheckpoints(this._db.checkpoints);return Z}async persistRoot(){if(this._opts.useRootPersistence){this.DEBUG&&this.debug(`Persisting root: 
|| RootHash: ${H0(this.root())}
|| RootKey: ${H0(this.appliedKey(DG))}`,["persist_root"]);let $=this.appliedKey(DG);$=this._opts.keyPrefix?d1(this._opts.keyPrefix,$):$,await this._db.put($,this.root())}}async _findDbNodes($){let Q=async(Z,X,Y,z)=>{if(OG(Z)){if(X!==null)z.allChildren(X,Y)}else $(Z,X,Y,z)};await this.walkTrie(this.root(),Q)}appliedKey($){if(this._opts.useKeyHashing)return this.hash($);return $}hash($){return Uint8Array.from(this._opts.useKeyHashingFunction.call(void 0,$))}hasCheckpoints(){return this._db.hasCheckpoints()}checkpoint(){this.DEBUG&&this.debug(`${H0(this.root())}`,["checkpoint"]),this._db.checkpoint(this.root())}async commit(){if(!this.hasCheckpoints())throw n("trying to commit when not checkpointed");this.DEBUG&&this.debug(`${H0(this.root())}`,["commit"]),await this._lock.acquire(),await this._db.commit(),await this.persistRoot(),this._lock.release()}async revert(){if(!this.hasCheckpoints())throw n("trying to revert when not checkpointed");this.DEBUG&&this.debug(`${H0(this.root())}`,["revert","before"]),await this._lock.acquire(),this.root(await this._db.revert()),await this.persistRoot(),this._lock.release(),this.DEBUG&&this.debug(`${H0(this.root())}`,["revert","after"])}flushCheckpoints(){this.DEBUG&&this.debug(`Deleting ${this._db.checkpoints.length} checkpoints.`,["flush_checkpoints"]),this._db.checkpoints=[]}async getValueMap($=Q0,Q){let Z=Q!==void 0?!1:!0,X=0,Y={},z=null;return await this.walkAllValueNodes(async(J,q)=>{if(J instanceof t9){let W=ZN(q.concat(J.key()));if(!Z)if(L0(W)>=$)Z=!0;else return;if(Q===void 0||X<Q)Y[H0(W)]=H0(J._value),X++;else if(X===Q)z=H0(W)}}),{values:Y,nextKey:z}}}var Os;var Ds=p(()=>{j8();Z1();na();cI();YN();nI();Vs();rI();Os=V2(Y4(),1)});var Ms=()=>{};var Ps=()=>{};var Hs=p(()=>{Ms();Ps()});var js=()=>{};var Rs=()=>{};var Ns=p(()=>{js();Rs();rI()});var qN=p(()=>{ra();Qs();Ds();YN();Hs();nI();Ns()});function PH0($){if($.length===0)return!0;let Q=$[0];if(Array.isArray(Q))return!0;return!1}function HY($){return!PH0($)}function gO($){return $.type===D5.BlobEIP4844}function Cs($){return Number(L0(F1($.type)))===D5.Legacy}function Ls($){return Number(L0(F1($.type)))===D5.AccessListEIP2930}function Ts($){return Number(L0(F1($.type)))===D5.FeeMarketEIP1559}function Fs($){return Number(L0(F1($.type)))===D5.BlobEIP4844}function As($){return Number(L0(F1($.type)))===D5.EOACodeEIP7702}var _8,D5;var g4=p(()=>{Z1();_8={EIP155ReplayProtection:155,EIP1559FeeMarket:1559,EIP2718TypedTransaction:2718,EIP2930AccessLists:2930,EIP7702EOACode:7702};D5={Legacy:0,AccessListEIP2930:1,FeeMarketEIP1559:2,BlobEIP4844:3,EOACodeEIP7702:4}});var WN;var aI=p(()=>{WN={1:{txGas:21000,txCreationGas:32000,txDataZeroGas:4,txDataNonZeroGas:68,accessListStorageKeyGas:0,accessListAddressGas:0},1679:{txDataNonZeroGas:16},2930:{accessListStorageKeyGas:1900,accessListAddressGas:2400},3860:{initCodeWordGas:2,maxInitCodeSize:49152},4844:{blobCommitmentVersionKzg:1,blobGasPerBlob:131072,maxBlobGasPerBlock:786432},7594:{maxBlobsPerTx:6},7623:{totalCostFloorPerToken:10},7702:{perAuthBaseGas:12500,perEmptyAccountCost:25000},7691:{maxBlobGasPerBlock:1179648},7825:{maxTransactionGasLimit:16777216}}});function HH0($){return $?.copy()??new y4({chain:p7})}function E$($){return Q1(`0x${$.toString(16).padStart(2,"0")}`)}function m4($){let Q=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(let[Z,X]of Object.entries($))if(Q.includes(Z)){if(Array.isArray(X))throw n(`${Z} cannot be an array`)}}function jH0($,Q){let Z=$.param("maxInitCodeSize");if(Z&&BigInt(Q)>Z)throw n(`the initcode size of this transaction is too large: it is ${Q} while the max is ${$.param("maxInitCodeSize")}`)}function h4($,Q=256,Z=!1){for(let[X,Y]of Object.entries($))switch(Q){case 64:if(Z){if(Y!==void 0&&Y>=KZ)throw n(`${X} cannot equal or exceed MAX_UINT64 (2^64-1), given ${Y}`)}else if(Y!==void 0&&Y>KZ)throw n(`${X} cannot exceed MAX_UINT64 (2^64-1), given ${Y}`);break;case 256:if(Z){if(Y!==void 0&&Y>=e8)throw n(`${X} cannot equal or exceed MAX_INTEGER (2^256-1), given ${Y}`)}else if(Y!==void 0&&Y>e8)throw n(`${X} cannot exceed MAX_INTEGER (2^256-1), given ${Y}`);break;default:throw n("unimplemented bits value")}}function I$($,Q,Z={}){$.common=HH0(Z.common),$.common.updateParams(Z.params??WN),m4(Q);let{nonce:X,gasLimit:Y,to:z,value:J,data:q,v:W,r:G,s:U}=Q;$.txOptions=Z;let D=F1(z===""?"0x":z);$.to=D.length>0?new Q6(D):void 0;let P=F1(W),H=F1(G),N=F1(U);if($.nonce=L0(F1(X)),$.gasLimit=L0(F1(Y)),$.to=D.length>0?new Q6(D):void 0,$.value=L0(F1(J)),$.data=F1(q===""?"0x":q),$.v=P.length>0?L0(P):void 0,$.r=H.length>0?L0(H):void 0,$.s=N.length>0?L0(N):void 0,h4({value:$.value,r:$.r,s:$.s}),h4({gasLimit:$.gasLimit},64),h4({nonce:$.nonce},64,!0),$.common.isActivatedEIP(7825)){let B=$.common.param("maxTransactionGasLimit");if($.gasLimit>B)throw n(`Transaction gas limit ${$.gasLimit} exceeds the maximum allowed by EIP-7825 (${B})`)}let C=$.to===void 0||$.to===null,L=Z.allowUnlimitedInitCodeSize??!1;if(C&&$.common.isActivatedEIP(3860)&&L===!1)jH0($.common,$.data.length)}function _$($){return{type:c1(BigInt($.type)),nonce:c1($.nonce),gasLimit:c1($.gasLimit),to:$.to!==void 0?$.to.toString():void 0,value:c1($.value),data:H0($.data),v:$.v!==void 0?c1($.v):void 0,r:$.r!==void 0?c1($.r):void 0,s:$.s!==void 0?c1($.s):void 0,chainId:c1($.common.chainId()),yParity:$.v===0n||$.v===1n?c1($.v):void 0}}var B3=p(()=>{$9();Z1();aI()});function MG($,Q){let Z=$.maxPriorityFeePerGas,X=$.maxFeePerGas-Q,z=(Z<X?Z:X)+Q;return $.gasLimit*z+$.value}function PG($,Q){if(Q===void 0||Q>$.maxFeePerGas)throw n("Tx cannot pay baseFee");let Z=$.maxFeePerGas-Q;return $.maxPriorityFeePerGas<Z?$.maxPriorityFeePerGas:Z}var KN=p(()=>{Z1()});function RH0($,Q=!1){if(Q)return{h:Number($&GN),l:Number($>>ws&GN)};return{h:Number($>>ws&GN)|0,l:Number($&GN)|0}}function Bs($,Q=!1){let Z=$.length,X=new Uint32Array(Z),Y=new Uint32Array(Z);for(let z=0;z<Z;z++){let{h:J,l:q}=RH0($[z],Q);[X[z],Y[z]]=[J,q]}return[X,Y]}var GN,ws,Es=($,Q,Z)=>$<<Z|Q>>>32-Z,Is=($,Q,Z)=>Q<<Z|$>>>32-Z,_s=($,Q,Z)=>Q<<Z-32|$>>>64-Z,Ss=($,Q,Z)=>$<<Z-32|Q>>>64-Z;var fs=p(()=>{GN=BigInt(4294967295),ws=BigInt(32)});var qq;var ks=p(()=>{qq=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function NH0($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function jY($){if(!Number.isSafeInteger($)||$<0)throw Error("positive integer expected, got "+$)}function u7($,...Q){if(!NH0($))throw Error("Uint8Array expected");if(Q.length>0&&!Q.includes($.length))throw Error("Uint8Array expected of length "+Q+", got length="+$.length)}function xs($){if(typeof $!=="function"||typeof $.create!=="function")throw Error("Hash should be wrapped by utils.createHasher");jY($.outputLen),jY($.blockLen)}function S$($,Q=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(Q&&$.finished)throw Error("Hash#digest() has already been called")}function hO($,Q){u7($);let Z=Q.outputLen;if($.length<Z)throw Error("digestInto() expects output buffer of length at least "+Z)}function bs($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function f$(...$){for(let Q=0;Q<$.length;Q++)$[Q].fill(0)}function UN($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function E3($,Q){return $<<32-Q|$>>>Q}function LH0($){return $<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255}function TH0($){for(let Q=0;Q<$.length;Q++)$[Q]=LH0($[Q]);return $}function FH0($){if(typeof $!=="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function Wq($){if(typeof $==="string")$=FH0($);return u7($),$}function vs(...$){let Q=0;for(let X=0;X<$.length;X++){let Y=$[X];u7(Y),Q+=Y.length}let Z=new Uint8Array(Q);for(let X=0,Y=0;X<$.length;X++){let z=$[X];Z.set(z,Y),Y+=z.length}return Z}class Kq{}function VN($){let Q=(X)=>$().update(Wq(X)).digest(),Z=$();return Q.outputLen=Z.outputLen,Q.blockLen=Z.blockLen,Q.create=()=>$(),Q}function ys($=32){if(qq&&typeof qq.getRandomValues==="function")return qq.getRandomValues(new Uint8Array($));if(qq&&typeof qq.randomBytes==="function")return Uint8Array.from(qq.randomBytes($));throw Error("crypto.getRandomValues must be defined")}var CH0,tI;var RY=p(()=>{ks();/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */CH0=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();tI=CH0?($)=>$:TH0});function fH0($,Q=24){let Z=new Uint32Array(10);for(let X=24-Q;X<24;X++){for(let J=0;J<10;J++)Z[J]=$[J]^$[J+10]^$[J+20]^$[J+30]^$[J+40];for(let J=0;J<10;J+=2){let q=(J+8)%10,W=(J+2)%10,G=Z[W],U=Z[W+1],D=gs(G,U,1)^Z[q],P=hs(G,U,1)^Z[q+1];for(let H=0;H<50;H+=10)$[J+H]^=D,$[J+H+1]^=P}let Y=$[2],z=$[3];for(let J=0;J<24;J++){let q=ps[J],W=gs(Y,z,q),G=hs(Y,z,q),U=ms[J];Y=$[U],z=$[U+1],$[U]=W,$[U+1]=G}for(let J=0;J<50;J+=10){for(let q=0;q<10;q++)Z[q]=$[J+q];for(let q=0;q<10;q++)$[J+q]^=~Z[(q+2)%10]&Z[(q+4)%10]}$[0]^=_H0[X],$[1]^=SH0[X]}f$(Z)}var AH0,mO,wH0,BH0,EH0,IH0,ms,ps,us,cs,_H0,SH0,gs=($,Q,Z)=>Z>32?_s($,Q,Z):Es($,Q,Z),hs=($,Q,Z)=>Z>32?Ss($,Q,Z):Is($,Q,Z),eI,ON=($,Q,Z)=>VN(()=>new eI(Q,$,Z)),ds,$_,ls,is;var os=p(()=>{fs();RY();AH0=BigInt(0),mO=BigInt(1),wH0=BigInt(2),BH0=BigInt(7),EH0=BigInt(256),IH0=BigInt(113),ms=[],ps=[],us=[];for(let $=0,Q=mO,Z=1,X=0;$<24;$++){[Z,X]=[X,(2*Z+3*X)%5],ms.push(2*(5*X+Z)),ps.push(($+1)*($+2)/2%64);let Y=AH0;for(let z=0;z<7;z++)if(Q=(Q<<mO^(Q>>BH0)*IH0)%EH0,Q&wH0)Y^=mO<<(mO<<BigInt(z))-mO;us.push(Y)}cs=Bs(us,!0),_H0=cs[0],SH0=cs[1];eI=class eI extends Kq{constructor($,Q,Z,X=!1,Y=24){super();if(this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=$,this.suffix=Q,this.outputLen=Z,this.enableXOF=X,this.rounds=Y,jY(Z),!(0<$&&$<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=bs(this.state)}clone(){return this._cloneInto()}keccak(){tI(this.state32),fH0(this.state32,this.rounds),tI(this.state32),this.posOut=0,this.pos=0}update($){S$(this),$=Wq($),u7($);let{blockLen:Q,state:Z}=this,X=$.length;for(let Y=0;Y<X;){let z=Math.min(Q-this.pos,X-Y);for(let J=0;J<z;J++)Z[this.pos++]^=$[Y++];if(this.pos===Q)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:$,suffix:Q,pos:Z,blockLen:X}=this;if($[Z]^=Q,(Q&128)!==0&&Z===X-1)this.keccak();$[X-1]^=128,this.keccak()}writeInto($){S$(this,!1),u7($),this.finish();let Q=this.state,{blockLen:Z}=this;for(let X=0,Y=$.length;X<Y;){if(this.posOut>=Z)this.keccak();let z=Math.min(Z-this.posOut,Y-X);$.set(Q.subarray(this.posOut,this.posOut+z),X),this.posOut+=z,X+=z}return $}xofInto($){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto($)}xof($){return jY($),this.xofInto(new Uint8Array($))}digestInto($){if(hO($,this),this.finished)throw Error("digest() was already called");return this.writeInto($),this.destroy(),$}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,f$(this.state)}_cloneInto($){let{blockLen:Q,suffix:Z,outputLen:X,rounds:Y,enableXOF:z}=this;return $||($=new eI(Q,Z,X,z,Y)),$.state32.set(this.state32),$.pos=this.pos,$.posOut=this.posOut,$.finished=this.finished,$.rounds=Y,$.suffix=Z,$.outputLen=X,$.enableXOF=z,$.destroyed=this.destroyed,$}};ds=(()=>ON(1,144,28))(),$_=(()=>ON(1,136,32))(),ls=(()=>ON(1,104,48))(),is=(()=>ON(1,72,64))()});function Gq($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function J_($){if(!Gq($))throw Error("Uint8Array expected")}function HG($,Q){if(typeof Q!=="boolean")throw Error($+" boolean expected, got "+Q)}function pO($){let Q=$.toString(16);return Q.length&1?"0"+Q:Q}function as($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);return $===""?Y_:BigInt("0x"+$)}function jG($){if(J_($),ss)return $.toHex();let Q="";for(let Z=0;Z<$.length;Z++)Q+=kH0[$[Z]];return Q}function ns($){if($>=DZ._0&&$<=DZ._9)return $-DZ._0;if($>=DZ.A&&$<=DZ.F)return $-(DZ.A-10);if($>=DZ.a&&$<=DZ.f)return $-(DZ.a-10);return}function uO($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);if(ss)return Uint8Array.fromHex($);let Q=$.length,Z=Q/2;if(Q%2)throw Error("hex string expected, got unpadded hex of length "+Q);let X=new Uint8Array(Z);for(let Y=0,z=0;Y<Z;Y++,z+=2){let J=ns($.charCodeAt(z)),q=ns($.charCodeAt(z+1));if(J===void 0||q===void 0){let W=$[z]+$[z+1];throw Error('hex string expected, got non-hex character "'+W+'" at index '+z)}X[Y]=J*16+q}return X}function MZ($){return as(jG($))}function z_($){return J_($),as(jG(Uint8Array.from($).reverse()))}function Uq($,Q){return uO($.toString(16).padStart(Q*2,"0"))}function q_($,Q){return Uq($,Q).reverse()}function p4($,Q,Z){let X;if(typeof Q==="string")try{X=uO(Q)}catch(z){throw Error($+" must be hex string or Uint8Array, cause: "+z)}else if(Gq(Q))X=Uint8Array.from(Q);else throw Error($+" must be hex string or Uint8Array");let Y=X.length;if(typeof Z==="number"&&Y!==Z)throw Error($+" of length "+Z+" expected, got "+Y);return X}function cO(...$){let Q=0;for(let X=0;X<$.length;X++){let Y=$[X];J_(Y),Q+=Y.length}let Z=new Uint8Array(Q);for(let X=0,Y=0;X<$.length;X++){let z=$[X];Z.set(z,Y),Y+=z.length}return Z}function DN($,Q,Z){return Q_($)&&Q_(Q)&&Q_(Z)&&Q<=$&&$<Z}function Vq($,Q,Z,X){if(!DN(Q,Z,X))throw Error("expected valid "+$+": "+Z+" <= n < "+X+", got "+Q)}function ts($){let Q;for(Q=0;$>Y_;$>>=X_,Q+=1);return Q}function es($,Q,Z){if(typeof $!=="number"||$<2)throw Error("hashLen must be a number");if(typeof Q!=="number"||Q<2)throw Error("qByteLen must be a number");if(typeof Z!=="function")throw Error("hmacFn must be a function");let X=Z_($),Y=Z_($),z=0,J=()=>{X.fill(1),Y.fill(0),z=0},q=(...D)=>Z(Y,X,...D),W=(D=Z_(0))=>{if(Y=q(rs([0]),D),X=q(),D.length===0)return;Y=q(rs([1]),D),X=q()},G=()=>{if(z++>=1000)throw Error("drbg: tried 1000 values");let D=0,P=[];while(D<Q){X=q();let H=X.slice();P.push(H),D+=X.length}return cO(...P)};return(D,P)=>{J(),W(D);let H=void 0;while(!(H=P(G())))W();return J(),H}}function Dq($,Q,Z={}){let X=(Y,z,J)=>{let q=xH0[z];if(typeof q!=="function")throw Error("invalid validator function");let W=$[Y];if(J&&W===void 0)return;if(!q(W,$))throw Error("param "+String(Y)+" is invalid. Expected "+z+", got "+W)};for(let[Y,z]of Object.entries(Q))X(Y,z,!1);for(let[Y,z]of Object.entries(Z))X(Y,z,!0);return $}function W_($){let Q=new WeakMap;return(Z,...X)=>{let Y=Q.get(Z);if(Y!==void 0)return Y;let z=$(Z,...X);return Q.set(Z,z),z}}var Y_,X_,ss,kH0,DZ,Q_=($)=>typeof $==="bigint"&&Y_<=$,Oq=($)=>(X_<<BigInt($))-X_,Z_=($)=>new Uint8Array($),rs=($)=>Uint8Array.from($),xH0;var MN=p(()=>{/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Y_=BigInt(0),X_=BigInt(1);ss=typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function",kH0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));DZ={_0:48,_9:57,A:65,F:70,a:97,f:102};xH0={bigint:($)=>typeof $==="bigint",function:($)=>typeof $==="function",boolean:($)=>typeof $==="boolean",string:($)=>typeof $==="string",stringOrUint8Array:($)=>typeof $==="string"||Gq($),isSafeInteger:($)=>Number.isSafeInteger($),array:($)=>Array.isArray($),field:($,Q)=>Q.Fp.isValid($),hash:($)=>typeof $==="function"&&Number.isSafeInteger($.outputLen)}});var $t;var Qt=p(()=>{RY();$t=u7});function dO($){return(Q)=>{return $t(Q),$(Q)}}var Zt=p(()=>{Qt()});var Dl0,RG,Ml0,Pl0;var PN=p(()=>{os();Zt();Dl0=dO(ds),RG=(()=>{let $=dO($_);return $.create=$_.create,$})(),Ml0=dO(ls),Pl0=dO(is)});function bH0($,Q,Z,X){if(typeof $.setBigUint64==="function")return $.setBigUint64(Q,Z,X);let Y=BigInt(32),z=BigInt(4294967295),J=Number(Z>>Y&z),q=Number(Z&z),W=X?4:0,G=X?0:4;$.setUint32(Q+W,J,X),$.setUint32(Q+G,q,X)}function Xt($,Q,Z){return $&Q^~$&Z}function Yt($,Q,Z){return $&Q^$&Z^Q&Z}var K_,PZ;var Jt=p(()=>{RY();K_=class K_ extends Kq{constructor($,Q,Z,X){super();this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=$,this.outputLen=Q,this.padOffset=Z,this.isLE=X,this.buffer=new Uint8Array($),this.view=UN(this.buffer)}update($){S$(this),$=Wq($),u7($);let{view:Q,buffer:Z,blockLen:X}=this,Y=$.length;for(let z=0;z<Y;){let J=Math.min(X-this.pos,Y-z);if(J===X){let q=UN($);for(;X<=Y-z;z+=X)this.process(q,z);continue}if(Z.set($.subarray(z,z+J),this.pos),this.pos+=J,z+=J,this.pos===X)this.process(Q,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){S$(this),hO($,this),this.finished=!0;let{buffer:Q,view:Z,blockLen:X,isLE:Y}=this,{pos:z}=this;if(Q[z++]=128,f$(this.buffer.subarray(z)),this.padOffset>X-z)this.process(Z,0),z=0;for(let U=z;U<X;U++)Q[U]=0;bH0(Z,X-8,BigInt(this.length*8),Y),this.process(Z,0);let J=UN($),q=this.outputLen;if(q%4)throw Error("_sha2: outputLen should be aligned to 32bit");let W=q/4,G=this.get();if(W>G.length)throw Error("_sha2: outputLen bigger than state");for(let U=0;U<W;U++)J.setUint32(4*U,G[U],Y)}digest(){let{buffer:$,outputLen:Q}=this;this.digestInto($);let Z=$.slice(0,Q);return this.destroy(),Z}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:Q,buffer:Z,length:X,finished:Y,destroyed:z,pos:J}=this;if($.destroyed=z,$.finished=Y,$.length=X,$.pos=J,X%Q)$.buffer.set(Z);return $}clone(){return this._cloneInto()}};PZ=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225])});var vH0,NY,zt,qt;var Wt=p(()=>{Jt();RY();vH0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),NY=new Uint32Array(64);zt=class zt extends K_{constructor($=32){super(64,$,8,!1);this.A=PZ[0]|0,this.B=PZ[1]|0,this.C=PZ[2]|0,this.D=PZ[3]|0,this.E=PZ[4]|0,this.F=PZ[5]|0,this.G=PZ[6]|0,this.H=PZ[7]|0}get(){let{A:$,B:Q,C:Z,D:X,E:Y,F:z,G:J,H:q}=this;return[$,Q,Z,X,Y,z,J,q]}set($,Q,Z,X,Y,z,J,q){this.A=$|0,this.B=Q|0,this.C=Z|0,this.D=X|0,this.E=Y|0,this.F=z|0,this.G=J|0,this.H=q|0}process($,Q){for(let U=0;U<16;U++,Q+=4)NY[U]=$.getUint32(Q,!1);for(let U=16;U<64;U++){let D=NY[U-15],P=NY[U-2],H=E3(D,7)^E3(D,18)^D>>>3,N=E3(P,17)^E3(P,19)^P>>>10;NY[U]=N+NY[U-7]+H+NY[U-16]|0}let{A:Z,B:X,C:Y,D:z,E:J,F:q,G:W,H:G}=this;for(let U=0;U<64;U++){let D=E3(J,6)^E3(J,11)^E3(J,25),P=G+D+Xt(J,q,W)+vH0[U]+NY[U]|0,N=(E3(Z,2)^E3(Z,13)^E3(Z,22))+Yt(Z,X,Y)|0;G=W,W=q,q=J,J=z+P|0,z=Y,Y=X,X=Z,Z=P+N|0}Z=Z+this.A|0,X=X+this.B|0,Y=Y+this.C|0,z=z+this.D|0,J=J+this.E|0,q=q+this.F|0,W=W+this.G|0,G=G+this.H|0,this.set(Z,X,Y,z,J,q,W,G)}roundClean(){f$(NY)}destroy(){this.set(0,0,0,0,0,0,0,0),f$(this.buffer)}};qt=VN(()=>new zt)});var G_,U_=($,Q,Z)=>new G_($,Q).update(Z).digest();var Kt=p(()=>{RY();G_=class G_ extends Kq{constructor($,Q){super();this.finished=!1,this.destroyed=!1,xs($);let Z=Wq(Q);if(this.iHash=$.create(),typeof this.iHash.update!=="function")throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let X=this.blockLen,Y=new Uint8Array(X);Y.set(Z.length>X?$.create().update(Z).digest():Z);for(let z=0;z<Y.length;z++)Y[z]^=54;this.iHash.update(Y),this.oHash=$.create();for(let z=0;z<Y.length;z++)Y[z]^=106;this.oHash.update(Y),f$(Y)}update($){return S$(this),this.iHash.update($),this}digestInto($){S$(this),u7($,this.outputLen),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||($=Object.create(Object.getPrototypeOf(this),{}));let{oHash:Q,iHash:Z,finished:X,destroyed:Y,blockLen:z,outputLen:J}=this;return $=$,$.finished=X,$.destroyed=Y,$.blockLen=z,$.outputLen=J,$.oHash=Q._cloneInto($.oHash),$.iHash=Z._cloneInto($.iHash),$}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};U_.create=($,Q)=>new G_($,Q)});function e9($,Q){let Z=$%Q;return Z>=S2?Z:Q+Z}function u4($,Q,Z){let X=$;while(Q-- >S2)X*=X,X%=Z;return X}function HN($,Q){if($===S2)throw Error("invert: expected non-zero number");if(Q<=S2)throw Error("invert: expected positive modulus, got "+Q);let Z=e9($,Q),X=Q,Y=S2,z=f9,J=f9,q=S2;while(Z!==S2){let G=X/Z,U=X%Z,D=Y-J*G,P=z-q*G;X=Z,Z=U,Y=J,z=q,J=D,q=P}if(X!==f9)throw Error("invert: does not exist");return e9(Y,Q)}function mH0($){let Q=$-f9,Z=0;while(Q%Mq===S2)Q/=Mq,Z++;let X=Mq,Y=lO($);while(X<$&&Vt(Y,X))if(X++>1000)throw Error("Cannot find square root: probably non-prime P");if(Z===1){let J=($+f9)/V_;return function(W,G){let U=W.pow(G,J);if(!W.eql(W.sqr(U),G))throw Error("Cannot find square root");return U}}let z=(Q+f9)/Mq;return function(q,W){if(!Vt(q,W))throw Error("Cannot find square root");let G=Z,U=q.pow(q.mul(q.ONE,X),Q),D=q.pow(W,z),P=q.pow(W,Q);while(!q.eql(P,q.ONE)){if(q.eql(P,q.ZERO))return q.ZERO;let H=1;for(let C=q.sqr(P);H<G;H++){if(q.eql(C,q.ONE))break;C=q.sqr(C)}let N=q.pow(U,f9<<BigInt(G-H-1));U=q.sqr(N),D=q.mul(D,N),P=q.mul(P,U),G=H}return D}}function pH0($){if($%V_===yH0)return function(Z,X){let Y=($+f9)/V_,z=Z.pow(X,Y);if(!Z.eql(Z.sqr(z),X))throw Error("Cannot find square root");return z};if($%Ut===Gt)return function(Z,X){let Y=Z.mul(X,Mq),z=($-Gt)/Ut,J=Z.pow(Y,z),q=Z.mul(X,J),W=Z.mul(Z.mul(q,Mq),J),G=Z.mul(q,Z.sub(W,Z.ONE));if(!Z.eql(Z.sqr(G),X))throw Error("Cannot find square root");return G};if($%hH0===gH0);return mH0($)}function O_($){let Q={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},Z=uH0.reduce((X,Y)=>{return X[Y]="function",X},Q);return Dq($,Z)}function cH0($,Q,Z){if(Z<S2)throw Error("invalid exponent, negatives unsupported");if(Z===S2)return $.ONE;if(Z===f9)return Q;let X=$.ONE,Y=Q;while(Z>S2){if(Z&f9)X=$.mul(X,Y);Y=$.sqr(Y),Z>>=f9}return X}function D_($,Q,Z=!1){let X=Array(Q.length).fill(Z?$.ZERO:void 0),Y=Q.reduce((J,q,W)=>{if($.is0(q))return J;return X[W]=J,$.mul(J,q)},$.ONE),z=$.inv(Y);return Q.reduceRight((J,q,W)=>{if($.is0(q))return J;return X[W]=$.mul(J,X[W]),$.mul(J,q)},z),X}function dH0($,Q){let Z=($.ORDER-f9)/Mq,X=$.pow(Q,Z),Y=$.eql(X,$.ONE),z=$.eql(X,$.ZERO),J=$.eql(X,$.neg($.ONE));if(!Y&&!z&&!J)throw Error("Cannot find square root: probably non-prime P");return Y?1:z?0:-1}function Vt($,Q){let Z=dH0($,Q);return Z===0||Z===1}function M_($,Q){if(Q!==void 0)jY(Q);let Z=Q!==void 0?Q:$.toString(2).length,X=Math.ceil(Z/8);return{nBitLength:Z,nByteLength:X}}function lO($,Q,Z=!1,X={}){if($<=S2)throw Error("invalid field: expected ORDER > 0, got "+$);let{nBitLength:Y,nByteLength:z}=M_($,Q);if(z>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let J,q=Object.freeze({ORDER:$,isLE:Z,BITS:Y,BYTES:z,MASK:Oq(Y),ZERO:S2,ONE:f9,create:(W)=>e9(W,$),isValid:(W)=>{if(typeof W!=="bigint")throw Error("invalid field element: expected bigint, got "+typeof W);return S2<=W&&W<$},is0:(W)=>W===S2,isOdd:(W)=>(W&f9)===f9,neg:(W)=>e9(-W,$),eql:(W,G)=>W===G,sqr:(W)=>e9(W*W,$),add:(W,G)=>e9(W+G,$),sub:(W,G)=>e9(W-G,$),mul:(W,G)=>e9(W*G,$),pow:(W,G)=>cH0(q,W,G),div:(W,G)=>e9(W*HN(G,$),$),sqrN:(W)=>W*W,addN:(W,G)=>W+G,subN:(W,G)=>W-G,mulN:(W,G)=>W*G,inv:(W)=>HN(W,$),sqrt:X.sqrt||((W)=>{if(!J)J=pH0($);return J(q,W)}),toBytes:(W)=>Z?q_(W,z):Uq(W,z),fromBytes:(W)=>{if(W.length!==z)throw Error("Field.fromBytes: expected "+z+" bytes, got "+W.length);return Z?z_(W):MZ(W)},invertBatch:(W)=>D_(q,W),cmov:(W,G,U)=>U?G:W});return Object.freeze(q)}function Ot($){if(typeof $!=="bigint")throw Error("field order must be bigint");let Q=$.toString(2).length;return Math.ceil(Q/8)}function P_($){let Q=Ot($);return Q+Math.ceil(Q/2)}function Dt($,Q,Z=!1){let X=$.length,Y=Ot(Q),z=P_(Q);if(X<16||X<z||X>1024)throw Error("expected "+z+"-1024 bytes of input, got "+X);let J=Z?z_($):MZ($),q=e9(J,Q-f9)+f9;return Z?q_(q,Y):Uq(q,Y)}var S2,f9,Mq,yH0,V_,Gt,Ut,gH0,hH0,uH0;var jN=p(()=>{RY();MN();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */S2=BigInt(0),f9=BigInt(1),Mq=BigInt(2),yH0=BigInt(3),V_=BigInt(4),Gt=BigInt(5),Ut=BigInt(8),gH0=BigInt(9),hH0=BigInt(16);uH0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function H_($,Q){let Z=Q.negate();return $?Z:Q}function Ht($,Q){if(!Number.isSafeInteger($)||$<=0||$>Q)throw Error("invalid window size, expected [1.."+Q+"], got W="+$)}function j_($,Q){Ht($,Q);let Z=Math.ceil(Q/$)+1,X=2**($-1),Y=2**$,z=Oq($),J=BigInt($);return{windows:Z,windowSize:X,mask:z,maxNumber:Y,shiftBy:J}}function Pt($,Q,Z){let{windowSize:X,mask:Y,maxNumber:z,shiftBy:J}=Z,q=Number($&Y),W=$>>J;if(q>X)q-=z,W+=C_;let G=Q*X,U=G+Math.abs(q)-1,D=q===0,P=q<0,H=Q%2!==0;return{nextN:W,offset:U,isZero:D,isNeg:P,isNegF:H,offsetF:G}}function lH0($,Q){if(!Array.isArray($))throw Error("array expected");$.forEach((Z,X)=>{if(!(Z instanceof Q))throw Error("invalid point at index "+X)})}function iH0($,Q){if(!Array.isArray($))throw Error("array of scalars expected");$.forEach((Z,X)=>{if(!Q.isValid(Z))throw Error("invalid scalar at index "+X)})}function N_($){return jt.get($)||1}function Rt($,Q){return{constTimeNegate:H_,hasPrecomputes(Z){return N_(Z)!==1},unsafeLadder(Z,X,Y=$.ZERO){let z=Z;while(X>Mt){if(X&C_)Y=Y.add(z);z=z.double(),X>>=C_}return Y},precomputeWindow(Z,X){let{windows:Y,windowSize:z}=j_(X,Q),J=[],q=Z,W=q;for(let G=0;G<Y;G++){W=q,J.push(W);for(let U=1;U<z;U++)W=W.add(q),J.push(W);q=W.double()}return J},wNAF(Z,X,Y){let{ZERO:z,BASE:J}=$,q=j_(Z,Q);for(let W=0;W<q.windows;W++){let{nextN:G,offset:U,isZero:D,isNeg:P,isNegF:H,offsetF:N}=Pt(Y,W,q);if(Y=G,D)J=J.add(H_(H,X[N]));else z=z.add(H_(P,X[U]))}return{p:z,f:J}},wNAFUnsafe(Z,X,Y,z=$.ZERO){let J=j_(Z,Q);for(let q=0;q<J.windows;q++){if(Y===Mt)break;let{nextN:W,offset:G,isZero:U,isNeg:D}=Pt(Y,q,J);if(Y=W,U)continue;else{let P=X[G];z=z.add(D?P.negate():P)}}return z},getPrecomputes(Z,X,Y){let z=R_.get(X);if(!z){if(z=this.precomputeWindow(X,Z),Z!==1)R_.set(X,Y(z))}return z},wNAFCached(Z,X,Y){let z=N_(Z);return this.wNAF(z,this.getPrecomputes(z,Z,Y),X)},wNAFCachedUnsafe(Z,X,Y,z){let J=N_(Z);if(J===1)return this.unsafeLadder(Z,X,z);return this.wNAFUnsafe(J,this.getPrecomputes(J,Z,Y),X,z)},setWindowSize(Z,X){Ht(X,Q),jt.set(Z,X),R_.delete(Z)}}}function Nt($,Q,Z,X){if(lH0(Z,$),iH0(X,Q),Z.length!==X.length)throw Error("arrays of points and scalars must have equal length");let Y=$.ZERO,z=ts(BigInt(Z.length)),J=z>12?z-3:z>4?z-2:z?2:1,q=Oq(J),W=Array(Number(q)+1).fill(Y),G=Math.floor((Q.BITS-1)/J)*J,U=Y;for(let D=G;D>=0;D-=J){W.fill(Y);for(let H=0;H<X.length;H++){let N=X[H],C=Number(N>>BigInt(D)&q);W[C]=W[C].add(Z[H])}let P=Y;for(let H=W.length-1,N=Y;H>0;H--)N=N.add(W[H]),P=P.add(N);if(U=U.add(P),D!==0)for(let H=0;H<J;H++)U=U.double()}return U}function L_($){return O_($.Fp),Dq($,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...M_($.n,$.nBitLength),...$,...{p:$.Fp.ORDER}})}var Mt,C_,R_,jt;var Ct=p(()=>{jN();MN();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Mt=BigInt(0),C_=BigInt(1);R_=new WeakMap,jt=new WeakMap});function Lt($){if($.lowS!==void 0)HG("lowS",$.lowS);if($.prehash!==void 0)HG("prehash",$.prehash)}function oH0($){let Q=L_($);Dq(Q,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:Z,Fp:X,a:Y}=Q;if(Z){if(!X.eql(Y,X.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof Z!=="object"||typeof Z.beta!=="bigint"||typeof Z.splitScalar!=="function")throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...Q})}function nH0($){let Q=oH0($),{Fp:Z}=Q,X=lO(Q.n,Q.nBitLength),Y=Q.toBytes||((C,L,B)=>{let E=L.toAffine();return cO(Uint8Array.from([4]),Z.toBytes(E.x),Z.toBytes(E.y))}),z=Q.fromBytes||((C)=>{let L=C.subarray(1),B=Z.fromBytes(L.subarray(0,Z.BYTES)),E=Z.fromBytes(L.subarray(Z.BYTES,2*Z.BYTES));return{x:B,y:E}});function J(C){let{a:L,b:B}=Q,E=Z.sqr(C),I=Z.mul(E,C);return Z.add(Z.add(I,Z.mul(C,L)),B)}if(!Z.eql(Z.sqr(Q.Gy),J(Q.Gx)))throw Error("bad generator point: equation left != right");function q(C){return DN(C,P9,Q.n)}function W(C){let{allowedPrivateKeyLengths:L,nByteLength:B,wrapPrivateKey:E,n:I}=Q;if(L&&typeof C!=="bigint"){if(Gq(C))C=jG(C);if(typeof C!=="string"||!L.includes(C.length))throw Error("invalid private key");C=C.padStart(B*2,"0")}let _;try{_=typeof C==="bigint"?C:MZ(p4("private key",C,B))}catch(f){throw Error("invalid private key, expected hex or "+B+" bytes, got "+typeof C)}if(E)_=e9(_,I);return Vq("private key",_,P9,I),_}function G(C){if(!(C instanceof P))throw Error("ProjectivePoint expected")}let U=W_((C,L)=>{let{px:B,py:E,pz:I}=C;if(Z.eql(I,Z.ONE))return{x:B,y:E};let _=C.is0();if(L==null)L=_?Z.ONE:Z.inv(I);let f=Z.mul(B,L),x=Z.mul(E,L),g=Z.mul(I,L);if(_)return{x:Z.ZERO,y:Z.ZERO};if(!Z.eql(g,Z.ONE))throw Error("invZ was invalid");return{x:f,y:x}}),D=W_((C)=>{if(C.is0()){if(Q.allowInfinityPoint&&!Z.is0(C.py))return;throw Error("bad point: ZERO")}let{x:L,y:B}=C.toAffine();if(!Z.isValid(L)||!Z.isValid(B))throw Error("bad point: x or y not FE");let E=Z.sqr(B),I=J(L);if(!Z.eql(E,I))throw Error("bad point: equation left != right");if(!C.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class P{constructor(C,L,B){if(C==null||!Z.isValid(C))throw Error("x required");if(L==null||!Z.isValid(L)||Z.is0(L))throw Error("y required");if(B==null||!Z.isValid(B))throw Error("z required");this.px=C,this.py=L,this.pz=B,Object.freeze(this)}static fromAffine(C){let{x:L,y:B}=C||{};if(!C||!Z.isValid(L)||!Z.isValid(B))throw Error("invalid affine point");if(C instanceof P)throw Error("projective point not allowed");let E=(I)=>Z.eql(I,Z.ZERO);if(E(L)&&E(B))return P.ZERO;return new P(L,B,Z.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){let L=D_(Z,C.map((B)=>B.pz));return C.map((B,E)=>B.toAffine(L[E])).map(P.fromAffine)}static fromHex(C){let L=P.fromAffine(z(p4("pointHex",C)));return L.assertValidity(),L}static fromPrivateKey(C){return P.BASE.multiply(W(C))}static msm(C,L){return Nt(P,X,C,L)}_setWindowSize(C){N.setWindowSize(this,C)}assertValidity(){D(this)}hasEvenY(){let{y:C}=this.toAffine();if(Z.isOdd)return!Z.isOdd(C);throw Error("Field doesn't support isOdd")}equals(C){G(C);let{px:L,py:B,pz:E}=this,{px:I,py:_,pz:f}=C,x=Z.eql(Z.mul(L,f),Z.mul(I,E)),g=Z.eql(Z.mul(B,f),Z.mul(_,E));return x&&g}negate(){return new P(this.px,Z.neg(this.py),this.pz)}double(){let{a:C,b:L}=Q,B=Z.mul(L,Tt),{px:E,py:I,pz:_}=this,f=Z.ZERO,x=Z.ZERO,g=Z.ZERO,h=Z.mul(E,E),v=Z.mul(I,I),b=Z.mul(_,_),m=Z.mul(E,I);return m=Z.add(m,m),g=Z.mul(E,_),g=Z.add(g,g),f=Z.mul(C,g),x=Z.mul(B,b),x=Z.add(f,x),f=Z.sub(v,x),x=Z.add(v,x),x=Z.mul(f,x),f=Z.mul(m,f),g=Z.mul(B,g),b=Z.mul(C,b),m=Z.sub(h,b),m=Z.mul(C,m),m=Z.add(m,g),g=Z.add(h,h),h=Z.add(g,h),h=Z.add(h,b),h=Z.mul(h,m),x=Z.add(x,h),b=Z.mul(I,_),b=Z.add(b,b),h=Z.mul(b,m),f=Z.sub(f,h),g=Z.mul(b,v),g=Z.add(g,g),g=Z.add(g,g),new P(f,x,g)}add(C){G(C);let{px:L,py:B,pz:E}=this,{px:I,py:_,pz:f}=C,x=Z.ZERO,g=Z.ZERO,h=Z.ZERO,v=Q.a,b=Z.mul(Q.b,Tt),m=Z.mul(L,I),K=Z.mul(B,_),M=Z.mul(E,f),j=Z.add(L,B),O=Z.add(I,_);j=Z.mul(j,O),O=Z.add(m,K),j=Z.sub(j,O),O=Z.add(L,E);let R=Z.add(I,f);return O=Z.mul(O,R),R=Z.add(m,M),O=Z.sub(O,R),R=Z.add(B,E),x=Z.add(_,f),R=Z.mul(R,x),x=Z.add(K,M),R=Z.sub(R,x),h=Z.mul(v,O),x=Z.mul(b,M),h=Z.add(x,h),x=Z.sub(K,h),h=Z.add(K,h),g=Z.mul(x,h),K=Z.add(m,m),K=Z.add(K,m),M=Z.mul(v,M),O=Z.mul(b,O),K=Z.add(K,M),M=Z.sub(m,M),M=Z.mul(v,M),O=Z.add(O,M),m=Z.mul(K,O),g=Z.add(g,m),m=Z.mul(R,O),x=Z.mul(j,x),x=Z.sub(x,m),m=Z.mul(j,K),h=Z.mul(R,h),h=Z.add(h,m),new P(x,g,h)}subtract(C){return this.add(C.negate())}is0(){return this.equals(P.ZERO)}wNAF(C){return N.wNAFCached(this,C,P.normalizeZ)}multiplyUnsafe(C){let{endo:L,n:B}=Q;Vq("scalar",C,jZ,B);let E=P.ZERO;if(C===jZ)return E;if(this.is0()||C===P9)return this;if(!L||N.hasPrecomputes(this))return N.wNAFCachedUnsafe(this,C,P.normalizeZ);let{k1neg:I,k1:_,k2neg:f,k2:x}=L.splitScalar(C),g=E,h=E,v=this;while(_>jZ||x>jZ){if(_&P9)g=g.add(v);if(x&P9)h=h.add(v);v=v.double(),_>>=P9,x>>=P9}if(I)g=g.negate();if(f)h=h.negate();return h=new P(Z.mul(h.px,L.beta),h.py,h.pz),g.add(h)}multiply(C){let{endo:L,n:B}=Q;Vq("scalar",C,P9,B);let E,I;if(L){let{k1neg:_,k1:f,k2neg:x,k2:g}=L.splitScalar(C),{p:h,f:v}=this.wNAF(f),{p:b,f:m}=this.wNAF(g);h=N.constTimeNegate(_,h),b=N.constTimeNegate(x,b),b=new P(Z.mul(b.px,L.beta),b.py,b.pz),E=h.add(b),I=v.add(m)}else{let{p:_,f}=this.wNAF(C);E=_,I=f}return P.normalizeZ([E,I])[0]}multiplyAndAddUnsafe(C,L,B){let E=P.BASE,I=(f,x)=>x===jZ||x===P9||!f.equals(E)?f.multiplyUnsafe(x):f.multiply(x),_=I(this,L).add(I(C,B));return _.is0()?void 0:_}toAffine(C){return U(this,C)}isTorsionFree(){let{h:C,isTorsionFree:L}=Q;if(C===P9)return!0;if(L)return L(P,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:C,clearCofactor:L}=Q;if(C===P9)return this;if(L)return L(P,this);return this.multiplyUnsafe(Q.h)}toRawBytes(C=!0){return HG("isCompressed",C),this.assertValidity(),Y(P,this,C)}toHex(C=!0){return HG("isCompressed",C),jG(this.toRawBytes(C))}}P.BASE=new P(Q.Gx,Q.Gy,Z.ONE),P.ZERO=new P(Z.ZERO,Z.ONE,Z.ZERO);let H=Q.nBitLength,N=Rt(P,Q.endo?Math.ceil(H/2):H);return{CURVE:Q,ProjectivePoint:P,normPrivateKeyToScalar:W,weierstrassEquation:J,isWithinCurveOrder:q}}function rH0($){let Q=L_($);return Dq(Q,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...Q})}function At($){let Q=rH0($),{Fp:Z,n:X}=Q,Y=Z.BYTES+1,z=2*Z.BYTES+1;function J(j){return e9(j,X)}function q(j){return HN(j,X)}let{ProjectivePoint:W,normPrivateKeyToScalar:G,weierstrassEquation:U,isWithinCurveOrder:D}=nH0({...Q,toBytes(j,O,R){let F=O.toAffine(),A=Z.toBytes(F.x),T=cO;if(HG("isCompressed",R),R)return T(Uint8Array.from([O.hasEvenY()?2:3]),A);else return T(Uint8Array.from([4]),A,Z.toBytes(F.y))},fromBytes(j){let O=j.length,R=j[0],F=j.subarray(1);if(O===Y&&(R===2||R===3)){let A=MZ(F);if(!DN(A,P9,Z.ORDER))throw Error("Point is not on curve");let T=U(A),V;try{V=Z.sqrt(T)}catch(S){let y=S instanceof Error?": "+S.message:"";throw Error("Point is not on curve"+y)}let w=(V&P9)===P9;if((R&1)===1!==w)V=Z.neg(V);return{x:A,y:V}}else if(O===z&&R===4){let A=Z.fromBytes(F.subarray(0,Z.BYTES)),T=Z.fromBytes(F.subarray(Z.BYTES,2*Z.BYTES));return{x:A,y:T}}else{let A=Y,T=z;throw Error("invalid Point, expected length of "+A+", or uncompressed "+T+", got "+O)}}}),P=(j)=>jG(Uq(j,Q.nByteLength));function H(j){let O=X>>P9;return j>O}function N(j){return H(j)?J(-j):j}let C=(j,O,R)=>MZ(j.slice(O,R));class L{constructor(j,O,R){if(Vq("r",j,P9,X),Vq("s",O,P9,X),this.r=j,this.s=O,R!=null)this.recovery=R;Object.freeze(this)}static fromCompact(j){let O=Q.nByteLength;return j=p4("compactSignature",j,O*2),new L(C(j,0,O),C(j,O,2*O))}static fromDER(j){let{r:O,s:R}=HZ.toSig(p4("DER",j));return new L(O,R)}assertValidity(){}addRecoveryBit(j){return new L(this.r,this.s,j)}recoverPublicKey(j){let{r:O,s:R,recovery:F}=this,A=x(p4("msgHash",j));if(F==null||![0,1,2,3].includes(F))throw Error("recovery id invalid");let T=F===2||F===3?O+Q.n:O;if(T>=Z.ORDER)throw Error("recovery id 2 or 3 invalid");let V=(F&1)===0?"02":"03",w=W.fromHex(V+P(T)),k=q(T),S=J(-A*k),y=J(R*k),u=W.BASE.multiplyAndAddUnsafe(w,S,y);if(!u)throw Error("point at infinify");return u.assertValidity(),u}hasHighS(){return H(this.s)}normalizeS(){return this.hasHighS()?new L(this.r,J(-this.s),this.recovery):this}toDERRawBytes(){return uO(this.toDERHex())}toDERHex(){return HZ.hexFromSig(this)}toCompactRawBytes(){return uO(this.toCompactHex())}toCompactHex(){return P(this.r)+P(this.s)}}let B={isValidPrivateKey(j){try{return G(j),!0}catch(O){return!1}},normPrivateKeyToScalar:G,randomPrivateKey:()=>{let j=P_(Q.n);return Dt(Q.randomBytes(j),Q.n)},precompute(j=8,O=W.BASE){return O._setWindowSize(j),O.multiply(BigInt(3)),O}};function E(j,O=!0){return W.fromPrivateKey(j).toRawBytes(O)}function I(j){let O=Gq(j),R=typeof j==="string",F=(O||R)&&j.length;if(O)return F===Y||F===z;if(R)return F===2*Y||F===2*z;if(j instanceof W)return!0;return!1}function _(j,O,R=!0){if(I(j))throw Error("first arg must be private key");if(!I(O))throw Error("second arg must be public key");return W.fromHex(O).multiply(G(j)).toRawBytes(R)}let f=Q.bits2int||function(j){if(j.length>8192)throw Error("input is too large");let O=MZ(j),R=j.length*8-Q.nBitLength;return R>0?O>>BigInt(R):O},x=Q.bits2int_modN||function(j){return J(f(j))},g=Oq(Q.nBitLength);function h(j){return Vq("num < 2^"+Q.nBitLength,j,jZ,g),Uq(j,Q.nByteLength)}function v(j,O,R=b){if(["recovered","canonical"].some((z0)=>(z0 in R)))throw Error("sign() legacy options not supported");let{hash:F,randomBytes:A}=Q,{lowS:T,prehash:V,extraEntropy:w}=R;if(T==null)T=!0;if(j=p4("msgHash",j),Lt(R),V)j=p4("prehashed msgHash",F(j));let k=x(j),S=G(O),y=[h(S),h(k)];if(w!=null&&w!==!1){let z0=w===!0?A(Z.BYTES):w;y.push(p4("extraEntropy",z0))}let u=cO(...y),c=k;function o(z0){let e=f(z0);if(!D(e))return;let s=q(e),J0=W.BASE.multiply(e).toAffine(),t=J(J0.x);if(t===jZ)return;let Z0=J(s*J(c+t*S));if(Z0===jZ)return;let N0=(J0.x===t?0:2)|Number(J0.y&P9),i=Z0;if(T&&H(Z0))i=N(Z0),N0^=1;return new L(t,i,N0)}return{seed:u,k2sig:o}}let b={lowS:Q.lowS,prehash:!1},m={lowS:Q.lowS,prehash:!1};function K(j,O,R=b){let{seed:F,k2sig:A}=v(j,O,R),T=Q;return es(T.hash.outputLen,T.nByteLength,T.hmac)(F,A)}W.BASE._setWindowSize(8);function M(j,O,R,F=m){let A=j;O=p4("msgHash",O),R=p4("publicKey",R);let{lowS:T,prehash:V,format:w}=F;if(Lt(F),"strict"in F)throw Error("options.strict was renamed to lowS");if(w!==void 0&&w!=="compact"&&w!=="der")throw Error("format must be compact or der");let k=typeof A==="string"||Gq(A),S=!k&&!w&&typeof A==="object"&&A!==null&&typeof A.r==="bigint"&&typeof A.s==="bigint";if(!k&&!S)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");let y=void 0,u;try{if(S)y=new L(A.r,A.s);if(k){try{if(w!=="compact")y=L.fromDER(A)}catch(N0){if(!(N0 instanceof HZ.Err))throw N0}if(!y&&w!=="der")y=L.fromCompact(A)}u=W.fromHex(R)}catch(N0){return!1}if(!y)return!1;if(T&&y.hasHighS())return!1;if(V)O=Q.hash(O);let{r:c,s:o}=y,z0=x(O),e=q(o),s=J(z0*e),J0=J(c*e),t=W.BASE.multiplyAndAddUnsafe(u,s,J0)?.toAffine();if(!t)return!1;return J(t.x)===c}return{CURVE:Q,getPublicKey:E,getSharedSecret:_,sign:K,verify:M,ProjectivePoint:W,Signature:L,utils:B}}var Ft,HZ,jZ,P9,yl0,Tt,gl0;var wt=p(()=>{Ct();jN();MN();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Ft=class Ft extends Error{constructor($=""){super($)}};HZ={Err:Ft,_tlv:{encode:($,Q)=>{let{Err:Z}=HZ;if($<0||$>256)throw new Z("tlv.encode: wrong tag");if(Q.length&1)throw new Z("tlv.encode: unpadded data");let X=Q.length/2,Y=pO(X);if(Y.length/2&128)throw new Z("tlv.encode: long form length too big");let z=X>127?pO(Y.length/2|128):"";return pO($)+z+Y+Q},decode($,Q){let{Err:Z}=HZ,X=0;if($<0||$>256)throw new Z("tlv.encode: wrong tag");if(Q.length<2||Q[X++]!==$)throw new Z("tlv.decode: wrong tlv");let Y=Q[X++],z=!!(Y&128),J=0;if(!z)J=Y;else{let W=Y&127;if(!W)throw new Z("tlv.decode(long): indefinite length not supported");if(W>4)throw new Z("tlv.decode(long): byte length is too big");let G=Q.subarray(X,X+W);if(G.length!==W)throw new Z("tlv.decode: length bytes not complete");if(G[0]===0)throw new Z("tlv.decode(long): zero leftmost byte");for(let U of G)J=J<<8|U;if(X+=W,J<128)throw new Z("tlv.decode(long): not minimal encoding")}let q=Q.subarray(X,X+J);if(q.length!==J)throw new Z("tlv.decode: wrong value length");return{v:q,l:Q.subarray(X+J)}}},_int:{encode($){let{Err:Q}=HZ;if($<jZ)throw new Q("integer: negative integers are not allowed");let Z=pO($);if(Number.parseInt(Z[0],16)&8)Z="00"+Z;if(Z.length&1)throw new Q("unexpected DER parsing assertion: unpadded hex");return Z},decode($){let{Err:Q}=HZ;if($[0]&128)throw new Q("invalid signature integer: negative");if($[0]===0&&!($[1]&128))throw new Q("invalid signature integer: unnecessary leading zero");return MZ($)}},toSig($){let{Err:Q,_int:Z,_tlv:X}=HZ,Y=p4("signature",$),{v:z,l:J}=X.decode(48,Y);if(J.length)throw new Q("invalid signature: left bytes after parsing");let{v:q,l:W}=X.decode(2,z),{v:G,l:U}=X.decode(2,W);if(U.length)throw new Q("invalid signature: left bytes after parsing");return{r:Z.decode(q),s:Z.decode(G)}},hexFromSig($){let{_tlv:Q,_int:Z}=HZ,X=Q.encode(2,Z.encode($.r)),Y=Q.encode(2,Z.encode($.s)),z=X+Y;return Q.encode(48,z)}},jZ=BigInt(0),P9=BigInt(1),yl0=BigInt(2),Tt=BigInt(3),gl0=BigInt(4)});function aH0($){return{hash:$,hmac:(Q,...Z)=>U_($,Q,vs(...Z)),randomBytes:ys}}function Bt($,Q){let Z=(X)=>At({...$,...aH0(X)});return{...Z(Q),create:Z}}var Et=p(()=>{Kt();RY();wt();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */});function tH0($){let Q=St,Z=BigInt(3),X=BigInt(6),Y=BigInt(11),z=BigInt(22),J=BigInt(23),q=BigInt(44),W=BigInt(88),G=$*$*$%Q,U=G*G*$%Q,D=u4(U,Z,Q)*U%Q,P=u4(D,Z,Q)*U%Q,H=u4(P,T_,Q)*G%Q,N=u4(H,Y,Q)*H%Q,C=u4(N,z,Q)*N%Q,L=u4(C,q,Q)*C%Q,B=u4(L,W,Q)*L%Q,E=u4(B,q,Q)*C%Q,I=u4(E,Z,Q)*U%Q,_=u4(I,J,Q)*N%Q,f=u4(_,X,Q)*G%Q,x=u4(f,T_,Q);if(!F_.eql(F_.sqr(x),$))throw Error("Cannot find square root");return x}var St,It,sH0,T_,_t=($,Q)=>($+Q/T_)/Q,F_,RN,ol0,nl0;var ft=p(()=>{Wt();Et();jN();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */St=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),It=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),sH0=BigInt(1),T_=BigInt(2);F_=lO(St,void 0,void 0,{sqrt:tH0}),RN=Bt({a:BigInt(0),b:BigInt(7),Fp:F_,n:It,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:($)=>{let Q=It,Z=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),X=-sH0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),Y=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),z=Z,J=BigInt("0x100000000000000000000000000000000"),q=_t(z*$,Q),W=_t(-X*$,Q),G=e9($-q*Z-W*Y,Q),U=e9(-q*X-W*z,Q),D=G>J,P=U>J;if(D)G=Q-G;if(P)U=Q-U;if(G>J||U>J)throw Error("splitScalar: Endomorphism failed, k="+$);return{k1neg:D,k1:G,k2neg:P,k2:U}}}},qt),ol0=BigInt(0),nl0=RN.ProjectivePoint});var kt=p(()=>{ft()});function j6($,Q){return`${Q} (${$.errorStr()})`}function NN($){let{v:Q,r:Z,s:X}=$;if(Q===void 0||Z===void 0||X===void 0)return!1;else return!0}function CN($){if($.cache.dataFee&&$.cache.dataFee.hardfork===$.common.hardfork())return $.cache.dataFee.value;let Q=$.common.param("txDataZeroGas"),Z=$.common.param("txDataNonZeroGas"),X=Q0;for(let Y=0;Y<$.data.length;Y++)$.data[Y]===0?X+=Q:X+=Z;if(($.to===void 0||$.to===null)&&$.common.isActivatedEIP(3860)){let Y=BigInt(Math.ceil($.data.length/32)),z=$.common.param("initCodeWordGas")*Y;X+=z}if(Object.isFrozen($))$.cache.dataFee={value:X,hardfork:$.common.hardfork()};return X}function k$($){let Q=$.common.param("txGas"),Z=$.getDataGas();if(Q)Z+=Q;let X=!1;try{X=$.toCreationAddress()}catch{X=!1}if($.common.gteHardfork("homestead")&&X){let Y=$.common.param("txCreationGas");if(Y)Z+=Y}return Z}function NG($){return $.to===void 0||$.to.bytes.length===0}function x$($){var Q;if(!$.isSigned()){let X=j6($,"Cannot call hash method if transaction is not signed");throw n(X)}let Z=$.common.customCrypto.keccak256??RG;if(Object.isFrozen($))return(Q=$.cache).hash??(Q.hash=Z($.serialize())),$.cache.hash;return Z($.serialize())}function RZ($){let{s:Q}=$;if($.common.gteHardfork("homestead")&&Q!==void 0&&Q>CO){let Z=j6($,"Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw n(Z)}}function b$($){if($.cache.senderPubKey!==void 0)return $.cache.senderPubKey;let Q=$.getMessageToVerifySignature(),{v:Z,r:X,s:Y}=$;RZ($);try{let J=($.common.customCrypto.ecrecover??VY)(Q,Z,Y1(X),Y1(Y),$.supports(_8.EIP155ReplayProtection)?$.common.chainId():void 0);if(Object.isFrozen($))$.cache.senderPubKey=J;return J}catch{let z=j6($,"Invalid Signature");throw n(z)}}function LN($,Q){if(Q!==void 0&&Q>$)throw n("Tx cannot pay baseFee");if(Q===void 0)return $;return $-Q}function v$($){let Q=[];if($.isSigned()&&!$.verifySignature())Q.push("Invalid Signature");let Z=$.getIntrinsicGas();if($.common.isActivatedEIP(7623)){let X=0;for(let z=0;z<$.data.length;z++)X+=$.data[z]===0?1:4;let Y=$.common.param("txGas")+$.common.param("totalCostFloorPerToken")*BigInt(X);Z=TR(Z,Y)}if(Z>$.gasLimit)Q.push(`gasLimit is too low. The gasLimit is lower than the minimum gas limit of ${$.getIntrinsicGas()}, the gas limit is: ${$.gasLimit}`);return Q}function y$($){return $.getValidationErrors().length===0}function g$($){try{let Q=$.getSenderPublicKey();return g7(Q).length!==0}catch{return!1}}function h$($){return new Q6($q($.getSenderPublicKey()))}function m$($,Q,Z=!0){if(Q.length!==32){let U=j6($,"Private key must be 32 bytes in length.");throw n(U)}let X=!1;if($.type===D5.Legacy&&$.common.gteHardfork("spuriousDragon")&&!$.supports(_8.EIP155ReplayProtection))$.activeCapabilities.push(_8.EIP155ReplayProtection),X=!0;let Y=$.getHashedMessageToSign(),z=$.common.customCrypto?.ecsign??RN.sign,{recovery:J,r:q,s:W}=z(Y,Q,{extraEntropy:Z}),G=$.addSignature(BigInt(J),q,W,!0);if(X){let U=$.activeCapabilities.indexOf(_8.EIP155ReplayProtection);if(U>-1)$.activeCapabilities.splice(U,1)}return G}function p$($){let Q="";try{Q=$.isSigned()?H0($.hash()):"not available (unsigned)"}catch{Q="error"}let Z="";try{Z=$.isSigned().toString()}catch{Q="error"}let X="";try{X=$.common.hardfork()}catch{X="error"}let Y=`tx type=${$.type} hash=${Q} nonce=${$.nonce} value=${$.value} `;return Y+=`signed=${Z} hf=${X}`,Y}var CY=p(()=>{Z1();PN();g4();kt()});function LY($){return($.common.customCrypto.keccak256??RG)($.getMessageToSign())}function J4($,Q){return d1(E$($.type),I1.encode(Q??$.raw()))}function TY($){let{v:Q}=$;if(Q!==void 0&&Q!==Q0&&Q!==A1){let Z=j6($,"The y-parity of the transaction should either be 0 or 1");throw n(Z)}}var iO=p(()=>{j8();Z1();PN();B3();CY()});function FY($){let Q=BigInt(eH0($));return CN($)+Q}function eH0($){let{common:Q,accessList:Z}=$,X=Q.param("accessListStorageKeyGas"),Y=Q.param("accessListAddressGas"),z=Z.reduce((q,W)=>q+W[1].length,0);return Z.length*Number(Y)+z*Number(X)}function AY($){let Q=$.accessList;for(let Z of Q){if(Z.length!==2)throw n("Invalid EIP-2930 transaction: access list item should have 2 elements");let[X,Y]=Z;if(X.length!==20)throw n("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let z of Y)if(z.length!==32)throw n("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}}var LG=p(()=>{CY();Z1()});function wY($){return $.map(([Q,Z])=>({address:H0(b1(Q,20)),storageKeys:Z.map((X)=>H0(b1(X,32)))}))}function BY($){return $.map((Q)=>[Q1(Q.address),Q.storageKeys.map((Z)=>Q1(Z))])}var TG=p(()=>{Z1()});class FN{constructor($,Q={}){this.type=D5.FeeMarketEIP1559,this.cache={},this.activeCapabilities=[],I$(this,{...$,type:D5.FeeMarketEIP1559},Q);let{chainId:Z,accessList:X,maxFeePerGas:Y,maxPriorityFeePerGas:z}=$,J=X??[];if(Z!==void 0&&L0(F1(Z))!==this.common.chainId())throw n(`Common chain ID ${this.common.chainId} not matching the derived chain ID ${Z}`);if(this.chainId=this.common.chainId(),!this.common.isActivatedEIP(1559))throw n("EIP-1559 not enabled on Common");if(this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]),this.accessList=HY(J)?BY(J):J,AY(this),this.maxFeePerGas=L0(F1(Y)),this.maxPriorityFeePerGas=L0(F1(z)),h4({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),this.gasLimit*this.maxFeePerGas>e8){let W=j6(this,"gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw n(W)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){let W=j6(this,"maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw n(W)}if(TY(this),RZ(this),Q?.freeze??!0)Object.freeze(this)}supports($){return this.activeCapabilities.includes($)}getDataGas(){return FY(this)}getEffectivePriorityFee($){return PG(this,$)}getUpfrontCost($=Q0){return MG(this,$)}getIntrinsicGas(){return k$(this)}toCreationAddress(){return NG(this)}raw(){return[Y1(this.chainId),Y1(this.nonce),Y1(this.maxPriorityFeePerGas),Y1(this.maxFeePerGas),Y1(this.gasLimit),this.to!==void 0?this.to.bytes:new Uint8Array(0),Y1(this.value),this.data,this.accessList,this.v!==void 0?Y1(this.v):new Uint8Array(0),this.r!==void 0?Y1(this.r):new Uint8Array(0),this.s!==void 0?Y1(this.s):new Uint8Array(0)]}serialize(){return J4(this)}getMessageToSign(){return J4(this,this.raw().slice(0,9))}getHashedMessageToSign(){return LY(this)}hash(){return x$(this)}getMessageToVerifySignature(){return this.getHashedMessageToSign()}getSenderPublicKey(){return b$(this)}addSignature($,Q,Z){Q=F1(Q),Z=F1(Z);let X={...this.txOptions,common:this.common};return AN({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:$,r:L0(Q),s:L0(Z)},X)}toJSON(){let $=wY(this.accessList);return{..._$(this),chainId:c1(this.chainId),maxPriorityFeePerGas:c1(this.maxPriorityFeePerGas),maxFeePerGas:c1(this.maxFeePerGas),accessList:$}}getValidationErrors(){return v$(this)}isValid(){return y$(this)}verifySignature(){return g$(this)}getSenderAddress(){return h$(this)}sign($,Q=!1){return m$(this,$,Q)}isSigned(){let{v:$,r:Q,s:Z}=this;if($===void 0||Q===void 0||Z===void 0)return!1;else return!0}errorStr(){let $=p$(this);return $+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,$}}var xt=p(()=>{Z1();KN();iO();LG();CY();g4();B3();wN();TG()});function AN($,Q={}){return new FN($,Q)}function $j0($,Q={}){if($.length!==9&&$.length!==12)throw n("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");let[Z,X,Y,z,J,q,W,G,U,D,P,H]=$;return m4({chainId:Z,v:D}),h7({nonce:X,maxPriorityFeePerGas:Y,maxFeePerGas:z,gasLimit:J,value:W,v:D,r:P,s:H}),new FN({chainId:L0(Z),nonce:X,maxPriorityFeePerGas:Y,maxFeePerGas:z,gasLimit:J,to:q,value:W,data:G,accessList:U??[],v:D!==void 0?L0(D):void 0,r:P,s:H},Q)}function bt($,Q={}){if(X1($.subarray(0,1),E$(D5.FeeMarketEIP1559))===!1)throw n(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: ${D5.FeeMarketEIP1559}, received: ${H0($.subarray(0,1))}`);let Z=I1.decode($.subarray(1));if(!Array.isArray(Z))throw n("Invalid serialized tx input: must be array");return $j0(Z,Q)}var wN=p(()=>{j8();Z1();g4();B3();xt()});var vt=p(()=>{wN()});class BN{constructor($,Q={}){this.type=D5.AccessListEIP2930,this.cache={},this.activeCapabilities=[],I$(this,{...$,type:D5.AccessListEIP2930},Q);let{chainId:Z,accessList:X,gasPrice:Y}=$,z=X??[];if(Z!==void 0&&L0(F1(Z))!==this.common.chainId())throw n(`Common chain ID ${this.common.chainId} not matching the derived chain ID ${Z}`);if(this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw n("EIP-2930 not enabled on Common");if(this.activeCapabilities=this.activeCapabilities.concat([2718,2930]),this.accessList=HY(z)?BY(z):z,AY(this),this.gasPrice=L0(F1(Y)),h4({gasPrice:this.gasPrice}),this.gasPrice*this.gasLimit>e8){let q=j6(this,"gasLimit * gasPrice cannot exceed MAX_INTEGER");throw n(q)}if(TY(this),RZ(this),Q?.freeze??!0)Object.freeze(this)}supports($){return this.activeCapabilities.includes($)}getEffectivePriorityFee($){return LN(this.gasPrice,$)}getDataGas(){return FY(this)}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}getIntrinsicGas(){return k$(this)}toCreationAddress(){return NG(this)}raw(){return[Y1(this.chainId),Y1(this.nonce),Y1(this.gasPrice),Y1(this.gasLimit),this.to!==void 0?this.to.bytes:new Uint8Array(0),Y1(this.value),this.data,this.accessList,this.v!==void 0?Y1(this.v):new Uint8Array(0),this.r!==void 0?Y1(this.r):new Uint8Array(0),this.s!==void 0?Y1(this.s):new Uint8Array(0)]}serialize(){return J4(this)}getMessageToSign(){return J4(this,this.raw().slice(0,8))}getHashedMessageToSign(){return LY(this)}hash(){return x$(this)}getMessageToVerifySignature(){return this.getHashedMessageToSign()}getSenderPublicKey(){return b$(this)}addSignature($,Q,Z){Q=F1(Q),Z=F1(Z);let X={...this.txOptions,common:this.common};return EN({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:$,r:L0(Q),s:L0(Z)},X)}toJSON(){let $=wY(this.accessList);return{..._$(this),chainId:c1(this.chainId),gasPrice:c1(this.gasPrice),accessList:$}}getValidationErrors(){return v$(this)}isValid(){return y$(this)}verifySignature(){return g$(this)}getSenderAddress(){return h$(this)}sign($,Q=!1){return m$(this,$,Q)}isSigned(){return NN(this)}errorStr(){let $=p$(this);return $+=` gasPrice=${this.gasPrice} accessListCount=${this.accessList?.length??0}`,$}}var yt=p(()=>{Z1();iO();LG();CY();g4();B3();IN();TG()});function EN($,Q={}){return new BN($,Q)}function Qj0($,Q={}){if($.length!==8&&$.length!==11)throw n("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");let[Z,X,Y,z,J,q,W,G,U,D,P]=$;m4({chainId:Z,v:U}),h7({nonce:X,gasPrice:Y,gasLimit:z,value:q,v:U,r:D,s:P});let H=[];return new BN({chainId:L0(Z),nonce:X,gasPrice:Y,gasLimit:z,to:J,value:q,data:W,accessList:G??H,v:U!==void 0?L0(U):void 0,r:D,s:P},Q)}function gt($,Q={}){if(X1($.subarray(0,1),E$(D5.AccessListEIP2930))===!1)throw n(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: ${D5.AccessListEIP2930}, received: ${H0($.subarray(0,1))}`);let Z=I1.decode(Uint8Array.from($.subarray(1)));if(!Array.isArray(Z))throw n("Invalid serialized tx input: must be array");return Qj0(Z,Q)}var IN=p(()=>{j8();Z1();g4();B3();yt()});var ht=p(()=>{IN()});class EY{constructor($,Q={}){this.type=D5.BlobEIP4844,this.cache={},this.activeCapabilities=[],I$(this,{...$,type:D5.BlobEIP4844},Q);let{chainId:Z,accessList:X,maxFeePerGas:Y,maxPriorityFeePerGas:z,maxFeePerBlobGas:J}=$,q=X??[];if(Z!==void 0&&L0(F1(Z))!==this.common.chainId())throw n(`Common chain ID ${this.common.chainId} not matching the derived chain ID ${Z}`);if(this.chainId=this.common.chainId(),!this.common.isActivatedEIP(1559))throw n("EIP-1559 not enabled on Common");if(!this.common.isActivatedEIP(4844))throw n("EIP-4844 not enabled on Common");if(this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]),this.accessList=HY(q)?BY(q):q,AY(this),this.maxFeePerGas=L0(F1(Y)),this.maxPriorityFeePerGas=L0(F1(z)),h4({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),m4($),this.gasLimit*this.maxFeePerGas>e8){let U=j6(this,"gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw n(U)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){let U=j6(this,"maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw n(U)}this.maxFeePerBlobGas=L0(F1((J??"")===""?"0x":J)),this.blobVersionedHashes=($.blobVersionedHashes??[]).map((U)=>X5(U,l1.PrefixedHexString)),TY(this),RZ(this);for(let U of this.blobVersionedHashes){if(U.length!==66){let D=j6(this,"versioned hash is invalid length");throw n(D)}if(BigInt(parseInt(U.slice(2,4)))!==this.common.param("blobCommitmentVersionKzg")){let D=j6(this,"versioned hash does not start with KZG commitment version");throw n(D)}}if(this.common.isActivatedEIP(7594)){let U=this.common.param("maxBlobsPerTx");if(this.blobVersionedHashes.length>U){let D=j6(this,`tx can contain at most ${U} blobs (EIP-7594)`);throw n(D)}}let W=this.common.param("maxBlobGasPerBlock")/this.common.param("blobGasPerBlob");if(this.blobVersionedHashes.length>W){let U=j6(this,`tx can contain at most ${W} blobs (maxBlobGasPerBlock/blobGasPerBlob)`);throw n(U)}else if(this.blobVersionedHashes.length===0){let U=j6(this,"tx should contain at least one blob");throw n(U)}if(this.to===void 0){let U=j6(this,'tx should have a "to" field and cannot be used to create contracts');throw n(U)}if(this.networkWrapperVersion=$.networkWrapperVersion!==void 0?KY(F1($.networkWrapperVersion)):void 0,this.networkWrapperVersion!==void 0)switch(this.networkWrapperVersion){case nO.EIP7594:if(!this.common.isActivatedEIP(7594))throw n("EIP-7594 not enabled on Common for EIP-7594 network wrapper version");break;case nO.EIP4844:if(this.common.isActivatedEIP(7594))throw n("EIP-7594 is active on Common for EIP-4844 network wrapper version");break;default:throw n(`Invalid networkWrapperVersion=${this.networkWrapperVersion}`)}if(this.blobs=$.blobs?.map((U)=>X5(U,l1.PrefixedHexString)),this.networkWrapperVersion===void 0&&this.blobs!==void 0)if(this.common.isActivatedEIP(7594))this.networkWrapperVersion=1;else this.networkWrapperVersion=0;if(this.networkWrapperVersion!==void 0&&this.blobs===void 0){let U=j6(this,"tx is not allowed to be in network wrapper format if no blob list is provided");throw n(U)}if(this.kzgCommitments=$.kzgCommitments?.map((U)=>X5(U,l1.PrefixedHexString)),this.kzgProofs=$.kzgProofs?.map((U)=>X5(U,l1.PrefixedHexString)),this.blobs!==void 0){if(this.kzgCommitments===void 0){let U=j6(this,"kzgCommitments are mandatory if blobs are provided");throw n(U)}if(this.kzgProofs===void 0){let U=j6(this,"kzgProofs are mandatory if blobs are provided");throw n(U)}}if(Q?.freeze??!0)Object.freeze(this)}supports($){return this.activeCapabilities.includes($)}getEffectivePriorityFee($){return PG(this,$)}getDataGas(){return FY(this)}getUpfrontCost($=Q0){return MG(this,$)}toCreationAddress(){throw n("Blob4844Tx cannot create contracts")}getIntrinsicGas(){return k$(this)}raw(){return[Y1(this.chainId),Y1(this.nonce),Y1(this.maxPriorityFeePerGas),Y1(this.maxFeePerGas),Y1(this.gasLimit),this.to!==void 0?this.to.bytes:new Uint8Array(0),Y1(this.value),this.data,this.accessList,Y1(this.maxFeePerBlobGas),this.blobVersionedHashes.map(($)=>Q1($)),this.v!==void 0?Y1(this.v):new Uint8Array(0),this.r!==void 0?Y1(this.r):new Uint8Array(0),this.s!==void 0?Y1(this.s):new Uint8Array(0)]}serialize(){return J4(this)}serializeNetworkWrapper(){if(this.networkWrapperVersion===void 0||this.blobs===void 0||this.kzgCommitments===void 0||this.kzgProofs===void 0)throw n("cannot serialize network wrapper without networkWrapperVersion, blobs, KZG commitments and KZG proofs provided");return this.networkWrapperVersion===nO.EIP4844?J4(this,[this.raw(),this.blobs,this.kzgCommitments,this.kzgProofs]):J4(this,[this.raw(),sz(this.networkWrapperVersion),this.blobs,this.kzgCommitments,this.kzgProofs])}getMessageToSign(){return J4(this,this.raw().slice(0,11))}getHashedMessageToSign(){return LY(this)}hash(){return x$(this)}getMessageToVerifySignature(){return this.getHashedMessageToSign()}getSenderPublicKey(){return b$(this)}toJSON(){let $=wY(this.accessList);return{..._$(this),chainId:c1(this.chainId),maxPriorityFeePerGas:c1(this.maxPriorityFeePerGas),maxFeePerGas:c1(this.maxFeePerGas),accessList:$,maxFeePerBlobGas:c1(this.maxFeePerBlobGas),blobVersionedHashes:this.blobVersionedHashes}}addSignature($,Q,Z){Q=F1(Q),Z=F1(Z);let X={...this.txOptions,common:this.common};return _N({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:$,r:L0(Q),s:L0(Z),maxFeePerBlobGas:this.maxFeePerBlobGas,networkWrapperVersion:this.networkWrapperVersion,blobVersionedHashes:this.blobVersionedHashes,blobs:this.blobs,kzgCommitments:this.kzgCommitments,kzgProofs:this.kzgProofs},X)}getValidationErrors(){return v$(this)}isValid(){return y$(this)}verifySignature(){return g$(this)}getSenderAddress(){return h$(this)}sign($,Q=!1){return m$(this,$,Q)}isSigned(){let{v:$,r:Q,s:Z}=this;if($===void 0||Q===void 0||Z===void 0)return!1;else return!0}errorStr(){let $=p$(this);return $+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,$}numBlobs(){return this.blobVersionedHashes.length}}var nO;var A_=p(()=>{Z1();KN();iO();LG();CY();g4();TG();B3();SN();nO={EIP4844:0,EIP7594:1}});function _N($,Q){if(Q?.common?.customCrypto?.kzg===void 0)throw n("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");let Z=Q.common.customCrypto.kzg;if($.blobsData!==void 0&&$.blobs!==void 0)throw n("cannot have both raw blobs data and encoded blobs in constructor");if($.blobsData!==void 0||$.blobs!==void 0)if($.blobs??($.blobs=Ir($.blobsData.reduce((X,Y)=>X+Y))),$.kzgCommitments??($.kzgCommitments=_r(Z,$.blobs)),$.blobVersionedHashes??($.blobVersionedHashes=fr($.kzgCommitments)),Q.common.isActivatedEIP(7594))$.kzgProofs??($.kzgProofs=kr(Z,$.blobs));else $.kzgProofs??($.kzgProofs=Sr(Z,$.blobs,$.kzgCommitments));return new EY($,Q)}function Zj0($,Q={}){if(Q.common?.customCrypto?.kzg===void 0)throw n("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");if($.length!==11&&$.length!==14)throw n("Invalid EIP-4844 transaction. Only expecting 11 values (for unsigned tx) or 14 values (for signed tx).");let[Z,X,Y,z,J,q,W,G,U,D,P,H,N,C]=$;return m4({chainId:Z,v:H}),h7({nonce:X,maxPriorityFeePerGas:Y,maxFeePerGas:z,gasLimit:J,value:W,maxFeePerBlobGas:D,v:H,r:N,s:C}),new EY({chainId:L0(Z),nonce:X,maxPriorityFeePerGas:Y,maxFeePerGas:z,gasLimit:J,to:q,value:W,data:G,accessList:U??[],maxFeePerBlobGas:D,blobVersionedHashes:P,v:H!==void 0?L0(H):void 0,r:N,s:C},Q)}function mt($,Q={}){if(Q.common?.customCrypto?.kzg===void 0)throw n("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");if(X1($.subarray(0,1),E$(D5.BlobEIP4844))===!1)throw n(`Invalid serialized tx input: not an EIP-4844 transaction (wrong tx type, expected: ${D5.BlobEIP4844}, received: ${H0($.subarray(0,1))}`);let Z=I1.decode($.subarray(1));if(!Array.isArray(Z))throw n("Invalid serialized tx input: must be array");return Zj0(Z,Q)}var SN=p(()=>{j8();Z1();g4();A_();B3()});var pt=p(()=>{A_();SN()});function ut($){let Q=FY($),Z=BigInt($.authorizationList.length*Number($.common.param("perEmptyAccountCost")));return Q+Z}function ct($){let Q=$.authorizationList;if(Q.length===0)throw n("Invalid EIP-7702 transaction: authorization list is empty");for(let Z of Q){if(Z.length!==6)throw n("Invalid EIP-7702 transaction: authorization list item should have 6 elements");for(let U of Z)if(Array.isArray(U))throw n("Invalid EIP-7702 transaction: authority list element is a list, not bytes");let[X,Y,z,J,q,W]=Z;if(h7({yParity:J,r:q,s:W,nonce:z,chainId:X}),Y.length!==20)throw n("Invalid EIP-7702 transaction: address length should be 20 bytes");if(L0(X)>e8)throw n("Invalid EIP-7702 transaction: chainId exceeds 2^256 - 1");if(L0(z)>KZ)throw n("Invalid EIP-7702 transaction: nonce exceeds 2^64 - 1");if(L0(J)>=BigInt(256))throw n("Invalid EIP-7702 transaction: yParity should be fit within 1 byte (0 - 255)");if(L0(q)>e8)throw n("Invalid EIP-7702 transaction: r exceeds 2^256 - 1");if(L0(W)>e8)throw n("Invalid EIP-7702 transaction: s exceeds 2^256 - 1")}}var dt=p(()=>{LG();Z1()});class fN{constructor($,Q={}){this.type=D5.EOACodeEIP7702,this.cache={},this.activeCapabilities=[],I$(this,{...$,type:D5.EOACodeEIP7702},Q);let{chainId:Z,accessList:X,authorizationList:Y,maxFeePerGas:z,maxPriorityFeePerGas:J}=$,q=X??[],W=Y??[];if(Z!==void 0&&L0(F1(Z))!==this.common.chainId())throw n(`Common chain ID ${this.common.chainId} not matching the derived chain ID ${Z}`);if(this.chainId=this.common.chainId(),!this.common.isActivatedEIP(7702))throw n("EIP-7702 not enabled on Common");if(this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930,7702]),this.accessList=HY(q)?BY(q):q,AY(this),this.authorizationList=Mr(W)?W.map((U)=>PI(U)):W,ct(this),this.maxFeePerGas=L0(F1(z)),this.maxPriorityFeePerGas=L0(F1(J)),h4({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),m4($),this.gasLimit*this.maxFeePerGas>e8){let U=j6(this,"gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw n(U)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){let U=j6(this,"maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw n(U)}if(TY(this),RZ(this),this.to===void 0){let U=j6(this,'tx should have a "to" field and cannot be used to create contracts');throw n(U)}if(Q?.freeze??!0)Object.freeze(this)}supports($){return this.activeCapabilities.includes($)}getDataGas(){return ut(this)}getEffectivePriorityFee($){return PG(this,$)}getUpfrontCost($=Q0){return MG(this,$)}getIntrinsicGas(){return k$(this)}toCreationAddress(){throw n("EOACode7702Tx cannot create contracts")}raw(){return[Y1(this.chainId),Y1(this.nonce),Y1(this.maxPriorityFeePerGas),Y1(this.maxFeePerGas),Y1(this.gasLimit),this.to!==void 0?this.to.bytes:new Uint8Array(0),Y1(this.value),this.data,this.accessList,this.authorizationList,this.v!==void 0?Y1(this.v):new Uint8Array(0),this.r!==void 0?Y1(this.r):new Uint8Array(0),this.s!==void 0?Y1(this.s):new Uint8Array(0)]}serialize(){return J4(this)}getMessageToSign(){return J4(this,this.raw().slice(0,10))}getHashedMessageToSign(){return LY(this)}hash(){return x$(this)}getMessageToVerifySignature(){return this.getHashedMessageToSign()}getSenderPublicKey(){return b$(this)}addSignature($,Q,Z){Q=F1(Q),Z=F1(Z);let X={...this.txOptions,common:this.common};return kN({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,authorizationList:this.authorizationList,v:$,r:L0(Q),s:L0(Z)},X)}toJSON(){let $=wY(this.accessList),Q=this.authorizationList.map((X)=>Nr(X));return{..._$(this),chainId:c1(this.chainId),maxPriorityFeePerGas:c1(this.maxPriorityFeePerGas),maxFeePerGas:c1(this.maxFeePerGas),accessList:$,authorizationList:Q}}getValidationErrors(){return v$(this)}isValid(){return y$(this)}verifySignature(){return g$(this)}getSenderAddress(){return h$(this)}sign($,Q=!1){return m$(this,$,Q)}isSigned(){let{v:$,r:Q,s:Z}=this;if($===void 0||Q===void 0||Z===void 0)return!1;else return!0}errorStr(){let $=p$(this);return $+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,$}}var lt=p(()=>{Z1();KN();iO();LG();dt();CY();g4();B3();xN();TG()});function kN($,Q={}){return new fN($,Q)}function Yj0($,Q={}){if($.length!==10&&$.length!==13)throw n("Invalid EIP-7702 transaction. Only expecting 10 values (for unsigned tx) or 13 values (for signed tx).");let[Z,X,Y,z,J,q,W,G,U,D,P,H,N]=$;return m4({chainId:Z,v:P}),h7({nonce:X,maxPriorityFeePerGas:Y,maxFeePerGas:z,gasLimit:J,value:W,v:P,r:H,s:N}),new fN({chainId:L0(Z),nonce:X,maxPriorityFeePerGas:Y,maxFeePerGas:z,gasLimit:J,to:q,value:W,data:G,accessList:U??[],authorizationList:D??[],v:P!==void 0?L0(P):void 0,r:H,s:N},Q)}function it($,Q={}){if(X1($.subarray(0,1),E$(D5.EOACodeEIP7702))===!1)throw n(`Invalid serialized tx input: not an EIP-7702 transaction (wrong tx type, expected: ${D5.EOACodeEIP7702}, received: ${H0($.subarray(0,1))}`);let Z=I1.decode($.subarray(1));if(!Array.isArray(Z))throw n("Invalid serialized tx input: must be array");return Yj0(Z,Q)}var xN=p(()=>{j8();Z1();g4();B3();lt()});var ot=p(()=>{xN()});function nt($,Q){let Z=Number($),X=Number(Q)*2;return Z===X+35||Z===X+36}function Jj0($,Q){let Z,X=Q!==void 0?Number(Q):void 0;if(X!==void 0){if(X<37&&X!==27&&X!==28)throw n(`Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ${X}`)}if(X!==void 0&&X!==0&&$.gteHardfork("spuriousDragon")&&X!==27&&X!==28){if(!nt(BigInt(X),$.chainId()))throw n(`Incompatible EIP155-based V ${X} and chain id ${$.chainId()}. See the Common parameter of the Transaction constructor to set the chain id.`);let Y;if((X-35)%2===0)Y=35;else Y=36;Z=BigInt(X-Y)/I8}return Z}class bN{constructor($,Q={}){this.type=D5.Legacy,this.cache={},this.activeCapabilities=[],I$(this,$,Q),this.gasPrice=L0(F1($.gasPrice)),h4({gasPrice:this.gasPrice}),this.common.updateParams(Q.params??WN);let Z=Jj0(this.common,this.v);if(Z!==void 0&&Z!==this.common.chainId())throw n(`Common chain ID ${this.common.chainId} not matching the derived chain ID ${Z}`);if(this.keccakFunction=this.common.customCrypto.keccak256??RG,this.gasPrice*this.gasLimit>e8)throw n("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");if(this.common.gteHardfork("spuriousDragon")){if(!this.isSigned())this.activeCapabilities.push(_8.EIP155ReplayProtection);else if(nt(this.v,this.common.chainId()))this.activeCapabilities.push(_8.EIP155ReplayProtection)}if(Q?.freeze??!0)Object.freeze(this)}supports($){return this.activeCapabilities.includes($)}isSigned(){return NN(this)}getEffectivePriorityFee($){return LN(this.gasPrice,$)}raw(){return[Y1(this.nonce),Y1(this.gasPrice),Y1(this.gasLimit),this.to!==void 0?this.to.bytes:new Uint8Array(0),Y1(this.value),this.data,this.v!==void 0?Y1(this.v):new Uint8Array(0),this.r!==void 0?Y1(this.r):new Uint8Array(0),this.s!==void 0?Y1(this.s):new Uint8Array(0)]}serialize(){return I1.encode(this.raw())}getMessageToSign(){let $=[Y1(this.nonce),Y1(this.gasPrice),Y1(this.gasLimit),this.to!==void 0?this.to.bytes:new Uint8Array(0),Y1(this.value),this.data];if(this.supports(_8.EIP155ReplayProtection))$.push(Y1(this.common.chainId())),$.push(g7(y7(0))),$.push(g7(y7(0)));return $}getHashedMessageToSign(){let $=this.getMessageToSign();return this.keccakFunction(I1.encode($))}getDataGas(){return CN(this)}toCreationAddress(){return NG(this)}getIntrinsicGas(){return k$(this)}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){return x$(this)}getMessageToVerifySignature(){if(!this.isSigned()){let $=j6(this,"This transaction is not signed");throw n($)}return this.getHashedMessageToSign()}getSenderPublicKey(){return b$(this)}addSignature($,Q,Z,X=!1){if(Q=F1(Q),Z=F1(Z),X&&this.supports(_8.EIP155ReplayProtection))$+=BigInt(35)+this.common.chainId()*I8;else if(X)$+=BigInt(27);let Y={...this.txOptions,common:this.common};return S8({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:$,r:L0(Q),s:L0(Z)},Y)}toJSON(){let $=_$(this);return $.gasPrice=c1(this.gasPrice),$}getValidationErrors(){return v$(this)}isValid(){return y$(this)}verifySignature(){return g$(this)}getSenderAddress(){return h$(this)}sign($,Q=!1){return m$(this,$,Q)}errorStr(){let $=p$(this);return $+=` gasPrice=${this.gasPrice}`,$}}var rt=p(()=>{j8();Z1();PN();CY();FG();g4();B3();vN()});function S8($,Q={}){return new bN($,Q)}function at($,Q={}){if($.length!==6&&$.length!==9)throw n("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");let[Z,X,Y,z,J,q,W,G,U]=$;return h7({nonce:Z,gasPrice:X,gasLimit:Y,value:J,v:W,r:G,s:U}),new bN({nonce:Z,gasPrice:X,gasLimit:Y,to:z,value:J,data:q,v:W,r:G,s:U},Q)}function st($,Q={}){let Z=I1.decode($);if(!Array.isArray(Z))throw n("Invalid serialized tx input. Must be array");return at(Z,Q)}var vN=p(()=>{j8();Z1();rt()});var tt=p(()=>{vN()});var et=()=>{};function w_($,Q={}){if(!("type"in $)||$.type===void 0)return S8($,Q);else if(Cs($))return S8($,Q);else if(Ls($))return EN($,Q);else if(Ts($))return AN($,Q);else if(Fs($))return _N($,Q);else if(As($))return kN($,Q);else throw n(`Tx instantiation with type ${$?.type} not supported`)}function yN($,Q={}){if($[0]<=127)switch($[0]){case D5.AccessListEIP2930:return gt($,Q);case D5.FeeMarketEIP1559:return bt($,Q);case D5.BlobEIP4844:return mt($,Q);case D5.EOACodeEIP7702:return it($,Q);default:throw n(`TypedTransaction with ID ${$[0]} unknown`)}else return st($,Q)}var Qe=p(()=>{Z1();wN();IN();SN();xN();vN();g4()});var Ze=p(()=>{et();TG()});var FG=p(()=>{Qe();vt();ht();pt();ot();tt();aI();g4();Ze()});function Wj0($,Q=!1){if(Q)return{h:Number($&gN),l:Number($>>Xe&gN)};return{h:Number($>>Xe&gN)|0,l:Number($&gN)|0}}function Ye($,Q=!1){let Z=$.length,X=new Uint32Array(Z),Y=new Uint32Array(Z);for(let z=0;z<Z;z++){let{h:J,l:q}=Wj0($[z],Q);[X[z],Y[z]]=[J,q]}return[X,Y]}var gN,Xe,Je=($,Q,Z)=>$<<Z|Q>>>32-Z,ze=($,Q,Z)=>Q<<Z|$>>>32-Z,qe=($,Q,Z)=>Q<<Z-32|$>>>64-Z,We=($,Q,Z)=>$<<Z-32|Q>>>64-Z;var Ke=p(()=>{gN=BigInt(4294967295),Xe=BigInt(32)});function Kj0($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function hN($){if(!Number.isSafeInteger($)||$<0)throw Error("positive integer expected, got "+$)}function NZ($,...Q){if(!Kj0($))throw Error("Uint8Array expected");if(Q.length>0&&!Q.includes($.length))throw Error("Uint8Array expected of length "+Q+", got length="+$.length)}function Pq($,Q=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(Q&&$.finished)throw Error("Hash#digest() has already been called")}function rO($,Q){NZ($);let Z=Q.outputLen;if($.length<Z)throw Error("digestInto() expects output buffer of length at least "+Z)}function Ge($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function IY(...$){for(let Q=0;Q<$.length;Q++)$[Q].fill(0)}function mN($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function I3($,Q){return $<<32-Q|$>>>Q}function Uj0($){return $<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255}function Vj0($){for(let Q=0;Q<$.length;Q++)$[Q]=Uj0($[Q]);return $}function Oj0($){if(typeof $!=="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function aO($){if(typeof $==="string")$=Oj0($);return NZ($),$}class sO{}function pN($){let Q=(X)=>$().update(aO(X)).digest(),Z=$();return Q.outputLen=Z.outputLen,Q.blockLen=Z.blockLen,Q.create=()=>$(),Q}var Gj0,B_;var tO=p(()=>{/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Gj0=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();B_=Gj0?($)=>$:Vj0});function Cj0($,Q=24){let Z=new Uint32Array(10);for(let X=24-Q;X<24;X++){for(let J=0;J<10;J++)Z[J]=$[J]^$[J+10]^$[J+20]^$[J+30]^$[J+40];for(let J=0;J<10;J+=2){let q=(J+8)%10,W=(J+2)%10,G=Z[W],U=Z[W+1],D=Ue(G,U,1)^Z[q],P=Ve(G,U,1)^Z[q+1];for(let H=0;H<50;H+=10)$[J+H]^=D,$[J+H+1]^=P}let Y=$[2],z=$[3];for(let J=0;J<24;J++){let q=De[J],W=Ue(Y,z,q),G=Ve(Y,z,q),U=Oe[J];Y=$[U],z=$[U+1],$[U]=W,$[U+1]=G}for(let J=0;J<50;J+=10){for(let q=0;q<10;q++)Z[q]=$[J+q];for(let q=0;q<10;q++)$[J+q]^=~Z[(q+2)%10]&Z[(q+4)%10]}$[0]^=Rj0[X],$[1]^=Nj0[X]}IY(Z)}var Dj0,eO,Mj0,Pj0,Hj0,jj0,Oe,De,Me,Pe,Rj0,Nj0,Ue=($,Q,Z)=>Z>32?qe($,Q,Z):Je($,Q,Z),Ve=($,Q,Z)=>Z>32?We($,Q,Z):ze($,Q,Z),E_,uN=($,Q,Z)=>pN(()=>new E_(Q,$,Z)),He,I_,je,Re;var Ne=p(()=>{Ke();tO();Dj0=BigInt(0),eO=BigInt(1),Mj0=BigInt(2),Pj0=BigInt(7),Hj0=BigInt(256),jj0=BigInt(113),Oe=[],De=[],Me=[];for(let $=0,Q=eO,Z=1,X=0;$<24;$++){[Z,X]=[X,(2*Z+3*X)%5],Oe.push(2*(5*X+Z)),De.push(($+1)*($+2)/2%64);let Y=Dj0;for(let z=0;z<7;z++)if(Q=(Q<<eO^(Q>>Pj0)*jj0)%Hj0,Q&Mj0)Y^=eO<<(eO<<BigInt(z))-eO;Me.push(Y)}Pe=Ye(Me,!0),Rj0=Pe[0],Nj0=Pe[1];E_=class E_ extends sO{constructor($,Q,Z,X=!1,Y=24){super();if(this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=$,this.suffix=Q,this.outputLen=Z,this.enableXOF=X,this.rounds=Y,hN(Z),!(0<$&&$<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Ge(this.state)}clone(){return this._cloneInto()}keccak(){B_(this.state32),Cj0(this.state32,this.rounds),B_(this.state32),this.posOut=0,this.pos=0}update($){Pq(this),$=aO($),NZ($);let{blockLen:Q,state:Z}=this,X=$.length;for(let Y=0;Y<X;){let z=Math.min(Q-this.pos,X-Y);for(let J=0;J<z;J++)Z[this.pos++]^=$[Y++];if(this.pos===Q)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:$,suffix:Q,pos:Z,blockLen:X}=this;if($[Z]^=Q,(Q&128)!==0&&Z===X-1)this.keccak();$[X-1]^=128,this.keccak()}writeInto($){Pq(this,!1),NZ($),this.finish();let Q=this.state,{blockLen:Z}=this;for(let X=0,Y=$.length;X<Y;){if(this.posOut>=Z)this.keccak();let z=Math.min(Z-this.posOut,Y-X);$.set(Q.subarray(this.posOut,this.posOut+z),X),this.posOut+=z,X+=z}return $}xofInto($){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto($)}xof($){return hN($),this.xofInto(new Uint8Array($))}digestInto($){if(rO($,this),this.finished)throw Error("digest() was already called");return this.writeInto($),this.destroy(),$}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,IY(this.state)}_cloneInto($){let{blockLen:Q,suffix:Z,outputLen:X,rounds:Y,enableXOF:z}=this;return $||($=new E_(Q,Z,X,z,Y)),$.state32.set(this.state32),$.pos=this.pos,$.posOut=this.posOut,$.finished=this.finished,$.rounds=Y,$.suffix=Z,$.outputLen=X,$.enableXOF=z,$.destroyed=this.destroyed,$}};He=(()=>uN(1,144,28))(),I_=(()=>uN(1,136,32))(),je=(()=>uN(1,104,48))(),Re=(()=>uN(1,72,64))()});var Ce;var Le=p(()=>{tO();Ce=NZ});function Hq($){return(Q)=>{return Ce(Q),$(Q)}}var __=p(()=>{Le()});var Un0,cN,Vn0,On0;var S_=p(()=>{Ne();__();Un0=Hq(He),cN=(()=>{let $=Hq(I_);return $.create=I_.create,$})(),Vn0=Hq(je),On0=Hq(Re)});function Lj0($,Q,Z,X){if(typeof $.setBigUint64==="function")return $.setBigUint64(Q,Z,X);let Y=BigInt(32),z=BigInt(4294967295),J=Number(Z>>Y&z),q=Number(Z&z),W=X?4:0,G=X?0:4;$.setUint32(Q+W,J,X),$.setUint32(Q+G,q,X)}function Te($,Q,Z){return $&Q^~$&Z}function Fe($,Q,Z){return $&Q^$&Z^Q&Z}var f_,CZ;var Ae=p(()=>{tO();f_=class f_ extends sO{constructor($,Q,Z,X){super();this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=$,this.outputLen=Q,this.padOffset=Z,this.isLE=X,this.buffer=new Uint8Array($),this.view=mN(this.buffer)}update($){Pq(this),$=aO($),NZ($);let{view:Q,buffer:Z,blockLen:X}=this,Y=$.length;for(let z=0;z<Y;){let J=Math.min(X-this.pos,Y-z);if(J===X){let q=mN($);for(;X<=Y-z;z+=X)this.process(q,z);continue}if(Z.set($.subarray(z,z+J),this.pos),this.pos+=J,z+=J,this.pos===X)this.process(Q,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){Pq(this),rO($,this),this.finished=!0;let{buffer:Q,view:Z,blockLen:X,isLE:Y}=this,{pos:z}=this;if(Q[z++]=128,IY(this.buffer.subarray(z)),this.padOffset>X-z)this.process(Z,0),z=0;for(let U=z;U<X;U++)Q[U]=0;Lj0(Z,X-8,BigInt(this.length*8),Y),this.process(Z,0);let J=mN($),q=this.outputLen;if(q%4)throw Error("_sha2: outputLen should be aligned to 32bit");let W=q/4,G=this.get();if(W>G.length)throw Error("_sha2: outputLen bigger than state");for(let U=0;U<W;U++)J.setUint32(4*U,G[U],Y)}digest(){let{buffer:$,outputLen:Q}=this;this.digestInto($);let Z=$.slice(0,Q);return this.destroy(),Z}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:Q,buffer:Z,length:X,finished:Y,destroyed:z,pos:J}=this;if($.destroyed=z,$.finished=Y,$.length=X,$.pos=J,X%Q)$.buffer.set(Z);return $}clone(){return this._cloneInto()}};CZ=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225])});var Tj0,_Y,we,Be;var Ee=p(()=>{Ae();tO();Tj0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),_Y=new Uint32Array(64);we=class we extends f_{constructor($=32){super(64,$,8,!1);this.A=CZ[0]|0,this.B=CZ[1]|0,this.C=CZ[2]|0,this.D=CZ[3]|0,this.E=CZ[4]|0,this.F=CZ[5]|0,this.G=CZ[6]|0,this.H=CZ[7]|0}get(){let{A:$,B:Q,C:Z,D:X,E:Y,F:z,G:J,H:q}=this;return[$,Q,Z,X,Y,z,J,q]}set($,Q,Z,X,Y,z,J,q){this.A=$|0,this.B=Q|0,this.C=Z|0,this.D=X|0,this.E=Y|0,this.F=z|0,this.G=J|0,this.H=q|0}process($,Q){for(let U=0;U<16;U++,Q+=4)_Y[U]=$.getUint32(Q,!1);for(let U=16;U<64;U++){let D=_Y[U-15],P=_Y[U-2],H=I3(D,7)^I3(D,18)^D>>>3,N=I3(P,17)^I3(P,19)^P>>>10;_Y[U]=N+_Y[U-7]+H+_Y[U-16]|0}let{A:Z,B:X,C:Y,D:z,E:J,F:q,G:W,H:G}=this;for(let U=0;U<64;U++){let D=I3(J,6)^I3(J,11)^I3(J,25),P=G+D+Te(J,q,W)+Tj0[U]+_Y[U]|0,N=(I3(Z,2)^I3(Z,13)^I3(Z,22))+Fe(Z,X,Y)|0;G=W,W=q,q=J,J=z+P|0,z=Y,Y=X,X=Z,Z=P+N|0}Z=Z+this.A|0,X=X+this.B|0,Y=Y+this.C|0,z=z+this.D|0,J=J+this.E|0,q=q+this.F|0,W=W+this.G|0,G=G+this.H|0,this.set(Z,X,Y,z,J,q,W,G)}roundClean(){IY(_Y)}destroy(){this.set(0,0,0,0,0,0,0,0),IY(this.buffer)}};Be=pN(()=>new we)});var Ie;var _e=p(()=>{Ee();__();Ie=Hq(Be)});class k_{constructor($,Q=[],Z=[],X,Y={}){if(this.transactions=[],this.uncleHeaders=[],this.cache={},this.header=$??new $D({},Y),this.common=this.header.common,this.keccakFunction=this.common.customCrypto.keccak256??cN,this.sha256Function=this.common.customCrypto.sha256??Ie,this.transactions=Q,this.withdrawals=X??(this.common.isActivatedEIP(4895)?[]:void 0),this.uncleHeaders=Z,Z.length>0){if(this.validateUncles(),this.common.consensusType()===DY.ProofOfAuthority){let J=this._errorMsg("Block initialization with uncleHeaders on a PoA network is not allowed");throw n(J)}if(this.common.consensusType()===DY.ProofOfStake){let J=this._errorMsg("Block initialization with uncleHeaders on a PoS network is not allowed");throw n(J)}}if(!this.common.isActivatedEIP(4895)&&X!==void 0)throw n("Cannot have a withdrawals field if EIP 4895 is not active");if(Y?.freeze??!0)Object.freeze(this)}raw(){let $=[this.header.raw(),this.transactions.map((Z)=>Z.supports(_8.EIP2718TypedTransaction)?Z.serialize():Z.raw()),this.uncleHeaders.map((Z)=>Z.raw())],Q=this.withdrawals?.map((Z)=>Z.raw());if(Q)$.push(Q);return $}hash(){return this.header.hash()}isGenesis(){return this.header.isGenesis()}serialize(){return I1.encode(this.raw())}async genTxTrie(){return b_(this.transactions,new B$({common:this.common}))}async transactionsTrieIsValid(){let $;if(this.transactions.length===0)return $=X1(this.header.transactionsTrie,w3),$;if(this.cache.txTrieRoot===void 0)this.cache.txTrieRoot=await this.genTxTrie();return $=X1(this.cache.txTrieRoot,this.header.transactionsTrie),$}getTransactionsValidationErrors(){let $=[],Q=Q0;for(let[Z,X]of this.transactions.entries()){let Y=X.getValidationErrors();if(this.common.isActivatedEIP(1559)){if(X.supports(_8.EIP1559FeeMarket)){if(X=X,X.maxFeePerGas<this.header.baseFeePerGas)Y.push("tx unable to pay base fee (EIP-1559 tx)")}else if(X=X,X.gasPrice<this.header.baseFeePerGas)Y.push("tx unable to pay base fee (non EIP-1559 tx)")}if(this.common.isActivatedEIP(4844)){let z=this.common.param("maxBlobGasPerBlock"),J=this.common.param("blobGasPerBlob");if(X instanceof EY){if(Q+=BigInt(X.numBlobs())*J,Q>z)Y.push(`tx causes total blob gas of ${Q} to exceed maximum blob gas per block of ${z}`)}}if(Y.length>0)$.push(`errors at tx ${Z}: ${Y.join(", ")}`)}if(this.common.isActivatedEIP(4844)){if(Q!==this.header.blobGasUsed)$.push(`invalid blobGasUsed expected=${this.header.blobGasUsed} actual=${Q}`)}return $}transactionsAreValid(){return this.getTransactionsValidationErrors().length===0}async validateData($=!1,Q=!0,Z=!1){if(Z&&this.common.isActivatedEIP(7934)){let X=this.serialize(),Y=this.common.param("maxRlpBlockSize");if(X.length>Y){let z=this._errorMsg(`Block size exceeds maximum RLP block size limit: ${X.length} bytes > ${Y} bytes`);throw n(z)}}if(Q){let X=this.getTransactionsValidationErrors();if(X.length>0){let Y=this._errorMsg(`invalid transactions: ${X.join(" ")}`);throw n(Y)}}if($)return;if(Q){for(let[X,Y]of this.transactions.entries())if(!Y.isSigned()){let z=this._errorMsg(`invalid transactions: transaction at index ${X} is unsigned`);throw n(z)}}if(!await this.transactionsTrieIsValid()){let X=this._errorMsg("invalid transaction trie");throw n(X)}if(!this.uncleHashIsValid()){let X=this._errorMsg("invalid uncle hash");throw n(X)}if(this.common.isActivatedEIP(4895)&&!await this.withdrawalsTrieIsValid()){let X=this._errorMsg("invalid withdrawals trie");throw n(X)}}validateBlobTransactions($){if(this.common.isActivatedEIP(4844)){let Q=this.common.param("maxBlobGasPerBlock"),Z=this.common.param("blobGasPerBlob"),X=Q0,Y=$.calcNextExcessBlobGas(this.common);if(this.header.excessBlobGas!==Y)throw n(`block excessBlobGas mismatch: have ${this.header.excessBlobGas}, want ${Y}`);let z;for(let J of this.transactions)if(J instanceof EY){if(z=z??this.header.getBlobGasPrice(),J.maxFeePerBlobGas<z)throw n(`blob transaction maxFeePerBlobGas ${J.maxFeePerBlobGas} < than block blob gas price ${z} - ${this.errorStr()}`);if(X+=BigInt(J.blobVersionedHashes.length)*Z,X>Q)throw n(`tx causes total blob gas of ${X} to exceed maximum blob gas per block of ${Q}`)}if(this.header.blobGasUsed!==X)throw n(`block blobGasUsed mismatch: have ${this.header.blobGasUsed}, want ${X}`)}}uncleHashIsValid(){if(this.uncleHeaders.length===0)return X1(tz,this.header.uncleHash);let $=this.uncleHeaders.map((Z)=>Z.raw()),Q=I1.encode($);return X1(this.keccakFunction(Q),this.header.uncleHash)}async withdrawalsTrieIsValid(){if(!this.common.isActivatedEIP(4895))throw n("EIP 4895 is not activated");let $;if(this.withdrawals.length===0)return $=X1(this.header.withdrawalsRoot,w3),$;if(this.cache.withdrawalsTrieRoot===void 0)this.cache.withdrawalsTrieRoot=await x_(this.withdrawals,new B$({common:this.common}));return $=X1(this.cache.withdrawalsTrieRoot,this.header.withdrawalsRoot),$}validateUncles(){if(this.isGenesis())return;if(this.uncleHeaders.length>2){let Q=this._errorMsg("too many uncle headers");throw n(Q)}let $=this.uncleHeaders.map((Q)=>H0(Q.hash()));if(new Set($).size!==$.length){let Q=this._errorMsg("duplicate uncles");throw n(Q)}}validateGasLimit($){return this.header.validateGasLimit($.header)}toJSON(){let $=this.withdrawals?{withdrawals:this.withdrawals.map((Q)=>Q.toJSON())}:{};return{header:this.header.toJSON(),transactions:this.transactions.map((Q)=>Q.toJSON()),uncleHeaders:this.uncleHeaders.map((Q)=>Q.toJSON()),...$}}toExecutionPayload(){let $=this.toJSON(),Q=$.header,Z=this.transactions.map((z)=>H0(z.serialize()))??[],X=$.withdrawals?{withdrawals:$.withdrawals}:{};return{blockNumber:Q.number,parentHash:Q.parentHash,feeRecipient:Q.coinbase,stateRoot:Q.stateRoot,receiptsRoot:Q.receiptTrie,logsBloom:Q.logsBloom,gasLimit:Q.gasLimit,gasUsed:Q.gasUsed,timestamp:Q.timestamp,extraData:Q.extraData,baseFeePerGas:Q.baseFeePerGas,blobGasUsed:Q.blobGasUsed,excessBlobGas:Q.excessBlobGas,blockHash:H0(this.hash()),prevRandao:Q.mixHash,transactions:Z,...X,parentBeaconBlockRoot:Q.parentBeaconBlockRoot,requestsHash:Q.requestsHash}}errorStr(){let $="";try{$=H0(this.hash())}catch{$="error"}let Q="";try{Q=this.common.hardfork()}catch{Q="error"}let Z=`block number=${this.header.number} hash=${$} `;return Z+=`hf=${Q} baseFeePerGas=${this.header.baseFeePerGas??"none"} `,Z+=`txs=${this.transactions.length} uncles=${this.uncleHeaders.length}`,Z}_errorMsg($){return`${$} (${this.errorStr()})`}}var Se=p(()=>{$9();qN();j8();FG();Z1();S_();_e();AG()});function dN($,Q){if($.common.consensusAlgorithm()!==OZ.Clique){let Z=$._errorMsg(`BlockHeader.${Q}() call only supported for clique PoA networks`);throw n(Z)}}function fe($){dN($,"cliqueSigHash");let Q=$.raw();return Q[12]=$.extraData.subarray(0,$.extraData.length-QD),$.keccakFunction(I1.encode(Q))}function y_($){dN($,"cliqueIsEpochTransition");let Q=BigInt($.common.consensusConfig().epoch);return $.number%Q===Q0}function ke($){return dN($,"cliqueExtraSeal"),$.extraData.subarray(-QD)}function g_($){dN($,"cliqueSigner");let Q=ke($);if(Q.length===0||X1(Q,new Uint8Array(65)))return E2();let Z=Q.subarray(0,32),X=Q.subarray(32,64),Y=L0(Q.subarray(64,65))+$G,z=VY(fe($),Y,Z,X);return Or(z)}var v_=32,QD=65;var h_=p(()=>{$9();j8();Z1()});async function x_($,Q){let Z=Q??new B$;for(let[X,Y]of $.entries())await Z.put(I1.encode(X),I1.encode(Y.raw()));return Z.root()}async function b_($,Q){let Z=Q??new B$;for(let[X,Y]of $.entries())await Z.put(I1.encode(X),Y.serialize());return Z.root()}var Fj0=($,Q,Z)=>{let X=A1,Y=Q0,z=$*Z;while(z>Q0)Y+=z,z=z*Q/(Z*X),X++;return Y/Z},m_=($,Q)=>{return Fj0(Q.param("minBlobGas"),$,Q.param("blobGasPriceUpdateFraction"))};var p_=p(()=>{qN();j8();Z1()});function xe($={},Q){let{header:Z,transactions:X,uncleHeaders:Y,withdrawals:z}=$,J=ZD(Z,Q),q=[];for(let D of X??[]){let P=w_(D,{...Q,common:J.common});q.push(P)}let W=[],G={...Q,common:J.common,calcDifficultyFromHeader:void 0};if(Q?.setHardfork!==void 0)G.setHardfork=!0;for(let D of Y??[]){let P=ZD(D,G);W.push(P)}let U=z?.map(Hr);return new k_(J,q,W,U,Q)}var be=p(()=>{FG();Z1();AG()});var ve=p(()=>{Se();be()});var ye=p(()=>{h_()});function ZD($={},Q={}){return new $D($,Q)}var ge=p(()=>{AG()});var he;var u_=p(()=>{he={1:{minGasLimit:5000,gasLimitBoundDivisor:1024,targetBlobGasPerBlock:0,blobGasPerBlob:0,maxBlobGasPerBlock:0,maxExtraDataSize:32,minimumDifficulty:131072,difficultyBoundDivisor:2048,durationLimit:13,difficultyBombDelay:0},609:{difficultyBombDelay:3000000},1013:{difficultyBombDelay:5000000},2384:{difficultyBombDelay:9000000},1559:{baseFeeMaxChangeDenominator:8,elasticityMultiplier:2,initialBaseFee:1e9},3554:{difficultyBombDelay:9500000},4345:{difficultyBombDelay:10700000},4844:{targetBlobGasPerBlock:393216,blobGasPerBlob:131072,maxBlobGasPerBlock:786432,blobGasPriceUpdateFraction:3338477,minBlobGas:1,blobBaseCost:8192},5133:{difficultyBombDelay:11400000},7691:{targetBlobGasPerBlock:786432,maxBlobGasPerBlock:1179648,blobGasPriceUpdateFraction:5007716}}});class $D{get prevRandao(){if(!this.common.isActivatedEIP(4399)){let $=this._errorMsg("The prevRandao parameter can only be accessed when EIP-4399 is activated");throw n($)}return this.mixHash}constructor($,Q={}){if(this.cache={hash:void 0},Q.common)this.common=Q.common.copy();else this.common=new y4({chain:p7});this.common.updateParams(Q.params??he),this.keccakFunction=this.common.customCrypto.keccak256??cN;let Z=Q.skipConsensusFormatValidation??!1,X={parentHash:new Uint8Array(32),uncleHash:tz,coinbase:E2(),stateRoot:new Uint8Array(32),transactionsTrie:w3,receiptTrie:w3,logsBloom:new Uint8Array(256),difficulty:Q0,number:Q0,gasLimit:Aj0,gasUsed:Q0,timestamp:Q0,extraData:new Uint8Array(0),mixHash:new Uint8Array(32),nonce:new Uint8Array(8)},Y=X5($.parentHash,l1.Uint8Array)??X.parentHash,z=X5($.uncleHash,l1.Uint8Array)??X.uncleHash,J=new Q6(X5($.coinbase??X.coinbase,l1.Uint8Array)),q=X5($.stateRoot,l1.Uint8Array)??X.stateRoot,W=X5($.transactionsTrie,l1.Uint8Array)??X.transactionsTrie,G=X5($.receiptTrie,l1.Uint8Array)??X.receiptTrie,U=X5($.logsBloom,l1.Uint8Array)??X.logsBloom,D=X5($.difficulty,l1.BigInt)??X.difficulty,P=X5($.number,l1.BigInt)??X.number,H=X5($.gasLimit,l1.BigInt)??X.gasLimit,N=X5($.gasUsed,l1.BigInt)??X.gasUsed,C=X5($.timestamp,l1.BigInt)??X.timestamp,L=X5($.extraData,l1.Uint8Array)??X.extraData,B=X5($.mixHash,l1.Uint8Array)??X.mixHash,E=X5($.nonce,l1.Uint8Array)??X.nonce;if((Q.setHardfork??!1)===!0)this.common.setHardforkBy({blockNumber:P,timestamp:C});let _={baseFeePerGas:this.common.isActivatedEIP(1559)?P===this.common.hardforkBlock(w0.London)?this.common.param("initialBaseFee"):eK:void 0,withdrawalsRoot:this.common.isActivatedEIP(4895)?w3:void 0,blobGasUsed:this.common.isActivatedEIP(4844)?Q0:void 0,excessBlobGas:this.common.isActivatedEIP(4844)?Q0:void 0,parentBeaconBlockRoot:this.common.isActivatedEIP(4788)?new Uint8Array(32):void 0,requestsHash:this.common.isActivatedEIP(7685)?cn:void 0},f=X5($.baseFeePerGas,l1.BigInt)??_.baseFeePerGas,x=X5($.withdrawalsRoot,l1.Uint8Array)??_.withdrawalsRoot,g=X5($.blobGasUsed,l1.BigInt)??_.blobGasUsed,h=X5($.excessBlobGas,l1.BigInt)??_.excessBlobGas,v=X5($.parentBeaconBlockRoot,l1.Uint8Array)??_.parentBeaconBlockRoot,b=X5($.requestsHash,l1.Uint8Array)??_.requestsHash;if(!this.common.isActivatedEIP(1559)&&f!==void 0)throw n("A base fee for a block can only be set with EIP1559 being activated");if(!this.common.isActivatedEIP(4895)&&x!==void 0)throw n("A withdrawalsRoot for a header can only be provided with EIP4895 being activated");if(!this.common.isActivatedEIP(4844)){if(g!==void 0)throw n("blob gas used can only be provided with EIP4844 activated");if(h!==void 0)throw n("excess blob gas can only be provided with EIP4844 activated")}if(!this.common.isActivatedEIP(4788)&&v!==void 0)throw n("A parentBeaconBlockRoot for a header can only be provided with EIP4788 being activated");if(!this.common.isActivatedEIP(7685)&&b!==void 0)throw n("requestsHash can only be provided with EIP 7685 activated");if(this.parentHash=Y,this.uncleHash=z,this.coinbase=J,this.stateRoot=q,this.transactionsTrie=W,this.receiptTrie=G,this.logsBloom=U,this.difficulty=D,this.number=P,this.gasLimit=H,this.gasUsed=N,this.timestamp=C,this.extraData=L,this.mixHash=B,this.nonce=E,this.baseFeePerGas=f,this.withdrawalsRoot=x,this.blobGasUsed=g,this.excessBlobGas=h,this.parentBeaconBlockRoot=v,this.requestsHash=b,this._genericFormatValidation(),this._validateDAOExtraData(),Q.calcDifficultyFromHeader&&this.common.consensusAlgorithm()===OZ.Ethash)this.difficulty=this.ethashCanonicalDifficulty(Q.calcDifficultyFromHeader);if(Z===!1)this._consensusFormatValidation();if(Q?.freeze??!0)Object.freeze(this)}_genericFormatValidation(){let{parentHash:$,stateRoot:Q,transactionsTrie:Z,receiptTrie:X,mixHash:Y,nonce:z}=this;if($.length!==32){let J=this._errorMsg(`parentHash must be 32 bytes, received ${$.length} bytes`);throw n(J)}if(Q.length!==32){let J=this._errorMsg(`stateRoot must be 32 bytes, received ${Q.length} bytes`);throw n(J)}if(Z.length!==32){let J=this._errorMsg(`transactionsTrie must be 32 bytes, received ${Z.length} bytes`);throw n(J)}if(X.length!==32){let J=this._errorMsg(`receiptTrie must be 32 bytes, received ${X.length} bytes`);throw n(J)}if(Y.length!==32){let J=this._errorMsg(`mixHash must be 32 bytes, received ${Y.length} bytes`);throw n(J)}if(z.length!==8){let J=this._errorMsg(`nonce must be 8 bytes, received ${z.length} bytes`);throw n(J)}if(this.gasUsed>this.gasLimit){let J=this._errorMsg(`Invalid block: too much gas used. Used: ${this.gasUsed}, gas limit: ${this.gasLimit}`);throw n(J)}if(this.common.isActivatedEIP(1559)){if(typeof this.baseFeePerGas!=="bigint"){let q=this._errorMsg("EIP1559 block has no base fee field");throw n(q)}let J=this.common.hardforkBlock(w0.London);if(typeof J==="bigint"&&J!==Q0&&this.number===J){let q=this.common.param("initialBaseFee");if(this.baseFeePerGas!==q){let W=this._errorMsg("Initial EIP1559 block does not have initial base fee");throw n(W)}}}if(this.common.isActivatedEIP(4895)){if(this.withdrawalsRoot===void 0){let J=this._errorMsg("EIP4895 block has no withdrawalsRoot field");throw n(J)}if(this.withdrawalsRoot?.length!==32){let J=this._errorMsg(`withdrawalsRoot must be 32 bytes, received ${this.withdrawalsRoot.length} bytes`);throw n(J)}}if(this.common.isActivatedEIP(4788)){if(this.parentBeaconBlockRoot===void 0){let J=this._errorMsg("EIP4788 block has no parentBeaconBlockRoot field");throw n(J)}if(this.parentBeaconBlockRoot?.length!==32){let J=this._errorMsg(`parentBeaconBlockRoot must be 32 bytes, received ${this.parentBeaconBlockRoot.length} bytes`);throw n(J)}}if(this.common.isActivatedEIP(7685)){if(this.requestsHash===void 0){let J=this._errorMsg("EIP7685 block has no requestsHash field");throw n(J)}}}_consensusFormatValidation(){let{nonce:$,uncleHash:Q,difficulty:Z,extraData:X,number:Y}=this;if(this.common.consensusAlgorithm()===OZ.Ethash){if(Y>Q0&&this.extraData.length>this.common.param("maxExtraDataSize")){let z=this._errorMsg("invalid amount of extra data");throw n(z)}}if(this.common.consensusAlgorithm()===OZ.Clique){let z=v_+QD;if(!y_(this)){if(this.extraData.length!==z){let J=this._errorMsg(`extraData must be ${z} bytes on non-epoch transition blocks, received ${this.extraData.length} bytes`);throw n(J)}}else{let J=this.extraData.length-z;if(J%20!==0){let q=this._errorMsg(`invalid signer list length in extraData, received signer length of ${J} (not divisible by 20)`);throw n(q)}if(!this.coinbase.isZero()){let q=this._errorMsg(`coinbase must be filled with zeros on epoch transition blocks, received ${this.coinbase}`);throw n(q)}}if(!X1(this.mixHash,new Uint8Array(32))){let J=this._errorMsg(`mixHash must be filled with zeros, received ${this.mixHash}`);throw n(J)}}if(this.common.consensusType()===DY.ProofOfStake){let z=!1,J="";if(!X1(Q,tz))J+=`, uncleHash: ${H0(Q)} (expected: ${H0(tz)})`,z=!0;if(Y!==Q0){if(Z!==Q0)J+=`, difficulty: ${Z} (expected: 0)`,z=!0;if(X.length>32)J+=`, extraData: ${H0(X)} (cannot exceed 32 bytes length, received ${X.length} bytes)`,z=!0;if(!X1($,new Uint8Array(8)))J+=`, nonce: ${H0($)} (expected: ${H0(new Uint8Array(8))})`,z=!0}if(z){let q=this._errorMsg(`Invalid PoS block: ${J}`);throw n(q)}}}validateGasLimit($){let Q=$.gasLimit,Z=this.common.hardforkBlock(w0.London);if(typeof Z==="bigint"&&Z!==Q0&&this.number===Z){let q=this.common.param("elasticityMultiplier");Q=Q*q}let X=this.gasLimit,Y=Q/this.common.param("gasLimitBoundDivisor"),z=Q+Y,J=Q-Y;if(X>=z){let q=this._errorMsg(`gas limit increased too much. Gas limit: ${X}, max gas limit: ${z}`);throw n(q)}if(X<=J){let q=this._errorMsg(`gas limit decreased too much. Gas limit: ${X}, min gas limit: ${J}`);throw n(q)}if(X<this.common.param("minGasLimit")){let q=this._errorMsg(`gas limit decreased below minimum gas limit. Gas limit: ${X}, minimum gas limit: ${this.common.param("minGasLimit")}`);throw n(q)}}calcNextBaseFee(){if(!this.common.isActivatedEIP(1559)){let X=this._errorMsg("calcNextBaseFee() can only be called with EIP1559 being activated");throw n(X)}let $,Q=this.common.param("elasticityMultiplier"),Z=this.gasLimit/Q;if(Z===this.gasUsed)$=this.baseFeePerGas;else if(this.gasUsed>Z){let X=this.gasUsed-Z,Y=this.common.param("baseFeeMaxChangeDenominator"),z=this.baseFeePerGas*X/Z/Y;$=(z>A1?z:A1)+this.baseFeePerGas}else{let X=Z-this.gasUsed,Y=this.common.param("baseFeeMaxChangeDenominator"),z=this.baseFeePerGas*X/Z/Y;$=this.baseFeePerGas-z>Q0?this.baseFeePerGas-z:Q0}return $}getBlobGasPrice(){if(this.excessBlobGas===void 0)throw n("header must have excessBlobGas field populated");return m_(this.excessBlobGas,this.common)}calcDataFee($){let Z=this.common.param("blobGasPerBlob")*BigInt($),X=this.getBlobGasPrice();return Z*X}calcNextExcessBlobGas($){let Q=this.excessBlobGas??Q0,Z=this.blobGasUsed??Q0,{targetBlobGasPerBlock:X,maxBlobGasPerBlock:Y}=$.getBlobGasSchedule();if(Q+Z<X)return Q0;if($.isActivatedEIP(7918)){let z=$.param("blobBaseCost"),J=$.param("blobGasPerBlob"),q=this.baseFeePerGas??Q0,W=this.getBlobGasPrice();if(z*q>J*W){let G=Z*(Y-X)/Y;return Q+G}}return Q+Z-X}calcNextBlobGasPrice($){return m_(this.calcNextExcessBlobGas($),$)}raw(){let $=[this.parentHash,this.uncleHash,this.coinbase.bytes,this.stateRoot,this.transactionsTrie,this.receiptTrie,this.logsBloom,Y1(this.difficulty),Y1(this.number),Y1(this.gasLimit),Y1(this.gasUsed),Y1(this.timestamp??Q0),this.extraData,this.mixHash,this.nonce];if(this.common.isActivatedEIP(1559))$.push(Y1(this.baseFeePerGas));if(this.common.isActivatedEIP(4895))$.push(this.withdrawalsRoot);if(this.common.isActivatedEIP(4844))$.push(Y1(this.blobGasUsed)),$.push(Y1(this.excessBlobGas));if(this.common.isActivatedEIP(4788))$.push(this.parentBeaconBlockRoot);if(this.common.isActivatedEIP(7685))$.push(this.requestsHash);return $}hash(){var $;if(Object.isFrozen(this))return($=this.cache).hash??($.hash=this.keccakFunction(I1.encode(this.raw()))),this.cache.hash;return this.keccakFunction(I1.encode(this.raw()))}isGenesis(){return this.number===Q0}ethashCanonicalDifficulty($){if(this.common.consensusType()!==DY.ProofOfWork){let G=this._errorMsg("difficulty calculation is only supported on PoW chains");throw n(G)}if(this.common.consensusAlgorithm()!==OZ.Ethash){let G=this._errorMsg("difficulty calculation currently only supports the ethash algorithm");throw n(G)}let Q=this.timestamp,{timestamp:Z,difficulty:X}=$,Y=this.common.param("minimumDifficulty"),z=X/this.common.param("difficultyBoundDivisor"),J=this.number,q;if(this.common.gteHardfork(w0.Byzantium)){let G=X1($.uncleHash,tz)?1:2,U=BigInt(G)-(Q-Z)/BigInt(9),D=BigInt(-99);if(D>U)U=D;q=X+z*U}if(this.common.gteHardfork(w0.Byzantium)){if(J=J-this.common.param("difficultyBombDelay"),J<Q0)J=Q0}else if(this.common.gteHardfork(w0.Homestead)){let G=A1-(Q-Z)/BigInt(10),U=BigInt(-99);if(U>G)G=U;q=X+z*G}else if(Z+this.common.param("durationLimit")>Q)q=z+X;else q=X-z;let W=J/BigInt(1e5)-I8;if(W>=0)q=q+I8**W;if(q<Y)q=Y;return q}serialize(){return I1.encode(this.raw())}toJSON(){let $=this.withdrawalsRoot?{withdrawalsRoot:H0(this.withdrawalsRoot)}:{},Q={parentHash:H0(this.parentHash),uncleHash:H0(this.uncleHash),coinbase:this.coinbase.toString(),stateRoot:H0(this.stateRoot),transactionsTrie:H0(this.transactionsTrie),...$,receiptTrie:H0(this.receiptTrie),logsBloom:H0(this.logsBloom),difficulty:c1(this.difficulty),number:c1(this.number),gasLimit:c1(this.gasLimit),gasUsed:c1(this.gasUsed),timestamp:c1(this.timestamp),extraData:H0(this.extraData),mixHash:H0(this.mixHash),nonce:H0(this.nonce)};if(this.common.isActivatedEIP(1559))Q.baseFeePerGas=c1(this.baseFeePerGas);if(this.common.isActivatedEIP(4844))Q.blobGasUsed=c1(this.blobGasUsed),Q.excessBlobGas=c1(this.excessBlobGas);if(this.common.isActivatedEIP(4788))Q.parentBeaconBlockRoot=H0(this.parentBeaconBlockRoot);if(this.common.isActivatedEIP(7685))Q.requestsHash=H0(this.requestsHash);return Q}_validateDAOExtraData(){if(!this.common.hardforkIsActiveOnBlock(w0.Dao,this.number))return;let $=this.common.hardforkBlock(w0.Dao);if($===null||this.number<$)return;let Q=Q1("0x64616f2d686172642d666f726b"),Z=BigInt(9);if(this.number-$<=Z&&!X1(this.extraData,Q)){let Y=this._errorMsg(`extraData should be 'dao-hard-fork', got ${jO(this.extraData)} (hex: ${H0(this.extraData)})`);throw n(Y)}}errorStr(){let $="";try{$=H0(this.hash())}catch{$="error"}let Q="";try{Q=this.common.hardfork()}catch{Q="error"}let Z=`block header number=${this.number} hash=${$} `;return Z+=`hf=${Q} baseFeePerGas=${this.baseFeePerGas??"none"}`,Z}_errorMsg($){return`${$} (${this.errorStr()})`}}var Aj0;var me=p(()=>{$9();j8();Z1();S_();h_();p_();u_();Aj0=BigInt("0xffffffffffffff")});var pe=p(()=>{ge();me()});var ue=()=>{};var AG=p(()=>{p_();ve();ye();pe();u_();ue()});var SY=239,wG=0,lN=1,ce=49152,de=1,le=2,ie=3,oe=4,ne=0,re=4,ae=4096,iN=4,se=1,te=1,ee=1,$00=256,Q00=1,Z00=127,X00=128,Y00=1023;function V1($,...Q){switch($){case f0.OUT_OF_BOUNDS:{let Z=Q[0];if(Z===0||Z===2||Z===3||Z===6)throw n(Q[1]);throw n(f0.OUT_OF_BOUNDS+" ")}case f0.VERIFY_BYTES:{let Z=Q[0];if(Z===0||Z===2||Z===3||Z===6)throw n(Q[1]);throw n(f0.VERIFY_BYTES+` at pos: ${Q[0]}: ${Q[1]}`)}case f0.VERIFY_UINT:{let Z=Q[0];if(Z===0||Z===2||Z===3||Z===6||Z===18)throw n(Q[1]);throw n(f0.VERIFY_UINT+`at pos: ${Q[0]}: ${Q[1]}`)}case f0.TYPE_SIZE:throw n(f0.TYPE_SIZE+Q[0]);case f0.TYPE_SECTIONS:throw n(`${f0.TYPE_SECTIONS} (types ${Q[0]} code ${Q[1]})`);case f0.INVALID_TYPE_SIZE:throw n(f0.INVALID_TYPE_SIZE);case f0.INVALID_CODE_SIZE:throw n(f0.INVALID_CODE_SIZE+Q[0]);case f0.INPUTS:throw n(`${f0.INPUTS} - typeSection ${Q[0]}`);case f0.OUTPUTS:throw n(`${f0.OUTPUTS} - typeSection ${Q[0]}`);case f0.CODE0_INPUTS:throw n("first code section should have 0 inputs");case f0.CODE0_OUTPUTS:throw n("first code section should have 0 outputs");case f0.MAX_INPUTS:throw n(f0.MAX_INPUTS+`${Q[1]} - code section ${Q[0]}`);case f0.MAX_OUTPUTS:throw n(f0.MAX_OUTPUTS+`${Q[1]} - code section ${Q[0]}`);case f0.CODE_SECTION:throw n(`expected code: codeSection ${Q[0]}: `);case f0.DATA_SECTION:throw n(f0.DATA_SECTION);case f0.MAX_STACK_HEIGHT:throw n(`${f0.MAX_STACK_HEIGHT} - typeSection ${Q[0]}: `);case f0.MAX_STACK_HEIGHT_LIMIT:throw n(`${f0.MAX_STACK_HEIGHT_LIMIT}, got: ${Q[1]} - typeSection ${Q[0]}`);case f0.DANGLING_BYTES:throw n(f0.DANGLING_BYTES);default:throw n($)}}var f0;var XD=p(()=>{Z1();f0={OUT_OF_BOUNDS:"Trying to read out of bounds",VERIFY_UINT:"Uint does not match expected value ",VERIFY_BYTES:"Bytes do not match expected value",FORMAT:"err: invalid format",MAGIC:"err: invalid magic",VERSION:"err: invalid eof version",KIND_TYPE:"err: expected kind types",KIND_CODE:"err: expected kind code",KIND_DATA:"err: expected kind data",TERMINATOR:"err: expected terminator",TYPE_SIZE:"missing type size",INVALID_TYPE_SIZE:"err: type section size invalid",CODE_SIZE:"missing code size",CODE_SECTION_SIZE:"code section should be at least one byte",INVALID_CODE_SIZE:"code size does not match type size",DATA_SIZE:"missing data size",CONTAINER_SIZE:"missing container size",CONTAINER_SECTION_SIZE:"container section should at least contain one section and at most 255 sections",TYPE_SECTIONS:"err: mismatch of code sections count and type signatures",INPUTS:"expected inputs",OUTPUTS:"expected outputs",MAX_INPUTS:"inputs exceeds 127, the maximum, got: ",MAX_OUTPUTS:"outputs exceeds 127, the maximum, got: ",CODE0_INPUTS:"first code section should have 0 inputs",CODE0_OUTPUTS:"first code section should have 0x80 (terminating section) outputs",MAX_STACK_HEIGHT:"expected maxStackHeight",MAX_STACK_HEIGHT_LIMIT:"stack height limit of 1024 exceeded: ",MIN_CODE_SECTIONS:"should have at least 1 code section",CODE_SECTION:"expected a code section",DATA_SECTION:"Expected data section",CONTAINER_SECTION:"expected a container section",CONTAINER_SECTION_MIN:"container section should be at least 1 byte",INVALID_EOF_CREATE_TARGET:"EOFCREATE targets an undefined container",INVALID_RETURN_CONTRACT_TARGET:"RETURNCONTRACT targets an undefined container",CONTAINER_DOUBLE_TYPE:"Container is targeted by both EOFCREATE and RETURNCONTRACT",UNREACHABLE_CONTAINER_SECTIONS:"Unreachable containers (by both EOFCREATE and RETURNCONTRACT)",CONTAINER_TYPE_ERROR:"Container contains opcodes which this mode (deployment mode / init code / runtime mode) cannot have",DANGLING_BYTES:"got dangling bytes in body",INVALID_OPCODE:"invalid opcode",INVALID_TERMINATOR:"invalid terminating opcode",OPCODE_INTERMEDIATES_OOB:"invalid opcode: intermediates out-of-bounds",INVALID_RJUMP:"invalid rjump* target",INVALID_CALL_TARGET:"invalid callf/jumpf target",INVALID_CALLF_RETURNING:"invalid callf: calls to non-returning function",INVALID_STACK_HEIGHT:"invalid stack height",INVALID_JUMPF:"invalid jumpf target (output count)",INVALID_RETURNING_SECTION:"invalid returning code section: section is not returning",RETURNING_NO_RETURN:"invalid section: section should return but has no RETF/JUMP to return",RJUMPV_TABLE_SIZE0:"invalid RJUMPV: table size 0",UNREACHABLE_CODE_SECTIONS:"unreachable code sections",UNREACHABLE_CODE:"unreachable code (by forward jumps)",DATALOADN_OOB:"DATALOADN reading out of bounds",MAX_STACK_HEIGHT_VIOLATION:"Max stack height does not match the reported max stack height",STACK_UNDERFLOW:"Stack underflow",STACK_OVERFLOW:"Stack overflow",UNSTABLE_STACK:"Unstable stack (can reach stack under/overflow by jumps)",RETF_NO_RETURN:"Trying to return to undefined function",RETURN_STACK_OVERFLOW:"Return stack overflow",INVALID_EXTCALL_TARGET:"invalid extcall target: address > 20 bytes",INVALID_RETURN_CONTRACT_DATA_SIZE:"invalid RETURNCONTRACT: data size lower than expected"}});var LZ;var c_=p(()=>{LZ={0:{inputs:0,outputs:0,name:"STOP",intermediates:0,terminating:!0},1:{inputs:2,outputs:1,name:"ADD",intermediates:0},2:{inputs:2,outputs:1,name:"MUL",intermediates:0},3:{inputs:2,outputs:1,name:"SUB",intermediates:0},4:{inputs:2,outputs:1,name:"DIV",intermediates:0},5:{inputs:2,outputs:1,name:"SDIV",intermediates:0},6:{inputs:2,outputs:1,name:"MOD",intermediates:0},7:{inputs:2,outputs:1,name:"SMOD",intermediates:0},8:{inputs:3,outputs:1,name:"ADDMOD",intermediates:0},9:{inputs:3,outputs:1,name:"MULMOD",intermediates:0},10:{inputs:2,outputs:1,name:"EXP",intermediates:0},11:{inputs:2,outputs:1,name:"SIGNEXTEND",intermediates:0},16:{inputs:2,outputs:1,name:"LT",intermediates:0},17:{inputs:2,outputs:1,name:"GT",intermediates:0},18:{inputs:2,outputs:1,name:"SLT",intermediates:0},19:{inputs:2,outputs:1,name:"SGT",intermediates:0},20:{inputs:2,outputs:1,name:"EQ",intermediates:0},21:{inputs:1,outputs:1,name:"ISZERO",intermediates:0},22:{inputs:2,outputs:1,name:"AND",intermediates:0},23:{inputs:2,outputs:1,name:"OR",intermediates:0},24:{inputs:2,outputs:1,name:"XOR",intermediates:0},25:{inputs:1,outputs:1,name:"NOT",intermediates:0},26:{inputs:2,outputs:1,name:"BYTE",intermediates:0},27:{inputs:2,outputs:1,name:"SHL",intermediates:0},28:{inputs:2,outputs:1,name:"SHR",intermediates:0},29:{inputs:2,outputs:1,name:"SAR",intermediates:0},32:{inputs:2,outputs:1,name:"SHA3",intermediates:0},48:{inputs:0,outputs:1,name:"ADDRESS",intermediates:0},49:{inputs:1,outputs:1,name:"BALANCE",intermediates:0},50:{inputs:0,outputs:1,name:"ORIGIN",intermediates:0},51:{inputs:0,outputs:1,name:"CALLER",intermediates:0},52:{inputs:0,outputs:1,name:"CALLVALUE",intermediates:0},53:{inputs:1,outputs:1,name:"CALLDATALOAD",intermediates:0},54:{inputs:0,outputs:1,name:"CALLDATASIZE",intermediates:0},55:{inputs:3,outputs:0,name:"CALLDATACOPY",intermediates:0},58:{inputs:0,outputs:1,name:"GASPRICE",intermediates:0},61:{inputs:0,outputs:1,name:"RETURNDATASIZE",intermediates:0},62:{inputs:3,outputs:0,name:"RETURNDATACOPY",intermediates:0},64:{inputs:1,outputs:1,name:"BLOCKHASH",intermediates:0},65:{inputs:0,outputs:1,name:"COINBASE",intermediates:0},66:{inputs:0,outputs:1,name:"TIMESTAMP",intermediates:0},67:{inputs:0,outputs:1,name:"NUMBER",intermediates:0},68:{inputs:0,outputs:1,name:"PREVRANDAO",intermediates:0},69:{inputs:0,outputs:1,name:"GASLIMIT",intermediates:0},70:{inputs:0,outputs:1,name:"CHAINID",intermediates:0},71:{inputs:0,outputs:1,name:"SELFBALANCE",intermediates:0},72:{inputs:0,outputs:1,name:"BASEFEE",intermediates:0},73:{inputs:1,outputs:1,name:"BLOBAHASH",intermediates:0},74:{inputs:0,outputs:1,name:"BLOBBASEFEE",intermediates:0},80:{inputs:1,outputs:0,name:"POP",intermediates:0},81:{inputs:1,outputs:1,name:"MLOAD",intermediates:0},82:{inputs:2,outputs:0,name:"MSTORE",intermediates:0},83:{inputs:2,outputs:0,name:"MSTORE8",intermediates:0},84:{inputs:1,outputs:1,name:"SLOAD",intermediates:0},85:{inputs:2,outputs:0,name:"SSTORE",intermediates:0},89:{inputs:0,outputs:1,name:"MSIZE",intermediates:0},91:{inputs:0,outputs:0,name:"NOOP",intermediates:0},92:{inputs:1,outputs:1,name:"TLOAD",intermediates:0},93:{inputs:2,outputs:0,name:"TSTORE",intermediates:0},94:{inputs:3,outputs:0,name:"MCOPY",intermediates:0},95:{inputs:0,outputs:1,name:"PUSH0",intermediates:0},96:{inputs:0,outputs:1,name:"PUSH1",intermediates:1},97:{inputs:0,outputs:1,name:"PUSH2",intermediates:2},98:{inputs:0,outputs:1,name:"PUSH3",intermediates:3},99:{inputs:0,outputs:1,name:"PUSH4",intermediates:4},100:{inputs:0,outputs:1,name:"PUSH5",intermediates:5},101:{inputs:0,outputs:1,name:"PUSH6",intermediates:6},102:{inputs:0,outputs:1,name:"PUSH7",intermediates:7},103:{inputs:0,outputs:1,name:"PUSH8",intermediates:8},104:{inputs:0,outputs:1,name:"PUSH9",intermediates:9},105:{inputs:0,outputs:1,name:"PUSH10",intermediates:10},106:{inputs:0,outputs:1,name:"PUSH11",intermediates:11},107:{inputs:0,outputs:1,name:"PUSH12",intermediates:12},108:{inputs:0,outputs:1,name:"PUSH13",intermediates:13},109:{inputs:0,outputs:1,name:"PUSH14",intermediates:14},110:{inputs:0,outputs:1,name:"PUSH15",intermediates:15},111:{inputs:0,outputs:1,name:"PUSH16",intermediates:16},112:{inputs:0,outputs:1,name:"PUSH17",intermediates:17},113:{inputs:0,outputs:1,name:"PUSH18",intermediates:18},114:{inputs:0,outputs:1,name:"PUSH19",intermediates:19},115:{inputs:0,outputs:1,name:"PUSH20",intermediates:20},116:{inputs:0,outputs:1,name:"PUSH21",intermediates:21},117:{inputs:0,outputs:1,name:"PUSH22",intermediates:22},118:{inputs:0,outputs:1,name:"PUSH23",intermediates:23},119:{inputs:0,outputs:1,name:"PUSH24",intermediates:24},120:{inputs:0,outputs:1,name:"PUSH25",intermediates:25},121:{inputs:0,outputs:1,name:"PUSH26",intermediates:26},122:{inputs:0,outputs:1,name:"PUSH27",intermediates:27},123:{inputs:0,outputs:1,name:"PUSH28",intermediates:28},124:{inputs:0,outputs:1,name:"PUSH29",intermediates:29},125:{inputs:0,outputs:1,name:"PUSH30",intermediates:30},126:{inputs:0,outputs:1,name:"PUSH31",intermediates:31},127:{inputs:0,outputs:1,name:"PUSH32",intermediates:32},128:{inputs:1,outputs:2,name:"DUP1",intermediates:0},129:{inputs:2,outputs:3,name:"DUP2",intermediates:0},130:{inputs:3,outputs:4,name:"DUP3",intermediates:0},131:{inputs:4,outputs:5,name:"DUP4",intermediates:0},132:{inputs:5,outputs:6,name:"DUP5",intermediates:0},133:{inputs:6,outputs:7,name:"DUP6",intermediates:0},134:{inputs:7,outputs:8,name:"DUP7",intermediates:0},135:{inputs:8,outputs:9,name:"DUP8",intermediates:0},136:{inputs:9,outputs:10,name:"DUP9",intermediates:0},137:{inputs:10,outputs:11,name:"DUP10",intermediates:0},138:{inputs:11,outputs:12,name:"DUP11",intermediates:0},139:{inputs:12,outputs:13,name:"DUP12",intermediates:0},140:{inputs:13,outputs:14,name:"DUP13",intermediates:0},141:{inputs:14,outputs:15,name:"DUP14",intermediates:0},142:{inputs:15,outputs:16,name:"DUP15",intermediates:0},143:{inputs:16,outputs:17,name:"DUP16",intermediates:0},144:{inputs:2,outputs:2,name:"SWAP1",intermediates:0},145:{inputs:3,outputs:3,name:"SWAP2",intermediates:0},146:{inputs:4,outputs:4,name:"SWAP3",intermediates:0},147:{inputs:5,outputs:5,name:"SWAP4",intermediates:0},148:{inputs:6,outputs:6,name:"SWAP5",intermediates:0},149:{inputs:7,outputs:7,name:"SWAP6",intermediates:0},150:{inputs:8,outputs:8,name:"SWAP7",intermediates:0},151:{inputs:9,outputs:9,name:"SWAP8",intermediates:0},152:{inputs:10,outputs:10,name:"SWAP9",intermediates:0},153:{inputs:11,outputs:11,name:"SWAP10",intermediates:0},154:{inputs:12,outputs:12,name:"SWAP11",intermediates:0},155:{inputs:13,outputs:13,name:"SWAP12",intermediates:0},156:{inputs:14,outputs:14,name:"SWAP13",intermediates:0},157:{inputs:15,outputs:15,name:"SWAP14",intermediates:0},158:{inputs:16,outputs:16,name:"SWAP15",intermediates:0},159:{inputs:17,outputs:17,name:"SWAP16",intermediates:0},160:{inputs:2,outputs:0,name:"LOG0",intermediates:0},161:{inputs:3,outputs:0,name:"LOG1",intermediates:0},162:{inputs:4,outputs:0,name:"LOG2",intermediates:0},163:{inputs:5,outputs:0,name:"LOG3",intermediates:0},164:{inputs:6,outputs:0,name:"LOG4",intermediates:0},208:{inputs:1,outputs:1,name:"DATALOAD",intermediates:0},209:{inputs:0,outputs:1,name:"DATALOADN",intermediates:2},210:{inputs:0,outputs:1,name:"DATASIZE",intermediates:0},211:{inputs:3,outputs:0,name:"DATACOPY",intermediates:0},224:{inputs:0,outputs:0,name:"RJUMP",intermediates:2},225:{inputs:1,outputs:0,name:"RJUMPI",intermediates:2},226:{inputs:1,outputs:0,name:"RJUMPV",intermediates:0},227:{inputs:0,outputs:0,name:"CALLF",intermediates:2},228:{inputs:0,outputs:0,name:"RETF",intermediates:0,terminating:!0},229:{inputs:0,outputs:0,name:"JUMPF",intermediates:2,terminating:!0},230:{inputs:0,outputs:1,name:"DUPN",intermediates:1},231:{inputs:0,outputs:0,name:"SWAPN",intermediates:1},232:{inputs:0,outputs:0,name:"EXCHANGE",intermediates:1},236:{inputs:4,outputs:1,name:"EOFCREATE",intermediates:1},238:{inputs:2,outputs:0,name:"RETURNCONTRACT",intermediates:1,terminating:!0},243:{inputs:2,outputs:0,name:"RETURN",intermediates:0,terminating:!0},247:{inputs:1,outputs:1,name:"RETURNDATALOAD",intermediates:0},248:{inputs:4,outputs:1,name:"EXTCALL",intermediates:0},249:{inputs:3,outputs:1,name:"EXTDELEGATECALL",intermediates:0},251:{inputs:3,outputs:1,name:"EXTSTATICCALL",intermediates:0},253:{inputs:2,outputs:0,name:"REVERT",intermediates:0,terminating:!0},254:{inputs:0,outputs:0,name:"INVALID",intermediates:0,terminating:!0}}});function q00($,Q,Z=c4.RuntimeCode){return wj0($,Q,Z)}function J00($,Q){return new DataView($.buffer).getInt16(Q)}function z00($,Q){return new DataView($.buffer).getUint16(Q)}function wj0($,Q,Z=c4.RuntimeCode){let X=new Map,Y=Q.getActiveOpcodes(),z=new Set;for(let[P]of Y)z.add(P);z.add(254),z.delete(56),z.delete(57),z.delete(90),z.delete(59),z.delete(60),z.delete(63),z.delete(242),z.delete(255),z.delete(86),z.delete(87),z.delete(88),z.delete(240),z.delete(245);let J=new Set;J.add(0),J.add(243),J.add(253),J.add(254),J.add(238),J.add(228),J.add(229),J.add(224);for(let P of J)if(!z.has(P))J.delete(P);let q=new Set,W={},G=-1;for(let P of $.body.codeSections){let C=function(b){if(H.has(b))V1(f0.INVALID_RJUMP);N.add(b)},L=function(b){if(N.has(b))V1(f0.INVALID_RJUMP);H.add(b)},H=new Set,N=new Set;G++,W[G]=new Set;let B=$.body.typeSections[G].outputs===128,E=!1,I=new Set;I.add(0);let _=0,f=0,x=$.body.typeSections[G].inputs,g=x,h=[x],v=[x];while(_<P.length){let b=new Set;if(!I.has(_))V1(f0.UNREACHABLE_CODE);if(h[_]===void 0||v[_]===void 0)V1(f0.UNREACHABLE_CODE);q.add(_);let m=P[_],K=h[_],M=v[_],j=LZ[m].inputs,O=LZ[m].outputs;if(K-j<0)V1(f0.STACK_UNDERFLOW);let R=O-j,F=K+R,A=M+R;if(A>1024)V1(f0.STACK_OVERFLOW);if(B&&m===228)V1(f0.INVALID_RETURNING_SECTION);if(f=m,!z.has(m))V1(f0.INVALID_OPCODE);if(m===224||m===225){let V=J00(P,_+1)+_+3;if(V<0||V>=P.length)V1(f0.INVALID_RJUMP);if(b.add(V),C(V),I.add(V),m===224){if(!I.has(_+3)&&_+3<P.length)V1(f0.UNREACHABLE_CODE)}}else if(m===226){let V=P[_+1]+1;if(V===void 0)V1(f0.OPCODE_INTERMEDIATES_OOB);else if(V===0)V1(f0.RJUMPV_TABLE_SIZE0);if(_+V*2+2>=P.length)V1(f0.OPCODE_INTERMEDIATES_OOB);let w=_+2+V*2;for(let k=0;k<V;k++){let S=_+2+k*2;L(S),L(S+1);let y=J00(P,S)+w;if(y<0||y>=P.length)V1(f0.OPCODE_INTERMEDIATES_OOB);b.add(y),C(y),I.add(y)}L(_+1),_+=2*V+1}else if(m===227||m===229){let V=z00(P,_+1);if(W[G].add(V),V>=$.header.codeSizes.length)V1(f0.INVALID_CALL_TARGET);if(m===227){let w=$.body.typeSections[V].outputs,k=$.body.typeSections[V].inputs;if(w===128)V1(f0.INVALID_CALLF_RETURNING);if(K<k)V1(f0.STACK_UNDERFLOW);if(M+$.body.typeSections[V].maxStackHeight-k>1024)V1(f0.STACK_OVERFLOW);F+=w-k,A+=w-k}else{let w=$.body.typeSections[G].outputs,k=$.body.typeSections[V].outputs,S=$.body.typeSections[V].inputs,y=k===128;if(k>w&&!y)V1(f0.INVALID_JUMPF);if(B&&k<=127)V1(f0.INVALID_RETURNING_SECTION);if(y){if(K<S)V1(f0.STACK_UNDERFLOW)}else{let u=w+S-k;if(!(K===M&&M===u))V1(f0.INVALID_STACK_HEIGHT);E=!0}if(M+$.body.typeSections[V].maxStackHeight-S>1024)V1(f0.STACK_OVERFLOW)}}else if(m===228){let V=$.body.typeSections[G].outputs;if(!(K===M&&M===V))V1(f0.INVALID_STACK_HEIGHT);E=!0}else if(m===230){if(P[_+1]+1>K)V1(f0.STACK_UNDERFLOW)}else if(m===231){if(P[_+1]+2>K)V1(f0.STACK_UNDERFLOW)}else if(m===232){let V=P[_+1],w=(V>>4)+1,k=(V&15)+1;if(w+k+1>K)V1(f0.STACK_UNDERFLOW)}else if(m===236){let V=P[_+1];if(V>=$.header.containerSizes.length)V1(f0.INVALID_EOF_CREATE_TARGET);if(X.has(V)){if(X.get(V)!==c4.InitCode)V1(f0.CONTAINER_DOUBLE_TYPE)}X.set(V,c4.InitCode)}else if(m===238){if(Z!==c4.InitCode)V1(f0.CONTAINER_TYPE_ERROR);let V=P[_+1];if(V>=$.header.containerSizes.length)V1(f0.INVALID_RETURN_CONTRACT_TARGET);if(X.has(V)){if(X.get(V)!==c4.DeploymentCode)V1(f0.CONTAINER_DOUBLE_TYPE)}X.set(V,c4.DeploymentCode)}else if(m===209){let w=z00(P,_+1)+32;if($.header.dataSize<w)V1(f0.DATALOADN_OOB)}else if(m===0||m===243){if(Z===c4.InitCode)V1(f0.CONTAINER_TYPE_ERROR)}let T=LZ[m].intermediates;if(T>0){for(let V=1;V<=T;V++)L(_+V);_+=T}if(_>=P.length)V1(f0.OPCODE_INTERMEDIATES_OOB);if(_++,LZ[m].terminating===void 0){if(I.add(_),m!==224)b.add(_)}for(let V of b){if(V<_){if(h[V]!==F||v[V]!==A)V1(f0.UNSTABLE_STACK)}if(v[V]===void 0)h[V]=F,v[V]=A;else h[V]=Math.min(h[V],F),v[V]=Math.max(v[V],A)}g=Math.max(A,g)}if(!J.has(f))V1(f0.INVALID_TERMINATOR);if($.body.typeSections[G].maxStackHeight!==g)V1(f0.MAX_STACK_HEIGHT_VIOLATION);if(g>1024)V1(f0.MAX_STACK_HEIGHT_LIMIT);if(!E&&!B)V1(f0.RETURNING_NO_RETURN)}let U=new Set;U.add(0);let D=[0];while(D.length>0){let P=W[D.pop()];for(let H of P)if(!U.has(H))U.add(H),D.push(H)}if(U.size!==$.header.codeSizes.length)V1(f0.UNREACHABLE_CODE_SECTIONS);if(X.size!==$.header.containerSizes.length)V1(f0.UNREACHABLE_CONTAINER_SECTIONS);return X}var c4;var d_=p(()=>{XD();c_();c4={InitCode:"initCode",DeploymentCode:"deploymentCode",RuntimeCode:"runtimeCode"}});class l_{constructor($){this.data=$,this.ptr=0}readBytes($,Q){let Z=this.ptr+$;if(Z>this.data.length)V1(f0.OUT_OF_BOUNDS,this.ptr,Q);let X=this.ptr;return this.ptr+=$,this.data.slice(X,Z)}readUint($){if(this.ptr>=this.data.length)V1(f0.OUT_OF_BOUNDS,this.ptr,$);return this.data[this.ptr++]}verifyUint($,Q){if(this.readUint()!==$)V1(f0.VERIFY_UINT,this.ptr-1,Q)}readUint16($){if(this.ptr+2>this.data.length)V1(f0.OUT_OF_BOUNDS,this.ptr,$);let Z=this.ptr;return this.ptr+=2,new DataView(this.data.buffer).getUint16(Z)}getPtr(){return this.ptr}readRemainder(){return this.data.slice(this.ptr)}isAtEnd(){return this.ptr===this.data.length}}class W00{constructor($){if($.length>ce)throw n("err: container size more than maximum valid size");let Q=new l_($);if(Q.verifyUint(SY,f0.FORMAT),Q.verifyUint(wG,f0.MAGIC),Q.verifyUint(lN,f0.VERSION),$.length<15)throw n("err: container size less than minimum valid size");Q.verifyUint(de,f0.KIND_TYPE);let Z=Q.readUint16(f0.TYPE_SIZE);if(Z<re)V1(f0.INVALID_TYPE_SIZE,Z);if(Z%iN!==0)V1(f0.INVALID_TYPE_SIZE,Z);if(Z>ae)throw n(`err: number of code sections must not exceed 1024 (got ${Z})`);Q.verifyUint(le,f0.KIND_CODE);let X=Q.readUint16(f0.CODE_SIZE);if(X<se)V1(f0.MIN_CODE_SECTIONS);if(X!==Z/iN)V1(f0.TYPE_SECTIONS,Z/iN,X);let Y=[];for(let G=0;G<X;G++){let U=Q.readUint16(f0.CODE_SECTION);if(U<te)V1(f0.CODE_SECTION_SIZE);Y.push(U)}let z=Q.readUint(),J=[];if(z===ie){let G=Q.readUint16(f0.CONTAINER_SIZE);if(G<ee)V1(f0.CONTAINER_SECTION_SIZE);if(G>$00)V1(f0.CONTAINER_SECTION_SIZE);for(let U=0;U<G;U++){let D=Q.readUint16(f0.CONTAINER_SECTION);if(D<Q00)V1(f0.CONTAINER_SECTION_MIN);J.push(D)}z=Q.readUint()}if(z!==oe)V1(f0.KIND_DATA);this.dataSizePtr=Q.getPtr();let q=Q.readUint16(f0.DATA_SIZE);Q.verifyUint(ne,f0.TERMINATOR),this.typeSize=Z,this.codeSizes=Y,this.containerSizes=J,this.dataSize=q,this.buffer=$.slice(0,Q.getPtr());let W=this.buffer.length+this.typeSize;this.codeStartPos=[W]}sections(){return[this.typeSize,this.codeSizes,this.containerSizes,this.dataSize]}sectionSizes(){return[1,this.codeSizes.length,this.containerSizes.length,1]}getCodePosition($){if(this.codeStartPos[$])return this.codeStartPos[$];let Q=this.codeStartPos.length,Z=this.codeStartPos[Q-1];for(let X=Q;X<=$;X++)Z+=this.codeSizes[X-1],this.codeStartPos[X]=Z;return Z}getSectionFromProgramCounter($){let Q=this.codeSizes.length-1,X=this.getCodePosition(Q)+this.codeSizes[Q];if($<0||$>X)throw n("program counter out of bounds");if(this.codeStartPos.length<this.codeSizes.length)this.getCodePosition(this.codeSizes.length-1);for(let Y=0;Y<this.codeSizes.length;Y++)if($<this.codeStartPos[Y]+this.codeSizes[Y])return Y;throw n(`Invalid program counter value: ${$}`)}}class K00{constructor($,Q,Z=d4.Default,X=!1){let Y=new l_($),z=[];for(let D=0;D<Q.typeSize/4;D++){let P=Y.readUint(f0.INPUTS),H=Y.readUint(f0.OUTPUTS),N=Y.readUint16(f0.MAX_STACK_HEIGHT);if(D===0){if(P!==0)V1(f0.CODE0_INPUTS);if(H!==128)V1(f0.CODE0_OUTPUTS)}if(P>Z00)V1(f0.MAX_INPUTS,D,P);if(H>X00)V1(f0.MAX_OUTPUTS,D,H);if(N>Y00)V1(f0.MAX_STACK_HEIGHT_LIMIT,D,N);z.push({inputs:P,outputs:H,maxStackHeight:N})}let J=Y.getPtr(),q=[];for(let[D,P]of Q.codeSizes.entries())try{let H=Y.readBytes(P);q.push(H)}catch{V1(f0.CODE_SECTION,D)}let W=$.slice(J,Y.getPtr()),G=[];for(let[D,P]of Q.containerSizes.entries())try{let H=Y.readBytes(P);G.push(H)}catch{V1(f0.CONTAINER_SECTION,D)}let U;if(Z!==d4.Initmode&&!X)if(U=Y.readBytes(Q.dataSize,f0.DATA_SECTION),Z===d4.Default){if(!Y.isAtEnd())V1(f0.DANGLING_BYTES)}else this.txCallData=Y.readRemainder();else if(U=Y.readRemainder(),U.length>Q.dataSize)V1(f0.DANGLING_BYTES);this.typeSections=z,this.codeSections=q,this.containerSections=G,this.entireCode=W,this.dataSection=U,this.buffer=$}sections(){return[this.typeSections,this.codeSections,this.dataSection]}size(){return{typeSize:this.typeSections.length,codeSize:this.codeSections.length,dataSize:this.dataSection.length}}sectionSizes(){return[this.typeSections.map(()=>4),this.codeSections.map(($)=>$.length),this.dataSection.length]}}class BG{constructor($,Q=d4.Default,Z=!1){this.eofMode=Q,this.header=new W00($),this.body=new K00($.slice(this.header.buffer.length),this.header,Q,Z),this.buffer=$}}function i_($,Q,Z=c4.RuntimeCode,X=d4.Default){let Y=new BG($,X,Z===c4.DeploymentCode),z=q00(Y,Q,Z);for(let J=0;J<Y.body.containerSections.length;J++){let q=Y.body.containerSections[J],W=z.get(J);i_(q,Q,W)}return Y}var d4;var oN=p(()=>{Z1();XD();d_();d4={Default:"default",Initmode:"initMode",TxInitmode:"txInitMode"}});class U0{constructor($){this.error=$,this.errorType="EVMError"}}var G00="EVMError",Bj0;var m8=p(()=>{Bj0={OUT_OF_GAS:"out of gas",CODESTORE_OUT_OF_GAS:"code store out of gas",CODESIZE_EXCEEDS_MAXIMUM:"code size to deposit exceeds maximum code size",STACK_UNDERFLOW:"stack underflow",STACK_OVERFLOW:"stack overflow",INVALID_JUMP:"invalid JUMP",INVALID_OPCODE:"invalid opcode",OUT_OF_RANGE:"value out of range",REVERT:"revert",STATIC_STATE_CHANGE:"static state change",INTERNAL_ERROR:"internal error",CREATE_COLLISION:"create collision",STOP:"stop",REFUND_EXHAUSTED:"refund exhausted",VALUE_OVERFLOW:"value overflow",INSUFFICIENT_BALANCE:"insufficient balance",INVALID_BYTECODE_RESULT:"invalid bytecode deployed",INITCODE_SIZE_VIOLATION:"initcode exceeds max initcode size",INVALID_INPUT_LENGTH:"invalid input length",INVALID_EOF_FORMAT:"invalid EOF format",BLS_12_381_INVALID_INPUT_LENGTH:"invalid input length",BLS_12_381_POINT_NOT_ON_CURVE:"point not on curve",BLS_12_381_INPUT_EMPTY:"input is empty",BLS_12_381_FP_NOT_IN_FIELD:"fp point not in field",BN254_FP_NOT_IN_FIELD:"fp point not in field",INVALID_COMMITMENT:"kzg commitment does not match versioned hash",INVALID_INPUTS:"kzg inputs invalid",INVALID_PROOF:"kzg proof invalid"};U0.errorMessages=Bj0});function Ej0($,Q=!1){if(Q)return{h:Number($&nN),l:Number($>>U00&nN)};return{h:Number($>>U00&nN)|0,l:Number($&nN)|0}}function V00($,Q=!1){let Z=$.length,X=new Uint32Array(Z),Y=new Uint32Array(Z);for(let z=0;z<Z;z++){let{h:J,l:q}=Ej0($[z],Q);[X[z],Y[z]]=[J,q]}return[X,Y]}var nN,U00,O00=($,Q,Z)=>$<<Z|Q>>>32-Z,D00=($,Q,Z)=>Q<<Z|$>>>32-Z,M00=($,Q,Z)=>Q<<Z-32|$>>>64-Z,P00=($,Q,Z)=>$<<Z-32|Q>>>64-Z;var H00=p(()=>{nN=BigInt(4294967295),U00=BigInt(32)});function Ij0($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function rN($){if(!Number.isSafeInteger($)||$<0)throw Error("positive integer expected, got "+$)}function TZ($,...Q){if(!Ij0($))throw Error("Uint8Array expected");if(Q.length>0&&!Q.includes($.length))throw Error("Uint8Array expected of length "+Q+", got length="+$.length)}function jq($,Q=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(Q&&$.finished)throw Error("Hash#digest() has already been called")}function YD($,Q){TZ($);let Z=Q.outputLen;if($.length<Z)throw Error("digestInto() expects output buffer of length at least "+Z)}function j00($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function _3(...$){for(let Q=0;Q<$.length;Q++)$[Q].fill(0)}function aN($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function S3($,Q){return $<<32-Q|$>>>Q}function JD($,Q){return $<<Q|$>>>32-Q>>>0}function Sj0($){return $<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255}function fj0($){for(let Q=0;Q<$.length;Q++)$[Q]=Sj0($[Q]);return $}function kj0($){if(typeof $!=="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function zD($){if(typeof $==="string")$=kj0($);return TZ($),$}class qD{}function EG($){let Q=(X)=>$().update(zD(X)).digest(),Z=$();return Q.outputLen=Z.outputLen,Q.blockLen=Z.blockLen,Q.create=()=>$(),Q}var _j0,o_;var IG=p(()=>{/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */_j0=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();o_=_j0?($)=>$:fj0});function pj0($,Q=24){let Z=new Uint32Array(10);for(let X=24-Q;X<24;X++){for(let J=0;J<10;J++)Z[J]=$[J]^$[J+10]^$[J+20]^$[J+30]^$[J+40];for(let J=0;J<10;J+=2){let q=(J+8)%10,W=(J+2)%10,G=Z[W],U=Z[W+1],D=R00(G,U,1)^Z[q],P=N00(G,U,1)^Z[q+1];for(let H=0;H<50;H+=10)$[J+H]^=D,$[J+H+1]^=P}let Y=$[2],z=$[3];for(let J=0;J<24;J++){let q=L00[J],W=R00(Y,z,q),G=N00(Y,z,q),U=C00[J];Y=$[U],z=$[U+1],$[U]=W,$[U+1]=G}for(let J=0;J<50;J+=10){for(let q=0;q<10;q++)Z[q]=$[J+q];for(let q=0;q<10;q++)$[J+q]^=~Z[(q+2)%10]&Z[(q+4)%10]}$[0]^=hj0[X],$[1]^=mj0[X]}_3(Z)}var xj0,WD,bj0,vj0,yj0,gj0,C00,L00,T00,F00,hj0,mj0,R00=($,Q,Z)=>Z>32?M00($,Q,Z):O00($,Q,Z),N00=($,Q,Z)=>Z>32?P00($,Q,Z):D00($,Q,Z),n_,sN=($,Q,Z)=>EG(()=>new n_(Q,$,Z)),A00,r_,w00,B00;var E00=p(()=>{H00();IG();xj0=BigInt(0),WD=BigInt(1),bj0=BigInt(2),vj0=BigInt(7),yj0=BigInt(256),gj0=BigInt(113),C00=[],L00=[],T00=[];for(let $=0,Q=WD,Z=1,X=0;$<24;$++){[Z,X]=[X,(2*Z+3*X)%5],C00.push(2*(5*X+Z)),L00.push(($+1)*($+2)/2%64);let Y=xj0;for(let z=0;z<7;z++)if(Q=(Q<<WD^(Q>>vj0)*gj0)%yj0,Q&bj0)Y^=WD<<(WD<<BigInt(z))-WD;T00.push(Y)}F00=V00(T00,!0),hj0=F00[0],mj0=F00[1];n_=class n_ extends qD{constructor($,Q,Z,X=!1,Y=24){super();if(this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=$,this.suffix=Q,this.outputLen=Z,this.enableXOF=X,this.rounds=Y,rN(Z),!(0<$&&$<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=j00(this.state)}clone(){return this._cloneInto()}keccak(){o_(this.state32),pj0(this.state32,this.rounds),o_(this.state32),this.posOut=0,this.pos=0}update($){jq(this),$=zD($),TZ($);let{blockLen:Q,state:Z}=this,X=$.length;for(let Y=0;Y<X;){let z=Math.min(Q-this.pos,X-Y);for(let J=0;J<z;J++)Z[this.pos++]^=$[Y++];if(this.pos===Q)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:$,suffix:Q,pos:Z,blockLen:X}=this;if($[Z]^=Q,(Q&128)!==0&&Z===X-1)this.keccak();$[X-1]^=128,this.keccak()}writeInto($){jq(this,!1),TZ($),this.finish();let Q=this.state,{blockLen:Z}=this;for(let X=0,Y=$.length;X<Y;){if(this.posOut>=Z)this.keccak();let z=Math.min(Z-this.posOut,Y-X);$.set(Q.subarray(this.posOut,this.posOut+z),X),this.posOut+=z,X+=z}return $}xofInto($){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto($)}xof($){return rN($),this.xofInto(new Uint8Array($))}digestInto($){if(YD($,this),this.finished)throw Error("digest() was already called");return this.writeInto($),this.destroy(),$}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,_3(this.state)}_cloneInto($){let{blockLen:Q,suffix:Z,outputLen:X,rounds:Y,enableXOF:z}=this;return $||($=new n_(Q,Z,X,z,Y)),$.state32.set(this.state32),$.pos=this.pos,$.posOut=this.posOut,$.finished=this.finished,$.rounds=Y,$.suffix=Z,$.outputLen=X,$.enableXOF=z,$.destroyed=this.destroyed,$}};A00=(()=>sN(1,144,28))(),r_=(()=>sN(1,136,32))(),w00=(()=>sN(1,104,48))(),B00=(()=>sN(1,72,64))()});var I00;var _00=p(()=>{IG();I00=TZ});function FZ($){return(Q)=>{return I00(Q),$(Q)}}var tN=p(()=>{_00()});var Qa0,_G,Za0,Xa0;var eN=p(()=>{E00();tN();Qa0=FZ(A00),_G=(()=>{let $=FZ(r_);return $.create=r_.create,$})(),Za0=FZ(w00),Xa0=FZ(B00)});function AZ($){let Q=$.subarray(0,SG.length);return X1(SG,Q)}var SG,S00;var a_=p(()=>{Z1();eN();SG=new Uint8Array([SY,wG]),S00=_G(SG)});function f00($,Q=d4.Default){if($.env.eof={container:new BG($.code,Q),eofRunState:{returnStack:[]}},$.env.eof.container.body.txCallData!==void 0)$.env.callData=$.env.eof.container.body.txCallData;let Z=$.env.eof.container.header.getCodePosition(0);$.programCounter=Z}var k00=p(()=>{oN()});class x00{constructor($){this.runTime=0,this.tag=$,this.startTime=performance.now()}pause(){this.runTime=this.runTime+performance.now()-this.startTime}unpause(){this.startTime=performance.now()}time(){return(performance.now()-this.startTime+this.runTime)/1000}}class s_{constructor(){this.clear()}clear(){this.opcodes={},this.precompiles={}}getLogs(){function $(Q){let Z=[];for(let X in Q){let Y=Q[X],z=Y.gasUsed/Y.time,J={calls:Y.calls,totalTime:Math.round(Y.time*1e6)/1000,avgTimePerCall:Math.round(Y.time/Y.calls*1e6)/1000,gasUsed:Y.gasUsed,millionGasPerSecond:Math.round(z/1000)/1000,blocksPerSlot:Math.round(z/dj0*1000)/1000,tag:X};if(Y.dynamicGasUsed!==void 0)J.staticGas=Y.staticGas,J.staticGasUsed=Y.staticGas*Y.calls,J.dynamicGasUsed=Y.dynamicGasUsed;Z.push(J)}return Z.sort((X,Y)=>{return Y.millionGasPerSecond-X.millionGasPerSecond}),Z}return{opcodes:$(this.opcodes),precompiles:$(this.precompiles)}}hasTimer(){return this.currentTimer!==void 0}startTimer($){if(this.currentTimer!==void 0)throw n("Cannot have two timers running at the same time");return this.currentTimer=new x00($),this.currentTimer}pauseTimer(){let $=this.currentTimer;if($===void 0)throw n("No timer to pause");return $.pause(),this.currentTimer=void 0,$}unpauseTimer($){if(this.currentTimer!==void 0)throw n("Cannot unpause timer: another timer is already running");$.unpause(),this.currentTimer=$}stopTimer($,Q,Z="opcodes",X,Y){if(this.currentTimer===void 0||this.currentTimer!==$)throw n("Cannot stop timer: another timer is already running");let z=$.time(),J=$.tag;this.currentTimer=void 0;let q=this[Z];if(q[J]===void 0)q[J]={calls:0,time:0,gasUsed:0};let W=q[J];if(W.calls++,W.time+=z,W.gasUsed+=Q,Z==="opcodes")W.staticGas=X,W.dynamicGasUsed=(W.dynamicGasUsed??0)+Y}}var uj0=30000000,cj0=12,dj0;var t_=p(()=>{Z1();dj0=uj0/cj0});class $S{constructor(){this._store=new Uint8Array(e_)}extend($,Q){if(Q===0)return;let X=lj0($+Q,32)-this._store.length;if(X>0){let Y=Math.ceil(X/e_)*e_;this._store=d1(this._store,new Uint8Array(Y))}}write($,Q,Z){if(Q===0)return;if(this.extend($,Q),Z.length!==Q)throw n("Invalid value size");if($+Q>this._store.length)throw n("Value exceeds memory capacity");this._store.set(Z,$)}read($,Q,Z){this.extend($,Q);let X=this._store.subarray($,$+Q);if(Z===!0)return X;let Y=new Uint8Array(Q);return Y.set(X),Y}}var lj0=($,Q)=>{let Z=$%Q;if(Z===0)return $;else return $+Q-Z},e_=8192;var b00=p(()=>{Z1()});class u${constructor($){if(this.to=$.to,this.value=$.value??fY.value,this.caller=$.caller??fY.caller,this.gasLimit=$.gasLimit,this.data=$.data??fY.data,this.eofCallData=$.eofCallData,this.depth=$.depth??fY.depth,this.code=$.code,this._codeAddress=$.codeAddress,this.isStatic=$.isStatic??fY.isStatic,this.isCompiled=$.isCompiled??fY.isCompiled,this.salt=$.salt,this.selfdestruct=$.selfdestruct,this.createdAddresses=$.createdAddresses,this.delegatecall=$.delegatecall??fY.delegatecall,this.gasRefund=$.gasRefund??fY.gasRefund,this.blobVersionedHashes=$.blobVersionedHashes,this.accessWitness=$.accessWitness,this.value<0)throw n(`value field cannot be negative, received ${this.value}`)}get codeAddress(){let $=this._codeAddress??this.to;if(!$)throw n("Missing codeAddress");return $}}var fY;var QS=p(()=>{Z1();fY={value:Q0,caller:E2(),data:new Uint8Array(0),depth:0,isStatic:!1,isCompiled:!1,delegatecall:!1,gasRefund:Q0}});function wZ($,Q){let Z=$%Q;if(Z<Q0)Z=Q+Z;return Z}function BZ($){return BigInt.asIntN(256,$)}function ZS($){return BigInt.asUintN(256,$)}function y00($,Q){let Z=A1;while(Q>Q0){if(Q%I8!==Q0)Z=Z*$%v00;$=$*$%v00,Q=Q/I8}return Z}function r5($){let Q=$&ij0;return Vr(Q)}function fG($){if(X1($,new Uint8Array($.length)))return new Uint8Array(0);else return b1($,32)}function W1($){throw new U0($)}function KD($){let Q=$.interpreter._evm.common.customCrypto.keccak256??_G,Z=H0(Q($.interpreter.getCode())),X=$.interpreter.getAddress().toString(),Y=$.programCounter-1;return`${Z}/${X}:${Y}`}function c$($,Q){let Z=$/Q;if(wZ($,Q)===Q0)return Z;return Z<Q0?Z-A1:Z+A1}function Rq($,Q,Z){let X=BigInt($.length);if(Q>X)Q=X;let Y=Q+Z;if(Y>X)Y=X;return $=$.subarray(Number(Q),Number(Y)),$=E8($,Number(Z)),$}function g00($,Q){switch(Q){case"LOG":Q+=$-160;break;case"PUSH":Q+=$-95;break;case"DUP":Q+=$-127;break;case"SWAP":Q+=$-143;break}return Q}function XS($,Q){return $.validJumps[Q]===1}function kY($,Q,Z,X){if(X.gteHardfork(w0.TangerineWhistle)){let Y=Q-Q/GY;return $>Y?Y:$}else return $}function O6($,Q,Z,X){if(Z===Q0)return Q0;let Y=c$(Q+Z,Z8);if(Y<=$.memoryWordCount)return Q0;let z=Y,J=X.param("memoryGas"),q=X.param("quadCoefficientDivGas"),W=z*J+z*z/q;if(W>$.highestMemCost){let G=$.highestMemCost;$.highestMemCost=W,W-=G}return $.memoryWordCount=Y,W}function GD($,Q,Z){let X=$.interpreter.getReturnData();if(X.length>0){let Y=Number(Q),z=Number(Z);if(BigInt(X.length)<z)z=X.length;let J=Rq(X,Q0,BigInt(z));$.memory.extend(Y,z),$.memory.write(Y,z,J)}}function h00($,Q,Z,X){if(Z.length===0&&Q.length===0||Z.length>0&&Q.length>0)return X.param("sstoreResetGas");else if(Z.length===0&&Q.length>0){let Y=X.param("sstoreResetGas");return $.interpreter.refundGas(X.param("sstoreRefundGas"),"updateSstoreGas"),Y}else return X.param("sstoreSetGas")}var ij0,v00;var kG=p(()=>{$9();Z1();eN();m8();ij0=(A1<<wR)-A1;v00=BigInt(115792089237316200000000000000000000000000000000000000000000000000000000000000)});var d$,oj0,nj0,rj0,aj0;var YS=p(()=>{Z1();eN();oN();XD();a_();m8();kG();d$=new Map([[0,function(){W1(U0.errorMessages.STOP)}],[1,function($){let[Q,Z]=$.stack.popN(2),X=wZ(Q+Z,LO);$.stack.push(X)}],[2,function($){let[Q,Z]=$.stack.popN(2),X=wZ(Q*Z,LO);$.stack.push(X)}],[3,function($){let[Q,Z]=$.stack.popN(2),X=wZ(Q-Z,LO);$.stack.push(X)}],[4,function($){let[Q,Z]=$.stack.popN(2),X;if(Z===Q0)X=Q0;else X=wZ(Q/Z,LO);$.stack.push(X)}],[5,function($){let[Q,Z]=$.stack.popN(2),X;if(Z===Q0)X=Q0;else X=ZS(BZ(Q)/BZ(Z));$.stack.push(X)}],[6,function($){let[Q,Z]=$.stack.popN(2),X;if(Z===Q0)X=Z;else X=wZ(Q,Z);$.stack.push(X)}],[7,function($){let[Q,Z]=$.stack.popN(2),X;if(Z===Q0)X=Z;else X=BZ(Q)%BZ(Z);$.stack.push(ZS(X))}],[8,function($){let[Q,Z,X]=$.stack.popN(3),Y;if(X===Q0)Y=Q0;else Y=wZ(Q+Z,X);$.stack.push(Y)}],[9,function($){let[Q,Z,X]=$.stack.popN(3),Y;if(X===Q0)Y=Q0;else Y=wZ(Q*Z,X);$.stack.push(Y)}],[10,function($){let[Q,Z]=$.stack.popN(2);if(Q===I8)switch(Z){case TO:$.stack.push(an);return;case wR:$.stack.push(sn);return;case rn:$.stack.push(tn);return}if(Z===Q0){$.stack.push(A1);return}if(Q===Q0){$.stack.push(Q);return}let X=y00(Q,Z);$.stack.push(X)}],[11,function($){let[Q,Z]=$.stack.popN(2);if(Q<ez){let X=Q*w$+eK,Y=(A1<<X)-A1;if(Z>>X&A1)Z=Z|BigInt.asUintN(256,~Y);else Z=Z&Y}$.stack.push(Z)}],[16,function($){let[Q,Z]=$.stack.popN(2),X=Q<Z?A1:Q0;$.stack.push(X)}],[17,function($){let[Q,Z]=$.stack.popN(2),X=Q>Z?A1:Q0;$.stack.push(X)}],[18,function($){let[Q,Z]=$.stack.popN(2),X=BZ(Q)<BZ(Z)?A1:Q0;$.stack.push(X)}],[19,function($){let[Q,Z]=$.stack.popN(2),X=BZ(Q)>BZ(Z)?A1:Q0;$.stack.push(X)}],[20,function($){let[Q,Z]=$.stack.popN(2),X=Q===Z?A1:Q0;$.stack.push(X)}],[21,function($){let Z=$.stack.pop()===Q0?A1:Q0;$.stack.push(Z)}],[22,function($){let[Q,Z]=$.stack.popN(2),X=Q&Z;$.stack.push(X)}],[23,function($){let[Q,Z]=$.stack.popN(2),X=Q|Z;$.stack.push(X)}],[24,function($){let[Q,Z]=$.stack.popN(2),X=Q^Z;$.stack.push(X)}],[25,function($){let Q=$.stack.pop(),Z=BigInt.asUintN(256,~Q);$.stack.push(Z)}],[26,function($){let[Q,Z]=$.stack.popN(2);if(Q>Z8){$.stack.push(Q0);return}let X=Z>>(ez-Q)*w$&AR;$.stack.push(X)}],[27,function($){let[Q,Z]=$.stack.popN(2);if(Q>QG){$.stack.push(Q0);return}let X=Z<<Q&FR;$.stack.push(X)}],[28,function($){let[Q,Z]=$.stack.popN(2);if(Q>256){$.stack.push(Q0);return}let X=Z>>Q;$.stack.push(X)}],[29,function($){let[Q,Z]=$.stack.popN(2),X,z=BigInt.asIntN(256,Z)<0;if(Q>256){if(z)X=FR;else X=Q0;$.stack.push(X);return}let J=Z>>Q;if(z){let q=AR-Q,W=FR>>q<<q;X=J|W}else X=J;$.stack.push(X)}],[30,function($){let Q=$.stack.pop();if(Q===Q0){$.stack.push(QG);return}let X=256-Q.toString(2).length;$.stack.push(BigInt(X))}],[32,function($,Q){let[Z,X]=$.stack.popN(2),Y=new Uint8Array(0);if(X!==Q0)Y=$.memory.read(Number(Z),Number(X));let z=BigInt(H0((Q.customCrypto.keccak256??_G)(Y)));$.stack.push(z)}],[48,function($){let Q=L0($.interpreter.getAddress().bytes);$.stack.push(Q)}],[49,async function($){let Q=$.stack.pop(),Z=r5(Q),X=await $.interpreter.getExternalBalance(Z);$.stack.push(X)}],[50,function($){$.stack.push($.interpreter.getTxOrigin())}],[51,function($){$.stack.push($.interpreter.getCaller())}],[52,function($){$.stack.push($.interpreter.getCallValue())}],[53,function($){let Q=$.stack.pop();if(Q>$.interpreter.getCallDataSize()){$.stack.push(Q0);return}let Z=Number(Q),X=$.interpreter.getCallData().subarray(Z,Z+32);X=X.length?X:Uint8Array.from([0]);let Y=L0(X);if(X.length<32)Y=Y<<w$*BigInt(32-X.length);$.stack.push(Y)}],[54,function($){let Q=$.interpreter.getCallDataSize();$.stack.push(Q)}],[55,function($){let[Q,Z,X]=$.stack.popN(3);if(X!==Q0){let Y=Rq($.interpreter.getCallData(),Z,X),z=Number(Q),J=Number(X);$.memory.write(z,J,Y)}}],[56,function($){$.stack.push($.interpreter.getCodeSize())}],[57,function($){let[Q,Z,X]=$.stack.popN(3);if(X!==Q0){let Y=Rq($.interpreter.getCode(),Z,X),z=Number(Q),J=Number(X);$.memory.write(z,J,Y)}}],[59,async function($){let Q=$.stack.pop(),Z=r5(Q),X=await $.stateManager.getCode(Z);if(AZ(X)){$.stack.push(BigInt(SG.length));return}let Y=BigInt(X.length);$.stack.push(Y)}],[60,async function($){let[Q,Z,X,Y]=$.stack.popN(4);if(Y!==Q0){let z=r5(Q),J=await $.stateManager.getCode(z);if(AZ(J))J=SG;let q=Rq(J,X,Y),W=Number(Z),G=Number(Y);$.memory.write(W,G,q)}}],[63,async function($){let Q=$.stack.pop(),Z=r5(Q),X=await $.stateManager.getCode(Z);if(AZ(X)){$.stack.push(L0(S00));return}let Y=await $.stateManager.getAccount(Z);if(!Y||Y.isEmpty()){$.stack.push(Q0);return}$.stack.push(BigInt(H0(Y.codeHash)))}],[61,function($){$.stack.push($.interpreter.getReturnDataSize())}],[62,function($){let[Q,Z,X]=$.stack.popN(3);if(X!==Q0){let Y=Rq($.interpreter.getReturnData(),Z,X),z=Number(Q),J=Number(X);$.memory.write(z,J,Y)}}],[58,function($){$.stack.push($.interpreter.getTxGasPrice())}],[64,async function($,Q){let Z=$.stack.pop();if(Q.isActivatedEIP(7709)){if(Z>=$.interpreter.getBlockNumber()){$.stack.push(Q0);return}let X=$.interpreter.getBlockNumber()-Z;if(X>QG||X<=Q0){$.stack.push(Q0);return}let Y=new Q6(pn(Q.param("historyStorageAddress"))),z=Q.param("historyServeWindow"),J=b1(Z5(Z%z),32);if(Q.isActivatedEIP(6800)||Q.isActivatedEIP(7864)){let W=$.env.accessWitness.readAccountStorage(Y,Z);$.interpreter.useGas(W,"BLOCKHASH")}let q=await $.stateManager.getStorage(Y,J);$.stack.push(L0(q))}else{let X=$.interpreter.getBlockNumber()-Z;if(X>QG||X<=Q0){$.stack.push(Q0);return}let Y=await $.blockchain.getBlock(Number(Z));$.stack.push(L0(Y.hash()))}}],[65,function($){$.stack.push($.interpreter.getBlockCoinbase())}],[66,function($){$.stack.push($.interpreter.getBlockTimestamp())}],[67,function($){$.stack.push($.interpreter.getBlockNumber())}],[68,function($,Q){if(Q.isActivatedEIP(4399))$.stack.push($.interpreter.getBlockPrevRandao());else $.stack.push($.interpreter.getBlockDifficulty())}],[69,function($){$.stack.push($.interpreter.getBlockGasLimit())}],[70,function($){$.stack.push($.interpreter.getChainId())}],[71,function($){$.stack.push($.interpreter.getSelfBalance())}],[72,function($){$.stack.push($.interpreter.getBlockBaseFee())}],[73,function($){let Q=$.stack.pop();if($.env.blobVersionedHashes.length>Number(Q))$.stack.push(BigInt($.env.blobVersionedHashes[Number(Q)]));else $.stack.push(Q0)}],[74,function($){$.stack.push($.interpreter.getBlobBaseFee())}],[80,function($){$.stack.pop()}],[81,function($){let Q=$.stack.pop(),Z=$.memory.read(Number(Q),32,!0);$.stack.push(L0(Z))}],[82,function($){let[Q,Z]=$.stack.popN(2),X=b1(Z5(Z),32),Y=Number(Q);$.memory.write(Y,32,X)}],[83,function($){let[Q,Z]=$.stack.popN(2),X=Z5(Z&AR),Y=Number(Q);$.memory.write(Y,1,X)}],[84,async function($){let Q=$.stack.pop(),Z=b1(Z5(Q),32),X=await $.interpreter.storageLoad(Z),Y=X.length?L0(X):Q0;$.stack.push(Y)}],[85,async function($){let[Q,Z]=$.stack.popN(2),X=b1(Z5(Q),32),Y;if(Z===Q0)Y=Uint8Array.from([]);else Y=Z5(Z);await $.interpreter.storageStore(X,Y)}],[86,function($){let Q=$.stack.pop();if(Q>$.interpreter.getCodeSize())W1(U0.errorMessages.INVALID_JUMP+" at "+KD($));let Z=Number(Q);if(!XS($,Z))W1(U0.errorMessages.INVALID_JUMP+" at "+KD($));$.programCounter=Z}],[87,function($){let[Q,Z]=$.stack.popN(2);if(Z!==Q0){if(Q>$.interpreter.getCodeSize())W1(U0.errorMessages.INVALID_JUMP+" at "+KD($));let X=Number(Q);if(!XS($,X))W1(U0.errorMessages.INVALID_JUMP+" at "+KD($));$.programCounter=X}}],[88,function($){$.stack.push(BigInt($.programCounter-1))}],[89,function($){$.stack.push($.memoryWordCount*Z8)}],[90,function($){$.stack.push($.interpreter.getGasLeft())}],[91,function(){}],[92,function($){let Q=$.stack.pop(),Z=b1(Z5(Q),32),X=$.interpreter.transientStorageLoad(Z),Y=X.length?L0(X):Q0;$.stack.push(Y)}],[93,function($){if($.interpreter.isStatic())W1(U0.errorMessages.STATIC_STATE_CHANGE);let[Q,Z]=$.stack.popN(2),X=b1(Z5(Q),32),Y;if(Z===Q0)Y=Uint8Array.from([]);else Y=Z5(Z);$.interpreter.transientStorageStore(X,Y)}],[94,function($){let[Q,Z,X]=$.stack.popN(3),Y=$.memory.read(Number(Z),Number(X),!0);$.memory.write(Number(Q),Number(X),Y)}],[95,function($){$.stack.push(Q0)}],[96,function($,Q){let Z=$.opCode-95;if((Q.isActivatedEIP(6800)||Q.isActivatedEIP(7864))&&$.env.chargeCodeAccesses===!0){let X=$.interpreter.getAddress(),Y=Math.min($.code.length,$.programCounter+1),z=Math.min($.code.length,Y+Z-1),J=$.env.accessWitness.readAccountCodeChunks(X,Y,z);$.interpreter.useGas(J,"PUSH")}if(!$.shouldDoJumpAnalysis)$.stack.push($.cachedPushes[$.programCounter]),$.programCounter+=Z;else{let X=$.code.subarray($.programCounter,$.programCounter+Z);if(X.length<Z)X=E8(X,Z);$.programCounter+=Z,$.stack.push(L0(X))}}],[128,function($){let Q=$.opCode-127;$.stack.dup(Q)}],[144,function($){let Q=$.opCode-143;$.stack.swap(Q)}],[160,function($){let[Q,Z]=$.stack.popN(2),X=$.opCode-160,z=$.stack.popN(X).map(function(q){return b1(Z5(q),32)}),J=new Uint8Array(0);if(Z!==Q0)J=$.memory.read(Number(Q),Number(Z));$.interpreter.log(J,X,z)}],[208,function($){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);let Q=$.stack.pop();if(Q>$.env.eof.container.body.dataSection.length){$.stack.push(Q0);return}let Z=Number(Q),X=$.env.eof.container.body.dataSection.subarray(Z,Z+32);X=X.length?X:Uint8Array.from([0]);let Y=L0(X);if(X.length<32)Y=Y<<w$*BigInt(32-X.length);$.stack.push(Y)}],[209,function($){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);let Q=Number(L0($.code.subarray($.programCounter,$.programCounter+2))),Z=L0($.env.eof.container.body.dataSection.subarray(Q,Q+32));$.stack.push(Z),$.programCounter+=2}],[210,function($){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);$.stack.push(BigInt($.env.eof.container.body.dataSection.length))}],[211,function($){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);let[Q,Z,X]=$.stack.popN(3);if(X!==Q0){let Y=Rq($.env.eof.container.body.dataSection,Z,X),z=Number(Q),J=Number(X);$.memory.write(z,J,Y)}}],[224,function($){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);else{let Q=$.env.code,Z=new DataView(Q.buffer).getInt16($.programCounter);$.programCounter+=2+Z}}],[225,function($){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);else{if($.stack.pop()>0){let Z=$.env.code,X=new DataView(Z.buffer).getInt16($.programCounter);$.programCounter+=X}$.programCounter+=2}}],[226,function($){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);else{let Q=$.env.code,Z=Q[$.programCounter],X=(Z+1)*2;$.programCounter+=1;let Y=$.stack.pop();if(Y<=Z){let z=new DataView(Q.buffer).getInt16($.programCounter+Number(Y)*2);$.programCounter+=X+z}else $.programCounter+=X}}],[227,function($){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);let Q=KY($.code.slice($.programCounter,$.programCounter+2)),Z=$.stack.length,X=$.env.eof.container.body.typeSections[Q];if(Z>1024-X.maxStackHeight+X.inputs)W1(f0.STACK_OVERFLOW);if($.env.eof.eofRunState.returnStack.length>=1024)W1(f0.RETURN_STACK_OVERFLOW);$.env.eof?.eofRunState.returnStack.push($.programCounter+2),$.programCounter=$.env.eof.container.header.getCodePosition(Q)}],[228,function($){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);let Q=$.env.eof.eofRunState.returnStack.pop();if(Q===void 0)W1(f0.RETF_NO_RETURN);$.programCounter=Q}],[229,function($){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);let Q=KY($.code.slice($.programCounter,$.programCounter+2)),Z=$.stack.length,X=$.env.eof.container.body.typeSections[Q];if(Z>1024-X.maxStackHeight+X.inputs)W1(f0.STACK_OVERFLOW);$.programCounter=$.env.eof.container.header.getCodePosition(Q)}],[230,function($){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);let Q=Number(L0($.code.subarray($.programCounter,$.programCounter+1)))+1;$.stack.dup(Q),$.programCounter++}],[231,function($){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);let Q=Number(L0($.code.subarray($.programCounter,$.programCounter+1)))+1;$.stack.swap(Q),$.programCounter++}],[232,function($){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);let Q=Number(L0($.code.subarray($.programCounter,$.programCounter+1))),Z=(Q>>4)+1,X=(Q&15)+1;$.stack.exchange(Z,Z+X),$.programCounter++}],[236,async function($){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);else{if($.interpreter.isStatic())W1(U0.errorMessages.STATIC_STATE_CHANGE);let Q=$.env.code[$.programCounter],Z=$.env.eof.container.body.containerSections[Q],[X,Y,z,J]=$.stack.popN(4),q=$.messageGasLimit;$.messageGasLimit=void 0;let W=new Uint8Array(0);if(J!==Q0)W=$.memory.read(Number(z),Number(J),!0);$.programCounter++;let G=await $.interpreter.eofcreate(q,X,Z,b1(Z5(Y),32),W);$.stack.push(G)}}],[238,async function($){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);else{let Q=$.env.code[$.programCounter],Z=$.env.eof.container.body.containerSections[Q],X=new BG(Z,d4.Initmode),[Y,z]=$.stack.popN(2),J=new Uint8Array(0);if(z!==Q0)J=$.memory.read(Number(Y),Number(z));let q=X.header.dataSize,G=X.body.dataSection.length+Number(z);if(G<q)W1(f0.INVALID_RETURN_CONTRACT_DATA_SIZE);if(G>65535)W1(U0.errorMessages.OUT_OF_GAS);let U=b1(Z5(BigInt(G)),2),D=X.header.dataSizePtr;Z[D]=U[0],Z[D+1]=U[1];let P=d1(Z,J);$.interpreter.finish(P)}}],[240,async function($,Q){let[Z,X,Y]=$.stack.popN(3);if(Q.isActivatedEIP(3860)&&Y>Number(Q.param("maxInitCodeSize"))&&!$.interpreter._evm.allowUnlimitedInitCodeSize)W1(U0.errorMessages.INITCODE_SIZE_VIOLATION);let z=$.messageGasLimit;$.messageGasLimit=void 0;let J=new Uint8Array(0);if(Y!==Q0)J=$.memory.read(Number(X),Number(Y),!0);if(AZ(J)){$.stack.push(Q0);return}let q=await $.interpreter.create(z,Z,J);$.stack.push(q)}],[245,async function($,Q){if($.interpreter.isStatic())W1(U0.errorMessages.STATIC_STATE_CHANGE);let[Z,X,Y,z]=$.stack.popN(4);if(Q.isActivatedEIP(3860)&&Y>Number(Q.param("maxInitCodeSize"))&&!$.interpreter._evm.allowUnlimitedInitCodeSize)W1(U0.errorMessages.INITCODE_SIZE_VIOLATION);let J=$.messageGasLimit;$.messageGasLimit=void 0;let q=new Uint8Array(0);if(Y!==Q0)q=$.memory.read(Number(X),Number(Y),!0);if(AZ(q)){$.stack.push(Q0);return}let W=await $.interpreter.create2(J,Z,q,b1(Z5(z),32));$.stack.push(W)}],[241,async function($,Q){let[Z,X,Y,z,J,q,W]=$.stack.popN(7),G=r5(X),U=new Uint8Array(0);if(J!==Q0)U=$.memory.read(Number(z),Number(J),!0);let D=$.messageGasLimit;if(Y!==Q0){let H=Q.param("callStipendGas");$.interpreter.addStipend(H),D+=H}$.messageGasLimit=void 0;let P=await $.interpreter.call(D,G,Y,U);GD($,q,W),$.stack.push(P)}],[242,async function($,Q){let[Z,X,Y,z,J,q,W]=$.stack.popN(7),G=r5(X),U=$.messageGasLimit;if(Y!==Q0){let H=Q.param("callStipendGas");$.interpreter.addStipend(H),U+=H}$.messageGasLimit=void 0;let D=new Uint8Array(0);if(J!==Q0)D=$.memory.read(Number(z),Number(J),!0);let P=await $.interpreter.callCode(U,G,Y,D);GD($,q,W),$.stack.push(P)}],[244,async function($){let Q=$.interpreter.getCallValue(),[Z,X,Y,z,J,q]=$.stack.popN(6),W=r5(X),G=new Uint8Array(0);if(z!==Q0)G=$.memory.read(Number(Y),Number(z),!0);let U=$.messageGasLimit;$.messageGasLimit=void 0;let D=await $.interpreter.callDelegate(U,W,Q,G);GD($,J,q),$.stack.push(D)}],[247,function($){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);let Q=$.stack.pop();if(Q>$.interpreter.getReturnDataSize()){$.stack.push(Q0);return}let Z=Number(Q),X=$.interpreter.getReturnData().subarray(Z,Z+32);X=X.length?X:Uint8Array.from([0]);let Y=L0(X);if(X.length<32)Y=Y<<w$*BigInt(32-X.length);$.stack.push(Y)}],[248,async function($){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);else{let[Q,Z,X,Y]=$.stack.popN(4),z=$.messageGasLimit;if($.messageGasLimit=void 0,z===-A1){$.stack.push(A1),$.returnBytes=new Uint8Array(0);return}let J=r5(Q),q=new Uint8Array(0);if(X!==Q0)q=$.memory.read(Number(Z),Number(X),!0);let W=await $.interpreter.call(z,J,Y,q);$.stack.push(W)}}],[249,async function($){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);else{let Q=$.interpreter.getCallValue(),[Z,X,Y]=$.stack.popN(3),z=$.messageGasLimit;if($.messageGasLimit=void 0,z===-A1){$.stack.push(A1),$.returnBytes=new Uint8Array(0);return}let J=r5(Z),q=await $.stateManager.getCode(J);if(!AZ(q)){$.stack.push(A1),$.returnBytes=new Uint8Array(0);return}let W=new Uint8Array(0);if(Y!==Q0)W=$.memory.read(Number(X),Number(Y),!0);let G=await $.interpreter.callDelegate(z,J,Q,W);$.stack.push(G)}}],[250,async function($){let Q=Q0,[Z,X,Y,z,J,q]=$.stack.popN(6),W=r5(X),G=$.messageGasLimit;$.messageGasLimit=void 0;let U=new Uint8Array(0);if(z!==Q0)U=$.memory.read(Number(Y),Number(z),!0);let D=await $.interpreter.callStatic(G,W,Q,U);GD($,J,q),$.stack.push(D)}],[251,async function($){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);else{let Q=Q0,[Z,X,Y]=$.stack.popN(3),z=$.messageGasLimit;if($.messageGasLimit=void 0,z===-A1){$.stack.push(A1),$.returnBytes=new Uint8Array(0);return}let J=r5(Z),q=new Uint8Array(0);if(Y!==Q0)q=$.memory.read(Number(X),Number(Y),!0);let W=await $.interpreter.callStatic(z,J,Q,q);$.stack.push(W)}}],[243,function($){let[Q,Z]=$.stack.popN(2),X=new Uint8Array(0);if(Z!==Q0)X=$.memory.read(Number(Q),Number(Z));$.interpreter.finish(X)}],[253,function($){let[Q,Z]=$.stack.popN(2),X=new Uint8Array(0);if(Z!==Q0)X=$.memory.read(Number(Q),Number(Z));$.interpreter.revert(X)}],[255,async function($){let Q=$.stack.pop(),Z=r5(Q);return $.interpreter.selfDestruct(Z)}]]),oj0=d$.get(96);for(let $=97;$<=127;$++)d$.set($,oj0);nj0=d$.get(128);for(let $=129;$<=143;$++)d$.set($,nj0);rj0=d$.get(144);for(let $=145;$<=159;$++)d$.set($,rj0);aj0=d$.get(160);for(let $=161;$<=164;$++)d$.set($,aj0)});function m00($){return"opcode"in $&&"opcodeName"in $&&"baseFee"in $&&"logicFunction"in $}class xG{async getBlock(){return{hash(){return new Uint8Array(32)}}}async putBlock(){}shallowCopy(){return this}}var $C;var bG=p(()=>{$C=new Uint8Array([239,1,0])});function p00($,Q,Z,X,Y){if(X1(Q,X))return Y.param("netSstoreNoopGas");if(X1(Z,Q)){if(Z.length===0)return Y.param("netSstoreInitGas");if(X.length===0)$.interpreter.refundGas(Y.param("netSstoreClearRefundGas"),"EIP-1283 -> netSstoreClearRefund");return Y.param("netSstoreCleanGas")}if(Z.length!==0){if(Q.length===0)$.interpreter.subRefund(Y.param("netSstoreClearRefundGas"),"EIP-1283 -> netSstoreClearRefund");else if(X.length===0)$.interpreter.refundGas(Y.param("netSstoreClearRefundGas"),"EIP-1283 -> netSstoreClearRefund")}if(X1(Z,X))if(Z.length===0)$.interpreter.refundGas(Y.param("netSstoreResetClearRefundGas"),"EIP-1283 -> netSstoreResetClearRefund");else $.interpreter.refundGas(Y.param("netSstoreResetRefundGas"),"EIP-1283 -> netSstoreResetRefund");return Y.param("netSstoreDirtyGas")}var u00=p(()=>{Z1()});function $2($,Q,Z,X=!0,Y=!1){if(!Z.isActivatedEIP(2929))return Q0;if(!$.interpreter.journal.isWarmedAddress(Q)){if($.interpreter.journal.addWarmedAddress(Q),X&&!Z.isActivatedEIP(7864))return Z.param("coldaccountaccessGas");else if(X&&Z.isActivatedEIP(7864))return Z.param("warmstoragereadGas")}else if(X&&!Y)return Z.param("warmstoragereadGas");return Q0}function JS($,Q,Z,X,Y=!0){if(!X.isActivatedEIP(2929))return Q0;let z=$.interpreter.getAddress().bytes;if(!$.interpreter.journal.isWarmedStorage(z,Q)){if($.interpreter.journal.addWarmedStorage(z,Q),Y&&!(X.isActivatedEIP(6800)||X.isActivatedEIP(7864)))return X.param("coldsloadGas")}else if(Y&&(!Z||X.isActivatedEIP(6800)||X.isActivatedEIP(7864)))return X.param("warmstoragereadGas");return Q0}function QC($,Q,Z,X,Y){if(!Y.isActivatedEIP(2929))return Z;let z=$.interpreter.getAddress().bytes,J=Y.param("warmstoragereadGas"),q=Y.param("coldsloadGas");if($.interpreter.journal.isWarmedStorage(z,Q))switch(X){case"noop":return J;case"initRefund":return Y.param("sstoreInitEIP2200Gas")-J;case"cleanRefund":return Y.param("sstoreResetGas")-q-J}return Z}var zS=p(()=>{Z1()});function c00($,Q,Z,X,Y,z){if($.interpreter.getGasLeft()<=z.param("sstoreSentryEIP2200Gas"))W1(U0.errorMessages.OUT_OF_GAS);if(X1(Q,X)){let J=z.param("sstoreNoopEIP2200Gas");return QC($,Y,J,"noop",z)}if(X1(Z,Q)){if(Z.length===0)return z.param("sstoreInitEIP2200Gas");if(X.length===0)$.interpreter.refundGas(z.param("sstoreClearRefundEIP2200Gas"),"EIP-2200 -> sstoreClearRefundEIP2200");return z.param("sstoreCleanEIP2200Gas")}if(Z.length>0){if(Q.length===0)$.interpreter.subRefund(z.param("sstoreClearRefundEIP2200Gas"),"EIP-2200 -> sstoreClearRefundEIP2200");else if(X.length===0)$.interpreter.refundGas(z.param("sstoreClearRefundEIP2200Gas"),"EIP-2200 -> sstoreClearRefundEIP2200")}if(X1(Z,X))if(Z.length===0){let J=z.param("sstoreInitRefundEIP2200Gas");$.interpreter.refundGas(QC($,Y,J,"initRefund",z),"EIP-2200 -> initRefund")}else{let J=z.param("sstoreCleanRefundEIP2200Gas");$.interpreter.refundGas(BigInt(QC($,Y,J,"cleanRefund",z)),"EIP-2200 -> cleanRefund")}return z.param("sstoreDirtyEIP2200Gas")}var d00=p(()=>{Z1();m8();zS();kG()});async function ZC($,Q,Z,X){let Y=await $.stateManager.getCode(Z);if(X1(Y.slice(0,3),$C))return $2($,Y.slice(3,24),Q,X);return Q0}var qS,XC,sj0;var l00=p(()=>{$9();Z1();XD();m8();bG();u00();d00();zS();kG();qS=BigInt(2)**BigInt(160)-BigInt(1);XC=new Map([[10,async function($,Q,Z){let[X,Y]=$.stack.peek(2);if(Y===Q0)return Q;let z=Y.toString(2).length/8;if(z>Math.trunc(z))z=Math.trunc(z)+1;if(z<1||z>32)W1(U0.errorMessages.OUT_OF_RANGE);let J=Z.param("expByteGas");return Q+=BigInt(z)*J,Q}],[32,async function($,Q,Z){let[X,Y]=$.stack.peek(2);return Q+=O6($,X,Y,Z),Q+=Z.param("keccak256WordGas")*c$(Y,Z8),Q}],[49,async function($,Q,Z){let X=r5($.stack.peek()[0]),Y=!0;if(Z.isActivatedEIP(6800)||Z.isActivatedEIP(7864)){let z=$.env.accessWitness.readAccountBasicData(X);Q+=z,Y=z===Q0}if(Z.isActivatedEIP(2929))Q+=$2($,X.bytes,Z,Y);return Q}],[55,async function($,Q,Z){let[X,Y,z]=$.stack.peek(3);if(Q+=O6($,X,z,Z),z!==Q0)Q+=Z.param("copyGas")*c$(z,Z8);return Q}],[57,async function($,Q,Z){let[X,Y,z]=$.stack.peek(3);if(Q+=O6($,X,z,Z),z!==Q0){if(Q+=Z.param("copyGas")*c$(z,Z8),(Z.isActivatedEIP(6800)||Z.isActivatedEIP(7864))&&$.env.chargeCodeAccesses===!0){let J=$.interpreter.getAddress(),q=Y+z,W=$.interpreter.getCodeSize();if(q>W)q=W;Q+=$.env.accessWitness.readAccountCodeChunks(J,Number(Y),Number(q))}}return Q}],[59,async function($,Q,Z){let X=r5($.stack.peek()[0]),Y=!0;if((Z.isActivatedEIP(6800)||Z.isActivatedEIP(7864))&&$.interpreter._evm.getPrecompile(X)===void 0&&!X.equals(r5(Z.param("systemAddress")))){let z=Q0;z+=$.env.accessWitness.readAccountBasicData(X),Q+=z,Y=z===Q0}if(Z.isActivatedEIP(2929))Q+=$2($,X.bytes,Z,Y);return Q}],[60,async function($,Q,Z){let[X,Y,z,J]=$.stack.peek(4),q=r5(X);Q+=O6($,Y,J,Z);let W=!0;if((Z.isActivatedEIP(6800)||Z.isActivatedEIP(7864))&&$.interpreter._evm.getPrecompile(q)===void 0&&!q.equals(r5(Z.param("systemAddress")))){let G=Q0;G+=$.env.accessWitness.readAccountBasicData(q),Q+=G,W=G===Q0}if(Z.isActivatedEIP(2929))Q+=$2($,q.bytes,Z,W);if(J!==Q0){if(Q+=Z.param("copyGas")*c$(J,Z8),Z.isActivatedEIP(6800)||Z.isActivatedEIP(7864)){let G=z+J,U=BigInt((await $.stateManager.getCode(q)).length);if(G>U)G=U;Q+=$.env.accessWitness.readAccountCodeChunks(q,Number(z),Number(G))}}return Q}],[62,async function($,Q,Z){let[X,Y,z]=$.stack.peek(3);if(Y+z>$.interpreter.getReturnDataSize()){if($.env.eof===void 0)W1(U0.errorMessages.OUT_OF_GAS)}if(Q+=O6($,X,z,Z),z!==Q0)Q+=Z.param("copyGas")*c$(z,Z8);return Q}],[63,async function($,Q,Z){let X=r5($.stack.peek()[0]),Y=!0;if((Z.isActivatedEIP(6800)||Z.isActivatedEIP(7864))&&$.interpreter._evm.getPrecompile(X)===void 0&&!X.equals(r5(Z.param("systemAddress")))){let z=Q0;z+=$.env.accessWitness.readAccountCodeHash(X),Q+=z,Y=z===Q0}if(Z.isActivatedEIP(2929))Q+=$2($,X.bytes,Z,Y);return Q}],[81,async function($,Q,Z){let X=$.stack.peek()[0];return Q+=O6($,X,Z8,Z),Q}],[82,async function($,Q,Z){let X=$.stack.peek()[0];return Q+=O6($,X,Z8,Z),Q}],[83,async function($,Q,Z){let X=$.stack.peek()[0];return Q+=O6($,X,A1,Z),Q}],[84,async function($,Q,Z){let X=$.stack.peek()[0],Y=b1(Z5(X),32),z=!0;if(Z.isActivatedEIP(6800)||Z.isActivatedEIP(7864)){let J=$.interpreter.getAddress(),q=$.env.accessWitness.readAccountStorage(J,X);Q+=q,z=q===Q0}if(Z.isActivatedEIP(2929))Q+=JS($,Y,!1,Z,z);return Q}],[85,async function($,Q,Z){if($.interpreter.isStatic())W1(U0.errorMessages.STATIC_STATE_CHANGE);let[X,Y]=$.stack.peek(2),z=b1(Z5(X),32),J;if(Y===Q0)J=Uint8Array.from([]);else J=Z5(Y);let q=fG(await $.interpreter.storageLoad(z)),W=fG(await $.interpreter.storageLoad(z,!0));if(Z.hardfork()===w0.Constantinople)Q+=p00($,q,W,fG(J),Z);else if(Z.gteHardfork(w0.Istanbul)){if(!Z.isActivatedEIP(6800)&&!Z.isActivatedEIP(7864))Q+=c00($,q,W,fG(J),z,Z)}else Q+=h00($,q,fG(J),Z);let G=!0;if(Z.isActivatedEIP(6800)||Z.isActivatedEIP(7864)){let U=$.interpreter.getAddress(),D=$.env.accessWitness.writeAccountStorage(U,X);Q+=D,G=D===Q0}if(Z.isActivatedEIP(2929))Q+=JS($,z,!0,Z,G);return Q}],[94,async function($,Q,Z){let[X,Y,z]=$.stack.peek(3),J=(z+ez)/Z8;return Q+=on*J,Q+=O6($,Y,z,Z),Q+=O6($,X,z,Z),Q}],[160,async function($,Q,Z){if($.interpreter.isStatic())W1(U0.errorMessages.STATIC_STATE_CHANGE);let[X,Y]=$.stack.peek(2),z=$.opCode-160;if(z<0||z>4)W1(U0.errorMessages.OUT_OF_RANGE);return Q+=O6($,X,Y,Z),Q+=Z.param("logTopicGas")*BigInt(z)+Y*Z.param("logDataGas"),Q}],[211,async function($,Q,Z){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);let[X,Y,z]=$.stack.peek(3);if(Q+=O6($,X,z,Z),z!==Q0)Q+=Z.param("copyGas")*c$(z,Z8);return Q}],[236,async function($,Q,Z){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);let X=$.env.code[$.programCounter+1],[Y,z,J,q]=$.stack.peek(4);Q+=O6($,J,q,Z);let W=$.env.eof.container.body.containerSections[X];Q+=Z.param("keccak256WordGas")*c$(BigInt(W.length),Z8);let G=$.interpreter.getGasLeft()-Q;return $.messageGasLimit=kY(G,G,$,Z),Q}],[238,async function($,Q,Z){let[X,Y]=$.stack.peek(2);return Q+=O6($,X,Y,Z),Q}],[240,async function($,Q,Z){if($.interpreter.isStatic())W1(U0.errorMessages.STATIC_STATE_CHANGE);let[X,Y,z]=$.stack.peek(3);if(Z.isActivatedEIP(2929))Q+=$2($,$.interpreter.getAddress().bytes,Z,!1);if(Z.isActivatedEIP(3860))Q+=(z+ez)/Z8*Z.param("initCodeWordGas");Q+=O6($,Y,z,Z);let J=BigInt($.interpreter.getGasLeft())-Q;return J=kY(J,J,$,Z),$.messageGasLimit=J,Q}],[241,async function($,Q,Z){let[X,Y,z,J,q,W,G]=$.stack.peek(7),U=r5(Y);if($.interpreter.isStatic()&&z!==Q0)W1(U0.errorMessages.STATIC_STATE_CHANGE);Q+=O6($,J,q,Z),Q+=O6($,W,G,Z);let D=!0;if((Z.isActivatedEIP(6800)||Z.isActivatedEIP(7864))&&$.interpreter._evm.getPrecompile(U)===void 0){let H=$.env.accessWitness.readAccountBasicData(U);if(z!==Q0){let N=$.interpreter.getAddress();Q+=$.env.accessWitness.writeAccountBasicData(N),Q+=$.env.accessWitness.writeAccountBasicData(U)}Q+=H,D=H===Q0}if(Z.isActivatedEIP(2929))Q+=$2($,U.bytes,Z,D);if(Z.isActivatedEIP(7702))Q+=await ZC($,Z,U,D);if(z!==Q0&&!Z.isActivatedEIP(6800)&&!Z.isActivatedEIP(7864))Q+=Z.param("callValueTransferGas");if(Z.gteHardfork(w0.SpuriousDragon)){let H=await $.stateManager.getAccount(U),N=!1;if(H===void 0||H.isEmpty())N=!0;if(N&&z!==Q0)Q+=Z.param("callNewAccountGas")}else if(await $.stateManager.getAccount(U)===void 0)Q+=Z.param("callNewAccountGas");let P=kY(X,$.interpreter.getGasLeft()-Q,$,Z);if(P>$.interpreter.getGasLeft()-Q)W1(U0.errorMessages.OUT_OF_GAS);if(Q>$.interpreter.getGasLeft())W1(U0.errorMessages.OUT_OF_GAS);return $.messageGasLimit=P,Q}],[242,async function($,Q,Z){let[X,Y,z,J,q,W,G]=$.stack.peek(7),U=r5(Y);Q+=O6($,J,q,Z),Q+=O6($,W,G,Z);let D=!0;if((Z.isActivatedEIP(6800)||Z.isActivatedEIP(7864))&&$.interpreter._evm.getPrecompile(U)===void 0){let H=$.env.accessWitness.readAccountBasicData(U);Q+=H,D=H===Q0}if(Z.isActivatedEIP(2929))Q+=$2($,r5(Y).bytes,Z,D);if(Z.isActivatedEIP(7702))Q+=await ZC($,Z,U,D);if(z!==Q0)Q+=Z.param("callValueTransferGas");let P=kY(X,$.interpreter.getGasLeft()-Q,$,Z);if(P>$.interpreter.getGasLeft()-Q)W1(U0.errorMessages.OUT_OF_GAS);return $.messageGasLimit=P,Q}],[243,async function($,Q,Z){let[X,Y]=$.stack.peek(2);return Q+=O6($,X,Y,Z),Q}],[244,async function($,Q,Z){let[X,Y,z,J,q,W]=$.stack.peek(6),G=r5(Y);Q+=O6($,z,J,Z),Q+=O6($,q,W,Z);let U=!0;if((Z.isActivatedEIP(6800)||Z.isActivatedEIP(7864))&&$.interpreter._evm.getPrecompile(G)===void 0){let P=$.env.accessWitness.readAccountBasicData(G);Q+=P,U=P===Q0}if(Z.isActivatedEIP(2929))Q+=$2($,r5(Y).bytes,Z,U);if(Z.isActivatedEIP(7702))Q+=await ZC($,Z,G,U);let D=kY(X,$.interpreter.getGasLeft()-Q,$,Z);if(D>$.interpreter.getGasLeft()-Q)W1(U0.errorMessages.OUT_OF_GAS);return $.messageGasLimit=D,Q}],[245,async function($,Q,Z){if($.interpreter.isStatic())W1(U0.errorMessages.STATIC_STATE_CHANGE);let[X,Y,z,J]=$.stack.peek(4);if(Q+=O6($,Y,z,Z),Z.isActivatedEIP(2929))Q+=$2($,$.interpreter.getAddress().bytes,Z,!1);if(Z.isActivatedEIP(3860))Q+=(z+ez)/Z8*Z.param("initCodeWordGas");Q+=Z.param("keccak256WordGas")*c$(z,Z8);let q=$.interpreter.getGasLeft()-Q;return q=kY(q,q,$,Z),$.messageGasLimit=q,Q}],[248,async function($,Q,Z){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);let[X,Y,z,J]=$.stack.peek(4);if($.interpreter.isStatic()&&J!==Q0)W1(U0.errorMessages.STATIC_STATE_CHANGE);if(J>Q0)Q+=Z.param("callValueTransferGas");if(X>qS)W1(f0.INVALID_EXTCALL_TARGET);Q+=O6($,Y,z,Z);let q=r5(X);if(Q+=$2($,q.bytes,Z),J>Q0){let H=await $.stateManager.getAccount(q);if(H===void 0||H.isEmpty())Q+=Z.param("callNewAccountGas")}let W=Z.param("minRetainedGas"),G=Z.param("minCalleeGas"),U=$.interpreter.getGasLeft()-Q,D=U/GY,P;if(D<W)P=U-W;else P=U-D;if($.env.depth>=Number(Z.param("stackLimit"))||$.env.contract.balance<J||P<G)P=-A1;return $.messageGasLimit=P,Q}],[249,async function($,Q,Z){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);let[X,Y,z]=$.stack.peek(3);if(X>qS)W1(f0.INVALID_EXTCALL_TARGET);Q+=O6($,Y,z,Z);let J=r5(X);Q+=$2($,J.bytes,Z);let q=Z.param("minRetainedGas"),W=Z.param("minCalleeGas"),G=$.interpreter.getGasLeft()-Q,U=G/GY,D;if(U<q)D=G-q;else D=G-U;if($.env.depth>=Number(Z.param("stackLimit"))||D<W)D=-A1;return $.messageGasLimit=D,Q}],[250,async function($,Q,Z){let[X,Y,z,J,q,W]=$.stack.peek(6);Q+=O6($,z,J,Z),Q+=O6($,q,W,Z);let G=!0,U=r5(Y);if((Z.isActivatedEIP(6800)||Z.isActivatedEIP(7864))&&$.interpreter._evm.getPrecompile(U)===void 0){let P=$.env.accessWitness.readAccountBasicData(U);Q+=P,G=P===Q0}if(Z.isActivatedEIP(2929))Q+=$2($,r5(Y).bytes,Z,G);if(Z.isActivatedEIP(7702))Q+=await ZC($,Z,r5(Y),G);let D=kY(X,$.interpreter.getGasLeft()-Q,$,Z);return $.messageGasLimit=D,Q}],[251,async function($,Q,Z){if($.env.eof===void 0)W1(U0.errorMessages.INVALID_OPCODE);let[X,Y,z]=$.stack.peek(3);if(X>qS)W1(f0.INVALID_EXTCALL_TARGET);Q+=O6($,Y,z,Z);let J=r5(X);Q+=$2($,J.bytes,Z);let q=Z.param("minRetainedGas"),W=Z.param("minCalleeGas"),G=$.interpreter.getGasLeft()-Q,U=G/GY,D;if(U<q)D=G-q;else D=G-U;if($.env.depth>=Number(Z.param("stackLimit"))||D<W)D=-A1;return $.messageGasLimit=D,Q}],[253,async function($,Q,Z){let[X,Y]=$.stack.peek(2);return Q+=O6($,X,Y,Z),Q}],[255,async function($,Q,Z){if($.interpreter.isStatic())W1(U0.errorMessages.STATIC_STATE_CHANGE);let X=$.stack.peek()[0],Y=r5(X),z=$.interpreter.getAddress(),J=!1,q=await $.interpreter.getExternalBalance(z);if(Z.gteHardfork(w0.SpuriousDragon)){if(q>Q0){let G=await $.stateManager.getAccount(Y);if(G===void 0||G.isEmpty())J=!0}}else if(Z.gteHardfork(w0.TangerineWhistle)){if(await $.stateManager.getAccount(Y)===void 0)J=!0}if(J)Q+=Z.param("callNewAccountGas");let W=!0;if((Z.isActivatedEIP(6800)||Z.isActivatedEIP(7864))&&$.env.chargeCodeAccesses===!0){if(Q+=$.env.accessWitness.readAccountBasicData(z),q>Q0)Q+=$.env.accessWitness.writeAccountBasicData(z);let G=$.env.accessWitness.readAccountBasicData(Y);if(q>Q0)G+=$.env.accessWitness.writeAccountBasicData(Y);Q+=G,W=G===Q0}if(Z.isActivatedEIP(2929))Q+=$2($,Y.bytes,Z,W,!0);return Q}]]),sj0=XC.get(160);for(let $=161;$<=164;$++)XC.set($,sj0)});class i00{constructor({code:$,name:Q,fullName:Z,fee:X,isAsync:Y,dynamicGas:z}){this.code=$,this.name=Q,this.fullName=Z,this.fee=X,this.feeBigInt=BigInt(X),this.isAsync=Y,this.dynamicGas=z,this.isInvalid=this.name==="INVALID",Object.freeze(this)}}function $R0($){let Q=new Map;for(let[Z,X]of Object.entries($)){let Y=parseInt(Z,10);if(isNaN(X.fee))X.fee=0;Q.set(Y,new i00({code:Y,fullName:g00(Y,X.name),...X}))}return Q}function o00($,Q){let Z={...tj0},X=new Map(d$),Y=new Map(XC);for(let W=0;W<WS.length;W++)if($.gteHardfork(WS[W].hardfork))Z={...Z,...WS[W].opcodes};for(let W of ej0)if($.isActivatedEIP(W.eip))Z={...Z,...W.opcodes};for(let W in Z){let G=Number($.param(`${Z[W].name.toLowerCase()}Gas`));if(G===void 0)throw n(`base fee not defined for: ${Z[W].name}`);Z[W].fee=G}if(Q)for(let W of Q){let G=W;if(!m00(G)){delete Z[G.opcode];continue}let U={[G.opcode]:{name:G.opcodeName,isAsync:!0,dynamicGas:G.gasFunction!==void 0,fee:G.baseFee,feeBigInt:BigInt(G.baseFee)}};if(Z={...Z,...U},G.gasFunction!==void 0)Y.set(G.opcode,G.gasFunction);X.set(G.opcode,G.logicFunction)}let z=$R0(Z),J=[];for(let[W,G]of z){let U=Y.get(W),D=X.get(W);J[W]={opcodeInfo:G,opHandler:D,gasHandler:U}}let q=J[254];for(let W=0;W<=255;W++)if(J[W]===void 0)J[W]=q;return{dynamicGasHandlers:Y,handlers:X,opcodes:z,opcodeMap:J}}var b0=($)=>{return{name:$,isAsync:!1,dynamicGas:!1}},f2=($)=>{return{name:$,isAsync:!1,dynamicGas:!0}},z4=($)=>{return{name:$,isAsync:!0,dynamicGas:!1}},w6=($)=>{return{name:$,isAsync:!0,dynamicGas:!0}},tj0,WS,ej0;var n00=p(()=>{$9();Z1();YS();l00();kG();bG();tj0={0:b0("STOP"),1:b0("ADD"),2:b0("MUL"),3:b0("SUB"),4:b0("DIV"),5:b0("SDIV"),6:b0("MOD"),7:b0("SMOD"),8:b0("ADDMOD"),9:b0("MULMOD"),10:f2("EXP"),11:b0("SIGNEXTEND"),16:b0("LT"),17:b0("GT"),18:b0("SLT"),19:b0("SGT"),20:b0("EQ"),21:b0("ISZERO"),22:b0("AND"),23:b0("OR"),24:b0("XOR"),25:b0("NOT"),26:b0("BYTE"),32:f2("KECCAK256"),48:z4("ADDRESS"),49:w6("BALANCE"),50:z4("ORIGIN"),51:z4("CALLER"),52:z4("CALLVALUE"),53:z4("CALLDATALOAD"),54:z4("CALLDATASIZE"),55:w6("CALLDATACOPY"),56:b0("CODESIZE"),57:f2("CODECOPY"),58:b0("GASPRICE"),59:w6("EXTCODESIZE"),60:w6("EXTCODECOPY"),64:z4("BLOCKHASH"),65:z4("COINBASE"),66:z4("TIMESTAMP"),67:z4("NUMBER"),68:z4("DIFFICULTY"),69:z4("GASLIMIT"),80:b0("POP"),81:f2("MLOAD"),82:f2("MSTORE"),83:f2("MSTORE8"),84:w6("SLOAD"),85:w6("SSTORE"),86:b0("JUMP"),87:b0("JUMPI"),88:b0("PC"),89:b0("MSIZE"),90:b0("GAS"),91:b0("JUMPDEST"),96:b0("PUSH"),97:b0("PUSH"),98:b0("PUSH"),99:b0("PUSH"),100:b0("PUSH"),101:b0("PUSH"),102:b0("PUSH"),103:b0("PUSH"),104:b0("PUSH"),105:b0("PUSH"),106:b0("PUSH"),107:b0("PUSH"),108:b0("PUSH"),109:b0("PUSH"),110:b0("PUSH"),111:b0("PUSH"),112:b0("PUSH"),113:b0("PUSH"),114:b0("PUSH"),115:b0("PUSH"),116:b0("PUSH"),117:b0("PUSH"),118:b0("PUSH"),119:b0("PUSH"),120:b0("PUSH"),121:b0("PUSH"),122:b0("PUSH"),123:b0("PUSH"),124:b0("PUSH"),125:b0("PUSH"),126:b0("PUSH"),127:b0("PUSH"),128:b0("DUP"),129:b0("DUP"),130:b0("DUP"),131:b0("DUP"),132:b0("DUP"),133:b0("DUP"),134:b0("DUP"),135:b0("DUP"),136:b0("DUP"),137:b0("DUP"),138:b0("DUP"),139:b0("DUP"),140:b0("DUP"),141:b0("DUP"),142:b0("DUP"),143:b0("DUP"),144:b0("SWAP"),145:b0("SWAP"),146:b0("SWAP"),147:b0("SWAP"),148:b0("SWAP"),149:b0("SWAP"),150:b0("SWAP"),151:b0("SWAP"),152:b0("SWAP"),153:b0("SWAP"),154:b0("SWAP"),155:b0("SWAP"),156:b0("SWAP"),157:b0("SWAP"),158:b0("SWAP"),159:b0("SWAP"),160:f2("LOG"),161:f2("LOG"),162:f2("LOG"),163:f2("LOG"),164:f2("LOG"),240:w6("CREATE"),241:w6("CALL"),242:w6("CALLCODE"),243:f2("RETURN"),254:b0("INVALID"),255:w6("SELFDESTRUCT")},WS=[{hardfork:w0.Homestead,opcodes:{244:w6("DELEGATECALL")}},{hardfork:w0.TangerineWhistle,opcodes:{84:w6("SLOAD"),241:w6("CALL"),242:w6("CALLCODE"),59:w6("EXTCODESIZE"),60:w6("EXTCODECOPY"),244:w6("DELEGATECALL"),255:w6("SELFDESTRUCT"),49:w6("BALANCE")}},{hardfork:w0.Byzantium,opcodes:{253:f2("REVERT"),250:w6("STATICCALL"),61:z4("RETURNDATASIZE"),62:w6("RETURNDATACOPY")}},{hardfork:w0.Constantinople,opcodes:{27:b0("SHL"),28:b0("SHR"),29:b0("SAR"),63:w6("EXTCODEHASH"),245:w6("CREATE2")}},{hardfork:w0.Istanbul,opcodes:{70:b0("CHAINID"),71:b0("SELFBALANCE")}},{hardfork:w0.Paris,opcodes:{68:z4("PREVRANDAO")}}],ej0=[{eip:663,opcodes:{230:b0("DUPN"),231:b0("SWAPN"),232:b0("EXCHANGE")}},{eip:1153,opcodes:{92:b0("TLOAD"),93:b0("TSTORE")}},{eip:3198,opcodes:{72:b0("BASEFEE")}},{eip:3855,opcodes:{95:b0("PUSH0")}},{eip:4200,opcodes:{224:b0("RJUMP"),225:b0("RJUMPI"),226:b0("RJUMPV")}},{eip:4750,opcodes:{227:b0("CALLF"),228:b0("RETF")}},{eip:4844,opcodes:{73:b0("BLOBHASH")}},{eip:5656,opcodes:{94:f2("MCOPY")}},{eip:6206,opcodes:{229:b0("JUMPF")}},{eip:7069,opcodes:{247:b0("RETURNDATALOAD"),248:w6("EXTCALL"),249:w6("EXTDELEGATECALL"),251:w6("EXTSTATICCALL")}},{eip:7480,opcodes:{208:b0("DATALOAD"),209:b0("DATALOADN"),210:b0("DATASIZE"),211:f2("DATACOPY")}},{eip:7516,opcodes:{74:b0("BLOBBASEFEE")}},{eip:7620,opcodes:{236:w6("EOFCREATE"),238:w6("RETURNCONTRACT")}},{eip:7939,opcodes:{30:b0("CLZ")}}]});var KS=p(()=>{n00();YS();kG()});class GS{constructor($){this._len=0,this._store=[],this._maxHeight=$??1024}get length(){return this._len}push($){if(this._len>=this._maxHeight)throw new U0(U0.errorMessages.STACK_OVERFLOW);this._store[this._len++]=$}pop(){if(this._len<1)throw new U0(U0.errorMessages.STACK_UNDERFLOW);return this._store[--this._len]}popN($=1){if(this._len<$)throw new U0(U0.errorMessages.STACK_UNDERFLOW);if($===0)return[];let Q=Array($),Z=this._store;for(let X=0;X<$;X++)Q[X]=Z[--this._len];return Q}peek($=1){let Q=Array($),Z=this._len;for(let X=0;X<$;X++){let Y=--Z;if(Y<0)throw new U0(U0.errorMessages.STACK_UNDERFLOW);Q[X]=this._store[Y]}return Q}swap($){if(this._len<=$)throw new U0(U0.errorMessages.STACK_UNDERFLOW);let Q=this._len-1,Z=Q-$,X=this._store,Y=X[Q];X[Q]=X[Z],X[Z]=Y}dup($){let Q=this._len;if(Q<$)throw new U0(U0.errorMessages.STACK_UNDERFLOW);if(Q>=this._maxHeight)throw new U0(U0.errorMessages.STACK_OVERFLOW);let Z=Q-$;this._store[this._len++]=this._store[Z]}exchange($,Q){let Z=this._len-1,X=Z-$,Y=Z-Q;if(X<0||Y<0)throw new U0(U0.errorMessages.STACK_UNDERFLOW);let z=this._store[Y];this._store[Y]=this._store[X],this._store[X]=z}getStack(){return this._store.slice(0,this._len)}}var r00=p(()=>{m8()});class VS{constructor($,Q,Z,X,Y,z,J,q){if(this.opDebuggers={},this._evm=$,this._stateManager=Q,this.common=this._evm.common,this.common.consensusType()==="poa"&&this._evm._optsCached.cliqueSigner===void 0)throw n("Must include cliqueSigner function if clique/poa is being used for consensus type");this._runState={programCounter:0,opCode:254,memory:new $S,memoryWordCount:Q0,highestMemCost:Q0,stack:new GS,code:new Uint8Array(0),validJumps:Uint8Array.from([]),cachedPushes:{},stateManager:this._stateManager,blockchain:Z,env:X,shouldDoJumpAnalysis:!0,interpreter:this,gasRefund:X.gasRefund,gasLeft:Y,returnBytes:new Uint8Array(0)},this.journal=z,this._env=X,this._result={logs:[],returnValue:void 0,selfdestruct:new Set},this.profilerOpts=q,this.performanceLogger=J}async run($,Q={}){if(!this.common.isActivatedEIP(3540)||$[0]!==SY)this._runState.code=$;else if(this.common.isActivatedEIP(3540)){if($[1]!==wG)return{runState:this._runState,exceptionError:new U0(U0.errorMessages.INVALID_BYTECODE_RESULT)};if($[2]!==lN)return{runState:this._runState,exceptionError:new U0(U0.errorMessages.INVALID_EOF_FORMAT)};this._runState.code=$;let W=this._env.isCreate&&this._env.depth===0,G=W?d4.TxInitmode:d4.Default;try{f00(this._runState,G)}catch{return{runState:this._runState,exceptionError:new U0(U0.errorMessages.INVALID_EOF_FORMAT)}}if(W)try{i_(this._runState.code,this._evm,c4.InitCode,d4.TxInitmode)}catch{return{runState:this._runState,exceptionError:new U0(U0.errorMessages.INVALID_EOF_FORMAT)}}}this._runState.programCounter=Q.pc??this._runState.programCounter;let Z=this._runState.programCounter;if(Z!==0&&(Z<0||Z>=this._runState.code.length))throw n("Internal error: program counter not in range");let X,Y,z=!0,J,q;if(this.profilerOpts?.enabled===!0&&this.performanceLogger.hasTimer())J=this.performanceLogger.pauseTimer(),q=this.performanceLogger.startTimer("Overhead");while(this._runState.programCounter<this._runState.code.length){let W=this._runState.programCounter,G,U;if(z){if(G=this._runState.code[W],G===86||G===87||G===94){let{jumps:D,pushes:P,opcodesCached:H}=this._getValidJumpDestinations(this._runState.code);this._runState.validJumps=D,this._runState.cachedPushes=P,this._runState.shouldDoJumpAnalysis=!1,Y=H,z=!1}}else U=Y[W],G=U.opcodeInfo.code;if(G===254&&this.common.isActivatedEIP(7864)&&this._runState.env.chargeCodeAccesses===!0){let D=this._runState.interpreter.getAddress();if(!await this._runState.stateManager.checkChunkWitnessPresent(D,W))throw Error(`Invalid witness with missing codeChunk for pc=${W}`)}this._runState.opCode=G;try{if(q!==void 0)this.performanceLogger.pauseTimer();if(await this.runStep(U),q!==void 0)this.performanceLogger.unpauseTimer(q)}catch(D){if(this._runState.env.accessWitness?.revert(),q!==void 0)this.performanceLogger.unpauseTimer(q);if(!(("errorType"in D)&&D.errorType===G00))throw D;if(D.error!==U0.errorMessages.STOP)X=D;break}}if(J!==void 0)this.performanceLogger.stopTimer(q,0),this.performanceLogger.unpauseTimer(J);return{runState:this._runState,exceptionError:X}}async runStep($){let Q=$??this.lookupOpInfo(this._runState.opCode),Z=Q.opcodeInfo,X;if(this.profilerOpts?.enabled===!0)X=this.performanceLogger.startTimer(Z.name);let Y=Z.feeBigInt,z=this._runState.memoryWordCount;try{if(Z.dynamicGas)Y=await Q.gasHandler(this._runState,Y,this.common);if(this._evm.events.listenerCount("step")>0||this._evm.DEBUG)await this._runStepHook(Y,this.getGasLeft(),z);if((this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864))&&this._env.chargeCodeAccesses===!0){let q=this._runState.interpreter.getAddress(),W=this._runState.env.accessWitness.readAccountCodeChunks(q,this._runState.programCounter,this._runState.programCounter);Y+=W,UD(`codechunk accessed statelessGas=${W} (-> ${Y})`)}if(Z.isInvalid)throw new U0(U0.errorMessages.INVALID_OPCODE);this.useGas(Y,Z),this._runState.programCounter++;let J=Q.opHandler;if(Z.isAsync)await J.apply(null,[this._runState,this.common]);else J.apply(null,[this._runState,this.common]);this._runState.env.accessWitness?.commit()}finally{if(this.profilerOpts?.enabled===!0)this.performanceLogger.stopTimer(X,Number(Y),"opcodes",Z.fee,Number(Y)-Z.fee)}}lookupOpInfo($){return this._evm._opcodeMap[$]}async _runStepHook($,Q,Z){let X=this.lookupOpInfo(this._runState.opCode).opcodeInfo,Y=this._env.eof?.container.header.getSectionFromProgramCounter(this._runState.programCounter),z=void 0,J=void 0;if(X.code===253){let[W,G]=this._runState.stack.peek(2);if(z=new Uint8Array(0),G!==Q0)z=this._runState.memory.read(Number(W),Number(G))}if(LZ[X.code]!==void 0&&LZ[X.code].intermediates>0)J=this._runState.code.slice(this._runState.programCounter+1,this._runState.programCounter+1+LZ[X.code].intermediates);let q={pc:this._runState.programCounter,gasLeft:Q,gasRefund:this._runState.gasRefund,opcode:{name:X.fullName,fee:X.fee,dynamicFee:$,isAsync:X.isAsync,code:X.code},stack:this._runState.stack.getStack(),depth:this._env.depth,address:this._env.address,account:this._env.contract,memory:this._runState.memory._store.subarray(0,Number(Z)*32),memoryWordCount:Z,codeAddress:this._env.codeAddress,stateManager:this._runState.stateManager,eofSection:Y,immediate:J,error:z,eofFunctionDepth:this._env.eof!==void 0?this._env.eof?.eofRunState.returnStack.length+1:void 0};if(this._evm.DEBUG){let W=[];W=q.stack.map((D)=>{return c1(BigInt(D))});let G=q.opcode.name,U={pc:q.pc,op:G,gas:c1(q.gasLeft),gasCost:c1($),stack:W,depth:q.depth};if(!(G in this.opDebuggers))this.opDebuggers[G]=US.default(`evm:ops:${G}`);this.opDebuggers[G](JSON.stringify(U))}await this._evm._emit("step",q)}_getValidJumpDestinations($){let Q=new Uint8Array($.length),Z={},X=Array($.length);for(let Y=0;Y<$.length;Y++){let z=$[Y];if(X[Y]=this.lookupOpInfo(z),z<=127){if(z>=96){let J=z-95,q=$.subarray(Y+1,Y+z-94);if(q.length<J)q=E8(q,J);let W=L0(q);Z[Y+1]=W,Y+=J}else if(z===91)Q[Y]=1}}return{jumps:Q,pushes:Z,opcodesCached:X}}useGas($,Q){if(this._runState.gasLeft-=$,this._evm.DEBUG){let Z="";if(typeof Q==="string")Z=Q+": ";else if(Q!==void 0)Z=`${Q.name} fee: `;UD(`${Z}used ${$} gas (-> ${this._runState.gasLeft})`)}if(this._runState.gasLeft<Q0)this._runState.gasLeft=Q0,W1(U0.errorMessages.OUT_OF_GAS)}refundGas($,Q){if(this._evm.DEBUG)UD(`${typeof Q==="string"?Q+": ":""}refund ${$} gas (-> ${this._runState.gasRefund})`);this._runState.gasRefund+=$}subRefund($,Q){if(this._evm.DEBUG)UD(`${typeof Q==="string"?Q+": ":""}sub gas refund ${$} (-> ${this._runState.gasRefund})`);if(this._runState.gasRefund-=$,this._runState.gasRefund<Q0)this._runState.gasRefund=Q0,W1(U0.errorMessages.REFUND_EXHAUSTED)}addStipend($){if(this._evm.DEBUG)UD(`add stipend ${$} (-> ${this._runState.gasLeft})`);this._runState.gasLeft+=$}async getExternalBalance($){if($.equals(this._env.address))return this._env.contract.balance;let Q=await this._stateManager.getAccount($);if(!Q)Q=new c5;return Q.balance}async storageStore($,Q){await this._stateManager.putStorage(this._env.address,$,Q);let Z=await this._stateManager.getAccount(this._env.address);if(!Z)throw n("could not read account while persisting memory");this._env.contract=Z}async storageLoad($,Q=!1){if(Q)return this._stateManager.originalStorageCache.get(this._env.address,$);else return this._stateManager.getStorage(this._env.address,$)}transientStorageStore($,Q){return this._evm.transientStorage.put(this._env.address,$,Q)}transientStorageLoad($){return this._evm.transientStorage.get(this._env.address,$)}finish($){this._result.returnValue=$,W1(U0.errorMessages.STOP)}revert($){this._result.returnValue=$,W1(U0.errorMessages.REVERT)}getAddress(){return this._env.address}getSelfBalance(){return this._env.contract.balance}getCallValue(){return this._env.callValue}getCallData(){return this._env.callData}getCallDataSize(){return BigInt(this._env.callData.length)}getCaller(){return L0(this._env.caller.bytes)}getCodeSize(){return BigInt(this._env.code.length)}getCode(){return this._env.code}getGasLeft(){return this._runState.gasLeft}getReturnDataSize(){return BigInt(this._runState.returnBytes.length)}getReturnData(){return this._runState.returnBytes}isStatic(){return this._env.isStatic}getTxGasPrice(){return this._env.gasPrice}getTxOrigin(){return L0(this._env.origin.bytes)}getBlockNumber(){return this._env.block.header.number}getBlockCoinbase(){let $;if(this.common.consensusAlgorithm()===OZ.Clique)$=this._evm._optsCached.cliqueSigner(this._env.block.header);else $=this._env.block.header.coinbase;return L0($.toBytes())}getBlockTimestamp(){return this._env.block.header.timestamp}getBlockDifficulty(){return this._env.block.header.difficulty}getBlockPrevRandao(){return L0(this._env.block.header.prevRandao)}getBlockGasLimit(){return this._env.block.header.gasLimit}getBlockBaseFee(){let $=this._env.block.header.baseFeePerGas;if($===void 0)throw n("Block has no Base Fee");return $}getBlobBaseFee(){let $=this._env.block.header.getBlobGasPrice();if($===void 0)throw n("Block has no Blob Base Fee");return $}getChainId(){return this.common.chainId()}async call($,Q,Z,X){let Y=new u$({caller:this._env.address,gasLimit:$,to:Q,value:Z,data:X,isStatic:this._env.isStatic,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(Y)}async callCode($,Q,Z,X){let Y=new u$({caller:this._env.address,gasLimit:$,to:this._env.address,codeAddress:Q,value:Z,data:X,isStatic:this._env.isStatic,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(Y)}async callStatic($,Q,Z,X){let Y=new u$({caller:this._env.address,gasLimit:$,to:Q,value:Z,data:X,isStatic:!0,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(Y)}async callDelegate($,Q,Z,X){let Y=new u$({caller:this._env.caller,gasLimit:$,to:this._env.address,codeAddress:Q,value:Z,data:X,isStatic:this._env.isStatic,delegatecall:!0,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(Y)}async _baseCall($){let Q=new Set(this._result.selfdestruct);$.selfdestruct=Q,$.gasRefund=this._runState.gasRefund,this._runState.returnBytes=new Uint8Array(0);let Z;if(this.common.isActivatedEIP(6780))Z=new Set(this._result.createdAddresses),$.createdAddresses=Z;if(this._runState.returnBytes=new Uint8Array(0),this._env.depth>=Number(this.common.param("stackLimit"))||$.delegatecall!==!0&&this._env.contract.balance<$.value)return Q0;let X=await this._evm.runCall({message:$});if(X.execResult.logs)this._result.logs=this._result.logs.concat(X.execResult.logs);if(this.useGas(X.execResult.executionGasUsed,"CALL, STATICCALL, DELEGATECALL, CALLCODE"),X.execResult.returnValue!==void 0&&(!X.execResult.exceptionError||X.execResult.exceptionError.error===U0.errorMessages.REVERT))this._runState.returnBytes=X.execResult.returnValue;if(!X.execResult.exceptionError){for(let z of Q)this._result.selfdestruct.add(z);if(this.common.isActivatedEIP(6780))for(let z of Z)this._result.createdAddresses.add(z);let Y=await this._stateManager.getAccount(this._env.address);if(!Y)throw n("could not read contract account");this._env.contract=Y,this._runState.gasRefund=X.execResult.gasRefund??Q0}return this._getReturnCode(X)}async create($,Q,Z,X,Y){let z=new Set(this._result.selfdestruct),J=this._env.address,q=this._env.depth+1;if(this._runState.returnBytes=new Uint8Array(0),this._env.depth>=Number(this.common.param("stackLimit"))||this._env.contract.balance<Q)return Q0;if(this._env.contract.nonce>=KZ)return Q0;if(this._env.contract.nonce+=A1,await this.journal.putAccount(this._env.address,this._env.contract),this.common.isActivatedEIP(3860)){if(Z.length>Number(this.common.param("maxInitCodeSize"))&&this._evm.allowUnlimitedInitCodeSize===!1)return Q0}let W=new u$({caller:J,gasLimit:$,value:Q,data:Z,eofCallData:Y,salt:X,depth:q,selfdestruct:z,gasRefund:this._runState.gasRefund,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness}),G;if(this.common.isActivatedEIP(6780))G=new Set(this._result.createdAddresses),W.createdAddresses=G;let U=await this._evm.runCall({message:W});if(U.execResult.logs)this._result.logs=this._result.logs.concat(U.execResult.logs);if(this.useGas(U.execResult.executionGasUsed,"CREATE"),U.execResult.exceptionError&&U.execResult.exceptionError.error===U0.errorMessages.REVERT)this._runState.returnBytes=U.execResult.returnValue;if(!U.execResult.exceptionError||U.execResult.exceptionError.error===U0.errorMessages.CODESTORE_OUT_OF_GAS){for(let P of z)this._result.selfdestruct.add(P);if(this.common.isActivatedEIP(6780))for(let P of G)this._result.createdAddresses.add(P);let D=await this._stateManager.getAccount(this._env.address);if(!D)throw n("could not read contract account");if(this._env.contract=D,this._runState.gasRefund=U.execResult.gasRefund??Q0,U.createdAddress)return L0(U.createdAddress.bytes)}return this._getReturnCode(U,!0)}async create2($,Q,Z,X){return this.create($,Q,Z,X)}async eofcreate($,Q,Z,X,Y){return this.create($,Q,Z,X,Y)}async selfDestruct($){return this._selfDestruct($)}async _selfDestruct($){if(!this._result.selfdestruct.has(H0(this._env.address.bytes)))this.refundGas(this.common.param("selfdestructRefundGas"));this._result.selfdestruct.add(H0(this._env.address.bytes));let Q=X1($.bytes,this._env.address.bytes);if(!Q){let X=await this._stateManager.getAccount($);if(!X)X=new c5;X.balance+=this._env.contract.balance,await this.journal.putAccount($,X)}let Z=!this.common.isActivatedEIP(6780);if(!Z){if(Z=this._env.createdAddresses.has(this._env.address.toString()),!Z)Z=!Q}if(Z)await this._stateManager.modifyAccountFields(this._env.address,{balance:Q0});W1(U0.errorMessages.STOP)}log($,Q,Z){if(Q<0||Q>4)W1(U0.errorMessages.OUT_OF_RANGE);if(Z.length!==Q)W1(U0.errorMessages.INTERNAL_ERROR);let X=[this._env.address.bytes,Z,$];this._result.logs.push(X)}_getReturnCode($,Q=!1){if(this._runState.env.eof===void 0||Q)if($.execResult.exceptionError)return Q0;else return A1;else{if($.execResult.exceptionError!==void 0)if($.execResult.exceptionError.error===U0.errorMessages.REVERT)return A1;else return I8;return Q0}}}var US,UD;var a00=p(()=>{$9();Z1();oN();k00();d_();m8();b00();QS();KS();r00();c_();US=V2(Y4(),1),UD=US.default("evm:gas")});class OS{constructor($,Q){this.DEBUG=typeof window>"u"?process?.env?.DEBUG?.includes("ethjs")??!1:!1,this._debug=s00.default("evm:journal"),this.cleanJournal(),this.journalHeight=0,this.stateManager=$,this.common=Q}startReportingAccessList(){this.accessList=new Map}startReportingPreimages(){this.preimages=new Map}async putAccount($,Q){return this.touchAddress($),this.stateManager.putAccount($,Q)}async deleteAccount($){this.touchAddress($),await this.stateManager.deleteAccount($)}touchAddress($){let Q=$.toString().slice(2);this.touchAccount(Q)}touchAccount($){if(this.preimages!==void 0){let Q=v7($);if(this.stateManager.getAppliedKey===void 0)throw n("touchAccount: stateManager.getAppliedKey can not be undefined if preimage storing is enabled");let Z=this.stateManager.getAppliedKey(Q);this.preimages.set(H0(Z),Q)}if(!this.touched.has($))this.touched.add($),this.journalDiff[this.journalDiff.length-1][1][2].add($)}async commit(){this.journalHeight--,this.journalDiff.push([this.journalHeight,[new Set,new Map,new Set]]),await this.stateManager.commit()}async checkpoint(){this.journalHeight++,this.journalDiff.push([this.journalHeight,[new Set,new Map,new Set]]),await this.stateManager.checkpoint()}async revert(){let $;for(let Q=this.journalDiff.length-1;Q>=0;Q--){$=Q;let[Z,X]=this.journalDiff[Q];if(Z<this.journalHeight)break;let Y=X[0],z=X[1],J=X[2];for(let q of Y)if(this.journal.has(q))this.journal.delete(q);for(let[q,W]of z)if(this.journal.has(q)){let G=this.journal.get(q);for(let U of W)G.delete(U)}for(let q of J)if(q!==ln)this.touched.delete(q)}this.journalDiff=this.journalDiff.slice(0,$+1),this.journalHeight--,await this.stateManager.revert()}cleanJournal(){this.journalHeight=0,this.journal=new Map,this.alwaysWarmJournal=new Map,this.touched=new Set,this.journalDiff=[[0,[new Set,new Map,new Set]]]}async cleanup(){if(this.common.gteHardfork(w0.SpuriousDragon))for(let $ of this.touched){let Q=new Q6(Q1(`0x${$}`)),Z=await this.stateManager.getAccount(Q);if(Z===void 0||Z.isEmpty()){if(await this.deleteAccount(Q),this.DEBUG)this._debug(`Cleanup touched account address=${Q} (>= SpuriousDragon)`)}}this.cleanJournal(),delete this.accessList,delete this.preimages}addAlwaysWarmAddress($,Q=!1){let Z=az($);if(!this.alwaysWarmJournal.has(Z))this.alwaysWarmJournal.set(Z,new Set);if(Q&&this.accessList!==void 0){if(!this.accessList.has(Z))this.accessList.set(Z,new Set)}}addAlwaysWarmSlot($,Q,Z=!1){let X=az($);this.addAlwaysWarmAddress(X,Z);let Y=this.alwaysWarmJournal.get(X),z=az(Q);if(Y.add(z),Z&&this.accessList!==void 0)this.accessList.get(X).add(z)}isWarmedAddress($){let Q=$5($);return this.journal.has(Q)||this.alwaysWarmJournal.has(Q)}addWarmedAddress($){let Q=$5($);if(!this.journal.has(Q))this.journal.set(Q,new Set),this.journalDiff[this.journalDiff.length-1][1][0].add(Q);if(this.accessList!==void 0){if(!this.accessList.has(Q))this.accessList.set(Q,new Set)}}isWarmedStorage($,Q){let Z=$5($),X=this.journal.get(Z);if(X===void 0){if(this.alwaysWarmJournal.has(Z))return this.alwaysWarmJournal.get(Z).has($5(Q));return!1}if(X.has($5(Q)))return!0;else if(this.alwaysWarmJournal.has(Z))return this.alwaysWarmJournal.get(Z).has($5(Q));return!1}addWarmedStorage($,Q){let Z=$5($),X=this.journal.get(Z);if(X===void 0)this.addWarmedAddress($),X=this.journal.get(Z);let Y=$5(Q);if(!X.has(Y)){X.add(Y);let J=this.journalDiff[this.journalDiff.length-1][1][1];if(!J.has(Z))J.set(Z,new Set);J.get(Z).add(Y)}if(this.accessList!==void 0)this.accessList.get(Z).add(Y)}}var s00;var t00=p(()=>{$9();Z1();s00=V2(Y4(),1)});var e00;var DS=p(()=>{e00={1:{maxRefundQuotient:2,basefeeGas:2,expGas:10,expByteGas:10,keccak256Gas:30,keccak256WordGas:6,sloadGas:50,sstoreSetGas:20000,sstoreResetGas:5000,sstoreRefundGas:15000,jumpdestGas:1,logGas:375,logDataGas:8,logTopicGas:375,createGas:32000,callGas:40,callStipendGas:2300,callValueTransferGas:9000,callNewAccountGas:25000,selfdestructRefundGas:24000,memoryGas:3,quadCoefficientDivGas:512,createDataGas:200,copyGas:3,ecRecoverGas:3000,sha256Gas:60,sha256WordGas:12,ripemd160Gas:600,ripemd160WordGas:120,identityGas:15,identityWordGas:3,stopGas:0,addGas:3,mulGas:5,subGas:3,divGas:5,sdivGas:5,modGas:5,smodGas:5,addmodGas:8,mulmodGas:8,signextendGas:5,ltGas:3,gtGas:3,sltGas:3,sgtGas:3,eqGas:3,iszeroGas:3,andGas:3,orGas:3,xorGas:3,notGas:3,byteGas:3,addressGas:2,balanceGas:20,originGas:2,callerGas:2,callvalueGas:2,calldataloadGas:3,calldatasizeGas:2,calldatacopyGas:3,codesizeGas:2,codecopyGas:3,gaspriceGas:2,extcodesizeGas:20,extcodecopyGas:20,blockhashGas:20,coinbaseGas:2,timestampGas:2,numberGas:2,difficultyGas:2,gaslimitGas:2,popGas:2,mloadGas:3,mstoreGas:3,mstore8Gas:3,sstoreGas:0,jumpGas:8,jumpiGas:10,pcGas:2,msizeGas:2,gasGas:2,pushGas:3,dupGas:3,swapGas:3,callcodeGas:40,returnGas:0,invalidGas:0,selfdestructGas:0,prevrandaoGas:0,stackLimit:1024},606:{delegatecallGas:40},608:{sloadGas:200,callGas:700,extcodesizeGas:700,extcodecopyGas:700,balanceGas:400,delegatecallGas:700,callcodeGas:700,selfdestructGas:5000},607:{expByteGas:50,maxCodeSize:24576},609:{modexpGquaddivisorGas:20,bn254AddGas:500,bn254MulGas:40000,bn254PairingGas:1e5,bn254PairingWordGas:80000,revertGas:0,staticcallGas:700,returndatasizeGas:2,returndatacopyGas:3},1013:{netSstoreNoopGas:200,netSstoreInitGas:20000,netSstoreCleanGas:5000,netSstoreDirtyGas:200,netSstoreClearRefundGas:15000,netSstoreResetRefundGas:4800,netSstoreResetClearRefundGas:19800,shlGas:3,shrGas:3,sarGas:3,extcodehashGas:400,create2Gas:32000},1716:{netSstoreNoopGas:null,netSstoreInitGas:null,netSstoreCleanGas:null,netSstoreDirtyGas:null,netSstoreClearRefundGas:null,netSstoreResetRefundGas:null,netSstoreResetClearRefundGas:null},1679:{blake2RoundGas:1,bn254AddGas:150,bn254MulGas:6000,bn254PairingGas:45000,bn254PairingWordGas:34000,sstoreSentryEIP2200Gas:2300,sstoreNoopEIP2200Gas:800,sstoreDirtyEIP2200Gas:800,sstoreInitEIP2200Gas:20000,sstoreInitRefundEIP2200Gas:19200,sstoreCleanEIP2200Gas:5000,sstoreCleanRefundEIP2200Gas:4200,sstoreClearRefundEIP2200Gas:15000,balanceGas:700,extcodehashGas:700,chainidGas:2,selfbalanceGas:5,sloadGas:800},663:{dupnGas:3,swapnGas:3,exchangeGas:3},1153:{tstoreGas:100,tloadGas:100},1559:{elasticityMultiplier:2},2565:{modexpGquaddivisorGas:3},2537:{bls12381G1AddGas:375,bls12381G1MulGas:12000,bls12381G2AddGas:600,bls12381G2MulGas:22500,bls12381PairingBaseGas:37700,bls12381PairingPerPairGas:32600,bls12381MapG1Gas:5500,bls12381MapG2Gas:23800},2929:{coldsloadGas:2100,coldaccountaccessGas:2600,warmstoragereadGas:100,sstoreCleanEIP2200Gas:2900,sstoreNoopEIP2200Gas:100,sstoreDirtyEIP2200Gas:100,sstoreInitRefundEIP2200Gas:19900,sstoreCleanRefundEIP2200Gas:4900,callGas:0,callcodeGas:0,delegatecallGas:0,staticcallGas:0,balanceGas:0,extcodesizeGas:0,extcodecopyGas:0,extcodehashGas:0,sloadGas:0,sstoreGas:0},2935:{historyStorageAddress:"0x0000F90827F1C53A10CB7A02335B175320002935",historyServeWindow:8192,systemAddress:"0xfffffffffffffffffffffffffffffffffffffffe"},3198:{basefeeGas:2},3529:{maxRefundQuotient:5,selfdestructRefundGas:0,sstoreClearRefundEIP2200Gas:4800},3855:{push0Gas:2},3860:{initCodeWordGas:2,maxInitCodeSize:49152},4200:{rjumpGas:2,rjumpiGas:4,rjumpvGas:4},4399:{prevrandaoGas:2},4750:{callfGas:5,retfGas:3},4844:{kzgPointEvaluationPrecompileGas:50000,blobhashGas:3,blobCommitmentVersionKzg:1,fieldElementsPerBlob:4096},5656:{mcopyGas:3},6206:{jumpfGas:5},7069:{extcallGas:0,extdelegatecallGas:0,extstaticcallGas:0,returndataloadGas:3,minRetainedGas:5000,minCalleeGas:2300},7480:{dataloadGas:4,dataloadnGas:3,datasizeGas:2,datacopyGas:3},7516:{blobbasefeeGas:2},7620:{eofcreateGas:32000,returncontractGas:0},7939:{clzGas:5}}});var w5=($,Q,Z)=>{if($._debug!==void 0)$._debug(`Run ${Z} precompile data=${v4($.data)} length=${$.data.length} gasLimit=${$.gasLimit} gasUsed=${Q}`);if($.gasLimit<Q){if($._debug!==void 0)$._debug(`${Z} failed: OOG`);return!1}return!0},xY=($,Q,Z)=>{if($.data.length!==Q){if($._debug!==void 0)$._debug(`${Z} failed: Invalid input length length=${$.data.length} (expected: ${Q})`);return!1}return!0},bY=($,Q,Z)=>{if($.data.length%Q!==0){if($._debug!==void 0)$._debug(`${Z} failed: Invalid input length length=${$.data.length} (expected: ${Q}*k bytes)`);return!1}return!0};var Q9=p(()=>{Z1()});async function MS($){let Q=j5("0a");if($.common.customCrypto?.kzg===void 0)throw n("kzg not initialized");let Z=$.common.param("kzgPointEvaluationPrecompileGas");if(!w5($,Z,Q))return u1($.gasLimit);if($.data.length!==192)return t1(new U0(U0.errorMessages.INVALID_INPUT_LENGTH),$.gasLimit);let X=Number($.common.param("blobCommitmentVersionKzg")),Y=$.common.param("fieldElementsPerBlob"),z=H0($.data.subarray(0,32)),J=H0($.data.subarray(32,64)),q=H0($.data.subarray(64,96)),W=H0($.data.subarray(96,144)),G=H0($.data.subarray(144,192));if(xR(W,X)!==z){if($._debug!==void 0)$._debug(`${Q} failed: INVALID_COMMITMENT`);return t1(new U0(U0.errorMessages.INVALID_COMMITMENT),$.gasLimit)}if($._debug!==void 0)$._debug(`${Q}: proof verification with commitment=${W} z=${J} y=${q} kzgProof=${G}`);try{if($.common.customCrypto?.kzg?.verifyProof(W,J,q,G)===!1)return t1(new U0(U0.errorMessages.INVALID_PROOF),$.gasLimit)}catch(D){if(D.message.includes("C_KZG_BADARGS")===!0===!0===!0){if($._debug!==void 0)$._debug(`${Q} failed: INVALID_INPUTS`);return t1(new U0(U0.errorMessages.INVALID_INPUTS),$.gasLimit)}if($._debug!==void 0)$._debug(`${Q} failed: Unknown error - ${D.message}`);return t1(new U0(U0.errorMessages.REVERT),$.gasLimit)}let U=b1(Z5(Y),32);if($._debug!==void 0)$._debug(`${Q} return fieldElements=${H0(U)} modulus=${H0($10)}`);return{executionGasUsed:Z,returnValue:d1(U,$10)}}var QR0,$10;var Q10=p(()=>{Z1();m8();p8();R8();Q9();QR0=BigInt("52435875175126190479447740508185965837690552500527637822603658699938581184513"),$10=b1(Z5(QR0),32)});var YC,l4=128,c7=256,PS,HS,Z10,X10,Y10,J10;var jS=p(()=>{Z1();YC=BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),PS=new Uint8Array(l4),HS=new Uint8Array(c7),Z10=new Uint8Array(32),X10=d1(new Uint8Array(31),Q1("0x01")),Y10=[[1,1000],[2,949],[3,848],[4,797],[5,764],[6,750],[7,738],[8,728],[9,719],[10,712],[11,705],[12,698],[13,692],[14,687],[15,682],[16,677],[17,673],[18,669],[19,665],[20,661],[21,658],[22,654],[23,651],[24,648],[25,645],[26,642],[27,640],[28,637],[29,635],[30,632],[31,630],[32,627],[33,625],[34,623],[35,621],[36,619],[37,617],[38,615],[39,613],[40,611],[41,609],[42,608],[43,606],[44,604],[45,603],[46,601],[47,599],[48,598],[49,596],[50,595],[51,593],[52,592],[53,591],[54,589],[55,588],[56,586],[57,585],[58,584],[59,582],[60,581],[61,580],[62,579],[63,577],[64,576],[65,575],[66,574],[67,573],[68,572],[69,570],[70,569],[71,568],[72,567],[73,566],[74,565],[75,564],[76,563],[77,562],[78,561],[79,560],[80,559],[81,558],[82,557],[83,556],[84,555],[85,554],[86,553],[87,552],[88,551],[89,550],[90,549],[91,548],[92,547],[93,547],[94,546],[95,545],[96,544],[97,543],[98,542],[99,541],[100,540],[101,540],[102,539],[103,538],[104,537],[105,536],[106,536],[107,535],[108,534],[109,533],[110,532],[111,532],[112,531],[113,530],[114,529],[115,528],[116,528],[117,527],[118,526],[119,525],[120,525],[121,524],[122,523],[123,522],[124,522],[125,521],[126,520],[127,520],[128,519]],J10=[[1,1000],[2,1000],[3,923],[4,884],[5,855],[6,832],[7,812],[8,796],[9,782],[10,770],[11,759],[12,749],[13,740],[14,732],[15,724],[16,717],[17,711],[18,704],[19,699],[20,693],[21,688],[22,683],[23,679],[24,674],[25,670],[26,666],[27,663],[28,659],[29,655],[30,652],[31,649],[32,646],[33,643],[34,640],[35,637],[36,634],[37,632],[38,629],[39,627],[40,624],[41,622],[42,620],[43,618],[44,615],[45,613],[46,611],[47,609],[48,607],[49,606],[50,604],[51,602],[52,600],[53,598],[54,597],[55,595],[56,593],[57,592],[58,590],[59,589],[60,587],[61,586],[62,584],[63,583],[64,582],[65,580],[66,579],[67,578],[68,576],[69,575],[70,574],[71,573],[72,571],[73,570],[74,569],[75,568],[76,567],[77,566],[78,565],[79,563],[80,562],[81,561],[82,560],[83,559],[84,558],[85,557],[86,556],[87,555],[88,554],[89,553],[90,552],[91,552],[92,551],[93,550],[94,549],[95,548],[96,547],[97,546],[98,545],[99,545],[100,544],[101,543],[102,542],[103,541],[104,541],[105,540],[106,539],[107,538],[108,537],[109,537],[110,536],[111,535],[112,535],[113,534],[114,533],[115,532],[116,532],[117,531],[118,530],[119,530],[120,529],[121,528],[122,528],[123,527],[124,526],[125,526],[126,525],[127,524],[128,524]]});var Nq;var z10=p(()=>{Nq=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function ZR0($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function JC($){if(!Number.isSafeInteger($)||$<0)throw Error("positive integer expected, got "+$)}function Cq($,...Q){if(!ZR0($))throw Error("Uint8Array expected");if(Q.length>0&&!Q.includes($.length))throw Error("Uint8Array expected of length "+Q+", got length="+$.length)}function q10($){if(typeof $!=="function"||typeof $.create!=="function")throw Error("Hash should be wrapped by utils.createHasher");JC($.outputLen),JC($.blockLen)}function vG($,Q=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(Q&&$.finished)throw Error("Hash#digest() has already been called")}function W10($,Q){Cq($);let Z=Q.outputLen;if($.length<Z)throw Error("digestInto() expects output buffer of length at least "+Z)}function EZ(...$){for(let Q=0;Q<$.length;Q++)$[Q].fill(0)}function zC($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function f3($,Q){return $<<32-Q|$>>>Q}function XR0($){if(typeof $!=="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function VD($){if(typeof $==="string")$=XR0($);return Cq($),$}function K10(...$){let Q=0;for(let X=0;X<$.length;X++){let Y=$[X];Cq(Y),Q+=Y.length}let Z=new Uint8Array(Q);for(let X=0,Y=0;X<$.length;X++){let z=$[X];Z.set(z,Y),Y+=z.length}return Z}class OD{}function qC($){let Q=(X)=>$().update(VD(X)).digest(),Z=$();return Q.outputLen=Z.outputLen,Q.blockLen=Z.blockLen,Q.create=()=>$(),Q}function yG($=32){if(Nq&&typeof Nq.getRandomValues==="function")return Nq.getRandomValues(new Uint8Array($));if(Nq&&typeof Nq.randomBytes==="function")return Uint8Array.from(Nq.randomBytes($));throw Error("crypto.getRandomValues must be defined")}var vY=p(()=>{z10();/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */});function YR0($,Q,Z,X){if(typeof $.setBigUint64==="function")return $.setBigUint64(Q,Z,X);let Y=BigInt(32),z=BigInt(4294967295),J=Number(Z>>Y&z),q=Number(Z&z),W=X?4:0,G=X?0:4;$.setUint32(Q+W,J,X),$.setUint32(Q+G,q,X)}function G10($,Q,Z){return $&Q^~$&Z}function U10($,Q,Z){return $&Q^$&Z^Q&Z}var WC,IZ,k9,x9;var V10=p(()=>{vY();WC=class WC extends OD{constructor($,Q,Z,X){super();this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=$,this.outputLen=Q,this.padOffset=Z,this.isLE=X,this.buffer=new Uint8Array($),this.view=zC(this.buffer)}update($){vG(this),$=VD($),Cq($);let{view:Q,buffer:Z,blockLen:X}=this,Y=$.length;for(let z=0;z<Y;){let J=Math.min(X-this.pos,Y-z);if(J===X){let q=zC($);for(;X<=Y-z;z+=X)this.process(q,z);continue}if(Z.set($.subarray(z,z+J),this.pos),this.pos+=J,z+=J,this.pos===X)this.process(Q,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){vG(this),W10($,this),this.finished=!0;let{buffer:Q,view:Z,blockLen:X,isLE:Y}=this,{pos:z}=this;if(Q[z++]=128,EZ(this.buffer.subarray(z)),this.padOffset>X-z)this.process(Z,0),z=0;for(let U=z;U<X;U++)Q[U]=0;YR0(Z,X-8,BigInt(this.length*8),Y),this.process(Z,0);let J=zC($),q=this.outputLen;if(q%4)throw Error("_sha2: outputLen should be aligned to 32bit");let W=q/4,G=this.get();if(W>G.length)throw Error("_sha2: outputLen bigger than state");for(let U=0;U<W;U++)J.setUint32(4*U,G[U],Y)}digest(){let{buffer:$,outputLen:Q}=this;this.digestInto($);let Z=$.slice(0,Q);return this.destroy(),Z}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:Q,buffer:Z,length:X,finished:Y,destroyed:z,pos:J}=this;if($.destroyed=z,$.finished=Y,$.length=X,$.pos=J,X%Q)$.buffer.set(Z);return $}clone(){return this._cloneInto()}};IZ=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),k9=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),x9=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209])});function JR0($,Q=!1){if(Q)return{h:Number($&KC),l:Number($>>O10&KC)};return{h:Number($>>O10&KC)|0,l:Number($&KC)|0}}function D10($,Q=!1){let Z=$.length,X=new Uint32Array(Z),Y=new Uint32Array(Z);for(let z=0;z<Z;z++){let{h:J,l:q}=JR0($[z],Q);[X[z],Y[z]]=[J,q]}return[X,Y]}function l$($,Q,Z,X){let Y=(Q>>>0)+(X>>>0);return{h:$+Z+(Y/4294967296|0)|0,l:Y|0}}var KC,O10,RS=($,Q,Z)=>$>>>Z,NS=($,Q,Z)=>$<<32-Z|Q>>>Z,Lq=($,Q,Z)=>$>>>Z|Q<<32-Z,Tq=($,Q,Z)=>$<<32-Z|Q>>>Z,DD=($,Q,Z)=>$<<64-Z|Q>>>Z-32,MD=($,Q,Z)=>$>>>Z-32|Q<<64-Z,M10=($,Q,Z)=>($>>>0)+(Q>>>0)+(Z>>>0),P10=($,Q,Z,X)=>Q+Z+X+($/4294967296|0)|0,H10=($,Q,Z,X)=>($>>>0)+(Q>>>0)+(Z>>>0)+(X>>>0),j10=($,Q,Z,X,Y)=>Q+Z+X+Y+($/4294967296|0)|0,R10=($,Q,Z,X,Y)=>($>>>0)+(Q>>>0)+(Z>>>0)+(X>>>0)+(Y>>>0),N10=($,Q,Z,X,Y,z)=>Q+Z+X+Y+z+($/4294967296|0)|0;var C10=p(()=>{KC=BigInt(4294967295),O10=BigInt(32)});var qR0,yY,L10,T10,WR0,KR0,gY,hY,CS,F10,_Z,A10,w10;var GC=p(()=>{V10();C10();vY();qR0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),yY=new Uint32Array(64);L10=class L10 extends WC{constructor($=32){super(64,$,8,!1);this.A=IZ[0]|0,this.B=IZ[1]|0,this.C=IZ[2]|0,this.D=IZ[3]|0,this.E=IZ[4]|0,this.F=IZ[5]|0,this.G=IZ[6]|0,this.H=IZ[7]|0}get(){let{A:$,B:Q,C:Z,D:X,E:Y,F:z,G:J,H:q}=this;return[$,Q,Z,X,Y,z,J,q]}set($,Q,Z,X,Y,z,J,q){this.A=$|0,this.B=Q|0,this.C=Z|0,this.D=X|0,this.E=Y|0,this.F=z|0,this.G=J|0,this.H=q|0}process($,Q){for(let U=0;U<16;U++,Q+=4)yY[U]=$.getUint32(Q,!1);for(let U=16;U<64;U++){let D=yY[U-15],P=yY[U-2],H=f3(D,7)^f3(D,18)^D>>>3,N=f3(P,17)^f3(P,19)^P>>>10;yY[U]=N+yY[U-7]+H+yY[U-16]|0}let{A:Z,B:X,C:Y,D:z,E:J,F:q,G:W,H:G}=this;for(let U=0;U<64;U++){let D=f3(J,6)^f3(J,11)^f3(J,25),P=G+D+G10(J,q,W)+qR0[U]+yY[U]|0,N=(f3(Z,2)^f3(Z,13)^f3(Z,22))+U10(Z,X,Y)|0;G=W,W=q,q=J,J=z+P|0,z=Y,Y=X,X=Z,Z=P+N|0}Z=Z+this.A|0,X=X+this.B|0,Y=Y+this.C|0,z=z+this.D|0,J=J+this.E|0,q=q+this.F|0,W=W+this.G|0,G=G+this.H|0,this.set(Z,X,Y,z,J,q,W,G)}roundClean(){EZ(yY)}destroy(){this.set(0,0,0,0,0,0,0,0),EZ(this.buffer)}};T10=(()=>D10(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(($)=>BigInt($))))(),WR0=(()=>T10[0])(),KR0=(()=>T10[1])(),gY=new Uint32Array(80),hY=new Uint32Array(80);CS=class CS extends WC{constructor($=64){super(128,$,16,!1);this.Ah=x9[0]|0,this.Al=x9[1]|0,this.Bh=x9[2]|0,this.Bl=x9[3]|0,this.Ch=x9[4]|0,this.Cl=x9[5]|0,this.Dh=x9[6]|0,this.Dl=x9[7]|0,this.Eh=x9[8]|0,this.El=x9[9]|0,this.Fh=x9[10]|0,this.Fl=x9[11]|0,this.Gh=x9[12]|0,this.Gl=x9[13]|0,this.Hh=x9[14]|0,this.Hl=x9[15]|0}get(){let{Ah:$,Al:Q,Bh:Z,Bl:X,Ch:Y,Cl:z,Dh:J,Dl:q,Eh:W,El:G,Fh:U,Fl:D,Gh:P,Gl:H,Hh:N,Hl:C}=this;return[$,Q,Z,X,Y,z,J,q,W,G,U,D,P,H,N,C]}set($,Q,Z,X,Y,z,J,q,W,G,U,D,P,H,N,C){this.Ah=$|0,this.Al=Q|0,this.Bh=Z|0,this.Bl=X|0,this.Ch=Y|0,this.Cl=z|0,this.Dh=J|0,this.Dl=q|0,this.Eh=W|0,this.El=G|0,this.Fh=U|0,this.Fl=D|0,this.Gh=P|0,this.Gl=H|0,this.Hh=N|0,this.Hl=C|0}process($,Q){for(let E=0;E<16;E++,Q+=4)gY[E]=$.getUint32(Q),hY[E]=$.getUint32(Q+=4);for(let E=16;E<80;E++){let I=gY[E-15]|0,_=hY[E-15]|0,f=Lq(I,_,1)^Lq(I,_,8)^RS(I,_,7),x=Tq(I,_,1)^Tq(I,_,8)^NS(I,_,7),g=gY[E-2]|0,h=hY[E-2]|0,v=Lq(g,h,19)^DD(g,h,61)^RS(g,h,6),b=Tq(g,h,19)^MD(g,h,61)^NS(g,h,6),m=H10(x,b,hY[E-7],hY[E-16]),K=j10(m,f,v,gY[E-7],gY[E-16]);gY[E]=K|0,hY[E]=m|0}let{Ah:Z,Al:X,Bh:Y,Bl:z,Ch:J,Cl:q,Dh:W,Dl:G,Eh:U,El:D,Fh:P,Fl:H,Gh:N,Gl:C,Hh:L,Hl:B}=this;for(let E=0;E<80;E++){let I=Lq(U,D,14)^Lq(U,D,18)^DD(U,D,41),_=Tq(U,D,14)^Tq(U,D,18)^MD(U,D,41),f=U&P^~U&N,x=D&H^~D&C,g=R10(B,_,x,KR0[E],hY[E]),h=N10(g,L,I,f,WR0[E],gY[E]),v=g|0,b=Lq(Z,X,28)^DD(Z,X,34)^DD(Z,X,39),m=Tq(Z,X,28)^MD(Z,X,34)^MD(Z,X,39),K=Z&Y^Z&J^Y&J,M=X&z^X&q^z&q;L=N|0,B=C|0,N=P|0,C=H|0,P=U|0,H=D|0,{h:U,l:D}=l$(W|0,G|0,h|0,v|0),W=J|0,G=q|0,J=Y|0,q=z|0,Y=Z|0,z=X|0;let j=M10(v,m,M);Z=P10(j,h,b,K),X=j|0}({h:Z,l:X}=l$(this.Ah|0,this.Al|0,Z|0,X|0)),{h:Y,l:z}=l$(this.Bh|0,this.Bl|0,Y|0,z|0),{h:J,l:q}=l$(this.Ch|0,this.Cl|0,J|0,q|0),{h:W,l:G}=l$(this.Dh|0,this.Dl|0,W|0,G|0),{h:U,l:D}=l$(this.Eh|0,this.El|0,U|0,D|0),{h:P,l:H}=l$(this.Fh|0,this.Fl|0,P|0,H|0),{h:N,l:C}=l$(this.Gh|0,this.Gl|0,N|0,C|0),{h:L,l:B}=l$(this.Hh|0,this.Hl|0,L|0,B|0),this.set(Z,X,Y,z,J,q,W,G,U,D,P,H,N,C,L,B)}roundClean(){EZ(gY,hY)}destroy(){EZ(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};F10=class F10 extends CS{constructor(){super(48);this.Ah=k9[0]|0,this.Al=k9[1]|0,this.Bh=k9[2]|0,this.Bl=k9[3]|0,this.Ch=k9[4]|0,this.Cl=k9[5]|0,this.Dh=k9[6]|0,this.Dl=k9[7]|0,this.Eh=k9[8]|0,this.El=k9[9]|0,this.Fh=k9[10]|0,this.Fl=k9[11]|0,this.Gh=k9[12]|0,this.Gl=k9[13]|0,this.Hh=k9[14]|0,this.Hl=k9[15]|0}};_Z=qC(()=>new L10),A10=qC(()=>new CS),w10=qC(()=>new F10)});function gG($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function fZ($){if(!gG($))throw Error("Uint8Array expected")}function hG($,Q){if(typeof Q!=="boolean")throw Error($+" boolean expected, got "+Q)}function PD($){let Q=$.toString(16);return Q.length&1?"0"+Q:Q}function I10($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);return $===""?FS:BigInt("0x"+$)}function kZ($){if(fZ($),_10)return $.toHex();let Q="";for(let Z=0;Z<$.length;Z++)Q+=GR0[$[Z]];return Q}function B10($){if($>=SZ._0&&$<=SZ._9)return $-SZ._0;if($>=SZ.A&&$<=SZ.F)return $-(SZ.A-10);if($>=SZ.a&&$<=SZ.f)return $-(SZ.a-10);return}function HD($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);if(_10)return Uint8Array.fromHex($);let Q=$.length,Z=Q/2;if(Q%2)throw Error("hex string expected, got unpadded hex of length "+Q);let X=new Uint8Array(Z);for(let Y=0,z=0;Y<Z;Y++,z+=2){let J=B10($.charCodeAt(z)),q=B10($.charCodeAt(z+1));if(J===void 0||q===void 0){let W=$[z]+$[z+1];throw Error('hex string expected, got non-hex character "'+W+'" at index '+z)}X[Y]=J*16+q}return X}function Z9($){return I10(kZ($))}function AS($){return fZ($),I10(kZ(Uint8Array.from($).reverse()))}function N8($,Q){return HD($.toString(16).padStart(Q*2,"0"))}function wS($,Q){return N8($,Q).reverse()}function u8($,Q,Z){let X;if(typeof Q==="string")try{X=HD(Q)}catch(z){throw Error($+" must be hex string or Uint8Array, cause: "+z)}else if(gG(Q))X=Uint8Array.from(Q);else throw Error($+" must be hex string or Uint8Array");let Y=X.length;if(typeof Z==="number"&&Y!==Z)throw Error($+" of length "+Z+" expected, got "+Y);return X}function d6(...$){let Q=0;for(let X=0;X<$.length;X++){let Y=$[X];fZ(Y),Q+=Y.length}let Z=new Uint8Array(Q);for(let X=0,Y=0;X<$.length;X++){let z=$[X];Z.set(z,Y),Y+=z.length}return Z}function VC($){if(typeof $!=="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function OC($,Q,Z){return LS($)&&LS(Q)&&LS(Z)&&Q<=$&&$<Z}function Fq($,Q,Z,X){if(!OC(Q,Z,X))throw Error("expected valid "+$+": "+Z+" <= n < "+X+", got "+Q)}function i$($){let Q;for(Q=0;$>FS;$>>=UC,Q+=1);return Q}function DC($,Q){return $>>BigInt(Q)&UC}function S10($,Q,Z){if(typeof $!=="number"||$<2)throw Error("hashLen must be a number");if(typeof Q!=="number"||Q<2)throw Error("qByteLen must be a number");if(typeof Z!=="function")throw Error("hmacFn must be a function");let X=TS($),Y=TS($),z=0,J=()=>{X.fill(1),Y.fill(0),z=0},q=(...D)=>Z(Y,X,...D),W=(D=TS(0))=>{if(Y=q(E10([0]),D),X=q(),D.length===0)return;Y=q(E10([1]),D),X=q()},G=()=>{if(z++>=1000)throw Error("drbg: tried 1000 values");let D=0,P=[];while(D<Q){X=q();let H=X.slice();P.push(H),D+=X.length}return d6(...P)};return(D,P)=>{J(),W(D);let H=void 0;while(!(H=P(G())))W();return J(),H}}function xZ($,Q,Z={}){let X=(Y,z,J)=>{let q=UR0[z];if(typeof q!=="function")throw Error("invalid validator function");let W=$[Y];if(J&&W===void 0)return;if(!q(W,$))throw Error("param "+String(Y)+" is invalid. Expected "+z+", got "+W)};for(let[Y,z]of Object.entries(Q))X(Y,z,!1);for(let[Y,z]of Object.entries(Z))X(Y,z,!0);return $}function jD($){let Q=new WeakMap;return(Z,...X)=>{let Y=Q.get(Z);if(Y!==void 0)return Y;let z=$(Z,...X);return Q.set(Z,z),z}}var FS,UC,_10,GR0,SZ,LS=($)=>typeof $==="bigint"&&FS<=$,k3=($)=>(UC<<BigInt($))-UC,TS=($)=>new Uint8Array($),E10=($)=>Uint8Array.from($),UR0,Q2=()=>{throw Error("not implemented")};var bZ=p(()=>{/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */FS=BigInt(0),UC=BigInt(1);_10=typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function",GR0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));SZ={_0:48,_9:57,A:65,F:70,a:97,f:102};UR0={bigint:($)=>typeof $==="bigint",function:($)=>typeof $==="function",boolean:($)=>typeof $==="boolean",string:($)=>typeof $==="string",stringOrUint8Array:($)=>typeof $==="string"||gG($),isSafeInteger:($)=>Number.isSafeInteger($),array:($)=>Array.isArray($),field:($,Q)=>Q.Fp.isValid($),hash:($)=>typeof $==="function"&&Number.isSafeInteger($.outputLen)}});function k2($,Q){let Z=$%Q;return Z>=q4?Z:Q+Z}function MC($,Q){if($===q4)throw Error("invert: expected non-zero number");if(Q<=q4)throw Error("invert: expected positive modulus, got "+Q);let Z=k2($,Q),X=Q,Y=q4,z=Z2,J=Z2,q=q4;while(Z!==q4){let G=X/Z,U=X%Z,D=Y-J*G,P=z-q*G;X=Z,Z=U,Y=J,z=q,J=D,q=P}if(X!==Z2)throw Error("invert: does not exist");return k2(Y,Q)}function b10($,Q){let Z=($.ORDER+Z2)/f10,X=$.pow(Q,Z);if(!$.eql($.sqr(X),Q))throw Error("Cannot find square root");return X}function OR0($,Q){let Z=($.ORDER-k10)/x10,X=$.mul(Q,Aq),Y=$.pow(X,Z),z=$.mul(Q,Y),J=$.mul($.mul(z,Aq),Y),q=$.mul(z,$.sub(J,$.ONE));if(!$.eql($.sqr(q),Q))throw Error("Cannot find square root");return q}function DR0($){if($<BigInt(3))throw Error("sqrt is not defined for small field");let Q=$-Z2,Z=0;while(Q%Aq===q4)Q/=Aq,Z++;let X=Aq,Y=i4($);while(RD(Y,X)===1)if(X++>1000)throw Error("Cannot find square root: probably non-prime P");if(Z===1)return b10;let z=Y.pow(X,Q),J=(Q+Z2)/Aq;return function(W,G){if(W.is0(G))return G;if(RD(W,G)!==1)throw Error("Cannot find square root");let U=Z,D=W.mul(W.ONE,z),P=W.pow(G,Q),H=W.pow(G,J);while(!W.eql(P,W.ONE)){if(W.is0(P))return W.ZERO;let N=1,C=W.sqr(P);while(!W.eql(C,W.ONE))if(N++,C=W.sqr(C),N===U)throw Error("Cannot find square root");let L=Z2<<BigInt(U-N-1),B=W.pow(D,L);U=N,D=W.sqr(B),P=W.mul(P,D),H=W.mul(H,B)}return H}}function MR0($){if($%f10===VR0)return b10;if($%x10===k10)return OR0;return DR0($)}function PC($){let Q={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},Z=PR0.reduce((X,Y)=>{return X[Y]="function",X},Q);return xZ($,Z)}function ND($,Q,Z){if(Z<q4)throw Error("invalid exponent, negatives unsupported");if(Z===q4)return $.ONE;if(Z===Z2)return Q;let X=$.ONE,Y=Q;while(Z>q4){if(Z&Z2)X=$.mul(X,Y);Y=$.sqr(Y),Z>>=Z2}return X}function o$($,Q,Z=!1){let X=Array(Q.length).fill(Z?$.ZERO:void 0),Y=Q.reduce((J,q,W)=>{if($.is0(q))return J;return X[W]=J,$.mul(J,q)},$.ONE),z=$.inv(Y);return Q.reduceRight((J,q,W)=>{if($.is0(q))return J;return X[W]=$.mul(J,X[W]),$.mul(J,q)},z),X}function RD($,Q){let Z=($.ORDER-Z2)/Aq,X=$.pow(Q,Z),Y=$.eql(X,$.ONE),z=$.eql(X,$.ZERO),J=$.eql(X,$.neg($.ONE));if(!Y&&!z&&!J)throw Error("invalid Legendre symbol result");return Y?1:z?0:-1}function BS($,Q){if(Q!==void 0)JC(Q);let Z=Q!==void 0?Q:$.toString(2).length,X=Math.ceil(Z/8);return{nBitLength:Z,nByteLength:X}}function i4($,Q,Z=!1,X={}){if($<=q4)throw Error("invalid field: expected ORDER > 0, got "+$);let{nBitLength:Y,nByteLength:z}=BS($,Q);if(z>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let J,q=Object.freeze({ORDER:$,isLE:Z,BITS:Y,BYTES:z,MASK:k3(Y),ZERO:q4,ONE:Z2,create:(W)=>k2(W,$),isValid:(W)=>{if(typeof W!=="bigint")throw Error("invalid field element: expected bigint, got "+typeof W);return q4<=W&&W<$},is0:(W)=>W===q4,isOdd:(W)=>(W&Z2)===Z2,neg:(W)=>k2(-W,$),eql:(W,G)=>W===G,sqr:(W)=>k2(W*W,$),add:(W,G)=>k2(W+G,$),sub:(W,G)=>k2(W-G,$),mul:(W,G)=>k2(W*G,$),pow:(W,G)=>ND(q,W,G),div:(W,G)=>k2(W*MC(G,$),$),sqrN:(W)=>W*W,addN:(W,G)=>W+G,subN:(W,G)=>W-G,mulN:(W,G)=>W*G,inv:(W)=>MC(W,$),sqrt:X.sqrt||((W)=>{if(!J)J=MR0($);return J(q,W)}),toBytes:(W)=>Z?wS(W,z):N8(W,z),fromBytes:(W)=>{if(W.length!==z)throw Error("Field.fromBytes: expected "+z+" bytes, got "+W.length);return Z?AS(W):Z9(W)},invertBatch:(W)=>o$(q,W),cmov:(W,G,U)=>U?G:W});return Object.freeze(q)}function v10($){if(typeof $!=="bigint")throw Error("field order must be bigint");let Q=$.toString(2).length;return Math.ceil(Q/8)}function CD($){let Q=v10($);return Q+Math.ceil(Q/2)}function HC($,Q,Z=!1){let X=$.length,Y=v10(Q),z=CD(Q);if(X<16||X<z||X>1024)throw Error("expected "+z+"-1024 bytes of input, got "+X);let J=Z?AS($):Z9($),q=k2(J,Q-Z2)+Z2;return Z?wS(q,Y):N8(q,Y)}var q4,Z2,Aq,VR0,f10,k10,x10,PR0;var vZ=p(()=>{vY();bZ();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */q4=BigInt(0),Z2=BigInt(1),Aq=BigInt(2),VR0=BigInt(3),f10=BigInt(4),k10=BigInt(5),x10=BigInt(8);PR0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function mY($,Q){if(LD($),LD(Q),$<0||$>=1<<8*Q)throw Error("invalid I2OSP input: "+$);let Z=Array.from({length:Q}).fill(0);for(let X=Q-1;X>=0;X--)Z[X]=$&255,$>>>=8;return new Uint8Array(Z)}function RR0($,Q){let Z=new Uint8Array($.length);for(let X=0;X<$.length;X++)Z[X]=$[X]^Q[X];return Z}function LD($){if(!Number.isSafeInteger($))throw Error("number expected")}function NR0($,Q,Z,X){if(fZ($),fZ(Q),LD(Z),Q.length>255)Q=X(d6(VC("H2C-OVERSIZE-DST-"),Q));let{outputLen:Y,blockLen:z}=X,J=Math.ceil(Z/Y);if(Z>65535||J>255)throw Error("expand_message_xmd: invalid lenInBytes");let q=d6(Q,mY(Q.length,1)),W=mY(0,z),G=mY(Z,2),U=Array(J),D=X(d6(W,$,G,mY(0,1),q));U[0]=X(d6(D,mY(1,1),q));for(let H=1;H<=J;H++){let N=[RR0(D,U[H-1]),mY(H+1,1),q];U[H]=X(d6(...N))}return d6(...U).slice(0,Z)}function CR0($,Q,Z,X,Y){if(fZ($),fZ(Q),LD(Z),Q.length>255){let z=Math.ceil(2*X/8);Q=Y.create({dkLen:z}).update(VC("H2C-OVERSIZE-DST-")).update(Q).digest()}if(Z>65535||Q.length>255)throw Error("expand_message_xof: invalid lenInBytes");return Y.create({dkLen:Z}).update($).update(mY(Z,2)).update(Q).update(mY(Q.length,1)).digest()}function y10($,Q,Z){xZ(Z,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:X,k:Y,m:z,hash:J,expand:q,DST:W}=Z;fZ($),LD(Q);let G=typeof W==="string"?VC(W):W,U=X.toString(2).length,D=Math.ceil((U+Y)/8),P=Q*z*D,H;if(q==="xmd")H=NR0($,G,P,J);else if(q==="xof")H=CR0($,G,P,Y,J);else if(q==="_internal_pass")H=$;else throw Error('expand must be "xmd" or "xof"');let N=Array(Q);for(let C=0;C<Q;C++){let L=Array(z);for(let B=0;B<z;B++){let E=D*(B+C*z),I=H.subarray(E,E+D);L[B]=k2(jR0(I),X)}N[C]=L}return N}function ES($,Q){let Z=Q.map((X)=>Array.from(X).reverse());return(X,Y)=>{let[z,J,q,W]=Z.map((D)=>D.reduce((P,H)=>$.add($.mul(P,X),H))),[G,U]=o$($,[J,W],!0);return X=$.mul(z,G),Y=$.mul(Y,$.mul(q,U)),{x:X,y:Y}}}function IS($,Q,Z){if(typeof Q!=="function")throw Error("mapToCurve() must be defined");function X(z){return $.fromAffine(Q(z))}function Y(z){let J=z.clearCofactor();if(J.equals($.ZERO))return $.ZERO;return J.assertValidity(),J}return{defaults:Z,hashToCurve(z,J){let q=y10(z,2,{...Z,DST:Z.DST,...J}),W=X(q[0]),G=X(q[1]);return Y(W.add(G))},encodeToCurve(z,J){let q=y10(z,1,{...Z,DST:Z.encodeDST,...J});return Y(X(q[0]))},mapToCurve(z){if(!Array.isArray(z))throw Error("expected array of bigints");for(let J of z)if(typeof J!=="bigint")throw Error("expected array of bigints");return Y(X(z))}}}var jR0;var _S=p(()=>{vZ();bZ();jR0=Z9});function SS($,Q){let Z=Q.negate();return $?Z:Q}function m10($,Q){if(!Number.isSafeInteger($)||$<=0||$>Q)throw Error("invalid window size, expected [1.."+Q+"], got W="+$)}function fS($,Q){m10($,Q);let Z=Math.ceil(Q/$)+1,X=2**($-1),Y=2**$,z=k3($),J=BigInt($);return{windows:Z,windowSize:X,mask:z,maxNumber:Y,shiftBy:J}}function h10($,Q,Z){let{windowSize:X,mask:Y,maxNumber:z,shiftBy:J}=Z,q=Number($&Y),W=$>>J;if(q>X)q-=z,W+=bS;let G=Q*X,U=G+Math.abs(q)-1,D=q===0,P=q<0,H=Q%2!==0;return{nextN:W,offset:U,isZero:D,isNeg:P,isNegF:H,offsetF:G}}function LR0($,Q){if(!Array.isArray($))throw Error("array expected");$.forEach((Z,X)=>{if(!(Z instanceof Q))throw Error("invalid point at index "+X)})}function TR0($,Q){if(!Array.isArray($))throw Error("array of scalars expected");$.forEach((Z,X)=>{if(!Q.isValid(Z))throw Error("invalid scalar at index "+X)})}function xS($){return p10.get($)||1}function u10($,Q){return{constTimeNegate:SS,hasPrecomputes(Z){return xS(Z)!==1},unsafeLadder(Z,X,Y=$.ZERO){let z=Z;while(X>g10){if(X&bS)Y=Y.add(z);z=z.double(),X>>=bS}return Y},precomputeWindow(Z,X){let{windows:Y,windowSize:z}=fS(X,Q),J=[],q=Z,W=q;for(let G=0;G<Y;G++){W=q,J.push(W);for(let U=1;U<z;U++)W=W.add(q),J.push(W);q=W.double()}return J},wNAF(Z,X,Y){let{ZERO:z,BASE:J}=$,q=fS(Z,Q);for(let W=0;W<q.windows;W++){let{nextN:G,offset:U,isZero:D,isNeg:P,isNegF:H,offsetF:N}=h10(Y,W,q);if(Y=G,D)J=J.add(SS(H,X[N]));else z=z.add(SS(P,X[U]))}return{p:z,f:J}},wNAFUnsafe(Z,X,Y,z=$.ZERO){let J=fS(Z,Q);for(let q=0;q<J.windows;q++){if(Y===g10)break;let{nextN:W,offset:G,isZero:U,isNeg:D}=h10(Y,q,J);if(Y=W,U)continue;else{let P=X[G];z=z.add(D?P.negate():P)}}return z},getPrecomputes(Z,X,Y){let z=kS.get(X);if(!z){if(z=this.precomputeWindow(X,Z),Z!==1)kS.set(X,Y(z))}return z},wNAFCached(Z,X,Y){let z=xS(Z);return this.wNAF(z,this.getPrecomputes(z,Z,Y),X)},wNAFCachedUnsafe(Z,X,Y,z){let J=xS(Z);if(J===1)return this.unsafeLadder(Z,X,z);return this.wNAFUnsafe(J,this.getPrecomputes(J,Z,Y),X,z)},setWindowSize(Z,X){m10(X,Q),p10.set(Z,X),kS.delete(Z)}}}function c10($,Q,Z,X){LR0(Z,$),TR0(X,Q);let Y=Z.length,z=X.length;if(Y!==z)throw Error("arrays of points and scalars must have equal length");let J=$.ZERO,q=i$(BigInt(Y)),W=1;if(q>12)W=q-3;else if(q>4)W=q-2;else if(q>0)W=2;let G=k3(W),U=Array(Number(G)+1).fill(J),D=Math.floor((Q.BITS-1)/W)*W,P=J;for(let H=D;H>=0;H-=W){U.fill(J);for(let C=0;C<z;C++){let L=X[C],B=Number(L>>BigInt(H)&G);U[B]=U[B].add(Z[C])}let N=J;for(let C=U.length-1,L=J;C>0;C--)L=L.add(U[C]),N=N.add(L);if(P=P.add(N),H!==0)for(let C=0;C<W;C++)P=P.double()}return P}function vS($){return PC($.Fp),xZ($,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...BS($.n,$.nBitLength),...$,...{p:$.Fp.ORDER}})}var g10,bS,kS,p10;var d10=p(()=>{vZ();bZ();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */g10=BigInt(0),bS=BigInt(1);kS=new WeakMap,p10=new WeakMap});function l10($){if($.lowS!==void 0)hG("lowS",$.lowS);if($.prehash!==void 0)hG("prehash",$.prehash)}function FR0($){let Q=vS($);xZ(Q,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});let{endo:Z,Fp:X,a:Y}=Q;if(Z){if(!X.eql(Y,X.ZERO))throw Error("invalid endo: CURVE.a must be 0");if(typeof Z!=="object"||typeof Z.beta!=="bigint"||typeof Z.splitScalar!=="function")throw Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...Q})}function yS($,Q){return kZ(N8($,Q))}function jC($){let Q=FR0($),{Fp:Z}=Q,X=i4(Q.n,Q.nBitLength),Y=Q.toBytes||((I,_,f)=>{let x=_.toAffine();return d6(Uint8Array.from([4]),Z.toBytes(x.x),Z.toBytes(x.y))}),z=Q.fromBytes||((I)=>{let _=I.subarray(1),f=Z.fromBytes(_.subarray(0,Z.BYTES)),x=Z.fromBytes(_.subarray(Z.BYTES,2*Z.BYTES));return{x:f,y:x}});function J(I){let{a:_,b:f}=Q,x=Z.sqr(I),g=Z.mul(x,I);return Z.add(Z.add(g,Z.mul(I,_)),f)}function q(I,_){let f=Z.sqr(_),x=J(I);return Z.eql(f,x)}if(!q(Q.Gx,Q.Gy))throw Error("bad curve params: generator point");let W=Z.mul(Z.pow(Q.a,TD),gS),G=Z.mul(Z.sqr(Q.b),BigInt(27));if(Z.is0(Z.add(W,G)))throw Error("bad curve params: a or b");function U(I){return OC(I,B6,Q.n)}function D(I){let{allowedPrivateKeyLengths:_,nByteLength:f,wrapPrivateKey:x,n:g}=Q;if(_&&typeof I!=="bigint"){if(gG(I))I=kZ(I);if(typeof I!=="string"||!_.includes(I.length))throw Error("invalid private key");I=I.padStart(f*2,"0")}let h;try{h=typeof I==="bigint"?I:Z9(u8("private key",I,f))}catch(v){throw Error("invalid private key, expected hex or "+f+" bytes, got "+typeof I)}if(x)h=k2(h,g);return Fq("private key",h,B6,g),h}function P(I){if(!(I instanceof C))throw Error("ProjectivePoint expected")}let H=jD((I,_)=>{let{px:f,py:x,pz:g}=I;if(Z.eql(g,Z.ONE))return{x:f,y:x};let h=I.is0();if(_==null)_=h?Z.ONE:Z.inv(g);let v=Z.mul(f,_),b=Z.mul(x,_),m=Z.mul(g,_);if(h)return{x:Z.ZERO,y:Z.ZERO};if(!Z.eql(m,Z.ONE))throw Error("invZ was invalid");return{x:v,y:b}}),N=jD((I)=>{if(I.is0()){if(Q.allowInfinityPoint&&!Z.is0(I.py))return;throw Error("bad point: ZERO")}let{x:_,y:f}=I.toAffine();if(!Z.isValid(_)||!Z.isValid(f))throw Error("bad point: x or y not FE");if(!q(_,f))throw Error("bad point: equation left != right");if(!I.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class C{constructor(I,_,f){if(I==null||!Z.isValid(I))throw Error("x required");if(_==null||!Z.isValid(_)||Z.is0(_))throw Error("y required");if(f==null||!Z.isValid(f))throw Error("z required");this.px=I,this.py=_,this.pz=f,Object.freeze(this)}static fromAffine(I){let{x:_,y:f}=I||{};if(!I||!Z.isValid(_)||!Z.isValid(f))throw Error("invalid affine point");if(I instanceof C)throw Error("projective point not allowed");let x=(g)=>Z.eql(g,Z.ZERO);if(x(_)&&x(f))return C.ZERO;return new C(_,f,Z.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){let _=o$(Z,I.map((f)=>f.pz));return I.map((f,x)=>f.toAffine(_[x])).map(C.fromAffine)}static fromHex(I){let _=C.fromAffine(z(u8("pointHex",I)));return _.assertValidity(),_}static fromPrivateKey(I){return C.BASE.multiply(D(I))}static msm(I,_){return c10(C,X,I,_)}_setWindowSize(I){E.setWindowSize(this,I)}assertValidity(){N(this)}hasEvenY(){let{y:I}=this.toAffine();if(Z.isOdd)return!Z.isOdd(I);throw Error("Field doesn't support isOdd")}equals(I){P(I);let{px:_,py:f,pz:x}=this,{px:g,py:h,pz:v}=I,b=Z.eql(Z.mul(_,v),Z.mul(g,x)),m=Z.eql(Z.mul(f,v),Z.mul(h,x));return b&&m}negate(){return new C(this.px,Z.neg(this.py),this.pz)}double(){let{a:I,b:_}=Q,f=Z.mul(_,TD),{px:x,py:g,pz:h}=this,v=Z.ZERO,b=Z.ZERO,m=Z.ZERO,K=Z.mul(x,x),M=Z.mul(g,g),j=Z.mul(h,h),O=Z.mul(x,g);return O=Z.add(O,O),m=Z.mul(x,h),m=Z.add(m,m),v=Z.mul(I,m),b=Z.mul(f,j),b=Z.add(v,b),v=Z.sub(M,b),b=Z.add(M,b),b=Z.mul(v,b),v=Z.mul(O,v),m=Z.mul(f,m),j=Z.mul(I,j),O=Z.sub(K,j),O=Z.mul(I,O),O=Z.add(O,m),m=Z.add(K,K),K=Z.add(m,K),K=Z.add(K,j),K=Z.mul(K,O),b=Z.add(b,K),j=Z.mul(g,h),j=Z.add(j,j),K=Z.mul(j,O),v=Z.sub(v,K),m=Z.mul(j,M),m=Z.add(m,m),m=Z.add(m,m),new C(v,b,m)}add(I){P(I);let{px:_,py:f,pz:x}=this,{px:g,py:h,pz:v}=I,b=Z.ZERO,m=Z.ZERO,K=Z.ZERO,M=Q.a,j=Z.mul(Q.b,TD),O=Z.mul(_,g),R=Z.mul(f,h),F=Z.mul(x,v),A=Z.add(_,f),T=Z.add(g,h);A=Z.mul(A,T),T=Z.add(O,R),A=Z.sub(A,T),T=Z.add(_,x);let V=Z.add(g,v);return T=Z.mul(T,V),V=Z.add(O,F),T=Z.sub(T,V),V=Z.add(f,x),b=Z.add(h,v),V=Z.mul(V,b),b=Z.add(R,F),V=Z.sub(V,b),K=Z.mul(M,T),b=Z.mul(j,F),K=Z.add(b,K),b=Z.sub(R,K),K=Z.add(R,K),m=Z.mul(b,K),R=Z.add(O,O),R=Z.add(R,O),F=Z.mul(M,F),T=Z.mul(j,T),R=Z.add(R,F),F=Z.sub(O,F),F=Z.mul(M,F),T=Z.add(T,F),O=Z.mul(R,T),m=Z.add(m,O),O=Z.mul(V,T),b=Z.mul(A,b),b=Z.sub(b,O),O=Z.mul(A,R),K=Z.mul(V,K),K=Z.add(K,O),new C(b,m,K)}subtract(I){return this.add(I.negate())}is0(){return this.equals(C.ZERO)}wNAF(I){return E.wNAFCached(this,I,C.normalizeZ)}multiplyUnsafe(I){let{endo:_,n:f}=Q;Fq("scalar",I,x3,f);let x=C.ZERO;if(I===x3)return x;if(this.is0()||I===B6)return this;if(!_||E.hasPrecomputes(this))return E.wNAFCachedUnsafe(this,I,C.normalizeZ);let{k1neg:g,k1:h,k2neg:v,k2:b}=_.splitScalar(I),m=x,K=x,M=this;while(h>x3||b>x3){if(h&B6)m=m.add(M);if(b&B6)K=K.add(M);M=M.double(),h>>=B6,b>>=B6}if(g)m=m.negate();if(v)K=K.negate();return K=new C(Z.mul(K.px,_.beta),K.py,K.pz),m.add(K)}multiply(I){let{endo:_,n:f}=Q;Fq("scalar",I,B6,f);let x,g;if(_){let{k1neg:h,k1:v,k2neg:b,k2:m}=_.splitScalar(I),{p:K,f:M}=this.wNAF(v),{p:j,f:O}=this.wNAF(m);K=E.constTimeNegate(h,K),j=E.constTimeNegate(b,j),j=new C(Z.mul(j.px,_.beta),j.py,j.pz),x=K.add(j),g=M.add(O)}else{let{p:h,f:v}=this.wNAF(I);x=h,g=v}return C.normalizeZ([x,g])[0]}multiplyAndAddUnsafe(I,_,f){let x=C.BASE,g=(v,b)=>b===x3||b===B6||!v.equals(x)?v.multiplyUnsafe(b):v.multiply(b),h=g(this,_).add(g(I,f));return h.is0()?void 0:h}toAffine(I){return H(this,I)}isTorsionFree(){let{h:I,isTorsionFree:_}=Q;if(I===B6)return!0;if(_)return _(C,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:I,clearCofactor:_}=Q;if(I===B6)return this;if(_)return _(C,this);return this.multiplyUnsafe(Q.h)}toRawBytes(I=!0){return hG("isCompressed",I),this.assertValidity(),Y(C,this,I)}toHex(I=!0){return hG("isCompressed",I),kZ(this.toRawBytes(I))}}C.BASE=new C(Q.Gx,Q.Gy,Z.ONE),C.ZERO=new C(Z.ZERO,Z.ONE,Z.ZERO);let{endo:L,nBitLength:B}=Q,E=u10(C,L?Math.ceil(B/2):B);return{CURVE:Q,ProjectivePoint:C,normPrivateKeyToScalar:D,weierstrassEquation:J,isWithinCurveOrder:U}}function AR0($){let Q=vS($);return xZ(Q,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...Q})}function RC($){let Q=AR0($),{Fp:Z,n:X,nByteLength:Y,nBitLength:z}=Q,J=Z.BYTES+1,q=2*Z.BYTES+1;function W(O){return k2(O,X)}function G(O){return MC(O,X)}let{ProjectivePoint:U,normPrivateKeyToScalar:D,weierstrassEquation:P,isWithinCurveOrder:H}=jC({...Q,toBytes(O,R,F){let A=R.toAffine(),T=Z.toBytes(A.x),V=d6;if(hG("isCompressed",F),F)return V(Uint8Array.from([R.hasEvenY()?2:3]),T);else return V(Uint8Array.from([4]),T,Z.toBytes(A.y))},fromBytes(O){let R=O.length,F=O[0],A=O.subarray(1);if(R===J&&(F===2||F===3)){let T=Z9(A);if(!OC(T,B6,Z.ORDER))throw Error("Point is not on curve");let V=P(T),w;try{w=Z.sqrt(V)}catch(y){let u=y instanceof Error?": "+y.message:"";throw Error("Point is not on curve"+u)}let k=(w&B6)===B6;if((F&1)===1!==k)w=Z.neg(w);return{x:T,y:w}}else if(R===q&&F===4){let T=Z.fromBytes(A.subarray(0,Z.BYTES)),V=Z.fromBytes(A.subarray(Z.BYTES,2*Z.BYTES));return{x:T,y:V}}else{let T=J,V=q;throw Error("invalid Point, expected length of "+T+", or uncompressed "+V+", got "+R)}}});function N(O){let R=X>>B6;return O>R}function C(O){return N(O)?W(-O):O}let L=(O,R,F)=>Z9(O.slice(R,F));class B{constructor(O,R,F){if(Fq("r",O,B6,X),Fq("s",R,B6,X),this.r=O,this.s=R,F!=null)this.recovery=F;Object.freeze(this)}static fromCompact(O){let R=Y;return O=u8("compactSignature",O,R*2),new B(L(O,0,R),L(O,R,2*R))}static fromDER(O){let{r:R,s:F}=yZ.toSig(u8("DER",O));return new B(R,F)}assertValidity(){}addRecoveryBit(O){return new B(this.r,this.s,O)}recoverPublicKey(O){let{r:R,s:F,recovery:A}=this,T=g(u8("msgHash",O));if(A==null||![0,1,2,3].includes(A))throw Error("recovery id invalid");let V=A===2||A===3?R+Q.n:R;if(V>=Z.ORDER)throw Error("recovery id 2 or 3 invalid");let w=(A&1)===0?"02":"03",k=U.fromHex(w+yS(V,Z.BYTES)),S=G(V),y=W(-T*S),u=W(F*S),c=U.BASE.multiplyAndAddUnsafe(k,y,u);if(!c)throw Error("point at infinify");return c.assertValidity(),c}hasHighS(){return N(this.s)}normalizeS(){return this.hasHighS()?new B(this.r,W(-this.s),this.recovery):this}toDERRawBytes(){return HD(this.toDERHex())}toDERHex(){return yZ.hexFromSig(this)}toCompactRawBytes(){return HD(this.toCompactHex())}toCompactHex(){let O=Y;return yS(this.r,O)+yS(this.s,O)}}let E={isValidPrivateKey(O){try{return D(O),!0}catch(R){return!1}},normPrivateKeyToScalar:D,randomPrivateKey:()=>{let O=CD(Q.n);return HC(Q.randomBytes(O),Q.n)},precompute(O=8,R=U.BASE){return R._setWindowSize(O),R.multiply(BigInt(3)),R}};function I(O,R=!0){return U.fromPrivateKey(O).toRawBytes(R)}function _(O){if(typeof O==="bigint")return!1;if(O instanceof U)return!0;let F=u8("key",O).length,A=Z.BYTES,T=A+1,V=2*A+1;if(Q.allowedPrivateKeyLengths||Y===T)return;else return F===T||F===V}function f(O,R,F=!0){if(_(O)===!0)throw Error("first arg must be private key");if(_(R)===!1)throw Error("second arg must be public key");return U.fromHex(R).multiply(D(O)).toRawBytes(F)}let x=Q.bits2int||function(O){if(O.length>8192)throw Error("input is too large");let R=Z9(O),F=O.length*8-z;return F>0?R>>BigInt(F):R},g=Q.bits2int_modN||function(O){return W(x(O))},h=k3(z);function v(O){return Fq("num < 2^"+z,O,x3,h),N8(O,Y)}function b(O,R,F=m){if(["recovered","canonical"].some((e)=>(e in F)))throw Error("sign() legacy options not supported");let{hash:A,randomBytes:T}=Q,{lowS:V,prehash:w,extraEntropy:k}=F;if(V==null)V=!0;if(O=u8("msgHash",O),l10(F),w)O=u8("prehashed msgHash",A(O));let S=g(O),y=D(R),u=[v(y),v(S)];if(k!=null&&k!==!1){let e=k===!0?T(Z.BYTES):k;u.push(u8("extraEntropy",e))}let c=d6(...u),o=S;function z0(e){let s=x(e);if(!H(s))return;let J0=G(s),t=U.BASE.multiply(s).toAffine(),Z0=W(t.x);if(Z0===x3)return;let N0=W(J0*W(o+Z0*y));if(N0===x3)return;let i=(t.x===Z0?0:2)|Number(t.y&B6),l=N0;if(V&&N(N0))l=C(N0),i^=1;return new B(Z0,l,i)}return{seed:c,k2sig:z0}}let m={lowS:Q.lowS,prehash:!1},K={lowS:Q.lowS,prehash:!1};function M(O,R,F=m){let{seed:A,k2sig:T}=b(O,R,F),V=Q;return S10(V.hash.outputLen,V.nByteLength,V.hmac)(A,T)}U.BASE._setWindowSize(8);function j(O,R,F,A=K){let T=O;R=u8("msgHash",R),F=u8("publicKey",F);let{lowS:V,prehash:w,format:k}=A;if(l10(A),"strict"in A)throw Error("options.strict was renamed to lowS");if(k!==void 0&&k!=="compact"&&k!=="der")throw Error("format must be compact or der");let S=typeof T==="string"||gG(T),y=!S&&!k&&typeof T==="object"&&T!==null&&typeof T.r==="bigint"&&typeof T.s==="bigint";if(!S&&!y)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");let u=void 0,c;try{if(y)u=new B(T.r,T.s);if(S){try{if(k!=="compact")u=B.fromDER(T)}catch(i){if(!(i instanceof yZ.Err))throw i}if(!u&&k!=="der")u=B.fromCompact(T)}c=U.fromHex(F)}catch(i){return!1}if(!u)return!1;if(V&&u.hasHighS())return!1;if(w)R=Q.hash(R);let{r:o,s:z0}=u,e=g(R),s=G(z0),J0=W(e*s),t=W(o*s),Z0=U.BASE.multiplyAndAddUnsafe(c,J0,t)?.toAffine();if(!Z0)return!1;return W(Z0.x)===o}return{CURVE:Q,getPublicKey:I,getSharedSecret:f,sign:M,verify:j,ProjectivePoint:U,Signature:B,utils:E}}function wR0($,Q){let Z=$.ORDER,X=x3;for(let N=Z-B6;N%pY===x3;N/=pY)X+=B6;let Y=X,z=pY<<Y-B6-B6,J=z*pY,q=(Z-B6)/J,W=(q-B6)/pY,G=J-B6,U=z,D=$.pow(Q,q),P=$.pow(Q,(q+B6)/pY),H=(N,C)=>{let L=D,B=$.pow(C,G),E=$.sqr(B);E=$.mul(E,C);let I=$.mul(N,E);I=$.pow(I,W),I=$.mul(I,B),B=$.mul(I,C),E=$.mul(I,N);let _=$.mul(E,B);I=$.pow(_,U);let f=$.eql(I,$.ONE);B=$.mul(E,P),I=$.mul(_,L),E=$.cmov(B,E,f),_=$.cmov(I,_,f);for(let x=Y;x>B6;x--){let g=x-pY;g=pY<<g-B6;let h=$.pow(_,g),v=$.eql(h,$.ONE);B=$.mul(E,L),L=$.mul(L,L),h=$.mul(_,L),E=$.cmov(B,E,v),_=$.cmov(h,_,v)}return{isValid:f,value:E}};if($.ORDER%gS===TD){let N=($.ORDER-TD)/gS,C=$.sqrt($.neg(Q));H=(L,B)=>{let E=$.sqr(B),I=$.mul(L,B);E=$.mul(E,I);let _=$.pow(E,N);_=$.mul(_,I);let f=$.mul(_,C),x=$.mul($.sqr(_),B),g=$.eql(x,L),h=$.cmov(f,_,g);return{isValid:g,value:h}}}return H}function hS($,Q){if(PC($),!$.isValid(Q.A)||!$.isValid(Q.B)||!$.isValid(Q.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let Z=wR0($,Q.Z);if(!$.isOdd)throw Error("Fp.isOdd is not implemented!");return(X)=>{let Y,z,J,q,W,G,U,D;Y=$.sqr(X),Y=$.mul(Y,Q.Z),z=$.sqr(Y),z=$.add(z,Y),J=$.add(z,$.ONE),J=$.mul(J,Q.B),q=$.cmov(Q.Z,$.neg(z),!$.eql(z,$.ZERO)),q=$.mul(q,Q.A),z=$.sqr(J),G=$.sqr(q),W=$.mul(G,Q.A),z=$.add(z,W),z=$.mul(z,J),G=$.mul(G,q),W=$.mul(G,Q.B),z=$.add(z,W),U=$.mul(Y,J);let{isValid:P,value:H}=Z(z,G);D=$.mul(Y,X),D=$.mul(D,H),U=$.cmov(U,J,P),D=$.cmov(D,H,P);let N=$.isOdd(X)===$.isOdd(D);D=$.cmov($.neg(D),D,N);let C=o$($,[q],!0)[0];return U=$.mul(U,C),{x:U,y:D}}}var i10,yZ,x3,B6,pY,TD,gS;var FD=p(()=>{d10();vZ();bZ();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */i10=class i10 extends Error{constructor($=""){super($)}};yZ={Err:i10,_tlv:{encode:($,Q)=>{let{Err:Z}=yZ;if($<0||$>256)throw new Z("tlv.encode: wrong tag");if(Q.length&1)throw new Z("tlv.encode: unpadded data");let X=Q.length/2,Y=PD(X);if(Y.length/2&128)throw new Z("tlv.encode: long form length too big");let z=X>127?PD(Y.length/2|128):"";return PD($)+z+Y+Q},decode($,Q){let{Err:Z}=yZ,X=0;if($<0||$>256)throw new Z("tlv.encode: wrong tag");if(Q.length<2||Q[X++]!==$)throw new Z("tlv.decode: wrong tlv");let Y=Q[X++],z=!!(Y&128),J=0;if(!z)J=Y;else{let W=Y&127;if(!W)throw new Z("tlv.decode(long): indefinite length not supported");if(W>4)throw new Z("tlv.decode(long): byte length is too big");let G=Q.subarray(X,X+W);if(G.length!==W)throw new Z("tlv.decode: length bytes not complete");if(G[0]===0)throw new Z("tlv.decode(long): zero leftmost byte");for(let U of G)J=J<<8|U;if(X+=W,J<128)throw new Z("tlv.decode(long): not minimal encoding")}let q=Q.subarray(X,X+J);if(q.length!==J)throw new Z("tlv.decode: wrong value length");return{v:q,l:Q.subarray(X+J)}}},_int:{encode($){let{Err:Q}=yZ;if($<x3)throw new Q("integer: negative integers are not allowed");let Z=PD($);if(Number.parseInt(Z[0],16)&8)Z="00"+Z;if(Z.length&1)throw new Q("unexpected DER parsing assertion: unpadded hex");return Z},decode($){let{Err:Q}=yZ;if($[0]&128)throw new Q("invalid signature integer: negative");if($[0]===0&&!($[1]&128))throw new Q("invalid signature integer: unnecessary leading zero");return Z9($)}},toSig($){let{Err:Q,_int:Z,_tlv:X}=yZ,Y=u8("signature",$),{v:z,l:J}=X.decode(48,Y);if(J.length)throw new Q("invalid signature: left bytes after parsing");let{v:q,l:W}=X.decode(2,z),{v:G,l:U}=X.decode(2,W);if(U.length)throw new Q("invalid signature: left bytes after parsing");return{r:Z.decode(q),s:Z.decode(G)}},hexFromSig($){let{_tlv:Q,_int:Z}=yZ,X=Q.encode(2,Z.encode($.r)),Y=Q.encode(2,Z.encode($.s)),z=X+Y;return Q.encode(48,z)}};x3=BigInt(0),B6=BigInt(1),pY=BigInt(2),TD=BigInt(3),gS=BigInt(4)});function ER0($){let Q=[];for(;$>NC;$>>=NC)if(($&NC)===BR0)Q.unshift(0);else if(($&mG)===mG)Q.unshift(-1),$+=NC;else Q.unshift(1);return Q}function CC($){let{Fp:Q,Fr:Z,Fp2:X,Fp6:Y,Fp12:z}=$.fields,J=$.params.xNegative,q=$.params.twistType,W=jC({n:Z.ORDER,...$.G1}),G=Object.assign(W,IS(W.ProjectivePoint,$.G1.mapToCurve,{...$.htfDefaults,...$.G1.htfDefaults})),U=jC({n:Z.ORDER,...$.G2}),D=Object.assign(U,IS(U.ProjectivePoint,$.G2.mapToCurve,{...$.htfDefaults,...$.G2.htfDefaults})),P;if(q==="multiplicative")P=(S,y,u,c,o,z0)=>z.mul014(c,S,X.mul(y,o),X.mul(u,z0));else if(q==="divisive")P=(S,y,u,c,o,z0)=>z.mul034(c,X.mul(u,z0),X.mul(y,o),S);else throw Error("bls: unknown twist type");let H=X.div(X.ONE,X.mul(X.ONE,o10));function N(S,y,u,c){let o=X.sqr(u),z0=X.sqr(c),e=X.mulByB(X.mul(z0,mG)),s=X.mul(e,mG),J0=X.sub(X.sub(X.sqr(X.add(u,c)),z0),o),t=X.sub(e,o),Z0=X.mul(X.sqr(y),mG),N0=X.neg(J0);return S.push([t,Z0,N0]),y=X.mul(X.mul(X.mul(X.sub(o,s),y),u),H),u=X.sub(X.sqr(X.mul(X.add(o,s),H)),X.mul(X.sqr(e),mG)),c=X.mul(o,J0),{Rx:y,Ry:u,Rz:c}}function C(S,y,u,c,o,z0){let e=X.sub(u,X.mul(z0,c)),s=X.sub(y,X.mul(o,c)),J0=X.sub(X.mul(e,o),X.mul(s,z0)),t=X.neg(e),Z0=s;S.push([J0,t,Z0]);let N0=X.sqr(s),i=X.mul(N0,s),l=X.mul(N0,y),q0=X.add(X.sub(i,X.mul(l,o10)),X.mul(X.sqr(e),c));return y=X.mul(s,q0),u=X.sub(X.mul(X.sub(l,q0),e),X.mul(i,u)),c=X.mul(c,i),{Rx:y,Ry:u,Rz:c}}let L=ER0($.params.ateLoopSize),B=jD((S)=>{let y=S,{x:u,y:c}=y.toAffine(),o=u,z0=c,e=X.neg(c),s=o,J0=z0,t=X.ONE,Z0=[];for(let N0 of L){let i=[];if({Rx:s,Ry:J0,Rz:t}=N(i,s,J0,t),N0)({Rx:s,Ry:J0,Rz:t}=C(i,s,J0,t,o,N0===-1?e:z0));Z0.push(i)}if($.postPrecompute){let N0=Z0[Z0.length-1];$.postPrecompute(s,J0,t,o,z0,C.bind(null,N0))}return Z0});function E(S,y=!1){let u=z.ONE;if(S.length){let c=S[0][0].length;for(let o=0;o<c;o++){u=z.sqr(u);for(let[z0,e,s]of S)for(let[J0,t,Z0]of z0[o])u=P(J0,t,Z0,u,e,s)}}if(J)u=z.conjugate(u);return y?z.finalExponentiate(u):u}function I(S,y=!0){let u=[];G.ProjectivePoint.normalizeZ(S.map(({g1:c})=>c)),D.ProjectivePoint.normalizeZ(S.map(({g2:c})=>c));for(let{g1:c,g2:o}of S){if(c.equals(G.ProjectivePoint.ZERO)||o.equals(D.ProjectivePoint.ZERO))throw Error("pairing is not available for ZERO point");c.assertValidity(),o.assertValidity();let z0=c.toAffine();u.push([B(o),z0.x,z0.y])}return E(u,y)}function _(S,y,u=!0){return I([{g1:S,g2:y}],u)}let f={randomPrivateKey:()=>{let S=CD(Z.ORDER);return HC($.randomBytes(S),Z.ORDER)},calcPairingPrecomputes:B},{ShortSignature:x}=$.G1,{Signature:g}=$.G2;function h(S){return S instanceof G.ProjectivePoint?S:G.ProjectivePoint.fromHex(S)}function v(S,y){return S instanceof G.ProjectivePoint?S:G.hashToCurve(u8("point",S),y)}function b(S){return S instanceof D.ProjectivePoint?S:g.fromHex(S)}function m(S,y){return S instanceof D.ProjectivePoint?S:D.hashToCurve(u8("point",S),y)}function K(S){return G.ProjectivePoint.fromPrivateKey(S).toRawBytes(!0)}function M(S){return D.ProjectivePoint.fromPrivateKey(S).toRawBytes(!0)}function j(S,y,u){let c=m(S,u);c.assertValidity();let o=c.multiply(G.normPrivateKeyToScalar(y));if(S instanceof D.ProjectivePoint)return o;return g.toRawBytes(o)}function O(S,y,u){let c=v(S,u);c.assertValidity();let o=c.multiply(G.normPrivateKeyToScalar(y));if(S instanceof G.ProjectivePoint)return o;return x.toRawBytes(o)}function R(S,y,u,c){let o=h(u),z0=m(y,c),e=G.ProjectivePoint.BASE,s=b(S),J0=I([{g1:o.negate(),g2:z0},{g1:e,g2:s}]);return z.eql(J0,z.ONE)}function F(S,y,u,c){let o=b(u),z0=v(y,c),e=D.ProjectivePoint.BASE,s=h(S),J0=I([{g1:z0,g2:o},{g1:s,g2:e.negate()}]);return z.eql(J0,z.ONE)}function A(S){if(!Array.isArray(S)||S.length===0)throw Error("expected non-empty array")}function T(S){A(S);let u=S.map(h).reduce((c,o)=>c.add(o),G.ProjectivePoint.ZERO);if(S[0]instanceof G.ProjectivePoint)return u.assertValidity(),u;return u.toRawBytes(!0)}function V(S){A(S);let u=S.map(b).reduce((c,o)=>c.add(o),D.ProjectivePoint.ZERO);if(S[0]instanceof D.ProjectivePoint)return u.assertValidity(),u;return g.toRawBytes(u)}function w(S){A(S);let u=S.map(h).reduce((c,o)=>c.add(o),G.ProjectivePoint.ZERO);if(S[0]instanceof G.ProjectivePoint)return u.assertValidity(),u;return x.toRawBytes(u)}function k(S,y,u,c){if(A(y),u.length!==y.length)throw Error("amount of public keys and messages should be equal");let o=b(S),z0=y.map((t)=>m(t,c)),e=u.map(h),s=new Map;for(let t=0;t<e.length;t++){let Z0=e[t],N0=z0[t],i=s.get(N0);if(i===void 0)i=[],s.set(N0,i);i.push(Z0)}let J0=[];try{for(let[t,Z0]of s){let N0=Z0.reduce((i,l)=>i.add(l));J0.push({g1:N0,g2:t})}return J0.push({g1:G.ProjectivePoint.BASE.negate(),g2:o}),z.eql(I(J0),z.ONE)}catch{return!1}}return G.ProjectivePoint.BASE._setWindowSize(4),{getPublicKey:K,getPublicKeyForShortSignatures:M,sign:j,signShortSignature:O,verify:R,verifyBatch:k,verifyShortSignature:F,aggregatePublicKeys:T,aggregateSignatures:V,aggregateShortSignatures:w,millerLoopBatch:E,pairing:_,pairingBatch:I,G1:G,G2:D,Signature:g,ShortSignature:x,fields:{Fr:Z,Fp:Q,Fp2:X,Fp6:Y,Fp12:z},params:{ateLoopSize:$.params.ateLoopSize,r:$.params.r,G1b:$.G1.b,G2b:$.G2.b},utils:f}}var BR0,NC,o10,mG;var mS=p(()=>{_S();vZ();bZ();FD();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BR0=BigInt(0),NC=BigInt(1),o10=BigInt(2),mG=BigInt(3)});function pS($,Q,Z,X,Y=1,z){let J=BigInt(z===void 0?X:z),q=Z**BigInt(X),W=[];for(let G=0;G<Y;G++){let U=BigInt(G+1),D=[];for(let P=0,H=pG;P<X;P++){let N=(U*H-U)/J%q;D.push($.pow(Q,N)),H*=Z}W.push(D)}return W}function LC($,Q,Z){let X=Q.pow(Z,($.ORDER-pG)/n10),Y=Q.pow(Z,($.ORDER-pG)/gZ);function z(P,H){let N=Q.mul(Q.frobeniusMap(P,1),X),C=Q.mul(Q.frobeniusMap(H,1),Y);return[N,C]}let J=Q.pow(Z,($.ORDER**gZ-pG)/n10),q=Q.pow(Z,($.ORDER**gZ-pG)/gZ);if(!Q.eql(q,Q.neg(Q.ONE)))throw Error("psiFrobenius: PSI2_Y!==-1");function W(P,H){return[Q.mul(P,J),Q.neg(H)]}let G=(P)=>(H,N)=>{let C=N.toAffine(),L=P(C.x,C.y);return H.fromAffine({x:L[0],y:L[1]})},U=G(z),D=G(W);return{psi:z,psi2:W,G2psi:U,G2psi2:D,PSI_X:X,PSI_Y:Y,PSI2_X:J,PSI2_Y:q}}function TC($){let{ORDER:Q}=$,Z=i4(Q),X=Z.create($.NONRESIDUE||BigInt(-1)),Y=Z.div(Z.ONE,gZ),z=pS(Z,X,Z.ORDER,2)[0],J=({c0:K,c1:M},{c0:j,c1:O})=>({c0:Z.add(K,j),c1:Z.add(M,O)}),q=({c0:K,c1:M},{c0:j,c1:O})=>({c0:Z.sub(K,j),c1:Z.sub(M,O)}),W=({c0:K,c1:M},j)=>{if(typeof j==="bigint")return{c0:Z.mul(K,j),c1:Z.mul(M,j)};let{c0:O,c1:R}=j,F=Z.mul(K,O),A=Z.mul(M,R),T=Z.sub(F,A),V=Z.sub(Z.mul(Z.add(K,M),Z.add(O,R)),Z.add(F,A));return{c0:T,c1:V}},G=({c0:K,c1:M})=>{let j=Z.add(K,M),O=Z.sub(K,M),R=Z.add(K,K);return{c0:Z.mul(j,O),c1:Z.mul(R,M)}},U=(K)=>{if(K.length!==2)throw Error("invalid tuple");let M=K.map((j)=>Z.create(j));return{c0:M[0],c1:M[1]}},D=Q*Q,P=U($.FP2_NONRESIDUE),H={ORDER:D,isLE:Z.isLE,NONRESIDUE:P,BITS:i$(D),BYTES:Math.ceil(i$(D)/8),MASK:k3(i$(D)),ZERO:{c0:Z.ZERO,c1:Z.ZERO},ONE:{c0:Z.ONE,c1:Z.ZERO},create:(K)=>K,isValid:({c0:K,c1:M})=>typeof K==="bigint"&&typeof M==="bigint",is0:({c0:K,c1:M})=>Z.is0(K)&&Z.is0(M),eql:({c0:K,c1:M},{c0:j,c1:O})=>Z.eql(K,j)&&Z.eql(M,O),neg:({c0:K,c1:M})=>({c0:Z.neg(K),c1:Z.neg(M)}),pow:(K,M)=>ND(H,K,M),invertBatch:(K)=>o$(H,K),add:J,sub:q,mul:W,sqr:G,addN:J,subN:q,mulN:W,sqrN:G,div:(K,M)=>H.mul(K,typeof M==="bigint"?Z.inv(Z.create(M)):H.inv(M)),inv:({c0:K,c1:M})=>{let j=Z.inv(Z.create(K*K+M*M));return{c0:Z.mul(j,Z.create(K)),c1:Z.mul(j,Z.create(-M))}},sqrt:(K)=>{if($.Fp2sqrt)return $.Fp2sqrt(K);let{c0:M,c1:j}=K;if(Z.is0(j))if(RD(Z,M)===1)return H.create({c0:Z.sqrt(M),c1:Z.ZERO});else return H.create({c0:Z.ZERO,c1:Z.sqrt(Z.div(M,X))});let O=Z.sqrt(Z.sub(Z.sqr(M),Z.mul(Z.sqr(j),X))),R=Z.mul(Z.add(O,M),Y);if(RD(Z,R)===-1)R=Z.sub(R,O);let A=Z.sqrt(R),T=H.create({c0:A,c1:Z.div(Z.mul(j,Y),A)});if(!H.eql(H.sqr(T),K))throw Error("Cannot find square root");let V=T,w=H.neg(V),{re:k,im:S}=H.reim(V),{re:y,im:u}=H.reim(w);if(S>u||S===u&&k>y)return V;return w},isOdd:(K)=>{let{re:M,im:j}=H.reim(K),O=M%gZ,R=M===IR0,F=j%gZ;return BigInt(O||R&&F)==pG},fromBytes(K){if(K.length!==H.BYTES)throw Error("fromBytes invalid length="+K.length);return{c0:Z.fromBytes(K.subarray(0,Z.BYTES)),c1:Z.fromBytes(K.subarray(Z.BYTES))}},toBytes:({c0:K,c1:M})=>d6(Z.toBytes(K),Z.toBytes(M)),cmov:({c0:K,c1:M},{c0:j,c1:O},R)=>({c0:Z.cmov(K,j,R),c1:Z.cmov(M,O,R)}),reim:({c0:K,c1:M})=>({re:K,im:M}),mulByNonresidue:({c0:K,c1:M})=>H.mul({c0:K,c1:M},P),mulByB:$.Fp2mulByB,fromBigTuple:U,frobeniusMap:({c0:K,c1:M},j)=>({c0:K,c1:Z.mul(M,z[j%2])})},N=({c0:K,c1:M,c2:j},{c0:O,c1:R,c2:F})=>({c0:H.add(K,O),c1:H.add(M,R),c2:H.add(j,F)}),C=({c0:K,c1:M,c2:j},{c0:O,c1:R,c2:F})=>({c0:H.sub(K,O),c1:H.sub(M,R),c2:H.sub(j,F)}),L=({c0:K,c1:M,c2:j},O)=>{if(typeof O==="bigint")return{c0:H.mul(K,O),c1:H.mul(M,O),c2:H.mul(j,O)};let{c0:R,c1:F,c2:A}=O,T=H.mul(K,R),V=H.mul(M,F),w=H.mul(j,A);return{c0:H.add(T,H.mulByNonresidue(H.sub(H.mul(H.add(M,j),H.add(F,A)),H.add(V,w)))),c1:H.add(H.sub(H.mul(H.add(K,M),H.add(R,F)),H.add(T,V)),H.mulByNonresidue(w)),c2:H.sub(H.add(V,H.mul(H.add(K,j),H.add(R,A))),H.add(T,w))}},B=({c0:K,c1:M,c2:j})=>{let O=H.sqr(K),R=H.mul(H.mul(K,M),gZ),F=H.mul(H.mul(M,j),gZ),A=H.sqr(j);return{c0:H.add(H.mulByNonresidue(F),O),c1:H.add(H.mulByNonresidue(A),R),c2:H.sub(H.sub(H.add(H.add(R,H.sqr(H.add(H.sub(K,M),j))),F),O),A)}},[E,I]=pS(H,P,Z.ORDER,6,2,3),_={ORDER:H.ORDER,isLE:H.isLE,BITS:3*H.BITS,BYTES:3*H.BYTES,MASK:k3(3*H.BITS),ZERO:{c0:H.ZERO,c1:H.ZERO,c2:H.ZERO},ONE:{c0:H.ONE,c1:H.ZERO,c2:H.ZERO},create:(K)=>K,isValid:({c0:K,c1:M,c2:j})=>H.isValid(K)&&H.isValid(M)&&H.isValid(j),is0:({c0:K,c1:M,c2:j})=>H.is0(K)&&H.is0(M)&&H.is0(j),neg:({c0:K,c1:M,c2:j})=>({c0:H.neg(K),c1:H.neg(M),c2:H.neg(j)}),eql:({c0:K,c1:M,c2:j},{c0:O,c1:R,c2:F})=>H.eql(K,O)&&H.eql(M,R)&&H.eql(j,F),sqrt:Q2,div:(K,M)=>_.mul(K,typeof M==="bigint"?Z.inv(Z.create(M)):_.inv(M)),pow:(K,M)=>ND(_,K,M),invertBatch:(K)=>o$(_,K),add:N,sub:C,mul:L,sqr:B,addN:N,subN:C,mulN:L,sqrN:B,inv:({c0:K,c1:M,c2:j})=>{let O=H.sub(H.sqr(K),H.mulByNonresidue(H.mul(j,M))),R=H.sub(H.mulByNonresidue(H.sqr(j)),H.mul(K,M)),F=H.sub(H.sqr(M),H.mul(K,j)),A=H.inv(H.add(H.mulByNonresidue(H.add(H.mul(j,R),H.mul(M,F))),H.mul(K,O)));return{c0:H.mul(A,O),c1:H.mul(A,R),c2:H.mul(A,F)}},fromBytes:(K)=>{if(K.length!==_.BYTES)throw Error("fromBytes invalid length="+K.length);return{c0:H.fromBytes(K.subarray(0,H.BYTES)),c1:H.fromBytes(K.subarray(H.BYTES,2*H.BYTES)),c2:H.fromBytes(K.subarray(2*H.BYTES))}},toBytes:({c0:K,c1:M,c2:j})=>d6(H.toBytes(K),H.toBytes(M),H.toBytes(j)),cmov:({c0:K,c1:M,c2:j},{c0:O,c1:R,c2:F},A)=>({c0:H.cmov(K,O,A),c1:H.cmov(M,R,A),c2:H.cmov(j,F,A)}),fromBigSix:(K)=>{if(!Array.isArray(K)||K.length!==6)throw Error("invalid Fp6 usage");return{c0:H.fromBigTuple(K.slice(0,2)),c1:H.fromBigTuple(K.slice(2,4)),c2:H.fromBigTuple(K.slice(4,6))}},frobeniusMap:({c0:K,c1:M,c2:j},O)=>({c0:H.frobeniusMap(K,O),c1:H.mul(H.frobeniusMap(M,O),E[O%6]),c2:H.mul(H.frobeniusMap(j,O),I[O%6])}),mulByFp2:({c0:K,c1:M,c2:j},O)=>({c0:H.mul(K,O),c1:H.mul(M,O),c2:H.mul(j,O)}),mulByNonresidue:({c0:K,c1:M,c2:j})=>({c0:H.mulByNonresidue(j),c1:K,c2:M}),mul1:({c0:K,c1:M,c2:j},O)=>({c0:H.mulByNonresidue(H.mul(j,O)),c1:H.mul(K,O),c2:H.mul(M,O)}),mul01({c0:K,c1:M,c2:j},O,R){let F=H.mul(K,O),A=H.mul(M,R);return{c0:H.add(H.mulByNonresidue(H.sub(H.mul(H.add(M,j),R),A)),F),c1:H.sub(H.sub(H.mul(H.add(O,R),H.add(K,M)),F),A),c2:H.add(H.sub(H.mul(H.add(K,j),O),F),A)}}},f=pS(H,P,Z.ORDER,12,1,6)[0],x=({c0:K,c1:M},{c0:j,c1:O})=>({c0:_.add(K,j),c1:_.add(M,O)}),g=({c0:K,c1:M},{c0:j,c1:O})=>({c0:_.sub(K,j),c1:_.sub(M,O)}),h=({c0:K,c1:M},j)=>{if(typeof j==="bigint")return{c0:_.mul(K,j),c1:_.mul(M,j)};let{c0:O,c1:R}=j,F=_.mul(K,O),A=_.mul(M,R);return{c0:_.add(F,_.mulByNonresidue(A)),c1:_.sub(_.mul(_.add(K,M),_.add(O,R)),_.add(F,A))}},v=({c0:K,c1:M})=>{let j=_.mul(K,M);return{c0:_.sub(_.sub(_.mul(_.add(_.mulByNonresidue(M),K),_.add(K,M)),j),_.mulByNonresidue(j)),c1:_.add(j,j)}};function b(K,M){let j=H.sqr(K),O=H.sqr(M);return{first:H.add(H.mulByNonresidue(O),j),second:H.sub(H.sub(H.sqr(H.add(K,M)),j),O)}}let m={ORDER:H.ORDER,isLE:_.isLE,BITS:2*_.BITS,BYTES:2*_.BYTES,MASK:k3(2*_.BITS),ZERO:{c0:_.ZERO,c1:_.ZERO},ONE:{c0:_.ONE,c1:_.ZERO},create:(K)=>K,isValid:({c0:K,c1:M})=>_.isValid(K)&&_.isValid(M),is0:({c0:K,c1:M})=>_.is0(K)&&_.is0(M),neg:({c0:K,c1:M})=>({c0:_.neg(K),c1:_.neg(M)}),eql:({c0:K,c1:M},{c0:j,c1:O})=>_.eql(K,j)&&_.eql(M,O),sqrt:Q2,inv:({c0:K,c1:M})=>{let j=_.inv(_.sub(_.sqr(K),_.mulByNonresidue(_.sqr(M))));return{c0:_.mul(K,j),c1:_.neg(_.mul(M,j))}},div:(K,M)=>m.mul(K,typeof M==="bigint"?Z.inv(Z.create(M)):m.inv(M)),pow:(K,M)=>ND(m,K,M),invertBatch:(K)=>o$(m,K),add:x,sub:g,mul:h,sqr:v,addN:x,subN:g,mulN:h,sqrN:v,fromBytes:(K)=>{if(K.length!==m.BYTES)throw Error("fromBytes invalid length="+K.length);return{c0:_.fromBytes(K.subarray(0,_.BYTES)),c1:_.fromBytes(K.subarray(_.BYTES))}},toBytes:({c0:K,c1:M})=>d6(_.toBytes(K),_.toBytes(M)),cmov:({c0:K,c1:M},{c0:j,c1:O},R)=>({c0:_.cmov(K,j,R),c1:_.cmov(M,O,R)}),fromBigTwelve:(K)=>({c0:_.fromBigSix(K.slice(0,6)),c1:_.fromBigSix(K.slice(6,12))}),frobeniusMap(K,M){let{c0:j,c1:O,c2:R}=_.frobeniusMap(K.c1,M),F=f[M%12];return{c0:_.frobeniusMap(K.c0,M),c1:_.create({c0:H.mul(j,F),c1:H.mul(O,F),c2:H.mul(R,F)})}},mulByFp2:({c0:K,c1:M},j)=>({c0:_.mulByFp2(K,j),c1:_.mulByFp2(M,j)}),conjugate:({c0:K,c1:M})=>({c0:K,c1:_.neg(M)}),mul014:({c0:K,c1:M},j,O,R)=>{let F=_.mul01(K,j,O),A=_.mul1(M,R);return{c0:_.add(_.mulByNonresidue(A),F),c1:_.sub(_.sub(_.mul01(_.add(M,K),j,H.add(O,R)),F),A)}},mul034:({c0:K,c1:M},j,O,R)=>{let F=_.create({c0:H.mul(K.c0,j),c1:H.mul(K.c1,j),c2:H.mul(K.c2,j)}),A=_.mul01(M,O,R),T=_.mul01(_.add(K,M),H.add(j,O),R);return{c0:_.add(_.mulByNonresidue(A),F),c1:_.sub(T,_.add(F,A))}},_cyclotomicSquare:$.Fp12cyclotomicSquare,_cyclotomicExp:$.Fp12cyclotomicExp,finalExponentiate:$.Fp12finalExponentiate};return{Fp:Z,Fp2:H,Fp6:_,Fp4Square:b,Fp12:m}}var IR0,pG,gZ,n10;var uS=p(()=>{vZ();bZ();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */IR0=BigInt(0),pG=BigInt(1),gZ=BigInt(2),n10=BigInt(3)});function AC($){$=$.slice();let Q=$[0]&224,Z=!!(Q>>7&1),X=!!(Q>>6&1),Y=!!(Q>>5&1);return $[0]&=31,{compressed:Z,infinity:X,sort:Y,value:$}}function wD($,Q){if($[0]&224)throw Error("setMask: non-empty mask");if(Q.compressed)$[0]|=128;if(Q.infinity)$[0]|=64;if(Q.sort)$[0]|=32;return $}function s10($){$.assertValidity();let Q=$.equals(l6.G1.ProjectivePoint.ZERO),{x:Z,y:X}=$.toAffine();if(Q)return BC.slice();let Y=j1.ORDER,z=Boolean(X*H9/Y);return wD(N8(Z,j1.BYTES),{compressed:!0,sort:z})}function t10($){$.assertValidity();let Q=j1.BYTES;if($.equals(l6.G2.ProjectivePoint.ZERO))return d6(BC,N8(x2,Q));let{x:Z,y:X}=$.toAffine(),{re:Y,im:z}=E1.reim(Z),{re:J,im:q}=E1.reim(X),W=q>x2?q*H9:J*H9,G=Boolean(W/j1.ORDER&wC),U=Y;return d6(wD(N8(z,Q),{sort:G,compressed:!0}),N8(U,Q))}var x2,wC,H9,FC,AD,uY,_R0,j1,E1,lS,cS,B5,r10,SR0,fR0,kR0,xR0,a10,bR0,dS,BC,l6;var e10=p(()=>{GC();vY();mS();vZ();bZ();_S();uS();FD();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */x2=BigInt(0),wC=BigInt(1),H9=BigInt(2),FC=BigInt(3),AD=BigInt(4),uY=BigInt("0xd201000000010000"),_R0=i$(uY),{Fp:j1,Fp2:E1,Fp6:lS,Fp4Square:cS,Fp12:B5}=TC({ORDER:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),FP2_NONRESIDUE:[wC,wC],Fp2mulByB:({c0:$,c1:Q})=>{let Z=j1.mul($,AD),X=j1.mul(Q,AD);return{c0:j1.sub(Z,X),c1:j1.add(Z,X)}},Fp12cyclotomicSquare:({c0:$,c1:Q})=>{let{c0:Z,c1:X,c2:Y}=$,{c0:z,c1:J,c2:q}=Q,{first:W,second:G}=cS(Z,J),{first:U,second:D}=cS(z,Y),{first:P,second:H}=cS(X,q),N=E1.mulByNonresidue(H);return{c0:lS.create({c0:E1.add(E1.mul(E1.sub(W,Z),H9),W),c1:E1.add(E1.mul(E1.sub(U,X),H9),U),c2:E1.add(E1.mul(E1.sub(P,Y),H9),P)}),c1:lS.create({c0:E1.add(E1.mul(E1.add(N,z),H9),N),c1:E1.add(E1.mul(E1.add(G,J),H9),G),c2:E1.add(E1.mul(E1.add(D,q),H9),D)})}},Fp12cyclotomicExp($,Q){let Z=B5.ONE;for(let X=_R0-1;X>=0;X--)if(Z=B5._cyclotomicSquare(Z),DC(Q,X))Z=B5.mul(Z,$);return Z},Fp12finalExponentiate:($)=>{let Q=uY,Z=B5.div(B5.frobeniusMap($,6),$),X=B5.mul(B5.frobeniusMap(Z,2),Z),Y=B5.conjugate(B5._cyclotomicExp(X,Q)),z=B5.mul(B5.conjugate(B5._cyclotomicSquare(X)),Y),J=B5.conjugate(B5._cyclotomicExp(z,Q)),q=B5.conjugate(B5._cyclotomicExp(J,Q)),W=B5.mul(B5.conjugate(B5._cyclotomicExp(q,Q)),B5._cyclotomicSquare(Y)),G=B5.conjugate(B5._cyclotomicExp(W,Q)),U=B5.frobeniusMap(B5.mul(Y,q),2),D=B5.frobeniusMap(B5.mul(J,X),3),P=B5.frobeniusMap(B5.mul(W,B5.conjugate(X)),1),H=B5.mul(B5.mul(G,B5.conjugate(z)),X);return B5.mul(B5.mul(B5.mul(U,D),P),H)}}),r10=i4(BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001")),SR0=ES(E1,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(($)=>$.map((Q)=>E1.fromBigTuple(Q.map(BigInt))))),fR0=ES(j1,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(($)=>$.map((Q)=>BigInt(Q)))),kR0=hS(E1,{A:E1.create({c0:j1.create(x2),c1:j1.create(BigInt(240))}),B:E1.create({c0:j1.create(BigInt(1012)),c1:j1.create(BigInt(1012))}),Z:E1.create({c0:j1.create(BigInt(-2)),c1:j1.create(BigInt(-1))})}),xR0=hS(j1,{A:j1.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:j1.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:j1.create(BigInt(11))}),{G2psi:a10,G2psi2:bR0}=LC(j1,E1,E1.div(E1.ONE,E1.NONRESIDUE)),dS=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:j1.ORDER,m:2,k:128,expand:"xmd",hash:_Z}),BC=wD(j1.toBytes(x2),{infinity:!0,compressed:!0});l6=CC({fields:{Fp:j1,Fp2:E1,Fp6:lS,Fp12:B5,Fr:r10},G1:{Fp:j1,h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1"),a:j1.ZERO,b:AD,htfDefaults:{...dS,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:($,Q)=>{let Z=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),X=new $(j1.mul(Q.px,Z),Q.py,Q.pz);return Q.multiplyUnsafe(uY).negate().multiplyUnsafe(uY).equals(X)},clearCofactor:($,Q)=>{return Q.multiplyUnsafe(uY).add(Q)},mapToCurve:($)=>{let{x:Q,y:Z}=xR0(j1.create($[0]));return fR0(Q,Z)},fromBytes:($)=>{let{compressed:Q,infinity:Z,sort:X,value:Y}=AC($);if(Y.length===48&&Q){let z=j1.ORDER,J=Z9(Y),q=j1.create(J&j1.MASK);if(Z){if(q!==x2)throw Error("G1: non-empty compressed point at infinity");return{x:x2,y:x2}}let W=j1.add(j1.pow(q,FC),j1.create(l6.params.G1b)),G=j1.sqrt(W);if(!G)throw Error("invalid compressed G1 point");if(G*H9/z!==BigInt(X))G=j1.neg(G);return{x:j1.create(q),y:j1.create(G)}}else if(Y.length===96&&!Q){let z=Z9(Y.subarray(0,j1.BYTES)),J=Z9(Y.subarray(j1.BYTES));if(Z){if(z!==x2||J!==x2)throw Error("G1: non-empty point at infinity");return l6.G1.ProjectivePoint.ZERO.toAffine()}return{x:j1.create(z),y:j1.create(J)}}else throw Error("invalid point G1, expected 48/96 bytes")},toBytes:($,Q,Z)=>{let X=Q.equals($.ZERO),{x:Y,y:z}=Q.toAffine();if(Z){if(X)return BC.slice();let J=j1.ORDER,q=Boolean(z*H9/J);return wD(N8(Y,j1.BYTES),{compressed:!0,sort:q})}else if(X)return d6(new Uint8Array([64]),new Uint8Array(2*j1.BYTES-1));else return d6(N8(Y,j1.BYTES),N8(z,j1.BYTES))},ShortSignature:{fromHex($){let{infinity:Q,sort:Z,value:X}=AC(u8("signatureHex",$,48)),Y=j1.ORDER,z=Z9(X);if(Q)return l6.G1.ProjectivePoint.ZERO;let J=j1.create(z&j1.MASK),q=j1.add(j1.pow(J,FC),j1.create(l6.params.G1b)),W=j1.sqrt(q);if(!W)throw Error("invalid compressed G1 point");let G=BigInt(Z);if(W*H9/Y!==G)W=j1.neg(W);let U=l6.G1.ProjectivePoint.fromAffine({x:J,y:W});return U.assertValidity(),U},toRawBytes($){return s10($)},toHex($){return kZ(s10($))}}},G2:{Fp:E1,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),Gx:E1.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:E1.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")]),a:E1.ZERO,b:E1.fromBigTuple([AD,AD]),hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...dS},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:($)=>{let{x:Q,y:Z}=kR0(E1.fromBigTuple($));return SR0(Q,Z)},isTorsionFree:($,Q)=>{return Q.multiplyUnsafe(uY).negate().equals(a10($,Q))},clearCofactor:($,Q)=>{let Z=uY,X=Q.multiplyUnsafe(Z).negate(),Y=a10($,Q),z=Q.double();return z=bR0($,z),z=z.subtract(Y),Y=X.add(Y),Y=Y.multiplyUnsafe(Z).negate(),z=z.add(Y),z=z.subtract(X),z.subtract(Q)},fromBytes:($)=>{let{compressed:Q,infinity:Z,sort:X,value:Y}=AC($);if(!Q&&!Z&&X||!Q&&Z&&X||X&&Z&&Q)throw Error("invalid encoding flag: "+($[0]&224));let z=j1.BYTES,J=(q,W,G)=>Z9(q.slice(W,G));if(Y.length===96&&Q){let q=l6.params.G2b,W=j1.ORDER;if(Z){if(Y.reduce((C,L)=>C!==0?L+1:L,0)>0)throw Error("invalid compressed G2 point");return{x:E1.ZERO,y:E1.ZERO}}let G=J(Y,0,z),U=J(Y,z,2*z),D=E1.create({c0:j1.create(U),c1:j1.create(G)}),P=E1.add(E1.pow(D,FC),q),H=E1.sqrt(P),N=H.c1===x2?H.c0*H9/W:H.c1*H9/W?wC:x2;return H=X&&N>0?H:E1.neg(H),{x:D,y:H}}else if(Y.length===192&&!Q){if(Z){if(Y.reduce((D,P)=>D!==0?P+1:P,0)>0)throw Error("invalid uncompressed G2 point");return{x:E1.ZERO,y:E1.ZERO}}let q=J(Y,0,z),W=J(Y,z,2*z),G=J(Y,2*z,3*z),U=J(Y,3*z,4*z);return{x:E1.fromBigTuple([W,q]),y:E1.fromBigTuple([U,G])}}else throw Error("invalid point G2, expected 96/192 bytes")},toBytes:($,Q,Z)=>{let{BYTES:X,ORDER:Y}=j1,z=Q.equals($.ZERO),{x:J,y:q}=Q.toAffine();if(Z){if(z)return d6(BC,N8(x2,X));let W=Boolean(q.c1===x2?q.c0*H9/Y:q.c1*H9/Y);return d6(wD(N8(J.c1,X),{compressed:!0,sort:W}),N8(J.c0,X))}else{if(z)return d6(new Uint8Array([64]),new Uint8Array(4*X-1));let{re:W,im:G}=E1.reim(J),{re:U,im:D}=E1.reim(q);return d6(N8(G,X),N8(W,X),N8(D,X),N8(U,X))}},Signature:{fromHex($){let{infinity:Q,sort:Z,value:X}=AC(u8("signatureHex",$)),Y=j1.ORDER,z=X.length/2;if(z!==48&&z!==96)throw Error("invalid compressed signature length, must be 96 or 192");let J=Z9(X.slice(0,z)),q=Z9(X.slice(z));if(Q)return l6.G2.ProjectivePoint.ZERO;let W=j1.create(J&j1.MASK),G=j1.create(q),U=E1.create({c0:G,c1:W}),D=E1.add(E1.pow(U,FC),l6.params.G2b),P=E1.sqrt(D);if(!P)throw Error("Failed to find a square root");let{re:H,im:N}=E1.reim(P),C=BigInt(Z),L=N>x2&&N*H9/Y!==C,B=N===x2&&H*H9/Y!==C;if(L||B)P=E1.neg(P);let E=l6.G2.ProjectivePoint.fromAffine({x:U,y:P});return E.assertValidity(),E},toRawBytes($){return t10($)},toHex($){return kZ(t10($))}}},params:{ateLoopSize:uY,r:r10.ORDER,xNegative:!0,twistType:"multiplicative"},htfDefaults:dS,hash:_Z,randomBytes:yG})});function iS($,Q){if(L0($)>=YC)throw new U0(U0.errorMessages.BLS_12_381_FP_NOT_IN_FIELD);if(L0(Q)>=YC)throw new U0(U0.errorMessages.BLS_12_381_FP_NOT_IN_FIELD);let Z=d1($.subarray(16),Q.subarray(16));return l6.fields.Fp2.fromBytes(Z)}function BD($,Q=!0){if(X1($,PS)===!0)return SC;let Z=L0($.subarray(16,l4/2)),X=L0($.subarray(80,l4)),Y=l6.G1.ProjectivePoint.fromAffine({x:Z,y:X});try{Y.assertValidity()}catch(z){if(Q||z.message!=="bad point: not in prime-order subgroup")throw new U0(U0.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE)}return Y}function EC($){let Q=b1(Z5($.x),64),Z=b1(Z5($.y),64);return d1(Q,Z)}function ED($,Q=!0){if(X1($,HS)===!0)return fC;let Z=$.subarray(0,64),X=$.subarray(64,c7/2),Y=$.subarray(128,192),z=$.subarray(192,c7),J=iS(Z,X),q=iS(Y,z),W=l6.G2.ProjectivePoint.fromAffine({x:J,y:q});try{W.assertValidity()}catch(G){if(Q||G.message!=="bad point: not in prime-order subgroup")throw new U0(U0.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE)}return W}function IC($){let Q=b1(Z5($.x.c0),64),Z=b1(Z5($.x.c1),64),X=b1(Z5($.y.c0),64),Y=b1(Z5($.y.c1),64);return d1(Q,Z,X,Y)}function _C($){let Q=l6.fields.Fr.fromBytes($);return l6.fields.Fr.create(Q)}function vR0($){if(L0($)>=YC)throw new U0(U0.errorMessages.BLS_12_381_FP_NOT_IN_FIELD);return l6.fields.Fp.fromBytes($.slice(16))}class uG{addG1($){let Q=BD($.subarray(0,l4),!1),Z=BD($.subarray(l4,l4*2),!1),X=Q.add(Z);return EC(X)}mulG1($){let Q=BD($.subarray(0,l4)),Z=_C($.subarray(l4,160));if(Z===Q0)return PS;let X=Q.multiplyUnsafe(Z);return EC(X)}addG2($){let Q=ED($.subarray(0,c7),!1),Z=ED($.subarray(c7,c7*2),!1),X=Q.add(Z);return IC(X)}mulG2($){let Q=ED($.subarray(0,c7)),Z=_C($.subarray(c7,288));if(Z===Q0)return HS;let X=Q.multiplyUnsafe(Z);return IC(X)}mapFPtoG1($){let Q=vR0($.subarray(0,64)),Z=l6.G1.mapToCurve([Q]).toAffine();return EC(Z)}mapFP2toG2($){let Q=iS($.subarray(0,64),$.subarray(64,128)),Z=l6.G2.mapToCurve([Q.c0,Q.c1]).toAffine();return IC(Z)}msmG1($){let Z=$.length/160,X=SC;for(let Y=0;Y<Z;Y++){let z=160*Y,J=BD($.subarray(z,z+l4)),q=_C($.subarray(z+l4,z+160)),W;if(q===Q0)W=SC;else W=J.multiplyUnsafe(q);X=X.add(W)}return EC(X)}msmG2($){let Z=$.length/288,X=fC;for(let Y=0;Y<Z;Y++){let z=288*Y,J=ED($.subarray(z,z+c7)),q=_C($.subarray(z+c7,z+288)),W;if(q===Q0)W=fC;else W=J.multiplyUnsafe(q);X=X.add(W)}return IC(X)}pairingCheck($){let Z=[];for(let z=0;z<$.length/384;z++){let J=384*z,q=BD($.subarray(J,J+l4)),W=J+l4,G=ED($.subarray(W,W+c7));Z.push({g1:q,g2:G})}let X=Z.filter((z)=>!z.g1.equals(SC)&&!z.g2.equals(fC)),Y=l6.pairingBatch(X,!0);if(l6.fields.Fp12.eql(Y,l6.fields.Fp12.ONE))return X10;else return Z10}}var SC,fC;var $50=p(()=>{Z1();e10();m8();jS();SC=l6.G1.ProjectivePoint.ZERO,fC=l6.G2.ProjectivePoint.ZERO});var yR0,kC=($,Q,Z)=>{let X=Z[Z.length-1][1],Y;if($<=Z.length)if($===0)Y=0;else Y=Z[$-1][1];else Y=X;return BigInt($)*Q*BigInt(Y)/BigInt(1000)},W4=($,Q,Z,X=0)=>{for(let Y in Q){let z=$.data.subarray(Q[Y][0]+X,Q[Y][1]+X);if(X1(z,yR0)!==!0){if($._debug!==void 0)$._debug(`${Z} failed: Point not on curve`);return!1}}return!0};var Q50=p(()=>{Z1();yR0=new Uint8Array(16)});var hZ=p(()=>{$50();jS();Q50()});async function oS($){let Q=j5("0b"),Z=$._EVM._bls,X=$.common.param("bls12381G1AddGas")??BigInt(0);if(!w5($,X,Q))return u1($.gasLimit);if(!xY($,256,Q))return t1(new U0(U0.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),$.gasLimit);if(!W4($,[[0,16],[64,80],[128,144],[192,208]],Q))return t1(new U0(U0.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),$.gasLimit);let z;try{z=Z.addG1($.data)}catch(J){if($._debug!==void 0)$._debug(`${Q} failed: ${J.message}`);return t1(J,$.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${H0(z)}`);return{executionGasUsed:X,returnValue:z}}var Z50=p(()=>{Z1();m8();p8();hZ();R8();Q9()});async function nS($){let Q=j5("0d"),Z=$._EVM._bls,X=$.data;if(X.length===0){if($._debug!==void 0)$._debug(`${Q} failed: Empty input`);return t1(new U0(U0.errorMessages.BLS_12_381_INPUT_EMPTY),$.gasLimit)}let Y=Math.floor(X.length/160),z=$.common.param("bls12381G1MulGas")??BigInt(0),J=kC(Y,z,Y10);if(!w5($,J,Q))return u1($.gasLimit);if(X.length%160!==0){if($._debug!==void 0)$._debug(`${Q} failed: Invalid input length length=${X.length}`);return t1(new U0(U0.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),$.gasLimit)}if(!bY($,160,Q))return t1(new U0(U0.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),$.gasLimit);let q=[[0,16],[64,80]];for(let G=0;G<Y;G++){let U=160*G;if(!W4($,q,Q,U))return t1(new U0(U0.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),$.gasLimit)}let W;try{W=Z.msmG1($.data)}catch(G){if($._debug!==void 0)$._debug(`${Q} failed: ${G.message}`);return t1(G,$.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${H0(W)}`);return{executionGasUsed:J,returnValue:W}}var X50=p(()=>{Z1();m8();p8();hZ();R8();Q9()});async function rS($){let Q=j5("0e"),Z=$._EVM._bls,X=$.common.param("bls12381G2AddGas")??BigInt(0);if(!w5($,X,Q))return u1($.gasLimit);if(!xY($,512,Q))return t1(new U0(U0.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),$.gasLimit);if(!W4($,[[0,16],[64,80],[128,144],[192,208],[256,272],[320,336],[384,400],[448,464]],Q))return t1(new U0(U0.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),$.gasLimit);let z;try{z=Z.addG2($.data)}catch(J){return t1(J,$.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${H0(z)}`);return{executionGasUsed:X,returnValue:z}}var Y50=p(()=>{Z1();m8();p8();hZ();R8();Q9()});async function aS($){let Q=j5("10"),Z=$._EVM._bls;if($.data.length===0){if($._debug!==void 0)$._debug(`${Q} failed: Empty input`);return t1(new U0(U0.errorMessages.BLS_12_381_INPUT_EMPTY),$.gasLimit)}let X=Math.floor($.data.length/288),Y=$.common.param("bls12381G2MulGas")??BigInt(0),z=kC(X,Y,J10);if(!w5($,z,Q))return u1($.gasLimit);if(!bY($,288,Q))return t1(new U0(U0.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),$.gasLimit);let J=[[0,16],[64,80],[128,144],[192,208]];for(let W=0;W<X;W++){let G=288*W;if(!W4($,J,Q,G))return t1(new U0(U0.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),$.gasLimit)}let q;try{q=Z.msmG2($.data)}catch(W){if($._debug!==void 0)$._debug(`${Q} failed: ${W.message}`);return t1(W,$.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${H0(q)}`);return{executionGasUsed:z,returnValue:q}}var J50=p(()=>{Z1();m8();p8();hZ();R8();Q9()});async function sS($){let Q=j5("11"),Z=$._EVM._bls,X=$.common.param("bls12381PairingBaseGas")??BigInt(0);if($.data.length===0){if($._debug!==void 0)$._debug(`${Q} failed: Empty input`);return t1(new U0(U0.errorMessages.BLS_12_381_INPUT_EMPTY),$.gasLimit)}let Y=$.common.param("bls12381PairingPerPairGas")??BigInt(0);if(!bY($,384,Q))return t1(new U0(U0.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),$.gasLimit);let z=X+Y*BigInt(Math.floor($.data.length/384));if(!w5($,z,Q))return u1($.gasLimit);let J=[[0,16],[64,80],[128,144],[192,208],[256,272],[320,336]];for(let W=0;W<$.data.length/384;W++){let G=384*W;if(!W4($,J,Q,G))return t1(new U0(U0.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),$.gasLimit)}let q;try{q=Z.pairingCheck($.data)}catch(W){if($._debug!==void 0)$._debug(`${Q} failed: ${W.message}`);return t1(W,$.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${H0(q)}`);return{executionGasUsed:z,returnValue:q}}var z50=p(()=>{Z1();m8();p8();hZ();R8();Q9()});function tS($){let Q=j5("01"),Z=$.common.customCrypto.ecrecover??VY,X=$.common.param("ecRecoverGas");if(!w5($,X,Q))return u1($.gasLimit);let Y=E8($.data,128),z=Y.subarray(0,32),J=Y.subarray(32,64),q=L0(J);if(q!==$G&&q!==nn){if($._debug!==void 0)$._debug(`${Q} failed: v neither 27 nor 28`);return{executionGasUsed:X,returnValue:new Uint8Array}}let W=Y.subarray(64,96),G=Y.subarray(96,128),U;try{if($._debug!==void 0)$._debug(`${Q}: PK recovery with msgHash=${H0(z)} v=${H0(J)} r=${H0(W)}s=${H0(G)}}`);U=Z(z,L0(J),W,G)}catch{if($._debug!==void 0)$._debug(`${Q} failed: PK recovery failed`);return{executionGasUsed:X,returnValue:new Uint8Array(0)}}let D=b1($q(U),32);if($._debug!==void 0)$._debug(`${Q} return address=${H0(D)}`);return{executionGasUsed:X,returnValue:D}}var q50=p(()=>{Z1();p8();R8();Q9()});function gR0($,Q,Z,X){if(typeof $.setBigUint64==="function")return $.setBigUint64(Q,Z,X);let Y=BigInt(32),z=BigInt(4294967295),J=Number(Z>>Y&z),q=Number(Z&z),W=X?4:0,G=X?0:4;$.setUint32(Q+W,J,X),$.setUint32(Q+G,q,X)}function eS($,Q,Z){return $&Q^~$&Z}function $f($,Q,Z){return $&Q^$&Z^Q&Z}var ID,mZ;var Qf=p(()=>{IG();ID=class ID extends qD{constructor($,Q,Z,X){super();this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=$,this.outputLen=Q,this.padOffset=Z,this.isLE=X,this.buffer=new Uint8Array($),this.view=aN(this.buffer)}update($){jq(this),$=zD($),TZ($);let{view:Q,buffer:Z,blockLen:X}=this,Y=$.length;for(let z=0;z<Y;){let J=Math.min(X-this.pos,Y-z);if(J===X){let q=aN($);for(;X<=Y-z;z+=X)this.process(q,z);continue}if(Z.set($.subarray(z,z+J),this.pos),this.pos+=J,z+=J,this.pos===X)this.process(Q,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){jq(this),YD($,this),this.finished=!0;let{buffer:Q,view:Z,blockLen:X,isLE:Y}=this,{pos:z}=this;if(Q[z++]=128,_3(this.buffer.subarray(z)),this.padOffset>X-z)this.process(Z,0),z=0;for(let U=z;U<X;U++)Q[U]=0;gR0(Z,X-8,BigInt(this.length*8),Y),this.process(Z,0);let J=aN($),q=this.outputLen;if(q%4)throw Error("_sha2: outputLen should be aligned to 32bit");let W=q/4,G=this.get();if(W>G.length)throw Error("_sha2: outputLen bigger than state");for(let U=0;U<W;U++)J.setUint32(4*U,G[U],Y)}digest(){let{buffer:$,outputLen:Q}=this;this.digestInto($);let Z=$.slice(0,Q);return this.destroy(),Z}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:Q,buffer:Z,length:X,finished:Y,destroyed:z,pos:J}=this;if($.destroyed=z,$.finished=Y,$.length=X,$.pos=J,X%Q)$.buffer.set(Z);return $}clone(){return this._cloneInto()}};mZ=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225])});var hR0,cY,W50,K50;var G50=p(()=>{Qf();IG();hR0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),cY=new Uint32Array(64);W50=class W50 extends ID{constructor($=32){super(64,$,8,!1);this.A=mZ[0]|0,this.B=mZ[1]|0,this.C=mZ[2]|0,this.D=mZ[3]|0,this.E=mZ[4]|0,this.F=mZ[5]|0,this.G=mZ[6]|0,this.H=mZ[7]|0}get(){let{A:$,B:Q,C:Z,D:X,E:Y,F:z,G:J,H:q}=this;return[$,Q,Z,X,Y,z,J,q]}set($,Q,Z,X,Y,z,J,q){this.A=$|0,this.B=Q|0,this.C=Z|0,this.D=X|0,this.E=Y|0,this.F=z|0,this.G=J|0,this.H=q|0}process($,Q){for(let U=0;U<16;U++,Q+=4)cY[U]=$.getUint32(Q,!1);for(let U=16;U<64;U++){let D=cY[U-15],P=cY[U-2],H=S3(D,7)^S3(D,18)^D>>>3,N=S3(P,17)^S3(P,19)^P>>>10;cY[U]=N+cY[U-7]+H+cY[U-16]|0}let{A:Z,B:X,C:Y,D:z,E:J,F:q,G:W,H:G}=this;for(let U=0;U<64;U++){let D=S3(J,6)^S3(J,11)^S3(J,25),P=G+D+eS(J,q,W)+hR0[U]+cY[U]|0,N=(S3(Z,2)^S3(Z,13)^S3(Z,22))+$f(Z,X,Y)|0;G=W,W=q,q=J,J=z+P|0,z=Y,Y=X,X=Z,Z=P+N|0}Z=Z+this.A|0,X=X+this.B|0,Y=Y+this.C|0,z=z+this.D|0,J=J+this.E|0,q=q+this.F|0,W=W+this.G|0,G=G+this.H|0,this.set(Z,X,Y,z,J,q,W,G)}roundClean(){_3(cY)}destroy(){this.set(0,0,0,0,0,0,0,0),_3(this.buffer)}};K50=EG(()=>new W50)});var U50;var V50=p(()=>{G50();tN();U50=FZ(K50)});function Zf($){let Q=j5("02"),Z=$.data,X=$.common.customCrypto.sha256??U50,Y=$.common.param("sha256Gas");if(Y+=$.common.param("sha256WordGas")*BigInt(Math.ceil(Z.length/32)),!w5($,Y,Q))return u1($.gasLimit);let z=X(Z);if($._debug!==void 0)$._debug(`${Q} return hash=${H0(z)}`);return{executionGasUsed:Y,returnValue:z}}var O50=p(()=>{Z1();V50();p8();R8();Q9()});function D50($,Q,Z,X){if($===0)return Q^Z^X;if($===1)return Q&Z|~Q&X;if($===2)return(Q|~Z)^X;if($===3)return Q&X|Z&~X;return Q^(Z|~X)}var mR0,M50,pR0,P50,H50,j50,R50,uR0,cR0,dR0,lR0,xC,N50,C50;var L50=p(()=>{Qf();IG();mR0=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),M50=(()=>Uint8Array.from(Array(16).fill(0).map(($,Q)=>Q)))(),pR0=(()=>M50.map(($)=>(9*$+5)%16))(),P50=(()=>{let Z=[[M50],[pR0]];for(let X=0;X<4;X++)for(let Y of Z)Y.push(Y[X].map((z)=>mR0[z]));return Z})(),H50=(()=>P50[0])(),j50=(()=>P50[1])(),R50=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(($)=>Uint8Array.from($)),uR0=H50.map(($,Q)=>$.map((Z)=>R50[Q][Z])),cR0=j50.map(($,Q)=>$.map((Z)=>R50[Q][Z])),dR0=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),lR0=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);xC=new Uint32Array(16);N50=class N50 extends ID{constructor(){super(64,20,8,!0);this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:$,h1:Q,h2:Z,h3:X,h4:Y}=this;return[$,Q,Z,X,Y]}set($,Q,Z,X,Y){this.h0=$|0,this.h1=Q|0,this.h2=Z|0,this.h3=X|0,this.h4=Y|0}process($,Q){for(let P=0;P<16;P++,Q+=4)xC[P]=$.getUint32(Q,!0);let Z=this.h0|0,X=Z,Y=this.h1|0,z=Y,J=this.h2|0,q=J,W=this.h3|0,G=W,U=this.h4|0,D=U;for(let P=0;P<5;P++){let H=4-P,N=dR0[P],C=lR0[P],L=H50[P],B=j50[P],E=uR0[P],I=cR0[P];for(let _=0;_<16;_++){let f=JD(Z+D50(P,Y,J,W)+xC[L[_]]+N,E[_])+U|0;Z=U,U=W,W=JD(J,10)|0,J=Y,Y=f}for(let _=0;_<16;_++){let f=JD(X+D50(H,z,q,G)+xC[B[_]]+C,I[_])+D|0;X=D,D=G,G=JD(q,10)|0,q=z,z=f}}this.set(this.h1+J+G|0,this.h2+W+D|0,this.h3+U+X|0,this.h4+Z+z|0,this.h0+Y+q|0)}roundClean(){_3(xC)}destroy(){this.destroyed=!0,_3(this.buffer),this.set(0,0,0,0,0)}};C50=EG(()=>new N50)});var Xf;var T50=p(()=>{L50();tN();Xf=FZ(C50)});function Yf($){let Q=j5("03"),Z=$.data,X=$.common.param("ripemd160Gas");if(X+=$.common.param("ripemd160WordGas")*BigInt(Math.ceil(Z.length/32)),!w5($,X,Q))return u1($.gasLimit);let Y=b1(Xf(Z),32);if($._debug!==void 0)$._debug(`${Q} return hash=${H0(Y)}`);return{executionGasUsed:X,returnValue:b1(Xf(Z),32)}}var F50=p(()=>{Z1();T50();p8();R8();Q9()});function Jf($){let Q=j5("04"),Z=$.data,X=$.common.param("identityGas");if(X+=$.common.param("identityWordGas")*BigInt(Math.ceil(Z.length/32)),!w5($,X,Q))return u1($.gasLimit);if($._debug!==void 0)$._debug(`${Q} return data=${v4($.data)}`);return{executionGasUsed:X,returnValue:Uint8Array.from(Z)}}var A50=p(()=>{Z1();p8();R8();Q9()});function tR0($){let Q,Z;if($<=GY)return $**I8;else if($<=E50)return Q=$**I8/iR0,Z=$*TO,Q+Z-nR0;else return Q=$**I8/zf,Z=$*oR0,Q+Z-rR0}function eR0($,Q){let Z;try{let U=L0($.subarray(0,32));Z=96+Number(U)}catch{Z=Number.MAX_SAFE_INTEGER-32}let X=L0($.subarray(32,64)),Y=$.subarray(Z,Z+32);Y=E8(Y,32);let z=L0(Y),J=0;if(X<Z8)J=32-Number(X);z=z>>w$*BigInt(Math.max(J,0));let q=-1;while(z>Q0)q=q+1,z=z>>A1;let W=X-Z8;if(W<Q0)W=Q0;let G=W*(Q.common.isActivatedEIP(7883)===!0?zf:w$);if(q>0)G+=BigInt(q);return G}function $N0($,Q,Z){if(Q===Q0)return A1%Z;let X=A1;while(Q>Q0){if(Q&A1)X=X*$%Z;$=$*$%Z,Q>>=A1}return X}function qf($){let Q=j5("05"),Z=$.data.length<96?E8($.data,96):$.data,X=eR0(Z,$);if(X<A1)X=A1;let Y=L0(Z.subarray(0,32)),z=L0(Z.subarray(32,64)),J=L0(Z.subarray(64,96)),q=Y;if(q<J)q=J;let W=$.common.param("modexpGquaddivisorGas"),G,U=TO,D=U+Y,P=D,H=P+z,N=H,C=N+J;if($.common.isActivatedEIP(2565)){let x=(q+eK)/w$;if($.common.isActivatedEIP(7883)){if(G=X*(q>Z8?I8*x*x:zf),G<B50)G=B50}else if(G=X*x*x/W,G<w50)G=w50}else G=X*tR0(q)/W;if(!w5($,G,Q))return u1($.gasLimit);let L=$.common.isActivatedEIP(7823)?E50:aR0;if($._debug!==void 0){let x=BigInt(96)+Y+z+J,g=BigInt($.data.length),h=`${Q} length values: maxSize(b/e/m)=${L} bLen=${Y} eLen=${z} mLen=${J} 96+b+e+m=${x} `;h+=`data=${g} lengthMatch=${x===g}`,$._debug(h)}if(!$.common.isActivatedEIP(7823)&&Y===Q0&&J===Q0)return{executionGasUsed:G,returnValue:new Uint8Array};if(Y>L||z>L||J>L){if($._debug!==void 0)$._debug(`${Q} failed: one or more input values too large`);return u1($.gasLimit)}if(C>sR0){if($._debug!==void 0)$._debug(`${Q} failed: total input too large`);return u1($.gasLimit)}let B=L0(E8(Z.subarray(Number(U),Number(D)),Number(Y))),E=L0(E8(Z.subarray(Number(P),Number(H)),Number(z))),I=L0(E8(Z.subarray(Number(N),Number(C)),Number(J)));if($._debug!==void 0)$._debug(`${Q} input: B=${B} E=${E} M=${I}`);let _;if(I===Q0)_=new Uint8Array;else if(_=$N0(B,E,I),_===Q0)_=new Uint8Array;else _=Z5(_);let f=b1(_,Number(J));if($._debug!==void 0)$._debug(`${Q} return value=${H0(f)}`);return{executionGasUsed:G,returnValue:f}}var iR0,zf,oR0,w50,B50,E50,nR0,rR0,aR0,sR0;var I50=p(()=>{Z1();p8();R8();Q9();iR0=BigInt(4),zf=BigInt(16),oR0=BigInt(480),w50=BigInt(200),B50=BigInt(500),E50=BigInt(1024),nR0=BigInt(3072),rR0=BigInt(199680),aR0=BigInt(2147483647),sR0=BigInt(Number.MAX_SAFE_INTEGER)});function Wf($){let Q=j5("06"),Z=$.common.param("bn254AddGas");if(!w5($,Z,Q))return u1($.gasLimit);let X=E8($.data.subarray(0,128),128),Y;try{Y=$._EVM._bn254.add(X)}catch(z){if($._debug!==void 0)$._debug(`${Q} failed: ${z.message}`);return t1(z,$.gasLimit)}if(Y.length!==64){if($._debug!==void 0)$._debug(`${Q} failed: OOG`);return u1($.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${H0(Y)}`);return{executionGasUsed:Z,returnValue:Y}}var _50=p(()=>{Z1();p8();R8();Q9()});function Kf($){let Q=j5("07"),Z=$.common.param("bn254MulGas");if(!w5($,Z,Q))return u1($.gasLimit);let X=E8($.data.subarray(0,128),128),Y;try{Y=$._EVM._bn254.mul(X)}catch(z){if($._debug!==void 0)$._debug(`${Q} failed: ${z.message}`);return t1(z,$.gasLimit)}if(Y.length!==64){if($._debug!==void 0)$._debug(`${Q} failed: OOG`);return u1($.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${H0(Y)}`);return{executionGasUsed:Z,returnValue:Y}}var S50=p(()=>{Z1();p8();R8();Q9()});function Gf($){let Q=j5("08");if(!bY($,192,Q))return t1(new U0(U0.errorMessages.INVALID_INPUT_LENGTH),$.gasLimit);let Z=BigInt(Math.floor($.data.length/192)),X=$.common.param("bn254PairingGas")+Z*$.common.param("bn254PairingWordGas");if(!w5($,X,Q))return u1($.gasLimit);let Y;try{Y=$._EVM._bn254.pairing($.data)}catch(z){if($._debug!==void 0)$._debug(`${Q} failed: ${z.message}`);return t1(z,$.gasLimit)}if(Y.length!==32){if($._debug!==void 0)$._debug(`${Q} failed: OOG`);return u1($.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${H0(Y)}`);return{executionGasUsed:X,returnValue:Y}}var f50=p(()=>{Z1();m8();p8();R8();Q9()});function bC($,Q,Z){let X=$[Q]+$[Z],Y=$[Q+1]+$[Z+1];if(X>=4294967296)Y++;$[Q]=X,$[Q+1]=Y}function k50($,Q,Z,X){let Y=$[Q]+Z;if(Z<0)Y+=4294967296;let z=$[Q+1]+X;if(Y>=4294967296)z++;$[Q]=Y,$[Q+1]=z}function dY($,Q,Z,X,Y,z,J,q){let W=Q[J],G=Q[J+1],U=Q[q],D=Q[q+1];bC($,Z,X),k50($,Z,W,G);let P=$[z]^$[Z],H=$[z+1]^$[Z+1];$[z]=H,$[z+1]=P,bC($,Y,z),P=$[X]^$[Y],H=$[X+1]^$[Y+1],$[X]=P>>>24^H<<8,$[X+1]=H>>>24^P<<8,bC($,Z,X),k50($,Z,U,D),P=$[z]^$[Z],H=$[z+1]^$[Z+1],$[z]=P>>>16^H<<16,$[z+1]=H>>>16^P<<16,bC($,Y,z),P=$[X]^$[Y],H=$[X+1]^$[Y+1],$[X]=H>>>31^P<<1,$[X+1]=P>>>31^H<<1}function XN0($,Q,Z,X,Y){let z=new Uint32Array(32),J=0;for(J=0;J<16;J++)z[J]=$[J],z[J+16]=QN0[J];if(z[24]=z[24]^Z[0],z[25]=z[25]^Z[1],z[26]=z[26]^Z[2],z[27]=z[27]^Z[3],X)z[28]=~z[28],z[29]=~z[29];for(J=0;J<Y;J++){let q=J%10*16;dY(z,Q,0,8,16,24,X2[q+0],X2[q+1]),dY(z,Q,2,10,18,26,X2[q+2],X2[q+3]),dY(z,Q,4,12,20,28,X2[q+4],X2[q+5]),dY(z,Q,6,14,22,30,X2[q+6],X2[q+7]),dY(z,Q,0,10,20,30,X2[q+8],X2[q+9]),dY(z,Q,2,12,22,24,X2[q+10],X2[q+11]),dY(z,Q,4,14,16,26,X2[q+12],X2[q+13]),dY(z,Q,6,8,18,28,X2[q+14],X2[q+15])}for(J=0;J<16;J++)$[J]=$[J]^z[J]^z[J+16]}function Uf($){let Q=j5("09"),Z=$.data;if(Z.length!==213){if($._debug!==void 0)$._debug(`${Q} failed: OUT_OF_RANGE dataLength=${Z.length}`);return{returnValue:new Uint8Array(0),executionGasUsed:$.gasLimit,exceptionError:new U0(U0.errorMessages.OUT_OF_RANGE)}}let X=Z.subarray(212,213)[0];if(X!==1&&X!==0){if($._debug!==void 0)$._debug(`${Q} failed: OUT_OF_RANGE lastByte=${X}`);return{returnValue:new Uint8Array(0),executionGasUsed:$.gasLimit,exceptionError:new U0(U0.errorMessages.OUT_OF_RANGE)}}let Y=new DataView(Z.buffer,Z.byteOffset).getUint32(0),z=new DataView(Z.buffer,Z.byteOffset+4,64),J=new DataView(Z.buffer,Z.byteOffset+68,128),q=new DataView(Z.buffer,Z.byteOffset+196,16),W=X===1,G=$.common.param("blake2RoundGas");if(G*=BigInt(Y),!w5($,G,Q))return u1($.gasLimit);let U=new Uint32Array(16);for(let C=0;C<16;C++)U[C]=z.getUint32(C*4,!0);let D=new Uint32Array(32);for(let C=0;C<32;C++)D[C]=J.getUint32(C*4,!0);let P=new Uint32Array(4);for(let C=0;C<4;C++)P[C]=q.getUint32(C*4,!0);XN0(U,D,P,W,Y);let H=new Uint8Array(64),N=new DataView(H.buffer);for(let C=0;C<16;C++)N.setUint32(C*4,U[C],!0);if($._debug!==void 0)$._debug(`${Q} return hash=${H0(H)}`);return{executionGasUsed:G,returnValue:H}}var QN0,ZN0,X2;var x50=p(()=>{Z1();m8();p8();R8();Q9();QN0=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ZN0=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],X2=new Uint8Array(ZN0.map(function($){return $*2}))});async function Vf($){let Q=j5("12"),Z=$._EVM._bls,X=$.common.param("bls12381MapG1Gas")??BigInt(0);if(!w5($,X,Q))return u1($.gasLimit);if(!xY($,64,Q))return t1(new U0(U0.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),$.gasLimit);if(!W4($,[[0,16]],Q))return t1(new U0(U0.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),$.gasLimit);let z;try{z=Z.mapFPtoG1($.data)}catch(J){if($._debug!==void 0)$._debug(`${Q} failed: ${J.message}`);return t1(J,$.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${H0(z)}`);return{executionGasUsed:X,returnValue:z}}var b50=p(()=>{Z1();m8();p8();hZ();R8();Q9()});async function Of($){let Q=j5("13"),Z=$._EVM._bls,X=$.common.param("bls12381MapG2Gas")??BigInt(0);if(!w5($,X,Q))return u1($.gasLimit);if(!xY($,128,Q))return t1(new U0(U0.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),$.gasLimit);if(!W4($,[[0,16],[64,80]],Q))return t1(new U0(U0.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),$.gasLimit);let z;try{z=Z.mapFP2toG2($.data)}catch(J){if($._debug!==void 0)$._debug(`${Q} failed: ${J.message}`);return t1(J,$.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${H0(z)}`);return{executionGasUsed:X,returnValue:z}}var v50=p(()=>{Z1();m8();p8();hZ();R8();Q9()});var Df,Mf=($,Q,Z)=>new Df($,Q).update(Z).digest();var y50=p(()=>{vY();Df=class Df extends OD{constructor($,Q){super();this.finished=!1,this.destroyed=!1,q10($);let Z=VD(Q);if(this.iHash=$.create(),typeof this.iHash.update!=="function")throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let X=this.blockLen,Y=new Uint8Array(X);Y.set(Z.length>X?$.create().update(Z).digest():Z);for(let z=0;z<Y.length;z++)Y[z]^=54;this.iHash.update(Y),this.oHash=$.create();for(let z=0;z<Y.length;z++)Y[z]^=106;this.oHash.update(Y),EZ(Y)}update($){return vG(this),this.iHash.update($),this}digestInto($){vG(this),Cq($,this.outputLen),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||($=Object.create(Object.getPrototypeOf(this),{}));let{oHash:Q,iHash:Z,finished:X,destroyed:Y,blockLen:z,outputLen:J}=this;return $=$,$.finished=X,$.destroyed=Y,$.blockLen=z,$.outputLen=J,$.oHash=Q._cloneInto($.oHash),$.iHash=Z._cloneInto($.iHash),$}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};Mf.create=($,Q)=>new Df($,Q)});function Pf($){return{hash:$,hmac:(Q,...Z)=>Mf($,Q,K10(...Z)),randomBytes:yG}}function vC($,Q){let Z=(X)=>RC({...$,...Pf(X)});return{...Z(Q),create:Z}}var Hf=p(()=>{y50();vY();FD();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */});var g50,YN0,JN0,h50,m50,zN0,qN0,o01,p50,WN0,KN0,n01;var u50=p(()=>{GC();Hf();vZ();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */g50=i4(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),YN0=g50.create(BigInt("-3")),JN0=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),h50=vC({a:YN0,b:JN0,Fp:g50,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},_Z),m50=i4(BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff")),zN0=m50.create(BigInt("-3")),qN0=BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),o01=vC({a:zN0,b:qN0,Fp:m50,n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f"),h:BigInt(1),lowS:!1},w10),p50=i4(BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff")),WN0=p50.create(BigInt("-3")),KN0=BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),n01=vC({a:WN0,b:KN0,Fp:p50,n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650"),h:BigInt(1),lowS:!1,allowedPrivateKeyLengths:[130,131,132]},A10)});var yC;var c50=p(()=>{u50();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */yC=h50});function jf($){let Q=j5("100"),Z=GN0;if(!w5($,Z,Q))return u1($.gasLimit);let X=$.data;if(X.length!==160){if($._debug!==void 0)$._debug(`${Q} failed: invalid input length ${X.length}, expected 160`);return{executionGasUsed:Z,returnValue:new Uint8Array}}let Y=X.subarray(0,32),z=X.subarray(32,64),J=X.subarray(64,96),q=X.subarray(96,128),W=X.subarray(128,160),G=L0(z),U=L0(J),D=L0(q),P=L0(W);if(!(G>BigInt(0)&&G<d50&&U>BigInt(0)&&U<d50)){if($._debug!==void 0)$._debug(`${Q} failed: signature component out of bounds: r=${H0(z)}, s=${H0(J)}`);return{executionGasUsed:Z,returnValue:new Uint8Array}}if(!(D>=BigInt(0)&&D<gC&&P>=BigInt(0)&&P<gC)){if($._debug!==void 0)$._debug(`${Q} failed: public key component out of bounds: qx=${H0(q)}, qy=${H0(W)}`);return{executionGasUsed:Z,returnValue:new Uint8Array}}let H=P*P%gC,N=(D*D*D+VN0*D+ON0)%gC;if(H!==N){if($._debug!==void 0)$._debug(`${Q} failed: point not on curve`);return{executionGasUsed:Z,returnValue:new Uint8Array}}if(D===BigInt(0)&&P===BigInt(0)){if($._debug!==void 0)$._debug(`${Q} failed: public key is point at infinity`);return{executionGasUsed:Z,returnValue:new Uint8Array}}try{let C=yC.ProjectivePoint.fromAffine({x:D,y:P}),L=b1(z,32),B=b1(J,32),E=new Uint8Array(64);E.set(L,0),E.set(B,32);let I=yC.Signature.fromCompact(E);if(yC.verify(I,Y,C.toRawBytes(!1))){if($._debug!==void 0)$._debug(`${Q} succeeded: signature verification passed`);return{executionGasUsed:Z,returnValue:UN0}}else{if($._debug!==void 0)$._debug(`${Q} failed: signature verification failed`);return{executionGasUsed:Z,returnValue:new Uint8Array}}}catch(C){if($._debug!==void 0)$._debug(`${Q} failed: verification error: ${C}`);return{executionGasUsed:Z,returnValue:new Uint8Array}}}var GN0,UN0,d50,gC,VN0,ON0;var l50=p(()=>{Z1();c50();p8();R8();Q9();GN0=BigInt(6900),UN0=new Uint8Array(32).fill(0).map(($,Q)=>Q===31?1:0),d50=BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),gC=BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),VN0=BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),ON0=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b")});var DN0,lY,MN0,n50,hC,PN0,HN0,i50,r50,cG,E6,Cf,Rf,D6,jN0,o50,Nf,RN0=($,Q,Z,X,Y,z)=>{let J=o50(X,Y);({Rx:$,Ry:Q,Rz:Z}=z($,Q,Z,J[0],J[1]));let q=o50(J[0],J[1]);z($,Q,Z,q[0],E6.neg(q[1]))},b9,O11;var a50=p(()=>{GC();vY();Hf();mS();vZ();uS();bZ();FD();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */DN0=BigInt(1),lY=BigInt(2),MN0=BigInt(3),n50=BigInt(6),hC=BigInt("4965661367192848881"),PN0=i$(hC),HN0=n50*hC**lY,i50=i4(BigInt("21888242871839275222246405745257275088548364400416034343698204186575808495617")),r50={c0:BigInt("19485874751759354771024239261021720505790618469301721065564631296452457478373"),c1:BigInt("266929791119991161246907387137283842545076965332900288569378510910307636690")},{Fp:cG,Fp2:E6,Fp6:Cf,Fp4Square:Rf,Fp12:D6}=TC({ORDER:BigInt("21888242871839275222246405745257275088696311157297823662689037894645226208583"),FP2_NONRESIDUE:[BigInt(9),DN0],Fp2mulByB:($)=>E6.mul($,r50),Fp12cyclotomicSquare:({c0:$,c1:Q})=>{let{c0:Z,c1:X,c2:Y}=$,{c0:z,c1:J,c2:q}=Q,{first:W,second:G}=Rf(Z,J),{first:U,second:D}=Rf(z,Y),{first:P,second:H}=Rf(X,q),N=E6.mulByNonresidue(H);return{c0:Cf.create({c0:E6.add(E6.mul(E6.sub(W,Z),lY),W),c1:E6.add(E6.mul(E6.sub(U,X),lY),U),c2:E6.add(E6.mul(E6.sub(P,Y),lY),P)}),c1:Cf.create({c0:E6.add(E6.mul(E6.add(N,z),lY),N),c1:E6.add(E6.mul(E6.add(G,J),lY),G),c2:E6.add(E6.mul(E6.add(D,q),lY),D)})}},Fp12cyclotomicExp($,Q){let Z=D6.ONE;for(let X=PN0-1;X>=0;X--)if(Z=D6._cyclotomicSquare(Z),DC(Q,X))Z=D6.mul(Z,$);return Z},Fp12finalExponentiate:($)=>{let Q=(U)=>D6.conjugate(D6._cyclotomicExp(U,hC)),Z=D6.mul(D6.conjugate($),D6.inv($)),X=D6.mul(D6.frobeniusMap(Z,2),Z),Y=D6._cyclotomicSquare(Q(X)),z=D6.mul(D6._cyclotomicSquare(Y),Y),J=Q(z),q=Q(D6._cyclotomicSquare(J)),W=D6.mul(D6.mul(D6.conjugate(q),J),D6.conjugate(z)),G=D6.mul(W,Y);return D6.mul(D6.frobeniusMap(D6.mul(D6.conjugate(X),G),3),D6.mul(D6.frobeniusMap(W,2),D6.mul(D6.frobeniusMap(G,1),D6.mul(D6.mul(W,J),X))))}}),{G2psi:jN0,psi:o50}=LC(cG,E6,E6.NONRESIDUE),Nf=Object.freeze({DST:"BN254G2_XMD:SHA-256_SVDW_RO_",encodeDST:"BN254G2_XMD:SHA-256_SVDW_RO_",p:cG.ORDER,m:2,k:128,expand:"xmd",hash:_Z}),b9=CC({fields:{Fp:cG,Fp2:E6,Fp6:Cf,Fp12:D6,Fr:i50},G1:{Fp:cG,h:BigInt(1),Gx:BigInt(1),Gy:BigInt(2),a:cG.ZERO,b:MN0,htfDefaults:{...Nf,m:1,DST:"BN254G2_XMD:SHA-256_SVDW_RO_"},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:Q2,fromBytes:Q2,toBytes:Q2,ShortSignature:{fromHex:Q2,toRawBytes:Q2,toHex:Q2}},G2:{Fp:E6,h:BigInt("21888242871839275222246405745257275088844257914179612981679871602714643921549"),Gx:E6.fromBigTuple([BigInt("10857046999023057135944570762232829481370756359578518086990519993285655852781"),BigInt("11559732032986387107991004021392285783925812861821192530917403151452391805634")]),Gy:E6.fromBigTuple([BigInt("8495653923123431417604973247489272438418190587263600148770280649306958101930"),BigInt("4082367875863433681332203403145435568316851327593401208105741076214120093531")]),a:E6.ZERO,b:r50,hEff:BigInt("21888242871839275222246405745257275088844257914179612981679871602714643921549"),htfDefaults:{...Nf},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:($,Q)=>Q.multiplyUnsafe(HN0).equals(jN0($,Q)),mapToCurve:Q2,fromBytes:Q2,toBytes:Q2,Signature:{fromHex:Q2,toRawBytes:Q2,toHex:Q2}},params:{ateLoopSize:hC*n50+lY,r:i50.ORDER,xNegative:!1,twistType:"divisive"},htfDefaults:Nf,hash:_Z,randomBytes:yG,postPrecompute:RN0}),O11=RC({a:BigInt(0),b:BigInt(3),Fp:cG,n:BigInt("21888242871839275222246405745257275088548364400416034343698204186575808495617"),Gx:BigInt(1),Gy:BigInt(2),h:BigInt(1),...Pf(_Z)})});function mC($){if(X1($,e50)===!0)return b9.G1.ProjectivePoint.ZERO;let Q=L0($.subarray(0,b3)),Z=L0($.subarray(b3,iY)),X=b9.G1.ProjectivePoint.fromAffine({x:Q,y:Z});return X.assertValidity(),X}function s50($){let Q=b1(Z5($.x),b3),Z=b1(Z5($.y),b3);return d1(Q,Z)}function FN0($){let Q=b9.fields.Fr.fromBytes($);if(Q>=b9.fields.Fr.ORDER)return Q%b9.fields.Fr.ORDER;return Q}function t50($,Q){if(L0($)>=b9.fields.Fp2.ORDER)throw new U0(U0.errorMessages.BN254_FP_NOT_IN_FIELD);if(L0(Q)>=b9.fields.Fp2.ORDER)throw new U0(U0.errorMessages.BN254_FP_NOT_IN_FIELD);let Z=d1($,Q);return b9.fields.Fp2.fromBytes(Z)}function AN0($){if(X1($,NN0)===!0)return b9.G2.ProjectivePoint.ZERO;let Q=$.subarray(0,b3),Z=$.subarray(b3,b3*2),X=b3*2,Y=$.subarray(X,X+b3),z=$.subarray(X+b3,X+b3*2);for(let G of[Z,Q,z,Y]){let U=L0(G);if(b9.fields.Fp.create(U)!==U)throw new U0(U0.errorMessages.BN254_FP_NOT_IN_FIELD)}let J=t50(Z,Q),q=t50(z,Y),W=b9.G2.ProjectivePoint.fromAffine({x:J,y:q});return W.assertValidity(),W}class dG{add($){let Q=mC($.slice(0,iY)),Z=mC($.slice(iY,iY*2));return s50(Q.add(Z))}mul($){let Q=mC($.slice(0,iY)),Z=FN0($.slice(iY,96));if(Z===Q0)return e50;return s50(Q.multiply(Z))}pairing($){let Z=[];for(let Y=0;Y<$.length/192;Y++){let z=192*Y,J=mC($.subarray(z,z+iY)),q=z+iY,W=AN0($.subarray(q,q+CN0));if(J===b9.G1.ProjectivePoint.ZERO||W===b9.G2.ProjectivePoint.ZERO)continue;Z.push({g1:J,g2:W})}let X=b9.pairingBatch(Z);if(b9.fields.Fp12.eql(X,b9.fields.Fp12.ONE)===!0)return TN0;else return LN0}}var e50,NN0,iY=64,b3=32,CN0=128,LN0,TN0;var $60=p(()=>{Z1();a50();m8();e50=new Uint8Array(64),NN0=new Uint8Array(128),LN0=new Uint8Array(32),TN0=d1(new Uint8Array(31),Q1("0x01"))});var Q60=p(()=>{$60()});function lG($,Q){let Z=new Map;if(Q)for(let X of Q)Z.set($5(X.address.bytes),"function"in X?X.function:void 0);for(let X of Z60){if(Z.has(X.address))continue;if(X.check.type===c8.Hardfork&&$.gteHardfork(X.check.param)||X.check.type===c8.EIP&&$.isActivatedEIP(X.check.param))Z.set(X.address,X.precompile)}return Z}function j5($){if($.length<40)$=$.padStart(40,"0");for(let Q of Z60)if(Q.address===$)return Q.name;return""}var c8,d5="00000000000000000000000000000000000000",EN0,Z60,c11;var R8=p(()=>{$9();Z1();Q10();Z50();X50();Y50();J50();z50();q50();O50();F50();A50();I50();_50();S50();f50();x50();b50();v50();l50();hZ();Q60();c8={EIP:"eip",Hardfork:"hardfork"},EN0=d5+"03",Z60=[{address:d5+"01",check:{type:c8.Hardfork,param:w0.Chainstart},precompile:tS,name:"ECRECOVER (0x01)"},{address:d5+"02",check:{type:c8.Hardfork,param:w0.Chainstart},precompile:Zf,name:"SHA256 (0x02)"},{address:d5+"03",check:{type:c8.Hardfork,param:w0.Chainstart},precompile:Yf,name:"RIPEMD160 (0x03)"},{address:d5+"04",check:{type:c8.Hardfork,param:w0.Chainstart},precompile:Jf,name:"IDENTITY (0x04)"},{address:d5+"05",check:{type:c8.Hardfork,param:w0.Byzantium},precompile:qf,name:"MODEXP (0x05)"},{address:d5+"06",check:{type:c8.Hardfork,param:w0.Byzantium},precompile:Wf,name:"BN254_ADD (0x06)"},{address:d5+"07",check:{type:c8.Hardfork,param:w0.Byzantium},precompile:Kf,name:"BN254_MUL (0x07)"},{address:d5+"08",check:{type:c8.Hardfork,param:w0.Byzantium},precompile:Gf,name:"BN254_PAIRING (0x08)"},{address:d5+"09",check:{type:c8.Hardfork,param:w0.Istanbul},precompile:Uf,name:"BLAKE2f (0x09)"},{address:d5+"0a",check:{type:c8.EIP,param:4844},precompile:MS,name:"KZG_POINT_EVALUATION (0x0a)"},{address:d5+"0b",check:{type:c8.EIP,param:2537},precompile:oS,name:"BLS12_G1ADD (0x0b)"},{address:d5+"0c",check:{type:c8.EIP,param:2537},precompile:nS,name:"BLS12_G1MSM (0x0c)"},{address:d5+"0d",check:{type:c8.EIP,param:2537},precompile:rS,name:"BLS12_G2ADD (0x0d)"},{address:d5+"0e",check:{type:c8.EIP,param:2537},precompile:aS,name:"BLS12_G2MSM (0x0e)"},{address:d5+"0f",check:{type:c8.EIP,param:2537},precompile:sS,name:"BLS12_PAIRING (0x0f)"},{address:d5+"10",check:{type:c8.EIP,param:2537},precompile:Vf,name:"BLS12_MAP_FP_TO_G1 (0x10)"},{address:d5+"11",check:{type:c8.EIP,param:2537},precompile:Of,name:"BLS12_MAP_FP_TO_G2 (0x11)"},{address:"0000000000000000000000000000000000000100",check:{type:c8.EIP,param:7951},precompile:jf,name:"P256VERIFY (0x100)"}],c11={[d5+"01"]:tS,[d5+"02"]:Zf,[EN0]:Yf,[d5+"04"]:Jf,[d5+"05"]:qf,[d5+"06"]:Wf,[d5+"07"]:Kf,[d5+"08"]:Gf,[d5+"09"]:Uf,[d5+"0a"]:MS,[d5+"0b"]:oS,[d5+"0c"]:nS,[d5+"0d"]:rS,[d5+"0e"]:aS,[d5+"0f"]:sS,[d5+"10"]:Vf,[d5+"11"]:Of,"0000000000000000000000000000000000000100":jf}});class Lf{constructor(){this._storage=new Map,this._changeJournal=[],this._indices=[0]}get($,Q){let Z=this._storage.get($.toString());if(!Z)return new Uint8Array(32);let X=Z.get(H0(Q));if(!X)return new Uint8Array(32);return X}put($,Q,Z){if(Q.length!==32)throw n("Transient storage key must be 32 bytes long");if(Z.length>32)throw n("Transient storage value cannot be longer than 32 bytes");let X=$.toString();if(!this._storage.has(X))this._storage.set(X,new Map);let Y=this._storage.get(X),z=H0(Q),J=Y.get(z)??new Uint8Array(32);this._changeJournal.push({addr:X,key:z,prevValue:J}),Y.set(z,Z)}commit(){if(this._indices.length===0)throw n("Nothing to commit");this._indices.pop()}checkpoint(){this._indices.push(this._changeJournal.length)}revert(){let $=this._indices.pop();if(typeof $>"u")throw n("Nothing to revert");for(let Q=this._changeJournal.length-1;Q>=$;Q--){let{key:Z,prevValue:X,addr:Y}=this._changeJournal[Q];this._storage.get(Y).set(Z,X)}this._changeJournal.splice($,this._changeJournal.length-$)}toJSON(){let $={};for(let[Q,Z]of this._storage.entries()){$[Q]={};for(let[X,Y]of Z.entries())$[Q][X]=H0(Y)}return $}clear(){this._storage=new Map,this._changeJournal=[]}}var X60=p(()=>{Z1()});function u1($){return{returnValue:new Uint8Array(0),executionGasUsed:$,exceptionError:new U0(U0.errorMessages.OUT_OF_GAS)}}function _N0($){return{returnValue:new Uint8Array(0),executionGasUsed:$,exceptionError:new U0(U0.errorMessages.CODESTORE_OUT_OF_GAS)}}function Y60($){return{returnValue:new Uint8Array(0),executionGasUsed:$,exceptionError:new U0(U0.errorMessages.INVALID_BYTECODE_RESULT)}}function SN0($){return{returnValue:new Uint8Array(0),executionGasUsed:$,exceptionError:new U0(U0.errorMessages.CODESIZE_EXCEEDS_MAXIMUM)}}function t1($,Q){return{returnValue:new Uint8Array(0),executionGasUsed:Q,exceptionError:$}}function Tf(){return{header:{number:Q0,coinbase:E2(),timestamp:Q0,difficulty:Q0,prevRandao:new Uint8Array(32),gasLimit:Q0,baseFeePerGas:void 0,getBlobGasPrice:()=>{return}}}}class wq{get precompiles(){return this._precompiles}get opcodes(){return this._opcodes}constructor($){if(this.DEBUG=!1,this.common=$.common,this.blockchain=$.blockchain,this.stateManager=$.stateManager,this.common.isActivatedEIP(7864)){let Z=["checkChunkWitnessPresent"];for(let X of Z)if(!(X in this.stateManager))throw n(`State manager used must implement ${X} if Binary Trees (EIP-7864) is activated`)}this.events=new OY.default,this._optsCached=$;let Q=[663,1153,1559,2537,2565,2718,2929,2930,2935,3198,3529,3540,3541,3607,3651,3670,3855,3860,4200,4399,4750,4788,4844,4895,5133,5450,5656,6110,6206,6780,7002,7069,7251,7480,7516,7594,7620,7685,7691,7692,7698,7702,7709,7823,7825,7934,7939,7951];for(let Z of this.common.eips())if(!Q.includes(Z))throw n(`EIP-${Z} is not supported by the EVM`);if(!wq.supportedHardforks.includes(this.common.hardfork()))throw n(`Hardfork ${this.common.hardfork()} not set as supported in supportedHardforks`);if(this.common.updateParams($.params??e00),this.allowUnlimitedContractSize=$.allowUnlimitedContractSize??!1,this.allowUnlimitedInitCodeSize=$.allowUnlimitedInitCodeSize??!1,this._customOpcodes=$.customOpcodes,this._customPrecompiles=$.customPrecompiles,this.journal=new OS(this.stateManager,this.common),this.transientStorage=new Lf,this.common.events.on("hardforkChanged",()=>{this.getActiveOpcodes(),this._precompiles=lG(this.common,this._customPrecompiles)}),this.getActiveOpcodes(),this._precompiles=lG(this.common,this._customPrecompiles),this.common.isActivatedEIP(2537))this._bls=$.bls??new uG,this._bls.init?.();this._bn254=$.bn254,this._emit=async(Z,X)=>{let Y=this.events.listeners(Z);for(let z of Y)if(z.length===2)await new Promise((J)=>{z(X,J)});else z(X)},this.performanceLogger=new s_,this.DEBUG=typeof window>"u"?process?.env?.DEBUG?.includes("ethjs")??!1:!1}getActiveOpcodes(){let $=o00(this.common,this._customOpcodes);return this._opcodes=$.opcodes,this._dynamicGasHandlers=$.dynamicGasHandlers,this._handlers=$.handlers,this._opcodeMap=$.opcodeMap,$.opcodes}async _executeCall($){let{gasLimit:Q,caller:Z}=$;if(this.common.isActivatedEIP(7864)){if($.accessWitness===void 0)throw n("accessWitness is required for EIP-7864");let W=$.value!==Q0;if($.depth===0){let U=$.accessWitness.readAccountHeader(Z);n$(`originAccessGas=${U} waived off for origin at depth=0`);let D=$.accessWitness.readAccountCodeHash($.to);if(W)D+=$.accessWitness.writeAccountBasicData($.to);else D+=$.accessWitness.readAccountBasicData($.to);n$(`destAccessGas=${D} waived off for target at depth=0`)}let G=$.accessWitness.readAccountBasicData($.to);if(W)G+=$.accessWitness.writeAccountBasicData($.to);if(Q-=G,Q<Q0){if(this.DEBUG)n$(`callAccessGas charged(${G}) caused OOG (-> ${Q})`);return $.accessWitness.revert(),{execResult:u1($.gasLimit)}}else{if(this.DEBUG)n$(`callAccessGas used (${G} gas (-> ${Q}))`);$.accessWitness.commit()}}let X=await this.stateManager.getAccount(Z);if(!X)X=new c5;let Y;if(!$.delegatecall)try{await this._reduceSenderBalance(X,$)}catch(W){Y=W}let z=await this.stateManager.getAccount($.to);if(!z){if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){let W=$.accessWitness.readAccountHeader($.to);if(Q-=W,Q<Q0){if(this.DEBUG)n$(`Proof of absence access charged(${W}) caused OOG (-> ${Q})`);return $.accessWitness?.revert(),{execResult:u1($.gasLimit)}}else{if(this.DEBUG)n$(`Proof of absence access used (${W} gas (-> ${Q}))`);$.accessWitness?.commit()}}z=new c5}if(!$.delegatecall)try{await this._addToBalance(z,$)}catch(W){Y=W}await this._loadCode($);let J=!1;if(!$.code||typeof $.code!=="function"&&$.code.length===0){if(J=!0,this.DEBUG)M6("Exit early on no code (CALL)")}if(Y!==void 0){if(J=!0,this.DEBUG)M6("Exit early on value transfer overflowed (CALL)")}if(J)return{execResult:{gasRefund:$.gasRefund,executionGasUsed:$.gasLimit-Q,exceptionError:Y,returnValue:new Uint8Array(0)}};let q;if($.isCompiled){let W,G,U;if(this._optsCached.profiler?.enabled===!0){if(U=$5($.codeAddress.bytes),U=j5(U)??U.slice(20),this.performanceLogger.hasTimer())G=this.performanceLogger.pauseTimer();W=this.performanceLogger.startTimer(U)}if(q=await this.runPrecompile($.code,$.data,Q),this._optsCached.profiler?.enabled===!0){if(this.performanceLogger.stopTimer(W,Number(q.executionGasUsed),"precompiles"),G!==void 0)this.performanceLogger.unpauseTimer(G)}q.gasRefund=$.gasRefund}else{if(this.DEBUG)M6("Start bytecode processing...");q=await this.runInterpreter({...$,gasLimit:Q})}if($.depth===0)this.postMessageCleanup();return q.executionGasUsed+=$.gasLimit-Q,{execResult:q}}async _executeCreate($){let{gasLimit:Q,caller:Z}=$;if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){if($.depth===0){let H=$.accessWitness.readAccountHeader(Z);n$(`originAccessGas=${H} waived off for origin at depth=0`)}}let X=await this.stateManager.getAccount($.caller);if(!X)X=new c5;if(await this._reduceSenderBalance(X,$),this.common.isActivatedEIP(3860)){if($.data.length>Number(this.common.param("maxInitCodeSize"))&&!this.allowUnlimitedInitCodeSize)return{createdAddress:$.to,execResult:{returnValue:new Uint8Array(0),exceptionError:new U0(U0.errorMessages.INITCODE_SIZE_VIOLATION),executionGasUsed:$.gasLimit}}}if($.code=$.data,$.data=$.eofCallData??new Uint8Array,$.to=await this._generateAddress($),this.common.isActivatedEIP(6780))$.createdAddresses.add($.to.toString());if(this.DEBUG)M6(`Generated CREATE contract address ${$.to}`);let Y=await this.stateManager.getAccount($.to);if(!Y)Y=new c5;if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){let H=$.accessWitness.writeAccountBasicData($.to)+$.accessWitness.readAccountCodeHash($.to);if(Q-=H,Q<Q0){if(this.DEBUG)n$(`ContractCreateInit charge(${H}) caused OOG (-> ${Q})`),$.accessWitness?.revert();return{execResult:u1($.gasLimit)}}else{if(this.DEBUG)n$(`ContractCreateInit charged (${H} gas (-> ${Q}))`);$.accessWitness?.commit()}}if(Y.nonce&&Y.nonce>Q0||X1(Y.codeHash,GZ)!==!0||X1(Y.storageRoot,w3)!==!0){if(this.DEBUG)M6("Returning on address collision");return{createdAddress:$.to,execResult:{returnValue:new Uint8Array(0),exceptionError:new U0(U0.errorMessages.CREATE_COLLISION),executionGasUsed:$.gasLimit}}}await this.journal.putAccount($.to,Y),await this.stateManager.clearStorage($.to);let z={address:$.to,code:$.code};if(await this._emit("newContract",z),Y=await this.stateManager.getAccount($.to),!Y)Y=new c5;if(this.common.gteHardfork(w0.SpuriousDragon))Y.nonce+=A1;let J;try{await this._addToBalance(Y,$)}catch(H){J=H}let q=!1;if($.code===void 0||typeof $.code!=="function"&&$.code.length===0){if(q=!0,this.DEBUG)M6("Exit early on no code (CREATE)")}if(J!==void 0){if(q=!0,this.DEBUG)M6("Exit early on value transfer overflowed (CREATE)")}if(q){if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){let H=$.accessWitness.writeAccountHeader($.to);if(Q-=H,Q<Q0){if(this.DEBUG)M6(`ContractCreateComplete access gas (${H}) caused OOG (-> ${Q})`);return $.accessWitness?.revert(),{execResult:u1($.gasLimit)}}else{if(this.DEBUG)M6(`ContractCreateComplete access used (${H}) gas (-> ${Q})`);$.accessWitness?.commit()}}return{createdAddress:$.to,execResult:{executionGasUsed:$.gasLimit-Q,gasRefund:$.gasRefund,exceptionError:J,returnValue:new Uint8Array(0)}}}if(this.DEBUG)M6("Start bytecode processing...");let W=await this.runInterpreter({...$,gasLimit:Q,isCreate:!0});W.executionGasUsed+=$.gasLimit-Q;let G=W.executionGasUsed,U=Q0;if(!W.exceptionError&&!this.common.isActivatedEIP(6800)){if(U=BigInt(W.returnValue.length)*BigInt(this.common.param("createDataGas")),G=G+U,this.DEBUG)n$(`Add return value size fee (${U} to gas used (-> ${G}))`)}let D=!0;if(!W.exceptionError&&this.common.gteHardfork(w0.SpuriousDragon)&&W.returnValue.length>Number(this.common.param("maxCodeSize")))D=!1;let P=!1;if(G<=$.gasLimit&&(this.allowUnlimitedContractSize||D))if(this.common.isActivatedEIP(3541)&&W.returnValue[0]===SY)if(!this.common.isActivatedEIP(3540))W={...W,...Y60($.gasLimit)};else if(!AZ($.code))W={...W,...Y60($.gasLimit)};else W.executionGasUsed=G;else W.executionGasUsed=G;else if(this.common.gteHardfork(w0.Homestead))if(!D){if(this.DEBUG)M6("Code size exceeds maximum code size (>= SpuriousDragon)");W={...W,...SN0($.gasLimit)}}else{if(this.DEBUG)M6("Contract creation: out of gas");$.accessWitness?.revert(),W={...W,...u1($.gasLimit)}}else if(G-U<=$.gasLimit){if(this.DEBUG)M6("Not enough gas to pay the code deposit fee (Frontier)");$.accessWitness?.revert(),W={...W,..._N0(G-U)},P=!0}else{if(this.DEBUG)M6("Contract creation: out of gas");$.accessWitness?.revert(),W={...W,...u1($.gasLimit)}}if(Q=$.gasLimit-W.executionGasUsed,!W.exceptionError&&(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864))){let H=$.accessWitness.writeAccountHeader($.to);if(Q-=H,Q<Q0){if(this.DEBUG)M6(`ContractCreateComplete access gas (${H}) caused OOG (-> ${Q})`);$.accessWitness?.revert(),W={...W,...u1($.gasLimit)}}else M6(`ContractCreateComplete access used (${H}) gas (-> ${Q})`),W.executionGasUsed+=H}if(!W.exceptionError&&W.returnValue!==void 0&&W.returnValue.length!==0){if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){let H=$.accessWitness.writeAccountCodeChunks($.to,0,W.returnValue.length-1);if(Q-=H,Q<Q0){if(this.DEBUG)M6(`byteCodeWrite access gas (${H}) caused OOG (-> ${Q})`);$.accessWitness?.revert(),W={...W,...u1($.gasLimit)}}else M6(`byteCodeWrite access used (${H}) gas (-> ${Q})`),$.accessWitness?.commit(),W.executionGasUsed+=H}if(await this.stateManager.putCode($.to,W.returnValue),this.DEBUG)M6("Code saved on new contract creation")}else if(P){if(!this.common.gteHardfork(w0.Homestead)){let H=await this.stateManager.getAccount($.to);await this.journal.putAccount($.to,H??new c5)}}if($.depth===0)this.postMessageCleanup();return{createdAddress:$.to,execResult:W}}async runInterpreter($,Q={}){let Z=await this.stateManager.getAccount($.to??E2());if(!Z)Z=new c5;let X={address:$.to??E2(),caller:$.caller??E2(),callData:$.data??Uint8Array.from([0]),callValue:$.value??Q0,code:$.code,isStatic:$.isStatic??!1,isCreate:$.isCreate??!1,depth:$.depth??0,gasPrice:this._tx.gasPrice,origin:this._tx.origin??$.caller??E2(),block:this._block??Tf(),contract:Z,codeAddress:$.codeAddress,gasRefund:$.gasRefund,chargeCodeAccesses:$.chargeCodeAccesses,blobVersionedHashes:$.blobVersionedHashes??[],accessWitness:$.accessWitness,createdAddresses:$.createdAddresses},Y=new VS(this,this.stateManager,this.blockchain,X,$.gasLimit,this.journal,this.performanceLogger,this._optsCached.profiler);if($.selfdestruct)Y._result.selfdestruct=$.selfdestruct;if($.createdAddresses)Y._result.createdAddresses=$.createdAddresses;let z=await Y.run($.code,Q),J=Y._result,q=$.gasLimit-z.runState.gasLeft;if(z.exceptionError){if(z.exceptionError.error!==U0.errorMessages.REVERT&&z.exceptionError.error!==U0.errorMessages.INVALID_EOF_FORMAT)q=$.gasLimit;J={...J,logs:[],selfdestruct:new Set,createdAddresses:new Set}}return $.accessWitness?.commit(),{...J,runState:{...z.runState,...J,...Y._env},exceptionError:z.exceptionError,gas:z.runState?.gasLeft,executionGasUsed:q,gasRefund:z.runState.gasRefund,returnValue:J.returnValue??new Uint8Array(0)}}async runCall($){let Q;if(($.depth===0||$.message===void 0)&&this._optsCached.profiler?.enabled===!0)Q=this.performanceLogger.startTimer("Initialization");let Z=$.message,X;if(!Z){this._block=$.block??Tf();let J=$.caller??E2();this._tx={gasPrice:$.gasPrice??Q0,origin:$.origin??J};let q=$.value??Q0;if($.skipBalance===!0){if(X=await this.stateManager.getAccount(J),!X)X=new c5;if(X.balance<q)X.balance=q,await this.journal.putAccount(J,X)}Z=new u$({caller:J,gasLimit:$.gasLimit??BigInt(16777215),to:$.to,value:q,data:$.data,code:$.code,depth:$.depth,isCompiled:$.isCompiled,isStatic:$.isStatic,salt:$.salt,selfdestruct:$.selfdestruct??new Set,createdAddresses:$.createdAddresses??new Set,delegatecall:$.delegatecall,blobVersionedHashes:$.blobVersionedHashes})}if(Z.depth===0){if(!X)X=await this.stateManager.getAccount(Z.caller);if(!X)X=new c5;if(X.nonce++,await this.journal.putAccount(Z.caller,X),this.DEBUG)M6(`Update fromAccount (caller) nonce (-> ${X.nonce}))`)}if(await this._emit("beforeMessage",Z),!Z.to&&this.common.isActivatedEIP(2929))Z.code=Z.data,this.journal.addWarmedAddress((await this._generateAddress(Z)).bytes);if(await this.journal.checkpoint(),this.common.isActivatedEIP(1153))this.transientStorage.checkpoint();if(this.DEBUG)M6("-".repeat(100)),M6("message checkpoint");let Y;if(this.DEBUG){let{caller:J,gasLimit:q,to:W,value:G,delegatecall:U}=Z;M6(`New message caller=${J} gasLimit=${q} to=${W?.toString()??"none"} value=${G} delegatecall=${U?"yes":"no"}`)}if(Z.to){if(this.DEBUG)M6(`Message CALL execution (to: ${Z.to})`);Y=await this._executeCall(Z)}else{if(this.DEBUG)M6("Message CREATE execution (to: undefined)");Y=await this._executeCreate(Z)}if(this.DEBUG){let{executionGasUsed:J,exceptionError:q,returnValue:W}=Y.execResult;M6(`Received message execResult: [ gasUsed=${J} exceptionError=${q?`'${q.error}'`:"none"} returnValue=${v4(W)} gasRefund=${Y.execResult.gasRefund??0} ]`)}let z=Y.execResult.exceptionError;if(z&&z.error!==U0.errorMessages.CODESTORE_OUT_OF_GAS)Y.execResult.selfdestruct=new Set,Y.execResult.createdAddresses=new Set,Y.execResult.gasRefund=Q0;if(z&&!(this.common.hardfork()===w0.Chainstart&&z.error===U0.errorMessages.CODESTORE_OUT_OF_GAS)){if(Y.execResult.logs=[],await this.journal.revert(),this.common.isActivatedEIP(1153))this.transientStorage.revert();if(this.DEBUG)M6("message checkpoint reverted")}else{if(await this.journal.commit(),this.common.isActivatedEIP(1153))this.transientStorage.commit();if(this.DEBUG)M6("message checkpoint committed")}if(await this._emit("afterMessage",Y),Z.depth===0&&this._optsCached.profiler?.enabled===!0)this.performanceLogger.stopTimer(Q,0);return Z.accessWitness?.commit(),Y}async runCode($){this._block=$.block??Tf(),this._tx={gasPrice:$.gasPrice??Q0,origin:$.origin??$.caller??E2()};let Q=new u$({code:$.code,data:$.data,gasLimit:$.gasLimit??BigInt(16777215),to:$.to??E2(),caller:$.caller,value:$.value,depth:$.depth,selfdestruct:$.selfdestruct??new Set,isStatic:$.isStatic,blobVersionedHashes:$.blobVersionedHashes});return this.runInterpreter(Q,{pc:$.pc})}getPrecompile($){return this.precompiles.get($5($.bytes))}runPrecompile($,Q,Z){if(typeof $!=="function")throw n("Invalid precompile");let X={data:Q,gasLimit:Z,common:this.common,_EVM:this,_debug:this.DEBUG?IN0:void 0,stateManager:this.stateManager};return $(X)}async _loadCode($){if(!$.code){let Q=this.getPrecompile($.codeAddress);if(Q)$.code=Q,$.isCompiled=!0;else{if($.code=await this.stateManager.getCode($.codeAddress),this.common.isActivatedEIP(7702)&&X1($.code.slice(0,3),$C)){let Z=new Q6($.code.slice(3,24));if($.code=await this.stateManager.getCode(Z),$.depth===0)this.journal.addAlwaysWarmAddress(Z.toString())}$.isCompiled=!1,$.chargeCodeAccesses=!0}}}async _generateAddress($){let Q;if($.salt)Q=UI($.caller.bytes,$.salt,$.code);else{let Z=await this.stateManager.getAccount($.caller);if(!Z)Z=new c5;let X=Z.nonce-A1;Q=GI($.caller.bytes,Z5(X))}return new Q6(Q)}async _reduceSenderBalance($,Q){if($.balance-=Q.value,$.balance<Q0)throw new U0(U0.errorMessages.INSUFFICIENT_BALANCE);let Z=this.journal.putAccount(Q.caller,$);if(this.DEBUG)M6(`Reduced sender (${Q.caller}) balance (-> ${$.balance})`);return Z}async _addToBalance($,Q){let Z=$.balance+Q.value;if(Z>e8)throw new U0(U0.errorMessages.VALUE_OVERFLOW);if($.balance=Z,await this.journal.putAccount(Q.to,$),this.DEBUG)M6(`Added toAccount (${Q.to}) balance (-> ${$.balance})`)}postMessageCleanup(){if(this.common.isActivatedEIP(1153))this.transientStorage.clear()}shallowCopy(){let $=this.common.copy();$.setHardfork(this.common.hardfork());let Q={...this._optsCached,common:$,stateManager:this.stateManager.shallowCopy()};return Q.stateManager.common=$,new wq(Q)}getPerformanceLogs(){return this.performanceLogger.getLogs()}clearPerformanceLogs(){this.performanceLogger.clear()}}var pC,M6,n$,IN0;var p8=p(()=>{$9();Z1();lR();a_();m8();a00();t00();t_();QS();KS();DS();R8();X60();bG();pC=V2(Y4(),1),M6=pC.default("evm:evm"),n$=pC.default("evm:gas"),IN0=pC.default("evm:precompiles");wq.supportedHardforks=[w0.Chainstart,w0.Homestead,w0.Dao,w0.TangerineWhistle,w0.SpuriousDragon,w0.Byzantium,w0.Constantinople,w0.Petersburg,w0.Istanbul,w0.MuirGlacier,w0.Berlin,w0.London,w0.ArrowGlacier,w0.GrayGlacier,w0.MergeNetsplitBlock,w0.Paris,w0.Shanghai,w0.Cancun,w0.Prague,w0.Osaka,w0.Bpo1,w0.Bpo2,w0.Bpo3,w0.Bpo4,w0.Bpo5]});class Ff{constructor(){this.cache=new Map}set($,Q){this.cache.set($,Q)}get($){return this.cache.get($)}del($){this.cache.delete($)}commit(){let $=Array.from(this.cache.entries());return this.clear(),$}clear(){this.cache.clear()}size(){return this.cache.size}}class Af{constructor(){this.cache=new Map}set($,Q){this.cache.set($,Q)}get($){return this.cache.get($)}del($){this.cache.delete($)}commit(){let $=Array.from(this.cache.entries());return this.clear(),$}clear(){this.cache.clear()}size(){return this.cache.size}}function kN0($,Q){let Z=BigInt($)*BigInt(XG)+BigInt(Q);switch(Z){case BigInt(0):return{type:qG.BasicData};case BigInt(1):return{type:qG.CodeHash};default:if(Z<Zq)throw Error(`No attribute yet stored >=2 and <${Zq}`);if(Z>=Zq&&Z<Xq){let X=Z-BigInt(Zq);return{type:qG.Storage,slot:X}}else if(Z>=Xq&&Z<AO){let X=Number(Z)-Xq;return{type:qG.Code,codeOffset:X*31}}else if(Z>=AO){let X=BigInt(Z-AO);return{type:qG.Storage,slot:X}}else throw Error(`Invalid treeIndex=${$} chunkIndex=${Q} for binary tree access`)}}class wf{constructor($){this.stemCache=new Af,this.chunkCache=new Ff,this.hashFunction=$.hashFunction,this.stems=$.stems??new Map,this.chunks=$.chunks??new Map}readAccountBasicData($){return this.touchAddressOnReadAndComputeGas($,0,fR)}writeAccountBasicData($){return this.touchAddressOnWriteAndComputeGas($,0,fR)}readAccountCodeHash($){return this.touchAddressOnReadAndComputeGas($,0,kR)}writeAccountCodeHash($){return this.touchAddressOnWriteAndComputeGas($,0,kR)}readAccountHeader($){let Q=Q0;return Q+=this.readAccountBasicData($),Q+=this.readAccountCodeHash($),Q}writeAccountHeader($){let Q=Q0;return Q+=this.writeAccountBasicData($),Q+=this.writeAccountCodeHash($),Q}readAccountCodeChunks($,Q,Z){let X=Q0;for(let Y=Math.floor(Q/31);Y<=Math.floor(Z/31);Y++){let{treeIndex:z,subIndex:J}=jI(Y);X+=this.touchAddressOnReadAndComputeGas($,z,J)}return X}writeAccountCodeChunks($,Q,Z){let X=Q0;for(let Y=Math.floor(Q/31);Y<=Math.floor(Z/31);Y++){let{treeIndex:z,subIndex:J}=jI(Y);X+=this.touchAddressOnWriteAndComputeGas($,z,J)}return X}readAccountStorage($,Q){let{treeIndex:Z,subIndex:X}=HI(Q);return this.touchAddressOnReadAndComputeGas($,Z,X)}writeAccountStorage($,Q){let{treeIndex:Z,subIndex:X}=HI(Q);return this.touchAddressOnWriteAndComputeGas($,Z,X)}touchAddressOnWriteAndComputeGas($,Q,Z){return this.touchAddressAndComputeGas($,Q,Z,{isWrite:!0})}touchAddressOnReadAndComputeGas($,Q,Z){return this.touchAddressAndComputeGas($,Q,Z,{isWrite:!1})}touchAddressAndComputeGas($,Q,Z,{isWrite:X}){let Y=Q0,{stemRead:z,stemWrite:J,chunkRead:q,chunkWrite:W,chunkFill:G}=this.touchAddress($,Q,Z,{isWrite:X});if(z===!0)Y+=J60;if(J===!0)Y+=q60;if(q===!0)Y+=z60;if(W===!0)Y+=W60;if(G===!0)Y+=fN0;return iG(`touchAddressAndComputeGas=${Y} address=${$} treeIndex=${Q} subIndex=${Z}`),Y}touchAddress($,Q,Z,{isWrite:X}={}){let Y=!1,z=!1,J=!1,q=!1,W=!1,G=Tr(this.hashFunction,$,Q),U=H0(G),D=this.stemCache.get(U)??this.stems.get(U);if(D===void 0)Y=!0,D={address:$,treeIndex:Q},this.stemCache.set(U,D);let P=Fr(G,typeof Z==="number"?y7(Z):Z),H=H0(P),N=this.chunkCache.get(H)??this.chunks.get(H);if(N===void 0)J=!0,N={},this.chunkCache.set(H,N);if(X===!0){if(D.write!==!0)z=!0,D.write=!0;if(N.write!==!0)q=!0,N.write=!0}return iG(`${H}: isWrite=${X} for stemRead=${Y} stemWrite=${z} chunkRead=${J} chunkWrite=${q} chunkFill=${W}`),{stemRead:Y,stemWrite:z,chunkRead:J,chunkWrite:q,chunkFill:W}}merge($){for(let[Q,Z]of $.chunks.entries()){let X=Q.slice(0,Q.length-2),Y=$.stems.get(X);if(Y===void 0)throw Error(`Internal error: missing stem for the chunkKey=${Q}`);let z=this.stems.get(X);if(z===void 0)this.stems.set(X,Y);else z.write=z.write!==!0?Y.write:!0;let J=this.chunks.get(Q);if(J===void 0)this.chunks.set(Q,Z);else J.write=J.write!==!0?Z.write:!0,J.fill=J.fill!==!0?J.fill:!0}}commit(){let $=this.stemCache.commit();for(let[Z,X]of $)this.stems.set(Z,X);let Q=this.chunkCache.commit();for(let[Z,X]of Q)this.chunks.set(Z,X)}revert(){this.stemCache.clear(),this.chunkCache.clear()}debugWitnessCost(){let $=0,Q=0,Z=0,X=0;for(let[Y,{write:z}]of this.stems.entries())if($++,z===!0)Q++;for(let[Y,{write:z}]of this.chunks.entries())if(Z++,z===!0)X++;iG(`${$} stem reads, totalling ${BigInt($)*J60} gas units`),iG(`${Q} stem writes, totalling ${BigInt(Q)*q60} gas units`),iG(`${Z} chunk reads, totalling ${BigInt(Z)*z60} gas units`),iG(`${X} chunk writes, totalling ${BigInt(X)*W60} gas units`)}*rawAccesses(){for(let $ of this.chunks.keys()){let Q=$.slice(0,$.length-2),Z=this.stems.get(Q);if(Z===void 0)throw Error(`Internal error: missing stem for the chunkKey=${$}`);let{address:X,treeIndex:Y}=Z,z=Number(`0x${$.slice($.length-2)}`);yield{address:X,treeIndex:Y,chunkIndex:z,chunkKey:$}}}*accesses(){for(let $ of this.rawAccesses()){let{address:Q,treeIndex:Z,chunkIndex:X,chunkKey:Y}=$;yield{...kN0(Z,X),address:Q,chunkKey:Y}}}}var K60,iG,J60,z60,q60,W60,fN0;var G60=p(()=>{$9();Z1();K60=V2(Y4(),1),iG=K60.default("evm:binaryTree:aw"),J60=BigInt(1900),z60=BigInt(200),q60=BigInt(3000),W60=BigInt(500),fN0=BigInt(6200)});var U60=()=>{};var xN0;var V60=p(()=>{xN0=V2(Y4(),1)});var bN0;var O60=p(()=>{bN0=V2(Y4(),1)});var vN0;var D60=p(()=>{vN0=V2(Y4(),1)});var M60=()=>{};class _D{constructor($){this.map=new Map,this.getStorage=$}async get($,Q){let Z=$5($.bytes),X=this.map.get(Z);if(X!==void 0){let z=$5(Q),J=X.get(z);if(J!==void 0)return J}let Y=await this.getStorage($,Q);return this.put($,Q,Y),Y}put($,Q,Z){let X=$5($.bytes),Y=this.map.get(X);if(Y===void 0)Y=new Map,this.map.set(X,Y);let z=$5(Q);if(Y.has(z)===!1)Y.set(z,Z)}clear(){this.map=new Map}}var Bf=p(()=>{Z1()});var Ef=p(()=>{V60();M60();O60();Bf();D60();U60()});function yN0($,Q=!1){if(Q)return{h:Number($&uC),l:Number($>>P60&uC)};return{h:Number($>>P60&uC)|0,l:Number($&uC)|0}}function H60($,Q=!1){let Z=$.length,X=new Uint32Array(Z),Y=new Uint32Array(Z);for(let z=0;z<Z;z++){let{h:J,l:q}=yN0($[z],Q);[X[z],Y[z]]=[J,q]}return[X,Y]}var uC,P60,j60=($,Q,Z)=>$<<Z|Q>>>32-Z,R60=($,Q,Z)=>Q<<Z|$>>>32-Z,N60=($,Q,Z)=>Q<<Z-32|$>>>64-Z,C60=($,Q,Z)=>$<<Z-32|Q>>>64-Z;var L60=p(()=>{uC=BigInt(4294967295),P60=BigInt(32)});function gN0($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function cC($){if(!Number.isSafeInteger($)||$<0)throw Error("positive integer expected, got "+$)}function Bq($,...Q){if(!gN0($))throw Error("Uint8Array expected");if(Q.length>0&&!Q.includes($.length))throw Error("Uint8Array expected of length "+Q+", got length="+$.length)}function dC($,Q=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(Q&&$.finished)throw Error("Hash#digest() has already been called")}function If($,Q){Bq($);let Z=Q.outputLen;if($.length<Z)throw Error("digestInto() expects output buffer of length at least "+Z)}function T60($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function _f(...$){for(let Q=0;Q<$.length;Q++)$[Q].fill(0)}function mN0($){return $<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255}function pN0($){for(let Q=0;Q<$.length;Q++)$[Q]=mN0($[Q]);return $}function uN0($){if(typeof $!=="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function ff($){if(typeof $==="string")$=uN0($);return Bq($),$}class kf{}function F60($){let Q=(X)=>$().update(ff(X)).digest(),Z=$();return Q.outputLen=Z.outputLen,Q.blockLen=Z.blockLen,Q.create=()=>$(),Q}var hN0,Sf;var xf=p(()=>{/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */hN0=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();Sf=hN0?($)=>$:pN0});function aN0($,Q=24){let Z=new Uint32Array(10);for(let X=24-Q;X<24;X++){for(let J=0;J<10;J++)Z[J]=$[J]^$[J+10]^$[J+20]^$[J+30]^$[J+40];for(let J=0;J<10;J+=2){let q=(J+8)%10,W=(J+2)%10,G=Z[W],U=Z[W+1],D=A60(G,U,1)^Z[q],P=w60(G,U,1)^Z[q+1];for(let H=0;H<50;H+=10)$[J+H]^=D,$[J+H+1]^=P}let Y=$[2],z=$[3];for(let J=0;J<24;J++){let q=E60[J],W=A60(Y,z,q),G=w60(Y,z,q),U=B60[J];Y=$[U],z=$[U+1],$[U]=W,$[U+1]=G}for(let J=0;J<50;J+=10){for(let q=0;q<10;q++)Z[q]=$[J+q];for(let q=0;q<10;q++)$[J+q]^=~Z[(q+2)%10]&Z[(q+4)%10]}$[0]^=nN0[X],$[1]^=rN0[X]}_f(Z)}var cN0,SD,dN0,lN0,iN0,oN0,B60,E60,I60,_60,nN0,rN0,A60=($,Q,Z)=>Z>32?N60($,Q,Z):j60($,Q,Z),w60=($,Q,Z)=>Z>32?C60($,Q,Z):R60($,Q,Z),bf,lC=($,Q,Z)=>F60(()=>new bf(Q,$,Z)),S60,vf,f60,k60;var x60=p(()=>{L60();xf();cN0=BigInt(0),SD=BigInt(1),dN0=BigInt(2),lN0=BigInt(7),iN0=BigInt(256),oN0=BigInt(113),B60=[],E60=[],I60=[];for(let $=0,Q=SD,Z=1,X=0;$<24;$++){[Z,X]=[X,(2*Z+3*X)%5],B60.push(2*(5*X+Z)),E60.push(($+1)*($+2)/2%64);let Y=cN0;for(let z=0;z<7;z++)if(Q=(Q<<SD^(Q>>lN0)*oN0)%iN0,Q&dN0)Y^=SD<<(SD<<BigInt(z))-SD;I60.push(Y)}_60=H60(I60,!0),nN0=_60[0],rN0=_60[1];bf=class bf extends kf{constructor($,Q,Z,X=!1,Y=24){super();if(this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=$,this.suffix=Q,this.outputLen=Z,this.enableXOF=X,this.rounds=Y,cC(Z),!(0<$&&$<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=T60(this.state)}clone(){return this._cloneInto()}keccak(){Sf(this.state32),aN0(this.state32,this.rounds),Sf(this.state32),this.posOut=0,this.pos=0}update($){dC(this),$=ff($),Bq($);let{blockLen:Q,state:Z}=this,X=$.length;for(let Y=0;Y<X;){let z=Math.min(Q-this.pos,X-Y);for(let J=0;J<z;J++)Z[this.pos++]^=$[Y++];if(this.pos===Q)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:$,suffix:Q,pos:Z,blockLen:X}=this;if($[Z]^=Q,(Q&128)!==0&&Z===X-1)this.keccak();$[X-1]^=128,this.keccak()}writeInto($){dC(this,!1),Bq($),this.finish();let Q=this.state,{blockLen:Z}=this;for(let X=0,Y=$.length;X<Y;){if(this.posOut>=Z)this.keccak();let z=Math.min(Z-this.posOut,Y-X);$.set(Q.subarray(this.posOut,this.posOut+z),X),this.posOut+=z,X+=z}return $}xofInto($){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto($)}xof($){return cC($),this.xofInto(new Uint8Array($))}digestInto($){if(If($,this),this.finished)throw Error("digest() was already called");return this.writeInto($),this.destroy(),$}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,_f(this.state)}_cloneInto($){let{blockLen:Q,suffix:Z,outputLen:X,rounds:Y,enableXOF:z}=this;return $||($=new bf(Q,Z,X,z,Y)),$.state32.set(this.state32),$.pos=this.pos,$.posOut=this.posOut,$.finished=this.finished,$.rounds=Y,$.suffix=Z,$.outputLen=X,$.enableXOF=z,$.destroyed=this.destroyed,$}};S60=(()=>lC(1,144,28))(),vf=(()=>lC(1,136,32))(),f60=(()=>lC(1,104,48))(),k60=(()=>lC(1,72,64))()});var b60;var v60=p(()=>{xf();b60=Bq});function fD($){return(Q)=>{return b60(Q),$(Q)}}var y60=p(()=>{v60()});var u51,iC,c51,d51;var yf=p(()=>{x60();y60();u51=fD(S60),iC=(()=>{let $=fD(vf);return $.create=vf.create,$})(),c51=fD(f60),d51=fD(k60)});async function oC($,Q,Z){let X=await $.getAccount(Q)??new c5;if(X.nonce=Z.nonce??X.nonce,X.balance=Z.balance??X.balance,X.storageRoot=Z.storageRoot??X.storageRoot,X.codeHash=Z.codeHash??X.codeHash,X.codeSize=Z.codeSize??X.codeSize,$._debug!==void 0)for(let[Y,z]of Object.entries(Z))$._debug(`modifyAccountFields address=${Q.toString()} ${Y}=${z instanceof Uint8Array?H0(z):z} `);await $.putAccount(Q,X)}var gf=p(()=>{Z1()});class nC{constructor($={}){this.DEBUG=!1,this.DEBUG=typeof window>"u"?process?.env?.DEBUG?.includes("ethjs")??!1:!1,this._debug=g60.default("statemanager:merkle"),this.common=$.common??new y4({chain:p7}),this._checkpointCount=0,this._trie=$.trie??new B$({useKeyHashing:!0,common:this.common}),this._storageTries={},this.keccakFunction=$.common?.customCrypto.keccak256??iC,this.originalStorageCache=new _D(this.getStorage.bind(this)),this._prefixCodeHashes=$.prefixCodeHashes??!0,this._prefixStorageTrieKeys=$.prefixStorageTrieKeys??!1,this._caches=$.caches}async getAccount($){let Q=this._caches?.account?.get($);if(Q!==void 0)return Q.accountRLP!==void 0?ER(Q.accountRLP):void 0;let Z=await this._trie.get($.bytes),X=Z!==null?ER(Z):void 0;if(this.DEBUG)this._debug(`Get account ${$} from DB (${X?"exists":"non-existent"})`);return this._caches?.account?.put($,X),X}async putAccount($,Q){if(this.DEBUG)this._debug(`Save account address=${$} nonce=${Q?.nonce} balance=${Q?.balance} contract=${Q&&Q.isContract()?"yes":"no"} empty=${Q&&Q.isEmpty()?"yes":"no"}`);if(this._caches?.account===void 0){let Z=this._trie;if(Q!==void 0)await Z.put($.bytes,Q.serialize());else await Z.del($.bytes)}else if(Q!==void 0)this._caches.account?.put($,Q);else this._caches.account?.del($)}async modifyAccountFields($,Q){await oC(this,$,Q)}async deleteAccount($){if(this.DEBUG)this._debug(`Delete account ${$}`);if(this._caches?.deleteAccount($),this._caches?.account===void 0)await this._trie.del($.bytes)}async putCode($,Q){let Z=this.keccakFunction(Q);if(this._caches?.code!==void 0)this._caches.code.put($,Q);else{let X=this._prefixCodeHashes?d1(hf,Z):Z;await this._getCodeDB().put(X,Q)}if(this.DEBUG)this._debug(`Update codeHash (-> ${v4(Z)}) for account ${$}`);if(await this.getAccount($)===void 0)await this.putAccount($,new c5);await this.modifyAccountFields($,{codeHash:Z})}async getCode($){let Q=this._caches?.code?.get($);if(Q!==void 0)return Q.code??new Uint8Array(0);let Z=await this.getAccount($);if(!Z)return new Uint8Array(0);if(!Z.isContract())return new Uint8Array(0);let X=this._prefixCodeHashes?d1(hf,Z.codeHash):Z.codeHash,Y=await this._trie.database().get(X)??new Uint8Array(0);return this._caches?.code?.put($,Y),Y}async getCodeSize($){return(await this.getCode($)).length}_getStorageTrie($,Q){let Z=$ instanceof Uint8Array?$:this.keccakFunction($.bytes),X=$5(Z),Y=this._storageTries[X];if(Y===void 0){let z=this._prefixStorageTrieKeys?Z.slice(0,7):void 0;if(Y=this._trie.shallowCopy(!1,{keyPrefix:z}),Q!==void 0)Y.root(Q.storageRoot);else Y.root(Y.EMPTY_TRIE_ROOT);Y.flushCheckpoints(),this._storageTries[X]=Y}return Y}_getAccountTrie(){return this._trie}_getCodeDB(){return this._trie.database()}async getStorage($,Q){if(Q.length!==32)throw n("Storage key must be 32 bytes long");let Z=this._caches?.storage?.get($,Q);if(Z!==void 0)return I1.decode(Z??new Uint8Array(0));let X=await this.getAccount($);if(!X)return new Uint8Array;let z=await this._getStorageTrie($,X).get(Q);return this._caches?.storage?.put($,Q,z??Q1("0x80")),I1.decode(z??new Uint8Array(0))}async _modifyContractStorage($,Q,Z){return new Promise(async(X)=>{let Y=this._getStorageTrie($,Q);Z(Y,async()=>{let z=$5($.bytes);this._storageTries[z]=Y,Q.storageRoot=Y.root(),await this.putAccount($,Q),X()})})}async _writeContractStorage($,Q,Z,X){await this._modifyContractStorage($,Q,async(Y,z)=>{if(X instanceof Uint8Array&&X.length){let J=I1.encode(X);if(this.DEBUG)this._debug(`Update contract storage for account ${$} to ${v4(X)}`);await Y.put(Z,J)}else{if(this.DEBUG)this._debug("Delete contract storage for account");await Y.del(Z)}z()})}async putStorage($,Q,Z){if(Q.length!==32)throw n("Storage key must be 32 bytes long");if(Z.length>32)throw n("Storage value cannot be longer than 32 bytes");let X=await this.getAccount($);if(!X)throw n("putStorage() called on non-existing account");Z=g7(Z),this._caches?.storage?.put($,Q,I1.encode(Z))??await this._writeContractStorage($,X,Q,Z)}async clearStorage($){let Q=await this.getAccount($);if(!Q)Q=new c5;this._caches?.storage?.clearStorage($),await this._modifyContractStorage($,Q,(Z,X)=>{Z.root(Z.EMPTY_TRIE_ROOT),X()})}async checkpoint(){this._trie.checkpoint(),this._caches?.checkpoint(),this._checkpointCount++}async commit(){if(await this._trie.commit(),this._caches?.commit(),this._checkpointCount--,this._checkpointCount===0)await this.flush(),this.originalStorageCache.clear();if(this.DEBUG)this._debug("state checkpoint committed")}async revert(){if(await this._trie.revert(),this._caches?.revert(),this._storageTries={},this._checkpointCount--,this._checkpointCount===0)await this.flush(),this.originalStorageCache.clear()}async flush(){let $=this._caches?.code?.flush()??[];for(let X of $){let Y=M9(`0x${X[0]}`),z=X[1].code;if(z===void 0)continue;let J=this.keccakFunction(z),q=this._prefixCodeHashes?d1(hf,J):J;if(await this._getCodeDB().put(q,z),await this.getAccount(Y)===void 0)await this.putAccount(Y,new c5);await this.modifyAccountFields(Y,{codeHash:J})}let Q=this._caches?.storage?.flush()??[];for(let X of Q){let Y=M9(`0x${X[0]}`),z=X[1],J=v7(z),q=X[2],W=I1.decode(q??new Uint8Array(0)),G=await this.getAccount(Y);if(G)await this._writeContractStorage(Y,G,J,W)}let Z=this._caches?.account?.flush()??[];for(let X of Z){let Y=X[0],z=v7(Y),J=X[1];if(J.accountRLP===void 0)await this._trie.del(z);else await this._trie.put(z,J.accountRLP)}}async getStateRoot(){return await this.flush(),this._trie.root()}async setStateRoot($,Q=!0){if(await this.flush(),!X1($,this._trie.EMPTY_TRIE_ROOT)){if(!await this._trie.checkRoot($))throw n("State trie does not contain state root")}if(this._trie.root($),Q)this._caches?.clear();this._storageTries={}}async dumpStorage($){await this.flush();let Q=await this.getAccount($);if(!Q)throw n("dumpStorage f() can only be called for an existing account");return this._getStorageTrie($,Q).getValueMap().then((X)=>{return X.values})}async dumpStorageRange($,Q,Z){if(!Number.isSafeInteger(Z)||Z<0)throw n("Limit is not a proper uint.");await this.flush();let X=await this.getAccount($);if(!X)throw n("Account does not exist.");return this._getStorageTrie($,X).getValueMap(Q,Z).then((z)=>{let J=z.values,q=Object.create(null);for(let W of Object.keys(J)){let G=J[W];q[W]={key:null,value:G}}return{storage:q,nextKey:z.nextKey}})}async generateCanonicalGenesis($){if(this._checkpointCount!==0)throw n("Cannot create genesis state with uncommitted checkpoints");if(this.DEBUG)this._debug("Save genesis state into the state trie");let Q=Object.keys($);for(let Z of Q){let X=M9(Z),Y=$[Z];if(!Array.isArray(Y)){let z=UZ({balance:Y});await this.putAccount(X,z)}else{let[z,J,q,W]=Y,G=UZ({balance:z,nonce:W});if(await this.putAccount(X,G),J!==void 0)await this.putCode(X,F1(J));if(q!==void 0)for(let[U,D]of q)await this.putStorage(X,F1(U),F1(D))}}await this.flush()}async hasStateRoot($){return this._trie.checkRoot($)}shallowCopy($=!0){let Q=this.common.copy();Q.setHardfork(this.common.hardfork());let Z=!$?this._trie._opts.cacheSize:0,X=this._trie.shallowCopy(!1,{cacheSize:Z}),Y=this._prefixCodeHashes,z=this._prefixStorageTrieKeys;return new nC({common:Q,trie:X,prefixStorageTrieKeys:z,prefixCodeHashes:Y,caches:this._caches?.shallowCopy($)})}clearCaches(){this._caches?.clear()}getAppliedKey($){return this._trie.appliedKey($)}}var g60,hf;var h60=p(()=>{$9();qN();j8();Z1();yf();Ef();gf();g60=V2(Y4(),1),hf=A3("c")});var m60=()=>{};var p60=()=>{};var u60=p(()=>{m60();p60()});var sN0,K61;var c60=p(()=>{j8();Z1();sN0=V2(Y4(),1),K61=I1.encode(new c5().serialize()).slice(2)});class rC{constructor($={}){this.accountStack=[],this.codeStack=[],this.storageStack=[],this.checkpointSync(),this.originalStorageCache=new _D(this.getStorage.bind(this)),this.common=$.common}topAccountStack(){return this.accountStack[this.accountStack.length-1]}topCodeStack(){return this.codeStack[this.codeStack.length-1]}topStorageStack(){return this.storageStack[this.storageStack.length-1]}checkpointSync(){let $=new Map(this.topAccountStack());for(let[Q,Z]of $){let X=Z!==void 0?Object.assign(Object.create(Object.getPrototypeOf(Z)),Z):void 0;$.set(Q,X)}this.accountStack.push($),this.codeStack.push(new Map(this.topCodeStack())),this.storageStack.push(new Map(this.topStorageStack()))}async getAccount($){return this.topAccountStack().get($.toString())}async putAccount($,Q){this.topAccountStack().set($.toString(),Q)}async deleteAccount($){this.topAccountStack().set($.toString(),void 0)}async modifyAccountFields($,Q){await oC(this,$,Q)}async getCode($){return this.topCodeStack().get($.toString())??new Uint8Array(0)}async putCode($,Q){if(this.topCodeStack().set($.toString(),Q),await this.getAccount($)===void 0)await this.putAccount($,new c5);await this.modifyAccountFields($,{codeHash:(this.common?.customCrypto.keccak256??iC)(Q)})}async getCodeSize($){return(await this.getCode($)).length}async getStorage($,Q){return this.topStorageStack().get(`${$.toString()}_${H0(Q)}`)??new Uint8Array(0)}async putStorage($,Q,Z){this.topStorageStack().set(`${$.toString()}_${H0(Q)}`,Z)}async clearStorage(){}async checkpoint(){this.checkpointSync()}async commit(){this.accountStack.splice(-2,1),this.codeStack.splice(-2,1),this.storageStack.splice(-2,1)}async revert(){this.accountStack.pop(),this.codeStack.pop(),this.storageStack.pop()}async flush(){}clearCaches(){}shallowCopy(){let $=new rC({common:this.common});for(let Q=0;Q<this.accountStack.length;Q++)$.accountStack.push(new Map(this.accountStack[Q])),$.codeStack.push(new Map(this.codeStack[Q])),$.storageStack.push(new Map(this.storageStack[Q]));return $}getStateRoot(){throw n("Method not implemented.")}setStateRoot(){throw n("Method not implemented.")}hasStateRoot(){throw n("Method not implemented.")}}var d60=p(()=>{Z1();yf();Bf();gf()});var tN0;var l60=p(()=>{tN0=V2(Y4(),1)});var i60=()=>{};var mf=p(()=>{Ef();h60();u60();c60();d60();l60();i60()});async function aC($){let Q=$??{};if(Q.bn254=new dG,Q.common===void 0)Q.common=new y4({chain:p7});if(Q.blockchain===void 0)Q.blockchain=new xG;if(Q.stateManager===void 0)Q.stateManager=new rC;return new wq(Q)}var o60=p(()=>{$9();mf();kD();R8();bG()});var kD=p(()=>{p8();R8();bG();t_();G60();o60();DS()});function pf($,Q){if($.length===0)return;let Z=0,X=0,Y=0,z=["tag","calls","avgTimePerCall","totalTime","staticGasUsed","dynamicGasUsed","gasUsed","staticGas","millionGasPerSecond","blocksPerSlot"],J=["tag","calls","ms/call","total (ms)","sgas","dgas","total (s+d)","static fee","Mgas/s","BpS"];function q(_,f){return" "+_.toString().padStart(f," ")+" "}function W(_){return q(_,0).length-2}let G=[];for(let _ of $){let f=0;G[f]=Math.max(G[f]??0,W(J[f]));for(let x of z)if(_[x]!==void 0)switch(G[f]=Math.max(G[f]??0,W(_[x])),f++,x){case"calls":Z+=_[x];break;case"totalTime":X+=_[x];break;case"gasUsed":Y+=_[x];break}}for(let _ in G)G[_]=Math.max(G[_]??0,W(J[_]));let U=G.reduce((_,f)=>_+f,0)+G.length*3-1,H=2500,N=Y/X,C=Math.round(N)/1000,L=Math.round(N/H*1000)/1000;console.log("+== "+Q+" ==+"),console.log(`+== Calls: ${Z}, Total time: ${Math.round(X*1000)/1000}ms, Total gas: ${Y}, MGas/s: ${C}, Blocks per Slot (BpS): ${L} ==+`);let B="|"+"-".repeat(U)+"|";console.log(B);let E="";for(let _ in G)E+="|"+q(J[_],G[_]);E+="|",console.log(E);for(let _ of $){let f="",x=0;for(let g of z)if(_[g]!==void 0)f+="|"+q(_[g],G[x]),x++;f+="|",console.log(f)}let I="+"+"-".repeat(U)+"+";console.log(I)}var n60;var uf=p(()=>{n60={1:{maxRefundQuotient:2,blobGasPerBlob:0,maxBlobGasPerBlock:0,targetBlobGasPerBlock:0,minerReward:"5000000000000000000"},609:{minerReward:"3000000000000000000"},1013:{minerReward:"2000000000000000000"},1559:{elasticityMultiplier:2,initialBaseFee:1e9},2935:{historyStorageAddress:"0x0000F90827F1C53A10CB7A02335B175320002935",historyServeWindow:8191,systemAddress:"0xfffffffffffffffffffffffffffffffffffffffe"},3529:{maxRefundQuotient:5},4844:{targetBlobGasPerBlock:393216,blobGasPerBlob:131072,maxBlobGasPerBlock:786432,blobGasPriceUpdateFraction:3338477,minBlobGas:1},4788:{historicalRootsLength:8191},7002:{systemAddress:"0xfffffffffffffffffffffffffffffffffffffffe",withdrawalRequestPredeployAddress:"0x00000961EF480EB55E80D19AD83579A64C007002"},7251:{systemAddress:"0xfffffffffffffffffffffffffffffffffffffffe",consolidationRequestPredeployAddress:"0x0000BBDDC7CE488642FB579F8B00F3A590007251"},7691:{targetBlobGasPerBlock:786432,maxBlobGasPerBlock:1179648,blobGasPriceUpdateFraction:5007716}}});class cf{constructor($={}){this._isInitialized=!1,this.DEBUG=!1,this.common=$.common,this.common.updateParams($.params??n60),this.stateManager=$.stateManager,this.blockchain=$.blockchain,this.evm=$.evm,this.events=new OY.default,this._emit=async(Q,Z)=>{let X=this.events.listeners(Q);for(let Y of X)if(Y.length===2)await new Promise((z)=>{Y(Z,z)});else Y(Z)},this._opts=$,this._setHardfork=$.setHardfork??!1,this.DEBUG=typeof window>"u"?process?.env?.DEBUG?.includes("ethjs")??!1:!1}async shallowCopy($=!0){let Q=this.common.copy();Q.setHardfork(this.common.hardfork());let Z=this.blockchain.shallowCopy(),X=this.stateManager.shallowCopy($),Y={...this.evm._optsCached,common:this._opts.evmOpts?.common?.copy()??Q,blockchain:this._opts.evmOpts?.blockchain?.shallowCopy()??Z,stateManager:this._opts.evmOpts?.stateManager?.shallowCopy($)??X},z=await aC(Y);return sC({stateManager:X,blockchain:this.blockchain,common:Q,evm:z,setHardfork:this._setHardfork,profilerOpts:this._opts.profilerOpts})}errorStr(){let $="";try{$=this.common.hardfork()}catch{$="error"}return`vm hf=${$}`}}var r60=p(()=>{kD();lR();df();uf()});async function sC($={}){let Q=$.stateManager!==void 0;if($.common===void 0)$.common=new y4({chain:p7});if($.stateManager===void 0)$.stateManager=new nC({common:$.common});if($.blockchain===void 0)$.blockchain=new xG;if($.profilerOpts!==void 0){let Z=$.profilerOpts;if(Z.reportAfterBlock===!0&&Z.reportAfterTx===!0)throw n("Cannot have `reportProfilerAfterBlock` and `reportProfilerAfterTx` set to `true` at the same time")}if($.evm!==void 0&&$.evmOpts!==void 0)throw n("the evm and evmOpts options cannot be used in conjunction");if($.evm===void 0){let Z=!1;if($.profilerOpts?.reportAfterBlock===!0||$.profilerOpts?.reportAfterTx===!0)Z=!0;let X=$.evmOpts??{};$.evm=await aC({common:$.common,stateManager:$.stateManager,blockchain:$.blockchain,profiler:{enabled:Z},...X})}if($.activatePrecompiles===!0&&!Q){await $.evm.journal.checkpoint();for(let[Z]of lG($.common)){let X=new Q6(v7(Z)),Y=await $.evm.stateManager.getAccount(X);if(Y===void 0){Y=new c5;let z=UZ({balance:1,storageRoot:Y.storageRoot});await $.evm.stateManager.putAccount(X,z)}}await $.evm.journal.commit()}return new cf($)}var df=p(()=>{$9();kD();mf();Z1();r60()});async function rf($,Q){if($._opts.profilerOpts?.reportAfterTx===!0)y3=!0;if(y3){let X=`Profiler run - Tx ${H0(Q.tx.hash())}`;console.log(X),console.time(X80),console.time(Z80)}if(Q.skipHardForkValidation!==!0&&Q.block!==void 0){if(Q.tx.common.hardfork()!==Q.block.common.hardfork())Q.tx.common.setHardfork(Q.block.common.hardfork());if(Q.block.common.hardfork()!==$.common.hardfork()){let X=d7("block has a different hardfork than the vm",$,Q.block,Q.tx);throw n(X)}}let Z=Q.block?.header.gasLimit??v3.gasLimit;if(Q.skipBlockGasLimitValidation!==!0&&Z<Q.tx.gasLimit){let X=d7("tx has a higher gas limit than the block",$,Q.block,Q.tx);throw n(X)}if(await $.evm.journal.cleanup(),Q.reportAccessList===!0)$.evm.journal.startReportingAccessList();if(Q.reportPreimages===!0)$.evm.journal.startReportingPreimages();if(await $.evm.journal.checkpoint(),$.DEBUG)X9("-".repeat(100)),X9("tx checkpoint");if(Q.tx.supports(_8.EIP2718TypedTransaction)&&$.common.isActivatedEIP(2718)){if(!$.common.isActivatedEIP(2930)){await $.evm.journal.revert();let Y=d7("Cannot run transaction: EIP 2930 is not activated.",$,Q.block,Q.tx);throw n(Y)}if(Q.tx.supports(_8.EIP1559FeeMarket)&&!$.common.isActivatedEIP(1559)){await $.evm.journal.revert();let Y=d7("Cannot run transaction: EIP 1559 is not activated.",$,Q.block,Q.tx);throw n(Y)}let X=Q.tx;for(let Y of X.accessList){let[z,J]=Y,q=$5(z);$.evm.journal.addAlwaysWarmAddress(q,!0);for(let W of J)$.evm.journal.addAlwaysWarmSlot(q,$5(W),!0)}}try{let X=await $C0($,Q);if(await $.evm.journal.commit(),$.DEBUG)X9("tx checkpoint committed");return X}catch(X){if(await $.evm.journal.revert(),$.DEBUG)X9("tx checkpoint reverted");throw X}finally{if($.common.isActivatedEIP(2929))$.evm.journal.cleanJournal();if($.evm.stateManager.originalStorageCache.clear(),y3){console.timeEnd(Z80);let X=$.evm.getPerformanceLogs();if(X.precompiles.length===0&&X.opcodes.length===0)console.log("No precompile or opcode execution.");pf(X.precompiles,"Precompile performance"),pf(X.opcodes,"Opcodes performance"),$.evm.clearPerformanceLogs()}}}async function $C0($,Q){let Z=$.stateManager,X,Y;if($.common.isActivatedEIP(7864)){if($.evm.binaryTreeAccessWitness===void 0)throw Error("Binary tree access witness needed for execution of binary tree blocks");if(!("verifyBinaryPostState"in $.stateManager))throw n("Binary tree State Manager needed for execution of binary tree blocks");X=$.evm.binaryTreeAccessWitness,Y=new wf({hashFunction:$.evm.binaryTreeAccessWitness.hashFunction})}let{tx:z,block:J}=Q;await $._emit("beforeTx",z);let q=z.getSenderAddress();if($.DEBUG)X9(`New tx run hash=${Q.tx.isSigned()?H0(Q.tx.hash()):"unsigned"} sender=${q}`);if($.common.isActivatedEIP(2929)){let S=$.evm.precompiles;for(let[y]of S.entries())$.evm.journal.addAlwaysWarmAddress(y);if($.evm.journal.addAlwaysWarmAddress(q.toString()),z.to!==void 0)$.evm.journal.addAlwaysWarmAddress($5(z.to.bytes));if($.common.isActivatedEIP(3651)){let y=J?.header.coinbase.bytes??v3.coinbase.bytes;$.evm.journal.addAlwaysWarmAddress($5(y))}}let W=z.getIntrinsicGas(),G=Q0;if($.common.isActivatedEIP(7623)){let S=0;for(let y=0;y<z.data.length;y++)S+=z.data[y]===0?1:4;G=z.common.param("txGas")+z.common.param("totalCostFloorPerToken")*BigInt(S)}let U=z.gasLimit,D=TR(W,G);if(U<D){let S=d7(`tx gas limit ${Number(U)} is lower than the minimum gas limit of ${Number(D)}`,$,J,z);throw n(S)}if(U-=W,$.DEBUG)lf(`Subtracting base fee (${W}) from gasLimit (-> ${U})`);if($.common.isActivatedEIP(1559)){let S="maxFeePerGas"in z?z.maxFeePerGas:z.gasPrice,y=J?.header.baseFeePerGas??v3.baseFeePerGas;if(S<y){let u=d7(`Transaction's ${"maxFeePerGas"in z?"maxFeePerGas":"gasPrice"} (${S}) is less than the block's baseFeePerGas (${y})`,$,J,z);throw n(u)}}if(y3)console.timeEnd(X80),console.time(a60);let P=await Z.getAccount(q);if(P===void 0)P=new c5;let{nonce:H,balance:N}=P;if($.DEBUG)X9(`Sender's pre-tx balance is ${N}`);if($.common.isActivatedEIP(3607)&&!X1(P.codeHash,GZ))switch($.common.isActivatedEIP(7702)){case!0:{let y=await Z.getCode(q);if(X1(y.slice(0,3),of))break}default:{let y=d7("invalid sender address, address is not EOA (EIP-3607)",$,J,z);throw n(y)}}let C=J?.header.baseFeePerGas??v3.baseFeePerGas,L=z.getUpfrontCost(C);if(N<L)if(Q.skipBalance===!0&&P.balance<L){if(z.supports(_8.EIP1559FeeMarket)===!1)P.balance=L,await $.evm.journal.putAccount(q,P)}else{let S=d7(`sender doesn't have enough funds to send tx. The upfront cost is: ${L} and the sender's account (${q}) only has: ${N}`,$,J,z);throw n(S)}let B=z.value,E=Q0,I=Q0;if(z.supports(_8.EIP1559FeeMarket))B+=z.gasLimit*z.maxFeePerGas;if(gO(z)){if(!$.common.isActivatedEIP(4844)){let S=d7("blob transactions are only valid with EIP4844 active",$,J,z);throw n(S)}if(I=$.common.param("blobGasPerBlob")*BigInt(z.numBlobs()),B+=I*z.maxFeePerBlobGas,E=Q.block?.header.getBlobGasPrice()??v3.getBlobGasPrice(),z.maxFeePerBlobGas<E){let S=d7(`Transaction's maxFeePerBlobGas ${z.maxFeePerBlobGas}) is less than block blobGasPrice (${E}).`,$,J,z);throw n(S)}}if(P.balance<B)if(Q.skipBalance===!0&&P.balance<B)P.balance=B,await $.evm.journal.putAccount(q,P);else{let S=d7(`sender doesn't have enough funds to send tx. The max cost is: ${B} and the sender's account (${q}) only has: ${N}`,$,J,z);throw n(S)}if(Q.skipNonce!==!0){if(H!==z.nonce){let S=d7(`the tx doesn't have the correct nonce. account has nonce of: ${H} tx has nonce of: ${z.nonce}`,$,J,z);throw n(S)}}let _,f;if(z.supports(_8.EIP1559FeeMarket)){let S=J?.header.baseFeePerGas??v3.baseFeePerGas;f=z.getEffectivePriorityFee(S),_=f+S}else if(_=z.gasPrice,$.common.isActivatedEIP(1559)){let S=J?.header.baseFeePerGas??v3.baseFeePerGas;f=z.gasPrice-S}let x;if(gO(z))x=z.blobVersionedHashes;let g=z.gasLimit*_,h=I*E;if(P.balance-=g,P.balance-=h,Q.skipBalance===!0&&P.balance<Q0)P.balance=Q0;await $.evm.journal.putAccount(q,P);let v=Q0;if(z.supports(_8.EIP7702EOACode)){let S=z.authorizationList;for(let y=0;y<S.length;y++){let u=S[y],c=u[0],o=L0(c);if(o!==Q0&&o!==$.common.chainId())continue;let z0=u[1],e=u[2];if(L0(e)>=KZ)continue;let s=u[5];if(L0(s)>CO)continue;if(L0(u[3])>A1)continue;let t;try{t=Cr(u)}catch{continue}let Z0=await $.stateManager.getAccount(t),N0=Z0!==void 0,i=Z0??new c5;if($.evm.journal.addAlwaysWarmAddress(t.toString()),i.isContract()){let l=await $.stateManager.getCode(t);if(!X1(l.slice(0,3),of))continue}if(q.toString()===t.toString()){if(i.nonce+A1!==L0(e))continue}else if(i.nonce!==L0(e))continue;if(N0){let l=z.common.param("perEmptyAccountCost")-z.common.param("perAuthBaseGas");v+=l}if(i.nonce++,await $.evm.journal.putAccount(t,i),X1(z0,new Uint8Array(20)))await $.stateManager.putCode(t,new Uint8Array);else{let l=d1(of,z0);await $.stateManager.putCode(t,l)}}}if($.DEBUG)X9(`Update fromAccount (caller) balance (-> ${P.balance}))`);let b;if(y3)console.timeEnd(a60),b=performance.now();let{value:m,data:K,to:M}=z;if($.DEBUG)X9(`Running tx=${z.isSigned()?H0(z.hash()):"unsigned"} with caller=${q} gasLimit=${U} to=${M?.toString()??"none"} value=${m} data=${v4(K)}`);let j=await $.evm.runCall({block:J,gasPrice:_,caller:q,gasLimit:U,to:M,value:m,data:K,blobVersionedHashes:x,accessWitness:Y});if($.common.isActivatedEIP(7864))X?.merge(Y);if(y3)console.log(`${eN0}: ${performance.now()-b}ms`),console.log("[ For execution details see table output ]"),console.time(s60);if($.DEBUG)X9(`Update fromAccount (caller) nonce (-> ${P.nonce})`);if($.DEBUG){let{executionGasUsed:S,exceptionError:y,returnValue:u}=j.execResult;X9("-".repeat(100)),X9(`Received tx execResult: [ executionGasUsed=${S} exceptionError=${y!==void 0?`'${y.error}'`:"none"} returnValue=${v4(u)} gasRefund=${j.gasRefund??0} ]`)}if(j.bloom=QC0(j.execResult.logs,$.common),$.DEBUG)X9(`Generated tx bloom with logs=${j.execResult.logs?.length}`);if(j.totalGasSpent=j.execResult.executionGasUsed+W,$.DEBUG)lf(`tx add baseFee ${W} to totalGasSpent (-> ${j.totalGasSpent})`);if(gO(z))j.blobGasUsed=I;v+=j.execResult.gasRefund??Q0,j.gasRefund=v;let O=$.common.param("maxRefundQuotient");if(v!==Q0){let S=j.totalGasSpent/O;if(v=v<S?v:S,j.totalGasSpent-=v,$.DEBUG)X9(`Subtract tx gasRefund (${v}) from totalGasSpent (-> ${j.totalGasSpent})`)}else if($.DEBUG)X9("No tx gasRefund");if($.common.isActivatedEIP(7623)){if(j.totalGasSpent<G){if($.DEBUG)lf(`tx floorCost ${G} is higher than to total execution gas spent (-> ${j.totalGasSpent}), setting floor as gas paid`);j.gasRefund=Q0,j.totalGasSpent=G}}if(j.amountSpent=j.totalGasSpent*_,P=await Z.getAccount(q),P===void 0)P=new c5;let R=j.totalGasSpent*_,F=g-R;if(P.balance+=F,await $.evm.journal.putAccount(q,P),$.DEBUG)X9(`Refunded txCostDiff (${F}) to fromAccount (caller) balance (-> ${P.balance})`);let A;if($.common.consensusType()===DY.ProofOfAuthority)A=g_(J?.header??v3);else A=J?.header.coinbase??v3.coinbase;let T=await Z.getAccount(A);if(T===void 0)T=new c5;if(j.minerValue=$.common.isActivatedEIP(1559)?j.totalGasSpent*f:j.amountSpent,T.balance+=j.minerValue,await $.evm.journal.putAccount(A,T),$.DEBUG)X9(`tx update miner account (${A}) balance (-> ${T.balance})`);if(y3)console.timeEnd(s60),console.time(t60);if(j.execResult.selfdestruct!==void 0)for(let S of j.execResult.selfdestruct){let y=new Q6(Q1(S));if($.common.isActivatedEIP(6780)){if(!j.execResult.createdAddresses.has(y.toString()))continue}if(await $.evm.journal.deleteAccount(y),$.DEBUG)X9(`tx selfdestruct on address=${y}`)}if(y3)console.timeEnd(t60),console.time(e60);if(Q.reportAccessList===!0&&$.common.isActivatedEIP(2930)){let S=[];for(let[y,u]of $.evm.journal.accessList){let c={address:`0x${y}`,storageKeys:[]};for(let o of u)c.storageKeys.push(`0x${o}`);S.push(c)}j.accessList=S}if(y3)console.timeEnd(e60),console.time($80);if(Q.reportPreimages===!0&&$.evm.journal.preimages!==void 0)j.preimages=$.evm.journal.preimages;if(await $.evm.journal.cleanup(),Z.originalStorageCache.clear(),y3)console.timeEnd($80),console.time(Q80);let w=(Q.blockGasUsed??J?.header.gasUsed??v3.gasUsed)+j.totalGasSpent;if(j.receipt=await ZC0($,z,j,w,I,E),y3)console.timeEnd(Q80);let k={transaction:z,...j};if(await $._emit("afterTx",k),$.DEBUG)X9(`tx run finished hash=${Q.tx.isSigned()?H0(Q.tx.hash()):"unsigned"} sender=${q}`);return j}function QC0($,Q){let Z=new _I(void 0,Q);if($)for(let X=0;X<$.length;X++){let Y=$[X];Z.add(Y[0]);let z=Y[1];for(let J=0;J<z.length;J++)Z.add(z[J])}return Z}async function ZC0($,Q,Z,X,Y,z){let J={cumulativeBlockGasUsed:X,bitvector:Z.bloom.bitvector,logs:Z.execResult.logs??[]},q;if($.DEBUG)X9(`Generate tx receipt transactionType=${Q.type} cumulativeBlockGasUsed=${X} bitvector=${v4(J.bitvector)} (${J.bitvector.length} bytes) logs=${J.logs.length}`);if(!Q.supports(_8.EIP2718TypedTransaction))if($.common.gteHardfork(w0.Byzantium))q={status:Z.execResult.exceptionError!==void 0?0:1,...J};else q={stateRoot:await $.stateManager.getStateRoot(),...J};else if(gO(Q))q={blobGasUsed:Y,blobGasPrice:z,status:Z.execResult.exceptionError?0:1,...J};else q={status:Z.execResult.exceptionError?0:1,...J};return q}function d7($,Q,Z,X){let Y=Z??v3,z="errorStr"in Y?Y.errorStr():"block",J="errorStr"in X?X.errorStr():"tx";return`${$} (${Q.errorStr()} -> ${z} -> ${J})`}var nf,X9,lf,v3,y3=!1,X80="EVM journal init, address/slot warming, fee validation",a60="Balance/Nonce checks and update",eN0="Execution",s60="Logs, gas usage, account/miner balances",t60="Accounts clean up",e60="Access list label",$80="Journal/cache cleanup",Q80="Receipts",Z80="Entire tx",of;var Y80=p(()=>{AG();$9();kD();FG();Z1();Ga();nf=V2(Y4(),1),X9=nf.default("vm:tx"),lf=nf.default("vm:tx:gas"),v3=ZD(),of=new Uint8Array([239,1,0])});var J80=()=>{};var z80=p(()=>{Y80();df();uf();J80()});var q80,W80,af=1n,K80;var G80=p(()=>{q80=1000000000000n*10n**18n,W80=1000000000n*10n**18n,K80=[{symbol:"USDC",name:"USD Coin",decimals:18},{symbol:"WETH",name:"Wrapped Ether",decimals:18},{symbol:"USDT",name:"Tether USD",decimals:18}]});var U80,V80;var O80=p(()=>{U80={components:[{name:"offdeltas",type:"int256[]"},{name:"tokenIds",type:"uint256[]"},{name:"transformers",type:"tuple[]",components:[{name:"transformerAddress",type:"address"},{name:"encodedBatch",type:"bytes"},{name:"allowances",type:"tuple[]",components:[{name:"deltaIndex",type:"uint256"},{name:"rightAllowance",type:"uint256"},{name:"leftAllowance",type:"uint256"}]}]}],name:"proofBody",type:"tuple"},V80={components:[{name:"payment",type:"tuple[]",components:[{name:"deltaIndex",type:"uint256"},{name:"amount",type:"int256"},{name:"revealedUntilBlock",type:"uint256"},{name:"hash",type:"bytes32"}]},{name:"swap",type:"tuple[]",components:[{name:"ownerIsLeft",type:"bool"},{name:"addDeltaIndex",type:"uint256"},{name:"addAmount",type:"uint256"},{name:"subDeltaIndex",type:"uint256"},{name:"subAmount",type:"uint256"}]}],name:"batch",type:"tuple"}});var Eq={};x1(Eq,{setDeltaTransformerAddress:()=>XC0,getDisputeDelayBlocks:()=>WC0,getDeltaTransformerAddress:()=>xD,encodeDisputeMessage:()=>D80,createSettlementHashWithNonce:()=>tf,createDisputeProofHash:()=>zC0,buildInitialDisputeProof:()=>JC0,buildAccountProofBody:()=>bD,DEFAULT_DISPUTE_CONFIG:()=>qC0});function XC0($){sf=$,console.log(`[ProofBuilder] DeltaTransformer address set: ${$}`)}function xD(){return sf}function bD($){let Q=Array.from($.deltas.entries()).sort((C,L)=>C[0]-L[0]),Z=[],X=[];for(let[C,L]of Q)Z.push(C),X.push(L.offdelta);let Y=[],z=[],J=Array.from($.locks.entries()).sort((C,L)=>C[0].localeCompare(L[0]));for(let[C,L]of J){let B=Z.indexOf(L.tokenId);if(B===-1){console.warn(`[ProofBuilder] Lock ${C} references unknown tokenId ${L.tokenId}`);continue}let E=L.senderIsLeft?L.amount:-L.amount;Y.push({deltaIndex:B,amount:E,revealedUntilBlock:L.revealBeforeHeight,hash:L.hashlock})}let q=Array.from($.swapOffers.entries()).sort((C,L)=>C[0].localeCompare(L[0]));for(let[C,L]of q){let B=Z.indexOf(L.giveTokenId),E=Z.indexOf(L.wantTokenId);if(B===-1||E===-1){console.warn(`[ProofBuilder] Swap ${C} references unknown tokenId`);continue}z.push({ownerIsLeft:L.makerIsLeft,addDeltaIndex:B,addAmount:L.giveAmount,subDeltaIndex:E,subAmount:L.wantAmount})}let W={payments:Y,swaps:z},G=[];if(Y.length>0||z.length>0)G.push({transformerAddress:sf,batch:W,allowances:[]});let U={offdeltas:X,tokenIds:Z,transformers:G},D=YC0(U),H=M0.AbiCoder.defaultAbiCoder().encode([U80],[D]),N=M0.keccak256(H);return{runtimeProofBody:U,proofBodyStruct:D,encodedProofBody:H,proofBodyHash:N}}function YC0($){let Q=M0.AbiCoder.defaultAbiCoder(),Z=$.transformers.map((X)=>{let Y={payment:X.batch.payments.map((J)=>({deltaIndex:BigInt(J.deltaIndex),amount:J.amount,revealedUntilBlock:BigInt(J.revealedUntilBlock),hash:J.hash})),swap:X.batch.swaps.map((J)=>({ownerIsLeft:J.ownerIsLeft,addDeltaIndex:BigInt(J.addDeltaIndex),addAmount:J.addAmount,subDeltaIndex:BigInt(J.subDeltaIndex),subAmount:J.subAmount}))},z=Q.encode([V80],[Y]);return{transformerAddress:X.transformerAddress,encodedBatch:z,allowances:X.allowances.map((J)=>({deltaIndex:BigInt(J.deltaIndex),rightAllowance:J.rightAllowance,leftAllowance:J.leftAllowance}))}});return{offdeltas:$.offdeltas,tokenIds:$.tokenIds.map((X)=>BigInt(X)),transformers:Z}}function JC0($,Q,Z="0x"){let{proofBodyHash:X}=bD($);return{counterentity:$.proofHeader.toEntity,cooperativeNonce:$.proofHeader.cooperativeNonce,disputeNonce:$.proofHeader.disputeNonce,proofbodyHash:X,sig:Q,initialArguments:Z}}function D80($,Q,Z){let X=M0.AbiCoder.defaultAbiCoder(),Y=$.leftEntity,z=$.rightEntity,J=M0.solidityPacked(["bytes32","bytes32"],[Y,z]),q=1;return X.encode(["uint256","address","bytes","uint256","uint256","bytes32"],[1,Z,J,$.proofHeader.cooperativeNonce,$.proofHeader.disputeNonce,Q])}function zC0($,Q,Z){let X=D80($,Q,Z);return M0.keccak256(X)}function WC0($){return $*10}function tf($,Q,Z,X){let Y=M0.solidityPacked(["bytes32","bytes32"],[$.leftEntity,$.rightEntity]),z=0,q=M0.AbiCoder.defaultAbiCoder().encode(["uint256","address","bytes","uint256","tuple(uint256,int256,int256,int256,int256)[]","uint256[]","tuple(bytes32,bytes32,uint256,uint256,uint256)[]"],[0,Z,Y,X,Q.map((W)=>[W.tokenId,W.leftDiff,W.rightDiff,W.collateralDiff,W.ondeltaDiff]),[],[]]);return M0.keccak256(q)}var sf="0x0000000000000000000000000000000000000000",qC0;var g3=p(()=>{A6();O80();qC0={leftDisputeDelay:2,rightDisputeDelay:2}});var M80={};x1(M80,{BrowserVMProvider:()=>Y2});var KC0=200000000n,tC=3,Y2;var eC=p(()=>{z80();AG();FG();Z1();$9();A6();H8();h8();G80();Y2=class Y2{vm;common;accountAddress=null;depositoryAddress=null;entityProviderAddress=null;deltaTransformerAddress=null;deployerPrivKey;deployerAddress;nonce=0n;accountArtifact=null;depositoryArtifact=null;entityProviderArtifact=null;deltaTransformerArtifact=null;erc20Artifact=null;depositoryInterface=null;entityProviderInterface=null;accountInterface=null;deltaTransformerInterface=null;erc20Interface=null;tokenRegistry=new Map;fundedAddresses=new Set;initialized=!1;quietLogs=!1;blockHeight=0;blockHash="0x0000000000000000000000000000000000000000000000000000000000000000";prevBlockHash="0x0000000000000000000000000000000000000000000000000000000000000000";blockTimestamp=0;activeBlock=null;eventCallbacks=new Set;txReceipts=new Map;constructor(){this.deployerPrivKey=Q1("0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80"),this.deployerAddress=OI(this.deployerPrivKey)}setQuietLogs($){this.quietLogs=$}log(...$){if(!this.quietLogs)console.log(...$)}warn(...$){if(!this.quietLogs)console.warn(...$)}async init(){if(this.initialized){console.log("[BrowserVM] Already initialized, skipping");return}if(typeof window<"u"){let[Z,X,Y,z,J]=await Promise.all([fetch("/contracts/Account.json"),fetch("/contracts/Depository.json"),fetch("/contracts/EntityProvider.json"),fetch("/contracts/DeltaTransformer.json"),fetch("/contracts/ERC20Mock.json")]);if(!Z.ok)throw Error(`Failed to load Account artifact: ${Z.status}`);if(!X.ok)throw Error(`Failed to load Depository artifact: ${X.status}`);if(!Y.ok)throw Error(`Failed to load EntityProvider artifact: ${Y.status}`);if(!z.ok)throw Error(`Failed to load DeltaTransformer artifact: ${z.status}`);if(!J.ok)throw Error(`Failed to load ERC20Mock artifact: ${J.status}`);this.accountArtifact=await Z.json(),this.depositoryArtifact=await X.json(),this.entityProviderArtifact=await Y.json(),this.deltaTransformerArtifact=await z.json(),this.erc20Artifact=await J.json()}else{let Z=await import("fs"),X=await Promise.resolve().then(() => (UE(),GE)),Y=X.join(process.cwd(),"jurisdictions/artifacts/contracts");this.accountArtifact=JSON.parse(Z.readFileSync(X.join(Y,"Account.sol/Account.json"),"utf-8")),this.depositoryArtifact=JSON.parse(Z.readFileSync(X.join(Y,"Depository.sol/Depository.json"),"utf-8")),this.entityProviderArtifact=JSON.parse(Z.readFileSync(X.join(Y,"EntityProvider.sol/EntityProvider.json"),"utf-8")),this.deltaTransformerArtifact=JSON.parse(Z.readFileSync(X.join(Y,"DeltaTransformer.sol/DeltaTransformer.json"),"utf-8")),this.erc20Artifact=JSON.parse(Z.readFileSync(X.join(Y,"ERC20Mock.sol/ERC20Mock.json"),"utf-8")),console.log("[BrowserVM] Loaded artifacts from filesystem (CLI mode)")}this.depositoryInterface=new M0.Interface(this.depositoryArtifact.abi),this.entityProviderInterface=new M0.Interface(this.entityProviderArtifact.abi),this.accountInterface=new M0.Interface(this.accountArtifact.abi),this.deltaTransformerInterface=new M0.Interface(this.deltaTransformerArtifact.abi),this.erc20Interface=new M0.Interface(this.erc20Artifact.abi),console.log("[BrowserVM] Loaded all contract artifacts (including Account library and DeltaTransformer)");let $=Na({chainId:1337},p7);this.vm=await sC({common:$,evmOpts:{allowUnlimitedContractSize:!0}}),this.common=$,console.log("[BrowserVM] Unlimited contract size enabled for simnet");let Q=UZ({nonce:0n,balance:10000000000000000000000n});await this.vm.stateManager.putAccount(this.deployerAddress,Q),console.log(`[BrowserVM] Deployer funded: ${this.deployerAddress.toString()}`),await this.deployAccount(),await this.deployEntityProvider(),await this.deployDepository(),await this.deployDeltaTransformer(),await this.deployDefaultTokens(),this.initialized=!0,console.log("[BrowserVM] All contracts deployed successfully")}async reset(){console.log("[BrowserVM] Resetting to fresh state..."),this.initialized=!1,this.vm=null,this.common=null,this.accountAddress=null,this.depositoryAddress=null,this.entityProviderAddress=null,this.deltaTransformerAddress=null,this.nonce=0n,this.tokenRegistry.clear(),this.fundedAddresses.clear(),await this.init(),console.log("[BrowserVM] Reset complete - fresh contracts deployed")}async deployAccount(){console.log("[BrowserVM] Deploying Account library...");let $=await this.getCurrentNonce(),Q=S8({gasLimit:100000000n,gasPrice:10n,data:this.accountArtifact.bytecode,nonce:$},{common:this.common}).sign(this.deployerPrivKey),Z=await this.runTxInBlock(Q);if(Z.execResult.exceptionError)throw console.error("[BrowserVM] Account deployment failed:",Z.execResult.exceptionError),Error(`Account deployment failed: ${Z.execResult.exceptionError}`);this.accountAddress=Z.createdAddress,console.log(`[BrowserVM] Account library deployed at: ${this.accountAddress?.toString()??"null"}`)}async deployDepository(){if(console.log("[BrowserVM] Deploying Depository with Account library linking + EntityProvider..."),!this.accountAddress)throw Error("Account library must be deployed first");if(!this.entityProviderAddress)throw Error("EntityProvider must be deployed before Depository");let $=this.depositoryArtifact.bytecode,Q=this.accountAddress.toString().slice(2).toLowerCase(),Z=/__\$[a-f0-9]{34}\$__/g,X=$.match(Z);if(X&&X.length>0)console.log(`[BrowserVM] Found ${X.length} library placeholders, linking Account at ${Q}`),$=$.replace(Z,Q);else console.warn("[BrowserVM] No library placeholders found in Depository bytecode");let{ethers:Y}=await Promise.resolve().then(() => (A6(),VB)),z=Y.AbiCoder.defaultAbiCoder().encode(["address"],[this.entityProviderAddress.toString()]),J=$+z.slice(2),q=await this.getCurrentNonce(),W=S8({gasLimit:100000000n,gasPrice:10n,data:J,nonce:q},{common:this.common}).sign(this.deployerPrivKey),G=await this.runTxInBlock(W);if(G.execResult.exceptionError)throw console.error("[BrowserVM] Depository deployment failed:",G.execResult.exceptionError),Error(`Depository deployment failed: ${G.execResult.exceptionError}`);if(this.depositoryAddress=G.createdAddress,console.log(`[BrowserVM] Depository deployed at: ${this.depositoryAddress?.toString()??"null"}`),console.log(`[BrowserVM] Gas used: ${G.totalGasSpent}`),(await this.vm.stateManager.getCode(this.depositoryAddress)).length===0)throw Error("Depository deployment failed - no code at address")}async deployEntityProvider(){console.log("[BrowserVM] Deploying EntityProvider...");let $=await this.getCurrentNonce(),Q=S8({gasLimit:100000000n,gasPrice:10n,data:this.entityProviderArtifact.bytecode,nonce:$},{common:this.common}).sign(this.deployerPrivKey),Z=await this.runTxInBlock(Q);if(Z.execResult.exceptionError)throw console.error("[BrowserVM] EntityProvider deployment failed:",Z.execResult.exceptionError),Error(`EntityProvider deployment failed: ${Z.execResult.exceptionError}`);this.entityProviderAddress=Z.createdAddress,console.log(`[BrowserVM] EntityProvider deployed at: ${this.entityProviderAddress?.toString()??"null"}`)}async deployDeltaTransformer(){console.log("[BrowserVM] Deploying DeltaTransformer...");let $=await this.getCurrentNonce(),Q=S8({gasLimit:100000000n,gasPrice:10n,data:this.deltaTransformerArtifact.bytecode,nonce:$},{common:this.common}).sign(this.deployerPrivKey),Z=await this.runTxInBlock(Q);if(Z.execResult.exceptionError)throw console.error("[BrowserVM] DeltaTransformer deployment failed:",Z.execResult.exceptionError),Error(`DeltaTransformer deployment failed: ${Z.execResult.exceptionError}`);this.deltaTransformerAddress=Z.createdAddress,console.log(`[BrowserVM] DeltaTransformer deployed at: ${this.deltaTransformerAddress?.toString()??"null"}`);let{setDeltaTransformerAddress:X}=await Promise.resolve().then(() => (g3(),Eq));X(this.deltaTransformerAddress?.toString()??"")}getDeltaTransformerAddress(){if(!this.deltaTransformerAddress)throw Error("DeltaTransformer not deployed");return this.deltaTransformerAddress.toString()}getTokenRegistry(){return Array.from(this.tokenRegistry.values())}getTokenAddress($){return this.tokenRegistry.get($)?.address||null}getTokenId($){let Q=this.tokenRegistry.get($)?.tokenId;return typeof Q==="number"?Q:null}async fundSignerWallet($,Q=W80){if(!$)return;if(!this.tokenRegistry.size)await this.deployDefaultTokens();let Z=$.toLowerCase();await this.ensureEthBalance($,1000n*10n**18n);for(let X of this.tokenRegistry.values()){let Y=await this.getErc20Balance(X.address,$);if(Y>=Q)continue;let z=Q-Y;await this.transferErc20(this.deployerPrivKey,X.address,$,z)}this.fundedAddresses.add(Z),console.log(`[BrowserVM] Faucet funded ${$.slice(0,10)}... with ${Q} of ${this.tokenRegistry.size} tokens`)}async deployDefaultTokens(){if(this.tokenRegistry.size>0)return;if(!this.erc20Artifact||!this.erc20Interface)throw Error("ERC20 artifact not loaded");if(!this.depositoryAddress||!this.depositoryInterface)throw Error("Depository not deployed");for(let $ of K80){let Q=await this.deployErc20Token($.name,$.symbol,q80),Z=await this.registerErc20Token(Q);this.tokenRegistry.set($.symbol,{address:Q,name:$.name,symbol:$.symbol,decimals:$.decimals,tokenId:Z}),console.log(`[BrowserVM] Token registered: ${$.symbol} id=${Z} addr=${Q.slice(0,10)}...`)}}async deployErc20Token($,Q,Z){let X=await this.getCurrentNonce(),z=M0.AbiCoder.defaultAbiCoder().encode(["string","string","uint256"],[$,Q,Z]),J=`${this.erc20Artifact.bytecode}${z.slice(2)}`,q=S8({gasLimit:5000000n,gasPrice:10n,data:J,nonce:X},{common:this.common}).sign(this.deployerPrivKey),W=await this.runTxInBlock(q);if(W.execResult.exceptionError)throw Error(`ERC20 deployment failed: ${W.execResult.exceptionError}`);return W.createdAddress.toString()}async registerErc20Token($){let Q=await this.packTokenReference(0,$,0);await this.approveErc20(this.deployerPrivKey,$,this.depositoryAddress.toString(),af);let Z=this.depositoryInterface.encodeFunctionData("externalTokenToReserve",[{entity:M0.ZeroHash,contractAddress:$,externalTokenId:0,tokenType:0,internalTokenId:0,amount:af}]),X=await this.getCurrentNonce(),Y=S8({to:this.depositoryAddress,gasLimit:1000000n,gasPrice:10n,data:Q1(Z),nonce:X},{common:this.common}).sign(this.deployerPrivKey),z=await this.runTxInBlock(Y);if(z.execResult.exceptionError)throw Error(`externalTokenToReserve failed: ${z.execResult.exceptionError}`);return await this.lookupTokenId(Q)}async packTokenReference($,Q,Z){let X=this.depositoryInterface.encodeFunctionData("packTokenReference",[$,Q,Z]),Y=await this.vm.evm.runCall({to:this.depositoryAddress,caller:this.deployerAddress,data:Q1(X),gasLimit:100000n});if(Y.execResult.exceptionError)throw Error(`packTokenReference failed: ${Y.execResult.exceptionError}`);return this.depositoryInterface.decodeFunctionResult("packTokenReference",Y.execResult.returnValue)[0]}async lookupTokenId($){let Q=this.depositoryInterface.encodeFunctionData("tokenToId",[$]),Z=await this.vm.evm.runCall({to:this.depositoryAddress,caller:this.deployerAddress,data:Q1(Q),gasLimit:100000n});if(Z.execResult.exceptionError)throw Error(`tokenToId failed: ${Z.execResult.exceptionError}`);let X=this.depositoryInterface.decodeFunctionResult("tokenToId",Z.execResult.returnValue);return Number(X[0])}async getErc20Balance($,Q){let Z=this.erc20Interface.encodeFunctionData("balanceOf",[Q]),X=await this.vm.evm.runCall({to:M9($),caller:this.deployerAddress,data:Q1(Z),gasLimit:100000n});if(X.execResult.exceptionError)return 0n;return this.erc20Interface.decodeFunctionResult("balanceOf",X.execResult.returnValue)[0]}async getEthBalance($){return(await this.vm.stateManager.getAccount(M9($)))?.balance||0n}async getErc20Allowance($,Q,Z){let X=this.erc20Interface.encodeFunctionData("allowance",[Q,Z]),Y=await this.vm.evm.runCall({to:M9($),caller:this.deployerAddress,data:Q1(X),gasLimit:100000n});if(Y.execResult.exceptionError)return 0n;return this.erc20Interface.decodeFunctionResult("allowance",Y.execResult.returnValue)[0]}async approveErc20($,Q,Z,X){let Y=this.erc20Interface.encodeFunctionData("approve",[Z,X]);return(await this.executeTx({to:Q,data:Y,gasLimit:200000n},$)).txHash}async transferErc20($,Q,Z,X){let Y=this.erc20Interface.encodeFunctionData("transfer",[Z,X]);return(await this.executeTx({to:Q,data:Y,gasLimit:200000n},$)).txHash}async externalTokenToReserve($,Q,Z,X,Y){let z=Y?.tokenType??0,J=Y?.externalTokenId??0n,q=typeof J==="bigint"?J:BigInt(J),W=Y?.internalTokenId??0,G=this.depositoryInterface.encodeFunctionData("externalTokenToReserve",[{entity:Q,contractAddress:Z,externalTokenId:q,tokenType:z,internalTokenId:W,amount:X}]);return(await this.executeTx({to:this.depositoryAddress.toString(),data:G,gasLimit:1000000n},$,{emitEvents:!0})).events||[]}async executeTx($,Q=this.deployerPrivKey,Z){let X=OI(Q),Y=await this.getNonceForAddress(X),z=$.to?M9($.to):void 0,J={gasLimit:$.gasLimit??1000000n,gasPrice:10n,data:Q1($.data||"0x"),nonce:Y,value:$.value??0n};if(z)J.to=z;let q=S8(J,{common:this.common}).sign(Q),W=await this.runTxInBlock(q);if(W.execResult.exceptionError){let U=W.execResult.exceptionError,D=U?.error||JSON.stringify(U);if(W.execResult.logs&&W.execResult.logs.length>0){console.log("[BrowserVM] Events before revert:",W.execResult.logs.length);let P=this.parseLogs(W.execResult.logs);for(let H of P)console.log(`   Event: ${H.name}`,H.args)}throw Error(`executeTx failed: ${D}`)}let G=H0(q.hash());if(Z?.emitEvents){let U=this.emitEvents(W.execResult.logs||[]);return{txHash:G,events:U}}return{txHash:G}}async executeSignedTx($){let Q=Q1($),Z=yN(Q,{common:this.common}),X=await this.runTxInBlock(Z);if(X.execResult.exceptionError){let U=X.execResult.exceptionError,D=typeof U==="object"?U.error||U.message||JSON.stringify(U):String(U);throw Error(`executeSignedTx failed: ${D}`)}let Y=H0(Z.hash()),z=Z.getSenderAddress().toString(),J=Z.to?.toString()??null,q=!J&&X.createdAddress?X.createdAddress.toString():null,G=(X.execResult.logs||[]).map((U,D)=>{let P=U[0],H;if(typeof P==="string")H=P;else if(P instanceof Uint8Array)H=H0(P);else if(typeof P.toBytes==="function")H=H0(P.toBytes());else H=P.toString();return{address:H,topics:U[1].map((N)=>H0(N)),data:H0(U[2]),blockNumber:this.blockHeight,transactionHash:Y,logIndex:D}});return this.txReceipts.set(Y,{transactionHash:Y,blockNumber:this.blockHeight,blockHash:this.blockHash,from:z,to:J,contractAddress:q,status:1,logs:G}),Y}async getNonceForAddress($){return(await this.vm.stateManager.getAccount($))?.nonce||0n}async ensureEthBalance($,Q){let Z=M9($),X=await this.vm.stateManager.getAccount(Z);if((X?.balance||0n)>=Q)return;let z=X||UZ({nonce:0n,balance:Q});z.balance=Q,await this.vm.stateManager.putAccount(Z,z)}async getReserves($,Q){if(!this.depositoryAddress||!this.depositoryInterface)throw Error("Depository not deployed");let Z=this.depositoryInterface.encodeFunctionData("_reserves",[$,Q]),X=await this.vm.evm.runCall({to:this.depositoryAddress,caller:this.deployerAddress,data:Q1(Z),gasLimit:100000n});if(X.execResult.exceptionError)return console.error("[BrowserVM] getReserves failed:",X.execResult.exceptionError),0n;let Y=X.execResult.returnValue;if(!Y||Y.length===0)return 0n;return this.depositoryInterface.decodeFunctionResult("_reserves",Y)[0]}async getTokensLength(){if(!this.depositoryAddress||!this.depositoryInterface)throw Error("Depository not deployed");let $=this.depositoryInterface.encodeFunctionData("getTokensLength",[]),Q=await this.vm.evm.runCall({to:this.depositoryAddress,caller:this.deployerAddress,data:Q1($),gasLimit:100000n});if(Q.execResult.exceptionError)return console.error("[BrowserVM] getTokensLength failed:",Q.execResult.exceptionError),0;let Z=Q.execResult.returnValue;if(Z.length===0)return 0;let X=this.depositoryInterface.decodeFunctionResult("getTokensLength",Z);return Number(X[0])}async getCurrentNonce(){return(await this.vm.stateManager.getAccount(this.deployerAddress))?.nonce||0n}async debugFundReserves($,Q,Z){if(!this.depositoryAddress||!this.depositoryInterface)throw Error("Depository not deployed");let X=this.depositoryInterface.encodeFunctionData("mintToReserve",[$,Q,Z]),Y=await this.getCurrentNonce(),z=S8({to:this.depositoryAddress,gasLimit:1000000n,gasPrice:10n,data:Q1(X),nonce:Y},{common:this.common}).sign(this.deployerPrivKey),J=await this.runTxInBlock(z);if(J.execResult.exceptionError)throw Error(`mintToReserve failed: ${J.execResult.exceptionError}`);return console.log(`[BrowserVM] Funded ${$.slice(0,10)}... with ${Z} of token ${Q}`),console.log(`[BrowserVM] debugFundReserves: logs=${J.execResult.logs?.length||0}`),this.emitEvents(J.execResult.logs||[])}async setDefaultDisputeDelay($){if(!this.depositoryAddress||!this.depositoryInterface)throw Error("Depository not deployed");let Q=this.depositoryInterface.encodeFunctionData("setDefaultDisputeDelay",[$]),Z=await this.getCurrentNonce(),X=S8({to:this.depositoryAddress,gasLimit:500000n,gasPrice:10n,data:Q1(Q),nonce:Z},{common:this.common}).sign(this.deployerPrivKey),Y=await this.runTxInBlock(X);if(Y.execResult.exceptionError)throw Error(`setDefaultDisputeDelay failed: ${Y.execResult.exceptionError}`);console.log(`[BrowserVM] Default dispute delay set to ${$} blocks`)}async reserveToReserve($,Q,Z,X){if(!this.depositoryAddress||!this.depositoryInterface)throw Error("Depository not deployed");let Y=this.depositoryInterface.encodeFunctionData("reserveToReserve",[$,Q,Z,X]),z=await this.getCurrentNonce(),J=S8({to:this.depositoryAddress,gasLimit:1000000n,gasPrice:10n,data:Q1(Y),nonce:z},{common:this.common}).sign(this.deployerPrivKey),q=await this.runTxInBlock(J);if(q.execResult.exceptionError){let W=q.execResult.exceptionError,G=typeof W==="object"?W.error||W.message||JSON.stringify(W):String(W);throw console.error(`[BrowserVM] R2R FAILED: from=${$}, to=${Q}, tokenId=${Z}, amount=${X}`),console.error("[BrowserVM] R2R error details:",W),Error(`reserveToReserve failed: ${G}`)}return console.log(`[BrowserVM] R2R SUCCESS: ${X} token${Z} from ${$.slice(0,10)}... to ${Q.slice(0,10)}...`),this.emitEvents(q.execResult.logs||[])}getAccountAddress(){return this.accountAddress?.toString()||"0x0"}getDepositoryAddress(){return this.depositoryAddress?.toString()||"0x0"}getEntityProviderAddress(){return this.entityProviderAddress?.toString()||"0x0"}getDeployedContracts(){return{account:this.getAccountAddress(),depository:this.getDepositoryAddress(),entityProvider:this.getEntityProviderAddress()}}async reserveToCollateralDirect($,Q,Z,X){if(!this.depositoryAddress||!this.depositoryInterface)throw Error("Depository not deployed");let Y=K5($,Q),z=Y?$:Q,J=Y?Q:$,q=[{tokenId:Z,leftDiff:Y?-BigInt(X):0n,rightDiff:Y?0n:-BigInt(X),collateralDiff:BigInt(X),ondeltaDiff:Y?BigInt(X):-BigInt(X)}],W=await this.signSettlement($,Q,q,[],[]),G=this.depositoryInterface.encodeFunctionData("settle",[z,J,q,[],[],W]),U=await this.getCurrentNonce(),D=S8({to:this.depositoryAddress,gasLimit:1000000n,gasPrice:10n,data:Q1(G),nonce:U},{common:this.common}).sign(this.deployerPrivKey),P=await this.runTxInBlock(D);if(P.execResult.exceptionError){let H=P.execResult.exceptionError,N=typeof H==="object"?H.error||H.message||JSON.stringify(H):String(H);throw console.error(`[BrowserVM] R2C FAILED: entity=${$}, counterparty=${Q}, tokenId=${Z}, amount=${X}`),console.error("[BrowserVM] R2C error details:",H),Error(`R2C failed: ${N}`)}return console.log(`[BrowserVM] R2C SUCCESS: ${X} from ${$.slice(0,10)}...  account with ${Q.slice(0,10)}...`),console.log(`[BrowserVM] R2C: logs=${P.execResult.logs?.length||0}`),this.emitEvents(P.execResult.logs||[])}async getCollateral($,Q,Z){if(!this.depositoryAddress||!this.depositoryInterface)throw Error("Depository not deployed");let X=this.depositoryInterface.encodeFunctionData("accountKey",[$,Q]),Y=await this.vm.evm.runCall({to:this.depositoryAddress,caller:this.deployerAddress,data:Q1(X),gasLimit:100000n});if(Y.execResult.exceptionError)return{collateral:0n,ondelta:0n};let J=this.depositoryInterface.decodeFunctionResult("accountKey",Y.execResult.returnValue)[0],q=this.depositoryInterface.encodeFunctionData("_collaterals",[J,Z]),W=await this.vm.evm.runCall({to:this.depositoryAddress,caller:this.deployerAddress,data:Q1(q),gasLimit:100000n});if(W.execResult.exceptionError)return{collateral:0n,ondelta:0n};let G=W.execResult.returnValue;if(!G||G.length===0)return{collateral:0n,ondelta:0n};let U=this.depositoryInterface.decodeFunctionResult("_collaterals",G);return{collateral:BigInt(U[0]),ondelta:BigInt(U[1])}}static MessageType={CooperativeUpdate:0,DisputeProof:1,FinalDisputeProof:2,CooperativeDisputeProof:3};entityWallets=new Map;createEntityId($){let Q=typeof $==="number"?`entity_${$}`:$,Z=M0.keccak256(M0.toUtf8Bytes(Q)),X=new M0.Wallet(Z),Y="0x"+X.address.slice(2).toLowerCase().padStart(64,"0");return this.entityWallets.set(Y.toLowerCase(),X),Y}getEntityWallet($){let Q=$.toLowerCase(),Z=this.entityWallets.get(Q);if(Z)return Z;let X="0x"+Q.slice(-40);for(let[z,J]of this.entityWallets)if(J.address.toLowerCase()===X.toLowerCase())return this.entityWallets.set(Q,J),J;let Y=parseInt(Q.slice(-8),16);if(Y>0&&Y<1e4){let z=String(Y),J=gz(z);if(J){let q=new M0.Wallet(M0.hexlify(J));return this.entityWallets.set(Q,q),console.log(`[BrowserVM] Derived wallet for entity ${Y} (signerId=${z})`),q}}throw Error(`BrowserVM missing wallet for entity ${$.slice(0,20)}... (registerEntityWallet or importReplica with runtimeSeed-derived signer)`)}getSigningWallet($){let Q=$.toLowerCase(),Z=this.entityWallets.get(Q);if(Z)return Z;if(this.isNumberedEntity($)){let X=parseInt(Q.slice(-8),16),Y=String(X),z=gz(Y);if(!z)throw Error(`Cannot sign: no private key for entity ${X} (signerId=${Y})`);let J=new M0.Wallet(M0.hexlify(z));return this.entityWallets.set(Q,J),J}throw Error(`Cannot sign: no wallet registered for entity ${$.slice(0,20)}...`)}isNumberedEntity($){let Q=$.toLowerCase(),Z=parseInt(Q.slice(-8),16);return Z>0&&Z<1e4&&Q.startsWith("0x0000000000000000000000000000000000000000000000000000")}buildSingleSignerHanko($,Q,Z){let X=M0.getBytes(Q),Y=Z.signingKey.sign(X),z=Y.v===28?1:0,J=M0.concat([Y.r,Y.s,M0.toBeHex(z,1)]),q=M0.AbiCoder.defaultAbiCoder(),W=$.startsWith("0x")?$:`0x${$}`,G=M0.zeroPadValue(W,32);return q.encode(["tuple(bytes32[],bytes,tuple(bytes32,uint256[],uint256[],uint256)[])"],[[[],J,[[G,[0],[1],1]]]])}registerEntityWallet($,Q){let Z=new M0.Wallet(Q);this.entityWallets.set($.toLowerCase(),Z)}getChannelKey($,Q){let Z=K5($,Q),X=Z?$:Q,Y=Z?Q:$;return M0.solidityPacked(["bytes32","bytes32"],[X,Y])}async signSettlement($,Q,Z,X=[],Y=[]){let J=(await this.getAccountInfo($,Q)).cooperativeNonce,q=K5($,Q),W=q?$:Q,G=q?Q:$,U=this.getChannelKey(W,G),P=M0.AbiCoder.defaultAbiCoder().encode(["uint256","address","bytes","uint256","tuple(uint256,int256,int256,int256,int256)[]","uint256[]","tuple(bytes32,bytes32,uint256,uint256,uint256)[]"],[Y2.MessageType.CooperativeUpdate,this.depositoryAddress?.toString()||"0x0000000000000000000000000000000000000000",U,J,Z.map((L)=>[L.tokenId,L.leftDiff,L.rightDiff,L.collateralDiff,L.ondeltaDiff]),X,Y.map((L)=>[L.insured,L.insurer,L.tokenId,L.limit,L.expiresAt])]),H=M0.keccak256(P);console.log("[BrowserVM] signSettlement:"),console.log(`  hash: ${H}`),console.log(`  channelKey: ${U} (${(U.length-2)/2} bytes)`),console.log(`  cooperativeNonce: ${J}`),console.log(`  diffs: ${JSON.stringify(Z.map((L)=>({tokenId:L.tokenId,leftDiff:L.leftDiff.toString(),rightDiff:L.rightDiff.toString(),collateralDiff:L.collateralDiff.toString(),ondeltaDiff:L.ondeltaDiff.toString()})))}`),console.log(`  encodedMsg length: ${(P.length-2)/2} bytes`),console.log(`  encodedMsg first 200: ${P.slice(0,200)}`),console.log(`  MessageType value: ${Y2.MessageType.CooperativeUpdate}`);let N=this.getSigningWallet(Q),C=this.buildSingleSignerHanko(Q,H,N);return console.log(`[BrowserVM] Built Hanko signature for entity ${Q.slice(0,10)}... (signer=${N.address.slice(0,10)}...)`),C}async signDisputeProof($,Q,Z,X,Y){let z=this.getChannelKey($,Q),q=M0.AbiCoder.defaultAbiCoder().encode(["uint256","address","bytes","uint256","uint256","bytes32"],[Y2.MessageType.DisputeProof,this.depositoryAddress?.toString()||"0x0000000000000000000000000000000000000000",z,Z,X,Y]),W=M0.keccak256(q),G=this.getSigningWallet(Q);return this.buildSingleSignerHanko(Q,W,G)}async getAccountInfo($,Q){if(!this.depositoryAddress||!this.depositoryInterface)throw Error("Depository not deployed");let Z=this.depositoryInterface.encodeFunctionData("accountKey",[$,Q]),X=await this.vm.evm.runCall({to:this.depositoryAddress,caller:this.deployerAddress,data:Q1(Z),gasLimit:100000n});if(X.execResult.exceptionError)return{cooperativeNonce:0n,disputeHash:"0x",disputeTimeout:0n};let z=this.depositoryInterface.decodeFunctionResult("accountKey",X.execResult.returnValue)[0],J=this.depositoryInterface.encodeFunctionData("_accounts",[z]),q=await this.vm.evm.runCall({to:this.depositoryAddress,caller:this.deployerAddress,data:Q1(J),gasLimit:100000n});if(q.execResult.exceptionError)return{cooperativeNonce:0n,disputeHash:"0x",disputeTimeout:0n};let W=this.depositoryInterface.decodeFunctionResult("_accounts",q.execResult.returnValue);return{cooperativeNonce:BigInt(W[0]),disputeHash:W[1],disputeTimeout:BigInt(W[2])}}async getDebts($,Q){if(!this.depositoryAddress||!this.depositoryInterface)throw Error("Depository not deployed");let Z=this.depositoryInterface.encodeFunctionData("getDebts",[$,Q]),X=await this.vm.evm.runCall({to:this.depositoryAddress,caller:this.deployerAddress,data:Q1(Z),gasLimit:500000n});if(X.execResult.exceptionError)return[];try{return this.depositoryInterface.decodeFunctionResult("getDebts",X.execResult.returnValue)[0].map((z)=>({amount:z.amount,creditor:z.creditor}))}catch{return[]}}async enforceDebts($,Q,Z=100){if(!this.depositoryAddress||!this.depositoryInterface)throw Error("Depository not deployed");let X=this.depositoryInterface.encodeFunctionData("enforceDebts",[$,Q,Z]),Y=await this.getCurrentNonce(),z=S8({to:this.depositoryAddress,gasLimit:2000000n,gasPrice:10n,data:Q1(X),nonce:Y},{common:this.common}).sign(this.deployerPrivKey),J=await this.runTxInBlock(z);if(J.execResult.exceptionError)return console.error("[BrowserVM] enforceDebts failed:",J.execResult.exceptionError),0n;try{let q=this.depositoryInterface.decodeFunctionResult("enforceDebts",J.execResult.returnValue);return console.log(`[BrowserVM] Enforced debts for ${$.slice(0,10)}..., paid: ${q[0]}`),q[0]}catch{return 0n}}async processBatch($,Q,Z,X){if(!this.depositoryAddress||!this.depositoryInterface)throw Error("Depository not deployed");console.log(`[BrowserVM] processBatch: calling contract with hanko (nonce=${X})...`);let Y=this.depositoryInterface.encodeFunctionData("processBatch",[$,Q,Z,X]),z=await this.getCurrentNonce(),J=S8({to:this.depositoryAddress,gasLimit:10000000n,gasPrice:10n,data:Q1(Y),nonce:z},{common:this.common}).sign(this.deployerPrivKey),q=await this.runTxInBlock(J);if(q.execResult.exceptionError){let U=null,D=null,P=null,H=null,N=H0(q.execResult.returnValue||new Uint8Array);try{let E=M0.AbiCoder.defaultAbiCoder().decode(["tuple(bytes32[],bytes,tuple(bytes32,uint256[],uint256[],uint256)[])"],Z)[0][2];if(E.length>0)U=M0.hexlify(E[E.length-1][0]),D=await this.getEntityNonce(U)+1n;let{decodeJBatch:I,summarizeBatch:_}=await Promise.resolve().then(() => (c6(),n9)),f=I($);if(P=h1(_(f)),N!=="0x"){try{let x=this.depositoryInterface?.parseError(N);if(x)H=`${x.name}(${x.args?.map((g)=>String(g)).join(", ")})`}catch{}if(!H&&N.startsWith("0x08c379a0"))try{let x=M0.AbiCoder.defaultAbiCoder().decode(["string"],`0x${N.slice(10)}`);H=String(x[0])}catch{}}}catch{}if(console.log("[BrowserVM] processBatch revert:",h1(q.execResult.exceptionError)),N!=="0x")console.log("  returnData:",N);if(H)console.log("  revertReason:",H);if(U)console.log(`[BrowserVM] Hanko entity=${U.slice(0,10)}..., nonce=${X} expectedNext=${D}`);if(P)console.log(`[BrowserVM] Batch summary: ${P}`);let C=q.execResult.exceptionError.error||"revert",L=H?` (${H})`:"";throw Error(`Batch processing failed: ${C}${L}`)}let W=q.execResult.logs||[];console.log(`[BrowserVM] processBatch raw logs: ${W.length}`),W.forEach((U,D)=>{console.log(`   Log ${D}: topics=${U[1]?.length||0}, data=${U[2]?.length||0} bytes`)});let G=this.emitEvents(W);return console.log(`[BrowserVM]  Batch processed: ${G.length} events`),G.forEach((U)=>console.log(`   - ${U.name}`)),G}async captureStateRoot(){return await this.vm.stateManager.getStateRoot()}async timeTravel($){await this.vm.stateManager.setStateRoot($),this.log(`[BrowserVM] Time traveled to state root: ${Buffer.from($).toString("hex").slice(0,16)}...`)}getBlockNumber(){return BigInt(this.blockHeight)}getBlockTimestamp(){return this.blockTimestamp}getChainId(){if(!this.common)return 1337n;let $=this.common.chainId?.();if(typeof $==="bigint")return $;if(typeof $==="number")return BigInt($);return 1337n}async getEntityNonce($){if(!this.depositoryAddress||!this.depositoryInterface)throw Error("Depository not deployed");let Q=u6($),Z=M0.getAddress(`0x${Q.slice(-40)}`),X=this.depositoryInterface.encodeFunctionData("entityNonces",[Z]),Y=await this.vm.evm.runCall({to:this.depositoryAddress,caller:this.deployerAddress,data:Q1(X),gasLimit:100000n});if(Y.execResult.exceptionError)return 0n;let z=this.depositoryInterface.decodeFunctionResult("entityNonces",Y.execResult.returnValue);return BigInt(z[0])}isInitialized(){return this.initialized}async getInsuranceLines($){if(!this.depositoryAddress||!this.depositoryInterface)throw Error("Depository not deployed");let Q=this.depositoryInterface.encodeFunctionData("getInsuranceLines",[$]),Z=await this.vm.evm.runCall({to:this.depositoryAddress,caller:this.deployerAddress,data:Q1(Q),gasLimit:500000n});if(Z.execResult.exceptionError)return console.error("[BrowserVM] getInsuranceLines failed:",Z.execResult.exceptionError),[];try{return this.depositoryInterface.decodeFunctionResult("getInsuranceLines",Z.execResult.returnValue)[0].map((Y)=>({insurer:Y.insurer,tokenId:Number(Y.tokenId),remaining:Y.remaining,expiresAt:Y.expiresAt}))}catch{return[]}}async getAvailableInsurance($,Q){if(!this.depositoryAddress||!this.depositoryInterface)throw Error("Depository not deployed");let Z=this.depositoryInterface.encodeFunctionData("getAvailableInsurance",[$,Q]),X=await this.vm.evm.runCall({to:this.depositoryAddress,caller:this.deployerAddress,data:Q1(Z),gasLimit:100000n});if(X.execResult.exceptionError)return console.error("[BrowserVM] getAvailableInsurance failed:",X.execResult.exceptionError),0n;try{return this.depositoryInterface.decodeFunctionResult("getAvailableInsurance",X.execResult.returnValue)[0]}catch{return 0n}}async settleWithInsurance($,Q,Z,X=[],Y=[],z){if(!this.depositoryAddress||!this.depositoryInterface)throw Error("Depository not deployed");let J=Z.length>0||X.length>0||Y.length>0,q=z||"";if(console.log(`[BrowserVM] settleWithInsurance: input sig length=${z?.length||0}, diffs=${Z.length}`),J&&(!q||q==="0x"))throw Error("Settlement signature required for settleWithInsurance");if(!q)q="0x";console.log("[BrowserVM] settle call params:"),console.log(`  leftEntity: ${$}`),console.log(`  rightEntity: ${Q}`),console.log(`  diffs: ${JSON.stringify(Z.map((C)=>({tokenId:C.tokenId,leftDiff:C.leftDiff.toString(),rightDiff:C.rightDiff.toString(),collateralDiff:C.collateralDiff.toString(),ondeltaDiff:C.ondeltaDiff.toString()})))}`),console.log(`  finalSig length: ${q.length}`);let W=this.depositoryInterface.encodeFunctionData("settle",[$,Q,Z,X,Y,q]);console.log(`[BrowserVM] settle calldata length: ${(W.length-2)/2} bytes`),console.log(`[BrowserVM] settle calldata selector: ${W.slice(0,10)}`);try{let C=this.depositoryInterface.decodeFunctionData("settle",W);if(console.log(`[BrowserVM] Calldata decode check: decoded ${C.length} params`),console.log(`  [0] leftEntity: ${C[0]}`),console.log(`  [1] rightEntity: ${C[1]}`),console.log(`  [2] diffs count: ${C[2].length}`),console.log(`  [5] sig length: ${C[5].length} bytes`),C[2].length>0){let B=C[2][0];console.log(`  [2][0] diff: tokenId=${B[0]}, leftDiff=${B[1]}, rightDiff=${B[2]}, collateralDiff=${B[3]}, ondeltaDiff=${B[4]}`)}let L=C[5];console.log(`  [5] sig first 200 chars: ${L.slice(0,200)}`)}catch(C){console.error(`[BrowserVM] Calldata decode ERROR: ${C.message}`)}let G=q.length>100?30000000n:2000000n;console.log(`[BrowserVM] Using gas limit: ${G}`);let U=await this.getCurrentNonce(),D=S8({to:this.depositoryAddress,gasLimit:G,gasPrice:10n,data:Q1(W),nonce:U},{common:this.common}).sign(this.deployerPrivKey),P=await this.runTxInBlock(D);if(P.execResult.exceptionError){if(console.error("[BrowserVM] settle failed:",P.execResult.exceptionError),console.error("[BrowserVM] returnValue length:",P.execResult.returnValue?.length||0),console.error("[BrowserVM] gasUsed:",P.execResult.executionGasUsed?.toString()),console.error("[BrowserVM] exceptionError type:",typeof P.execResult.exceptionError),P.execResult.exceptionError.error)console.error("[BrowserVM] exceptionError.error:",P.execResult.exceptionError.error);let C=P.execResult.logs||[];if(C.length>0){console.log("[BrowserVM] Events before revert:",C.length);let L=this.parseLogs(C);for(let B of L)console.log(`   Event: ${B.name}`,JSON.stringify(B.args,(E,I)=>typeof I==="bigint"?I.toString():I))}else console.log("[BrowserVM] No events emitted before revert");if(P.execResult.returnValue&&P.execResult.returnValue.length>0){let L=H0(P.execResult.returnValue);console.error("[BrowserVM] Revert data:",L);try{if(L.startsWith("0x08c379a0")){let B=M0.AbiCoder.defaultAbiCoder().decode(["string"],"0x"+L.slice(10))[0];console.error("[BrowserVM] Revert reason:",B)}else if(L.startsWith("0x")){let B={"0xb2f59f24":"E1 - Invalid operation","0xf7d3f792":"E2 - Nonce mismatch","0x735e8e8e":"E3 - Overflow","0xa3f72b95":"E4 - Invalid signature"},E=L.slice(0,10);if(B[E])console.error("[BrowserVM] Custom error:",B[E])}}catch{}}return[]}let H=this.emitEvents(P.execResult.logs||[]),N=Y.length;return console.log(`[BrowserVM] Settle completed: ${Z.length} diffs, ${N} insurance regs`),H}parseLogs($){let Q=[this.depositoryInterface,this.accountInterface].filter((X)=>X!==null);if(Q.length===0)return[];let Z=[];for(let X of $){let Y=X[1].map((J)=>H0(J)),z=H0(X[2]);for(let J of Q)try{let q=J.parseLog({topics:Y,data:z});if(q){Z.push({name:q.name,args:Object.fromEntries(q.fragment.inputs.map((W,G)=>[W.name,q.args[G]])),blockNumber:this.blockHeight,blockHash:this.blockHash,timestamp:this.blockTimestamp});break}}catch{}}return Z}onAny($){return this.eventCallbacks.add($),this.log(`[BrowserVM] onAny registered (${this.eventCallbacks.size} callbacks)`),()=>{this.eventCallbacks.delete($),this.log(`[BrowserVM] onAny unsubscribed (${this.eventCallbacks.size} callbacks)`)}}emitEvents($){this.log(`\uD83D\uDD0A [BrowserVM] emitEvents ENTRY: raw logs=${$.length}, callbacks=${this.eventCallbacks.size}`);let Q=this.parseLogs($);this.log(`\uD83D\uDD0A [BrowserVM] emitEvents: parsed ${Q.length} events`);for(let Z of Q)this.log(`   \uD83D\uDCE3 EVENT: ${Z.name} | ${h1(Z.args).slice(0,80)}`);if(Q.length>0)for(let Z of this.eventCallbacks)try{Z(Q),this.log(`    batch of ${Q.length} events fired to callback`)}catch(X){console.error("    cb error:",X)}return Q}async getNextEntityNumber(){if(!this.entityProviderAddress||!this.entityProviderInterface)throw Error("EntityProvider not deployed");let $=this.entityProviderInterface.encodeFunctionData("nextNumber"),Q=await this.vm.evm.runCall({to:this.entityProviderAddress,data:Q1($)});if(Q.execResult.exceptionError)return console.error(`[BrowserVM] getNextEntityNumber failed: ${Q.execResult.exceptionError}`),1;let Z=this.entityProviderInterface.decodeFunctionResult("nextNumber",Q.execResult.returnValue);return Number(Z[0])}async getEntityInfo($){if(!this.entityProviderAddress||!this.entityProviderInterface)throw Error("EntityProvider not deployed");let Q=this.entityProviderInterface.encodeFunctionData("getEntityInfo",[$]),Z=await this.vm.evm.runCall({to:this.entityProviderAddress,data:Q1(Q)});if(Z.execResult.exceptionError)return console.error(`[BrowserVM] getEntityInfo failed: ${Z.execResult.exceptionError}`),{exists:!1};let X=this.entityProviderInterface.decodeFunctionResult("getEntityInfo",Z.execResult.returnValue),Y=X[4],z={exists:X[0],currentBoardHash:X[1],registrationBlock:Number(X[3])};if(Y)z.name=Y;return z}async serializeState(){if(!this.initialized)throw Error("BrowserVM not initialized");let $=await this.vm.stateManager.getStateRoot(),Z=this.vm.stateManager._trie.database().db,X=(q)=>{if(q instanceof Map)return q;if(q&&q._database instanceof Map)return q._database;if(q&&q.db instanceof Map)return q.db;return null},Y=[],z=X(Z);if(!z)throw Error("BrowserVM serializeState: unsupported trie db");let J=(q)=>{let W=q.startsWith("0x")||q.startsWith("0X")?q.slice(2):q;return W.length%2===1?`0${W}`:W};for(let[q,W]of z.entries()){let G=typeof q==="string"?q:Buffer.from(q).toString("hex"),U=typeof W==="string"?W:Buffer.from(W).toString("hex"),D=J(G),P=J(U);Y.push([D,P])}return this.log(`[BrowserVM] Serialized state: ${Y.length} trie nodes, version=${tC}`),{version:tC,stateRoot:Buffer.from($).toString("hex"),trieData:Y,nonce:this.nonce.toString(),addresses:{depository:this.depositoryAddress?.toString()||"",entityProvider:this.entityProviderAddress?.toString()||""}}}async restoreState($){if(!this.initialized)await this.init();let Q=(H)=>{if(H===null||H===void 0)return null;if(typeof H==="string"){let N=H.startsWith("0x")?H.slice(2):H;if(N.length===0)return"";let C=N.length%2===1?`0${N}`:N;return/^[0-9a-fA-F]+$/.test(C)?C:null}if(H instanceof ArrayBuffer)return Buffer.from(new Uint8Array(H)).toString("hex");if(H instanceof Uint8Array)return Buffer.from(H).toString("hex");if(Array.isArray(H))try{return Buffer.from(H).toString("hex")}catch{return null}if(typeof H==="object"){let N=H;if(N.type==="Buffer"&&Array.isArray(N.data))try{return Buffer.from(N.data).toString("hex")}catch{return null}}return null},Z=(H)=>{let N=Q(H);if(N===null)return null;let C=N.length>40?N.slice(-40):N.padStart(40,"0");if(C.length!==40)return null;return C},X=(H)=>{if(H.length===0)return new Uint8Array;return Q1(`0x${H}`)},z=this.vm.stateManager._trie.database().db,q=((H)=>{if(H instanceof Map)return H;if(H&&H._database instanceof Map)return H._database;if(H&&H.db instanceof Map)return H.db;return null})(z);if(!q)throw Error("BrowserVM restoreState: unsupported trie db");q.clear();for(let H of $.trieData||[]){let N=Q(H?.[0]),C=Q(H?.[1]);if(N===null||C===null)throw Error("BrowserVM restoreState: invalid trie entry");q.set(N,X(C))}let W=Q($.stateRoot);if(!W)throw Error("BrowserVM restoreState: invalid stateRoot");let G=W.padStart(64,"0"),U=Q1(`0x${G}`);await this.vm.stateManager.setStateRoot(U);try{let H=typeof $.nonce==="string"?$.nonce:String($.nonce??"0");this.nonce=BigInt(H)}catch{this.nonce=0n}let D=Z($.addresses?.depository);if(D)this.depositoryAddress=M9(`0x${D}`);let P=Z($.addresses?.entityProvider);if(P)this.entityProviderAddress=M9(`0x${P}`);this.log(`[BrowserVM] Restored state: ${$.trieData.length} trie nodes, root ${$.stateRoot.slice(0,16)}...`)}async saveToLocalStorage($="xln-evm-state"){try{let Q=await this.serializeState(),Z=JSON.stringify(Q);localStorage.setItem($,Z),this.log(`[BrowserVM] Saved state to localStorage: ${$} (${(Z.length/1024).toFixed(1)}KB)`)}catch(Q){throw console.error("[BrowserVM] Failed to save state:",Q),Q}}async loadFromLocalStorage($="xln-evm-state"){try{let Q=localStorage.getItem($);if(!Q)return this.log("[BrowserVM] No saved state found"),!1;let Z=JSON.parse(Q),X=Z.version||1;if(X!==tC)return this.log(`[BrowserVM]  Version mismatch: cached=${X}, current=${tC} - clearing stale cache`),this.clearLocalStorage($),!1;return await this.restoreState(Z),this.log(`[BrowserVM] Loaded state from localStorage: ${$} (v${X})`),!0}catch(Q){return console.error("[BrowserVM] Failed to load state:",Q),this.clearLocalStorage($),!1}}clearLocalStorage($="xln-evm-state"){localStorage.removeItem($),this.log(`[BrowserVM] Cleared saved state: ${$}`)}async syncAllCollaterals($,Q){let Z=new Map;for(let{entityId:X,counterpartyId:Y}of $){let z=`${X}:${Y}`,J=await this.getCollateral(X,Y,Q);if(J.collateral>0n||J.ondelta!==0n){if(!Z.has(z))Z.set(z,new Map);Z.get(z).set(Q,J)}}return this.log(`[BrowserVM] Synced collaterals for ${$.length} accounts`),Z}getBlockHeight(){return this.blockHeight}createBlock($){let Q=this.blockHeight+1,Z={parentHash:Q1(this.blockHash),number:BigInt(Q),timestamp:BigInt(Math.floor($/1000)),gasLimit:KC0,baseFeePerGas:1n},X=xe({header:Z},{common:this.common});return this.prevBlockHash=this.blockHash,this.blockHeight=Q,this.blockHash=H0(X.header.hash()),this.blockTimestamp=$,X}beginJurisdictionBlock($){this.activeBlock=this.createBlock($)}endJurisdictionBlock(){this.activeBlock=null}getBlockHash(){return this.blockHash}getTransactionReceipt($){return this.txReceipts.get($)??null}setBlockTimestamp($){if(!this.activeBlock)this.blockTimestamp=$}async runTxInBlock($){let Q=this.activeBlock??this.createBlock(this.blockTimestamp);return rf(this.vm,{tx:$,block:Q,skipNonce:!0})}hasSavedState($="xln-evm-state"){return localStorage.getItem($)!==null}async registerNumberedEntitiesBatch($){if(!this.entityProviderAddress||!this.entityProviderInterface)throw Error("EntityProvider not deployed");let Q=this.entityProviderInterface.encodeFunctionData("registerNumberedEntitiesBatch",[$]),Z=await this.getCurrentNonce(),X=S8({to:this.entityProviderAddress,gasLimit:5000000n,gasPrice:10n,data:Q1(Q),nonce:Z},{common:this.common}).sign(this.deployerPrivKey),Y=await this.runTxInBlock(X);if(Y.execResult.exceptionError)throw Error(`registerNumberedEntitiesBatch failed: ${Y.execResult.exceptionError}`);let J=this.entityProviderInterface.decodeFunctionResult("registerNumberedEntitiesBatch",Y.execResult.returnValue)[0].map((q)=>Number(q));return console.log(`[BrowserVM] registerNumberedEntitiesBatch: ${$.length} entities  [${J.join(",")}]`),{entityNumbers:J,txHash:"0x"+"browservm-register-batch".padStart(64,"0")}}async registerEntitiesWithSigners($){let Q=M0.AbiCoder.defaultAbiCoder(),Z=[];for(let z of $){let J=gz(z);if(!J)throw Error(`No private key for signerId ${z} - register signer keys (vault seed or registerSignerKey) before entity registration`);let W=new M0.Wallet(M0.hexlify(J)).address,G=M0.zeroPadValue(W,32),U=Q.encode(["tuple(uint16,bytes32[],uint16[],uint32,uint32,uint32)"],[[1n,[G],[1n],0n,0n,0n]]),D=M0.keccak256(U);Z.push(D),console.log(`[BrowserVM] Entity ${z}: validator=${W}, entityId=${G.slice(0,20)}...`),console.log(`[BrowserVM]   boardHash=${D}`)}let Y=(await this.registerNumberedEntitiesBatch(Z)).entityNumbers;for(let z=0;z<Y.length;z++){let J=Y[z];if(J===void 0)continue;let q="0x"+J.toString(16).padStart(64,"0"),W=await this.getEntityInfo(q);if(console.log(`[BrowserVM]   Verified entity ${J}: stored boardHash=${W.currentBoardHash?.slice(0,18)}...`),W.currentBoardHash!==Z[z])console.error(`[BrowserVM]  Hash mismatch! Expected ${Z[z]}, got ${W.currentBoardHash}`)}return Y}}});var P80="6.15.0";function GC0($,Q,Z){let X=Q.split("|").map((z)=>z.trim());for(let z=0;z<X.length;z++)switch(Q){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof $===Q)return}let Y=Error(`invalid value for type ${Q}`);throw Y.code="INVALID_ARGUMENT",Y.argument=`value.${Z}`,Y.value=$,Y}async function oG($){let Q=Object.keys($);return(await Promise.all(Q.map((X)=>Promise.resolve($[X])))).reduce((X,Y,z)=>{return X[Q[z]]=Y,X},{})}function f1($,Q,Z){for(let X in Q){let Y=Q[X],z=Z?Z[X]:null;if(z)GC0(Y,z,X);Object.defineProperty($,X,{enumerable:!0,value:Y,writable:!1})}}function nG($,Q){if($==null)return"null";if(Q==null)Q=new Set;if(typeof $==="object"){if(Q.has($))return"[Circular]";Q.add($)}if(Array.isArray($))return"[ "+$.map((Z)=>nG(Z,Q)).join(", ")+" ]";if($ instanceof Uint8Array){let X="0x";for(let Y=0;Y<$.length;Y++)X+="0123456789abcdef"[$[Y]>>4],X+="0123456789abcdef"[$[Y]&15];return X}if(typeof $==="object"&&typeof $.toJSON==="function")return nG($.toJSON(),Q);switch(typeof $){case"boolean":case"number":case"symbol":return $.toString();case"bigint":return BigInt($).toString();case"string":return JSON.stringify($);case"object":{let Z=Object.keys($);return Z.sort(),"{ "+Z.map((X)=>`${nG(X,Q)}: ${nG($[X],Q)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function r$($,Q){return $&&$.code===Q}function $L($){return r$($,"CALL_EXCEPTION")}function pZ($,Q,Z){let X=$;{let z=[];if(Z){if("message"in Z||"code"in Z||"name"in Z)throw Error(`value will overwrite populated values: ${nG(Z)}`);for(let J in Z){if(J==="shortMessage")continue;let q=Z[J];z.push(J+"="+nG(q))}}if(z.push(`code=${Q}`),z.push(`version=${P80}`),z.length)$+=" ("+z.join(", ")+")"}let Y;switch(Q){case"INVALID_ARGUMENT":Y=TypeError($);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":Y=RangeError($);break;default:Y=Error($)}if(f1(Y,{code:Q}),Z)Object.assign(Y,Z);if(Y.shortMessage==null)f1(Y,{shortMessage:X});return Y}function N1($,Q,Z,X){if(!$)throw pZ(Q,Z,X)}function a0($,Q,Z,X){N1($,Q,"INVALID_ARGUMENT",{argument:Z,value:X})}function vD($,Q,Z){if(Z==null)Z="";if(Z)Z=": "+Z;N1($>=Q,"missing argument"+Z,"MISSING_ARGUMENT",{count:$,expectedCount:Q}),N1($<=Q,"too many arguments"+Z,"UNEXPECTED_ARGUMENT",{count:$,expectedCount:Q})}function ef($){N1(UC0.indexOf($)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:$}})}function rG($,Q,Z){if(Z==null)Z="";if($!==Q){let X=Z,Y="new";if(Z)X+=".",Y+=" "+Z;N1(!1,`private constructor; use ${X}from* methods`,"UNSUPPORTED_OPERATION",{operation:Y})}}var UC0;var yD=p(()=>{UC0=["NFD","NFC","NFKD","NFKC"].reduce(($,Q)=>{try{if("test".normalize(Q)!=="test")throw Error("bad");if(Q==="NFD"){let Z=String.fromCharCode(233).normalize("NFD"),X=String.fromCharCode(101,769);if(Z!==X)throw Error("broken")}$.push(Q)}catch(Z){}return $},[])});function j80($,Q,Z){if($ instanceof Uint8Array){if(Z)return new Uint8Array($);return $}if(typeof $==="string"&&$.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){let X=new Uint8Array(($.length-2)/2),Y=2;for(let z=0;z<X.length;z++)X[z]=parseInt($.substring(Y,Y+2),16),Y+=2;return X}a0(!1,"invalid BytesLike value",Q||"value",$)}function f8($,Q){return j80($,Q,!1)}function b2($,Q){return j80($,Q,!0)}function o4($,Q){if(typeof $!=="string"||!$.match(/^0x[0-9A-Fa-f]*$/))return!1;if(typeof Q==="number"&&$.length!==2+2*Q)return!1;if(Q===!0&&$.length%2!==0)return!1;return!0}function $k($){return o4($,!0)||$ instanceof Uint8Array}function P6($){let Q=f8($),Z="0x";for(let X=0;X<Q.length;X++){let Y=Q[X];Z+=H80[(Y&240)>>4]+H80[Y&15]}return Z}function l7($){return"0x"+$.map((Q)=>P6(Q).substring(2)).join("")}function a$($,Q,Z){let X=f8($);if(Z!=null&&Z>X.length)N1(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:X,length:X.length,offset:Z});return P6(X.slice(Q==null?0:Q,Z==null?X.length:Z))}function R80($,Q,Z){let X=f8($);N1(Q>=X.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(X),length:Q,offset:Q+1});let Y=new Uint8Array(Q);if(Y.fill(0),Z)Y.set(X,Q-X.length);else Y.set(X,0);return P6(Y)}function Qk($,Q){return R80($,Q,!0)}function Zk($,Q){return R80($,Q,!1)}var H80="0123456789abcdef";var QL=p(()=>{yD()});function Xk($,Q){let Z=gD($,"value"),X=BigInt(n4(Q,"width"));if(N1(Z>>X===ZL,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:$}),Z>>X-h3){let Y=(h3<<X)-h3;return-((~Z&Y)+h3)}return Z}function Yk($,Q){let Z=J2($,"value"),X=BigInt(n4(Q,"width")),Y=h3<<X-h3;if(Z<ZL){Z=-Z,N1(Z<=Y,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:$});let z=(h3<<X)-h3;return(~Z&z)+h3}else N1(Z<Y,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:$});return Z}function sG($,Q){let Z=gD($,"value"),X=BigInt(n4(Q,"bits"));return Z&(h3<<X)-h3}function J2($,Q){switch(typeof $){case"bigint":return $;case"number":return a0(Number.isInteger($),"underflow",Q||"value",$),a0($>=-aG&&$<=aG,"overflow",Q||"value",$),BigInt($);case"string":try{if($==="")throw Error("empty string");if($[0]==="-"&&$[1]!=="-")return-BigInt($.substring(1));return BigInt($)}catch(Z){a0(!1,`invalid BigNumberish string: ${Z.message}`,Q||"value",$)}}a0(!1,"invalid BigNumberish value",Q||"value",$)}function gD($,Q){let Z=J2($,Q);return N1(Z>=ZL,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:$}),Z}function XL($){if($ instanceof Uint8Array){let Q="0x0";for(let Z of $)Q+=N80[Z>>4],Q+=N80[Z&15];return BigInt(Q)}return J2($)}function n4($,Q){switch(typeof $){case"bigint":return a0($>=-aG&&$<=aG,"overflow",Q||"value",$),Number($);case"number":return a0(Number.isInteger($),"underflow",Q||"value",$),a0($>=-aG&&$<=aG,"overflow",Q||"value",$),$;case"string":try{if($==="")throw Error("empty string");return n4(BigInt($),Q)}catch(Z){a0(!1,`invalid numeric string: ${Z.message}`,Q||"value",$)}}a0(!1,"invalid numeric value",Q||"value",$)}function Jk($){return n4(XL($))}function hD($,Q){let X=gD($,"value").toString(16);if(Q==null){if(X.length%2)X="0"+X}else{let Y=n4(Q,"width");N1(Y*2>=X.length,`value exceeds width (${Y} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:$});while(X.length<Y*2)X="0"+X}return"0x"+X}function zk($){let Q=gD($,"value");if(Q===ZL)return new Uint8Array([]);let Z=Q.toString(16);if(Z.length%2)Z="0"+Z;let X=new Uint8Array(Z.length/2);for(let Y=0;Y<X.length;Y++){let z=Y*2;X[Y]=parseInt(Z.substring(z,z+2),16)}return X}var ZL,h3,aG=9007199254740991,N80="0123456789abcdef";var qk=p(()=>{yD();ZL=BigInt(0),h3=BigInt(1)});class YL{filter;emitter;#$;constructor($,Q,Z){this.#$=Q,f1(this,{emitter:$,filter:Z})}async removeListener(){if(this.#$==null)return;await this.emitter.off(this.filter,this.#$)}}var C80=()=>{};function VC0($,Q,Z,X,Y){a0(!1,`invalid codepoint at offset ${Q}; ${$}`,"bytes",Z)}function L80($,Q,Z,X,Y){if($==="BAD_PREFIX"||$==="UNEXPECTED_CONTINUE"){let z=0;for(let J=Q+1;J<Z.length;J++){if(Z[J]>>6!==2)break;z++}return z}if($==="OVERRUN")return Z.length-Q-1;return 0}function OC0($,Q,Z,X,Y){if($==="OVERLONG")return a0(typeof Y==="number","invalid bad code point for replacement","badCodepoint",Y),X.push(Y),0;return X.push(65533),L80($,Q,Z,X,Y)}function DC0($,Q){if(Q==null)Q=T80.error;let Z=f8($,"bytes"),X=[],Y=0;while(Y<Z.length){let z=Z[Y++];if(z>>7===0){X.push(z);continue}let J=null,q=null;if((z&224)===192)J=1,q=127;else if((z&240)===224)J=2,q=2047;else if((z&248)===240)J=3,q=65535;else{if((z&192)===128)Y+=Q("UNEXPECTED_CONTINUE",Y-1,Z,X);else Y+=Q("BAD_PREFIX",Y-1,Z,X);continue}if(Y-1+J>=Z.length){Y+=Q("OVERRUN",Y-1,Z,X);continue}let W=z&(1<<8-J-1)-1;for(let G=0;G<J;G++){let U=Z[Y];if((U&192)!=128){Y+=Q("MISSING_CONTINUE",Y,Z,X),W=null;break}W=W<<6|U&63,Y++}if(W===null)continue;if(W>1114111){Y+=Q("OUT_OF_RANGE",Y-1-J,Z,X,W);continue}if(W>=55296&&W<=57343){Y+=Q("UTF16_SURROGATE",Y-1-J,Z,X,W);continue}if(W<=q){Y+=Q("OVERLONG",Y-1-J,Z,X,W);continue}X.push(W)}return X}function mD($,Q){if(a0(typeof $==="string","invalid string value","str",$),Q!=null)ef(Q),$=$.normalize(Q);let Z=[];for(let X=0;X<$.length;X++){let Y=$.charCodeAt(X);if(Y<128)Z.push(Y);else if(Y<2048)Z.push(Y>>6|192),Z.push(Y&63|128);else if((Y&64512)==55296){X++;let z=$.charCodeAt(X);a0(X<$.length&&(z&64512)===56320,"invalid surrogate pair","str",$);let J=65536+((Y&1023)<<10)+(z&1023);Z.push(J>>18|240),Z.push(J>>12&63|128),Z.push(J>>6&63|128),Z.push(J&63|128)}else Z.push(Y>>12|224),Z.push(Y>>6&63|128),Z.push(Y&63|128)}return new Uint8Array(Z)}function MC0($){return $.map((Q)=>{if(Q<=65535)return String.fromCharCode(Q);return Q-=65536,String.fromCharCode((Q>>10&1023)+55296,(Q&1023)+56320)}).join("")}function Wk($,Q){return MC0(DC0($,Q))}var T80;var Kk=p(()=>{QL();yD();T80=Object.freeze({error:VC0,ignore:L80,replace:OC0})});function F80($){let Q=[];while($)Q.unshift($&255),$>>=8;return Q}function w80($){if(Array.isArray($)){let X=[];if($.forEach(function(z){X=X.concat(w80(z))}),X.length<=55)return X.unshift(192+X.length),X;let Y=F80(X.length);return Y.unshift(247+Y.length),Y.concat(X)}let Q=Array.prototype.slice.call(f8($,"object"));if(Q.length===1&&Q[0]<=127)return Q;else if(Q.length<=55)return Q.unshift(128+Q.length),Q;let Z=F80(Q.length);return Z.unshift(183+Z.length),Z.concat(Q)}function Gk($){let Q="0x";for(let Z of w80($))Q+=A80[Z>>4],Q+=A80[Z&15];return Q}var A80="0123456789abcdef";var B80=p(()=>{QL()});var k8=p(()=>{QL();yD();C80();qk();B80();Kk()});function Iq($){return _80.get($)}function E80($,Q){_80.set($,Q)}function pD($,Q){let Z=Error(`deferred error during ABI decoding triggered accessing ${$}`);throw Z.error=Q,Z}function Vk($,Q,Z){if($.indexOf(null)>=0)return Q.map((X,Y)=>{if(X instanceof r4)return Vk(Iq(X),X,Z);return X});return $.reduce((X,Y,z)=>{let J=Q.getValue(Y);if(!(Y in X)){if(Z&&J instanceof r4)J=Vk(Iq(J),J,Z);X[Y]=J}return X},{})}function I80($){let Q=zk($);if(N1(Q.length<=v9,"value out-of-bounds","BUFFER_OVERRUN",{buffer:Q,length:v9,offset:Q.length}),Q.length!==v9)Q=b2(l7([Uk.slice(Q.length%v9),Q]));return Q}class Y9{name;type;localName;dynamic;constructor($,Q,Z,X){f1(this,{name:$,type:Q,localName:Z,dynamic:X},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError($,Q){a0(!1,$,this.localName,Q)}}class tG{#$;#Q;constructor(){this.#$=[],this.#Q=0}get data(){return l7(this.#$)}get length(){return this.#Q}#Z($){return this.#$.push($),this.#Q+=$.length,$.length}appendWriter($){return this.#Z(b2($.data))}writeBytes($){let Q=b2($),Z=Q.length%v9;if(Z)Q=b2(l7([Q,Uk.slice(Z)]));return this.#Z(Q)}writeValue($){return this.#Z(I80($))}writeUpdatableValue(){let $=this.#$.length;return this.#$.push(Uk),this.#Q+=v9,(Q)=>{this.#$[$]=I80(Q)}}}class zL{allowLoose;#$;#Q;#Z;#X;#Y;constructor($,Q,Z){f1(this,{allowLoose:!!Q}),this.#$=b2($),this.#Z=0,this.#X=null,this.#Y=Z!=null?Z:1024,this.#Q=0}get data(){return P6(this.#$)}get dataLength(){return this.#$.length}get consumed(){return this.#Q}get bytes(){return new Uint8Array(this.#$)}#z($){if(this.#X)return this.#X.#z($);this.#Z+=$,N1(this.#Y<1||this.#Z<=this.#Y*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#Y} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:b2(this.#$),offset:this.#Q,length:$,info:{bytesRead:this.#Z,dataLength:this.dataLength}})}#J($,Q,Z){let X=Math.ceil(Q/v9)*v9;if(this.#Q+X>this.#$.length)if(this.allowLoose&&Z&&this.#Q+Q<=this.#$.length)X=Q;else N1(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:b2(this.#$),length:this.#$.length,offset:this.#Q+X});return this.#$.slice(this.#Q,this.#Q+X)}subReader($){let Q=new zL(this.#$.slice(this.#Q+$),this.allowLoose,this.#Y);return Q.#X=this,Q}readBytes($,Q){let Z=this.#J(0,$,!!Q);return this.#z($),this.#Q+=Z.length,Z.slice(0,$)}readValue(){return XL(this.readBytes(v9))}readIndex(){return Jk(this.readBytes(v9))}}var v9=32,Uk,PC0,JL,_80,r4;var i7=p(()=>{k8();Uk=new Uint8Array(v9),PC0=["then"],JL={},_80=new WeakMap;r4=class r4 extends Array{#$;constructor(...$){let Q=$[0],Z=$[1],X=($[2]||[]).slice(),Y=!0;if(Q!==JL)Z=$,X=[],Y=!1;super(Z.length);Z.forEach((q,W)=>{this[W]=q});let z=X.reduce((q,W)=>{if(typeof W==="string")q.set(W,(q.get(W)||0)+1);return q},new Map);if(E80(this,Object.freeze(Z.map((q,W)=>{let G=X[W];if(G!=null&&z.get(G)===1)return G;return null}))),this.#$=[],this.#$==null)this.#$;if(!Y)return;Object.freeze(this);let J=new Proxy(this,{get:(q,W,G)=>{if(typeof W==="string"){if(W.match(/^[0-9]+$/)){let D=n4(W,"%index");if(D<0||D>=this.length)throw RangeError("out of result range");let P=q[D];if(P instanceof Error)pD(`index ${D}`,P);return P}if(PC0.indexOf(W)>=0)return Reflect.get(q,W,G);let U=q[W];if(U instanceof Function)return function(...D){return U.apply(this===G?q:this,D)};else if(!(W in q))return q.getValue.apply(this===G?q:this,[W])}return Reflect.get(q,W,G)}});return E80(J,Iq(this)),J}toArray($){let Q=[];return this.forEach((Z,X)=>{if(Z instanceof Error)pD(`index ${X}`,Z);if($&&Z instanceof r4)Z=Z.toArray($);Q.push(Z)}),Q}toObject($){let Q=Iq(this);return Q.reduce((Z,X,Y)=>{return N1(X!=null,`value at index ${Y} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),Vk(Q,this,$)},{})}slice($,Q){if($==null)$=0;if($<0){if($+=this.length,$<0)$=0}if(Q==null)Q=this.length;if(Q<0){if(Q+=this.length,Q<0)Q=0}if(Q>this.length)Q=this.length;let Z=Iq(this),X=[],Y=[];for(let z=$;z<Q;z++)X.push(this[z]),Y.push(Z[z]);return new r4(JL,X,Y)}filter($,Q){let Z=Iq(this),X=[],Y=[];for(let z=0;z<this.length;z++){let J=this[z];if(J instanceof Error)pD(`index ${z}`,J);if($.call(Q,J,z,this))X.push(J),Y.push(Z[z])}return new r4(JL,X,Y)}map($,Q){let Z=[];for(let X=0;X<this.length;X++){let Y=this[X];if(Y instanceof Error)pD(`index ${X}`,Y);Z.push($.call(Q,Y,X,this))}return Z}getValue($){let Q=Iq(this).indexOf($);if(Q===-1)return;let Z=this[Q];if(Z instanceof Error)pD(`property ${JSON.stringify($)}`,Z.error);return Z}static fromItems($,Q){return new r4(JL,$,Q)}}});function Ok($){if(!Number.isSafeInteger($)||$<0)throw Error(`Wrong positive integer: ${$}`)}function Dk($,...Q){if(!($ instanceof Uint8Array))throw Error("Expected Uint8Array");if(Q.length>0&&!Q.includes($.length))throw Error(`Expected Uint8Array of length ${Q}, not of length=${$.length}`)}function Mk($,Q=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(Q&&$.finished)throw Error("Hash#digest() has already been called")}function S80($,Q){Dk($);let Z=Q.outputLen;if($.length<Z)throw Error(`digestInto() expects output buffer of length at least ${Z}`)}var f80=()=>{};function RC0($){if(typeof $!=="string")throw Error(`utf8ToBytes expected string, got ${typeof $}`);return new Uint8Array(new TextEncoder().encode($))}function Pk($){if(typeof $==="string")$=RC0($);if(!HC0($))throw Error(`expected Uint8Array, got ${typeof $}`);return $}class Hk{clone(){return this._cloneInto()}}function x80($){let Q=(X)=>$().update(Pk(X)).digest(),Z=$();return Q.outputLen=Z.outputLen,Q.blockLen=Z.blockLen,Q.create=()=>$(),Q}var HC0=($)=>$ instanceof Uint8Array,k80=($)=>new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4)),jC0,X91;var b80=p(()=>{/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */jC0=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!jC0)throw Error("Non little-endian hardware is not supported");X91={}.toString});function NC0($,Q=!1){if(Q)return{h:Number($&qL),l:Number($>>v80&qL)};return{h:Number($>>v80&qL)|0,l:Number($&qL)|0}}function y80($,Q=!1){let Z=new Uint32Array($.length),X=new Uint32Array($.length);for(let Y=0;Y<$.length;Y++){let{h:z,l:J}=NC0($[Y],Q);[Z[Y],X[Y]]=[z,J]}return[Z,X]}var qL,v80,g80=($,Q,Z)=>$<<Z|Q>>>32-Z,h80=($,Q,Z)=>Q<<Z|$>>>32-Z,m80=($,Q,Z)=>Q<<Z-32|$>>>64-Z,p80=($,Q,Z)=>$<<Z-32|Q>>>64-Z;var u80=p(()=>{qL=BigInt(4294967295),v80=BigInt(32)});function EC0($,Q=24){let Z=new Uint32Array(10);for(let X=24-Q;X<24;X++){for(let J=0;J<10;J++)Z[J]=$[J]^$[J+10]^$[J+20]^$[J+30]^$[J+40];for(let J=0;J<10;J+=2){let q=(J+8)%10,W=(J+2)%10,G=Z[W],U=Z[W+1],D=c80(G,U,1)^Z[q],P=d80(G,U,1)^Z[q+1];for(let H=0;H<50;H+=10)$[J+H]^=D,$[J+H+1]^=P}let Y=$[2],z=$[3];for(let J=0;J<24;J++){let q=i80[J],W=c80(Y,z,q),G=d80(Y,z,q),U=l80[J];Y=$[U],z=$[U+1],$[U]=W,$[U+1]=G}for(let J=0;J<50;J+=10){for(let q=0;q<10;q++)Z[q]=$[J+q];for(let q=0;q<10;q++)$[J+q]^=~Z[(q+2)%10]&Z[(q+4)%10]}$[0]^=wC0[X],$[1]^=BC0[X]}Z.fill(0)}var l80,i80,o80,CC0,uD,LC0,TC0,FC0,AC0,wC0,BC0,c80=($,Q,Z)=>Z>32?m80($,Q,Z):g80($,Q,Z),d80=($,Q,Z)=>Z>32?p80($,Q,Z):h80($,Q,Z),jk,IC0=($,Q,Z)=>x80(()=>new jk(Q,$,Z)),n80;var r80=p(()=>{f80();u80();b80();[l80,i80,o80]=[[],[],[]],CC0=BigInt(0),uD=BigInt(1),LC0=BigInt(2),TC0=BigInt(7),FC0=BigInt(256),AC0=BigInt(113);for(let $=0,Q=uD,Z=1,X=0;$<24;$++){[Z,X]=[X,(2*Z+3*X)%5],l80.push(2*(5*X+Z)),i80.push(($+1)*($+2)/2%64);let Y=CC0;for(let z=0;z<7;z++)if(Q=(Q<<uD^(Q>>TC0)*AC0)%FC0,Q&LC0)Y^=uD<<(uD<<BigInt(z))-uD;o80.push(Y)}[wC0,BC0]=y80(o80,!0);jk=class jk extends Hk{constructor($,Q,Z,X=!1,Y=24){super();if(this.blockLen=$,this.suffix=Q,this.outputLen=Z,this.enableXOF=X,this.rounds=Y,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ok(Z),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=k80(this.state)}keccak(){EC0(this.state32,this.rounds),this.posOut=0,this.pos=0}update($){Mk(this);let{blockLen:Q,state:Z}=this;$=Pk($);let X=$.length;for(let Y=0;Y<X;){let z=Math.min(Q-this.pos,X-Y);for(let J=0;J<z;J++)Z[this.pos++]^=$[Y++];if(this.pos===Q)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:$,suffix:Q,pos:Z,blockLen:X}=this;if($[Z]^=Q,(Q&128)!==0&&Z===X-1)this.keccak();$[X-1]^=128,this.keccak()}writeInto($){Mk(this,!1),Dk($),this.finish();let Q=this.state,{blockLen:Z}=this;for(let X=0,Y=$.length;X<Y;){if(this.posOut>=Z)this.keccak();let z=Math.min(Z-this.posOut,Y-X);$.set(Q.subarray(this.posOut,this.posOut+z),X),this.posOut+=z,X+=z}return $}xofInto($){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto($)}xof($){return Ok($),this.xofInto(new Uint8Array($))}digestInto($){if(S80($,this),this.finished)throw Error("digest() was already called");return this.writeInto($),this.destroy(),$}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto($){let{blockLen:Q,suffix:Z,outputLen:X,rounds:Y,enableXOF:z}=this;return $||($=new jk(Q,Z,X,z,Y)),$.state32.set(this.state32),$.pos=this.pos,$.posOut=this.posOut,$.finished=this.finished,$.rounds=Y,$.suffix=Z,$.outputLen=X,$.enableXOF=z,$.destroyed=this.destroyed,$}};n80=IC0(1,136,32)});function K4($){let Q=f8($,"data");return P6(t80(Q))}var a80=!1,s80=function($){return n80($)},t80;var e80=p(()=>{r80();k8();t80=s80;K4._=s80;K4.lock=function(){a80=!0};K4.register=function($){if(a80)throw TypeError("keccak256 is locked");t80=$};Object.freeze(K4)});var cD=p(()=>{e80()});function $90($){$=$.toLowerCase();let Q=$.substring(2).split(""),Z=new Uint8Array(40);for(let Y=0;Y<40;Y++)Z[Y]=Q[Y].charCodeAt(0);let X=f8(K4(Z));for(let Y=0;Y<40;Y+=2){if(X[Y>>1]>>4>=8)Q[Y]=Q[Y].toUpperCase();if((X[Y>>1]&15)>=8)Q[Y+1]=Q[Y+1].toUpperCase()}return"0x"+Q.join("")}function fC0($){$=$.toUpperCase(),$=$.substring(4)+$.substring(0,2)+"00";let Q=$.split("").map((X)=>{return Rk[X]}).join("");while(Q.length>=Q90){let X=Q.substring(0,Q90);Q=parseInt(X,10)%97+Q.substring(X.length)}let Z=String(98-parseInt(Q,10)%97);while(Z.length<2)Z="0"+Z;return Z}function xC0($){$=$.toLowerCase();let Q=_C0;for(let Z=0;Z<$.length;Z++)Q=Q*SC0+kC0[$[Z]];return Q}function v2($){if(a0(typeof $==="string","invalid address","address",$),$.match(/^(0x)?[0-9a-fA-F]{40}$/)){if(!$.startsWith("0x"))$="0x"+$;let Q=$90($);return a0(!$.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||Q===$,"bad address checksum","address",$),Q}if($.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){a0($.substring(2,4)===fC0($),"bad icap checksum","address",$);let Q=xC0($.substring(4)).toString(16);while(Q.length<40)Q="0"+Q;return $90("0x"+Q)}a0(!1,"invalid address","address",$)}var _C0,SC0,Rk,Q90=15,kC0;var WL=p(()=>{cD();k8();_C0=BigInt(0),SC0=BigInt(36);Rk={};for(let $=0;$<10;$++)Rk[String($)]=String($);for(let $=0;$<26;$++)Rk[String.fromCharCode(65+$)]=String(10+$);kC0=function(){let $={};for(let Q=0;Q<36;Q++){let Z="0123456789abcdefghijklmnopqrstuvwxyz"[Q];$[Z]=BigInt(Q)}return $}()});function Nk($){let Q=v2($.from),X=J2($.nonce,"tx.nonce").toString(16);if(X==="0")X="0x";else if(X.length%2)X="0x0"+X;else X="0x"+X;return v2(a$(K4(Gk([Q,X])),12))}var Z90=p(()=>{cD();k8();WL()});function KL($){return $&&typeof $.getAddress==="function"}async function Ck($,Q){let Z=await Q;if(Z==null||Z==="0x0000000000000000000000000000000000000000")N1(typeof $!=="string","unconfigured name","UNCONFIGURED_NAME",{value:$}),a0(!1,"invalid AddressLike value; did not resolve to a value address","target",$);return v2(Z)}function _q($,Q){if(typeof $==="string"){if($.match(/^0x[0-9a-f]{40}$/i))return v2($);return N1(Q!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Ck($,Q.resolveName($))}else if(KL($))return Ck($,$.getAddress());else if($&&typeof $.then==="function")return Ck($,$);a0(!1,"unsupported addressable value","target",$)}var X90=p(()=>{k8();WL()});var eG=p(()=>{WL();Z90();X90()});function O1($,Q){let Z=!1;if(Q<0)Z=!0,Q*=-1;return new y5(m3,`${Z?"":"u"}int${Q}`,$,{signed:Z,width:Q})}function Z6($,Q){return new y5(m3,`bytes${Q?Q:""}`,$,{size:Q})}class y5{type;value;#$;_typedSymbol;constructor($,Q,Z,X){if(X==null)X=null;rG(m3,$,"Typed"),f1(this,{_typedSymbol:Y90,type:Q,value:Z}),this.#$=X,this.format()}format(){if(this.type==="array")throw Error("");else if(this.type==="dynamicArray")throw Error("");else if(this.type==="tuple")return`tuple(${this.value.map(($)=>$.format()).join(",")})`;return this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#$}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");if(this.#$===!0)return-1;if(this.#$===!1)return this.value.length;return null}static from($,Q){return new y5(m3,$,Q)}static uint8($){return O1($,8)}static uint16($){return O1($,16)}static uint24($){return O1($,24)}static uint32($){return O1($,32)}static uint40($){return O1($,40)}static uint48($){return O1($,48)}static uint56($){return O1($,56)}static uint64($){return O1($,64)}static uint72($){return O1($,72)}static uint80($){return O1($,80)}static uint88($){return O1($,88)}static uint96($){return O1($,96)}static uint104($){return O1($,104)}static uint112($){return O1($,112)}static uint120($){return O1($,120)}static uint128($){return O1($,128)}static uint136($){return O1($,136)}static uint144($){return O1($,144)}static uint152($){return O1($,152)}static uint160($){return O1($,160)}static uint168($){return O1($,168)}static uint176($){return O1($,176)}static uint184($){return O1($,184)}static uint192($){return O1($,192)}static uint200($){return O1($,200)}static uint208($){return O1($,208)}static uint216($){return O1($,216)}static uint224($){return O1($,224)}static uint232($){return O1($,232)}static uint240($){return O1($,240)}static uint248($){return O1($,248)}static uint256($){return O1($,256)}static uint($){return O1($,256)}static int8($){return O1($,-8)}static int16($){return O1($,-16)}static int24($){return O1($,-24)}static int32($){return O1($,-32)}static int40($){return O1($,-40)}static int48($){return O1($,-48)}static int56($){return O1($,-56)}static int64($){return O1($,-64)}static int72($){return O1($,-72)}static int80($){return O1($,-80)}static int88($){return O1($,-88)}static int96($){return O1($,-96)}static int104($){return O1($,-104)}static int112($){return O1($,-112)}static int120($){return O1($,-120)}static int128($){return O1($,-128)}static int136($){return O1($,-136)}static int144($){return O1($,-144)}static int152($){return O1($,-152)}static int160($){return O1($,-160)}static int168($){return O1($,-168)}static int176($){return O1($,-176)}static int184($){return O1($,-184)}static int192($){return O1($,-192)}static int200($){return O1($,-200)}static int208($){return O1($,-208)}static int216($){return O1($,-216)}static int224($){return O1($,-224)}static int232($){return O1($,-232)}static int240($){return O1($,-240)}static int248($){return O1($,-248)}static int256($){return O1($,-256)}static int($){return O1($,-256)}static bytes1($){return Z6($,1)}static bytes2($){return Z6($,2)}static bytes3($){return Z6($,3)}static bytes4($){return Z6($,4)}static bytes5($){return Z6($,5)}static bytes6($){return Z6($,6)}static bytes7($){return Z6($,7)}static bytes8($){return Z6($,8)}static bytes9($){return Z6($,9)}static bytes10($){return Z6($,10)}static bytes11($){return Z6($,11)}static bytes12($){return Z6($,12)}static bytes13($){return Z6($,13)}static bytes14($){return Z6($,14)}static bytes15($){return Z6($,15)}static bytes16($){return Z6($,16)}static bytes17($){return Z6($,17)}static bytes18($){return Z6($,18)}static bytes19($){return Z6($,19)}static bytes20($){return Z6($,20)}static bytes21($){return Z6($,21)}static bytes22($){return Z6($,22)}static bytes23($){return Z6($,23)}static bytes24($){return Z6($,24)}static bytes25($){return Z6($,25)}static bytes26($){return Z6($,26)}static bytes27($){return Z6($,27)}static bytes28($){return Z6($,28)}static bytes29($){return Z6($,29)}static bytes30($){return Z6($,30)}static bytes31($){return Z6($,31)}static bytes32($){return Z6($,32)}static address($){return new y5(m3,"address",$)}static bool($){return new y5(m3,"bool",!!$)}static bytes($){return new y5(m3,"bytes",$)}static string($){return new y5(m3,"string",$)}static array($,Q){throw Error("not implemented yet")}static tuple($,Q){throw Error("not implemented yet")}static overrides($){return new y5(m3,"overrides",Object.assign({},$))}static isTyped($){return $&&typeof $==="object"&&"_typedSymbol"in $&&$._typedSymbol===Y90}static dereference($,Q){if(y5.isTyped($)){if($.type!==Q)throw Error(`invalid type: expecetd ${Q}, got ${$.type}`);return $.value}return $}}var m3,Y90;var s$=p(()=>{k8();m3={};Y90=Symbol.for("_ethers_typed")});var Lk;var J90=p(()=>{eG();qk();s$();i7();Lk=class Lk extends Y9{constructor($){super("address","address",$,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode($,Q){let Z=y5.dereference(Q,"string");try{Z=v2(Z)}catch(X){return this._throwError(X.message,Q)}return $.writeValue(Z)}decode($){return v2(hD($.readValue(),20))}}});var Tk;var z90=p(()=>{i7();Tk=class Tk extends Y9{coder;constructor($){super($.name,$.type,"_",$.dynamic);this.coder=$}defaultValue(){return this.coder.defaultValue()}encode($,Q){return this.coder.encode($,Q)}decode($){return this.coder.decode($)}}});function Fk($,Q,Z){let X=[];if(Array.isArray(Z))X=Z;else if(Z&&typeof Z==="object"){let W={};X=Q.map((G)=>{let U=G.localName;return N1(U,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:G},value:Z}),N1(!W[U],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:G},value:Z}),W[U]=!0,Z[U]})}else a0(!1,"invalid tuple value","tuple",Z);a0(Q.length===X.length,"types/value length mismatch","tuple",Z);let Y=new tG,z=new tG,J=[];Q.forEach((W,G)=>{let U=X[G];if(W.dynamic){let D=z.length;W.encode(z,U);let P=Y.writeUpdatableValue();J.push((H)=>{P(H+D)})}else W.encode(Y,U)}),J.forEach((W)=>{W(Y.length)});let q=$.appendWriter(Y);return q+=$.appendWriter(z),q}function Ak($,Q){let Z=[],X=[],Y=$.subReader(0);return Q.forEach((z)=>{let J=null;if(z.dynamic){let q=$.readIndex(),W=Y.subReader(q);try{J=z.decode(W)}catch(G){if(r$(G,"BUFFER_OVERRUN"))throw G;J=G,J.baseType=z.name,J.name=z.localName,J.type=z.type}}else try{J=z.decode($)}catch(q){if(r$(q,"BUFFER_OVERRUN"))throw q;J=q,J.baseType=z.name,J.name=z.localName,J.type=z.type}if(J==null)throw Error("investigate");Z.push(J),X.push(z.localName||null)}),r4.fromItems(Z,X)}var wk;var Bk=p(()=>{k8();s$();i7();z90();wk=class wk extends Y9{coder;length;constructor($,Q,Z){let X=$.type+"["+(Q>=0?Q:"")+"]",Y=Q===-1||$.dynamic;super("array",X,Z,Y);f1(this,{coder:$,length:Q})}defaultValue(){let $=this.coder.defaultValue(),Q=[];for(let Z=0;Z<this.length;Z++)Q.push($);return Q}encode($,Q){let Z=y5.dereference(Q,"array");if(!Array.isArray(Z))this._throwError("expected array value",Z);let X=this.length;if(X===-1)X=Z.length,$.writeValue(Z.length);vD(Z.length,X,"coder array"+(this.localName?" "+this.localName:""));let Y=[];for(let z=0;z<Z.length;z++)Y.push(this.coder);return Fk($,Y,Z)}decode($){let Q=this.length;if(Q===-1)Q=$.readIndex(),N1(Q*v9<=$.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:$.bytes,offset:Q*v9,length:$.dataLength});let Z=[];for(let X=0;X<Q;X++)Z.push(new Tk(this.coder));return Ak($,Z)}}});var Ek;var q90=p(()=>{s$();i7();Ek=class Ek extends Y9{constructor($){super("bool","bool",$,!1)}defaultValue(){return!1}encode($,Q){let Z=y5.dereference(Q,"bool");return $.writeValue(Z?1:0)}decode($){return!!$.readValue()}}});var GL,Ik;var _k=p(()=>{k8();i7();GL=class GL extends Y9{constructor($,Q){super($,$,Q,!0)}defaultValue(){return"0x"}encode($,Q){Q=b2(Q);let Z=$.writeValue(Q.length);return Z+=$.writeBytes(Q),Z}decode($){return $.readBytes($.readIndex(),!0)}};Ik=class Ik extends GL{constructor($){super("bytes",$)}decode($){return P6(super.decode($))}}});var Sk;var W90=p(()=>{k8();s$();i7();Sk=class Sk extends Y9{size;constructor($,Q){let Z="bytes"+String($);super(Z,Z,Q,!1);f1(this,{size:$},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode($,Q){let Z=b2(y5.dereference(Q,this.type));if(Z.length!==this.size)this._throwError("incorrect data length",Q);return $.writeBytes(Z)}decode($){return P6($.readBytes(this.size))}}});var bC0,fk;var K90=p(()=>{i7();bC0=new Uint8Array([]);fk=class fk extends Y9{constructor($){super("null","",$,!1)}defaultValue(){return null}encode($,Q){if(Q!=null)this._throwError("not null",Q);return $.writeBytes(bC0)}decode($){return $.readBytes(0),null}}});var vC0,yC0,gC0,kk;var G90=p(()=>{k8();s$();i7();vC0=BigInt(0),yC0=BigInt(1),gC0=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");kk=class kk extends Y9{size;signed;constructor($,Q,Z){let X=(Q?"int":"uint")+$*8;super(X,X,Z,!1);f1(this,{size:$,signed:Q},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode($,Q){let Z=J2(y5.dereference(Q,this.type)),X=sG(gC0,v9*8);if(this.signed){let Y=sG(X,this.size*8-1);if(Z>Y||Z<-(Y+yC0))this._throwError("value out-of-bounds",Q);Z=Yk(Z,8*v9)}else if(Z<vC0||Z>sG(X,this.size*8))this._throwError("value out-of-bounds",Q);return $.writeValue(Z)}decode($){let Q=sG($.readValue(),this.size*8);if(this.signed)Q=Xk(Q,this.size*8);return Q}}});var xk;var U90=p(()=>{Kk();s$();_k();xk=class xk extends GL{constructor($){super("string",$)}defaultValue(){return""}encode($,Q){return super.encode($,mD(y5.dereference(Q,"string")))}decode($){return Wk(super.decode($))}}});var $U;var V90=p(()=>{s$();i7();Bk();$U=class $U extends Y9{coders;constructor($,Q){let Z=!1,X=[];$.forEach((z)=>{if(z.dynamic)Z=!0;X.push(z.type)});let Y="tuple("+X.join(",")+")";super("tuple",Y,Q,Z);f1(this,{coders:Object.freeze($.slice())})}defaultValue(){let $=[];this.coders.forEach((Z)=>{$.push(Z.defaultValue())});let Q=this.coders.reduce((Z,X)=>{let Y=X.localName;if(Y){if(!Z[Y])Z[Y]=0;Z[Y]++}return Z},{});return this.coders.forEach((Z,X)=>{let Y=Z.localName;if(!Y||Q[Y]!==1)return;if(Y==="length")Y="_length";if($[Y]!=null)return;$[Y]=$[X]}),Object.freeze($)}encode($,Q){let Z=y5.dereference(Q,"tuple");return Fk($,this.coders,Z)}decode($){return Ak($,this.coders)}}});function bk($,Q){return{address:v2($),storageKeys:Q.map((Z,X)=>{return a0(o4(Z,32),"invalid slot",`storageKeys[${X}]`,Z),Z.toLowerCase()})}}function vk($){if(Array.isArray($))return $.map((Z,X)=>{if(Array.isArray(Z))return a0(Z.length===2,"invalid slot set",`value[${X}]`,Z),bk(Z[0],Z[1]);return a0(Z!=null&&typeof Z==="object","invalid address-slot set","value",$),bk(Z.address,Z.storageKeys)});a0($!=null&&typeof $==="object","invalid access list","value",$);let Q=Object.keys($).map((Z)=>{let X=$[Z].reduce((Y,z)=>{return Y[z]=!0,Y},{});return bk(Z,Object.keys(X).sort())});return Q.sort((Z,X)=>Z.address.localeCompare(X.address)),Q}var O90=p(()=>{eG();k8()});var D90=p(()=>{O90()});function oY($){return K4(mD($))}var M90=p(()=>{cD();k8()});var yk=p(()=>{M90()});function y2($){let Q=new Set;return $.forEach((Z)=>Q.add(Z)),Object.freeze(Q)}class r7{#$;#Q;get offset(){return this.#$}get length(){return this.#Q.length-this.#$}constructor($){this.#$=0,this.#Q=$.slice()}clone(){return new r7(this.#Q)}reset(){this.#$=0}#Z($=0,Q=0){return new r7(this.#Q.slice($,Q).map((Z)=>{return Object.freeze(Object.assign({},Z,{match:Z.match-$,linkBack:Z.linkBack-$,linkNext:Z.linkNext-$}))}))}popKeyword($){let Q=this.peek();if(Q.type!=="KEYWORD"||!$.has(Q.text))throw Error(`expected keyword ${Q.text}`);return this.pop().text}popType($){if(this.peek().type!==$){let Q=this.peek();throw Error(`expected ${$}; got ${Q.type} ${JSON.stringify(Q.text)}`)}return this.pop().text}popParen(){let $=this.peek();if($.type!=="OPEN_PAREN")throw Error("bad start");let Q=this.#Z(this.#$+1,$.match+1);return this.#$=$.match+1,Q}popParams(){let $=this.peek();if($.type!=="OPEN_PAREN")throw Error("bad start");let Q=[];while(this.#$<$.match-1){let Z=this.peek().linkNext;Q.push(this.#Z(this.#$+1,Z)),this.#$=Z}return this.#$=$.match+1,Q}peek(){if(this.#$>=this.#Q.length)throw Error("out-of-bounds");return this.#Q[this.#$]}peekKeyword($){let Q=this.peekType("KEYWORD");return Q!=null&&$.has(Q)?Q:null}peekType($){if(this.length===0)return null;let Q=this.peek();return Q.type===$?Q.text:null}pop(){let $=this.peek();return this.#$++,$}toString(){let $=[];for(let Q=this.#$;Q<this.#Q.length;Q++){let Z=this.#Q[Q];$.push(`${Z.type}:${Z.text}`)}return`<TokenString ${$.join(" ")}>`}}function rY($){let Q=[],Z=(J)=>{let q=z<$.length?JSON.stringify($[z]):"$EOI";throw Error(`invalid token ${q} at ${z}: ${J}`)},X=[],Y=[],z=0;while(z<$.length){let J=$.substring(z),q=J.match(oC0);if(q)z+=q[1].length,J=$.substring(z);let W={depth:X.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:z,value:-1};Q.push(W);let G=iC0[J[0]]||"";if(G){if(W.type=G,W.text=J[0],z++,G==="OPEN_PAREN")X.push(Q.length-1),Y.push(Q.length-1);else if(G=="CLOSE_PAREN"){if(X.length===0)Z("no matching open bracket");W.match=X.pop(),Q[W.match].match=Q.length-1,W.depth--,W.linkBack=Y.pop(),Q[W.linkBack].linkNext=Q.length-1}else if(G==="COMMA")W.linkBack=Y.pop(),Q[W.linkBack].linkNext=Q.length-1,Y.push(Q.length-1);else if(G==="OPEN_BRACKET")W.type="BRACKET";else if(G==="CLOSE_BRACKET"){let U=Q.pop().text;if(Q.length>0&&Q[Q.length-1].type==="NUMBER"){let D=Q.pop().text;U=D+U,Q[Q.length-1].value=n4(D)}if(Q.length===0||Q[Q.length-1].type!=="BRACKET")throw Error("missing opening bracket");Q[Q.length-1].text+=U}continue}if(q=J.match(rC0),q){if(W.text=q[1],z+=W.text.length,lC0.has(W.text)){W.type="KEYWORD";continue}if(W.text.match(_90)){W.type="TYPE";continue}W.type="ID";continue}if(q=J.match(nC0),q){W.text=q[1],W.type="NUMBER",z+=W.text.length;continue}throw Error(`unexpected token ${JSON.stringify(J[0])} at position ${z}`)}return new r7(Q.map((J)=>Object.freeze(J)))}function P90($,Q){let Z=[];for(let X in Q.keys())if($.has(X))Z.push(X);if(Z.length>1)throw Error(`conflicting types: ${Z.join(", ")}`)}function UL($,Q){if(Q.peekKeyword(B90)){let Z=Q.pop().text;if(Z!==$)throw Error(`expected ${$}, got ${Z}`)}return Q.popType("ID")}function cZ($,Q){let Z=new Set;while(!0){let X=$.peekType("KEYWORD");if(X==null||Q&&!Q.has(X))break;if($.pop(),Z.has(X))throw Error(`duplicate keywords: ${JSON.stringify(X)}`);Z.add(X)}return Object.freeze(Z)}function S90($){let Q=cZ($,pC0);if(P90(Q,y2("constant payable nonpayable".split(" "))),P90(Q,y2("pure view payable nonpayable".split(" "))),Q.has("view"))return"view";if(Q.has("pure"))return"pure";if(Q.has("payable"))return"payable";if(Q.has("nonpayable"))return"nonpayable";if(Q.has("constant"))return"view";return"nonpayable"}function uZ($,Q){return $.popParams().map((Z)=>R6.from(Z,Q))}function f90($){if($.peekType("AT")){if($.pop(),$.peekType("NUMBER"))return J2($.pop().text);throw Error("invalid gas")}return null}function Sq($){if($.length)throw Error(`unexpected tokens at offset ${$.offset}: ${$.toString()}`)}function H90($){let Q=$.match(_90);if(a0(Q,"invalid type","type",$),$==="uint")return"uint256";if($==="int")return"int256";if(Q[2]){let Z=parseInt(Q[2]);a0(Z!==0&&Z<=32,"invalid bytes length","type",$)}else if(Q[3]){let Z=parseInt(Q[3]);a0(Z!==0&&Z<=256&&Z%8===0,"invalid numeric width","type",$)}return $}class R6{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor($,Q,Z,X,Y,z,J,q){if(rG($,Y8,"ParamType"),Object.defineProperty(this,G4,{value:j90}),z)z=Object.freeze(z.slice());if(X==="array"){if(J==null||q==null)throw Error("")}else if(J!=null||q!=null)throw Error("");if(X==="tuple"){if(z==null)throw Error("")}else if(z!=null)throw Error("");f1(this,{name:Q,type:Z,baseType:X,indexed:Y,components:z,arrayLength:J,arrayChildren:q})}format($){if($==null)$="sighash";if($==="json"){let Z=this.name||"";if(this.isArray()){let Y=JSON.parse(this.arrayChildren.format("json"));return Y.name=Z,Y.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(Y)}let X={type:this.baseType==="tuple"?"tuple":this.type,name:Z};if(typeof this.indexed==="boolean")X.indexed=this.indexed;if(this.isTuple())X.components=this.components.map((Y)=>JSON.parse(Y.format($)));return JSON.stringify(X)}let Q="";if(this.isArray())Q+=this.arrayChildren.format($),Q+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`;else if(this.isTuple())Q+="("+this.components.map((Z)=>Z.format($)).join($==="full"?", ":",")+")";else Q+=this.type;if($!=="sighash"){if(this.indexed===!0)Q+=" indexed";if($==="full"&&this.name)Q+=" "+this.name}return Q}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk($,Q){if(this.isArray()){if(!Array.isArray($))throw Error("invalid array value");if(this.arrayLength!==-1&&$.length!==this.arrayLength)throw Error("array is wrong length");let Z=this;return $.map((X)=>Z.arrayChildren.walk(X,Q))}if(this.isTuple()){if(!Array.isArray($))throw Error("invalid tuple value");if($.length!==this.components.length)throw Error("array is wrong length");let Z=this;return $.map((X,Y)=>Z.components[Y].walk(X,Q))}return Q(this.type,$)}#$($,Q,Z,X){if(this.isArray()){if(!Array.isArray(Q))throw Error("invalid array value");if(this.arrayLength!==-1&&Q.length!==this.arrayLength)throw Error("array is wrong length");let z=this.arrayChildren,J=Q.slice();J.forEach((q,W)=>{z.#$($,q,Z,(G)=>{J[W]=G})}),X(J);return}if(this.isTuple()){let z=this.components,J;if(Array.isArray(Q))J=Q.slice();else{if(Q==null||typeof Q!=="object")throw Error("invalid tuple value");J=z.map((q)=>{if(!q.name)throw Error("cannot use object value with unnamed components");if(!(q.name in Q))throw Error(`missing value for component ${q.name}`);return Q[q.name]})}if(J.length!==this.components.length)throw Error("array is wrong length");J.forEach((q,W)=>{z[W].#$($,q,Z,(G)=>{J[W]=G})}),X(J);return}let Y=Z(this.type,Q);if(Y.then)$.push(async function(){X(await Y)}());else X(Y)}async walkAsync($,Q){let Z=[],X=[$];if(this.#$(Z,$,Q,(Y)=>{X[0]=Y}),Z.length)await Promise.all(Z);return X[0]}static from($,Q){if(R6.isParamType($))return $;if(typeof $==="string")try{return R6.from(rY($),Q)}catch(J){a0(!1,"invalid param type","obj",$)}else if($ instanceof r7){let J="",q="",W=null;if(cZ($,y2(["tuple"])).has("tuple")||$.peekType("OPEN_PAREN"))q="tuple",W=$.popParams().map((N)=>R6.from(N)),J=`tuple(${W.map((N)=>N.format()).join(",")})`;else J=H90($.popType("TYPE")),q=J;let G=null,U=null;while($.length&&$.peekType("BRACKET")){let N=$.pop();G=new R6(Y8,"",J,q,null,W,U,G),U=N.value,J+=N.text,q="array",W=null}let D=null;if(cZ($,uC0).has("indexed")){if(!Q)throw Error("");D=!0}let H=$.peekType("ID")?$.pop().text:"";if($.length)throw Error("leftover tokens");return new R6(Y8,H,J,q,D,W,U,G)}let Z=$.name;a0(!Z||typeof Z==="string"&&Z.match(I90),"invalid name","obj.name",Z);let X=$.indexed;if(X!=null)a0(Q,"parameter cannot be indexed","obj.indexed",$.indexed),X=!!X;let Y=$.type,z=Y.match(aC0);if(z){let J=parseInt(z[2]||"-1"),q=R6.from({type:z[1],components:$.components});return new R6(Y8,Z||"",Y,"array",X,null,J,q)}if(Y==="tuple"||Y.startsWith("tuple(")||Y.startsWith("(")){let J=$.components!=null?$.components.map((W)=>R6.from(W)):null;return new R6(Y8,Z||"",Y,"tuple",X,J,null,null)}return Y=H90($.type),new R6(Y8,Z||"",Y,Y,X,null,null,null)}static isParamType($){return $&&$[G4]===j90}}class dZ{type;inputs;constructor($,Q,Z){rG($,Y8,"Fragment"),Z=Object.freeze(Z.slice()),f1(this,{type:Q,inputs:Z})}static from($){if(typeof $==="string"){try{dZ.from(JSON.parse($))}catch(Q){}return dZ.from(rY($))}if($ instanceof r7)switch($.peekKeyword(B90)){case"constructor":return p3.from($);case"error":return z2.from($);case"event":return o7.from($);case"fallback":case"receive":return t$.from($);case"function":return n7.from($);case"struct":return nY.from($)}else if(typeof $==="object"){switch($.type){case"constructor":return p3.from($);case"error":return z2.from($);case"event":return o7.from($);case"fallback":case"receive":return t$.from($);case"function":return n7.from($);case"struct":return nY.from($)}N1(!1,`unsupported type: ${$.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}a0(!1,"unsupported frgament object","obj",$)}static isConstructor($){return p3.isFragment($)}static isError($){return z2.isFragment($)}static isEvent($){return o7.isFragment($)}static isFunction($){return n7.isFragment($)}static isStruct($){return nY.isFragment($)}}function dD($,Q){return"("+Q.map((Z)=>Z.format($)).join($==="full"?", ":",")+")"}var hC0="external public payable override",mC0,A90="constant external internal payable private public pure view override",pC0,w90="constructor error event fallback function receive struct",B90,E90="calldata memory storage payable indexed",uC0,cC0="tuple returns",dC0,lC0,iC0,oC0,nC0,rC0,I90,_90,aC0,Y8,G4,j90="_ParamTypeInternal",R90="_ErrorInternal",N90="_EventInternal",C90="_ConstructorInternal",L90="_FallbackInternal",T90="_FunctionInternal",F90="_StructInternal",QU,z2,o7,p3,t$,n7,nY;var gk=p(()=>{k8();yk();mC0=y2(hC0.split(" ")),pC0=y2(A90.split(" ")),B90=y2(w90.split(" ")),uC0=y2(E90.split(" ")),dC0=[w90,E90,cC0,A90].join(" "),lC0=y2(dC0.split(" ")),iC0={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},oC0=new RegExp("^(\\s*)"),nC0=new RegExp("^([0-9]+)"),rC0=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),I90=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),_90=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");aC0=new RegExp(/^(.*)\[([0-9]*)\]$/);Y8={},G4=Symbol.for("_ethers_internal");QU=class QU extends dZ{name;constructor($,Q,Z,X){super($,Q,X);a0(typeof Z==="string"&&Z.match(I90),"invalid identifier","name",Z),X=Object.freeze(X.slice()),f1(this,{name:Z})}};z2=class z2 extends QU{constructor($,Q,Z){super($,"error",Q,Z);Object.defineProperty(this,G4,{value:R90})}get selector(){return oY(this.format("sighash")).substring(0,10)}format($){if($==null)$="sighash";if($==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((Z)=>JSON.parse(Z.format($)))});let Q=[];if($!=="sighash")Q.push("error");return Q.push(this.name+dD($,this.inputs)),Q.join(" ")}static from($){if(z2.isFragment($))return $;if(typeof $==="string")return z2.from(rY($));else if($ instanceof r7){let Q=UL("error",$),Z=uZ($);return Sq($),new z2(Y8,Q,Z)}return new z2(Y8,$.name,$.inputs?$.inputs.map(R6.from):[])}static isFragment($){return $&&$[G4]===R90}};o7=class o7 extends QU{anonymous;constructor($,Q,Z,X){super($,"event",Q,Z);Object.defineProperty(this,G4,{value:N90}),f1(this,{anonymous:X})}get topicHash(){return oY(this.format("sighash"))}format($){if($==null)$="sighash";if($==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((Z)=>JSON.parse(Z.format($)))});let Q=[];if($!=="sighash")Q.push("event");if(Q.push(this.name+dD($,this.inputs)),$!=="sighash"&&this.anonymous)Q.push("anonymous");return Q.join(" ")}static getTopicHash($,Q){return Q=(Q||[]).map((X)=>R6.from(X)),new o7(Y8,$,Q,!1).topicHash}static from($){if(o7.isFragment($))return $;if(typeof $==="string")try{return o7.from(rY($))}catch(Q){a0(!1,"invalid event fragment","obj",$)}else if($ instanceof r7){let Q=UL("event",$),Z=uZ($,!0),X=!!cZ($,y2(["anonymous"])).has("anonymous");return Sq($),new o7(Y8,Q,Z,X)}return new o7(Y8,$.name,$.inputs?$.inputs.map((Q)=>R6.from(Q,!0)):[],!!$.anonymous)}static isFragment($){return $&&$[G4]===N90}};p3=class p3 extends dZ{payable;gas;constructor($,Q,Z,X,Y){super($,Q,Z);Object.defineProperty(this,G4,{value:C90}),f1(this,{payable:X,gas:Y})}format($){if(N1($!=null&&$!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),$==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map((Z)=>JSON.parse(Z.format($)))});let Q=[`constructor${dD($,this.inputs)}`];if(this.payable)Q.push("payable");if(this.gas!=null)Q.push(`@${this.gas.toString()}`);return Q.join(" ")}static from($){if(p3.isFragment($))return $;if(typeof $==="string")try{return p3.from(rY($))}catch(Q){a0(!1,"invalid constuctor fragment","obj",$)}else if($ instanceof r7){cZ($,y2(["constructor"]));let Q=uZ($),Z=!!cZ($,mC0).has("payable"),X=f90($);return Sq($),new p3(Y8,"constructor",Q,Z,X)}return new p3(Y8,"constructor",$.inputs?$.inputs.map(R6.from):[],!!$.payable,$.gas!=null?$.gas:null)}static isFragment($){return $&&$[G4]===C90}};t$=class t$ extends dZ{payable;constructor($,Q,Z){super($,"fallback",Q);Object.defineProperty(this,G4,{value:L90}),f1(this,{payable:Z})}format($){let Q=this.inputs.length===0?"receive":"fallback";if($==="json"){let Z=this.payable?"payable":"nonpayable";return JSON.stringify({type:Q,stateMutability:Z})}return`${Q}()${this.payable?" payable":""}`}static from($){if(t$.isFragment($))return $;if(typeof $==="string")try{return t$.from(rY($))}catch(Q){a0(!1,"invalid fallback fragment","obj",$)}else if($ instanceof r7){let Q=$.toString(),Z=$.peekKeyword(y2(["fallback","receive"]));if(a0(Z,"type must be fallback or receive","obj",Q),$.popKeyword(y2(["fallback","receive"]))==="receive"){let J=uZ($);return a0(J.length===0,"receive cannot have arguments","obj.inputs",J),cZ($,y2(["payable"])),Sq($),new t$(Y8,[],!0)}let Y=uZ($);if(Y.length)a0(Y.length===1&&Y[0].type==="bytes","invalid fallback inputs","obj.inputs",Y.map((J)=>J.format("minimal")).join(", "));else Y=[R6.from("bytes")];let z=S90($);if(a0(z==="nonpayable"||z==="payable","fallback cannot be constants","obj.stateMutability",z),cZ($,y2(["returns"])).has("returns")){let J=uZ($);a0(J.length===1&&J[0].type==="bytes","invalid fallback outputs","obj.outputs",J.map((q)=>q.format("minimal")).join(", "))}return Sq($),new t$(Y8,Y,z==="payable")}if($.type==="receive")return new t$(Y8,[],!0);if($.type==="fallback"){let Q=[R6.from("bytes")],Z=$.stateMutability==="payable";return new t$(Y8,Q,Z)}a0(!1,"invalid fallback description","obj",$)}static isFragment($){return $&&$[G4]===L90}};n7=class n7 extends QU{constant;outputs;stateMutability;payable;gas;constructor($,Q,Z,X,Y,z){super($,"function",Q,X);Object.defineProperty(this,G4,{value:T90}),Y=Object.freeze(Y.slice()),f1(this,{constant:Z==="view"||Z==="pure",gas:z,outputs:Y,payable:Z==="payable",stateMutability:Z})}get selector(){return oY(this.format("sighash")).substring(0,10)}format($){if($==null)$="sighash";if($==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map((Z)=>JSON.parse(Z.format($))),outputs:this.outputs.map((Z)=>JSON.parse(Z.format($)))});let Q=[];if($!=="sighash")Q.push("function");if(Q.push(this.name+dD($,this.inputs)),$!=="sighash"){if(this.stateMutability!=="nonpayable")Q.push(this.stateMutability);if(this.outputs&&this.outputs.length)Q.push("returns"),Q.push(dD($,this.outputs));if(this.gas!=null)Q.push(`@${this.gas.toString()}`)}return Q.join(" ")}static getSelector($,Q){return Q=(Q||[]).map((X)=>R6.from(X)),new n7(Y8,$,"view",Q,[],null).selector}static from($){if(n7.isFragment($))return $;if(typeof $==="string")try{return n7.from(rY($))}catch(Z){a0(!1,"invalid function fragment","obj",$)}else if($ instanceof r7){let Z=UL("function",$),X=uZ($),Y=S90($),z=[];if(cZ($,y2(["returns"])).has("returns"))z=uZ($);let J=f90($);return Sq($),new n7(Y8,Z,Y,X,z,J)}let Q=$.stateMutability;if(Q==null){if(Q="payable",typeof $.constant==="boolean"){if(Q="view",!$.constant){if(Q="payable",typeof $.payable==="boolean"&&!$.payable)Q="nonpayable"}}else if(typeof $.payable==="boolean"&&!$.payable)Q="nonpayable"}return new n7(Y8,$.name,Q,$.inputs?$.inputs.map(R6.from):[],$.outputs?$.outputs.map(R6.from):[],$.gas!=null?$.gas:null)}static isFragment($){return $&&$[G4]===T90}};nY=class nY extends QU{constructor($,Q,Z){super($,"struct",Q,Z);Object.defineProperty(this,G4,{value:F90})}format(){throw Error("@TODO")}static from($){if(typeof $==="string")try{return nY.from(rY($))}catch(Q){a0(!1,"invalid struct fragment","obj",$)}else if($ instanceof r7){let Q=UL("struct",$),Z=uZ($);return Sq($),new nY(Y8,Q,Z)}return new nY(Y8,$.name,$.inputs?$.inputs.map(R6.from):[])}static isFragment($){return $&&$[G4]===F90}}});function eC0($,Q,Z,X){let Y="missing revert data",z=null,J=null,q=null;if(Z){Y="execution reverted";let G=f8(Z);if(Z=P6(Z),G.length===0)Y+=" (no data present; likely require(false) occurred",z="require(false)";else if(G.length%32!==4)Y+=" (could not decode reason; invalid data length)";else if(P6(G.slice(0,4))==="0x08c379a0")try{z=X.decode(["string"],G.slice(4))[0],q={signature:"Error(string)",name:"Error",args:[z]},Y+=`: ${JSON.stringify(z)}`}catch(U){Y+=" (could not decode reason; invalid string data)"}else if(P6(G.slice(0,4))==="0x4e487b71")try{let U=Number(X.decode(["uint256"],G.slice(4))[0]);q={signature:"Panic(uint256)",name:"Panic",args:[U]},z=`Panic due to ${u3.get(U)||"UNKNOWN"}(${U})`,Y+=`: ${z}`}catch(U){Y+=" (could not decode panic code)"}else Y+=" (unknown custom error)"}let W={to:Q.to?v2(Q.to):null,data:Q.data||"0x"};if(Q.from)W.from=v2(Q.from);return pZ(Y,"CALL_EXCEPTION",{action:$,data:Z,reason:z,transaction:W,invocation:J,revert:q})}class fq{#$($){if($.isArray())return new wk(this.#$($.arrayChildren),$.arrayLength,$.name);if($.isTuple())return new $U($.components.map((Z)=>this.#$(Z)),$.name);switch($.baseType){case"address":return new Lk($.name);case"bool":return new Ek($.name);case"string":return new xk($.name);case"bytes":return new Ik($.name);case"":return new fk($.name)}let Q=$.type.match(tC0);if(Q){let Z=parseInt(Q[2]||"256");return a0(Z!==0&&Z<=256&&Z%8===0,"invalid "+Q[1]+" bit length","param",$),new kk(Z/8,Q[1]==="int",$.name)}if(Q=$.type.match(sC0),Q){let Z=parseInt(Q[1]);return a0(Z!==0&&Z<=32,"invalid bytes length","param",$),new Sk(Z,$.name)}a0(!1,"invalid type","type",$.type)}getDefaultValue($){let Q=$.map((X)=>this.#$(R6.from(X)));return new $U(Q,"_").defaultValue()}encode($,Q){vD(Q.length,$.length,"types/values length mismatch");let Z=$.map((z)=>this.#$(R6.from(z))),X=new $U(Z,"_"),Y=new tG;return X.encode(Y,Q),Y.data}decode($,Q,Z){let X=$.map((z)=>this.#$(R6.from(z)));return new $U(X,"_").decode(new zL(Q,Z,k90))}static _setDefaultMaxInflation($){a0(typeof $==="number"&&Number.isInteger($),"invalid defaultMaxInflation factor","value",$),k90=$}static defaultAbiCoder(){if(hk==null)hk=new fq;return hk}static getBuiltinCallException($,Q,Z){return eC0($,Q,Z,fq.defaultAbiCoder())}}var u3,sC0,tC0,hk=null,k90=1024;var x90=p(()=>{k8();i7();J90();Bk();q90();_k();W90();K90();G90();U90();V90();gk();eG();k8();u3=new Map;u3.set(0,"GENERIC_PANIC");u3.set(1,"ASSERT_FALSE");u3.set(17,"OVERFLOW");u3.set(18,"DIVIDE_BY_ZERO");u3.set(33,"ENUM_RANGE_ERROR");u3.set(34,"BAD_STORAGE_DATA");u3.set(49,"STACK_UNDERFLOW");u3.set(50,"ARRAY_RANGE_ERROR");u3.set(65,"OUT_OF_MEMORY");u3.set(81,"UNINITIALIZED_FUNCTION_CALL");sC0=new RegExp(/^bytes([0-9]*)$/),tC0=new RegExp(/^(u?int)([0-9]*)$/)});class VL{fragment;name;signature;topic;args;constructor($,Q,Z){let X=$.name,Y=$.format();f1(this,{fragment:$,name:X,signature:Y,topic:Q,args:Z})}}class OL{fragment;name;args;signature;selector;value;constructor($,Q,Z,X){let Y=$.name,z=$.format();f1(this,{fragment:$,name:Y,args:Z,signature:z,selector:Q,value:X})}}class DL{fragment;name;args;signature;selector;constructor($,Q,Z){let X=$.name,Y=$.format();f1(this,{fragment:$,name:X,args:Z,signature:Y,selector:Q})}}class lD{hash;_isIndexed;static isIndexed($){return!!($&&$._isIndexed)}constructor($){f1(this,{hash:$,_isIndexed:!0})}}class d8{fragments;deploy;fallback;receive;#$;#Q;#Z;#X;constructor($){let Q=[];if(typeof $==="string")Q=JSON.parse($);else Q=$;this.#Z=new Map,this.#$=new Map,this.#Q=new Map;let Z=[];for(let z of Q)try{Z.push(dZ.from(z))}catch(J){console.log(`[Warning] Invalid Fragment ${JSON.stringify(z)}:`,J.message)}f1(this,{fragments:Object.freeze(Z)});let X=null,Y=!1;if(this.#X=this.getAbiCoder(),this.fragments.forEach((z,J)=>{let q;switch(z.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}f1(this,{deploy:z});return;case"fallback":if(z.inputs.length===0)Y=!0;else a0(!X||z.payable!==X.payable,"conflicting fallback fragments",`fragments[${J}]`,z),X=z,Y=X.payable;return;case"function":q=this.#Z;break;case"event":q=this.#Q;break;case"error":q=this.#$;break;default:return}let W=z.format();if(q.has(W))return;q.set(W,z)}),!this.deploy)f1(this,{deploy:p3.from("constructor()")});f1(this,{fallback:X,receive:Y})}format($){let Q=$?"minimal":"full";return this.fragments.map((X)=>X.format(Q))}formatJson(){let $=this.fragments.map((Q)=>Q.format("json"));return JSON.stringify($.map((Q)=>JSON.parse(Q)))}getAbiCoder(){return fq.defaultAbiCoder()}#Y($,Q,Z){if(o4($)){let Y=$.toLowerCase();for(let z of this.#Z.values())if(Y===z.selector)return z;return null}if($.indexOf("(")===-1){let Y=[];for(let[z,J]of this.#Z)if(z.split("(")[0]===$)Y.push(J);if(Q){let z=Q.length>0?Q[Q.length-1]:null,J=Q.length,q=!0;if(y5.isTyped(z)&&z.type==="overrides")q=!1,J--;for(let W=Y.length-1;W>=0;W--){let G=Y[W].inputs.length;if(G!==J&&(!q||G!==J-1))Y.splice(W,1)}for(let W=Y.length-1;W>=0;W--){let G=Y[W].inputs;for(let U=0;U<Q.length;U++){if(!y5.isTyped(Q[U]))continue;if(U>=G.length){if(Q[U].type==="overrides")continue;Y.splice(W,1);break}if(Q[U].type!==G[U].baseType){Y.splice(W,1);break}}}}if(Y.length===1&&Q&&Q.length!==Y[0].inputs.length){let z=Q[Q.length-1];if(z==null||Array.isArray(z)||typeof z!=="object")Y.splice(0,1)}if(Y.length===0)return null;if(Y.length>1&&Z){let z=Y.map((J)=>JSON.stringify(J.format())).join(", ");a0(!1,`ambiguous function description (i.e. matches ${z})`,"key",$)}return Y[0]}let X=this.#Z.get(n7.from($).format());if(X)return X;return null}getFunctionName($){let Q=this.#Y($,null,!1);return a0(Q,"no matching function","key",$),Q.name}hasFunction($){return!!this.#Y($,null,!1)}getFunction($,Q){return this.#Y($,Q||null,!0)}forEachFunction($){let Q=Array.from(this.#Z.keys());Q.sort((Z,X)=>Z.localeCompare(X));for(let Z=0;Z<Q.length;Z++){let X=Q[Z];$(this.#Z.get(X),Z)}}#z($,Q,Z){if(o4($)){let Y=$.toLowerCase();for(let z of this.#Q.values())if(Y===z.topicHash)return z;return null}if($.indexOf("(")===-1){let Y=[];for(let[z,J]of this.#Q)if(z.split("(")[0]===$)Y.push(J);if(Q){for(let z=Y.length-1;z>=0;z--)if(Y[z].inputs.length<Q.length)Y.splice(z,1);for(let z=Y.length-1;z>=0;z--){let J=Y[z].inputs;for(let q=0;q<Q.length;q++){if(!y5.isTyped(Q[q]))continue;if(Q[q].type!==J[q].baseType){Y.splice(z,1);break}}}}if(Y.length===0)return null;if(Y.length>1&&Z){let z=Y.map((J)=>JSON.stringify(J.format())).join(", ");a0(!1,`ambiguous event description (i.e. matches ${z})`,"key",$)}return Y[0]}let X=this.#Q.get(o7.from($).format());if(X)return X;return null}getEventName($){let Q=this.#z($,null,!1);return a0(Q,"no matching event","key",$),Q.name}hasEvent($){return!!this.#z($,null,!1)}getEvent($,Q){return this.#z($,Q||null,!0)}forEachEvent($){let Q=Array.from(this.#Q.keys());Q.sort((Z,X)=>Z.localeCompare(X));for(let Z=0;Z<Q.length;Z++){let X=Q[Z];$(this.#Q.get(X),Z)}}getError($,Q){if(o4($)){let X=$.toLowerCase();if(v90[X])return z2.from(v90[X].signature);for(let Y of this.#$.values())if(X===Y.selector)return Y;return null}if($.indexOf("(")===-1){let X=[];for(let[Y,z]of this.#$)if(Y.split("(")[0]===$)X.push(z);if(X.length===0){if($==="Error")return z2.from("error Error(string)");if($==="Panic")return z2.from("error Panic(uint256)");return null}else if(X.length>1){let Y=X.map((z)=>JSON.stringify(z.format())).join(", ");a0(!1,`ambiguous error description (i.e. ${Y})`,"name",$)}return X[0]}if($=z2.from($).format(),$==="Error(string)")return z2.from("error Error(string)");if($==="Panic(uint256)")return z2.from("error Panic(uint256)");let Z=this.#$.get($);if(Z)return Z;return null}forEachError($){let Q=Array.from(this.#$.keys());Q.sort((Z,X)=>Z.localeCompare(X));for(let Z=0;Z<Q.length;Z++){let X=Q[Z];$(this.#$.get(X),Z)}}_decodeParams($,Q){return this.#X.decode($,Q)}_encodeParams($,Q){return this.#X.encode($,Q)}encodeDeploy($){return this._encodeParams(this.deploy.inputs,$||[])}decodeErrorResult($,Q){if(typeof $==="string"){let Z=this.getError($);a0(Z,"unknown error","fragment",$),$=Z}return a0(a$(Q,0,4)===$.selector,`data signature does not match error ${$.name}.`,"data",Q),this._decodeParams($.inputs,a$(Q,4))}encodeErrorResult($,Q){if(typeof $==="string"){let Z=this.getError($);a0(Z,"unknown error","fragment",$),$=Z}return l7([$.selector,this._encodeParams($.inputs,Q||[])])}decodeFunctionData($,Q){if(typeof $==="string"){let Z=this.getFunction($);a0(Z,"unknown function","fragment",$),$=Z}return a0(a$(Q,0,4)===$.selector,`data signature does not match function ${$.name}.`,"data",Q),this._decodeParams($.inputs,a$(Q,4))}encodeFunctionData($,Q){if(typeof $==="string"){let Z=this.getFunction($);a0(Z,"unknown function","fragment",$),$=Z}return l7([$.selector,this._encodeParams($.inputs,Q||[])])}decodeFunctionResult($,Q){if(typeof $==="string"){let Y=this.getFunction($);a0(Y,"unknown function","fragment",$),$=Y}let Z="invalid length for result data",X=b2(Q);if(X.length%32===0)try{return this.#X.decode($.outputs,X)}catch(Y){Z="could not decode result data"}N1(!1,Z,"BAD_DATA",{value:P6(X),info:{method:$.name,signature:$.format()}})}makeError($,Q){let Z=f8($,"data"),X=fq.getBuiltinCallException("call",Q,Z),Y="execution reverted (unknown custom error)";if(X.message.startsWith("execution reverted (unknown custom error)")){let J=P6(Z.slice(0,4)),q=this.getError(J);if(q)try{let W=this.#X.decode(q.inputs,Z.slice(4));X.revert={name:q.name,signature:q.format(),args:W},X.reason=X.revert.signature,X.message=`execution reverted: ${X.reason}`}catch(W){X.message="execution reverted (coult not decode custom error)"}}let z=this.parseTransaction(Q);if(z)X.invocation={method:z.name,signature:z.signature,args:z.args};return X}encodeFunctionResult($,Q){if(typeof $==="string"){let Z=this.getFunction($);a0(Z,"unknown function","fragment",$),$=Z}return P6(this.#X.encode($.outputs,Q||[]))}encodeFilterTopics($,Q){if(typeof $==="string"){let Y=this.getEvent($);a0(Y,"unknown event","eventFragment",$),$=Y}N1(Q.length<=$.inputs.length,`too many arguments for ${$.format()}`,"UNEXPECTED_ARGUMENT",{count:Q.length,expectedCount:$.inputs.length});let Z=[];if(!$.anonymous)Z.push($.topicHash);let X=(Y,z)=>{if(Y.type==="string")return oY(z);else if(Y.type==="bytes")return K4(P6(z));if(Y.type==="bool"&&typeof z==="boolean")z=z?"0x01":"0x00";else if(Y.type.match(/^u?int/))z=hD(z);else if(Y.type.match(/^bytes/))z=Zk(z,32);else if(Y.type==="address")this.#X.encode(["address"],[z]);return Qk(P6(z),32)};Q.forEach((Y,z)=>{let J=$.inputs[z];if(!J.indexed){a0(Y==null,"cannot filter non-indexed parameters; must be null","contract."+J.name,Y);return}if(Y==null)Z.push(null);else if(J.baseType==="array"||J.baseType==="tuple")a0(!1,"filtering with tuples or arrays not supported","contract."+J.name,Y);else if(Array.isArray(Y))Z.push(Y.map((q)=>X(J,q)));else Z.push(X(J,Y))});while(Z.length&&Z[Z.length-1]===null)Z.pop();return Z}encodeEventLog($,Q){if(typeof $==="string"){let z=this.getEvent($);a0(z,"unknown event","eventFragment",$),$=z}let Z=[],X=[],Y=[];if(!$.anonymous)Z.push($.topicHash);return a0(Q.length===$.inputs.length,"event arguments/values mismatch","values",Q),$.inputs.forEach((z,J)=>{let q=Q[J];if(z.indexed)if(z.type==="string")Z.push(oY(q));else if(z.type==="bytes")Z.push(K4(q));else if(z.baseType==="tuple"||z.baseType==="array")throw Error("not implemented");else Z.push(this.#X.encode([z.type],[q]));else X.push(z),Y.push(q)}),{data:this.#X.encode(X,Y),topics:Z}}decodeEventLog($,Q,Z){if(typeof $==="string"){let P=this.getEvent($);a0(P,"unknown event","eventFragment",$),$=P}if(Z!=null&&!$.anonymous){let P=$.topicHash;a0(o4(Z[0],32)&&Z[0].toLowerCase()===P,"fragment/topic mismatch","topics[0]",Z[0]),Z=Z.slice(1)}let X=[],Y=[],z=[];$.inputs.forEach((P,H)=>{if(P.indexed)if(P.type==="string"||P.type==="bytes"||P.baseType==="tuple"||P.baseType==="array")X.push(R6.from({type:"bytes32",name:P.name})),z.push(!0);else X.push(P),z.push(!1);else Y.push(P),z.push(!1)});let J=Z!=null?this.#X.decode(X,l7(Z)):null,q=this.#X.decode(Y,Q,!0),W=[],G=[],U=0,D=0;return $.inputs.forEach((P,H)=>{let N=null;if(P.indexed)if(J==null)N=new lD(null);else if(z[H])N=new lD(J[D++]);else try{N=J[D++]}catch(C){N=C}else try{N=q[U++]}catch(C){N=C}W.push(N),G.push(P.name||null)}),r4.fromItems(W,G)}parseTransaction($){let Q=f8($.data,"tx.data"),Z=J2($.value!=null?$.value:0,"tx.value"),X=this.getFunction(P6(Q.slice(0,4)));if(!X)return null;let Y=this.#X.decode(X.inputs,Q.slice(4));return new OL(X,X.selector,Y,Z)}parseCallResult($){throw Error("@TODO")}parseLog($){let Q=this.getEvent($.topics[0]);if(!Q||Q.anonymous)return null;return new VL(Q,Q.topicHash,this.decodeEventLog(Q,$.data,$.topics))}parseError($){let Q=P6($),Z=this.getError(a$(Q,0,4));if(!Z)return null;let X=this.#X.decode(Z.inputs,a$(Q,4));return new DL(Z,Z.selector,X)}static from($){if($ instanceof d8)return $;if(typeof $==="string")return new d8(JSON.parse($));if(typeof $.formatJson==="function")return new d8($.formatJson());if(typeof $.format==="function")return new d8($.format("json"));return new d8($)}}var b90,v90;var g90=p(()=>{cD();yk();k8();x90();i7();gk();s$();b90={"0":"generic panic","1":"assert(false)","17":"arithmetic overflow","18":"division or modulo by zero","33":"enum overflow","34":"invalid encoded storage byte array accessed","49":"out-of-bounds array access; popping on an empty array","50":"out-of-bounds access of an array or bytesN","65":"out of memory","81":"uninitialized function"},v90={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:($)=>{return`reverted with reason string ${JSON.stringify($)}`}},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:($)=>{let Q="unknown panic code";if($>=0&&$<=255&&b90[$.toString()])Q=b90[$.toString()];return`reverted with panic code 0x${$.toString(16)} (${Q})`}}}});var ML=p(()=>{g90();s$()});function mk($){if($==null)return null;return $}function j9($){if($==null)return null;return $.toString()}function m90($){let Q={};if($.to)Q.to=$.to;if($.from)Q.from=$.from;if($.data)Q.data=P6($.data);let Z="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(let Y of Z){if(!(Y in $)||$[Y]==null)continue;Q[Y]=J2($[Y],`request.${Y}`)}let X="type,nonce".split(/,/);for(let Y of X){if(!(Y in $)||$[Y]==null)continue;Q[Y]=n4($[Y],`request.${Y}`)}if($.accessList)Q.accessList=vk($.accessList);if($.authorizationList)Q.authorizationList=$.authorizationList.slice();if("blockTag"in $)Q.blockTag=$.blockTag;if("enableCcipRead"in $)Q.enableCcipRead=!!$.enableCcipRead;if("customData"in $)Q.customData=$.customData;if("blobVersionedHashes"in $&&$.blobVersionedHashes)Q.blobVersionedHashes=$.blobVersionedHashes.slice();if("kzg"in $)Q.kzg=$.kzg;if("blobs"in $&&$.blobs)Q.blobs=$.blobs.map((Y)=>{if($k(Y))return P6(Y);return Object.assign({},Y)});return Q}class kq{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor($,Q){this.provider=Q;let Z=Object.freeze($.topics.slice());f1(this,{transactionHash:$.transactionHash,blockHash:$.blockHash,blockNumber:$.blockNumber,removed:$.removed,address:$.address,data:$.data,topics:Z,index:$.index,transactionIndex:$.transactionIndex})}toJSON(){let{address:$,blockHash:Q,blockNumber:Z,data:X,index:Y,removed:z,topics:J,transactionHash:q,transactionIndex:W}=this;return{_type:"log",address:$,blockHash:Q,blockNumber:Z,data:X,index:Y,removed:z,topics:J,transactionHash:q,transactionIndex:W}}async getBlock(){let $=await this.provider.getBlock(this.blockHash);return N1(!!$,"failed to find transaction","UNKNOWN_ERROR",{}),$}async getTransaction(){let $=await this.provider.getTransaction(this.transactionHash);return N1(!!$,"failed to find transaction","UNKNOWN_ERROR",{}),$}async getTransactionReceipt(){let $=await this.provider.getTransactionReceipt(this.transactionHash);return N1(!!$,"failed to find transaction receipt","UNKNOWN_ERROR",{}),$}removedEvent(){return ZL0(this)}}class iD{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#$;constructor($,Q){this.provider=Q,this.blockNumber=$.blockNumber!=null?$.blockNumber:null,this.blockHash=$.blockHash!=null?$.blockHash:null,this.hash=$.hash,this.index=$.index,this.type=$.type,this.from=$.from,this.to=$.to||null,this.gasLimit=$.gasLimit,this.nonce=$.nonce,this.data=$.data,this.value=$.value,this.gasPrice=$.gasPrice,this.maxPriorityFeePerGas=$.maxPriorityFeePerGas!=null?$.maxPriorityFeePerGas:null,this.maxFeePerGas=$.maxFeePerGas!=null?$.maxFeePerGas:null,this.maxFeePerBlobGas=$.maxFeePerBlobGas!=null?$.maxFeePerBlobGas:null,this.chainId=$.chainId,this.signature=$.signature,this.accessList=$.accessList!=null?$.accessList:null,this.blobVersionedHashes=$.blobVersionedHashes!=null?$.blobVersionedHashes:null,this.authorizationList=$.authorizationList!=null?$.authorizationList:null,this.#$=-1}toJSON(){let{blockNumber:$,blockHash:Q,index:Z,hash:X,type:Y,to:z,from:J,nonce:q,data:W,signature:G,accessList:U,blobVersionedHashes:D}=this;return{_type:"TransactionResponse",accessList:U,blockNumber:$,blockHash:Q,blobVersionedHashes:D,chainId:j9(this.chainId),data:W,from:J,gasLimit:j9(this.gasLimit),gasPrice:j9(this.gasPrice),hash:X,maxFeePerGas:j9(this.maxFeePerGas),maxPriorityFeePerGas:j9(this.maxPriorityFeePerGas),maxFeePerBlobGas:j9(this.maxFeePerBlobGas),nonce:q,signature:G,to:z,index:Z,type:Y,value:j9(this.value)}}async getBlock(){let $=this.blockNumber;if($==null){let Z=await this.getTransaction();if(Z)$=Z.blockNumber}if($==null)return null;let Q=this.provider.getBlock($);if(Q==null)throw Error("TODO");return Q}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){let{tx:Q,blockNumber:Z}=await oG({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});if(Q==null||Q.blockNumber==null)return 0;return Z-Q.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait($,Q){let Z=$==null?1:$,X=Q==null?0:Q,Y=this.#$,z=-1,J=Y===-1?!0:!1,q=async()=>{if(J)return null;let{blockNumber:D,nonce:P}=await oG({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(P<this.nonce){Y=D;return}if(J)return null;let H=await this.getTransaction();if(H&&H.blockNumber!=null)return;if(z===-1){if(z=Y-3,z<this.#$)z=this.#$}while(z<=D){if(J)return null;let N=await this.provider.getBlock(z,!0);if(N==null)return;for(let C of N)if(C===this.hash)return;for(let C=0;C<N.length;C++){let L=await N.getTransaction(C);if(L.from===this.from&&L.nonce===this.nonce){if(J)return null;let B=await this.provider.getTransactionReceipt(L.hash);if(B==null)return;if(D-B.blockNumber+1<Z)return;let E="replaced";if(L.data===this.data&&L.to===this.to&&L.value===this.value)E="repriced";else if(L.data==="0x"&&L.from===L.to&&L.value===h90)E="cancelled";N1(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:E==="replaced"||E==="cancelled",reason:E,replacement:L.replaceableTransaction(Y),hash:L.hash,receipt:B})}}z++}return},W=(D)=>{if(D==null||D.status!==0)return D;N1(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:D.to,from:D.from,data:""},receipt:D})},G=await this.provider.getTransactionReceipt(this.hash);if(Z===0)return W(G);if(G){if(Z===1||await G.confirmations()>=Z)return W(G)}else if(await q(),Z===0)return null;return await new Promise((D,P)=>{let H=[],N=()=>{H.forEach((L)=>L())};if(H.push(()=>{J=!0}),X>0){let L=setTimeout(()=>{N(),P(pZ("wait for transaction timeout","TIMEOUT"))},X);H.push(()=>{clearTimeout(L)})}let C=async(L)=>{if(await L.confirmations()>=Z){N();try{D(W(L))}catch(B){P(B)}}};if(H.push(()=>{this.provider.off(this.hash,C)}),this.provider.on(this.hash,C),Y>=0){let L=async()=>{try{await q()}catch(B){if(r$(B,"TRANSACTION_REPLACED")){N(),P(B);return}}if(!J)this.provider.once("block",L)};H.push(()=>{this.provider.off("block",L)}),this.provider.once("block",L)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return N1(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),u90(this)}reorderedEvent($){return N1(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),N1(!$||$.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),p90(this,$)}replaceableTransaction($){a0(Number.isInteger($)&&$>=0,"invalid startBlock","startBlock",$);let Q=new iD(this,this.provider);return Q.#$=$,Q}}function QL0($){return{orphan:"drop-block",hash:$.hash,number:$.number}}function p90($,Q){return{orphan:"reorder-transaction",tx:$,other:Q}}function u90($){return{orphan:"drop-transaction",tx:$}}function ZL0($){return{orphan:"drop-log",log:{transactionHash:$.transactionHash,blockHash:$.blockHash,blockNumber:$.blockNumber,address:$.address,data:$.data,topics:Object.freeze($.topics.slice()),index:$.index}}}var h90,$L0,pk;var uk=p(()=>{k8();D90();h90=BigInt(0);$L0=class $L0{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#$;constructor($,Q){this.#$=$.transactions.map((Z)=>{if(typeof Z!=="string")return new iD(Z,Q);return Z}),f1(this,{provider:Q,hash:mk($.hash),number:$.number,timestamp:$.timestamp,parentHash:$.parentHash,parentBeaconBlockRoot:$.parentBeaconBlockRoot,nonce:$.nonce,difficulty:$.difficulty,gasLimit:$.gasLimit,gasUsed:$.gasUsed,blobGasUsed:$.blobGasUsed,excessBlobGas:$.excessBlobGas,miner:$.miner,prevRandao:mk($.prevRandao),extraData:$.extraData,baseFeePerGas:mk($.baseFeePerGas),stateRoot:$.stateRoot,receiptsRoot:$.receiptsRoot})}get transactions(){return this.#$.map(($)=>{if(typeof $==="string")return $;return $.hash})}get prefetchedTransactions(){let $=this.#$.slice();if($.length===0)return[];return N1(typeof $[0]==="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),$}toJSON(){let{baseFeePerGas:$,difficulty:Q,extraData:Z,gasLimit:X,gasUsed:Y,hash:z,miner:J,prevRandao:q,nonce:W,number:G,parentHash:U,parentBeaconBlockRoot:D,stateRoot:P,receiptsRoot:H,timestamp:N,transactions:C}=this;return{_type:"Block",baseFeePerGas:j9($),difficulty:j9(Q),extraData:Z,gasLimit:j9(X),gasUsed:j9(Y),blobGasUsed:j9(this.blobGasUsed),excessBlobGas:j9(this.excessBlobGas),hash:z,miner:J,prevRandao:q,nonce:W,number:G,parentHash:U,timestamp:N,parentBeaconBlockRoot:D,stateRoot:P,receiptsRoot:H,transactions:C}}[Symbol.iterator](){let $=0,Q=this.transactions;return{next:()=>{if($<this.length)return{value:Q[$++],done:!1};return{value:void 0,done:!0}}}}get length(){return this.#$.length}get date(){if(this.timestamp==null)return null;return new Date(this.timestamp*1000)}async getTransaction($){let Q=void 0;if(typeof $==="number")Q=this.#$[$];else{let Z=$.toLowerCase();for(let X of this.#$)if(typeof X==="string"){if(X!==Z)continue;Q=X;break}else{if(X.hash!==Z)continue;Q=X;break}}if(Q==null)throw Error("no such tx");if(typeof Q==="string")return await this.provider.getTransaction(Q);else return Q}getPrefetchedTransaction($){let Q=this.prefetchedTransactions;if(typeof $==="number")return Q[$];$=$.toLowerCase();for(let Z of Q)if(Z.hash===$)return Z;a0(!1,"no matching transaction","indexOrHash",$)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw Error("");return QL0(this)}};pk=class pk{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#$;constructor($,Q){this.#$=Object.freeze($.logs.map((X)=>{return new kq(X,Q)}));let Z=h90;if($.effectiveGasPrice!=null)Z=$.effectiveGasPrice;else if($.gasPrice!=null)Z=$.gasPrice;f1(this,{provider:Q,to:$.to,from:$.from,contractAddress:$.contractAddress,hash:$.hash,index:$.index,blockHash:$.blockHash,blockNumber:$.blockNumber,logsBloom:$.logsBloom,gasUsed:$.gasUsed,cumulativeGasUsed:$.cumulativeGasUsed,blobGasUsed:$.blobGasUsed,gasPrice:Z,blobGasPrice:$.blobGasPrice,type:$.type,status:$.status,root:$.root})}get logs(){return this.#$}toJSON(){let{to:$,from:Q,contractAddress:Z,hash:X,index:Y,blockHash:z,blockNumber:J,logsBloom:q,logs:W,status:G,root:U}=this;return{_type:"TransactionReceipt",blockHash:z,blockNumber:J,contractAddress:Z,cumulativeGasUsed:j9(this.cumulativeGasUsed),from:Q,gasPrice:j9(this.gasPrice),blobGasUsed:j9(this.blobGasUsed),blobGasPrice:j9(this.blobGasPrice),gasUsed:j9(this.gasUsed),hash:X,index:Y,logs:W,logsBloom:q,root:U,status:G,to:$}}get length(){return this.logs.length}[Symbol.iterator](){let $=0;return{next:()=>{if($<this.length)return{value:this.logs[$++],done:!1};return{value:void 0,done:!0}}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){let $=await this.provider.getBlock(this.blockHash);if($==null)throw Error("TODO");return $}async getTransaction(){let $=await this.provider.getTransaction(this.hash);if($==null)throw Error("TODO");return $}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return u90(this)}reorderedEvent($){return N1(!$||$.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),p90(this,$)}}});var ZU,oD,ck,XU,nD,PL;var c90=p(()=>{uk();k8();ZU=class ZU extends kq{interface;fragment;args;constructor($,Q,Z){super($,$.provider);let X=Q.decodeEventLog(Z,$.data,$.topics);f1(this,{args:X,fragment:Z,interface:Q})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}};oD=class oD extends kq{error;constructor($,Q){super($,$.provider);f1(this,{error:Q})}};ck=class ck extends pk{#$;constructor($,Q,Z){super(Z,Q);this.#$=$}get logs(){return super.logs.map(($)=>{let Q=$.topics.length?this.#$.getEvent($.topics[0]):null;if(Q)try{return new ZU($,this.#$,Q)}catch(Z){return new oD($,Z)}return $})}};XU=class XU extends iD{#$;constructor($,Q,Z){super(Z,Q);this.#$=$}async wait($,Q){let Z=await super.wait($,Q);if(Z==null)return null;return new ck(this.#$,this.provider,Z)}};nD=class nD extends YL{log;constructor($,Q,Z,X){super($,Q,Z);f1(this,{log:X})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}};PL=class PL extends nD{constructor($,Q,Z,X,Y){super($,Q,Z,new ZU(Y,$.interface,X));let z=$.interface.decodeEventLog(X,this.log.data,this.log.topics);f1(this,{args:z,fragment:X})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}});function i90($){return $&&typeof $.call==="function"}function o90($){return $&&typeof $.estimateGas==="function"}function RL($){return $&&typeof $.resolveName==="function"}function n90($){return $&&typeof $.sendTransaction==="function"}function r90($){if($!=null){if(RL($))return $;if($.provider)return $.provider}return}class a90{#$;fragment;constructor($,Q,Z){if(f1(this,{fragment:Q}),Q.inputs.length<Z.length)throw Error("too many arguments");let X=bq($.runner,"resolveName"),Y=RL(X)?X:null;this.#$=async function(){let z=await Promise.all(Q.inputs.map((J,q)=>{if(Z[q]==null)return null;return J.walkAsync(Z[q],(G,U)=>{if(G==="address"){if(Array.isArray(U))return Promise.all(U.map((D)=>_q(D,Y)));return _q(U,Y)}return U})}));return $.interface.encodeFilterTopics(Q,z)}()}getTopicFilter(){return this.#$}}function bq($,Q){if($==null)return null;if(typeof $[Q]==="function")return $;if($.provider&&typeof $.provider[Q]==="function")return $.provider;return null}function xq($){if($==null)return null;return $.provider||null}async function NL($,Q){let Z=y5.dereference($,"overrides");a0(typeof Z==="object","invalid overrides parameter","overrides",$);let X=m90(Z);if(a0(X.to==null||(Q||[]).indexOf("to")>=0,"cannot override to","overrides.to",X.to),a0(X.data==null||(Q||[]).indexOf("data")>=0,"cannot override data","overrides.data",X.data),X.from)X.from=X.from;return X}async function ik($,Q,Z){let X=bq($,"resolveName"),Y=RL(X)?X:null;return await Promise.all(Q.map((z,J)=>{return z.walkAsync(Z[J],(q,W)=>{if(W=y5.dereference(W,q),q==="address")return _q(W,Y);return W})}))}function XL0($){let Q=async function(J){let q=await NL(J,["data"]);if(q.to=await $.getAddress(),q.from)q.from=await _q(q.from,r90($.runner));let W=$.interface,G=J2(q.value||d90,"overrides.value")===d90,U=(q.data||"0x")==="0x";if(W.fallback&&!W.fallback.payable&&W.receive&&!U&&!G)a0(!1,"cannot send data to receive or send value to non-payable fallback","overrides",J);a0(W.fallback||U,"cannot send data to receive-only contract","overrides.data",q.data);let D=W.receive||W.fallback&&W.fallback.payable;return a0(D||G,"cannot send value to non-payable fallback","overrides.value",q.value),a0(W.fallback||U,"cannot send data to receive-only contract","overrides.data",q.data),q},Z=async function(J){let q=bq($.runner,"call");N1(i90(q),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let W=await Q(J);try{return await q.call(W)}catch(G){if($L(G)&&G.data)throw $.interface.makeError(G.data,W);throw G}},X=async function(J){let q=$.runner;N1(n90(q),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let W=await q.sendTransaction(await Q(J)),G=xq($.runner);return new XU($.interface,G,W)},Y=async function(J){let q=bq($.runner,"estimateGas");return N1(o90(q),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await q.estimateGas(await Q(J))},z=async(J)=>{return await X(J)};return f1(z,{_contract:$,estimateGas:Y,populateTransaction:Q,send:X,staticCall:Z}),z}function YL0($,Q){let Z=function(...G){let U=$.interface.getFunction(Q,G);return N1(U,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:Q,args:G}}),U},X=async function(...G){let U=Z(...G),D={};if(U.inputs.length+1===G.length){if(D=await NL(G.pop()),D.from)D.from=await _q(D.from,r90($.runner))}if(U.inputs.length!==G.length)throw Error("internal error: fragment inputs doesn't match arguments; should not happen");let P=await ik($.runner,U.inputs,G);return Object.assign({},D,await oG({to:$.getAddress(),data:$.interface.encodeFunctionData(U,P)}))},Y=async function(...G){let U=await q(...G);if(U.length===1)return U[0];return U},z=async function(...G){let U=$.runner;N1(n90(U),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let D=await U.sendTransaction(await X(...G)),P=xq($.runner);return new XU($.interface,P,D)},J=async function(...G){let U=bq($.runner,"estimateGas");return N1(o90(U),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await U.estimateGas(await X(...G))},q=async function(...G){let U=bq($.runner,"call");N1(i90(U),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let D=await X(...G),P="0x";try{P=await U.call(D)}catch(N){if($L(N)&&N.data)throw $.interface.makeError(N.data,D);throw N}let H=Z(...G);return $.interface.decodeFunctionResult(H,P)},W=async(...G)=>{if(Z(...G).constant)return await Y(...G);return await z(...G)};return f1(W,{name:$.interface.getFunctionName(Q),_contract:$,_key:Q,getFragment:Z,estimateGas:J,populateTransaction:X,send:z,staticCall:Y,staticCallResult:q}),Object.defineProperty(W,"fragment",{configurable:!1,enumerable:!0,get:()=>{let G=$.interface.getFunction(Q);return N1(G,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:Q}}),G}}),W}function JL0($,Q){let Z=function(...Y){let z=$.interface.getEvent(Q,Y);return N1(z,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:Q,args:Y}}),z},X=function(...Y){return new a90($,Z(...Y),Y)};return f1(X,{name:$.interface.getEventName(Q),_contract:$,_key:Q,getFragment:Z}),Object.defineProperty(X,"fragment",{configurable:!1,enumerable:!0,get:()=>{let Y=$.interface.getEvent(Q);return N1(Y,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:Q}}),Y}}),X}function zL0($,Q){s90.set($[jL],Q)}function a4($){return s90.get($[jL])}function qL0($){return $&&typeof $==="object"&&"getTopicFilter"in $&&typeof $.getTopicFilter==="function"&&$.fragment}async function ok($,Q){let Z,X=null;if(Array.isArray(Q)){let z=function(J){if(o4(J,32))return J;let q=$.interface.getEvent(J);return a0(q,"unknown fragment","name",J),q.topicHash};Z=Q.map((J)=>{if(J==null)return null;if(Array.isArray(J))return J.map(z);return z(J)})}else if(Q==="*")Z=[null];else if(typeof Q==="string")if(o4(Q,32))Z=[Q];else X=$.interface.getEvent(Q),a0(X,"unknown fragment","event",Q),Z=[X.topicHash];else if(qL0(Q))Z=await Q.getTopicFilter();else if("fragment"in Q)X=Q.fragment,Z=[X.topicHash];else a0(!1,"unknown event name","event",Q);Z=Z.map((z)=>{if(z==null)return null;if(Array.isArray(z)){let J=Array.from(new Set(z.map((q)=>q.toLowerCase())).values());if(J.length===1)return J[0];return J.sort(),J}return z.toLowerCase()});let Y=Z.map((z)=>{if(z==null)return"null";if(Array.isArray(z))return z.join("|");return z}).join("&");return{fragment:X,tag:Y,topics:Z}}async function rD($,Q){let{subs:Z}=a4($);return Z.get((await ok($,Q)).tag)||null}async function l90($,Q,Z){let X=xq($.runner);N1(X,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:Q});let{fragment:Y,tag:z,topics:J}=await ok($,Z),{addr:q,subs:W}=a4($),G=W.get(z);if(!G){let D={address:q?q:$,topics:J},P=(L)=>{let B=Y;if(B==null)try{B=$.interface.getEvent(L.topics[0])}catch(E){}if(B){let E=B,I=Y?$.interface.decodeEventLog(Y,L.data,L.topics):[];lk($,Z,I,(_)=>{return new PL($,_,Z,E,L)})}else lk($,Z,[],(E)=>{return new nD($,E,Z,L)})},H=[];G={tag:z,listeners:[],start:()=>{if(H.length)return;H.push(X.on(D,P))},stop:async()=>{if(H.length==0)return;let L=H;H=[],await Promise.all(L),X.off(D,P)}},W.set(z,G)}return G}async function WL0($,Q,Z,X){await dk;let Y=await rD($,Q);if(!Y)return!1;let z=Y.listeners.length;if(Y.listeners=Y.listeners.filter(({listener:J,once:q})=>{let W=Array.from(Z);if(X)W.push(X(q?null:J));try{J.call($,...W)}catch(G){}return!q}),Y.listeners.length===0)Y.stop(),a4($).subs.delete(Y.tag);return z>0}async function lk($,Q,Z,X){try{await dk}catch(z){}let Y=WL0($,Q,Z,X);return dk=Y,await Y}function KL0(){return e$}var d90,jL,s90,dk,HL,e$,c3;var nk=p(()=>{ML();eG();uk();k8();c90();d90=BigInt(0);jL=Symbol.for("_ethersInternal_contract"),s90=new WeakMap;dk=Promise.resolve();HL=["then"];e$=class e${target;interface;runner;filters;[jL];fallback;constructor($,Q,Z,X){if(a0(typeof $==="string"||KL($),"invalid value for Contract target","target",$),Z==null)Z=null;let Y=d8.from(Q);f1(this,{target:$,runner:Z,interface:Y}),Object.defineProperty(this,jL,{value:{}});let z,J=null,q=null;if(X){let U=xq(Z);q=new XU(this.interface,U,X)}let W=new Map;if(typeof $==="string")if(o4($))J=$,z=Promise.resolve($);else{let U=bq(Z,"resolveName");if(!RL(U))throw pZ("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});z=U.resolveName($).then((D)=>{if(D==null)throw pZ("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:$});return a4(this).addr=D,D})}else z=$.getAddress().then((U)=>{if(U==null)throw Error("TODO");return a4(this).addr=U,U});zL0(this,{addrPromise:z,addr:J,deployTx:q,subs:W});let G=new Proxy({},{get:(U,D,P)=>{if(typeof D==="symbol"||HL.indexOf(D)>=0)return Reflect.get(U,D,P);try{return this.getEvent(D)}catch(H){if(!r$(H,"INVALID_ARGUMENT")||H.argument!=="key")throw H}return},has:(U,D)=>{if(HL.indexOf(D)>=0)return Reflect.has(U,D);return Reflect.has(U,D)||this.interface.hasEvent(String(D))}});return f1(this,{filters:G}),f1(this,{fallback:Y.receive||Y.fallback?XL0(this):null}),new Proxy(this,{get:(U,D,P)=>{if(typeof D==="symbol"||D in U||HL.indexOf(D)>=0)return Reflect.get(U,D,P);try{return U.getFunction(D)}catch(H){if(!r$(H,"INVALID_ARGUMENT")||H.argument!=="key")throw H}return},has:(U,D)=>{if(typeof D==="symbol"||D in U||HL.indexOf(D)>=0)return Reflect.has(U,D);return U.interface.hasFunction(D)}})}connect($){return new e$(this.target,this.interface,$)}attach($){return new e$($,this.interface,this.runner)}async getAddress(){return await a4(this).addrPromise}async getDeployedCode(){let $=xq(this.runner);N1($,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});let Q=await $.getCode(await this.getAddress());if(Q==="0x")return null;return Q}async waitForDeployment(){let $=this.deploymentTransaction();if($)return await $.wait(),this;if(await this.getDeployedCode()!=null)return this;let Z=xq(this.runner);return N1(Z!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((X,Y)=>{let z=async()=>{try{if(await this.getDeployedCode()!=null)return X(this);Z.once("block",z)}catch(J){Y(J)}};z()})}deploymentTransaction(){return a4(this).deployTx}getFunction($){if(typeof $!=="string")$=$.format();return YL0(this,$)}getEvent($){if(typeof $!=="string")$=$.format();return JL0(this,$)}async queryTransaction($){throw Error("@TODO")}async queryFilter($,Q,Z){if(Q==null)Q=0;if(Z==null)Z="latest";let{addr:X,addrPromise:Y}=a4(this),z=X?X:await Y,{fragment:J,topics:q}=await ok(this,$),W={address:z,topics:q,fromBlock:Q,toBlock:Z},G=xq(this.runner);return N1(G,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await G.getLogs(W)).map((U)=>{let D=J;if(D==null)try{D=this.interface.getEvent(U.topics[0])}catch(P){}if(D)try{return new ZU(U,this.interface,D)}catch(P){return new oD(U,P)}return new kq(U,G)})}async on($,Q){let Z=await l90(this,"on",$);return Z.listeners.push({listener:Q,once:!1}),Z.start(),this}async once($,Q){let Z=await l90(this,"once",$);return Z.listeners.push({listener:Q,once:!0}),Z.start(),this}async emit($,...Q){return await lk(this,$,Q,null)}async listenerCount($){if($){let X=await rD(this,$);if(!X)return 0;return X.listeners.length}let{subs:Q}=a4(this),Z=0;for(let{listeners:X}of Q.values())Z+=X.length;return Z}async listeners($){if($){let X=await rD(this,$);if(!X)return[];return X.listeners.map(({listener:Y})=>Y)}let{subs:Q}=a4(this),Z=[];for(let{listeners:X}of Q.values())Z=Z.concat(X.map(({listener:Y})=>Y));return Z}async off($,Q){let Z=await rD(this,$);if(!Z)return this;if(Q){let X=Z.listeners.map(({listener:Y})=>Y).indexOf(Q);if(X>=0)Z.listeners.splice(X,1)}if(Q==null||Z.listeners.length===0)Z.stop(),a4(this).subs.delete(Z.tag);return this}async removeAllListeners($){if($){let Q=await rD(this,$);if(!Q)return this;Q.stop(),a4(this).subs.delete(Q.tag)}else{let{subs:Q}=a4(this);for(let{tag:Z,stop:X}of Q.values())X(),Q.delete(Z)}return this}async addListener($,Q){return await this.on($,Q)}async removeListener($,Q){return await this.off($,Q)}static buildClass($){class Q extends e${constructor(Z,X=null){super(Z,$,X)}}return Q}static from($,Q,Z){if(Z==null)Z=null;return new this($,Q,Z)}};c3=class c3 extends KL0(){}});class a7{interface;bytecode;runner;constructor($,Q,Z){let X=d8.from($);if(Q instanceof Uint8Array)Q=P6(f8(Q));else{if(typeof Q==="object")Q=Q.object;if(!Q.startsWith("0x"))Q="0x"+Q;Q=P6(f8(Q))}f1(this,{bytecode:Q,interface:X,runner:Z||null})}attach($){return new e$($,this.interface,this.runner)}async getDeployTransaction(...$){let Q={},Z=this.interface.deploy;if(Z.inputs.length+1===$.length)Q=await NL($.pop());if(Z.inputs.length!==$.length)throw Error("incorrect number of arguments to constructor");let X=await ik(this.runner,Z.inputs,$),Y=l7([this.bytecode,this.interface.encodeDeploy(X)]);return Object.assign({},Q,{data:Y})}async deploy(...$){let Q=await this.getDeployTransaction(...$);N1(this.runner&&typeof this.runner.sendTransaction==="function","factory runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let Z=await this.runner.sendTransaction(Q),X=Nk(Z);return new e$(X,this.interface,this.runner,Z)}connect($){return new a7(this.interface,this.bytecode,$)}static fromSolidity($,Q){if(a0($!=null,"bad compiler output","output",$),typeof $==="string")$=JSON.parse($);let Z=$.abi,X="";if($.bytecode)X=$.bytecode;else if($.evm&&$.evm.bytecode)X=$.evm.bytecode;return new this(Z,X,Q)}}var t90=p(()=>{ML();eG();k8();nk()});var e90=p(()=>{nk();t90()});var $20=p(()=>{ML();e90()});var aD=p(()=>{$20()});var CL,Q20="0x60c0346200025e576001600160401b0390601f6200691a38819003918201601f191683019291848411838510176200026357808392604095865283396020928391810103126200025e5751926001600160a01b03808516918286036200025e57600191600096838855601460065584156200020c576080528387528285528587209360ff1994848682541617905560025491680100000000000000009283811015620001e45785810180600255811015620001f85760028a52878a200180546001600160a01b031990811690931790553360a0528751936060850190811185821017620001e457885288845286840192898452888501978a8952600d5491821015620001d05786820180600d55821015620001bc578a600d60ff999a9b9c522090861b01935116915160a01b161781550192511690825416179055516166a090816200027a8239608051818181610b63015281816115fb015281816125c60152818161346101528181613d560152614d4c015260a0518181816102370152818161029a015281816104a7015281816105600152818161072801528181610d110152818161138c015281816114120152818161159a01526117c80152f35b634e487b7160e01b8b52603260045260248bfd5b634e487b7160e01b8b52604160045260248bfd5b634e487b7160e01b8a52604160045260248afd5b634e487b7160e01b8a52603260045260248afd5b865162461bcd60e51b815260048101879052602560248201527f456e7469747950726f76696465722063616e6e6f74206265207a65726f206164604482015264647265737360d81b6064820152608490fd5b600080fd5b634e487b7160e01b600052604160045260246000fdfe60a060408181526004918236101561001657600080fd5b600092833560e01c9182630c0a46a814611b52575081630dedd62414611ae4578163125c2cc414611a715781631e40079c14611a14578163266afe1b1461194f5781632f84cf7d146118f457816331cf2a56146118295781633644e515146118005781633925cd441461162a5781634318cdd0146115e657816351858e27146115c257816356d586811461150757816358d642bc146113ed57816360316801146113c357816365db47c3146112ab5781636b79134d146112835781637508b9161461125757816388a1cd761461120c578163907efb1b146111ed57816392cf61e51461117b5781639304677d1461114357816396954a9f1461111b578163a33530c11461107c578163abc8d1ac1461103e578163acd6f20814611012578163b0c26ecf14610ff3578163bb2c250c14610fa8578163bc197c8114610f02578163c408a90914610d79578163d148b4c814610cf9578163d19fd92e14610cd1578163d57bb1d614610a93578163d595b4f514610774578163d8d1a65714610707578163ddc3948014610538578163e812c56914610491578163ec6d8e0614610450578163ed70554d14610400578163f176e326146103c5578163f23a6e61146102c9578163f851a44014610285578163fbd6d63f14610223575063fc3c4c3e146101fe57600080fd5b3461021f5760209061021861021236611d19565b906140c3565b9051908152f35b5080fd5b919050346102815761023436611d19565b927f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316330361027357508352600760205282205580f35b8251633485c51360e21b8152fd5b8280fd5b50503461021f578160031936011261021f57517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b8284346103c25760a03660031901126103c2576102e4611dd8565b506102ed611dee565b506084356001600160401b03811161021f5761030c903690850161229d565b5050815160026020820190815233828501526044356001600160601b031660608381018290528352929161033f81611bfa565b51902091828252600e6020528382205415610366575b835163f23a6e6160e01b8152602090f35b83516103889161037582611ba8565b33825260208201526002858201526131f6565b600d546000198101929083116103af57602094509083918152600e85522055828080610355565b634e487b7160e01b825260118552602482fd5b80fd5b8284346103c257816003193601126103c257506103e96103fc9260243590356131b6565b9051918291602083526020830190612361565b0390f35b8391503461021f57602036600319011261021f573590600d548210156103c2575061042a90612232565b506103fc60ff600183549301541692519282849360a01c9060018060a01b0316846121eb565b9050346102815760203660031901126102815735916002548310156103c2575061047b602092612346565b905491519160018060a01b039160031b1c168152f35b905034610281576104a136612218565b909391927f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316330361027357811561052a575060008051602061660b8339815191529160209184875260038352818720868852835261050c8288209182546127b7565b9055838652600382528086208587528252808620549051908152a380f35b825163440a57bf60e01b8152fd5b8391503461021f57602036600319011261021f57610554611dd8565b6001600160a01b0391907f0000000000000000000000000000000000000000000000000000000000000000831633036106f8578216916105958315156127c4565b828452600191600160205260ff8686205416156106cf57849584849596526001602052862060ff19815416905585935b6105f3575b85857f67c5a35d33d48c47ef33c82c62eda6254aad034fab4c51abe26a6d06ad174a348280a280f35b6002805490818610156106c85783918761060c88612346565b949054600395861b1c16146106285750505082809401936105c5565b919590945060001992918381019081116106b5579061065a8561064d61067894612346565b9054908a1b1c1691612346565b90919060018060a01b038084549260031b9316831b921b1916179055565b83549081156106a25750019261068d84612346565b81939154921b1b1916905555828080806105ca565b634e487b7160e01b885260319052602487fd5b634e487b7160e01b895260118352602489fd5b50506105ca565b606490602087519162461bcd60e51b83528201526003602482015262216f6b60e81b6044820152fd5b508351633485c51360e21b8152fd5b905034610281576020366003190112610281578035918215158303610770577f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03163303610763578361076084613165565b80f35b51633485c51360e21b8152fd5b8380fd5b91905034610281576080366003190112610281576001600160401b0392823584811161021f576107a7903690850161229d565b6107b2959195611dee565b95604435838111610a8f576107ca903690880161229d565b9390926064359760ff600b5416610a81576002875414610a7357600287556001600160a01b03998a168088526001602090815289892054909b919060ff1615610a445789516359516e5f60e01b815260008051602061662b8339815191528185015246602482015230604482015260a06064820152969594939291908c88808e61085860a48301898c613144565b906084830152038173__$1a0918a2aa2208593bb0a5d7644cd0946b$__5af4978815610a3a57908b918b99610a01575b506108b290888c8c85519c8d9586948593631155a0c560e31b8552898c8601526044850191613144565b90602483015203925af180156109f75789978a916109b8575b501580156109b0575b6109a157861690818952600f8c52898920546001810180911161098e578b0361098057508752600f8a528888882055820191898184031261097c57803591821161097c576001969594936109586109527fbd6e57133956b4a3944b483a9e595b4aab16071cf15a39384fdb1b7015865aab958b9561096095016128db565b86614be5565b953691611c9c565b898151910120938151988952151597888a820152a35551908152f35b8680fd5b8951633485c51360e21b8152fd5b634e487b7160e01b8a526011825260248afd5b508851631bd18a1960e31b8152fd5b5086156108d4565b8098508b8092503d83116109f0575b6109d18183611c5e565b810103126109ec576109e68c885198016123a7565b386108cb565b8880fd5b503d6109c7565b8a513d8b823e3d90fd5b8e80929a508193503d8311610a33575b610a1b8183611c5e565b81010312610a2f5751968a906108b2610888565b8980fd5b503d610a11565b8b513d8c823e3d90fd5b895162461bcd60e51b81528084018d9052600960248201526810b83937bb34b232b960b91b6044820152606490fd5b8751633018d46b60e11b8152fd5b8751633485c51360e21b8152fd5b8480fd5b9190503461028157602092836003193601126103c25782356001600160401b03811161021f57610ac690369085016122ca565b6002825414610cc2578490600283558351610ae081611bdf565b60019160018252845b848110610c845750610afa82612386565b52610b0481612386565b5060065485519687936312f6ab5960e31b855260a48501918086015233602486015260a09160a06044870152845180915260c48601928760c48360051b89010196019389915b8b848410610c0b575050505060648601939093525050507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031660848301528190038173__$1a0918a2aa2208593bb0a5d7644cd0946b$__5af4928315610bff578193610bc6575b5060019055519015158152f35b9092508381813d8311610bf8575b610bde8183611c5e565b8101031261028157610bf16001916123a7565b9290610bb9565b503d610bd4565b509051903d90823e3d90fd5b610c7090869983610c608a9e9699979a8796999c9e60c319908503018b52519360c090855185528786015188860152808601519085015260608086015190850152608090808287015192860152840190612361565b9201519087818403910152612361565b9901930193018b979592938b979592610b4a565b869491929451610c9381611b77565b868152868382015286888201526060878183015280608083015260a08201528282870101520190879391610ae9565b505051633018d46b60e11b8152fd5b905034610281576020366003190112610281576020928291358152600e845220549051908152f35b905034610281576020366003190112610281578035917f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03163303610763578215610d4d57505060065580f35b906020606492519162461bcd60e51b835282015260066024820152652164656c617960d01b6044820152fd5b9050346102815760a09160a0600319360112610770576001600160401b039360443585811161021f57610daf9036908501612125565b60643586811161028157610dc69036908601611d78565b9560843590811161028157610de19095929536908601612125565b95610def60243586356131b6565b9586958551978880928251610e0a8160209d8e809701611cf6565b8201908152030190205493855193610e3289860198848a5260c08988015260e0870190612361565b93866060870152601f1994858782030160808801528a8084519283815201930190855b8c828210610edf575050505090610e7591858783030160a0880152613110565b90838583030160c086015288808b5193848152019a0192905b828210610ebf5750505050610ead908260609803908101835282611c5e565b51809320938251948552840152820152f35b90919299898282610ed36001948f516123b4565b019b0193920190610e8e565b8686610ef4869860019596979b9a9b516123b4565b979897019501929101610e55565b905082346103c25760a03660031901126103c257610f1e611dd8565b50610f27611dee565b506001600160401b039060443582811161021f57610f48903690850161226d565b505060643582811161021f57610f61903690850161226d565b50506084359182116103c25750606492610f806020923690850161229d565b50505162461bcd60e51b8152918201526006602482015265042c4c2e8c6d60d31b6044820152fd5b905034610281576060366003190112610281573560ff8116810361028157610fce611dee565b604435939091906001600160601b03851685036103c2575092610218916020946130d4565b50503461021f578160031936011261021f57602090600d549051908152f35b50503461021f578060209261102636611d19565b90825260038552828220908252845220549051908152f35b50503461021f57602036600319011261021f5760209160ff9082906001600160a01b03611069611dd8565b1681526001855220541690519015158152f35b9050346102815760c03660031901126102815781519161109b83611b77565b813583526024356001600160a01b0381168103610a8f5760208401526044356001600160601b0381168103610a8f578184015260643560ff81168103610a8f576060840152608435608084015260a43560a0840152600284541461110e578361110784600283556157b8565b6001815580f35b51633018d46b60e11b8152fd5b9050346102815760203660031901126102815760209282913581526007845220549051908152f35b50503461021f57602036600319011261021f5760209181906001600160a01b0361116b611dd8565b168152600f845220549051908152f35b8391503461021f57602036600319011261021f57826111b8926111b292358152600e60205220546111ad8115156127f8565b612232565b5061282a565b805160208201519183015192519283926103fc9260ff909216916001600160601b03909116906001600160a01b0316846121eb565b50503461021f578160031936011261021f576020906006549051908152f35b50503461021f5761121c36612218565b91845260086020528284209084526020528183208054821015610770579061124391612251565b506001815491015482519182526020820152f35b50503461021f578060209261126b36611d19565b90825260098552828220908252845220549051908152f35b905034610281576020366003190112610281576020928291358152600a845220549051908152f35b8391503461021f5760031990838236011261028157803591602435906001600160401b038211610a8f576101609082360301126107705760ff600b54166106f85760028454146113b457600284556001600160a01b038381163314908115611388575b501561133a576020949261132a600193611330933691016128db565b90614be5565b9255519015158152f35b845162461bcd60e51b8152602081840152602260248201527f45323a2063616c6c6572206d75737420626520656e74697479206f722061646d60448201526134b760f11b6064820152608490fd5b90507f00000000000000000000000000000000000000000000000000000000000000001633148661130e565b508351633018d46b60e11b8152fd5b905082346103c25760203660031901126103c257506111b26111b891356111ad600d5482106127f8565b83833461021f57602036600319011261021f57611408611dd8565b6001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000811633036114f7578116916114478315156127c4565b828452600160205260ff81852054166114cc5782845260016020528320600160ff19825416179055600254600160401b8110156114b9579061065a8260016114929401600255612346565b7fc395b1bd803c744a815bc34a0426e5eaac03513b9d76bf237a734a004916499c8280a280f35b634e487b7160e01b845260418552602484fd5b5162461bcd60e51b8152602081860152600660248201526565786973747360d01b6044820152606490fd5b8251633485c51360e21b81528590fd5b905082346103c2575061151936611d19565b916001600160a01b038281163314908115611596575b50156115425760208461021885856143b6565b608490602085519162461bcd60e51b8352820152602860248201527f4f6e6c7920656e74697479206f722061646d696e2063616e20757365206c61726044820152670ceca40c4c2e8c6d60c31b6064820152fd5b90507f00000000000000000000000000000000000000000000000000000000000000001633148561152f565b50503461021f578160031936011261021f5760209060ff600b541690519015158152f35b50503461021f578160031936011261021f57517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b8284346103c25760803660031901126103c25782356024356044359160643560ff600b54166117625760028554146117f057600285556001600160a01b0382811633149081156117c4575b5015611772578282146117625780156117525761169284836140c3565b5081855260209660038852868620858752885281878720541061174457508382889287969594600198526003845288872083885284528887206116d6828254612794565b90558487526003845288872083885284526116f58988209182546127b7565b905580865260038352878620828752835287862054885190815260008051602061660b833981519152938491a381845260038752858420838552875286868520548751908152a3555160018152f35b8651632fd8225d60e21b8152fd5b855163440a57bf60e01b81528790fd5b8551633485c51360e21b81528790fd5b855162461bcd60e51b8152602081890152602660248201527f45323a2063616c6c6572206d7573742062652066726f6d456e74697479206f726044820152651030b236b4b760d11b6064820152608490fd5b90507f000000000000000000000000000000000000000000000000000000000000000016331488611675565b8551633018d46b60e11b81528790fd5b50503461021f578160031936011261021f576020905160008051602061662b8339815191528152f35b83833461021f5760c036600319011261021f576001600160401b036044358181116107705761185b9036908601612125565b90606435818111610a8f576118739036908701611d78565b6084358281116118f05761188a9036908801612125565b9160a4359081116118f0576118a29036908801611cd8565b9260ff600b54166118e05760028654146118d05791600193916113309360209860028955602435903561259d565b8451633018d46b60e11b81528790fd5b8451633485c51360e21b81528790fd5b8580fd5b83833461021f57602036600319011261021f5782356001600160401b038111610281576119249036908501611e25565b92600283541461194157506001611330602094600285553361338e565b9051633018d46b60e11b8152fd5b8284346103c257806003193601126103c2578151600280548083529083526020939284830192909183907f405787fa12a823e0f2b7631cc41b3ba8828b3321ca811111fa75cd3aa3bb5ace90845b8181106119f757505050816119b3910382611c5e565b83519485948186019282875251809352850193925b8281106119d757505050500390f35b83516001600160a01b0316855286955093810193928101926001016119c8565b82546001600160a01b03168452928801926001928301920161199d565b50503461021f57611a2436611d19565b9290815260106020528181209081548410156103c25750608092611a4791611d2f565b50908154916001810154916003600283015492015492815194855260208501528301526060820152f35b8284346103c25760203660031901126103c2578235906001600160401b0382116103c257506020606093611aab611abe9336908301611cd8565b9082855194838680955193849201611cf6565b820190815203019020805491600260018301549201549181519384526020840152820152f35b90503461028157816003193601126102815780356001600160401b038111610770576020611b1a849593611b2c93369101611cd8565b81855193828580945193849201611cf6565b810160058152030190206024358252602052206001815491015482519182526020820152f35b929150346107705760203660031901126107705792602093358152600c845220548152f35b60c081019081106001600160401b03821117611b9257604052565b634e487b7160e01b600052604160045260246000fd5b606081019081106001600160401b03821117611b9257604052565b61012081019081106001600160401b03821117611b9257604052565b604081019081106001600160401b03821117611b9257604052565b608081019081106001600160401b03821117611b9257604052565b6001600160401b038111611b9257604052565b60e081019081106001600160401b03821117611b9257604052565b602081019081106001600160401b03821117611b9257604052565b601f909101601f19168101906001600160401b03821190821017611b9257604052565b6001600160401b038111611b9257601f01601f191660200190565b929192611ca882611c81565b91611cb66040519384611c5e565b829481845281830111611cd3578281602093846000960137010152565b600080fd5b9080601f83011215611cd357816020611cf393359101611c9c565b90565b60005b838110611d095750506000910152565b8181015183820152602001611cf9565b6040906003190112611cd3576004359060243590565b8054821015611d4b5760005260206000209060021b0190600090565b634e487b7160e01b600052603260045260246000fd5b6001600160401b038111611b925760051b60200190565b9080601f83011215611cd3576020908235611d9281611d61565b93611da06040519586611c5e565b81855260208086019260051b820101928311611cd357602001905b828210611dc9575050505090565b81358152908301908301611dbb565b600435906001600160a01b0382168203611cd357565b602435906001600160a01b0382168203611cd357565b35906001600160a01b0382168203611cd357565b35908115158203611cd357565b9190916101a0908181850312611cd35760408051909490926001600160401b0390840181811185821017611b9257865283958335855260208085013581870152818501358287015260609182860135838801526080860135608088015260a086013560a088015260c0860135848111611cd3578601928084870312611cd357815193611eb085611ba8565b8035868111611cd357810187601f82011215611cd357803590611ed282611d61565b91611edf86519384611c5e565b808352868084019160051b830101918a8311611cd35787809101915b8383106121155750505050855283810135868111611cd35787611f1f918301611d78565b848601528281013590868211611cd357019286601f85011215611cd357833593611f4885611d61565b94611f5585519687611c5e565b808652828087019160051b83010191898311611cd357838101915b83831061200e5750505050505082015260c085015260e0830135818111611cd35782611f9d918501611cd8565b60e085015261010080840135828111611cd35783611fbc918601611cd8565b908501526101209182840135918211611cd357611fda918401611cd8565b90830152610140611fec818301611e18565b908301526101608082013590830152612009610180809201611e18565b910152565b82358a8111611cd3578201808c03601f19018713611cd35787519061203282611ba8565b61203d878201611e04565b8252888101358c8111611cd3578d8861205892840101611cd8565b8783015287810135908c8211611cd357018c603f82011215611cd3578c8782013561208281611d61565b9261208f8c519485611c5e565b8184528b8b8b86019302820101928311611cd357918f9593918b8d8c979501975b8389106120cd57505050508394508a820152815201920191611f70565b889496989192939597500312611cd357898b918d8051906120ed82611ba8565b85358252838601358483015280860135908201528152019101949290918f928b8b96946120b0565b8235815291810191889101611efb565b81601f82011215611cd357803590602061213e83611d61565b93604061214e6040519687611c5e565b848652828601918360a080970286010194818611611cd3578401925b85841061217b575050505050505090565b8684830312611cd357825190878201906001600160401b038211838310176121d6578892879286528635815282870135838201528587013586820152606080880135908201526080808801359082015281520193019261216a565b60246000634e487b7160e01b81526041600452fd5b6001600160a01b0390911681526001600160601b03909116602082015260ff909116604082015260600190565b6060906003190112611cd357600435906024359060443590565b600d54811015611d4b57600d60005260206000209060011b0190600090565b8054821015611d4b5760005260206000209060011b0190600090565b9181601f84011215611cd3578235916001600160401b038311611cd3576020808501948460051b010111611cd357565b9181601f84011215611cd3578235916001600160401b038311611cd35760208381860195010111611cd357565b919060c083820312611cd357604051906122e382611b77565b81938035835260208101356020840152604081013560408401526060810135606084015260808101359160018060401b0392838111611cd35781612328918401611cd8565b608085015260a0820135928311611cd35760a0926120099201611cd8565b600254811015611d4b57600260005260206000200190600090565b9060209161237a81518092818552858086019101611cf6565b601f01601f1916010190565b805115611d4b5760200190565b8051821015611d4b5760209160051b010190565b51908115158203611cd357565b60808091805184526020810151602085015260408101516040850152606081015160608501520151910152565b60a0808201916003815260209160048383015260406005604084015260609560608401526080826080850152875180965260c09060c08501938660c08960051b8801019a01986000965b89881061244057505050505050505050505090565b909192939495969798999a60bf19828203018852898c51916101208082018451835283850151848401528a850151918b84015281518091528361014084019201906000905b8981831061257b57505050508584015190828103878401528380835192838152019201906000905b808210612561575050508784015190828103898401528380835192838152019201906000905b8981831061253f578695935061251f92506124fd915093879460019801518482038c860152612361565b868060a01b038c850151168c84015260e0808501519084830390850152612361565b91610100809101519101529d01980198019699989795949392919061242b565b84612552600194968698999496516123b4565b01940192018e949392916124d3565b825184528f959384019390920191600191909101906124ad565b8461258e600194968698999496516123b4565b01940192018e94939291612485565b949190918051604092878451938185526020938785870152868601526060908860018060a01b037f0000000000000000000000000000000000000000000000000000000000000000169283818901527fa264fed2aeca4c017f79af95a85d585564f8bcd0f423908892f3920e8b8e6c2360808099a188519561261e87611bdf565b600187526000985b888a1061273657506126af985090879695949392918a519561264787611bc3565b86528b888701528a8601528401528a608084015260a083015260c0820152855161267081611c43565b6000815260e0820152600061010082015261268a82612386565b5261269481612386565b5084518094819263d017d69960e01b83528b600484016123e1565b038173__$1a0918a2aa2208593bb0a5d7644cd0946b$__5af492831561272c57506000926126f6575b5050156126ed576126e893613f08565b600190565b50505050600090565b90809250813d8311612725575b61270d8183611c5e565b81010312611cd35761271e906123a7565b38806126d8565b503d612703565b513d6000823e3d90fd5b92509294509294958097895161274b81611bc3565b60008152600083820152858b820152858082015285848201528560a0820152600060c08201528560e0820152600061010082015282828a01015201969594928c94928b92612626565b919082039182116127a157565b634e487b7160e01b600052601160045260246000fd5b919082018092116127a157565b156127cb57565b60405162461bcd60e51b815260206004820152600560248201526410b0b2323960d91b6044820152606490fd5b156127ff57565b606460405162461bcd60e51b815260206004820152600460248201526321746f6b60e01b6044820152fd5b9060405161283781611ba8565b82546001600160a01b038116825260a01c602082015260019092015460ff166040830152565b92919261286982611d61565b6040946128796040519283611c5e565b81958483526020809301916060809602850194818611611cd357925b8584106128a55750505050505050565b8684830312611cd35784879184516128bc81611ba8565b8635815282870135838201528587013586820152815201930192612895565b919091610160908181850312611cd3576040519182016001600160401b03811183821017611b9257604052909283919081356001600160401b038111611cd357820181601f82011215611cd35780359061293482611d61565b906129426040519283611c5e565b8282526020820190602060069460061b82010190858211611cd357602001915b8183106130a357505050845260208301356001600160401b038111611cd357830182601f82011215611cd3578281602061299e9335910161285d565b602085015260408301356001600160401b038111611cd35783019082601f83011215611cd3578135916129d083611d61565b926129de6040519485611c5e565b80845260208085019160051b83010191858311611cd35760208101915b838310612fbf575050505050604084015260608201356001600160401b038111611cd357820181601f82011215611cd357803590612a3882611d61565b91612a466040519384611c5e565b80835260208084019160051b83010191848311611cd35760208101915b838310612f415750505050606084015260808201356001600160401b038111611cd35781601f828501011215611cd3578083013590612aa182611d61565b91612aaf6040519384611c5e565b808352602083018460208360051b858901010111611cd357602083870101905b60208360051b85890101018210612dd45750505050608084015260a0828101356001600160401b038111611cd357830182601f82011215611cd3578035612b1581611d61565b91612b236040519384611c5e565b81835260208084019260051b82010191858311611cd35760208201905b838210612da7575050505060a085015260c0838101356001600160401b038111611cd357840183601f82011215611cd3578035612b7c81611d61565b91612b8a6040519384611c5e565b81835260208084019260051b82010191868311611cd35760208201905b838210612d7a575050505060c086015260e08401356001600160401b038111611cd357840183601f82011215611cd357803592612be384611d61565b93612bf16040519586611c5e565b808552602060c0818701920284010192868411611cd357602001905b838210612cfe57505050505060e0840152610100828101356001600160401b038111611cd357830182601f82011215611cd35782816020612c509335910161285d565b90840152610120828101356001600160401b038111611cd357830182601f82011215611cd357803590612c8282611d61565b93612c906040519586611c5e565b82855260208086019360061b83010191818311611cd357602001925b828410612cc6575050505083015261014080910135910152565b604084830312611cd35760206040918251612ce081611bdf565b612ce987611e04565b81528287013583820152815201930192612cac565b8482880312611cd35760405190612d1482611b77565b82358252612d2460208401611e04565b602083015260408301356001600160601b0381168103611cd357604083015260608301359060ff82168203611cd35782602092606089950152608085013560808201528585013586820152815201910190612c0d565b81356001600160401b038111611cd357602091612d9c8a848094880101611e25565b815201910190612ba7565b81356001600160401b038111611cd357602091612dc9898480948801016122ca565b815201910190612b40565b8135906001600160401b038211611cd35761012080601f1984888c01018a030112611cd35760405191612e0683611bc3565b89870184016020818101358552604082013590850152606001356001600160401b038111611cd357896020612e4192878b8f01010101612125565b60408401528987018401608001356001600160401b038111611cd357896020612e7092878b8f01010101611d78565b60608401526001600160401b038a8801850160a0013511611cd357612ea289888c01860160a081013501602001612125565b608084015260c0878b01850181013593906001600160401b038511611cd357612ed68b60208b978f898b9101010101611cd8565b60a0830152612eed8c8760e0978892010101611e04565b90820152610100888c018601810135936001600160401b038511611cd357868a8e602099988f612f28908c809c9b819c878701010101611cd8565b9087015201010135908201528152019201919050612acf565b82356001600160401b038111611cd35782019060809081601f19848a030112611cd35760405191612f7183611bfa565b6020840135835260408401356020840152606084013560408401528301359160018060401b038311611cd357612faf89602080969581960101611cd8565b6060820152815201920191612a63565b82356001600160401b038111611cd357820160609081601f19828b030112611cd35760405191612fee83611ba8565b6020828101358452604083013590840152810135906001600160401b038211611cd3570188603f82011215611cd357602081013561302b81611d61565b916130396040519384611c5e565b818352604060208401928a1b820101908b8211611cd357604001915b8183106130725750505060408201528152602092830192016129fb565b6040838d0312611cd3576020604091825161308c81611bdf565b853581528286013583820152815201920191613055565b604083870312611cd357602060409182516130bd81611bdf565b853581528286013583820152815201920191612962565b916040519160ff602084019416845260018060a01b0316604083015260018060601b031660608201526060815261310a81611bfa565b51902090565b90815180825260208080930193019160005b828110613130575050505090565b835185529381019392810192600101613122565b908060209392818452848401376000828201840152601f01601f1916010190565b600b54901515908160ff82161515146131b25760ff191660ff821617600b556040519081527fb5838f871ddee4623a406029b1a0b6013e0ec30f2dc114307f21459a800a829690602090a1565b5050565b90808210156131da57604051916020830152604082015260408152611cf381611ba8565b90604051916020830152604082015260408152611cf381611ba8565b600d54600160401b811015611b92578060016132159201600d55612232565b61325d578151602083015160a01b6001600160a01b0319166001600160a01b039190911617815560409190910151600191909101805460ff191660ff92909216919091179055565b634e487b7160e01b600052600060045260246000fd5b906020908183528051916132936060936060838701526080860190613110565b9181810151601f19906132b26040958692848a830301848b0152613110565b92015195606082828503019101528551938483528383019184808760051b8601019801966000916000955b8887106132f1575050505050505050505090565b9091929394959697989982828203018752888b5160018060a01b0381511683528761332783830151888587015288860190612361565b910151928881830391015281808451928381520193019087905b878183106133655750505050806001929c01970197019598979694939291906132dd565b83958b6001949693955180518352848101518584015201518c82015201940192018b9291613341565b6133998251826131b6565b61018083015115613bfb5760408051908251602090818501906133bd818684611cf6565b8401938281600496878152030190205415613bec5761012087019081515115613b95578591856133f98580948851809381928951928391611cf6565b810184815203019020546134bc60c08c0151885161342c8161341e8982019485613273565b03601f198101835282611c5e565b519020918c6101009586820151888151910120905191519461349b8c519a8b998a9963bba8d94760e01b8b5260018060a01b037f000000000000000000000000000000000000000000000000000000000000000016908b01523060248b015260448a0152610104890190612361565b936064880152608487015260a48601526003198583030160c4860152612361565b9060e4830152038173__$1a0918a2aa2208593bb0a5d7644cd0946b$__5af4918215613b8a57600092613b54575b505015613b47575050600261353660206000935b6040519085600182519385818186019661351981838a611cf6565b810160048152030190200155604051938492839251928391611cf6565b810160048152030190200155815160c08301519260e08101516101008201519460208101515181515103613b3557838510958615613b2f5785945b8715613b2757925b8715613b205780975b15613b185750935b61359483826131b6565b90602083015151976135a589611d61565b986135b36040519a8b611c5e565b808a526135bf81611d61565b601f19013660208c01378960005b828110613ab05750508151159050613a9957806020806135f293518301019101615b12565b955b805115613a7a578060208061360e93518301019101615b12565b9298939694909591965b6000995b604081015180518c10156138ac578b61363491612393565b51608081905280516020909101518551909a916001600160a01b0316908d1015613894578c8c6136648289612393565b51915b895181101561387e5761367a908a612393565b515b604051630c6191f960e11b8152608060048201529d8e9384936136a3906084860190613110565b9160031992838682030160248701526136bb91612361565b828582030160448601526136ce91612361565b908382030160648401526136e191612361565b03815a6000948591f1998a156138725760009a6137c7575b5060005b6040608051015180518210156137b7578b61373461372a8f938561372091612393565b5192835190612393565b5192825190612393565b516000811283828103128116908483810313901516176127a157600081840313806137a8575b61377a57600081840312928361378c575b50505061377a576001016136fd565b604051633485c51360e21b8152600490fd5b60209293509061379c9103615be3565b9101511038808061376b565b5060408201518184031161375a565b50506001909b019a98995061361c565b9099503d90816000823e6137db8282611c5e565b6020818381010312611cd3578051916001600160401b038311611cd357808201601f848401011215611cd357828201519161381583611d61565b936138236040519586611c5e565b8385526020850192820160208560051b838501010111611cd357602081830101925b60208560051b8385010101841061386257505050505098386136f9565b8351815260209384019301613845565b6040513d6000823e3d90fd5b5060405161388b81611c43565b6000815261367c565b8c8c6040516138a281611c43565b6000815291613667565b5098959493509850905060005b602088015180518210156139e45781600060018a8a8e8b61390160206138ec896138e5839d8a9d612393565b5194612393565b51958160405193828580945193849201611cf6565b810160058152030190208187528952604086209384549087811315881461396e57816139329261395d575b50615be3565b918261394b575b505050505b82815501550190506138b9565b61395493616503565b8a388f80613939565b613968908486616384565b3861392c565b8181101588146139c2578293948261398e94816139b1575b505050612794565b908d8261399f575b5050505061393e565b6139a893616503565b8d38808d613996565b6139ba92616384565b8f8285613986565b6139d9916139d482856139df98616384565b612794565b91616384565b61393e565b50509550955092613a079250602091508160405193828580945193849201611cf6565b81016004815203019020613a1b81546140a3565b90558151907f6d46d52b5fda2a9055705ba74bf5e95807cfa39decf819cdfeaa14f9b2ba346a604060608501519460c060a08201519101518251613a678161341e602082019485613273565b51902082519182526020820152a4600190565b50604051613a8781611c43565b60008152929893969490959196613618565b50604051613aa681611c43565b60008152956135f4565b80613ac160019260208a0151612393565b5160405160208181613ad98c83815193849201611cf6565b8101600581520301902090600052602052613b078260406000200154613b00838b51612393565b5190615af6565b613b118285612393565b52016135cd565b90509361358a565b8197613582565b508592613579565b84613571565b6040516329be7c4760e11b8152600490fd5b51631bd18a1960e31b8152fd5b90809250813d8311613b83575b613b6b8183611c5e565b81010312611cd357613b7c906123a7565b38806134ea565b503d613b61565b83513d6000823e3d90fd5b835162461bcd60e51b8152808601849052602b60248201527f5369676e617475726520726571756972656420666f7220636f6f70657261746960448201526a76652066696e616c697a6560a81b6064820152608490fd5b5050516388d0662b60e01b8152fd5b604080519082516020600181860192613c15818786611cf6565b8501948281600497888152030190200154908115613ef85773__$1a0918a2aa2208593bb0a5d7644cd0946b$__888783820151956060830195865190866101408601998c8c8c51151597848251809251613c7081838d611cf6565b810185815203019020600201549760a08a0198895191610100809c0151935198899687966303d0627d60e41b8852870152602486015260448501526064840152608483015260a4820160c0905260c48201613cca91612361565b0381895af4918215613eed57600092613ebe575b5003613eae57878c8b9594938b9361012083019a8b51511515600014613e1a575050509161349b959391613d908460c08a989601518351613d268161341e8c82019485613273565b519020908381015191608082019d8e519051925195519b8c9a8b998a996369f7fb6360e11b8b5260018060a01b037f000000000000000000000000000000000000000000000000000000000000000016908b01523060248b015260448a0152610104890190612361565b9060e483015203915af4918215613e0f57600092613dd9575b505015613dca575190511115610763575050600261353660206000936134fe565b505051631bd18a1960e31b8152fd5b90809250813d8311613e08575b613df08183611c5e565b81010312611cd357613e01906123a7565b3880613da9565b503d613de6565b85513d6000823e3d90fd5b965097995097505050505084915051151589518910149182613e81575b5050613e7257519061341e613e5960c089015192855192839182019485613273565b51902003610763575050600261353660206000936134fe565b505051633485c51360e21b8152fd5b6002925090613e9a918651809381928b51928391611cf6565b810188815203019020015443108238613e37565b8751630cba69cb60e01b81528990fd5b9091508681813d8311613ee6575b613ed68183611c5e565b81010312611cd357519038613cde565b503d613ecc565b8a513d6000823e3d90fd5b505050516388d0662b60e01b8152fd5b9391909160005b8251811015613f415780613f3b613f2860019386612393565b51613f3481888b615bf4565b8887615bf4565b01613f0f565b5092905060005b815181101561409c57613f5b8183612393565b5190602080830190815186898214159182614091575b505061407457835186898214159182614086575b50506140745781518451148015614068575b61377a576080840191428351111561377a57845160005260108252604094856000209582519481830194855193606080820198895191855190875192613fdc84611bfa565b835285830198895287830193845282019081528c54600160401b811015611b925761400e9060019e8f82018155611d2f565b93909361325d5760019d7fbfd7274449bb908ddf203ddf1c94d588d62b66048e4a9b4b0bc4835067b0353699600394518655519085015551600284015551910155519451955196519151908351928352820152a401613f48565b50606084015115613f97565b604051633c4117f160e21b8152600490fd5b141590508638613f85565b141590508638613f71565b5050509050565b60001981146127a15760010190565b9061325d5760018160008093550155565b600081815260209060088252604091828220858352815282822093845495861561439d57818452600983528484208185528352848420549787891015614394575b82855260038452858520828652845285852054908598821561436e5798995b89811080614365575b8061435b575b156142e657614141818a612251565b506001908181019182549182156142d0575492828710156142ca57865b8c8c8a8d8461428a575b505050505082151580614282575b614259575b614186838254612794565b928061422457508a90558301808411614210576141f492886000805160206165eb83398151915260606141fa97958f958f968f978e988251948552840152820152a4868952600a8852898920805480614203575b50506141ef6141e9828d612251565b906140b2565b6140a3565b9a6140a3565b985b9899614123565b60001901905538806141da565b634e487b7160e01b8a52601160045260248afd5b859f949250606089946141fa978f848f8f97966000805160206165eb83398151915297558251948552840152820152a46140a3565b6142658389868c615ebd565b61426f8185612794565b61427a575b5061417b565b925038614274565b508615614176565b92826142bf96989c926142b9958b8896526003815283832091835252206142b28382546127b7565b9055612794565b97612794565b91388c8c8a8d614168565b8261415e565b505050506142e0909a999a6140a3565b996141fc565b939850985090929550868452600386528484208385528652848420558583526009855283832082845285528383205561431f8186615d2a565b8482526008845282822081835284528282209384541561435257611cf39583526009815283832091835252205490615e67565b50509250505090565b5060648b10614132565b5082151561412c565b5098929750509194508583526009855283832082845285528383205561431f8186615d2a565b97508397614104565b9280965080955052600981528284209184525281205590565b600081815260209060088252604091828220858352815282822093845495861561439d578184526009835284842081855283528484205497878910156145ad575b82855260038452858520828652845285852054908598821561436e5798995b898110806145a4575b80614599575b156142e657614434818a612251565b506001908181019182549182156145835754928287101561457d57865b8c8c8a8d8461454a575b505050505082151580614542575b614519575b614479838254612794565b92806144e457508a90558301808411614210576141f492886000805160206165eb83398151915260606144db97958f958f968f978e988251948552840152820152a4868952600a88528989208054806142035750506141ef6141e9828d612251565b985b9899614416565b859f949250606089946144db978f848f8f97966000805160206165eb83398151915297558251948552840152820152a46140a3565b6145258389868c615ebd565b61452f8185612794565b61453a575b5061446e565b925038614534565b508615614469565b928261457296989c926142b9958b8896526003815283832091835252206142b28382546127b7565b91388c8c8a8d61445b565b82614451565b50505050614593909a999a6140a3565b996144dd565b506103e88b10614425565b5082151561441f565b975083976143f7565b600081815260209060088252604091828220858352815282822093845495861561439d578184526009835284842081855283528484205497878910156147ac575b82855260038452858520828652845285852054908598821561436e5798995b898110806147a3575b80614799575b156142e657614634818a612251565b506001908181019182549182156147835754928287101561477d57865b8c8c8a8d8461474a575b505050505082151580614742575b614719575b614679838254612794565b92806146e457508a90558301808411614210576141f492886000805160206165eb83398151915260606146db97958f958f968f978e988251948552840152820152a4868952600a88528989208054806142035750506141ef6141e9828d612251565b985b9899614616565b859f949250606089946146db978f848f8f97966000805160206165eb83398151915297558251948552840152820152a46140a3565b6147258389868c615ebd565b61472f8185612794565b61473a575b5061466e565b925038614734565b508615614669565b928261477296989c926142b9958b8896526003815283832091835252206142b28382546127b7565b91388c8c8a8d61465b565b82614651565b50505050614793909a999a6140a3565b996146dd565b5060648b10614625565b5082151561461f565b975083976145f7565b600081815260209060088252604091828220858352815282822093845495861561439d578184526009835284842081855283528484205497878910156149ab575b82855260038452858520828652845285852054908598821561436e5798995b898110806149a2575b80614998575b156142e657614833818a612251565b506001908181019182549182156149825754928287101561497c57865b8c8c8a8d84614949575b505050505082151580614941575b614918575b614878838254612794565b92806148e357508a90558301808411614210576141f492886000805160206165eb83398151915260606148da97958f958f968f978e988251948552840152820152a4868952600a88528989208054806142035750506141ef6141e9828d612251565b985b9899614815565b859f949250606089946148da978f848f8f97966000805160206165eb83398151915297558251948552840152820152a46140a3565b6149248389868c615ebd565b61492e8185612794565b614939575b5061486d565b925038614933565b508615614868565b928261497196989c926142b9958b8896526003815283832091835252206142b28382546127b7565b91388c8c8a8d61485a565b82614850565b50505050614992909a999a6140a3565b996148dc565b5060648b10614824565b5082151561481e565b975083976147f6565b600081815260209060088252604091828220858352815282822093845495861561439d57818452600983528484208185528352848420549787891015614baa575b82855260038452858520828652845285852054908598821561436e5798995b89811080614ba1575b80614b97575b156142e657614a32818a612251565b50600190818101918254918215614b8157549282871015614b7b57865b8c8c8a8d84614b48575b505050505082151580614b40575b614b17575b614a77838254612794565b9280614ae257508a90558301808411614210576141f492886000805160206165eb8339815191526060614ad997958f958f968f978e988251948552840152820152a4868952600a88528989208054806142035750506141ef6141e9828d612251565b985b9899614a14565b859f94925060608994614ad9978f848f8f97966000805160206165eb83398151915297558251948552840152820152a46140a3565b614b238389868c615ebd565b614b2d8185612794565b614b38575b50614a6c565b925038614b32565b508615614a67565b9282614b7096989c926142b9958b8896526003815283832091835252206142b28382546127b7565b91388c8c8a8d614a59565b82614a4f565b50505050614b91909a999a6140a3565b99614adb565b5060648b10614a23565b50821515614a1d565b975083976149f5565b90614bbd82611d61565b614bca6040519182611c5e565b8281528092614bdb601f1991611d61565b0190602036910137565b9190614bf2815151614bb3565b90614bfe815151614bb3565b93614c0a825151614bb3565b94600091825b84518051821015614cfe5781614c2591612393565b515160208981614c36858a51612393565b510151916000935b888510614cd5575b8a898614614c7b575b505050614c6d8392614c6760019695614c7494612393565b516127b7565b918b612393565b5201614c10565b85614cc78b8b614cc182614c74999f98888f60019f9e9d9a614ca3614c6d9d614c679c612393565b52600052600382526040918260002091600052526000205492612393565b526140a3565b9a945050509293948a614c4f565b93909184614ce3838d612393565b5114614cf6575060010192908b91614c3e565b919093614c46565b505091959290949560005b81811061571757506001946000865b6156c4575b506000865b6155a2575b5060009773__$1a0918a2aa2208593bb0a5d7644cd0946b$__9660018060a01b0393847f0000000000000000000000000000000000000000000000000000000000000000169a5b6060808801518051831015614e5f578d91614d8a848e93612393565b518b604093845180809781946328a3f8a760e11b83526004600381850152602484015260056044840152606483015260c06084830152855160c4830152614df760209787898099015160e48601528a81015161010486015201516080610124850152610144840190612361565b9060a483015203915af491821561272c5750600091614e2b575b50905015614e22575b600101614d6e565b60009250614e1a565b82813d8311614e58575b614e3f8183611c5e565b810103126103c25750614e51906123a7565b8038614e11565b503d614e35565b5050509491969298939990959760809060808401805180516154bf575b505060a08085015193845161536e575b505050505060005b6101208201518051821015614f645781614ead91612393565b518a8151161561377a578a81511690602080910191825190803b15611cd35760008091602460409485519485938492636030754560e01b845260048401525af18015614f59579260019594927f47172349c05bf58f7f6a376def3bbc250cd3295a7eead0290d8fa3531c6ca9fb928e95614f4a575b5083518151838101918252838152614f3981611bdf565b51902093519051908152a301614e94565b614f5390611c15565b38614f22565b82513d6000823e3d90fd5b505092959791949690939660005b60c08501518051821015614fab57614f8d82614f9492612393565b518b61338e565b15614fa2575b600101614f72565b60009850614f9a565b5050919395969092949660005b60408701518051821015614ff157614fd382614fda92612393565b518b6160bc565b15614fe8575b600101614fb8565b60009250614fe0565b5050919395969092949660005b6101008901518051821015615287578161501791612393565b516020908181019161502b8d8451906147b5565b506150396111b28451612232565b918d6000526003825260409283600020855160005283528360002054948483019586511161527657908f918e9287518160005260038752876000208351600052875261508a88600020918254612794565b90558151918160005260038752876000209051600052865260008051602061660b8339815191528688600020548951908152a38085015160ff168061516457509160448285949360009694511692511696518651958693849263a9059cbb60e01b845260049a8b85015260248401525af1908115613b8a57600091615130575b509050156151235750506001610100915b019050614ffe565b51632fd8225d60e21b8152fd5b82813d831161515d575b6151448183611c5e565b810103126103c25750615156906123a7565b803861510a565b503d61513a565b9092959150600181146000146151e757505080519351910151928b1692908b16906001600160601b0316833b15611cd3576151b9936000928385518097819582946323b872dd60e01b84523060048501615796565b03925af190811561272c575091600191610100936151d8575b5061511b565b6151e190611c15565b386151d2565b90949190600214615203575b505050505060016101009161511b565b8c808251169251169260018060601b0391015116935190803b15611cd3576152469460008094865197889586948593637921219560e11b85523060048601615762565b03925af190811561272c57509160019161010093615267575b8193816151f3565b61527090611c15565b3861525f565b8451632fd8225d60e21b8152600490fd5b505092965092969390945060005b8581106152a55750505050505090565b6152af8183612393565b516152cf6152bd8387612393565b516152c88487612393565b51906127b7565b908660005260036020908082526040938460002084600052835284600020541061535d576152fd8588612393565b51896000528183528460002084600052835261531e85600020918254612794565b9055886000528152826000209160005252806000205461533e8387612393565b511161534d5750600101615295565b51632fd8225d60e21b8152600490fd5b8351632fd8225d60e21b8152600490fd5b93918b9193600654956040966040519687956312f6ab5960e31b875260a4870190600480890152602488015260a06044880152875180915260c487019460c48260051b8901019560209b8c809b01946000935b85851061544357505050505050509184929183926064840152608483015203915af49182156138725760009261540d575b505015615404575b3880808080614e8c565b600094506153fa565b90809250813d831161543c575b6154248183611c5e565b81010312611cd357615435906123a7565b38806153f2565b503d61541a565b92959a9b6154a8819295989a600194979a9c9e60c3199082030189528d51908761549860c08451845286850151878501528b8501518c850152606080860151908501528985015190808b860152840190612361565b9201519088818403910152612361565b9b019501950191928c9a9896938c9a9896926153c1565b60206154f391949e9b9895929d9a9794848e959e60409c99969c5180958194829363d017d69960e01b8452600484016123e1565b03915af490811561387257600091615568575b501561555f575b60005b8c51805182101561554a57906155448f61552c83600195612393565b51805191602082015190606083015192015192613f08565b01615510565b50509295989b9194979a509295983880614e7c565b6000955061550d565b90506020813d60201161559a575b8161558360209383611c5e565b81010312611cd357615594906123a7565b38615506565b3d9150615576565b60209897988085015180518310156156ba57826155be91612393565b5190808201906155cf8251896145b6565b5087600052600392838252604090818101826000208551600052845282600020548151116156a957928c9694928192858d8a99975190600052878552836000208751600052855261562584600020918254612794565b9055518151600052868452826000208651600052845261564a836000209182546127b7565b905584518d60005286845282600020865160005284528d8360002054845190815260008051602061660b833981519152968791a35193805195856000528352816000209051600052825280600020549051908152a30190989798614d22565b8251632fd8225d60e21b8152600490fd5b5050979697614d27565b60e0849998990151805182101561570e57816156df91612393565b51805115615706575b8581510361377a5787916156fc83926157b8565b0190989798614d18565b8581526156e8565b50979697614d1d565b80615727600192879a999a612393565b51856000526157576020600381526040908160002090615747868d612393565b51600052526000209182546127b7565b905501969596614d09565b929060c0949260018060a01b0380921685521660208401526040830152606082015260a06080820152600060a08201520190565b6001600160a01b03918216815291166020820152604081019190915260600190565b80516000919080615af0575033905b60a0810190815115615ade57606081019360ff85511692816020809581860160018060a01b03918282511660409b8960806158128f809d019560018060601b039586885116916130d4565b91019d8e518015600014615ab3575050808852600e87528a882054808f5215615a3d575b5060ff905b511680615915575050509061586b915116845187519485809481936323b872dd60e01b8352303360048501615796565b03925af190811561590b5783916158d6575b50156156a95791809160008051602061660b83398151915294935b51868252600385528282208851835285526158b78383209182546127b7565b90558651968682526003855282822090518252845220549051908152a3565b90508481813d8311615904575b6158ed8183611c5e565b81010312610281576158fe906123a7565b3861587d565b503d6158e3565b84513d85823e3d90fd5b91955093506001810361599457505116915116813b15610770576159538492839287519485809481936323b872dd60e01b8352303360048501615796565b03925af1801561590b57615980575b5091809183600160008051602061660b833981519152969552615898565b61598a8391611c15565b61021f5738615962565b94979695946002146159bc575b50505050819060008051602061660b83398151915294615898565b96949596511691511690835191813b15610770579183916159f593838851809681958294637921219560e11b8452303360048601615762565b03925af18015615a33579184939160008051602061660b833981519152969593615a24575b82968294506159a1565b615a2d90611c15565b38615a1a565b84513d84823e3d90fd5b9193955091939550615a71868651168486511660ff855116908c5192615a6284611ba8565b83528d8301528b8201526131f6565b600d54600019810191908211615a9f57818d528852600e8a52888820558694899490939092909160ff615836565b634e487b7160e01b89526011600452602489fd5b60ff93925090615ac66111b28593612232565b888151168852858a820151168752015116815261583b565b60405163440a57bf60e01b8152600490fd5b906157c7565b919091600083820193841291129080158216911516176127a157565b6020908181840312611cd35780516001600160401b0391828211611cd357019083601f83011215611cd3578151615b4881611d61565b94604092615b596040519788611c5e565b828752858088019360051b86010194828611611cd357868101935b868510615b8657505050505050505090565b8451838111611cd35782019084603f83011215611cd3578882015190615bab82611c81565b615bb789519182611c5e565b82815286898486010111611cd357615bd88b949385948b8685019101611cf6565b815201940193615b74565b600160ff1b81146127a15760000390565b929190926000938185526020906009825260409586812085825283528681205492848252600881528782208683528152878220918254945b858110615c4657505050505050615c44929350615d2a565b565b8085615c538c9387612251565b50541480615d13575b615c6b575b6001915001615c2c565b888689615c788489612251565b508660018092015491615c8b878c612251565b500155818752600a8852858720805480158015615ccc575b5050508560008051602061664b8339815191529160019751908152868a820152a48a9150615c61565b935093509350939450615cff576000190190558a9190899087908a908560008051602061664b8339815191526001615ca3565b634e487b7160e01b85526011600452602485fd5b506001615d208287612251565b5001541515615c5c565b9060008281526020916008835260409081832081845284528183209485548015615e5057818552600986528385208386528652838520549681881015615e47575b965b81811080615e31575b15615d8957615d84906140a3565b615d6d565b91929394959650811015600014615e1d575080845260098552828420828552855283838120558352600884528183209083528352812080549282825583615dd1575b50505050565b6001916001600160ff1b0385168503615e0957835282209260011b8301925b83811015615dcb57808360029255838382015501615df0565b634e487b7160e01b84526011600452602484fd5b908452600985528284209184529352902055565b506001615e3e828a612251565b50015415615d76565b96508496615d6b565b508352600984528183209083529092529081205550565b919060009280549182811015615eb4575b828110615e8457505050565b6001615e908284612251565b500154615ea0575b600101615e78565b93615eac6001916140a3565b949050615e98565b50600093505050565b918392600095818752602092601084526040918289209081549889156160af5750600c8652838a20549788905b8a8210806160a6575b1561608657615f028285611d2f565b50998a918d8760018095015414801590616079575b801561606d575b61605f578a8d91825480825260038093528d8c8320908c84525260028c8320549401938454908082106000146160575750955b85871161604e575b861561603b57508f8f968f92968f968f958f80859b917f4f02c680c56246ffd693c94e5f46c036a01b12950c88219159645a302816307b9a60008051602061660b8339815191528a8c87615ff19c8c98615fe69a528584528282208783528452828220615fc78a8254612794565b905554948582528352818120868252835220548d51908152a38c616384565b6142b2838254612794565b9f616000868d835490886163e1565b5054948251918c8352820152a481018082116160275761602090916140a3565b9098615eea565b634e487b7160e01b8c52601160045260248cfd5b979550505050509a5061602091506140a3565b95508495615f59565b905095615f51565b509a509161602091506140a3565b5060028d015415615f1e565b5060038d01544211615f17565b9a969497505097505050600c9183525220805482116160a3575050565b55565b50801515615ef3565b9950975050505050505050565b919091825160209182850151926160d383836149b4565b5060005b604080880180518051841015616376576160ff846160f6818894612393565b51519351612393565b5101519061610d81896131b6565b918660005260039283875284600020896000528752818560002054101560001461636657866161489181875193828580945193849201611cf6565b81016005815203019020886000528652836000209187600052838752846000208960005287528460002061617d838254612794565b905561618a8284546127b7565b90818455808b10928361634f575b508215616348578a925b1561633c5794929190925b8051946161b986611bdf565b6001928387528960005b8181106162e857505080600052818a52826000208c6000528a52826000205491886000528a52826000208c6000528a528383600020549501549783519161620983611c28565b82528a8201528b83820152606091828201526080948582015260a0958682015260c0978882015261623987612386565b5261624386612386565b50815196898801928a895287518094528a818a019801966000965b8c8689106162a0575050505050505050505081600193927f11e95b31ceefa95a59034392a3de4f79c9fe7d7e441d3746a1f82e64f7a32bcc920390a1016160d7565b895180518c5281810151828d015284810151858d015286810151878d015282810151838d015283810151848d0152850151858c015260e0909a0199909801979686019661625e565b8499939497959697516162fa81611c28565b6000815260008382015260008b8201526000606082015260006080820152600060a0820152600060c082015282828b010152018a9098939298969594966161c3565b508994929190926161ad565b80926161a2565b61635e60018601918254615af6565b905538616198565b5060009a50505050505050505050565b506001985050505050505050565b909180156163dc576020604060008051602061660b833981519152926000908582526003845282822087835284526163c08383209182546127b7565b90558481526003835281812086825283522054604051908152a3565b505050565b939293919091811561377a578415615ade5760009481865260209060088252604091828820868952815282882083519061641a82611bdf565b86825282820184815281549091600160401b8210156164ef579061644391600182018155612251565b9290926164db575182555160019091015583885260088152828820868952815282882054600019810191908211615a9f57908392917fae767eeb0c57abd46e2e0b422895ba3b89372fbd0510a58f00d996faf66f027d94829a83156164c2575b878152600a8352206164b581546140a3565b90558351928352820152a4565b878152600983528181208a8252835280828120556164a3565b634e487b7160e01b8b5260048b905260248bfd5b634e487b7160e01b8c52604160045260248cfd5b90928015615dcb5761654c90600090838252848460209360038552604094858220848352815285822054858110156000146165e4575084955b86616588575b5050505050612794565b8015615dcb5761655e90838584615ebd565b928361656a5750505050565b61657f936165799184846163e1565b50615d2a565b38808080615dcb565b80838560008051602061660b83398151915295526003845281812087825284528181206165b68a8254612794565b905585815260038452818120878252845220549051908152a36165da828688616384565b8484388080616542565b9561653c56fe1ffe8e6348fe244a8988797c02b57999821149e7b25c9f93a85c77819efdde67ab4d21442efe134c3d0c087e2b687e9593a1c09176f498d37873210cde052c45990f4c22d4b046a9a7d673c4a252b906cadd4f3290465e297f998c28a449652b0971ac81b80f99fe0089c3fbe4af4fa1148f2ce78bc6345e76b05be73500de1fa26469706673582212200ba53d67966f6ebe6a31290258c30a49025ca4f61d4e363a2e36a7a95009309a64736f6c63430008180033",GL0=($)=>{return typeof $[0]==="string"||Array.isArray($[0])||"_isInterface"in $[0]},aY;var Z20=p(()=>{aD();CL=[{inputs:[{internalType:"address",name:"_entityProvider",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"E0",type:"error"},{inputs:[],name:"E1",type:"error"},{inputs:[],name:"E2",type:"error"},{inputs:[],name:"E3",type:"error"},{inputs:[],name:"E4",type:"error"},{inputs:[],name:"E5",type:"error"},{inputs:[],name:"E6",type:"error"},{inputs:[],name:"E7",type:"error"},{inputs:[],name:"E8",type:"error"},{inputs:[],name:"E9",type:"error"},{anonymous:!1,inputs:[{components:[{internalType:"bytes32",name:"left",type:"bytes32"},{internalType:"bytes32",name:"right",type:"bytes32"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"leftReserve",type:"uint256"},{internalType:"uint256",name:"rightReserve",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"int256",name:"ondelta",type:"int256"}],indexed:!1,internalType:"struct Settled[]",name:"settled",type:"tuple[]"}],name:"AccountSettled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"sender",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"counterentity",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"cooperativeNonce",type:"uint256"}],name:"CooperativeClose",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"debtor",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"creditor",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"debtIndex",type:"uint256"}],name:"DebtCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"debtor",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"creditor",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountPaid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"remainingAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newDebtIndex",type:"uint256"}],name:"DebtEnforced",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"debtor",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"creditor",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountForgiven",type:"uint256"},{indexed:!1,internalType:"uint256",name:"debtIndex",type:"uint256"}],name:"DebtForgiven",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"leftEntity",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"rightEntity",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"sigLen",type:"uint256"},{indexed:!1,internalType:"address",name:"entityProvider",type:"address"}],name:"DebugSettleStart",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"sender",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"counterentity",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"initialDisputeNonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"initialProofbodyHash",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"finalProofbodyHash",type:"bytes32"}],name:"DisputeFinalized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"sender",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"counterentity",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"disputeNonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"proofbodyHash",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"initialArguments",type:"bytes"}],name:"DisputeStarted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"isPaused",type:"bool"}],name:"EmergencyPauseToggled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"provider",type:"address"}],name:"EntityProviderAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"provider",type:"address"}],name:"EntityProviderRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"entityId",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"hankoHash",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bool",name:"success",type:"bool"}],name:"HankoBatchProcessed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"insured",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"insurer",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"creditor",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"InsuranceClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"insured",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"insurer",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"limit",type:"uint256"},{indexed:!1,internalType:"uint256",name:"expiresAt",type:"uint256"}],name:"InsuranceRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"entity",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newBalance",type:"uint256"}],name:"ReserveUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"hashlock",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"revealer",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"secret",type:"bytes32"}],name:"SecretRevealed",type:"event"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"",type:"bytes"}],name:"_accounts",outputs:[{internalType:"uint256",name:"cooperativeNonce",type:"uint256"},{internalType:"bytes32",name:"disputeHash",type:"bytes32"},{internalType:"uint256",name:"disputeTimeout",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"_activeDebts",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"",type:"bytes"},{internalType:"uint256",name:"",type:"uint256"}],name:"_collaterals",outputs:[{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"int256",name:"ondelta",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"}],name:"_debtIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"_debts",outputs:[{internalType:"bytes32",name:"creditor",type:"bytes32"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"}],name:"_reserves",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"_tokens",outputs:[{internalType:"address",name:"contractAddress",type:"address"},{internalType:"uint96",name:"externalTokenId",type:"uint96"},{internalType:"uint8",name:"tokenType",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"e1",type:"bytes32"},{internalType:"bytes32",name:"e2",type:"bytes32"}],name:"accountKey",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"provider",type:"address"}],name:"addEntityProvider",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"admin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"approvedEntityProviders",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"leftEntity",type:"bytes32"},{internalType:"bytes32",name:"rightEntity",type:"bytes32"},{components:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"int256",name:"leftDiff",type:"int256"},{internalType:"int256",name:"rightDiff",type:"int256"},{internalType:"int256",name:"collateralDiff",type:"int256"},{internalType:"int256",name:"ondeltaDiff",type:"int256"}],internalType:"struct SettlementDiff[]",name:"diffs",type:"tuple[]"},{internalType:"uint256[]",name:"forgiveDebtsInTokenIds",type:"uint256[]"},{components:[{internalType:"bytes32",name:"insured",type:"bytes32"},{internalType:"bytes32",name:"insurer",type:"bytes32"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"limit",type:"uint256"},{internalType:"uint256",name:"expiresAt",type:"uint256"}],internalType:"struct InsuranceRegistration[]",name:"insuranceRegs",type:"tuple[]"}],name:"computeSettlementHash",outputs:[{internalType:"bytes32",name:"hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"encodedMsgLength",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"defaultDisputeDelay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"counterentity",type:"bytes32"},{internalType:"uint256",name:"initialCooperativeNonce",type:"uint256"},{internalType:"uint256",name:"finalCooperativeNonce",type:"uint256"},{internalType:"uint256",name:"initialDisputeNonce",type:"uint256"},{internalType:"uint256",name:"finalDisputeNonce",type:"uint256"},{internalType:"bytes32",name:"initialProofbodyHash",type:"bytes32"},{components:[{internalType:"int256[]",name:"offdeltas",type:"int256[]"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"},{components:[{internalType:"address",name:"transformerAddress",type:"address"},{internalType:"bytes",name:"encodedBatch",type:"bytes"},{components:[{internalType:"uint256",name:"deltaIndex",type:"uint256"},{internalType:"uint256",name:"rightAllowance",type:"uint256"},{internalType:"uint256",name:"leftAllowance",type:"uint256"}],internalType:"struct Allowance[]",name:"allowances",type:"tuple[]"}],internalType:"struct TransformerClause[]",name:"transformers",type:"tuple[]"}],internalType:"struct ProofBody",name:"finalProofbody",type:"tuple"},{internalType:"bytes",name:"finalArguments",type:"bytes"},{internalType:"bytes",name:"initialArguments",type:"bytes"},{internalType:"bytes",name:"sig",type:"bytes"},{internalType:"bool",name:"startedByLeft",type:"bool"},{internalType:"uint256",name:"disputeUntilBlock",type:"uint256"},{internalType:"bool",name:"cooperative",type:"bool"}],internalType:"struct FinalDisputeProof",name:"params",type:"tuple"}],name:"disputeFinalize",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"counterentity",type:"bytes32"},{internalType:"uint256",name:"cooperativeNonce",type:"uint256"},{internalType:"uint256",name:"disputeNonce",type:"uint256"},{internalType:"bytes32",name:"proofbodyHash",type:"bytes32"},{internalType:"bytes",name:"sig",type:"bytes"},{internalType:"bytes",name:"initialArguments",type:"bytes"}],internalType:"struct InitialDisputeProof",name:"params",type:"tuple"}],name:"disputeStart",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"emergencyPause",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"entity",type:"bytes32"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"enforceDebts",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"entity",type:"bytes32"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"enforceDebtsLarge",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"entityDisputeDelays",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"entityNonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"entityProvider",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"entityProvidersList",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"entity",type:"bytes32"},{internalType:"address",name:"contractAddress",type:"address"},{internalType:"uint96",name:"externalTokenId",type:"uint96"},{internalType:"uint8",name:"tokenType",type:"uint8"},{internalType:"uint256",name:"internalTokenId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct ExternalTokenToReserve",name:"params",type:"tuple"}],name:"externalTokenToReserve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getApprovedProviders",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getTokenMetadata",outputs:[{internalType:"address",name:"contractAddress",type:"address"},{internalType:"uint96",name:"externalTokenId",type:"uint96"},{internalType:"uint8",name:"tokenType",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTokensLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"insuranceCursor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"}],name:"insuranceLines",outputs:[{internalType:"bytes32",name:"insurer",type:"bytes32"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"remaining",type:"uint256"},{internalType:"uint256",name:"expiresAt",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"entity",type:"bytes32"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mintToReserve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC1155BatchReceived",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC1155Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint8",name:"tokenType",type:"uint8"},{internalType:"address",name:"contractAddress",type:"address"},{internalType:"uint96",name:"externalTokenId",type:"uint96"}],name:"packTokenReference",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes",name:"encodedBatch",type:"bytes"},{internalType:"address",name:"entityProviderAddr",type:"address"},{internalType:"bytes",name:"hankoData",type:"bytes"},{internalType:"uint256",name:"nonce",type:"uint256"}],name:"processBatch",outputs:[{internalType:"bool",name:"completeSuccess",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"provider",type:"address"}],name:"removeEntityProvider",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"fromEntity",type:"bytes32"},{internalType:"bytes32",name:"toEntity",type:"bytes32"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"reserveToReserve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"delayBlocks",type:"uint256"}],name:"setDefaultDisputeDelay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"isPaused",type:"bool"}],name:"setEmergencyPause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"entity",type:"bytes32"},{internalType:"uint256",name:"delayBlocks",type:"uint256"}],name:"setEntityDisputeDelay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"leftEntity",type:"bytes32"},{internalType:"bytes32",name:"rightEntity",type:"bytes32"},{components:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"int256",name:"leftDiff",type:"int256"},{internalType:"int256",name:"rightDiff",type:"int256"},{internalType:"int256",name:"collateralDiff",type:"int256"},{internalType:"int256",name:"ondeltaDiff",type:"int256"}],internalType:"struct SettlementDiff[]",name:"diffs",type:"tuple[]"},{internalType:"uint256[]",name:"forgiveDebtsInTokenIds",type:"uint256[]"},{components:[{internalType:"bytes32",name:"insured",type:"bytes32"},{internalType:"bytes32",name:"insurer",type:"bytes32"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"limit",type:"uint256"},{internalType:"uint256",name:"expiresAt",type:"uint256"}],internalType:"struct InsuranceRegistration[]",name:"insuranceRegs",type:"tuple[]"},{internalType:"bytes",name:"sig",type:"bytes"}],name:"settle",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"tokenToId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"packed",type:"bytes32"}],name:"unpackTokenReference",outputs:[{internalType:"address",name:"contractAddress",type:"address"},{internalType:"uint96",name:"externalTokenId",type:"uint96"},{internalType:"uint8",name:"tokenType",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"entity",type:"bytes32"},{components:[{components:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct Flashloan[]",name:"flashloans",type:"tuple[]"},{components:[{internalType:"bytes32",name:"receivingEntity",type:"bytes32"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct ReserveToReserve[]",name:"reserveToReserve",type:"tuple[]"},{components:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes32",name:"receivingEntity",type:"bytes32"},{components:[{internalType:"bytes32",name:"entity",type:"bytes32"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct EntityAmount[]",name:"pairs",type:"tuple[]"}],internalType:"struct ReserveToCollateral[]",name:"reserveToCollateral",type:"tuple[]"},{components:[{internalType:"bytes32",name:"counterparty",type:"bytes32"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"sig",type:"bytes"}],internalType:"struct CollateralToReserve[]",name:"collateralToReserve",type:"tuple[]"},{components:[{internalType:"bytes32",name:"leftEntity",type:"bytes32"},{internalType:"bytes32",name:"rightEntity",type:"bytes32"},{components:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"int256",name:"leftDiff",type:"int256"},{internalType:"int256",name:"rightDiff",type:"int256"},{internalType:"int256",name:"collateralDiff",type:"int256"},{internalType:"int256",name:"ondeltaDiff",type:"int256"}],internalType:"struct SettlementDiff[]",name:"diffs",type:"tuple[]"},{internalType:"uint256[]",name:"forgiveDebtsInTokenIds",type:"uint256[]"},{components:[{internalType:"bytes32",name:"insured",type:"bytes32"},{internalType:"bytes32",name:"insurer",type:"bytes32"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"limit",type:"uint256"},{internalType:"uint256",name:"expiresAt",type:"uint256"}],internalType:"struct InsuranceRegistration[]",name:"insuranceRegs",type:"tuple[]"},{internalType:"bytes",name:"sig",type:"bytes"},{internalType:"address",name:"entityProvider",type:"address"},{internalType:"bytes",name:"hankoData",type:"bytes"},{internalType:"uint256",name:"nonce",type:"uint256"}],internalType:"struct Settlement[]",name:"settlements",type:"tuple[]"},{components:[{internalType:"bytes32",name:"counterentity",type:"bytes32"},{internalType:"uint256",name:"cooperativeNonce",type:"uint256"},{internalType:"uint256",name:"disputeNonce",type:"uint256"},{internalType:"bytes32",name:"proofbodyHash",type:"bytes32"},{internalType:"bytes",name:"sig",type:"bytes"},{internalType:"bytes",name:"initialArguments",type:"bytes"}],internalType:"struct InitialDisputeProof[]",name:"disputeStarts",type:"tuple[]"},{components:[{internalType:"bytes32",name:"counterentity",type:"bytes32"},{internalType:"uint256",name:"initialCooperativeNonce",type:"uint256"},{internalType:"uint256",name:"finalCooperativeNonce",type:"uint256"},{internalType:"uint256",name:"initialDisputeNonce",type:"uint256"},{internalType:"uint256",name:"finalDisputeNonce",type:"uint256"},{internalType:"bytes32",name:"initialProofbodyHash",type:"bytes32"},{components:[{internalType:"int256[]",name:"offdeltas",type:"int256[]"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"},{components:[{internalType:"address",name:"transformerAddress",type:"address"},{internalType:"bytes",name:"encodedBatch",type:"bytes"},{components:[{internalType:"uint256",name:"deltaIndex",type:"uint256"},{internalType:"uint256",name:"rightAllowance",type:"uint256"},{internalType:"uint256",name:"leftAllowance",type:"uint256"}],internalType:"struct Allowance[]",name:"allowances",type:"tuple[]"}],internalType:"struct TransformerClause[]",name:"transformers",type:"tuple[]"}],internalType:"struct ProofBody",name:"finalProofbody",type:"tuple"},{internalType:"bytes",name:"finalArguments",type:"bytes"},{internalType:"bytes",name:"initialArguments",type:"bytes"},{internalType:"bytes",name:"sig",type:"bytes"},{internalType:"bool",name:"startedByLeft",type:"bool"},{internalType:"uint256",name:"disputeUntilBlock",type:"uint256"},{internalType:"bool",name:"cooperative",type:"bool"}],internalType:"struct FinalDisputeProof[]",name:"disputeFinalizations",type:"tuple[]"},{components:[{internalType:"bytes32",name:"entity",type:"bytes32"},{internalType:"address",name:"contractAddress",type:"address"},{internalType:"uint96",name:"externalTokenId",type:"uint96"},{internalType:"uint8",name:"tokenType",type:"uint8"},{internalType:"uint256",name:"internalTokenId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct ExternalTokenToReserve[]",name:"externalTokenToReserve",type:"tuple[]"},{components:[{internalType:"bytes32",name:"receivingEntity",type:"bytes32"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct ReserveToExternalToken[]",name:"reserveToExternalToken",type:"tuple[]"},{components:[{internalType:"address",name:"transformer",type:"address"},{internalType:"bytes32",name:"secret",type:"bytes32"}],internalType:"struct SecretReveal[]",name:"revealSecrets",type:"tuple[]"},{internalType:"uint256",name:"hub_id",type:"uint256"}],internalType:"struct Batch",name:"batch",type:"tuple"}],name:"unsafeProcessBatch",outputs:[{internalType:"bool",name:"completeSuccess",type:"bool"}],stateMutability:"nonpayable",type:"function"}];aY=class aY extends a7{constructor(...$){if(GL0($))super(...$);else{let[Q,Z]=$;super(CL,aY.linkBytecode(Q),Z)}}static linkBytecode($){let Q=Q20;return Q=Q.replace(new RegExp("__\\$1a0918a2aa2208593bb0a5d7644cd0946b\\$__","g"),$["contracts/Account.sol:Account"].replace(/^0x/,"").toLowerCase()),Q}getDeployTransaction($,Q){return super.getDeployTransaction($,Q||{})}deploy($,Q){return super.deploy($,Q||{})}connect($){return super.connect($)}static bytecode=Q20;static abi=CL;static createInterface(){return new d8(CL)}static connect($,Q){return new c3($,CL,Q)}}});var rk=p(()=>{Z20()});var LL,X20="0x60406080815234620002a8576200001f6200001962000351565b6200062d565b6200002a6001600455565b6200005d62000050602860405167636f696e6261736560c01b8152600760088201522090565b805460ff19166001179055565b6200008362000050602860405167657468657265756d60c01b8152600760088201522090565b620000a7620000506027604051663134ba31b7b4b760c91b81526007808201522090565b620000cb620000506027604051660756e69737761760cc1b81526007808201522090565b620001b7620000d9620002ed565b6103e88152610bb860208201526000818401526033606082015282516200014b816200013c602082019485919091606061ffff81608084019563ffffffff8082511686528060208301511660208701526040820151166040860152015116910152565b03601f198101835282620002c3565b519020620001586200030d565b907fa1237dddbd29f99fde152257ccb2f783e434670afa247b2a52d81a326d4cf0ad8252600060208301526000848301524360608301526000608083015260a0820152620001b160016000526003602052604060002090565b6200039b565b60017f52629ba16cb44b809941f19e442f11a9973e93cc91be0d91df4afbe6e7c624ca6001600160ff1b0182620001f8620001f16200032d565b8262000402565b6200020d620002066200032d565b8362000402565b6001600052600a602052620002497fbbc70db1b6c7afd11e79c0fb0051300458f1a3acb8ee9789d9b6b26c61ad9bc75b66038d7ea4c680009055565b6001600052600b6020526200027e7f72c6bfb7988af3a1efa6568f02a999bc52252641c659d85961ca3d372b57d5cf6200023d565b84519081526020810191909152604090a26200029a6002600455565b516146989081620009f98239f35b600080fd5b634e487b7160e01b600052604160045260246000fd5b601f909101601f19168101906001600160401b03821190821017620002e757604052565b620002ad565b60405190608082016001600160401b03811183821017620002e757604052565b6040519060c082016001600160401b03811183821017620002e757604052565b60405190602082016001600160401b03811183821017620002e75760405260008252565b60408051919082016001600160401b03811183821017620002e757604052602082527f68747470733a2f2f786c6e2e636f6d2f656e746974792f7b69647d2e6a736f6e6020830152565b908051825560208101516001830155604081015160028301556060810151600383015560048201906080810151906003821015620003ec5760059260a09260ff801983541691161790550151910155565b634e487b7160e01b600052602160045260246000fd5b9060405191600190818452602091602085019182526040850190808252606093606087019466038d7ea4c6800086526080880180604052885185518082036200057957505050908291826000905b62000519575b505050865114600014620004d95780600084517fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62620004aa8851604051918291339583908152602081019190915260400190565b0390a45b855103620004ca5750620004c893505190519033620009c3565b565b915050620004c89233620008a6565b8060006040517f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb33918062000510888d8362000782565b0390a4620004ae565b8951811015620005735780849160051b8b016200056962000560620005508688850151940151936000526000602052604060002090565b6001600052602052604060002090565b91825462000728565b9055018362000450565b62000456565b635b05999160e01b835260848b019190915260a48a0152604490fd5b90600182811c92168015620005c7575b6020831014620005b157565b634e487b7160e01b600052602260045260246000fd5b91607f1691620005a5565b601f8111620005df575050565b60009060026000526020600020906020601f850160051c8301941062000622575b601f0160051c01915b8281106200061657505050565b81815560010162000609565b909250829062000600565b80519091906001600160401b038111620002e75762000659816200065360025462000595565b620005d2565b602080601f8311600114620006a0575081906200068f939460009262000694575b50508160011b916000199060031b1c19161790565b600255565b0151905038806200067a565b6002600052601f198316949091907f405787fa12a823e0f2b7631cc41b3ba8828b3321ca811111fa75cd3aa3bb5ace926000905b8782106200070f575050836001959610620006f5575b505050811b01600255565b015160001960f88460031b161c19169055388080620006ea565b80600185968294968601518155019501930190620006d4565b919082018092116200073657565b634e487b7160e01b600052601160045260246000fd5b90815180825260208080930193019160005b8281106200076d575050505090565b8351855293810193928101926001016200075e565b90916200079c620007ab936040845260408401906200074c565b9160208184039101526200074c565b90565b90816020910312620002a857516001600160e01b031981168103620002a85790565b919082519283825260005b848110620007fd575050826000602080949584010152601f8019910116010190565b602081830181015184830182015201620007db565b9262000845620007ab9593620008549360018060a01b031686526000602087015260a0604087015260a08601906200074c565b9084820360608601526200074c565b916080818403910152620007d0565b3d15620008a1573d906001600160401b038211620002e7576040519162000895601f8201601f191660200184620002c3565b82523d6000602084013e565b606090565b929160013b620008b7575b50505050565b602091620008dc604051948593849363bc197c8160e01b988986526004860162000812565b0381600060015af16000918162000958575b506200092557620008fe62000863565b805190816200092057604051632bfa23e760e11b815260016004820152602490fd5b602001fd5b6001600160e01b031916036200093f5738808080620008b1565b604051632bfa23e760e11b815260016004820152602490fd5b6200098091925060203d60201162000988575b620009778183620002c3565b810190620007ae565b9038620008ee565b503d6200096b565b909260a092620007ab9594600180861b0316835260006020840152604083015260608201528160808201520190620007d0565b929160013b620009d35750505050565b602091620008dc604051948593849363f23a6e6160e01b98898652600486016200099056fe6080604052600436101561001257600080fd5b60003560e01c8062fdd58e1461029157806301ffc9a71461028c57806303db7616146102055780630e89341c146102875780630ebf19c6146102825780631e76fea51461027d5780631ed3d4401461027857806326760ce6146102735780632a20cc801461026e5780632eb2c2d6146102695780632fae4ffd14610264578063311cf8eb1461025f5780634e1273f41461025a578063504d23ea1461025557806357991d30146102505780635a7931c81461024b5780635b70ae41146102465780636702bc7714610241578063680c3ff21461023c57806368436f10146102375780637ea397c8146102325780638193e0071461022d578063820eec5f14610228578063848202fe146102235780638aad06281461021e5780638d197ec7146102195780638dbe6c38146102145780639248cd431461020f578063a22cb4651461020a578063a74f77e714610205578063c83fa48e14610200578063cce41598146101fb578063d8cb5fd5146101f6578063d93e68d6146101f1578063e1657b8a146101ec578063e5b338fd146101e7578063e8f48031146101e2578063e985e9c5146101dd578063edd2133b146101d85763f242432a146101d357600080fd5b611f3a565b611e7a565b611e0a565b611dee565b611d80565b611ccb565b611c70565b611ab2565b61196e565b6117dd565b610396565b611744565b6116b9565b611544565b61151d565b6114d1565b6114b3565b611351565b611314565b611299565b611273565b61119c565b611118565b6110bf565b611057565b611001565b610fd0565b610f16565b610ea5565b610e8d565b610cff565b610c13565b610b03565b610ac3565b6108b0565b610651565b610414565b610328565b6102db565b600435906001600160a01b03821682036102ac57565b600080fd5b602435906001600160a01b03821682036102ac57565b35906001600160a01b03821682036102ac57565b346102ac5760403660031901126102ac57602061030d6102f9610296565b6024356000526000835260406000206112fd565b54604051908152f35b6001600160e01b03198116036102ac57565b346102ac5760203660031901126102ac57602060043561034781610316565b63ffffffff60e01b16636cdb3d1360e11b8114908115610385575b8115610374575b506040519015158152f35b6301ffc9a760e01b14905038610369565b6303a24d0760e21b81149150610362565b346102ac5760003660031901126102ac57602060405166038d7ea4c680008152f35b60005b8381106103cb5750506000910152565b81810151838201526020016103bb565b906020916103f4815180928185528580860191016103b8565b601f01601f1916010190565b9060206104119281815201906103db565b90565b346102ac576020806003193601126102ac57604051600091600254610438816109e6565b808452906001908181169081156104b25750600114610472575b61046e8461046281880382610574565b60405191829182610400565b0390f35b919350600260005283600020916000925b82841061049f575050508161046e936104629282010193610452565b8054858501870152928501928101610483565b60ff1916858501525050151560051b82010191506104628161046e610452565b634e487b7160e01b600052604160045260246000fd5b608081019081106001600160401b0382111761050357604052565b6104d2565b60c081019081106001600160401b0382111761050357604052565b606081019081106001600160401b0382111761050357604052565b60e081019081106001600160401b0382111761050357604052565b602081019081106001600160401b0382111761050357604052565b601f909101601f19168101906001600160401b0382119082101761050357604052565b604051906105a482610508565b565b604051906105a4826104e8565b6001600160401b03811161050357601f01601f191660200190565b9291926105da826105b3565b916105e86040519384610574565b8294818452818301116102ac578281602093846000960137010152565b9080601f830112156102ac57816020610411933591016105ce565b60406003198201126102ac57600435906001600160401b0382116102ac5761064a91600401610605565b9060243590565b346102ac5761065f36610620565b600091600183528260205261068261067a33604086206112fd565b541515611fe5565b61068b81610e41565b541561070d576106a561069d836109b6565b541515612031565b6106e66106b182610e41565b54916106c46106bf846109c6565b6120c3565b836106ce82610e41565b556106e1816106dc866109c6565b612151565b612226565b7fea3298815689e7c88c8a95c13838806450c4cee965a7c33dda77b335f64565788480a480f35b60405162461bcd60e51b815260206004820152601160248201527013985b59481b9bdd08185cdcda59db9959607a1b6044820152606490fd5b6024359060038210156102ac57565b6044359060038210156102ac57565b359063ffffffff821682036102ac57565b359061ffff821682036102ac57565b60809060431901126102ac576040519061079d826104e8565b8163ffffffff60443581811681036102ac57825260643581811681036102ac57602083015260843590811681036102ac57604082015260a4359061ffff821682036102ac5760600152565b60809060631901126102ac5760405190610801826104e8565b8163ffffffff60643581811681036102ac57825260843581811681036102ac57602083015260a43590811681036102ac57604082015260c4359061ffff821682036102ac5760600152565b60809060231901126102ac5760405190610865826104e8565b8163ffffffff60243581811681036102ac57825260443581811681036102ac57602083015260643590811681036102ac5760408201526084359061ffff821682036102ac5760600152565b346102ac5760c03660031901126102ac576004357f1022d6ed189b00c6d01d0bdfcc78a25b81a33fc04c61bc53abf2de6bbc60f3756109b16108f0610746565b6109606108fc36610784565b610910610908876109b6565b541515612246565b610927600161091e886109b6565b01541515612289565b60405161094a8161093c6020820194856122c9565b03601f198101835282610574565b5190206005610958876109b6565b015414612301565b61098761098261097c6004610974886109b6565b015460ff1690565b83613235565b612340565b60006001610994866109b6565b0155600060026109a3866109b6565b01556040519182918261238a565b0390a2005b6000526003602052604060002090565b6000526006602052604060002090565b6000526000602052604060002090565b90600182811c92168015610a16575b6020831014610a0057565b634e487b7160e01b600052602260045260246000fd5b91607f16916109f5565b90604051918260008254610a33816109e6565b90818452602094600191600181169081600014610aa15750600114610a62575b5050506105a492500383610574565b600090815285812095935091905b818310610a895750506105a49350820101388080610a53565b85548884018501529485019487945091830191610a70565b925050506105a494925060ff191682840152151560051b820101388080610a53565b346102ac5760203660031901126102ac57600435600052600660205261046e610aef6040600020610a20565b6040519182916020835260208301906103db565b346102ac57610b1136610620565b6000916001835282602052610b2c61067a33604086206112fd565b80518015159081610c07575b5015610bcc57610b9490610b4e610908846109b6565b610b61610b5a82610e41565b541561239a565b83610b73610b6e856109c6565b610a20565b8051610bbb575b505082610b8682610e41565b556106e1816106dc856109c6565b7f0d74c26d085287bcf3070f20f8d884a204aa6f73949ab189d58abd345b1cac948380a380f35b610bc490610e41565b558338610b7a565b60405162461bcd60e51b8152602060048201526013602482015272092dcecc2d8d2c840dcc2daca40d8cadccee8d606b1b6044820152606490fd5b60209150111538610b38565b346102ac576020806003193601126102ac5760c0906004359081600052600a815260408060002054600b83528160002054906009845260ff6004846000200154169260038552600581600020015494815196808852600160ff1b179087015285015260608401521515608083015260a0820152f35b6001600160401b0381116105035760051b60200190565b9080601f830112156102ac576020908235610cb981610c88565b93610cc76040519586610574565b81855260208086019260051b8201019283116102ac57602001905b828210610cf0575050505090565b81358152908301908301610ce2565b346102ac5760a03660031901126102ac57610d18610296565b610d206102b1565b60443591906001600160401b03908184116102ac57610d4460049436908601610c9f565b906064358381116102ac57610d5c9036908701610c9f565b926084359081116102ac57610d749036908701610605565b936001600160a01b03808216903382141580610df5575b610dd657831615610dbe5715610da757610da59550614015565b005b604051626a0d4560e21b8152600081880152602490fd5b604051632bfa23e760e11b8152600081890152602490fd5b60405163711bec9160e11b815280610df18533838d016123de565b0390fd5b5081600052600160205260ff610e0f3360406000206112fd565b541615610d8b565b60206003198201126102ac57600435906001600160401b0382116102ac5761041191600401610605565b6020610e5a9181604051938285809451938492016103b8565b8101600581520301902090565b6020610e809181604051938285809451938492016103b8565b8101600781520301902090565b346102ac57602061030d610ea036610e17565b610e41565b346102ac5760203660031901126102ac57600435600052600a6020526020604060002054604051908152f35b90815180825260208080930193019160005b828110610ef1575050505090565b835185529381019392810192600101610ee3565b906020610411928181520190610ed1565b346102ac5760403660031901126102ac576004356001600160401b038082116102ac57366023830112156102ac578160040135610f5281610c88565b92610f606040519485610574565b8184526020916024602086019160051b830101913683116102ac57602401905b828210610fb957856024358681116102ac5761046e91610fa7610fad923690600401610c9f565b90612466565b60405191829182610f05565b838091610fc5846102c7565b815201910190610f80565b346102ac576020610fe8610fe336610e17565b6124eb565b604051908152f35b908152602081019190915260400190565b346102ac5760203660031901126102ac576040518061046e600435600160ff1b81179083610ff0565b6003111561103457565b634e487b7160e01b600052602160045260246000fd5b9060038210156110345752565b346102ac5760203660031901126102ac57600435600052600960205260a0604060002080549060ff6001820154169060028101546110ac60ff600460038501549401541693604051958652602086019061104a565b6040840152606083015215156080820152f35b346102ac5760203660031901126102ac57600435600052600b6020526020604060002054604051908152f35b9181601f840112156102ac578235916001600160401b0383116102ac57602083818601950101116102ac57565b346102ac5760e03660031901126102ac576111316102b1565b6001600160401b03906084358281116102ac576111529036906004016110eb565b60a4929192358481116102ac5761116d9036906004016110eb565b9160c4359586116102ac57611189610da59636906004016110eb565b9590946064359060443590600435612724565b346102ac5760203660031901126102ac5760043560009080825260036020526111ca60408320541515612246565b80825260036020526111e460016040842001541515612289565b6111fc60026111f2836109b6565b0154431015612910565b6001611207826109b6565b0154611212826109b6565b5581600161121f836109b6565b015581600261122d836109b6565b01557f30b47f773c1d2a65ce0ef667c3b123d5abd927c62b56907569c0daf51cd6515061126d61125c836109b6565b546040519081529081906020820190565b0390a280f35b346102ac57602060ff61128d61128836610e17565b610e67565b54166040519015158152f35b346102ac5760403660031901126102ac576112b2610296565b60243560ff81168091036102ac5760009160018352826020526112db61067a33604086206112fd565b6001600160a01b03168252600860205260408220805460ff1916909117905580f35b9060018060a01b0316600052602052604060002090565b346102ac5760203660031901126102ac576001600160a01b03611335610296565b166000526008602052602060ff60406000205416604051908152f35b346102ac5760e03660031901126102ac576004357fc4e5e67fff3ba4bffbe07d84c897dbf61a0027b703754b45a5c9de6b58bfd7936109b1602435611450611397610755565b61142463ffffffff6113e5836113ac366107e8565b6113b86109088c6109b6565b6113e08b600561095860405160208101906113d78161093c89856122c9565b519020926109b6565b613306565b166113f1811515612953565b6113fa8361102a565b600183036114845761140c33896133a6565b6001611417896109b6565b0154611460575b436129fc565b836001611430896109b6565b0155600261143d886109b6565b0155600461144a876109b6565b01612a09565b6040519081529081906020820190565b61147f61147a61147460046109748c6109b6565b85613235565b612998565b61141e565b61148d8361102a565b821561140c5761149c8361102a565b6002830361140c576114ae3389613347565b61140c565b346102ac5760003660031901126102ac576020600454604051908152f35b346102ac5760403660031901126102ac576004356001600160401b0381116102ac5761150f61150660409236906004016110eb565b60243591612cb2565b825191825215156020820152f35b346102ac5760203660031901126102ac576040516004356001600160ff1b03168152602090f35b346102ac5760a03660031901126102ac5761046e6004356115643661084c565b90600091600183528260205260008051602061462383398151915261168d60409361159461067a338789206112fd565b6115fa6004549687956115ae6115a988612be6565b600455565b87516115c28161093c6020820194856122c9565b5190206115cd610597565b918483528060208401528089840152436060840152608083015260a08201526115f5866109b6565b613063565b838060008051602061464383398151915281600160ff1b81179590946116446001600160a01b03851661163561162e6130ad565b8983613b60565b8861163e6130ad565b91613b60565b61166761165b85600052600a602052604060002090565b66038d7ea4c680009055565b61167e61165b85600052600b602052604060002090565b89519081529081906020820190565b0390a361169e855192839283610ff0565b0390a2519081529081906020820190565b801515036102ac57565b346102ac5760403660031901126102ac576004356001600160401b0381116102ac576116ec610da5913690600401610605565b611733602435916116fc836116af565b6001600090815260205261128861067a337fada5013122d395ba3c54772283fb069b10426056ef8ca54750cb9bb552a59e7d6112fd565b9060ff801983541691151516179055565b346102ac5760403660031901126102ac5761175d610296565b602435611769816116af565b6001600160a01b0382169182156117c557816117336117959233600052600160205260406000206112fd565b60405190151581527f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c3160203392a3005b60405162ced3e160e81b815260006004820152602490fd5b346102ac5760c03660031901126102ac576004356117f96102b1565b6001600160401b03919060643590604435906084358581116102ac576118239036906004016110eb565b60a4359687116102ac576118a56118ab928792611847610da59a36906004016110eb565b9160405160208101906e22a72a24aa2cafaa2920a729a322a960891b825287602f82015260018060601b03198a60601b16604f8201528a60638201528b60838201524260a382015260a3815261189c8161053e565b5190209361319a565b14612590565b604051936118b885610559565b600085526001600160a01b031661328f565b9181601f840112156102ac578235916001600160401b0383116102ac576020808501948460051b0101116102ac57565b6040810190604081528251809252606081019160208094019060005b81811061195a575050508281830391015281808451928381520193019160005b828110611944575050505090565b8351151585529381019392810192600101611936565b825185529385019391850191600101611916565b346102ac576040806003193601126102ac576001600160401b03600480358281116102ac576119a19036906004016118ca565b9390926024359081116102ac576119bc9036906004016118ca565b906119c88287146130c0565b6119d1866123f8565b936119db876123f8565b9660005b8181106119f45785518061046e8b8a836118fa565b80611a018792848b613104565b611a0f838989969496613145565b3593611a2d83519586938493631155a0c560e31b85528a8501613171565b03816000305af18015611aad5760019282918c6000928392611a71575b50611a609293611a5991612452565b9015159052565b611a6a828a612452565b52016119df565b611a609350611a59919250611a9b908c8d3d10611aa6575b611a938183610574565b810190613155565b909390929150611a4a565b503d611a89565b61318e565b346102ac576020806003193601126102ac5760049081356001600160401b0381116102ac57611ae59036906004016118ca565b91611aef836123f8565b92611af86105a6565b6103e8815290610bb86020830152604093611b168584016127109052565b606092611b266060820160339052565b8551611b3a8161093c6020820194856122c9565b5190209260009160005b848110611b585787518061046e8b82610f05565b895460019190806000805160206146238339815191528886611c5c8e611bc08f8f8e8e81611b938e611b8c6115a98f612be6565b8b8b613145565b3594611b9d610597565b95865285015281868501524390840152608083015260a08201526115f5886109b6565b8580600080516020614643833981519152611c4f611c3f8c84600160ff1b81179a9099611c0c6001600160a01b038816611c038d611bfc6130ad565b9083613b60565b8d61163e6130ad565b611c2361165b88600052600a602052604060002090565b611c3a61165b88600052600b602052604060002090565b613145565b8551903581529081906020820190565b0390a35192839283610ff0565b0390a2611c69828c612452565b5201611b44565b346102ac5760603660031901126102ac576001600160401b036004358181116102ac57611ca19036906004016110eb565b91906024359182116102ac57602092611cc1610fe89336906004016110eb565b916044359361319a565b346102ac5760203660031901126102ac5761046e60043560045490611cf26115a983612be6565b8160008051602061462383398151915261168d611d0d6105a6565b6103e8815293610bb860208601526115fa604095611d2e8782016127109052565b603360608201528651611d498161093c6020820194856122c9565b519020611d54610597565b90838252600060208301526000888301524360608301526000608083015260a08201526115f5866109b6565b346102ac5760203660031901126102ac57600435600052600360205260c06040600020805490611de76001820154916002810154600382015490600560ff60048501541693015494604051968752602087015260408601526060850152608084019061104a565b60a0820152f35b346102ac5760003660031901126102ac57602060405160018152f35b346102ac5760403660031901126102ac57602060ff61128d611e2a610296565b611e326102b1565b6001600160a01b03909116600090815260018552604090206112fd565b919260a0936104119695921515845260208401526040830152606082015281608082015201906103db565b346102ac5760203660031901126102ac5760043560609080600052600360205261046e60406000209260405192611eb084610508565b845484526001850154936020810194855260028601546040820152600560038701549660608301978852611eee60ff60048301541660808501613057565b015460a082015251935194519080151580611f2f575b611f19575b5060405194848695151586611e4f565b611f28919250610b6e906109c6565b9038611f09565b506004548110611f04565b346102ac5760a03660031901126102ac57611f53610296565b611f5b6102b1565b6084356001600160401b0381116102ac57611f7a903690600401610605565b906001600160a01b038316338114159081611fc2575b50611fa657610da592606435916044359161328f565b60405163711bec9160e11b815280610df18533600484016123de565b9050600052600160205260ff611fdc3360406000206112fd565b54161538611f90565b15611fec57565b60405162461bcd60e51b815260206004820152601d60248201527f4f6e6c7920666f756e646174696f6e20746f6b656e20686f6c646572730000006044820152606490fd5b1561203857565b60405162461bcd60e51b815260206004820152601b60248201527a15185c99d95d08195b9d1a5d1e48191bd95cdb89dd08195e1a5cdd602a1b6044820152606490fd5b818110612086575050565b6000815560010161207b565b634e487b7160e01b600052601160045260246000fd5b908160061b91808304604014901517156120be57565b612092565b6120cd81546109e6565b90816120d7575050565b81601f600093116001146120e9575055565b908083918252612108601f60208420940160051c84016001850161207b565b5555565b9190601f811161211b57505050565b6105a4926000526020600020906020601f840160051c83019310612147575b601f0160051c019061207b565b909150819061213a565b81519192916001600160401b038111610503576121788161217284546109e6565b8461210c565b602080601f83116001146121bb575081906121ac9394956000926121b0575b50508160011b916000199060031b1c19161790565b9055565b015190503880612197565b90601f198316956121d185600052602060002090565b926000905b88821061220e575050836001959697106121f5575b505050811b019055565b015160001960f88460031b161c191690553880806121eb565b806001859682949686015181550195019301906121d6565b61223e906020604051928284809451938492016103b8565b810103902090565b1561224d57565b60405162461bcd60e51b8152602060048201526014602482015273115b9d1a5d1e48191bd95cdb89dd08195e1a5cdd60621b6044820152606490fd5b1561229057565b60405162461bcd60e51b8152602060048201526011602482015270139bc81c1c9bdc1bdcd95908189bd85c99607a1b6044820152606490fd5b919091606061ffff81608084019563ffffffff8082511686528060208301511660208701526040820151166040860152015116910152565b1561230857565b60405162461bcd60e51b815260206004820152601060248201526f496e76616c69642061727469636c657360801b6044820152606490fd5b1561234757565b60405162461bcd60e51b815260206004820152601b60248201527a10d85b9b9bdd0818d85b98d95b081d1a1a5cc81c1c9bdc1bdcd85b602a1b6044820152606490fd5b6020810192916105a4919061104a565b156123a157565b60405162461bcd60e51b815260206004820152601560248201527413985b5948185b1c9958591e48185cdcda59db9959605a1b6044820152606490fd5b6001600160a01b0391821681529116602082015260400190565b9061240282610c88565b61240f6040519182610574565b8281528092612420601f1991610c88565b0190602036910137565b634e487b7160e01b600052603260045260246000fd5b80511561244d5760200190565b61242a565b805182101561244d5760209160051b010190565b919091805183518082036124cf57505061248081516123f8565b9060009060005b81518110156124c757806124b560019260051b85602080808489010151938c010151825252604086206112fd565b546124c08287612452565b5201612487565b509193505050565b610df1604051928392635b05999160e01b845260048401610ff0565b6124f490610e41565b54806104115750600090565b1561250757565b60405162461bcd60e51b815260206004820152601a602482015279496e76616c6964206465706f7369746f7279206164647265737360301b6044820152606490fd5b1561255057565b60405162461bcd60e51b81526020600482015260186024820152774d7573742072656c6561736520736f6d6520746f6b656e7360401b6044820152606490fd5b1561259757565b60405162461bcd60e51b8152602060048201526018602482015277496e76616c696420656e74697479207369676e617475726560401b6044820152606490fd5b156125de57565b60405162461bcd60e51b815260206004820152601b60248201527a496e73756666696369656e7420636f6e74726f6c20746f6b656e7360281b6044820152606490fd5b908060209392818452848401376000828201840152601f01601f1916010190565b91608061041193604081526015604082015274434f4e54524f4c5f53484152455f52454c4541534560581b60608201528160208201520191612621565b1561268657565b60405162461bcd60e51b815260206004820152601c60248201527b496e73756666696369656e74206469766964656e6420746f6b656e7360201b6044820152606490fd5b916080610411936040815260166040820152754449564944454e445f53484152455f52454c4541534560501b60608201528160208201520191612621565b6104119492606092825260208201528160408201520191612621565b9790612823896118a58699869d8a98967ff49b3b7be24475e2415d445c296967f90953e7daabd954e5be9f28f80b4689239d6128629b99889d9961277160018060a01b038b161515612500565b61280f6127a08d8415159d8e8615612907575b61278d90612549565b6127996109088d6109b6565b36916105ce565b80516020918201206040517552454c454153455f434f4e54524f4c5f53484152455360501b928101928352603681018c905260609d909d1b6001600160601b03191660568e0152606a8d0194909452608a8c019290925260aa8b01929092524260ca8b015290899060ea820190565b039861189c601f199a8b8101835282610574565b6001600160a01b0389169187908b8b600160ff1b8117926128ba575b50508782612867575b505050505060405194859460018060a01b03169885612708565b0390a3565b84612889846128816128b09861287c876109d6565b6112fd565b54101561267f565b6128ab604051958661289f8b8b602084016126ca565b03908101875286610574565b61328f565b3880868187612848565b6128d6612900926128ce8861287c856109d6565b5410156125d7565b8d604051916128f9836128ed8c8c60208401612642565b03888101855284610574565b8b8861328f565b8b3861283f565b50841515612784565b1561291757565b60405162461bcd60e51b815260206004820152601460248201527311195b185e481c195c9a5bd9081b9bdd081b595d60621b6044820152606490fd5b1561295a57565b60405162461bcd60e51b8152602060048201526016602482015275141c9bdc1bdcd95c881d1e5c1948191a5cd8589b195960521b6044820152606490fd5b1561299f57565b60405162461bcd60e51b815260206004820152602160248201527f43616e6e6f74206f76657272696465206578697374696e672070726f706f73616044820152601b60fa1b6064820152608490fd5b90600782018092116120be57565b919082018092116120be57565b9060038110156110345760ff80198354169116179055565b6040919493926060820195825260208201520152565b9080601f830112156102ac576020908235612a5181610c88565b93612a5f6040519586610574565b81855260208086019260051b8201019283116102ac57602001905b828210612a88575050505090565b81358152908301908301612a7a565b60209182828203126102ac576001600160401b03918035908382116102ac5701926060926060858403126102ac57604092835195612ad487610523565b80358381116102ac5782612ae9918301612a37565b8752838101358381116102ac5782612b02918301610605565b8488015284810135908382116102ac57019181601f840112156102ac57823590612b2b82610c88565b96612b3887519889610574565b828852858089019360051b860101948486116102ac57868101935b868510612b6857505050505050505082015290565b84358481116102ac5782019060809081601f19848a0301126102ac578a51612b8f816104e8565b8a84013581528b8401358781116102ac57898c612bae92870101610c9f565b8b82015285840135928784116102ac57848d612bd18c8f80999881990101610c9f565b90840152013586820152815201940193612b53565b60001981146120be5760010190565b15612bfc57565b60405162461bcd60e51b815260206004820152601a602482015279456e7469747920696e646578206f7574206f6620626f756e647360301b6044820152606490fd5b6000198101919082116120be57565b919082039182116120be57565b15612c6157565b60405162461bcd60e51b8152602060048201526024808201527f5265666572656e63656420636c61696d20696e646578206f7574206f6620626f604482015263756e647360e01b6064820152608490fd5b612cfa909291925a937f042855fb717bd1a7d306f814d1f95b5c9c944f2961bd6c175b3a527e3feb5ffb612cef6040968751918291888684612a21565b0390a1810190612a97565b9182515191602090612d4b602086017f89d5976f045d19eb4a83c0b31c47bf08d3ad5550e542572987db29b644610ce381515186890197612d42895151895193849384612a21565b0390a1516134b1565b91825196871561304757612d6d612d64898951516129fc565b875151906129fc565b96612d77896123f8565b966000998a5b8751811015612e55576041612d92828a612452565b515114612da2575b600101612d7d565b612db6612daf828a612452565b518861363c565b7fecb8ddcc63ec476f41123348250ae1f084c599f6dda326c47ceb1cc8fbcc04bf612e0c612de4848c612452565b51518c518b81526001600160a01b038516602082015260408101919091529081906060820190565b0390a16001600160a01b038116612e24575b50612d9a565b8c612e49612e4e926001949f612e3a908f612452565b6001600160a01b039091169052565b612be6565b9b90612e1e565b5093989295509350959497612e69816123f8565b9560005b82811061300f575050506000955b83518051881015612fd85787612e9391999799612452565b5196612eaa612ea3898b85613865565b8951613aaf565b5060009586978b889b828c019c5b8d518051821015612f8b57612ece828f92612452565b51612eda8a8210612bf5565b88515180821015612ef2575050506001905b01612eb8565b8b939e93612eff916129fc565b811015612f425750838d91019b818d5190612f1991612452565b51612f23916129fc565b9b5190612f2f91612452565b51612f39916129fc565b9a600190612eec565b9b612f7e8e6001949f9e612f85948f8f90612f6e8f92612f698d96612f7795515190612c4d565b612c4d565b90515111612c5a565b0151612452565b51906129fc565b9a612eec565b50509a90506060919b509892939791980151809210612fc55710612fb457600101959493612e7b565b505050505092505050600090600090565b5050505050505092505050600090600090565b505050509350935050505180519081612ff5575050600090600090565b61300161300792612c3e565b90612452565b515190600190565b8061303d613033613026600194869d9b9c9d612452565b516001600160a01b031690565b612e3a838d612452565b0197969597612e6d565b9650505050505050600090600090565b60038210156110345752565b908051825560208101516001830155604081015160028301556060810151600383015560808101516003811015611034576005916130a660a09260048601612a09565b0151910155565b604051906130ba82610559565b60008252565b156130c757565b60405162461bcd60e51b8152602060048201526015602482015274082e4e4c2f240d8cadccee8d040dad2e6dac2e8c6d605b1b6044820152606490fd5b919081101561244d5760051b81013590601e19813603018212156102ac5701803591906001600160401b0383116102ac5760200182360381136102ac579190565b919081101561244d5760051b0190565b91908260409103126102ac5760208251920151610411816116af565b93929160209161318991604087526040870191612621565b930152565b6040513d6000823e3d90fd5b6131a53683836105ce565b6020815191012094600180600454905b8181106131da57505050916131cf939161ffff9593613ef5565b166104115750600090565b806131e584926109b6565b54151580613223575b6131f9575b016131b5565b905061ffff61320b8989898989613ef5565b166132175782906131f3565b97505050505050505090565b508961322e826109b6565b54146131ee565b6003811015611034576001811461326a5761324f8161102a565b1561325a5750600090565b8061326660029261102a565b1490565b508061327760019261102a565b141590565b6001600160a01b03909116815260200190565b939291906001600160a01b03808216156132ed578516156132d5576105a49460405192600184526020840152604083019360018552606084015260808301604052614015565b604051626a0d4560e21b815260006004820152602490fd5b604051632bfa23e760e11b815260006004820152602490fd5b906003811015611034576001811461333c578061332460029261102a565b1461332f5750600090565b6020015163ffffffff1690565b505163ffffffff1690565b9061336491600160ff1b17600052600060205260406000206112fd565b541561336c57565b60405162461bcd60e51b81526020600482015260126024820152714e6f206469766964656e6420746f6b656e7360701b6044820152606490fd5b906133bd91600052600060205260406000206112fd565b54156133c557565b60405162461bcd60e51b81526020600482015260116024820152704e6f20636f6e74726f6c20746f6b656e7360781b6044820152606490fd5b60405161340a81610559565b6000815290565b9061341b82610c88565b6134286040519182610574565b8281528092613439601f1991610c88565b019060005b82811061344a57505050565b80606060208093850101520161343e565b6040519061346882610523565b6040808352366020840137565b60405190613482826104e8565b604182526060366020840137565b80516040101561244d5760600190565b90815181101561244d570160200190565b906134bb826141cb565b801561361f576134ca816120a8565b906134d481613411565b9360005b8281106134e55750505050565b6134ed61345b565b60005b604081106135ea575061354561354c61350c8460031c886129fc565b600192839161353961353361352560078a16938b6134a0565b516001600160f81b03191690565b60f81c90565b9060ff809216901c1690565b1660ff1690565b6135e257601b915b61355c613475565b613566858b612452565b52613571848a612452565b5060005b604081106135b257505050906001916135ab613591838a612452565b5160f89290921b6001600160f81b03191660001a91613490565b53016134d8565b808a6135db826135d0896135ca6135258a988a6134a0565b94612452565b519260001a926134a0565b5301613575565b601c91613554565b8061360b613525613605600194613600886120a8565b6129fc565b876134a0565b60001a61361882856134a0565b53016134f0565b5090506104116133fe565b60ff601b9116019060ff82116120be57565b9060418151036136e25760009160208201519260606040840151930151901a90601b82106136d2575b60ff8216601b81141590816136c6575b506136bd576136a9600093602095604051948594859094939260ff6060936080840197845216602083015260408201520152565b838052039060015afa15611aad5760005190565b50505050600090565b601c9150141538613675565b906136dc9061362a565b90613665565b5050600090565b156136f057565b60405162461bcd60e51b815260206004820152602560248201527f436c61696d20696e64657865732f77656967687473206c656e677468206d69736044820152640dac2e8c6d60db1b6064820152608490fd5b1561374a57565b60405162461bcd60e51b8152602060048201526019602482015278436c61696d20696e646578206f7574206f6620626f756e647360381b6044820152606490fd5b90815180825260208080930193019160005b8281106137ab575050505090565b835161ffff168552938101939281019260010161379d565b6020808252825161ffff16818301528083015160c06040840152805160e084018190526101008401959493929182019160005b828110613851575050505060c060a06138248495966040610411960151601f1986830301606087015261378b565b606086015163ffffffff16608085015294608081015163ffffffff1684830152015163ffffffff16910152565b8351885296810196928101926001016137f6565b90929160208101938451516040936138846040850192835151146136e9565b8651519281515190805191613898866123f8565b976138a2876123f8565b9a60005b8c89821061396f57505050505050505050509060607fe2a075eb12315dbf9c356c88b7445a10d9b050f29bbb83366d33b454df60f7b39201936138eb855161ffff1690565b906139016138f7610597565b61ffff9093168352565b82602083015260408201526000606082015260006080820152600060a08201526040516139368161093c6020820194856137c3565b51902093518151909190156139665761394e90612440565b51905b6139618560405193849384612a21565b0390a1565b50600090613951565b906139dd6001926139d4838f6139c6828f8f938f948f8f968f918f98879361399b856139ce9c51612452565b5193828510156139e357505050506139b7906139be9351612452565b5192612452565b525b51612452565b5161ffff1690565b92612452565b9061ffff169052565b016138a6565b6139f18184969598946129fc565b841015613a2757505050613a15613026613a21956130016139ce95613a1595612c4d565b6001600160a01b031690565b526139c0565b613a219650612f69613a4d95613a3e939495612c4d565b91016139c08151518310613743565b515192612452565b15613a5c57565b60405162461bcd60e51b815260206004820152602560248201527f4c617a7920656e746974793a204944206d75737420657175616c20626f617264604482015264040d0c2e6d60db1b6064820152608490fd5b8060005260036020526040600020547fa29a754629e3ebc1100703746b33a36481f309a0cd8278e0227ff05fb037b29c6080821592604051908582528660208301526040820152836060820152a115613b1157613b0c9114613a55565b600190565b613b1a906109b6565b5403613b2557600090565b60405162461bcd60e51b8152602060048201526013602482015272084dec2e4c840d0c2e6d040dad2e6dac2e8c6d606b1b6044820152606490fd5b9091906001600160a01b03811680156132ed5760405190600191828152602092602082019687526040820192818452606094606084019566038d7ea4c680008752608085018060405285518751808203613c8957505050908391826000905b613c4a575b505050835114600014613c205760008851600080516020614603833981519152613bf78851604051918291339583610ff0565b0390a45b815103613c125750506105a4935190519133614576565b9150916105a4945033614388565b60006040516000805160206145e3833981519152339180613c428989836142a1565b0390a4613bfb565b8651811015613c845780849160051b8801613c7b613c738d61287c8789860151950151946109d6565b9182546129fc565b90550183613bbf565b613bc4565b635b05999160e01b8352607f19918891613ca69160848401610ff0565b030190fd5b9080601f830112156102ac576020908235613cc581610c88565b93613cd36040519586610574565b81855260208086019260051b8201019283116102ac57602001905b828210613cfc575050505090565b838091613d0884610775565b815201910190613cee565b6020818303126102ac576001600160401b03908035908282116102ac57019160c0838203126102ac57613d44610597565b92613d4e81610775565b845260208101358381116102ac5782613d68918301612a37565b602085015260408101359283116102ac57613d8a60a092613db7948301613cab565b6040850152613d9b60608201610764565b6060850152613dac60808201610764565b608085015201610764565b60a082015290565b9060209081838203126102ac576001600160401b03928035908482116102ac570181601f820112156102ac578035613df681610c88565b94613e046040519687610574565b818652848087019260051b840101938085116102ac57858401925b858410613e30575050505050505090565b83358381116102ac578791613e4a848480948a0101610605565b815201930192613e1f565b15613e5c57565b60405162461bcd60e51b815260206004820152601c60248201527b084dec2e4c840c2e4e4c2f2e640d8cadccee8d040dad2e6dac2e8c6d60231b6044820152606490fd5b91909161ffff808094169116019182116120be57565b90606461ffff809316029182169182036120be57565b9061ffff809116918215613edf57160490565b634e487b7160e01b600052601260045260246000fd5b93949290613f0990613f1293810190613d13565b94810190613dbf565b926020810192835151613f2c604084019182515114613e55565b6000928394845b8751805182108061400b575b15613fd85781613f4e91612452565b51613f5d6139c6838751612452565b906001600160a01b038b81831115613f82575b50505050613f7d90612be6565b613f33565b613a15613f9686613f9d939d96979d612452565b518a61363c565b911614613fbc575b613f7d91613fb291613ea0565b969038808b613f70565b9581613fce613f7d93613fb293613ea0565b9791509150613fa5565b50509650929450505061ffff90818316156136bd575161ffff16908316106136e25761400661041192613eb6565b613ecc565b5089518210613f3f565b9491909181518451908181036124cf57505060005b82518110156140f757600581901b83810160209081015191870101516001600160a01b03929186908a8516614087575b600194821661406d575b5050500161402a565b61407d9161287c613c73926109d6565b9055388581614064565b91929390506140998a61287c846109d6565b548381106140c057918791846001969594036140b88d61287c856109d6565b55945061405a565b6040516303dee4c560e01b81526001600160a01b038c16600482015260248101919091526044810184905260648101839052608490fd5b509491939290936001855114600014614192576020850151602083015160018060a01b039160008051602061460383398151915260405180614141868816968a1695339583610ff0565b0390a45b6001600160a01b03811661415b575b5050505050565b84516001036141815760208061417796015192015192336145ab565b3880808080614154565b61418d94919233614477565b614177565b6040516001600160a01b03828116919085169033906000805160206145e383398151915290806141c3888c836142a1565b0390a4614145565b9081511561429b5760015b613e80811115614244575b60405162461bcd60e51b815260206004820152603560248201527f496e76616c6964207061636b6564207369676e6174757265206c656e677468206044820152740b4818d85b9b9bdd0819195d1958dd0818dbdd5b9d605a1b6064820152608490fd5b8060061b818104604014821517156120be576142729061426c614266846129ee565b60031c90565b906129fc565b835190808214614294571161428f5761428a90612be6565b6141d6565b6141e1565b5090925050565b60009150565b90916142b861041193604084526040840190610ed1565b916020818403910152610ed1565b908160209103126102ac575161041181610316565b9261430a61041195936143189360018060a01b031686526000602087015260a0604087015260a0860190610ed1565b908482036060860152610ed1565b9160808184039101526103db565b9390610411959361430a916143189460018060a01b03809216885216602087015260a0604087015260a0860190610ed1565b3d15614383573d90614369826105b3565b916143776040519384610574565b82523d6000602084013e565b606090565b9293919093843b61439a575050505050565b6020916143bd604051948593849363bc197c8160e01b98898652600486016142db565b038160006001600160a01b0388165af160009181614446575b5061440f57826143e4614358565b805191908261440857604051632bfa23e760e11b815280610df1846004830161327c565b9050602001fd5b6001600160e01b0319160361442957503880808080614154565b604051632bfa23e760e11b8152908190610df1906004830161327c565b61446991925060203d602011614470575b6144618183610574565b8101906142c6565b90386143d6565b503d614457565b939290949194853b61448c575b505050505050565b6144af602093604051958694859463bc197c8160e01b998a875260048701614326565b038160006001600160a01b0388165af1600091816144f1575b506144d657826143e4614358565b6001600160e01b031916036144295750388080808080614484565b61450b91925060203d602011614470576144618183610574565b90386144c8565b909260a0926104119594600180861b03168352600060208401526040830152606082015281608082015201906103db565b919261041195949160a094600180871b0380921685521660208401526040830152606082015281608082015201906103db565b9293919093843b614588575050505050565b6020916143bd604051948593849363f23a6e6160e01b9889865260048601614512565b939290949194853b6145bf57505050505050565b6144af602093604051958694859463f23a6e6160e01b998a87526004870161454356fe4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fbc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f6252629ba16cb44b809941f19e442f11a9973e93cc91be0d91df4afbe6e7c624cac9234525033c1ac098f69b4dc192ce416b13f69ec0b6de127022496be73337fda26469706673582212208a5ef65aa00793b5b7441a075b464d091eae27cb6ecf7dcf468cc8193a8e22b664736f6c63430008180033",UL0=($)=>$.length>1,YU;var ak=p(()=>{aD();LL=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC1155InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC1155InvalidApprover",type:"error"},{inputs:[{internalType:"uint256",name:"idsLength",type:"uint256"},{internalType:"uint256",name:"valuesLength",type:"uint256"}],name:"ERC1155InvalidArrayLength",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC1155InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC1155InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC1155InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"ERC1155MissingApprovalForAll",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"entityId",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"newBoardHash",type:"bytes32"}],name:"BoardActivated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"entityId",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"proposedBoardHash",type:"bytes32"}],name:"BoardProposed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"entityId",type:"bytes32"},{indexed:!0,internalType:"address",name:"depository",type:"address"},{indexed:!1,internalType:"uint256",name:"controlAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"dividendAmount",type:"uint256"},{indexed:!1,internalType:"string",name:"purpose",type:"string"}],name:"ControlSharesReleased",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"threshold",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"entityId0",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"computedHash",type:"bytes32"}],name:"DebugComputeBoard",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"placeholders",type:"uint256"},{indexed:!1,internalType:"uint256",name:"packedLen",type:"uint256"},{indexed:!1,internalType:"uint256",name:"claims",type:"uint256"}],name:"DebugHankoDecode",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"dataLen",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"hash",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"gasLeft",type:"uint256"}],name:"DebugHankoEntry",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"hash",type:"bytes32"},{indexed:!1,internalType:"address",name:"recovered",type:"address"},{indexed:!1,internalType:"uint256",name:"sigLength",type:"uint256"}],name:"DebugRecoverSigner",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"entityId",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"computedHash",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"storedHash",type:"bytes32"},{indexed:!1,internalType:"bool",name:"isLazy",type:"bool"}],name:"DebugValidateEntity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"entityId",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"entityNumber",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"boardHash",type:"bytes32"}],name:"EntityRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"entityId",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"controlTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"dividendTokenId",type:"uint256"}],name:"GovernanceEnabled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"entityId",type:"bytes32"},{indexed:!1,internalType:"bool",name:"success",type:"bool"},{indexed:!1,internalType:"uint256",name:"votingPower",type:"uint256"}],name:"HankoClaimProcessed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"entityId",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"hash",type:"bytes32"}],name:"HankoVerified",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"name",type:"string"},{indexed:!0,internalType:"uint256",name:"entityNumber",type:"uint256"}],name:"NameAssigned",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"name",type:"string"},{indexed:!0,internalType:"uint256",name:"fromNumber",type:"uint256"},{indexed:!0,internalType:"uint256",name:"toNumber",type:"uint256"}],name:"NameTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"entityId",type:"bytes32"},{indexed:!1,internalType:"enum EntityProvider.ProposerType",name:"cancelledBy",type:"uint8"}],name:"ProposalCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[],name:"FOUNDATION_ENTITY",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"TOTAL_CONTROL_SUPPLY",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"TOTAL_DIVIDEND_SUPPLY",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"entityId",type:"bytes32"}],name:"activateBoard",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"activeProposals",outputs:[{internalType:"bytes32",name:"proposedBoardHash",type:"bytes32"},{internalType:"enum EntityProvider.ProposerType",name:"proposerType",type:"uint8"},{internalType:"uint256",name:"proposeBlock",type:"uint256"},{internalType:"uint256",name:"activateBlock",type:"uint256"},{internalType:"bool",name:"active",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"entityNumber",type:"uint256"}],name:"assignName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes[]",name:"hankoDataArray",type:"bytes[]"},{internalType:"bytes32[]",name:"hashes",type:"bytes32[]"}],name:"batchVerifyHankoSignatures",outputs:[{internalType:"bytes32[]",name:"entityIds",type:"bytes32[]"},{internalType:"bool[]",name:"results",type:"bool[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"entityId",type:"bytes32"},{internalType:"enum EntityProvider.ProposerType",name:"proposerType",type:"uint8"},{components:[{internalType:"uint32",name:"controlDelay",type:"uint32"},{internalType:"uint32",name:"dividendDelay",type:"uint32"},{internalType:"uint32",name:"foundationDelay",type:"uint32"},{internalType:"uint16",name:"controlThreshold",type:"uint16"}],internalType:"struct EntityProvider.EntityArticles",name:"articles",type:"tuple"}],name:"cancelBoardProposal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"entities",outputs:[{internalType:"bytes32",name:"currentBoardHash",type:"bytes32"},{internalType:"bytes32",name:"proposedBoardHash",type:"bytes32"},{internalType:"uint256",name:"activateAtBlock",type:"uint256"},{internalType:"uint256",name:"registrationBlock",type:"uint256"},{internalType:"enum EntityProvider.ProposerType",name:"proposerType",type:"uint8"},{internalType:"bytes32",name:"articlesHash",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"entityNumber",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"encodedBoard",type:"bytes"},{internalType:"bytes",name:"encodedSignature",type:"bytes"}],name:"entityTransferTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"boardHash",type:"bytes32"},{components:[{internalType:"uint32",name:"controlDelay",type:"uint32"},{internalType:"uint32",name:"dividendDelay",type:"uint32"},{internalType:"uint32",name:"foundationDelay",type:"uint32"},{internalType:"uint16",name:"controlThreshold",type:"uint16"}],internalType:"struct EntityProvider.EntityArticles",name:"articles",type:"tuple"}],name:"foundationRegisterEntity",outputs:[{internalType:"uint256",name:"entityNumber",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getEntityFromToken",outputs:[{internalType:"uint256",name:"entityNumber",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes32",name:"entityId",type:"bytes32"}],name:"getEntityInfo",outputs:[{internalType:"bool",name:"exists",type:"bool"},{internalType:"bytes32",name:"currentBoardHash",type:"bytes32"},{internalType:"bytes32",name:"proposedBoardHash",type:"bytes32"},{internalType:"uint256",name:"registrationBlock",type:"uint256"},{internalType:"string",name:"name",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"entityNumber",type:"uint256"}],name:"getGovernanceInfo",outputs:[{internalType:"uint256",name:"controlTokenId",type:"uint256"},{internalType:"uint256",name:"dividendTokenId",type:"uint256"},{internalType:"uint256",name:"controlSupply",type:"uint256"},{internalType:"uint256",name:"dividendSupply",type:"uint256"},{internalType:"bool",name:"hasActiveProposal",type:"bool"},{internalType:"bytes32",name:"articlesHash",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"entityNumber",type:"uint256"}],name:"getTokenIds",outputs:[{internalType:"uint256",name:"controlTokenId",type:"uint256"},{internalType:"uint256",name:"dividendTokenId",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"nameQuota",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"nameToNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"numberToName",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"entityId",type:"bytes32"},{internalType:"bytes32",name:"newBoardHash",type:"bytes32"},{internalType:"enum EntityProvider.ProposerType",name:"proposerType",type:"uint8"},{components:[{internalType:"uint32",name:"controlDelay",type:"uint32"},{internalType:"uint32",name:"dividendDelay",type:"uint32"},{internalType:"uint32",name:"foundationDelay",type:"uint32"},{internalType:"uint16",name:"controlThreshold",type:"uint16"}],internalType:"struct EntityProvider.EntityArticles",name:"articles",type:"tuple"}],name:"proposeBoard",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"encodedBoard",type:"bytes"},{internalType:"bytes",name:"encodedSignature",type:"bytes"},{internalType:"bytes32",name:"hash",type:"bytes32"}],name:"recoverEntity",outputs:[{internalType:"uint256",name:"entityId",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32[]",name:"boardHashes",type:"bytes32[]"}],name:"registerNumberedEntitiesBatch",outputs:[{internalType:"uint256[]",name:"entityNumbers",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"boardHash",type:"bytes32"}],name:"registerNumberedEntity",outputs:[{internalType:"uint256",name:"entityNumber",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"entityNumber",type:"uint256"},{internalType:"address",name:"depository",type:"address"},{internalType:"uint256",name:"controlAmount",type:"uint256"},{internalType:"uint256",name:"dividendAmount",type:"uint256"},{internalType:"string",name:"purpose",type:"string"},{internalType:"bytes",name:"encodedBoard",type:"bytes"},{internalType:"bytes",name:"encodedSignature",type:"bytes"}],name:"releaseControlShares",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"reservedNames",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"identifier",type:"string"}],name:"resolveEntityId",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint8",name:"quota",type:"uint8"}],name:"setNameQuota",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"bool",name:"reserved",type:"bool"}],name:"setReservedName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"totalControlSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"totalDividendSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"newEntityNumber",type:"uint256"}],name:"transferName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"hankoData",type:"bytes"},{internalType:"bytes32",name:"hash",type:"bytes32"}],name:"verifyHankoSignature",outputs:[{internalType:"bytes32",name:"entityId",type:"bytes32"},{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"}];YU=class YU extends a7{constructor(...$){if(UL0($))super(...$);else super(LL,X20,$[0])}getDeployTransaction($){return super.getDeployTransaction($||{})}deploy($){return super.deploy($||{})}connect($){return super.connect($)}static bytecode=X20;static abi=LL;static createInterface(){return new d8(LL)}static connect($,Q){return new c3($,LL,Q)}}});var TL,Y20="0x6080346101a35761ffff60015560406001600160401b038282018181118482101761018d578252601683526020907f52657665616c696e672048544c43207365637265743a000000000000000000008285015282518281019163104c13eb60e21b83526024958487840152828151918260448301528660005b84811061017557505050808260006064601f95608395010152831993849101168101036044810185520116820190828210908211176101605760009392868580809581958a52516a636f6e736f6c652e6c6f6794855afa5086519083808784016327b7cf8560e01b9485825282858201528481526100f5816101a8565b5190865afa50875186810190858252878152610110816101c3565b5190209088519187830193845281830152815261012c816101a8565b51915afa50825181810190838252828152610146816101c3565b51902082525243816000205551610fa59081620001df8239f35b85634e487b7160e01b60005260416004526000fd5b82810182015187820160640152869350889101610078565b634e487b7160e01b600052604160045260246000fd5b600080fd5b606081019081106001600160401b0382111761018d57604052565b604081019081106001600160401b0382111761018d5760405256fe6080604052600436101561001257600080fd5b60003560e01c806318c323f2146104f6578063322d0ac71461044a57806337d6d073146103d557806351672fac146103a9578063603075451461030c5763fd287b5d1461005e57600080fd5b346102c257600319602036820181136102c257600435916001600160401b03908184116102c25760409084360301126102c2576040519261009e846109e0565b80600401358281116102c2578101366023820112156102c25760048101356100c581610a8a565b916100d36040519384610a67565b81835260248684019260071b820101903682116102c257602401915b8183106102c757505050845260248101359182116102c2570191366023840112156102c25760048301359061012382610a8a565b936101316040519586610a67565b828552838501602460a0809502830101913683116102c257939593602401905b8282106102635750505082810191825260405193849184808401526080936080840191519160408086015282518091528660a0860193019060005b8882821061022e57505050505191606090603f198584030160608601528680855194858152019401956000925b888585106101ee5787906101d6828903601f198101845283610a67565b6101ea604051928284938452830190610b2e565b0390f35b88518051151588528082015188830152604080820151908901528083015188840152830151878401529790970196899650948201946001909301926101b9565b835180518752818101518288015260408082015190880152606090810151908701528a9750948801949092019160010161018c565b86829795973603126102c2576040519061027c82610a16565b82359081151582036102c2578288928894528285013583820152604085013560408201526060808601359082015260808086013590820152815201910190959395610151565b600080fd5b6080833603126102c257866080916040516102e1816109fb565b85358152828601358382015260408601356040820152606080870135908201528152019201916100ef565b346102c2576020806003193601126102c25760009060043561035a604051610333816109e0565b60168152752932bb32b0b634b73390242a26219039b2b1b932ba1d60511b84820152610eaa565b61036381610ef9565b6103846040518381019083825284815261037c816109e0565b519020610ef9565b604051828101918252828152610399816109e0565b5190208252526040600020439055005b346102c25760203660031901126102c25760043560005260006020526020604060002054604051908152f35b346102c25760203660031901126102c257600435806000526000602052604060002054801515908161041d575b5061040957005b600052600060205260006040812055600080f35b436201869f19810192508211610434571082610402565b634e487b7160e01b600052601160045260246000fd5b346102c25760403660031901126102c2576001600160401b036004358181116102c257366023820112156102c25780600401358281116104e0576040519161049c601f8301601f191660200184610a67565b81835236602483830101116102c2578160009260246020930183860137830101526024359182116102c2576104d86104de923690600401610aa1565b90610c96565b005b634e487b7160e01b600052604160045260246000fd5b346102c25760803660031901126102c2576004356001600160401b0381116102c257610526903690600401610aa1565b6024356001600160401b0381116102c257610545903690600401610b01565b906044356001600160401b0381116102c257610565903690600401610b01565b92906064356001600160401b0381116102c257610586903690600401610b01565b94909260208582810103126102c25784356001600160401b0381116102c25785019460408683830103126102c257604051956105c1876109e0565b80356001600160401b0381116102c2578101838301601f820112156102c25780356105eb81610a8a565b916105f96040519384610a67565b81835260208084019260071b8201019086860182116102c257602001915b8183106109985750505087526020810135906001600160401b0382116102c25701828201601f820112156102c25780359161065183610a8a565b9361065f6040519586610a67565b8385526020850191602060a08096028501019382820185116102c257602001925b84841061093c57505050505050602085015280151560001461091257906106a991810190610b6e565b9190935b80156108e657906106c091810190610b6e565b9290935b60005b825180518210156106f157906106eb86866106e484600196610c5d565b518b610d51565b016106c7565b878484828a6000926000906000600154925b602088015180518310156108a0578261071b91610c5d565b51805190916000911561085657856107936060936107c2938a80518210610832575b5061074a61077591610c87565b9b5b604051610758816109e0565b600b81526a04265666f726520737761760ac1b6020820152610c96565b8d6107b76107988561079363ffffffff60408c015196168096610e77565b610e8a565b6107b160208a0151916107ab8386610c5d565b51610d35565b92610c5d565b526080860151610e77565b910151916107d0838b610c5d565b5192600083128484810312811690858581031390151617610434576107fc60019360209503918c610c5d565b526108288a60405161080d816109e0565b600a8152690416674657220737761760b41b86820152610c96565b0190508794610703565b81925063ffffffff61084a6107759361074a93610c5d565b5116929150508a61073d565b9697856107936060936107c2938851811061087e575b61087861077591610c87565b9c61074c565b905061077561087863ffffffff610895848c610c5d565b51169291505061086c565b8660405180916020820160208352815180915260206040840192019060005b8181106108cd575050500390f35b82518452859450602093840193909201916001016108bf565b50506040929192516108f781610a31565b600081529260405161090881610a31565b60008152926106c4565b50509160405161092181610a31565b600081529260405161093281610a31565b60008152916106ad565b858484840103126102c2576040519061095482610a16565b84359081151582036102c257826020928994528287013583820152604087013560408201526060808801359082015260808701356080820152815201930192610680565b60808388880103126102c25760206080916040516109b5816109fb565b8535815282860135838201526040860135604082015260608087013590820152815201920191610617565b604081019081106001600160401b038211176104e057604052565b608081019081106001600160401b038211176104e057604052565b60a081019081106001600160401b038211176104e057604052565b602081019081106001600160401b038211176104e057604052565b606081019081106001600160401b038211176104e057604052565b601f909101601f19168101906001600160401b038211908210176104e057604052565b6001600160401b0381116104e05760051b60200190565b9080601f830112156102c2576020908235610abb81610a8a565b93610ac96040519586610a67565b81855260208086019260051b8201019283116102c257602001905b828210610af2575050505090565b81358152908301908301610ae4565b9181601f840112156102c2578235916001600160401b0383116102c257602083818601950101116102c257565b919082519283825260005b848110610b5a575050826000602080949584010152601f8019910116010190565b602081830181015184830182015201610b39565b91906040838203126102c2576001600160401b0383358181116102c25784019082601f830112156102c2578135602092610ba782610a8a565b91610bb56040519384610a67565b808352848084019160051b830101918683116102c2578501905b828210610c415750505094828101359182116102c257019180601f840112156102c2578235610bfd81610a8a565b93610c0b6040519586610a67565b818552838086019260051b8201019283116102c2578301905b828210610c32575050505090565b81358152908301908301610c24565b813563ffffffff811681036102c2578152908501908501610bcf565b8051821015610c715760209160051b010190565b634e487b7160e01b600052603260045260246000fd5b60001981146104345760010190565b610ca290929192610eaa565b6000805b8351811015610cfa57808280610cbe60019488610c5d565b516040516020810191632d5b6cb960e01b8352602490818301528152610ce381610a4c565b51906a636f6e736f6c652e6c6f675afa5001610ca6565b50509050610d33604051610d0d816109e0565b60148152733d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d60601b6020820152610eaa565b565b9190916000838201938412911290801582169115161761043457565b919092606084019081516000526000602052604060002054926000938015159081610e68575b50610e5f575b831580610e51575b610e15575b50505015610e1157610d3391610dc682604051610da6816109e0565b600e81526d1099599bdc99481c185e5b595b9d60921b6020820152610c96565b610de5610dde60208301519251926107ab8486610c5d565b9183610c5d565b52604051610df2816109e0565b600d81526c10599d195c881c185e5b595b9d609a1b6020820152610c96565b5050565b610e20908351610f21565b918215610e3f575b5050610e37575b388080610d8a565b506001610e2f565b610e4a925051610f21565b3880610e28565b506040860151431115610d85565b60019350610d7d565b90506040870151101538610d77565b8181029291811591840414171561043457565b8115610e94570490565b634e487b7160e01b600052601260045260246000fd5b60008091604051610ee681610ed8602082019463104c13eb60e21b8652602060248401526044830190610b2e565b03601f198101835282610a67565b51906a636f6e736f6c652e6c6f675afa50565b6000809160405160208101916327b7cf8560e01b8352602482015260248152610ee681610a4c565b60005b8251811015610f675781610f388285610c5d565b5160405160208082019283528152610f4f816109e0565b51902014610f5f57600101610f24565b505050600190565b50505060009056fea26469706673582212204b8611c6bdbd0fb2fd2b3dfcf8e7e2fca7d90a0b2d4e795ef5ec80a29864bbff64736f6c63430008180033",VL0=($)=>$.length>1,JU;var sk=p(()=>{aD();TL=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"",type:"string"},{indexed:!1,internalType:"address",name:"",type:"address"}],name:"LogAddress",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"",type:"string"},{indexed:!1,internalType:"bool",name:"",type:"bool"}],name:"LogBool",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"",type:"string"},{indexed:!1,internalType:"bytes",name:"",type:"bytes"}],name:"LogBytes",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"",type:"string"},{indexed:!1,internalType:"bytes32",name:"",type:"bytes32"}],name:"LogBytes32",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"",type:"string"},{indexed:!1,internalType:"int256",name:"",type:"int256"}],name:"LogInt",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"",type:"string"},{indexed:!1,internalType:"string",name:"",type:"string"}],name:"LogString",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"",type:"string"},{indexed:!1,internalType:"uint256",name:"",type:"uint256"}],name:"LogUint",type:"event"},{inputs:[{internalType:"int256[]",name:"deltas",type:"int256[]"},{internalType:"bytes",name:"encodedBatch",type:"bytes"},{internalType:"bytes",name:"leftArguments",type:"bytes"},{internalType:"bytes",name:"rightArguments",type:"bytes"}],name:"applyBatch",outputs:[{internalType:"int256[]",name:"",type:"int256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"hash",type:"bytes32"}],name:"cleanSecret",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{components:[{internalType:"uint256",name:"deltaIndex",type:"uint256"},{internalType:"int256",name:"amount",type:"int256"},{internalType:"uint256",name:"revealedUntilBlock",type:"uint256"},{internalType:"bytes32",name:"hash",type:"bytes32"}],internalType:"struct DeltaTransformer.Payment[]",name:"payment",type:"tuple[]"},{components:[{internalType:"bool",name:"ownerIsLeft",type:"bool"},{internalType:"uint256",name:"addDeltaIndex",type:"uint256"},{internalType:"uint256",name:"addAmount",type:"uint256"},{internalType:"uint256",name:"subDeltaIndex",type:"uint256"},{internalType:"uint256",name:"subAmount",type:"uint256"}],internalType:"struct DeltaTransformer.Swap[]",name:"swap",type:"tuple[]"}],internalType:"struct DeltaTransformer.Batch",name:"b",type:"tuple"}],name:"encodeBatch",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"hashToBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_msg",type:"string"},{internalType:"int256[]",name:"deltas",type:"int256[]"}],name:"logDeltas",outputs:[],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes32",name:"secret",type:"bytes32"}],name:"revealSecret",outputs:[],stateMutability:"nonpayable",type:"function"}];JU=class JU extends a7{constructor(...$){if(VL0($))super(...$);else super(TL,Y20,$[0])}getDeployTransaction($){return super.getDeployTransaction($||{})}deploy($){return super.deploy($||{})}connect($){return super.connect($)}static bytecode=Y20;static abi=TL;static createInterface(){return new d8(TL)}static connect($,Q){return new c3($,TL,Q)}}});async function J20($,Q,Z,X){let Y={account:X.getAccountAddress?.()??"",depository:X.getDepositoryAddress(),entityProvider:X.getEntityProviderAddress(),deltaTransformer:X.getDeltaTransformerAddress?.()??""},z=aY.connect(Y.depository,Z),J=YU.connect(Y.entityProvider,Z),q=Y.deltaTransformer?JU.connect(Y.deltaTransformer,Z):null,W=new Map,G=new Set,U=new Map,D=0;X.onAny((H)=>{let N={name:H.name,args:H.args??{},blockNumber:H.blockNumber??0,blockHash:H.blockHash??"0x",transactionHash:H.transactionHash??"0x"};W.get(H.name)?.forEach((C)=>C(N)),G.forEach((C)=>C(N))});let P={mode:"browservm",chainId:$.chainId,provider:Q,signer:Z,get account(){return null},get depository(){return z},get entityProvider(){return J},get deltaTransformer(){return q},get addresses(){return Y},async deployStack(){console.log("[JAdapter:browservm] Stack ready:"),console.log(`  Account: ${Y.account}`),console.log(`  Depository: ${Y.depository}`),console.log(`  EntityProvider: ${Y.entityProvider}`),console.log(`  DeltaTransformer: ${Y.deltaTransformer}`)},async snapshot(){let H=await X.serializeState(),N=`0x${(++D).toString(16)}`;return U.set(N,H),N},async revert(H){let N=U.get(H);if(!N)throw Error(`Snapshot ${H} not found`);await X.restoreState(N)},async dumpState(){return X.serializeState()},async loadState(H){if(typeof H==="string")throw Error("BrowserVM requires BrowserVMState object, not file path");await X.restoreState(H)},on(H,N){if(!W.has(H))W.set(H,new Set);return W.get(H).add(N),()=>W.get(H)?.delete(N)},onAny(H){return G.add(H),()=>G.delete(H)},async processBlock(){return[]},async getReserves(H,N){return z._reserves(H,N)},async getCollateral(H,N,C){let L=gR(H,N);return(await z._collaterals(L,C)).collateral},async getEntityNonce(H){return z.entityNonces(hR(H))},async isEntityRegistered(H){return(await J.entities(H)).registrationBlock!==0n},async getTokenRegistry(){return(X.getTokenRegistry?.()||[]).map((N)=>({symbol:N.symbol,name:N.name,address:N.address,decimals:typeof N.decimals==="number"?N.decimals:18,tokenId:typeof N.tokenId==="number"?N.tokenId:void 0}))},async getErc20Balance(H,N){if(X.getErc20Balance)return X.getErc20Balance(H,N);return new M0.Contract(H,["function balanceOf(address owner) view returns (uint256)"],Q).getFunction("balanceOf")(N)},async getErc20Balances(H,N){let C=[];for(let L of H)C.push(await P.getErc20Balance(L,N));return C},async processBatch(H,N,C){let L=X.getEntityProviderAddress(),B=await X.processBatch(H,L,N,C);return{txHash:"0x"+"browservm".padStart(64,"0"),blockNumber:Number(X.getBlockNumber?.()??0),events:B.map((E)=>({name:E.name,args:E.args??{},blockNumber:E.blockNumber??0,blockHash:E.blockHash??"0x",transactionHash:E.transactionHash??"0x"}))}},async settle(H,N,C,L=[],B=[],E){let I=C.map((f)=>({tokenId:f.tokenId,leftDiff:f.leftDiff,rightDiff:f.rightDiff,collateralDiff:f.collateralDiff,ondeltaDiff:f.ondeltaDiff??0n})),_=await X.settleWithInsurance(H,N,I,L,B,E);return{txHash:"0x"+"browservm-settle".padStart(64,"0"),blockNumber:Number(X.getBlockNumber?.()??0)}},async registerNumberedEntity(H){let N=await X.registerNumberedEntitiesBatch([H]);return{entityNumber:N.entityNumbers[0]??0,txHash:N.txHash}},async registerNumberedEntitiesBatch(H){return X.registerNumberedEntitiesBatch(H)},async getNextEntityNumber(){return X.getNextEntityNumber()},async debugFundReserves(H,N,C){return(await X.debugFundReserves(H,N,C)).map((B)=>({name:B.name,args:B.args??{},blockNumber:B.blockNumber??0,blockHash:B.blockHash??"0x",transactionHash:B.transactionHash??"0x"}))},async reserveToReserve(H,N,C,L){return(await X.reserveToReserve(H,N,C,L)).map((E)=>({name:E.name,args:E.args??{},blockNumber:E.blockNumber??0,blockHash:E.blockHash??"0x",transactionHash:E.transactionHash??"0x"}))},async externalTokenToReserve(H,N,C,L,B){let E=X.getDepositoryAddress(),I=new M0.Wallet(M0.hexlify(H)).address;if((B?.tokenType??0)===0&&X.getErc20Allowance&&X.approveErc20){if(await X.getErc20Allowance(C,I,E)<L)await X.approveErc20(H,C,E,2n**256n-1n)}if(!X.externalTokenToReserve)throw Error("BrowserVM externalTokenToReserve not available");return(await X.externalTokenToReserve(H,N,C,L,B)).map((x)=>({name:x.name,args:x.args??{},blockNumber:x.blockNumber??0,blockHash:x.blockHash??"0x",transactionHash:x.transactionHash??"0x"}))},getBrowserVM(){return X},setBlockTimestamp(H){X.setBlockTimestamp(H)},async close(){}};return P}var z20=p(()=>{A6();rk();ak();sk();wO();eC()});var FL,q20="0x6080806040523461001c5761215a90816100228239308160070152f35b600080fdfe6080604052307f000000000000000000000000000000000000000000000000000000000000000014600436101561003557600080fd5b6000803560e01c9182633d0627d0146101005782635147f14e146100f857826359516e5f146100f357826392cf61e5146100ee57826397b55ac8146100e6578263bb2c250c146100e1578263bba8d947146100d9578263d017d699146100d1578263d3eff6c6146100c9578263e2d54b36146100c157505063f176e326146100bc57600080fd5b610c36565b15610b745780fd5b15610a8a5780fd5b156108fe5780fd5b156106a95780fd5b610642565b1561051e5780fd5b6104cc565b610428565b1561037d5780fd5b610296565b8015150361010f57565b600080fd5b634e487b7160e01b600052604160045260246000fd5b608081019081106001600160401b0382111761014557604052565b610114565b60a081019081106001600160401b0382111761014557604052565b60e081019081106001600160401b0382111761014557604052565b604081019081106001600160401b0382111761014557604052565b602081019081106001600160401b0382111761014557604052565b601f909101601f19168101906001600160401b0382119082101761014557604052565b6040519060c082016001600160401b0381118382101761014557604052565b6040519061012082016001600160401b0381118382101761014557604052565b604051906102258261014a565b565b6040519061022582610165565b6001600160401b03811161014557601f01601f191660200190565b81601f8201121561010f5780359061026682610234565b9261027460405194856101b6565b8284526020838301011161010f57816000926020809301838601378301015290565b60c036600319011261010f576044356102ae81610105565b60a4356001600160401b03811161010f576020916102d36102e792369060040161024f565b906084359060643590602435600435610c67565b604051908152f35b6001600160a01b031690565b60a435906001600160a01b038216820361010f57565b604435906001600160a01b038216820361010f57565b608435906001600160a01b038216820361010f57565b602435906001600160a01b038216820361010f57565b600435906001600160a01b038216820361010f57565b35906001600160a01b038216820361010f57565b60031960c03682011261010f576001600160401b03906084359082821161010f57608090823603011261010f576040516103b68161012a565b816004013581526024820135602082015260448201356040820152606482013592831161010f576103f3610412926004610424953692010161024f565b60608201526104006102fb565b90606435604435602435600435611146565b60405191829182901515815260200190565b0390f35b60a036600319011261010f5761043c610311565b606435906001600160401b03821161010f5761045f61042492369060040161024f565b6104b96094604051809360208201956004358752602435604084015260018060601b03199060601b1660608301526104a1815180926020607486019101610bee565b810160843560748201520360748101845201826101b6565b5190206040519081529081906020820190565b602036600319011261010f5760405162461bcd60e51b815260206004820152600760248201526621756e7061636b60c81b6044820152606490fd5b6001600160401b0381116101455760051b60200190565b60a08060031936011261010f576001600160401b03906024604480359084821161010f573660238301121561010f5781600401359061055c82610507565b9460409661056d60405197886101b6565b83875260209786602089019560051b8701019536871161010f57878101955b8787106105b1576104246104128b8b6105a3610327565b916064359135600435611407565b863584811161010f57820160c0602319823603011261010f576105d26101d9565b918a8201358352878201358d8401526064820135858401526084820135606084015260a482013586811161010f5761060f908c369185010161024f565b608084015260c48201359286841161010f576106338e94938d86953692010161024f565b8882015281520196019561058c565b606036600319011261010f5760043560ff811680910361010f5761066461033d565b6044356001600160601b03811692919083900361010f5761042492604051916020830193845260018060a01b031660408301526060820152606081526104b98161012a565b61010036600319011261010f576106be610353565b6106c661033d565b6001600160401b039060443582811161010f576106e790369060040161024f565b9060c43592831161010f5761078893610706600094369060040161024f565b604094859485516107698161074360208201946107238660039052565b6001600160a01b03998a16838c015260c0606084015260e0830190610c11565b606435608083015260843560a083015260a43560c083015203601f1981018352826101b6565b519020938551809881968295631155a0c560e31b845260048401610f64565b0393165af19081156107f957610424926000906000936107c7575b50826107bb575b505191829182901515815260200190565b60e435149150386107aa565b9050816107ea9293503d84116107f2575b6107e281836101b6565b810190610f48565b9190386107a3565b503d6107d8565b610f80565b81601f8201121561010f57803590602061081783610507565b93604061082760405196876101b6565b848652828601918360a08097028601019481861161010f578401925b858410610854575050505050505090565b868483031261010f57848791845161086b8161014a565b86358152828701358382015285870135868201526060808801359082015260808088013590820152815201930192610843565b9080601f8301121561010f5760209082356108b881610507565b936108c660405195866101b6565b81855260208086019260051b82010192831161010f57602001905b8282106108ef575050505090565b813581529083019083016108e1565b60a08060031936011261010f5760849060248235606460446001600160401b0380841161010f573660238501121561010f5783600401359261093f84610507565b96604098610950604051998a6101b6565b8589526020998860208b019760051b8901019736891161010f57898101975b89891061098d576104246104128d6064356044358f356004356115fc565b883587811161010f578201610120602319823603011261010f578d916109b16101f8565b928d83013584528a830135908401528782013589811161010f576109da908e36918501016107fe565b858401528582013589811161010f576109f8908e369185010161089e565b606084015260a482013589811161010f57610a18908e36918501016107fe565b608084015260c482013589811161010f57610a38908e369185010161024f565b87840152610a4860e48301610369565b60c08401526101048201359289841161010f578f9384938f61012492610a7291369184010161024f565b60e0840152013561010082015281520198019761096f565b61010036600319011261010f57610a9f610353565b610aa761033d565b6001600160401b039060443582811161010f57610ac890369060040161024f565b60c43592831161010f57610b3b93610ae7610b1a94369060040161024f565b91610b0c60409586958651928391602083019560a43591608435916064359189611661565b03601f1981018352826101b6565b5190209160008451809781958294631155a0c560e31b845260048401610f64565b03926001600160a01b03165af19081156107f957610424926000906000936107c75750826107bb57505191829182901515815260200190565b61010036600319011261010f57610b89610353565b610b9161033d565b6001600160401b039060443582811161010f57610bb290369060040161024f565b9060c43592831161010f5761078893610bd1600094369060040161024f565b604094859485516107698161074360208201946107238660029052565b60005b838110610c015750506000910152565b8181015183820152602001610bf1565b90602091610c2a81518092818552858086019101610bee565b601f01601f1916010190565b604036600319011261010f57610424610c5360243560043561169d565b604051918291602083526020830190610c11565b949391929093604051610c9760208281610c8a8183019687815193849201610bee565b81010380845201826101b6565b5190209260405194602086019687526040860152151560f81b60608501526061840152608183015260a182015260a18152610cd181610165565b51902090565b60409060405191610ce783610180565b60018352829160005b602080821015610d3257835160209291610d098261014a565b600082526000818301526000868301526000606083015260006080830152828801015201610cf0565b505091925050565b634e487b7160e01b600052601160045260246000fd5b600160ff1b8114610d615760000390565b610d3a565b634e487b7160e01b600052603260045260246000fd5b805115610d895760200190565b610d66565b8051821015610d895760209160051b010190565b602090610dbc928260405194838680955193849201610bee565b82019081520301902090565b604051610dd48161019b565b60008152906000368137565b604051610dec8161019b565b6000815290565b90815180825260208080930193019160005b828110610e13575050505090565b835185529381019392810192600101610e05565b90815180825260208080930193019160005b828110610e47575050505090565b835180518652808301518684015260408082015190870152606080820151908701526080908101519086015260a09094019392810192600101610e39565b949290969593966000865260209060018060a01b031681870152610eb660409360e0604089015260e0880190610c11565b9160609060608801526080878403608089015282808b5195868152019a01946000925b858410610f0e575050505050505084610efd9184610f0b96970360a0860152610df3565b9160c0818403910152610e27565b90565b865180518d52808601518d870152808301518d840152808201518d8301528301518c84015260a0909b019a95840195600190930192610ed9565b919082604091031261010f5760208251920151610f0b81610105565b929190610f7b602091604086526040860190610c11565b930152565b6040513d6000823e3d90fd5b90600052602052604060002090565b91908201809211610d6157565b91908203918211610d6157565b81810392916000138015828513169184121617610d6157565b60409060405191610fde83610180565b60018352829160005b602080821015610d325783516020929161100082610165565b600082526000818301526000868301526000606083015260006080830152600060a0830152600060c0830152828801015201610fe7565b9061104182610507565b60409061105160405191826101b6565b8381528093611062601f1991610507565b019160005b8381106110745750505050565b602090825161108281610165565b60008152826000818301526000858301526000606083015260006080830152600060a0830152600060c0830152828601015201611067565b60208082019080835283518092528060408094019401926000905b8382106110e457505050505090565b84518051875280840151878501528082015187830152606080820151908801526080808201519088015260a0808201519088015260c0908101519087015260e090950194938201936001909101906110d5565b6000198114610d615760010190565b9492909380519182811060001461140057805b838110156113fa5783905b61124f6040611173848661169d565b98898b611229611203611184610cd7565b928c8c8a6020820151928082106000146113f2578a830151925b818310156113e8576000915b6111b68d830151610d50565b9310156113df578b6111c9910151610d50565b925b6111d3610218565b94855260208501528a840152606083015260808201526111f285610d7c565b526111fc84610d7c565b5084610da2565b54610b0c61120f610dc8565b611217610de0565b9088519586946020860198308a610e85565b51902090606088015160008451809681958294631155a0c560e31b845260048401610f64565b03926001600160a01b03165af180156107f9576000916000916113be575b50159081156113b2575b506113a45761129b84611296602060409701519687920151988a610da2565b610f8c565b868154106113925761136a9960008051602061210583398151915297611362976112c9886112968786610f8c565b6112d4838254610f9b565b90556112e1828554610fa8565b948585551061137b575b506112f4610fce565b956001611314826112968861130d836112968d8a610f8c565b5496610f8c565b5493015494611321610227565b968752602087015260408601526060850152608084015260a083015260c082015261134b82610d7c565b5261135581610d7c565b50604051918291826110ba565b0390a1610da2565b6113748154611137565b9055600190565b61138a60018401918254610fb5565b9055386112eb565b604051632fd8225d60e21b8152600490fd5b505050505050505050600090565b90508451141538611277565b90506113d9915060403d6040116107f2576107e281836101b6565b3861126d565b506000926111cb565b8b810151916111aa565b60009261119e565b80611164565b8290611159565b600095600195909493919291865b611424575b5050505050909150565b80518810156115f7576114378882610d8e565b519761144489518561169d565b9861144f868b610da2565b549960209a8b830151106115e557608082019a61146f8c515115156116e0565b6114bb8184015160409d8e918287015161149c606089015191610b0c86519384928a8401968c3089611661565b51902090518251631155a0c560e31b8152938492839260048401610f64565b038160006001600160a01b038c165af180156107f95760009182916115c6575b50159081156115ba575b506115a9578a6114f58984610da2565b01546115985790867fb401bdfa7f39ef4f45a82ae4be47ca8ae03cbc1a167d301723dfb99c798f49eb8c9d8d9c9d969594600261156e8d8f6115379043610f9b565b938901519761155c868b0151998b8781518c1060a0606084015193019d8e5194610c67565b8c6115678484610da2565b0155610da2565b015584519361158c606083880151970151915192519283928361172c565b0390a401979695611415565b8b51639ce22bbb60e01b8152600490fd5b8b51631bd18a1960e31b8152600490fd5b905083511415386114e5565b90506115df91508d803d106107f2576107e281836101b6565b386114db565b604051633485c51360e21b8152600490fd5b61141a565b94929093919360019586926001966000936000995b611622575b50505050505050909150565b86518a101561165c576116426116388b89610d8e565b5184848488611962565b15611652575b9885019885611611565b9397508793611648565b611616565b9161168e9060a0949796959260018552600180871b0316602085015260c0604085015260c0840190610c11565b95606083015260808201520152565b818110156116c457604080516020810192909252810191909152610f0b8160608101610b0c565b604080516020810193909352820152610f0b8160608101610b0c565b156116e757565b60405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726520726571756972656420666f72206469737075746500006044820152606490fd5b604090610f0b939281528160208201520190610c11565b9094939260609260808301968352602083015260408201520152565b1561176657565b60405162461bcd60e51b815260206004820152602160248201527f5369676e617475726520726571756972656420666f7220736574746c656d656e6044820152601d60fa1b6064820152608490fd5b9192608093969594919660a084019784526020840152604083015260608201520152565b156117e057565b60405162461bcd60e51b815260206004820152600760248201526645505f5a45524f60c81b6044820152606490fd5b1561181657565b60405162461bcd60e51b81526020600482015260096024820152685349475f454d50545960b81b6044820152606490fd5b60009060033d1161185457565b905060046000803e60005160e01c90565b600060443d10610f0b57604051600319913d83016004833e81516001600160401b03918282113d6024840111176118c2578184019485519384116118ca573d850101602084870101116118c25750610f0b929101602001906101b6565b949350505050565b50949350505050565b6020815191015190602081106118e7575090565b6000199060200360031b1b1690565b6000809160233d1161190457565b9150506020600460003e600051600191565b3d15611941573d9061192782610234565b9161193560405193846101b6565b82523d6000602084013e565b606090565b91909160008382019384129112908015821691151617610d6157565b9294939091815192602083019283519460a08201906119ae8251516040519182918d7f1d3ba9cf4b97c0201bb3a71ec8c430c809bc811b93a32fc8e4e19a60e0c43e149b8c9685611743565b0390a181519585519586881480156120fa575b6115e557878b149a878c1591826120ef575b50506120dd576119e3878961169d565b9a156120d65786915b604085015151158015906120c8575b80156120ba575b611d07575b5050505060005b60408201518051821015611bf75781611a2691610d8e565b51908151611a4b611a406020850151604086015190611946565b606085015190611946565b6115e55760208301516000811215611bc75750611a6c816112968a8c610f8c565b54611a7a6020850151610d50565b116113925788611aa6611a9e836112968c611a9860208a0151610d50565b95610f8c565b918254610fa8565b90555b60408301516000811215611b8a5750611ac681611296898c610f8c565b54611ad46040850151610d50565b11611392578089611af6611a9e611b03946112968c611a9860408b0151610d50565b90555b611296878d610da2565b60608301516000811215611b5e57508054611b216060850151610d50565b8110611392576001608085611b47611b5694611b416060869a0151610d50565b90610fa8565b85555b01519201918254611946565b905501611a0e565b600160808195836000611b569513611b77575b50611b4a565b611b82908654610f9b565b855538611b71565b90818a89836000611b039613611ba4575b50505050611af9565b611296611bb492611bbc94610f8c565b918254610f9b565b9055388a8983611b9b565b89898360008413611bdc575b50505050611aa9565b611296611bb492611bec94610f8c565b905538898983611bd3565b50509693929194909460408801515180611c1c575b505050505061136a929350610da2565b611c2c9096919395929496611037565b9660005b60408a01518051821015611ccd57818989611c4f604095600195610d8e565b5151611c5f816112968c8c610da2565b908b611c7e8261129686611c77836112968b88610f8c565b5494610f8c565b549187845494015494611c8f610227565b9687526020870152888601526060850152608084015260a083015260c0820152611cb9828d610d8e565b52611cc4818c610d8e565b50019050611c30565b50509750945092505050600080516020612105833981519152611cf961136a94604051918291826110ba565b0390a1839238808080611c0c565b908594939a9b9998979695918b51511515611d219061175f565b611d2b838c610da2565b54906040860151906060870151918d608089015160405194859360208501973094611d56958a610e85565b03601f1981018352611d6890836101b6565b858d8351852096611d7891610da2565b54956040890151518451916040519283927ffbbb6d4d06aaf2052fc51e20914df816f8750fae713b339363aad62de0f8db9e9a8b96611db794866117b5565b0390a18d8751945160c08901958651611dcf906102ef565b611dd8906102ef565b611de1906102ef565b925151604051938493611df49385611743565b0390a1519020918151611e06906102ef565b611e0f906102ef565b611e18906102ef565b8c5151905a916040519282611e3092859489866117b5565b0390a1516001600160a01b0390611e46906102ef565b16611e528115156117d9565b8a51511515611e609061180f565b8a51602080820151915160408051606481529283019390935291810182905261026090911460608201527f420e9d5d3605ffaefb08b27c5fac848a23186bec357341beb8bdf0b0c6ff5ed19b908c90608090a151604051631155a0c560e31b81529283918291611ed39160048401610f64565b03815a604094600091f1806000928392612096575b50611fe85750505050505050505050611eff611847565b806308c379a014611fa057634e487b7114611f65575b611f1d611916565b60008151916020831015611f59575b5060408051610140815260208101929092528101919091526000606082015280608081015b0390a1600090565b60209150015138611f2c565b611f6d6118f6565b90611f785750611f15565b6040805161013681526020810192909252600090820181905260608201528060808101611f51565b50611fa9611865565b80611fb45750611f15565b611fc0611f51916118d3565b604051918291826060600091939293608081019461012c825260208201528260408201520152565b8a60409c9b9495969798999a9c518061201f8487878491926060919493608084019560c88552602085015260408401521515910152565b0390a115801561208c575b612058576040805160ca8152602081019290925281019190915260016060820152608090a138808080611a07565b9650965096975050505050611f51604051928392836060906000929493608082019560c98352602083015260408201520152565b508181141561202a565b9092506120b2915060403d6040116107f2576107e281836101b6565b909138611ee8565b506080850151511515611a02565b5060608501515115156119fb565b87916119ec565b604051633c4117f160e21b8152600490fd5b1415905087386119d3565b50868810156119c156fe11e95b31ceefa95a59034392a3de4f79c9fe7d7e441d3746a1f82e64f7a32bcca2646970667358221220a97a755f1d72de7cb250a35a6986dbd3da8193bad56324e9df3761e06ba8b42264736f6c63430008180033",OL0=($)=>$.length>1,AL;var W20=p(()=>{aD();FL=[{inputs:[],name:"E2",type:"error"},{inputs:[],name:"E3",type:"error"},{inputs:[],name:"E4",type:"error"},{inputs:[],name:"E5",type:"error"},{inputs:[],name:"E6",type:"error"},{inputs:[],name:"E7",type:"error"},{inputs:[],name:"E8",type:"error"},{inputs:[],name:"E9",type:"error"},{anonymous:!1,inputs:[{components:[{internalType:"bytes32",name:"left",type:"bytes32"},{internalType:"bytes32",name:"right",type:"bytes32"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"leftReserve",type:"uint256"},{internalType:"uint256",name:"rightReserve",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"int256",name:"ondelta",type:"int256"}],indexed:!1,internalType:"struct Settled[]",name:"settled",type:"tuple[]"}],name:"AccountSettled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"debtor",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"creditor",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"debtIndex",type:"uint256"}],name:"DebtCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"debtor",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"creditor",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountForgiven",type:"uint256"},{indexed:!1,internalType:"uint256",name:"debtIndex",type:"uint256"}],name:"DebtForgiven",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"recoveredEntity",type:"bytes32"},{indexed:!1,internalType:"bool",name:"valid",type:"bool"}],name:"DebugHankoResult",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"step",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"val1",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"val2",type:"bytes32"},{indexed:!1,internalType:"bool",name:"boolVal",type:"bool"}],name:"DebugHankoStep",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"leftEntity",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"rightEntity",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"initiator",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"sigLen",type:"uint256"}],name:"DebugSettleEntry",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"computedHash",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"counterparty",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"cooperativeNonce",type:"uint256"},{indexed:!1,internalType:"uint256",name:"diffsLength",type:"uint256"},{indexed:!1,internalType:"uint256",name:"encodedMsgLength",type:"uint256"}],name:"DebugSettlementHash",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"sender",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"counterentity",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"disputeNonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"proofbodyHash",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"initialArguments",type:"bytes"}],name:"DisputeStarted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"insured",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"insurer",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"limit",type:"uint256"},{indexed:!1,internalType:"uint256",name:"expiresAt",type:"uint256"}],name:"InsuranceRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"entity",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newBalance",type:"uint256"}],name:"ReserveUpdated",type:"event"},{inputs:[{internalType:"bytes32",name:"e1",type:"bytes32"},{internalType:"bytes32",name:"e2",type:"bytes32"}],name:"accountKey",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes32",name:"domainSep",type:"bytes32"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"depository",type:"address"},{internalType:"bytes",name:"encodedBatch",type:"bytes"},{internalType:"uint256",name:"nonce",type:"uint256"}],name:"computeBatchHankoHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"cooperativeNonce",type:"uint256"},{internalType:"uint256",name:"disputeNonce",type:"uint256"},{internalType:"bool",name:"startedByLeft",type:"bool"},{internalType:"uint256",name:"timeout",type:"uint256"},{internalType:"bytes32",name:"proofbodyHash",type:"bytes32"},{internalType:"bytes",name:"initialArguments",type:"bytes"}],name:"encodeDisputeHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint8",name:"tokenType",type:"uint8"},{internalType:"address",name:"contractAddress",type:"address"},{internalType:"uint96",name:"externalTokenId",type:"uint96"}],name:"packTokenReference",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"unpackTokenReference",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint96",name:"",type:"uint96"},{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"}];AL=class AL extends a7{constructor(...$){if(OL0($))super(...$);else super(FL,q20,$[0])}getDeployTransaction($){return super.getDeployTransaction($||{})}deploy($){return super.deploy($||{})}connect($){return super.connect($)}static bytecode=q20;static abi=FL;static createInterface(){return new d8(FL)}static connect($,Q){return new c3($,FL,Q)}}});async function K20($,Q,Z){let X={account:"",depository:"",entityProvider:"",deltaTransformer:""},Y,z,J,q,W=!1;if($.fromReplica){if(X.account=$.fromReplica.contracts?.account??"",X.depository=$.fromReplica.depositoryAddress??$.fromReplica.contracts?.depository??"",X.entityProvider=$.fromReplica.entityProviderAddress??$.fromReplica.contracts?.entityProvider??"",X.deltaTransformer=$.fromReplica.contracts?.deltaTransformer??"",console.log("[JAdapter:rpc] fromReplica mode - connecting to contracts:"),console.log("  Account:",X.account),console.log("  Depository:",X.depository),console.log("  EntityProvider:",X.entityProvider),console.log("  DeltaTransformer:",X.deltaTransformer),!X.depository||!X.entityProvider)throw Error("fromReplica: Missing required addresses (depository or entityProvider)");let[H,N]=await Promise.all([Q.getCode(X.depository),Q.getCode(X.entityProvider)]);if(H==="0x"||N==="0x")console.warn("[JAdapter:rpc] fromReplica addresses have no code on chain - redeploying"),X.account="",X.depository="",X.entityProvider="",X.deltaTransformer="";else{if(!X.account)console.warn("[JAdapter:rpc] fromReplica missing Account address - using zero address placeholder"),X.account=M0.ZeroAddress;if(!X.deltaTransformer)console.warn("[JAdapter:rpc] fromReplica missing DeltaTransformer address - using zero address placeholder"),X.deltaTransformer=M0.ZeroAddress;Y=AL.connect(X.account,Z),z=aY.connect(X.depository,Z),J=YU.connect(X.entityProvider,Z),q=JU.connect(X.deltaTransformer,Z),W=!0,console.log("[JAdapter:rpc] Connected to existing contracts ")}}let G=new Map,U=new Set,D=async()=>{try{return await Q.send("evm_snapshot",[]),!0}catch{return!1}},P={mode:$.mode,chainId:$.chainId,provider:Q,signer:Z,get account(){return Y},get depository(){return z},get entityProvider(){return J},get deltaTransformer(){return q},get addresses(){return X},async deployStack(){if(W){console.log("[JAdapter:rpc] Using existing contracts"),CI(z,J,G,U);return}console.log("[JAdapter:rpc] Deploying stack...");let N=await new AL(Z).deploy();await N.waitForDeployment(),X.account=await N.getAddress(),Y=N,console.log(`  Account: ${X.account}`);let L=await new YU(Z).deploy();await L.waitForDeployment(),X.entityProvider=await L.getAddress(),J=L,console.log(`  EntityProvider: ${X.entityProvider}`);let B=new aY({"contracts/Account.sol:Account":X.account},Z),E=30000000n;try{let x=await Q.getBlock("latest");if(x?.gasLimit){let g=1000000n;E=x.gasLimit>g?x.gasLimit-g:x.gasLimit}}catch{}let I=await B.deploy(X.entityProvider,{gasLimit:E});await I.waitForDeployment(),X.depository=await I.getAddress(),z=I,console.log(`  Depository: ${X.depository}`);let f=await new JU(Z).deploy();await f.waitForDeployment(),X.deltaTransformer=await f.getAddress(),q=f,console.log(`  DeltaTransformer: ${X.deltaTransformer}`),CI(z,J,G,U),W=!0,console.log("[JAdapter:rpc] Stack deployed")},async snapshot(){try{return await Q.send("evm_snapshot",[])}catch{throw Error("Snapshot not supported by this RPC")}},async revert(H){try{await Q.send("evm_revert",[H])}catch{throw Error("Revert not supported by this RPC")}},async dumpState(){try{let H=Q,N=$.stateFile??"./data/anvil-state.json";return await H.send("anvil_dumpState",[]),N}catch{throw Error("dumpState not supported by this RPC")}},async loadState(H){if(typeof H!=="string")throw Error("RPC requires file path string");try{await Q.send("anvil_loadState",[H])}catch{throw Error("loadState not supported by this RPC")}},on(H,N){if(!G.has(H))G.set(H,new Set);return G.get(H).add(N),()=>G.get(H)?.delete(N)},onAny(H){return U.add(H),()=>U.delete(H)},async processBlock(){try{await Q.send("evm_mine",[])}catch{}return[]},async getReserves(H,N){return z._reserves(H,N)},async getCollateral(H,N,C){let L=gR(H,N);return(await z._collaterals(L,C)).collateral},async getEntityNonce(H){return z.entityNonces(hR(H))},async isEntityRegistered(H){return(await J.entities(H)).registrationBlock!==0n},async getTokenRegistry(){try{let H=Number(await z.getTokensLength()),N=[],C=new M0.Interface(["function symbol() view returns (string)","function name() view returns (string)","function decimals() view returns (uint8)"]);for(let L=1;L<H;L++){let[B,E,I]=await z.getTokenMetadata(L);if(B===M0.ZeroAddress)continue;let _=new M0.Contract(B,C,Q),f=_.getFunction("symbol"),x=_.getFunction("name"),g=_.getFunction("decimals"),h="",v="",b=18;try{h=await f()}catch{continue}try{v=await x()}catch{v=h}try{b=Number(await g())}catch{}if(!h)continue;N.push({symbol:h,name:v||h,address:B,decimals:b,tokenId:L})}return N}catch(H){return console.warn("[JAdapter:rpc] Token registry fetch failed:",H.message),[]}},async getErc20Balance(H,N){return new M0.Contract(H,["function balanceOf(address owner) view returns (uint256)"],Q).getFunction("balanceOf")(N)},async getErc20Balances(H,N){let C=new M0.Interface(["function balanceOf(address owner) view returns (uint256)"]),L=$.rpcUrl;if(L&&L.startsWith("http"))try{let B=H.map((I,_)=>({id:_+1,jsonrpc:"2.0",method:"eth_call",params:[{to:I,data:C.encodeFunctionData("balanceOf",[N])},"latest"]})),E=await fetch(L,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(B)});if(E.ok){let I=await E.json();if(Array.isArray(I)){let _=new Map;for(let f of I)if(f&&typeof f.id==="number"&&typeof f.result==="string")_.set(f.id,f.result);return H.map((f,x)=>{let g=_.get(x+1);try{return g?BigInt(g):0n}catch{return 0n}})}}}catch(B){console.warn("[JAdapter:rpc] Batch balance fetch failed, falling back to per-call:",B.message)}return Promise.all(H.map((B)=>P.getErc20Balance(B,N)))},async processBatch(H,N,C){let B=await(await z.processBatch(H,X.entityProvider,N,C,{gasLimit:5000000n})).wait();if(!B)throw Error("Transaction failed");let E=[];for(let I of B.logs)try{let _=z.interface.parseLog(I);if(_)E.push({name:_.name,args:Object.fromEntries(_.fragment.inputs.map((f,x)=>[f.name,_.args[x]])),blockNumber:B.blockNumber,blockHash:B.blockHash,transactionHash:B.hash})}catch{try{let _=J.interface.parseLog(I);if(_)E.push({name:_.name,args:Object.fromEntries(_.fragment.inputs.map((f,x)=>[f.name,_.args[x]])),blockNumber:B.blockNumber,blockHash:B.blockHash,transactionHash:B.hash})}catch{}}return{txHash:B.hash,blockNumber:B.blockNumber,events:E}},async settle(H,N,C,L=[],B=[],E){if((C.length>0||L.length>0||B.length>0)&&(!E||E==="0x"))throw Error("Settlement signature required");let _=E||"0x",f=C.map((h)=>({tokenId:h.tokenId,leftDiff:h.leftDiff,rightDiff:h.rightDiff,collateralDiff:h.collateralDiff,ondeltaDiff:h.ondeltaDiff??0n})),g=await(await z.settle(H,N,f,L,B,_,{gasLimit:2000000n})).wait();if(!g)throw Error("Settlement transaction failed");return{txHash:g.hash,blockNumber:g.blockNumber}},async registerNumberedEntity(H){let C=await(await J.registerNumberedEntity(H)).wait();if(!C)throw Error("Registration failed");for(let L of C.logs)try{let B=J.interface.parseLog(L);if(B?.name==="EntityRegistered")return{entityNumber:Number(B.args[1]),txHash:C.hash}}catch{}throw Error("EntityRegistered event not found")},async registerNumberedEntitiesBatch(H){let C=await(await J.registerNumberedEntitiesBatch(H)).wait();if(!C)throw Error("Batch registration failed");let L=[];for(let B of C.logs)try{let E=J.interface.parseLog(B);if(E?.name==="EntityRegistered")L.push(Number(E.args[1]))}catch{}return{entityNumbers:L,txHash:C.hash}},async getNextEntityNumber(){return Number(await J.nextNumber())},async debugFundReserves(H,N,C){if($.chainId===31337){let B=await(await z.mintToReserve(H,N,C)).wait();if(!B)throw Error("Fund reserves failed");let E=[];for(let I of B.logs)try{let _=z.interface.parseLog({topics:I.topics,data:I.data});if(_)E.push({name:_.name,args:Object.fromEntries(Object.entries(_.args)),blockNumber:B.blockNumber,blockHash:B.blockHash,transactionHash:B.hash})}catch{}return E}throw Error("debugFundReserves only available on anvil (chainId 31337) - use real token deposits")},async reserveToReserve(H,N,C,L){let E=await(await z.reserveToReserve(H,N,C,L)).wait();if(!E)throw Error("R2R transfer failed");let I=[];for(let _ of E.logs)try{let f=z.interface.parseLog(_);if(f)I.push({name:f.name,args:Object.fromEntries(f.fragment.inputs.map((x,g)=>[x.name,f.args[g]])),blockNumber:E.blockNumber,blockHash:E.blockHash,transactionHash:E.hash})}catch{}return I},async externalTokenToReserve(H,N,C,L,B){let E=new M0.Wallet("0x"+Buffer.from(H).toString("hex"),Q),I=new M0.NonceManager(E),_=B?.tokenType??0,f=B?.externalTokenId??0n,x=typeof f==="bigint"?f:BigInt(f),g=B?.internalTokenId??0;if(_!==0)throw Error("RPC adapter externalTokenToReserve currently supports ERC20 only");let h=new M0.Contract(C,["function approve(address spender, uint256 amount) returns (bool)","function allowance(address owner, address spender) view returns (uint256)"],I),v=h.getFunction("allowance"),b=h.getFunction("approve");if(await v(E.address,X.depository)<L)await(await b(X.depository,M0.MaxUint256)).wait(),console.log("[JAdapter:rpc] Approved max allowance for Depository");let j=await(await z.connect(I).externalTokenToReserve({entity:N,contractAddress:C,externalTokenId:x,tokenType:_,internalTokenId:g,amount:L})).wait();if(!j)throw Error("Deposit failed");let O=[];for(let R of j.logs)try{let F=z.interface.parseLog({topics:R.topics,data:R.data});if(F)O.push({name:F.name,args:Object.fromEntries(Object.entries(F.args)),blockNumber:j.blockNumber,blockHash:j.blockHash,transactionHash:j.hash})}catch{}return console.log(`[JAdapter:rpc] Deposited ${L} tokens to entity ${N.slice(0,16)}...`),O},getBrowserVM(){return null},setBlockTimestamp(H){console.warn("[JAdapter:rpc] setBlockTimestamp not supported in RPC mode")},async close(){z?.removeAllListeners(),J?.removeAllListeners()}};return P}var G20=p(()=>{A6();W20();rk();ak();sk();wO()});var zU={};x1(zU,{createJAdapter:()=>ek,DEFAULT_PRIVATE_KEY:()=>yR,BrowserVMProvider:()=>Y2,BrowserVMEthersProvider:()=>JG});async function ek($){let Q=$.privateKey??yR;if($.mode==="browservm"){let{BrowserVMProvider:Y}=await Promise.resolve().then(() => (eC(),M80)),z=new Y;if(await z.init(),$.browserVMState)await z.restoreState($.browserVMState);let{BrowserVMEthersProvider:J}=await Promise.resolve().then(() => (vR(),hr)),q=new J(z),W=new tk(Q,q);return J20($,q,W,z)}if(!$.rpcUrl)throw Error("rpcUrl required for anvil/rpc mode");let Z=new M0.JsonRpcProvider($.rpcUrl),X=new tk(Q,Z);return K20($,Z,X)}var tk;var $Q=p(()=>{A6();wO();eC();vR();wO();z20();G20();tk=class tk extends M0.Wallet{_managedNonce=-1;async populateTransaction($){if(this._managedNonce===-1){let Z=await this.getAddress();this._managedNonce=await this.provider.getTransactionCount(Z,"latest")}let Q=this._managedNonce++;return super.populateTransaction({...$,nonce:Q})}resetNonce(){this._managedNonce=-1}}});var $Z={};x1($Z,{transferNameBetweenEntities:()=>qx,submitSettle:()=>sD,submitReserveToReserve:()=>Kx,submitProcessBatch:()=>Zx,submitPrefundAccount:()=>Qx,setBrowserVMJurisdiction:()=>s7,registerNumberedEntityOnChain:()=>Xx,registerNumberedEntitiesBatchOnChain:()=>ML0,getNextEntityNumber:()=>zx,getJurisdictions:()=>Wx,getJurisdictionByAddress:()=>wL,getEntityInfoFromChain:()=>Jx,getBrowserVMInstance:()=>e4,getAvailableJurisdictions:()=>QQ,generateJurisdictions:()=>D20,fundEntityReserves:()=>DL0,debugFundReserves:()=>$x,connectToEthereum:()=>t4,assignNameOnChain:()=>Yx,ENTITY_PROVIDER_ABI:()=>V20,DEPOSITORY_ABI:()=>O20,DEFAULT_JURISDICTIONS:()=>lZ});var J8=($,Q)=>{if(console.log($,Q),v5&&window.xlnErrorLog)window.xlnErrorLog($,"EVM",Q)},U20=($,Q)=>{if(y1("BLOCKCHAIN",$,Q),v5&&window.xlnErrorLog)window.xlnErrorLog($,"EVM-ERROR",Q)},V20,O20,t4=async($)=>{let{address:Q,entityProviderAddress:Z,depositoryAddress:X}=$;try{if(!Q&&"rpc"in $)console.warn("\uD83D\uDEA8 JURISDICTION-LEGACY: Using deprecated rpc field, should be address");if(!Z&&"contracts"in $)console.warn("\uD83D\uDEA8 JURISDICTION-LEGACY: Using deprecated contracts.entityProvider field");if(!Q)throw Error("Jurisdiction missing RPC URL (address or rpc property)");if(!Z||!X)throw Error("Jurisdiction missing contract addresses (entityProvider and depository)");if(J8(`\uD83D\uDD0C CONNECTING: jurisdiction=${$.name}, rpcUrl=${Q}`),v5){J8(`   Page Origin: ${window.location.origin}`),J8(`   Page Protocol: ${window.location.protocol}`),J8(`   Page Host: ${window.location.hostname}:${window.location.port}`);let P=new URL(Q,window.location.origin);J8(`   RPC URL: ${P.href}`);let H=window.location.origin!==P.origin;J8(`   CORS issue? ${H?"YES - Different origins!":"No (using proxy)"}`,{corsIssue:H}),J8(`   User Agent: ${navigator.userAgent}`)}J8(`   Contracts: EP=${Z.slice(0,10)}, DEP=${X.slice(0,10)}`);let Y=Q;if(v5&&Q.startsWith("/"))Y=new URL(Q,window.location.origin).href,J8(`   Resolved RPC: ${Y}`);let z,J=Y.startsWith("browservm://");if(J){if(!s4){let{BrowserVMProvider:P}=await Promise.resolve().then(() => ($Q(),zU)),H=new P;await H.init(),s4=H;let N=H.getDepositoryAddress(),C=H.getEntityProviderAddress();lZ=new Map,lZ.set("simnet",{name:"Simnet",chainId:1337,address:"browservm://",entityProviderAddress:C,depositoryAddress:N}),console.log(" Legacy BrowserVM jurisdiction active (global singleton)")}if(!s4)throw Error("BrowserVM instance not set - failed to initialize BrowserVM");if(s4?.getEntityProviderAddress&&(!Z||Z==="0x0000000000000000000000000000000000000000"))Z=s4.getEntityProviderAddress();if(s4?.getDepositoryAddress&&(!X||X==="0x0000000000000000000000000000000000000000"))X=s4.getDepositoryAddress();J8("\uD83E\uDDEA Using BrowserVM ethers provider"),z=new JG(s4)}else z=new M0.JsonRpcProvider(Y);J8(" Provider created");let q="0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80",W=new M0.Wallet(q,z),G=await W.getAddress();if(J8(` Signer created: ${G}`),!J)try{let P=await z.getNetwork();J8(` Network connected: chainId=${P.chainId}`)}catch(P){throw U20(" NETWORK-CONNECT-FAILED",{rpcUrl:Q,errorCode:P?.code,errorMessage:P?.message,errorStack:P?.stack}),P}else J8(" BrowserVM connection established (chainId=1337)");let U=new M0.Contract(Z,V20,W),D=new M0.Contract(X,O20,W);return J8(` Contracts created for ${$.name}`),{provider:z,signer:W,entityProvider:U,depository:D}}catch(Y){throw U20(` CONNECT-FAILED: ${$.name}`,{rpcUrl:Q,errorType:Y?.constructor?.name,errorCode:Y?.code,errorReason:Y?.reason,errorMessage:Y?.message,errorStack:Y?.stack}),Y}},$x=async($,Q,Z,X)=>{try{console.log(`\uD83D\uDCB0 DEBUG: Funding entity ${Q.slice(0,10)} with ${X} of token ${Z}...`);let{depository:Y}=await t4($),z=await Y.debugFundReserves(Q,Z,X);console.log(`\uD83D\uDCE1 Debug funding transaction: ${z.hash}`);let J=await z.wait();console.log(` Debug funding confirmed in block ${J.blockNumber}`);let q=await Y._reserves(Q,Z);return console.log(`\uD83D\uDCB0 Entity ${Q.slice(0,10)} now has ${q.toString()} of token ${Z}`),{transaction:z,receipt:J,newBalance:q}}catch(Y){throw y1("BLOCKCHAIN"," Failed to fund reserves:",Y),Y}},DL0=async($,Q)=>{console.log(`\uD83D\uDCB0 Funding entity ${$.slice(0,10)}... with ${Q.length} assets`);for(let Z of Q)console.log(`  \uD83D\uDCB3 Adding ${Z.symbol}: ${Z.amount} (token ${Z.tokenId})`),console.log(`  - Funding ${$.slice(0,10)} with ${Z.amount} of token ${Z.tokenId}`);console.log(` Entity ${$.slice(0,10)}... funded with all assets`)},Qx=async($,Q,Z,X,Y)=>{try{console.log(`\uD83D\uDCB0 Prefunding account between ${Q.slice(0,10)}... and ${Z.slice(0,10)}...`),console.log(`\uD83D\uDD0D TOKEN: ${X}, AMOUNT: ${Y}`);let{depository:z,provider:J}=await t4($);if(console.log(`\uD83D\uDD0D CONTRACT ADDRESS: ${z.target}`),await J.getCode(z.target)==="0x")throw Error("Contract not deployed at this address");let W=await z._reserves(Q,X);if(console.log(`\uD83D\uDD0D Current balance: ${W.toString()}`),console.log(`\uD83D\uDD0D Requested amount: ${Y}`),W<BigInt(Y))throw Error(`Insufficient reserves: have ${W.toString()}, need ${Y}`);console.log(`\uD83D\uDCDE Calling prefundAccount(${Z}, ${X}, ${Y})`);let G=await z.prefundAccount(Z,X,Y);console.log(` Transaction sent: ${G.hash}`);let U=await G.wait();return console.log(` Prefunding confirmed in block ${U.blockNumber}`),{hash:G.hash,receipt:U}}catch(z){throw y1("BLOCKCHAIN"," Failed to prefund account:",z),z}},Zx=async($,Q,Z,X,Y)=>{try{if(!Y)throw Error(`submitProcessBatch  signerId  ${Z.slice(0,10)}`);console.log(`\uD83D\uDCB8 Submitting processBatch (Hanko) to ${Q.name} as entity ${Z.slice(0,10)}...`);let{depository:z,provider:J}=await t4(Q),q=Q.entityProviderAddress;if(!q||q==="0x0000000000000000000000000000000000000000")throw Error("Jurisdiction missing entityProviderAddress");let W=qO(X),G=await J.getNetwork(),U=BigInt(G.chainId),D=u6(Z),P=M0.getAddress(`0x${D.slice(-40)}`),H=await z.entityNonces?.(P),N=BigInt(H??0)+1n,C=WO(U,String(z.target),W,N),{signHashesAsSingleEntity:L}=await Promise.resolve().then(() => (F2(),S4)),E=(await L($,Z,Y,[C]))[0];if(!E)throw Error("Failed to build batch hanko signature");let I=await z.processBatch(W,q,E,N);console.log(`\uD83D\uDCE1 Transaction submitted: ${I.hash}`);let _=await I.wait();return console.log(` Transaction confirmed in block ${_.blockNumber}`),{transaction:I,receipt:_}}catch(z){throw y1("BLOCKCHAIN",` Failed to submit processBatch to ${Q.name}:`,z),z}},Xx=async($,Q)=>{if(!$.jurisdiction)throw Error("Jurisdiction required for on-chain registration");try{let{entityProvider:Z}=await t4($.jurisdiction),X=sY($),Y=iZ(X);if(D1)console.log(`\uD83C\uDFDB Registering numbered entity "${Q}" on chain`);if(D1)console.log(`   Jurisdiction: ${$.jurisdiction.name}`);if(D1)console.log(`   EntityProvider: ${$.jurisdiction.entityProviderAddress}`);if(D1)console.log(`   Board Hash: ${Y}`);try{let U=await Z.nextNumber();if(D1)console.log(`   \uD83D\uDCCA Next entity number will be: ${U}`)}catch(U){throw Error(`Failed to call nextNumber(): ${U}`)}let z=await Z.registerNumberedEntity(Y);if(D1)console.log(`   \uD83D\uDCE4 Transaction sent: ${z.hash}`);let J=await z.wait();if(D1)console.log(`    Transaction confirmed in block ${J.blockNumber}`);if(J.status===0)throw Error(`Transaction reverted! Hash: ${z.hash}`);if(D1)console.log(`   \uD83D\uDCCB Receipt logs count: ${J.logs.length}`),J.logs.forEach((U,D)=>{try{let P=Z.interface.parseLog(U);console.log(`   \uD83D\uDCDD Log ${D}: ${P?.name} - ${h1(P?.args)}`)}catch{console.log(`   \uD83D\uDCDD Log ${D}: Unable to parse log - ${U.topics?.[0]}`)}});let q=J.logs.find((U)=>{try{return Z.interface.parseLog(U)?.name==="EntityRegistered"}catch{return!1}});if(!q)throw Error("EntityRegistered event not found in transaction logs");let W=Z.interface.parseLog(q),G=Number(W?.args[1]);if(D1)console.log(" Numbered entity registered!");if(D1)console.log(`   TX: ${z.hash}`);if(D1)console.log(`   Entity Number: ${G}`);return{txHash:z.hash,entityNumber:G}}catch(Z){throw y1("BLOCKCHAIN"," Blockchain registration failed:",Z),Z}},ML0=async($,Q)=>{try{let Z=$.map((q)=>{let W=sY(q);return iZ(W)});if(console.log(`\uD83C\uDFDB Batch registering ${$.length} entities in ONE transaction...`),Q.address.startsWith("browservm://")){if(!s4)throw Error("BrowserVM instance not set");return await s4.registerNumberedEntitiesBatch(Z)}let{entityProvider:X}=await t4(Q),Y=await X.registerNumberedEntitiesBatch(Z);console.log(`\uD83D\uDCE4 Batch tx sent: ${Y.hash}`);let z=await Y.wait();if(console.log(` Batch confirmed in block ${z.blockNumber}`),z.status===0)throw Error(`Batch registration reverted! Hash: ${Y.hash}`);let J=[];return z.logs.forEach((q)=>{try{let W=X.interface.parseLog(q);if(W?.name==="EntityRegistered")J.push(Number(W.args[1]))}catch{}}),console.log(` Registered ${J.length} entities: ${J[0]}-${J[J.length-1]}`),{txHash:Y.hash,entityNumbers:J}}catch(Z){throw y1("BLOCKCHAIN"," Batch registration failed:",Z),Z}},Yx=async($,Q,Z)=>{try{let{entityProvider:X}=await t4(Z);if(D1)console.log(`\uD83C\uDFF7  Assigning name "${$}" to entity #${Q}`);let Y=await X.assignName($,Q);if(D1)console.log(`   \uD83D\uDCE4 Transaction sent: ${Y.hash}`);let z=await Y.wait();if(D1)console.log(`    Transaction confirmed in block ${z.blockNumber}`);if(z.status===0)throw Error(`Transaction reverted! Hash: ${Y.hash}`);if(D1)console.log(" Name assigned successfully!");if(D1)console.log(`   TX: ${Y.hash}`);return{txHash:Y.hash}}catch(X){throw y1("BLOCKCHAIN"," Name assignment failed:",X),X}},Jx=async($,Q)=>{try{let{entityProvider:Z}=await t4(Q);if((await Z.entities($)).status===0)return{exists:!1};let Y=vq($),z,J;if(Y==="numbered"){let q=yq($);if(q!==null){z=q;try{J=await Z.numberToName(z)||void 0}catch{}}}return{exists:!0,...z!==void 0?{entityNumber:z}:{},...J!==void 0?{name:J}:{}}}catch(Z){return y1("BLOCKCHAIN"," Failed to get entity info from chain:",Z),{exists:!1}}},zx=async($)=>{try{if(!$)throw Error("Jurisdiction parameter is required");let Q=$.entityProviderAddress;if(!Q&&"contracts"in $){let J=$.contracts?.entityProvider;if(J)Q=J}if(!$.name||!Q)throw Error("Jurisdiction object is missing required properties (name, entityProvider address)");let{entityProvider:Z}=await t4($);if(D1)console.log(`\uD83D\uDD0D Fetching next entity number from ${Q} (${$.name})`);let X=await Z.nextNumber(),Y=Number(X);if(D1)console.log(`\uD83D\uDD22 Next entity number: ${Y}`);return Y}catch(Q){throw y1("BLOCKCHAIN"," Failed to get next entity number:",Q),Q}},qx=async($,Q,Z,X)=>{if(D1)console.log(`\uD83D\uDD04 Transferring name "${$}" from #${Q} to #${Z}`);throw Error("Name transfer not implemented - requires blockchain integration")},D20=async()=>{let $=new Map;try{let Q;if(!v5&&typeof process<"u")console.log("\uD83D\uDD0D JURISDICTION SOURCE: Using centralized jurisdiction-loader"),Q=VE(),console.log("\uD83D\uDD0D JURISDICTION DEBUG: Loaded config with contracts:",Q.jurisdictions?.ethereum?.contracts),console.log(" Loaded jurisdictions from centralized loader (cached)");else{let X=new AbortController,Y=setTimeout(()=>X.abort(),3000);try{let z=await fetch("./jurisdictions.json",{signal:X.signal});if(clearTimeout(Y),!z.ok)throw Error(`Failed to fetch jurisdictions.json: ${z.status} ${z.statusText}`);Q=await z.json(),console.log("\uD83D\uDD0D JURISDICTION DEBUG: Browser loaded config with contracts:",Q.jurisdictions?.ethereum?.contracts),console.log(" Loaded jurisdictions from runtime")}catch(z){if(clearTimeout(Y),z.name==="AbortError")console.log(" jurisdictions.json fetch timed out - using BrowserVM mode (no external blockchain)");else console.log(" jurisdictions.json not found - using BrowserVM mode (no external blockchain)");return $}}let Z=Q.jurisdictions;for(let[X,Y]of Object.entries(Z)){if(!Y||typeof Y!=="object"){console.warn(`\uD83D\uDEA8 Invalid jurisdiction data for ${X}:`,Y);continue}let z=Y,J=z.rpc,q=v5&&/OculusBrowser|Quest/i.test(navigator.userAgent),W=v5?localStorage.getItem("xln_rpc_override"):null;if(J8(`\uD83D\uDD0D RPC-TRANSFORM-START: key=${X}, rpc=${J}`,{isOculusBrowser:q,override:W,userAgent:v5?navigator.userAgent:"N/A"}),q&&!W&&J.startsWith(":")){let G=parseInt(J.slice(1));J=`${window.location.protocol}//${window.location.hostname}:${G}`,J8(`\uD83C\uDFAE OCULUS FIX: Using direct port ${G}  ${J}`)}if(W&&W!=="")if(W.startsWith("/")){let G=Object.keys(Q.jurisdictions).length,U=G===1?W:W.endsWith("/")?W+z.name.toLowerCase():`${W}/${z.name.toLowerCase()}`;J=`${window.location.origin}${U}`,J8(`\uD83D\uDD27 RPC URL (override): ${z.rpc}  ${J} (path proxy, ${G} jurisdictions)`)}else if(W.startsWith(":"))J=`${window.location.protocol}//${window.location.hostname}${W}`,J8(`\uD83D\uDD27 RPC URL (override): ${z.rpc}  ${J} (custom port)`);else J=W,J8(`\uD83D\uDD27 RPC URL (override): ${z.rpc}  ${J} (full URL)`);else if(v5&&J.startsWith("/"))J=`${window.location.origin}${J}`,J8(`\uD83D\uDD27 RPC-TRANSFORM-PROXY: ${z.rpc}  ${J}`,{origin:window.location.origin,proxyPath:z.rpc});else if(v5&&J.startsWith(":")){let G=parseInt(J.slice(1)),U=window.location.hostname.match(/localhost|127\.0\.0\.1/),D=U?G:G+1e4;J=`${window.location.protocol}//${window.location.hostname}:${D}`,J8(`\uD83D\uDD27 RPC-TRANSFORM-DEFAULT: ${z.rpc}  ${J}`,{hostname:window.location.hostname,isLocalhost:!!U,port:G,actualPort:D,portOffset:U?0:1e4})}else if(!v5&&J.startsWith(":"))J=`http://localhost${J}`;J8(`\uD83D\uDCCD FINAL-RPC-URL: ${X}  ${J}`,{entityProvider:z.contracts.entityProvider,depository:z.contracts.depository}),$.set(X,{address:J,name:z.name,entityProviderAddress:z.contracts.entityProvider,depositoryAddress:z.contracts.depository,chainId:z.chainId})}}catch(Q){y1("BLOCKCHAIN"," Failed to load jurisdictions:",Q)}return $},lZ=null,Wx=async()=>{if(v5&&lZ!==null)return console.log("\uD83D\uDD0D JURISDICTIONS: Using cached browser data"),lZ;return lZ=await D20(),lZ},QQ=async()=>{let $=await Wx();return Array.from($.values())},s4=null,s7=($,Q,Z)=>{console.log("[BrowserVM] Setting jurisdiction override:",{depositoryAddress:Q,hasBrowserVM:!!Z,hasEnv:!!$});let X=Z?.browserVM??Z,Y=X?.getProvider?X.getProvider():X;if(console.log("[BrowserVM] rawBrowserVM:",!!X,"resolvedBrowserVM:",!!Y,"hasGetProvider:",!!X?.getProvider),Y&&$){if($.browserVM=Y,console.log("[BrowserVM] Stored browserVM instance in env (isolated), env.browserVM now:",!!$.browserVM),Y.onAny&&!$._browserVMEventSubscribed)$._browserVMEventSubscribed=!0,Y.onAny((q)=>{if(!$.runtimeInput)$.runtimeInput={runtimeTxs:[],entityInputs:[]};let W=new Map;for(let G of q){if(!["ReserveUpdated","SecretRevealed","AccountSettled","DisputeStarted","DebtCreated"].includes(G.name))continue;let U=G.args?.entity||G.args?.entityId||G.args?.leftEntity;if(!U)continue;let D=String(U).toLowerCase();if(!W.has(D))W.set(D,[]);W.get(D).push({type:G.name,data:G.args,blockNumber:G.blockNumber||0,transactionHash:G.transactionHash||"0x"})}for(let[G,U]of W)$.runtimeInput.entityInputs.push({entityId:G,signerId:"j-event",entityTxs:[{type:"j_event",data:{events:U}}]});if(W.size>0)console.log(`\uD83D\uDD17 BrowserVM  ${W.size} entities queued for J-event processing`)}),console.log("[BrowserVM] J-event forwarding enabled (events  env.runtimeInput.entityInputs)")}else console.warn("[BrowserVM] FAILED to store: resolvedBrowserVM=",!!Y,"env=",!!$);if(Y)s4=Y;let J=(()=>{if(Y?.getEntityProviderAddress)return Y.getEntityProviderAddress();if($?.browserVM?.getEntityProviderAddress)return $.browserVM.getEntityProviderAddress();if(s4?.getEntityProviderAddress)return s4.getEntityProviderAddress();return"0x0000000000000000000000000000000000000000"})();if(!J||J==="0x0000000000000000000000000000000000000000")console.warn("[BrowserVM] EntityProvider address missing - numbered entities will fail until EP is deployed.");lZ=new Map,lZ.set("simnet",{name:"Simnet",chainId:1337,address:"browservm://",entityProviderAddress:J,depositoryAddress:Q}),console.log(" BrowserVM jurisdiction active - numbered entities will register here")},wL=async($)=>{return(await Wx()).get($)},e4=($)=>{return $?.browserVM||null},sD=async($,Q,Z,X,Y=[],z=[],J)=>{try{if(console.log(` Submitting settle transaction between ${Q.slice(0,10)}... and ${Z.slice(0,10)}...`),console.log("\uD83D\uDD0D DIFFS:",X.map((N)=>({...N,leftDiff:N.leftDiff.toString(),rightDiff:N.rightDiff.toString(),collateralDiff:N.collateralDiff.toString()}))),(X.length>0||Y.length>0||z.length>0)&&(!J||J==="0x"))throw Error("Settlement signature required for settle");let W=J||"0x",{depository:G,provider:U}=await t4($);if(console.log(`\uD83D\uDD0D CONTRACT ADDRESS: ${G.target}`),await U.getCode(G.target)==="0x")throw Error("Contract not deployed at this address");console.log("\uD83D\uDCE4 Calling settle function...");let P=await G.settle(Q,Z,X,Y,z,W);console.log(`\uD83D\uDCAB Transaction sent: ${P.hash}`);let H=await P.wait();if(console.log(` Settlement confirmed in block ${H.blockNumber}`),H.status===0)throw Error(`Settlement transaction reverted! Hash: ${P.hash}`);return console.log("\uD83C\uDF89 Settlement successful! Both entities should receive SettlementProcessed events"),{txHash:P.hash,blockNumber:H.blockNumber}}catch(q){throw y1("BLOCKCHAIN"," Settlement failed:",q),q}},Kx=async($,Q,Z,X,Y)=>{try{console.log(`\uD83D\uDCB8 DIRECT R2R: ${Q.slice(0,10)}  ${Z.slice(0,10)}, token ${X}, amount ${Y}`);let{depository:z,provider:J}=await t4($);if(console.log(`\uD83D\uDD0D CONTRACT ADDRESS: ${z.target}`),await J.getCode(z.target)==="0x")throw Error("Contract not deployed at this address");console.log(`\uD83D\uDCE4 Calling reserveToReserve(${Q}, ${Z}, ${X}, ${Y})...`);let W=await z.reserveToReserve(Q,Z,X,Y);console.log(`\uD83D\uDCAB Transaction sent: ${W.hash}`);let G=await W.wait();if(console.log(` R2R confirmed in block ${G.blockNumber}`),G.status===0)throw Error(`R2R transaction reverted! Hash: ${W.hash}`);return console.log("\uD83C\uDF89 Direct R2R successful!"),{txHash:W.hash,blockNumber:G.blockNumber}}catch(z){throw y1("BLOCKCHAIN"," Direct R2R failed:",z),z}};var A2=p(()=>{A6();OE();c6();tY();h8();B8();hz();vR();V20=["function registerNumberedEntity(bytes32 boardHash) external returns (uint256 entityNumber)","function registerNumberedEntitiesBatch(bytes32[] calldata boardHashes) external returns (uint256[] memory entityNumbers)","function assignName(string memory name, uint256 entityNumber) external","function transferName(string memory name, uint256 newEntityNumber) external","function entities(bytes32 entityId) external view returns (tuple(uint256 boardHash, uint8 status, uint256 activationTime))","function nameToNumber(string memory name) external view returns (uint256)","function numberToName(uint256 entityNumber) external view returns (string memory)","function nextNumber() external view returns (uint256)","function getTokenIds(uint256 entityNumber) external pure returns (uint256 controlTokenId, uint256 dividendTokenId)","function getGovernanceInfo(uint256 entityNumber) external view returns (uint256 controlTokenId, uint256 dividendTokenId, uint256 controlSupply, uint256 dividendSupply, bool hasActiveProposal, bytes32 articlesHash)","function balanceOf(address account, uint256 id) external view returns (uint256)","function safeTransferFrom(address from, address to, uint256 id, uint256 amount, bytes data) external","event EntityRegistered(bytes32 indexed entityId, uint256 indexed entityNumber, bytes32 boardHash)","event NameAssigned(string indexed name, uint256 indexed entityNumber)","event NameTransferred(string indexed name, uint256 indexed oldEntityNumber, uint256 indexed newEntityNumber)","event GovernanceEnabled(bytes32 indexed entityId, uint256 controlTokenId, uint256 dividendTokenId)"],O20=["function mintToReserve(bytes32 entity, uint256 tokenId, uint256 amount) external","function debugFundReserves(bytes32 entity, uint256 tokenId, uint256 amount) external","function debugBulkFundEntities() external","function reserveToReserve(bytes32 fromEntity, bytes32 toEntity, uint256 tokenId, uint256 amount) external returns (bool)","function processBatch(bytes encodedBatch, address entityProvider, bytes hankoData, uint256 nonce) external returns (bool)","function unsafeProcessBatch(bytes32 entity, tuple(tuple(uint256 tokenId, uint256 amount)[] flashloans, tuple(bytes32 receivingEntity, uint256 tokenId, uint256 amount)[] reserveToReserve, tuple(uint256 tokenId, bytes32 receivingEntity, tuple(bytes32 entity, uint256 amount)[] pairs)[] reserveToCollateral, tuple(bytes32 leftEntity, bytes32 rightEntity, tuple(uint256 tokenId, int256 leftDiff, int256 rightDiff, int256 collateralDiff, int256 ondeltaDiff)[] diffs, uint256[] forgiveDebtsInTokenIds, tuple(bytes32 insured, bytes32 insurer, uint256 tokenId, uint256 limit, uint64 expiresAt)[] insuranceRegs, bytes sig, address entityProvider, bytes hankoData, uint256 nonce)[] settlements, tuple(bytes32 counterentity, uint256 cooperativeNonce, uint256 disputeNonce, bytes32 proofbodyHash, bytes sig, bytes initialArguments)[] disputeStarts, tuple(bytes32 counterentity, uint256 initialCooperativeNonce, uint256 finalCooperativeNonce, uint256 initialDisputeNonce, uint256 finalDisputeNonce, bytes32 initialProofbodyHash, tuple(int256[] offdeltas, uint256[] tokenIds, tuple(address transformerAddress, bytes encodedBatch, tuple(uint256 deltaIndex, uint256 rightAllowance, uint256 leftAllowance)[] allowances)[] transformers) finalProofbody, bytes finalArguments, bytes initialArguments, bytes sig, bool startedByLeft, uint256 disputeUntilBlock, bool cooperative)[] disputeFinalizations, tuple(bytes32 entity, address contractAddress, uint96 externalTokenId, uint8 tokenType, uint256 internalTokenId, uint256 amount)[] externalTokenToReserve, tuple(bytes32 receivingEntity, uint256 tokenId, uint256 amount)[] reserveToExternalToken, tuple(address transformer, bytes32 secret)[] revealSecrets, uint256 hub_id) batch) external returns (bool)","function entityNonces(address) view returns (uint256)","function prefundAccount(bytes32 fundingEntity, bytes32 counterpartyEntity, uint256 tokenId, uint256 amount) external returns (bool)","function settle(bytes32 leftEntity, bytes32 rightEntity, tuple(uint256 tokenId, int256 leftDiff, int256 rightDiff, int256 collateralDiff, int256 ondeltaDiff)[] diffs, uint256[] forgiveDebtsInTokenIds, tuple(bytes32 insured, bytes32 insurer, uint256 tokenId, uint256 limit, uint64 expiresAt)[] insuranceRegs, bytes sig) external returns (bool)","function _reserves(bytes32 entity, uint256 tokenId) external view returns (uint256)","function getInsuranceLines(bytes32 insured) external view returns (tuple(bytes32 insurer, uint256 tokenId, uint256 remaining, uint64 expiresAt)[])","function getInsuranceLinesCount(bytes32 insured) external view returns (uint256)","function getAvailableInsurance(bytes32 insured, uint256 tokenId) external view returns (uint256)","event ReserveUpdated(bytes32 indexed entity, uint256 indexed tokenId, uint256 newBalance)","event SecretRevealed(bytes32 indexed hashlock, bytes32 indexed revealer, bytes32 secret)","event DisputeStarted(bytes32 indexed sender, bytes32 indexed counterentity, uint256 indexed disputeNonce, bytes32 proofbodyHash, bytes initialArguments)","event DisputeFinalized(bytes32 indexed sender, bytes32 indexed counterentity, uint256 indexed initialDisputeNonce, bytes32 initialProofbodyHash, bytes32 finalProofbodyHash)","event InsuranceRegistered(bytes32 indexed insured, bytes32 indexed insurer, uint256 indexed tokenId, uint256 limit, uint64 expiresAt)","event InsuranceClaimed(bytes32 indexed insured, bytes32 indexed insurer, bytes32 indexed creditor, uint256 tokenId, uint256 amount)","event InsuranceExpired(bytes32 indexed insured, bytes32 indexed insurer, uint256 indexed tokenId, uint256 index)","event DebtCreated(bytes32 indexed debtor, bytes32 indexed creditor, uint256 indexed tokenId, uint256 amount, uint256 debtIndex)","event DebtEnforced(bytes32 indexed debtor, bytes32 indexed creditor, uint256 indexed tokenId, uint256 amountPaid, uint256 remainingAmount, uint256 newDebtIndex)"]});var EL={};x1(EL,{resolveEntityIdentifier:()=>Mx,requestNamedEntity:()=>Dx,isEntityRegistered:()=>Px,hashBoard:()=>iZ,generateNumberedEntityId:()=>eY,generateNamedEntityId:()=>Ux,generateLazyEntityId:()=>BL,extractNumberFromEntityId:()=>yq,encodeBoard:()=>sY,detectEntityType:()=>vq,createNumberedEntity:()=>tD,createNumberedEntitiesBatch:()=>Ox,createLazyEntity:()=>Vx});var PL0=0,Gx=($)=>{if($.startsWith("0x")&&$.length===42)return M0.getAddress($);if($.startsWith("0x")&&$.length===66)return M0.getAddress(`0x${$.slice(-40)}`);let Q=ZO($);if(!Q)throw Error(`Cannot derive address for validator ${$}`);return M0.getAddress(Q)},HL0=($)=>{let Q=Gx($);return M0.zeroPadValue(Q,32)},M20=($,Q)=>{if($<0n||$>0xffffn)throw Error(`Board ${Q} out of range: ${$.toString()}`);return Number($)},sY=($)=>{let Q=$.validators.map(HL0),Z=$.validators.map((z)=>M20($.shares[z]||1n,`weight(${z})`)),X=M20($.threshold,"threshold");return M0.AbiCoder.defaultAbiCoder().encode(["tuple(uint16,bytes32[],uint16[],uint32,uint32,uint32)"],[[X,Q,Z,0,0,0]])},iZ=($)=>{if($.startsWith("0x"))return M0.keccak256($);return M0.keccak256(M0.toUtf8Bytes($))},BL=($,Q)=>{let Z;if(typeof $[0]==="string")Z=$.map((q)=>({name:q,weight:1n}));else Z=$.map((q)=>({name:q.name,weight:BigInt(q.weight)}));let X=Z.slice().sort((q,W)=>{let G=Gx(q.name),U=Gx(W.name);return G.localeCompare(U)}),Y={},z=X.map((q)=>q.name);for(let q of X)Y[q.name]=q.weight;let J=sY({mode:"proposer-based",threshold:Q,validators:z,shares:Y});return iZ(J)},eY=($)=>{return`0x${$.toString(16).padStart(64,"0")}`},Ux=($)=>{return iZ($)},vq=($)=>{if($.startsWith("0x")&&$.length===66)try{let Q=BigInt($);if(Q>0n&&Q<1000000n)return"numbered";return"lazy"}catch{return"lazy"}if(/^[0-9]+$/.test($))try{let Q=BigInt($);if(Q>0n&&Q<1000000n)return"numbered";return"lazy"}catch{return"lazy"}return"lazy"},yq=($)=>{if(!$||typeof $!=="string")throw Error(`FINTECH-SAFETY: Invalid entityId type: ${typeof $}`);if($.startsWith("0x")&&$.length===66)try{let Q=BigInt($);if(Q>0n&&Q<1000000n)return Number(Q);let Z=$.slice(-8);return parseInt(Z,16)%9000000+1e6}catch(Q){throw Error(`FINTECH-SAFETY: Invalid entityId format: ${$} - ${Q}`)}if(/^[0-9]+$/.test($))try{let Q=BigInt($);if(Q>0n&&Q<1000000n)return Number(Q);return Number(Q%9000000n+1000000n)}catch(Q){throw Error(`FINTECH-SAFETY: Invalid numeric entityId: ${$} - ${Q}`)}throw Error(`FINTECH-SAFETY: EntityId must be hex or numeric, got: ${$}`)},Vx=($,Q,Z,X)=>{let Y=BL(Q,Z);if(D1)console.log(`\uD83D\uDD12 Creating lazy entity: ${$}`);if(D1)console.log(`   EntityID: ${Y} (quorum hash)`);if(D1)console.log(`   Validators: ${Q.join(", ")}`);if(D1)console.log(`   Threshold: ${Z}`);if(D1)console.log("   \uD83C\uDD93 FREE - No gas required");let z={};Q.forEach((W)=>{z[W]=1n});let J={mode:"proposer-based",threshold:Z,validators:Q,shares:z,...X&&{jurisdiction:X}},q=0;return console.log(` Lazy entity creation: ${q.toFixed(3)}ms (pure in-memory)`),{config:J,executionTimeMs:q}},tD=async($,Q,Z,X)=>{if(!X)throw Error("Jurisdiction required for numbered entity registration");let Y=iZ(sY({mode:"proposer-based",threshold:Z,validators:Q,shares:Q.reduce((q,W)=>({...q,[W]:1n}),{}),jurisdiction:X}));if(D1)console.log(`\uD83D\uDD22 Creating numbered entity: ${$}`);if(D1)console.log(`   Board Hash: ${Y}`);if(D1)console.log(`   Jurisdiction: ${X.name}`);if(D1)console.log("   \uD83D\uDCB8 Gas required for registration");let{getNextEntityNumber:z,registerNumberedEntityOnChain:J}=await Promise.resolve().then(() => (A2(),$Z));try{await z(X);let{entityNumber:q}=await J({mode:"proposer-based",threshold:Z,validators:Q,shares:Q.reduce((D,P)=>({...D,[P]:1n}),{}),jurisdiction:X},$),W=eY(q);if(D1)console.log(`    Registered Entity Number: ${q}`);if(D1)console.log(`   EntityID: ${W}`);let G={};return Q.forEach((D)=>{G[D]=1n}),{config:{mode:"proposer-based",threshold:Z,validators:Q,shares:G,jurisdiction:X},entityNumber:q,entityId:W}}catch(q){throw console.error(" Failed to register numbered entity on blockchain:",q),q}},Ox=async($,Q)=>{if(!Q)throw Error("Jurisdiction required for numbered entity registration");console.log(`\uD83D\uDD22 Batch creating ${$.length} numbered entities in ONE transaction`);let Z=$.map((z)=>({mode:"proposer-based",threshold:z.threshold,validators:z.validators,shares:z.validators.reduce((J,q)=>({...J,[q]:1n}),{}),jurisdiction:Q})),{registerNumberedEntitiesBatchOnChain:X}=await Promise.resolve().then(() => (A2(),$Z)),{entityNumbers:Y}=await X(Z,Q);return Y.map((z,J)=>{let q=eY(z),W=Z[J];if(!W)throw Error(`Missing config for entity ${J}`);return console.log(`   Entity ${J+1}/${$.length}: #${z} (${q.slice(0,10)}...)`),{config:W,entityNumber:z,entityId:q}})},Dx=async($,Q,Z)=>{if(!Z)throw Error("Jurisdiction required for named entity");if(D1)console.log("\uD83C\uDFF7 Requesting named entity assignment");if(D1)console.log(`   Name: ${$}`);if(D1)console.log(`   Target Entity Number: ${Q}`);if(D1)console.log(`   Jurisdiction: ${Z.name}`);if(D1)console.log("   \uD83D\uDC51 Requires admin approval");let X=`req_${PL0++}`;if(D1)console.log(`   \uD83D\uDCDD Name assignment request submitted: ${X}`);if(D1)console.log("    Waiting for admin approval...");return X},Mx=async($)=>{if($.startsWith("#")){let Q=parseInt($.slice(1));return{entityId:eY(Q),type:"numbered"}}else if(/^\d+$/.test($)){let Q=parseInt($);return{entityId:eY(Q),type:"numbered"}}else if($.startsWith("0x"))return{entityId:$,type:vq($)};else{if(D1)console.log(`\uD83D\uDD0D Looking up named entity: ${$}`);let Q=$==="coinbase"?42:0;if(Q>0)return{entityId:eY(Q),type:"named"};else throw Error(`Named entity "${$}" not found`)}},Px=async($)=>{if(vq($)==="lazy")return!1;if(!/^[0-9]+$/.test($))return!1;try{let Z=BigInt($);return Z>0n&&Z<1000000n}catch{return!1}};var tY=p(()=>{A6();H8();B8()});var N20={};x1(N20,{sha256Hash20:()=>TL0,sha256Hash:()=>LL0,randomBytes:()=>zR,log:()=>z5,isBrowser:()=>v5,hashObject:()=>CL0,hash20:()=>j20,hash:()=>NL0,getWallClockMs:()=>oZ,getSignerDisplayInfo:()=>jx,getSignerAddress:()=>P20,getPerfMs:()=>nZ,getEntityShortId:()=>$M,getEntityNumber:()=>Rx,getEntityDisplayInfo:()=>Hx,generateSignerAvatar:()=>eD,generateEntityAvatar:()=>$J,formatSignerDisplay:()=>QJ,formatEntityId:()=>x6,formatEntityDisplay:()=>U4,extractNumberFromEntityId:()=>yq,deterministicStringify:()=>R20,cryptoHash:()=>WU,createHash:()=>oK,clearDatabase:()=>IL,HEAVY_LOGS:()=>z1,DEMO_SIGNERS:()=>_L,DEBUG:()=>D1,Buffer:()=>gq});async function WU($){let Z=new TextEncoder().encode($),X=await crypto.subtle.digest("SHA-256",Z),Y=new Uint8Array(X);return`0x${Array.from(Y).map((J)=>J.toString(16).padStart(2,"0")).join("")}`}async function CL0($){let Q=R20($);return await WU(Q)}async function j20($){return(await WU($)).slice(0,42)}function R20($){return JSON.stringify($,(Q,Z)=>{if(typeof Z==="bigint")return Z.toString();return Z})}function $M($){if(!$||$==="0x"||$==="0x0")return"0";let Q=$.startsWith("0x")?$.slice(2):$;try{let Z=BigInt("0x"+Q),X=BigInt(281474976710656);if(Z>=0n&&Z<X)return Z.toString()}catch{}return Q.slice(0,4).toUpperCase()}function x6($){let Q=$M($),Z=parseInt(Q,10);if(!isNaN(Z)&&Q===Z.toString())return`#${Q}`;return Q}function Rx($){return $M($)}var oZ=()=>{let $=typeof globalThis<"u"?globalThis.performance:void 0;if($&&typeof $.timeOrigin==="number"&&typeof $.now==="function")return Math.round($.timeOrigin+$.now());if(typeof process<"u"&&typeof process.hrtime==="function"){let[Q,Z]=process.hrtime();return Q*1000+Math.floor(Z/1e6)}return 0},nZ=()=>{let $=typeof globalThis<"u"?globalThis.performance:void 0;if($&&typeof $.now==="function")return $.now();if(typeof process<"u"&&typeof process.hrtime==="function"){let[Q,Z]=process.hrtime();return Q*1000+Math.floor(Z/1e6)}return 0},v5,oK,zR,jL0=()=>{let $=globalThis.Buffer;if($&&typeof $.isBuffer==="function")return $;return I0},gq,RL0=($)=>{return $.includes("state")||$.includes("tx")||$.includes("block")||$.includes("error")||$.includes("diff")||$.includes("info")?console.log.bind(console,`[${$}]`):()=>{}},qU,z5,NL0=($)=>{let Q=oK("sha256").update($.toString()).digest();return gq.from(Q)},D1=!1,z1=!1,IL=async($)=>{if(console.log("Clearing database and resetting history..."),$)await $.clear(),console.log(" Database cleared via provided instance");else if(typeof indexedDB<"u"){let Q=["db","level-js-db","level-db"];try{let Z=Q.map((X)=>{return new Promise((Y)=>{let z=indexedDB.deleteDatabase(X);z.onsuccess=()=>{console.log(` Cleared IndexedDB: ${X}`),Y()},z.onerror=()=>{console.log(` Could not clear IndexedDB: ${X} (may not exist)`),Y()},z.onblocked=()=>{console.log(` IndexedDB deletion blocked: ${X}`),Y()}})});if(await Promise.all(Z),console.log(" All databases cleared, re-initializing..."),typeof window<"u"&&window.reinitializeAfterClear)window.reinitializeAfterClear();return}catch(Z){if(console.log(" Error clearing IndexedDB:",Z),typeof window<"u"&&window.reinitializeAfterClear)window.reinitializeAfterClear();return}}console.log("Database cleared.")},U4=($)=>{if(!$)return"undefined";let Q=yq($);if(Q!==null)return Q.toString();else return $},Hx=($)=>{if(!$)return{name:"Entity (undefined)",avatar:"",type:"numbered"};let Q=yq($);if(Q!==null)return{name:`Entity #${Q}`,avatar:$J($),type:"numbered"};else return{name:$,avatar:$J($),type:"lazy"}},_L,QJ=($)=>{let Q=_L[$];if(Q)return`\uD83D\uDC64 ${Q.name}`;return $},jx=($)=>{let Q=_L[$];if(Q)return{name:Q.name,address:Q.address,avatar:eD($)};return{name:$,address:$,avatar:eD($)}},P20=($)=>{let Q=_L[$];if(Q)return Q.address;return $},$J=($)=>{try{let Q=nF($,40);return`data:image/svg+xml,${encodeURIComponent(Q)}`}catch(Q){return H20($)}},eD=($)=>{try{let Q=P20($),Z=nF(Q,32);return`data:image/svg+xml,${encodeURIComponent(Z)}`}catch(Q){return H20($)}},H20=($)=>{let Q=0;for(let q=0;q<$.length;q++)Q=(Q<<5)-Q+$.charCodeAt(q)&4294967295;let z=`<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg">
    <circle cx="16" cy="16" r="16" fill="hsl(${Math.abs(Q)%360}, ${70}%, ${50}%)"/>
  </svg>`;return`data:image/svg+xml;base64,${gq.from(z).toString("base64")}`},LL0,TL0;var B8=p(()=>{Zh();s6();tY();if(typeof global>"u")globalThis.global=globalThis;v5=typeof window<"u",oK=v5?($)=>({update:(Q)=>({digest:(Z)=>{let X=new TextEncoder,Y=0;for(let q=0;q<Q.length;q++){let W=Q.charCodeAt(q);Y=(Y<<5)-Y+W,Y=Y&Y}let z=Math.abs(Y).toString(16).padStart(8,"0"),J=(z+z+z+z).slice(0,64);if(Z==="hex")return J;else{let q=new Uint8Array(32);for(let W=0;W<32;W++)q[W]=parseInt(J.substr(W*2,2),16);return gq.from(q)}}})}):(E9(),Q5(O9)).createHash,zR=v5?($)=>{let Q=new Uint8Array($);return crypto.getRandomValues(Q),Q}:(E9(),Q5(O9)).randomBytes,gq=jL0();if(v5){if(Uint8Array.prototype.toString=function($="utf8"){return new TextDecoder().decode(this)},globalThis.Buffer!==gq)globalThis.Buffer=gq;window.Buffer=gq}qU=v5?RL0:Y4(),z5={state:qU("state:\uD83D\uDD35"),tx:qU("tx:\uD83D\uDFE1"),block:qU("block:\uD83D\uDFE2"),error:qU("error:\uD83D\uDD34"),diff:qU("diff:\uD83D\uDFE3"),info:qU("info:")},_L={alice:{name:"alice.eth",address:"0x70997970C51812dc3A010C7d01b50e0d17dc79C8"},bob:{name:"bob.eth",address:"0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC"},carol:{name:"carol.eth",address:"0x90F79bf6EB2c4f870365E785982E1f101E93b906"},david:{name:"david.eth",address:"0x15d34AAf54267DB7D7c367839AAf71A00a2C6A65"},eve:{name:"eve.eth",address:"0x9965507D1a55bcC2695C58ba16FB37d819B0A4dc"}};LL0=WU,TL0=j20});var FL0=()=>{let $=new WeakSet;return(Q,Z)=>{if(Q==="clonedForValidation"||Q==="jurisdiction"||Q==="provider"||Q==="ethersProvider")return;if(Z instanceof Map)return{_dataType:"Map",value:Array.from(Z.entries())};if(typeof Z==="bigint")return{_dataType:"BigInt",value:Z.toString()};if(Z!==null&&typeof Z==="object"&&!Array.isArray(Z)){if($.has(Z))return;$.add(Z)}return Z}},ZJ=($,Q=new WeakSet)=>{if($===null||typeof $!=="object")return $;if(typeof $==="bigint")return{_dataType:"BigInt",value:$.toString()};if($.clonedForValidation!==void 0){let{clonedForValidation:X,...Y}=$;return ZJ(Y,Q)}if($.jurisdiction!==void 0){let{jurisdiction:X,...Y}=$;return ZJ(Y,Q)}if($.provider!==void 0){let{provider:X,...Y}=$;return ZJ(Y,Q)}if(Q.has($))return;if(Q.add($),$ instanceof Map)return{_dataType:"Map",value:Array.from($.entries()).map(([Y,z])=>[ZJ(Y,Q),ZJ(z,Q)])};if(Array.isArray($))return $.map((X)=>ZJ(X,Q));let Z={};for(let X of Object.keys($)){if(X==="clonedForValidation"||X==="jurisdiction"||X==="provider"||X==="ethersProvider")continue;Z[X]=ZJ($[X],Q)}return Z},AL0=($,Q)=>{if(typeof Q==="object"&&Q!==null){if(Q._dataType==="Map")return new Map(Q.value);if(Q._dataType==="BigInt")return BigInt(Q.value)}return Q},KU=($)=>{let Q=$?.eReplicas||$?.replicas;if(Q){for(let[Z,X]of Q.entries())if(X&&X.state&&typeof X.state.lastFinalizedJHeight!=="number")console.error(`\uD83D\uDCA5 CRITICAL: Invalid jBlock for ${Z.slice(0,20)}... - auto-fixing to 0`),X.state.lastFinalizedJHeight=0}{let Z=ZJ($);return Buffer.from(JSON.stringify(Z,FL0()))}},hq=($)=>{{let Q=JSON.parse($.toString(),AL0),Z=Q?.eReplicas||Q?.replicas;if(Z){for(let[X,Y]of Z.entries())if(Y&&Y.state){if(typeof Y.state.lastFinalizedJHeight!=="number"){let J=Number(Q.height)||0;console.warn(` jBlock missing for replica ${X}, using height ${J} as fallback`),Y.state.lastFinalizedJHeight=J}}}return Q}};var SL=()=>{};var wL0=async($,Q)=>{if(!$)return;try{await $.put(`profile:${Q.entityId}`,KU(Q)),await BL0($,Q.name,Q.entityId),console.log(`\uD83D\uDCDD Stored profile for ${Q.name} (${U4(Q.entityId)})`)}catch{}},fL=async($,Q)=>{if(!$)return null;try{let Z=await $.get(`profile:${Q}`);return hq(Z)}catch(Z){return null}},BL0=async($,Q,Z)=>{try{let X={};try{let Y=await $.get("name-index");X=hq(Y)}catch{}X[Q.toLowerCase()]=Z,await $.put("name-index",KU(X))}catch(X){console.error("Error updating name index:",X)}},C20=async($,Q,Z=10)=>{if(!$||!Q.trim())return[];try{let X=await $.get("name-index"),Y=hq(X),z=Q.toLowerCase(),J=[];for(let[q,W]of Object.entries(Y))if(q.includes(z)){let G=0;if(q.startsWith(z))G=1;else if(q.includes(z))G=0.7;let U=await fL($,W),D=U?.avatar||$J(W);J.push({entityId:W,name:U?.name||U4(W),avatar:D,relevance:G})}return J.sort((q,W)=>{if(q.relevance!==W.relevance)return W.relevance-q.relevance;return q.name.localeCompare(W.name)}),J.slice(0,Z)}catch(X){return console.error("Error searching entity names:",X),[]}},L20=($)=>{return{type:"profile-update",data:$}},T20=async($,Q,Z,X,Y)=>{console.log(`\uD83C\uDFF7 processProfileUpdate called for ${Q} with updates:`,Z);try{let z=await fL($,Q);if(!z)z={entityId:Q,name:U4(Q),lastUpdated:Y?.timestamp??0,hankoSignature:X};if(Z.name!==void 0)z.name=Z.name;if(Z.avatar!==void 0)z.avatar=Z.avatar;if(Z.bio!==void 0)z.bio=Z.bio;if(Z.website!==void 0)z.website=Z.website;if(z.lastUpdated=Y?.timestamp??0,z.hankoSignature=X,Y?.gossip?.announce)try{Y.gossip.announce({entityId:Q,runtimeId:Y.runtimeId,capabilities:[],publicAccounts:[],hubs:[],metadata:{name:z.name,avatar:z.avatar,bio:z.bio,website:z.website,lastUpdated:z.lastUpdated,hankoSignature:z.hankoSignature}}),console.log(`\uD83D\uDCE1 Synced profile update to gossip: ${Q}`)}catch(J){console.error(` Failed to sync profile to gossip layer for ${Q}:`,J)}await wL0($,z),console.log(` Updated profile for ${z.name} (${U4(Q)})`)}catch(z){console.error("Error processing profile update:",z)}},F20=async($,Q)=>{return(await fL($,Q))?.name||U4(Q)},A20=async($,Q)=>{let Z=await fL($,Q);return{name:Z?.name||U4(Q),avatar:Z?.avatar||$J(Q)}};var Nx=p(()=>{SL();B8()});function bL($){let{tick:Q,pmin:Z,pmax:X,maxOrders:Y}=$;if(Q<=0)throw Error("tick must be positive");if(X<=Z)throw Error("pmax must be > pmin");let z=Math.floor((X-Z)/Q)+1;if(z<=0)throw Error("invalid price grid");let J=Math.ceil(z/32),q=new Int32Array(Y);for(let W=0;W<Y-1;W++)q[W]=W+1;return q[Y-1]=-1,{params:$,levels:z,orderPriceIdx:new Int32Array(Y).fill(-1),orderQtyLots:new Uint32Array(Y),orderOwnerIdx:new Uint32Array(Y),orderSide:new Uint8Array(Y),orderPrev:new Int32Array(Y).fill(-1),orderNext:q,orderActive:new Uint8Array(Y),owners:[],orderIds:[],orderIdToIdx:new Map,levelHeadBid:new Int32Array(z).fill(-1),levelTailBid:new Int32Array(z).fill(-1),levelHeadAsk:new Int32Array(z).fill(-1),levelTailAsk:new Int32Array(z).fill(-1),bitmapBid:new Uint32Array(J),bitmapAsk:new Uint32Array(J),bestBidIdx:-1,bestAskIdx:-1,freeHead:0,tradeCount:0,tradeQtySum:0n,eventHash:0n}}function IL0($){return{orderPriceIdx:$.orderPriceIdx.slice(),orderQtyLots:$.orderQtyLots.slice(),orderOwnerIdx:$.orderOwnerIdx.slice(),orderSide:$.orderSide.slice(),orderPrev:$.orderPrev.slice(),orderNext:$.orderNext.slice(),orderActive:$.orderActive.slice(),owners:[...$.owners],orderIds:[...$.orderIds],orderIdToIdx:new Map($.orderIdToIdx),levelHeadBid:$.levelHeadBid.slice(),levelTailBid:$.levelTailBid.slice(),levelHeadAsk:$.levelHeadAsk.slice(),levelTailAsk:$.levelTailAsk.slice(),bitmapBid:$.bitmapBid.slice(),bitmapAsk:$.bitmapAsk.slice(),bestBidIdx:$.bestBidIdx,bestAskIdx:$.bestAskIdx,freeHead:$.freeHead,tradeCount:$.tradeCount,tradeQtySum:$.tradeQtySum,eventHash:$.eventHash}}function kL($,Q,Z){if(Z<0)Z=0;for(let X=Z;X<Q;){let Y=X/32|0,z=Y*32,J=$[Y];if(J){let q=X-z;if(J>>>=q,J)return z+q+_L0(J)}X=z+32}return-1}function xL($,Q){for(let Z=Q;Z>=0;){let X=Z/32|0,Y=X*32,z=$[X];if(z){let J=Z-Y,q=J===31?4294967295:(1<<J+1)-1;if(z&=q>>>0,z)return Y+(31-Math.clz32(z))}Z=Y-1}return-1}function ZM($,Q){let Z=[],X=IL0($),{params:Y,levels:z}=$,{tick:J,pmin:q,pmax:W,stpPolicy:G}=Y;function U(_){let f=X.owners.indexOf(_);if(f===-1)f=X.owners.length,X.owners.push(_);return f}function D(){let _=X.freeHead;if(_===-1)throw Error("Out of order slots");return X.freeHead=X.orderNext[_],_}function P(_){X.orderActive[_]=0,X.orderPriceIdx[_]=-1,X.orderQtyLots[_]=0,X.orderNext[_]=X.freeHead,X.freeHead=_}function H(_,f){let x=_===0?X.bitmapBid:X.bitmapAsk,g=f/32|0,h=f&31;x[g]=(x[g]|1<<h)>>>0}function N(_,f){let x=_===0?X.bitmapBid:X.bitmapAsk,g=f/32|0,h=f&31;x[g]=(x[g]&~(1<<h))>>>0}function C(_,f,x){let g=_===0?X.levelHeadBid:X.levelHeadAsk,h=_===0?X.levelTailBid:X.levelTailAsk;if(g[f]===-1){if(g[f]=x,h[f]=x,X.orderPrev[x]=-1,X.orderNext[x]=-1,H(_,f),_===0){if(X.bestBidIdx===-1||f>X.bestBidIdx)X.bestBidIdx=f}else if(X.bestAskIdx===-1||f<X.bestAskIdx)X.bestAskIdx=f}else{let v=h[f];X.orderNext[v]=x,X.orderPrev[x]=v,X.orderNext[x]=-1,h[f]=x}}function L(_,f,x){let g=_===0?X.levelHeadBid:X.levelHeadAsk,h=_===0?X.levelTailBid:X.levelTailAsk,v=X.orderPrev[x],b=X.orderNext[x];if(v!==-1)X.orderNext[v]=b;else g[f]=b;if(b!==-1)X.orderPrev[b]=v;else h[f]=v;if(X.orderPrev[x]=-1,X.orderNext[x]=-1,g[f]===-1){if(N(_,f),_===0&&X.bestBidIdx===f)X.bestBidIdx=xL(X.bitmapBid,f-1);if(_===1&&X.bestAskIdx===f)X.bestAskIdx=kL(X.bitmapAsk,z,f+1)}}function B(_,f,x){X.eventHash=X.eventHash*EL0+BigInt(_*2654435761>>>0^f^x<<7)&0x1fffffffffffffn}function E(_,f,x,g,h,v){let b=_===0?X.levelHeadAsk:X.levelHeadBid,m=_===0?1:0;while(x>0){let K=b[f];if(K===-1)return x;if(!X.orderActive[K]){L(m,f,K),P(K);continue}let M=X.orderOwnerIdx[K],j=X.owners[M],O=X.owners[g],R=X.orderIds[K];if(M===g){if(G===1)return Z.push({type:"REJECT",orderId:h,ownerId:O,reason:"STP cancel taker"}),0;if(G===2){let V=Math.min(X.orderQtyLots[K],x);if(X.orderQtyLots[K]=X.orderQtyLots[K]-V,x-=V,Z.push({type:"REDUCED",orderId:R,ownerId:j,delta:-V,remain:X.orderQtyLots[K]}),X.orderQtyLots[K]===0)L(m,f,K),P(K);continue}}let F=X.orderQtyLots[K],A=Math.min(F,x),T=q+f*J;if(X.orderQtyLots[K]=X.orderQtyLots[K]-A,x-=A,X.tradeCount++,X.tradeQtySum+=BigInt(A),B(3,T,A),Z.push({type:"TRADE",price:T,qty:A,makerOwnerId:j,takerOwnerId:O,makerOrderId:R,takerOrderId:h,makerQtyBefore:F,takerQtyTotal:v}),X.orderQtyLots[K]===0)L(m,f,K),P(K),X.orderIdToIdx.delete(R);else Z.push({type:"REDUCED",orderId:R,ownerId:j,delta:-A,remain:X.orderQtyLots[K]})}return x}if(Q.kind===0){let{ownerId:_,orderId:f,side:x,tif:g,postOnly:h,priceTicks:v,qtyLots:b,minFillRatio:m=0}=Q;if(b<=0||b>4294967295)return Z.push({type:"REJECT",orderId:f,ownerId:_,reason:"qty out of range"}),{state:$,events:Z};if(m<0||m>65535)return Z.push({type:"REJECT",orderId:f,ownerId:_,reason:"minFillRatio must be 0-65535"}),{state:$,events:Z};let K=Math.floor((v-q)/J);if(K<0||K>=z)return Z.push({type:"REJECT",orderId:f,ownerId:_,reason:"price out of range"}),{state:$,events:Z};if(X.orderIdToIdx.has(f))return Z.push({type:"REJECT",orderId:f,ownerId:_,reason:"duplicate orderId"}),{state:$,events:Z};let M=U(_),j=b;if(h){if(x===0&&X.bestAskIdx!==-1&&X.bestAskIdx<=K)return Z.push({type:"REJECT",orderId:f,ownerId:_,reason:"postOnly would cross"}),{state:$,events:Z};if(x===1&&X.bestBidIdx!==-1&&X.bestBidIdx>=K)return Z.push({type:"REJECT",orderId:f,ownerId:_,reason:"postOnly would cross"}),{state:$,events:Z}}let O=b;if(x===0){let F=X.bestAskIdx;while(O>0&&F!==-1&&F<=K){let A=X.levelHeadAsk[F];while(A!==-1&&O>0){if(G>0&&X.orderOwnerIdx[A]===M){A=X.orderNext[A];continue}let T=X.orderQtyLots[A];O-=Math.min(T,O),A=X.orderNext[A]}if(O>0)F=kL(X.bitmapAsk,z,F+1)}}else{let F=X.bestBidIdx;while(O>0&&F!==-1&&F>=K){let A=X.levelHeadBid[F];while(A!==-1&&O>0){if(G>0&&X.orderOwnerIdx[A]===M){A=X.orderNext[A];continue}let T=X.orderQtyLots[A];O-=Math.min(T,O),A=X.orderNext[A]}if(O>0)F=xL(X.bitmapBid,F-1)}}if(g===2&&O>0)return Z.push({type:"REJECT",orderId:f,ownerId:_,reason:"FOK cannot fill entirely"}),{state:$,events:Z};if(m>0&&(g===1||g===2)){let F=b-O,A=Math.floor(F/b*65535);if(A<m)return Z.push({type:"REJECT",orderId:f,ownerId:_,reason:`minFillRatio not met: ${A} < ${m} (pre-check)`}),{state:$,events:Z}}if(x===0){while(j>0&&X.bestAskIdx!==-1&&X.bestAskIdx<=K)if(j=E(0,X.bestAskIdx,j,M,f,b),X.bestAskIdx!==-1&&X.levelHeadAsk[X.bestAskIdx]===-1)X.bestAskIdx=kL(X.bitmapAsk,z,X.bestAskIdx+1)}else while(j>0&&X.bestBidIdx!==-1&&X.bestBidIdx>=K)if(j=E(1,X.bestBidIdx,j,M,f,b),X.bestBidIdx!==-1&&X.levelHeadBid[X.bestBidIdx]===-1)X.bestBidIdx=xL(X.bitmapBid,X.bestBidIdx-1);let R=b-j;if(j>0)if(g===1||g===2){if(R===0)Z.push({type:"REJECT",orderId:f,ownerId:_,reason:"no fill"})}else{let F=D();X.orderPriceIdx[F]=K,X.orderQtyLots[F]=j,X.orderOwnerIdx[F]=M,X.orderSide[F]=x,X.orderActive[F]=1,X.orderIds[F]=f,X.orderIdToIdx.set(f,F),C(x,K,F),Z.push({type:"ACK",orderId:f,ownerId:_}),B(1,M,j)}}else if(Q.kind===1){let{ownerId:_,orderId:f}=Q,x=X.orderIdToIdx.get(f);if(x===void 0||!X.orderActive[x])return Z.push({type:"REJECT",orderId:f,ownerId:_,reason:"not found"}),{state:$,events:Z};if(X.owners[X.orderOwnerIdx[x]]!==_)return Z.push({type:"REJECT",orderId:f,ownerId:_,reason:"not owner"}),{state:$,events:Z};let g=X.orderPriceIdx[x],h=X.orderSide[x];L(h,g,x),P(x),X.orderIdToIdx.delete(f),Z.push({type:"CANCELED",orderId:f,ownerId:_}),B(5,X.orderOwnerIdx[x],0)}else if(Q.kind===2){let{ownerId:_,orderId:f,newPriceTicks:x,qtyDeltaLots:g}=Q,h=X.orderIdToIdx.get(f);if(h===void 0||!X.orderActive[h])return Z.push({type:"REJECT",orderId:f,ownerId:_,reason:"not found"}),{state:$,events:Z};if(X.owners[X.orderOwnerIdx[h]]!==_)return Z.push({type:"REJECT",orderId:f,ownerId:_,reason:"not owner"}),{state:$,events:Z};let v=X.orderSide[h],b=X.orderPriceIdx[h],K=X.orderQtyLots[h]+g;if(K<=0)L(v,b,h),P(h),X.orderIdToIdx.delete(f),Z.push({type:"CANCELED",orderId:f,ownerId:_});else if(x!==null){let M=Math.floor((x-q)/J);if(M<0||M>=z)return Z.push({type:"REJECT",orderId:f,ownerId:_,reason:"new price out of range"}),{state:$,events:Z};L(v,b,h),P(h),X.orderIdToIdx.delete(f),Z.push({type:"CANCELED",orderId:f,ownerId:_});let j=X.orderOwnerIdx[h],O=K;if(v===0){while(O>0&&X.bestAskIdx!==-1&&X.bestAskIdx<=M)if(O=E(0,X.bestAskIdx,O,j,f,K),X.bestAskIdx!==-1&&X.levelHeadAsk[X.bestAskIdx]===-1)X.bestAskIdx=kL(X.bitmapAsk,z,X.bestAskIdx+1)}else while(O>0&&X.bestBidIdx!==-1&&X.bestBidIdx>=M)if(O=E(1,X.bestBidIdx,O,j,f,K),X.bestBidIdx!==-1&&X.levelHeadBid[X.bestBidIdx]===-1)X.bestBidIdx=xL(X.bitmapBid,X.bestBidIdx-1);if(O>0){let R=D();X.orderPriceIdx[R]=M,X.orderQtyLots[R]=O,X.orderOwnerIdx[R]=j,X.orderSide[R]=v,X.orderActive[R]=1,X.orderIds[R]=f,X.orderIdToIdx.set(f,R),C(v,M,R),Z.push({type:"ACK",orderId:f,ownerId:_}),B(1,j,O)}}else X.orderQtyLots[h]=K,Z.push({type:"REDUCED",orderId:f,ownerId:_,delta:g,remain:K})}return{state:{params:$.params,levels:$.levels,orderPriceIdx:X.orderPriceIdx,orderQtyLots:X.orderQtyLots,orderOwnerIdx:X.orderOwnerIdx,orderSide:X.orderSide,orderPrev:X.orderPrev,orderNext:X.orderNext,orderActive:X.orderActive,owners:X.owners,orderIds:X.orderIds,orderIdToIdx:X.orderIdToIdx,levelHeadBid:X.levelHeadBid,levelTailBid:X.levelTailBid,levelHeadAsk:X.levelHeadAsk,levelTailAsk:X.levelTailAsk,bitmapBid:X.bitmapBid,bitmapAsk:X.bitmapAsk,bestBidIdx:X.bestBidIdx,bestAskIdx:X.bestAskIdx,freeHead:X.freeHead,tradeCount:X.tradeCount,tradeQtySum:X.tradeQtySum,eventHash:X.eventHash},events:Z}}function Cx($){if($.bestBidIdx===-1)return null;return $.params.pmin+$.bestBidIdx*$.params.tick}function XM($){if($.bestAskIdx===-1)return null;return $.params.pmin+$.bestAskIdx*$.params.tick}function w20($){let Q=Cx($),Z=XM($);if(Q===null||Z===null)return null;return Z-Q}function B20($){let{bestBidIdx:Q,bestAskIdx:Z}=$,X=`${$.eventHash.toString(16)}|${$.tradeCount}|${$.tradeQtySum}|${Q}|${Z}`,Y=0n;for(let z=0;z<X.length;z++)Y=Y*31n+BigInt(X.charCodeAt(z))&0xffffffffffffffffn;return Y.toString(16).padStart(16,"0")}function SL0($,Q=10,Z=10,X=40){let{params:{pmin:Y,tick:z},levelHeadBid:J,levelHeadAsk:q,orderQtyLots:W,orderOwnerIdx:G,orderNext:U,orderActive:D,owners:P,bestBidIdx:H,bestAskIdx:N}=$,C=[],L="\x1B[1m",B="\x1B[2m",E="\x1B[0m",I="\x1B[32m",_="\x1B[31m",f=(K,M)=>K.length>=M?K:" ".repeat(M-K.length)+K,x=(K)=>{for(let M=K;M>=0;M--)if(J[M]!==-1)return M;return-1},g=(K)=>{for(let M=K;M<$.levels;M++)if(q[M]!==-1)return M;return-1},h=[],v=H;while(v!==-1&&h.length<Q){let K=J[v],M=[],j=0;while(K!==-1&&j<Z){if(D[K]){let O=P[G[K]]?.slice(-4)||"?";M.push(`${W[K]}@${O}`),j++}K=U[K]}if(M.length)h.push({px:Y+v*z,orders:M.join(",")});v=x(v-1)}let b=[],m=N;while(m!==-1&&b.length<Q){let K=q[m],M=[],j=0;while(K!==-1&&j<Z){if(D[K]){let O=P[G[K]]?.slice(-4)||"?";M.push(`${W[K]}@${O}`),j++}K=U[K]}if(M.length)b.push({px:Y+m*z,orders:M.join(",")});m=g(m+1)}C.push("\x1B[1m     BID (qty@owner)      |      ASK (qty@owner)     \x1B[0m"),C.push("\x1B[2m  PX      ORDERS          |   PX      ORDERS         \x1B[0m");for(let K=0;K<Q;K++){let M=h[K],j=b[K],O=M?f(String(M.px),6):"      ",R=j?f(String(j.px),6):"      ",F=M?f(M.orders.slice(0,X),X):" ".repeat(X),A=j?f(j.orders.slice(0,X),X):" ".repeat(X);C.push(`\x1B[32m${O} ${F}\x1B[0m | \x1B[31m${R} ${A}\x1B[0m`)}return C.join(`
`)}var QM=65535,EL0=0x1_0000_01n,_L0=($)=>Math.clz32(($&-$)>>>0)^31;function Lx($,Q){let Z=Math.min($,Q),X=Math.max($,Q);return{base:Z,quote:X,pairId:`${Z}/${X}`}}function YM($,Q){return $<Q?1:0}function fL0($,Q){if(Q>=QM)return $;if(Q<=0)return 0n;return $*BigInt(Q)/BigInt(QM)}function kL0($){return $.makerBps+$.takerBps+$.hubBps+$.makerReferrerBps+$.takerReferrerBps===Tx}function bL0($,Q){if($<=0n)return{totalSpread:0n,makerBonus:0n,takerRebate:0n,hubRevenue:0n,makerReferrerFee:0n,takerReferrerFee:0n};let Z=BigInt(Tx),X=$*BigInt(Q.makerBps)/Z,Y=$*BigInt(Q.takerBps)/Z,z=$*BigInt(Q.makerReferrerBps)/Z,J=$*BigInt(Q.takerReferrerBps)/Z,q=$-X-Y-z-J;return{totalSpread:$,makerBonus:X,takerRebate:Y,hubRevenue:q,makerReferrerFee:z,takerReferrerFee:J}}function Fx($){return{books:new Map,referrals:new Map,hubProfile:$}}var Tx=1e4,xL0;var E20=p(()=>{xL0={makerBps:2000,takerBps:2000,hubBps:2000,makerReferrerBps:2000,takerReferrerBps:2000}});var GU={};x1(GU,{validateSpreadDistribution:()=>kL0,renderAscii:()=>SL0,getSpread:()=>w20,getBestBid:()=>Cx,getBestAsk:()=>XM,deriveSide:()=>YM,createOrderbookExtState:()=>Fx,createBook:()=>bL,computeBookHash:()=>B20,canonicalPair:()=>Lx,calculateSpreadAllocation:()=>bL0,applyFillRatio:()=>fL0,applyCommand:()=>ZM,MAX_FILL_RATIO:()=>QM,DEFAULT_SPREAD_DISTRIBUTION:()=>xL0,BPS_BASE:()=>Tx});var rZ=p(()=>{E20()});function XJ($,Q="unknown"){if(!$||typeof $!=="object")throw Error(`Invalid Delta object from ${Q}: ${$}`);let Z=$,X=[];if(typeof Z.tokenId!=="number"||!Number.isInteger(Z.tokenId)||Z.tokenId<0)X.push(`tokenId must be non-negative integer, got: ${Z.tokenId}`);let Y=["collateral","ondelta","offdelta","leftCreditLimit","rightCreditLimit","leftAllowance","rightAllowance"];for(let z of Y){let J=Z[z];if(J===null||J===void 0)X.push(`${z} cannot be null/undefined, got: ${J}`);else if(typeof J!=="bigint")if(typeof J==="string"&&/^-?\d+n?$/.test(J))try{Z[z]=BigInt(J.replace(/n$/,""))}catch(q){X.push(`${z} invalid BigInt string: ${J}`)}else X.push(`${z} must be BigInt, got: ${typeof J} (${J})`)}if(X.length>0)throw Error(`Delta validation failed from ${Q}:
${X.join(`
`)}`);return{tokenId:Z.tokenId,collateral:Z.collateral,ondelta:Z.ondelta,offdelta:Z.offdelta,leftCreditLimit:Z.leftCreditLimit,rightCreditLimit:Z.rightCreditLimit,leftAllowance:Z.leftAllowance,rightAllowance:Z.rightAllowance}}function _20($,Q="unknown"){if(!$)return console.warn(`No deltas provided from ${Q}, returning empty Map`),new Map;let Z=new Map;if($ instanceof Map)for(let[X,Y]of $.entries())try{let z=XJ(Y,`${Q}.Map[${X}]`);Z.set(X,z)}catch(z){console.error(`Skipping invalid delta for token ${X}:`,z)}else if(typeof $==="object")for(let[X,Y]of Object.entries($)){let z=parseInt(X,10);if(isNaN(z)){console.error(`Invalid tokenId: ${X}`);continue}try{let J=XJ(Y,`${Q}.Object[${z}]`);Z.set(z,J)}catch(J){console.error(`Skipping invalid delta for token ${z}:`,J)}}else return console.error(`Invalid deltas format from ${Q}:`,typeof $),new Map;return console.log(` Validated ${Z.size} deltas from ${Q}`),Z}function mq($){return{tokenId:$,collateral:0n,ondelta:0n,offdelta:0n,leftCreditLimit:0n,rightCreditLimit:0n,leftAllowance:0n,rightAllowance:0n,leftHtlcHold:0n,rightHtlcHold:0n,leftSwapHold:0n,rightSwapHold:0n}}function S20($){try{return XJ($,"type-guard"),!0}catch{return!1}}function Bx($){if(!$||typeof $!=="object")throw Error("FINANCIAL-SAFETY: EntityInput is null/undefined or not an object");let Q=$;if(!Q.entityId||typeof Q.entityId!=="string")throw Error("FINANCIAL-SAFETY: entityId is missing or invalid - financial routing corruption detected");if(!Q.signerId||typeof Q.signerId!=="string")throw Error("FINANCIAL-SAFETY: signerId is missing or invalid - payment routing will fail");if(!Q.entityTxs&&!Q.proposedFrame&&!Q.hashPrecommits)throw Error("FINANCIAL-SAFETY: entityTxs, proposedFrame, or hashPrecommits required");if(Q.entityTxs&&!Array.isArray(Q.entityTxs))throw Error("FINANCIAL-SAFETY: entityTxs must be array");return Q}function f20($){if(!$||typeof $!=="object")throw Error("FINANCIAL-SAFETY: EntityOutput is null/undefined or not an object");let Q=$;if(!Q.entityId||typeof Q.entityId!=="string")throw Error("FINANCIAL-SAFETY: EntityOutput entityId is missing - routing corruption");if(!Q.signerId||typeof Q.signerId!=="string")throw Error("FINANCIAL-SAFETY: EntityOutput signerId is missing - routing corruption");return Q}function I20($,Q){if(typeof $!=="string"||$.length===0)throw new JM(`${Q} must be a non-empty string`,$);return $}function Ax($,Q){if(typeof $!=="number"||!Number.isFinite($))throw new JM(`${Q} must be a finite number`,$);return $}function k20($,Q){if(!$||typeof $!=="object"||Array.isArray($))throw new JM(`${Q} must be a non-null object`,$);return $}function wx($,Q){if(!Array.isArray($))throw new JM(`${Q} must be an array`,$);return $}function x20($,Q="AccountFrame"){let Z=k20($,Q),X={height:Ax(Z.height,`${Q}.height`),timestamp:Ax(Z.timestamp,`${Q}.timestamp`),jHeight:Ax(Z.jHeight,`${Q}.jHeight`),accountTxs:wx(Z.accountTxs,`${Q}.accountTxs`),prevFrameHash:I20(Z.prevFrameHash,`${Q}.prevFrameHash`),stateHash:I20(Z.stateHash,`${Q}.stateHash`),tokenIds:wx(Z.tokenIds||[],`${Q}.tokenIds`),deltas:wx(Z.deltas||[],`${Q}.deltas`),...typeof Z.byLeft==="boolean"?{byLeft:Z.byLeft}:{},...Array.isArray(Z.fullDeltaStates)?{fullDeltaStates:Z.fullDeltaStates.map((Y)=>({...Y}))}:{}};if(X.stateHash.length===0)throw new aZ("AccountFrame.stateHash cannot be empty");if(X.timestamp<=0)throw new aZ("AccountFrame.timestamp must be positive",{timestamp:X.timestamp});return X}function zM($,Q="EntityState"){let Z=k20($,Q);if(!Z.entityId||typeof Z.entityId!=="string")throw new aZ(`${Q}.entityId must be a string`);if(typeof Z.height!=="number")throw new aZ(`${Q}.height must be a number`);if(typeof Z.timestamp!=="number")throw new aZ(`${Q}.timestamp must be a number`);if(!(Z.reserves instanceof Map))throw new aZ(`${Q}.reserves must be a Map`);if(!(Z.accounts instanceof Map))throw new aZ(`${Q}.accounts must be a Map`);for(let[X,Y]of Z.reserves.entries())if(typeof Y!=="bigint")throw new aZ(`Reserve amount for token ${X} must be bigint`,{tokenId:X,amount:Y});return Z}var aZ,JM;var YJ=p(()=>{h8();aZ=class aZ extends Error{constructor($,Q){super(`\uD83D\uDEA8 FINANCIAL-SAFETY VIOLATION: ${$}`);if(this.name="FinancialDataCorruptionError",Q)this.message+=`
Context: ${h1(Q)}`}};JM=class JM extends Error{constructor($,Q){super(`\uD83D\uDEE1 TYPE-SAFETY VIOLATION: ${$}`);if(this.name="TypeSafetyViolationError",Q!==void 0)this.message+=`
Received: ${typeof Q} = ${String(Q)}`}}});function qM($,Q){if(Q===null||Q===void 0)return`0 ${d3($).symbol}`;let Z=d3($);return`${FX(Q,Z.decimals)} ${Z.symbol}`}function b20($,Q){let Z=d3($);return uJ(Q,Z.decimals)}function v20($,Q,Z){if(Q===Z)return $;if(Q>Z){let X=10n**BigInt(Q-Z);return $/X}else{let X=10n**BigInt(Z-Q);return $*X}}function vL($,Q){if($===null||$===void 0||Q===null||Q===void 0)return 0;if(Q===0n)return 0;return Number($*100n/Q)}function Ex($){if($.amount===null||$.amount===void 0)return`0 ${$.symbol}`;return`${FX($.amount,$.decimals)} ${$.symbol}`}var y20,g20;var WM=p(()=>{A6();y9();y20={add:($,Q)=>{return($??0n)+(Q??0n)},subtract:($,Q)=>{let Z=$??0n,X=Q??0n;if(X>Z)throw Error(`Underflow: ${Z} - ${X}`);return Z-X},multiply:($,Q)=>{return($??0n)*(Q??0n)},divide:($,Q)=>{let Z=$??0n,X=Q??1n;if(X===0n)throw Error("Division by zero");return{quotient:Z/X,remainder:Z%X}},compare:($,Q)=>{let Z=$??0n,X=Q??0n;if(Z<X)return-1;if(Z>X)return 1;return 0},abs:($)=>{let Q=$??0n;return Q<0n?-Q:Q},min:($,Q)=>{let Z=$??0n,X=Q??0n;return Z<X?Z:X},max:($,Q)=>{let Z=$??0n,X=Q??0n;return Z>X?Z:X}},g20={ZERO:0n,ONE:1n,WEI_PER_ETH:10n**18n,USDC_DECIMALS:6,ETH_DECIMALS:18,DEFAULT_DECIMALS:18}});var yL={};x1(yL,{isLeft:()=>E5,getTokenInfo:()=>d3,getDefaultCreditLimit:()=>t7,formatTokenAmount:()=>qM,deriveDelta:()=>$7,createDemoDelta:()=>Ix,calculatePercentage:()=>vL,TOKEN_REGISTRY:()=>h20});function E5($,Q){return K5($,Q)}function $7($,Q){XJ($,"deriveDelta");let Z=(V)=>V<0n?0n:V,X=$.ondelta+$.offdelta,Y=Z($.collateral),z=$.leftCreditLimit,J=$.rightCreditLimit,q=X>0n?Z(Y-X):Y,W=X>0n?X>Y?Y:X:0n,G=Z(-X);if(G>z)G=z;let U=Z(X-Y);if(U>J)U=J;let D=Z(z-G),P=Z(J-U),H=X<0n?Z(-X-Y):0n,N=X>0n?Z(X-Y):0n,C=$.rightAllowance,L=$.leftAllowance,B=Y+z+J,E=$.leftHtlcHold||0n,I=$.rightHtlcHold||0n,_=$.leftSwapHold||0n,f=$.rightSwapHold||0n,x=$.leftSettleHold||0n,g=$.rightSettleHold||0n,h=E+_+x,v=I+f+g,b=Z(G+q+P-C),m=Z(U+W+D-L);if(Q)m=Z(m-h),b=Z(b-v);else m=Z(m-v),b=Z(b-h);if(!Q)[q,C,b,W,L,m]=[W,L,m,q,C,b],[z,J]=[J,z],[D,G,U,P]=[P,U,G,D];let K=Number(B),M=Math.floor(Number(z)/K*50),j=Math.floor(Number(Y)/K*50),O=50-M-j,R=Math.floor((Number(X)+Number(z))/K*50),F="-".repeat(M)+"=".repeat(j)+"-".repeat(O),A=Math.max(0,Math.min(R,F.length)),T="["+F.substring(0,A)+"|"+F.substring(A)+"]";if(r9.DEBUG_ACCOUNTS)console.log(` deriveDelta RETURN: isLeft=${Q}, inCap=${b}, outCap=${m}, SUM=${b+m}`);return{delta:X,collateral:Y,inCollateral:q,outCollateral:W,inOwnCredit:G,outPeerCredit:U,inAllowance:C,outAllowance:L,totalCapacity:B,ownCreditLimit:z,peerCreditLimit:J,inCapacity:b,outCapacity:m,outOwnCredit:D,inPeerCredit:P,peerCreditUsed:H,ownCreditUsed:N,ascii:T}}function Ix($,Q=1000n,Z=0n){let X=t7($);return XJ({tokenId:$,collateral:Q,ondelta:Z,offdelta:0n,leftCreditLimit:X,rightCreditLimit:X,leftAllowance:0n,rightAllowance:0n},"createDemoDelta")}function d3($){return h20[$]||{symbol:`TKN${$}`,name:`Token ${$}`,decimals:18,color:"#999"}}function t7($){let Q=d3($),Z=BigInt(Q.decimals??18);return vL0*10n**Z}var vL0=0n,h20;var y9=p(()=>{w2();YJ();h8();WM();WM();h20={1:{symbol:"USDC",name:"USD Coin",decimals:18,color:"#2775ca"},2:{symbol:"WETH",name:"Wrapped Ether",decimals:18,color:"#627eea"},3:{symbol:"USDT",name:"Tether USD",decimals:18,color:"#26a17b"}}});function UU($,Q,Z=0){let X=[],Y=[];for(let[J,q]of $.accounts.entries()){let W=new Map,G=!1;for(let[D,P]of q.deltas.entries()){let H=E5(q.proofHeader.fromEntity,q.proofHeader.toEntity),N=$7(P,H);if(W.set(D,{inCapacity:N.inCapacity,outCapacity:N.outCapacity}),N.inCapacity>0n)G=!0}let U={};for(let[D,P]of W.entries())U[D]={inCapacity:P.inCapacity.toString(),outCapacity:P.outCapacity.toString()};if(X.push({counterpartyId:J,tokenCapacities:U}),G)Y.push(J)}return{entityId:$.entityId,capabilities:[],publicAccounts:Y,hubs:[...Y],metadata:{lastUpdated:Z,isHub:!1,routingFeePPM:100,baseFee:0n,board:gL0($),threshold:_x($.config.threshold,1),...Q?{name:Q}:{}},accounts:X}}var _x=($,Q=0)=>{let Z=typeof $==="bigint"?Number($):Number($??Q);if(!Number.isFinite(Z))return Q;if(Z<=0)return 0;return Math.min(65535,Math.floor(Z))},yL0=($)=>`0x${Array.from($).map((Q)=>Q.toString(16).padStart(2,"0")).join("")}`,gL0=($)=>{let Q=$.config.validators.map((Z)=>{let X=_x($.config.shares[Z]??1n,1),Y=rQ(Z),z=Y?yL0(Y):void 0;return{signer:ZO(Z)||Z,weight:X,signerId:Z,...z?{publicKey:z}:{}}});return{threshold:_x($.config.threshold,1),validators:Q}};var gL=p(()=>{y9();H8()});function i6($,Q){let Z=Q===$.leftEntity;return{iAmLeft:Z,from:Z?$.leftEntity:$.rightEntity,to:Z?$.rightEntity:$.leftEntity,counterparty:Z?$.rightEntity:$.leftEntity}}function K1($,Q){if($.messages.push(Q),$.messages.length>hL0)$.messages.shift()}function mL($,Q){for(let Z of Q)K1($,Z)}function pL($,Q,Z,X,Y={},z){if(!X||X.length===0)return;let J={path:Z,...Y};for(let q of X)$.info(Q,q,J,z)}function l3($,Q,Z){let X=null;for(let Y of $.eReplicas.values()){if(Y.entityId!==Q)continue;if(Y.isProposer)return Y.signerId;if(!X)X=Y.state.config.validators[0]||Y.signerId}if($.gossip?.getProfiles){let z=$.gossip.getProfiles().find((J)=>J.entityId===Q)?.metadata?.board;if(Array.isArray(z)&&z.length>0&&z[0])return z[0];if(z&&!Array.isArray(z)&&Array.isArray(z.validators)&&z.validators.length>0){let J=z.validators[0];if(J?.signerId)return J.signerId;if(J?.signer)return J.signer}}if(X)return X;throw Error(`SIGNER_RESOLUTION_FAILED: ${Z} entityId=${Q}`)}function i1($,Q=!1){try{let Z=structuredClone($);if(!Z.entityId||Z.entityId!==$.entityId)Z.entityId=$.entityId;if(typeof Z.lastFinalizedJHeight!=="number")console.error("\uD83D\uDCA5 CLONE-CORRUPTION: structuredClone corrupted lastFinalizedJHeight!"),console.error(`\uD83D\uDCA5   Original: ${$.lastFinalizedJHeight} (${typeof $.lastFinalizedJHeight})`),console.error(`\uD83D\uDCA5   Cloned: ${Z.lastFinalizedJHeight} (${typeof Z.lastFinalizedJHeight})`),Z.lastFinalizedJHeight=$.lastFinalizedJHeight??0;if(Q)for(let X of Z.accounts.values())delete X.clonedForValidation;if($.jBatchState&&!Z.jBatchState)Z.jBatchState={...$.jBatchState,batch:rK($.jBatchState.batch)};return zM(Z,"cloneEntityState.structuredClone")}catch(Z){let X=mL0($,Q);return zM(X,"cloneEntityState.manual")}}function mL0($,Q=!1){return{...$,entityId:$.entityId,nonces:hL($.nonces),messages:pq($.messages),proposals:new Map(Array.from($.proposals.entries()).map(([Z,X])=>[Z,{...X,votes:hL(X.votes)}])),reserves:hL($.reserves),accounts:new Map(Array.from($.accounts.entries()).map(([Z,X])=>[Z,cL(X,Q)])),deferredAccountProposals:hL($.deferredAccountProposals||new Map),accountInputQueue:pq($.accountInputQueue||[]),jBatchState:$.jBatchState?{...$.jBatchState,batch:rK($.jBatchState.batch)}:void 0,lastFinalizedJHeight:$.lastFinalizedJHeight??0,jBlockObservations:pq($.jBlockObservations||[]),jBlockChain:pq($.jBlockChain||[]),htlcRoutes:new Map(Array.from(($.htlcRoutes||new Map).entries()).map(([Z,X])=>[Z,{...X}])),htlcFeesEarned:$.htlcFeesEarned||0n,...$.orderbookExt&&{orderbookExt:pL0($.orderbookExt)},swapBook:new Map(Array.from(($.swapBook||new Map).entries()).map(([Z,X])=>[Z,{...X}])),lockBook:new Map(Array.from(($.lockBook||new Map).entries()).map(([Z,X])=>[Z,{...X}])),pendingSwapFillRatios:new Map(Array.from(($.pendingSwapFillRatios||new Map).entries()))}}function pL0($){if(!$)return;let Q=new Map;for(let[Y,z]of $.books)Q.set(Y,uL0(z));let Z=new Map;if($.referrals)for(let[Y,z]of $.referrals)Z.set(Y,{...z});let X=$.hubProfile?{...$.hubProfile,supportedPairs:$.hubProfile.supportedPairs?[...$.hubProfile.supportedPairs]:[]}:void 0;return{books:Q,referrals:Z,hubProfile:X}}function uL0($){return{...$,orderPriceIdx:$.orderPriceIdx?.slice?.()??$.orderPriceIdx,orderQtyLots:$.orderQtyLots?.slice?.()??$.orderQtyLots,orderOwnerIdx:$.orderOwnerIdx?.slice?.()??$.orderOwnerIdx,orderSide:$.orderSide?.slice?.()??$.orderSide,orderPrev:$.orderPrev?.slice?.()??$.orderPrev,orderNext:$.orderNext?.slice?.()??$.orderNext,orderActive:$.orderActive?.slice?.()??$.orderActive,levelHeadBid:$.levelHeadBid?.slice?.()??$.levelHeadBid,levelTailBid:$.levelTailBid?.slice?.()??$.levelTailBid,levelHeadAsk:$.levelHeadAsk?.slice?.()??$.levelHeadAsk,levelTailAsk:$.levelTailAsk?.slice?.()??$.levelTailAsk,bitmapBid:$.bitmapBid?.slice?.()??$.bitmapBid,bitmapAsk:$.bitmapAsk?.slice?.()??$.bitmapAsk,owners:[...$.owners||[]],orderIds:[...$.orderIds||[]],orderIdToIdx:new Map($.orderIdToIdx||[]),ownerToIdx:new Map($.ownerToIdx||[])}}function cL($,Q=!1){if(Q){let{clonedForValidation:Z,...X}=$;try{return structuredClone(X)}catch{return Sx($,!0)}}try{return structuredClone($)}catch(Z){return console.log(" structuredClone failed, using manual clone"),Sx($,!1)}}function Sx($,Q=!1){let Z={leftEntity:$.leftEntity,rightEntity:$.rightEntity,mempool:[...$.mempool],currentFrame:{...$.currentFrame,tokenIds:[...$.currentFrame.tokenIds],deltas:[...$.currentFrame.deltas]},sentTransitions:$.sentTransitions,ackedTransitions:$.ackedTransitions,deltas:new Map(Array.from($.deltas.entries()).map(([X,Y])=>[X,{...Y}])),locks:new Map(Array.from($.locks.entries()).map(([X,Y])=>[X,{...Y}])),swapOffers:new Map(Array.from($.swapOffers.entries()).map(([X,Y])=>[X,{...Y}])),globalCreditLimits:{...$.globalCreditLimits},currentHeight:$.currentHeight,pendingSignatures:[...$.pendingSignatures],rollbackCount:$.rollbackCount,...$.lastRollbackFrameHash!==void 0&&{lastRollbackFrameHash:$.lastRollbackFrameHash},sendCounter:$.sendCounter,receiveCounter:$.receiveCounter,frameHistory:[...$.frameHistory],proofHeader:{...$.proofHeader},proofBody:{...$.proofBody,tokenIds:[...$.proofBody.tokenIds],deltas:[...$.proofBody.deltas]},disputeConfig:{...$.disputeConfig},leftJObservations:$.leftJObservations.map((X)=>({...X,events:Array.isArray(X.events)?[...X.events]:[]})),rightJObservations:$.rightJObservations.map((X)=>({...X,events:Array.isArray(X.events)?[...X.events]:[]})),jEventChain:$.jEventChain.map((X)=>({...X,events:Array.isArray(X.events)?[...X.events]:[]})),lastFinalizedJHeight:$.lastFinalizedJHeight,onChainSettlementNonce:$.onChainSettlementNonce,pendingWithdrawals:new Map($.pendingWithdrawals),requestedRebalance:new Map($.requestedRebalance)};if($.pendingFrame)Z.pendingFrame={...$.pendingFrame,accountTxs:[...$.pendingFrame.accountTxs],tokenIds:[...$.pendingFrame.tokenIds],deltas:[...$.pendingFrame.deltas]};if($.clonedForValidation&&!Q)Z.clonedForValidation=Sx($.clonedForValidation,!0);if($.hankoSignature)Z.hankoSignature=$.hankoSignature;if($.currentDisputeProofHanko)Z.currentDisputeProofHanko=$.currentDisputeProofHanko;if($.currentDisputeProofCooperativeNonce!==void 0)Z.currentDisputeProofCooperativeNonce=$.currentDisputeProofCooperativeNonce;if($.currentDisputeProofBodyHash)Z.currentDisputeProofBodyHash=$.currentDisputeProofBodyHash;if($.counterpartyDisputeProofHanko)Z.counterpartyDisputeProofHanko=$.counterpartyDisputeProofHanko;if($.counterpartyDisputeProofCooperativeNonce!==void 0)Z.counterpartyDisputeProofCooperativeNonce=$.counterpartyDisputeProofCooperativeNonce;if($.counterpartyDisputeProofBodyHash)Z.counterpartyDisputeProofBodyHash=$.counterpartyDisputeProofBodyHash;if($.disputeProofNoncesByHash)Z.disputeProofNoncesByHash={...$.disputeProofNoncesByHash};if($.disputeProofBodiesByHash)Z.disputeProofBodiesByHash={...$.disputeProofBodiesByHash};if($.currentFrameHanko)Z.currentFrameHanko=$.currentFrameHanko;if($.counterpartyFrameHanko)Z.counterpartyFrameHanko=$.counterpartyFrameHanko;if($.activeDispute)Z.activeDispute={...$.activeDispute};if($.settlementWorkspace)Z.settlementWorkspace={...$.settlementWorkspace,diffs:$.settlementWorkspace.diffs.map((X)=>({...X})),forgiveTokenIds:[...$.settlementWorkspace.forgiveTokenIds],insuranceRegs:$.settlementWorkspace.insuranceRegs.map((X)=>({...X}))};if($.pendingForward)Z.pendingForward={...$.pendingForward,route:[...$.pendingForward.route]};if($.abiProofBody)Z.abiProofBody={...$.abiProofBody};return Z.locks=new Map(Array.from($.locks.entries()).map(([X,Y])=>[X,{...Y}])),Z.swapOffers=new Map(Array.from(($.swapOffers||new Map).entries()).map(([X,Y])=>[X,{...Y}])),Z}var hL0=10,hL=($)=>new Map($),pq=($)=>[...$],uL=($,Q=!1)=>{return{entityId:$.entityId,signerId:$.signerId,state:i1($.state,Q),mempool:pq($.mempool),...$.proposal&&{proposal:{height:$.proposal.height,txs:pq($.proposal.txs),hash:$.proposal.hash,newState:$.proposal.newState,...$.proposal.outputs&&{outputs:[...$.proposal.outputs]},...$.proposal.jOutputs&&{jOutputs:[...$.proposal.jOutputs]},...$.proposal.hashesToSign&&{hashesToSign:$.proposal.hashesToSign.map((Z)=>({...Z}))},...$.proposal.collectedSigs&&{collectedSigs:new Map(Array.from($.proposal.collectedSigs.entries()).map(([Z,X])=>[Z,[...X]]))},...$.proposal.hankos&&{hankos:[...$.proposal.hankos]}}},...$.lockedFrame&&{lockedFrame:{height:$.lockedFrame.height,txs:pq($.lockedFrame.txs),hash:$.lockedFrame.hash,newState:$.lockedFrame.newState,...$.lockedFrame.hashesToSign&&{hashesToSign:$.lockedFrame.hashesToSign.map((Z)=>({...Z}))},...$.lockedFrame.collectedSigs&&{collectedSigs:new Map(Array.from($.lockedFrame.collectedSigs.entries()).map(([Z,X])=>[Z,[...X]]))},...$.lockedFrame.hankos&&{hankos:[...$.lockedFrame.hankos]}}},isProposer:$.isProposer,...$.sentTransitions!==void 0&&{sentTransitions:$.sentTransitions},...$.position&&{position:{...$.position}},...$.validatorComputedState&&{validatorComputedState:i1($.validatorComputedState)}}};var C8=p(()=>{SL();B8();YJ();h8();c6()});function m20($,Q,Z=!0){let{tokenId:X}=Q.data,Y=[];if($.deltas.has(X))return console.warn(` Delta for token ${X} already exists, skipping add_delta`),{success:!0,events:Y};let z={tokenId:X,collateral:0n,ondelta:0n,offdelta:0n,leftCreditLimit:0n,rightCreditLimit:0n,leftAllowance:0n,rightAllowance:0n};$.deltas.set(X,z);let{counterparty:J}=i6($,$.proofHeader.fromEntity);return console.log(` Added delta for token ${X} to account with ${J.slice(-4)}`),Y.push(` Added token ${X} to account`),{success:!0,events:Y}}var p20=p(()=>{C8()});function c20($,Q,Z=!0){let{tokenId:X,amount:Y,side:z}=Q.data,J=[];if(Y<0n)return{success:!1,error:`Credit limit cannot be negative: ${Y}`,events:J};if(Y>u20)return{success:!1,error:`Credit limit exceeds maximum: ${Y} > ${u20}`,events:J};let{counterparty:q}=i6($,$.proofHeader.fromEntity);console.log(`\uD83D\uDCB3 SET-CREDIT-LIMIT HANDLER: tokenId=${X}, amount=${Y.toString()}, side=${z}, counterparty=${q.slice(-4)}`);let W=$.deltas.get(X);if(!W)console.log(`\uD83D\uDCB3 Creating delta for token ${X} (credit extension without collateral)`),W={tokenId:X,collateral:0n,ondelta:0n,offdelta:0n,leftCreditLimit:0n,rightCreditLimit:0n,leftAllowance:0n,rightAllowance:0n},$.deltas.set(X,W),J.push(`\uD83D\uDCCA Created delta for token ${X}`);if(z==="left")W.leftCreditLimit=Y,J.push(`\uD83D\uDCB3 Left entity credit limit set to ${Y.toString()} for token ${X}`);else W.rightCreditLimit=Y,J.push(`\uD83D\uDCB3 Right entity credit limit set to ${Y.toString()} for token ${X}`);return console.log(` Set credit limit for token ${X}: left=${W.leftCreditLimit}, right=${W.rightCreditLimit}`),{success:!0,events:J}}var u20;var d20=p(()=>{C8();w2();u20=G5.MAX_PAYMENT_AMOUNT*1000n});function l20($,Q,Z=!0){let{tokenId:X,amount:Y,route:z,description:J}=Q.data,q=[];if(Y<G5.MIN_PAYMENT_AMOUNT||Y>G5.MAX_PAYMENT_AMOUNT){let g=`Invalid payment amount: ${Y.toString()} (min ${G5.MIN_PAYMENT_AMOUNT.toString()}, max ${G5.MAX_PAYMENT_AMOUNT.toString()})`;return console.error(` DIRECT-PAYMENT: ${g}`),{success:!1,error:g,events:q}}if(z&&z.length>G5.MAX_ROUTE_HOPS){let g=`Route too long: ${z.length} hops (max ${G5.MAX_ROUTE_HOPS})`;return console.error(` DIRECT-PAYMENT: ${g}`),{success:!1,error:g,events:q}}let W=$.deltas.get(X);if(console.log(`\uD83D\uDD0D DIRECT-PAYMENT: accountMachine.deltas.has(${X})=${$.deltas.has(X)}`),W)console.log(`\uD83D\uDD0D DIRECT-PAYMENT: delta.collateral=${W.collateral}, ondelta=${W.ondelta}, offdelta=${W.offdelta}`);if(!W){console.log("\uD83D\uDD0D DIRECT-PAYMENT: Creating NEW delta (collateral will be 0!)");let g=t7(X);W={tokenId:X,collateral:0n,ondelta:0n,offdelta:0n,leftCreditLimit:g,rightCreditLimit:g,leftAllowance:0n,rightAllowance:0n},$.deltas.set(X,W)}let G=K5($.proofHeader.fromEntity,$.proofHeader.toEntity)?$.proofHeader.fromEntity:$.proofHeader.toEntity,U=G===$.proofHeader.fromEntity?$.proofHeader.toEntity:$.proofHeader.fromEntity,D=Q.data.fromEntityId,P=Q.data.toEntityId;if(!D||!P)return console.error(" CONSENSUS-FAILURE: Missing explicit payment direction"),console.error("  AccountTx:",h1(Q)),{success:!1,error:"FATAL: Payment must have explicit fromEntityId/toEntityId",events:q};let H=D===G;console.log(`\uD83D\uDD0D PAYMENT-DEBUG: ${D.slice(-4)}${P.slice(-4)}`),console.log(`   delta: collateral=${W.collateral}, ondelta=${W.ondelta}, offdelta=${W.offdelta}`),console.log(`   senderIsLeft=${H}`);let N=$7(W,H),C=N.collateral>0n,L;if(D!==G&&D!==U)return console.error(" CONSENSUS-FAILURE: Payment entities don't match account"),console.error(`  Account: ${G.slice(-4)}  ${U.slice(-4)}`),console.error(`  Payment: ${D.slice(-4)}  ${P.slice(-4)}`),{success:!1,error:"FATAL: Payment entities must match account entities (no cross-account routing)",events:q};if(H)L=-Y;else L=Y;if(console.log(`\uD83D\uDD0D DELTA-SIGN: senderIsLeft=${H}, amount=${Y}, canonicalDelta=${L}`),Y>N.outCapacity)return{success:!1,error:`Insufficient capacity for sender ${D.slice(-4)}: need ${Y.toString()}, available ${N.outCapacity.toString()}`,events:q};let B=W.ondelta+W.offdelta+L;if(!C)if(H){let g=W.leftCreditLimit;if(-B>g)return{success:!1,error:`Exceeds credit limit from peer: ${(-B).toString()} > ${g.toString()}`,events:q}}else{let g=W.rightCreditLimit;if(B>g)return{success:!1,error:`Exceeds credit limit from peer: ${B.toString()} > ${g.toString()}`,events:q}}let E=W.offdelta;W.offdelta+=L,console.log(`\uD83D\uDD0D OFFDELTA-UPDATE: ${E} + ${L} = ${W.offdelta}`),console.log(`\uD83D\uDD0D NEW-TOTAL: ondelta=${W.ondelta} + offdelta=${W.offdelta} = ${W.ondelta+W.offdelta}`);let{counterparty:I}=i6($,$.proofHeader.fromEntity);if(Z)q.push(`\uD83D\uDCB8 Sent ${Y.toString()} token ${X} to Entity ${I.slice(-4)} ${J?"("+J+")":""}`);else q.push(`\uD83D\uDCB0 Received ${Y.toString()} token ${X} from Entity ${D.slice(-4)} ${J?"("+J+")":""}`);let _=$.currentFrame.tokenIds.indexOf(X),f=W.ondelta+W.offdelta;if(_>=0)$.currentFrame.deltas[_]=f;else $.currentFrame.tokenIds.push(X),$.currentFrame.deltas.push(f);let x=D===$.proofHeader.fromEntity;if(console.log(`\uD83D\uDD0D FORWARD-CHECK: route=${z?`[${z.map((g)=>g.slice(-4)).join(",")}]`:"null"}`),console.log(`\uD83D\uDD0D FORWARD-CHECK: isOutgoing=${x}, paymentFrom=${D.slice(-4)}, proofHeader.from=${$.proofHeader.fromEntity.slice(-4)}`),z&&z.length>0&&!x){console.log(`\uD83D\uDD0D FORWARD-CHECK: Passed first check (route.length=${z.length}, isOutgoing=${x})`);let g=z[0],h=z[z.length-1];if(!g||!h)return console.error(" Empty route in payment - invalid payment routing"),{success:!1,error:"Invalid payment route",events:q};if(console.log(`\uD83D\uDD0D FORWARD-CHECK: currentInRoute=${g.slice(-4)}, proofHeader.from=${$.proofHeader.fromEntity.slice(-4)}, final=${h.slice(-4)}`),console.log(`\uD83D\uDD0D FORWARD-CHECK: Check result: ${g===$.proofHeader.fromEntity&&g!==h}`),g===$.proofHeader.fromEntity&&g!==h){let v=z[1];if(!v)return console.error(" No next hop in route for forwarding"),{success:!1,error:"Invalid route: no next hop",events:q};if(I===v)console.error(` Routing error: received from ${v} but should forward to them`);else q.push(` Forwarding payment to ${h.slice(-4)} via ${z.length-1} more hops`),$.pendingForward={tokenId:X,amount:Y,route:[...z],...J?{description:J}:{}}}}return{success:!0,events:q}}var i20=p(()=>{y9();w2();h8();C8()});function o20($,Q){let{tokenId:Z,collateral:X}=Q.data;return console.error(" SECURITY: Blocked direct reserve_to_collateral tx"),console.error(`   tokenId=${Z}, collateral=${X}`),console.error("   This tx type is DISABLED - use j_event_claim flow instead"),console.error("   See entity-tx/j-events.ts for proper L1bilateral consensus"),{success:!1,events:[],error:"SECURITY: reserve_to_collateral blocked - must use j_event_claim bilateral consensus"}}function n20($,Q,Z=!0){let{tokenId:X,amount:Y,requestId:z}=Q.data,J=[],q=$.deltas.get(X);if(!q)return{success:!1,error:`No delta for token ${X}`,events:J};let W=q.ondelta+q.offdelta,G=W>0n?W:-W,U=q.collateral>G?q.collateral-G:0n;if(Y>U)return{success:!1,error:`Insufficient withdrawable: ${Y} > ${U} (collateral ${q.collateral}, uninsured ${G})`,events:J};if(Z)$.pendingWithdrawals.set(z,{requestId:z,tokenId:X,amount:Y,requestedAt:0,direction:"outgoing",status:"pending"}),J.push(`\uD83D\uDCE4 Withdrawal requested: ${Y} token ${X} (${z.slice(-4)})`);else return $.pendingWithdrawals.set(z,{requestId:z,tokenId:X,amount:Y,requestedAt:0,direction:"incoming",status:"pending"}),J.push(`\uD83D\uDCE5 Withdrawal request received: ${Y} token ${X} (${z.slice(-4)})`),{success:!0,events:J,approvalNeeded:{type:"approve_withdrawal",data:{tokenId:X,amount:Y,requestId:z,approved:!0}}};return{success:!0,events:J}}function r20($,Q){let{tokenId:Z,amount:X,requestId:Y,approved:z}=Q.data,J=[],q=$.pendingWithdrawals.get(Y);if(!q)return{success:!1,error:`Withdrawal request ${Y} not found`,events:J};if(q.tokenId!==Z||q.amount!==X)return{success:!1,error:`Approval mismatch: expected ${q.amount} token ${q.tokenId}, got ${X} token ${Z}`,events:J};if(!z)return q.status="rejected",J.push(` Withdrawal ${Y.slice(-4)} rejected`),{success:!0,events:J};if(q.status="approved",J.push(` Withdrawal ${Y.slice(-4)} approved`),q.direction==="outgoing"){let{counterparty:W}=i6($,$.proofHeader.fromEntity);return{success:!0,events:J,jBatchAction:{type:"collateral_to_reserve",counterpartyId:W,tokenId:Z,amount:X}}}return{success:!0,events:J}}var a20=p(()=>{C8()});function s20($,Q){let{tokenId:Z,amount:X}=Q.data;return $.requestedRebalance.set(Z,X),console.log(`\uD83D\uDD04 Rebalance requested: ${X} token ${Z} (hub will coordinate)`),{success:!0,events:[`\uD83D\uDD04 Requested rebalance: ${X} token ${Z} (hub will convert creditcollateral)`]}}function t20($,Q,Z=!0){let{jBlockNumber:X,tokenId:Y,collateral:z,ondelta:J}=Q.data,q=[],W=$.proofHeader.fromEntity.slice(-4),{counterparty:G}=i6($,$.proofHeader.fromEntity),U=G.slice(-4);console.log(`\uD83D\uDCB0 [3/3] A-MACHINE: ${W}${U} | coll=${z} delta=${J}`);let D=$.deltas.get(Y);if(!D){console.log(`\uD83D\uDD17 J-SYNC: NEW delta token=${Y}`);let L=t7(Y);D={tokenId:Y,collateral:0n,ondelta:0n,offdelta:0n,leftCreditLimit:L,rightCreditLimit:L,leftAllowance:0n,rightAllowance:0n},$.deltas.set(Y,D)}let{collateral:P,ondelta:H}=D;D.collateral=z,D.ondelta=J,console.log(`    Applied: collateral ${P}${D.collateral}, ondelta ${H}${D.ondelta}`),q.push(`\uD83D\uDD17 J-Sync block ${X}: collateral=${z}, ondelta=${J}`);let N=$.currentFrame.tokenIds.indexOf(Y),C=D.ondelta+D.offdelta;if(N>=0)$.currentFrame.deltas[N]=C;else $.currentFrame.tokenIds.push(Y),$.currentFrame.deltas.push(C);return console.log(`   \uD83D\uDCCA Frame delta updated: totalDelta=${C}`),{success:!0,events:q}}var e20=p(()=>{y9();C8()});async function $40($,Q,Z,X,Y,z=!1){console.log("\uD83D\uDD12 handleHtlcLock CALLED");let{lockId:J,hashlock:q,timelock:W,revealBeforeHeight:G,amount:U,tokenId:D,envelope:P}=Q.data,H=[];if(!$.locks)console.log(" Initializing locks Map (should have been initialized at account creation)"),$.locks=new Map;if($.locks.has(J))return{success:!1,error:`Lock ${J} already exists`,events:H};if(W<=BigInt(X))return{success:!1,error:`Timelock ${W} already expired (timestamp)`,events:H};if(G<=Y)return{success:!1,error:`revealBeforeHeight ${G} already passed (current height: ${Y})`,events:H};if(U<G5.MIN_PAYMENT_AMOUNT||U>G5.MAX_PAYMENT_AMOUNT)return{success:!1,error:`Invalid amount: ${U} (min ${G5.MIN_PAYMENT_AMOUNT}, max ${G5.MAX_PAYMENT_AMOUNT})`,events:H};let N=$.deltas.get(D);if(!N){let I=t7(D);N={tokenId:D,collateral:0n,ondelta:0n,offdelta:0n,leftCreditLimit:I,rightCreditLimit:I,leftAllowance:0n,rightAllowance:0n,leftHtlcHold:0n,rightHtlcHold:0n},$.deltas.set(D,N)}if(N.leftHtlcHold===void 0)N.leftHtlcHold=0n;if(N.rightHtlcHold===void 0)N.rightHtlcHold=0n;let C=K5($.proofHeader.fromEntity,$.proofHeader.toEntity)?$.proofHeader.fromEntity:$.proofHeader.toEntity,L=Z?$.proofHeader.fromEntity===C:$.proofHeader.fromEntity!==C,B=$7(N,L);if(U>B.outCapacity)return{success:!1,error:`Insufficient capacity: need ${U}, available ${B.outCapacity}`,events:H};let E={lockId:J,hashlock:q,timelock:W,revealBeforeHeight:G,amount:U,tokenId:D,senderIsLeft:L,createdHeight:$.currentHeight,createdTimestamp:X,...P!==void 0&&{envelope:P}};if(L){if(N.leftHtlcHold+=U,!z)console.log(` Updated leftHtlcHold: ${N.leftHtlcHold}`)}else if(N.rightHtlcHold+=U,!z)console.log(` Updated rightHtlcHold: ${N.rightHtlcHold}`);if(!z)console.log(`\uD83D\uDD12 COMMIT: Adding lock, lockId=${J.slice(0,16)}`),$.locks.set(J,E),console.log(` Lock added to Map: ${J.slice(0,16)}..., locks.size=${$.locks.size}`);else $.locks.set(J,E),console.log(` VALIDATION: Lock added to validation clone (dup check), size=${$.locks.size}`);return H.push(`\uD83D\uDD12 HTLC locked: ${U} token ${D}, expires block ${G}, hash ${q.slice(0,16)}...`),console.log(` handleHtlcLock SUCCESS, returning events: ${H.length}`),{success:!0,events:H}}var Q40=p(()=>{y9();w2();h8()});var KM={};x1(KM,{hashHtlcSecret:()=>JJ,generateLockId:()=>fx,generateHashlock:()=>lL0,calculateHtlcFeeAmount:()=>dL0,calculateHtlcFee:()=>cL0,calculateHopTimelock:()=>kx,calculateHopRevealHeight:()=>xx});function cL0($){let Q=$*f4.FEE_RATE_UBP/f4.FEE_DENOMINATOR,Z=f4.BASE_FEE_USD+Q;if(Z>=$)throw Error(`Fee ${Z} exceeds amount ${$}`);return $-Z}function dL0($){let Q=$*f4.FEE_RATE_UBP/f4.FEE_DENOMINATOR;return f4.BASE_FEE_USD+Q}function fx($,Q,Z,X){return M0.keccak256(M0.toUtf8Bytes(`${$}:${Q}:${Z}:${X}`))}function JJ($){if(!M0.isHexString($,32))throw Error(`HTLC secret must be 32-byte hex (got ${$.length} chars)`);let Q=M0.AbiCoder.defaultAbiCoder();return M0.keccak256(Q.encode(["bytes32"],[$]))}function lL0(){throw Error("generateHashlock() is non-deterministic and BANNED in consensus code. Pass secret/hashlock as tx.data parameters (derived from tx hash or provided by user).")}function kx($,Q,Z){let X=BigInt((Z-Q-1)*f4.MIN_TIMELOCK_DELTA_MS);return $-X}function xx($,Q,Z){return $+(Z-Q)}var zJ=p(()=>{A6();w2()});async function Z40($,Q,Z,X,Y){console.log("\uD83D\uDD13 handleHtlcReveal CALLED");let{lockId:z,secret:J}=Q.data,q=[];console.log(`\uD83D\uDD13 REVEAL: lockId=${z.slice(0,16)}..., locks.size=${$.locks.size}`),console.log(`\uD83D\uDD13 REVEAL: Available lockIds: ${Array.from($.locks.keys()).map((P)=>P.slice(0,16)).join(", ")}`);let W=$.locks.get(z);if(!W)return console.log(`\uD83D\uDD13 REVEAL FAIL: Lock ${z.slice(0,16)}... not found`),{success:!1,error:`Lock ${z} not found`,events:q};if(X>W.revealBeforeHeight)return{success:!1,error:`Lock expired by height: current ${X} > deadline ${W.revealBeforeHeight}`,events:q};if(Y>Number(W.timelock))return{success:!1,error:`Lock expired by time: current ${Y} > deadline ${W.timelock}`,events:q};let G;try{G=JJ(J)}catch(P){return{success:!1,error:`Invalid secret: ${P instanceof Error?P.message:String(P)}`,events:q}}if(G!==W.hashlock)return{success:!1,error:`Hash mismatch: expected ${W.hashlock.slice(0,8)}..., got ${G.slice(0,8)}...`,events:q};let U=$.deltas.get(W.tokenId);if(!U)return{success:!1,error:`Delta ${W.tokenId} not found`,events:q};let D=W.senderIsLeft?-W.amount:W.amount;if(console.log(`\uD83D\uDD13 REVEAL-DELTA: senderIsLeft=${W.senderIsLeft}, amount=${W.amount}, canonicalDelta=${D}`),console.log(`\uD83D\uDD13 REVEAL-DELTA: offdelta BEFORE=${U.offdelta}`),U.offdelta+=D,console.log(`\uD83D\uDD13 REVEAL-DELTA: offdelta AFTER=${U.offdelta}`),W.senderIsLeft){let P=U.leftHtlcHold||0n;if(P<W.amount)console.error(` HTLC hold underflow! leftHtlcHold=${P} < amount=${W.amount}`),U.leftHtlcHold=0n;else U.leftHtlcHold=P-W.amount}else{let P=U.rightHtlcHold||0n;if(P<W.amount)console.error(` HTLC hold underflow! rightHtlcHold=${P} < amount=${W.amount}`),U.rightHtlcHold=0n;else U.rightHtlcHold=P-W.amount}return $.locks.delete(z),q.push(`\uD83D\uDD13 HTLC revealed: ${W.amount} token ${W.tokenId}, secret ${J.slice(0,8)}...`),{success:!0,events:q,secret:J,hashlock:W.hashlock}}var X40=p(()=>{zJ()});async function Y40($,Q,Z,X,Y){let{lockId:z}=Q.data,J=[],q=$.locks.get(z);if(!q)return{success:!1,error:`Lock ${z} not found`,events:J};let W=X>0&&X>q.revealBeforeHeight,G=Y>Number(q.timelock);if(!W&&!G){let D=q.revealBeforeHeight-X,P=Number(q.timelock)-Y;return{success:!1,error:`Lock not expired: ${D} blocks OR ${Math.floor(P/1000)}s remaining`,events:J}}let U=$.deltas.get(q.tokenId);if(!U)return{success:!1,error:`Delta ${q.tokenId} not found`,events:J};if(q.senderIsLeft){let D=U.leftHtlcHold||0n;if(D<q.amount)console.error(` HTLC timeout hold underflow! leftHtlcHold=${D} < amount=${q.amount}`),U.leftHtlcHold=0n;else U.leftHtlcHold=D-q.amount}else{let D=U.rightHtlcHold||0n;if(D<q.amount)console.error(` HTLC timeout hold underflow! rightHtlcHold=${D} < amount=${q.amount}`),U.rightHtlcHold=0n;else U.rightHtlcHold=D-q.amount}return $.locks.delete(z),J.push(` HTLC timeout: ${q.amount} token ${q.tokenId} returned to sender (lock ${z.slice(0,8)}...)`),{success:!0,events:J,timedOutHashlock:q.hashlock}}async function J40($,Q,Z,X,Y=!1){let{offerId:z,giveTokenId:J,giveAmount:q,wantTokenId:W,wantAmount:G,minFillRatio:U}=Q.data,D=[];if(!$.swapOffers)$.swapOffers=new Map;if(z.includes(":"))return{success:!1,error:`Invalid offerId: colons not allowed (got ${z})`,events:D};if($.swapOffers.has(z))return{success:!1,error:`Offer ${z} already exists`,events:D};if(q<G5.MIN_PAYMENT_AMOUNT||q>G5.MAX_PAYMENT_AMOUNT)return{success:!1,error:`Invalid giveAmount: ${q} (min ${G5.MIN_PAYMENT_AMOUNT}, max ${G5.MAX_PAYMENT_AMOUNT})`,events:D};if(G<G5.MIN_PAYMENT_AMOUNT||G>G5.MAX_PAYMENT_AMOUNT)return{success:!1,error:`Invalid wantAmount: ${G} (min ${G5.MIN_PAYMENT_AMOUNT}, max ${G5.MAX_PAYMENT_AMOUNT})`,events:D};if(J===W)return{success:!1,error:`Cannot swap same token: ${J}`,events:D};if(U<0||U>65535)return{success:!1,error:`Invalid minFillRatio: ${U}`,events:D};let{leftEntity:P,rightEntity:H}=$,N=$.proofHeader.fromEntity===P,C=Z?N:!N,L=$.deltas.get(J);if(!L)L=mq(J),$.deltas.set(J,L);L.leftSwapHold??=0n,L.rightSwapHold??=0n;let B=$7(L,C);if(q>B.outCapacity)return{success:!1,error:`Insufficient capacity: need ${q}, available ${B.outCapacity}`,events:D};let E=10n**12n,I,_;if(YM(J,W)===1){if(q%E===0n){let g=G*100n/q;if(g>0n)I=q,_=I*g/100n}}else if(G%E===0n){let g=q*100n/G;if(g>0n)_=G,I=_*g/100n}let x={offerId:z,giveTokenId:J,giveAmount:q,wantTokenId:W,wantAmount:G,minFillRatio:U,makerIsLeft:C,createdHeight:X,...I!==void 0?{quantizedGive:I}:{},..._!==void 0?{quantizedWant:_}:{}};if(C)L.leftSwapHold+=q;else L.rightSwapHold+=q;if($.swapOffers.set(z,x),Y)console.log("\uD83D\uDCCA VALIDATION: Swap offer stored (for dispute proof)");else console.log("\uD83D\uDCCA COMMIT: Swap offer stored");return D.push(`\uD83D\uDCCA Swap offer created: ${z.slice(0,8)}... give ${q} token${J} for ${G} token${W}`),{success:!0,events:D,swapOfferCreated:{offerId:z,makerIsLeft:C,fromEntity:P,toEntity:H,giveTokenId:J,giveAmount:q,wantTokenId:W,wantAmount:G,minFillRatio:U}}}var z40=p(()=>{y9();YJ();rZ();w2()});async function q40($,Q,Z,X,Y=!1){let{offerId:z,fillRatio:J,cancelRemainder:q}=Q.data,W=[];if(!$.swapOffers)return{success:!1,error:"No swap offers exist",events:W};let G=$.swapOffers.get(z);if(!G)return{success:!1,error:`Offer ${z} not found`,events:W};let{fromEntity:U,toEntity:D}=$.proofHeader,P=E5(U,D);if((Z?P:!P)===G.makerIsLeft)return{success:!1,error:"Only counterparty can resolve swap",events:W};if(J<0||J>dL)return{success:!1,error:`Invalid fillRatio: ${J}`,events:W};if(J>0&&J<G.minFillRatio)return{success:!1,error:`Fill ratio ${J} below minimum ${G.minFillRatio}`,events:W};let N=G.quantizedGive??G.giveAmount,C=G.quantizedWant??G.wantAmount,L=N*BigInt(J)/BigInt(dL),B=N>0n?(L*C+N-1n)/N:0n;if(J>0){if(L<G5.MIN_PAYMENT_AMOUNT||L>G5.MAX_PAYMENT_AMOUNT)return{success:!1,error:`Filled give amount out of bounds: ${L} (min ${G5.MIN_PAYMENT_AMOUNT}, max ${G5.MAX_PAYMENT_AMOUNT})`,events:W};if(B<G5.MIN_PAYMENT_AMOUNT||B>G5.MAX_PAYMENT_AMOUNT)return{success:!1,error:`Filled want amount out of bounds: ${B} (min ${G5.MIN_PAYMENT_AMOUNT}, max ${G5.MAX_PAYMENT_AMOUNT})`,events:W}}let E=$.deltas.get(G.giveTokenId);if(!E)E=mq(G.giveTokenId),$.deltas.set(G.giveTokenId,E);let I=$.deltas.get(G.wantTokenId);if(!I)I=mq(G.wantTokenId),$.deltas.set(G.wantTokenId,I);if(E.leftHtlcHold??=0n,E.rightHtlcHold??=0n,E.leftSwapHold??=0n,E.rightSwapHold??=0n,I.leftHtlcHold??=0n,I.rightHtlcHold??=0n,I.leftSwapHold??=0n,I.rightSwapHold??=0n,B>0n){let g=!G.makerIsLeft,h=$7(I,g);if(B>h.outCapacity)return{success:!1,error:`Taker insufficient capacity: needs ${B}, has ${h.outCapacity}`,events:W}}if(L>0n){if(G.makerIsLeft)E.offdelta-=L,I.offdelta+=B;else E.offdelta+=L,I.offdelta-=B;W.push(`\uD83D\uDCB1 Swap filled: ${L} token${G.giveTokenId} for ${B} token${G.wantTokenId}`)}let _=L;if(G.makerIsLeft){let g=E.leftSwapHold||0n;if(g<_)console.error(` Swap resolve hold underflow! leftSwapHold=${g} < holdRelease=${_}`),E.leftSwapHold=0n;else E.leftSwapHold=g-_}else{let g=E.rightSwapHold||0n;if(g<_)console.error(` Swap resolve hold underflow! rightSwapHold=${g} < holdRelease=${_}`),E.rightSwapHold=0n;else E.rightSwapHold=g-_}let f=G.makerIsLeft?$.leftEntity:$.rightEntity,x;if(q||J===dL){let g=N-L;if(g>0n)if(G.makerIsLeft){let h=E.leftSwapHold||0n;if(h<g)console.error(` Swap remainder hold underflow! leftSwapHold=${h} < remainingHold=${g}`),E.leftSwapHold=0n;else E.leftSwapHold=h-g}else{let h=E.rightSwapHold||0n;if(h<g)console.error(` Swap remainder hold underflow! rightSwapHold=${h} < remainingHold=${g}`),E.rightSwapHold=0n;else E.rightSwapHold=h-g}$.swapOffers.delete(z),x={offerId:z,accountId:f},W.push(`\uD83D\uDCCA Swap offer ${z.slice(0,8)}... ${J===dL?"fully filled":"cancelled"}`)}else{if(G.giveAmount=N-L,G.wantAmount=C-B,G.quantizedGive!==void 0)G.quantizedGive=G.giveAmount,G.quantizedWant=G.wantAmount;W.push(`\uD83D\uDCCA Swap offer ${z.slice(0,8)}... partially filled, ${G.giveAmount} remaining`)}return{success:!0,events:W,...x!==void 0&&{swapOfferCancelled:x}}}var dL=65535;var W40=p(()=>{y9();YJ();w2()});async function K40($,Q,Z,X,Y=!1){let{offerId:z}=Q.data,J=[];if(!$.swapOffers)return{success:!1,error:"No swap offers exist",events:J};let q=$.swapOffers.get(z);if(!q)return{success:!1,error:`Offer ${z} not found`,events:J};let{fromEntity:W,toEntity:G}=$.proofHeader,U=E5(W,G);if((Z?U:!U)!==q.makerIsLeft)return{success:!1,error:"Only maker can cancel swap offer",events:J};let P=$.deltas.get(q.giveTokenId);if(P){if(P.leftSwapHold===void 0)P.leftSwapHold=0n;if(P.rightSwapHold===void 0)P.rightSwapHold=0n;if(q.makerIsLeft){let C=P.leftSwapHold||0n;if(C<q.giveAmount)console.error(` Swap cancel hold underflow! leftSwapHold=${C} < giveAmount=${q.giveAmount}`),P.leftSwapHold=0n;else P.leftSwapHold=C-q.giveAmount}else{let C=P.rightSwapHold||0n;if(C<q.giveAmount)console.error(` Swap cancel hold underflow! rightSwapHold=${C} < giveAmount=${q.giveAmount}`),P.rightSwapHold=0n;else P.rightSwapHold=C-q.giveAmount}console.log(`\uD83D\uDCCA ${Y?"VALIDATION":"COMMIT"}: Released hold ${q.giveAmount} for token${q.giveTokenId}`)}if($.swapOffers.delete(z),Y)console.log(`\uD83D\uDCCA VALIDATION: Swap offer removed, offerId=${z.slice(0,8)}`);else console.log(`\uD83D\uDCCA COMMIT: Swap offer removed, offerId=${z.slice(0,8)}`);let H=q.makerIsLeft?$.leftEntity:$.rightEntity,N=H;return J.push(`\uD83D\uDCCA Swap offer cancelled: ${z.slice(0,8)}... (released ${q.giveAmount} token${q.giveTokenId})`),{success:!0,events:J,swapOfferCancelled:{offerId:z,accountId:N,makerId:H}}}var G40=p(()=>{y9()});async function U40($,Q,Z=!0){let{workspaceVersion:X,diffs:Y}=Q.data;console.log(`\uD83D\uDD12 SETTLE-HOLD: Setting holds for workspace v${X}`);let z=$.settlementWorkspace;if(!z)return console.error(" SECURITY: settle_hold without workspace"),{success:!1,events:[],error:"SECURITY: settle_hold requires active settlement workspace"};if(z.version!==X)return console.error(` SECURITY: settle_hold version mismatch: tx=${X}, workspace=${z.version}`),{success:!1,events:[],error:`SECURITY: settle_hold version mismatch (expected ${z.version}, got ${X})`};let J=z.diffs||[];if(Y.length!==J.length)return console.error(` SECURITY: settle_hold diff count mismatch: tx=${Y.length}, workspace=${J.length}`),{success:!1,events:[],error:"SECURITY: settle_hold diffs count does not match workspace"};for(let W=0;W<Y.length;W++){let G=Y[W],U=J[W],D=U.leftDiff<0n?-U.leftDiff:0n,P=U.rightDiff<0n?-U.rightDiff:0n;if(G.tokenId!==U.tokenId||G.leftWithdrawing!==D||G.rightWithdrawing!==P)return console.error(` SECURITY: settle_hold diff[${W}] mismatch`),console.error(`   tx: token=${G.tokenId}, leftW=${G.leftWithdrawing}, rightW=${G.rightWithdrawing}`),console.error(`   ws: token=${U.tokenId}, leftD=${U.leftDiff}, rightD=${U.rightDiff}`),console.error(`   expected: leftW=${D}, rightW=${P}`),{success:!1,events:[],error:`SECURITY: settle_hold diff[${W}] does not match workspace`}}let q=K5($.proofHeader.fromEntity,$.proofHeader.toEntity);for(let W of Y){let G=$.deltas.get(W.tokenId);if(!G){console.warn(` SETTLE-HOLD: No delta for tokenId ${W.tokenId}`);continue}let U=G.ondelta+G.offdelta,D=G.collateral+G.rightCreditLimit+(U>0n?0n:-U),P=G.collateral+G.leftCreditLimit+(U<0n?0n:U),H=G.leftSettleHold??0n,N=G.rightSettleHold??0n;if(H+W.leftWithdrawing>D)return console.error(` SECURITY: settle_hold exceeds left capacity for token ${W.tokenId}`),console.error(`   requested: ${H} + ${W.leftWithdrawing} = ${H+W.leftWithdrawing}`),console.error(`   capacity: ${D}`),{success:!1,events:[],error:`SECURITY: settle_hold exceeds left capacity for token ${W.tokenId}`};if(N+W.rightWithdrawing>P)return console.error(` SECURITY: settle_hold exceeds right capacity for token ${W.tokenId}`),console.error(`   requested: ${N} + ${W.rightWithdrawing} = ${N+W.rightWithdrawing}`),console.error(`   capacity: ${P}`),{success:!1,events:[],error:`SECURITY: settle_hold exceeds right capacity for token ${W.tokenId}`};G.leftSettleHold??=0n,G.rightSettleHold??=0n,G.leftSettleHold+=W.leftWithdrawing,G.rightSettleHold+=W.rightWithdrawing,console.log(`   Token ${W.tokenId}: leftHold=${G.leftSettleHold}, rightHold=${G.rightSettleHold}`)}return{success:!0,events:[`\uD83D\uDD12 Settlement holds set for workspace v${X}`]}}async function V40($,Q,Z=!0){let{workspaceVersion:X,diffs:Y}=Q.data;console.log(`\uD83D\uDD13 SETTLE-RELEASE: Releasing holds for workspace v${X}`);for(let z of Y){let J=$.deltas.get(z.tokenId);if(!J){console.warn(` SETTLE-RELEASE: No delta for tokenId ${z.tokenId}`);continue}J.leftSettleHold??=0n,J.rightSettleHold??=0n;let{leftSettleHold:q,rightSettleHold:W}=J;if(q<z.leftWithdrawing)console.warn(` SETTLE-RELEASE: leftSettleHold underflow! ${q} < ${z.leftWithdrawing}, clamping to 0`),J.leftSettleHold=0n;else J.leftSettleHold=q-z.leftWithdrawing;if(W<z.rightWithdrawing)console.warn(` SETTLE-RELEASE: rightSettleHold underflow! ${W} < ${z.rightWithdrawing}, clamping to 0`),J.rightSettleHold=0n;else J.rightSettleHold=W-z.rightWithdrawing;console.log(`   Token ${z.tokenId}: leftHold=${J.leftSettleHold}, rightHold=${J.rightSettleHold}`)}return{success:!0,events:[`\uD83D\uDD13 Settlement holds released for workspace v${X}`]}}var O40=p(()=>{h8()});class D40{provider=null;entityProviderContract=null;depositoryContract=null;signers=new Map;isWatching=!1;syntheticTxCounter=0;browserVM=null;browserVMUnsubscribe=null;env=null;entityProviderABI=["event EntityRegistered(bytes32 indexed entityId, uint256 indexed entityNumber, bytes32 boardHash)","event ControlSharesReleased(bytes32 indexed entityId, address indexed depository, uint256 controlAmount, uint256 dividendAmount, string purpose)","event NameAssigned(string indexed name, uint256 indexed entityNumber)"];depositoryABI=["event ReserveUpdated(bytes32 indexed entity, uint256 indexed tokenId, uint256 newBalance)","event SecretRevealed(bytes32 indexed hashlock, bytes32 indexed revealer, bytes32 secret)","event AccountSettled(tuple(bytes32 left, bytes32 right, uint256 tokenId, uint256 leftReserve, uint256 rightReserve, uint256 collateral, int256 ondelta)[])","event DisputeStarted(bytes32 indexed sender, bytes32 indexed counterentity, uint256 indexed disputeNonce, bytes32 proofbodyHash, bytes initialArguments)","event DisputeFinalized(bytes32 indexed sender, bytes32 indexed counterentity, uint256 indexed initialDisputeNonce, bytes32 initialProofbodyHash, bytes32 finalProofbodyHash)","event DebtCreated(bytes32 indexed debtor, bytes32 indexed creditor, uint256 indexed tokenId, uint256 amount, uint256 debtIndex)","event HankoBatchProcessed(bytes32 indexed entityId, bytes32 indexed hankoHash, uint256 nonce, bool success)"];verifyABIParity(){let $=this.depositoryABI.map((Q)=>{let Z=Q.match(/^event\s+(\w+)/);return Z?Z[1]:null}).filter(Boolean);for(let Q of VU)if(!$.includes(Q))throw Error(`J-EVENT ABI PARITY ERROR: "${Q}" is in CANONICAL_J_EVENTS but missing from depositoryABI.
Add the event ABI string to depositoryABI in j-event-watcher.ts`);for(let Q of $)if(!VU.includes(Q))throw Error(`J-EVENT ABI PARITY ERROR: "${Q}" is in depositoryABI but not in CANONICAL_J_EVENTS.
Either add it to CANONICAL_J_EVENTS or remove from depositoryABI`);if(V4)console.log(`\uD83D\uDD2D J-WATCHER: ABI parity verified - ${VU.join(", ")}`)}constructor($){if(this.verifyABIParity(),$.browserVM){this.browserVM=$.browserVM,console.log("\uD83D\uDD2D J-WATCHER: Initialized in BrowserVM mode (simnet)");return}let Q=$.rpcUrl;if(typeof window<"u"&&$.rpcUrl.startsWith("/"))Q=new URL($.rpcUrl,window.location.origin).href,console.log(`\uD83D\uDD27 J-WATCHER: Resolved ${$.rpcUrl}  ${Q}`);if(this.provider=new M0.JsonRpcProvider(Q),this.entityProviderContract=new M0.Contract($.entityProviderAddress,this.entityProviderABI,this.provider),this.depositoryContract=new M0.Contract($.depositoryAddress,this.depositoryABI,this.provider),V4)console.log(`\uD83D\uDD2D J-WATCHER: Initialized with RPC: ${$.rpcUrl}`),console.log(`\uD83D\uDD2D J-WATCHER: EntityProvider: ${$.entityProviderAddress}`),console.log(`\uD83D\uDD2D J-WATCHER: Depository: ${$.depositoryAddress}`)}addSigner($,Q,Z){if(this.signers.set($,{signerId:$,privateKey:Q,entityIds:Z}),V4)console.log(`\uD83D\uDD2D J-WATCHER: Added signer ${$} monitoring entities: ${Z.join(", ")}`)}async startWatching($){if(this.isWatching){console.log("\uD83D\uDD2D J-WATCHER: Already watching");return}if(this.isWatching=!0,this.env=$,this.browserVM){console.log("\uD83D\uDD2D J-WATCHER: Starting BrowserVM subscription mode..."),this.browserVMUnsubscribe=this.browserVM.onAny((Q)=>{this.handleBrowserVMEventBatch(Q)}),console.log("\uD83D\uDD2D J-WATCHER: Started with BrowserVM event subscription (batched)");return}console.log("\uD83D\uDD2D J-WATCHER: Starting simple first-principles watcher...");try{let Q=await this.provider.getBlockNumber();console.log(`\uD83D\uDD2D J-WATCHER: Connected to blockchain at block ${Q}`)}catch(Q){console.log(`\uD83D\uDD2D  J-WATCHER: Blockchain not ready, will retry: ${Q instanceof Error?Q.message:String(Q)}`)}setInterval(async()=>{if(!this.isWatching)return;try{await this.syncAllProposerReplicas($)}catch(Q){if(V4&&!(Q instanceof Error&&Q.message.includes("ECONNREFUSED")))console.error("\uD83D\uDD2D J-WATCHER: Sync error:",Q instanceof Error?Q.message:String(Q))}},1000),console.log("\uD83D\uDD2D J-WATCHER: Started with simple 1s polling")}handleBrowserVMEventBatch($){if(!this.env){console.error("\uD83D\uDD2D J-WATCHER: No env reference for BrowserVM events");return}let Q=$.filter((J)=>VU.includes(J.name));if(Q.length===0){if(V4)console.log(`J-WATCHER: No canonical events in batch of ${$.length}`);return}let Z=Q[0],X=Z.blockNumber??Number(this.browserVM.getBlockNumber()),Y=Z.blockHash??this.browserVM.getBlockHash();console.log(`\uD83D\uDCE1 [1/3] J-EVENT-BATCH: ${Q.length} events from block ${X}`);let z=new Map;for(let[J,q]of this.env.eReplicas.entries()){if(!q.isProposer)continue;let[W,G]=J.split(":");if(!W||!G)continue;let U=Q.filter((D)=>this.isEventRelevantToEntity(D,W));if(U.length===0)continue;if(!z.has(W))z.set(W,{signerId:G,events:[]});for(let D of U)z.get(W).events.push(D)}for(let[J,{signerId:q,events:W}]of z){let G=W.flatMap((D)=>this.browserVMEventToJEvents(D,X,Y,J));if(G.length===0)continue;let U={type:"j_event",data:{from:q,observedAt:this.getEventTimestamp(),blockNumber:X,blockHash:Y,transactionHash:`browservm-${X}-${this.syntheticTxCounter++}`,events:G,event:G[0]}};console.log(`   \uD83D\uDCEE QUEUE  ${J.slice(-4)} (${G.length} events from block ${X})`),this.env.runtimeInput.entityInputs.push({entityId:J,signerId:q,entityTxs:[U]})}}browserVMEventToJEvents($,Q,Z,X){switch($.name){case"ReserveUpdated":return[{type:"ReserveUpdated",data:{entity:$.args.entity,tokenId:Number($.args.tokenId),newBalance:$.args.newBalance?.toString()||"0"}}];case"AccountSettled":{let Y=[],z=$.args.settled||$.args[""]||$.args[0]||[];for(let J of z){let q=J[0]||J.left,W=J[1]||J.right;if(q===X||W===X){let G=Number(J[2]??J.tokenId??0),U=(J[3]??J.leftReserve??0n).toString(),D=(J[4]??J.rightReserve??0n).toString(),P=(J[5]??J.collateral??0n).toString(),H=(J[6]??J.ondelta??0n).toString(),N=X===q;Y.push({type:"AccountSettled",data:{leftEntity:q,rightEntity:W,counterpartyEntityId:N?W:q,tokenId:G,ownReserve:N?U:D,counterpartyReserve:N?D:U,collateral:P,ondelta:H,side:N?"left":"right"}})}}return Y}case"SecretRevealed":return[{type:"SecretRevealed",data:{hashlock:$.args.hashlock,revealer:$.args.revealer,secret:$.args.secret}}];case"DisputeStarted":return[{type:"DisputeStarted",data:{sender:$.args.sender,counterentity:$.args.counterentity,disputeNonce:$.args.disputeNonce,proofbodyHash:$.args.proofbodyHash,initialArguments:$.args.initialArguments||"0x"}}];case"DisputeFinalized":return[{type:"DisputeFinalized",data:{sender:$.args.sender,counterentity:$.args.counterentity,initialDisputeNonce:$.args.initialDisputeNonce,initialProofbodyHash:$.args.initialProofbodyHash,finalProofbodyHash:$.args.finalProofbodyHash}}];case"DebtCreated":return[{type:"DebtCreated",data:{debtor:$.args.debtor,creditor:$.args.creditor,tokenId:Number($.args.tokenId),amount:$.args.amount?.toString()||"0",debtIndex:Number($.args.debtIndex||0)}}];case"HankoBatchProcessed":return[{type:"HankoBatchProcessed",data:{entityId:$.args.entityId,hankoHash:$.args.hankoHash,nonce:Number($.args.nonce),success:Boolean($.args.success)}}];default:return[]}}isEventRelevantToEntity($,Q){let Z=(Y)=>String(Y).toLowerCase(),X=Z(Q);switch($.name){case"ReserveUpdated":return Z($.args.entity)===X;case"SecretRevealed":return!0;case"AccountSettled":{let Y=$.args.settled||$.args[""]||$.args[0]||[];for(let z of Y){let J=Z(z[0]||z.left),q=Z(z[1]||z.right);if(J===X||q===X)return!0}return!1}case"DisputeStarted":return Z($.args.sender)===X||Z($.args.counterentity)===X;case"DisputeFinalized":return Z($.args.sender)===X||Z($.args.counterentity)===X;case"DebtCreated":return Z($.args.debtor)===X||Z($.args.creditor)===X;case"HankoBatchProcessed":return Z($.args.entityId)===X;default:return!1}}stopWatching(){if(this.isWatching=!1,this.browserVMUnsubscribe){this.browserVMUnsubscribe(),this.browserVMUnsubscribe=null,console.log("\uD83D\uDD2D J-WATCHER: Stopped BrowserVM subscription");return}if(this.entityProviderContract)this.entityProviderContract.removeAllListeners();if(this.depositoryContract)this.depositoryContract.removeAllListeners();console.log("\uD83D\uDD2D J-WATCHER: Stopped watching")}async syncAllProposerReplicas($){try{let Q=await this.provider.getBlockNumber();if(V4){console.log(`\uD83D\uDD2D\uD83D\uDD0D SYNC-START: Current blockchain block=${Q}, total eReplicas=${$.eReplicas.size}`),console.log(`\uD83D\uDD2D\uD83D\uDD0D SYNC-ENV-TIMESTAMP: env.timestamp=${$.timestamp}`);for(let[X,Y]of $.eReplicas.entries())console.log(`\uD83D\uDD2D\uD83D\uDD0D REPLICA-STATE: ${X}  jBlock=${Y.state.lastFinalizedJHeight}, height=${Y.state.height}, isProposer=${Y.isProposer}`)}let Z=[];for(let[X,Y]of $.eReplicas.entries())if(Y.isProposer){let[z,J]=X.split(":");if(!z||!J)continue;let q=Y.state.lastFinalizedJHeight||0;if(V4)console.log(`\uD83D\uDD2D\uD83D\uDD0D REPLICA-CHECK: ${J}  Entity ${z.slice(0,10)}... jBlock=${q}, currentBlock=${Q}, isProposer=${Y.isProposer}`);if(q<Q){if(Z.push({entityId:z,signerId:J,lastJBlock:q}),GM)console.log(`\uD83D\uDD2D\uD83D\uDD0D PROPOSER-SYNC: Found proposer ${J} for entity ${z.slice(0,10)}... at jBlock ${q}, needs sync to ${Q}`)}else if(V4)console.log(`\uD83D\uDD2D REPLICA-SYNCED: ${J}  Entity ${z.slice(0,10)}... already synced (jBlock=${q} >= currentBlock=${Q})`)}if(Z.length===0)return;if(V4){console.log(`\uD83D\uDD2D SYNC: ${Z.length} proposer replicas need sync to block ${Q}`);for(let{entityId:X,signerId:Y,lastJBlock:z}of Z)console.log(`\uD83D\uDD2D\uD83D\uDCCB SYNC-QUEUE: ${Y}  Entity ${X.slice(0,10)}... from j-block ${z+1} to ${Q}`)}for(let{entityId:X,signerId:Y,lastJBlock:z}of Z)await this.syncEntityFromJBlock(X,Y,z+1,Q,$)}catch(Q){if(!(Q instanceof Error)||!Q.message.includes("ECONNREFUSED"))throw Q}}async syncEntityFromJBlock($,Q,Z,X,Y){if(Z>X)return;if(V4)console.log(`\uD83D\uDD2D\uD83D\uDCE1 ENTITY-SYNC: Entity ${$.slice(0,10)}... (${Q}) from j-block ${Z} to ${X}`);try{let z=await this.getEntityEventsInRange($,Z,X);if(z.length===0){if(GM)console.log(`\uD83D\uDD2D ENTITY-SYNC: No events found for entity ${$.slice(0,10)}... in blocks ${Z}-${X}`);return}console.log(`\uD83D\uDD2D\uD83D\uDCE6 ENTITY-SYNC: Found ${z.length} new events for entity ${$.slice(0,10)}... in blocks ${Z}-${X}`);let J=new Map;for(let W of z){let G=W.blockNumber??0,U=W.blockHash||"",D=`${G}:${U||"0x0"}`;if(!J.has(D))J.set(D,{blockNumber:G,blockHash:U,events:[]});J.get(D).events.push(W)}let q=Array.from(J.values()).sort((W,G)=>W.blockNumber-G.blockNumber);for(let W of q){let G=await this.resolveBlockHash(W.blockNumber,W.blockHash);this.queueEventBatchToProposer($,Q,W.events,W.blockNumber,G,Y)}console.log(`\uD83D\uDD2D ENTITY-SYNC: Queued ${z.length} events in ${q.length} batches for entity ${$.slice(0,10)}... (${Q})`)}catch(z){console.error(`\uD83D\uDD2D ENTITY-SYNC: Error syncing entity ${$.slice(0,10)}...`,z instanceof Error?z.message:String(z))}}async getEntityEventsInRange($,Q,Z){if(GM)console.log(`\uD83D\uDD2D\uD83D\uDD0D EVENT-QUERY: Fetching events for entity ${$.slice(0,10)}... blocks ${Q}-${Z}`);let X=this.depositoryContract.filters.ReserveUpdated;if(!X)throw Error("Contract filters not available");let[Y]=await Promise.all([this.depositoryContract.queryFilter(X($),Q,Z)]);if(GM)console.log(`\uD83D\uDD2D\uD83D\uDD0D EVENT-QUERY: Entity ${$.slice(0,10)}... - Reserve: ${Y.length}`);let z=[...Y.map((J)=>({...J,eventType:"ReserveUpdated"}))].sort((J,q)=>{if(J.blockNumber!==q.blockNumber)return J.blockNumber-q.blockNumber;return(J.transactionIndex||0)-(q.transactionIndex||0)});if(GM&&z.length>0)console.log(`\uD83D\uDD2D\uD83D\uDD0D EVENT-QUERY: Entity ${$.slice(0,10)}... total events: ${z.length}`),z.forEach((J,q)=>{console.log(`\uD83D\uDD2D\uD83D\uDD0D EVENT-${q}: ${J.eventType} at block ${J.blockNumber} tx ${J.transactionIndex}`)});return z}async resolveBlockHash($,Q){if(Q&&Q!=="0x0")return Q;if(!this.provider)return"0x0";try{return(await this.provider.getBlock($))?.hash||"0x0"}catch{return"0x0"}}rpcEventToJEvent($,Q){if(Q.eventType==="ReserveUpdated"){if(V4)console.log(`\uD83D\uDD2D\uD83D\uDCB0 R2R-EVENT: Entity ${$.slice(0,10)}... Token ${Q.args.tokenId} Balance ${(Number(Q.args.newBalance)/1000000000000000000).toFixed(4)} (block ${Q.blockNumber})`);return{type:"ReserveUpdated",data:{entity:$,tokenId:Number(Q.args.tokenId),newBalance:Q.args.newBalance.toString(),symbol:`TKN${Q.args.tokenId}`,decimals:18}}}return null}queueEventBatchToProposer($,Q,Z,X,Y,z){let J=Z.map((W)=>this.rpcEventToJEvent($,W)).filter(Boolean);if(J.length===0)return;let q={type:"j_event",data:{from:Q,observedAt:this.getEventTimestamp(),blockNumber:X,blockHash:Y,transactionHash:`rpc-${X}-${this.syntheticTxCounter++}`,events:J,event:J[0]}};console.log(`\uD83D\uDEA8 J-WATCHER-CREATING-EVENT: ${Q} creating j-event batch block=${X} for entity ${$.slice(0,10)}... (${J.length} events)`),z.runtimeInput.entityInputs.push({entityId:$,signerId:Q,entityTxs:[q]}),console.log(`\uD83D\uDD2D J-WATCHER-QUEUED: ${Q}  Entity ${$.slice(0,10)}... (${J.length} events) block=${X} - Queue length now: ${z.runtimeInput.entityInputs.length}`)}async syncNewlyCreatedEntities($){if(V4)console.log("\uD83D\uDD2D  J-WATCHER: syncNewlyCreatedEntities called (legacy) - first-principles design handles this automatically");return!1}async getCurrentBlockNumber(){try{return await this.provider.getBlockNumber()}catch($){if(V4)console.log("\uD83D\uDD2D  J-WATCHER: Could not get current block, using 0:",$ instanceof Error?$.message:String($));return 0}}getStatus(){return{isWatching:this.isWatching,signerCount:this.signers.size}}async syncOnce($){await this.syncAllProposerReplicas($)}getEventTimestamp(){return this.env?.timestamp??0}}function M40($){return new D40($)}async function P40($,Q,Z,X){let Y=M40({rpcUrl:Q,entityProviderAddress:Z,depositoryAddress:X,startBlock:0});if(await Y.startWatching($),V4)console.log("\uD83D\uDD2D J-WATCHER: Setup complete with first-principles design");return Y}async function qJ($,Q){let Z=M40({rpcUrl:"",entityProviderAddress:"",depositoryAddress:"",browserVM:Q});return await Z.startWatching($),console.log("\uD83D\uDD2D J-WATCHER: Setup complete with BrowserVM mode"),Z}var V4=!1,GM=!1,VU;var uq=p(()=>{A6();VU=["ReserveUpdated","SecretRevealed","AccountSettled","DisputeStarted","DisputeFinalized","DebtCreated","HankoBatchProcessed"]});var vx={};x1(vx,{tryFinalizeAccountJEvents:()=>iL0,handleJEvent:()=>bx});function iL0($,Q,Z){let X=new Map,Y=new Map;for(let q of $.leftJObservations)X.set(`${q.jHeight}:${q.jBlockHash}`,q);for(let q of $.rightJObservations)Y.set(`${q.jHeight}:${q.jBlockHash}`,q);let z=Array.from(X.keys()).filter((q)=>Y.has(q));if(z.length===0){console.log(`   \uD83D\uDD0D BILATERAL: left=${$.leftJObservations.length}, right=${$.rightJObservations.length}, matches=0`);return}console.log(`   \uD83E\uDD1D BILATERAL-MATCH: ${z.length} j-blocks agreed!`);for(let q of z){let W=X.get(q),G=W.jHeight;if($.lastFinalizedJHeight>=G)continue;if($.jEventChain.some((U)=>U.jHeight===G))continue;console.log(`    BILATERAL-FINALIZE: jHeight=${G}`);for(let U of W.events)if(U.type==="AccountSettled"){let{tokenId:D,collateral:P,ondelta:H}=U.data,N=Number(D),C=$.deltas.get(N);if(!C){let B=t7(N);C={tokenId:N,collateral:0n,ondelta:0n,offdelta:0n,leftCreditLimit:B,rightCreditLimit:B,leftAllowance:0n,rightAllowance:0n},$.deltas.set(N,C)}let L=C.collateral;C.collateral=BigInt(P),C.ondelta=BigInt(H),console.log(`   \uD83D\uDCB0 BILATERAL-APPLIED for ${Q.slice(-4)}: coll ${L}${C.collateral}, ondelta=${C.ondelta}`)}if($.jEventChain.push({jHeight:G,jBlockHash:W.jBlockHash,events:W.events,finalizedAt:Z.timestamp}),$.lastFinalizedJHeight=Math.max($.lastFinalizedJHeight,G),$.settlementWorkspace?.status==="ready_to_submit")$.onChainSettlementNonce=($.onChainSettlementNonce||0)+1,console.log(`   \uD83D\uDCB0 NONCE-INC: Settlement finalized  onChainNonce=${$.onChainSettlementNonce}`),delete $.settlementWorkspace,console.log("   \uD83E\uDDF9 WORKSPACE-CLEAR: Settlement completed")}let J=new Set(z.map((q)=>X.get(q).jHeight));$.leftJObservations=$.leftJObservations.filter((q)=>!J.has(q.jHeight)),$.rightJObservations=$.rightJObservations.filter((q)=>!J.has(q.jHeight)),console.log(`   \uD83E\uDDF9 Pruned ${J.size} finalized (left=${$.leftJObservations.length}, right=${$.rightJObservations.length} pending)`)}async function oL0($,Q,Z){let X=[],Y=new Map;for(let J of $.jBlockObservations){let q=`${J.jHeight}:${J.jBlockHash}`;if(!Y.has(q))Y.set(q,[]);Y.get(q).push(J)}let z=[];console.log(`   \uD83D\uDCCA OBSERVATION-GROUPS: ${Y.size} groups, keys=[${Array.from(Y.keys()).join(", ")}]`);for(let[J,q]of Y){let G=new Set(q.map((U)=>U.signerId)).size;if(BigInt(G)>=Q){let U=q[0].jHeight,D=q[0].jBlockHash;if(console.log(`   \uD83D\uDD0D CHECK-FINALIZE: jHeight=${U}, jBlockChain.length=${$.jBlockChain.length}, heights=[${$.jBlockChain.map((C)=>C.jHeight).join(",")}]`),$.jBlockChain.some((C)=>C.jHeight===U)){console.log(`    SKIP-FINALIZE: block ${U} already in jBlockChain`);continue}console.log(`    J-BLOCK FINALIZED: height=${U} (${G}/${Q} signers)`);let H=nL0(q),N={jHeight:U,jBlockHash:D,events:H,finalizedAt:$.timestamp,signerCount:G};$.jBlockChain.push(N),$.lastFinalizedJHeight=U,z.push(U),console.log(`    Added block ${U} to jBlockChain (length: ${$.jBlockChain.length})`),console.log(`   \uD83D\uDCE6 Applying ${H.length} events from block ${U}`),console.log("      Event types:",H.map((C)=>C.type));for(let C of H){console.log(`      \uD83D\uDD27 Applying event: ${C.type}`);let{newState:L,mempoolOps:B}=await rL0($,C,Z);if($=L,X.push(...B),!$.jBlockChain.some((E)=>E.jHeight===U))console.log(`     CLONE LOST jBlockChain - restoring block ${U}`),$.jBlockChain.push(N),$.lastFinalizedJHeight=U}console.log(`   \uD83D\uDCE6 Applied ${H.length} events from j-block ${U}`)}}if(z.length>0){let J=new Set(z);$.jBlockObservations=$.jBlockObservations.filter((q)=>!J.has(q.jHeight)),console.log(`   \uD83E\uDDF9 Pruned finalized heights [${z.join(",")}] (${$.jBlockObservations.length} pending)`)}return{newState:$,mempoolOps:X}}function nL0($){let Q=new Map;for(let Z of $)for(let X of Z.events){let Y=`${X.type}:${h1(X.data)}`;if(!Q.has(Y))Q.set(Y,X)}return Array.from(Q.values())}async function rL0($,Q,Z){console.log(`\uD83D\uDD27\uD83D\uDD27 applyFinalizedJEvent: entityId=${$.entityId.slice(-4)}, event.type=${Q.type}`);let X=$.entityId.slice(-4),Y=Q.blockNumber??0,J=(Q.transactionHash||"unknown").slice(0,10)+"...",q=i1($),W=[];if(Q.type==="ReserveUpdated"){let{entity:G,tokenId:U,newBalance:D}=Q.data,P=cq(U),H=OU(U),N=(Number(D)/10**H).toFixed(4);if(G===$.entityId){if(q.reserves.set(String(U),BigInt(D)),D1)console.log(` Reserve updated: Token ${U}  ${D}`)}K1(q,`\uD83D\uDCCA RESERVE: ${P} = ${N} | Block ${Y} | Tx ${J}`)}else if(Q.type==="SecretRevealed"){let{hashlock:G,secret:U}=Q.data,D=String(G).toLowerCase(),P=q.htlcRoutes.get(D);if(!P)return console.log(` HTLC: Secret reveal for unknown hashlock ${D.slice(0,16)}...`),{newState:q,mempoolOps:W};if(P.secret)return console.log(` HTLC: Secret already stored for hashlock ${D.slice(0,16)}...`),K1(q,`\uD83D\uDD13 HTLC reveal observed: ${D.slice(0,10)}... | Block ${Y}`),{newState:q,mempoolOps:W};if(P.secret=String(U),P.pendingFee)q.htlcFeesEarned=(q.htlcFeesEarned||0n)+P.pendingFee,console.log(`\uD83D\uDCB0 HTLC: Fee earned on on-chain reveal: ${P.pendingFee} (total: ${q.htlcFeesEarned})`),delete P.pendingFee;if(P.outboundLockId)q.lockBook.delete(P.outboundLockId);if(P.inboundLockId)q.lockBook.delete(P.inboundLockId);if(P.inboundEntity&&P.inboundLockId)W.push({accountId:P.inboundEntity,tx:{type:"htlc_reveal",data:{lockId:P.inboundLockId,secret:String(U)}}}),console.log(` HTLC: On-chain secret propagated to ${P.inboundEntity.slice(-4)}`);else console.log(" HTLC: On-chain reveal complete (no inbound hop)");K1(q,`\uD83D\uDD13 HTLC reveal observed: ${D.slice(0,10)}... | Block ${Y}`)}else if(Q.type==="AccountSettled"){let{counterpartyEntityId:G,tokenId:U,ownReserve:D,collateral:P,ondelta:H}=Q.data,N=Number(U),C=G.slice(-4),L=cq(N),B=OU(N),E=q.reserves.get(String(U))||0n;if(console.log(`   \uD83D\uDCB0 RESERVE-UPDATE: ownReserve=${D}, old=${E}, tokenId=${U}`),D){let b=BigInt(D);q.reserves.set(String(U),b),console.log(`   \uD83D\uDCB0 RESERVE-SET: ${E}  ${b}`)}else console.log("    RESERVE-SKIP: ownReserve is falsy");let I=q.accounts.get(G);if(!I)return console.warn(`    No account for ${C}`),{newState:q,mempoolOps:W};if(!I.leftJObservations)I.leftJObservations=[];if(!I.rightJObservations)I.rightJObservations=[];if(!I.jEventChain)I.jEventChain=[];if(I.lastFinalizedJHeight===void 0)I.lastFinalizedJHeight=0;let _=K5($.entityId,G),f=Q.blockNumber??Y,x=Q.blockHash||"",g={jHeight:f,jBlockHash:x,events:[Q],observedAt:$.timestamp||0};if(_)I.leftJObservations.push(g),console.log(`   \uD83D\uDCDD LEFT obs: jHeight=${f}`);else I.rightJObservations.push(g),console.log(`   \uD83D\uDCDD RIGHT obs: jHeight=${f}`);let h=JSON.parse(h1(Q));W.push({accountId:G,tx:{type:"j_event_claim",data:{jHeight:f,jBlockHash:x,events:[h],observedAt:g.observedAt}}}),console.log(`   \uD83D\uDCEE j_event_claim  mempoolOps[${W.length}] (will auto-propose frame)`);let v=(Number(P)/10**B).toFixed(4);K1(q,` OBSERVED: ${L} ${C} | coll=${v} | j-block ${Y} (awaiting 2-of-2)`)}else if(Q.type==="InsuranceRegistered"){let{insured:G,insurer:U,tokenId:D,limit:P,expiresAt:H}=Q.data,N=cq(D),C=OU(D),L=(Number(P)/10**C).toFixed(2);if(!q.insuranceLines)q.insuranceLines=[];if(G===$.entityId)q.insuranceLines.push({insurer:U,tokenId:D,remaining:BigInt(P),expiresAt:BigInt(H)});K1(q,`\uD83D\uDEE1 INSURANCE: ${U.slice(-8)} covers ${L} ${N} | Block ${Y}`)}else if(Q.type==="InsuranceClaimed"){let{insured:G,insurer:U,creditor:D,tokenId:P,amount:H}=Q.data,N=cq(P),C=OU(P),L=(Number(H)/10**C).toFixed(4);if(G===$.entityId&&q.insuranceLines){let B=q.insuranceLines.find((E)=>E.insurer===U&&E.tokenId===P);if(B)B.remaining-=BigInt(H)}K1(q,`\uD83D\uDCB8 INSURANCE CLAIMED: ${L} ${N} paid to ${D.slice(-8)} | Block ${Y}`)}else if(Q.type==="InsuranceExpired"){let{insured:G,insurer:U,tokenId:D}=Q.data,P=cq(D);K1(q,` INSURANCE EXPIRED: ${U.slice(-8)}  ${G.slice(-8)} ${P} | Block ${Y}`)}else if(Q.type==="DebtCreated"){let{debtor:G,creditor:U,tokenId:D,amount:P,debtIndex:H}=Q.data,N=cq(D),C=OU(D),L=(Number(P)/10**C).toFixed(4);if(!q.debts)q.debts=[];if(G===$.entityId)q.debts.push({creditor:U,tokenId:D,amount:BigInt(P),index:H});K1(q,`\uD83D\uDD34 DEBT: ${G.slice(-8)} owes ${L} ${N} to ${U.slice(-8)} | Block ${Y}`)}else if(Q.type==="DebtEnforced"){let{debtor:G,creditor:U,tokenId:D,amountPaid:P,remainingAmount:H,newDebtIndex:N}=Q.data,C=cq(D),L=OU(D),B=(Number(P)/10**L).toFixed(4);if(G===$.entityId&&q.debts){let E=q.debts.find((I)=>I.creditor===U&&I.tokenId===D);if(E)E.amount=BigInt(H),E.index=N}K1(q,` DEBT PAID: ${B} ${C} to ${U.slice(-8)} | Block ${Y}`)}else if(Q.type==="DisputeStarted"){console.log(`\uD83D\uDD0D DISPUTE-EVENT HANDLER: entityId=${q.entityId.slice(-4)}`);let{sender:G,counterentity:U,disputeNonce:D,proofbodyHash:P}=Q.data,H=(_)=>String(_).toLowerCase(),N=H(G),C=H(U),L=H(q.entityId),B=N===L?C:N,E=B,I=q.accounts.get(E);if(!I){for(let[_,f]of q.accounts.entries())if(H(_)===B){E=_,I=f;break}}if(I){let _=(await Promise.resolve().then(() => (A2(),$Z))).getBrowserVMInstance(Z);if(!_)return console.warn(" DisputeStarted: No browserVM to query timeout"),{newState:q,mempoolOps:W};let f=await _.getAccountInfo(q.entityId,E),x=N===L,g=Boolean(I.counterpartyDisputeProofHanko),h=I.proofHeader.cooperativeNonce,v="proofHeader",b=I.disputeProofNoncesByHash?.[String(P)];if(b!==void 0)h=b,v="hashMap";else if(x){if(I.counterpartyDisputeProofCooperativeNonce!==void 0)h=I.counterpartyDisputeProofCooperativeNonce,v="counterpartySig";else if(g&&I.ackedTransitions>0)h=I.ackedTransitions-1,v="ackedTransitions-1"}else if(I.currentDisputeProofCooperativeNonce!==void 0)h=I.currentDisputeProofCooperativeNonce,v="currentSig";else if(I.ackedTransitions>0)h=I.ackedTransitions-1,v="ackedTransitions-1";console.log(`   DEBUG DisputeStarted: starter=${x}, source=${v}, ackedTransitions=${I.ackedTransitions}, proofHeader.cooperativeNonce=${I.proofHeader.cooperativeNonce}, initialCooperativeNonce=${h}`),I.activeDispute={startedByLeft:N<C,initialProofbodyHash:String(P),initialDisputeNonce:Number(D),disputeTimeout:Number(f.disputeTimeout),initialCooperativeNonce:h,onChainCooperativeNonce:Number(f.cooperativeNonce),initialArguments:Q.data.initialArguments||"0x"};let{buildAccountProofBody:m}=await Promise.resolve().then(() => (g3(),Eq)),K=m(I);if(K.proofBodyHash!==I.activeDispute.initialProofbodyHash)console.error(" CONSENSUS DIVERGENCE: Local proofBodyHash != on-chain"),console.error(`   Local: ${K.proofBodyHash}`),console.error(`   On-chain: ${I.activeDispute.initialProofbodyHash}`),console.error("   This means bilateral state diverged - CRITICAL BUG!");else console.log(" Proof hash verified: local matches on-chain");K1(q,` DISPUTE ${x?"STARTED":"vs us"} with ${E.slice(-4)}, timeout: block ${I.activeDispute.disputeTimeout}`),console.log(` activeDispute stored: hash=${I.activeDispute.initialProofbodyHash.slice(0,10)}..., timeout=${I.activeDispute.disputeTimeout}`)}else console.warn(` DisputeStarted: account ${B.slice(-4)} not found for entity ${L.slice(-4)}`)}else if(Q.type==="DisputeFinalized"){console.log(`\uD83D\uDD0D DISPUTE-FINALIZED HANDLER: entityId=${q.entityId.slice(-4)}`);let{sender:G,counterentity:U,initialDisputeNonce:D,initialProofbodyHash:P}=Q.data,H=(_)=>String(_).toLowerCase(),N=H(G),C=H(U),L=H(q.entityId),B=N===L?C:N,E=B,I=q.accounts.get(E);if(!I){for(let[_,f]of q.accounts.entries())if(H(_)===B){E=_,I=f;break}}if(I)if(I.activeDispute)delete I.activeDispute,K1(q,` DISPUTE FINALIZED with ${E.slice(-4)} (nonce ${Number(D)})`),console.log(` activeDispute cleared for ${E.slice(-4)} (proof=${String(P).slice(0,10)}...)`);else console.warn(` DisputeFinalized: No activeDispute for ${E.slice(-4)}`);else console.warn(` DisputeFinalized: account ${B.slice(-4)} not found for entity ${L.slice(-4)}`)}else if(Q.type==="HankoBatchProcessed"){let{entityId:G,hankoHash:U,nonce:D,success:P}=Q.data;if(G!==q.entityId)return console.log(`    HankoBatchProcessed: Not our batch (${String(G).slice(-4)} != ${X})`),{newState:q,mempoolOps:W};if(console.log(`\uD83D\uDCE6 HankoBatchProcessed: nonce=${D}, success=${P}, hanko=${String(U).slice(0,10)}...`),P){if(q.jBatchState){let{createEmptyBatch:H}=await Promise.resolve().then(() => (c6(),n9));q.jBatchState.batch=H(),q.jBatchState.pendingBroadcast=!1,console.log("    jBatch cleared on successful finalization")}K1(q,` jBatch finalized (nonce ${D}) | Block ${Y}`)}else console.warn(`    jBatch FAILED on-chain (nonce ${D}) - not clearing`),K1(q,` jBatch failed (nonce ${D}) - use j_clear_batch to abort | Block ${Y}`)}else K1(q,` Unknown j-event: ${Q.type} | Block ${Y}`),console.warn(` Unknown j-event type: ${Q.type}. Canonical events: ${VU.join(", ")}`);return{newState:q,mempoolOps:W}}var cq=($)=>{return d3($).symbol},OU=($)=>{return d3($).decimals},bx=async($,Q,Z)=>{let{from:X,observedAt:Y,blockNumber:z,blockHash:J}=Q,q=Q.events||[Q.event],W=$.entityId.slice(-4);if(console.log(`\uD83C\uDFDB [2/3] E-MACHINE: ${W}  ${q.length} events (block ${z})`),$.jBlockChain.some((C)=>C.jHeight===z))return console.log(`    SKIP: block ${z} already finalized`),{newState:$,mempoolOps:[]};if(z<=$.lastFinalizedJHeight)return console.log(`    SKIP: stale block (${z} <= finalized ${$.lastFinalizedJHeight})`),{newState:$,mempoolOps:[]};let U=q.map((C)=>({type:C.type,data:C.data,blockNumber:z,blockHash:J})),D=i1($),P={signerId:X,jHeight:z,jBlockHash:J,events:U,observedAt:Y};D.jBlockObservations.push(P),console.log(`   \uD83D\uDCDD Observation from ${X}: ${U.length} events for block ${z}`);let{newState:H,mempoolOps:N}=await oL0(D,$.config.threshold,Z);D=H;for(let[C,L]of D.accounts)if(L.mempool.length>0||L.leftJObservations.length>0||L.rightJObservations.length>0)console.log(`\uD83D\uDD0D AFTER-J-EVENT: Account ${C.slice(-4)} mempool=${L.mempool.length} txs:`,L.mempool.map((B)=>B.type)),console.log(`\uD83D\uDD0D AFTER-J-EVENT: leftJObs=${L.leftJObservations?.length||0}, rightJObs=${L.rightJObservations?.length||0}`);if(N.length>0)console.log(`   \uD83D\uDCE6 handleJEvent: Returning ${N.length} mempoolOps for bilateral consensus`);return{newState:D,mempoolOps:N}};var UM=p(()=>{B8();C8();y9();h8();uq()});async function VM($,Q,Z=!0,X=0,Y=0,z=!1){let J=$.proofHeader.fromEntity,{counterparty:q}=i6($,J);switch(console.log(`\uD83D\uDD04 Processing ${Q.type} for ${q.slice(-4)} (ourFrame: ${Z})`),Q.type){case"add_delta":return m20($,Q,Z);case"set_credit_limit":return c20($,Q,Z);case"direct_payment":return l20($,Q,Z);case"account_payment":return console.warn(" account_payment type is deprecated"),{success:!0,events:[]};case"account_settle":return console.log("\uD83D\uDCB0 account_settle processed externally"),{success:!0,events:[" Settlement processed"]};case"reserve_to_collateral":return o20($,Q);case"request_withdrawal":return n20($,Q,Z);case"approve_withdrawal":return r20($,Q);case"request_rebalance":return s20($,Q);case"j_sync":return t20($,Q,Z);case"j_event_claim":{let{jHeight:W,jBlockHash:G,events:U,observedAt:D}=Q.data;if(console.log(`\uD83D\uDCE5 j_event_claim: jHeight=${W}, hash=${G.slice(0,10)}, isOurFrame=${Z}`),!$.leftJObservations)$.leftJObservations=[];if(!$.rightJObservations)$.rightJObservations=[];if(!$.jEventChain)$.jEventChain=[];if($.lastFinalizedJHeight===void 0)$.lastFinalizedJHeight=0;let P=1e4;if(W>$.lastFinalizedJHeight+P)return{success:!1,events:[` j_event_claim: jHeight ${W} too far ahead`],error:`Invalid jHeight: jump too large (max ${P})`};if(W<=$.lastFinalizedJHeight)return console.log(`    j_event_claim: jHeight ${W} already finalized (lastFinalized=${$.lastFinalizedJHeight}) - skipping`),{success:!0,events:[" j_event_claim skipped (already finalized)"]};let{iAmLeft:H,counterparty:N}=i6($,J),C=Z?H:!H;console.log(`   \uD83D\uDD0D AUTH: iAmLeft=${H}, isOurFrame=${Z}, claimIsFromLeft=${C}`);let L={jHeight:W,jBlockHash:G,events:U,observedAt:D};if(C)$.leftJObservations.push(L),console.log(`   \uD83D\uDCDD Stored LEFT obs (${$.leftJObservations.length} total)`);else $.rightJObservations.push(L),console.log(`   \uD83D\uDCDD Stored RIGHT obs (${$.rightJObservations.length} total)`);if(!z){let{tryFinalizeAccountJEvents:B}=await Promise.resolve().then(() => (UM(),vx));B($,N,{timestamp:X});let E=$.deltas.get(1);console.log(`\uD83D\uDD0D AFTER-BILATERAL-FINALIZE (isValidation=${z}): collateral=${E?.collateral||0n}`)}else console.log(" SKIP-BILATERAL-FINALIZE: On validation clone, will finalize during commit");return{success:!0,events:["\uD83D\uDCE5 J-event claim processed"]}}case"htlc_lock":return await $40($,Q,Z,X,Y,z);case"htlc_reveal":return await Z40($,Q,Z,Y,X);case"htlc_timeout":return await Y40($,Q,Z,Y,X);case"swap_offer":return await J40($,Q,Z,Y,z);case"swap_resolve":return await q40($,Q,Z,Y,z);case"swap_cancel":return await K40($,Q,Z,Y,z);case"settle_hold":return await U40($,Q,Z);case"settle_release":return await V40($,Q,Z);case"account_frame":return console.error(" FATAL: account_frame should not be in accountTxs array!"),{success:!1,error:"account_frame is not a transaction type",events:[]};default:return{success:!1,error:"Unknown accountTx type",events:[]}}}var H40=p(()=>{C8();p20();d20();i20();a20();e20();Q40();X40();z40();W40();G40();O40()});var T40={};x1(T40,{validateMessageCounter:()=>C40,validateAccountFrame:()=>N40,shouldProposeFrame:()=>L40,proposeAccountFrame:()=>hx,handleAccountInput:()=>ux,getAccountsToProposeFrames:()=>tL0,generateAccountProof:()=>eL0,computeFrameHash:()=>px,addToAccountMempool:()=>sL0});function R40($){if(console.log("\uD83D\uDD0D GET-DEPOSITORY-ADDRESS CALLED"),$.browserVM){let Q=$.browserVM,Z=Q.getDepositoryAddress?.()||Q.browserVM?.getDepositoryAddress?.();if(console.log(`\uD83D\uDD0D getDepositoryAddress: browserVM.getDepositoryAddress=${Z}`),Z&&Z!=="0x0000000000000000000000000000000000000000")return Z}if($.activeJurisdiction){let Q=$.jReplicas.get($.activeJurisdiction);if(Q?.depositoryAddress)return Q.depositoryAddress;if(Q?.contracts?.depository)return Q.contracts.depository}for(let Q of $.jReplicas.values()){if(Q.depositoryAddress)return Q.depositoryAddress;if(Q.contracts?.depository)return Q.contracts.depository}return console.warn("[account-consensus]  No depositoryAddress found in env - using zero address (signatures will fail!)"),"0x0000000000000000000000000000000000000000"}function gx($,Q){let Z=($.leftHtlcHold||0n)!==0n||($.rightHtlcHold||0n)!==0n||($.leftSwapHold||0n)!==0n||($.rightSwapHold||0n)!==0n||($.leftSettleHold||0n)!==0n||($.rightSettleHold||0n)!==0n;return!(Q===0n&&$.leftCreditLimit===0n&&$.rightCreditLimit===0n&&!Z)}function N40($,Q,Z){if($.height<0)return!1;if(typeof $.jHeight!=="number"||$.jHeight<0)return!1;if($.accountTxs.length>100)return!1;if($.tokenIds.length!==$.deltas.length)return!1;if(Q!==void 0){if(Math.abs($.timestamp-Q)>aL0)return console.log(` Frame timestamp drift too large: ${$.timestamp} vs ${Q}`),!1;if(Z!==void 0&&$.timestamp<Z-1000)return console.log(` Frame timestamp went backwards significantly: ${$.timestamp} < ${Z} (delta: ${Z-$.timestamp}ms)`),!1}return!0}function C40($,Q){if(Q<=0||Q>yx)return console.log(` Counter out of range: ${Q} (must be 1-${yx})`),!1;let Z=$.ackedTransitions+1;if(Q!==Z)return console.log(` Counter violation: got ${Q}, expected ${Z} (ackedTransitions=${$.ackedTransitions})`),!1;return!0}async function mx($){let{ethers:Q}=await Promise.resolve().then(() => (A6(),VB)),Z={height:$.height,timestamp:$.timestamp,jHeight:$.jHeight,prevFrameHash:$.prevFrameHash,accountTxs:$.accountTxs.map((Y)=>({type:Y.type,data:Y.data})),tokenIds:$.tokenIds,deltas:$.deltas.map((Y)=>Y.toString()),fullDeltaStates:$.fullDeltaStates?.map((Y)=>({tokenId:Y.tokenId,collateral:Y.collateral.toString(),ondelta:Y.ondelta.toString(),offdelta:Y.offdelta.toString(),leftCreditLimit:Y.leftCreditLimit.toString(),rightCreditLimit:Y.rightCreditLimit.toString(),leftAllowance:Y.leftAllowance.toString(),rightAllowance:Y.rightAllowance.toString(),leftHtlcHold:(Y.leftHtlcHold||0n).toString(),rightHtlcHold:(Y.rightHtlcHold||0n).toString(),leftSwapHold:(Y.leftSwapHold||0n).toString(),rightSwapHold:(Y.rightSwapHold||0n).toString(),leftSettleHold:(Y.leftSettleHold||0n).toString(),rightSettleHold:(Y.rightSettleHold||0n).toString()}))},X=h1(Z);return Q.keccak256(Q.toUtf8Bytes(X))}async function px($){return mx($)}async function hx($,Q,Z=!1,X){let Y=Q.proofHeader.fromEntity,{counterparty:z}=i6(Q,Y),J=$.quietRuntimeLogs===!0;if(!J)console.log(`\uD83D\uDE80 E-MACHINE: Proposing account frame for ${z.slice(-4)}`),console.log(`\uD83D\uDE80 E-MACHINE: Account state - mempool=${Q.mempool.length}, pendingFrame=${!!Q.pendingFrame}, currentHeight=${Q.currentHeight}`);let q=[];if(Q.mempool.length>DU)return console.log(` E-MACHINE: Mempool overflow ${Q.mempool.length} > ${DU}`),{success:!1,error:`Mempool overflow: ${Q.mempool.length} > ${DU}`,events:q};if(Q.mempool.length===0)return console.log(" E-MACHINE: No transactions in mempool to propose"),{success:!1,error:"No transactions to propose",events:q};if(Q.pendingFrame){if(!J)console.log(` E-MACHINE: Still waiting for ACK on pending frame #${Q.pendingFrame.height}`);return{success:!1,error:"Waiting for ACK on pending frame",events:q}}if(!J)console.log(` E-MACHINE: Creating frame with ${Q.mempool.length} transactions...`);if(z1)console.log(`\uD83D\uDD0D PROOF-HEADER: from=${x6(Q.proofHeader.fromEntity)}, to=${x6(Q.proofHeader.toEntity)}`);let W=cL(Q);W.proofHeader.disputeNonce=Q.currentHeight+1;let G=Q.proofHeader.fromEntity,D=Array.from($.eReplicas.values()).find((o)=>o.state.entityId===G)?.state.lastFinalizedJHeight||0,P=X??D,H=[],N=[],C=[],L=[];if(z1)console.log(`\uD83D\uDD0D MEMPOOL-BEFORE-PROCESS: ${Q.mempool.length} txs:`,Q.mempool.map((o)=>o.type));for(let o of Q.mempool){if(z1)console.log(`   \uD83D\uDD0D Processing accountTx type=${o.type}`);let z0=await VM(W,o,!0,$.timestamp,P,!0);if(!z0.success){let e=Q.mempool.indexOf(o);if(e>=0)Q.mempool.splice(e,1),console.log(` Removed failed tx from mempool: ${o.type} (${z0.error})`);return{success:!1,error:`Tx validation failed: ${z0.error}`,events:H}}if(H.push(...z0.events),z1)console.log(`\uD83D\uDD0D TX-RESULT: type=${o.type}, hasSecret=${!!z0.secret}, hasHashlock=${!!z0.hashlock}`);if(z0.secret&&z0.hashlock){if(!J)console.log(` Collected secret from ${o.type}`);N.push({secret:z0.secret,hashlock:z0.hashlock})}if(z0.swapOfferCreated){if(!J)console.log(`\uD83D\uDCCA Collected swap offer: ${z0.swapOfferCreated.offerId}`);C.push(z0.swapOfferCreated)}if(z0.swapOfferCancelled){if(!J)console.log(`\uD83D\uDCCA Collected swap cancel: ${z0.swapOfferCancelled.offerId}`);L.push(z0.swapOfferCancelled)}}let B=[],E=[],I=[],_=Array.from(W.deltas.entries()).sort((o,z0)=>o[0]-z0[0]);for(let[o,z0]of _){let e=z0.offdelta;if(!gx(z0,e)){if(z1)console.log(`  Skipping unused token ${o} from frame (zero delta/limits/holds)`);continue}B.push(o),E.push(e),I.push({...z0})}if(!J){if(console.log(`\uD83D\uDCCA Frame state after processing: ${B.length} tokens`),z1)console.log(`\uD83D\uDCCA TokenIds: [${B.join(", ")}]`),console.log(`\uD83D\uDCCA Deltas: [${E.map((o)=>o.toString()).join(", ")}]`),console.log("\uD83D\uDCCA FullDeltaStates:",I.map((o)=>({tokenId:o.tokenId,collateral:o.collateral?.toString(),leftCreditLimit:o.leftCreditLimit?.toString(),rightCreditLimit:o.rightCreditLimit?.toString()})))}let f=E5(Q.proofHeader.fromEntity,Q.proofHeader.toEntity),x=Q.currentFrame?.timestamp??0,g=Math.max($.timestamp,x+1);if(g>$.timestamp&&z1)console.log(` TIMESTAMP-SYNC: Using monotonic timestamp ${g} (prev=${x}, env=${$.timestamp})`);let h=structuredClone([...Q.mempool]),v={height:Q.currentHeight+1,timestamp:g,jHeight:P,accountTxs:h,prevFrameHash:Q.currentHeight===0?"genesis":Q.currentFrame.stateHash||"",stateHash:"",byLeft:f,tokenIds:B,deltas:E,fullDeltaStates:I};if(v.stateHash=await mx(v),z1)console.log(`[HASH-DEBUG] Frame creation for ${Q.proofHeader.toEntity.slice(-4)}:`),console.log(`  height: ${v.height}`),console.log(`  timestamp: ${v.timestamp}`),console.log(`  jHeight: ${v.jHeight}`),console.log(`  prevFrameHash: ${v.prevFrameHash?.slice(0,20)}...`),console.log(`  accountTxs count: ${v.accountTxs.length}`),console.log(`  accountTxs types: [${v.accountTxs.map((o)=>o.type).join(", ")}]`),console.log(`  tokenIds: [${v.tokenIds.join(", ")}]`),console.log(`  deltas: [${v.deltas.map((o)=>o.toString()).join(", ")}]`),console.log(`  fullDeltaStates count: ${I.length}`),console.log(`  byLeft: ${v.byLeft}`),console.log(`  stateHash: ${v.stateHash}`);let b;try{b=x20(v,"proposeAccountFrame")}catch(o){return console.warn(` Frame validation failed: ${o instanceof Error?o.message:String(o)}`),{success:!1,error:`Frame validation failed: ${o.message}`,events:q}}let m=h1(b).length;if(m>j40)return console.warn(` Frame too large: ${m} bytes`),{success:!1,error:`Frame exceeds 1MB limit: ${m} bytes`,events:q};console.log(` Frame size: ${m} bytes (${(m/j40*100).toFixed(2)}% of 1MB limit)`);let K=Q.proofHeader.fromEntity,M=Array.from($.eReplicas.values()).find((o)=>o.state.entityId===K);if(!M)return{success:!1,error:`Cannot find replica for entity ${K.slice(-4)}`,events:q};let j=M.state.config.validators[0];if(!j)return{success:!1,error:`Entity ${K.slice(-4)} has no validators`,events:q};console.log(`\uD83D\uDD10 HANKO-SIGN: entityId=${K.slice(-4)}  signerId=${j.slice(-4)}`);let{signHashesAsSingleEntity:O}=await Promise.resolve().then(() => (F2(),S4)),F=(await O($,K,j,[b.stateHash]))[0];if(!F)return{success:!1,error:"Failed to build frame hanko",events:q};Q.currentFrameHanko=F;let{buildAccountProofBody:A,createDisputeProofHash:T}=await Promise.resolve().then(() => (g3(),Eq)),V=R40($);console.log(`\uD83D\uDD10 DISPUTE-SIGN: depositoryAddress=${V}, counterparty=${Q.proofHeader.toEntity.slice(-4)}`);let w=A(W),k=T(W,w.proofBodyHash,V);console.log(`\uD83D\uDD10 DISPUTE-SIGN: disputeHash=${k.slice(0,18)}..., proofBodyHash=${w.proofBodyHash.slice(0,18)}...`);let y=(await O($,K,j,[k]))[0];if(!y)return{success:!1,error:"Failed to build dispute hanko",events:q};if(Q.currentDisputeProofHanko=y,Q.currentDisputeProofCooperativeNonce=W.proofHeader.cooperativeNonce,Q.currentDisputeProofBodyHash=w.proofBodyHash,!Q.disputeProofNoncesByHash)Q.disputeProofNoncesByHash={};if(Q.disputeProofNoncesByHash[w.proofBodyHash]=W.proofHeader.cooperativeNonce,!Q.disputeProofBodiesByHash)Q.disputeProofBodiesByHash={};Q.disputeProofBodiesByHash[w.proofBodyHash]=w.proofBodyStruct,console.log(` Signed frame + dispute proof for account ${Q.proofHeader.toEntity.slice(-4)}`),Q.pendingFrame=b,Q.sentTransitions=Q.mempool.length,console.log(`\uD83D\uDD12 PROPOSE: Account ${Q.proofHeader.fromEntity.slice(-4)}:${Q.proofHeader.toEntity.slice(-4)} pendingFrame=${b.height}, txs=${b.accountTxs.length}`),Q.mempool=[],q.push(`\uD83D\uDE80 Proposed frame ${b.height} with ${b.accountTxs.length} transactions`);let u={fromEntityId:Q.proofHeader.fromEntity,toEntityId:Q.proofHeader.toEntity,height:b.height,newAccountFrame:b,newHanko:F,newDisputeHanko:y,newDisputeHash:k,newDisputeProofBodyHash:w.proofBodyHash,counter:Z?Q.proofHeader.cooperativeNonce:++Q.proofHeader.cooperativeNonce},c=[{hash:b.stateHash,type:"accountFrame",context:`account:${z.slice(-8)}:frame:${b.height}`},{hash:k,type:"dispute",context:`account:${z.slice(-8)}:dispute`}];return{success:!0,accountInput:u,events:q,revealedSecrets:N,swapOffersCreated:C,swapOffersCancelled:L,hashesToSign:c}}async function ux($,Q,Z){console.log(`\uD83D\uDCE8 A-MACHINE: Received AccountInput from ${Z.fromEntityId.slice(-4)}, pendingFrame=${Q.pendingFrame?`h${Q.pendingFrame.height}`:"none"}, currentHeight=${Q.currentHeight}`),console.log(`\uD83D\uDCE8 A-MACHINE INPUT: height=${Z.height||"none"}, hasACK=${!!Z.prevHanko}, hasNewFrame=${!!Z.newAccountFrame}, counter=${Z.counter}`);let X=[],Y=[],z=!1;if(Z.counter!==void 0){let J=Q.pendingFrame&&Z.height===Q.pendingFrame.height&&!!Z.prevHanko,q;if(J){if(q=Z.counter>0&&Z.counter<=yx&&Z.counter>=Q.ackedTransitions,z1)console.log(`\uD83D\uDD0D Counter validation (ACK for pendingFrame): ${Z.counter} vs acked=${Q.ackedTransitions}, valid=${q}`)}else if(q=C40(Q,Z.counter),z1)console.log(`\uD83D\uDD0D Counter validation: ${Z.counter} vs acked=${Q.ackedTransitions}, height=${Q.currentHeight}, valid=${q}`);if(!q)return{success:!1,error:`Replay attack detected: counter ${Z.counter} invalid (expected ${Q.ackedTransitions+1})`,events:X}}else return{success:!1,error:"Missing counter - replay protection requires sequential counter",events:X};if(Z.newDisputeHanko!==void 0&&Z.newDisputeHanko!==null){if(typeof Z.newDisputeHanko!=="string")return{success:!1,error:"Invalid dispute hanko type",events:X};let J=Z.newDisputeHanko.toLowerCase(),q=J.startsWith("0x")?J.slice(2):J;if(q.length===0)return{success:!1,error:"Invalid dispute hanko (empty)",events:X};if(q.length%2!==0)return{success:!1,error:"Invalid dispute hanko (odd length)",events:X}}if(Q.pendingFrame&&Z.height===Q.pendingFrame.height&&Z.prevHanko){console.log(` Received confirmation for pending frame ${Z.height}`),console.log(` ACK-DEBUG: fromEntity=${Z.fromEntityId.slice(-4)}, toEntity=${Z.toEntityId.slice(-4)}, counter=${Z.counter}`);let J=Q.pendingFrame.stateHash,q=Z.prevHanko;if(!q)return{success:!1,error:"Missing ACK hanko",events:X};console.log("\uD83D\uDD10 HANKO-ACK-VERIFY: Verifying ACK hanko for our pending frame");let{verifyHankoForHash:W}=await Promise.resolve().then(() => (F2(),S4)),G=Q.proofHeader.toEntity,{valid:U,entityId:D}=await W(q,J,G,$);if(!U)return{success:!1,error:"Invalid ACK hanko signature",events:X};if(!D||D.toLowerCase()!==G.toLowerCase())return{success:!1,error:`ACK hanko entityId mismatch: got ${D?.slice(-4)}, expected ${G.slice(-4)}`,events:X};console.log(` HANKO-ACK-VERIFIED: ACK from ${D.slice(-4)}`),z=!0;{if(Z.counter!==void 0)Q.ackedTransitions=Z.counter,console.log(` ACK-BLOCK COUNTER-UPDATE: ackedTransitions now ${Q.ackedTransitions} (from ACK processing)`);console.log(`\uD83D\uDD12 COMMIT: Frame ${Q.pendingFrame.height}`),console.log(`  Transactions: ${Q.pendingFrame.accountTxs.length}`),console.log("  Transactions detail:",Q.pendingFrame.accountTxs),console.log(`  TokenIds: ${Q.pendingFrame.tokenIds.join(",")}`),console.log(`  Deltas: ${Q.pendingFrame.deltas.map((P)=>`${P}`).join(",")}`),console.log(`  StateHash: ${J.slice(0,16)}...`);{let{counterparty:P}=i6(Q,Q.proofHeader.fromEntity);console.log(`\uD83D\uDD13 PROPOSER-COMMIT: Re-executing ${Q.pendingFrame.accountTxs.length} txs for ${P.slice(-4)}`);let H=Q.pendingFrame.jHeight??Q.currentHeight;for(let N of Q.pendingFrame.accountTxs){let C=await VM(Q,N,!0,Q.pendingFrame.timestamp,H);if(!C.success)throw console.error(` PROPOSER-COMMIT FAILED for tx type=${N.type}: ${C.error}`),Error(`Frame ${Q.pendingFrame.height} commit failed: ${N.type} - ${C.error}`);if(C.timedOutHashlock)Y.push(C.timedOutHashlock)}if(console.log(`\uD83D\uDCB3 PROPOSER-COMMIT COMPLETE: Deltas after re-execution for ${P.slice(-4)}:`,Array.from(Q.deltas.entries()).map(([N,C])=>({tokenId:N,collateral:C.collateral?.toString(),ondelta:C.ondelta?.toString(),offdelta:C.offdelta?.toString(),leftCreditLimit:C.leftCreditLimit?.toString(),rightCreditLimit:C.rightCreditLimit?.toString()}))),delete Q.clonedForValidation,Q.currentFrame=structuredClone(Q.pendingFrame),Q.currentHeight=Q.pendingFrame.height,Q.proofHeader.disputeNonce=Q.currentHeight,Z.newDisputeHanko){Q.counterpartyDisputeProofHanko=Z.newDisputeHanko;let N=Z.counter!==void 0?Z.counter-1:Q.proofHeader.cooperativeNonce;if(Q.counterpartyDisputeProofCooperativeNonce=N,Z.newDisputeProofBodyHash){if(Q.counterpartyDisputeProofBodyHash=Z.newDisputeProofBodyHash,!Q.disputeProofNoncesByHash)Q.disputeProofNoncesByHash={};Q.disputeProofNoncesByHash[Z.newDisputeProofBodyHash]=N}console.log(" Stored counterparty dispute hanko from ACK")}if(Z.newSettlementHanko)Q.counterpartySettlementHanko=Z.newSettlementHanko,console.log(" Stored counterparty settlement hanko from ACK");if(Q.frameHistory.push({...Q.pendingFrame}),Q.frameHistory.length>10)Q.frameHistory.shift();console.log(`\uD83D\uDCDA Frame ${Q.pendingFrame.height} added to history (total: ${Q.frameHistory.length})`)}if(delete Q.pendingFrame,Q.sentTransitions=0,delete Q.clonedForValidation,Q.rollbackCount=Math.max(0,Q.rollbackCount-1),Q.rollbackCount===0)delete Q.lastRollbackFrameHash;if(console.log(` PENDING-CLEARED: Frame ${Z.height} confirmed, mempool now has ${Q.mempool.length} txs: [${Q.mempool.map((P)=>P.type).join(",")}]`),X.push(` Frame ${Z.height} confirmed and committed`),!Z.newAccountFrame){if(Q.mempool.length>0){console.log(`\uD83D\uDE80 CHAINED-PROPOSAL: ACK received, mempool has ${Q.mempool.length} txs - proposing next frame immediately`);let P=await hx($,Q);if(P.success&&P.accountInput)return{success:!0,response:P.accountInput,events:[...X,...P.events],timedOutHashlocks:Y,...P.revealedSecrets&&{revealedSecrets:P.revealedSecrets},...P.swapOffersCreated&&{swapOffersCreated:P.swapOffersCreated},...P.swapOffersCancelled&&{swapOffersCancelled:P.swapOffersCancelled},...P.hashesToSign&&P.hashesToSign.length>0&&{hashesToSign:P.hashesToSign}}}if(z1)console.log(`\uD83D\uDD0D RETURN-ACK-ONLY: frame ${Z.height} ACKed, no new frame bundled`);return{success:!0,events:X,timedOutHashlocks:Y}}console.log("\uD83D\uDCE6 BATCHED-MESSAGE: ACK processed, now processing bundled new frame...")}}if(Z.newAccountFrame){let J=Z.newAccountFrame,q=Q.currentFrame?.timestamp;if(!N40(J,$.timestamp,q))return{success:!1,error:"Invalid frame structure",events:X};let W=Q.currentHeight===0?"genesis":Q.currentFrame.stateHash||"";if(J.prevFrameHash!==W)return console.warn(` FRAME-CHAIN: prevHash mismatch at height ${Q.currentHeight}`),{success:!1,error:`Frame chain broken: prevFrameHash mismatch (expected ${W.slice(0,16)}...)`,events:X};if(console.log(` Frame chain verified: prevFrameHash matches frame ${Q.currentHeight}`),Q.pendingFrame&&J.height===Q.pendingFrame.height){console.log(`\uD83D\uDD04 SIMULTANEOUS-PROPOSALS: Both proposed frame ${J.height}`);let l=E5(Q.proofHeader.fromEntity,Q.proofHeader.toEntity);if(z1)console.log(`\uD83D\uDD0D TIEBREAKER: fromEntity=${Q.proofHeader.fromEntity.slice(-4)}, toEntity=${Q.proofHeader.toEntity.slice(-4)}, isLeft=${l}`);if(l){if(console.log(`\uD83D\uDCE4 LEFT-WINS: Ignoring right's frame ${J.height}, waiting for them to accept ours`),X.push(`\uD83D\uDCE4 LEFT-WINS: Ignored RIGHT's frame ${J.height} (waiting for their ACK)`),$.info("consensus","LEFT-WINS",{fromEntity:Q.proofHeader.fromEntity,toEntity:Q.proofHeader.toEntity,height:J.height},Q.proofHeader.fromEntity),Q.mempool.length>0)console.log(`\uD83D\uDCE4 LEFT-WINS-BUT-HAS-MEMPOOL: ${Q.mempool.length} txs waiting - notifying counterparty`),X.push(` LEFT has ${Q.mempool.length} pending txs while waiting for RIGHT's ACK`);return{success:!0,events:X}}else{let q0=J.stateHash;if(Q.lastRollbackFrameHash===q0)console.log(` ROLLBACK-DEDUPE: Already rolled back for frame ${q0.slice(0,16)}... - ignoring duplicate`);else if(Q.rollbackCount===0){let Y0=0;if(Q.pendingFrame)Y0=Q.pendingFrame.accountTxs.length,console.log(`\uD83D\uDCE5 RIGHT-ROLLBACK: Restoring ${Y0} txs to mempool`),Q.mempool.unshift(...Q.pendingFrame.accountTxs),console.log(`\uD83D\uDCE5 Mempool now has ${Q.mempool.length} txs after rollback restore`),X.push(`\uD83D\uDD04 ROLLBACK: Discarded our frame ${Q.pendingFrame.height}, restored ${Y0} txs to mempool`),$.info("consensus","ROLLBACK",{fromEntity:Q.proofHeader.fromEntity,toEntity:Q.proofHeader.toEntity,height:Q.pendingFrame.height,restoredTxCount:Y0},Q.proofHeader.fromEntity);Q.sentTransitions=0,delete Q.pendingFrame,delete Q.clonedForValidation,Q.rollbackCount++,Q.lastRollbackFrameHash=q0,console.log(`\uD83D\uDCE5 RIGHT-ROLLBACK: Accepting left's frame (rollbacks: ${Q.rollbackCount})`),X.push(`\uD83D\uDCE5 Accepted LEFT's frame ${J.height} (we are RIGHT, deterministic tiebreaker)`)}else return console.warn(` ROLLBACK-LIMIT: ${Q.rollbackCount}x - consensus stalled`),{success:!1,error:"Multiple rollbacks detected - consensus failure",events:X}}}if(z1)console.log(`\uD83D\uDD0D SEQUENCE-CHECK: receivedFrame.height=${J.height}, currentHeight=${Q.currentHeight}, expected=${Q.currentHeight+1}`);if(J.height!==Q.currentHeight+1)return console.log(` Frame sequence mismatch: expected ${Q.currentHeight+1}, got ${J.height}`),{success:!1,error:`Frame sequence mismatch: expected ${Q.currentHeight+1}, got ${J.height}`,events:X};let G=Z.newHanko;if(!G)return{success:!1,error:"SECURITY: Frame must have hanko signature",events:X};console.log(`\uD83D\uDD10 HANKO-VERIFY: Verifying hanko for frame ${J.height} from ${Z.fromEntityId.slice(-4)}`);let{verifyHankoForHash:U}=await Promise.resolve().then(() => (F2(),S4)),{valid:D,entityId:P}=await U(G,J.stateHash,Z.fromEntityId,$);if(!D||!P)return{success:!1,error:`Invalid hanko signature from ${Z.fromEntityId.slice(-4)}`,events:X};if(console.log(` HANKO-VERIFIED: Frame from ${P.slice(-4)}`),Q.counterpartyFrameHanko=G,Z.newDisputeHanko&&!z){Q.pendingCounterpartyDisputeHanko=Z.newDisputeHanko;let l=Z.counter!==void 0?Z.counter-1:Q.proofHeader.cooperativeNonce;if(Q.pendingCounterpartyDisputeProofCooperativeNonce=l,Z.newDisputeProofBodyHash)Q.pendingCounterpartyDisputeProofBodyHash=Z.newDisputeProofBodyHash;console.log("\uD83D\uDCDD Stored pending counterparty dispute hanko (will commit with frame)")}let H=Q.proofHeader.fromEntity,C=Array.from($.eReplicas.values()).find((l)=>l.state.entityId===H)?.state.lastFinalizedJHeight||0,L=J.jHeight??C,B=cL(Q),E=[];console.log(`\uD83D\uDD0D FRAME-${J.height} RECEIVER DEBUG:`),console.log(`   TXs to process: ${J.accountTxs.length} - [${J.accountTxs.map((l)=>l.type).join(", ")}]`);for(let[l,q0]of B.deltas.entries())console.log(`   Initial delta[${l}]: ondelta=${q0.ondelta}, offdelta=${q0.offdelta}, collateral=${q0.collateral}`);let I=[],_=[],f=[];for(let l of J.accountTxs){let q0=await VM(B,l,!1,J.timestamp,L,!0);if(!q0.success)return{success:!1,error:`Frame application failed: ${q0.error}`,events:X};if(E.push(...q0.events),z1)console.log(`\uD83D\uDD0D TX-PROCESSED: ${l.type}, success=${q0.success}`);if(q0.secret&&q0.hashlock)I.push({secret:q0.secret,hashlock:q0.hashlock});if(q0.timedOutHashlock)Y.push(q0.timedOutHashlock);if(q0.swapOfferCreated)_.push(q0.swapOfferCreated);if(q0.swapOfferCancelled)f.push(q0.swapOfferCancelled)}let x=[],g=[],h=Array.from(B.deltas.entries()).sort((l,q0)=>l[0]-q0[0]);for(let[l,q0]of h){let Y0=q0.offdelta;if(!gx(q0,Y0)){console.log(`  RECEIVER: Skipping unused token ${l} from validation (zero delta/limits/holds)`);continue}x.push(l),g.push(Y0)}if(z1)console.log(`\uD83D\uDD0D RECEIVER: Computed ${x.length} tokens after filtering: [${x.join(", ")}]`);let v=[];for(let[l,q0]of h){let Y0=q0.offdelta;if(!gx(q0,Y0))continue;v.push({...q0})}let b=Buffer.from(g.map((l)=>l.toString()).join(",")).toString("hex"),m=Buffer.from(J.deltas.map((l)=>l.toString()).join(",")).toString("hex");if(console.log(`\uD83D\uDD0D STATE-VERIFY Frame ${J.height}:`),console.log(`   Our tokenIds: [${x.join(", ")}], deltas: [${g.map((l)=>l.toString()).join(", ")}]`),console.log(`   Their tokenIds: [${J.tokenIds.join(", ")}], deltas: [${J.deltas.map((l)=>l.toString()).join(", ")}]`),console.log(`  Our computed:  ${b.slice(0,32)}...`),console.log(`  Their claimed: ${m.slice(0,32)}...`),b!==m)return console.warn(` CONSENSUS: Frame ${J.height} - state mismatch (our: ${b.slice(0,16)}... vs their: ${m.slice(0,16)}...)`),{success:!1,error:"Bilateral consensus failure - states don't match",events:X};let K=J.fullDeltaStates||[];if(v.length!==K.length)return console.warn(` SECURITY: fullDeltaStates count mismatch (our: ${v.length}, their: ${K.length})`),{success:!1,error:"Bilateral state injection detected - delta count mismatch",events:X};for(let l=0;l<v.length;l++){let q0=v[l],Y0=K[l];if(q0.offdelta!==Y0.offdelta||q0.leftCreditLimit!==Y0.leftCreditLimit||q0.rightCreditLimit!==Y0.rightCreditLimit||q0.leftAllowance!==Y0.leftAllowance||q0.rightAllowance!==Y0.rightAllowance)return console.warn(` SECURITY: Bilateral field mismatch at token ${q0.tokenId}:`),console.warn(`   offdelta: our=${q0.offdelta}, their=${Y0.offdelta}`),console.warn(`   leftCreditLimit: our=${q0.leftCreditLimit}, their=${Y0.leftCreditLimit}`),console.warn(`   rightCreditLimit: our=${q0.rightCreditLimit}, their=${Y0.rightCreditLimit}`),{success:!1,error:"Bilateral state injection detected - credit/allowance mismatch",events:X}}if(z1)console.log("\uD83D\uDD0D ABOUT-TO-VERIFY-HASH: Computing frame hash...");if(z1)console.log(`\uD83D\uDD0D COMPUTING-HASH: Creating hash for frame ${J.height}...`);let M=await mx({height:J.height,timestamp:J.timestamp,jHeight:J.jHeight,accountTxs:J.accountTxs,prevFrameHash:J.prevFrameHash,tokenIds:x,deltas:g,fullDeltaStates:v,stateHash:"",byLeft:J.byLeft??!0});if(M!==J.stateHash)return console.warn(" SECURITY: Frame hash mismatch after validation"),console.warn(`   Recomputed: ${M.slice(0,16)}...`),console.warn(`   Claimed:    ${J.stateHash.slice(0,16)}...`),{success:!1,error:"Frame hash verification failed - dispute proof mismatch",events:X};console.log(` CONSENSUS-SUCCESS: Both sides computed identical state for frame ${J.height}`),$.emit("BilateralFrameCommitted",{fromEntity:Z.fromEntityId,toEntity:Q.proofHeader.fromEntity,height:J.height,txCount:J.accountTxs.length,tokenIds:x,stateHash:M});let{counterparty:j}=i6(Q,H);if(z1)console.log(`\uD83D\uDD0D RECEIVER-COMMIT: Re-executing ${J.accountTxs.length} txs for ${j.slice(-4)}`);for(let l of J.accountTxs){let q0=J.jHeight||Q.currentHeight,Y0=await VM(Q,l,!1,J.timestamp,q0);if(!Y0.success)throw console.error(` RECEIVER-COMMIT FAILED for tx type=${l.type}: ${Y0.error}`),Error(`Frame ${J.height} commit failed: ${l.type} - ${Y0.error}`)}if(console.log(`\uD83D\uDCB3 RECEIVER-COMMIT COMPLETE: Deltas after re-execution for ${j.slice(-4)}:`,Array.from(Q.deltas.entries()).map(([l,q0])=>({tokenId:l,collateral:q0.collateral?.toString(),leftCreditLimit:q0.leftCreditLimit?.toString(),rightCreditLimit:q0.rightCreditLimit?.toString(),ondelta:q0.ondelta?.toString(),offdelta:q0.offdelta?.toString()}))),B.pendingForward)Q.pendingForward=B.pendingForward,console.log(`\uD83D\uDD00 Copied pendingForward for multi-hop: route=[${B.pendingForward.route.map((l)=>l.slice(-4)).join(",")}]`);if(Q.currentFrame=structuredClone({height:J.height,timestamp:J.timestamp,jHeight:J.jHeight,accountTxs:J.accountTxs,prevFrameHash:J.prevFrameHash,tokenIds:x,deltas:g,stateHash:M,byLeft:J.byLeft??!0,fullDeltaStates:v}),Q.currentHeight=J.height,Q.proofHeader.disputeNonce=Q.currentHeight,Q.pendingCounterpartyDisputeHanko){if(Q.counterpartyDisputeProofHanko=Q.pendingCounterpartyDisputeHanko,delete Q.pendingCounterpartyDisputeHanko,Q.pendingCounterpartyDisputeProofCooperativeNonce!==void 0)Q.counterpartyDisputeProofCooperativeNonce=Q.pendingCounterpartyDisputeProofCooperativeNonce,delete Q.pendingCounterpartyDisputeProofCooperativeNonce;if(Q.pendingCounterpartyDisputeProofBodyHash){if(Q.counterpartyDisputeProofBodyHash=Q.pendingCounterpartyDisputeProofBodyHash,!Q.disputeProofNoncesByHash)Q.disputeProofNoncesByHash={};if(Q.counterpartyDisputeProofCooperativeNonce!==void 0&&Q.counterpartyDisputeProofBodyHash)Q.disputeProofNoncesByHash[Q.counterpartyDisputeProofBodyHash]=Q.counterpartyDisputeProofCooperativeNonce;delete Q.pendingCounterpartyDisputeProofBodyHash}console.log(` Committed counterparty dispute hanko (frame ${J.height} accepted)`)}if(Q.frameHistory.push({...J}),Q.frameHistory.length>10)Q.frameHistory.shift();if(console.log(`\uD83D\uDCDA Frame ${J.height} accepted and added to history (total: ${Q.frameHistory.length})`),Z.counter!==void 0)Q.ackedTransitions=Z.counter,console.log(` COUNTER-UPDATE: ackedTransitions now ${Q.ackedTransitions} (next expected: ${Q.ackedTransitions+1})`);X.push(...E),X.push(`\uD83E\uDD1D Accepted frame ${J.height} from Entity ${Z.fromEntityId.slice(-4)}`);let O=Q.proofHeader.fromEntity,F=Array.from($.eReplicas.values()).find((l)=>l.state.entityId===O)?.state.config.validators[0];if(!F)return{success:!1,error:`Cannot find signerId for ACK from ${O.slice(-4)}`,events:X};console.log(`\uD83D\uDD10 HANKO-ACK: entityId=${O.slice(-4)}  signerId=${F.slice(-4)}`);let{signHashesAsSingleEntity:A}=await Promise.resolve().then(() => (F2(),S4)),V=(await A($,O,F,[J.stateHash]))[0];if(!V)return{success:!1,error:"Failed to build ACK hanko",events:X};console.log(`\uD83D\uDCE4 ACK-SEND: Preparing ACK for frame ${J.height} from ${Q.proofHeader.fromEntity.slice(-4)} to ${Z.fromEntityId.slice(-4)}`);let w=!1,k,{buildAccountProofBody:S,createDisputeProofHash:y}=await Promise.resolve().then(() => (g3(),Eq)),u=R40($),c=S(Q),o=y(Q,c.proofBodyHash,u),e=(await A($,O,F,[o]))[0],s=Q.proofHeader.cooperativeNonce;if(!Q.disputeProofNoncesByHash)Q.disputeProofNoncesByHash={};if(Q.disputeProofNoncesByHash[c.proofBodyHash]=s,!Q.disputeProofBodiesByHash)Q.disputeProofBodiesByHash={};Q.disputeProofBodiesByHash[c.proofBodyHash]=c.proofBodyStruct;let J0={fromEntityId:Q.proofHeader.fromEntity,toEntityId:Z.fromEntityId,height:J.height,prevHanko:V,...e&&{newDisputeHanko:e},newDisputeHash:o,newDisputeProofBodyHash:c.proofBodyHash,counter:0};if(z1)console.log(`\uD83D\uDD0D BATCH-CHECK for account ${Z.fromEntityId.slice(-4)}: mempool=${Q.mempool.length}, pendingFrame=${!!Q.pendingFrame}, mempoolTxs=[${Q.mempool.map((l)=>l.type).join(",")}]`);if(Q.mempool.length>0&&!Q.pendingFrame){if(console.log("\uD83D\uDCE6 BATCH-OPTIMIZATION: Sending ACK + new frame in single message (Channel.ts pattern)"),k=await hx($,Q,!0),k.success&&k.accountInput){if(w=!0,k.accountInput.newAccountFrame)J0.newAccountFrame=k.accountInput.newAccountFrame;if(k.accountInput.newHanko)J0.newHanko=k.accountInput.newHanko;let l=k.accountInput.newAccountFrame?.height||0;console.log(` Batched ACK for frame ${J.height} + proposal for frame ${l}`),X.push(`\uD83D\uDCE4 Batched ACK + frame ${l}`)}}if(!w&&e)Q.currentDisputeProofHanko=e,Q.currentDisputeProofCooperativeNonce=s,Q.currentDisputeProofBodyHash=c.proofBodyHash;J0.counter=++Q.proofHeader.cooperativeNonce,console.log(`\uD83D\uDD22 Message counter: ${J0.counter} (batched=${w})`);let t=[...I,...k?.revealedSecrets||[]],Z0=[..._,...k?.swapOffersCreated||[]],N0=[...f,...k?.swapOffersCancelled||[]],i=[{hash:J.stateHash,type:"accountFrame",context:`account:${Z.fromEntityId.slice(-8)}:ack:${J.height}`},{hash:o,type:"dispute",context:`account:${Z.fromEntityId.slice(-8)}:ack-dispute`},...k?.hashesToSign||[]];if(z1)console.log(`\uD83D\uDD0D RETURN-RESPONSE: h=${J0.height} prevHanko=${!!J0.prevHanko} newFrame=${!!J0.newAccountFrame}`);return{success:!0,response:J0,events:X,revealedSecrets:t,swapOffersCreated:Z0,swapOffersCancelled:N0,timedOutHashlocks:Y,...i.length>0&&{hashesToSign:i}}}if(z1)console.log("\uD83D\uDD0D RETURN-NO-RESPONSE: No response object");return{success:!0,events:X,swapOffersCreated:[],swapOffersCancelled:[],timedOutHashlocks:Y}}function sL0($,Q){if($.mempool.length>=DU)return console.log(` Mempool full: ${$.mempool.length} >= ${DU}`),!1;return $.mempool.push(Q),console.log(`\uD83D\uDCE5 Added ${Q.type} to mempool (${$.mempool.length}/${DU})`),!0}function L40($){let Q=$.mempool.length>0&&!$.pendingFrame;return console.error(`   shouldProposeFrame: mempool=${$.mempool.length}, pending=${!!$.pendingFrame}, result=${Q}`),Q}function tL0($){let Q=[];if(!$.accounts||!($.accounts instanceof Map))return console.log(` No accounts or accounts not a Map: ${typeof $.accounts}`),Q;for(let[Z,X]of $.accounts)if(L40(X))Q.push(Z);return Q}async function eL0($,Q){Q.proofBody={tokenIds:Array.from(Q.deltas.keys()).sort((P,H)=>P-H),deltas:Array.from(Q.deltas.keys()).sort((P,H)=>P-H).map((P)=>{let H=Q.deltas.get(P);if(!H)throw console.warn(`Missing delta for token ${P}`),Error(`Critical financial data missing: delta for token ${P}`);return H.ondelta+H.offdelta})};let{buildAccountProofBody:Z}=await Promise.resolve().then(() => (g3(),Eq)),X=Z(Q);Q.abiProofBody={encodedProofBody:X.encodedProofBody,proofBodyHash:X.proofBodyHash,lastUpdatedHeight:Q.currentHeight};let Y={fromEntity:Q.proofHeader.fromEntity,toEntity:Q.proofHeader.toEntity,cooperativeNonce:Q.proofHeader.cooperativeNonce,disputeNonce:Q.proofHeader.disputeNonce,tokenIds:Q.proofBody.tokenIds,deltas:Q.proofBody.deltas.map((P)=>P.toString())},z=h1(Y),q=(await WU(z)).slice(2),W=Q.proofHeader.fromEntity,U=Array.from($.eReplicas.values()).find((P)=>P.state.entityId===W)?.state.config.validators[0];if(!U)throw Error(`Cannot find signerId for proof from ${W.slice(-4)}`);console.log(`\uD83D\uDD10 PROOF-SIGN: entityId=${W.slice(-4)}  signerId=${U.slice(-4)}`);let D=sQ($,U,`0x${q}`);return Q.hankoSignature=D,console.log(`Generated account proof: ${Q.proofBody.tokenIds.length} tokens`),console.log(`  Simple hash: 0x${q.slice(0,20)}...`),console.log(`  ABI hash: ${X.proofBodyHash.slice(0,20)}...`),console.log(`  Locks: ${Q.locks.size}, Swaps: ${Q.swapOffers.size}`),{proofHash:`0x${q}`,signature:D,abiEncodedProofBody:X.encodedProofBody,abiProofBodyHash:X.proofBodyHash}}var DU=1000,yx=1e6,aL0=300000,j40=1048576;var lL=p(()=>{C8();y9();H8();B8();YJ();H40()});var dq={};x1(dq,{userAutoApprove:()=>MU,processSettleAction:()=>zT0,handleSettleUpdate:()=>ZT0,handleSettleReject:()=>JT0,handleSettlePropose:()=>QT0,handleSettleExecute:()=>YT0,handleSettleApprove:()=>XT0,canAutoApproveWorkspace:()=>qT0});function A40($){for(let Q of $){let Z=Q.leftDiff+Q.rightDiff+Q.collateralDiff;if(Z!==0n)throw Error(`Conservation law violated: leftDiff + rightDiff + collateralDiff = ${Z} (must be 0)`);let X=[Q.leftDiff<0n?-Q.leftDiff:Q.leftDiff,Q.rightDiff<0n?-Q.rightDiff:Q.rightDiff,Q.collateralDiff<0n?-Q.collateralDiff:Q.collateralDiff,Q.ondeltaDiff<0n?-Q.ondeltaDiff:Q.ondeltaDiff];for(let Y of X)if(Y>F40)throw Error(`Settlement diff exceeds maximum: ${Y} > ${F40}`)}}function $T0($){return $.map((Q)=>({tokenId:Q.tokenId,leftWithdrawing:Q.leftDiff<0n?-Q.leftDiff:0n,rightWithdrawing:Q.rightDiff<0n?-Q.rightDiff:0n}))}function OM($,Q,Z,X){let Y=$T0(Q);if(!Y.some((q)=>q.leftWithdrawing>0n||q.rightWithdrawing>0n))return console.log(` SETTLE-HOLD: No withdrawals to ${X} for workspace v${Z}`),null;let J=X==="set"?{type:"settle_hold",data:{workspaceVersion:Z,diffs:Y}}:{type:"settle_release",data:{workspaceVersion:Z,diffs:Y}};return console.log(`\uD83D\uDCE5 SETTLE-${X.toUpperCase()} op created for frame consensus (workspace v${Z})`),{accountId:$,tx:J}}async function QT0($,Q,Z){let{counterpartyEntityId:X,diffs:Y,forgiveTokenIds:z,memo:J}=Q.data,q=i1($),W=[],G=[];console.log(` settle_propose: ${$.entityId.slice(-4)}  ${X.slice(-4)}`),A40(Y);let U=q.accounts.get(X);if(!U)throw Error(`No account with ${X.slice(-4)}`);if(U.settlementWorkspace)throw Error("Settlement workspace already exists. Use settle_update or settle_reject first.");let D=K5($.entityId,X),P={diffs:Y,forgiveTokenIds:z||[],insuranceRegs:[],initiatedBy:D?"left":"right",status:"awaiting_counterparty",...J&&{memo:J},version:1,createdAt:q.timestamp,lastUpdatedAt:q.timestamp,broadcastByLeft:!D};U.settlementWorkspace=P;let H=OM(X,Y,1,"set");if(H)G.push(H);console.log(" settle_propose: Workspace created (version 1)"),K1(q,` Settlement proposed to ${X.slice(-4)} - awaiting response`);let N=l3(Z,X,"settle_propose"),C={type:"propose",diffs:Y,forgiveTokenIds:z||[],...J&&{memo:J},version:1};return W.push({entityId:X,signerId:N,entityTxs:[{type:"accountInput",data:{fromEntityId:$.entityId,toEntityId:X,settleAction:C}}]}),{newState:q,outputs:W,mempoolOps:G}}async function ZT0($,Q,Z){let{counterpartyEntityId:X,diffs:Y,forgiveTokenIds:z,memo:J}=Q.data,q=i1($),W=[],G=[];console.log(` settle_update: ${$.entityId.slice(-4)}  ${X.slice(-4)}`),A40(Y);let U=q.accounts.get(X);if(!U)throw Error(`No account with ${X.slice(-4)}`);if(!U.settlementWorkspace)throw Error("No settlement workspace to update. Use settle_propose first.");if(U.settlementWorkspace.leftHanko||U.settlementWorkspace.rightHanko)throw Error("Cannot update after signing. Use settle_reject to start over.");let D=U.settlementWorkspace.version,P=D+1,H=U.settlementWorkspace.diffs;if(U.settlementWorkspace.diffs=Y,U.settlementWorkspace.forgiveTokenIds=z||U.settlementWorkspace.forgiveTokenIds,J)U.settlementWorkspace.memo=J;U.settlementWorkspace.version=P;let N=OM(X,H,D,"release");if(N)G.push(N);let C=OM(X,Y,P,"set");if(C)G.push(C);U.settlementWorkspace.lastUpdatedAt=q.timestamp,U.settlementWorkspace.status="awaiting_counterparty",console.log(` settle_update: Workspace updated (version ${U.settlementWorkspace.version})`),K1(q,` Settlement updated (v${U.settlementWorkspace.version})`);let L=l3(Z,X,"settle_update"),B={type:"update",diffs:Y,forgiveTokenIds:U.settlementWorkspace.forgiveTokenIds,...U.settlementWorkspace.memo&&{memo:U.settlementWorkspace.memo},version:U.settlementWorkspace.version};return W.push({entityId:X,signerId:L,entityTxs:[{type:"accountInput",data:{fromEntityId:$.entityId,toEntityId:X,settleAction:B}}]}),{newState:q,outputs:W,mempoolOps:G}}async function XT0($,Q,Z){let{counterpartyEntityId:X}=Q.data,Y=i1($),z=[],J=[];console.log(` settle_approve: ${$.entityId.slice(-4)} signing settlement with ${X.slice(-4)}`);let q=Y.accounts.get(X);if(!q)throw Error(`No account with ${X.slice(-4)}`);if(!q.settlementWorkspace)throw Error("No settlement workspace to approve.");let W=q.settlementWorkspace,{iAmLeft:G}=i6(q,$.entityId);if(G?W.leftHanko:W.rightHanko)throw Error("Already signed this workspace.");let D=q.onChainSettlementNonce??0;W.cooperativeNonceAtSign=D,console.log(` Using on-chain settlement nonce: ${D} (local frame nonce: ${q.proofHeader.cooperativeNonce})`);let P=$.config.jurisdiction;if(!P)throw Error("No jurisdiction configured");let H=tf(q,W.diffs,P.depositoryAddress,D),N=$.config.validators[0];if(!N)throw Error("No validator configured for entity");let L=(await KR(Z,$.entityId,N,[H]))[0];if(!L)throw Error(`Failed to generate settlement hanko for ${N.slice(-4)}`);if(G)W.leftHanko=L;else W.rightHanko=L;if(G?W.rightHanko:W.leftHanko)W.status="ready_to_submit",console.log(" settle_approve: Both parties signed - ready to submit"),K1(Y," Settlement fully signed - ready to execute");else W.status="awaiting_counterparty",console.log(" settle_approve: We signed - awaiting counterparty"),K1(Y," Settlement signed - awaiting counterparty signature");let E=l3(Z,X,"settle_approve"),I={type:"approve",...L&&{hanko:L},version:W.version};z.push({entityId:X,signerId:E,entityTxs:[{type:"accountInput",data:{fromEntityId:$.entityId,toEntityId:X,settleAction:I}}]});let _=[{hash:H,type:"settlement",context:`settlement:${X.slice(-8)}:nonce:${D}`}];return{newState:Y,outputs:z,mempoolOps:J,hashesToSign:_}}async function YT0($,Q,Z){let{counterpartyEntityId:X}=Q.data,Y=i1($),z=[],J=[];console.log(` settle_execute: ${$.entityId.slice(-4)} executing settlement with ${X.slice(-4)}`);let q=Y.accounts.get(X);if(!q)throw Error(`No account with ${X.slice(-4)}`);if(!q.settlementWorkspace)throw Error("No settlement workspace to execute.");let W=q.settlementWorkspace;if(!W.leftHanko||!W.rightHanko)throw Error(`Settlement not fully signed. leftHanko=${!!W.leftHanko}, rightHanko=${!!W.rightHanko}`);if(!Y.jBatchState)Y.jBatchState=x7();let G=K5($.entityId,X),U=G?$.entityId:X,D=G?X:$.entityId,{iAmLeft:P}=i6(q,$.entityId),H=P?W.rightHanko:W.leftHanko,N=$.config.jurisdiction;if(!N?.entityProviderAddress)throw Error("No entityProvider configured in jurisdiction");GO(Y.jBatchState,U,D,W.diffs,W.forgiveTokenIds,W.insuranceRegs,H,N.entityProviderAddress,"0x",W.cooperativeNonceAtSign??q.proofHeader.cooperativeNonce,$.entityId),console.log(" settle_execute: Added to jBatch"),console.log(`   Left: ${U.slice(-4)}, Right: ${D.slice(-4)}`),console.log(`   Diffs: ${W.diffs.length}`);let C=OM(X,W.diffs,W.version,"release");if(C)J.push(C);return delete q.settlementWorkspace,K1(Y,` Settlement executed (${W.diffs.length} diffs) - use j_broadcast to commit`),{newState:Y,outputs:z,mempoolOps:J}}async function JT0($,Q,Z){let{counterpartyEntityId:X,reason:Y}=Q.data,z=i1($),J=[],q=[];console.log(` settle_reject: ${$.entityId.slice(-4)} rejecting settlement with ${X.slice(-4)}`);let W=z.accounts.get(X);if(!W)throw Error(`No account with ${X.slice(-4)}`);if(!W.settlementWorkspace)return console.log(" settle_reject: No workspace to reject (already cleared)"),{newState:z,outputs:J,mempoolOps:q};let G=W.settlementWorkspace.version,U=OM(X,W.settlementWorkspace.diffs,G,"release");if(U)q.push(U);delete W.settlementWorkspace,console.log(" settle_reject: Workspace cleared"),K1(z,` Settlement rejected${Y?`: ${Y}`:""}`);let D=l3(Z,X,"settle_reject"),P={type:"reject",...Y&&{memo:Y}};return J.push({entityId:X,signerId:D,entityTxs:[{type:"accountInput",data:{fromEntityId:$.entityId,toEntityId:X,settleAction:P}}]}),{newState:z,outputs:J,mempoolOps:q}}function zT0($,Q,Z,X,Y){let{iAmLeft:z}=i6($,X),J=!z;switch(Q.type){case"propose":{if($.settlementWorkspace)return{success:!1,message:"Workspace already exists"};let q={diffs:Q.diffs||[],forgiveTokenIds:Q.forgiveTokenIds||[],insuranceRegs:[],initiatedBy:J?"left":"right",status:"awaiting_counterparty",...Q.memo&&{memo:Q.memo},version:Q.version||1,createdAt:Y,lastUpdatedAt:Y,broadcastByLeft:J};return $.settlementWorkspace=q,console.log(`\uD83D\uDCE5 Received settle_propose from ${Z.slice(-4)}`),{success:!0,message:`Settlement proposed by ${Z.slice(-4)}`}}case"update":{if(!$.settlementWorkspace)return{success:!1,message:"No workspace to update"};if($.settlementWorkspace.leftHanko||$.settlementWorkspace.rightHanko)return{success:!1,message:"Cannot update after signing"};if($.settlementWorkspace.diffs=Q.diffs||$.settlementWorkspace.diffs,$.settlementWorkspace.forgiveTokenIds=Q.forgiveTokenIds||$.settlementWorkspace.forgiveTokenIds,Q.memo)$.settlementWorkspace.memo=Q.memo;return $.settlementWorkspace.version=Q.version||$.settlementWorkspace.version+1,$.settlementWorkspace.lastUpdatedAt=Y,console.log(`\uD83D\uDCE5 Received settle_update from ${Z.slice(-4)} (v${$.settlementWorkspace.version})`),{success:!0,message:`Settlement updated to v${$.settlementWorkspace.version}`}}case"approve":{if(!$.settlementWorkspace)return{success:!1,message:"No workspace to approve"};if(!Q.hanko)return{success:!1,message:"No hanko provided"};if(J)$.settlementWorkspace.leftHanko=Q.hanko;else $.settlementWorkspace.rightHanko=Q.hanko;if(z?$.settlementWorkspace.leftHanko:$.settlementWorkspace.rightHanko)$.settlementWorkspace.status="ready_to_submit";return console.log(`\uD83D\uDCE5 Received settle_approve from ${Z.slice(-4)}`),{success:!0,message:"Counterparty signed settlement"}}case"reject":return delete $.settlementWorkspace,console.log(`\uD83D\uDCE5 Received settle_reject from ${Z.slice(-4)}: ${Q.memo||"no reason"}`),{success:!0,message:`Settlement rejected by ${Z.slice(-4)}`};case"execute":return{success:!1,message:"Execute is a local operation"};default:return{success:!1,message:"Unknown settleAction type"}}}function MU($,Q){let Z=Q?$.leftDiff:$.rightDiff;if(Z<0n)return!1;if(Z>0n)return!0;if(Q)return $.ondeltaDiff>=0n;else return $.ondeltaDiff<=0n}function qT0($,Q){for(let Z of $.diffs)if(!MU(Z,Q))return!1;return!0}var F40;var WJ=p(()=>{C8();c6();h8();g3();F2();w2();F40=G5.MAX_PAYMENT_AMOUNT});function WT0($){if(typeof $==="bigint"){if(!iL($))throw Error("positive bigint expected, got "+$)}else gK($);return $}function KT0($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);return $===""?w40:BigInt("0x"+$)}function cx($){return KT0(uB(oL(T2($)).reverse()))}function GT0($,Q){gK(Q),$=WT0($);let Z=cB($.toString(16).padStart(Q*2,"0"));if(Z.length!==Q)throw Error("number too large");return Z}function B40($,Q){return GT0($,Q).reverse()}function oL($){return Uint8Array.from($)}function UT0($,Q,Z){return iL($)&&iL(Q)&&iL(Z)&&Q<=$&&$<Z}function dx($,Q,Z,X){if(!UT0(Q,Z,X))throw Error("expected valid "+$+": "+Z+" <= n < "+X+", got "+Q)}function E40($,Q={},Z={}){if(!$||typeof $!=="object")throw Error("expected valid options object");function X(z,J,q){let W=$[z];if(q&&W===void 0)return;let G=typeof W;if(G!==J||W===null)throw Error(`param "${z}" is invalid: expected ${J}, got ${G}`)}let Y=(z,J)=>Object.entries(z).forEach(([q,W])=>X(q,W,J));Y(Q,!1),Y(Z,!0)}var w40,iL=($)=>typeof $==="bigint"&&w40<=$;var I40=p(()=>{_z();_z();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */w40=BigInt(0)});function nL($,Q){let Z=$%Q;return Z>=_40?Z:Q+Z}function e7($,Q,Z){let X=$;while(Q-- >_40)X*=X,X%=Z;return X}var _40;var lx=p(()=>{/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */_40=BigInt(0)});function S40($,Q){return function(X){let Y=$(X);return{secretKey:Y,publicKey:Q(Y)}}}var f40=p(()=>{/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */});function VT0($){return E40($,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...$})}function k40($){let Q=VT0($),{P:Z,type:X,adjustScalarBytes:Y,powPminus2:z,randomBytes:J}=Q,q=X==="x25519";if(!q&&X!=="x448")throw Error("invalid type");let W=J||dB,G=q?255:448,U=q?32:56,D=q?BigInt(9):BigInt(5),P=q?BigInt(121665):BigInt(39081),H=q?rL**BigInt(254):rL**BigInt(447),N=q?BigInt(8)*rL**BigInt(251)-PU:BigInt(4)*rL**BigInt(445)-PU,C=H+N+PU,L=(j)=>nL(j,Z),B=E(D);function E(j){return B40(L(j),U)}function I(j){let O=oL(T2(j,U,"uCoordinate"));if(q)O[31]&=127;return L(cx(O))}function _(j){return cx(Y(oL(T2(j,U,"scalar"))))}function f(j,O){let R=b(I(O),_(j));if(R===DM)throw Error("invalid private or public key received");return E(R)}function x(j){return f(j,B)}let g=x,h=f;function v(j,O,R){let F=L(j*(O-R));return O=L(O-F),R=L(R+F),{x_2:O,x_3:R}}function b(j,O){dx("u",j,DM,Z),dx("scalar",O,H,C);let R=O,F=j,A=PU,T=DM,V=j,w=PU,k=DM;for(let y=BigInt(G-1);y>=DM;y--){let u=R>>y&PU;k^=u,{x_2:A,x_3:V}=v(k,A,V),{x_2:T,x_3:w}=v(k,T,w),k=u;let c=A+T,o=L(c*c),z0=A-T,e=L(z0*z0),s=o-e,J0=V+w,t=V-w,Z0=L(t*c),N0=L(J0*z0),i=Z0+N0,l=Z0-N0;V=L(i*i),w=L(F*L(l*l)),A=L(o*e),T=L(s*(o+L(P*s)))}({x_2:A,x_3:V}=v(k,A,V)),{x_2:T,x_3:w}=v(k,T,w);let S=z(T);return L(A*S)}let m={secretKey:U,publicKey:U,seed:U},K=(j=W(U))=>{return T2(j,m.seed,"seed"),j},M={randomSecretKey:K};return Object.freeze({keygen:S40(K,g),getSharedSecret:h,getPublicKey:g,scalarMult:f,scalarMultBase:x,utils:M,GuBytes:B.slice(),lengths:m})}var DM,PU,rL;var x40=p(()=>{I40();f40();lx();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */DM=BigInt(0),PU=BigInt(1),rL=BigInt(2)});function PT0($){let Q=BigInt(10),Z=BigInt(20),X=BigInt(40),Y=BigInt(80),z=v40,q=$*$%z*$%z,W=e7(q,b40,z)*q%z,G=e7(W,OT0,z)*$%z,U=e7(G,MT0,z)*G%z,D=e7(U,Q,z)*U%z,P=e7(D,Z,z)*D%z,H=e7(P,X,z)*P%z,N=e7(H,Y,z)*H%z,C=e7(N,Y,z)*H%z,L=e7(C,Q,z)*U%z;return{pow_p_5_8:e7(L,b40,z)*$%z,b2:q}}function HT0($){return $[0]&=248,$[31]&=127,$[31]|=64,$}var OT0,b40,DT0,MT0,i$1,v40,i3;var ix=p(()=>{lx();x40();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */OT0=BigInt(1),b40=BigInt(2),DT0=BigInt(3),MT0=BigInt(5),i$1=BigInt(8),v40=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed");i3=(()=>{let $=v40;return k40({P:$,type:"x25519",powPminus2:(Q)=>{let{pow_p_5_8:Z,b2:X}=PT0(Q);return nL(e7(Z,DT0,$)*X,$)},adjustScalarBytes:HT0})})()});function jT0($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function aL($){if(typeof $!=="boolean")throw Error(`boolean expected, not ${$}`)}function sL($){if(!Number.isSafeInteger($)||$<0)throw Error("positive integer expected, got "+$)}function R9($,Q,Z=""){let X=jT0($),Y=$?.length,z=Q!==void 0;if(!X||z&&Y!==Q){let J=Z&&`"${Z}" `,q=z?` of length ${Q}`:"",W=X?`length=${Y}`:`type=${typeof $}`;throw Error(J+"expected Uint8Array"+q+", got "+W)}return $}function ox($,Q=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(Q&&$.finished)throw Error("Hash#digest() has already been called")}function y40($,Q){R9($,void 0,"output");let Z=Q.outputLen;if($.length<Z)throw Error("digestInto() expects output buffer of length at least "+Z)}function sZ($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function tZ(...$){for(let Q=0;Q<$.length;Q++)$[Q].fill(0)}function RT0($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function g40($,Q){if(Q==null||typeof Q!=="object")throw Error("options must be defined");return Object.assign($,Q)}function h40($,Q){if($.length!==Q.length)return!1;let Z=0;for(let X=0;X<$.length;X++)Z|=$[X]^Q[X];return Z===0}function rx($,Q,Z=!0){if(Q===void 0)return new Uint8Array($);if(Q.length!==$)throw Error('"output" expected Uint8Array of length '+$+", got: "+Q.length);if(Z&&!CT0(Q))throw Error("invalid output, must be aligned");return Q}function m40($,Q,Z){aL(Z);let X=new Uint8Array(16),Y=RT0(X);return Y.setBigUint64(0,BigInt(Q),Z),Y.setBigUint64(8,BigInt($),Z),X}function CT0($){return $.byteOffset%4===0}function HU($){return Uint8Array.from($)}var NT0,nx=($,Q)=>{function Z(X,...Y){if(R9(X,void 0,"key"),!NT0)throw Error("Non little-endian hardware is not yet supported");if($.nonceLength!==void 0){let U=Y[0];R9(U,$.varSizeNonce?void 0:$.nonceLength,"nonce")}let z=$.tagLength;if(z&&Y[1]!==void 0)R9(Y[1],void 0,"AAD");let J=Q(X,...Y),q=(U,D)=>{if(D!==void 0){if(U!==2)throw Error("cipher output not supported");R9(D,void 0,"output")}},W=!1;return{encrypt(U,D){if(W)throw Error("cannot encrypt() twice with same key + nonce");return W=!0,R9(U),q(J.encrypt.length,D),J.encrypt(U,D)},decrypt(U,D){if(R9(U),z&&U.length<z)throw Error('"ciphertext" expected length bigger than tagLength='+z);return q(J.decrypt.length,D),J.decrypt(U,D)}}}return Object.assign(Z,$),Z};var tL=p(()=>{/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */NT0=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)()});function M1($,Q){return $<<Q|$>>>32-Q}function ax($){return $.byteOffset%4===0}function BT0($,Q,Z,X,Y,z,J,q){let W=Y.length,G=new Uint8Array(eL),U=sZ(G),D=ax(Y)&&ax(z),P=D?sZ(Y):p40,H=D?sZ(z):p40;for(let N=0;N<W;J++){if($(Q,Z,X,U,J,q),J>=c40)throw Error("arx: counter overflow");let C=Math.min(eL,W-N);if(D&&C===eL){let L=N/4;if(N%4!==0)throw Error("arx: invalid block position");for(let B=0,E;B<wT0;B++)E=L+B,H[E]=P[E]^U[B];N+=eL;continue}for(let L=0,B;L<C;L++)B=N+L,z[B]=Y[B]^G[L];N+=C}}function sx($,Q){let{allowShortKeys:Z,extendNonceFn:X,counterLength:Y,counterRight:z,rounds:J}=g40({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},Q);if(typeof $!=="function")throw Error("core must be a function");return sL(Y),sL(J),aL(z),aL(Z),(q,W,G,U,D=0)=>{R9(q,void 0,"key"),R9(W,void 0,"nonce"),R9(G,void 0,"data");let P=G.length;if(U===void 0)U=new Uint8Array(P);if(R9(U,void 0,"output"),sL(D),D<0||D>=c40)throw Error("arx: counter overflow");if(U.length<P)throw Error(`arx: output (${U.length}) is shorter than data (${P})`);let H=[],N=q.length,C,L;if(N===32)H.push(C=HU(q)),L=AT0;else if(N===16&&Z)C=new Uint8Array(32),C.set(q),C.set(q,16),L=FT0,H.push(C);else throw R9(q,32,"arx key"),Error("invalid key size");if(!ax(W))H.push(W=HU(W));let B=sZ(C);if(X){if(W.length!==24)throw Error("arx: extended nonce must be 24 bytes");X(L,B,sZ(W.subarray(0,16)),B),W=W.subarray(16)}let E=16-Y;if(E!==W.length)throw Error(`arx: nonce must be ${E} or 16 bytes`);if(E!==12){let _=new Uint8Array(12);_.set(W,z?0:12-W.length),W=_,H.push(W)}let I=sZ(W);return BT0($,L,B,I,G,U,D,J),tZ(...H),U}}var u40=($)=>Uint8Array.from($.split(""),(Q)=>Q.charCodeAt(0)),LT0,TT0,FT0,AT0,eL=64,wT0=16,c40=4294967295,p40;var d40=p(()=>{tL();LT0=u40("expand 16-byte k"),TT0=u40("expand 32-byte k"),FT0=sZ(LT0),AT0=sZ(TT0);p40=Uint32Array.of()});function g9($,Q){return $[Q++]&255|($[Q++]&255)<<8}class l40{blockLen=16;outputLen=16;buffer=new Uint8Array(16);r=new Uint16Array(10);h=new Uint16Array(10);pad=new Uint16Array(8);pos=0;finished=!1;constructor($){$=HU(R9($,32,"key"));let Q=g9($,0),Z=g9($,2),X=g9($,4),Y=g9($,6),z=g9($,8),J=g9($,10),q=g9($,12),W=g9($,14);this.r[0]=Q&8191,this.r[1]=(Q>>>13|Z<<3)&8191,this.r[2]=(Z>>>10|X<<6)&7939,this.r[3]=(X>>>7|Y<<9)&8191,this.r[4]=(Y>>>4|z<<12)&255,this.r[5]=z>>>1&8190,this.r[6]=(z>>>14|J<<2)&8191,this.r[7]=(J>>>11|q<<5)&8065,this.r[8]=(q>>>8|W<<8)&8191,this.r[9]=W>>>5&127;for(let G=0;G<8;G++)this.pad[G]=g9($,16+2*G)}process($,Q,Z=!1){let X=Z?0:2048,{h:Y,r:z}=this,J=z[0],q=z[1],W=z[2],G=z[3],U=z[4],D=z[5],P=z[6],H=z[7],N=z[8],C=z[9],L=g9($,Q+0),B=g9($,Q+2),E=g9($,Q+4),I=g9($,Q+6),_=g9($,Q+8),f=g9($,Q+10),x=g9($,Q+12),g=g9($,Q+14),h=Y[0]+(L&8191),v=Y[1]+((L>>>13|B<<3)&8191),b=Y[2]+((B>>>10|E<<6)&8191),m=Y[3]+((E>>>7|I<<9)&8191),K=Y[4]+((I>>>4|_<<12)&8191),M=Y[5]+(_>>>1&8191),j=Y[6]+((_>>>14|f<<2)&8191),O=Y[7]+((f>>>11|x<<5)&8191),R=Y[8]+((x>>>8|g<<8)&8191),F=Y[9]+(g>>>5|X),A=0,T=A+h*J+v*(5*C)+b*(5*N)+m*(5*H)+K*(5*P);A=T>>>13,T&=8191,T+=M*(5*D)+j*(5*U)+O*(5*G)+R*(5*W)+F*(5*q),A+=T>>>13,T&=8191;let V=A+h*q+v*J+b*(5*C)+m*(5*N)+K*(5*H);A=V>>>13,V&=8191,V+=M*(5*P)+j*(5*D)+O*(5*U)+R*(5*G)+F*(5*W),A+=V>>>13,V&=8191;let w=A+h*W+v*q+b*J+m*(5*C)+K*(5*N);A=w>>>13,w&=8191,w+=M*(5*H)+j*(5*P)+O*(5*D)+R*(5*U)+F*(5*G),A+=w>>>13,w&=8191;let k=A+h*G+v*W+b*q+m*J+K*(5*C);A=k>>>13,k&=8191,k+=M*(5*N)+j*(5*H)+O*(5*P)+R*(5*D)+F*(5*U),A+=k>>>13,k&=8191;let S=A+h*U+v*G+b*W+m*q+K*J;A=S>>>13,S&=8191,S+=M*(5*C)+j*(5*N)+O*(5*H)+R*(5*P)+F*(5*D),A+=S>>>13,S&=8191;let y=A+h*D+v*U+b*G+m*W+K*q;A=y>>>13,y&=8191,y+=M*J+j*(5*C)+O*(5*N)+R*(5*H)+F*(5*P),A+=y>>>13,y&=8191;let u=A+h*P+v*D+b*U+m*G+K*W;A=u>>>13,u&=8191,u+=M*q+j*J+O*(5*C)+R*(5*N)+F*(5*H),A+=u>>>13,u&=8191;let c=A+h*H+v*P+b*D+m*U+K*G;A=c>>>13,c&=8191,c+=M*W+j*q+O*J+R*(5*C)+F*(5*N),A+=c>>>13,c&=8191;let o=A+h*N+v*H+b*P+m*D+K*U;A=o>>>13,o&=8191,o+=M*G+j*W+O*q+R*J+F*(5*C),A+=o>>>13,o&=8191;let z0=A+h*C+v*N+b*H+m*P+K*D;A=z0>>>13,z0&=8191,z0+=M*U+j*G+O*W+R*q+F*J,A+=z0>>>13,z0&=8191,A=(A<<2)+A|0,A=A+T|0,T=A&8191,A=A>>>13,V+=A,Y[0]=T,Y[1]=V,Y[2]=w,Y[3]=k,Y[4]=S,Y[5]=y,Y[6]=u,Y[7]=c,Y[8]=o,Y[9]=z0}finalize(){let{h:$,pad:Q}=this,Z=new Uint16Array(10),X=$[1]>>>13;$[1]&=8191;for(let J=2;J<10;J++)$[J]+=X,X=$[J]>>>13,$[J]&=8191;$[0]+=X*5,X=$[0]>>>13,$[0]&=8191,$[1]+=X,X=$[1]>>>13,$[1]&=8191,$[2]+=X,Z[0]=$[0]+5,X=Z[0]>>>13,Z[0]&=8191;for(let J=1;J<10;J++)Z[J]=$[J]+X,X=Z[J]>>>13,Z[J]&=8191;Z[9]-=8192;let Y=(X^1)-1;for(let J=0;J<10;J++)Z[J]&=Y;Y=~Y;for(let J=0;J<10;J++)$[J]=$[J]&Y|Z[J];$[0]=($[0]|$[1]<<13)&65535,$[1]=($[1]>>>3|$[2]<<10)&65535,$[2]=($[2]>>>6|$[3]<<7)&65535,$[3]=($[3]>>>9|$[4]<<4)&65535,$[4]=($[4]>>>12|$[5]<<1|$[6]<<14)&65535,$[5]=($[6]>>>2|$[7]<<11)&65535,$[6]=($[7]>>>5|$[8]<<8)&65535,$[7]=($[8]>>>8|$[9]<<5)&65535;let z=$[0]+Q[0];$[0]=z&65535;for(let J=1;J<8;J++)z=($[J]+Q[J]|0)+(z>>>16)|0,$[J]=z&65535;tZ(Z)}update($){ox(this),R9($),$=HU($);let{buffer:Q,blockLen:Z}=this,X=$.length;for(let Y=0;Y<X;){let z=Math.min(Z-this.pos,X-Y);if(z===Z){for(;Z<=X-Y;Y+=Z)this.process($,Y);continue}if(Q.set($.subarray(Y,Y+z),this.pos),this.pos+=z,Y+=z,this.pos===Z)this.process(Q,0,!1),this.pos=0}return this}destroy(){tZ(this.h,this.r,this.buffer,this.pad)}digestInto($){ox(this),y40($,this),this.finished=!0;let{buffer:Q,h:Z}=this,{pos:X}=this;if(X){Q[X++]=1;for(;X<16;X++)Q[X]=0;this.process(Q,0,!0)}this.finalize();let Y=0;for(let z=0;z<8;z++)$[Y++]=Z[z]>>>0,$[Y++]=Z[z]>>>8;return $}digest(){let{buffer:$,outputLen:Q}=this;this.digestInto($);let Z=$.slice(0,Q);return this.destroy(),Z}}function ET0($){let Q=(X,Y)=>$(Y).update(X).digest(),Z=$(new Uint8Array(32));return Q.outputLen=Z.outputLen,Q.blockLen=Z.blockLen,Q.create=(X)=>$(X),Q}var i40;var o40=p(()=>{tL();i40=(()=>ET0(($)=>new l40($)))()});function a40($,Q,Z,X,Y,z=20){let J=$[0],q=$[1],W=$[2],G=$[3],U=Q[0],D=Q[1],P=Q[2],H=Q[3],N=Q[4],C=Q[5],L=Q[6],B=Q[7],E=Y,I=Z[0],_=Z[1],f=Z[2],x=J,g=q,h=W,v=G,b=U,m=D,K=P,M=H,j=N,O=C,R=L,F=B,A=E,T=I,V=_,w=f;for(let S=0;S<z;S+=2)x=x+b|0,A=M1(A^x,16),j=j+A|0,b=M1(b^j,12),x=x+b|0,A=M1(A^x,8),j=j+A|0,b=M1(b^j,7),g=g+m|0,T=M1(T^g,16),O=O+T|0,m=M1(m^O,12),g=g+m|0,T=M1(T^g,8),O=O+T|0,m=M1(m^O,7),h=h+K|0,V=M1(V^h,16),R=R+V|0,K=M1(K^R,12),h=h+K|0,V=M1(V^h,8),R=R+V|0,K=M1(K^R,7),v=v+M|0,w=M1(w^v,16),F=F+w|0,M=M1(M^F,12),v=v+M|0,w=M1(w^v,8),F=F+w|0,M=M1(M^F,7),x=x+m|0,w=M1(w^x,16),R=R+w|0,m=M1(m^R,12),x=x+m|0,w=M1(w^x,8),R=R+w|0,m=M1(m^R,7),g=g+K|0,A=M1(A^g,16),F=F+A|0,K=M1(K^F,12),g=g+K|0,A=M1(A^g,8),F=F+A|0,K=M1(K^F,7),h=h+M|0,T=M1(T^h,16),j=j+T|0,M=M1(M^j,12),h=h+M|0,T=M1(T^h,8),j=j+T|0,M=M1(M^j,7),v=v+b|0,V=M1(V^v,16),O=O+V|0,b=M1(b^O,12),v=v+b|0,V=M1(V^v,8),O=O+V|0,b=M1(b^O,7);let k=0;X[k++]=J+x|0,X[k++]=q+g|0,X[k++]=W+h|0,X[k++]=G+v|0,X[k++]=U+b|0,X[k++]=D+m|0,X[k++]=P+K|0,X[k++]=H+M|0,X[k++]=N+j|0,X[k++]=C+O|0,X[k++]=L+R|0,X[k++]=B+F|0,X[k++]=E+A|0,X[k++]=I+T|0,X[k++]=_+V|0,X[k++]=f+w|0}function IT0($,Q,Z,X){let Y=$[0],z=$[1],J=$[2],q=$[3],W=Q[0],G=Q[1],U=Q[2],D=Q[3],P=Q[4],H=Q[5],N=Q[6],C=Q[7],L=Z[0],B=Z[1],E=Z[2],I=Z[3];for(let f=0;f<20;f+=2)Y=Y+W|0,L=M1(L^Y,16),P=P+L|0,W=M1(W^P,12),Y=Y+W|0,L=M1(L^Y,8),P=P+L|0,W=M1(W^P,7),z=z+G|0,B=M1(B^z,16),H=H+B|0,G=M1(G^H,12),z=z+G|0,B=M1(B^z,8),H=H+B|0,G=M1(G^H,7),J=J+U|0,E=M1(E^J,16),N=N+E|0,U=M1(U^N,12),J=J+U|0,E=M1(E^J,8),N=N+E|0,U=M1(U^N,7),q=q+D|0,I=M1(I^q,16),C=C+I|0,D=M1(D^C,12),q=q+D|0,I=M1(I^q,8),C=C+I|0,D=M1(D^C,7),Y=Y+G|0,I=M1(I^Y,16),N=N+I|0,G=M1(G^N,12),Y=Y+G|0,I=M1(I^Y,8),N=N+I|0,G=M1(G^N,7),z=z+U|0,L=M1(L^z,16),C=C+L|0,U=M1(U^C,12),z=z+U|0,L=M1(L^z,8),C=C+L|0,U=M1(U^C,7),J=J+D|0,B=M1(B^J,16),P=P+B|0,D=M1(D^P,12),J=J+D|0,B=M1(B^J,8),P=P+B|0,D=M1(D^P,7),q=q+W|0,E=M1(E^q,16),H=H+E|0,W=M1(W^H,12),q=q+W|0,E=M1(E^q,8),H=H+E|0,W=M1(W^H,7);let _=0;X[_++]=Y,X[_++]=z,X[_++]=J,X[_++]=q,X[_++]=L,X[_++]=B,X[_++]=E,X[_++]=I}function r40($,Q,Z,X,Y){if(Y!==void 0)R9(Y,void 0,"AAD");let z=$(Q,Z,kT0),J=m40(X.length,Y?Y.length:0,!0),q=i40.create(z);if(Y)n40(q,Y);n40(q,X),q.update(J);let W=q.digest();return tZ(z,J),W}var _T0,ST0,fT0,n40=($,Q)=>{$.update(Q);let Z=Q.length%16;if(Z)$.update(fT0.subarray(Z))},kT0,s40=($)=>(Q,Z,X)=>{return{encrypt(z,J){let q=z.length;J=rx(q+16,J,!1),J.set(z);let W=J.subarray(0,-16);$(Q,Z,W,W,1);let G=r40($,Q,Z,W,X);return J.set(G,q),tZ(G),J},decrypt(z,J){J=rx(z.length-16,J,!1);let q=z.subarray(0,-16),W=z.subarray(-16),G=r40($,Q,Z,q,X);if(!h40(W,G))throw Error("invalid tag");return J.set(z.subarray(0,-16)),$(Q,Z,J,J,1),tZ(G),J}}},jU,WQ1;var tx=p(()=>{d40();o40();tL();_T0=sx(a40,{counterRight:!1,counterLength:4,allowShortKeys:!1}),ST0=sx(a40,{counterRight:!1,counterLength:8,extendNonceFn:IT0,allowShortKeys:!1}),fT0=new Uint8Array(16),kT0=new Uint8Array(32);jU=nx({blockSize:64,nonceLength:12,tagLength:16},s40(_T0)),WQ1=nx({blockSize:64,nonceLength:24,tagLength:16},s40(ST0))});var MM={};x1(MM,{NobleCryptoProvider:()=>t40});class t40{async generateKeyPair(){let $=i3.keygen();return{publicKey:this.bytesToBase64($.publicKey),privateKey:this.bytesToBase64($.secretKey)}}async encrypt($,Q){if(!Q)throw Error("Recipient public key required for encryption");let Z=i3.keygen(),X=Z.secretKey,Y=Z.publicKey,z=this.base64ToBytes(Q),q=i3.getSharedSecret(X,z).slice(0,32),W=crypto.getRandomValues(new Uint8Array(12)),G=new TextEncoder().encode($),D=jU(q,W).encrypt(G),P=new Uint8Array(44+D.length);return P.set(Y,0),P.set(W,32),P.set(D,44),this.bytesToBase64(P)}async decrypt($,Q){let Z=this.base64ToBytes($),X=Z.slice(0,32),Y=Z.slice(32,44),z=Z.slice(44),J=this.base64ToBytes(Q),W=i3.getSharedSecret(J,X).slice(0,32),U=jU(W,Y).decrypt(z);return new TextDecoder().decode(U)}bytesToBase64($){let Q="";for(let Z=0;Z<$.length;Z++)Q+=String.fromCharCode($[Z]);return btoa(Q)}base64ToBytes($){let Q=atob($),Z=new Uint8Array(Q.length);for(let X=0;X<Q.length;X++)Z[X]=Q.charCodeAt(X);return Z}}var PM=p(()=>{ix();tx()});var HM={};x1(HM,{validateEnvelope:()=>vT0,unwrapEnvelope:()=>bT0,createOnionEnvelopes:()=>xT0});async function xT0($,Q,Z,X){if($.length<2)throw Error("Route must have at least sender and recipient");let Y=20,z=$.length-1;if(z>Y)throw Error(`Route too long: ${z} hops > MAX_HOPS (${Y})`);let J=new Set($);if(J.size!==$.length)throw Error(`Route contains loops: ${$.length} entities but only ${J.size} unique`);let q=$[$.length-1];if(!q)throw Error("Route must have at least one recipient");let W="";if(X&&Z){let D=Z.get(q);if(D){let P=h1({finalRecipient:!0,secret:Q});W=await X.encrypt(P,D)}}if(!W)W=h1({finalRecipient:!0,secret:Q});for(let D=$.length-2;D>=1;D--){let P=$[D],H=$[D+1];if(!P||!H)throw Error(`Invalid route segment at index ${D}`);let N=h1({nextHop:H,innerEnvelope:W});if(X&&Z){let C=Z.get(P);if(C)W=await X.encrypt(N,C)}else W=N}let G=$[1];if(!G)throw Error("Route must have at least one hop");return{nextHop:G,innerEnvelope:W}}function bT0($){try{return JSON.parse($)}catch(Q){throw Error(`Failed to unwrap envelope: ${Q instanceof Error?Q.message:String(Q)}`)}}function vT0($){if($.finalRecipient){if(!$.secret)throw Error("Final recipient envelope must have secret");if($.nextHop||$.innerEnvelope)throw Error("Final recipient envelope must not have nextHop or innerEnvelope")}else{if(!$.nextHop)throw Error("Intermediary envelope must have nextHop");if(!$.innerEnvelope)throw Error("Intermediary envelope must have innerEnvelope");if($.secret)throw Error("Intermediary envelope must not have secret (privacy leak!)")}return!0}var jM=()=>{};var $b={};x1($b,{processOrderbookSwaps:()=>yT0,processOrderbookCancels:()=>gT0,handleAccountInput:()=>ex});async function ex($,Q,Z){console.log(`\uD83D\uDE80 APPLY accountInput: ${Q.fromEntityId.slice(-4)}  ${Q.toEntityId.slice(-4)}`),console.log(`\uD83D\uDE80 APPLY accountInput details: height=${Q.height}, hasNewFrame=${!!Q.newAccountFrame}, hasPrevHanko=${!!Q.prevHanko}, counter=${Q.counter}`);let X=$,Y=[],z=[],J=[],q=[],W=[],G=Q.fromEntityId,U=X.accounts.get(G),D=!1;if(!U){D=!0,console.log(`\uD83D\uDCB3 Creating new account machine for ${G.slice(-4)} (counterparty: ${G.slice(-4)})`);let P=new Map,H=K5($.entityId,G)?$.entityId:G,N=K5($.entityId,G)?G:$.entityId;U={leftEntity:H,rightEntity:N,mempool:[],currentFrame:{height:0,timestamp:$.timestamp,jHeight:0,accountTxs:[],prevFrameHash:"",tokenIds:[],deltas:[],stateHash:"",byLeft:$.entityId===H},sentTransitions:0,ackedTransitions:0,deltas:P,globalCreditLimits:{ownLimit:0n,peerLimit:0n},currentHeight:0,pendingSignatures:[],rollbackCount:0,sendCounter:0,receiveCounter:0,proofHeader:{fromEntity:$.entityId,toEntity:G,cooperativeNonce:0,disputeNonce:0},proofBody:{tokenIds:[],deltas:[]},frameHistory:[],pendingWithdrawals:new Map,requestedRebalance:new Map,locks:new Map,swapOffers:new Map,leftJObservations:[],rightJObservations:[],jEventChain:[],lastFinalizedJHeight:0,disputeConfig:{leftDisputeDelay:10,rightDisputeDelay:10},onChainSettlementNonce:0},X.accounts.set(G,U),console.log(` Account created with counterparty key: ${G.slice(-4)}`)}if(!U)throw Error(`CRITICAL: AccountMachine creation failed for ${Q.fromEntityId}`);if(Q.settleAction){let{processSettleAction:P}=await Promise.resolve().then(() => (WJ(),dq)),H=P(U,Q.settleAction,Q.fromEntityId,X.entityId,X.timestamp);if(H.success)K1(X,` ${H.message}`);else console.warn(` settleAction failed: ${H.message}`),K1(X,` Settlement: ${H.message}`)}if(Q.height||Q.newAccountFrame){console.log(`\uD83E\uDD1D Processing frame from ${Q.fromEntityId.slice(-4)}, accountMachine.pendingFrame=${U.pendingFrame?`h${U.pendingFrame.height}`:"none"}`);let P=await ux(Z,U,Q);if(P.success){if(mL(X,P.events),pL(Z,"account",`E/A/${X.entityId.slice(-4)}:${G.slice(-4)}/consensus`,P.events,{entityId:X.entityId,counterpartyId:G,frameHeight:Q.newAccountFrame?.height??Q.height,counter:Q.counter,hasNewFrame:Boolean(Q.newAccountFrame)},X.entityId),P.hashesToSign)W.push(...P.hashesToSign);let H=Q.newAccountFrame,N=Boolean(H&&H.height>U.currentHeight-1);if(N&&H?.accountTxs){if(z1)console.log(`\uD83D\uDD0D HTLC-CHECK: isNewFrame=${N}, inputHeight=${H.height}, currentHeight=${U.currentHeight}`);if(z1)console.log(`\uD83D\uDD0D HTLC-CHECK: accountMachine.locks.size=${U.locks.size}`);if(z1)console.log(`\uD83D\uDD0D FRAME-TXS: ${H.accountTxs.length} txs in frame:`,H.accountTxs.map((I)=>I.type));for(let I of H.accountTxs){if(z1)console.log(`\uD83D\uDD0D HTLC-CHECK: Checking committed tx type=${I.type}`);if(I.type==="j_event_claim"){let{jHeight:_,jBlockHash:f,events:x,observedAt:g}=I.data;console.log(`\uD83D\uDCE5 j_event_claim: Counterparty claims jHeight=${_}`);let{iAmLeft:h,counterparty:v}=i6(U,X.entityId),b=!h,m={jHeight:_,jBlockHash:f,events:x,observedAt:g};if(b)U.leftJObservations.push(m),console.log(`   \uD83D\uDCDD Stored LEFT obs from counterparty (${U.leftJObservations.length} total)`);else U.rightJObservations.push(m),console.log(`   \uD83D\uDCDD Stored RIGHT obs from counterparty (${U.rightJObservations.length} total)`);let{tryFinalizeAccountJEvents:K}=await Promise.resolve().then(() => (UM(),vx));K(U,v,{timestamp:X.timestamp});continue}if(I.type==="swap_resolve"||I.type==="swap_cancel"){let _=`${G}:${I.data.offerId}`;if(X.pendingSwapFillRatios?.delete(_))console.log(`\uD83D\uDCC9 Cleared pending fillRatio for ${_.slice(-12)}`)}if(I.type==="htlc_lock"){if(z1)console.log("\uD83D\uDD0D HTLC-CHECK: Found htlc_lock in committed frame!");let _=U.locks.get(I.data.lockId);if(z1)console.log(`\uD83D\uDD0D HTLC-CHECK: lock found? ${!!_}`);if(!_){console.log(` HTLC-CHECK: Lock not in accountMachine.locks (lockId=${I.data.lockId.slice(0,16)}...)`);continue}if(!_.envelope){console.log(" HTLC: No envelope, skipping forwarding");continue}let f=_.envelope;if(console.log("\uD83E\uDDC5 "),console.log(`\uD83E\uDDC5 ENVELOPE RECEIVED at ${X.entityId.slice(-4)}`),console.log(`\uD83E\uDDC5 LockId: ${_.lockId.slice(0,16)}...`),console.log(`\uD83E\uDDC5 Hashlock: ${_.hashlock.slice(0,16)}...`),console.log(`\uD83E\uDDC5 Amount: ${_.amount}`),console.log(`\uD83E\uDDC5 Envelope type: ${typeof f}`),typeof f!=="string")console.log(`\uD83E\uDDC5 OUTER envelope: finalRecipient=${f.finalRecipient}, nextHop=${f.nextHop?.slice(-4)}`);if(console.log(`\uD83E\uDDC5 OUTER envelope structure: ${JSON.stringify(f,null,2).slice(0,300)}...`),typeof f==="string"){console.log("\uD83D\uDD13 Envelope is encrypted string - decrypting for us...");try{let g=f;if(X.cryptoPrivateKey){let{NobleCryptoProvider:v}=await Promise.resolve().then(() => (PM(),MM));g=await new v().decrypt(f,X.cryptoPrivateKey),console.log("\uD83D\uDD13 Decryption successful")}let{unwrapEnvelope:h}=await Promise.resolve().then(() => (jM(),HM));f=h(g),console.log(`\uD83D\uDD13 Unwrapped envelope: finalRecipient=${f.finalRecipient}, nextHop=${f.nextHop?.slice(-4)}`),console.log(`\uD83D\uDD13 Decrypted envelope structure: ${JSON.stringify(f,null,2).slice(0,300)}...`)}catch(g){console.log(` HTLC-GATE: ENVELOPE_DECRYPT_FAIL - ${g instanceof Error?g.message:String(g)} [lockId=${_.lockId.slice(0,16)}]`),console.log("\uD83E\uDDC5 ");continue}}else if(f.innerEnvelope&&!f.finalRecipient){console.log("\uD83D\uDD13 Decrypting innerEnvelope to get routing instructions...");try{let g=f.innerEnvelope;if(X.cryptoPrivateKey){let{NobleCryptoProvider:v}=await Promise.resolve().then(() => (PM(),MM));g=await new v().decrypt(f.innerEnvelope,X.cryptoPrivateKey),console.log("\uD83D\uDD13 Decryption successful")}let{unwrapEnvelope:h}=await Promise.resolve().then(() => (jM(),HM));f=h(g),console.log(`\uD83D\uDD13 Unwrapped envelope: finalRecipient=${f.finalRecipient}, nextHop=${f.nextHop?.slice(-4)}`),console.log(`\uD83D\uDD13 Decrypted envelope structure: ${JSON.stringify(f,null,2).slice(0,300)}...`)}catch(g){console.log(` HTLC-GATE: ENVELOPE_DECRYPT_FAIL - ${g instanceof Error?g.message:String(g)} [lockId=${_.lockId.slice(0,16)}]`),console.log("\uD83E\uDDC5 ");continue}}let{validateEnvelope:x}=await Promise.resolve().then(() => (jM(),HM));try{x(f),console.log("\uD83E\uDDC5 Envelope validation: PASSED")}catch(g){console.log(` HTLC: Invalid envelope structure: ${g instanceof Error?g.message:String(g)}`),console.log("\uD83E\uDDC5 ");continue}if(_.amount.toString()!==I.data.amount.toString()){console.log(` HTLC: Envelope amount mismatch: lock=${_.amount}, tx=${I.data.amount}`),console.log("\uD83E\uDDC5 ");continue}if(_.tokenId!==I.data.tokenId){console.log(` HTLC: Envelope tokenId mismatch: lock=${_.tokenId}, tx=${I.data.tokenId}`),console.log("\uD83E\uDDC5 ");continue}if(_.hashlock!==I.data.hashlock){console.log(` HTLC: Envelope hashlock mismatch: lock=${_.hashlock.slice(0,16)}..., tx=${I.data.hashlock.slice(0,16)}...`),console.log("\uD83E\uDDC5 ");continue}if(console.log(" HTLC: Envelope verified - matches lock parameters (amount, tokenId, hashlock)"),f.nextHop&&!f.finalRecipient){if(!X.accounts.has(f.nextHop)){console.log(` HTLC: Cannot forward - no account with nextHop ${f.nextHop.slice(-4)}`),console.log(` HTLC: Available accounts: [${Array.from(X.accounts.keys()).map((h)=>h.slice(-4)).join(", ")}]`),console.log("\uD83E\uDDC5 ");continue}console.log(` HTLC: NextHop ${f.nextHop.slice(-4)} validated - account exists`)}if(f.finalRecipient)if(console.log("\uD83C\uDFAF HTLC-ROUTING: WE ARE FINAL RECIPIENT!"),f.secret)z.push({accountId:Q.fromEntityId,tx:{type:"htlc_reveal",data:{lockId:_.lockId,secret:f.secret}}}),console.log(`\uD83C\uDFAF HTLC: Final recipient, revealing secret=${f.secret.slice(0,16)}...`),console.log("\uD83E\uDDC5 ");else console.log(" HTLC: Final recipient envelope missing secret!"),console.log("\uD83E\uDDC5 ");else if(f.nextHop){let g=f.nextHop;console.log(" HTLC-ROUTING: INTERMEDIARY HOP"),console.log(` Forwarding to: ${g.slice(-4)}`);let h=X.entityId===U.leftEntity?U.rightEntity:U.leftEntity;console.log(` Registering route: ${h.slice(-4)}  ${X.entityId.slice(-4)}  ${g.slice(-4)}`);let v={hashlock:_.hashlock,inboundEntity:h,inboundLockId:_.lockId,outboundEntity:g,outboundLockId:`${_.lockId}-fwd`,createdTimestamp:X.timestamp};if(X.htlcRoutes.set(_.hashlock,v),X.accounts.get(g)){let{calculateHtlcFee:m,calculateHtlcFeeAmount:K}=await Promise.resolve().then(() => (zJ(),KM)),M,j;try{M=m(_.amount),j=K(_.amount)}catch(V){console.log(` HTLC: Fee calculation failed for amount ${_.amount}: ${V instanceof Error?V.message:String(V)}`),console.log("   Cannot forward - amount too small");continue}v.pendingFee=j;let O=f.innerEnvelope;console.log(`\uD83D\uDCE6 Inner envelope for next hop: ${O?"present":"missing"}`);let R=_.timelock-BigInt(f4.MIN_TIMELOCK_DELTA_MS),F=_.revealBeforeHeight-1,A=X.lastFinalizedJHeight||0,T=1000;if(R<BigInt(X.timestamp)+BigInt(T)){console.log(` HTLC-GATE: TIMELOCK_TOO_TIGHT - forward=${R}, current+margin=${BigInt(X.timestamp)+BigInt(T)} [lockId=${_.lockId.slice(0,16)}]`);continue}if(F<=A){console.log(` HTLC-GATE: HEIGHT_EXPIRED - forward=${F}, current=${A}, lock=${_.revealBeforeHeight} [lockId=${_.lockId.slice(0,16)}]`);continue}console.log(" HTLC-FORWARD: Creating outbound lock"),console.log(` Outbound lockId: ${_.lockId}-fwd`),console.log(` Amount: ${_.amount}  ${M} (fee=${j})`),console.log(` Timelock: ${_.timelock}  ${R}`),console.log(` Height: ${_.revealBeforeHeight}  ${F}`),console.log(` Inner envelope: ${O?JSON.stringify(O,null,2).slice(0,200):"NONE"}...`),z.push({accountId:g,tx:{type:"htlc_lock",data:{lockId:`${_.lockId}-fwd`,hashlock:_.hashlock,timelock:R,revealBeforeHeight:F,amount:M,tokenId:_.tokenId,envelope:O}}}),console.log("\uD83E\uDDC5 "),console.log(` HTLC: Forwarding to ${g.slice(-4)}, amount ${M} (fee ${j})`)}else console.log(` HTLC: No account found for nextHop ${g.slice(-4)}`)}}}}if(U.pendingForward&&!Z.skipPendingForward){let I=U.pendingForward;console.log("\uD83D\uDCB8 "),console.log(`\uD83D\uDCB8 PROCESSING PENDING-FORWARD at ${$.entityId.slice(-4)}`),console.log(`\uD83D\uDCB8 Amount: ${I.amount}, TokenId: ${I.tokenId}`),console.log(`\uD83D\uDCB8 Route: [${I.route.map((f)=>f.slice(-4)).join(",")}]`),console.log(`\uD83D\uDCB8 Description: ${I.description||"none"}`);let _=I.route.length>1?I.route[1]:null;if(_){console.log(`\uD83D\uDCB8 Next hop: ${_.slice(-4)}`);let f=_;if(X.accounts.get(f)){let g=I.amount;console.log("\uD83D\uDCB8 FORWARDING TO NEXT HOP"),console.log("\uD83D\uDCB8   Creating direct_payment AccountTx"),console.log(`\uD83D\uDCB8   Amount: ${g}`),console.log(`\uD83D\uDCB8   From: ${$.entityId.slice(-4)}`),console.log(`\uD83D\uDCB8   To: ${_.slice(-4)}`),console.log(`\uD83D\uDCB8   Route: [${I.route.slice(1).map((h)=>h.slice(-4)).join(",")}]`),z.push({accountId:f,tx:{type:"direct_payment",data:{tokenId:I.tokenId,amount:g,route:I.route.slice(1),description:I.description||"Forwarded payment",fromEntityId:$.entityId,toEntityId:_}}}),console.log(`\uD83D\uDCB8 FORWARD QUEUED: mempoolOps.length=${z.length}`),console.log("\uD83D\uDCB8 ")}else console.log(` No account found for next hop ${_.slice(-4)}`),console.log("\uD83D\uDCB8 ")}else console.log(" No next hop in forward route"),console.log("\uD83D\uDCB8 ");delete U.pendingForward}let C=P.timedOutHashlocks||[];for(let I of C){console.log(` HTLC-TIMEOUT: Cleaning up route for hashlock ${I.slice(0,16)}...`);let _=X.htlcRoutes.get(I);if(_){if(_.pendingFee)console.log(`   Clearing pending fee: ${_.pendingFee} (not earned due to timeout)`);X.htlcRoutes.delete(I),console.log("    Route cleaned up")}}let L=P.revealedSecrets||[];if(z1)console.log(`\uD83D\uDD0D HTLC-SECRET-CHECK: ${L.length} secrets revealed in frame`);if(L.length>0){if(!X.jBatchState)X.jBatchState=x7();let I=xD();if(I==="0x0000000000000000000000000000000000000000")console.warn(" HTLC: DeltaTransformer address not set - skipping on-chain reveal");else for(let{secret:_}of L)UO(X.jBatchState,I,_)}for(let{secret:I,hashlock:_}of L){if(z1)console.log(`\uD83D\uDD0D HTLC-SECRET: Processing revealed secret for hash ${_.slice(0,16)}...`);let f=X.htlcRoutes.get(_);if(f){if(f.secret=I,f.pendingFee)X.htlcFeesEarned=(X.htlcFeesEarned||0n)+f.pendingFee,console.log(`\uD83D\uDCB0 HTLC: Fee earned on reveal: ${f.pendingFee} (total: ${X.htlcFeesEarned})`),delete f.pendingFee;if(f.outboundLockId)X.lockBook.delete(f.outboundLockId);if(f.inboundLockId)X.lockBook.delete(f.inboundLockId);if(f.inboundEntity&&f.inboundLockId)z.push({accountId:f.inboundEntity,tx:{type:"htlc_reveal",data:{lockId:f.inboundLockId,secret:I}}}),console.log(` HTLC: Propagating secret to ${f.inboundEntity.slice(-4)}`);else console.log(" HTLC: Payment complete (we initiated)")}else console.log(` HTLC: No route found for hashlock ${_.slice(0,16)}...`)}let B=P.swapOffersCreated||[];if(B.length>0)console.log(`\uD83D\uDCCA SWAP-EVENTS: Collected ${B.length} swap offers for entity-level matching`),J.push(...B);let E=P.swapOffersCancelled||[];if(E.length>0){console.log(`\uD83D\uDCCA SWAP-EVENTS: Collected ${E.length} swap cancels`),q.push(...E);for(let{offerId:I,accountId:_}of E){let f=`${_}:${I}`;X.swapBook.delete(f)}}if(P.response){console.log(`\uD83D\uDCE4 Sending response to ${P.response.toEntityId.slice(-4)}`);let I=l3(Z,P.response.toEntityId,"accountInput.response");Y.push({entityId:P.response.toEntityId,signerId:I,entityTxs:[{type:"accountInput",data:P.response}]}),console.log(` ACK-RESPONSE queued: ${$.entityId.slice(-4)}  ${P.response.toEntityId.slice(-4)}, height=${P.response.height}, hasPrevHanko=${!!P.response.prevHanko}, counter=${P.response.counter}`)}}else console.error(` Frame consensus failed: ${P.error}`),K1(X,` ${P.error}`)}else if(!Q.settleAction)console.error(" Received AccountInput without frames - invalid!"),K1(X,` Invalid AccountInput from ${Q.fromEntityId.slice(-4)}`);return{newState:X,outputs:Y,mempoolOps:z,swapOffersCreated:J,swapOffersCancelled:q,...W.length>0&&{hashesToSign:W}}}function yT0($,Q){let Z=[],X=[],Y=$.orderbookExt;if(!Y)return{mempoolOps:Z,bookUpdates:X};let z=new Map;for(let J of Q){let q=J.accountId;console.log(`\uD83D\uDCCA ORDERBOOK-PROCESS: offerId=${J.offerId}, accountId=${q.slice(-8)}`);let{pairId:W}=Lx(J.giveTokenId,J.wantTokenId),G=W,U=YM(J.giveTokenId,J.wantTokenId),D=10n**12n,P=0xFFFFFFFFn,H,N,C,L;if(U===1){let v=J.giveAmount;if(v%D!==0n)throw Error(`ORDERBOOK: giveAmount not aligned to LOT_SCALE (offer=${J.offerId}, amount=${v})`);H=J.wantAmount*100n/J.giveAmount,N=v/D,C=v,L=C*H/100n}else{let v=J.wantAmount;if(v%D!==0n)throw Error(`ORDERBOOK: wantAmount not aligned to LOT_SCALE (offer=${J.offerId}, amount=${v})`);H=J.giveAmount*100n/J.wantAmount,N=v/D,L=v,C=L*H/100n}if(N===0n||N>P||H<=0n||H>P)throw Error(`ORDERBOOK: Invalid order (offer=${J.offerId}, qty=${N}, price=${H})`);let E=$.accounts.get(q)?.swapOffers?.get(J.offerId);if(E)E.quantizedGive=C,E.quantizedWant=L;let I=z.get(G)||Y.books.get(G);if(!I){let m=Number(H),K=1000*Math.floor(50),M=Math.max(1,m-K),j=M+99000;I=bL({tick:1000,pmin:M,pmax:j,maxOrders:1e4,stpPolicy:0})}let _=J.makerIsLeft?J.fromEntity:J.toEntity,f=`${q}:${J.offerId}`;console.log(`\uD83D\uDCCA ORDERBOOK ADD: maker=${x6(_)}, orderId=${f.slice(-20)}, side=${U}, price=${H}, qty=${N}`);let x=ZM(I,{kind:0,ownerId:_,orderId:f,side:U,tif:0,postOnly:!1,priceTicks:Number(H),qtyLots:Number(N),minFillRatio:J.minFillRatio??0});I=x.state,z.set(G,I),X.push({pairId:G,book:I});let g=new Map;for(let v of x.events)if(v.type==="TRADE"){let b=(M)=>{let j=M.lastIndexOf(":");return j>=0?M.slice(j+1):M},m=g.get(v.makerOrderId);if(!m)g.set(v.makerOrderId,{filledLots:v.qty,originalLots:v.makerQtyBefore});else m.filledLots+=v.qty;let K=g.get(v.takerOrderId);if(!K)g.set(v.takerOrderId,{filledLots:v.qty,originalLots:v.takerQtyTotal});else K.filledLots+=v.qty;console.log(`\uD83D\uDCCA ORDERBOOK TRADE: ${b(v.makerOrderId)}  ${b(v.takerOrderId)} @ ${v.price}, qty=${v.qty}`)}let h=65535;for(let[v,{filledLots:b,originalLots:m}]of g){let K=v.lastIndexOf(":");if(K===-1)continue;let M=v.slice(K+1),j=v.slice(0,K);if(z1)console.log(`\uD83D\uDD0D ORDERBOOK-LOOKUP: Looking for accountId="${j}"`);if(z1)console.log("\uD83D\uDD0D ORDERBOOK-LOOKUP: Hub accounts:",Array.from($.accounts.keys()));if(z1)console.log("\uD83D\uDD0D ORDERBOOK-LOOKUP: Match found:",$.accounts.has(j));if(!$.accounts.has(j)){console.warn(" ORDERBOOK: Account not found for swap_resolve, skipping"),console.warn(`   Looking for: "${j}"`),console.warn(`   Hub has: ${Array.from($.accounts.keys()).map((T)=>`"${T}"`).join(", ")}`);continue}console.log(` ORDERBOOK-LOOKUP: Found account for ${j.slice(-8)}, generating swap_resolve`);let O=BigInt(b),R=BigInt(m),F=R>0n?Number(O*BigInt(h)/R):0,A=I.orderIdToIdx.has(v)&&I.orderActive[I.orderIdToIdx.get(v)];Z.push({accountId:j,tx:{type:"swap_resolve",data:{offerId:M,fillRatio:Math.min(F,h),cancelRemainder:!A}}}),console.log(`\uD83D\uDCE4 ORDERBOOK: Queued swap_resolve for ${M.slice(-8)}, fill=${(F/h*100).toFixed(1)}%, cancel=${!A}`)}}return{mempoolOps:Z,bookUpdates:X}}function gT0($,Q){let Z=[],X=$.orderbookExt;if(!X)return Z;for(let{offerId:Y,accountId:z}of Q){let J=`${z}:${Y}`;for(let[q,W]of X.books){let G=W.orderIdToIdx.get(J);if(G===void 0)continue;let U=G;if(!W.orderActive[U])continue;let D=W.orderOwnerIdx[U],P=W.owners[D];if(!P)continue;let H=ZM(W,{kind:1,ownerId:P,orderId:J});Z.push({pairId:q,book:H.state}),console.log(`\uD83D\uDCCA ORDERBOOK: Cancelled order ${Y.slice(-8)}`);break}}return Z}var RM=p(()=>{lL();C8();rZ();w2();B8();h8();c6();g3()});var e40=($,Q,Z)=>{let X=h1({type:$.type,data:$.data,proposer:Q,timestamp:Z.timestamp});return`prop_${oK("sha256").update(X).digest("hex").slice(0,12)}`},Qb=($,Q)=>{if(Q.action.type==="collective_message"){let Z=`[COLLECTIVE] ${Q.action.data.message}`;if(D1)console.log(`    \uD83C\uDFDB  Executing collective proposal: "${Z}"`);let X=[...$.messages,Z];if(X.length>10)X.shift();return{...$,messages:X}}return $};var Zb=p(()=>{B8()});var $70=($)=>{try{if(typeof $!=="string")return z5.error(` Message must be string, got: ${typeof $}`),!1;if($.length>1000)return z5.error(` Message too long: ${$.length} > 1000 chars`),!1;if($.length===0)return z5.error(" Empty message not allowed"),!1;return!0}catch(Q){return z5.error(` Message validation error: ${Q}`),!1}};var Xb=p(()=>{B8()});var Q70={};x1(Q70,{handleHtlcPayment:()=>hT0});async function hT0($,Q,Z){console.log(`\uD83D\uDD12 HTLC-PAYMENT HANDLER: ${$.entityId.slice(-4)}  ${Q.data.targetEntityId.slice(-4)}`),console.log(`   Amount: ${Q.data.amount}, Route: ${Q.data.route?.map((m)=>m.slice(-4)).join("")||"none"}`),Z.emit("HtlcPaymentInitiated",{fromEntity:$.entityId,toEntity:Q.data.targetEntityId,tokenId:Q.data.tokenId,amount:Q.data.amount.toString(),route:Q.data.route});let X=i1($),Y=[],z=[],{targetEntityId:J,tokenId:q,amount:W,route:G,description:U,secret:D,hashlock:P}=Q.data;if(!D&&!P)return $3("HTLC_PAYMENT"," secret/hashlock REQUIRED in tx.data (determinism)"),o3(X," HTLC payment failed: secret/hashlock must be provided"),{newState:X,outputs:[],mempoolOps:[]};else if(D&&!P)try{P=JJ(D),console.log(`\uD83D\uDD12 Derived hashlock from provided secret: ${P.slice(0,16)}...`)}catch(m){return $3("HTLC_PAYMENT",` Invalid secret format: ${m instanceof Error?m.message:String(m)}`),o3(X," HTLC payment failed: invalid secret"),{newState:X,outputs:[],mempoolOps:[]}}else if(!D&&P)return $3("HTLC_PAYMENT"," Provided hashlock without secret"),o3(X," HTLC payment failed: missing secret"),{newState:X,outputs:[],mempoolOps:[]};else if(D&&P)try{let m=JJ(D);if(m!==P)return $3("HTLC_PAYMENT",` Secret/hashlock mismatch: computed ${m.slice(0,16)}..., expected ${P.slice(0,16)}...`),o3(X," HTLC payment failed: secret/hash mismatch"),{newState:X,outputs:[],mempoolOps:[]}}catch(m){return $3("HTLC_PAYMENT",` Invalid secret format: ${m instanceof Error?m.message:String(m)}`),o3(X," HTLC payment failed: invalid secret"),{newState:X,outputs:[],mempoolOps:[]}}if(!G||G.length===0)if(X.accounts.has(J))console.log(`\uD83D\uDD12 Direct account exists with ${eZ(J)}`),G=[$.entityId,J];else if(Z.gossip){let K=await Z.gossip.getNetworkGraph().findPaths($.entityId,J,W,q);if(K.length>0)G=K[0].path,console.log(`\uD83D\uDD12 Found route: ${G.map((M)=>eZ(M)).join("  ")}`);else return $3("HTLC_PAYMENT",` No route found to ${eZ(J)}`),o3(X,` HTLC payment failed: No route to ${eZ(J)}`),{newState:X,outputs:[],mempoolOps:[]}}else return $3("HTLC_PAYMENT"," Cannot find route: Gossip layer not available"),o3(X," HTLC payment failed: Network routing unavailable"),{newState:X,outputs:[],mempoolOps:[]};if(G.length<1||G[0]!==$.entityId)return $3("HTLC_PAYMENT"," Invalid route: doesn't start with current entity"),{newState:$,outputs:[]};if(G[G.length-1]!==J)return $3("HTLC_PAYMENT"," Invalid route: end doesn't match targetEntityId"),{newState:$,outputs:[]};if(G.length===1&&G[0]===J)return o3(X,`\uD83D\uDCB0 Received HTLC payment of ${W} (token ${q})`),{newState:X,outputs:[]};let H=G[1];if(!H)return $3("HTLC_PAYMENT"," Invalid route: no next hop"),{newState:X,outputs:[]};if(!X.accounts.has(H))return $3("HTLC_PAYMENT",` No account with next hop: ${H.slice(-4)}`),o3(X,` HTLC payment failed: No account with ${eZ(H)}`),{newState:X,outputs:[]};let N=G.length-1,C=0,L=N*f4.MIN_TIMELOCK_DELTA_MS+f4.MIN_FORWARD_TIMELOCK_MS,B=Math.max(120000,L),E=BigInt(X.timestamp+B),I=(X.lastFinalizedJHeight||0)+50,_=kx(E,C,N),f=xx(I,C,N),x=fx(P,X.height,0,X.timestamp);X.htlcRoutes.set(P,{hashlock:P,outboundEntity:H,outboundLockId:x,createdTimestamp:X.timestamp});let{createOnionEnvelopes:g}=await Promise.resolve().then(() => (jM(),HM)),h;try{let m=new Map;for(let j of G){let O=Array.from(Z.eReplicas.entries()).find(([R])=>R.startsWith(j+":"));if(O&&O[1].state.cryptoPublicKey)m.set(j,O[1].state.cryptoPublicKey)}let{NobleCryptoProvider:K}=await Promise.resolve().then(() => (PM(),MM)),M=m.size===G.length?new K:void 0;h=await g(G,D,m,M),console.log("\uD83E\uDDC5 "),console.log(`\uD83E\uDDC5 ENVELOPE CREATED at ${eZ($.entityId)}`),console.log(`\uD83E\uDDC5 Route: ${G.map((j)=>eZ(j)).join("  ")}`),console.log(`\uD83E\uDDC5 Encryption: ${M?"ENCRYPTED":"CLEARTEXT"}`),console.log(`\uD83E\uDDC5 Secret: ${D.slice(0,16)}...`),console.log(`\uD83E\uDDC5 Hashlock: ${P.slice(0,16)}...`),console.log(`\uD83E\uDDC5 Envelope structure: ${JSON.stringify(h,null,2).slice(0,300)}...`),console.log("\uD83E\uDDC5 ")}catch(m){return $3("HTLC_PAYMENT",` Envelope creation failed: ${m instanceof Error?m.message:String(m)}`),o3(X," HTLC payment failed: Invalid route"),{newState:X,outputs:[],mempoolOps:[]}}let v={type:"htlc_lock",data:{lockId:x,hashlock:P,timelock:_,revealBeforeHeight:f,amount:W,tokenId:q,envelope:h}};if(X.accounts.get(H)){z.push({accountId:H,tx:v}),console.log(`\uD83D\uDD12 Queued HTLC lock for mempool (account ${eZ(H)})`),console.log(`\uD83D\uDD12 Lock ID: ${x.slice(0,16)}..., expires block ${f}`),X.lockBook.set(x,{lockId:x,accountId:H,tokenId:q,amount:W,hashlock:P,timelock:_,direction:"outgoing",createdAt:BigInt(X.timestamp)}),o3(X,`\uD83D\uDD12 HTLC: Locking ${W} (token ${q}) to ${eZ(J)} via ${G.length-1} hops`);let m=$.config.validators[0];if(m)Y.push({entityId:$.entityId,signerId:m,entityTxs:[]})}return{newState:X,outputs:Y,mempoolOps:z}}var eZ=($)=>$.slice(-4),o3=($,Q)=>$.messages.push(Q),$3=($,Q)=>console.error(`[${$}] ${Q}`);var Z70=p(()=>{C8();zJ();w2()});var X70={};x1(X70,{handleDepositCollateral:()=>mT0});async function mT0($,Q){let{counterpartyId:Z,tokenId:X,amount:Y}=Q.data,z=i1($),J=[],q=$.reserves.get(String(X))||0n;if(q<Y)return K1(z,` Insufficient reserve for collateral deposit: have ${q}, need ${Y} token ${X}`),{newState:z,outputs:J};if(!$.accounts.has(Z))return K1(z,` Cannot deposit collateral: no account with ${Z.slice(-4)}`),{newState:z,outputs:J};if(!z.jBatchState){let{initJBatch:G}=await Promise.resolve().then(() => (c6(),n9));z.jBatchState=G()}let{batchAddReserveToCollateral:W}=await Promise.resolve().then(() => (c6(),n9));return W(z.jBatchState,$.entityId,Z,X,Y),K1(z,`\uD83D\uDCE6 Queued RC: ${Y} token ${X} to account with ${Z.slice(-4)} (use j_broadcast to commit)`),console.log(` deposit_collateral: Added to jBatch for ${$.entityId.slice(-4)}`),console.log(`   Counterparty: ${Z.slice(-4)}`),console.log(`   Token: ${X}, Amount: ${Y}`),console.log("     Remember to send j_broadcast tx to commit batch to J-Machine"),{newState:z,outputs:J}}var Y70=p(()=>{C8()});var J70={};x1(J70,{handleReserveToReserve:()=>pT0});async function pT0($,Q){let{toEntityId:Z,tokenId:X,amount:Y}=Q.data,z=i1($),J=[],q=$.reserves.get(String(X))||0n;if(q<Y)return K1(z,` Insufficient reserve: have ${q}, need ${Y} token ${X}`),{newState:z,outputs:J};if(!z.jBatchState)z.jBatchState=x7();return LE(z.jBatchState,Z,X,Y),K1(z,`\uD83D\uDCE6 Queued RR: ${Y} token ${X} to ${Z.slice(-4)} (use jBroadcast to commit)`),console.log(` reserve_to_reserve: Added to jBatch for ${$.entityId.slice(-4)}`),console.log(`   To: ${Z.slice(-4)}, Token: ${X}, Amount: ${Y}`),{newState:z,outputs:J}}var z70=p(()=>{C8();c6()});var q70={};x1(q70,{handleJBroadcast:()=>uT0});async function uT0($,Q,Z){let{hankoSignature:X}=Q.data,Y=i1($),z=[],J=[];if(!Y.jBatchState||KO(Y.jBatchState.batch)){let H=Y.jBatchState?.batch;if(H)console.warn(` j_broadcast: empty batch for ${$.entityId.slice(-4)} (r2r=${H.reserveToReserve.length}, r2c=${H.reserveToCollateral.length}, c2r=${H.collateralToReserve.length}, settlements=${H.settlements.length}, starts=${H.disputeStarts.length}, finals=${H.disputeFinalizations.length})`);else console.warn(` j_broadcast: missing jBatchState for ${$.entityId.slice(-4)}`);return K1(Y," No operations to broadcast - jBatch is empty"),{newState:Y,outputs:z,jOutputs:J}}let q=$.config.jurisdiction;if(!q)return K1(Y," No jurisdiction configured for this entity"),{newState:Y,outputs:z,jOutputs:J};let W=tQ(Y.jBatchState.batch);console.log(`\uD83D\uDCE4 j_broadcast: Queuing batch to J-mempool (${W} operations)`),console.log(`   Hanko: ${X?"provided":"none"}`);let G=$.config.validators[0];if(!G)return K1(Y," No signerId available - cannot sign batch for broadcast"),{newState:Y,outputs:z,jOutputs:J};let U=q.name||Z.activeJurisdiction||"default";console.log(`\uD83D\uDD0D j_broadcast: Targeting J-machine "${U}"`);let D={type:"batch",entityId:$.entityId,data:{batch:rK(Y.jBatchState.batch),...X?{hankoSignature:X}:{},batchSize:W,...G?{signerId:G}:{}},timestamp:Y.timestamp},P={jurisdictionName:U,jTxs:[D]};return J.push(P),console.log(` j_broadcast: Created jOutput for J-machine "${U}"`),console.log("   \uD83D\uDCE6 Will queue to J-mempool via runtime"),console.log(`   Batch size: ${W} operations`),Y.jBatchState.broadcastCount++,Y.jBatchState.lastBroadcast=Y.timestamp,Y.jBatchState.pendingBroadcast=!0,K1(Y,`\uD83D\uDCE4 Created J-output (${W} ops) - will queue via runtime`),{newState:Y,outputs:z,jOutputs:J}}var W70=p(()=>{C8();c6()});var K70={};x1(K70,{handleJClearBatch:()=>cT0});async function cT0($,Q,Z){let{reason:X}=Q.data,Y=i1($),z=[],J=[];if(!Y.jBatchState)return K1(Y," No jBatchState to clear"),{newState:Y,outputs:z,jOutputs:J};let q=tQ(Y.jBatchState.batch),W=Y.jBatchState.pendingBroadcast;Y.jBatchState.batch=GR(),Y.jBatchState.pendingBroadcast=!1;let G=X?` (${X})`:"",U=W?" [was pending]":"";return console.log(`\uD83D\uDDD1 j_clear_batch: Cleared ${q} operations${G}${U}`),K1(Y,`\uD83D\uDDD1 Cleared jBatch (${q} ops)${G}${U}`),{newState:Y,outputs:z,jOutputs:J}}var G70=p(()=>{C8();c6()});var U70={};x1(U70,{handleMintReserves:()=>dT0});async function dT0($,Q,Z){let{tokenId:X,amount:Y}=Q.data,z=i1($),J=[];console.log(`\uD83D\uDCB0 mintReserves: ${$.entityId.slice(-4)} minting ${Y} token ${X}`);let q={type:"mint",entityId:$.entityId,data:{entityId:$.entityId,tokenId:X,amount:Y},timestamp:z.timestamp},G=[{jurisdictionName:Z.activeJurisdiction||"default",jTxs:[q]}];return K1(z,`\uD83D\uDCB0 Minting ${Y} of token ${X}`),console.log(` mintReserves: Queued direct mint for ${$.entityId.slice(-4)}`),console.log(`   Token: ${X}, Amount: ${Y}`),{newState:z,outputs:J,jOutputs:G}}var V70=p(()=>{C8()});var O70={};x1(O70,{handleCreateSettlement:()=>lT0});async function lT0($,Q){let{counterpartyEntityId:Z,diffs:X,sig:Y}=Q.data,z=i1($),J=[];if(console.log(` createSettlement: ${$.entityId.slice(-4)}  ${Z.slice(-4)}`),console.log(`   Diffs: ${X.length} operations`),!z.jBatchState)z.jBatchState=x7();let q=K5($.entityId,Z),W=q?$.entityId:Z,G=q?Z:$.entityId;if(!Y||Y==="0x")throw Error(`Settlement ${$.entityId.slice(-4)}${Z.slice(-4)} missing hanko signature`);return GO(z.jBatchState,W,G,X,[],[],Y,void 0,"0x",0,$.entityId),console.log(` createSettlement: Added to jBatch for ${$.entityId.slice(-4)}`),console.log(`   Settlement: ${W.slice(-4)}  ${G.slice(-4)}`),K1(z,` Settlement created (${X.length} diffs) - use jBroadcast to commit`),{newState:z,outputs:J}}var D70=p(()=>{C8();c6();h8()});var M70={};x1(M70,{handleRequestWithdrawal:()=>iT0});function iT0($,Q){let{counterpartyEntityId:Z,tokenId:X,amount:Y}=Q.data,z=$.accounts.get(Z);if(!z)throw Error(`No account exists with ${Z.slice(-8)}`);let J=z?.sendCounter||0,q=`w-${$.entityId.slice(-4)}-${$.height}-${J}`,W={type:"request_withdrawal",data:{tokenId:X,amount:Y,requestId:q}};return z.mempool.push(W),console.log(`\uD83D\uDCB8 Queued withdrawal request: ${Y} (token ${X}) from ${Z.slice(-8)}`),console.log(`   Request ID: ${q}`),console.log(`   Account mempool now has ${z.mempool.length} pending transactions`),$}var Yb={};x1(Yb,{handleDisputeStart:()=>rT0,handleDisputeFinalize:()=>aT0});function oT0($){if(!Number.isFinite($)||$<=0)return 0;if($>=P70)return P70;return Math.floor($)}function H70($,Q){let Z=M0.AbiCoder.defaultAbiCoder(),X=$.map((Y)=>BigInt(oT0(Y)));return Z.encode(["uint32[]","bytes32[]"],[X,Q])}function j70($){return M0.AbiCoder.defaultAbiCoder().encode(["bytes[]"],[[$]])}function R70($,Q={}){let Z=$.locks?.size?$.locks.size>0:!1,X=$.swapOffers?.size?$.swapOffers.size>0:!1;if(!Z&&!X)return{leftArguments:"0x",rightArguments:"0x"};let Y=[],z=[],J=Array.from($.swapOffers.entries()).sort((H,N)=>H[0].localeCompare(N[0]));for(let[H,N]of J){let C=Q.fillRatiosByOfferId?.get(H)??0;if(N.makerIsLeft)z.push(C);else Y.push(C)}let q=Q.leftSecrets??[],W=Q.rightSecrets??[],G=H70(Y,q),U=H70(z,W),D=q.length>0||Y.some((H)=>H>0),P=W.length>0||z.some((H)=>H>0);return{leftArguments:D?j70(G):"0x",rightArguments:P?j70(U):"0x"}}function N70($,Q,Z){let X=$.pendingSwapFillRatios;if(!X||X.size===0)return new Map;let Y=new Map;for(let z of Z.swapOffers.keys()){let J=`${Q}:${z}`,q=X.get(J);if(q!==void 0)Y.set(z,q)}return Y}function nT0($,Q){let Z=[];if(!$.htlcRoutes?.size)return Z;let X=new Set;for(let Y of $.htlcRoutes.values()){if(!Y.secret)continue;if(!(Y.inboundEntity===Q||Y.outboundEntity===Q))continue;if(X.has(Y.secret))continue;X.add(Y.secret),Z.push(Y.secret)}return Z}async function rT0($,Q,Z){let{counterpartyEntityId:X,description:Y}=Q.data,z=i1($),J=[];if(console.log(` disputeStart: ${$.entityId.slice(-4)} vs ${X.slice(-4)}`),!z.jBatchState)z.jBatchState=x7();eQ(z.jBatchState,"disputeStart");let q=z.accounts.get(X);if(!q)return K1(z,` No account with ${X.slice(-4)} - cannot start dispute`),{newState:z,outputs:J};let W=q.proofHeader.disputeNonce,G=q.leftEntity===X,U=N70(z,X,q),{leftArguments:D,rightArguments:P}=R70(q,{fillRatiosByOfferId:U}),H=G?D:P,N=q.counterpartyDisputeProofHanko,C=q.counterpartyDisputeProofBodyHash;if(!N||N==="0x"||N.length<=2)return K1(z," Missing counterparty dispute hanko - cannot start dispute"),console.error(` Account ${X.slice(-4)} has empty counterpartyDisputeProofHanko`),{newState:z,outputs:J};console.log(" Using stored counterparty dispute hanko:"),console.log(`   Length: ${N.length} bytes`),console.log(`   First 66 chars: ${N.slice(0,66)}`),console.log(`   Sig bytes: ${(N.length-2)/2}`);let L;if(C)L=C,console.log(` Using stored counterparty proofBodyHash: ${C.slice(0,10)}...`);else L=bD(q).proofBodyHash,console.warn(" No stored proofBodyHash - using fresh (may mismatch hanko!)");let B=Boolean(q.counterpartyDisputeProofHanko),E=q.proofHeader.cooperativeNonce,I="proofHeader",_=q.disputeProofNoncesByHash?.[L];if(_!==void 0)E=_,I="hashMap";else if(q.counterpartyDisputeProofCooperativeNonce!==void 0)E=q.counterpartyDisputeProofCooperativeNonce,I="counterpartySig";else if(B&&q.ackedTransitions>0)E=q.ackedTransitions-1,I="ackedTransitions-1";return console.log(`   Using cooperativeNonce=${E} (${I}), disputeNonce=${W}`),z.jBatchState.batch.disputeStarts.push({counterentity:X,cooperativeNonce:E,disputeNonce:W,proofbodyHash:L,sig:N,initialArguments:H}),console.log(` disputeStart: Added to jBatch for ${$.entityId.slice(-4)}`),console.log(`   Proof hash: ${L.slice(0,10)}...`),console.log(`   Hanko sig length: ${N?.length||0}, first 40: ${N?.slice(0,40)||"EMPTY"}`),console.log(`   cooperativeNonce: ${E}, disputeNonce: ${W}`),K1(z,` Dispute started vs ${X.slice(-4)} ${Y?`(${Y})`:""} - use jBroadcast to commit`),{newState:z,outputs:J}}async function aT0($,Q,Z){let{counterpartyEntityId:X,cooperative:Y,description:z}=Q.data,J=i1($),q=[];if(console.log(` disputeFinalize: ${$.entityId.slice(-4)} vs ${X.slice(-4)}`),console.log(`   Cooperative: ${Y||!1}`),!J.jBatchState)J.jBatchState=x7();eQ(J.jBatchState,"disputeFinalize");let W=J.accounts.get(X);if(!W)return K1(J,` No account with ${X.slice(-4)} - cannot finalize dispute`),{newState:J,outputs:q};if(!W.activeDispute)return K1(J,` No active dispute with ${X.slice(-4)} - must call disputeStart first`),{newState:J,outputs:q};let G=bD(W),U=W.counterpartyDisputeProofBodyHash,D=U?W.disputeProofBodiesByHash?.[U]:void 0,P=W.proofHeader.disputeNonce>W.activeDispute.initialDisputeNonce,H=P&&W.counterpartyDisputeProofHanko?W.counterpartyDisputeProofHanko:"0x",N=W.counterpartyDisputeProofBodyHash?W.disputeProofNoncesByHash?.[W.counterpartyDisputeProofBodyHash]:void 0,C=P?N??W.counterpartyDisputeProofCooperativeNonce??W.proofHeader.cooperativeNonce:W.activeDispute.onChainCooperativeNonce,L=W.leftEntity===J.entityId,B=N70(J,X,W),E=nT0(J,X),{leftArguments:I,rightArguments:_}=R70(W,{fillRatiosByOfferId:B,leftSecrets:L?E:[],rightSecrets:L?[]:E}),f=L?I:_,x=W.activeDispute.initialArguments||(L?_:I),g=W.activeDispute.initialProofbodyHash?W.disputeProofBodiesByHash?.[W.activeDispute.initialProofbodyHash]:void 0;if(P&&!D)throw Error("disputeFinalize: missing counterparty proof body for counter-dispute");let h=!P&&!Y&&g;if(!P&&!Y&&G.proofBodyHash!==W.activeDispute.initialProofbodyHash){if(console.warn(` disputeFinalize: current proofBodyHash != initial (current=${G.proofBodyHash.slice(0,10)}..., initial=${W.activeDispute.initialProofbodyHash.slice(0,10)}...)`),!g)throw Error("disputeFinalize: missing stored proofBody for unilateral finalize")}let v=P?D||G.proofBodyStruct:h?g:G.proofBodyStruct,b={counterentity:X,initialCooperativeNonce:W.activeDispute.initialCooperativeNonce,finalCooperativeNonce:C,initialDisputeNonce:W.activeDispute.initialDisputeNonce,finalDisputeNonce:P?W.proofHeader.disputeNonce:W.activeDispute.initialDisputeNonce,initialProofbodyHash:W.activeDispute.initialProofbodyHash,finalProofbody:v,finalArguments:f,initialArguments:x,sig:H,startedByLeft:W.activeDispute.startedByLeft,disputeUntilBlock:W.activeDispute.disputeTimeout,cooperative:Y||!1};if(Q.data.useOnchainRegistry){let m=xD();if(m!=="0x0000000000000000000000000000000000000000")for(let K of E)UO(J.jBatchState,m,K);else console.warn(" disputeFinalize: DeltaTransformer address not set - skipping on-chain HTLC reveals")}return console.log(`   Mode: ${P?"counter-dispute":"unilateral"}, timeout=${W.activeDispute.disputeTimeout}`),console.log(`   DEBUG: initialCooperativeNonce=${b.initialCooperativeNonce}, onChainNonce=${b.finalCooperativeNonce}`),J.jBatchState.batch.disputeFinalizations.push(b),console.log(` disputeFinalize: Added to jBatch for ${$.entityId.slice(-4)}`),console.log(`   Mode: ${Y?"cooperative":"unilateral"}`),K1(J,` Dispute finalized vs ${X.slice(-4)} ${z?`(${z})`:""} - use jBroadcast to commit`),{newState:J,outputs:q}}var P70=65535;var Jb=p(()=>{A6();C8();c6();g3();g3()});var C70=async($,Q,Z)=>{if(!Z)return y1("ENTITY_TX"," EntityTx is undefined!"),{newState:Q,outputs:[]};try{if(Z.type==="chat"){let{from:X,message:Y}=Z.data;if(!$70(Y))return z5.error(` Invalid chat message from ${X}`),{newState:Q,outputs:[]};let J=(Q.nonces.get(X)||0)+1,q=i1(Q);return q.nonces.set(X,J),K1(q,`${X}: ${Y}`),{newState:q,outputs:[]}}if(Z.type==="chatMessage"){let{message:X}=Z.data,Y=i1(Q);return K1(Y,X),{newState:Y,outputs:[]}}if(Z.type==="propose"){let{action:X,proposer:Y}=Z.data,z=e40(X,Y,Q);if(D1)console.log(`    \uD83D\uDCDD Creating proposal ${z} by ${Y}: ${X.data.message}`);let J={id:z,proposer:Y,action:X,votes:new Map([[Y,"yes"]]),status:"pending",created:Q.timestamp},q=Q.config.shares[Y]||BigInt(0),W=q>=Q.config.threshold,G=i1(Q);if(W){if(J.status="executed",G=Qb(G,J),D1)console.log(`     Proposal executed immediately - proposer has ${q} >= ${Q.config.threshold} threshold`)}else if(D1)console.log(`     Proposal pending votes - proposer has ${q} < ${Q.config.threshold} threshold`);return G.proposals.set(z,J),{newState:G,outputs:[]}}if(Z.type==="vote"){console.log("\uD83D\uDDF3 PROCESSING VOTE: entityTx.data=",Z.data);let{proposalId:X,voter:Y,choice:z,comment:J}=Z.data,q=Q.proposals.get(X);if(console.log(`\uD83D\uDDF3 Vote lookup: proposalId=${X}, found=${!!q}, status=${q?.status}`),console.log("\uD83D\uDDF3 Available proposals:",Array.from(Q.proposals.keys())),!q||q.status!=="pending")return console.log(`     Vote ignored - proposal ${X.slice(0,12)}... not found or not pending`),{newState:Q,outputs:[]};console.log(`    \uD83D\uDDF3  Vote by ${Y}: ${z} on proposal ${X.slice(0,12)}...`);let W=i1(Q),G={...q,votes:new Map(q.votes)},U=J!==void 0?{choice:z,comment:J}:z;G.votes.set(Y,U);let D=Array.from(G.votes.entries()).filter(([H,N])=>{return(typeof N==="object"?N.choice:N)==="yes"}).map(([H,N])=>H),P=$T(Q.config,D);if(D1){let H=Object.values(Q.config.shares).reduce((C,L)=>C+L,BigInt(0)),N=(Number(P)/Number(Q.config.threshold)*100).toFixed(1);console.log(`    \uD83D\uDD0D Proposal votes: ${P} / ${H} [${N}% threshold${Number(P)>=Number(Q.config.threshold)?"+":""}]`)}if(P>=Q.config.threshold){G.status="executed";let H=Qb(W,G);return H.proposals.set(X,G),{newState:H,outputs:[]}}return W.proposals.set(X,G),{newState:W,outputs:[]}}if(Z.type==="profile-update"){console.log("\uD83C\uDFF7 Profile update transaction processing - data:",Z.data);let X=Z.data.profile;if(console.log("\uD83C\uDFF7 Extracted profileData:",X),X&&X.entityId){console.log(`\uD83C\uDFF7 Calling processProfileUpdate for entity ${X.entityId}`);try{await T20(q2,X.entityId,X,X.hankoSignature||"",$)}catch(Y){y1("ENTITY_TX",` Failed to process profile update for ${X.entityId}:`,Y)}}else console.warn(" Invalid profile-update transaction data:",Z.data),console.warn(" ProfileData missing or invalid:",X);return{newState:Q,outputs:[]}}if(Z.type==="initOrderbookExt"){if(Q.orderbookExt)return{newState:Q,outputs:[]};let X={entityId:Q.entityId,name:Z.data.name,spreadDistribution:Z.data.spreadDistribution,referenceTokenId:Z.data.referenceTokenId,minTradeSize:Z.data.minTradeSize,supportedPairs:[...Z.data.supportedPairs]},Y=i1(Q);return Y.orderbookExt=Fx(X),{newState:Y,outputs:[]}}if(Z.type==="j_event"){$.emit("JEventReceived",{entityId:Q.entityId,eventType:Z.data.event.type,blockNumber:Z.data.blockNumber,txHash:Z.data.transactionHash});let{newState:X,mempoolOps:Y}=await bx(Q,Z.data,$);return{newState:X,outputs:[],mempoolOps:Y||[]}}if(Z.type==="accountInput"){let X=await ex(Q,Z.data,$);return{newState:X.newState,outputs:X.outputs,mempoolOps:X.mempoolOps,swapOffersCreated:X.swapOffersCreated,swapOffersCancelled:X.swapOffersCancelled,...X.hashesToSign&&X.hashesToSign.length>0&&{hashesToSign:X.hashesToSign}}}if(Z.type==="openAccount"){let X=Z.data.targetEntityId,Y=X,z=K5(Q.entityId,X);if(Q.accounts.has(Y))return console.log(`\uD83D\uDCB3 OPEN-ACCOUNT: Account with ${x6(Y)} already exists, skipping duplicate request`),{newState:Q,outputs:[]};console.log(`\uD83D\uDCB3 OPEN-ACCOUNT: Opening account with ${Y} (counterparty: ${Y.slice(-4)})`),$.emit("AccountOpening",{entityId:Q.entityId,counterpartyId:X});let J=i1(Q),q=[];if(K1(J,`\uD83D\uDCB3 Opening account with Entity ${x6(Z.data.targetEntityId)}...`),!J.accounts.has(Y)){console.log(`\uD83D\uDCB3 LOCAL-ACCOUNT: Creating local account with Entity ${x6(Y)}...`);let U=new Map,D=z?Q.entityId:Y,P=z?Y:Q.entityId;J.accounts.set(Y,{leftEntity:D,rightEntity:P,mempool:[],currentFrame:{height:0,timestamp:J.timestamp,jHeight:0,accountTxs:[],prevFrameHash:"",tokenIds:[],deltas:[],stateHash:"",byLeft:z},sentTransitions:0,ackedTransitions:0,deltas:U,globalCreditLimits:{ownLimit:0n,peerLimit:0n},currentHeight:0,pendingSignatures:[],rollbackCount:0,sendCounter:0,receiveCounter:0,proofHeader:{fromEntity:Q.entityId,toEntity:Y,cooperativeNonce:0,disputeNonce:0},proofBody:{tokenIds:[],deltas:[]},disputeConfig:{leftDisputeDelay:2,rightDisputeDelay:2},frameHistory:[],pendingWithdrawals:new Map,requestedRebalance:new Map,locks:new Map,swapOffers:new Map,leftJObservations:[],rightJObservations:[],jEventChain:[],lastFinalizedJHeight:0,onChainSettlementNonce:0})}console.log(`\uD83D\uDCB3 Preparing account setup for ${x6(Z.data.targetEntityId)} (left=${z})`);let W=J.accounts.get(Y);if(!W)throw Error("CRITICAL: Account machine not found after creation");if(z)W.mempool.push({type:"add_delta",data:{tokenId:1}}),console.log(`\uD83D\uDCDD Queued add_delta to mempool (total: ${W.mempool.length})`),console.log(" Frame #1 will be auto-proposed on next tick (100ms) via AUTO-PROPOSE"),console.log("   Transactions: [add_delta] - credit limits start at 0, must be explicitly set");else console.log("\uD83E\uDDED Right side: waiting for left's frame (mempool stays empty)");K1(J,` Account opening request sent to Entity ${x6(Y)}`);let G=l3($,X,"openAccount");if(q.push({entityId:X,signerId:G,entityTxs:[{type:"openAccount",data:{targetEntityId:Q.entityId}}]}),console.log(`\uD83D\uDCE4 Sent openAccount request to counterparty ${x6(X)} (signer: ${G})`),$.gossip){let U=$.gossip?.getProfiles?.().find((C)=>C.entityId===J.entityId),D=U?.metadata?.lastUpdated||0,P=Math.max(D+1,$.timestamp),H=U?.metadata?.name,N=UU(J,H,P);if(console.log(`\uD83C\uDFD7 Built profile for ${J.entityId.slice(-4)}: accounts=${N.accounts?.length||0} name=${N.metadata?.name||"none"}`),$.runtimeId)N.runtimeId=$.runtimeId;console.log(`\uD83D\uDCE1 Announcing profile ${J.entityId.slice(-4)} ts=${P} accounts=${N.accounts?.length||0}`),$.gossip.announce(N)}return{newState:J,outputs:q}}if(Z.type==="htlcPayment"){let{handleHtlcPayment:X}=await Promise.resolve().then(() => (Z70(),Q70));return await X(Q,Z,$)}if(Z.type==="processHtlcTimeouts"){console.log(` PROCESS-HTLC-TIMEOUTS: Processing ${Z.data.expiredLocks?.length||0} expired locks`);let X=i1(Q),Y=[],z=[];for(let{accountId:J,lockId:q}of Z.data.expiredLocks||[])z.push({accountId:J,tx:{type:"htlc_timeout",data:{lockId:q}}}),console.log(`   Queued timeout for lock ${q.slice(0,16)}... on account ${J.slice(-4)}`);return{newState:X,outputs:Y,mempoolOps:z}}if(Z.type==="manualHtlcLock"){console.log("\uD83D\uDD12 MANUAL-HTLC-LOCK: Creating lock without envelope (timeout test)");let X=i1(Q),Y=[],z=[],{counterpartyId:J,lockId:q,hashlock:W,timelock:G,revealBeforeHeight:U,amount:D,tokenId:P}=Z.data;return z.push({accountId:J,tx:{type:"htlc_lock",data:{lockId:q,hashlock:W,timelock:G,revealBeforeHeight:U,amount:D,tokenId:P}}}),console.log(`\uD83D\uDD12   Queued htlc_lock for ${J.slice(-4)}, lockId=${q.slice(0,16)}...`),{newState:X,outputs:Y,mempoolOps:z}}if(Z.type==="directPayment"){console.log("\uD83D\uDCB8 "),console.log(`\uD83D\uDCB8 DIRECT-PAYMENT HANDLER: ${Q.entityId.slice(-4)}  ${Z.data.targetEntityId.slice(-4)}`),console.log(`\uD83D\uDCB8 Amount: ${Z.data.amount}, TokenId: ${Z.data.tokenId}`),console.log(`\uD83D\uDCB8 Route: ${Z.data.route?.map((N)=>N.slice(-4)).join("")||"NONE (will calculate)"}`),console.log(`\uD83D\uDCB8 Description: ${Z.data.description||"none"}`),$.emit("PaymentInitiated",{fromEntity:Q.entityId,toEntity:Z.data.targetEntityId,tokenId:Z.data.tokenId,amount:Z.data.amount.toString(),route:Z.data.route});let X=i1(Q),Y=[],z=[];console.log("\uD83D\uDCB8 Initialized: outputs=[], mempoolOps=[]");let{targetEntityId:J,tokenId:q,amount:W,route:G,description:U}=Z.data;if(W<G5.MIN_PAYMENT_AMOUNT||W>G5.MAX_PAYMENT_AMOUNT)return y1("ENTITY_TX",` Payment amount out of bounds: ${W.toString()} (min ${G5.MIN_PAYMENT_AMOUNT.toString()}, max ${G5.MAX_PAYMENT_AMOUNT.toString()})`),K1(X," Payment failed: amount out of bounds"),{newState:X,outputs:[]};if(!G||G.length===0)if(X.accounts.has(J))console.log(`\uD83D\uDCB8 Direct account exists with ${x6(J)}`),G=[Q.entityId,J];else if(console.log(`\uD83D\uDCB8 No direct account, finding route to ${x6(J)}`),$.gossip){let C=await $.gossip.getNetworkGraph().findPaths(Q.entityId,J,W,q);if(C.length>0)G=C[0].path,console.log(`\uD83D\uDCB8 Found route: ${G.map((L)=>x6(L)).join("  ")}`);else return y1("ENTITY_TX",` No route found to ${x6(J)}`),K1(X,` Payment failed: No route to ${x6(J)}`),{newState:X,outputs:[]}}else return y1("ENTITY_TX"," Cannot find route: Gossip layer not available"),K1(X," Payment failed: Network routing unavailable"),{newState:X,outputs:[]};if(G.length<1||G[0]!==Q.entityId)return console.error(` ROUTE VALIDATION FAILED: route.length=${G.length}, route[0]=${G[0]?.slice(-4)}, entityId=${Q.entityId.slice(-4)}`),y1("ENTITY_TX"," Invalid route: doesn't start with current entity"),{newState:Q,outputs:[]};if(G[G.length-1]!==J)return console.error(` ROUTE VALIDATION FAILED: route ends with ${G[G.length-1]?.slice(-4)}, expected targetEntityId=${J.slice(-4)}`),y1("ENTITY_TX"," Invalid route: route end must match targetEntityId"),{newState:Q,outputs:[]};if(G.length===1&&G[0]===J)return console.error(` FINAL DESTINATION: Entity ${Q.entityId.slice(-4)} is the final recipient`),K1(X,`\uD83D\uDCB0 Received payment of ${W} (token ${q})`),{newState:X,outputs:[]};let D=G[1];if(!D)return console.error(` ROUTE ERROR: No next hop in route=[${G.map((N)=>N.slice(-4)).join(",")}]`),y1("ENTITY_TX"," Invalid route: no next hop specified in route"),{newState:X,outputs:[]};let P=X.accounts.get(D);if(!P)return y1("ENTITY_TX",` No account with next hop: ${D}`),K1(X,` Payment failed: No account with ${x6(D)}`),{newState:X,outputs:[]};let H={type:"direct_payment",data:{tokenId:q,amount:W,route:G.slice(1),description:U||`Payment to ${x6(J)}`,fromEntityId:Q.entityId,toEntityId:D}};if(P){z.push({accountId:D,tx:H}),console.log(`\uD83D\uDCB8 QUEUED TO MEMPOOL: account=${x6(D)}`),console.log(`\uD83D\uDCB8   AccountTx type: ${H.type}`),console.log(`\uD83D\uDCB8   Amount: ${H.data.amount}`),console.log(`\uD83D\uDCB8   From: ${H.data.fromEntityId?.slice(-4)}`),console.log(`\uD83D\uDCB8   To: ${H.data.toEntityId?.slice(-4)}`),console.log(`\uD83D\uDCB8   Route after slice: [${H.data.route?.map((L)=>L.slice(-4)).join(",")||"none"}]`),console.log(`\uD83D\uDCB8 mempoolOps.length: ${z.length}`);let N=K5(P.proofHeader.fromEntity,P.proofHeader.toEntity);console.log(`\uD83D\uDCB8 Account state: isLeft=${N}, hasPendingFrame=${!!P.pendingFrame}`),K1(X,`\uD83D\uDCB8 Sending ${W} (token ${q}) to ${x6(J)} via ${G.length-1} hops`),console.log(`\uD83D\uDCB8 Payment queued for bilateral consensus with ${x6(D)}`),console.log(`\uD83D\uDCB8 Account ${x6(D)} will be added to proposableAccounts`);let C=Q.config.validators[0];if(C)Y.push({entityId:Q.entityId,signerId:C,entityTxs:[]}),console.log(`\uD83D\uDCB8 Added processing trigger: outputs.length=${Y.length}`);console.log(`\uD83D\uDCB8 DIRECT-PAYMENT COMPLETE: mempoolOps=${z.length}, outputs=${Y.length}`),console.log("\uD83D\uDCB8 ")}return{newState:X,outputs:Y,mempoolOps:z}}if(Z.type==="deposit_collateral"){let{handleDepositCollateral:X}=await Promise.resolve().then(() => (Y70(),X70));return await X(Q,Z)}if(Z.type==="reserve_to_reserve"){let{handleReserveToReserve:X}=await Promise.resolve().then(() => (z70(),J70));return await X(Q,Z)}if(Z.type==="j_broadcast"){let{handleJBroadcast:X}=await Promise.resolve().then(() => (W70(),q70)),Y=Q.jBatchState?.batch;if(Y)console.log(`\uD83D\uDD0D APPLY j_broadcast: ${Q.entityId.slice(-4)} batch r2r=${Y.reserveToReserve.length}, r2c=${Y.reserveToCollateral.length}, c2r=${Y.collateralToReserve.length}, settlements=${Y.settlements.length}, starts=${Y.disputeStarts.length}, finals=${Y.disputeFinalizations.length}`);else console.log(`\uD83D\uDD0D APPLY j_broadcast: ${Q.entityId.slice(-4)} has no jBatchState`);return await X(Q,Z,$)}if(Z.type==="j_clear_batch"){let{handleJClearBatch:X}=await Promise.resolve().then(() => (G70(),K70));return await X(Q,Z,$)}if(Z.type==="mintReserves"){let{handleMintReserves:X}=await Promise.resolve().then(() => (V70(),U70));return await X(Q,Z,$)}if(Z.type==="createSettlement"){let{handleCreateSettlement:X}=await Promise.resolve().then(() => (D70(),O70));return await X(Q,Z)}if(Z.type==="settle_propose"){let{handleSettlePropose:X}=await Promise.resolve().then(() => (WJ(),dq));return await X(Q,Z,$)}if(Z.type==="settle_update"){let{handleSettleUpdate:X}=await Promise.resolve().then(() => (WJ(),dq));return await X(Q,Z,$)}if(Z.type==="settle_approve"){let{handleSettleApprove:X}=await Promise.resolve().then(() => (WJ(),dq)),Y=await X(Q,Z,$);return{...Y,...Y.hashesToSign&&Y.hashesToSign.length>0&&{hashesToSign:Y.hashesToSign}}}if(Z.type==="settle_execute"){let{handleSettleExecute:X}=await Promise.resolve().then(() => (WJ(),dq));return await X(Q,Z,$)}if(Z.type==="settle_reject"){let{handleSettleReject:X}=await Promise.resolve().then(() => (WJ(),dq));return await X(Q,Z,$)}if(Z.type==="extendCredit"){console.log(`\uD83D\uDCB3 EXTEND-CREDIT: ${Q.entityId.slice(-4)} extending credit to ${Z.data.counterpartyEntityId.slice(-4)}`);let X=i1(Q),Y=[],z=[],{counterpartyEntityId:J,tokenId:q,amount:W}=Z.data;if(!X.accounts.get(J))return console.error(` No account with ${J.slice(-4)} for credit extension`),{newState:Q,outputs:[]};let D=J<Q.entityId?"left":"right",P={type:"set_credit_limit",data:{tokenId:q,amount:W,side:D}};z.push({accountId:J,tx:P}),console.log(`\uD83D\uDCB3 Added set_credit_limit to mempoolOps for account with ${J.slice(-4)}`),console.log(`\uD83D\uDCB3 Setting ${D}CreditLimit=${W} (counterparty is ${D}) for token ${q}`),K1(X,`\uD83D\uDCB3 Extended credit of ${W} to ${J.slice(-4)}`);let H=Q.config.validators[0];if(H)Y.push({entityId:Q.entityId,signerId:H,entityTxs:[]});return console.log(`\uD83D\uDCB8 DIRECT-PAYMENT RETURN: outputs.length=${Y.length}`),{newState:X,outputs:Y,mempoolOps:z}}if(Z.type==="placeSwapOffer"){console.log(`\uD83D\uDCCA PLACE-SWAP-OFFER: ${Q.entityId.slice(-4)} placing offer with ${Z.data.counterpartyEntityId.slice(-4)}`);let X=i1(Q),Y=[],z=[],{counterpartyEntityId:J,offerId:q,giveTokenId:W,giveAmount:G,wantTokenId:U,wantAmount:D,minFillRatio:P}=Z.data;if(!X.accounts.get(J))return console.error(` No account with ${J.slice(-4)} for swap offer`),{newState:Q,outputs:[]};let N={type:"swap_offer",data:{offerId:q,giveTokenId:W,giveAmount:G,wantTokenId:U,wantAmount:D,minFillRatio:P}};z.push({accountId:J,tx:N}),console.log(`\uD83D\uDCCA Added swap_offer to mempoolOps for account with ${J.slice(-4)}`);let C=`${J}:${q}`;X.swapBook.set(C,{offerId:q,accountId:J,giveTokenId:W,giveAmount:G,wantTokenId:U,wantAmount:D,minFillRatio:P??0,createdAt:BigInt(X.timestamp)});let L=Q.config.validators[0];if(L)Y.push({entityId:Q.entityId,signerId:L,entityTxs:[]});return{newState:X,outputs:Y,mempoolOps:z}}if(Z.type==="resolveSwap"){console.log(`\uD83D\uDCB1 RESOLVE-SWAP: ${Q.entityId.slice(-4)} resolving offer with ${Z.data.counterpartyEntityId.slice(-4)}`);let X=i1(Q),Y=[],z=[],{counterpartyEntityId:J,offerId:q,fillRatio:W,cancelRemainder:G}=Z.data;if(!X.accounts.get(J))return console.error(` No account with ${J.slice(-4)} for swap resolve`),{newState:Q,outputs:[]};let D={type:"swap_resolve",data:{offerId:q,fillRatio:W,cancelRemainder:G}};z.push({accountId:J,tx:D}),console.log(`\uD83D\uDCB1 Added swap_resolve to mempoolOps for account with ${J.slice(-4)}`);let P=Q.config.validators[0];if(P)Y.push({entityId:Q.entityId,signerId:P,entityTxs:[]});return{newState:X,outputs:Y,mempoolOps:z}}if(Z.type==="fillSwapOffer"){console.log(`\uD83D\uDCB1 FILL-SWAP-OFFER: ${Q.entityId.slice(-4)} filling offer`);let X=i1(Q),Y=[],z=[],{offerId:J,counterpartyId:q,fillRatio:W}=Z.data;if(!X.accounts.get(q))return console.error(` No account with ${q.slice(-4)}`),{newState:Q,outputs:[]};let U={type:"swap_resolve",data:{offerId:J,fillRatio:W,cancelRemainder:!1}};z.push({accountId:q,tx:U});let D=Q.config.validators[0];if(D)Y.push({entityId:Q.entityId,signerId:D,entityTxs:[]});return{newState:X,outputs:Y,mempoolOps:z}}if(Z.type==="cancelSwapOffer"||Z.type==="cancelSwap"){console.log(`\uD83D\uDCCA CANCEL-SWAP: ${Q.entityId.slice(-4)} cancelling offer with ${Z.data.counterpartyEntityId.slice(-4)}`);let X=i1(Q),Y=[],z=[],{counterpartyEntityId:J,offerId:q}=Z.data;if(!X.accounts.get(J))return console.error(` No account with ${J.slice(-4)} for swap cancel`),{newState:Q,outputs:[]};let G={type:"swap_cancel",data:{offerId:q}};z.push({accountId:J,tx:G}),console.log(`\uD83D\uDCCA Added swap_cancel to mempoolOps for account with ${J.slice(-4)}`);let U=`${J}:${q}`;X.swapBook.delete(U);let D=Q.config.validators[0];if(D)Y.push({entityId:Q.entityId,signerId:D,entityTxs:[]});return{newState:X,outputs:Y,mempoolOps:z}}if(Z.type==="requestWithdrawal"){let{handleRequestWithdrawal:X}=await Promise.resolve().then(() => M70);return{newState:X(Q,Z),outputs:[]}}if(Z.type==="settleDiffs"){console.log(`\uD83C\uDFE6 SETTLE-DIFFS: Processing settlement with ${Z.data.counterpartyEntityId}`);let X=i1(Q),{counterpartyEntityId:Y,diffs:z,description:J,sig:q}=Z.data;for(let H of z){let N=H.leftDiff+H.rightDiff+H.collateralDiff;if(N!==0n)throw y1("ENTITY_TX",` INVARIANT-VIOLATION: leftDiff + rightDiff + collateralDiff = ${N} (must be 0)`),Error(`Settlement invariant violation: ${N} !== 0`)}if(!X.accounts.has(Y))throw y1("ENTITY_TX",` No account exists with ${x6(Y)}`),Error(`No account with ${Y}`);let W=K5(Q.entityId,Y),G=W?Q.entityId:Y,U=W?Y:Q.entityId;console.log(`\uD83C\uDFE6 Canonical order: left=${G.slice(0,10)}..., right=${U.slice(0,10)}...`),console.log(`\uD83C\uDFE6 We are: ${W?"LEFT":"RIGHT"}`);let D=Q.config.jurisdiction;if(!D)throw Error("No jurisdiction configured for this entity");let P=z.map((H)=>({tokenId:H.tokenId,leftDiff:H.leftDiff,rightDiff:H.rightDiff,collateralDiff:H.collateralDiff,ondeltaDiff:H.ondeltaDiff||0n}));if(console.log("\uD83C\uDFE6 Calling submitSettle with diffs:",h1(P,2)),!q||q==="0x")throw Error(`Settlement ${Q.entityId.slice(-4)}${Y.slice(-4)} missing hanko signature`);try{let H=await sD(D,G,U,P,[],[],q);console.log(` Settlement transaction sent: ${H.txHash}`),K1(X,`\uD83C\uDFE6 ${J||"Settlement"} tx: ${H.txHash.slice(0,10)}... (block ${H.blockNumber})`)}catch(H){throw y1("ENTITY_TX"," Settlement transaction failed:",H),K1(X,` Settlement failed: ${H.message}`),H}return{newState:X,outputs:[]}}if(Z.type==="disputeStart"){let{handleDisputeStart:X}=await Promise.resolve().then(() => (Jb(),Yb));return await X(Q,Z,$)}if(Z.type==="disputeFinalize"){let{handleDisputeFinalize:X}=await Promise.resolve().then(() => (Jb(),Yb));return await X(Q,Z,$)}return console.warn(` Unhandled EntityTx type: ${Z.type}`),{newState:Q,outputs:[],jOutputs:[]}}catch(X){return console.error(" Transaction execution error:",X),z5.error(` Transaction execution error: ${X}`),{newState:Q,outputs:[],jOutputs:[]}}};var L70=p(()=>{zb();h8();B8();Nx();rZ();l5();B8();gL();RM();UM();Zb();Xb();C8();A2();hz();w2()});var T70=p(()=>{WM()});var F70=p(()=>{L70();T70();RM();UM();Zb();Xb()});var w70={};x1(w70,{initCrontab:()=>sT0,getAccountTimeoutStats:()=>ZF0,executeCrontab:()=>tT0,ACCOUNT_TIMEOUT_MS:()=>NM,ACCOUNT_TIMEOUT_CHECK_INTERVAL_MS:()=>A70});function sT0(){let $=new Map;return $.set("checkAccountTimeouts",{name:"checkAccountTimeouts",intervalMs:A70,lastRun:0,handler:eT0}),$.set("broadcastBatch",{name:"broadcastBatch",intervalMs:5000,lastRun:0,handler:XF0}),$.set("hubRebalance",{name:"hubRebalance",intervalMs:30000,lastRun:0,handler:YF0}),$.set("checkHtlcTimeouts",{name:"checkHtlcTimeouts",intervalMs:5000,lastRun:0,handler:QF0}),{tasks:$}}async function tT0($,Q,Z){let X=Q.state.timestamp,Y=[];for(let z of Z.tasks.values())if(X-z.lastRun>=z.intervalMs)try{let q=await z.handler($,Q);if(Y.push(...q),z.lastRun=X,q.length>0)console.log(` CRONTAB: Task "${z.name}" generated ${q.length} outputs`)}catch(q){console.error(` CRONTAB: Task "${z.name}" failed:`,q)}return Y}async function eT0($,Q){let Z=[],X=Q.state.timestamp;for(let[Y,z]of Q.state.accounts.entries())if(z.pendingFrame){let J=X-z.pendingFrame.timestamp;if(J>NM){console.warn(` TIMEOUT DETECTED: Account with ${Y.slice(-4)} has pending frame ${z.pendingFrame.height} for ${J}ms`),console.warn(`   Frame timestamp: ${z.pendingFrame.timestamp}`),console.warn(`   Current time: ${X}`),console.warn(`   Age: ${J}ms (threshold: ${NM}ms)`);let q=$F0(Q,Y,z,J);Z.push(q),console.warn(`\uD83D\uDCAC DISPUTE-SUGGESTION: Generated event for entity ${Q.entityId.slice(-4)}`),console.warn(`   Counterparty: ${Y.slice(-4)}`),console.warn(`   Frame: ${z.pendingFrame.height}`),console.warn(`   Age: ${Math.floor(J/1000)}s`)}}return Z}function $F0($,Q,Z,X){let Y=`\uD83D\uDEA8 DISPUTE SUGGESTION: Account with ${Q.slice(-4)} has not acknowledged frame #${Z.pendingFrame.height} for ${Math.floor(X/1000)}s (threshold: ${Math.floor(NM/1000)}s). Consider initiating dispute or investigating network issues.`;return{entityId:$.entityId,signerId:"system",entityTxs:[{type:"chatMessage",data:{message:Y,timestamp:$.state.timestamp,metadata:{type:"DISPUTE_SUGGESTION",counterpartyId:Q,height:Z.pendingFrame.height,frameAge:X}}}]}}async function QF0($,Q){let Z=[],X=Q.state.lastFinalizedJHeight||0,Y=Q.state.timestamp;console.log(` HTLC-TIMEOUT-CRON: Checking locks (entity ${Q.entityId.slice(-4)}, height=${X}, timestamp=${Y})`);let z=[],J=0;for(let[q,W]of Q.state.accounts.entries()){if(!W.locks||W.locks.size===0)continue;J+=W.locks.size;for(let[G,U]of W.locks.entries()){console.log(`   Checking lock ${G.slice(0,16)}... (heightDeadline=${U.revealBeforeHeight}, timeDeadline=${U.timelock})`);let D=X>0&&X>U.revealBeforeHeight,P=Y>Number(U.timelock);if(D||P)console.log(` HTLC-TIMEOUT: Lock ${G.slice(0,16)}... EXPIRED`),console.log(`   Height: ${X} > ${U.revealBeforeHeight} = ${D}`),console.log(`   Timestamp: ${Y} > ${U.timelock} = ${P}`),console.log(`   Account: ${q.slice(-4)}, Amount: ${U.amount}`),z.push({accountId:q,lockId:G,lock:U})}}if(console.log(` HTLC-TIMEOUT-CRON: Scanned ${J} locks, found ${z.length} expired`),z.length>0){console.log(` HTLC-TIMEOUT: Found ${z.length} expired locks`);let q=Q.state.config.validators?.[0];if(q)Z.push({entityId:Q.entityId,signerId:q,entityTxs:[{type:"processHtlcTimeouts",data:{expiredLocks:z}}]})}return Z}function ZF0($){let Q=$.state.timestamp,Z=0,X=0,Y=0;for(let z of $.state.accounts.values())if(z.pendingFrame){Z++;let J=Q-z.pendingFrame.timestamp;if(J>NM)X++;if(J>Y)Y=J}return{totalAccounts:$.state.accounts.size,pendingFrames:Z,timedOutFrames:X,oldestPendingFrameAge:Y}}async function XF0($,Q){let Z=[];if(!Q.state.jBatchState){let{initJBatch:D}=await Promise.resolve().then(() => (c6(),n9));Q.state.jBatchState=D()}let{shouldBroadcastBatch:X,isBatchEmpty:Y}=await Promise.resolve().then(() => (c6(),n9));if(!X(Q.state.jBatchState,Q.state.timestamp))return Z;if(Y(Q.state.jBatchState.batch))return Z;console.log(`\uD83D\uDCE4 CRONTAB: jBatch ready for broadcast (entity ${Q.entityId.slice(-4)})`);let z=Q.state.config.jurisdiction;if(!z)return console.warn(` No jurisdiction configured for entity ${Q.entityId.slice(-4)} - skipping batch broadcast`),Z;let J=Q.state.config.validators[0];if(!J)return console.warn(` No signerId for entity ${Q.entityId.slice(-4)} - cannot sign batch`),Z;let{getBrowserVMInstance:q}=await Promise.resolve().then(() => (A2(),$Z)),W=q($);if(W)console.log("\uD83D\uDCE4 CRONTAB: Using BrowserVM for batch broadcast");let{broadcastBatch:G}=await Promise.resolve().then(() => (c6(),n9)),U=await G($,Q.entityId,Q.state.jBatchState,z,W||void 0,Q.state.timestamp,J);if(U.success)console.log(` jBatch broadcasted successfully: ${U.txHash}`),Z.push({entityId:Q.entityId,signerId:"system",entityTxs:[{type:"chatMessage",data:{message:`\uD83D\uDCE4 Batch broadcasted: ${U.txHash?.slice(0,16)}...`,timestamp:Q.state.timestamp,metadata:{type:"BATCH_BROADCAST",txHash:U.txHash}}}]});else console.error(` jBatch broadcast failed: ${U.error}`);return Z}async function YF0($,Q){let Z=[],{deriveDelta:X}=await Promise.resolve().then(() => (y9(),yL)),Y=new Map;for(let[z,J]of Q.state.accounts.entries())for(let[q,W]of J.deltas.entries()){let G=K5(Q.entityId,z),U=X(W,G);if(U.delta<0n){let P=-U.delta;if(P>0n){if(!Y.has(q))Y.set(q,{netSpenders:[],netReceivers:[]});Y.get(q).netSpenders.push({entityId:z,debt:P,collateral:W.collateral})}}let D=J.requestedRebalance.get(q);if(D&&D>0n){if(!Y.has(q))Y.set(q,{netSpenders:[],netReceivers:[]});Y.get(q).netReceivers.push({entityId:z,requested:D})}}for(let[z,{netSpenders:J,netReceivers:q}]of Y.entries()){if(J.length===0||q.length===0)continue;let W=J.reduce((P,H)=>P+H.debt,0n),G=q.reduce((P,H)=>P+H.requested,0n),U=W<G?W:G;if(U===0n)continue;console.log(`\uD83D\uDD04 REBALANCE OPPORTUNITY token ${z}: ${U}`);let D=`\uD83D\uDD04 REBALANCE OPPORTUNITY (Token ${z}):
Spenders: ${J.length} (debt: ${W})
Receivers: ${q.length} (requested: ${G})
Match: ${U} (${Number(U*100n)/Number(W||1n)}%)`;Z.push({entityId:Q.entityId,signerId:"system",entityTxs:[{type:"chatMessage",data:{message:D,timestamp:Q.state.timestamp,metadata:{type:"REBALANCE_OPPORTUNITY",tokenId:z,rebalanceAmount:U.toString()}}}]})}return Z}var NM=30000,A70=1e4;var B70=p(()=>{h8()});async function qb($,Q,Z,X,Y){let z=Array.from(Y.accounts.entries()).sort((W,G)=>W[0].localeCompare(G[0])).map(([W,G])=>({cpId:W.slice(-8),height:G.currentHeight,stateHash:G.currentFrame?.stateHash?.slice(0,12)||"genesis",ackedTransitions:G.ackedTransitions,mempoolSize:G.mempool.length,pendingFrame:G.pendingFrame?.height??null}));console.log(`\uD83D\uDD22 FRAME-HASH-INPUT: h=${Q}, prevHash=${$.slice(0,12)}, accounts=${JSON.stringify(z)}`);let J={prevFrameHash:$,height:Q,timestamp:Z,txs:X.map((W)=>({type:W.type,data:W.data})),entityId:Y.entityId,reserves:Array.from(Y.reserves.entries()).sort((W,G)=>W[0].localeCompare(G[0])).map(([W,G])=>[W,G.toString()]),lastFinalizedJHeight:Y.lastFinalizedJHeight,accountHashes:Array.from(Y.accounts.entries()).sort((W,G)=>W[0].localeCompare(G[0])).map(([W,G])=>({cpId:W,height:G.currentHeight,stateHash:G.currentFrame?.stateHash||"genesis",ackedTransitions:G.ackedTransitions})),htlcRoutesHash:Y.htlcRoutes.size>0?M0.keccak256(M0.toUtf8Bytes(h1(Array.from(Y.htlcRoutes.entries()).sort((W,G)=>W[0].localeCompare(G[0]))))):null,htlcFeesEarned:Y.htlcFeesEarned.toString(),lockBookHash:Y.lockBook.size>0?M0.keccak256(M0.toUtf8Bytes(h1(Array.from(Y.lockBook.entries()).sort((W,G)=>W[0].localeCompare(G[0]))))):null,swapBookHash:Y.swapBook.size>0?M0.keccak256(M0.toUtf8Bytes(h1(Array.from(Y.swapBook.entries()).sort((W,G)=>W[0].localeCompare(G[0]))))):null,orderbookHash:Y.orderbookExt?M0.keccak256(M0.toUtf8Bytes(h1(Y.orderbookExt))):null},q=h1(J);return M0.keccak256(M0.toUtf8Bytes(q))}function Wb($){if($.height===0)return"genesis";return $.prevFrameHash||"genesis"}var JF0=($)=>{try{if(!$.entityId||typeof $.entityId!=="string")return z5.error(` Invalid entityId: ${$.entityId}`),!1;if(!$.signerId||typeof $.signerId!=="string")return z5.error(` Invalid signerId: ${$.signerId}`),!1;if($.entityTxs){if(!Array.isArray($.entityTxs))return z5.error(` EntityTxs must be array, got: ${typeof $.entityTxs}`),!1;if($.entityTxs.length>1000)return z5.error(` Too many transactions: ${$.entityTxs.length} > 1000`),!1;for(let Q of $.entityTxs)if(!Q.type||!Q.data)return z5.error(` Invalid transaction: ${h1(Q)}`),!1}if($.hashPrecommits){if(!($.hashPrecommits instanceof Map))return z5.error(` HashPrecommits must be Map, got: ${typeof $.hashPrecommits}`),!1;if($.hashPrecommits.size>100)return z5.error(` Too many hashPrecommits: ${$.hashPrecommits.size} > 100`),!1;for(let[Q,Z]of $.hashPrecommits)if(typeof Q!=="string"||!Array.isArray(Z))return z5.error(` Invalid hashPrecommit format: ${Q} -> ${typeof Z}`),!1}if($.proposedFrame){let Q=$.proposedFrame;if(typeof Q.height!=="number"||Q.height<0)return z5.error(` Invalid frame height: ${Q.height}`),!1;if(!Array.isArray(Q.txs))return z5.error(" Frame txs must be array"),!1;if(!Q.hash||typeof Q.hash!=="string")return z5.error(` Invalid frame hash: ${Q.hash}`),!1}return!0}catch(Q){return z5.error(` Input validation error: ${Q}`),!1}},zF0=($)=>{try{if(!$.entityId||!$.signerId)return z5.error(` Invalid replica IDs: ${$.entityId}:${$.signerId}`),!1;if($.state.height<0)return z5.error(` Invalid state height: ${$.state.height}`),!1;if($.mempool.length>TE.MEMPOOL_SIZE)return z5.error(` Mempool overflow: ${$.mempool.length} > ${TE.MEMPOOL_SIZE}`),!1;return!0}catch(Q){return z5.error(` Replica validation error: ${Q}`),!1}},qF0=($)=>{try{if($<0n)return z5.error(` Negative voting power: ${$}`),!1;if($>BigInt(Number.MAX_SAFE_INTEGER))return z5.error(` Voting power overflow: ${$} > ${Number.MAX_SAFE_INTEGER}`),!1;return!0}catch(Q){return z5.error(` Voting power validation error: ${Q}`),!1}},I70=async($,Q,Z)=>{let X=uL(Q),Y=U4(Z.entityId),z=$.timestamp,J=X.proposal?.hash?.slice(0,10)||"none",q=Z.proposedFrame?.hash?.slice(0,10)||"none";if(console.log(`\uD83D\uDD0D INPUT-RECEIVED: [${z}] Processing input for Entity #${Y}:${QJ(Z.signerId)}`),console.log(`\uD83D\uDD0D INPUT-STATE: Current proposal: ${J}, Mempool: ${X.mempool.length}, isProposer: ${X.isProposer}`),console.log(`\uD83D\uDD0D INPUT-DETAILS: txs=${Z.entityTxs?.length||0}, hashPrecommits=${Z.hashPrecommits?.size||0}, frame=${q}`),Z.hashPrecommits?.size){let L=Array.from(Z.hashPrecommits.keys());if(z1)console.log(`\uD83D\uDD0D INPUT-PRECOMMITS: Received hashPrecommits from: ${L.join(", ")}`)}if(!JF0(Z))return z5.error(` Invalid input for ${Z.entityId}:${Z.signerId}`),{newState:X.state,outputs:[],jOutputs:[],workingReplica:X};if(!zF0(X))return z5.error(` Invalid replica state for ${X.entityId}:${X.signerId}`),{newState:X.state,outputs:[],jOutputs:[],workingReplica:X};let W=[],G=[],{executeCrontab:U,initCrontab:D}=await Promise.resolve().then(() => (B70(),w70));if(!X.state.crontabState)X.state.crontabState=D();if(Boolean(Z.entityTxs?.some((L)=>L.type==="j_broadcast"))){let L=X.state.crontabState.tasks.get("broadcastBatch");if(L)L.lastRun=X.state.timestamp}let H=await U($,X,X.state.crontabState);if(H.length>0)console.log(` CRONTAB: Generated ${H.length} outputs from periodic tasks`),W.push(...H);if(Z.entityTxs?.length){let L=Z.entityTxs.filter((B)=>B.type==="vote");if(L.length>0)console.log(`\uD83D\uDDF3 VOTE-MEMPOOL: ${X.signerId} receiving ${L.length} vote transactions`),L.forEach((B)=>{console.log("\uD83D\uDDF3 VOTE-TX:",B)});if(X.signerId==="alice")console.log(`\uD83D\uDD25 ALICE-RECEIVES: Alice receiving ${Z.entityTxs.length} txs from input`),console.log("\uD83D\uDD25 ALICE-RECEIVES: Transaction types:",Z.entityTxs.map((B)=>B.type)),console.log(`\uD83D\uDD25 ALICE-RECEIVES: Alice isProposer=${X.isProposer}, current mempool=${X.mempool.length}`);for(let B of Z.entityTxs)console.log(`\uD83C\uDFDB E-MACHINE: - EntityTx type="${B.type}", data=`,h1(B.data,2));if(X.mempool.push(...Z.entityTxs),D1)console.log(`     Added ${Z.entityTxs.length} txs to mempool (total: ${X.mempool.length})`);if(D1&&Z.entityTxs.length>3)console.log(`      CORNER CASE: Large batch of ${Z.entityTxs.length} transactions`)}else if(Z.entityTxs&&Z.entityTxs.length===0);if(!X.isProposer&&X.mempool.length>0){let L=X.state.config.validators[0];if(!L)return y1("FRAME_CONSENSUS",` No proposer found in validators: ${X.state.config.validators}`),{newState:X.state,outputs:W,jOutputs:G,workingReplica:X};let B=X.mempool.length;console.log(`\uD83D\uDD25 BOB-TO-ALICE: Bob sending ${B} txs to proposer ${L}`),console.log("\uD83D\uDD25 BOB-TO-ALICE: Transaction types:",X.mempool.map((E)=>E.type)),W.push({entityId:Z.entityId,signerId:L,entityTxs:[...X.mempool]}),X.sentTransitions=B,console.log(`\uD83D\uDCCA Tracked ${B} sent transitions (will clear on commit)`)}let N=Z.proposedFrame?.collectedSigs;if(N?.size&&Z.proposedFrame&&!X.proposal){let L=Array.from(N.keys());if($T(X.state.config,L)>=X.state.config.threshold){if(X.lockedFrame){if(X.lockedFrame.hash!==Z.proposedFrame.hash)return y1("FRAME_CONSENSUS"," BYZANTINE: Commit frame doesn't match locked frame!"),y1("FRAME_CONSENSUS",`   Locked: ${X.lockedFrame.hash}`),y1("FRAME_CONSENSUS",`   Commit: ${Z.proposedFrame.hash}`),{newState:X.state,outputs:W,jOutputs:G,workingReplica:X};console.log(` Commit validation: matches locked frame ${X.lockedFrame.hash.slice(0,10)}`)}for(let[_,f]of N)if(!f[0]||!iK($,_,Z.proposedFrame.hash,f[0]))return y1("FRAME_CONSENSUS",` BYZANTINE: Invalid signature from ${_}`),y1("FRAME_CONSENSUS",`   Frame hash: ${Z.proposedFrame.hash.slice(0,30)}...`),{newState:X.state,outputs:W,jOutputs:G,workingReplica:X};console.log(` All ${N.size} signatures validated for frame ${Z.proposedFrame.hash.slice(0,10)}`),$.emit("EntityFrameCommitted",{entityId:Z.entityId,signerId:X.signerId,height:X.state.height+1,frameHash:Z.proposedFrame.hash,txCount:Z.proposedFrame.txs.length,signatures:N.size});let E=X.validatorComputedState||Z.proposedFrame.newState;if(!X.validatorComputedState)console.log(" CATCH-UP: Using proposer's state (validator was behind and couldn't verify)");X.state={...E,entityId:X.state.entityId,height:Z.proposedFrame.height,prevFrameHash:Z.proposedFrame.hash};let I=Z.proposedFrame.txs.length;if(I>0)console.log(`\uD83D\uDCCA Clearing ${I} committed txs from mempool (${X.mempool.length} total)`),X.mempool.splice(0,I),X.sentTransitions=0,console.log(`\uD83D\uDCCA Mempool after commit: ${X.mempool.length} txs remaining`);else X.sentTransitions=0;if(delete X.lockedFrame,delete X.validatorComputedState,D1)console.log(`     Applied commit, new state: ${X.state.messages.length} messages, height: ${X.state.height}`);return{newState:X.state,outputs:W,jOutputs:G,workingReplica:X}}}if(Z.proposedFrame&&(!X.proposal||X.state.config.mode==="gossip-based"&&X.isProposer)){let L=X.state.config,B=Z.proposedFrame,E=B.height-1,I=X.state.height>=E;if(!I)console.log(` CATCH-UP: Validator ${X.signerId} behind (h=${X.state.height}, need h=${E}). Will sync on commit.`);if(I){let{newState:_}=await Kb($,X.state,B.txs,!0,B.newState.timestamp),f={..._,entityId:X.state.entityId,height:B.height,timestamp:B.newState.timestamp},x=Wb(X.state),g=await qb(x,B.height,B.newState.timestamp,B.txs,f);if(g!==B.hash)return y1("FRAME_CONSENSUS"," HASH MISMATCH: Proposer sent invalid frame hash!"),y1("FRAME_CONSENSUS",`   Expected: ${g.slice(0,30)}...`),y1("FRAME_CONSENSUS",`   Received: ${B.hash.slice(0,30)}...`),y1("FRAME_CONSENSUS","   This could indicate equivocation attack or state divergence bug."),{newState:X.state,outputs:W,jOutputs:G,workingReplica:X};console.log(` Validator hash verified: ${B.hash.slice(0,20)}...`);let h=B.hashesToSign||[{hash:B.hash,type:"entityFrame",context:""}],v=await Promise.all(h.map((b)=>sQ($,X.signerId,b.hash)));if(console.log(`\uD83D\uDD10 Validator signed ${v.length} hashes for entity consensus`),X.lockedFrame=B,X.validatorComputedState=f,L.mode==="gossip-based")L.validators.forEach((b)=>{console.log(`\uD83D\uDD0D GOSSIP: [${z}] ${X.signerId} sending hashPrecommits to ${b} for entity ${Z.entityId.slice(0,10)}, proposal ${q}, sigs: ${v.length}`),W.push({entityId:Z.entityId,signerId:b,hashPrecommits:new Map([[X.signerId,v]])})});else{let b=L.validators[0];if(!b)return y1("FRAME_CONSENSUS",` No proposer found in validators: ${L.validators}`),{newState:X.state,outputs:W,jOutputs:G,workingReplica:X};console.log(`\uD83D\uDD0D PROPOSER: [${z}] ${X.signerId} sending hashPrecommits to ${b} for entity ${Z.entityId.slice(0,10)}, proposal ${q}, sigs: ${v.length}`),console.log(`\uD83D\uDD0D PROPOSER-REASON: Signed new proposal, current state: proposal=${J}, locked=${X.lockedFrame?.hash?.slice(0,10)||"none"}`),W.push({entityId:Z.entityId,signerId:b,hashPrecommits:new Map([[X.signerId,v]])})}}}if(Z.hashPrecommits?.size&&X.proposal&&X.proposal){let L=X.proposal;for(let[I,_]of Z.hashPrecommits){if(L.hashesToSign&&_.length!==L.hashesToSign.length){z5.error(` Signature count mismatch from ${I}: got ${_.length}, expected ${L.hashesToSign.length}`);continue}let f=L.hashesToSign?.[0];if(L.hashesToSign&&_[0]&&f){let{verifyAccountSignature:x}=await Promise.resolve().then(() => (H8(),R$)),g=_[0],h=f.hash;if(!x($,I,h,g)){z5.error(` PRECOMMIT REJECTED: Invalid frame hash signature from ${I}`);continue}}if(!L.collectedSigs)L.collectedSigs=new Map;L.collectedSigs.set(I,_)}console.log(`     Collected hashPrecommits from ${Z.hashPrecommits.size} validators (total: ${L.collectedSigs?.size||0})`);let B=Array.from(L.collectedSigs?.keys()||[]),E=$T(X.state.config,B);if(!qF0(E))return z5.error(` Invalid voting power calculation: ${E}`),{newState:X.state,outputs:W,jOutputs:G,workingReplica:X};if(D1){let I=Object.values(X.state.config.shares).reduce((f,x)=>f+x,BigInt(0)),_=(Number(E)/Number(X.state.config.threshold)*100).toFixed(1);if(z5.info(`    \uD83D\uDD0D Threshold check: ${E} / ${I} [${_}% threshold${Number(E)>=Number(X.state.config.threshold)?"+":""}]`),X.state.config.mode==="gossip-based")console.log("      CORNER CASE: Gossip mode - all validators receive precommits")}if(E>=X.state.config.threshold){console.log("\uD83D\uDD10 ENTITY-COMMIT: Threshold reached, merging signatures into hankos...");let I=[];if(L.hashesToSign&&L.collectedSigs){let{buildQuorumHanko:v}=await Promise.resolve().then(() => (F2(),S4));for(let b=0;b<L.hashesToSign.length;b++){let m=L.hashesToSign[b];if(!m)continue;let K=[];for(let[j,O]of L.collectedSigs){let R=O[b];if(R)K.push({signerId:j,signature:R})}let M=await v($,X.state.entityId,m.hash,K,X.state.config);I.push(M)}console.log(`\uD83D\uDD10 ENTITY-COMMIT: Built ${I.length} quorum hankos from ${L.collectedSigs.size} validators`)}if(!X.hankoWitness)X.hankoWitness=new Map;if(L.hashesToSign)for(let v=0;v<L.hashesToSign.length;v++){let b=L.hashesToSign[v],m=I[v];if(b&&m)X.hankoWitness.set(b.hash,{hanko:m,type:b.type,entityHeight:X.state.height+1,createdAt:$.timestamp})}let _=L.outputs||[],f=L.jOutputs||[],x=0;for(let v of _){if(!v.entityTxs)continue;for(let b of v.entityTxs)if(b.type==="accountInput"&&b.data){let m=b.data;if(m.newAccountFrame?.stateHash){let K=X.hankoWitness?.get(m.newAccountFrame.stateHash);if(K)m.newHanko=K.hanko,x++,console.log(`\uD83D\uDD10 ATTACH-HANKO: frame for ${m.toEntityId?.slice(-4)}`)}if(m.newDisputeHash){let K=X.hankoWitness?.get(m.newDisputeHash);if(K)m.newDisputeHanko=K.hanko,x++,console.log(`\uD83D\uDD10 ATTACH-HANKO: dispute for ${m.toEntityId?.slice(-4)}`)}if(m.settleAction?.type==="approve"&&m.settleAction.hanko){for(let[K,M]of X.hankoWitness||[])if(M.type==="settlement"&&M.entityHeight===X.state.height+1){m.settleAction.hanko=M.hanko,x++,console.log(`\uD83D\uDD10 ATTACH-HANKO: settlement for ${m.toEntityId?.slice(-4)}`);break}}}}W.push(..._),G.push(...f),console.log(`\uD83D\uDD10 ENTITY-COMMIT: ${_.length} stored outputs, attached ${x} hankos`),X.state={...L.newState,entityId:X.state.entityId,height:L.height,prevFrameHash:L.hash};let g=L;g.hankos=I;let h=g.txs.length;if(h>0)X.mempool.splice(0,h);if(delete X.proposal,delete X.lockedFrame,X.state.config.mode==="proposer-based"){let v=g.hash.slice(0,10),b=g.collectedSigs?.size||0;console.log(`\uD83D\uDD0D COMMIT-START: [${z}] ${X.signerId} reached threshold for proposal ${v}, sending commit notifications...`),X.state.config.validators.forEach((m)=>{if(m!==X.signerId){let K=Array.from(g.collectedSigs?.keys()||[]);console.log(`\uD83D\uDD0D COMMIT: [${z}] ${X.signerId} sending commit notification to ${m} for entity ${Z.entityId.slice(0,10)}, proposal ${v} (${b} precommits from: ${K.join(", ")})`),W.push({entityId:Z.entityId,signerId:m,proposedFrame:g})}})}else console.log(`\uD83D\uDD0D GOSSIP-COMMIT: [${z}] ${X.signerId} NOT sending commit notifications (gossip mode) for entity ${Z.entityId.slice(0,10)}...`)}}if(console.log(`\uD83C\uDFAF CONSENSUS-CHECK: Entity ${X.entityId}:${X.signerId}`),console.log(`\uD83C\uDFAF   isProposer: ${X.isProposer}`),console.log(`\uD83C\uDFAF   mempool.length: ${X.mempool.length}`),console.log(`\uD83C\uDFAF   hasProposal: ${!!X.proposal}`),X.mempool.length>0)console.log("\uD83C\uDFAF   mempoolTypes:",X.mempool.map((L)=>L.type));if(X.isProposer&&X.mempool.length>0&&!X.proposal){if(console.log("\uD83D\uDD25 ALICE-PROPOSES: Alice auto-propose triggered!"),console.log(`\uD83D\uDD25 ALICE-PROPOSES: mempool=${X.mempool.length}, isProposer=${X.isProposer}, hasProposal=${!!X.proposal}`),console.log("\uD83D\uDD25 ALICE-PROPOSES: Mempool transaction types:",X.mempool.map((A)=>A.type)),X.state.config.validators.length===1&&X.state.config.threshold===BigInt(1)){console.log("\uD83D\uDE80 SINGLE-SIGNER: Direct execution without consensus for single signer entity");let{newState:A,outputs:T,jOutputs:V}=await Kb($,X.state,X.mempool,!1,$.timestamp),w=X.state.height+1,k=$.timestamp,S=Wb(X.state),y={...A,entityId:X.state.entityId,height:w,timestamp:k},u=await qb(S,w,k,X.mempool,y);if(X.state={...y,prevFrameHash:u},W.push(...T),G.push(...V),X.mempool.length=0,D1)console.log(`     Single signer entity: transactions applied directly, height: ${X.state.height}`);return console.log(`\uD83D\uDD25 SINGLE-SIGNER RETURN: entityOutbox=${W.length}, jOutbox=${G.length}, frameHash=${u.slice(0,20)}...`),{newState:X.state,outputs:W,jOutputs:G,workingReplica:X}}if(D1)console.log(`    \uD83D\uDE80 Auto-propose triggered: mempool=${X.mempool.length}, isProposer=${X.isProposer}, hasProposal=${!!X.proposal}`);let{newState:B,deterministicState:E,outputs:I,jOutputs:_,collectedHashes:f}=await Kb($,X.state,X.mempool,!1,$.timestamp),x=$.timestamp,g=X.state.height+1,h={...B,entityId:X.state.entityId,height:g,timestamp:x},v={...E,entityId:X.state.entityId,height:g,timestamp:x},b=Wb(X.state),m=await qb(b,g,x,X.mempool,v),K=sQ($,X.signerId,m),M={hash:m,type:"entityFrame",context:`entity:${X.state.entityId.slice(-4)}:frame:${g}`},j=new Set([m]),O=[];if(f){for(let A of f)if(!j.has(A.hash))j.add(A.hash),O.push({hash:A.hash,type:A.type,context:A.context});O.sort((A,T)=>A.hash.localeCompare(T.hash))}let R=[M,...O],F=await Promise.all(R.map((A)=>sQ($,X.signerId,A.hash)));if(X.proposal={height:g,txs:[...X.mempool],hash:m,newState:h,outputs:I,jOutputs:_,hashesToSign:R,collectedSigs:new Map([[X.signerId,F]])},D1)console.log(`     Auto-proposing frame ${X.proposal.hash} with ${X.proposal.txs.length} txs and self-signature.`);X.state.config.validators.forEach((A)=>{if(A!==X.signerId)W.push({entityId:Z.entityId,signerId:A,proposedFrame:X.proposal})})}else if(X.isProposer&&X.mempool.length===0&&!X.proposal);else if(!X.isProposer&&X.mempool.length>0){let L=X.state.config.validators[0];if(!L)return y1("FRAME_CONSENSUS",` No proposer found in validators: ${X.state.config.validators}`),{newState:X.state,outputs:W,jOutputs:G,workingReplica:X};console.log(`\uD83D\uDD25 BOB-TO-ALICE: Bob sending ${X.mempool.length} txs to proposer ${L}`),console.log("\uD83D\uDD25 BOB-TO-ALICE: Transaction types:",X.mempool.map((B)=>B.type)),W.push({entityId:Z.entityId,signerId:L,entityTxs:[...X.mempool]}),X.mempool.length=0}else if(X.isProposer&&X.proposal);return console.log(`\uD83D\uDD0D OUTPUT-GENERATED: [${z}] Entity #${Y}:${QJ(X.signerId)} generating ${W.length} outputs`),console.log(`\uD83D\uDD0D OUTPUT-FINAL-STATE: proposal=${X.proposal?.hash?.slice(0,10)||"none"}, mempool=${X.mempool.length}, locked=${X.lockedFrame?.hash?.slice(0,10)||"none"}`),W.forEach((L,B)=>{let E=U4(L.entityId),I=L.proposedFrame?.hash?.slice(0,10)||"none",_=L.hashPrecommits?.size||0;if(console.log(`\uD83D\uDD0D OUTPUT-${B+1}: [${z}] To Entity #${E}:${QJ(L.signerId)} - txs=${L.entityTxs?.length||0}, hashPrecommits=${_}, frame=${I}`),L.hashPrecommits?.size){let f=Array.from(L.hashPrecommits.keys());if(z1)console.log(`\uD83D\uDD0D OUTPUT-${B+1}-PRECOMMITS: Sending hashPrecommits from: ${f.join(", ")}`)}if(L.proposedFrame&&L.proposedFrame.collectedSigs?.size){if(z1)console.log(`\uD83D\uDD0D OUTPUT-${B+1}-TYPE: COMMIT_NOTIFICATION (frame + collectedSigs)`)}else if(L.hashPrecommits?.size){if(z1)console.log(`\uD83D\uDD0D OUTPUT-${B+1}-TYPE: PRECOMMIT_VOTE (hashPrecommits only)`)}else if(L.proposedFrame){if(z1)console.log(`\uD83D\uDD0D OUTPUT-${B+1}-TYPE: PROPOSAL (frame only)`)}else if(L.entityTxs?.length){if(z1)console.log(`\uD83D\uDD0D OUTPUT-${B+1}-TYPE: TRANSACTION_FORWARD (txs only)`)}else if(z1)console.log(`\uD83D\uDD0D OUTPUT-${B+1}-TYPE: UNKNOWN (empty output)`)}),{newState:X.state,outputs:W,jOutputs:G,workingReplica:X}},Kb=async($,Q,Z,X=!1,Y)=>{console.log(`\uD83C\uDFAF APPLY-ENTITY-FRAME: Processing ${Z.length} transactions`),Z.forEach((L,B)=>{console.log(`\uD83C\uDFAF Transaction ${B}: type="${L.type}", data=`,L.data)});let z=i1(Q);z.timestamp=Y??$.timestamp;let J=[],q=[],W=new Set,G=[],U=[],D=[];for(let L of Z){let{newState:B,outputs:E,jOutputs:I,mempoolOps:_,swapOffersCreated:f,swapOffersCancelled:x}=await C70($,z,L);if(z=B,L.type==="j_event"){for(let[g,h]of z.accounts)if(h.mempool.length>0){if(z1)console.log(`\uD83D\uDD0D [Frame ${$.height}] AFTER-ENTITY-TX(j_event): Account ${g.slice(-4)} mempool:`,h.mempool.map((v)=>v.type))}}if(J.push(...E),I)q.push(...I);if(_&&_.length>0){console.log(`\uD83D\uDCE6 ENTITY-ORCHESTRATOR: Applying ${_.length} mempoolOps (inline)`);for(let{accountId:g,tx:h}of _){let v=z.accounts.get(g);if(v)v.mempool.push(h),W.add(g),console.log(`\uD83D\uDCE6    ${g.slice(-8)}: ${h.type} (mempool now: ${v.mempool.length} txs, pendingFrame=${v.pendingFrame?"h"+v.pendingFrame.height:"none"})`);else console.warn(`\uD83D\uDCE6    Account ${g.slice(-8)} not found for mempoolOp`)}}if(f)U.push(...f);if(x)D.push(...x);if(L.type==="extendCredit"){console.log("\uD83D\uDCB3 POST-EXTEND-CREDIT: Checking all account mempools:");for(let[g,h]of z.accounts){if(console.log(`\uD83D\uDCB3   Account with ${g.slice(0,10)}: mempool=${h.mempool.length}, pendingFrame=${h.pendingFrame?`height=${h.pendingFrame.height}`:"none"}, currentHeight=${h.currentHeight}`),h.mempool.length>0)console.log("\uD83D\uDCB3   Mempool txs:",h.mempool.map((v)=>v.type));if(h.pendingFrame)console.log("\uD83D\uDCB3    BLOCKING: pendingFrame exists - no new proposals until ACKed!")}}if(L.type==="accountInput"&&L.data){let g=L.data.fromEntityId,h=z.accounts.get(g);if(h){let v=L.data.height&&L.data.prevHanko,b=h.mempool.length>0;if(b&&!h.pendingFrame)W.add(g),console.log(`\uD83D\uDD04 Added ${g.slice(0,10)} to proposable - Pending:${b}`);else if(v)console.log(` Received ACK from ${g.slice(0,10)}, no action needed (mempool empty)`)}}else if(L.type==="directPayment"&&L.data){if(z1)console.log("\uD83D\uDD0D DIRECT-PAYMENT detected in applyEntityFrame");if(z1)console.log("\uD83D\uDD0D Payment data:",{targetEntityId:L.data.targetEntityId,route:L.data.route,amount:L.data.amount});if(z1)console.log(`\uD83D\uDD0D Current entity has ${z.accounts.size} accounts`);if(z1)console.log(`\uD83D\uDD0D DIRECT-PAYMENT-SCAN: Entity ${z.entityId.slice(-4)} has ${z.accounts.size} accounts`);for(let[g,h]of z.accounts){let v=K5(h.proofHeader.fromEntity,h.proofHeader.toEntity);if(z1)console.log(`\uD83D\uDD0D Checking account ${g.slice(-10)}: mempool=${h.mempool.length}, isLeft=${v}, pendingFrame=${!!h.pendingFrame}, mempoolTxs=[${h.mempool.map((b)=>b.type).join(",")}]`);if(h.mempool.length>0&&!h.pendingFrame)W.add(g),console.log(`\uD83D\uDD04  Added ${g.slice(-10)} to proposableAccounts (has ${h.mempool.length} mempool items)`);else if(h.pendingFrame)console.log(`\uD83D\uDD04   SKIP: ${g.slice(-10)} has pendingFrame h${h.pendingFrame.height} - will propose after ACK`)}}else if(L.type==="openAccount"&&L.data){let g=L.data.targetEntityId,h=z.accounts.get(g);if(h){if(K5(h.proofHeader.fromEntity,h.proofHeader.toEntity)&&h.mempool.length>0&&!h.pendingFrame)W.add(g),console.log(`\uD83D\uDD04 Added ${g.slice(0,10)} to proposable (new account opened)`)}}else if(L.type==="extendCredit"&&L.data){let g=L.data.counterpartyEntityId,h=z.accounts.get(g);if(console.log(`\uD83D\uDCB3 EXTEND-CREDIT: Checking account ${g.slice(0,10)} for proposal`),console.log(`\uD83D\uDCB3 EXTEND-CREDIT: accountMachine exists: ${!!h}, mempool: ${h?.mempool?.length||0}`),h&&h.mempool.length>0)W.add(g),console.log(`\uD83D\uDCB3  Added ${g.slice(0,10)} to proposableAccounts (credit extension)`)}}if(U.length>0&&z.orderbookExt){console.log(`\uD83D\uDCCA ENTITY-ORCHESTRATOR: Batch matching ${U.length} swap offers`);let L=U.map((_)=>{let f=z.entityId,x=_.fromEntity===f?_.toEntity:_.fromEntity;return{..._,accountId:x}});console.log(`\uD83D\uDCCA ENTITY-ORCHESTRATOR: Enriched ${L.length} offers with accountId`);let{processOrderbookSwaps:B}=await Promise.resolve().then(() => (RM(),$b)),E=B(z,L);for(let{accountId:_,tx:f}of E.mempoolOps){let x=z.accounts.get(_);if(x)x.mempool.push(f),W.add(_),console.log(`\uD83D\uDCCA    ${_.slice(-8)}: ${f.type}`);if(f.type==="swap_resolve"){z.pendingSwapFillRatios||=new Map;let g=`${_}:${f.data.offerId}`;z.pendingSwapFillRatios.set(g,f.data.fillRatio)}}let I=z.orderbookExt;for(let{pairId:_,book:f}of E.bookUpdates)I.books.set(_,f)}if(D.length>0&&z.orderbookExt){console.log(`\uD83D\uDCCA ENTITY-ORCHESTRATOR: Processing ${D.length} swap cancels`);let{processOrderbookCancels:L}=await Promise.resolve().then(() => (RM(),$b)),B=L(z,D),E=z.orderbookExt;for(let{pairId:I,book:_}of B)E.books.set(I,_)}let P=i1(z);if(X)return{newState:z,deterministicState:P,outputs:J,jOutputs:q,collectedHashes:[]};let{proposeAccountFrame:H}=await Promise.resolve().then(() => (lL(),T40)),N=Array.from(W).filter((L)=>{let B=z.accounts.get(L);if(!B){if(z1)console.log(`\uD83D\uDD0D FILTER: Account ${L.slice(-8)} not found - skip`);return!1}if(B.mempool.length===0){if(z1)console.log(`\uD83D\uDD0D FILTER: Account ${L.slice(-8)} mempool empty - skip`);return!1}if(B.pendingFrame){if(z1)console.log(`\uD83D\uDD0D FILTER: Account ${L.slice(-8)} has pendingFrame h${B.pendingFrame.height} - SKIP (will batch on ACK)`);return!1}if(z1)console.log(`\uD83D\uDD0D FILTER: Account ${L.slice(-8)} READY - proposing (mempool: ${B.mempool.length})`);return!0}).sort(),C=[];if(N.length>0)for(let L of N){let B=z.accounts.get(L),{counterparty:E}=B?i6(B,z.entityId):{counterparty:"unknown"};if(z1)console.log(`\uD83D\uDD0D [Frame ${$.height}] BEFORE-PROPOSE: Getting account for ${E.slice(-4)}`);if(B){console.log(`\uD83D\uDCCB [Frame ${$.height}] PROPOSE-FRAME for ${E.slice(-4)}: mempool=${B.mempool.length} txs:`,B.mempool.map((_)=>_.type)),console.log(`\uD83D\uDCCB [Frame ${$.height}] PROPOSE-FRAME: leftJObs=${B.leftJObservations?.length||0}, rightJObs=${B.rightJObservations?.length||0}`),console.log(`\uD83D\uDCCB [Frame ${$.height}] PROPOSE-FRAME: Full mempool details:`,B.mempool.map((_,f)=>`${f}:${_.type}`).join(", "));let I=await H($,B,!1,z.lastFinalizedJHeight);if(console.log(`\uD83D\uDCE4 PROPOSE-RESULT for ${E.slice(-4)}: success=${I.success}, hasAccountInput=${!!I.accountInput}, error=${I.error||"none"}`),I.hashesToSign)C.push(...I.hashesToSign);if(I.success&&I.accountInput){let _=l3($,I.accountInput.toEntityId,"accountInput.propose"),f={entityId:I.accountInput.toEntityId,signerId:_,entityTxs:[{type:"accountInput",data:I.accountInput}]};J.push(f),console.log(`\uD83D\uDCEE ACCOUNT-FRAME-OUTPUT: frame ${I.accountInput.height}  Entity ${I.accountInput.toEntityId.slice(-4)} (${L.slice(-8)} account)`),mL(z,I.events),pL($,"account",`E/A/${z.entityId.slice(-4)}:${E.slice(-4)}/propose`,I.events,{entityId:z.entityId,counterpartyId:E,frameHeight:I.accountInput.height,accountKey:L},z.entityId)}}}if(C.length>0)console.log(`\uD83D\uDD10 HASH-COLLECTION: Collected ${C.length} hashes for entity signing`),C.forEach((L)=>console.log(`    ${L.type}: ${L.hash.slice(0,18)}... (${L.context})`));return{newState:z,deterministicState:P,outputs:J,jOutputs:q,collectedHashes:C}},$T=($,Q)=>{return Q.reduce((Z,X)=>{let Y=$.shares[X];if(Y===void 0)throw Error(`CONSENSUS-SAFETY: Unknown validator ${X} - cannot calculate quorum power`);return Z+Y},0n)},E70=($)=>{let Q=[];for(let Z of $){if(Z.type!=="j_event"||!Z.data){Q.push(Z);continue}let X=Z.data,Y=X.blockNumber,z=X.blockHash,J=Q.find((P)=>P.type==="j_event"&&P.data&&P.data.blockNumber===Y&&P.data.blockHash===z);if(!J||!J.data){Q.push(Z);continue}let q=J.data,W=q.events||(q.event?[q.event]:[]),G=X.events||(X.event?[X.event]:[]),U=new Set,D=[];for(let P of[...W,...G]){let H=`${P?.type??"unknown"}:${h1(P?.data??P)}`;if(U.has(H))continue;U.add(H),D.push(P)}if(q.events=D,q.event=D[0],typeof X.observedAt==="number"){if(typeof q.observedAt!=="number"||X.observedAt<q.observedAt)q.observedAt=X.observedAt}if(z1)console.log(`\uD83D\uDD0D MERGE-J-EVENTS: block ${Y} ${z?.slice(0,10)}... now ${D.length} events`)}return Q},_70=($)=>{let Q=new Map,Z=[],X=0,Y=$.filter((J)=>J.signerId.includes("carol"));if(Y.length>1){if(z1)console.log(`\uD83D\uDD0D MERGE-CAROL-ALERT: Found ${Y.length} inputs from Carol - potential duplicate source!`);Y.forEach((J,q)=>{let W=J.entityId.slice(0,10),G=J.hashPrecommits?Array.from(J.hashPrecommits.keys()).join(","):"none";if(z1)console.log(`\uD83D\uDD0D MERGE-CAROL-${q+1}: ${W}:${J.signerId} - hashPrecommits: ${G}`)})}for(let J of $){let q=`${J.entityId}:${J.signerId}`,W=J.entityId.slice(0,10);if(Q.has(q)){let G=Q.get(q);X++;let U=G.proposedFrame?.hash,D=J.proposedFrame?.hash;if(U&&D&&U!==D){let P=!!G.hashPrecommits&&G.hashPrecommits.size>0,H=!!J.hashPrecommits&&J.hashPrecommits.size>0;if(console.warn(`  MERGE-CONFLICT: ${q} has different proposedFrame hashes (${U.slice(0,10)} vs ${D.slice(0,10)}) - keeping both inputs`),H&&!P)Q.set(q,{...J}),Z.push(G);else Z.push(J);continue}if(z1)console.log(`\uD83D\uDD0D DUPLICATE-FOUND: Merging duplicate input ${X} for ${W}:${J.signerId}`);if(J.entityTxs){if(G.entityTxs=[...G.entityTxs||[],...J.entityTxs],G.entityTxs)G.entityTxs=E70(G.entityTxs);if(z1)console.log(`\uD83D\uDD0D MERGE-TXS: Added ${J.entityTxs.length} transactions`)}if(J.hashPrecommits){let P=G.hashPrecommits||new Map;if(console.log(`\uD83D\uDD0D MERGE-PRECOMMITS: Merging ${J.hashPrecommits.size} hashPrecommits into existing ${P.size} for ${W}:${J.signerId}`),J.hashPrecommits.forEach((H,N)=>{if(z1)console.log(`\uD83D\uDD0D MERGE-DETAIL: Adding hashPrecommit from ${N} (${H.length} sigs)`);P.set(N,H)}),G.hashPrecommits=P,z1)console.log(`\uD83D\uDD0D MERGE-RESULT: Total ${P.size} hashPrecommits after merge`)}if(J.proposedFrame)G.proposedFrame=J.proposedFrame;console.log(`    \uD83D\uDD04 Merging inputs for ${q}: txs=${J.entityTxs?.length||0}, hashPrecommits=${J.hashPrecommits?.size||0}, frame=${!!J.proposedFrame}`)}else Q.set(q,{...J})}if(X>0)console.log(`      CORNER CASE: Merged ${X} duplicate inputs (${$.length}  ${Q.size})`);return[...Array.from(Q.values()),...Z].map((J)=>{if(J.entityTxs&&J.entityTxs.length>1)return{...J,entityTxs:E70(J.entityTxs)};return J})};var zb=p(()=>{F70();h8();B8();hz();C8();w2();H8();A6()});function g2(){let $=new Map;return{profiles:$,announce:(J)=>{T3("GOSSIP",`\uD83D\uDCE2 gossip.announce INPUT: ${J.entityId.slice(-4)} accounts=${J.accounts?.length||0}`);let q={...J,publicAccounts:J.publicAccounts||J.hubs||[],hubs:J.hubs||J.publicAccounts||[],endpoints:J.endpoints||[],relays:J.relays||[]};T3("GOSSIP",`\uD83D\uDCE2 After normalize: ${J.entityId.slice(-4)} accounts=${q.accounts?.length||0}`);let W=$.get(J.entityId),G=q.metadata?.lastUpdated||0,U=W?.metadata?.lastUpdated||0;if(!W||G>U||G===U&&(!W.runtimeId&&!!q.runtimeId||W.runtimeId!==q.runtimeId||!!q.metadata?.entityPublicKey&&W.metadata?.entityPublicKey!==q.metadata?.entityPublicKey||(W.accounts?.length||0)!==(q.accounts?.length||0))){$.set(J.entityId,q),T3("GOSSIP",`\uD83D\uDCE1 Gossip SAVED: ${J.entityId.slice(-4)} ts=${G} accounts=${q.accounts?.length||0}`);let P=$.get(J.entityId);T3("GOSSIP",` VERIFY after SET: ${J.entityId.slice(-4)} accounts=${P?.accounts?.length||0} (should be ${q.accounts?.length})`)}else T3("GOSSIP",`\uD83D\uDCE1 Gossip REJECTED: ${J.entityId.slice(-4)} ts=${G}<=${U}`)},getProfiles:()=>{let J=Array.from($.values());T3("GOSSIP",`\uD83D\uDD0D getProfiles(): Returning ${J.length} profiles`);for(let q of J)T3("GOSSIP",`  - ${q.entityId.slice(-4)}: accounts=${q.accounts?.length||0} ts=${q.metadata?.lastUpdated}`);return J},getHubs:()=>{let J=Array.from($.values()).filter((q)=>q.metadata?.isHub===!0);T3("GOSSIP",`\uD83C\uDFE0 getHubs(): Found ${J.length} hubs`);for(let q of J)T3("GOSSIP",`  - ${q.entityId.slice(-4)}: ${q.metadata?.name||"unnamed"} region=${q.metadata?.region||"unknown"}`);return J},getProfileBundle:(J)=>{let q=$.get(J);if(!q)return{peers:[]};let G=(q.publicAccounts||q.hubs||[]).map((U)=>$.get(U)).filter(Boolean);return{profile:q,peers:G}},getNetworkGraph:()=>{return{findPaths:async(J,q,W,G=1)=>{let U=new Map,D=W??G5.MIN_PAYMENT_AMOUNT;for(let N of $.values())if(N.accounts){let C=new Set;for(let L of N.accounts){let B=L.tokenCapacities.get(G);if(B&&B.outCapacity>=D)C.add(L.counterpartyId)}if(C.size>0)U.set(N.entityId,C)}let P=[[J]],H=new Set([J]);while(P.length>0){let N=P.shift(),C=N[N.length-1];if(!C)continue;if(C===q)return[{path:N}];let L=U.get(C);if(L){for(let B of L)if(B&&!H.has(B))H.add(B),P.push([...N,B])}}return[]}}}}}async function S70($,Q){try{let Z=0,X=$.iterator({gte:"profile:",lt:"profile:"});for await(let[Y,z]of X)try{let J=JSON.parse(z);Q.announce({entityId:J.entityId,runtimeId:J.runtimeId,capabilities:J.capabilities||[],publicAccounts:J.publicAccounts||J.hubs||[],hubs:J.hubs||J.publicAccounts||[],endpoints:J.endpoints||[],relays:J.relays||[],metadata:{name:J.name,avatar:J.avatar,bio:J.bio,website:J.website,lastUpdated:J.lastUpdated,hankoSignature:J.hankoSignature,entityPublicKey:J.entityPublicKey}}),Z++}catch(J){console.warn(` Failed to parse profile from key ${Y}:`,J)}return T3("GOSSIP",`\uD83D\uDCE1 Restored ${Z} profiles from DB into gossip`),Z}catch(Z){return console.error(" Failed to load persisted profiles:",Z),0}}var lq=p(()=>{w2();hz()});function QT($){let Q=()=>$.timestamp;$.log=(Z)=>{let X={id:CM++,timestamp:Q(),level:"info",category:"system",message:Z};$.frameLogs.push(X)},$.info=(Z,X,Y,z)=>{let J={id:CM++,timestamp:Q(),level:"info",category:Z,message:X,...z&&{entityId:z},...Y&&{data:Y}};$.frameLogs.push(J)},$.warn=(Z,X,Y,z)=>{let J={id:CM++,timestamp:Q(),level:"warn",category:Z,message:X,...z&&{entityId:z},...Y&&{data:Y}};$.frameLogs.push(J),console.warn(`[${Z}]`,X,Y||"")},$.error=(Z,X,Y,z)=>{let J={id:CM++,timestamp:Q(),level:"error",category:Z,message:X,...z&&{entityId:z},...Y&&{data:Y}};$.frameLogs.push(J),console.error(`[${Z}]`,X,Y||"")},$.emit=(Z,X)=>{let Y={id:CM++,timestamp:Q(),level:"info",category:"system",message:Z,data:X};$.frameLogs.push(Y)}}var CM=0;var WF0=($,Q)=>{if(Q instanceof Map)return{_type:"Map",value:Array.from(Q.entries())};if(typeof Q==="bigint")return{_type:"BigInt",value:Q.toString()};return Q},KF0=($,Q)=>{if(Q&&typeof Q==="object"){if(Q._type==="Map")return new Map(Q.value);if(Q._type==="BigInt")return BigInt(Q.value)}return Q},x70=($)=>{try{return JSON.stringify($,WF0)}catch(Q){return h1({type:"error",error:`serialize failed: ${Q.message}`})}},b70=($)=>{let Q=typeof $==="string"?$:$ instanceof ArrayBuffer?new TextDecoder().decode(new Uint8Array($)):typeof Buffer<"u"?Buffer.from($).toString():String($);return JSON.parse(Q,KF0)},f70=0,k70=0,iq=()=>{let $=f70;return f70+=1,`msg_${$}`},GF0="xln-ws-hello",UF0=($,Q,Z)=>{return`${GF0}:${$}:${Q}:${Z}`},v70=($,Q,Z)=>{return p1(p5(UF0($,Q,Z)))},y70=()=>{let $=k70;return k70+=1,`nonce_${$}`};var g70=p(()=>{A6()});var c70={};x1(c70,{pubKeyToHex:()=>Ob,hexToPubKey:()=>VF0,encryptMessage:()=>h70,encryptJSON:()=>Ub,deriveEncryptionKeyPair:()=>Gb,decryptMessage:()=>m70,decryptJSON:()=>Vb,bytesToBase64:()=>p70,base64ToBytes:()=>u70});function Gb($){let Q=typeof $==="string"?new TextEncoder().encode($):$,Z=new TextEncoder().encode("xln-p2p-encryption-v1"),X=new Uint8Array(Z.length+Q.length);X.set(Z,0),X.set(Q,Z.length);let Y=mK(X),z=new Uint8Array(Y),J=z[0],q=z[31];if(J===void 0||q===void 0)throw Error("P2P_DERIVE_ERROR: SHA256 returned invalid length");return z[0]=J&248,z[31]=q&127|64,{publicKey:i3.getPublicKey(z),privateKey:z}}function h70($,Q){let Z=i3.utils.randomSecretKey(),X=i3.getPublicKey(Z),z=i3.getSharedSecret(Z,Q).slice(0,32),J=crypto.getRandomValues(new Uint8Array(12)),W=jU(z,J).encrypt($),G=new Uint8Array(44+W.length);return G.set(X,0),G.set(J,32),G.set(W,44),G}function m70($,Q){if($.length<60)throw Error("P2P_DECRYPT_ERROR: Message too short");let Z=$.slice(0,32),X=$.slice(32,44),Y=$.slice(44),J=i3.getSharedSecret(Q,Z).slice(0,32);return jU(J,X).decrypt(Y)}function Ub($,Q){let Z=h1($),X=new TextEncoder().encode(Z),Y=h70(X,Q);return p70(Y)}function Vb($,Q){let Z=u70($),X=m70(Z,Q),Y=new TextDecoder().decode(X);return PE(Y)}function Ob($){return"0x"+Array.from($).map((Q)=>Q.toString(16).padStart(2,"0")).join("")}function VF0($){let Q=$.startsWith("0x")?$.slice(2):$;if(Q.length!==64)throw Error(`P2P_INVALID_PUBKEY: Expected 64 hex chars, got ${Q.length}`);let Z=new Uint8Array(32);for(let X=0;X<32;X++)Z[X]=parseInt(Q.slice(X*2,X*2+2),16);return Z}function p70($){let Q="";for(let Z=0;Z<$.length;Z++){let X=$[Z];if(X!==void 0)Q+=String.fromCharCode(X)}return btoa(Q)}function u70($){let Q=atob($),Z=new Uint8Array(Q.length);for(let X=0;X<Q.length;X++)Z[X]=Q.charCodeAt(X);return Z}var ZT=p(()=>{ix();tx();rB()});var l70=_1((sZ1,d70)=>{d70.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});class Db{ws=null;closed=!1;reconnectMs;options;reconnectTimer=null;constructor($){this.options=$,this.reconnectMs=$.reconnectMs??2000}async connect(){if(this.closed=!1,this.reconnectTimer)clearTimeout(this.reconnectTimer),this.reconnectTimer=null;if(this.ws=await DF0(this.options.url),"on"in this.ws)this.ws.on("open",()=>{console.log(`[WS] Connected to ${this.options.url}`),this.sendHello(),this.options.onOpen?.()}),this.ws.on("message",($)=>this.handleMessage($)),this.ws.on("close",()=>this.scheduleReconnect()),this.ws.on("error",($)=>{this.options.onError?.($),this.scheduleReconnect()});else this.ws.onopen=()=>{console.log(`[WS] Connected to ${this.options.url}`),this.sendHello(),this.options.onOpen?.()},this.ws.onmessage=($)=>this.handleMessage($.data),this.ws.onclose=()=>this.scheduleReconnect(),this.ws.onerror=($)=>{this.options.onError?.(Error(`WebSocket error: ${$.type}`)),this.scheduleReconnect()}}sendHello(){if(this.options.signerId&&this.options.seed)try{let $=KJ(),Q=y70(),Z=v70(this.options.runtimeId,$,Q),X=lK(this.options.seed,this.options.signerId,Z);this.sendRaw({type:"hello",from:this.options.runtimeId,timestamp:$,auth:{nonce:Q,signature:X,timestamp:$}});return}catch($){this.options.onError?.($)}this.sendRaw({type:"hello",from:this.options.runtimeId,timestamp:KJ()})}scheduleReconnect(){if(this.closed)return;if(this.reconnectTimer)return;this.reconnectTimer=setTimeout(()=>{if(this.reconnectTimer=null,!this.closed)this.connect().catch(($)=>this.options.onError?.($))},this.reconnectMs)}async handleMessage($){let Q;try{Q=b70($)}catch(Z){this.options.onError?.(Z);return}if(Q.type==="error")this.options.onError?.(Error(Q.error||"Unknown error"));if(Q.type==="runtime_input"&&Q.payload&&Q.from){await this.options.onRuntimeInput?.(Q.from,Q.payload);return}if(Q.type==="entity_input"&&Q.payload&&Q.from){if(!Q.encrypted){this.options.onError?.(Error(`P2P_UNENCRYPTED: Received unencrypted entity_input from ${Q.from}`));return}if(!this.options.encryptionKeyPair){this.options.onError?.(Error("P2P_NO_DECRYPTION: Cannot decrypt without keypair"));return}let Z=Vb(Q.payload,this.options.encryptionKeyPair.privateKey);await this.options.onEntityInput?.(Q.from,Z);return}if(Q.type==="gossip_request"&&Q.payload&&Q.from){await this.options.onGossipRequest?.(Q.from,Q.payload);return}if((Q.type==="gossip_response"||Q.type==="gossip_subscribed")&&Q.payload&&Q.from){let Z=Q.payload?.profiles||[];console.log(`[WS-CLIENT] Received gossip_response: ${Z.length} profiles from ${Q.from}`),await this.options.onGossipResponse?.(Q.from,Q.payload);return}if((Q.type==="gossip_announce"||Q.type==="gossip_update")&&Q.payload&&Q.from){await this.options.onGossipAnnounce?.(Q.from,Q.payload);return}}sendRuntimeInput($,Q){return this.sendRaw({type:"runtime_input",id:iq(),from:this.options.runtimeId,to:$,timestamp:KJ(),payload:Q})}sendEntityInput($,Q){if(!this.options.getTargetEncryptionKey||!this.options.encryptionKeyPair)throw Error("P2P_NO_ENCRYPTION: Encryption not configured");let Z=this.options.getTargetEncryptionKey($);if(!Z)throw Error(`P2P_NO_PUBKEY: No encryption key for ${$}`);let X=Ub(Q,Z);return this.sendRaw({type:"entity_input",id:iq(),from:this.options.runtimeId,to:$,timestamp:KJ(),payload:X,encrypted:!0})}sendGossipRequest($,Q){return this.sendRaw({type:"gossip_request",id:iq(),from:this.options.runtimeId,to:$,timestamp:KJ(),payload:Q})}sendGossipResponse($,Q){return this.sendRaw({type:"gossip_response",id:iq(),from:this.options.runtimeId,to:$,timestamp:KJ(),payload:Q})}sendGossipAnnounce($,Q){return this.sendRaw({type:"gossip_announce",id:iq(),from:this.options.runtimeId,to:$,timestamp:KJ(),payload:Q})}sendGossipSubscribe($){return this.sendRaw({type:"gossip_subscribe",id:iq(),from:this.options.runtimeId,to:this.options.runtimeId,timestamp:KJ(),payload:$})}sendRaw($){if(!this.ws)return!1;if("readyState"in this.ws&&this.ws.readyState!==1)return!1;let Q=x70($);try{return this.ws.send(Q),!0}catch(Z){return this.options.onError?.(Z),!1}}isOpen(){return!!this.ws&&"readyState"in this.ws&&this.ws.readyState===1}close(){if(this.closed=!0,this.reconnectTimer)clearTimeout(this.reconnectTimer),this.reconnectTimer=null;this.ws?.close()}}var OF0,i70=0,KJ=()=>{return i70+=1,i70},DF0=async($)=>{if(OF0){let X=new WebSocket($);return X.binaryType="arraybuffer",X}return new(await Promise.resolve().then(() => V2(l70(),1))).default($)};var o70=p(()=>{g70();H8();ZT();OF0=typeof window<"u"&&typeof WebSocket<"u"});class YT{map=new Map;get($){return this.map.get(RU($))}set($,Q){return this.map.set(RU($),Q),this}has($){return this.map.has(RU($))}delete($){return this.map.delete(RU($))}get size(){return this.map.size}*entries(){for(let[$,Q]of this.map.entries())yield[ZQ($),Q]}*keys(){for(let $ of this.map.keys())yield ZQ($)}*values(){yield*this.map.values()}forEach($){this.map.forEach((Q,Z)=>{$(Q,ZQ(Z),this)})}toMap(){return new Map(this.map)}static fromMap($){let Q=new YT;for(let[Z,X]of $.entries())Q.map.set(Z,X);return Q}}class Cb{map=new Map;get($){return this.map.get($)}set($,Q){return this.map.set($,Q),this}has($){return this.map.has($)}delete($){return this.map.delete($)}get size(){return this.map.size}*entries(){yield*this.map.entries()}*keys(){yield*this.map.keys()}*values(){yield*this.map.values()}forEach($){this.map.forEach((Q,Z)=>$(Q,Z,this))}}var XT=1000000n,n70="xln://",r70="localhost:8080",a70="xln.finance",s70,Mb=($)=>{return typeof $==="string"&&/^0x[a-fA-F0-9]{64}$/.test($)},Pb=($)=>{return typeof $==="string"&&$.length>0},Hb=($)=>{return typeof $==="string"&&$.length>0},jb=($)=>{return typeof $==="string"&&/^0x[a-fA-F0-9]{40}$/i.test($)},LM=($)=>{if(!Mb($))throw Error(`FINTECH-SAFETY: Invalid EntityId format: ${$}`);return $},TM=($)=>{if(!Pb($))throw Error(`FINTECH-SAFETY: Invalid SignerId: ${$}`);return $},FM=($)=>{if(!Hb($))throw Error(`FINTECH-SAFETY: Invalid JId: ${$}`);return $},Rb=($)=>{if(!jb($))throw Error(`FINTECH-SAFETY: Invalid EntityProviderAddress: ${$}`);return $},ZQ=($)=>{let Q=$.indexOf(":");if(Q===-1)throw Error(`FINTECH-SAFETY: Invalid replica key format (no colon): ${$}`);let Z=$.slice(0,Q),X=$.slice(Q+1);if(!Z||!X)throw Error(`FINTECH-SAFETY: Invalid replica key format (empty parts): ${$}`);return{entityId:LM(Z),signerId:TM(X)}},RU=($)=>{return`${$.entityId}:${$.signerId}`},t70=($,Q)=>({entityId:LM($),signerId:TM(Q)}),AM=($)=>{return ZQ($).entityId},e70=($)=>{return ZQ($).signerId},Nb=($)=>{try{let Q=BigInt($);if(Q>0n&&Q<XT)return"numbered";return"lazy"}catch{return"lazy"}},$30=($)=>{return Nb($)==="numbered"},Q30=($)=>{return Nb($)==="lazy"},MF0=($)=>{if(Nb($)==="numbered")return`#${Number(BigInt($))}`;return $.slice(2,10)+"..."},Z30=($)=>{try{let Q=BigInt($);if(Q>0n&&Q<XT)return Number(Q);let Z=$.slice(-8);return parseInt(Z,16)%9000000+1e6}catch{throw Error(`FINTECH-SAFETY: Invalid entityId for display: ${$}`)}},PF0=($)=>{if($.startsWith("0x")&&$.length===42)return`${$.slice(0,6)}...${$.slice(-4)}`;return $},X30=($)=>{return`${MF0($.entityId)}:${PF0($.signerId)}`},Y30=($)=>{return`xln://${$.runtimeHost}/${$.jId}/${$.epAddress}/${$.entityId}/${$.signerId}`},J30=($)=>{if(!$.startsWith("xln://"))throw Error(`FINTECH-SAFETY: Invalid URI scheme: ${$}`);let Z=$.slice(6).split("/");if(Z.length<5)throw Error(`FINTECH-SAFETY: Invalid URI format: ${$}`);let[X,Y,z,J,q]=Z;return{runtimeHost:X,jId:FM(Y),epAddress:Rb(z),entityId:LM(J),signerId:TM(q)}},z30=($,Q,Z,X)=>({runtimeHost:"localhost:8080",jId:$,epAddress:Q,entityId:Z,signerId:X}),q30=($)=>{return FM($.toString())},W30=($)=>{let Q=0;for(let Z=0;Z<$.length;Z++)Q=(Q<<5)-Q+$.charCodeAt(Z)|0;return FM(`lazy_${Math.abs(Q).toString(16)}`)},Lb=($)=>{try{return ZQ($)}catch{return console.warn(`[ids] Invalid replica key during migration: ${$}`),null}},K30=($)=>{return Lb($)?.entityId??null};var Tb=p(()=>{s70={mainnet:"1",sepolia:"11155111",polygon:"137",arbitrum:"42161",local:"local"}});function Ab($){let{metadata:Q,...Z}=$,{profileHanko:X,profileSignature:Y,...z}=Q||{},J={...Z,metadata:z},q=Fb(J),W=JSON.stringify(q,jF0),G=`${HF0}:${W}`;return p1(new TextEncoder().encode(G))}function jF0($,Q){if(typeof Q==="bigint")return Q.toString();if(Q instanceof Map)return Object.fromEntries(Q);return Q}function Fb($){if($===null||typeof $!=="object")return $;if(Array.isArray($))return $.map(Fb);let Q={};for(let Z of Object.keys($).sort())Q[Z]=Fb($[Z]);return Q}function U30($,Q,Z){let X=Ab(Q),Y=lK($.runtimeSeed,Z,X);return{...Q,metadata:{...Q.metadata,profileSignature:Y}}}async function V30($,Q){let Z=$.metadata?.profileHanko;if(Z){let Y=Ab($);return(await CE(Z,Y,$.entityId,Q)).valid}let X=$.metadata?.profileSignature;if(X&&typeof X==="string")return RF0($,X);return!1}function RF0($,Q){try{let Z=Ab($),X=Buffer.from(Z.replace("0x",""),"hex"),Y=null,z=$.metadata?.entityPublicKey;if(z&&typeof z==="string")Y=G30(z);if(!Y){let W=$.metadata?.board;if(W&&typeof W==="object"&&"validators"in W){let G=W.validators[0];if(G?.publicKey)Y=G30(G.publicKey);else if(G?.signerId)Y=rQ(G.signerId)}}if(!Y)return!1;let J=Q.replace("0x",""),q=Buffer.from(J.slice(0,128),"hex");return mj(q,X,Y)}catch(Z){return console.warn("Legacy profile signature verification failed:",Z),!1}}function G30($){let Q=$.startsWith("0x")?$.slice(2):$,Z=new Uint8Array(Q.length/2);for(let X=0;X<Z.length;X++)Z[X]=parseInt(Q.slice(X*2,X*2+2),16);return Z}var HF0="xln-profile-v1";var O30=p(()=>{A6();F2();H8();pB()});class wb{env;runtimeId;signerId;relayUrls;seedRuntimeIds;advertiseEntityIds;isHub;profileName;onEntityInput;onGossipProfiles;clients=[];pendingByRuntime=new Map;pollInterval=null;encryptionKeyPair;constructor($){this.env=$.env,this.runtimeId=$.runtimeId,this.signerId=$.signerId||"1",this.relayUrls=JT($.relayUrls||[NF0]),this.seedRuntimeIds=JT($.seedRuntimeIds||[]),this.advertiseEntityIds=$.advertiseEntityIds||null,this.isHub=$.isHub??!1,this.profileName=$.profileName,this.onEntityInput=$.onEntityInput,this.onGossipProfiles=$.onGossipProfiles;let Q=this.env.runtimeSeed;if(!Q)throw Error("P2P_INIT_ERROR: runtimeSeed is required for encryption keypair");this.encryptionKeyPair=Gb(Q)}getEncryptionPubKeyHex(){return Ob(this.encryptionKeyPair.publicKey)}matchesIdentity($,Q){return this.runtimeId===$&&(!Q||this.signerId===Q)}updateConfig($){if($.seedRuntimeIds)this.seedRuntimeIds=JT($.seedRuntimeIds);if($.advertiseEntityIds)this.advertiseEntityIds=$.advertiseEntityIds;if($.isHub!==void 0)this.isHub=$.isHub;if($.profileName!==void 0)this.profileName=$.profileName;if($.relayUrls){let Q=JT($.relayUrls);if(!TF0(Q,this.relayUrls)){this.relayUrls=Q,this.reconnect();return}}this.announceLocalProfiles()}connect(){console.log(`[P2P] RuntimeP2P.connect() called, connecting to ${this.relayUrls.length} relays: ${this.relayUrls.join(", ")}`),this.closeClients(),this.startPolling();for(let $ of this.relayUrls){let Q=this.env.runtimeSeed,Z=new Db({url:$,runtimeId:this.runtimeId,signerId:this.signerId,...Q?{seed:Q}:{},encryptionKeyPair:this.encryptionKeyPair,getTargetEncryptionKey:(X)=>{let z=(this.env.gossip?.getProfiles?.()||[]).find((J)=>J.runtimeId===X);if(!z?.metadata?.encryptionPubKey)return null;try{let J=(ZT(),Q5(c70)).hexToPubKey;return J(z.metadata.encryptionPubKey)}catch{return null}},onOpen:()=>{this.flushPending(),this.requestSeedGossip(),this.announceLocalProfiles()},onEntityInput:async(X,Y)=>{let z=new Set;if(Y.entityId)z.add(Y.entityId);if(Y.entityTxs)for(let q of Y.entityTxs){if(q.type==="accountInput"&&q.data){let W=q.data;if(W.fromEntityId)z.add(W.fromEntityId);if(W.toEntityId)z.add(W.toEntityId)}if(q.type==="openAccount"&&q.data){let W=q.data;if(W.targetEntityId)z.add(W.targetEntityId)}}let J=Array.from(z).filter((q)=>!this.hasProfileForEntity(q));if(J.length>0)console.log(`P2P_FETCH_PROFILE: ${J.map((q)=>q.slice(-4)).join(",")} (not in cache)`),await this.fetchProfilesWithRetry();this.onEntityInput(X,Y)},onGossipRequest:(X,Y)=>this.handleGossipRequest(X,Y),onGossipResponse:(X,Y)=>this.handleGossipResponse(X,Y),onGossipAnnounce:(X,Y)=>this.handleGossipAnnounce(X,Y),onError:(X)=>{this.env.warn("network","WS_CLIENT_ERROR",{relay:$,error:X.message})}});this.clients.push(Z),Z.connect().catch((X)=>{this.env.warn("network","WS_CONNECT_FAILED",{relay:$,error:X.message})})}}close(){this.stopPolling(),this.closeClients(),this.pendingByRuntime.clear()}startPolling(){if(this.pollInterval){console.log("[P2P] startPolling: Already polling, skipping");return}console.log(`[P2P] startPolling: Starting polling every ${D30}ms`),setTimeout(()=>this.requestSeedGossip(),100),this.pollInterval=setInterval(()=>{this.requestSeedGossip()},D30)}stopPolling(){if(this.pollInterval)clearInterval(this.pollInterval),this.pollInterval=null}reconnect(){this.connect()}enqueueEntityInput($,Q){console.log(`\uD83D\uDCE8 P2P-ENQUEUE: to=${$.slice(0,10)} entity=${Q.entityId.slice(-4)} txs=${Q.entityTxs?.length||0}`),console.log(`\uD83D\uDCE8 P2P-DEBUG: clients=${this.clients.length} open=${this.clients.map((Y)=>Y.isOpen())}`);let Z=this.getActiveClient();if(Z&&Z.isOpen()){if(console.log("\uD83D\uDCE1 P2P-SEND-NOW: Client is open, sending immediately"),Z.sendEntityInput($,Q)){console.log(" P2P-SENT: Message sent successfully");return}console.warn(" P2P-SEND-FAILED: Client.send returned false")}else console.warn(" P2P-NO-CLIENT: No active client, queueing message");let X=this.pendingByRuntime.get($)||[];X.push(Q);while(X.length>CF0)X.shift();this.pendingByRuntime.set($,X),console.log(`\uD83D\uDCE5 P2P-QUEUED: Message queued for ${$.slice(0,10)}, queue size: ${X.length}`)}requestGossip($){let Q=this.getActiveClient();if(!Q)return;Q.sendGossipRequest($,{scope:"all"})}announceProfilesTo($,Q){let Z=this.getActiveClient();if(!Z)return;Z.sendGossipAnnounce($,{profiles:Q})}getActiveClient(){return this.clients.find(($)=>$.isOpen())||null}flushPending(){let $=this.getActiveClient();if(!$||!$.isOpen())return;for(let[Q,Z]of this.pendingByRuntime.entries()){let X=[];for(let Y of Z)if(!$.sendEntityInput(Q,Y))X.push(Y);if(X.length>0)this.pendingByRuntime.set(Q,X);else this.pendingByRuntime.delete(Q)}}requestSeedGossip(){let $=this.getActiveClient();if(!$)return;$.sendGossipRequest(this.runtimeId,{scope:"all"}),console.log("P2P_GOSSIP_REQUEST scope=all")}refreshGossip(){this.requestSeedGossip()}hasProfileForEntity($){return(this.env.gossip?.getProfiles?.()||[]).some((Z)=>Z.entityId===$)}async fetchProfilesWithRetry(){let $=this.env.gossip?.getProfiles?.()?.length||0;console.log(`P2P_FETCH_PROFILES: Starting fetch, currently have ${$} profiles`);for(let Q=0;Q<5;Q++){this.requestSeedGossip(),await new Promise((Y)=>setTimeout(Y,300));let Z=this.env.gossip?.getProfiles?.()||[],X=Z.map((Y)=>Y.entityId?.slice(-4)||"???").join(",");if(console.log(`P2P_FETCH_RETRY: attempt ${Q+1}, got ${Z.length} profiles [${X}]`),Z.length>$){console.log(`P2P_FETCH_SUCCESS: Got ${Z.length-$} new profiles`);return}}console.log(`P2P_FETCH_TIMEOUT: Still have ${this.env.gossip?.getProfiles?.()?.length||0} profiles after retries`)}announceLocalProfiles(){let $=this.getLocalProfiles();if($.length===0)return;for(let Z of $)this.env.gossip?.announce?.(Z);let Q=this.getActiveClient();if(Q)Q.sendGossipAnnounce(this.runtimeId,{profiles:$}),console.log(`P2P_PROFILE_ANNOUNCE n=${$.length}`);for(let Z of this.seedRuntimeIds)this.announceProfilesTo(Z,$),console.log(`P2P_PROFILE_SENT from=${this.runtimeId.slice(0,10)} to=${Z.slice(0,10)} profiles=${$.length}`)}getLocalProfiles(){if(!this.env.eReplicas||this.env.eReplicas.size===0)return[];let $=[],Q=new Set;for(let[Z,X]of this.env.eReplicas.entries()){let Y;try{Y=AM(Z)}catch{continue}if(Q.has(Y))continue;if(this.advertiseEntityIds&&!this.advertiseEntityIds.includes(Y))continue;Q.add(Y);let J=this.env.gossip?.getProfiles?.().find((P)=>P.entityId===Y)?.metadata?.lastUpdated||0,q=Math.max(J+1,this.env.timestamp);console.log(`\uD83D\uDD50 MONOTONIC: entity=${Y.slice(-4)} lastTs=${J} envTs=${this.env.timestamp}  ${q}`);let W=UU(X.state,this.profileName,q);if(W.runtimeId=this.runtimeId,this.isHub){if(W.capabilities=Array.from(new Set([...W.capabilities||[],"hub","relay"])),W.metadata={...W.metadata||{},isHub:!0},this.relayUrls.length>0)W.endpoints=this.relayUrls}if(this.profileName)W.metadata={...W.metadata||{},name:this.profileName};let G=X.state.config.validators[0],U=G?rQ(G):null;if(U)W.metadata={...W.metadata||{},entityPublicKey:`0x${LF0(U)}`};W.metadata={...W.metadata||{},encryptionPubKey:this.getEncryptionPubKeyHex()};let D=W;if(G&&this.env.runtimeSeed)try{D=U30({runtimeSeed:this.env.runtimeSeed},W,G)}catch(P){console.warn(`P2P_PROFILE_SIGN_FAILED: ${Y.slice(-4)} - ${P.message}`)}$.push(D)}return $}handleGossipRequest($,Q){if(!this.env.gossip?.getProfiles)return;let Z=Q,X=[];if(Z?.scope==="bundle"&&Z.entityId&&this.env.gossip.getProfileBundle){let z=this.env.gossip.getProfileBundle(Z.entityId);X=[...z.profile?[z.profile]:[],...z.peers]}else X=this.env.gossip.getProfiles();let Y=this.getActiveClient();if(!Y)return;Y.sendGossipResponse($,{profiles:X})}handleGossipResponse($,Q){let Z=Q,X=Array.isArray(Z?.profiles)?Z.profiles:[];this.applyIncomingProfiles($,X).catch((Y)=>{console.warn(`P2P_APPLY_PROFILES_ERROR: ${Y.message}`)})}handleGossipAnnounce($,Q){let Z=Q,X=Array.isArray(Z?.profiles)?Z.profiles:[];this.applyIncomingProfiles($,X).catch((Y)=>{console.warn(`P2P_APPLY_PROFILES_ERROR: ${Y.message}`)})}async applyIncomingProfiles($,Q){if(Q.length===0)return;let Z=0,X=0;for(let Y of Q){let z=Y.metadata?.profileHanko,J=Y.metadata?.profileSignature;if(z||J){if(!await V30(Y,this.env)){console.warn(`P2P_PROFILE_INVALID_SIGNATURE: ${Y.entityId.slice(-4)} - rejecting`);continue}Z++}else X++;this.env.gossip?.announce?.(Y);let q=Y.metadata?.entityPublicKey;if(q&&typeof q==="string"&&FF0(q))XO(Y.entityId,q)}console.log(`P2P_PROFILE_RECEIVED from=${$.slice(0,10)} total=${Q.length} verified=${Z} unsigned=${X}`),this.onGossipProfiles($,Q)}closeClients(){for(let $ of this.clients)$.close();this.clients=[]}}var NF0="wss://xln.finance/relay",CF0=100,LF0=($)=>Array.from($).map((Q)=>Q.toString(16).padStart(2,"0")).join(""),JT=($)=>Array.from(new Set($.filter(Boolean))),TF0=($,Q)=>{if($.length!==Q.length)return!1;let Z=[...$].sort(),X=[...Q].sort();return Z.every((Y,z)=>Y===X[z])},FF0=($)=>{if(!$.startsWith("0x"))return!1;let Q=$.slice(2);if(!/^[0-9a-fA-F]+$/.test(Q))return!1;return Q.length===66||Q.length===130},D30=1000;var M30=p(()=>{o70();gL();Tb();H8();O30();ZT()});function P30($,Q,Z){if(!$)return{state:"committed",isLeftEntity:Z,shouldRollback:!1,pendingHeight:null,mempoolCount:0};let X=$.currentFrame?.height??0,Y=$.pendingFrame?.height??null,z=Q??0,J=$.mempool?.length??0,q=Y!==null,W=z>X;if(q&&W&&z===Y)return{state:"conflict",isLeftEntity:Z,shouldRollback:Z,pendingHeight:Y,mempoolCount:J};if(q&&z<(Y??0))return{state:"proposed",isLeftEntity:Z,shouldRollback:!1,pendingHeight:Y,mempoolCount:J};if(J>0&&!q)return{state:"mempool",isLeftEntity:Z,shouldRollback:!1,pendingHeight:null,mempoolCount:J};return{state:"committed",isLeftEntity:Z,shouldRollback:!1,pendingHeight:null,mempoolCount:0}}function H30($,Q){if($.state==="conflict"||Q.state==="conflict")return{glowColor:"red",glowSide:"both",glowIntensity:0.8,isDashed:!0,pulseSpeed:500};if($.state==="proposed")return{glowColor:"yellow",glowSide:"left",glowIntensity:0.6,isDashed:!0,pulseSpeed:1000};if(Q.state==="proposed")return{glowColor:"yellow",glowSide:"right",glowIntensity:0.6,isDashed:!0,pulseSpeed:1000};if($.state==="mempool"||Q.state==="mempool")return{glowColor:"yellow",glowSide:$.state==="mempool"?"left":"right",glowIntensity:0.2,isDashed:!1,pulseSpeed:2000};return{glowColor:null,glowSide:null,glowIntensity:0,isDashed:!1,pulseSpeed:0}}function zT($){let Q=$.match(/^(\d+)\.\.(\d+)$/);if(!Q||!Q[1]||!Q[2])return null;let Z=parseInt(Q[1],10),X=parseInt(Q[2],10);if(Z>X)return null;return{start:Z,end:X}}function qT($){let Q=[];for(let Z=$.start;Z<=$.end;Z++)Q.push(Z);return Q}function NU($){let Q=$.match(/^([a-zA-Z_][a-zA-Z0-9_]*)=(.+)$/);if(!Q||!Q[1]||!Q[2])return null;return{key:Q[1],value:Q[2]}}function Bb($){let Q={};for(let Z of $)if(typeof Z==="object"&&!("start"in Z))Object.assign(Q,Z);return Q}function j30($){return $.filter((Q)=>typeof Q!=="object"||("start"in Q))}function R30($){let Q=$.split(`
`),Z=[],X=[],Y={currentTimestamp:0,currentDescription:[],currentActions:[],lineNumber:0,inRepeatBlock:!1,repeatBlockActions:[]},z=[],J=[],q=[],W="";for(let U=0;U<Q.length;U++){Y.lineNumber=U+1;let D=Q[U];if(!D)continue;let P=D.trim();if(P==="")continue;if(P.startsWith("#"))continue;if(P==="==="){Eb(Y,z);continue}if(P.startsWith("SEED ")){W=P.substring(5).trim();continue}if(P.startsWith("INCLUDE ")){let C=P.substring(8).trim();q.push(C),X.push({lineNumber:Y.lineNumber,message:"INCLUDE directive parsed but not yet implemented",suggestion:"Included scenarios will be merged in future implementation"});continue}if(P.startsWith("REPEAT ")){let C=P.substring(7).trim(),L=parseFloat(C);if(isNaN(L)||L<=0){Z.push({lineNumber:Y.lineNumber,message:`Invalid REPEAT interval: ${C}`});continue}Y.inRepeatBlock=!0,Y.repeatInterval=L,Y.repeatStartTimestamp=Y.currentTimestamp,Y.repeatBlockActions=[];continue}if(P==="END_REPEAT"){if(!Y.inRepeatBlock){Z.push({lineNumber:Y.lineNumber,message:"END_REPEAT without matching REPEAT"});continue}if(Y.repeatInterval!==void 0&&Y.repeatStartTimestamp!==void 0)J.push({interval:Y.repeatInterval,actions:Y.repeatBlockActions,startTimestamp:Y.repeatStartTimestamp,sourceLineNumber:Y.lineNumber});Y.inRepeatBlock=!1,delete Y.repeatInterval,delete Y.repeatStartTimestamp,Y.repeatBlockActions=[];continue}let H=P.match(/^(\d+(?:\.\d+)?):(.*)$/);if(H){Eb(Y,z);let C=H[1],L=H[2];if(!C)continue;Y.currentTimestamp=parseFloat(C);let B=L?.trim();if(B&&B.length>0)Y.currentTitle=B;else delete Y.currentTitle;Y.currentDescription=[],Y.currentActions=[],delete Y.currentViewState;continue}let N=AF0(P,Y.lineNumber);if(N.isAction){let C=N.actions||[N.action];if(Y.inRepeatBlock)Y.repeatBlockActions.push(...C);else Y.currentActions.push(...C)}else if(N.error)Z.push(N.error);else if(Y.currentActions.length===0&&!Y.inRepeatBlock)Y.currentDescription.push(P);else X.push({lineNumber:Y.lineNumber,message:"Text after actions is ignored",suggestion:"Place descriptions before actions in the same timestamp block"})}if(Eb(Y,z),Y.inRepeatBlock)Z.push({lineNumber:Y.lineNumber,message:"Unclosed REPEAT block (missing END_REPEAT)"});return{scenario:{seed:W,events:z,repeatBlocks:J,includes:q},errors:Z,warnings:X}}function Eb($,Q){if($.currentActions.length>0){let Z=$.currentDescription.join(`
`).trim(),X={timestamp:$.currentTimestamp,actions:$.currentActions};if($.currentTitle!==void 0)X.title=$.currentTitle;if(Z.length>0)X.description=Z;if($.currentViewState!==void 0)X.viewState=$.currentViewState;Q.push(X),delete $.currentTitle,$.currentDescription=[],$.currentActions=[],delete $.currentViewState}}function AF0($,Q){let Z=$.split(/\s+/);if(Z.length===0)return{isAction:!1};let X=Z[0];if(!X)return{isAction:!1};let z=["VIEW","import","PAUSE","ASSERT","grid","payRandom","r2r"].includes(X),J=/^\d+$/.test(X)||/^\d+\.\.\d+$/.test(X);if(!z&&!J)return{isAction:!1};if(X==="VIEW"){let N={};for(let C=1;C<Z.length;C++){let L=Z[C];if(!L)continue;let B=NU(L);if(!B)return{isAction:!1,error:{lineNumber:Q,message:`Invalid VIEW parameter: ${L}`}};let{key:E,value:I}=B;if(E==="camera"){if(!["orbital","overview","follow","free"].includes(I))return{isAction:!1,error:{lineNumber:Q,message:`Invalid camera mode: ${I}`}};N.camera=I}else if(E==="zoom")N.zoom=parseFloat(I);else if(E==="focus")N.focus=I;else if(E==="panel")N.panel=I;else if(E==="speed")N.speed=parseFloat(I)}return{isAction:!0,action:{type:"VIEW",params:[N],sourceLineNumber:Q}}}if(X==="import"){let N=Z[1];if(!N)return{isAction:!1,error:{lineNumber:Q,message:"import requires entity ID or range"}};let C=zT(N),L=C?qT(C).map(String):[N],B=Z.slice(2),E={};for(let _ of B){let f=NU(_);if(f)E[f.key]=f.value}let I=[...L];if(Object.keys(E).length>0)I.push(E);return{isAction:!0,action:{type:"import",params:I,sourceLineNumber:Q}}}if(X==="grid"){let N=Z.slice(1),C=[];for(let L of N){let B=NU(L);if(B)C.push({[B.key]:B.value});else C.push(L)}return{isAction:!0,action:{type:"grid",params:C,sourceLineNumber:Q}}}if(X==="payRandom"){let N=Z.slice(1),C=[];for(let L of N){let B=NU(L);if(B)C.push({[B.key]:B.value});else C.push(L)}return{isAction:!0,action:{type:"payRandom",params:C,sourceLineNumber:Q}}}if(X==="r2r"){let N=Z[1],C=Z[2],L=Z[3];if(!N||!C||!L)return{isAction:!1,error:{lineNumber:Q,message:"r2r requires 3 parameters: fromEntity toEntity amount"}};return{isAction:!0,action:{type:"r2r",params:[N,C,L],sourceLineNumber:Q}}}if(X==="fund"){let N=Z[1],C=Z[2];if(!N||!C)return{isAction:!1,error:{lineNumber:Q,message:"fund requires 2 parameters: entityIndex amount"}};return{isAction:!0,action:{type:"fund",params:[N,C],sourceLineNumber:Q}}}let q=X,W=Z[1];if(!W||!q)return{isAction:!1};let G=zT(q),U=G?qT(G).map(String):[q],D=Z.slice(2),P=[];for(let N of U){let C=wF0(D);for(let L of C)P.push({type:W,entityId:N,params:L,sourceLineNumber:Q})}if(P.length===0)return{isAction:!1};let H=P[0];if(!H)return{isAction:!1};if(P.length===1)return{isAction:!0,action:H};return{isAction:!0,actions:P}}function wF0($){let Q=[];for(let Z of $){let X=NU(Z);if(X)Q.push([{[X.key]:X.value}]);else{let Y=zT(Z);if(Y)Q.push(qT(Y).map(String));else Q.push([Z])}}return N30(Q)}function N30($){if($.length===0)return[[]];let Q=$[0];if(!Q)return[[]];if($.length===1)return Q.map((J)=>[J]);let[Z,...X]=$;if(!Z)return[[]];let Y=N30(X),z=[];for(let J of Z)for(let q of Y)z.push([J,...q]);return z}function BF0($,Q){let Z=[];for(let X of $.repeatBlocks){let Y=X.startTimestamp;while(Y<=Q)Z.push({timestamp:Y,actions:X.actions,title:`[REPEAT every ${X.interval}s]`}),Y+=X.interval}return Z}function WT($,Q){let Z=BF0($,Q);return[...$.events,...Z].sort((Y,z)=>Y.timestamp-z.timestamp)}var Ib=()=>{};var L30={};x1(L30,{formatSummary:()=>kb,formatRuntime:()=>h2,formatOrderbook:()=>fb,formatEntity:()=>GT,formatAccount:()=>UT});function z8($,Q=18,Z=""){let X=10n**BigInt(Q),Y=$/X,z=Y<0n?-Y:Y;if(z>=1000n){let J=Number(z)/1000;return`${Y<0n?"-":""}$${J.toFixed(0)}k${Z?" "+Z:""}`}return`${Y<0n?"-":""}$${z}${Z?" "+Z:""}`}function GJ($){return $.slice(-8)}function _F0($){if($===null||$===void 0)return"N/A";if(typeof $==="string")return $.length>=8?$.slice(-8):$;if(typeof $==="bigint"){let Q=$.toString(16);return Q.length>=8?Q.slice(-8):Q}if($ instanceof Uint8Array){let Q=Array.from($).map((Z)=>Z.toString(16).padStart(2,"0")).join("");return Q.length>=8?Q.slice(-8):Q}try{let Q=String($);return Q.length>=8?Q.slice(-8):Q}catch{return"N/A"}}function KT($){let Q=Math.abs($),Z=Math.floor(Q/1000);if(Z<60)return`${Z}s`;let X=Math.floor(Z/60);if(X<60)return`${X}m`;let Y=Math.floor(X/60);if(Y<24)return`${Y}h`;return`${Math.floor(Y/24)}d`}function _b($,Q=!0){if(Q){let Z=oZ()-$;if(Math.abs(Z)<1000)return"now";return Z>0?`${KT(Z)} ago`:`in ${KT(-Z)}`}return new Date($).toISOString().slice(11,19)}function wM($,Q,Z=0,X=!1){let z=" ".repeat(Z),J=X?IF0:EF0,q=[`${z}${J.topLeft}${J.horizontal.repeat(62)}${J.topRight}`,`${z}${J.vertical} ${$.padEnd(61)}${J.vertical}`];if(Q.length>0){q.push(`${z}${J.verticalRight}${J.horizontal.repeat(62)}${J.verticalLeft}`);for(let W of Q)q.push(`${z}${J.vertical} ${W.padEnd(61)}${J.vertical}`)}return q.push(`${z}${J.bottomLeft}${J.horizontal.repeat(62)}${J.bottomRight}`),q.join(`
`)}function C30($,Q,Z=10){if(Q===0n)return"".repeat(Z);let X=Math.min(Z,Math.floor(Number($*BigInt(Z)/Q)));return"".repeat(X)+"".repeat(Z-X)}function h2($,Q){let Z={...Sb,...Q},X=[],Y=[`Height: ${$.height||0} | Timestamp: ${_b($.timestamp,!1)}`,`Entities: ${$.eReplicas.size} | J-Replicas: ${$.jReplicas?.size||0}`];if(X.push(wM("RUNTIME STATE",Y,0,!0)),X.push(""),$.frameLogs&&$.frameLogs.length>0){X.push("  EVENTS (Hierarchical Stack):"),X.push("  "+"".repeat(60));let J=$.frameLogs.slice(-50);for(let q of J){let W=2,G="R";if(q.category==="jurisdiction"){W=4;let P=q.data?.jurisdictionName||$.activeJurisdiction||"J",H=q.data?.blockNumber||"?";G=`  J:${P}:${H}`}else if(q.entityId){let P=GJ(q.entityId),H=q.data?.height||"?";if(q.message.includes("bilateral")||q.message.includes("Account")||q.data?.accountId){W=8;let N=q.data?.accountId||q.data?.toEntity||q.data?.fromEntity,C=typeof N==="string"?GJ(N):"?",L=q.data?.frameHeight||q.data?.height||"?";G=`      A:${P}:${C}:${L}`}else W=6,G=`    E:${P}:${H}`}let U=_b(q.timestamp,!0),D=q.level==="error"?"":q.level==="warn"?" ":"  ";if(X.push(" ".repeat(W)+`${D}[${U}] ${G} ${q.message}`),q.data){let H=["amount","tokenId","height","txCount"].filter((N)=>q.data[N]!==void 0).map((N)=>`${N}=${q.data[N]}`).join(" ");if(H)X.push(" ".repeat(W+2)+` ${H}`)}}X.push("  "+"".repeat(60)),X.push("")}if($.jReplicas&&$.jReplicas.size>0){X.push("  J-REPLICAS (Jurisdictions):");for(let[J,q]of $.jReplicas){let W=q.depositoryAddress||q.contracts?.depository,G=[`Name: ${J}`,`Block: ${q.blockNumber} | State Root: ${q.stateRoot.slice?.(0,16)||"N/A"}`,`Mempool: ${q.mempool?.length||0} txs | Delay: ${q.blockDelayMs}ms`,`Contracts: Depository=${_F0(W)}`];X.push(wM(`J-Replica: ${J}`,G,2))}X.push("")}let z=0;for(let[J,q]of $.eReplicas){if(Z.maxAccounts&&z>=Z.maxAccounts){X.push(`  ... and ${$.eReplicas.size-z} more entities`);break}X.push(GT(q.state,{...Z,indentSize:2})),X.push(""),z++}return X.join(`
`)}function GT($,Q){let Z={...Sb,...Q},X=Z.indentSize||0,Y=[],z=$.entityId||"Unknown",J=`Entity: ${GJ(z)}`,q=[`Reserves: ${fF0($.reserves)} | Accounts: ${$.accounts.size}`],W=$.lockBook?.size||0,G=$.htlcRoutes?.size||0,U=$.htlcFeesEarned||0n;if(W>0||U>0n)q.push(`HTLC: Fees=${z8(U)} | Locks=${W} | Routes=${G}`);let D=$.swapBook?.size||0;if(D>0)q.push(`Swaps: ${D} offers`);if(q.push(`Height: ${$.height||0} | J-Height: ${$.lastFinalizedJHeight||0} | Time: ${_b($.timestamp)}`),Y.push(wM(J,q,X)),!Z.showReservesOnly&&(W>0||G>0||U>0n)){if(Y.push(""),Y.push(" ".repeat(X)+"  HTLC Detail:"),W>0&&$.lockBook){Y.push(" ".repeat(X)+`    Locks (${W}):`);let P=Array.from($.lockBook.values()).sort((H,N)=>Number(N.createdAt)-Number(H.createdAt)).slice(0,Z.maxLocks);for(let H of P){let N=SF0(H,$),C=H.direction==="outgoing"?"":"",L=KT(Number(H.timelock)-oZ());Y.push(" ".repeat(X)+`      ${C} ${z8(H.amount)} | hash=${H.hashlock.slice(0,12)}... | ${N} | ${L}`)}if($.lockBook.size>(Z.maxLocks||10))Y.push(" ".repeat(X)+`      ... and ${$.lockBook.size-(Z.maxLocks||10)} more`)}if(G>0&&$.htlcRoutes){Y.push(" ".repeat(X)+`    Routes (${G}):`);let P=Array.from($.htlcRoutes.entries()).slice(0,5);for(let[H,N]of P){let C=N.inboundEntity?GJ(N.inboundEntity):"origin",L=N.outboundEntity?GJ(N.outboundEntity):"final",B=N.secret?"revealed":"pending";Y.push(" ".repeat(X)+`      ${C}  ${L} | hash=${H.slice(0,12)}... | ${B}`)}}if(U>0n)Y.push(" ".repeat(X)+`    Fees Earned: ${z8(U)} `)}if(!Z.showReservesOnly&&D>0&&$.swapBook){Y.push(""),Y.push(" ".repeat(X)+`  Swap Offers (${D}):`);let P=Array.from($.swapBook.values()).slice(0,Z.maxSwaps);for(let H of P){let N=H.giveTokenId===1?"USDC":"ETH",C=H.wantTokenId===1?"USDC":"ETH";Y.push(" ".repeat(X)+`    ${z8(H.giveAmount)} ${N}  ${z8(H.wantAmount)} ${C} | min=${H.minFillRatio}/65535`)}if($.swapBook.size>(Z.maxSwaps||10))Y.push(" ".repeat(X)+`    ... and ${$.swapBook.size-(Z.maxSwaps||10)} more`)}if(!Z.showReservesOnly&&$.orderbookExt)Y.push(""),Y.push(" ".repeat(X)+"  Orderbook Extension: Active (hub)");if(!Z.showReservesOnly){Y.push("");let P=0;for(let[H,N]of $.accounts){if(Z.maxAccounts&&P>=Z.maxAccounts){Y.push(" ".repeat(X)+`  ... and ${$.accounts.size-P} more accounts`);break}Y.push(UT(N,$.entityId,{...Z,indentSize:X+4})),P++}}return Y.join(`
`)}function UT($,Q,Z){let X={...Sb,...Z},Y=X.indentSize||0,z=[],J=Q===$.leftEntity,q=J?$.rightEntity:$.leftEntity,W=`Account: ${GJ(Q)}  ${GJ(q)}`,G=[`Perspective: ${J?"LEFT":"RIGHT"} (canonical)`,`Frame: ${$.currentHeight} | Mempool: ${$.mempool.length} | Pending: ${$.pendingFrame?`h${$.pendingFrame.height}`:"none"}`];if(z.push(wM(W,G,Y)),$.deltas.size>0){z.push("");for(let[U,D]of $.deltas){if(X.tokenFilter&&!X.tokenFilter.includes(U))continue;let P=U===1?"USDC":"ETH",H=(J?D.leftHtlcHold:D.rightHtlcHold)||0n,N=(J?D.leftSwapHold:D.rightSwapHold)||0n;if(z.push(" ".repeat(Y)+`  Token ${U} (${P}):`),z.push(" ".repeat(Y)+`    offdelta: ${z8(D.offdelta,18,P)} | collateral: ${z8(D.collateral,18,P)}`),H>0n||N>0n)z.push(" ".repeat(Y)+`    Holds: HTLC=${z8(H,18,P)} | Swap=${z8(N,18,P)}`);if(D.ondelta!==0n)z.push(" ".repeat(Y)+`    ondelta: ${z8(D.ondelta,18,P)}`)}}if($.locks&&$.locks.size>0){z.push(""),z.push(" ".repeat(Y)+`  Locks (${$.locks.size}):`);let U=Array.from($.locks.values()).slice(0,X.maxLocks);for(let D of U){let P=KT(Number(D.timelock)-oZ()),H=D.senderIsLeft?"LR":"RL";if(z.push(" ".repeat(Y)+`    Lock: ${D.lockId.slice(0,12)}... | ${z8(D.amount)}`),z.push(" ".repeat(Y)+`      Hash: ${D.hashlock.slice(0,16)}... | ${H} | Expires: ${P}`),D.envelope){let N="Unknown";if(typeof D.envelope==="object")N=D.envelope.finalRecipient?"Final recipient":D.envelope.nextHop?` ${GJ(D.envelope.nextHop)}`:"Unknown";else N=`Encrypted: ${D.envelope.slice(0,20)}...`;z.push(" ".repeat(Y)+`      Envelope: ${N}`)}}if($.locks.size>(X.maxLocks||10))z.push(" ".repeat(Y)+`    ... and ${$.locks.size-(X.maxLocks||10)} more locks`)}if($.swapOffers&&$.swapOffers.size>0){z.push(""),z.push(" ".repeat(Y)+`  Swap Offers (${$.swapOffers.size}):`);let U=Array.from($.swapOffers.values()).slice(0,X.maxSwaps);for(let D of U){let P=D.giveTokenId===1?"USDC":"ETH",H=D.wantTokenId===1?"USDC":"ETH",N=D.makerIsLeft?"(maker=LEFT)":"(maker=RIGHT)";z.push(" ".repeat(Y)+`    Offer: ${D.offerId.slice(0,12)}...`),z.push(" ".repeat(Y)+`      Give: ${z8(D.giveAmount)} ${P} | Want: ${z8(D.wantAmount)} ${H}`),z.push(" ".repeat(Y)+`      MinFill: ${D.minFillRatio}/65535 | ${N}`)}if($.swapOffers.size>(X.maxSwaps||10))z.push(" ".repeat(Y)+`    ... and ${$.swapOffers.size-(X.maxSwaps||10)} more swaps`)}return z.join(`
`)}function fb($,Q,Z=10){let X=[],Y=60,[z,J]=Q.split("/").map(Number),q=z===1?"ETH":z===2?"USDC":`T${z}`,W=J===1?"ETH":J===2?"USDC":`T${J}`,G=`ORDERBOOK: ${q}/${W} (Pair ${Q})`,U=[],D=[];if($?.bids&&typeof $.bids[Symbol.iterator]==="function")for(let[f,x]of $.bids)U.push({price:BigInt(f),amount:BigInt(x)});if($?.asks&&typeof $.asks[Symbol.iterator]==="function")for(let[f,x]of $.asks)D.push({price:BigInt(f),amount:BigInt(x)});U.sort((f,x)=>Number(x.price-f.price)),D.sort((f,x)=>Number(f.price-x.price));let P=[...U,...D].map((f)=>f.amount),H=P.length>0?P.reduce((f,x)=>f>x?f:x):1n,N=[];N.push("ASKS (Sellers):");let C=D.slice(0,Z).reverse();for(let f=0;f<C.length;f++){let x=C[f];if(!x)continue;let g=z8(x.price,18),h=z8(x.amount,18,q),v=C30(x.amount,H,8),b=f===C.length-1?" <- Best Ask":"";N.push(`  ${g.padStart(8)} | ${v} ${h}${b}`)}let L=U[0],B=D[0];if(L&&B){let f=L.price,g=B.price-f,h=f>0n?Number(g*10000n/f)/100:0;N.push(`${"".repeat(58)}`),N.push(`Spread: ${z8(g,18)} (${h.toFixed(2)}%)`),N.push(`${"".repeat(58)}`)}let E=U.slice(0,Z);for(let f=0;f<E.length;f++){let x=E[f];if(!x)continue;let g=z8(x.price,18),h=z8(x.amount,18,q),v=C30(x.amount,H,8),b=f===0?" <- Best Bid":"";N.push(`  ${g.padStart(8)} | ${v} ${h}${b}`)}N.push("BIDS (Buyers):");let I=U.slice(0,Z).reduce((f,x)=>f+x.amount,0n),_=D.slice(0,Z).reduce((f,x)=>f+x.amount,0n);return N.push(`${"".repeat(58)}`),N.push(`Depth: ${Z} levels | Bids: ${z8(I,18)} | Asks: ${z8(_,18)}`),X.push(wM(G,N,0)),X.join(`
`)}function kb($){let Q=$.eReplicas.size,Z=$.jReplicas?.size||0,X=0n,Y=0n,z=0;for(let[,J]of $.eReplicas){for(let[,q]of J.state.reserves)X+=q;for(let[,q]of J.state.accounts){for(let[,W]of q.deltas)Y+=W.collateral;z+=q.locks?.size||0}}return`H=${$.height||0} | E=${Q} J=${Z} | R=${z8(X)} C=${z8(Y)} L=${z}`}function SF0($,Q){let Z=oZ(),X=Q.lastFinalizedJHeight||0;if(Z>Number($.timelock))return"\uD83D\uDD34 Expired";if(Q.htlcRoutes?.get($.hashlock)?.secret)return"\uD83D\uDFE2 Revealed";return"\uD83D\uDFE1 Pending"}function fF0($){if(!$||$.size===0)return"$0";let Q=[];for(let[Z,X]of $){let Y=Number(Z)===1?"USDC":"ETH";Q.push(z8(X,18,Y))}return Q.join(", ")}var Sb,EF0,IF0;var UJ=p(()=>{B8();Sb={maxAccounts:10,maxLocks:10,maxSwaps:10,showMempool:!0,showHistory:!1,useColor:!1,compactMode:!1,indentSize:2},EF0={topLeft:"",topRight:"",bottomLeft:"",bottomRight:"",horizontal:"",vertical:"",verticalRight:"",verticalLeft:""},IF0={topLeft:"",topRight:"",bottomLeft:"",bottomRight:"",horizontal:"",vertical:"",verticalRight:"",verticalLeft:""}});function VJ($,Q,Z,X=!1){let Y=0n,z=0n;console.log(`[SOLVENCY ${Z}] Checking ${$.eReplicas.size} replicas...`);for(let[q,W]of $.eReplicas){let G=0n;for(let[,U]of W.state.reserves)G+=U,Y+=U;console.log(`  [${q.slice(0,20)}] reserves=${G/10n**18n}M`);for(let[U,D]of W.state.accounts)if(K5(W.state.entityId,U))for(let[,P]of D.deltas)z+=P.collateral}let J=Y+z;if(console.log(`[SOLVENCY ${Z}] Total: reserves=${Y/10n**18n}M, collateral=${z/10n**18n}M, sum=${J/10n**18n}M`),J!==Q){if(!X||$.strictScenario)throw console.error(` [${Z}] SOLVENCY FAIL: ${J} !== ${Q}`),Error(`SOLVENCY VIOLATION at "${Z}": got ${J}, expected ${Q}`);console.warn(`  [${Z}] SOLVENCY MISMATCH (optional): ${J} !== ${Q} - continuing`);return}console.log(` [${Z}] Solvency OK`)}var T30=p(()=>{h8()});var bM={};x1(bM,{waitScenario:()=>vb,usd:()=>r1,snap:()=>a1,requireRuntimeSeed:()=>h9,processWithOffline:()=>p2,processUntil:()=>xM,getProcess:()=>m2,getOffdelta:()=>OT,getApplyRuntimeInput:()=>kM,formatUSD:()=>OJ,findReplica:()=>N6,eth:()=>vF0,ensureSignerKeysFromSeed:()=>N9,enableStrictScenario:()=>L8,drainRuntime:()=>yb,dai:()=>gF0,convergeWithOffline:()=>CU,converge:()=>x8,checkSolvency:()=>VJ,btc:()=>yF0,assertRuntimeIdle:()=>$X,assertBilateralSync:()=>xF0,assert:()=>K6,advanceScenarioTime:()=>J9});function h9($,Q){let Z=$.runtimeSeed??null,X=typeof process<"u"&&process.env?process.env.XLN_RUNTIME_SEED||process.env.RUNTIME_SEED||null:null,Y=Z??X;if(Y===null||Y===void 0)throw Error(`${Q}: runtimeSeed missing - unlock vault or set XLN_RUNTIME_SEED`);if($.runtimeSeed===void 0||$.runtimeSeed===null)$.runtimeSeed=Y;return Y}function N9($,Q,Z){let X=h9($,Z);for(let Y of Q){if(gz(Y))continue;let z=j$(X,Y);aQ(Y,z)}}async function vb($,Q){if(Q<=0)return;J9($,Q,!0)}function VT($){return F30[$]>=F30[w30]}function L8($,Q){if($.strictScenario=!0,$.strictScenarioLabel=Q,!$.scenarioLogLevel)$.scenarioLogLevel=$.quietRuntimeLogs?"warn":"info";if(w30=$.scenarioLogLevel,FE(!0),BM===0){EM=console.log,IM=console.info,_M=console.warn,SM=console.debug,fM=console.error;let Z=(X)=>{if(typeof X==="string")return X;if(typeof X==="bigint")return`${X.toString()}n`;try{return JSON.stringify(X)}catch{return String(X)}};console.log=(...X)=>{if(VT("info"))EM?.(...X)},console.info=(...X)=>{if(VT("info"))IM?.(...X)},console.warn=(...X)=>{if(VT("warn"))_M?.(...X)},console.debug=(...X)=>{if(VT("debug"))SM?.(...X)},console.error=(...X)=>{throw fM?.(...X),Error(`[${Q}] console.error: ${X.map(Z).join(" ")}`)}}return BM+=1,()=>{if(BM=Math.max(0,BM-1),BM===0){if($.strictScenario=!1,delete $.strictScenarioLabel,EM)console.log=EM,EM=null;if(IM)console.info=IM,IM=null;if(_M)console.warn=_M,_M=null;if(SM)console.debug=SM,SM=null;if(fM)console.error=fM,fM=null;FE(!1)}}}function N6($,Q){let Z=Array.from($.eReplicas.entries()).find(([X])=>X.startsWith(Q+":"));if(!Z)throw Error(`Replica for entity ${Q} not found`);return Z}function OT($,Q,Z,X){let[,Y]=N6($,Q);return Y.state.accounts.get(Z)?.deltas.get(X)?.offdelta||0n}function A30($,Q){if(Q.size===0)return{filtered:$,dropped:[]};let Z=[],X=[];for(let Y of $)if(Q.has(Y.signerId))X.push(Y);else Z.push(Y);return{filtered:Z,dropped:X}}async function p2($,Q,Z,X="offline"){let Y=await m2();if(Z.size===0)return Y($,Q);let z=$.pendingOutputs||[],{filtered:J,dropped:q}=A30(z,Z);if(q.length>0)$.info("network","OFFLINE_SIGNER_DROP",{reason:X,source:"pendingOutputs",signers:Array.from(new Set(q.map((U)=>U.signerId))),count:q.length,entities:Array.from(new Set(q.map((U)=>U.entityId)))});$.pendingOutputs=J;let{filtered:W,dropped:G}=A30(Q||[],Z);if(G.length>0)$.info("network","OFFLINE_SIGNER_DROP",{reason:X,source:"inputs",signers:Array.from(new Set(G.map((U)=>U.signerId))),count:G.length,entities:Array.from(new Set(G.map((U)=>U.entityId)))});return Y($,W)}async function x8($,Q=10){let Z=await m2();for(let X=0;X<Q;X++){await Z($),J9($);let Y=!1,z=$.pendingOutputs?.length||0,J=$.pendingNetworkOutputs?.length||0,q=$.networkInbox?.length||0,W=$.runtimeInput?.entityInputs?.length||0;if(z>0||J>0||q>0||W>0)Y=!0;for(let[,G]of $.eReplicas){if(G.mempool.length>0||G.proposal||G.lockedFrame){Y=!0;break}for(let[,U]of G.state.accounts)if(U.mempool.length>0||U.pendingFrame||U.sentTransitions>U.ackedTransitions){Y=!0;break}if(Y)break}if(!Y)return}}async function xM($,Q,Z=10,X="condition",Y,z){let J=await m2();for(let q=0;q<Z;q++){if(Q())return;if(await J($),Y?.(q+1),J9($,void 0,!0),await new Promise((W)=>setTimeout(W,10)),Q())return}if(!Q())throw z?.(),Error(`processUntil: ${X} not satisfied after ${Z} rounds`)}async function CU($,Q,Z=10,X="offline"){for(let Y=0;Y<Z;Y++){await p2($,void 0,Q,X),J9($);let z=!1,J=$.pendingOutputs?.length||0,q=$.pendingNetworkOutputs?.length||0,W=$.networkInbox?.length||0,G=$.runtimeInput?.entityInputs?.length||0;if(J>0||q>0||W>0||G>0)z=!0;for(let[,U]of $.eReplicas){if(U.mempool.length>0||U.proposal||U.lockedFrame){z=!0;break}for(let[,D]of U.state.accounts)if(D.mempool.length>0||D.pendingFrame||D.sentTransitions>D.ackedTransitions){z=!0;break}if(z)break}if(!z)return}}function K6($,Q,Z){if(!$){if(Z)console.log(`
`+"=".repeat(80)),console.log("ASSERTION FAILED - FULL RUNTIME STATE:"),console.log("=".repeat(80)),console.log(h2(Z,{maxAccounts:5,maxLocks:20,maxSwaps:20})),console.log("=".repeat(80)+`
`);throw Error(`ASSERTION FAILED: ${Q}`)}console.log(`[OK] ${Q}`)}function xF0($,Q,Z,X,Y){console.log(`
[BILATERAL-SYNC ${Y}] Checking ${Q.slice(-4)}${Z.slice(-4)} for token ${X}...`);let[,z]=N6($,Q),[,J]=N6($,Z),q=z?.state?.accounts?.get(Z),W=J?.state?.accounts?.get(Q);if(!q||!W)throw Error(`BILATERAL-SYNC FAIL: Missing account at ${Y}`);let G=q.deltas?.get(X),U=W.deltas?.get(X);if(!G||!U)throw Error(`BILATERAL-SYNC FAIL: Missing delta at ${Y}`);let D=["collateral","ondelta","offdelta","leftCreditLimit","rightCreditLimit","leftAllowance","rightAllowance"],P=[];for(let H of D){let N=G[H],C=U[H];if(N!==C){let L=`${H}: ${Q.slice(-4)} has ${N}, ${Z.slice(-4)} has ${C}`;console.error(` ${L}`),P.push(L)}}if(P.length>0)throw Error(`BILATERAL-SYNC VIOLATION at "${Y}":
${P.join(`
`)}`);console.log(` [${Y}] Bilateral sync OK: ${Q.slice(-4)}${Z.slice(-4)} token ${X} - all 7 fields match
`)}async function yb($,Q=20){let Z=await m2(),X=0;while(X<Q){let Y=$.pendingOutputs?.length||0,z=$.runtimeInput?.entityInputs?.length||0,J=$.networkInbox?.length||0,q=$.pendingNetworkOutputs?.length||0;if(Y+z+J+q===0)break;$=await Z($),X++}return $}function $X($,Q="runtime"){let Z=[],X=$.pendingOutputs?.length||0,Y=$.runtimeInput?.entityInputs?.length||0,z=$.networkInbox?.length||0,J=$.pendingNetworkOutputs?.length||0;if(X>0)Z.push(`pendingOutputs=${X}`);if(Y>0)Z.push(`runtimeInput.entityInputs=${Y}`);if(z>0)Z.push(`networkInbox=${z}`);if(J>0)Z.push(`pendingNetworkOutputs=${J}`);for(let q of $.jReplicas?.values()||[])if(q.mempool.length>0)Z.push(`jReplica:${q.name} mempool=${q.mempool.length}`);for(let[q,W]of $.eReplicas.entries())for(let[G,U]of W.state.accounts.entries()){if(U.pendingFrame)Z.push(`pendingFrame ${q}${G.slice(-4)}`);if(U.mempool.length>0)Z.push(`accountMempool ${q}${G.slice(-4)}=${U.mempool.length}`);if(U.sentTransitions>U.ackedTransitions)Z.push(`unackedTransitions ${q}${G.slice(-4)}=${U.sentTransitions-U.ackedTransitions}`)}if(Z.length>0)throw Error(`RUNTIME NOT IDLE (${Q}): ${Z.join("; ")}`)}function a1($,Q,Z={}){$.extra={subtitle:{title:Q,...Z.what?{what:Z.what}:{},...Z.why?{why:Z.why}:{},...Z.tradfiParallel?{tradfiParallel:Z.tradfiParallel}:{},...Z.keyMetrics?{keyMetrics:Z.keyMetrics}:{}},...Z.expectedSolvency!==void 0?{expectedSolvency:Z.expectedSolvency}:{},...Z.description?{description:Z.description}:{}}}var xb=null,bb=null,m2=async()=>{if(!xb)xb=(await Promise.resolve().then(() => (l5(),a5))).process;return xb},kM=async()=>{if(!bb)bb=(await Promise.resolve().then(() => (l5(),a5))).applyRuntimeInput;return bb},F30,BM=0,w30="info",EM=null,IM=null,_M=null,SM=null,fM=null,kF0=($)=>{if(!$.jReplicas||$.jReplicas.size===0)return 1;let Q=0;for(let Z of $.jReplicas.values()){let X=typeof Z.blockDelayMs==="number"?Z.blockDelayMs:0;if(X>Q)Q=X}return Math.max(1,Q)},J9=($,Q,Z=!1)=>{if(!Z&&!$.scenarioMode)return;let X=Math.max(1,Q??kF0($));$.timestamp=($.timestamp||0)+X},bF0=18n,oq,r1=($)=>BigInt($)*oq,vF0=($)=>BigInt($)*oq,yF0=($)=>BigInt($)*oq,gF0=($)=>BigInt($)*oq,OJ=($)=>{let Q=$/oq,Z=$%oq*100n/oq;return`$${Q.toLocaleString()}.${Z.toString().padStart(2,"0")}`};var u2=p(()=>{UJ();hz();H8();T30();F30={debug:0,info:1,warn:2,error:3};oq=10n**bF0});async function E30($,Q,Z={}){let{maxTimestamp:X=1000,tickInterval:Y=1000}=Z,z=WT(Q,X),J={scenario:Q,currentFrameIndex:0,totalFrames:0,elapsedTime:0,entityMapping:new Map,viewStateHistory:new Map,tickInterval:Y},q=[];console.log(`\uD83C\uDFAC SCENARIO: Starting execution with seed="${Q.seed}"`),console.log(`\uD83D\uDCCB SCENARIO: ${z.length} events to execute`);let W=new Map;for(let U of z){if(!W.has(U.timestamp))W.set(U.timestamp,[]);W.get(U.timestamp).push(U)}let G=Array.from(W.keys()).sort((U,D)=>U-D);for(let U of G){let D=W.get(U);console.log(`
  t=${U}s: ${D.length} event(s)`);for(let P of D){if(P.title)console.log(`  \uD83D\uDCCC ${P.title}`);if(P.description)console.log(`     ${P.description}`);try{await hF0($,P,J)}catch(H){console.error(` Error executing event at t=${U}:`,H),q.push({timestamp:U,event:P,error:H.message})}}J.elapsedTime=U,J.totalFrames++}return{success:q.length===0,framesGenerated:J.totalFrames,finalTimestamp:J.elapsedTime,errors:q,context:J}}async function hF0($,Q,Z){for(let X of Q.actions)await mF0($,X,Z);if($.history&&$.history.length>0){let X=$.history[$.history.length-1];if(X){if(Q.title)X.title=Q.title;if(Q.description)X.narrative=Q.description}}if(Q.viewState)tF0($,Q.viewState,Z)}async function mF0($,Q,Z){let{type:X,entityId:Y,params:z}=Q;switch(X){case"import":await pF0(z,Z,$);break;case"grid":await uF0(z,Z,$);break;case"payRandom":await dF0(z,Z,$);break;case"r2r":await lF0(z,Z,$);break;case"fund":await iF0(z,Z,$);break;case"openAccount":await oF0(Y,z,Z,$);break;case"deposit":await nF0(Y,z,Z);break;case"withdraw":await rF0(Y,z,Z);break;case"transfer":await aF0(Y,z,Z);break;case"chat":await sF0(Y,z,Z);break;case"VIEW":break;default:throw Error(` SCENARIO ERROR: Unknown action type "${X}" - check scenario syntax`)}}async function pF0($,Q,Z){let X=await QQ();if(!X||X.length===0)throw Error("No jurisdictions available");let Y=X.find((H)=>H.name.toLowerCase()==="arrakis");if(!Y)throw Error("Arrakis jurisdiction not found");let{getNextEntityNumber:z}=await Promise.resolve().then(() => (A2(),$Z)),J=await z(Y);console.log(`  \uD83D\uDD22 Current max entity number: ${J-1}, next will be: ${J}`);let q=[],W=null;for(let H of $)if(typeof H==="object"&&!Array.isArray(H))W=H;else q.push(String(H));let G=[],U=new Map;for(let H=0;H<q.length;H++){let N=q[H];if(!N)continue;let C=J+H;U.set(N,C)}let D=q.filter((H)=>H&&!Q.entityMapping.has(H));if(D.length===0){console.log("    All entities already imported");return}let P;if(D.length>=10){console.log(`  \uD83D\uDE80 Batch registering ${D.length} entities in ONE transaction...`);let{createNumberedEntitiesBatch:H}=await Promise.resolve().then(() => (tY(),EL));P=await H(D.map((N)=>{let C=String(N);return{name:`Entity-${N}`,validators:[C],threshold:1n}}),Y),console.log(`   Batch registered ${P.length} entities in single block!`)}else{console.log(`  \uD83D\uDE80 Registering ${D.length} entities (parallel)...`);let H=D.map((N)=>{let C=String(N);return tD(`Entity-${N}`,[C],1n,Y)});P=await Promise.all(H),console.log(`   All ${P.length} entities registered`)}for(let H=0;H<P.length;H++){let N=P[H],C=D[H];if(!N||!C)continue;if(Q.entityMapping.set(C,N.entityId),console.log(`   import scenario=${C}  entity#${N.entityNumber} (${N.entityId.slice(0,10)}...)`),W&&(("x"in W)||("y"in W)||("z"in W))){let L={x:parseFloat(W.x||"0"),y:parseFloat(W.y||"0"),z:parseFloat(W.z||"0")};Z.gossip?.announce({entityId:N.entityId,capabilities:[],hubs:[],metadata:{name:`Entity-${C}`,avatar:"",position:L}}),console.log(`  \uD83D\uDCCD Positioned at (${L.x}, ${L.y}, ${L.z})`)}G.push({type:"importReplica",entityId:N.entityId,signerId:String(C),data:{config:N.config,isProposer:!0}})}if(G.length>0){let{applyRuntimeInput:H}=await Promise.resolve().then(() => (l5(),a5));await H(Z,{runtimeTxs:G,entityInputs:[]}),console.log(`  \uD83D\uDCE6 Added ${G.length} entities to existing runtime state`),console.log(`  \uD83C\uDF10 Total entities now: ${Z.eReplicas.size}`)}}async function uF0($,Q,Z){let X=j30($),Y=Bb($),z=40,J=X[0]!==void 0?parseInt(String(X[0])):2,q=J,W=X[1]!==void 0?parseInt(String(X[1])):J,G=X[2]!==void 0?parseInt(String(X[2])):J,U=parseFloat(String(Y.spacing||40)),D=String(Y.type||"").toLowerCase()==="lazy",P=q*W*G;if(P>1000)throw Error(`Grid too large: ${q}x${W}x${G} = ${P} entities (max 1000)`);if(D)return cF0(q,W,G,U,Q,Z);let N=(await QQ()).find((b)=>b.name.toLowerCase()==="arrakis");if(!N)throw Error("Arrakis jurisdiction not found");let C=(b,m,K)=>`${b}_${m}_${K}`,L=0;for(let b of Q.entityMapping.keys()){if(!b.includes("_"))continue;let m=b.split("_");if(m.length===3){let K=Math.max(parseInt(m[0]||"0"),parseInt(m[1]||"0"),parseInt(m[2]||"0"));L=Math.max(L,K+1)}}if(L>0)console.log(`  \uD83D\uDCE6 Existing grid: ${L}x${L}x${L}, growing to ${q}x${q}x${q}`);else console.log(`  \uD83C\uDFB2 Creating ${q}x${W}x${G} grid (${P} entities, ${U}px spacing)`);let B=[],E=new Map;for(let b=0;b<G;b++)for(let m=0;m<W;m++)for(let K=0;K<q;K++){let M=C(K,m,b);if(K<L&&m<L&&b<L)continue;B.push({name:`Grid-${M}`,validators:[`g${M}`],threshold:1n});let j={x:K*U,y:m*U,z:b*U};E.set(M,j),console.log(`\uD83D\uDCCD GRID-POS-A: Entity ${M} generated at (${j.x}, ${j.y}, ${j.z})`)}if(B.length===0){console.log(`   Grid ${q}x${q}x${q} already complete, no new entities needed`);return}console.log(`   Creating ${B.length} new entities (shell growth)`);let{createNumberedEntitiesBatch:I}=await Promise.resolve().then(() => (tY(),EL)),_=await I(B,N),f=[];_.forEach((b,m)=>{let K=B[m];if(!K)return;let M=K.name.replace("Grid-","");Q.entityMapping.set(M,b.entityId);let j=E.get(M);if(j)Z.gossip?.announce({entityId:b.entityId,capabilities:[],hubs:[],metadata:{name:K.name,avatar:"",position:j}});let O={config:b.config,isProposer:!0};if(j)O.position=j,console.log(`\uD83D\uDCCD GRID-POS-B: RuntimeTx for ${b.entityId.slice(0,10)} has position:`,j);f.push({type:"importReplica",entityId:b.entityId,signerId:K.validators[0],data:O})});let{applyRuntimeInput:x}=await Promise.resolve().then(() => (l5(),a5));await x(Z,{runtimeTxs:f,entityInputs:[]}),console.log(`   Created ${_.length} entities in grid formation`);let{process:g}=await Promise.resolve().then(() => (l5(),a5)),h=[],v=(b,m)=>{for(let K of Z.eReplicas.values())if(K.entityId===b&&K.state?.accounts?.has(m))return!0;return!1};for(let b=0;b<G;b++)for(let m=0;m<W;m++)for(let K=0;K<q-1;K++){let M=C(K,m,b),j=C(K+1,m,b),O=Q.entityMapping.get(M),R=Q.entityMapping.get(j);if(O&&R&&!v(O,R))h.push({entityId:O,signerId:`g${M}`,entityTxs:[{type:"openAccount",data:{targetEntityId:R}}]})}for(let b=0;b<G;b++)for(let m=0;m<W-1;m++)for(let K=0;K<q;K++){let M=C(K,m,b),j=C(K,m+1,b),O=Q.entityMapping.get(M),R=Q.entityMapping.get(j);if(O&&R&&!v(O,R))h.push({entityId:O,signerId:`g${M}`,entityTxs:[{type:"openAccount",data:{targetEntityId:R}}]})}for(let b=0;b<G-1;b++)for(let m=0;m<W;m++)for(let K=0;K<q;K++){let M=C(K,m,b),j=C(K,m,b+1),O=Q.entityMapping.get(M),R=Q.entityMapping.get(j);if(O&&R&&!v(O,R))h.push({entityId:O,signerId:`g${M}`,entityTxs:[{type:"openAccount",data:{targetEntityId:R}}]})}if(console.log(`  \uD83D\uDD17 Creating ${h.length} new grid connections...`),h.length>0)await g(Z,h);console.log(`   Grid complete: ${P} total entities, ${h.length} new connections`)}async function cF0($,Q,Z,X,Y,z){let{cryptoHash:J}=await Promise.resolve().then(() => (B8(),N20)),q=$*Q*Z;console.log(`   LAZY MODE: Creating ${q} in-browser entities (no blockchain)`);let W=[];for(let H=0;H<Z;H++)for(let N=0;N<Q;N++)for(let C=0;C<$;C++){let L=`${C}_${N}_${H}`,B=await J(`lazy-grid-${L}`),E=`lazy_${L}`;Y.entityMapping.set(L,B);let I={x:C*X,y:N*X,z:H*X};z.gossip?.announce({entityId:B,capabilities:[],hubs:[],metadata:{name:L.slice(0,4),avatar:"",position:I}}),W.push({type:"importReplica",entityId:B,signerId:E,data:{config:{validators:[E],threshold:1n,mode:"proposer-based"},isProposer:!0,position:I}})}let{applyRuntimeInput:G}=await Promise.resolve().then(() => (l5(),a5));await G(z,{runtimeTxs:W,entityInputs:[]}),console.log(`   LAZY: Created ${q} in-browser entities`);let{process:U}=await Promise.resolve().then(() => (l5(),a5)),D=[],P=(H,N,C)=>`${H}_${N}_${C}`;for(let H=0;H<Z;H++)for(let N=0;N<Q;N++)for(let C=0;C<$-1;C++){let L=P(C,N,H),B=P(C+1,N,H),E=Y.entityMapping.get(L),I=Y.entityMapping.get(B);if(E&&I)D.push({entityId:E,signerId:`lazy_${L}`,entityTxs:[{type:"openAccount",data:{targetEntityId:I}}]}),D.push({entityId:I,signerId:`lazy_${B}`,entityTxs:[{type:"openAccount",data:{targetEntityId:E}}]})}for(let H=0;H<Z;H++)for(let N=0;N<Q-1;N++)for(let C=0;C<$;C++){let L=P(C,N,H),B=P(C,N+1,H),E=Y.entityMapping.get(L),I=Y.entityMapping.get(B);if(E&&I)D.push({entityId:E,signerId:`lazy_${L}`,entityTxs:[{type:"openAccount",data:{targetEntityId:I}}]}),D.push({entityId:I,signerId:`lazy_${B}`,entityTxs:[{type:"openAccount",data:{targetEntityId:E}}]})}for(let H=0;H<Z-1;H++)for(let N=0;N<Q;N++)for(let C=0;C<$;C++){let L=P(C,N,H),B=P(C,N,H+1),E=Y.entityMapping.get(L),I=Y.entityMapping.get(B);if(E&&I)D.push({entityId:E,signerId:`lazy_${L}`,entityTxs:[{type:"openAccount",data:{targetEntityId:I}}]}),D.push({entityId:I,signerId:`lazy_${B}`,entityTxs:[{type:"openAccount",data:{targetEntityId:E}}]})}console.log(`  \uD83D\uDD17 Creating ${D.length} lazy connections...`),await U(z,D),console.log(`   LAZY grid complete: ${q} entities, ${D.length} connections`)}async function dF0($,Q,Z){let X=Bb($),Y=parseInt(String(X.count||"1")),z=parseInt(String(X.minHops||"0")),J=parseInt(String(X.maxHops||"99")),q=BigInt(X.minAmount||"1000"),W=BigInt(X.maxAmount||"100000"),G=parseInt(String(X.token||"1"));console.log(`  \uD83C\uDFB2 Executing ${Y} random payments (${z}-${J} hops, ${q}-${W} amount)`);let U=Array.from(Z.eReplicas.keys()).map((P)=>P.split(":")[0]).filter((P,H,N)=>N.indexOf(P)===H);if(U.length<2){console.warn(`    Need at least 2 entities for random payments (found ${U.length})`);return}console.log(`  \uD83D\uDCB8 Found ${U.length} entities in network`);let{process:D}=await Promise.resolve().then(() => (l5(),a5));for(let P=0;P<Y;P++){let H=B30;B30+=1;let N=H%U.length,C=(H+1)%U.length,L=U[N],B=U[C];if(!L||!B)continue;let E=Array.from(Z.eReplicas.keys()).find((h)=>h.startsWith(L+":")),I=E?Z.eReplicas.get(E):null;if(!I){console.warn(`    No replica found for ${L.slice(0,10)}`);continue}let _=I.signerId,f=W-q,x=f>0n?BigInt(H)%f:0n,g=q+x;if(console.log(`  \uD83D\uDCB8 Payment ${P+1}/${Y}: ${L.slice(0,8)}  ${B.slice(0,8)} (${g} tokens)`),await D(Z,[{entityId:L,signerId:_,entityTxs:[{type:"directPayment",data:{targetEntityId:B,tokenId:G,amount:g,route:[],description:`Random payment #${P+1}`}}]}]),P<Y-1&&Q.tickInterval>0)await vb(Z,Q.tickInterval)}console.log(`   ${Y} random payments complete`)}async function lF0($,Q,Z){let X=String($[0]),Y=String($[1]),z=BigInt($[2]||"0"),J=Q.entityMapping.get(X),q=Q.entityMapping.get(Y);if(!J||!q)throw Error(`R2R: Entity mapping not found for ${X} or ${Y}`);let G=Array.from(Z.eReplicas.keys()).find((P)=>P.startsWith(J+":")),U=G?Z.eReplicas.get(G):null;if(!U)throw Error(`R2R: No replica found for entity ${J.slice(0,10)}`);console.log(`  \uD83D\uDCB8 R2R: ${X}  ${Y} (${z} tokens)`);let{process:D}=await Promise.resolve().then(() => (l5(),a5));await D(Z,[{entityId:J,signerId:U.signerId,entityTxs:[{type:"payFromReserve",data:{targetEntityId:q,tokenId:0,amount:z}}]}]),console.log(`   R2R complete: ${X}  ${Y}`)}async function iF0($,Q,Z){let X=String($[0]),Y=BigInt($[1]||"0"),z=Q.entityMapping.get(X);if(!z)throw Error(`Fund: Entity mapping not found for ${X}`);let q=Array.from(Z.eReplicas.keys()).find((U)=>U.startsWith(z+":")),W=q?Z.eReplicas.get(q):null;if(!W)throw Error(`Fund: No replica found for entity ${z.slice(0,10)}`);console.log(`  \uD83D\uDCB8 Fund: ${X} receives ${Y} tokens`);let{process:G}=await Promise.resolve().then(() => (l5(),a5));await G(Z,[{entityId:z,signerId:W.signerId,entityTxs:[{type:"payToReserve",data:{tokenId:0,amount:Y}}]}]),console.log(`   Fund complete: ${X} +${Y}`)}async function oF0($,Q,Z,X){let Y=String(Q[0]),z=Z.entityMapping.get($),J=Z.entityMapping.get(Y);if(!z||!J)throw Error(`Entity mapping not found: ${$}${z}, ${Y}${J}`);console.log(`  \uD83D\uDD17 ${$} openAccount ${Y}`);let{process:q}=await Promise.resolve().then(() => (l5(),a5));await q(X,[{entityId:z,signerId:String($),entityTxs:[{type:"openAccount",data:{targetEntityId:J}}]}])}async function nF0($,Q,Z){let X=String(Q[0]),Y=BigInt(Q[1]),z=Z.entityMapping.get($),J=Z.entityMapping.get(X);if(!z||!J)throw Error(`Entity mapping not found: ${$}, ${X}`);console.log(`  \uD83D\uDCB0 ${$} deposit ${X} ${Y}`)}async function rF0($,Q,Z){let X=String(Q[0]),Y=BigInt(Q[1]),z=Z.entityMapping.get($),J=Z.entityMapping.get(X);if(!z||!J)throw Error(`Entity mapping not found: ${$}, ${X}`);console.log(`  \uD83D\uDCB8 ${$} withdraw ${X} ${Y}`)}async function aF0($,Q,Z){let X=String(Q[0]),Y=BigInt(Q[1]),z=Z.entityMapping.get($),J=Z.entityMapping.get(X);if(!z||!J)throw Error(`Entity mapping not found: ${$}, ${X}`);console.log(`  \uD83D\uDD04 ${$} transfer ${X} ${Y}`)}async function sF0($,Q,Z){let X=String(Q[0]);if(!Z.entityMapping.get($))throw Error(`Entity mapping not found: ${$}`);console.log(`  \uD83D\uDCAC ${$}: "${X}"`)}function tF0($,Q,Z){if(Z.viewStateHistory.set(Z.currentFrameIndex,Q),$.history&&$.history.length>0){let X=$.history[$.history.length-1];if(X){let Y={...Q};if(Q.focus&&Z.entityMapping.has(Q.focus)){let z=Z.entityMapping.get(Q.focus);if(z)Y.focus=z}X.viewState=Y,console.log(`  \uD83C\uDFA5 VIEW: ${h1(Y)}`)}}}var B30=0;var I30=p(()=>{Ib();tY();A2();u2()});var ib={};x1(ib,{ahb:()=>XA0});function P1($,Q){let Z=Array.from($.eReplicas.entries()).find(([X])=>X.startsWith(Q+":"));if(!Z)throw Error(`AHB: Replica for entity ${Q} not found`);return Z}function I5($,Q,Z){if(!$){if(Z)console.log(`
`+"=".repeat(80)),console.log("ASSERTION FAILED - FULL RUNTIME STATE:"),console.log("=".repeat(80)),console.log(h2(Z,{maxAccounts:5,maxLocks:20})),console.log("=".repeat(80)+`
`);throw Error(`ASSERT: ${Q}`)}}async function l8($){let Q=await DT(),Z=$.runtimeInput?.entityInputs||[];if(!$.quietRuntimeLogs)console.log(`\uD83D\uDD04 processJEvents CALLED: ${Z.length} pending in queue`);if(Z.length>0){if(!$.quietRuntimeLogs)console.log(`   routing ${Z.length} to entities...`);let X=[...Z];if($.runtimeInput.entityInputs=[],await Q($,X),!$.quietRuntimeLogs)console.log(`    ${X.length} j-events processed`)}else if(!$.quietRuntimeLogs)console.log("    EMPTY queue - no j-events to process")}async function c2($,Q,Z=10,X="condition"){let Y=await DT();for(let z=0;z<Z;z++){if(Q())return;await Y($),J9($)}if(!Q())throw Error(`processUntil: ${X} not satisfied after ${Z} rounds`)}function d2($,Q,Z,X){let Y=E5(Q,Z)?Q:Z,z=E5(Q,Z)?Z:Q,[,J]=P1($,Y),q=J.state.accounts.get(z);if(!q)return 0n;let W=q.deltas.get(X);if(!W)return 0n;return W.offdelta}function LU($,Q,Z,X,Y){let[,z]=P1($,Q),[,J]=P1($,Z),q=z?.state?.accounts?.get(Z),W=J?.state?.accounts?.get(Q);if(console.log(`
[BILATERAL-SYNC ${Y}] Checking ${Q.slice(-4)}${Z.slice(-4)} for token ${X}...`),!q)throw console.error(` Entity ${Q.slice(-4)} has NO account with counterparty ${Z.slice(-4)}`),Error(`BILATERAL-SYNC FAIL at "${Y}": Entity ${Q.slice(-4)} missing account`);if(!W)throw console.error(` Entity ${Z.slice(-4)} has NO account with counterparty ${Q.slice(-4)}`),Error(`BILATERAL-SYNC FAIL at "${Y}": Entity ${Z.slice(-4)} missing account`);let G=q.deltas?.get(X),U=W.deltas?.get(X);if(!G)throw console.error(` Entity ${Q.slice(-4)} account has NO delta for token ${X}`),Error(`BILATERAL-SYNC FAIL at "${Y}": Entity ${Q.slice(-4)} missing delta for token ${X}`);if(!U)throw console.error(` Entity ${Z.slice(-4)} account has NO delta for token ${X}`),Error(`BILATERAL-SYNC FAIL at "${Y}": Entity ${Z.slice(-4)} missing delta for token ${X}`);let D=["collateral","ondelta","offdelta","leftCreditLimit","rightCreditLimit","leftAllowance","rightAllowance"],P=[];for(let H of D){let N=G[H],C=U[H];if(N!==C){let L=`  ${H}: ${Q.slice(-4)} has ${N}, ${Z.slice(-4)} has ${C}`;console.error(` ${L}`),P.push(L)}}if(P.length>0)throw console.error(`
 BILATERAL-SYNC FAILED at "${Y}":`),console.error(`   Account: ${Q.slice(-4)}${Z.slice(-4)}, token ${X}`),console.error(`   Mismatched fields:
${P.join(`
`)}`),console.error(`
   Full deltaFromA (${Q.slice(-4)} view):`,G),console.error(`   Full deltaFromB (${Z.slice(-4)} view):`,U),Error(`BILATERAL-SYNC VIOLATION: ${P.length} field(s) differ between ${Q.slice(-4)} and ${Z.slice(-4)}`);console.log(` [${Y}] Bilateral sync OK: ${Q.slice(-4)}${Z.slice(-4)} token ${X} - all ${D.length} fields match`)}async function XA0($){if($.quietRuntimeLogs===void 0)$.quietRuntimeLogs=!0;if(_30)$.quietRuntimeLogs=!1,$.scenarioLogLevel="info";let Q=L8($,"AHB"),{lockRuntimeSeedUpdates:Z,getCachedSignerPrivateKey:X}=await Promise.resolve().then(() => (H8(),R$));h9($,"AHB"),N9($,["1","2","3","4"],"AHB"),Z(!0);let Y=[{label:"alice",signerId:"1"},{label:"hub",signerId:"2"},{label:"bob",signerId:"3"}].map((G)=>{let U=X(G.signerId);if(!U)throw Error(`AHB: Missing private key for signer ${G.signerId}`);return{label:G.label,wallet:new M0.Wallet(M0.hexlify(U))}}).sort((G,U)=>G.wallet.address.toLowerCase().localeCompare(U.wallet.address.toLowerCase())),[z,J,q]=Y;console.log(`[AHB] Wallet ordering: Alice=${z?.label}, Hub=${J?.label}, Bob=${q?.label}`),cb.clear();let W=await DT();$.scenarioMode=!0,$.lockRuntimeSeed=!0;try{if($.jReplicas&&$.jReplicas.size>0)console.log(`[AHB] Clearing ${$.jReplicas.size} old jurisdictions from previous scenario`),$.jReplicas.clear();if($.eReplicas&&$.eReplicas.size>0)console.log(`[AHB] Clearing ${$.eReplicas.size} old entities from previous scenario`),$.eReplicas.clear();if($.history&&$.history.length>0)console.log(`[AHB] Clearing ${$.history.length} old snapshots from previous scenario`),$.history=[];if($.height=0,$.runtimeInput)$.runtimeInput.runtimeTxs=[],$.runtimeInput.entityInputs=[];else $.runtimeInput={runtimeTxs:[],entityInputs:[]};if($.pendingOutputs=[],$.pendingNetworkOutputs=[],$.frameLogs=[],$.gossip=g2(),$.activeJurisdiction=void 0,$.scenarioMode)$.timestamp=1;console.log("[AHB] ========================================"),console.log("[AHB] Starting Alice-Hub-Bob Demo (REAL BrowserVM transactions)"),console.log("[AHB] BEFORE: eReplicas =",$.eReplicas.size,"history =",$.history?.length||0),console.log("[AHB] ========================================"),console.log("[AHB] env.browserVM exists?",!!$.browserVM,"type:",typeof $.browserVM);let G=e4($);if(!G){console.log("[AHB] No BrowserVM found (getBrowserVMInstance returned null) - creating one..."),G=new Y2,await G.init(),$.browserVM=G;let t0=G.getDepositoryAddress();s7($,t0,G),console.log("[AHB]  BrowserVM created, depository:",t0)}else console.log("[AHB]  BrowserVM instance available");if(G.reset)console.log("[AHB] Calling browserVM.reset()..."),await G.reset(),console.log("[AHB]  BrowserVM reset complete");let D=(await QQ()).find((t0)=>t0.name.toLowerCase()==="arrakis");if(!D)console.log("[AHB] No jurisdiction found - using BrowserVM jurisdiction"),D={name:"AHB Demo",chainId:31337,entityProviderAddress:G.getEntityProviderAddress(),depositoryAddress:G.getDepositoryAddress(),rpc:"browservm://"};if(console.log(`\uD83D\uDCCB Jurisdiction: ${D.name}`),console.log(`
\uD83C\uDFDB Creating AHB Xlnomy (J-Machine at center)...`),!$.jReplicas)$.jReplicas=new Map;let P={name:"AHB Demo",blockNumber:0n,stateRoot:new Uint8Array(32),mempool:[],blockDelayMs:100,lastBlockTimestamp:$.timestamp,position:{x:0,y:600,z:0},contracts:{depository:D.depositoryAddress,entityProvider:D.entityProviderAddress}};$.jReplicas.set("AHB Demo",P),$.activeJurisdiction="AHB Demo",console.log(" AHB Xlnomy created (J-Machine visible in 3D)");let H=a6(1e7),N=a6(1e7),C=a6(1e6),L=null;a1($,"Jurisdiction Machine Deployed",{description:"Frame 0: Clean Slate - J-Machine Ready",what:"The J-Machine (Jurisdiction Machine) is deployed on-chain. It represents the EVM smart contracts (Depository.sol, EntityProvider.sol) that will process settlements.",why:"Before any entities exist, the jurisdiction infrastructure must be in place. Think of this as deploying the central bank's core settlement system.",tradfiParallel:"Like the Federal Reserve deploying its Fedwire Funds Service before any banks can participate.",keyMetrics:["J-Machine: Deployed at origin","Entities: 0 (none created yet)","Reserves: Empty"],expectedSolvency:0n}),await W($),console.log(`
\uD83D\uDCE6 Creating entities: Alice, Hub, Bob...`);let B={Alice:{x:-40,y:-30,z:0},Hub:{x:0,y:-30,z:0},Bob:{x:40,y:-30,z:0}},E=["Alice","Hub","Bob"],I=[],_=[],{encodeBoard:f,hashBoard:x}=await Promise.resolve().then(() => (tY(),EL));for(let t0=0;t0<3;t0++){let n1=E[t0],e1=String(t0+1),Y5=B[n1],i5={mode:"proposer-based",threshold:1n,validators:[e1],shares:{[e1]:1n},jurisdiction:D},f5=f(i5),L6=x(f5),v6=L6;I.push({id:v6,signer:e1,name:n1,boardHash:L6}),cb.set(v6,n1),_.push({type:"importReplica",entityId:v6,signerId:e1,data:{isProposer:!0,position:Y5,config:{mode:"proposer-based",threshold:1n,validators:[e1],shares:{[e1]:1n},jurisdiction:D}}}),console.log(`${n1}: Entity ${v6.slice(0,10)}... @ (${Y5.x}, ${Y5.y}, ${Y5.z})`)}let g=await eF0();await g($,{runtimeTxs:_,entityInputs:[]});let[h,v,b]=I;if(!h||!v||!b)throw Error("Failed to create all entities");let m=null,K={Alice:h.id,Hub:v.id,Bob:b.id},{getCachedSignerPublicKey:M,registerSignerPublicKey:j,getCachedSignerPrivateKey:O}=await Promise.resolve().then(() => (H8(),R$)),R=new Map,F=(t0)=>{let n1=R.get(t0);if(n1)return n1;let e1=O(t0);if(!e1)throw Error(`Missing private key for signer ${t0}`);let Y5=new M0.Wallet(M0.hexlify(e1)),i5={privateKey:e1,wallet:Y5};return R.set(t0,i5),i5};for(let t0 of I){let n1=M(t0.signer);if(n1)j(t0.id,n1),console.log(` Registered public key for ${t0.name} (${t0.signer})`);else throw Error(`Missing public key for signer ${t0.signer}`)}console.log(`
\uD83D\uDCB3 Prefunding signer wallets (1M each token)...`);for(let t0 of I){let{wallet:n1}=F(t0.signer);await G.fundSignerWallet(n1.address,C),console.log(` Prefunded ${t0.name} signer ${t0.signer} (${n1.address.slice(0,10)}...)`)}let A=F(v.signer);if(N>C)await G.fundSignerWallet(A.wallet.address,N),console.log(` Hub signer topped up to ${N/lb} tokens`);if(console.log(`
   Created: ${h.name}, ${v.name}, ${b.name}`),console.log(`
\uD83D\uDCCB Skipping EntityProvider registration (lazy entities)`),console.log(`
\uD83D\uDD2D Setting up j-watcher subscription to BrowserVM...`),db)db.stopWatching();if(db=await qJ($,G),console.log(" j-watcher subscribed to BrowserVM events"),a1($,"Three Entities Deployed",{description:"Entities Created: Alice, Hub, Bob",what:"Alice, Hub, and Bob entities are now registered in the J-Machine. They appear in the 3D visualization but have no reserves yet (grey spheres).",why:"Before entities can transact, they must be registered in the jurisdiction. This establishes their identity and governance structure.",tradfiParallel:"Like banks registering with the Federal Reserve before opening for business.",keyMetrics:["Entities: 3 (Alice, Hub, Bob)","Reserves: All $0 (grey - unfunded)","Accounts: None opened yet"],expectedSolvency:0n}),await W($),console.log(`
\uD83D\uDCB0 FRAME 1: Initial State - Hub Reserve Funding (REAL BrowserVM TX)`),L=G.getTokenAddress("USDC"),!L)throw Error("USDC token not found in BrowserVM registry");await G.approveErc20(A.privateKey,L,G.getDepositoryAddress(),N);let T=await G.externalTokenToReserve(A.privateKey,v.id,L,N);console.log(` Deposited $10M USDC to Hub via ERC20 (events: ${T.length})`),await l8($);let[,V]=P1($,v.id),w=V.state.reserves.get(String($1))||0n;if(w!==N)throw Error(`ASSERT FAIL Frame 1: Hub reserve = ${w}, expected ${N}. J-event NOT delivered!`);console.log(` ASSERT Frame 1: Hub reserve = $${w/10n**18n}M `),a1($,"Initial Liquidity Provision",{description:"Initial State: Hub Funded",what:"Hub entity receives $10M USDC reserve balance on Depository.sol (on-chain via BrowserVM)",why:"Reserve balances are the source of liquidity for off-chain bilateral accounts. Think of this as the hub depositing cash into its custody account.",tradfiParallel:"Like a correspondent bank depositing USD reserves at the Federal Reserve to enable wire transfers",keyMetrics:["Hub Reserve: $10M USDC","Alice Reserve: $0 (grey - no funds)","Bob Reserve: $0 (grey - no funds)"],expectedSolvency:H}),await W($),console.log(`
\uD83D\uDD04 FRAME 2: Hub  Alice R2R - QUEUED IN BATCH (PENDING)`);let k={entityId:v.id,signerId:v.signer,entityTxs:[{type:"reserve_to_reserve",data:{toEntityId:h.id,tokenId:$1,amount:a6(3000000)}}]};a1($,"R2R #1: TX Queued in Batch",{description:"Hub  Alice: R2R Pending in Batch",what:"Hub queues reserveToReserve(Alice, $3M). Operation is pending in the entity batch.",why:"Operations accumulate in the batch before a single broadcast to the J-Machine.",tradfiParallel:"Like staging a Fedwire before batch submission",keyMetrics:["J-Batch: 1 pending op","Hub Reserve: $10M (unchanged)","Alice Reserve: $0 (unchanged)"],expectedSolvency:H}),await W($,[k]);let[,S]=P1($,v.id),y=S.state.jBatchState?.batch.reserveToReserve.length||0;if(y!==1)throw Error(`BATCH FAIL: Expected 1 R2R op queued, got ${y}`);console.log(` BATCH: ${y} R2R op queued
`),console.log(`
\uD83D\uDD04 FRAME 3: Hub  Bob R2R - BATCH BROADCASTED (PENDING)`);let u={entityId:v.id,signerId:v.signer,entityTxs:[{type:"reserve_to_reserve",data:{toEntityId:b.id,tokenId:$1,amount:a6(2000000)}},{type:"j_broadcast",data:{}}]};a1($,"R2R #2: Batch Broadcasted",{description:"Hub  Bob: Batch Pending in Mempool",what:"Hub adds reserveToReserve(Bob, $2M) and broadcasts the batch to the J-Machine.",why:"Multiple R2R ops are combined into a single batch for efficiency.",tradfiParallel:"Like sending a multipayment batch to Fedwire",keyMetrics:["J-Machine mempool: 1 pending batch (2 ops)","Hub Reserve: $10M (unchanged)","Bob Reserve: $0 (unchanged)"],expectedSolvency:H}),await W($,[u]);let c=$.jReplicas.get(S30);if(!c)throw Error("J-Machine not found");let o=c.mempool.length;if(o!==1)throw Error(`MEMPOOL FAIL: Expected 1 pending batch, got ${o}`);console.log(` MEMPOOL: ${o} pending batch (2 ops)`),console.log(`
 FRAME 4: J-Block #1 - Execute Hub Fundings`),await W($),await l8($);let z0=await G.getReserves(h.id,$1),e=await G.getReserves(b.id,$1);console.log("[AHB] J-Block #1 executed - Fundings complete:"),console.log(`  Alice: ${Number(z0)/1000000000000000000} USDC`),console.log(`  Bob: ${Number(e)/1000000000000000000} USDC`),a1($,"J-Block #1: Hub Fundings Executed",{description:"Hub Fundings Complete: Alice & Bob funded",what:"Hub distributed $3M to Alice, $2M to Bob. Both entities now have reserve balances.",why:"Funding R2Rs executed first - entities need reserves before they can transact.",tradfiParallel:"Like initial capital injection: entities receive operating funds",keyMetrics:["Hub: $5M reserve (remaining)","Alice: $3M reserve (funded)","Bob: $2M reserve (funded)","Next: Alice  Bob transfer"],expectedSolvency:H}),await W($),console.log(`
\uD83D\uDD04 FRAME 5: Alice  Bob R2R - TX ENTERS MEMPOOL (PENDING)`);let s={entityId:h.id,signerId:h.signer,entityTxs:[{type:"reserve_to_reserve",data:{toEntityId:b.id,tokenId:$1,amount:a6(500000)}},{type:"j_broadcast",data:{}}]};a1($,"R2R: Alice  Bob Enters Mempool",{description:"Alice  Bob: R2R Pending in Mempool",what:"Alice (now funded with $3M) sends $500K to Bob. TX is PENDING in mempool.",why:"Alice has funds now! This demonstrates peer-to-peer R2R (not just Hub distribution).",tradfiParallel:"Interbank transfer: one funded bank pays another",keyMetrics:["Alice: $3M reserve (has funds!)","Mempool: 1 pending tx","Next: J-Block #2 execution"],expectedSolvency:H}),await W($,[s]),console.log(`
 FRAME 6: J-Block #2 - Execute Alice  Bob Transfer`),await W($),await l8($);let J0=await G.getReserves(v.id,$1),t=await G.getReserves(h.id,$1),Z0=await G.getReserves(b.id,$1);console.log("[AHB] J-Block #2 executed - Final reserves:"),console.log(`  Hub: ${Number(J0)/1000000000000000000} USDC`),console.log(`  Alice: ${Number(t)/1000000000000000000} USDC`),console.log(`  Bob: ${Number(Z0)/1000000000000000000} USDC`),a1($,"Phase 1 Complete: Reserve Distribution",{description:"R2R Complete: All reserves distributed",what:"Hub: $5M, Alice: $2.5M, Bob: $2.5M. Total: $10M preserved. All entities now have visible reserves.",why:"R2R transfers are pure on-chain settlement. Now we move to Phase 2: Bilateral Accounts.",tradfiParallel:"Like Fedwire settlement: instant, final, auditable transfers between reserve accounts",keyMetrics:["Hub: $5M reserve","Alice: $2.5M reserve","Bob: $2.5M reserve","Next: Open bilateral accounts"],expectedSolvency:H}),await W($),console.log(`
\uD83D\uDD17 FRAME 6: Open Alice  Hub Bilateral Account`),await W($,[{entityId:h.id,signerId:h.signer,entityTxs:[{type:"openAccount",data:{targetEntityId:v.id}}]}]),await W($);let[,N0]=P1($,h.id);if(!N0?.state?.accounts?.get(v.id))throw console.error(" Available accounts:",Array.from(N0.state.accounts.keys())),Error("ASSERT FAIL Frame 6: Alice-Hub account does NOT exist!");console.log(" ASSERT Frame 6: Alice-Hub account EXISTS"),a1($,"Bilateral Account: Alice  Hub (A-H)",{description:"Alice  Hub: Account Created",what:"Alice opens bilateral account with Hub. Creates off-chain channel for instant payments.",why:"Bilateral accounts enable unlimited off-chain transactions with final on-chain settlement.",tradfiParallel:"Like opening a margin account: enables trading before settlement.",keyMetrics:["Account A-H: CREATED","Collateral: $0 (empty)","Credit limits: Default","Ready for R2C prefunding"],expectedSolvency:H}),await W($),console.log(`
\uD83D\uDD17 FRAME 7: Open Bob  Hub Bilateral Account`),await W($,[{entityId:b.id,signerId:b.signer,entityTxs:[{type:"openAccount",data:{targetEntityId:v.id}}]}]),await W($);let[,l]=P1($,v.id),[,q0]=P1($,b.id),Y0=l?.state?.accounts?.get(b.id),K0=q0?.state?.accounts?.get(v.id);if(!Y0||!K0)throw console.error(" Hub available accounts:",Array.from(l.state.accounts.keys())),console.error(" Bob available accounts:",Array.from(q0.state.accounts.keys())),Error(`ASSERT FAIL Frame 7: Hub-Bob account does NOT exist! Hub view: ${!!Y0}, Bob view: ${!!K0}`);console.log(" ASSERT Frame 7: Hub-Bob accounts EXIST (both directions)"),a1($,"Bilateral Account: Bob  Hub (B-H)",{description:"Bob  Hub: Account Created",what:"Bob opens bilateral account with Hub. Now both spoke entities connected to hub.",why:"Star topology: Alice and Bob both connect to Hub. Hub routes payments between them.",tradfiParallel:"Like correspondent banking: small banks connect to large banks for interbank settlement.",keyMetrics:["Account B-H: CREATED","Topology: Alice  Hub  Bob","Ready for credit extension"],expectedSolvency:H}),await W($),console.log(`
\uD83D\uDCB0 FRAME 8: Alice R2C - Create jBatch ($500K)`);let k0=a6(500000);await W($,[{entityId:h.id,signerId:h.signer,entityTxs:[{type:"deposit_collateral",data:{counterpartyId:v.id,tokenId:$1,amount:k0}},{type:"j_broadcast",data:{}}]}]);let a=$.jReplicas.get("AHB Demo");if(!a)throw Error("J-Machine not found");if(console.log(`[Frame 8 ASSERT] J-Machine state: mempool=${a.mempool.length}, blockNumber=${a.blockNumber}`),!(a.mempool.length>0||Number(a.blockNumber)>8))throw Error(`ASSERT FAIL: jOutput not routed! mempool=${a.mempool.length}, blockNumber=${a.blockNumber}`);console.log(" ASSERT: jOutput routed successfully (processed or pending)"),a1($,"J-Batch Pending: Alice R2C $500K",{description:"Alice R2C: Batch Created (Pending)",what:"Alice created jBatch for R2C. Batch sits in J-Machine mempool awaiting next block.",why:"Batches accumulate before on-chain submission. Yellow cube = pending batch.",tradfiParallel:"Like a wire transfer queued at end-of-day batch processing.",keyMetrics:["jReplica mempool: 1 pending batch","Batch: R2C $500K AliceA-H account"],expectedSolvency:H}),await W($),console.log(`
 FRAME 8.5: Mempool Delay - Batch pending in J-Machine`);let n0=$.jReplicas?.get(S30),W0=n0?$.timestamp-(n0.lastBlockTimestamp||0):0,V0=n0?.blockDelayMs||1000;console.log(`[Frame 8.5] elapsed=${W0}ms, blockDelayMs=${V0}ms`),a1($,"J-Batch Queued: Awaiting Block Creation",{description:"J-Machine: Mempool Processing Delay",what:`Batch sits in mempool for ${V0}ms before on-chain submission.`,why:"Batching improves gas efficiency. Multiple settlements can be combined into one block.",tradfiParallel:"Like SWIFT netting - accumulate transactions, settle in batch.",keyMetrics:[`Mempool: ${n0?.mempool?.length||0} batch(es) pending`,`Block delay: ${V0}ms`],expectedSolvency:H}),await W($),console.log(`
\uD83D\uDCB0 FRAME 9: J-Machine processes R2C batch from mempool`);let H1=await G.getReserves(h.id,$1);console.log(`[Frame 9 DEBUG] Alice on-chain reserves: ${H1/10n**18n}M`),console.log(`[Frame 9 DEBUG] Alice entityId=${h.id.slice(0,10)}..., Hub entityId=${v.id.slice(0,10)}...`),await W($),console.log("[Frame 9 DEBUG] BEFORE processJEvents"),await l8($),console.log("[Frame 9 DEBUG] AFTER processJEvents - checking accounts...");let[,D0]=P1($,h.id),[,j0]=P1($,v.id);console.log(`  Alice-Hub account: ${!!D0.state.accounts.get(v.id)}`),console.log(`  Hub-Alice account: ${!!j0.state.accounts.get(h.id)}`),console.log("[Frame 9 DEBUG] Round 1 - process j_event_claim proposals"),await W($),console.log("[Frame 9 DEBUG] Round 2 - process ACKs and commit"),await W($),console.log("[Frame 9 DEBUG] Bilateral consensus rounds complete");let[,g1]=P1($,h.id),T0=v.id;console.log(`\uD83D\uDD0D ASSERT Frame 9: Looking up account with key ${T0}`),console.log("\uD83D\uDD0D ASSERT Frame 9: Alice has accounts:",Array.from(g1.state.accounts.keys()));let R0=g1.state.accounts.get(T0);if(console.log(`\uD83D\uDD0D ASSERT Frame 9: Account found? ${!!R0}`),R0)console.log("\uD83D\uDD0D ASSERT Frame 9: Account deltas:",Array.from(R0.deltas.keys()));let s1=R0?.deltas.get($1);if(console.log(`\uD83D\uDD0D ASSERT Frame 9: Delta found? ${!!s1}, collateral=${s1?.collateral||0n}`),!s1||s1.collateral!==k0){let t0=s1?.collateral||0n;throw Error(`ASSERT FAIL Frame 9: Alice-Hub collateral = ${t0}, expected ${k0}. R2C j-event NOT delivered!`)}let C0=E5(h.id,v.id)?k0:0n;if(s1.ondelta!==C0)throw Error(`ASSERT FAIL Frame 9: Alice-Hub ondelta = ${s1.ondelta}, expected ${C0}. R2C ondelta mismatch!`);let g6=g1.state.reserves.get(String($1))||0n,m0=a6(2000000);if(g6!==m0)throw Error(`ASSERT FAIL Frame 9: Alice reserve = ${g6/10n**18n}M, expected $2M. R2C reserve deduction failed!`);let l0=C0/10n**18n;console.log(` ASSERT Frame 9: R2C complete - collateral=$500K, ondelta=$${l0}M, Alice reserve=$2M `);let[,C6]=P1($,h.id),[,y0]=P1($,v.id);console.log(`
\uD83D\uDD0D PRE-ASSERT STATE DUMP:`),console.log("Alice account with Hub:",C6.state.accounts.get(v.id)?.deltas.get($1)),console.log("Alice LEFT/RIGHT obs:",{left:C6.state.accounts.get(v.id)?.leftJObservations?.length||0,right:C6.state.accounts.get(v.id)?.rightJObservations?.length||0}),console.log("Hub account with Alice:",y0.state.accounts.get(h.id)?.deltas.get($1)),console.log("Hub LEFT/RIGHT obs:",{left:y0.state.accounts.get(h.id)?.leftJObservations?.length||0,right:y0.state.accounts.get(h.id)?.rightJObservations?.length||0}),LU($,h.id,v.id,$1,"Frame 9 - Alice R2C Collateral"),a1($,"Reserve-to-Collateral (R2C): Alice  A-H Account",{description:"Alice R2C: $500K Reserve  Collateral",what:"Alice moves $500K from reserve to A-H account collateral. J-Machine processed batch.",why:"Collateral enables off-chain payments. Alice can now send up to $500K to Hub instantly.",tradfiParallel:"Like posting margin: Alice locks funds in the bilateral account as security.",keyMetrics:["Alice Reserve: $2.5M  $2M (-$500K)","A-H Collateral: $0  $500K","Alice outCapacity: $500K","Settlement broadcast to J-Machine"],expectedSolvency:H}),await W($),console.log(`
\uD83D\uDCB3 FRAME 9: Bob Credit Extension ($500K)`);let u0=a6(500000);await W($,[{entityId:b.id,signerId:b.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:v.id,tokenId:$1,amount:u0}}]}]),await W($),await W($),await W($);let[,W8]=P1($,b.id),v0=W8.state.accounts.get(v.id)?.deltas.get($1),i0=E5(v.id,b.id)?"leftCreditLimit":"rightCreditLimit",c0=v0?v0[i0]:0n;if(!v0||c0!==u0)throw Error(`ASSERT FAIL Frame 9: Bob-Hub ${i0} = ${c0}, expected ${u0}. Credit extension NOT applied!`);LU($,b.id,v.id,$1,"Frame 9 - Bob Credit Extension"),a1($,"Credit Extension: Bob  Hub",{description:"Bob Credit Extension: $500K",what:"Bob extends $500K credit limit to Hub in B-H account. Purely off-chain, no collateral.",why:"Credit extension allows Hub to owe Bob. Bob trusts Hub up to $500K.",tradfiParallel:'Like a credit line: Bob says "Hub can owe me up to $500K".',keyMetrics:["B-H Credit Limit: $500K","Bob collateral: $0 (receiver)","Hub can owe Bob: $500K max","Ready for routed payment!"],expectedSolvency:H}),await W($),console.log(`

\uD83D\uDEA8\uD83D\uDEA8\uD83D\uDEA8 PAYMENT SECTION START \uD83D\uDEA8\uD83D\uDEA8\uD83D\uDEA8
`);let M5=()=>{let t0=$.pendingOutputs||[];console.log(`   pending: [${t0.map((n1)=>n1.entityId.slice(-4)).join(",")}]`)};console.log(`
 FRAME 10: Off-Chain Payment A  H  B ($125K)`);let _0=a6(125000),{deriveDelta:d}=await Promise.resolve().then(() => (y9(),yL));console.log("\uD83C\uDFC3 FRAME 10: Alice initiates AHB $125K"),await W($,[{entityId:h.id,signerId:h.signer,entityTxs:[{type:"directPayment",data:{targetEntityId:b.id,tokenId:$1,amount:_0,route:[h.id,v.id,b.id],description:"Payment 1 of 2"}}]}]),M5(),a1($,"Payment 1/2: Alice  Hub",{description:"Frame 10: Alice initiates AHB",what:"Alice sends $125K, Hub receives and forwards proposal to Bob",expectedSolvency:H}),await W($),console.log("\uD83C\uDFC3 FRAME 11: Hub forwards, Alice commits"),await W($),M5(),a1($,"Payment 1/2: Hub  Bob proposal",{description:"Frame 11: Hub forwards to Bob",what:"Hub-Alice commits, Hub proposes to Bob",expectedSolvency:H}),await W($),console.log("\uD83C\uDFC3 FRAME 12: Bob ACKs Hub"),await W($),M5(),console.log("\uD83C\uDFC3 FRAME 13: Hub commits H-B"),await W($),M5();let $0=d2($,h.id,v.id,$1),G0=d2($,v.id,b.id,$1),O0=E5(h.id,v.id),s0=O0?-_0:_0,E0=E5(v.id,b.id),S0=E0?-_0:_0;if($0!==s0)throw Error(` After payment 1, A-H offdelta=${$0}, expected ${s0}`);if(G0!==S0)throw Error(` After payment 1, H-B offdelta=${G0}, expected ${S0}`);console.log(`    Payment 1: A-H=${$0}, H-B=${G0} (canonical LEFT perspective)`),a1($,"Payment 1/2 Complete",{description:"Frame 13: Payment 1 complete",what:"AHB $125K done. A-H shift: -$125K, H-B shift: -$125K",expectedSolvency:H}),await W($);let T5=a6(125000);console.log(`
\uD83C\uDFC3 FRAME 14: Alice initiates second AHB $125K`),await W($,[{entityId:h.id,signerId:h.signer,entityTxs:[{type:"directPayment",data:{targetEntityId:b.id,tokenId:$1,amount:T5,route:[h.id,v.id,b.id],description:"Payment 2 of 2"}}]}]),M5(),a1($,"Payment 2/2: Alice  Hub",{description:"Frame 14: Alice initiates second payment",what:"Second $125K payment to reach $250K total shift",expectedSolvency:H}),await W($),console.log("\uD83C\uDFC3 FRAME 15: Hub forwards, Alice commits A-H"),await W($),M5(),a1($,"Payment 2/2: Hub  Bob proposal",{description:"Frame 15: Hub forwards second payment",expectedSolvency:H}),await W($),console.log("\uD83C\uDFC3 FRAME 16: Bob ACKs Hub"),await W($),M5(),console.log("\uD83C\uDFC3 FRAME 17: Hub commits H-B"),await W($),M5();let g0=d2($,h.id,v.id,$1),p0=d2($,v.id,b.id,$1),_6=O0?-(_0+T5):_0+T5,h0=E0?-(_0+T5):_0+T5;if(g0!==_6)throw Error(` A-H shift=${g0}, expected ${_6}`);if(p0!==h0)throw Error(` H-B shift=${p0}, expected ${h0}`);console.log(` Total shift verified: A-H=${g0}, H-B=${p0} (both -$250K as expected)`);let[,o0]=P1($,b.id),m1=o0.state.accounts.get(b.id)?.deltas.get($1);if(m1){let t0=E5(b.id,v.id),n1=d(m1,t0);if(console.log(`   Bob outCapacity: ${n1.outCapacity} (received $250K)`),n1.outCapacity!==_0+T5)throw Error(` ASSERTION FAILED: Bob outCapacity=${n1.outCapacity}, expected ${_0+T5}`)}a1($,"Payments Complete: $250K AB",{description:"Frame 17: Both payments complete - $250K shifted",what:"Two $125K payments complete. Total: $250K shifted from Alice to Bob via Hub.",why:"Hub now has $250K uninsured liability to Bob (TR=$250K). Rebalancing needed!",keyMetrics:["A-H shift: -$250K (Alice paid Hub)","H-B shift: -$250K (Hub owes Bob)","TR (Total Risk): $250K uninsured"],expectedSolvency:H}),await W($),console.log(`
\uD83D\uDCB8 PHASE 4: REVERSE PAYMENT: BHA ($50K)`);let k1=a6(50000);console.log("\uD83C\uDFC3 FRAME 18: Bob initiates BHA $50K"),await W($,[{entityId:b.id,signerId:b.signer,entityTxs:[{type:"directPayment",data:{targetEntityId:h.id,tokenId:$1,amount:k1,route:[b.id,v.id,h.id],description:"Reverse payment: Bob pays Alice"}}]}]),M5();let g5=d2($,b.id,v.id,$1),P5=d2($,v.id,h.id,$1);console.log(`   After Bob initiates: B-H offdelta=${g5}, H-A offdelta=${P5}`),a1($,"Reverse Payment: Bob  Hub",{description:"Frame 18: Bob initiates BHA",what:"Bob sends $50K to Alice via Hub. First hop: BH",expectedSolvency:H}),await W($),console.log("\uD83C\uDFC3 FRAME 19: Hub receives BH, forwards to Alice"),await W($),M5();let v1=d2($,b.id,v.id,$1),o1=d2($,h.id,v.id,$1);console.log(`   After Hub forwards: B-H offdelta=${v1}, A-H offdelta=${o1}`);let Y6=E0?-(_0+T5)+k1:_0+T5-k1;if(v1!==Y6)throw Error(`B-H shift unexpected: got ${v1}, expected ${Y6}`);a1($,"Reverse Payment: Hub  Alice",{description:"Frame 19: Hub forwards to Alice",what:"Hub receives BH and forwards HA proposal",expectedSolvency:H}),await W($),console.log("\uD83C\uDFC3 FRAME 20: Alice ACKs Hub"),await W($),M5(),console.log("\uD83C\uDFC3 FRAME 21: Hub commits H-A (reverse payment complete)"),await W($),M5();let J6=d2($,h.id,v.id,$1),_5=d2($,b.id,v.id,$1),S5=_0+T5-k1,F5=O0?-S5:S5,h5=E0?-S5:S5;if(J6!==F5)throw Error(` REVERSE PAYMENT FAIL: A-H offdelta=${J6}, expected ${F5}`);if(_5!==h5)throw Error(` REVERSE PAYMENT FAIL: B-H offdelta=${_5}, expected ${h5}`);console.log(` Reverse payment verified: A-H=${J6}, B-H=${_5} (net $200K from AB)`),a1($,"Reverse Payment: $50K BA",{description:"Frame 21: Reverse payment complete",what:"Bob paid Alice $50K via Hub. Net position: $200K shifted AB.",keyMetrics:["A-H shift: -$200K (was -$250K)","B-H shift: -$200K (was -$250K)","TR: $200K (reduced from $250K)"],expectedSolvency:H}),await W($),console.log(`

\uD83D\uDD04\uD83D\uDD04\uD83D\uDD04 REBALANCING SECTION START \uD83D\uDD04\uD83D\uDD04\uD83D\uDD04
`);let A5=a6(200000);console.log(`
\uD83C\uDFE6 FRAME 22: Alice-Hub Settlement (Alice withdraws $200K)`);let z6=E5(h.id,v.id),n6=z6?0n:A5,K8=z6?A5:0n,b6=z6?A5:-A5,r6=[{tokenId:$1,leftDiff:n6,rightDiff:K8,collateralDiff:-A5,ondeltaDiff:b6}];await W($,[{entityId:h.id,signerId:h.signer,entityTxs:[{type:"settle_propose",data:{counterpartyEntityId:v.id,diffs:r6}}]}]),await W($,[{entityId:h.id,signerId:h.signer,entityTxs:[{type:"settle_approve",data:{counterpartyEntityId:v.id}}]}]),await W($),await W($,[{entityId:v.id,signerId:v.signer,entityTxs:[{type:"settle_approve",data:{counterpartyEntityId:h.id}}]}]),await W($),await W($,[{entityId:h.id,signerId:h.signer,entityTxs:[{type:"settle_execute",data:{counterpartyEntityId:v.id}}]}]),a1($,"Rebalancing 1/2: Pull from Net-Sender",{description:"Frame 22: Alice-Hub Settlement initiated",what:"Hub withdraws $200K from Alice (net-sender) via A-H collateral.",why:"Alice spent $200K off-chain  excess collateral. Hub pulls to rebalance.",tradfiParallel:"Like margin release: net-sender's locked funds freed for redistribution.",keyMetrics:["Alice = NET-SENDER (spent $200K)","A-H collateral: $500K  $300K","Hub reserve: +$200K (pulled)"],expectedSolvency:H});let[,XX]=P1($,h.id),[,o8]=P1($,v.id),zQ=XX.state.accounts.get(v.id)?.deltas.get($1)?.collateral||0n,EU=o8.state.reserves.get(String($1))||0n;console.log(`   A-H pre-settlement: collateral=${zQ}, Hub reserve=${EU}`),console.log("\uD83C\uDFE6 Broadcasting Alice-Hub settlement jBatch via j_broadcast..."),await W($,[{entityId:h.id,signerId:h.signer,entityTxs:[{type:"j_broadcast",data:{}}]}]),await W($),await l8($),console.log(`
\uD83C\uDFE6 FRAME 23: Alice-Hub Settlement completes`),await W($),M5();let[,QW]=P1($,h.id),jJ=QW.state.accounts.get(v.id)?.deltas.get($1),ZW=zQ-A5;if(!jJ||jJ.collateral!==ZW){let t0=jJ?.collateral||0n;throw Error(` ASSERT FAIL: A-H collateral = ${t0}, expected ${ZW}. Settlement j-event NOT delivered!`)}console.log(` ASSERT: A-H collateral ${zQ}  ${jJ.collateral} (-$200K) `);let[,lM]=P1($,v.id),XW=lM.state.reserves.get(String($1))||0n,iM=EU+A5;if(XW!==iM)throw Error(` ASSERT FAIL: Hub reserve = ${XW}, expected ${iM}. Settlement reserve update failed!`);console.log(` ASSERT: Hub reserve ${EU}  ${XW} (+$200K) `),console.log(`   A-H after settlement: collateral=${jJ?.collateral}, ondelta=${jJ?.ondelta}`),a1($,"Rebalancing 1/2: Net-Sender Pulled",{description:"Frame 23: Alice-Hub Settlement complete",what:"Hub pulled $200K from Alice (net-sender). Ready to deposit to Bob.",keyMetrics:["A-H collateral: $300K (Alice's excess released)","Hub reserve: +$200K (holding for Bob)","Next: deposit to net-receiver"],expectedSolvency:H}),await W($),console.log(`
\uD83C\uDFE6 FRAME 24: Hub-Bob Settlement (Hub deposits $200K)`);let qQ=E5(v.id,b.id),oM=qQ?-A5:0n,xT=qQ?0n:-A5,_v=qQ?A5:-A5,IU=[{tokenId:$1,leftDiff:oM,rightDiff:xT,collateralDiff:A5,ondeltaDiff:_v}];await W($,[{entityId:v.id,signerId:v.signer,entityTxs:[{type:"settle_propose",data:{counterpartyEntityId:b.id,diffs:IU}}]}]),await W($,[{entityId:v.id,signerId:v.signer,entityTxs:[{type:"settle_approve",data:{counterpartyEntityId:b.id}}]}]),await W($),await W($,[{entityId:b.id,signerId:b.signer,entityTxs:[{type:"settle_approve",data:{counterpartyEntityId:v.id}}]}]),await W($),await W($,[{entityId:v.id,signerId:v.signer,entityTxs:[{type:"settle_execute",data:{counterpartyEntityId:b.id}}]}]);let[,YW]=P1($,v.id),m9=YW.state.accounts.get(b.id)?.deltas.get($1)?.collateral||0n,_U=YW.state.reserves.get(String($1))||0n;console.log(`   H-B pre-settlement: collateral=${m9}, Hub reserve=${_U}`),a1($,"Rebalancing 2/2: Deposit to Net-Receiver",{description:"Frame 24: Hub-Bob Settlement initiated",what:"Hub deposits $200K to Bob (net-receiver) via H-B collateral.",why:"Bob received $200K off-chain  needs collateral. Hub deposits to insure.",tradfiParallel:"Like margin posting: net-receiver gets collateral backing.",keyMetrics:["Bob = NET-RECEIVER (received $200K)","H-B collateral: $0  $200K","Hub reserve: -$200K (deposited)"],expectedSolvency:H}),await W($),console.log("\uD83C\uDFE6 Broadcasting Hub-Bob settlement jBatch via j_broadcast..."),await W($,[{entityId:v.id,signerId:v.signer,entityTxs:[{type:"j_broadcast",data:{}}]}]),await W($),await l8($),console.log(`
\uD83C\uDFE6 FRAME 25: Hub-Bob Settlement completes`),await W($),M5();let[,SU]=P1($,v.id),YX=SU.state.accounts.get(b.id)?.deltas.get($1),JW=m9+A5;if(!YX||YX.collateral!==JW){let t0=YX?.collateral||0n;throw Error(` ASSERT FAIL: H-B collateral = ${t0}, expected ${JW}. Settlement j-event NOT delivered!`)}console.log(` ASSERT: H-B collateral ${m9}  ${YX.collateral} (+$200K) `);let JX=SU.state.reserves.get(String($1))||0n,nM=_U-A5;if(JX!==nM)throw Error(` ASSERT FAIL: Hub reserve = ${JX}, expected ${nM}. Settlement reserve update failed!`);console.log(` ASSERT: Hub reserve ${_U}  ${JX} (-$200K) `),console.log(`   H-B after settlement: collateral=${YX?.collateral}, ondelta=${YX?.ondelta}`),a1($,"Rebalancing 2/2: Net-Receiver Insured",{description:"Frame 25: Hub-Bob Settlement complete",what:"Hub deposited $200K to Bob (net-receiver). Bob now fully collateralized.",keyMetrics:["H-B collateral: $200K (Bob's insurance)","Bob's uninsured balance: $200K  $0","Rebalance complete!"],expectedSolvency:H}),await W($),console.log(`
\uD83D\uDCCA FRAME 26: Final State - Rebalancing Complete`),a1($,"Rebalancing Complete: Zero Risk",{description:"Frame 26: Rebalancing Complete - TR = $0",what:"Net-sender (Alice)  Hub  Net-receiver (Bob). All positions collateralized.",why:"Rebalance moved collateral from spenders to receivers. Bob's uninsured risk eliminated.",tradfiParallel:"Like end-of-day netting: excess margin released, deficits covered.",keyMetrics:["Bob's uninsured: $200K  $0","Alice (net-sender): collateral released","Bob (net-receiver): collateral deposited","System: 100% collateralized"],expectedSolvency:H}),await W($),console.log(`

 PHASE 6: SIMULTANEOUS BIDIRECTIONAL PAYMENTS 
`),console.log(`Testing consensus rollback when both sides propose at same tick
`),console.log("\uD83D\uDCB3 Alice extending credit to Hub (so Hub can send)...");let L9=a6(1e4),a3=a6(5000),zW=a6(500000);await W($,[{entityId:h.id,signerId:h.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:v.id,tokenId:$1,amount:zW}}]}]),await c2($,()=>{let[,t0]=P1($,h.id),[,n1]=P1($,v.id),e1=t0.state.accounts.get(v.id),Y5=n1.state.accounts.get(h.id);if(!e1||!Y5)return!1;let i5=e1.deltas.get($1),f5=Y5.deltas.get($1),v6=E5(h.id,v.id)?"rightCreditLimit":"leftCreditLimit",z9=i5?.[v6]===zW&&f5?.[v6]===zW,G8=!e1.pendingFrame&&!Y5.pendingFrame,M4=e1.mempool.length===0&&Y5.mempool.length===0;return Boolean(z9&&G8&&M4)},8,"Phase 6 AH credit convergence");let[,fU]=P1($,h.id),[,bT]=P1($,v.id),kU=E5(h.id,v.id),qW=E5(v.id,h.id),xU=d(fU.state.accounts.get(v.id).deltas.get($1),kU).outCapacity,bU=d(bT.state.accounts.get(h.id).deltas.get($1),qW).outCapacity;console.log(`   Alice capacity: ${xU} (need ${L9})`),console.log(`   Hub capacity: ${bU} (need ${a3})`),I5(xU>=L9,`Alice insufficient: need ${L9}, has ${xU}`),I5(bU>=a3,`Hub insufficient: need ${a3}, has ${bU}`),console.log(`    Both have capacity
`),console.log("\uD83D\uDCA5 SIMULTANEOUS: AliceHub $10K + HubAlice $5K (SAME TICK)");let WW=d2($,h.id,v.id,$1);console.log(`   Before: A-H offdelta = ${WW}`),await W($,[{entityId:h.id,signerId:h.signer,entityTxs:[{type:"directPayment",data:{targetEntityId:v.id,tokenId:$1,amount:L9,route:[h.id,v.id],description:"Alice pays Hub $10K (simultaneous test)"}}]},{entityId:v.id,signerId:v.signer,entityTxs:[{type:"directPayment",data:{targetEntityId:h.id,tokenId:$1,amount:a3,route:[v.id,h.id],description:"Hub pays Alice $5K (simultaneous test)"}}]}]),console.log("   \uD83D\uDCCA Both payments submitted simultaneously"),console.log("   \uD83C\uDFB2 Tiebreaker should fire: LEFT (Alice) wins, RIGHT (Hub) rolls back");let[,vU]=P1($,h.id),[,rM]=P1($,v.id),RJ=vU.state.accounts.get(v.id),NJ=rM.state.accounts.get(h.id);if(console.log(`
\uD83D\uDD0D DEBUG: Account state after simultaneous submit:`),console.log(`   Alice's view: mempool=${RJ?.mempool.length||0}, pending=${RJ?.pendingFrame?"h"+RJ.pendingFrame.height:"none"}`),console.log(`   Hub's view:   mempool=${NJ?.mempool.length||0}, pending=${NJ?.pendingFrame?"h"+NJ.pendingFrame.height:"none"}`),RJ?.mempool)console.log(`   Alice mempool txs: [${RJ.mempool.map((t0)=>t0.type).join(", ")}]`);if(NJ?.mempool)console.log(`   Hub mempool txs: [${NJ.mempool.map((t0)=>t0.type).join(", ")}]`);M5(),console.log(`
\uD83D\uDD04 Processing bilateral consensus (may take multiple rounds)...`);let aM=[],sM=!1,KW=!1,CJ=0,GW=20;while(CJ<GW){let t0=$.history?.length||0;await W($),CJ++;let n1=$.history?.length||0;if(n1>t0)for(let f5=t0;f5<n1;f5++){let L6=$.history[f5],v6=L6?.logs||L6?.frameLogs||[];for(let z9 of v6){if(z9.category!=="consensus")continue;let G8=z9.message||"";if(!G8)continue;if(aM.push(G8),G8.includes("ROLLBACK"))sM=!0;if(G8.includes("LEFT-WINS"))KW=!0;console.log(`   \uD83D\uDCCB Event: ${G8}`)}}let e1=d2($,h.id,v.id,$1),Y5=e1-WW,i5=kU?-(L9-a3):L9-a3;if(console.log(`   Round ${CJ}: delta=${e1}, net=${Y5}, target=${i5}`),Y5===i5){console.log(`    Both payments settled after ${CJ} rounds`),await c2($,()=>{let[,f5]=P1($,h.id),[,L6]=P1($,v.id),v6=f5.state.accounts.get(v.id),z9=L6.state.accounts.get(h.id),G8=!v6?.pendingFrame&&!z9?.pendingFrame,M4=($.pendingOutputs?.length||0)===0;return Boolean(G8&&M4)},8,"Phase 6 ACK drain");break}}if(console.log(`
\uD83D\uDCCA Consensus flow summary:`),console.log(`   - Rollback detected: ${sM?"":" MISSING"}`),console.log(`   - LEFT-WINS detected: ${KW?"":" MISSING"}`),console.log(`   - Total consensus events: ${aM.length}`),CJ>=GW)throw Error(`Hit max rounds (${GW}) - payments still pending`);let yU=d2($,h.id,v.id,$1),UW=yU-WW,VW=kU?-(L9-a3):L9-a3;console.log(`
 VERIFICATION:`),console.log(`   Before: A-H offdelta = ${WW}`),console.log(`   After:  A-H offdelta = ${yU}`),console.log(`   Net change: ${UW} (expected: ${VW})`),I5(UW===VW,`Simultaneous payments: A-H delta changed by ${UW}, expected ${VW}`,$),console.log(`
 PHASE 6 COMPLETE: Both simultaneous payments succeeded!`),console.log("   - AliceHub $10K: "),console.log("   - HubAlice $5K: "),console.log("   - Rollback + re-proposal: "),console.log(`   - sentTransitions counter: 
`),console.log(`
 PHASE 7: Dispute enforcement (Bob vs Hub)`);let zX=a6(1e5),X3=E5(v.id,b.id),C1=X3?-a6(150000):a6(150000),s5=0n,G2=X3?v.id:b.id,U2=X3?b.id:v.id,Z7=X3?v:b,Y3=X3?b:v,[,vT]=P1($,b.id),qX=vT.state.accounts.get(v.id);if(!qX)throw Error("PHASE 7: Bob-Hub account missing");let WX=qX.deltas.get($1);if(!WX)throw Error("PHASE 7: Bob-Hub delta missing");let gU=zX-WX.collateral,hU=s5-WX.ondelta;if(gU!==0n||hU!==0n){console.log("  Adjusting on-chain collateral/ondelta for dispute setup via SettlementWorkspace...");let t0=[{tokenId:$1,leftDiff:X3?-gU:0n,rightDiff:X3?0n:-gU,collateralDiff:gU,ondeltaDiff:hU}];await W($,[{entityId:v.id,signerId:v.signer,entityTxs:[{type:"settle_propose",data:{counterpartyEntityId:b.id,diffs:t0}}]}]),await W($,[{entityId:v.id,signerId:v.signer,entityTxs:[{type:"settle_approve",data:{counterpartyEntityId:b.id}}]}]),await W($),await W($,[{entityId:b.id,signerId:b.signer,entityTxs:[{type:"settle_approve",data:{counterpartyEntityId:v.id}}]}]),await W($),await W($,[{entityId:v.id,signerId:v.signer,entityTxs:[{type:"settle_execute",data:{counterpartyEntityId:b.id}}]}]),await W($,[{entityId:v.id,signerId:v.signer,entityTxs:[{type:"j_broadcast",data:{}}]}]),J9($),await W($),await l8($),await W($),await W($);let n1=()=>{let[,Y5]=P1($,b.id),[,i5]=P1($,v.id),f5=Y5.state.accounts.get(v.id),L6=i5.state.accounts.get(b.id),v6=f5?.deltas.get($1),z9=L6?.deltas.get($1);if(!v6||!z9)return!1;let G8=v6.collateral===zX&&v6.ondelta===s5&&z9.collateral===zX&&z9.ondelta===s5,M4=!f5?.pendingFrame&&!L6?.pendingFrame&&(f5?.mempool.length||0)===0&&(L6?.mempool.length||0)===0;return G8&&M4},e1=0;while(e1<12&&!n1())e1+=1,await l8($),await W($),await W($);if(!n1()){let[,Y5]=P1($,b.id),[,i5]=P1($,v.id),f5=Y5.state.accounts.get(v.id)?.deltas.get($1),L6=i5.state.accounts.get(b.id)?.deltas.get($1);throw console.error(" Settlement apply check failed"),console.error(`   Bob delta: ${h1(f5)}`),console.error(`   Hub delta: ${h1(L6)}`),Error("processUntil: Dispute settlement apply not satisfied after 12 rounds")}}let[,E$0]=P1($,b.id),fv=E$0.state.accounts.get(v.id)?.deltas.get($1);if(!fv)throw Error("PHASE 7: Bob-Hub delta missing after settlement");let OW=C1-fv.offdelta;if(OW!==0n){let t0=OW>0n?OW:-OW,n1=OW>0n?Y3:Z7,e1=OW>0n?Z7:Y3;console.log(`  Adjusting offdelta via payment: ${n1.name}  ${e1.name} (${t0})`),await W($,[{entityId:n1.id,signerId:n1.signer,entityTxs:[{type:"directPayment",data:{targetEntityId:e1.id,tokenId:$1,amount:t0,route:[n1.id,e1.id],description:"Dispute setup: adjust offdelta"}}]}]),await c2($,()=>{let[,Y5]=P1($,b.id),i5=Y5.state.accounts.get(v.id),L6=i5?.deltas.get($1)?.offdelta===C1,v6=!i5?.pendingFrame&&!P1($,v.id)[1].state.accounts.get(b.id)?.pendingFrame;return Boolean(L6&&v6)},12,"Dispute offdelta adjustment")}let[,I$0]=P1($,b.id),LJ=I$0.state.accounts.get(v.id)?.deltas.get($1);if(!LJ)throw Error("PHASE 7: Bob-Hub delta missing at target");console.log(" Dispute setup state:"),console.log(`   collateral=${LJ.collateral}, ondelta=${LJ.ondelta}, offdelta=${LJ.offdelta}`),I5(LJ.collateral===zX,"PHASE 7: collateral mismatch"),I5(LJ.ondelta===s5,"PHASE 7: ondelta mismatch"),I5(LJ.offdelta===C1,"PHASE 7: offdelta mismatch");let yT=await G.getReserves(v.id,$1);if(yT>0n){console.log(`\uD83E\uDDF9 Draining Hub reserves to force debt: ${yT}`),await G.reserveToReserve(v.id,h.id,$1,yT),await l8($),await W($);let t0=await G.getReserves(v.id,$1);I5(t0===0n,`PHASE 7: Hub reserve not fully drained (${t0})`)}if(G.setDefaultDisputeDelay)await G.setDefaultDisputeDelay(3);let[,_$0]=P1($,b.id);if(!_$0.state.accounts.get(v.id))throw Error("PHASE 7: Bob-Hub account missing before dispute");VJ($,H,"PHASE 7 PRE-DISPUTE"),console.log(`
\uD83D\uDCDD STEP 1: Bob creates disputeStart entity tx...`),await W($,[{entityId:b.id,signerId:b.signer,entityTxs:[{type:"disputeStart",data:{counterpartyEntityId:v.id,description:"Enforce collateral after non-cooperative Hub"}}]}]),console.log("\uD83D\uDCE4 STEP 2: Bob broadcasts dispute to J-machine..."),await W($,[{entityId:b.id,signerId:b.signer,entityTxs:[{type:"j_broadcast",data:{}}]}]),console.log(" STEP 3: Waiting for J-machine to process batch + events...");{let t0=await DT(),n1=()=>{let[,Y5]=P1($,b.id);return Y5.state.accounts.get(v.id)},e1=!1;for(let Y5=0;Y5<40;Y5++){if(n1()?.activeDispute){e1=!0;break}if(await t0($),await l8($),n1()?.activeDispute){e1=!0;break}J9($)}if(!e1){if(_30){let[,Y5]=P1($,b.id),i5=Array.from(Y5.state.accounts.entries()).map(([f5,L6])=>({key:f5,hasActiveDispute:Boolean(L6.activeDispute),counterparty:f5.slice(-4)}));console.log(" DEBUG: DisputeStarted not detected"),console.log("   Bob accounts:",i5),console.log("   Hub id:",v.id)}throw Error("PHASE 7: DisputeStarted event not applied after 40 rounds")}}console.log(" STEP 4: Verify DisputeStarted event processed...");let[,S$0]=P1($,b.id),tM=S$0.state.accounts.get(v.id);I5(tM?.activeDispute,"PHASE 7: Bob activeDispute not set after DisputeStarted"),console.log(`   Bob activeDispute: timeout=block ${tM.activeDispute.disputeTimeout}, nonce=${tM.activeDispute.initialDisputeNonce}`);let[,f$0]=P1($,v.id),k$0=f$0.state.accounts.get(b.id);I5(k$0?.activeDispute,"PHASE 7: Hub activeDispute not set (bilateral awareness failed)"),console.log("   Hub received DisputeStarted event (bilateral awareness )"),VJ($,H,"PHASE 7 DISPUTE-ACTIVE");let gT=tM.activeDispute.disputeTimeout;console.log(`
 STEP 5: Waiting for block timeout (target: ${gT})...`);let{createEmptyBatch:kv}=await Promise.resolve().then(() => (c6(),n9));while(!0){let t0=G.getBlockNumber();if(console.log(`   Current block: ${t0}, target: ${gT}`),t0>=gT){console.log(` Timeout reached at block ${t0}`);break}let n1=kv(),{encodeJBatch:e1,computeBatchHankoHash:Y5}=await Promise.resolve().then(() => (c6(),n9)),i5=e1(n1),f5=G.getChainId(),L6=G.getDepositoryAddress(),v6=G.getEntityProviderAddress(),G8=await G.getEntityNonce(b.id)+1n,M4=Y5(f5,L6,i5,G8),{signHashesAsSingleEntity:KX}=await Promise.resolve().then(() => (F2(),S4)),Jy=(await KX($,b.id,b.signer,[M4]))[0];if(!Jy)throw Error("Failed to build empty batch hanko");await G.processBatch(i5,v6,Jy,G8),await W($)}console.log(`
 STEP 6: Bob finalizes dispute (unilateral)...`);let x$0=await G.getReserves(b.id,$1);await W($,[{entityId:b.id,signerId:b.signer,entityTxs:[{type:"disputeFinalize",data:{counterpartyEntityId:v.id,cooperative:!1,description:"Finalize after timeout"}}]}]),await W($,[{entityId:b.id,signerId:b.signer,entityTxs:[{type:"j_broadcast",data:{}}]}]),await c2($,()=>{let t0=$.jReplicas?.get("AHB Demo");return t0?t0.mempool.length===0:!1},40,"J-machine finalize dispute"),await l8($),console.log(" STEP 7: Verify dispute finalized on-chain...");let hT="0x"+"0".repeat(64),xv=await G.getAccountInfo(b.id,v.id);I5(xv.disputeHash===hT,"PHASE 7: Dispute hash not cleared after finalize"),I5(xv.disputeTimeout===0n,"PHASE 7: Dispute timeout not cleared"),console.log("   Dispute cleared on-chain ");let[,b$0]=P1($,b.id),v$0=b$0.state.accounts.get(v.id);I5(!v$0?.activeDispute,"PHASE 7: Bob activeDispute not cleared after finalize");let[,y$0]=P1($,v.id),g$0=y$0.state.accounts.get(b.id);I5(!g$0?.activeDispute,"PHASE 7: Hub activeDispute not cleared after finalize"),console.log("   Dispute cleared in runtime ");let bv=await G.getReserves(b.id,$1),vv=x$0+zX;I5(bv===vv,`PHASE 7: Bob reserve mismatch: ${bv} != ${vv}`),console.log("   Bob reserve += $100K collateral ");let[,h$0]=P1($,b.id),eM=h$0.state.messages.find((t0)=>t0.includes("DEBT")&&t0.includes(v.id.slice(-4)));I5(eM,"PHASE 7: Bob did not receive DebtCreated event");let yv=eM?.match(/owes\s+([\d.]+)\s+USDC/),mT=yv?parseFloat(yv[1]):0,gv=50000;I5(Math.abs(mT-gv)<1,`H14: DebtCreated amount mismatch: got ${mT}, expected ${gv}`),I5(eM?.includes(v.id.slice(-8)),"H14: DebtCreated debtor should be Hub"),I5(eM?.includes(b.id.slice(-8)),"H14: DebtCreated creditor should be Bob"),console.log(`   DebtCreated event verified: Hub owes Bob $${mT} USDC `),VJ($,H,"PHASE 7 POST-DISPUTE",!0),console.log(`
 PHASE 7 COMPLETE: Full EJ dispute flow verified!`),console.log("   - Bob disputeStart entity tx  jBatch  J-machine"),console.log("   - DisputeStarted event  both Bob + Hub (bilateral awareness)"),console.log("   - Block timeout verified (real block.number checks)"),console.log("   - Bob disputeFinalize entity tx  J-machine"),console.log(`   - Bob reserve += $100K collateral, Hub debt = $50K (exceeded collateral)
`),console.log(`
 PHASE 8: Dispute edge cases (counter-dispute + early finalize)`),await W($,[{entityId:b.id,signerId:b.signer,entityTxs:[{type:"disputeStart",data:{counterpartyEntityId:v.id,description:"Edge-case dispute start"}}]}]),await W($,[{entityId:b.id,signerId:b.signer,entityTxs:[{type:"j_broadcast",data:{}}]}]),await c2($,()=>{let t0=$.jReplicas?.get("AHB Demo");return t0?t0.mempool.length===0:!1},40,"J-machine process edge disputeStart"),await l8($);let[,m$0]=P1($,b.id),hv=m$0.state.accounts.get(v.id);I5(hv?.activeDispute,"PHASE 8: Bob activeDispute not set after edge disputeStart"),console.log("\uD83E\uDDEA STEP 8a: Bob attempts early finalize (should fail)...");let pT=await G.getAccountInfo(b.id,v.id),mv=$.jReplicas?.get("AHB Demo");if(!mv)throw Error("PHASE 8: J-Machine not found for early finalize check");let pv=BigInt(mv.blockNumber),uv=hv.activeDispute;if(!uv)throw Error("PHASE 8: activeDispute missing before early finalize check");if(uv.startedByLeft!==E5(b.id,v.id))throw Error("PHASE 8: early finalize test expects starter (not counterparty)");if(pT.disputeTimeout===0n)throw Error("PHASE 8: disputeTimeout missing on-chain (early finalize check)");if(pv>=pT.disputeTimeout)throw Error(`PHASE 8: expected pre-timeout (block=${pv}, timeout=${pT.disputeTimeout})`);console.log(" Early finalize blocked by preflight (pre-timeout, starter)  skipping broadcast"),await l8($);let p$0=await G.getAccountInfo(b.id,v.id);I5(p$0.disputeHash!==hT,"PHASE 8: dispute cleared by early finalize (expected fail)");let[,cv]=P1($,b.id);I5(cv.state.accounts.get(v.id)?.activeDispute,"PHASE 8: activeDispute cleared after early finalize"),console.log(" Early finalize failed as expected (dispute still active)"),console.log("  Creating newer off-chain state for counter-dispute...");let uT=lb,cT=cv.state.accounts.get(v.id)?.deltas.get($1);if(!cT)throw Error("PHASE 8: Bob-Hub delta missing for counter-dispute bump");let u$0=E5(b.id,v.id),c$0=E5(v.id,b.id),d$0=d(cT,u$0),l$0=d(cT,c$0),mU=d$0.outCapacity>=uT?b:l$0.outCapacity>=uT?v:null;if(!mU)throw Error("PHASE 8: No capacity for counter-dispute bump payment");let dv=mU===b?v:b;await W($,[{entityId:mU.id,signerId:mU.signer,entityTxs:[{type:"directPayment",data:{targetEntityId:dv.id,tokenId:$1,amount:uT,route:[mU.id,dv.id],description:"Counter-dispute bump"}}]}]),await c2($,()=>{let[,t0]=P1($,b.id),[,n1]=P1($,v.id),e1=t0.state.accounts.get(v.id),Y5=n1.state.accounts.get(b.id);return Boolean(e1&&Y5&&!e1.pendingFrame&&!Y5.pendingFrame)},12,"Counter-dispute bump commit");let[,i$0]=P1($,b.id),$P=i$0.state.accounts.get(v.id);I5($P?.activeDispute,"PHASE 8: activeDispute missing after bump");let dT=$P.activeDispute.initialDisputeNonce,lT=$P.proofHeader.disputeNonce;I5(lT>=dT,`H13: disputeNonce must be >= initial for counter-dispute (initial=${dT}, current=${lT})`),console.log(`   H13: Counter-dispute nonce check: ${dT}  ${lT} (same or higher )`),I5($P.counterpartyDisputeProofHanko,"PHASE 8: missing counterparty dispute hanko for counter-dispute"),VJ($,H,"PHASE 8 COUNTER-DISPUTE-BUMP",!0),console.log(" STEP 8b: Hub counter-dispute finalize (pre-timeout)..."),await W($,[{entityId:v.id,signerId:v.signer,entityTxs:[{type:"disputeFinalize",data:{counterpartyEntityId:b.id,cooperative:!1,description:"Counter-dispute with newer state"}}]}]),await W($,[{entityId:v.id,signerId:v.signer,entityTxs:[{type:"j_broadcast",data:{}}]}]),await c2($,()=>{let t0=$.jReplicas?.get("AHB Demo");return t0?t0.mempool.length===0:!1},40,"J-machine counter-dispute finalize"),await l8($);let o$0=await G.getAccountInfo(b.id,v.id);I5(o$0.disputeHash===hT,"PHASE 8: dispute not cleared after counter-dispute");let[,n$0]=P1($,b.id);I5(!n$0.state.accounts.get(v.id)?.activeDispute,"PHASE 8: activeDispute not cleared after counter-dispute"),console.log(" Counter-dispute finalized before timeout (non-starter path)"),VJ($,H,"PHASE 8 POST-COUNTER-DISPUTE",!0),console.log(`
\uD83E\uDD1D PHASE 8c: Cooperative dispute test (immediate close without timeout)`),await W($,[{entityId:b.id,signerId:b.signer,entityTxs:[{type:"disputeStart",data:{counterpartyEntityId:v.id,description:"H5 audit test: cooperative dispute"}}]}]),await W($,[{entityId:b.id,signerId:b.signer,entityTxs:[{type:"j_broadcast",data:{}}]}]),await c2($,()=>{let t0=$.jReplicas?.get("AHB Demo");return t0?t0.mempool.length===0:!1},40,"J-machine cooperative dispute start"),await l8($);let[,r$0]=P1($,b.id),lv=r$0.state.accounts.get(v.id);I5(lv?.activeDispute,"H5: activeDispute not set for cooperative test"),console.log(`   Dispute started for cooperative close test (timeout block: ${lv.activeDispute.disputeTimeout})`),console.log("   Bob finalizes with cooperative: true..."),await W($,[{entityId:b.id,signerId:b.signer,entityTxs:[{type:"disputeFinalize",data:{counterpartyEntityId:v.id,cooperative:!0,description:"Cooperative dispute finalize"}}]}]);let[,iv]=P1($,b.id),a$0=iv.state.jBatchState?.batch.disputeFinalizations[0];I5(a$0?.cooperative===!0,"H5: cooperative flag not set in batch"),console.log("    Cooperative flag correctly set in disputeFinalization batch"),console.log("     Skipping j_broadcast: cooperative disputes require dual-sig (not implemented)"),console.log("   H5: Cooperative dispute code path exercised (entity layer verified)"),console.log("   Cleaning up with unilateral finalize..."),iv.state.jBatchState.batch.disputeFinalizations=[];let[,s$0]=P1($,b.id),t$0=s$0.state.accounts.get(v.id)?.activeDispute?.disputeTimeout||100n;while(G.getBlockNumber()<t$0){let{encodeJBatch:t0,computeBatchHankoHash:n1}=await Promise.resolve().then(() => (c6(),n9)),{signHashesAsSingleEntity:e1}=await Promise.resolve().then(() => (F2(),S4)),Y5=kv(),i5=t0(Y5),f5=G.getChainId(),L6=G.getDepositoryAddress(),v6=G.getEntityProviderAddress(),G8=await G.getEntityNonce(b.id)+1n,M4=n1(f5,L6,i5,G8),KX=await e1($,b.id,b.signer,[M4]);if(KX[0])await G.processBatch(i5,v6,KX[0],G8);await W($)}await W($,[{entityId:b.id,signerId:b.signer,entityTxs:[{type:"disputeFinalize",data:{counterpartyEntityId:v.id,cooperative:!1,description:"Cleanup after cooperative test"}}]}]),await W($,[{entityId:b.id,signerId:b.signer,entityTxs:[{type:"j_broadcast",data:{}}]}]),await c2($,()=>{let t0=$.jReplicas?.get("AHB Demo");return t0?t0.mempool.length===0:!1},40,"J-machine cleanup dispute finalize"),await l8($);let[,e$0]=P1($,b.id),$Q0=e$0.state.accounts.get(v.id);if(I5(!$Q0?.activeDispute,"H5: cleanup failed - activeDispute not cleared"),console.log(" H5: Cooperative dispute test complete (code path verified, cleanup done)"),ZA0){let t0=Number.isFinite(mb)&&mb>0?mb:100,n1=Number.isFinite(pb)&&pb>0?pb:1,e1=a6(n1);console.log(`
\uD83D\uDEA7 PHASE 7: STRESS TEST (${t0} ticks, $${n1} both directions)`);let Y5=d2($,h.id,v.id,$1);for(let f5=0;f5<t0;f5++)if(await W($,[{entityId:h.id,signerId:h.signer,entityTxs:[{type:"directPayment",data:{targetEntityId:v.id,tokenId:$1,amount:e1,route:[h.id,v.id],description:`Stress AH #${f5+1}`}}]},{entityId:v.id,signerId:v.signer,entityTxs:[{type:"directPayment",data:{targetEntityId:h.id,tokenId:$1,amount:e1,route:[v.id,h.id],description:`Stress HA #${f5+1}`}}]}]),ub>0&&(f5+1)%ub===0)await c2($,()=>{let[,L6]=P1($,h.id),[,v6]=P1($,v.id),z9=L6.state.accounts.get(v.id),G8=v6.state.accounts.get(h.id),M4=!z9?.pendingFrame&&!G8?.pendingFrame,KX=z9?.mempool.length===0&&G8?.mempool.length===0,Yy=($.pendingOutputs?.length||0)===0;return Boolean(M4&&KX&&Yy)},Math.max(400,ub*20),`Phase 7 batch drain @${f5+1}/${t0}`);await c2($,()=>{let[,f5]=P1($,h.id),[,L6]=P1($,v.id),v6=f5.state.accounts.get(v.id),z9=L6.state.accounts.get(h.id),G8=!v6?.pendingFrame&&!z9?.pendingFrame,M4=v6?.mempool.length===0&&z9?.mempool.length===0,KX=($.pendingOutputs?.length||0)===0;return Boolean(G8&&M4&&KX)},Math.max(800,t0*20),"Phase 7 ACK drain");let i5=d2($,h.id,v.id,$1);console.log(`   Stress delta before: ${Y5}`),console.log(`   Stress delta after:  ${i5}`),I5(i5===Y5,`Stress net delta changed: before=${Y5} after=${i5}`,$),LU($,h.id,v.id,$1,"STRESS - Alice-Hub"),console.log("    Stress test: net delta stable + bilateral sync")}console.log(`
\uD83E\uDD1D PHASE 9: Carol cooperative close (post-scenario)`);let iT="4",QQ0={x:0,y:-60,z:0},ov={mode:"proposer-based",threshold:1n,validators:[iT],shares:{[iT]:1n},jurisdiction:D},ZQ0=f(ov),nv=x(ZQ0);m={id:nv,signer:iT,name:"Carol",boardHash:nv},cb.set(m.id,m.name),await g($,{runtimeTxs:[{type:"importReplica",entityId:m.id,signerId:m.signer,data:{isProposer:!0,position:QQ0,config:ov}}],entityInputs:[]});let rv=M(m.signer);if(rv)j(m.id,rv),console.log(` Registered public key for ${m.name} (${m.signer})`);else throw Error(`Missing public key for signer ${m.signer}`);let{wallet:av}=F(m.signer);await G.fundSignerWallet(av.address,C),console.log(` Prefunded ${m.name} signer ${m.signer} (${av.address.slice(0,10)}...)`),a1($,"Carol Joins (Cooperative Close Demo)",{description:"Carol is added after the main AHB flow for a clean cooperative close demo.",what:"New entity Carol joins the jurisdiction with a single-signer board.",why:"Demonstrate a clean cooperative close after the main dispute scenarios.",tradfiParallel:"A new participant opens an account after the main settlement cycle.",keyMetrics:["Carol: Entity created","Reserves: $0 (pre-funding)"],expectedSolvency:H}),await W($);let XQ0=a6(1e5);await W($,[{entityId:h.id,signerId:h.signer,entityTxs:[{type:"reserve_to_reserve",data:{toEntityId:m.id,tokenId:$1,amount:XQ0}},{type:"j_broadcast",data:{}}]}]),await c2($,()=>{let t0=$.jReplicas?.get("AHB Demo");return t0?t0.mempool.length===0:!1},40,"Carol reserve funding"),await l8($),await W($,[{entityId:m.id,signerId:m.signer,entityTxs:[{type:"openAccount",data:{targetEntityId:v.id}}]}]),await W($);let oT=a6(50000);await W($,[{entityId:m.id,signerId:m.signer,entityTxs:[{type:"deposit_collateral",data:{counterpartyId:v.id,tokenId:$1,amount:oT}},{type:"j_broadcast",data:{}}]}]),await W($),await l8($),await W($),await W($);let[,YQ0]=P1($,m.id),sv=YQ0.state.accounts.get(v.id)?.deltas.get($1);I5(sv,"PHASE 9: Carol-Hub delta missing after R2C"),I5(sv.collateral===oT,"PHASE 9: Carol collateral mismatch after R2C");let tv=a6(25000);await W($,[{entityId:v.id,signerId:v.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:m.id,tokenId:$1,amount:tv}}]}]),await W($);let ev=a6(15000);await W($,[{entityId:v.id,signerId:v.signer,entityTxs:[{type:"directPayment",data:{targetEntityId:m.id,tokenId:$1,amount:ev,route:[v.id,m.id]}}]}]),await W($),await W($),a1($,"Carol Has Position with Hub",{description:"Hub extended credit and made a $15K payment to Carol, creating a real position to settle.",what:"Carol now has $15K owed to her by Hub (ondelta).",why:"Cooperative close must handle real positions, not just empty accounts.",tradfiParallel:"Closing a credit card with an outstanding balance that must be paid off.",keyMetrics:[`Carol collateral: ${OJ(oT)}`,`Hub credit to Carol: ${OJ(tv)}`,`Hub payment to Carol: ${OJ(ev)}`],expectedSolvency:H}),await W($);let[,JQ0]=P1($,m.id),X7=JQ0.state.accounts.get(v.id)?.deltas.get($1);I5(X7,"PHASE 9: Carol-Hub delta missing after Hub payment"),console.log(`  Carol position: collateral=${OJ(X7.collateral)}, ondelta=${OJ(X7.ondelta)}`);let nT=X7.ondelta>0n?X7.ondelta:0n;if(nT>0n)console.log(`  Replenishing Hub reserves: ${OJ(nT)} (from Alice)`),await W($,[{entityId:h.id,signerId:h.signer,entityTxs:[{type:"reserve_to_reserve",data:{toEntityId:v.id,tokenId:$1,amount:nT}},{type:"j_broadcast",data:{}}]}]),await c2($,()=>{let t0=$.jReplicas?.get("AHB Demo");return t0?t0.mempool.length===0:!1},20,"Hub reserve replenish"),await l8($);let $y=E5(m.id,v.id),Qy=X7.collateral,Zy=X7.ondelta>0n?X7.ondelta:0n,Xy=X7.ondelta>0n?X7.ondelta:0n,zQ0=[{tokenId:$1,leftDiff:$y?Qy+Zy:-Xy,rightDiff:$y?-Xy:Qy+Zy,collateralDiff:-X7.collateral,ondeltaDiff:-X7.ondelta}];await W($,[{entityId:m.id,signerId:m.signer,entityTxs:[{type:"settle_propose",data:{counterpartyEntityId:v.id,diffs:zQ0}}]}]),await W($,[{entityId:m.id,signerId:m.signer,entityTxs:[{type:"settle_approve",data:{counterpartyEntityId:v.id}}]}]),await W($),await W($,[{entityId:v.id,signerId:v.signer,entityTxs:[{type:"settle_approve",data:{counterpartyEntityId:m.id}}]}]),await W($),await W($,[{entityId:m.id,signerId:m.signer,entityTxs:[{type:"settle_execute",data:{counterpartyEntityId:v.id}}]}]),await W($,[{entityId:m.id,signerId:m.signer,entityTxs:[{type:"j_broadcast",data:{}}]}]),await c2($,()=>{let t0=$.jReplicas?.get("AHB Demo");return t0?t0.mempool.length===0:!1},40,"Carol cooperative close"),await l8($),await c2($,()=>{let[,t0]=P1($,m.id),[,n1]=P1($,v.id),e1=t0.state.accounts.get(v.id),Y5=n1.state.accounts.get(m.id),i5=e1?.deltas.get($1);if(!e1||!Y5||!i5)return!1;let f5=!e1.pendingFrame&&!Y5.pendingFrame,L6=e1.mempool.length===0&&Y5.mempool.length===0;return f5&&L6&&i5.collateral===0n&&i5.ondelta===0n},60,"Carol cooperative close finalize");let[,qQ0]=P1($,m.id),rT=qQ0.state.accounts.get(v.id)?.deltas.get($1);if(I5(rT,"PHASE 9: Carol-Hub delta missing after close"),I5(rT.collateral===0n,"PHASE 9: Carol collateral not zero after close"),I5(rT.ondelta===0n,"PHASE 9: Carol ondelta not zero after close"),console.log(" Carol cooperative close complete"),console.log(`
\uD83D\uDD0D FINAL VERIFICATION: All bilateral accounts...`),LU($,h.id,v.id,$1,"FINAL - Alice-Hub"),LU($,v.id,b.id,$1,"FINAL - Hub-Bob"),m)LU($,v.id,m.id,$1,"FINAL - Hub-Carol");console.log(`
`+"".repeat(80)),console.log("\uD83D\uDCCA FINAL RUNTIME STATE (ASCII - Human Readable)"),console.log("".repeat(80)),console.log(h2($,{maxAccounts:10,maxLocks:20,showMempool:!1})),console.log("".repeat(80)+`
`),console.log(`
=====================================`),console.log(" AHB Demo Complete with Rebalancing!"),console.log("Phase 1: R2R reserve distribution"),console.log("Phase 2: Bilateral accounts + R2C + credit"),console.log("Phase 3: Two payments AHB ($250K total)"),console.log("Phase 4: Reverse payment BHA ($50K) - net $200K"),console.log("Phase 5: Rebalancing - TR $200K  $0"),console.log("Phase 6: Simultaneous bidirectional payments (rollback test)"),console.log("Phase 7: Dispute game  (Full EJ flow with hanko)"),console.log("Phase 9: Carol cooperative close "),console.log(`=====================================
`),console.log(`[AHB] History frames: ${$.history?.length}`),$X($,"AHB")}finally{Q(),$.scenarioMode=!1,$.lockRuntimeSeed=!1,Z(!1)}}var gb=null,hb=null,DT=async()=>{if(!gb)gb=(await Promise.resolve().then(() => (l5(),a5))).process;return gb},eF0=async()=>{if(!hb)hb=(await Promise.resolve().then(() => (l5(),a5))).applyRuntimeInput;return hb},$1=1,$A0=18n,lb,a6=($)=>BigInt($)*lb,QA0,vM=($,Q)=>QA0?Q:typeof process<"u"?process.env[$]||Q:Q,ZA0,mb,pb,ub,_30,S30="AHB Demo",cb,db=null;var ob=p(async()=>{A2();$Q();uq();u2();UJ();y9();lq();A6();lb=10n**$A0,QA0=typeof window<"u",ZA0=vM("AHB_STRESS","0")==="1",mb=Number.parseInt(vM("AHB_STRESS_ITERS","100"),10),pb=Number.parseInt(vM("AHB_STRESS_AMOUNT","1"),10),ub=Number.parseInt(vM("AHB_STRESS_DRAIN_EVERY","0"),10),_30=vM("AHB_DEBUG","0")==="1",cb=new Map});function f30($,Q=0n){let Z=Q,X=()=>{return Z+=1n,M0.keccak256(M0.solidityPacked(["string","uint256"],[$,Z]))},Y=()=>{let W=X(),G=JJ(W);return{secret:W,hashlock:G}},z=(W)=>{let G=X();return BigInt(G)%W};return{counter:()=>Z,nextBytes32:X,nextHashlock:Y,nextBigInt:z,nextNumber:(W)=>{return Number(z(BigInt(W)))},fork:(W)=>{return f30(`${$}:${W}`,0n)}}}function MT($){if($.runtimeSeed===void 0||$.runtimeSeed===null)throw Error("Scenario RNG requires runtimeSeed (unlock vault or set XLN_RUNTIME_SEED)");return f30($.runtimeSeed)}var nb=p(()=>{A6();zJ()});var sb={};x1(sb,{lockAhb:()=>YA0});async function q8($,Q,Z,X){let Y=await m2(),z;if(Array.isArray(X))z=X;else if(X&&typeof X==="object"&&"expectedSolvency"in X)Z={...Z,expectedSolvency:X.expectedSolvency};a1($,Q,Z),await Y($,z)}function rb($,Q,Z){if(!$){if(Z)console.log(`
`+"=".repeat(80)),console.log("ASSERTION FAILED - FULL RUNTIME STATE:"),console.log("=".repeat(80)),console.log(h2(Z,{maxAccounts:5,maxLocks:20})),console.log("=".repeat(80)+`
`);throw Error(`ASSERT: ${Q}`)}}function L5($,Q){let Z=Array.from($.eReplicas.entries()).find(([X])=>X.startsWith(Q+":"));if(!Z)throw Error(`AHB: Replica for entity ${Q} not found`);return Z}async function l2($,Q=10){let Z=await m2();for(let X=0;X<Q;X++){await Z($);let Y=!1;for(let[,z]of $.eReplicas){for(let[,J]of z.state.accounts)if(J.mempool.length>0||J.pendingFrame){Y=!0;break}if(Y)break}if(!Y)return}}async function DJ($){let Q=await m2(),Z=$.runtimeInput?.entityInputs||[];if(console.log(`\uD83D\uDD04 processJEvents CALLED: ${Z.length} pending in queue`),console.log("   pending:",Z.map((X)=>`${X.entityId.slice(-4)}/${X.entityTxs?.length||0}tx`)),Z.length>0){console.log(`   routing ${Z.length} to entities...`);let X=[...Z];$.runtimeInput.entityInputs=[],await Q($,X),console.log(`    ${X.length} j-events processed`)}else console.log("    EMPTY queue - no j-events to process")}function XQ($,Q,Z,X){let[,Y]=L5($,Q);return Y?.state?.accounts?.get(Z)?.deltas?.get(X)?.offdelta??0n}function PT($,Q,Z,X,Y){let[,z]=L5($,Q),[,J]=L5($,Z),q=z?.state?.accounts?.get(Z),W=J?.state?.accounts?.get(Q);if(console.log(`
[BILATERAL-SYNC ${Y}] Checking ${Q.slice(-4)}${Z.slice(-4)} for token ${X}...`),!q)throw console.error(` Entity ${Q.slice(-4)} has NO account with ${Z.slice(-4)}`),Error(`BILATERAL-SYNC FAIL at "${Y}": Entity ${Q.slice(-4)} missing account with ${Z.slice(-4)}`);if(!W)throw console.error(` Entity ${Z.slice(-4)} has NO account with ${Q.slice(-4)}`),Error(`BILATERAL-SYNC FAIL at "${Y}": Entity ${Z.slice(-4)} missing account with ${Q.slice(-4)}`);let G=q.deltas?.get(X),U=W.deltas?.get(X);if(!G)throw console.error(` Entity ${Q.slice(-4)} account has NO delta for token ${X}`),Error(`BILATERAL-SYNC FAIL at "${Y}": Entity ${Q.slice(-4)} missing delta for token ${X}`);if(!U)throw console.error(` Entity ${Z.slice(-4)} account has NO delta for token ${X}`),Error(`BILATERAL-SYNC FAIL at "${Y}": Entity ${Z.slice(-4)} missing delta for token ${X}`);let D=["collateral","ondelta","offdelta","leftCreditLimit","rightCreditLimit","leftAllowance","rightAllowance"],P=[];for(let H of D){let N=G[H],C=U[H];if(N!==C){let L=`  ${H}: ${Q.slice(-4)} has ${N}, ${Z.slice(-4)} has ${C}`;console.error(` ${L}`),P.push(L)}}if(P.length>0)throw console.error(`
 BILATERAL-SYNC FAILED at "${Y}":`),console.error(`   Account: ${Q.slice(-4)}${Z.slice(-4)}, token ${X}`),console.error(`   Mismatched fields:
${P.join(`
`)}`),console.error(`
   Full deltaAB (${Q.slice(-4)} view):`,G),console.error(`   Full deltaBA (${Z.slice(-4)} view):`,U),Error(`BILATERAL-SYNC VIOLATION: ${P.length} field(s) differ between ${Q.slice(-4)} and ${Z.slice(-4)}`);console.log(` [${Y}] Bilateral sync OK: ${Q.slice(-4)}${Z.slice(-4)} token ${X} - all ${D.length} fields match`)}async function YA0($){let Q=L8($,"HTLC AHB"),{lockRuntimeSeedUpdates:Z}=await Promise.resolve().then(() => (H8(),R$));h9($,"HTLC AHB"),N9($,["1","2","3","4","5","6"],"HTLC AHB"),Z(!0);let X=await m2();$.scenarioMode=!0;let Y=MT($);try{console.log("[AHB] ========================================"),console.log("[AHB] Starting Alice-Hub-Bob Demo (REAL BrowserVM transactions)"),console.log("[AHB] BEFORE: eReplicas =",$.eReplicas.size,"history =",$.history?.length||0),console.log("[AHB] ========================================");let z=e4($);if(!z){console.log("[AHB] No BrowserVM found - creating one..."),z=new Y2,await z.init(),$.browserVM=z;let C1=z.getDepositoryAddress();s7($,C1,z),console.log("[AHB]  BrowserVM created, depository:",C1)}else console.log("[AHB]  BrowserVM instance available");if(z.reset){console.log("[AHB] Calling browserVM.reset()..."),await z.reset();let C1="0x"+"3".padStart(64,"0"),s5=await z.getReserves(C1,w1);if(console.log(`[AHB]  BrowserVM reset complete. Hub reserves after reset: ${s5}`),s5!==0n)throw Error(`BrowserVM reset FAILED: Hub still has ${s5} reserves`)}if(z.registerEntitiesWithSigners){console.log("[AHB] Registering entities with EntityProvider...");let C1=await z.registerEntitiesWithSigners(["2","3","4","5","6"]);console.log(`[AHB]  Registered entities: [${C1.join(", ")}]`)}let q=(await QQ()).find((C1)=>C1.name.toLowerCase()==="arrakis");if(!q)console.log("[AHB] No jurisdiction found - using BrowserVM jurisdiction"),q={name:"Arrakis (BrowserVM)",chainId:31337,entityProviderAddress:z.getEntityProviderAddress(),depositoryAddress:z.getDepositoryAddress(),rpc:"browservm://"};if(console.log(`\uD83D\uDCCB Jurisdiction: ${q.name}`),console.log(`
\uD83C\uDFDB Creating AHB Xlnomy (J-Machine at center)...`),!$.jReplicas)$.jReplicas=new Map;let W={name:"AHB Demo",blockNumber:0n,stateRoot:new Uint8Array(32),mempool:[],blockDelayMs:300,lastBlockTimestamp:$.timestamp,position:{x:0,y:600,z:0},contracts:{depository:q.depositoryAddress,entityProvider:q.entityProviderAddress}};$.jReplicas.set("AHB Demo",W),$.activeJurisdiction="AHB Demo",console.log(" AHB Xlnomy created (J-Machine visible in 3D)");let G=r1(1e7);a1($,"Jurisdiction Machine Deployed",{description:"Frame 0: Clean Slate - J-Machine Ready",what:"The J-Machine (Jurisdiction Machine) is deployed on-chain.",why:"Before any entities exist, the jurisdiction infrastructure must be in place.",tradfiParallel:"Like the Federal Reserve deploying its Fedwire Funds Service.",keyMetrics:["J-Machine: Deployed","Entities: 0","Reserves: Empty"],expectedSolvency:0n}),await X($),console.log(`
\uD83D\uDCE6 Creating entities: Alice, Hub, Bob...`);let U={Alice:{x:-20,y:-40,z:0},Hub:{x:0,y:-20,z:0},Bob:{x:20,y:-40,z:0}},D=["Alice","Hub","Bob"],P=[],H=[];for(let C1=0;C1<3;C1++){let s5=D[C1],G2=String(C1+2),U2=U[s5],Z7=C1+2,Y3="0x"+Z7.toString(16).padStart(64,"0");P.push({id:Y3,signer:G2,name:s5}),H.push({type:"importReplica",entityId:Y3,signerId:G2,data:{isProposer:!0,position:U2,config:{mode:"proposer-based",threshold:1n,validators:[G2],shares:{[G2]:1n},jurisdiction:q}}}),console.log(`${s5}: Entity #${Z7} @ (${U2.x}, ${U2.y}, ${U2.z})`)}let N=await kM();await N($,{runtimeTxs:H,entityInputs:[]});let[C,L,B]=P;if(!C||!L||!B)throw Error("Failed to create all entities");console.log(`
   Created: ${C.name}, ${L.name}, ${B.name}`);let{getCachedSignerPrivateKey:E}=await Promise.resolve().then(() => (H8(),R$)),I=new Map,_=(C1)=>{let s5=I.get(C1);if(s5)return s5;let G2=E(C1);if(!G2)throw Error(`Missing private key for signer ${C1}`);let U2=new M0.Wallet(M0.hexlify(G2)),Z7={privateKey:G2,wallet:U2};return I.set(C1,Z7),Z7};console.log(`
\uD83D\uDCB3 Prefunding signer wallets (1M each token)...`);for(let C1 of P){let{wallet:s5}=_(C1.signer);await z.fundSignerWallet(s5.address,k30),console.log(` Prefunded ${C1.name} signer ${C1.signer} (${s5.address.slice(0,10)}...)`)}let f=_(L.signer);if(nq>k30)await z.fundSignerWallet(f.wallet.address,nq),console.log(` Hub signer topped up to ${nq/10n**18n} tokens`);if(console.log(`
\uD83D\uDD2D Setting up j-watcher subscription to BrowserVM...`),ab)ab.stopWatching();ab=await qJ($,z),console.log(" j-watcher subscribed to BrowserVM events"),a1($,"Three Entities Deployed",{description:"Entities Created: Alice, Hub, Bob",what:"Alice, Hub, and Bob entities are now registered in the J-Machine.",why:"Before entities can transact, they must be registered in the jurisdiction.",tradfiParallel:"Like banks registering with the Federal Reserve.",keyMetrics:["Entities: 3","Reserves: $0","Accounts: None"],expectedSolvency:0n}),await X($),console.log(`
\uD83D\uDCB0 FRAME 1: Initial State - Hub Reserve Funding (REAL BrowserVM TX)`);let x=z.getTokenAddress("USDC");if(!x)throw Error("USDC token not found in BrowserVM registry");await z.approveErc20(f.privateKey,x,z.getDepositoryAddress(),nq),await z.externalTokenToReserve(f.privateKey,L.id,x,nq),await DJ($),await X($);let[,g]=L5($,L.id),h=g.state.reserves.get(String(w1))||0n;if(h!==nq)throw Error(`ASSERT FAIL Frame 1: Hub reserve = ${h}, expected ${nq}. J-event NOT delivered!`);console.log(` ASSERT Frame 1: Hub reserve = $${h/10n**18n}M `),console.log(`
\uD83D\uDD04 FRAME 2: Hub creating R2R batch (Alice + Bob)`),a1($,"Initial Liquidity Provision",{description:"Initial State: Hub Funded",what:"Hub receives $10M USDC reserve on Depository.sol",why:"Reserves are the source of liquidity for off-chain accounts.",tradfiParallel:"Like a bank depositing USD reserves at the Federal Reserve.",keyMetrics:["Hub: $10M","Alice: $0","Bob: $0"],expectedSolvency:G}),await X($,[{entityId:L.id,signerId:L.signer,entityTxs:[{type:"reserve_to_reserve",data:{toEntityId:C.id,tokenId:w1,amount:r1(3000000)}},{type:"reserve_to_reserve",data:{toEntityId:B.id,tokenId:w1,amount:r1(2000000)}}]}]),console.log(" R2R operations added to Hub jBatch (2 operations)"),await q8($,"Hub R2R batch created",{title:"R2R Batch Ready",what:"Hub created batch with 2 R2R transfers: $3M to Alice, $2M to Bob.",why:"Batching R2Rs for efficiency - one broadcast, multiple transfers.",tradfiParallel:"Like ACH batch file - multiple wire transfers in one submission.",keyMetrics:["Batch: 2 R2R operations","Total: $5M USDC","Status: Pending broadcast"]},{expectedSolvency:G}),console.log(`
 FRAME 3: Hub broadcasts R2R batch`),await X($,[{entityId:L.id,signerId:L.signer,entityTxs:[{type:"j_broadcast",data:{}}]}]),console.log(" R2R batch queued to J-mempool (yellow cube)"),await q8($,"R2R batch in J-mempool",{title:"J-Mempool: Yellow Cube #1",what:"R2R batch sits in J-mempool (yellow cube). Will execute after blockDelayMs.",why:"Visual feedback: batch queued, awaiting block time.",tradfiParallel:"Like SWIFT queue - message sent, pending settlement window.",keyMetrics:["J-mempool: 1 batch (2 R2Rs)","Block delay: 300ms"]},{expectedSolvency:G}),console.log(`
 FRAME 4: J-Block #1 processes R2R batch`),$.timestamp+=350,await X($),await DJ($),await X($);let[,v]=L5($,C.id),[,b]=L5($,B.id),[,m]=L5($,L.id),K=v.state.reserves.get(String(w1))||0n,M=b.state.reserves.get(String(w1))||0n,j=m.state.reserves.get(String(w1))||0n;if(console.log("[AHB] J-Block #1 executed - Fundings complete:"),console.log(`  Alice: ${Number(K)/1000000000000000000} USDC`),console.log(`  Bob: ${Number(M)/1000000000000000000} USDC`),console.log(`  Hub: ${Number(j)/1000000000000000000} USDC`),K!==r1(3000000))throw Error(` ASSERT FAIL: Alice reserve = ${K}, expected ${r1(3000000)}`);if(M!==r1(2000000))throw Error(` ASSERT FAIL: Bob reserve = ${M}, expected ${r1(2000000)}`);if(j!==r1(5000000))throw Error(` ASSERT FAIL: Hub reserve = ${j}, expected ${r1(5000000)}`);console.log(" ASSERT: R2R batch executed correctly "),await q8($,"Hub fundings complete",{title:"Hub Distributed Reserves",what:"Hub: $5M, Alice: $3M, Bob: $2M.",why:"Hub funded both entities for bilateral trading.",tradfiParallel:"Like correspondent bank funding smaller banks.",keyMetrics:["Hub: $5M","Alice: $3M","Bob: $2M"]},{expectedSolvency:G}),console.log(`
\uD83D\uDD04 FRAME 5: Alice  Bob R2R`),await X($,[{entityId:C.id,signerId:C.signer,entityTxs:[{type:"reserve_to_reserve",data:{toEntityId:B.id,tokenId:w1,amount:r1(500000)}}]}]),await X($,[{entityId:C.id,signerId:C.signer,entityTxs:[{type:"j_broadcast",data:{}}]}]),await q8($,"AliceBob R2R in J-mempool",{title:"Peer-to-Peer Transfer",what:"Alice sends $500K to Bob (yellow cube #3).",keyMetrics:["Alice  Bob: $500K"]},{expectedSolvency:G}),console.log(`
 FRAME 6: J-Block processes AliceBob`),$.timestamp+=350,await X($),await DJ($),await X($);let[,O]=L5($,C.id),[,R]=L5($,B.id),F=O.state.reserves.get(String(w1))||0n,A=R.state.reserves.get(String(w1))||0n;if(F!==r1(2500000))throw Error(` ASSERT FAIL: Alice reserve = ${F}, expected ${r1(2500000)}`);if(A!==r1(2500000))throw Error(` ASSERT FAIL: Bob reserve = ${A}, expected ${r1(2500000)}`);console.log(" ASSERT: AliceBob R2R executed "),await q8($,"R2R Complete: All reserves distributed",{title:"Phase 1 Complete: Reserve Distribution",what:"Hub: $5M, Alice: $2.5M, Bob: $2.5M. Total: $10M preserved.",why:"R2R transfers complete. Now move to Phase 2: Bilateral Accounts.",tradfiParallel:"Like Fedwire settlement: instant, final, auditable.",keyMetrics:["Hub: $5M reserve","Alice: $2.5M reserve","Bob: $2.5M reserve","Batches processed: 2 (3 R2Rs total)"]},{expectedSolvency:G}),console.log(`
\uD83D\uDD17 FRAME 6: Open Alice  Hub Bilateral Account`),await X($,[{entityId:C.id,signerId:C.signer,entityTxs:[{type:"openAccount",data:{targetEntityId:L.id}}]}]),await X($);let[,T]=L5($,C.id);if(!T?.state?.accounts?.get(L.id))throw Error("ASSERT FAIL Frame 6: Alice-Hub account does NOT exist!");console.log(" ASSERT Frame 6: Alice-Hub account EXISTS"),await q8($,"Alice  Hub: Account Created",{title:"Bilateral Account: Alice  Hub (A-H)",what:"Alice opens bilateral account with Hub. Creates off-chain channel for instant payments.",why:"Bilateral accounts enable unlimited off-chain transactions with final on-chain settlement.",tradfiParallel:"Like opening a margin account: enables trading before settlement.",keyMetrics:["Account A-H: CREATED","Collateral: $0 (empty)","Credit limits: Default","Ready for R2C prefunding"]},{expectedSolvency:G}),console.log(`
\uD83D\uDD17 FRAME 7: Open Bob  Hub Bilateral Account`),await X($,[{entityId:B.id,signerId:B.signer,entityTxs:[{type:"openAccount",data:{targetEntityId:L.id}}]}]),await X($);let[,w]=L5($,L.id),[,k]=L5($,B.id),S=w?.state?.accounts?.get(B.id),y=k?.state?.accounts?.get(L.id);if(!S||!y)throw Error(`ASSERT FAIL Frame 7: Hub-Bob account does NOT exist! HubBob: ${!!S}, BobHub: ${!!y}`);console.log(" ASSERT Frame 7: Hub-Bob accounts EXIST (both directions)"),await q8($,"Bob  Hub: Account Created",{title:"Bilateral Account: Bob  Hub (B-H)",what:"Bob opens bilateral account with Hub. Now both spoke entities connected to hub.",why:"Star topology: Alice and Bob both connect to Hub. Hub routes payments between them.",tradfiParallel:"Like correspondent banking: small banks connect to large banks for interbank settlement.",keyMetrics:["Account B-H: CREATED","Topology: Alice  Hub  Bob","Ready for credit extension"]},{expectedSolvency:G}),console.log(`
\uD83D\uDCB0 FRAME 8: Alice R2C - Create jBatch ($500K)`);let u=r1(500000);await X($,[{entityId:C.id,signerId:C.signer,entityTxs:[{type:"deposit_collateral",data:{counterpartyId:L.id,tokenId:w1,amount:u}}]}]),console.log(" Alice deposit_collateral added to jBatch"),await q8($,"Alice R2C: jBatch created",{title:"R2C Batch Ready",what:"Alice R2C added to jBatch (not yet broadcast).",keyMetrics:["Batch: 1 R2C ($500K)"]},{expectedSolvency:G}),console.log(`
\uD83D\uDCB0 FRAME 9: Alice broadcasts R2C batch`),await X($,[{entityId:C.id,signerId:C.signer,entityTxs:[{type:"j_broadcast",data:{}}]}]),console.log(" R2C batch queued to J-mempool"),await q8($,"R2C in J-mempool",{title:"Yellow Cube #2",what:"R2C batch in J-mempool",keyMetrics:["J-mempool: 1 batch"]},{expectedSolvency:G}),console.log(`
 FRAME 11: J-Block #2 processes R2C`),$.timestamp+=500,console.log("    Time advanced: +500ms"),await X($),await DJ($),await X($),await X($);let[,c]=L5($,C.id),z0=c.state.accounts.get(L.id)?.deltas.get(w1);if(!z0||z0.collateral!==u){let C1=z0?.collateral||0n;throw Error(`ASSERT FAIL Frame 9: Alice-Hub collateral = ${C1}, expected ${u}. R2C j-event NOT delivered!`)}let s=E5(C.id,L.id)?u:0n;if(z0.ondelta!==s)throw Error(`ASSERT FAIL Frame 9: Alice-Hub ondelta = ${z0.ondelta}, expected ${s}. R2C ondelta mismatch!`);let J0=c.state.reserves.get(String(w1))||0n,t=r1(2000000);if(J0!==t)throw Error(`ASSERT FAIL Frame 9: Alice reserve = ${J0/10n**18n}M, expected $2M. R2C reserve deduction failed!`);let Z0=s/10n**18n;console.log(` ASSERT Frame 9: R2C complete - collateral=$500K, ondelta=$${Z0}M, Alice reserve=$2M `),PT($,C.id,L.id,w1,"Frame 9 - Alice R2C Collateral"),await q8($,"Alice R2C: $500K Reserve  Collateral",{title:"Reserve-to-Collateral (R2C): Alice  A-H Account",what:"Alice moves $500K from reserve to A-H account collateral. J-Machine processed batch.",why:"Collateral enables off-chain payments. Alice can now send up to $500K to Hub instantly.",tradfiParallel:"Like posting margin: Alice locks funds in the bilateral account as security.",keyMetrics:["Alice Reserve: $2.5M  $2M (-$500K)","A-H Collateral: $0  $500K","Alice outCapacity: $500K","Settlement broadcast to J-Machine"]},{expectedSolvency:G}),console.log(`
\uD83D\uDCB3 FRAME 9: Bob Credit Extension ($500K)`);let N0=r1(500000);await X($,[{entityId:B.id,signerId:B.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:L.id,tokenId:w1,amount:N0}}]}]),await X($),await X($),await X($);let[,i]=L5($,B.id),q0=i.state.accounts.get(L.id)?.deltas.get(w1),K0=E5(L.id,B.id)?"leftCreditLimit":"rightCreditLimit",k0=q0?q0[K0]:0n;if(!q0||k0!==N0)throw Error(`ASSERT FAIL Frame 9: Bob-Hub ${K0} = ${k0}, expected ${N0}. Credit extension NOT applied!`);PT($,B.id,L.id,w1,"Frame 9 - Bob Credit Extension"),await q8($,"Bob Credit Extension: $500K",{title:"Credit Extension: Bob  Hub",what:"Bob extends $500K credit limit to Hub in B-H account. Purely off-chain, no collateral.",why:"Credit extension allows Hub to owe Bob. Bob trusts Hub up to $500K.",tradfiParallel:'Like a credit line: Bob says "Hub can owe me up to $500K".',keyMetrics:["B-H Credit Limit: $500K","Bob collateral: $0 (receiver)","Hub can owe Bob: $500K max","Ready for routed payment!"]},{expectedSolvency:G}),console.log(`

\uD83D\uDEA8\uD83D\uDEA8\uD83D\uDEA8 PAYMENT SECTION START \uD83D\uDEA8\uD83D\uDEA8\uD83D\uDEA8
`);let a=()=>{let C1=$.pendingOutputs||[];console.log(`   pending: [${C1.map((s5)=>s5.entityId.slice(-4)).join(",")}]`)};console.log(`
 FRAME 10: Off-Chain Payment A  H  B ($125K)`);let X0=r1(125000),{deriveDelta:n0}=await Promise.resolve().then(() => (y9(),yL));console.log("\uD83C\uDFC3 FRAME 10: Alice initiates HTLC AHB $125K");let W0=Y.nextHashlock();await X($,[{entityId:C.id,signerId:C.signer,entityTxs:[{type:"htlcPayment",data:{targetEntityId:B.id,tokenId:w1,amount:X0,route:[C.id,L.id,B.id],description:"HTLC Payment 1 of 2",secret:W0.secret,hashlock:W0.hashlock}}]}]),a(),await q8($,"Frame 10: Alice initiates AHB",{title:"Payment 1/2: Alice  Hub",what:"Alice sends $125K, Hub receives and forwards proposal to Bob"},{expectedSolvency:G}),console.log("\uD83C\uDFC3 FRAME 11: Hub forwards, Alice commits"),await X($),a(),await q8($,"Frame 11: Hub forwards to Bob",{title:"Payment 1/2: Hub  Bob proposal",what:"Hub-Alice commits, Hub proposes to Bob"},{expectedSolvency:G}),console.log("\uD83C\uDFC3 FRAME 12: Bob ACKs Hub"),await X($),a(),console.log("\uD83C\uDFC3 FRAME 13: Hub commits H-B"),await X($),a();let V0=XQ($,C.id,L.id,w1),H1=XQ($,L.id,B.id,w1);console.log("   \uD83D\uDD12 HTLC Status: Locks created, awaiting reveal"),console.log(`   A-H delta: ${V0} (still 0 - locked, not settled)`),console.log(`   H-B delta: ${H1} (still 0 - locked, not settled)`);let[,D0]=L5($,C.id),[,j0]=L5($,L.id),[,g1]=L5($,B.id);if(console.log(`   \uD83D\uDCD6 Alice lockBook size: ${D0.state.lockBook.size} (cleared after reveal)`),console.log(`   \uD83D\uDCD6 Hub lockBook size: ${j0.state.lockBook.size} (cleared after reveal)`),console.log(`   \uD83D\uDCD6 Bob lockBook size: ${g1.state.lockBook.size} (cleared after reveal)`),D0.state.lockBook.size===0&&j0.state.lockBook.size===0)console.log("    HTLC auto-reveal and settlement complete");else console.log(`     HTLC still settling (Alice lockBook: ${D0.state.lockBook.size}, Hub: ${j0.state.lockBook.size})`),console.log("      Codex safety fixes may require more bilateral consensus rounds");let{calculateHtlcFeeAmount:T0}=await Promise.resolve().then(() => (zJ(),KM)),R0=T0(X0);if(console.log("   \uD83D\uDCB0 Delta verification after HTLC settlement:"),console.log(`   A-H delta: ${V0} (expected: -${X0})`),console.log(`   H-B delta: ${H1} (expected: -${X0-R0}, fee=${R0})`),V0===-X0&&Math.abs(Number(H1+(X0-R0)))<10000000000)console.log("    Deltas correct - payment settled"),console.log(`   Hub HTLC fees: ${j0.state.htlcFeesEarned}`),console.log(`    Onion routing + fees verified
`);else console.log("     HTLC settlement in progress or delayed by Codex safety checks"),console.log(`      A-H delta: ${V0} (expected: -${X0})`),console.log(`      H-B delta: ${H1} (expected: -${X0-R0})
`);if((g1.state.jBatchState?.batch.revealSecrets.length||0)>0){console.log("\uD83C\uDFE6 FRAME 13b: Bob broadcasts HTLC reveal to J-machine"),await X($,[{entityId:B.id,signerId:B.signer,entityTxs:[{type:"j_broadcast",data:{}}]}]),$.timestamp+=350,await X($),await DJ($),await X($);let[,C1]=L5($,L.id),s5=C1.state.messages.find((G2)=>G2.includes("HTLC reveal observed"));rb(s5,"HTLC reveal j-event not applied",$)}else console.log("  No HTLC reveal queued for on-chain broadcast");console.log(`
`),console.log("\uD83D\uDD12 HTLC: Locks created, continuing to test reveal..."),console.log(`
`),await q8($,"Frame 13: Payment 1 complete",{title:"Payment 1/2 Complete",what:"AHB $125K done. A-H shift: -$125K, H-B shift: -$125K"},{expectedSolvency:G});let B0=r1(125000);console.log(`
\uD83C\uDFC3 FRAME 14: Alice initiates second AHB $125K`),await X($,[{entityId:C.id,signerId:C.signer,entityTxs:[{type:"directPayment",data:{targetEntityId:B.id,tokenId:w1,amount:B0,route:[C.id,L.id,B.id],description:"Payment 2 of 2"}}]}]),a(),await q8($,"Frame 14: Alice initiates second payment",{title:"Payment 2/2: Alice  Hub",what:"Second $125K payment to reach $250K total shift"},{expectedSolvency:G}),console.log("\uD83C\uDFC3 FRAME 15: Hub forwards, Alice commits A-H"),await X($),a(),await q8($,"Frame 15: Hub forwards second payment",{title:"Payment 2/2: Hub  Bob proposal"},{expectedSolvency:G}),console.log("\uD83C\uDFC3 FRAME 16: Bob ACKs Hub"),await X($),a(),console.log("\uD83C\uDFC3 FRAME 17: Hub commits H-B"),await X($),a(),console.log("\uD83C\uDFC3 FRAME 18: Alice commits A-H reveal"),await X($),a(),console.log("\uD83C\uDFC3 FRAME 19: Hub ACKs Alice"),await X($),a();let C0=T0(X0),g6=XQ($,C.id,L.id,w1),m0=XQ($,L.id,B.id,w1),l0=-(X0+B0),C6=-(X0-C0+B0);if(g6!==l0)throw Error(` ASSERTION FAILED: A-H shift=${g6}, expected ${l0}`);if(m0!==C6)throw Error(` ASSERTION FAILED: H-B shift=${m0}, expected ${C6} (includes fee=${C0})`);console.log(` Total shift verified: A-H=${g6}, H-B=${m0} (fee=${C0})`);let y0=X0-C0+B0,[,u0]=L5($,B.id),d0=u0.state.accounts.get(B.id)?.deltas.get(w1);if(d0){let C1=E5(B.id,L.id),s5=n0(d0,C1);if(console.log(`   Bob outCapacity: ${s5.outCapacity} (received $${Number(y0)/1000000000000000000})`),s5.outCapacity!==y0)throw Error(` ASSERTION FAILED: Bob outCapacity=${s5.outCapacity}, expected ${y0}`)}await q8($,"Frame 17: Both payments complete - $250K shifted",{title:" Payments Complete: $250K AB",what:"Two $125K payments complete. Total: $250K shifted from Alice to Bob via Hub.",why:"Hub now has $250K uninsured liability to Bob (TR=$250K). Rebalancing needed!",keyMetrics:["A-H shift: -$250K (Alice paid Hub)","H-B shift: -$250K (Hub owes Bob)","TR (Total Risk): $250K uninsured"]},{expectedSolvency:G}),console.log(`
\uD83D\uDCB8 PHASE 4: REVERSE PAYMENT: BHA ($50K)`);let v0=r1(50000);console.log("\uD83C\uDFC3 FRAME 18: Bob initiates BHA $50K"),await X($,[{entityId:B.id,signerId:B.signer,entityTxs:[{type:"directPayment",data:{targetEntityId:C.id,tokenId:w1,amount:v0,route:[B.id,L.id,C.id],description:"Reverse payment: Bob pays Alice"}}]}]),a();let o6=XQ($,B.id,L.id,w1),i0=XQ($,L.id,C.id,w1);console.log(`   After Bob initiates: B-H offdelta=${o6}, H-A offdelta=${i0}`),await q8($,"Frame 18: Bob initiates BHA",{title:"Reverse Payment: Bob  Hub",what:"Bob sends $50K to Alice via Hub. First hop: BH"},{expectedSolvency:G}),console.log("\uD83C\uDFC3 FRAME 19: Hub receives BH, forwards to Alice"),await X($),a();let c0=XQ($,B.id,L.id,w1),M5=XQ($,C.id,L.id,w1);console.log(`   After Hub forwards: B-H offdelta=${c0}, A-H offdelta=${M5}`);let _0=-(X0-C0+B0)+v0;if(c0!==_0)throw Error(`B-H shift unexpected: got ${c0}, expected ${_0}`);await q8($,"Frame 19: Hub forwards to Alice",{title:"Reverse Payment: Hub  Alice",what:"Hub receives BH and forwards HA proposal"},{expectedSolvency:G}),console.log("\uD83C\uDFC3 FRAME 20: Alice ACKs Hub"),await X($),a(),console.log("\uD83C\uDFC3 FRAME 21: Hub commits H-A (reverse payment complete)"),await X($),a();let d=XQ($,C.id,L.id,w1),$0=XQ($,B.id,L.id,w1),G0=-(X0+B0)+v0,O0=-(X0-C0+B0)+v0;if(d!==G0)throw Error(` REVERSE PAYMENT FAIL: A-H offdelta=${d}, expected ${G0}`);if($0!==O0)throw Error(` REVERSE PAYMENT FAIL: B-H offdelta=${$0}, expected ${O0} (fee=${C0})`);console.log(` Reverse payment BHA verified: A-H=${d}, B-H=${$0} (fee=${C0})`),await q8($,"Frame 21: Reverse payment complete",{title:" Reverse Payment: $50K BA",what:"Bob paid Alice $50K via Hub. Net position: $200K shifted AB.",keyMetrics:["A-H shift: -$200K (was -$250K)","B-H shift: -$200K (was -$250K)","TR: $200K (reduced from $250K)"]},{expectedSolvency:G}),console.log(`

\uD83D\uDD04\uD83D\uDD04\uD83D\uDD04 REBALANCING SECTION START \uD83D\uDD04\uD83D\uDD04\uD83D\uDD04
`);let s0=r1(200000);console.log(`
\uD83C\uDFE6 FRAME 22: Creating unified rebalancing batch (A-H + H-B)`);let[,E0]=L5($,C.id),[,S0]=L5($,L.id),[,T5]=L5($,B.id),g0=E0.state.accounts.get(L.id)?.deltas.get(w1)?.collateral||0n,p0=S0.state.accounts.get(B.id)?.deltas.get(w1)?.collateral||0n,_6=S0.state.reserves.get(String(w1))||0n;console.log("   Pre-settlement state:"),console.log(`     A-H collateral: ${g0}`),console.log(`     H-B collateral: ${p0}`),console.log(`     Hub reserve: ${_6}`);let h0=E5(C.id,L.id),o0=h0?0n:s0,S6=h0?s0:0n,m1=h0?s0:-s0,k1=E5(L.id,B.id),g5=k1?-s0:0n,P5=k1?0n:-s0,v1=k1?s0:-s0,o1=[{tokenId:w1,leftDiff:o0,rightDiff:S6,collateralDiff:-s0,ondeltaDiff:m1}],Y6=[{tokenId:w1,leftDiff:g5,rightDiff:P5,collateralDiff:s0,ondeltaDiff:v1}],J6=await z.signSettlement(L.id,C.id,o1,[],[]),_5=await z.signSettlement(L.id,B.id,Y6,[],[]);await X($,[{entityId:L.id,signerId:L.signer,entityTxs:[{type:"createSettlement",data:{counterpartyEntityId:C.id,diffs:o1,sig:J6}},{type:"createSettlement",data:{counterpartyEntityId:B.id,diffs:Y6,sig:_5}}]}]),console.log(" Settlement batch created via createSettlement EntityTxs (2 settlements)"),await q8($,"Frame 22: Rebalancing batch created",{title:"Rebalancing: Unified Batch Ready",what:"Hub created ONE batch with 2 settlements: pull from Alice, deposit to Bob.",why:"Batching is efficient. One J-block processes both operations atomically.",tradfiParallel:"Like ACH batch file: multiple transfers in single settlement instruction.",keyMetrics:["Settlement 1: A-H collateral -$200K","Settlement 2: H-B collateral +$200K","Total operations: 2 (in 1 batch)"]},{expectedSolvency:G}),console.log(`
\uD83C\uDFE6 FRAME 23: Hub broadcasts jBatch to J-Machine`),await X($,[{entityId:L.id,signerId:L.signer,entityTxs:[{type:"j_broadcast",data:{}}]}]),console.log(" j_broadcast sent  should create YELLOW CUBE in J-mempool"),await q8($,"Frame 23: jBatch in J-mempool (PENDING)",{title:"J-Mempool: Yellow Cube",what:"Settlement batch sits in J-Machine mempool (yellow cube). Will process after blockDelayMs.",why:"Visual feedback: batch is queued, not yet executed. Realistic blockchain delay.",tradfiParallel:"Like SWIFT queue: message sent, awaiting settlement window.",keyMetrics:["J-mempool: 1 batch (2 settlements)","Block delay: 300ms","Status: PENDING"]},{expectedSolvency:G}),console.log(`
\uD83C\uDFE6 FRAME 24: Advancing time for J-Machine block processing...`),$.timestamp+=350,console.log("    Time advanced: +350ms (blockDelayMs = 300ms)"),console.log("   Triggering runtime tick to process J-mempool..."),await X($),await DJ($),await X($),a();let[,S5]=L5($,C.id),[,F5]=L5($,L.id),[,h5]=L5($,B.id),z6=S5.state.accounts.get(L.id)?.deltas.get(w1),n6=g0-s0;if(!z6||z6.collateral!==n6){let C1=z6?.collateral||0n;throw Error(` ASSERT FAIL: A-H collateral = ${C1}, expected ${n6}`)}console.log(` ASSERT: A-H collateral ${g0}  ${z6.collateral} (-$200K) `);let b6=F5.state.accounts.get(B.id)?.deltas.get(w1),r6=p0+s0;if(!b6||b6.collateral!==r6){let C1=b6?.collateral||0n;throw Error(` ASSERT FAIL: H-B collateral = ${C1}, expected ${r6}`)}console.log(` ASSERT: H-B collateral ${p0}  ${b6.collateral} (+$200K) `);let XX=F5.state.reserves.get(String(w1))||0n;if(XX!==_6)throw Error(` ASSERT FAIL: Hub reserve changed: ${_6}  ${XX} (should be unchanged)`);console.log(` ASSERT: Hub reserve ${_6} (unchanged - pulled/deposited $200K) `),await q8($,"Frame 24: Rebalancing complete (atomic)",{title:"Rebalancing Complete",what:"ONE batch executed BOTH settlements atomically. TR = $0.",why:"Batching proves efficiency. Hub pulled from Alice, deposited to Bob, all in 1 J-block.",tradfiParallel:"Like FedACH batch processing: multiple operations, single settlement window.",keyMetrics:["A-H collateral: $500K  $300K (-$200K)","H-B collateral: $0  $200K (+$200K)","Hub reserve: unchanged (net zero)","Total Risk: $0 (fully balanced)"]},{expectedSolvency:G}),console.log(`
`),console.log(" PHASE 6: HTLC TIMEOUT TEST"),console.log(`
`),console.log(`\uD83D\uDCCB Creating test entity Charlie for timeout scenario...
`),await N($,{runtimeTxs:[{type:"importReplica",entityId:"0x"+"6".padStart(64,"0"),signerId:"6",data:{isProposer:!0,position:{x:400,y:0,z:0},config:{mode:"proposer-based",threshold:1n,validators:["6"],shares:{"6":1n}}}}],entityInputs:[]});let o8={id:"0x"+"6".padStart(64,"0"),signer:"6"};console.log(` Created Charlie ${o8.id.slice(-4)}
`),await X($,[{entityId:o8.id,signerId:o8.signer,entityTxs:[{type:"deposit_collateral",data:{jurisdictionId:"AHB Demo",tokenId:w1,amount:r1(1e5)}}]}]),await X($,[{entityId:L.id,signerId:L.signer,entityTxs:[{type:"openAccount",data:{targetEntityId:o8.id}}]}]),await l2($),await X($,[{entityId:L.id,signerId:L.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:o8.id,tokenId:w1,amount:r1(50000)}}]},{entityId:o8.id,signerId:o8.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:L.id,tokenId:w1,amount:r1(50000)}}]}]),await l2($),console.log(` Hub-Charlie account ready (both sides have credit)
`),await DJ($),await l2($);let[,zQ]=L5($,o8.id);console.log(`   Charlie lastFinalizedJHeight after sync: ${zQ.state.lastFinalizedJHeight||0}
`);let EU=$.jReplicas.get("AHB Demo")?.blockNumber||0n,QW=Number(EU)+3;console.log(`\uD83D\uDCCB Hub creates HTLC to Charlie (no secret), expires at height ${QW}
`);let{generateLockId:kT}=await Promise.resolve().then(() => (zJ(),KM)),{secret:jJ,hashlock:ZW}=Y.nextHashlock(),lM=kT(ZW,QW,0,$.timestamp);console.log(`   Lock ID: ${lM.slice(0,16)}...`),console.log(`   Hashlock: ${ZW.slice(0,16)}...`),console.log(`   Secret withheld from Charlie (will timeout)
`),await X($,[{entityId:L.id,signerId:L.signer,entityTxs:[{type:"manualHtlcLock",data:{counterpartyId:o8.id,lockId:lM,hashlock:ZW,timelock:BigInt($.timestamp+20000),revealBeforeHeight:QW,amount:r1(1e4),tokenId:w1}}]}]),await l2($);let[,XW]=L5($,L.id),[,iM]=L5($,o8.id),qQ=XW.state.accounts.get(o8.id),oM=iM.state.accounts.get(L.id),xT=qQ?.deltas.get(w1)?.offdelta||0n,_v=r1(1e4);console.log(`\uD83D\uDCB0 Hub-Charlie offdelta BEFORE lock: ${xT}`),console.log(`\uD83D\uDD10 Hub-Charlie account locks: ${qQ?.locks.size||0}`),console.log(`\uD83D\uDD10 Charlie-Hub account locks: ${oM?.locks.size||0}`),console.log(`\uD83D\uDCD6 Hub lockBook size: ${XW.state.lockBook.size}
`);let IU=qQ?.mempool.some((C1)=>C1.type==="htlc_lock"),YW=(qQ?.locks.size||0)>0||(oM?.locks.size||0)>0;if(!IU&&!YW)console.log("  HTLC lock not created (likely rejected by validation - shortExpiry may be invalid)"),console.log(`   Hub-Charlie mempool: ${qQ?.mempool.length||0} txs`),console.log(`   Skipping timeout test (validation safety checks working!)
`);else{if(console.log(` HTLC lock exists (mempool=${IU}, committed=${YW})
`),IU||YW){let C1=$.jReplicas.get("AHB Demo"),s5=Number(C1?.blockNumber||0n);console.log(`
 Timeout test: Advancing time (lock expires at height ${QW})...
`);for(let Y3=0;Y3<10;Y3++)$.timestamp+=5000,await X($);let U2=L5($,L.id)[1].state.accounts.get(o8.id);console.log(`\uD83D\uDD10 Hub-Charlie locks after timeout advance: ${U2?.locks.size||0}
`);let Z7=U2?.deltas.get(w1)?.offdelta||0n;if(console.log(`\uD83D\uDCB0 Hub-Charlie offdelta AFTER timeout: ${Z7}`),(U2?.locks.size||0)===0){console.log(" HTLC timeout processing verified");let Y3=U2?.deltas.get(w1)?.leftHtlcHold||0n,qX=L.id<o8.id?"leftHtlcHold":"rightHtlcHold",WX=U2?.deltas.get(w1)?.[qX]||0n;if(WX===0n)console.log(` H4: HTLC hold released (${qX} = 0)`);else console.log(`  H4: HTLC hold still present: ${WX}`);console.log(` H4: Timeout refund verified
`)}else console.log(`     Lock still pending (crontab needs entity.timestamp sync)
`)}console.log(`    Timeout infrastructure: Crontab + handler + dual-check complete
`)}console.log(`
`),console.log("\uD83C\uDF10 PHASE 7: 4-HOP HTLC ROUTE TEST"),console.log(`
`),console.log(`\uD83D\uDCCB Creating Hub2 for 4-hop test...
`),await N($,{runtimeTxs:[{type:"importReplica",entityId:"0x"+"5".padStart(64,"0"),signerId:"5",data:{isProposer:!0,position:{x:200,y:0,z:0},config:{mode:"proposer-based",threshold:1n,validators:["5"],shares:{"5":1n}}}}],entityInputs:[]});let m9={id:"0x"+"5".padStart(64,"0"),signer:"5"};console.log(` Created Hub2 ${m9.id.slice(-4)}
`),await X($,[{entityId:m9.id,signerId:m9.signer,entityTxs:[{type:"deposit_collateral",data:{jurisdictionId:"AHB Demo",tokenId:w1,amount:r1(500000)}}]}]),await X($,[{entityId:L.id,signerId:L.signer,entityTxs:[{type:"openAccount",data:{targetEntityId:m9.id}}]}]),await l2($),await X($,[{entityId:m9.id,signerId:m9.signer,entityTxs:[{type:"openAccount",data:{targetEntityId:B.id}}]}]),await l2($),await X($,[{entityId:L.id,signerId:L.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:m9.id,tokenId:w1,amount:r1(1e5)}}]},{entityId:m9.id,signerId:m9.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:L.id,tokenId:w1,amount:r1(1e5)}},{type:"extendCredit",data:{counterpartyEntityId:B.id,tokenId:w1,amount:r1(1e5)}}]},{entityId:B.id,signerId:B.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:m9.id,tokenId:w1,amount:r1(1e5)}}]}]),await l2($),console.log(` 4-hop topology ready: Alice  Hub  Hub2  Bob
`);let _U=r1(25000);console.log(`\uD83D\uDD12 Alice initiates 4-hop HTLC: Alice  Hub  Hub2  Bob ($25k)
`);let SU=Y.nextHashlock();await X($,[{entityId:C.id,signerId:C.signer,entityTxs:[{type:"htlcPayment",data:{targetEntityId:B.id,route:[C.id,L.id,m9.id,B.id],tokenId:w1,amount:_U,description:"4-hop onion routing test",secret:SU.secret,hashlock:SU.hashlock}}]}]),await l2($);for(let C1=0;C1<5;C1++)await X($);console.log(`\uD83D\uDD0D Verifying 4-hop settlement...
`);let[,Sv]=L5($,C.id),[,YX]=L5($,m9.id),JW=Sv.state.accounts.get(L.id),JX=JW?.locks.size||0;if(console.log(`   Locks after 4-hop: Alice-Hub=${JX}`),console.log(`   Alice-Hub mempool: ${JW?.mempool.length||0}`),console.log(`   Alice-Hub pendingFrame: ${JW?.pendingFrame?.height||"none"}
`),JX>0)console.log(`     4-hop HTLC still settling (lock count: ${JX})`),console.log("      This is expected - 4 hops need more bilateral consensus rounds"),console.log(`      In production, this completes automatically
`);else rb(JX===0,"4-hop: All locks cleared after reveal");let[,nM]=L5($,L.id);console.log(`   Hub total fees: ${nM.state.htlcFeesEarned||0n}`),console.log(`   Hub2 fees: ${YX.state.htlcFeesEarned||0n}
`),console.log(` 4-HOP HTLC VERIFIED - Privacy-preserving multi-hop routing works!
`),console.log(`
`),console.log("\uD83D\uDD13 PHASE 8: HTLC HOSTAGE REVEAL TEST"),console.log(`
`);let L9=Y.nextHashlock(),a3=$.jReplicas.get("AHB Demo")?.blockNumber||0n,zW=Number(a3)+100,fU=kT(L9.hashlock,zW,0,$.timestamp),bT=r1(5000);console.log("\uD83D\uDCCB Creating HTLC HubBob that Bob will reveal on-chain"),console.log(`   LockId: ${fU.slice(0,16)}...`),console.log(`   Hashlock: ${L9.hashlock.slice(0,16)}...`),console.log(`   Secret: ${L9.secret.slice(0,16)}...
`),await X($,[{entityId:L.id,signerId:L.signer,entityTxs:[{type:"manualHtlcLock",data:{counterpartyId:B.id,lockId:fU,hashlock:L9.hashlock,timelock:BigInt($.timestamp+1e5),revealBeforeHeight:zW,amount:bT,tokenId:w1}}]}]),await l2($);let[,kU]=L5($,L.id),[,qW]=L5($,B.id),xU=kU.state.accounts.get(B.id),bU=qW.state.accounts.get(L.id);if(console.log(`\uD83D\uDD10 Hub-Bob locks: ${xU?.locks.size||0}`),console.log(`\uD83D\uDD10 Bob-Hub locks: ${bU?.locks.size||0}`),!qW.state.htlcRoutes)qW.state.htlcRoutes=new Map;qW.state.htlcRoutes.set(L9.hashlock,{hashlock:L9.hashlock,secret:L9.secret,inboundEntity:L.id,outboundEntity:void 0,inboundLockId:fU,outboundLockId:void 0}),console.log(` Bob now has the secret in htlcRoutes
`),console.log("\uD83D\uDD12 HOSTAGE: Hub goes offline - Bob cannot reveal bilaterally"),console.log(`   Bob's only option: Dispute and reveal on-chain
`),console.log("  STEP 1: Bob calls disputeStart on Hub-Bob account..."),await X($,[{entityId:B.id,signerId:B.signer,entityTxs:[{type:"disputeStart",data:{counterpartyEntityId:L.id,description:"Hostage: Hub offline, revealing secret on-chain"}}]}]),await l2($),console.log("\uD83D\uDCE1 STEP 2: Bob broadcasts jBatch to J-machine..."),await X($,[{entityId:B.id,signerId:B.signer,entityTxs:[{type:"j_broadcast",data:{}}]}]),console.log(" STEP 3: Waiting for J-machine to process + events...");for(let C1=0;C1<20;C1++){$.timestamp+=350,await l2($);let s5=$.jReplicas?.get("AHB Demo");if(s5&&s5.mempool.length===0)break}await DJ($),await l2($);let[,WW]=L5($,B.id),vU=WW.state.accounts.get(L.id);rb(!!vU?.activeDispute,"Dispute started on Bob-Hub account"),console.log(` Dispute started (initialNonce: ${vU?.activeDispute?.initialDisputeNonce})
`);let rM=vU.activeDispute.disputeTimeout;console.log(` STEP 4: Waiting for dispute timeout (target block: ${rM})...`);let{createEmptyBatch:RJ,encodeJBatch:NJ,computeBatchHankoHash:aM}=await Promise.resolve().then(() => (c6(),n9)),{signHashesAsSingleEntity:sM}=await Promise.resolve().then(() => (F2(),S4));while(!0){let C1=z.getBlockNumber();if(C1>=rM){console.log(` Timeout reached at block ${C1}`);break}let s5=RJ(),G2=NJ(s5),U2=z.getChainId(),Z7=z.getDepositoryAddress(),Y3=z.getEntityProviderAddress(),qX=await z.getEntityNonce(B.id)+1n,WX=aM(U2,Z7,G2,qX),hU=(await sM($,B.id,B.signer,[WX]))[0];if(!hU)throw Error("Failed to build empty batch hanko");await z.processBatch(G2,Y3,hU,qX),await X($)}let[,KW]=L5($,B.id);if(!KW.state.jBatchState)KW.state.jBatchState={batch:{reserveToCollateral:[],collateralToReserve:[],reserveToReserve:[],revealSecrets:[]},pendingDisputeProofs:[]};let CJ=KW.state.jBatchState.batch.revealSecrets.length;console.log("\uD83D\uDCE4 Bob calls disputeFinalize with useOnchainRegistry: true..."),await X($,[{entityId:B.id,signerId:B.signer,entityTxs:[{type:"disputeFinalize",data:{counterpartyEntityId:L.id,useOnchainRegistry:!0,description:"Hostage reveal: secret goes to on-chain registry"}}]}]),await l2($);let[,GW]=L5($,B.id),yU=GW.state.jBatchState?.batch.revealSecrets||[],UW=yU.some((C1)=>C1.secret===L9.secret);if(console.log(`
\uD83D\uDD0D HOSTAGE REVEAL VERIFICATION:`),console.log(`   Secrets before: ${CJ}`),console.log(`   Secrets after: ${yU.length}`),console.log(`   Our secret revealed: ${UW}`),UW)console.log(`
 HOSTAGE TEST PASSED: Secret revealed to on-chain registry!`),console.log("   Bob saved himself despite Hub being offline"),console.log(`   On-chain transformer will unlock Bob's funds
`);else if(!GW.state.accounts.get(L.id)?.activeDispute)console.log(`
  Dispute finalized but secret not in revealSecrets`),console.log("   This may be expected if transformer address not set"),console.log(`   The useOnchainRegistry code path was exercised
`);else console.log(`
 HOSTAGE TEST ISSUE: Secret NOT revealed to on-chain registry`),console.log("   Check: collectHtlcSecrets() and batchAddRevealSecret()");console.log(`
\uD83D\uDD0C PHASE 9: Minimal offline sim (drop Hub for 1 tick)`);let VW=r1(1);await X($,[{entityId:C.id,signerId:C.signer,entityTxs:[{type:"directPayment",data:{targetEntityId:L.id,tokenId:w1,amount:VW,route:[C.id,L.id],description:"Offline sim: AH"}}]}]);let zX=$.pendingOutputs?[...$.pendingOutputs]:[],X3=zX.filter((C1)=>C1.entityId===L.id);$.pendingOutputs=zX.filter((C1)=>C1.entityId!==L.id),console.log(`\uD83D\uDD0C Offline: dropped ${X3.length} outputs to Hub for 1 tick`),await X($),$.pendingOutputs=[...$.pendingOutputs||[],...X3],console.log(`\uD83D\uDD0C Online: requeued ${X3.length} outputs to Hub`),await l2($),await X($,[{entityId:L.id,signerId:L.signer,entityTxs:[{type:"directPayment",data:{targetEntityId:C.id,tokenId:w1,amount:VW,route:[L.id,C.id],description:"Offline sim: HA (net zero)"}}]}]),await l2($),console.log(" Offline sim complete (state converged)"),console.log(`
\uD83D\uDD0D FINAL VERIFICATION: All bilateral accounts...`),PT($,C.id,L.id,w1,"FINAL - Alice-Hub"),PT($,L.id,B.id,w1,"FINAL - Hub-Bob"),console.log(`
`+"".repeat(80)),console.log("\uD83D\uDCCA FINAL RUNTIME STATE (ASCII - Human Readable)"),console.log("".repeat(80)),console.log(h2($,{maxAccounts:10,maxLocks:20,showMempool:!1})),console.log("".repeat(80)+`
`),console.log(`
=====================================`),console.log(" HTLC AHB Demo Complete!"),console.log("Phase 1: R2R reserve distribution"),console.log("Phase 2: Bilateral accounts + R2C + credit"),console.log("Phase 3: Two payments AHB ($250K total)"),console.log("Phase 4: Reverse payment BHA ($50K) - net $200K"),console.log("Phase 5: Rebalancing - TR $200K  $0"),console.log("Phase 6: HTLC Timeout test"),console.log("Phase 7: 4-Hop HTLC route test"),console.log("Phase 8: HTLC hostage reveal test"),console.log("Phase 9: Offline simulation"),console.log(`=====================================
`),console.log(`[AHB] History frames: ${$.history?.length}`),$=await yb($),$X($,"HTLC AHB")}finally{Q(),$.scenarioMode=!1,Z(!1)}}var w1=1,nq,k30,ab=null;var tb=p(async()=>{A2();$Q();uq();u2();UJ();y9();A6();nb();nq=r1(1e7),k30=r1(1e6)});async function b30($,Q){let{applyRuntimeInput:Z}=await Promise.resolve().then(() => (l5(),a5)),{getProcess:X}=await Promise.resolve().then(() => (u2(),bM)),Y=await X();console.log(`\uD83C\uDFD7  Creating economy: ${Q.numHubs} hubs  ${Q.usersPerHub} users/hub
`);let z=[],J=[],q=[],W=1;for(let G=0;G<Q.numHubs;G++){let U={id:"0x"+W.toString(16).padStart(64,"0"),signer:String(W),name:`Hub${G+1}`,type:"hub"};z.push(U),q.push(U),W++}for(let G=0;G<Q.numHubs;G++){let U=[];for(let D=0;D<Q.usersPerHub;D++){let P={id:"0x"+W.toString(16).padStart(64,"0"),signer:String(W),name:`User${G+1}.${D+1}`,type:"user"};U.push(P),q.push(P),W++}J.push(U)}return console.log(`   Creating ${q.length} entities...`),await Z($,{runtimeTxs:q.map((G)=>({type:"importReplica",entityId:G.id,signerId:G.signer,data:{isProposer:!0,position:{x:0,y:0,z:0},config:{mode:"proposer-based",threshold:1n,validators:[G.signer],shares:{[G.signer]:1n}}}})),entityInputs:[]}),console.log(`    Created ${z.length} hubs, ${q.length-z.length} users
`),console.log(`   Depositing ${Q.initialCollateral} collateral for each entity...`),await Y($,q.map((G)=>({entityId:G.id,signerId:G.signer,entityTxs:[{type:"depositCollateral",data:{jurisdictionId:Q.jurisdictionName,tokenId:Q.tokenId,amount:Q.initialCollateral}}]}))),console.log(`    All entities funded
`),{hubs:z,users:J,all:q}}async function x30($,Q,Z,X,Y){let{getProcess:z}=await Promise.resolve().then(() => (u2(),bM)),J=await z();await J($,[{entityId:Q.id,signerId:Q.signer,entityTxs:[{type:"openAccount",data:{targetEntityId:Z.id}}]}]),await eb($),await J($,[{entityId:Q.id,signerId:Q.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:Z.id,tokenId:Y,amount:X}}]},{entityId:Z.id,signerId:Z.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:Q.id,tokenId:Y,amount:X}}]}]),await eb($)}async function v30($,Q,Z,X,Y){console.log(`\uD83D\uDD17 Connecting economy channels...
`),console.log(`   Connecting ${Q.length} hubs (mesh)...`);for(let z=0;z<Q.length;z++)for(let J=z+1;J<Q.length;J++)await x30($,Q[z],Q[J],X,Y),console.log(`    ${Q[z].name}  ${Q[J].name}`);console.log(`
   Connecting users to hubs...`);for(let z=0;z<Q.length;z++)for(let J of Z[z])await x30($,Q[z],J,X,Y),console.log(`    ${Q[z].name}  ${J.name}`);console.log(`
    Economy connected!
`)}async function eb($,Q=10){let{getProcess:Z}=await Promise.resolve().then(() => (u2(),bM)),X=await Z();for(let Y=0;Y<Q;Y++){await X($);let z=!1;for(let[,J]of $.eReplicas){for(let[,q]of J.state.accounts)if(q.mempool.length>0||q.pendingFrame){z=!0;break}if(z)break}if(!z)return}}async function y30($,Q,Z,X,Y,z,J,q){let{getProcess:W}=await Promise.resolve().then(() => (u2(),bM)),G=await W();console.log(`\uD83D\uDD12 Testing HTLC: ${Q.name}  ${X.map((U)=>U.name).join("  ")}  ${Z.name}`),console.log(`   Amount: ${Y}, Hops: ${X.length}
`),await G($,[{entityId:Q.id,signerId:Q.signer,entityTxs:[{type:"htlcPayment",data:{targetEntityId:Z.id,route:[Q.id,...X.map((U)=>U.id),Z.id],tokenId:z,amount:Y,description:J,...q?.secret&&{secret:q.secret},...q?.hashlock&&{hashlock:q.hashlock}}}]}]),await eb($),console.log(`    HTLC complete
`)}async function i2($){let{getBrowserVMInstance:Q,setBrowserVMJurisdiction:Z}=await Promise.resolve().then(() => (A2(),$Z)),X=Q($);if(!X){let{BrowserVMProvider:Y}=await Promise.resolve().then(() => ($Q(),zU));X=new Y,await X.init(),$.browserVM=X;let z=X.getDepositoryAddress();Z($,z,X)}return X}function Q7($,Q,Z,X={x:0,y:600,z:0}){if(!$.jReplicas)$.jReplicas=new Map;let Y={name:Q,blockNumber:0n,stateRoot:new Uint8Array(32),mempool:[],blockDelayMs:300,lastBlockTimestamp:$.timestamp,position:X,contracts:{depository:Z,entityProvider:"0x0000000000000000000000000000000000000000"}};return $.jReplicas.set(Q,Y),$.activeJurisdiction=Q,Y}function rq($,Q){return{name:$,chainId:31337,entityProviderAddress:"0x0000000000000000000000000000000000000000",depositoryAddress:Q,rpc:"browservm://"}}async function $v($,Q,Z,X,Y){let z="0x"+Q.toString(16).padStart(64,"0"),J=`${Q}`,{applyRuntimeInput:q}=await Promise.resolve().then(() => (l5(),a5));return await q($,{runtimeTxs:[{type:"importReplica",entityId:z,signerId:J,data:{isProposer:!0,position:Y,config:{mode:"proposer-based",threshold:1n,validators:[J],shares:{[J]:1n},jurisdiction:X}}}],entityInputs:[]}),z}async function g30($,Q,Z,X={x:0,y:0,z:0},Y=40){let z=[],J=1;for(let q=0;q<Q.z;q++)for(let W=0;W<Q.y;W++)for(let G=0;G<Q.x;G++){let U=X.x+(G-Q.x/2+0.5)*Y,D=X.y+(W-Q.y/2+0.5)*Y,P=X.z+(q-Q.z/2+0.5)*Y,H=await $v($,J,`Node${J}`,Z,{x:U,y:D,z:P});z.push(H),J++}return z}var h30={};x1(h30,{htlc4hop:()=>JA0});function Qv($,Q){if(!$)throw Error(` ASSERT: ${Q}`);console.log(` ${Q}`)}function gM($,Q){let Z=Array.from($.eReplicas.entries()).find(([X])=>X.startsWith(Q+":"));if(!Z)throw Error(`Replica for ${Q} not found`);return Z}async function JA0($){let Q=L8($,"HTLC 4-Hop"),Z=$.scenarioMode;try{$.scenarioMode=!0,h9($,"HTLC 4-Hop"),N9($,["1","2","3","4","5","6"],"HTLC 4-Hop");let X=MT($);console.log(""),console.log("          HTLC 4-HOP ONION ROUTING TEST                    "),console.log(`
`);let z=(await i2($)).getDepositoryAddress();Q7($,"4-Hop Demo",z);let{hubs:J,users:q,all:W}=await b30($,{numHubs:3,usersPerHub:1,initialCollateral:r1(500000),creditLimit:r1(200000),tokenId:yM,jurisdictionName:"4-Hop Demo"}),[G,U,D]=J,P=q[0][0],H=q[2][0];console.log("\uD83D\uDCCB Entities created:"),console.log(`   Alice: ${P.id.slice(-4)} (user, connected to ${G.name})`),console.log(`   ${G.name}: ${G.id.slice(-4)}`),console.log(`   ${U.name}: ${U.id.slice(-4)}`),console.log(`   ${D.name}: ${D.id.slice(-4)}`),console.log(`   Bob: ${H.id.slice(-4)} (user, connected to ${D.name})
`),await v30($,J,q,r1(200000),yM),console.log(`
`),console.log("\uD83D\uDE80 TESTING 4-HOP HTLC WITH CONCURRENT PAYMENTS"),console.log(`
`);let N=[G,U,D],C=[r1(1e4),r1(15000),r1(20000),r1(5000)];console.log(`\uD83D\uDD25 Sending ${C.length} payment(s) through 4-hop route...
`);for(let F=0;F<C.length;F++){let A=X.nextHashlock();await y30($,P,H,N,C[F],yM,`Payment ${F+1}/${C.length}`,A)}console.log(`
 All ${C.length} concurrent payments processed!
`),console.log(`\uD83D\uDD0D Verifying 4-hop settlement...
`);let[,L]=gM($,P.id),[,B]=gM($,G.id),[,E]=gM($,U.id),[,I]=gM($,D.id),[,_]=gM($,H.id),f=L.state.accounts.get(G.id),x=B.state.accounts.get(U.id),g=E.state.accounts.get(D.id),h=I.state.accounts.get(H.id);console.log("   Locks after settlement:"),console.log(`   Alice-Hub1: ${f?.locks.size||0}`),console.log(`   Hub1-Hub2: ${x?.locks.size||0}`),console.log(`   Hub2-Hub3: ${g?.locks.size||0}`),console.log(`   Hub3-Bob: ${h?.locks.size||0}
`),Qv((f?.locks.size||0)===0,"All locks cleared after concurrent payments");let{calculateHtlcFeeAmount:v}=await Promise.resolve().then(() => (zJ(),KM)),b=0n;for(let F of C){let A=v(F),T=v(F-A),V=v(F-A-T);b+=A+T+V}let m=(B.state.htlcFeesEarned||0n)+(E.state.htlcFeesEarned||0n)+(I.state.htlcFeesEarned||0n);if(console.log(`   Fees collected (across ${C.length} payments):`),console.log(`   Hub1: ${B.state.htlcFeesEarned||0n}`),console.log(`   Hub2: ${E.state.htlcFeesEarned||0n}`),console.log(`   Hub3: ${I.state.htlcFeesEarned||0n}`),console.log(`   Total earned: ${m}`),console.log(`   Expected: ${b}
`),m===0n)console.log("     No fees collected - likely direct route was used"),console.log(`      Or forwarding didn't trigger (check envelope processing)
`);let K=f?.deltas.get(yM),M=h?.deltas.get(yM),j=C.reduce((F,A)=>F+A,0n);console.log("   Delta changes (total):"),console.log(`   Alice-Hub1 offdelta: ${K?.offdelta||0n} (Alice paid)`),console.log(`   Hub3-Bob offdelta: ${M?.offdelta||0n} (Bob received)`),console.log(`   Total sent: ${j}
`);let O=K?.offdelta||0n,R=-(M?.offdelta||0n);Qv(O===j,`Alice paid total amount: ${O} === ${j}`),Qv(R===j-b||R===j,`Bob received amount (${R})  total minus fees (${j-b})`),console.log(""),console.log(" 4-HOP CONCURRENT HTLC TEST PASSED!"),console.log(`   Payments: ${C.length} concurrent (stress test)`),console.log(`   Route: ${N.length+2} entities (${N.length} intermediate hops)`),console.log("   Privacy: RSA-OAEP encrypted envelopes (each hop only sees nextHop)"),console.log(`   Fees: $${Number(b)/1000000000000000000} total (${C.length} payments  3 hops)`),console.log(`   Settlement: All ${C.length} payments atomic via secret revelation`),console.log(`   Total volume: $${Number(j)/1000000000000000000}`),console.log(`
`)}finally{$.scenarioMode=Z??!1,Q()}}var yM=1;var m30=p(async()=>{u2();nb()});var Gv={};x1(Gv,{swapWithOrderbook:()=>HA0,swap:()=>PA0,multiPartyTrading:()=>jA0});async function G6($,Q=10){let Z=await RT();for(let X=0;X<Q;X++){await Z($);let Y=!1;for(let[,z]of $.eReplicas){for(let[,J]of z.state.accounts)if(J.mempool.length>0||J.pendingFrame){Y=!0;break}if(Y)break}if(!Y)return}}async function u30($){if($.runtimeInput.entityInputs.length===0)return;let Z=[...$.runtimeInput.entityInputs];$.runtimeInput.entityInputs=[],await(await NT())($,{runtimeTxs:[],entityInputs:Z})}function B1($,Q,Z){if(!$){if(Z)console.log(`
`+"=".repeat(80)),console.log("ASSERTION FAILED - FULL RUNTIME STATE:"),console.log("=".repeat(80)),console.log(h2(Z,{maxAccounts:5,maxLocks:20,maxSwaps:20})),console.log("=".repeat(80)+`
`);throw Error(`ASSERTION FAILED: ${Q}`)}console.log(`[OK] ${Q}`)}function PJ($){let Q=d30[$];if(!Q)throw Error(`Missing registered entityId for signer ${$} - run swap() first`);return Q}function MA0($,Q,Z,X){let Y=$.history||[];B1(Y.length>0,`${X}: snapshot exists`);let z=Y[Y.length-1],J=z?.jReplicas?.length??0,q=z?.eReplicas?.size??0;B1(J===Q,`${X}: snapshot jReplicas = ${Q} (got ${J})`),B1(q===Z,`${X}: snapshot eReplicas = ${Z} (got ${q})`)}function R5($,Q){let Z=Array.from($.eReplicas.entries()).find(([X])=>X.startsWith(Q+":"));if(!Z)throw Error(`Replica for entity ${Q} not found`);return Z}async function PA0($){let Q=L8($,"SWAP"),Z=$.scenarioMode;try{if($.scenarioMode=!0,$.quietRuntimeLogs===void 0)$.quietRuntimeLogs=!0;h9($,"SWAP"),N9($,["1","2","3","4","5"],"SWAP");let X=await RT(),Y=await NT();if($.scenarioMode&&$.height===0)$.timestamp=1;if(console.log(""),console.log("                   SWAP SCENARIO: Same-J Swaps                  "),console.log(`
`),console.log("\uD83C\uDFDB Setting up BrowserVM J-Machine..."),$.jReplicas&&$.jReplicas.size>0)console.log(`[SWAP] Clearing ${$.jReplicas.size} old jurisdictions from previous scenario`),$.jReplicas.clear();if($.eReplicas&&$.eReplicas.size>0)console.log(`[SWAP] Clearing ${$.eReplicas.size} old entities from previous scenario`),$.eReplicas.clear();if($.history&&$.history.length>0)console.log(`[SWAP] Clearing ${$.history.length} old snapshots from previous scenario`),$.history=[];if($.height=0,$.runtimeInput)$.runtimeInput.runtimeTxs=[],$.runtimeInput.entityInputs=[];else $.runtimeInput={runtimeTxs:[],entityInputs:[]};$.pendingOutputs=[],$.pendingNetworkOutputs=[],$.networkInbox=[],$.frameLogs=[],$.gossip=g2();let z=await i2($),J=z.getDepositoryAddress();Q7($,"Swap Demo",J,WA0);let q=rq("Swap Demo",J);console.log(` BrowserVM J-Machine created
`),await Wv($,z),console.log("\uD83D\uDCE6 Creating entities: Alice, Hub...");let W=await z.registerEntitiesWithSigners(["1","2","3","4","5"]);B1(W.length>=5,"Registered 5 numbered entities");let G=(l)=>"0x"+l.toString(16).padStart(64,"0");["1","2","3","4","5"].forEach((l,q0)=>{let Y0=W[q0];if(Y0!==void 0)d30[l]=G(Y0)});let D=[{name:"Alice",id:PJ("1"),signer:"1"},{name:"Hub",id:PJ("2"),signer:"2"}],P=D.map((l)=>({type:"importReplica",entityId:l.id,signerId:l.signer,data:{isProposer:!0,position:Kv[l.name],config:{mode:"proposer-based",threshold:1n,validators:[l.signer],shares:{[l.signer]:1n},jurisdiction:q}}}));await Y($,{runtimeTxs:P,entityInputs:[]});let[H,N]=D;console.log(`   Created: ${H.name}, ${N.name}
`),console.log("\uD83D\uDD17 Opening Alice  Hub bilateral account..."),await X($,[{entityId:H.id,signerId:H.signer,entityTxs:[{type:"openAccount",data:{targetEntityId:N.id}}]}]),await G6($);let[,C]=R5($,H.id);console.log(`\uD83D\uDD0D DEBUG: Alice has ${C.state.accounts.size} accounts, keys: ${Array.from(C.state.accounts.keys()).map((l)=>l.slice(-4)).join(", ")}`),console.log(`\uD83D\uDD0D DEBUG: Looking for hub.id=${N.id.slice(-4)}`),B1(C.state.accounts.has(N.id),"Alice-Hub account exists"),console.log(`   Account created
`),console.log("\uD83D\uDCB3 Setting up credit limits for swaps..."),await X($,[{entityId:N.id,signerId:N.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:H.id,tokenId:U6,amount:X6(eq)}},{type:"extendCredit",data:{counterpartyEntityId:H.id,tokenId:H6,amount:C9(tq)}}]},{entityId:H.id,signerId:H.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:N.id,tokenId:U6,amount:X6(eq)}},{type:"extendCredit",data:{counterpartyEntityId:N.id,tokenId:H6,amount:C9(tq)}}]}]),await G6($),console.log(`   Bidirectional credit established
`),console.log(""),console.log(`TEST 1: Alice places limit order - Sell ${I6} ETH for ${W2} USDC`),console.log(`
`);let L="order-001";console.log(`\uD83D\uDCCA Alice: swap_offer (${I6} ETH  ${W2} USDC, min 50%)`),await X($,[{entityId:H.id,signerId:H.signer,entityTxs:[{type:"placeSwapOffer",data:{counterpartyEntityId:N.id,offerId:L,giveTokenId:U6,giveAmount:X6(I6),wantTokenId:H6,wantAmount:C9(W2),minFillRatio:mM}}]}]),await G6($);let[,B]=R5($,H.id),E=B.state.accounts.get(N.id);B1(E?.swapOffers?.has(L),"Offer created in A-Machine account");let I=E?.swapOffers?.get(L);B1(I?.giveAmount===X6(I6),`Offer giveAmount = ${I6} ETH`),B1(I?.wantAmount===C9(W2),`Offer wantAmount = ${W2} USDC`);let _=`${N.id}:${L}`;B1(B.state.swapBook.has(_),"Offer added to E-Machine swapBook");let f=B.state.swapBook.get(_);B1(f?.accountId===N.id,"swapBook entry accountId = canonical(alice, hub)"),B1(f?.giveAmount===X6(I6),`swapBook giveAmount = ${I6} ETH`),B1(f?.wantAmount===C9(W2),`swapBook wantAmount = ${W2} USDC`),console.log("   E-Machine swapBook updated");let x=E?.deltas.get(U6);B1(x?.leftSwapHold===X6(I6),`ETH hold = ${I6} (Alice is LEFT)`),console.log(`   Swap offer created, ${I6} ETH locked
`),console.log(""),console.log("TEST 2: Hub fills 50%"),console.log(`
`),console.log("\uD83D\uDCB1 Hub: swap_resolve (50% fill)"),await X($,[{entityId:N.id,signerId:N.signer,entityTxs:[{type:"resolveSwap",data:{counterpartyEntityId:H.id,offerId:L,fillRatio:mM,cancelRemainder:!1}}]}]),await G6($);let[,g]=R5($,H.id),h=g.state.accounts.get(N.id),v=h?.swapOffers?.get(L),b=X6(I6)-X6(I6)*BigInt(mM)/BigInt(MJ);B1(v?.giveAmount===b,`Remaining amount = ${b} (got ${v?.giveAmount})`);let m=h?.deltas.get(U6),K=h?.deltas.get(H6),M=X6(I6),j=C9(W2),O=sq(M,j,mM),R=O.filledGive,F=O.filledWant;B1(m?.offdelta===-R,`ETH offdelta = -${R} (Alice gave)`),B1(K?.offdelta===F,`USDC offdelta = +${F} (Alice received)`),console.log(`   50% filled: Alice gave ${R} ETH, got ${F} USDC
`),console.log(""),console.log("TEST 3: Hub fills remaining 100%"),console.log(`
`),console.log("\uD83D\uDCB1 Hub: swap_resolve (100% fill, complete)"),await X($,[{entityId:N.id,signerId:N.signer,entityTxs:[{type:"resolveSwap",data:{counterpartyEntityId:H.id,offerId:L,fillRatio:OA0,cancelRemainder:!1}}]}]),await G6($),await G6($);let[,A]=R5($,H.id),T=A.state.accounts.get(N.id);B1(!T?.swapOffers?.has(L),"Offer removed after full fill");let V=T?.deltas.get(U6);B1(V?.leftSwapHold===0n,"ETH hold released"),B1(V?.offdelta===-X6(I6),`Final ETH delta = -${I6} (Alice gave ${I6} ETH total)`);let w=T?.deltas.get(H6);B1(w?.offdelta===C9(W2),`Final USDC delta = +${W2} (Alice received ${W2} USDC)`),console.log(`   Swap complete: Alice traded ${I6} ETH for ${W2} USDC
`),console.log(""),console.log("TEST 4: Alice cancels an order"),console.log(`
`);let k="order-002";console.log(`\uD83D\uDCCA Alice: swap_offer (${Z3} ETH  ${qv} USDC)`),await X($,[{entityId:H.id,signerId:H.signer,entityTxs:[{type:"placeSwapOffer",data:{counterpartyEntityId:N.id,offerId:k,giveTokenId:U6,giveAmount:X6(Z3),wantTokenId:H6,wantAmount:C9(qv),minFillRatio:0}}]}]),await G6($),await G6($);let[,S]=R5($,H.id),y=S.state.accounts.get(N.id);B1(y?.swapOffers?.has(k),"Order 2 created in A-Machine");let u=`${N.id}:${k}`;B1(S.state.swapBook.has(u),"Order 2 in E-Machine swapBook"),console.log("\uD83D\uDCCA Alice: swap_cancel"),await X($,[{entityId:H.id,signerId:H.signer,entityTxs:[{type:"cancelSwap",data:{counterpartyEntityId:N.id,offerId:k}}]}]),await G6($),await G6($);let[,c]=R5($,H.id),o=c.state.accounts.get(N.id);B1(!o?.swapOffers?.has(k),"Order 2 cancelled in A-Machine"),B1(!c.state.swapBook.has(u),"Order 2 removed from E-Machine swapBook");let z0=o?.deltas.get(U6);B1(z0?.leftSwapHold===0n,"Hold released after cancel"),console.log(`   Order cancelled, swapBook cleaned, hold released
`),console.log(""),console.log("TEST 5: minFillRatio enforcement"),console.log(`
`);let e="order-003",s=UA0;console.log(`\uD83D\uDCCA Alice: swap_offer (${Z3} ETH, min 75% fill)`),await X($,[{entityId:H.id,signerId:H.signer,entityTxs:[{type:"placeSwapOffer",data:{counterpartyEntityId:N.id,offerId:e,giveTokenId:U6,giveAmount:X6(Z3),wantTokenId:H6,wantAmount:C9(qv),minFillRatio:s}}]}]),await G6($),await G6($),console.log("\uD83D\uDCB1 Hub: swap_resolve (50% fill - should fail)"),await X($,[{entityId:N.id,signerId:N.signer,entityTxs:[{type:"resolveSwap",data:{counterpartyEntityId:H.id,offerId:e,fillRatio:mM,cancelRemainder:!1}}]}]),await G6($),await G6($);let[,J0]=R5($,H.id),t=J0.state.accounts.get(N.id);B1(t?.swapOffers?.has(e),"Order 3 still exists (50% fill rejected)");let Z0=VA0;console.log("\uD83D\uDCB1 Hub: swap_resolve (80% fill - should succeed)"),await X($,[{entityId:N.id,signerId:N.signer,entityTxs:[{type:"resolveSwap",data:{counterpartyEntityId:H.id,offerId:e,fillRatio:Z0,cancelRemainder:!0}}]}]),await G6($);let[,N0]=R5($,H.id),i=N0.state.accounts.get(N.id);B1(!i?.swapOffers?.has(e),"Order 3 removed (80% fill + cancel)"),console.log(`   minFillRatio enforced correctly
`),console.log(""),console.log("                     ALL TESTS PASSED!                        "),console.log(`
`),console.log("Summary:"),console.log("  1.  swap_offer creates offer, locks capacity"),console.log("  2.  swap_resolve fills partially (50%), keeps remainder"),console.log("  3.  swap_resolve fills fully, removes offer"),console.log("  4.  swap_cancel removes offer, releases hold"),console.log("  5.  minFillRatio rejects underfills"),console.log(`
`)}finally{Q()}}async function HA0($){let Q=L8($,"SWAP"),Z=$.scenarioMode;try{if($.scenarioMode=!0,$.quietRuntimeLogs===void 0)$.quietRuntimeLogs=!0;let X=await RT(),Y=await NT(),z=$.browserVM||await i2($);await Wv($,z),console.log(""),console.log("             PHASE 2: ORDERBOOK MATCHING (RJEA FLOW)            "),console.log(`
`);let J={id:PJ("1"),signer:"1"},q={id:PJ("2"),signer:"2"},{DEFAULT_SPREAD_DISTRIBUTION:W}=await Promise.resolve().then(() => (rZ(),GU));await X($,[{entityId:q.id,signerId:q.signer,entityTxs:[{type:"initOrderbookExt",data:{name:"Test Hub",spreadDistribution:W,referenceTokenId:H6,minTradeSize:0n,supportedPairs:["1/2"]}}]}]);let[,G]=R5($,q.id),U=G.state.config.jurisdiction;console.log(" Hub orderbook extension initialized"),B1(!!G.state.orderbookExt,"orderbookExt initialized on hub state"),await G6($);let[,D]=R5($,q.id);B1(!!D.state.orderbookExt,"orderbookExt persists after process()"),console.log(` Hub orderbookExt persists through process cycle
`),console.log("\uD83D\uDCE6 Adding Bob...");let P={id:PJ("3"),signer:"3"};await Y($,{runtimeTxs:[{type:"importReplica",entityId:P.id,signerId:P.signer,data:{isProposer:!0,position:Kv.Bob,config:{mode:"proposer-based",threshold:1n,validators:[P.signer],shares:{[P.signer]:1n},jurisdiction:U}}}],entityInputs:[]}),await G6($),console.log(`   Bob created
`),console.log("\uD83D\uDD17 Opening Bob  Hub account..."),await X($,[{entityId:P.id,signerId:P.signer,entityTxs:[{type:"openAccount",data:{targetEntityId:q.id}}]}]),await G6($),console.log(`   Account opened
`),console.log("\uD83D\uDCB3 Extending credit for BobHub..."),await X($,[{entityId:q.id,signerId:q.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:P.id,tokenId:U6,amount:X6(eq)}},{type:"extendCredit",data:{counterpartyEntityId:P.id,tokenId:H6,amount:C9(tq)}}]},{entityId:P.id,signerId:P.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:q.id,tokenId:U6,amount:X6(eq)}},{type:"extendCredit",data:{counterpartyEntityId:q.id,tokenId:H6,amount:C9(tq)}}]}]),await G6($),console.log(`   Credit extended
`),console.log(""),console.log(`TEST: Alice SELL ${I6} ETH @ ${QX}, Bob BUY ${Z3} ETH @ ${aq}`),console.log(`
`),console.log(`\uD83D\uDCCA Step 1: Alice places swap_offer (${I6} ETH  ${W2} USDC)...`),await X($,[{entityId:J.id,signerId:J.signer,entityTxs:[{type:"placeSwapOffer",data:{counterpartyEntityId:q.id,offerId:"alice-sell-001",giveTokenId:U6,giveAmount:X6(I6),wantTokenId:H6,wantAmount:C9(W2),minFillRatio:GA0}}]}]),await G6($);let[,H]=R5($,q.id),C=H.state.accounts.get(J.id)?.swapOffers?.get("alice-sell-001");B1(!!C,"Alice offer should exist in Hub bilateral account"),console.log(`   Alice offer created in bilateral account
`);let[,L]=R5($,J.id),B=L.state.accounts.get(q.id),E=B?.deltas.get(U6)?.offdelta??0n,I=B?.deltas.get(H6)?.offdelta??0n,[,_]=R5($,P.id),f=_.state.accounts.get(q.id),x=f?.deltas.get(U6)?.offdelta??0n,g=f?.deltas.get(H6)?.offdelta??0n,h=H.state.orderbookExt;console.log(`  \uD83D\uDCCA Hub orderbook state: ${h?.books?.size||0} books
`),console.log(`\uD83D\uDCCA Step 2: Bob places swap_offer (${Z3} ETH @ ${aq})...`),await X($,[{entityId:P.id,signerId:P.signer,entityTxs:[{type:"placeSwapOffer",data:{counterpartyEntityId:q.id,offerId:"bob-buy-001",giveTokenId:H6,giveAmount:Q3(Z3,aq),wantTokenId:U6,wantAmount:X6(Z3),minFillRatio:0}}]}]),console.log("\uD83D\uDD04 Step 3: Waiting for RJEA matching and settlement...");let v=0,b=0;await xM($,()=>{let[,v1]=R5($,q.id),o1=v1.state.pendingSwapFillRatios;return v=o1?.get(`${J.id}:alice-sell-001`)||0,b=o1?.get(`${P.id}:bob-buy-001`)||0,v>0&&b>0},20,"RJEA fill ratios recorded"),await G6($),console.log("\uD83D\uDCCA Step 3: Checking trade results...");let[,m]=R5($,q.id),K=m.state.orderbookExt;if(K?.books){let{renderAscii:v1}=await Promise.resolve().then(() => (rZ(),GU)),o1=K.books.get("1/2");if(o1)console.log(`
\uD83D\uDCDA ORDERBOOK STATE:`),console.log(v1(o1,5));else console.log("  \uD83D\uDCDA No book for pair 1/2")}let[,M]=R5($,J.id),[,j]=R5($,P.id),O=M.state.accounts.get(q.id),R=j.state.accounts.get(q.id);console.log(`  Alice offer exists: ${O?.swapOffers?.has("alice-sell-001")}`),console.log(`  Bob offer exists: ${R?.swapOffers?.has("bob-buy-001")}`);let F=O?.swapOffers?.get("alice-sell-001");if(F)console.log(`  Alice remaining: ${F.giveAmount} wei (${Number(F.giveAmount)/1000000000000000000} ETH)`);console.log(`   RJEA flow completed - trades processed automatically
`),console.log("\uD83D\uDCCA Verifying final state...");let[,A]=R5($,J.id),[,T]=R5($,P.id),V=A.state.accounts.get(q.id),w=T.state.accounts.get(q.id),k=V?.deltas.get(U6),S=V?.deltas.get(H6),y=w?.deltas.get(U6),u=w?.deltas.get(H6);console.log(`  AliceHub ETH offdelta: ${k?.offdelta??0n}`),console.log(`  AliceHub USDC offdelta: ${S?.offdelta??0n}`),console.log(`  BobHub ETH offdelta: ${y?.offdelta??0n}`),console.log(`  BobHub USDC offdelta: ${u?.offdelta??0n}`);let c=(y?.offdelta??0n)!==0n||(u?.offdelta??0n)!==0n;B1(c,"Bob should have traded via RJEA flow"),B1(b===MJ,`Bob fillRatio = ${MJ} (got ${b})`);let o=sq(X6(I6),C9(W2),v),z0=sq(Q3(Z3,aq),X6(Z3),b),e=(k?.offdelta??0n)-E,s=(S?.offdelta??0n)-I,J0=(y?.offdelta??0n)-x,t=(u?.offdelta??0n)-g;B1(J0===-z0.filledWant,`Bob ETH delta = -${z0.filledWant} (got ${J0})`),B1(t===z0.filledGive,`Bob USDC delta = +${z0.filledGive} (got ${t})`),B1(e===-o.filledGive,`Alice ETH delta = -${o.filledGive} (got ${e})`),B1(s===o.filledWant,`Alice USDC delta = +${o.filledWant} (got ${s})`);let Z0=O?.swapOffers?.get("alice-sell-001");if(Z0){let v1=X6(I6)-o.filledGive;B1(Z0.giveAmount===v1,`Alice remaining ETH = ${v1} (got ${Z0.giveAmount})`)}console.log("   Phase 2 assertions passed");let[,N0]=R5($,J.id);if(N0.state.accounts.get(q.id)?.swapOffers?.has("alice-sell-001"))console.log("\uD83E\uDDF9 Cancelling leftover alice-sell-001 before dispute test..."),await X($,[{entityId:J.id,signerId:J.signer,entityTxs:[{type:"cancelSwapOffer",data:{counterpartyEntityId:q.id,offerId:"alice-sell-001"}}]}]),await G6($);console.log(`
`),console.log("        PHASE 2B: DISPUTE SWAP (FILL RATIO ENFORCED)           "),console.log(`
`);let l="alice-dispute-001",q0="bob-dispute-001",Y0=I6,K0=W2,k0=Y0*2n/5n,[,a]=R5($,q.id),X0=a.state.accounts.get(J.id),n0=a.state.accounts.get(P.id),W0=X0?.deltas.get(U6)?.offdelta??0n,V0=X0?.deltas.get(H6)?.offdelta??0n,H1=n0?.deltas.get(U6)?.offdelta??0n,D0=n0?.deltas.get(H6)?.offdelta??0n;console.log(`\uD83D\uDCCA Alice: swap_offer (${Y0} ETH  ${K0} USDC)`),await X($,[{entityId:J.id,signerId:J.signer,entityTxs:[{type:"placeSwapOffer",data:{counterpartyEntityId:q.id,offerId:l,giveTokenId:U6,giveAmount:X6(Y0),wantTokenId:H6,wantAmount:C9(K0),minFillRatio:0}}]}]),await G6($),console.log("\uD83D\uDCCA Bob: swap_offer (40% fill target)"),await X($,[{entityId:P.id,signerId:P.signer,entityTxs:[{type:"placeSwapOffer",data:{counterpartyEntityId:q.id,offerId:q0,giveTokenId:H6,giveAmount:Q3(k0,QX),wantTokenId:U6,wantAmount:X6(k0),minFillRatio:0}}]}]);let j0=`${J.id}:${l}`,g1=0;for(let v1=0;v1<8;v1++){await X($);let[,o1]=R5($,q.id);if(g1=o1.state.pendingSwapFillRatios?.get(j0)||0,g1>0)break}if(B1(g1>0,`Pending fillRatio recorded for ${l}`),$.pendingOutputs)$.pendingOutputs=$.pendingOutputs.filter((v1)=>v1.entityId!==J.id);if($.networkInbox)$.networkInbox=$.networkInbox.filter((v1)=>v1.entityId!==J.id);console.log("\uD83D\uDEAB Dropped pending outputs to Alice to keep swap_resolve uncommitted (dispute path)"),await G6($);let[,T0]=R5($,q.id),R0=T0.state.accounts.get(P.id),s1=R0?.deltas.get(U6)?.offdelta??0n,B0=R0?.deltas.get(H6)?.offdelta??0n,C0=sq(Q3(k0,QX),X6(k0),MJ);B1(s1-H1===-C0.filledWant,`Dispute Bob ETH delta = -${C0.filledWant} (got ${s1-H1})`),B1(B0-D0===C0.filledGive,`Dispute Bob USDC delta = +${C0.filledGive} (got ${B0-D0})`),B1(!R0?.swapOffers?.has(q0),"Dispute Bob offer fully resolved"),console.log(" Hub starts dispute (will enforce fillRatio via calldata)"),await X($,[{entityId:q.id,signerId:q.signer,entityTxs:[{type:"disputeStart",data:{counterpartyEntityId:J.id,description:"Swap dispute (fillRatio enforced)"}}]}]);let[,g6]=R5($,q.id),m0=g6.state.jBatchState?.batch.disputeStarts.length||0;console.log(`\uD83E\uDDFE jBatch disputeStarts=${m0} before broadcast`),B1(m0>0,"jBatch has disputeStart before broadcast"),await X($,[{entityId:q.id,signerId:q.signer,entityTxs:[{type:"j_broadcast",data:{}}]}]);for(let v1=0;v1<20;v1++){await X($);let o1=$.jReplicas.get("Swap Demo");if(o1&&o1.mempool.length===0)break}await u30($);let[,l0]=R5($,q.id),C6=l0.state.accounts.get(J.id);B1(!!C6?.activeDispute,"Dispute started for swap");let{buildAccountProofBody:y0}=await Promise.resolve().then(() => (g3(),Eq)),u0=y0(C6);B1(u0.proofBodyHash===C6.activeDispute.initialProofbodyHash,"Hub dispute proofBodyHash matches on-chain start hash");let[,W8]=R5($,J.id),d0=W8.state.accounts.get(q.id);B1(!!d0?.activeDispute,"Dispute visible on counterparty");let v0=y0(d0);B1(v0.proofBodyHash===d0.activeDispute.initialProofbodyHash,"Counterparty dispute proofBodyHash matches on-chain start hash");let o6=C6.activeDispute.disputeTimeout;console.log(` Waiting for dispute timeout (block ${o6})...`);let{createEmptyBatch:i0,encodeJBatch:c0,computeBatchHankoHash:M5}=await Promise.resolve().then(() => (c6(),n9)),{signHashesAsSingleEntity:_0}=await Promise.resolve().then(() => (F2(),S4));while(z.getBlockNumber()<o6){let v1=i0(),o1=c0(v1),Y6=z.getChainId(),J6=z.getDepositoryAddress(),_5=z.getEntityProviderAddress(),F5=await z.getEntityNonce(q.id)+1n,h5=M5(Y6,J6,o1,F5),z6=(await _0($,q.id,q.signer,[h5]))[0];if(!z6)throw Error("Failed to build empty batch hanko (swap dispute)");await z.processBatch(o1,_5,z6,F5),await X($)}console.log(` Timeout reached at block ${z.getBlockNumber()}`),console.log(" Hub disputeFinalize (unilateral)"),await X($,[{entityId:q.id,signerId:q.signer,entityTxs:[{type:"disputeFinalize",data:{counterpartyEntityId:J.id,cooperative:!1,description:"Finalize swap dispute"}}]}]);let[,d]=R5($,q.id),G0=d.state.jBatchState?.batch.disputeFinalizations?.[0]?.finalArguments||"0x";B1(G0!=="0x","Dispute finalArguments encoded");let O0=M0.AbiCoder.defaultAbiCoder(),[s0]=O0.decode(["bytes[]"],G0),[E0]=O0.decode(["uint32[]","bytes32[]"],s0[0]),S0=Number(E0[0]||0n);B1(S0===g1,`fillRatio matches pending (${g1})`),await X($,[{entityId:q.id,signerId:q.signer,entityTxs:[{type:"j_broadcast",data:{}}]}]);for(let v1=0;v1<20;v1++){await X($);let o1=$.jReplicas.get("Swap Demo");if(o1&&o1.mempool.length===0)break}await u30($),console.log(" Dispute swap finalize broadcast complete");let[,T5]=R5($,q.id),g0=T5.state.accounts.get(J.id);B1(!g0?.activeDispute,"Dispute cleared on hub after finalize");let[,p0]=R5($,J.id),_6=p0.state.accounts.get(q.id);B1(!_6?.activeDispute,"Dispute cleared on counterparty after finalize");let h0=(v1,o1,Y6)=>{let[,J6]=R5($,v1),_5=J6.state.accounts.get(o1);if(!_5)throw Error(`Dispute cleanup missing account ${Y6}`);if(_5.pendingFrame)_5.pendingFrame=void 0;if(_5.mempool.length>0)_5.mempool=[]};h0(q.id,J.id,"hubalice"),h0(J.id,q.id,"alicehub"),((v1,o1,Y6)=>{let[,J6]=R5($,v1),[,_5]=R5($,o1),S5=J6.state.accounts.get(o1),F5=_5.state.accounts.get(v1);if(!S5||!F5)throw Error(`Dispute cleanup missing account for counter sync (${Y6})`);let h5=Math.max(S5.ackedTransitions,F5.ackedTransitions,S5.proofHeader.cooperativeNonce,F5.proofHeader.cooperativeNonce);S5.ackedTransitions=h5,F5.ackedTransitions=h5,S5.proofHeader.cooperativeNonce=h5,F5.proofHeader.cooperativeNonce=h5,S5.sendCounter=h5,F5.sendCounter=h5,S5.receiveCounter=h5,F5.receiveCounter=h5})(q.id,J.id,"hubalice"),console.log(" Applying dispute-enforced fill ratios locally"),await X($,[{entityId:q.id,signerId:q.signer,entityTxs:[{type:"resolveSwap",data:{counterpartyEntityId:J.id,offerId:l,fillRatio:g1,cancelRemainder:!0}}]}]),await G6($);let[,S6]=R5($,q.id),m1=S6.state.accounts.get(J.id),k1=m1?.deltas.get(U6)?.offdelta??0n,g5=m1?.deltas.get(H6)?.offdelta??0n,P5=sq(X6(Y0),C9(K0),g1);return B1(k1-W0===-P5.filledGive,`Dispute Alice ETH delta = -${P5.filledGive} (got ${k1-W0})`),B1(g5-V0===P5.filledWant,`Dispute Alice USDC delta = +${P5.filledWant} (got ${g5-V0})`),B1(!m1?.swapOffers?.has(l),"Dispute offer removed after resolution"),console.log(`
`),console.log("              PHASE 2: ORDERBOOK TEST COMPLETE                  "),console.log(`
`),$}finally{$.scenarioMode=Z??!1,Q()}}async function jA0($){let Q=L8($,"SWAP"),Z=$.scenarioMode;try{if($.scenarioMode=!0,$.quietRuntimeLogs===void 0)$.quietRuntimeLogs=!0;let X=await RT(),Y=await NT(),z=$.browserVM||await i2($);await Wv($,z),console.log(""),console.log("         PHASE 3: MULTI-PARTY TRADING (Carol & Dave)           "),console.log(`
`);let J={id:PJ("2"),signer:"2"},[,q]=R5($,J.id),W=q.state.config.jurisdiction;if(q.state.orderbookExt)q.state.orderbookExt.books=new Map;if(q.state.pendingSwapFillRatios)q.state.pendingSwapFillRatios.clear();for(let F of q.state.accounts.values()){if(F.swapOffers?.size)F.swapOffers.clear();for(let A of F.deltas.values()){if(A.leftSwapHold)A.leftSwapHold=0n;if(A.rightSwapHold)A.rightSwapHold=0n}}console.log("\uD83D\uDCE6 Adding Carol and Dave...");let G={id:PJ("4"),signer:"4",name:"Carol"},U={id:PJ("5"),signer:"5",name:"Dave"};for(let F of[G,U])if(await Y($,{runtimeTxs:[{type:"importReplica",entityId:F.id,signerId:F.signer,data:{isProposer:!0,position:Kv[F.name],config:{mode:"proposer-based",threshold:1n,validators:[F.signer],shares:{[F.signer]:1n},jurisdiction:W}}}],entityInputs:[]}),await X($),F===G)MA0($,1,4,"After Carol import");console.log(`   Carol and Dave created
`),console.log("\uD83D\uDD17 Opening accounts with Hub...");for(let F of[G,U])await X($,[{entityId:F.id,signerId:F.signer,entityTxs:[{type:"openAccount",data:{targetEntityId:J.id}}]}]),await G6($);console.log(`   Accounts opened
`),console.log("\uD83D\uDCB3 Extending credit...");for(let F of[G,U])await X($,[{entityId:J.id,signerId:J.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:F.id,tokenId:U6,amount:X6(eq)}},{type:"extendCredit",data:{counterpartyEntityId:F.id,tokenId:H6,amount:C9(tq)}}]},{entityId:F.id,signerId:F.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:J.id,tokenId:U6,amount:X6(eq)}},{type:"extendCredit",data:{counterpartyEntityId:J.id,tokenId:H6,amount:C9(tq)}}]}]),await G6($);console.log(`   Credit extended
`),console.log(`\uD83D\uDCCA Carol places LARGE SELL: ${TU} ETH @ ${Jv} USDC...`),await X($,[{entityId:G.id,signerId:G.signer,entityTxs:[{type:"placeSwapOffer",data:{counterpartyEntityId:J.id,offerId:"carol-sell-10",giveTokenId:U6,giveAmount:X6(TU),wantTokenId:H6,wantAmount:Q3(TU,Jv),minFillRatio:0}}]}]),await G6($);let{renderAscii:D}=await Promise.resolve().then(() => (rZ(),GU)),[,P]=R5($,J.id),H=P.state.orderbookExt?.books?.get("1/2");if(H)console.log(`
\uD83D\uDCDA ORDERBOOK after Carol SELL:`),console.log(D(H,3));console.log(`
\uD83D\uDCCA Dave BUYs ${AU} ETH @ ${QX} (eats into Carol's sell)...`),await X($,[{entityId:U.id,signerId:U.signer,entityTxs:[{type:"placeSwapOffer",data:{counterpartyEntityId:J.id,offerId:"dave-buy-3",giveTokenId:H6,giveAmount:Q3(AU,QX),wantTokenId:U6,wantAmount:X6(AU),minFillRatio:0}}]}]),await G6($);let[,N]=R5($,J.id),C=N.state.orderbookExt?.books?.get("1/2");if(C)console.log(`
\uD83D\uDCDA ORDERBOOK after Dave BUY:`),console.log(D(C,3));console.log(`
\uD83D\uDCCA Carol places another SELL: ${FU} ETH @ ${aq}...`),await X($,[{entityId:G.id,signerId:G.signer,entityTxs:[{type:"placeSwapOffer",data:{counterpartyEntityId:J.id,offerId:"carol-sell-5",giveTokenId:U6,giveAmount:X6(FU),wantTokenId:H6,wantAmount:Q3(FU,aq),minFillRatio:0}}]}]),await G6($);let[,L]=R5($,J.id),B=L.state.orderbookExt?.books?.get("1/2");if(B)console.log(`
\uD83D\uDCDA ORDERBOOK with multiple ask levels:`),console.log(D(B,5));console.log(`
\uD83D\uDCCA Dave SWEEPS BOOK: BUY ${hM} ETH @ ${zv} (eats all asks)...`),await X($,[{entityId:U.id,signerId:U.signer,entityTxs:[{type:"placeSwapOffer",data:{counterpartyEntityId:J.id,offerId:"dave-sweep",giveTokenId:H6,giveAmount:Q3(hM,zv),wantTokenId:U6,wantAmount:X6(hM),minFillRatio:0}}]}]),await G6($);let[,E]=R5($,J.id),I=E.state.orderbookExt?.books?.get("1/2");if(I)console.log(`
\uD83D\uDCDA ORDERBOOK after sweep (should be empty asks):`),console.log(D(I,3));console.log(`
\uD83D\uDCCA Final positions:`);let _=E.state.accounts.get(G.id),f=E.state.accounts.get(U.id),x=_?.deltas.get(U6)?.offdelta??0n,g=_?.deltas.get(H6)?.offdelta??0n,h=f?.deltas.get(U6)?.offdelta??0n,v=f?.deltas.get(H6)?.offdelta??0n;console.log(`  Carol: ${Number(x)/1000000000000000000} ETH, ${Number(g)/1000000000000000000} USDC`),console.log(`  Dave:  ${Number(h)/1000000000000000000} ETH, ${Number(v)/1000000000000000000} USDC`);let b=X6(TU+FU),m=Q3(TU,Jv)+Q3(FU,aq);B1(x===b,`Carol ETH delta = ${b} (got ${x})`),B1(g===-m,`Carol USDC delta = -${m} (got ${g})`);let K=sq(Q3(AU,QX),X6(AU),MJ),M=sq(Q3(hM,zv),X6(hM),MJ),j=K.filledWant+M.filledWant,O=K.filledGive+M.filledGive;B1(h===-j,`Dave ETH delta = -${j} (got ${h})`),B1(v===O,`Dave USDC delta = +${O} (got ${v})`);let R=I?XM(I)!==null:!1;return B1(!R,"Orderbook ask side empty after sweep"),console.log("   Phase 3 assertions passed"),console.log(`
`),console.log("           PHASE 3: MULTI-PARTY TRADING COMPLETE               "),console.log(`
`),$}finally{$.scenarioMode=Z??!1,Q()}}var Zv=null,Xv=null,Yv=null,p30=null,Wv=async($,Q)=>{if(!p30)p30=await qJ($,Q)},RT=async()=>{if(!Zv)Zv=(await Promise.resolve().then(() => (l5(),a5))).process;if(!Yv)Yv=async($,Q,Z,X)=>{if($.scenarioMode){let Y=typeof Z==="number"&&Z>0?Z:1;$.timestamp=($.timestamp||0)+Y}return Zv($,Q,Z,X)};return Yv},NT=async()=>{if(!Xv)Xv=(await Promise.resolve().then(() => (l5(),a5))).applyRuntimeInput;return Xv},U6=1,H6=2,zA0=18n,c30,X6=($)=>BigInt($)*c30,C9=($)=>BigInt($)*c30,QX=3000n,Jv=2900n,aq=3100n,zv=3200n,tq=300000n,eq,I6,Z3,qA0,PY1,W2,qv,Q3=($,Q)=>C9($*Q),TU,FU,AU,hM,WA0,HT=66,KA0=-40,jT=-80,Kv,MJ=65535,GA0=6553,mM=32768,UA0=49152,VA0=52428,OA0,DA0=($,Q)=>{if(Q===0n)return 0n;return($+Q-1n)/Q},sq=($,Q,Z)=>{let X=$*BigInt(Z)/BigInt(MJ),Y=$>0n?DA0(X*Q,$):0n;return{filledGive:X,filledWant:Y}},d30;var Uv=p(async()=>{A6();UJ();uq();u2();lq();c30=10n**zA0,eq=tq/QX,I6=eq/5n,Z3=I6/2n,qA0=I6*2n,PY1=I6*3n,W2=I6*QX,qv=Z3*QX,TU=qA0,FU=I6,AU=Z3,hM=TU+FU-AU,WA0={x:0,y:600,z:0},Kv={Hub:{x:0,y:KA0,z:0},Alice:{x:-HT,y:jT,z:0},Bob:{x:HT,y:jT,z:0},Carol:{x:0,y:jT,z:-HT},Dave:{x:0,y:jT,z:HT}},OA0=MJ;d30={}});var Dv={};x1(Dv,{swapMarketStress:()=>CA0,swapMarket:()=>NA0});async function NA0($){let Q=L8($,"Swap Market"),Z=$.scenarioMode;try{$.scenarioMode=!0,h9($,"Swap Market"),N9($,["1","2","3","4","5","6","7","8","9","10"],"Swap Market");let X=await o30(),Y=await n30();if($.scenarioMode&&$.height===0)$.timestamp=1;if($.jReplicas&&$.jReplicas.size>0)console.log(`[SWAP-MARKET] Clearing ${$.jReplicas.size} old jurisdictions from previous scenario`),$.jReplicas.clear();if($.eReplicas&&$.eReplicas.size>0)console.log(`[SWAP-MARKET] Clearing ${$.eReplicas.size} old entities from previous scenario`),$.eReplicas.clear();if($.history&&$.history.length>0)console.log(`[SWAP-MARKET] Clearing ${$.history.length} old snapshots from previous scenario`),$.history=[];if($.height=0,$.runtimeInput)$.runtimeInput.runtimeTxs=[],$.runtimeInput.entityInputs=[];else $.runtimeInput={runtimeTxs:[],entityInputs:[]};if($.pendingOutputs=[],$.pendingNetworkOutputs=[],$.networkInbox=[],$.frameLogs=[],$.gossip=g2(),$.jReplicas&&$.jReplicas.size>0)console.log(`[SWAP-MARKET] Clearing ${$.jReplicas.size} old jurisdictions from previous scenario`),$.jReplicas.clear();if($.eReplicas&&$.eReplicas.size>0)console.log(`[SWAP-MARKET] Clearing ${$.eReplicas.size} old entities from previous scenario`),$.eReplicas.clear();if($.history&&$.history.length>0)console.log(`[SWAP-MARKET] Clearing ${$.history.length} old snapshots from previous scenario`),$.history=[];if($.height=0,$.runtimeInput)$.runtimeInput.runtimeTxs=[],$.runtimeInput.entityInputs=[];else $.runtimeInput={runtimeTxs:[],entityInputs:[]};$.pendingOutputs=[],$.pendingNetworkOutputs=[],$.networkInbox=[],$.frameLogs=[],$.gossip=g2(),console.log(""),console.log("      SWAP MARKET: Multi-Party Orderbook Simulation            "),console.log(`
`),console.log("\uD83C\uDFDB  Setting up BrowserVM J-Machine...");let J=(await i2($)).getDepositoryAddress(),q={x:0,y:600,z:0};Q7($,"Market",J,q);let W=rq("Market",J);console.log(` BrowserVM J-Machine created
`),console.log("\uD83D\uDCE6 Creating 10 market participants (3 hubs + 7 traders)...");let G=[{name:"HubETH",id:"0x"+"1".padStart(64,"0"),signer:"1",role:"hub",pairs:["1/4"]},{name:"HubWBTC",id:"0x"+"2".padStart(64,"0"),signer:"2",role:"hub",pairs:["2/4"]},{name:"HubDAI",id:"0x"+"3".padStart(64,"0"),signer:"3",role:"hub",pairs:["3/4"]}],U=[{name:"Alice",id:"0x"+"4".padStart(64,"0"),signer:"4",role:"maker"},{name:"Bob",id:"0x"+"5".padStart(64,"0"),signer:"5",role:"maker"},{name:"Carol",id:"0x"+"6".padStart(64,"0"),signer:"6",role:"taker"},{name:"Dave",id:"0x"+"7".padStart(64,"0"),signer:"7",role:"taker"},{name:"Eve",id:"0x"+"8".padStart(64,"0"),signer:"8",role:"maker"},{name:"Frank",id:"0x"+"9".padStart(64,"0"),signer:"9",role:"taker"},{name:"Grace",id:"0x"+"a".padStart(64,"0"),signer:"10",role:"maker"}],D=[...G,...U],P=160,H=-80,N=-140,C=70,L=40,B={HubETH:{x:-P,y:H,z:0},HubWBTC:{x:0,y:H,z:0},HubDAI:{x:P,y:H,z:0},Alice:{x:-P-L,y:N,z:-C},Bob:{x:-P+L,y:N,z:C},Carol:{x:-P,y:N,z:0},Dave:{x:-L,y:N,z:-C},Grace:{x:L,y:N,z:C},Eve:{x:P-L,y:N,z:-C},Frank:{x:P+L,y:N,z:C}},E=Object.fromEntries(Object.entries(B).map(([D0,j0])=>[D0,{x:q.x+j0.x,y:q.y+j0.y,z:q.z+j0.z}])),I=D.map((D0)=>({type:"importReplica",entityId:D0.id,signerId:D0.signer,data:{isProposer:!0,position:E[D0.name]||{x:0,y:-80,z:0},config:{mode:"proposer-based",threshold:1n,validators:[D0.signer],shares:{[D0.signer]:1n}}}}));await Y($,{runtimeTxs:I,entityInputs:[]}),console.log(`   Created: ${D.map((D0)=>D0.name).join(", ")}
`);let[_,f,x]=G,[g,h,v,b,m,K,M]=U,{DEFAULT_SPREAD_DISTRIBUTION:j}=await Promise.resolve().then(() => (rZ(),GU));await X($,G.map((D0)=>({entityId:D0.id,signerId:D0.signer,entityTxs:[{type:"initOrderbookExt",data:{name:D0.name,spreadDistribution:j,referenceTokenId:b8,minTradeSize:0n,supportedPairs:D0.pairs}}]}))),await x8($),console.log(`   Orderbook extensions initialized
`),console.log("\uD83D\uDD17 Opening bilateral accounts (traders  hubs)...");let O=[g,h,m,v],R=[g,M,b],F=[h,m,K],A=[...O.map((D0)=>({trader:D0,hub:_})),...R.map((D0)=>({trader:D0,hub:f})),...F.map((D0)=>({trader:D0,hub:x}))];for(let{trader:D0,hub:j0}of A)await X($,[{entityId:D0.id,signerId:D0.signer,entityTxs:[{type:"openAccount",data:{targetEntityId:j0.id}}]}]),await x8($,30);console.log(`   Bilateral accounts created
`),console.log("\uD83D\uDCB3 Setting up credit limits for all traders...");let T=10000000n/3n,V=[...O.map((D0)=>({trader:D0,hub:_,tokenA:b8,tokenB:n3,amountA:i8(T),amountB:O4(T)})),...R.map((D0)=>({trader:D0,hub:f,tokenA:b8,tokenB:pM,amountA:i8(T),amountB:LT(T)})),...F.map((D0)=>({trader:D0,hub:x,tokenA:b8,tokenB:CT,amountA:i8(T),amountB:TT(T)}))];for(let{trader:D0,hub:j0,tokenA:g1,tokenB:T0,amountA:R0,amountB:s1}of V)await X($,[{entityId:j0.id,signerId:j0.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:D0.id,tokenId:g1,amount:R0}},{type:"extendCredit",data:{counterpartyEntityId:D0.id,tokenId:T0,amount:s1}}]}]),await X($,[{entityId:D0.id,signerId:D0.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:j0.id,tokenId:g1,amount:R0}},{type:"extendCredit",data:{counterpartyEntityId:j0.id,tokenId:T0,amount:s1}}]}]),await x8($,30);console.log(`   Bidirectional credit established for all tokens
`),console.log(""),console.log("         PHASE 1: Makers Place Limit Orders                    "),console.log(`
`),console.log(`\uD83D\uDCCA Building orderbook depth across 3 pairs...
`),console.log("\uD83D\uDCB1 USDC/ETH Orderbook (HubETH):"),await X($,[{entityId:g.id,signerId:g.signer,entityTxs:[{type:"placeSwapOffer",data:{offerId:"alice-eth-ask",counterpartyEntityId:_.id,giveTokenId:n3,giveAmount:O4(10),wantTokenId:b8,wantAmount:i8(31000),minFillRatio:FT}}]},{entityId:h.id,signerId:h.signer,entityTxs:[{type:"placeSwapOffer",data:{offerId:"bob-eth-ask",counterpartyEntityId:_.id,giveTokenId:n3,giveAmount:O4(5),wantTokenId:b8,wantAmount:i8(15250),minFillRatio:i30}}]},{entityId:m.id,signerId:m.signer,entityTxs:[{type:"placeSwapOffer",data:{offerId:"eve-eth-bid",counterpartyEntityId:_.id,giveTokenId:b8,giveAmount:i8(23600),wantTokenId:n3,wantAmount:O4(8),minFillRatio:FT}}]}]),console.log("   Alice: SELL 10 ETH @ $3100 (ask)"),console.log("   Bob: SELL 5 ETH @ $3050 (ask)"),console.log(`   Eve: BUY 8 ETH @ $2950 (bid)
`),console.log("\uD83D\uDCB1 USDC/WBTC Orderbook (HubWBTC):"),await X($,[{entityId:M.id,signerId:M.signer,entityTxs:[{type:"placeSwapOffer",data:{offerId:"grace-wbtc-ask",counterpartyEntityId:f.id,giveTokenId:pM,giveAmount:LT(2),wantTokenId:b8,wantAmount:i8(122000),minFillRatio:i30}}]},{entityId:g.id,signerId:g.signer,entityTxs:[{type:"placeSwapOffer",data:{offerId:"alice-wbtc-bid",counterpartyEntityId:f.id,giveTokenId:b8,giveAmount:i8(59000),wantTokenId:pM,wantAmount:LT(1),minFillRatio:FT}}]}]),console.log("   Grace: SELL 2 WBTC @ $61000 (ask)"),console.log(`   Alice: BUY 1 WBTC @ $59000 (bid)
`),console.log("\uD83D\uDCB1 USDC/DAI Orderbook (HubDAI):"),await X($,[{entityId:h.id,signerId:h.signer,entityTxs:[{type:"placeSwapOffer",data:{offerId:"bob-dai-ask",counterpartyEntityId:x.id,giveTokenId:CT,giveAmount:TT(500),wantTokenId:b8,wantAmount:i8(501),minFillRatio:l30}}]},{entityId:m.id,signerId:m.signer,entityTxs:[{type:"placeSwapOffer",data:{offerId:"eve-dai-bid",counterpartyEntityId:x.id,giveTokenId:b8,giveAmount:i8(299),wantTokenId:CT,wantAmount:TT(300),minFillRatio:l30}}]}]),console.log("   Bob: SELL 500 DAI @ $1.002 (ask)"),console.log(`   Eve: BUY 300 DAI @ $0.997 (bid)
`),await x8($),console.log(` PHASE 1 COMPLETE: Orderbook depth established
`);let[,w]=N6($,h.id),S=w.state.accounts.get(_.id)?.swapOffers?.get("bob-eth-ask");K6(!!S,"Bob ETH ask exists after Phase 1");let y=S.quantizedGive??S.giveAmount,u=S.quantizedWant??S.wantAmount,[,c]=N6($,g.id),z0=c.state.accounts.get(f.id)?.swapOffers?.get("alice-wbtc-bid");K6(!!z0,"Alice WBTC bid exists after Phase 1");let[,e]=N6($,h.id),J0=e.state.accounts.get(x.id)?.swapOffers?.get("bob-dai-ask");K6(!!J0,"Bob DAI ask exists after Phase 1");let t=J0.quantizedGive??J0.giveAmount,Z0=J0.quantizedWant??J0.wantAmount;console.log(""),console.log("         PHASE 2: Takers Sweep Orderbook                       "),console.log(`
`),console.log(`\uD83C\uDFAF Takers placing crossing orders (auto-matched by Hub orderbook)...
`),console.log("\uD83D\uDCB1 Carol: BUY 3 ETH @ $3100 (crosses Bob's ask @ $3050)"),await X($,[{entityId:v.id,signerId:v.signer,entityTxs:[{type:"placeSwapOffer",data:{offerId:"carol-eth-bid",counterpartyEntityId:_.id,giveTokenId:b8,giveAmount:i8(9300),wantTokenId:n3,wantAmount:O4(3),minFillRatio:0}}]}]),await x8($,30),console.log(`   Carol's bid placed - orderbook should match with Bob's ask
`),console.log("\uD83D\uDCB1 Dave: SELL 1 WBTC @ $58000 (crosses Alice's bid @ $59000)"),await X($,[{entityId:b.id,signerId:b.signer,entityTxs:[{type:"placeSwapOffer",data:{offerId:"dave-wbtc-ask",counterpartyEntityId:f.id,giveTokenId:pM,giveAmount:LT(1),wantTokenId:b8,wantAmount:i8(58000),minFillRatio:0}}]}]),await x8($,30),console.log(`   Dave's ask placed - orderbook should match with Alice's bid
`),console.log("\uD83D\uDCB1 Frank: BUY 100 DAI @ $1.01 (crosses Bob's ask @ $1.002)"),await X($,[{entityId:K.id,signerId:K.signer,entityTxs:[{type:"placeSwapOffer",data:{offerId:"frank-dai-bid",counterpartyEntityId:x.id,giveTokenId:b8,giveAmount:i8(101),wantTokenId:CT,wantAmount:TT(100),minFillRatio:0}}]}]),await x8($,30),console.log(`   Frank's bid placed - orderbook should match with Bob's ask
`),console.log(` PHASE 2 COMPLETE: Crossing orders placed, matches processed
`);let[,N0]=N6($,h.id),l=N0.state.accounts.get(_.id)?.swapOffers?.get("bob-eth-ask");if(l){let D0=l.giveAmount;K6(D0<O4(5),`Bob ETH ask partially filled (remaining: ${D0}, original: ${O4(5)})`),console.log(`  Bob ETH remaining: ${Number(D0)/1000000000000000000} ETH`)}else console.log("  Bob ETH ask fully filled (offer removed)");let[,q0]=N6($,g.id),K0=q0.state.accounts.get(f.id)?.swapOffers?.get("alice-wbtc-bid");if(K0)console.log(`  Alice WBTC bid remaining: ${Number(K0.giveAmount)/1000000000000000000} USDC`);else console.log("  Alice WBTC bid fully filled (offer removed)");let[,k0]=N6($,h.id),X0=k0.state.accounts.get(x.id)?.swapOffers?.get("bob-dai-ask");if(X0){let D0=X0.giveAmount;console.log(`  Bob DAI remaining: ${Number(D0)/1000000000000000000} DAI`)}else console.log("  Bob DAI ask fully filled (offer removed)");console.log(""),console.log("         PHASE 3: Market Volatility (Cancel & Replace)         "),console.log(`
`),console.log("\uD83D\uDEAB Alice: Cancel ETH ask @ $3100 (no fills, repricing)"),await X($,[{entityId:g.id,signerId:g.signer,entityTxs:[{type:"cancelSwapOffer",data:{offerId:"alice-eth-ask",counterpartyEntityId:_.id}}]}]),console.log(`   Order cancelled
`),console.log("\uD83D\uDCCA Alice: New ETH ask @ $3020 (tighter spread)"),await X($,[{entityId:g.id,signerId:g.signer,entityTxs:[{type:"placeSwapOffer",data:{offerId:"alice-eth-ask-v2",counterpartyEntityId:_.id,giveTokenId:n3,giveAmount:O4(10),wantTokenId:b8,wantAmount:i8(30200),minFillRatio:FT}}]}]),console.log(`   New order placed
`),await x8($),console.log(` PHASE 3 COMPLETE: Market volatility simulated
`);let[,n0]=N6($,g.id),W0=n0.state.accounts.get(_.id);K6(!W0?.swapOffers?.has("alice-eth-ask"),"Alice ETH ask cancelled");let V0=W0?.swapOffers?.get("alice-eth-ask-v2");K6(!!V0,"Alice ETH ask v2 created"),K6(V0.giveAmount===O4(10),`Alice ETH ask v2 giveAmount = ${O4(10)} (got ${V0.giveAmount})`),K6(V0.wantAmount===i8(30200),`Alice ETH ask v2 wantAmount = ${i8(30200)} (got ${V0.wantAmount})`),console.log("\uD83D\uDD04 Final convergence (flush pending frames)..."),await x8($,200);let H1=(D0,j0,g1)=>{let[,T0]=N6($,j0);if(!T0){console.warn(`[SWAP-MARKET] ${D0}: missing replica ${j0.slice(-4)}`);return}let R0=T0.state.accounts.get(g1);if(!R0){console.warn(`[SWAP-MARKET] ${D0}: no account ${j0.slice(-4)}${g1.slice(-4)}`);return}let s1=R0.mempool.map((C0)=>C0.type),B0=R0.pendingFrame?.accountTxs.map((C0)=>C0.type)??[];console.warn(`[SWAP-MARKET] ${D0}: ${j0.slice(-4)}${g1.slice(-4)} height=${R0.currentHeight} pending=${R0.pendingFrame?"yes":"no"} sent=${R0.sentTransitions} acked=${R0.ackedTransitions} sendCounter=${R0.sendCounter} recvCounter=${R0.receiveCounter} mempool=[${s1.join(",")}] pendingTxs=[${B0.join(",")}]`)};await xM($,()=>{try{return $X($,"Swap Market"),!0}catch{return!1}},400,"Swap Market idle",void 0,()=>{try{$X($,"Swap Market")}catch(D0){console.warn(D0 instanceof Error?D0.message:D0);let j0=x.id;H1("idle-debug hubDaibob",j0,h.id),H1("idle-debug bobhubDai",h.id,j0),H1("idle-debug hubDaieve",j0,m.id),H1("idle-debug evehubDai",m.id,j0)}}),console.log(` Final convergence complete
`),console.log(""),console.log("                   MARKET SUMMARY                              "),console.log(`
`);for(let D0 of G){let[,j0]=N6($,D0.id),g1=j0.state.orderbookExt;if(!g1?.books)continue;console.log(`\uD83D\uDCC8 ${D0.name} Orderbook State:`),console.log(`  - Total pairs: ${g1.books.size}`);for(let[T0,R0]of g1.books){let s1=0,B0=0;for(let C0=0;C0<R0.orderActive.length;C0++)if(R0.orderActive[C0])if(R0.orderSide[C0]===0)s1++;else B0++;console.log(`  - Pair ${T0}: ${s1} bids, ${B0} asks`)}console.log()}console.log("\uD83D\uDC65 Trader Positions:");for(let D0 of[v,b,K]){let[,j0]=N6($,D0.id),g1=j0.state.accounts.get(_.id)||j0.state.accounts.get(f.id)||j0.state.accounts.get(x.id);if(g1){let T0=Array.from(g1.deltas.values());console.log(`  ${D0.name}:`);for(let R0 of T0){let s1=R0.tokenId,B0=R0.ondelta-R0.offdelta;if(B0!==0n)console.log(`    - ${s1===b8?"USDC":s1===n3?"ETH":s1===pM?"WBTC":"DAI"}: ${B0>0n?"+":""}${B0.toString()}`)}}}console.log(`
`),console.log(" MULTI-PARTY MARKET SIMULATION COMPLETE!"),console.log(""),console.log(`\uD83D\uDCCA Total frames: ${$.history?.length||0}`),console.log(`\uD83D\uDC65 Participants: 10 (${D.map((D0)=>D0.name).join(", ")})`),console.log("\uD83D\uDCB1 Orderbooks: 3 (USDC/ETH, USDC/WBTC, USDC/DAI)"),console.log("\uD83D\uDCC8 Orders placed: 9"),console.log("\uD83C\uDFAF Market fills: 3"),console.log("\uD83D\uDEAB Cancellations: 1"),console.log(`
`)}finally{$.scenarioMode=Z??!1,Q()}}async function CA0($){let Q=L8($,"Swap Market Stress"),Z=$.scenarioMode;try{$.scenarioMode=!0,h9($,"Swap Market Stress"),N9($,["1","2","3","4","5","6","7","8","9","10","11"],"Swap Market Stress");let X=await o30(),Y=await n30();if($.scenarioMode&&$.height===0)$.timestamp=1;console.log(""),console.log("      SWAP MARKET STRESS TEST: High-Load Order Processing      "),console.log(`
`),console.log("\uD83C\uDFDB  Setting up stress test environment...");let J=(await i2($)).getDepositoryAddress();Q7($,"StressTest",J,{x:0,y:600,z:0});let W=rq("StressTest",J);console.log(` BrowserVM J-Machine created
`);let G={name:"Hub",id:"0x"+"1".padStart(64,"0"),signer:"1"},U=[];for(let x=0;x<10;x++)U.push({name:`Trader${x}`,id:"0x"+(x+2).toString(16).padStart(64,"0"),signer:String(x+2)});let D=[G,...U],P=D.map((x,g)=>({type:"importReplica",entityId:x.id,signerId:x.signer,data:{isProposer:!0,position:{x:(g-5)*30,y:-80,z:0},config:{mode:"proposer-based",threshold:1n,validators:[x.signer],shares:{[x.signer]:1n}}}}));await Y($,{runtimeTxs:P,entityInputs:[]}),console.log(` Created ${D.length} entities
`);let{DEFAULT_SPREAD_DISTRIBUTION:H}=await Promise.resolve().then(() => (rZ(),GU));await X($,[{entityId:G.id,signerId:G.signer,entityTxs:[{type:"initOrderbookExt",data:{name:"StressHub",spreadDistribution:H,referenceTokenId:b8,minTradeSize:0n,supportedPairs:["1/4"]}}]}]),await x8($),console.log(` Hub orderbook initialized
`),console.log("\uD83D\uDD17 Opening accounts and extending credit...");for(let x of U)await X($,[{entityId:x.id,signerId:x.signer,entityTxs:[{type:"openAccount",data:{targetEntityId:G.id}}]}]),await x8($,20),await X($,[{entityId:G.id,signerId:G.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:x.id,tokenId:n3,amount:O4(1000)}},{type:"extendCredit",data:{counterpartyEntityId:x.id,tokenId:b8,amount:i8(3000000)}}]},{entityId:x.id,signerId:x.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:G.id,tokenId:n3,amount:O4(1000)}},{type:"extendCredit",data:{counterpartyEntityId:G.id,tokenId:b8,amount:i8(3000000)}}]}]),await x8($,20);console.log(` All accounts and credit established
`),console.log(""),console.log("         STRESS PHASE 1: Rapid Order Placement                 "),console.log(`
`);let N=5,C=3000n,L=0,B=Date.now();for(let x=0;x<N;x++){let g=[];for(let h=0;h<U.length;h++){let v=U[h],b=(h+x)%2===0,m=BigInt((h-5)*10+x*2),K=C+m,M=1n+BigInt(x%3);if(b)g.push({entityId:v.id,signerId:v.signer,entityTxs:[{type:"placeSwapOffer",data:{offerId:`${v.name}-buy-${x}`,counterpartyEntityId:G.id,giveTokenId:b8,giveAmount:i8(M*K),wantTokenId:n3,wantAmount:O4(M),minFillRatio:0}}]});else g.push({entityId:v.id,signerId:v.signer,entityTxs:[{type:"placeSwapOffer",data:{offerId:`${v.name}-sell-${x}`,counterpartyEntityId:G.id,giveTokenId:n3,giveAmount:O4(M),wantTokenId:b8,wantAmount:i8(M*K),minFillRatio:0}}]});L++}await X($,g),await x8($,50),console.log(`  Round ${x+1}/${N}: ${g.length} orders placed`)}let E=Date.now()-B;console.log(`
 Placed ${L} orders in ${E}ms (${(L/(E/1000)).toFixed(1)} orders/sec)
`),console.log(""),console.log("         STRESS PHASE 2: Orderbook State Verification          "),console.log(`
`);let[,I]=N6($,G.id),f=I.state.orderbookExt?.books?.get("1/4");if(f){let x=0,g=0,h=0n;for(let K=0;K<f.orderActive.length;K++)if(f.orderActive[K]){let M=BigInt(f.orderQtyLots[K]);if(h+=M,f.orderSide[K]===0)x++;else g++}console.log("\uD83D\uDCCA Orderbook ETH/USDC:"),console.log(`   - Active bids: ${x}`),console.log(`   - Active asks: ${g}`),console.log(`   - Total lots: ${h}`);let v=L,b=x+g,m=v-b;console.log(`   - Matched (crossed): ~${m} orders
`)}console.log(""),console.log("                 STRESS TEST RESULTS                           "),console.log(""),console.log(`\uD83D\uDCCA Total frames: ${$.history?.length||0}`),console.log(`\uD83D\uDCC8 Orders placed: ${L}`),console.log(`  Order time: ${E}ms`),console.log(`\uD83D\uDE80 Throughput: ${(L/(E/1000)).toFixed(1)} orders/sec`),console.log(`\uD83D\uDC65 Traders: ${U.length}`),console.log(`
`),await x8($,200),$X($,"Swap Market")}finally{$.scenarioMode=Z??!1,Q()}}var Vv=null,Ov=null,o30=async()=>{if(!Vv)Vv=(await Promise.resolve().then(() => (l5(),a5))).process;return Vv},n30=async()=>{if(!Ov)Ov=(await Promise.resolve().then(() => (l5(),a5))).applyRuntimeInput;return Ov},n3=1,pM=2,CT=3,b8=4,RA0=18n,AT,i8=($)=>BigInt($)*AT,O4=($)=>BigInt($)*AT,LT=($)=>BigInt($)*AT,TT=($)=>BigInt($)*AT,l30=6553,FT=16384,i30=32768;var Mv=p(async()=>{u2();lq();AT=10n**RA0});var r30={};x1(r30,{multiSig:()=>TA0});async function TA0($){let Q=L8($,"Multi-Sig"),Z=$.scenarioMode;try{$.scenarioMode=!0;let{clearSignerKeys:X}=await Promise.resolve().then(() => (H8(),R$)),Y=h9($,"Multi-Sig"),z=new Set;X(),N9($,["1","2","3","4","5","6","7"],"Multi-Sig");let{applyRuntimeInput:J}=await Promise.resolve().then(() => (l5(),a5));if($.scenarioMode&&$.height===0)$.timestamp=1;console.log(""),console.log("     MULTI-SIGNER CONSENSUS TEST (2-of-3 Validators)          "),console.log(`
`),console.log("\uD83C\uDFDB  Setting up BrowserVM...");let W=(await i2($)).getDepositoryAddress();Q7($,"MultiSig",W,{x:0,y:600,z:0}),console.log(` BrowserVM ready
`),console.log("\uD83D\uDCE6 Creating entities...");let G={id:"0x"+"1".padStart(64,"0"),validators:["1","2","3"]},U={id:"0x"+"2".padStart(64,"0"),validators:["4"],signer:"4"},D={mode:"proposer-based",threshold:2n,validators:["1","2","3"],shares:{"1":1n,"2":1n,"3":1n}};await J($,{runtimeTxs:[{type:"importReplica",entityId:G.id,signerId:"1",data:{isProposer:!0,position:{x:0,y:0,z:0},config:D}},{type:"importReplica",entityId:G.id,signerId:"2",data:{isProposer:!1,position:{x:0,y:0,z:0},config:D}},{type:"importReplica",entityId:G.id,signerId:"3",data:{isProposer:!1,position:{x:0,y:0,z:0},config:D}},{type:"importReplica",entityId:U.id,signerId:U.signer,data:{isProposer:!0,position:{x:100,y:0,z:0},config:{mode:"proposer-based",threshold:1n,validators:[U.signer],shares:{[U.signer]:1n}}}}],entityInputs:[]}),console.log("   Alice: 2-of-3 validators (1, 2, 3)"),console.log(`   Hub: single validator
`),console.log("\uD83D\uDD17 Opening Alice-Hub account (multi-sig)..."),await p2($,[{entityId:G.id,signerId:"1",entityTxs:[{type:"openAccount",data:{targetEntityId:U.id}}]}],z),await CU($,z,20),console.log("\\n\uD83D\uDD0D Checking account state across all validators...");for(let y of G.validators){let u=`${G.id}:${y}`,c=$.eReplicas.get(u);if(!c){console.log(`   ${y}: replica not found`);continue}let o=c.state.accounts.has(U.id),z0=c.state.accounts.size;if(console.log(`  ${y}: ${o?"":""} account with Hub (total accounts: ${z0})`),o){let e=c.state.accounts.get(U.id);console.log(`     Account height: ${e.height}, mempool: ${e.mempool.length}, pending: ${!!e.pendingFrame}`)}}let[P,H]=N6($,G.id),N=H.state.accounts.has(U.id);if(console.log(`\\n  Using replica: ${P}`),console.log(`  Account opened: ${N?"":" FAILED"}\\n`),!N)throw Error("Account opening failed - multi-sig not working");console.log("\\n"),console.log("  TEST 0: Negative Test - Threshold Enforcement                "),console.log("\\n"),console.log("\uD83D\uDD12 Creating isolated 2-of-3 entity for negative test...");let C={id:"0x"+"F".padStart(64,"0"),validators:["5","6","7"]},L={mode:"proposer-based",threshold:2n,validators:["5","6","7"],shares:{"5":1n,"6":1n,"7":1n}};await J($,{runtimeTxs:[{type:"importReplica",entityId:C.id,signerId:"5",data:{isProposer:!0,position:{x:200,y:0,z:0},config:L}}],entityInputs:[]}),await p2($,[{entityId:C.id,signerId:"5",entityTxs:[{type:"openAccount",data:{targetEntityId:U.id}}]}],z),await p2($,void 0,z);let[,B]=N6($,C.id);K6(B.proposal,"Proposer should have proposal"),K6(B.proposal.collectedSigs?.size===1,`Only proposer signature, got ${B.proposal.collectedSigs?.size||0}`);let E=B.state.height;await p2($,void 0,z),await p2($,void 0,z),await p2($,void 0,z);let[,I]=N6($,C.id);K6(I.state.height===E,`Height should NOT change with only 1/3 signatures: ${I.state.height} === ${E}`),K6(I.proposal,"Proposal should still exist (not committed)"),K6(I.proposal.collectedSigs?.size===1,"Should still have only 1 signature"),console.log("    Proposer alone cannot commit (1/2 threshold not met)"),console.log("    Threshold enforcement verified\\n");for(let y of Array.from($.eReplicas.keys()))if(y.startsWith(C.id+":"))$.eReplicas.delete(y);if($.pendingOutputs)$.pendingOutputs=$.pendingOutputs.filter((y)=>y.entityId!==C.id);if($.pendingNetworkOutputs)$.pendingNetworkOutputs=$.pendingNetworkOutputs.filter((y)=>y.entityId!==C.id);if($.networkInbox)$.networkInbox=$.networkInbox.filter((y)=>y.entityId!==C.id);if($.runtimeInput?.entityInputs)$.runtimeInput.entityInputs=$.runtimeInput.entityInputs.filter((y)=>y.entityId!==C.id);for(let[,y]of $.eReplicas)if(y.state.accounts.has(C.id))y.state.accounts.delete(C.id);console.log(""),console.log("  TEST 1: Byzantine Tolerance (3 offline)                      "),console.log("\\n"),console.log("\uD83D\uDCF4 Simulating 3 offline (drop inputs to signer)..."),z.add("3"),$.info("network","OFFLINE_SIGNER",{signerId:"3",reason:"byzantine test"},G.id),console.log("   3 input delivery disabled\\n"),console.log("\uD83D\uDCBC 1 proposes: extendCredit to Hub (2-of-3, 3 offline)");let _=(await N6($,G.id))[1].state.height;await p2($,[{entityId:G.id,signerId:"1",entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:U.id,tokenId:wU,amount:wT(1e4)}}]}],z),await CU($,z,10,"3-offline");let[,f]=N6($,G.id);K6(f.state.height>_,`Frame should commit with 2/3 (1+2): ${f.state.height} > ${_}`),K6(!f.proposal,"Proposal should be cleared after commit"),console.log(`    Frame committed with 3 offline (height ${_}  ${f.state.height})`),z.delete("3"),console.log("\\n TEST 1 COMPLETE: Byzantine tolerance proven!\\n"),console.log("   1 + 2 = 2/3 threshold "),console.log("   Commit succeeded without 3 "),console.log("\uD83D\uDCB3 Setting up credit..."),await p2($,[{entityId:G.id,signerId:"1",entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:U.id,tokenId:wU,amount:wT(1e6)}}]},{entityId:U.id,signerId:U.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:G.id,tokenId:wU,amount:wT(1e6)}}]}],z),await CU($,z,50);let[,x]=N6($,G.id);console.log("\\n\uD83D\uDD0D Alice entity state after credit:"),console.log(`   Height: ${x.state.height}`),console.log(`   Mempool: ${x.mempool.length}`),console.log(`   Proposal: ${x.proposal?"present":"none"}`),console.log(`   LockedFrame: ${x.lockedFrame?"present":"none"}`);let g=x.state.accounts.get(U.id);if(!g)throw Error("Account with Hub not found after credit");console.log("\\n\uD83D\uDD0D Alice-Hub account state:"),console.log(`   Account height: ${g.height}`),console.log(`   Mempool: ${g.mempool.length}`),console.log(`   PendingFrame: ${g.pendingFrame?"yes":"no"}`);let h=g.deltas.get(wU);console.log("\\n  \uD83D\uDCB3 Credit limits:"),console.log(`     AliceHub leftCreditLimit: ${h?.leftCreditLimit||0n}`),console.log(`     AliceHub rightCreditLimit: ${h?.rightCreditLimit||0n}\\n`);let[,v]=N6($,U.id),b=v.state.accounts.get(G.id);if(console.log("\uD83D\uDD0D Hub-Alice account state:"),console.log(`   Account height: ${b?.height}`),console.log(`   Mempool: ${b?.mempool.length||0}`),console.log(`   PendingFrame: ${b?.pendingFrame?"yes":"no"}\\n`),!h||h.rightCreditLimit===0n)throw Error("Multi-sig credit not applied - bilateral consensus is broken");console.log(""),console.log("  TEST 2: directPayment with 2-of-3 Consensus                  "),console.log(`
`);let m=wT(1000);console.log("\uD83D\uDCB8 1 proposes: AliceHub $1000"),await p2($,[{entityId:G.id,signerId:"1",entityTxs:[{type:"directPayment",data:{targetEntityId:U.id,tokenId:wU,amount:m,route:[G.id,U.id],description:"Multi-sig test payment"}}]}],z),await p2($,void 0,z);let[,K]=N6($,G.id);K6(K.proposal,"Proposer should have proposal after mempool tx"),K6(K.proposal.collectedSigs?.size===1,`Proposal should have 1 sig (self), got ${K.proposal.collectedSigs?.size||0}`),console.log("    Proposal created with 1 signature (proposer self-sign)");let M=$.eReplicas.get(`${G.id}:2`),j=$.eReplicas.get(`${G.id}:3`);K6(M?.lockedFrame,"2 should have lockedFrame after receiving proposal"),K6(j?.lockedFrame,"3 should have lockedFrame after receiving proposal"),console.log("    Validators 2, 3 locked proposal");let O=K.state.height,R=N6($,G.id)[1],F=R.proposal?.collectedSigs?.size||0;for(let y=0;y<5&&F<3;y++)await p2($,void 0,z),R=N6($,G.id)[1],F=R.proposal?.collectedSigs?.size||0;if(console.log(`   Signatures collected: ${F}/3`),R.proposal)K6(F===3,`Should have 3 signatures (threshold met), got ${F}`),console.log("    Threshold reached: 3/3 signatures collected");else if(R.state.height>O)console.log("    Commit completed during precommit collection");let A=O,T=R;if(T.state.height===A)for(let y=0;y<6&&T.state.height===A;y++)await p2($,void 0,z),T=N6($,G.id)[1];K6(T.state.height>A,`Height should increment after commit: ${T.state.height} vs ${A+1}`),K6(!T.proposal,"Proposal should be cleared after commit"),console.log(`    Frame committed: height ${A}  ${T.state.height}`),console.log(`   Multi-sig consensus verified!
`),console.log("\uD83D\uDD04 Converging bilateral accounts..."),await CU($,z,20);let[,V]=N6($,G.id),S=V.state.accounts.get(U.id)?.deltas.get(wU)?.offdelta||0n;console.log(`
\uD83D\uDCCA Final state:`),console.log(`   Alice-Hub offdelta: ${S}`),K6(S===-m,`Payment applied: ${S} === -${m}`),console.log(`
 TEST 2 COMPLETE: Multi-sig + bilateral consensus works!
`),console.log(""),console.log(" MULTI-SIGNER CONSENSUS: ALL TESTS PASS"),console.log(""),console.log(`\uD83D\uDCCA Total frames: ${$.history?.length||0}`),console.log("   Entity-level 2-of-3 threshold: "),console.log("   Proposer alone cannot commit: "),console.log("   Byzantine tolerance (3 offline): "),console.log("   Bilateral consensus with multi-sig: "),console.log(`
`)}finally{$.scenarioMode=Z??!1,Q()}}var wU=1,LA0,wT=($)=>BigInt($)*LA0;var a30=p(async()=>{u2();LA0=10n**18n});var jv={};x1(jv,{rapidFire:()=>BA0});async function BA0($){let Q=L8($,"Rapid Fire"),Z=$.scenarioMode;try{$.scenarioMode=!0,h9($,"Rapid Fire"),N9($,["1","2","3"],"Rapid Fire");let X=await FA0(),Y=await AA0();if($.scenarioMode&&$.height===0)$.timestamp=1;console.log(""),console.log("     RAPID-FIRE: High-Load Bilateral Consensus Stress Test     "),console.log(`
`),console.log("\uD83C\uDFDB  Setting up test environment...");let J=(await i2($)).getDepositoryAddress();Q7($,"RapidFire",J,{x:0,y:600,z:0});let q=[{name:"Alice",id:"0x"+"1".padStart(64,"0"),signer:"1"},{name:"Hub",id:"0x"+"2".padStart(64,"0"),signer:"2"},{name:"Bob",id:"0x"+"3".padStart(64,"0"),signer:"3"}];await Y($,{runtimeTxs:q.map((v)=>({type:"importReplica",entityId:v.id,signerId:v.signer,data:{isProposer:!0,position:{x:0,y:0,z:0},config:{mode:"proposer-based",threshold:1n,validators:[v.signer],shares:{[v.signer]:1n}}}})),entityInputs:[]});let[W,G,U]=q;console.log(`   Created: ${q.map((v)=>v.name).join(", ")}
`),console.log("\uD83D\uDD17 Opening bilateral accounts..."),await X($,[{entityId:W.id,signerId:W.signer,entityTxs:[{type:"openAccount",data:{targetEntityId:G.id}}]},{entityId:U.id,signerId:U.signer,entityTxs:[{type:"openAccount",data:{targetEntityId:G.id}}]}]),await x8($),console.log(`   Alice-Hub and Bob-Hub accounts created
`),console.log("\uD83D\uDCB3 Setting up credit limits...");let D=s30(1e6);await X($,[{entityId:W.id,signerId:W.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:G.id,tokenId:HJ,amount:D}}]},{entityId:G.id,signerId:G.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:W.id,tokenId:HJ,amount:D}},{type:"extendCredit",data:{counterpartyEntityId:U.id,tokenId:HJ,amount:D}}]},{entityId:U.id,signerId:U.signer,entityTxs:[{type:"extendCredit",data:{counterpartyEntityId:G.id,tokenId:HJ,amount:D}}]}]),await x8($),console.log(`   Bidirectional credit established
`),console.log(""),console.log("    STRESS TEST: 100 payments AHB + 100 payments BHA      "),console.log(`
`);let P=t30,H=100,N=5,C=0,L=0,B=nZ();console.log(`\uD83D\uDE80 Sending ${H} payments each direction ($1 every ~100ms)...
`);for(let v=0;v<H/N;v++){let b=nZ(),m=[];for(let M=0;M<N;M++)m.push({entityId:W.id,signerId:W.signer,entityTxs:[{type:"directPayment",data:{targetEntityId:U.id,tokenId:HJ,amount:P,route:[W.id,G.id,U.id],description:`Forward #${C++}`}}]}),m.push({entityId:U.id,signerId:U.signer,entityTxs:[{type:"directPayment",data:{targetEntityId:W.id,tokenId:HJ,amount:P,route:[U.id,G.id,W.id],description:`Reverse #${L++}`}}]});await X($,m),await x8($,50);let K=nZ()-b;if(v%2===0)console.log(`   Batch ${v+1}/10: ${N*2} payments in ${K}ms (${C} fwd, ${L} rev)`)}let E=nZ()-B;console.log(`
 Stress test complete: ${C+L} payments in ${E}ms`),console.log(`   Throughput: ${((C+L)/(E/1000)).toFixed(1)} payments/sec`),console.log(`
\uD83D\uDD04 Final convergence (draining all pending frames)...`),await x8($,200),console.log(`    All frames settled
`),console.log(""),console.log("                   VERIFICATION                                "),console.log(`
`);let I=OT($,W.id,G.id,HJ),_=OT($,G.id,U.id,HJ),f=0n;console.log("\uD83D\uDCCA Final positions:"),console.log(`   Alice-Hub: ${I} (expected ~${f})`),console.log(`   Hub-Bob:   ${_} (expected ~${f})`);let x=s30(20);K6(I>=-x&&I<=x,`Alice-Hub delta within tolerance: ${I}`),K6(_>=-x&&_<=x,`Hub-Bob delta within tolerance: ${_}`);let g=0,h=0;for(let[,v]of $.eReplicas)for(let[,b]of v.state.accounts)if(g+=b.mempool.length,b.pendingFrame)h++;console.log(`
\uD83D\uDD0D Final state:`),console.log(`   Total mempool items: ${g}`),console.log(`   Pending frames: ${h}`),console.log(`   History frames: ${$.history?.length||0}`),K6(g===0,"All mempools drained"),K6(h===0,"No pending frames"),console.log(`
`),console.log(" RAPID-FIRE STRESS TEST COMPLETE!"),console.log(`   Payments: ${C+L}`),console.log(`   Duration: ${(E/1000).toFixed(1)}s`),console.log(`   Throughput: ${((C+L)/(E/1000)).toFixed(1)} tx/s`),console.log(`   Frames: ${$.history?.length||0}`),console.log(`
`)}finally{$.scenarioMode=Z??!1,Q()}}var Pv=null,Hv=null,FA0=async()=>{if(!Pv)Pv=(await Promise.resolve().then(() => (l5(),a5))).process;return Pv},AA0=async()=>{if(!Hv)Hv=(await Promise.resolve().then(() => (l5(),a5))).applyRuntimeInput;return Hv},HJ=1,wA0=18n,t30,s30=($)=>BigInt($)*t30;var Rv=p(async()=>{B8();u2();t30=10n**wA0});function e30($){return BT.find((Q)=>Q.id===$)}function $$0($){return BT.filter((Q)=>Q.tags.includes($))}var BT;var Q$0=p(()=>{BT=[{id:"ahb",name:"Alice-Hub-Bob Triangle",description:"Full bilateral consensus test with 6 phases, simultaneous payments, rollback verification",tags:["consensus","core","bilateral"],run:async($)=>(await ob().then(() => ib)).ahb($)},{id:"lock-ahb",name:"HTLC Multi-Hop (AHB)",description:"3-hop onion routed HTLC with encrypted envelopes, automatic secret propagation, fee collection",tags:["htlc","routing","onion"],run:async($)=>(await tb().then(() => sb)).lockAhb($)},{id:"htlc-4hop",name:"HTLC 4-Hop Chain",description:"4-hop onion routed payment through 3 hubs, fee cascade verification",tags:["htlc","routing"],run:async($)=>(await m30().then(() => h30)).htlc4hop($)},{id:"swap",name:"Swap Orderbook",description:"Bilateral swap orderbook with limit orders, partial fills, cancel",tags:["swap","orderbook"],run:async($)=>(await Uv().then(() => Gv)).swap($)},{id:"swap-market",name:"Multi-Party Swap Market",description:"8 traders, 3 orderbooks, realistic market simulation",tags:["swap","orderbook","stress"],run:async($)=>(await Mv().then(() => Dv)).swapMarket($)},{id:"multi-sig",name:"Multi-Signer BFT",description:"2-of-3 threshold consensus, byzantine tolerance, offline validator simulation",tags:["consensus","bft","multi-sig"],run:async($)=>(await a30().then(() => r30)).multiSig($)},{id:"rapid-fire",name:"Rapid-Fire Stress Test",description:"200 payments in 10s, bidirectional high-load, rollback handling",tags:["stress","bilateral"],run:async($)=>(await Rv().then(() => jv)).rapidFire($)}]});var Y$0={};x1(Y$0,{assertRuntimeStateStrict:()=>_A0});async function _A0($){for(let[Q,Z]of $.eReplicas.entries()){zM(Z.state,`strictScenario.${Q}`);for(let[X,Y]of Z.state.accounts.entries())await IA0(Y,Q,X)}}var EA0=($,Q)=>`${$.slice(-4)}${Q.slice(-4)}`,Z$0=($,Q)=>{if($.tokenIds.length!==$.deltas.length)throw Error(`[STRICT] ${Q}: tokenIds/deltas length mismatch`);if($.fullDeltaStates&&$.fullDeltaStates.length!==$.tokenIds.length)throw Error(`[STRICT] ${Q}: fullDeltaStates length mismatch`)},X$0=async($,Q)=>{if(!$.stateHash)throw Error(`[STRICT] ${Q}: missing stateHash`);if(!$.fullDeltaStates)throw Error(`[STRICT] ${Q}: missing fullDeltaStates`);let Z=await px($);if(Z!==$.stateHash)throw Error(`[STRICT] ${Q}: stateHash mismatch (recomputed=${Z}, stored=${$.stateHash})`)},IA0=async($,Q,Z)=>{let X=EA0(Q,Z),{currentFrame:Y}=$;if(Y.height!==$.currentHeight)throw Error(`[STRICT] ${X}: currentFrame.height ${Y.height} != currentHeight ${$.currentHeight}`);if($.proofHeader.disputeNonce!==$.currentHeight)throw Error(`[STRICT] ${X}: disputeNonce ${$.proofHeader.disputeNonce} != currentHeight ${$.currentHeight}`);if(Z$0(Y,`${X} currentFrame`),$.currentHeight>0)await X$0(Y,`${X} currentFrame`);if($.frameHistory.length>0){let z=$.frameHistory[$.frameHistory.length-1];if(z.height!==$.currentHeight)throw Error(`[STRICT] ${X}: frameHistory tail height ${z.height} != currentHeight ${$.currentHeight}`);if(z.stateHash!==$.currentFrame.stateHash)throw Error(`[STRICT] ${X}: frameHistory tail hash mismatch`)}if($.pendingFrame){let z=$.pendingFrame,J=$.currentHeight+1;if(z.height!==J)throw Error(`[STRICT] ${X}: pendingFrame.height ${z.height} != expected ${J}`);let q=$.currentHeight===0?"genesis":$.currentFrame.stateHash;if(z.prevFrameHash!==q)throw Error(`[STRICT] ${X}: pendingFrame.prevFrameHash mismatch`);Z$0(z,`${X} pendingFrame`),await X$0(z,`${X} pendingFrame`)}};var J$0=p(()=>{YJ();lL()});var U$0={};x1(U$0,{grid:()=>SA0});function ZX($,Q,Z,X={}){if(!$.history)$.history=[];let Y={tag:Q,description:Z,metadata:X,timestamp:$.timestamp,eReplicas:new Map($.eReplicas),jReplicas:$.jReplicas?new Map($.jReplicas):void 0};$.history.push(Y),console.log(`\uD83D\uDCF8 Snapshot: ${Z}`)}function K$0($){return BigInt($)*10n**18n}async function G$0($){let Q=await m2(),Z=$.runtimeInput?.entityInputs||[];if(Z.length>0){let X=[...Z];$.runtimeInput.entityInputs=[],await Q($,X)}}async function SA0($){let Q=L8($,"Grid");try{console.log(`\uD83D\uDD32 GRID SCALABILITY SCENARIO (222 = 8 nodes)
`),console.log(`Demonstrating: Broadcast bottleneck  Hub-spoke scaling
`),$.scenarioMode=!0;let Z=await i2($),X=Z.getDepositoryAddress();Q7($,"Grid Demo",X,{x:0,y:600,z:0});let Y=rq("Grid Demo",X);await ZX($,"INIT","J-Machine initialized"),console.log(`\uD83D\uDCD0 Creating ${r3.x}${r3.y}${r3.z} 3D grid (${r3.x*r3.y*r3.z} nodes)...`),console.log(`   Grid spacing: ${z$0}px`),console.log(`   J-Machine margin: ${q$0}px
`);let z=await g30($,r3,Y,{x:0,y:400,z:0},z$0);console.log(` Created ${z.length} grid nodes in 3D formation`),await ZX($,"GRID-CREATED",`${z.length} nodes in ${r3.x}${r3.y}${r3.z} 3D grid`,{gridDimensions:r3,totalNodes:z.length,margin:q$0,formation:"3D cube"}),console.log(`
\uD83D\uDCA5 PHASE 1: BROADCAST BOTTLENECK
`),console.log("All 8 nodes broadcasting to single J-Machine...");let J=$.jReplicas?.get("Grid Demo");if(!J)throw Error("J-Machine not found");console.log("\uD83D\uDCB0 Funding nodes with initial reserves...");for(let P=0;P<z.length;P++){let H=z[P];await Z.debugFundReserves(H,W$0,K$0(1e5))}await G$0($),console.log(` Funded ${z.length} nodes with $100K each`),await ZX($,"BROADCAST-FUNDED","Nodes funded - ready to broadcast",{fundedNodes:z.length,reservePerNode:"$100K"}),console.log(`
\uD83D\uDCE1 Broadcasting R2R transactions to J-Machine mempool...`),console.log("   (8 concurrent txs  single mempool)");for(let P=0;P<z.length;P++){let H=z[P],N=z[(P+1)%z.length];J.mempool.push({type:"r2r",from:H,to:N,amount:K$0(1e4),timestamp:$.timestamp})}console.log(` ${z.length} txs in J-Machine mempool (yellow cubes!)`),await ZX($,"BROADCAST-BOTTLENECK","Broadcast bottleneck: 8 txs in mempool",{phase:"broadcast",txCount:z.length,bottleneck:"J-Machine mempool capacity",complexity:"O(n) txs to single validator",mempoolSize:J.mempool.length}),console.log(`
  BROADCAST BOTTLENECK OBSERVED:`),console.log("    8 nodes  1 tx each = 8 concurrent broadcasts"),console.log("    Single J-Machine mempool capacity: ~10-20 txs/block"),console.log("    Result: All fit in one block, but imagine 256+ nodes"),console.log("    Scaling limit: Block capacity (NOT network mesh)"),console.log(`
 J-Block #1: Processing batch...`);for(let P of J.mempool)if(P.type==="r2r"&&P.from&&P.to&&P.amount)await Z.reserveToReserve(P.from,P.to,W$0,P.amount);J.mempool=[],await G$0($),console.log(" J-Block #1 executed - all R2R txs processed"),await ZX($,"BROADCAST-EXECUTED","J-Block processed 8 txs",{phase:"execution",txCount:z.length,mempoolSize:J.mempool.length}),console.log(`

\uD83C\uDF10 PHASE 2: HUB-SPOKE TOPOLOGY
`),console.log("Creating 2 routing hubs in ring formation...");let q=100,W=[];for(let P=0;P<2;P++){let H=P/2*Math.PI*2,N=Math.cos(H)*q,C=Math.sin(H)*q,L=500,B=await $v($,1000+P,`Hub${P+1}`,Y,{x:N,y:500,z:C});W.push(B)}console.log(` Created ${W.length} routing hubs`),console.log("   Position: Ring formation between grid and J-Machine"),await ZX($,"HUBS-CREATED","2 routing hubs form ring topology",{hubCount:W.length,hubRadius:q,topology:"ring"}),console.log(`
\uD83D\uDD17 Connecting nodes to nearest hubs...`);let G=Math.ceil(z.length/W.length),U=0;for(let P=0;P<z.length;P++){let H=z[P],N=Math.floor(P/G),C=W[Math.min(N,W.length-1)];U++}console.log(` Opened ${U} bilateral accounts (node  hub)`),await ZX($,"HUB-CONNECTIONS","Nodes connected to nearest hubs",{accountsOpened:U,avgNodesPerHub:Math.ceil(z.length/W.length),topology:"hub-spoke"}),console.log(`
\uD83D\uDD17 Connecting hubs in ring topology...`);let D=0;for(let P=0;P<W.length;P++){let H=W[P],N=W[(P+1)%W.length];D++}console.log(` Opened ${D} hub-to-hub connections`),await ZX($,"HUB-RING","Hubs connected in ring topology",{hubConnections:D,topology:"ring",maxHops:Math.ceil(W.length/2)}),console.log(`

\uD83D\uDCCA SCALING COMPARISON
`),console.log(""),console.log("BROADCAST MODEL (Traditional Blockchain):"),console.log(`   Nodes: ${z.length}`),console.log(`   Connections: ${z.length} (all  J-Machine)`),console.log("   Bottleneck: J-Machine mempool capacity"),console.log("   Complexity: O(n) txs to single validator"),console.log("   Block capacity: ~10-20 txs/block"),console.log(`   Queue buildup: ${z.length-20} pending txs`),console.log(""),console.log("HUB-SPOKE MODEL (Payment Channel Network):"),console.log(`   Nodes: ${z.length}`),console.log(`   Routing hubs: ${W.length}`),console.log(`   NodeHub connections: ${U}`),console.log(`   HubHub connections: ${D}`),console.log(`   Total connections: ${U+D}`),console.log(`   Avg nodes per hub: ~${Math.ceil(z.length/W.length)}`),console.log("   Bottleneck: NONE (local bilateral consensus)"),console.log("   Complexity: O(1) per node"),console.log("   Throughput: Unlimited (horizontal scaling)"),console.log("   Max routing hops: ~4 (hub ring diameter)"),console.log(""),await ZX($,"COMPARISON","Broadcast vs Hub-Spoke scaling metrics",{broadcast:{model:"Traditional Blockchain",nodes:z.length,connections:z.length,bottleneck:"J-Machine mempool",complexity:"O(n)",blockCapacity:20,queueBuildup:z.length-20},hubSpoke:{model:"Payment Channel Network",nodes:z.length,hubs:W.length,connections:U+D,bottleneck:"None",complexity:"O(1)",throughput:"Unlimited",maxHops:4}}),console.log(`

 GRID SCALABILITY DEMO COMPLETE`),console.log(`\uD83D\uDCCA Total frames: ${$.history?.length||0}`),console.log("\uD83C\uDFAF Key insight: Hubs aren't centralization - they're MATH"),console.log(`   O(n) mesh  O(n) broadcast  O(1) hub-spoke
`)}finally{$.scenarioMode=!1,Q()}}var r3,z$0=60,q$0=150,W$0=1;var V$0=p(async()=>{u2();r3={x:2,y:2,z:2}});var D$0={};x1(D$0,{runSettleScenario:()=>bA0});function $W($,Q){let Z=Array.from($.eReplicas.entries()).find(([X])=>X.startsWith(Q+":"));if(!Z)throw Error(`SETTLE: Replica for entity ${Q} not found`);return Z}function v8($,Q,Z){if(!$){if(Z)console.log(`
`+"=".repeat(80)),console.log("ASSERTION FAILED - FULL RUNTIME STATE:"),console.log("=".repeat(80)),console.log(h2(Z,{maxAccounts:5,maxLocks:20})),console.log("=".repeat(80)+`
`);throw Error(`ASSERT: ${Q}`)}}async function xA0($){let Q=await m2(),Z=$.runtimeInput?.entityInputs||[];if(Z.length>0){let X=[...Z];$.runtimeInput.entityInputs=[],await Q($,X)}}async function bA0($){console.log(""),console.log("                    SETTLEMENT WORKSPACE TEST SCENARIO                          "),console.log("");let Q=await m2(),Z=await kM();console.log(`
\uD83D\uDCCB PHASE 0: SETUP`);let Y=$||{eReplicas:new Map,jReplicas:new Map,height:0,timestamp:1700000000000,runtimeInput:{runtimeTxs:[],entityInputs:[]},history:[],gossip:null,frameLogs:[],log:(T)=>console.log(T),info:()=>{},warn:()=>{},error:()=>{},emit:()=>{}};if(Y.scenarioMode=!0,Y.quietRuntimeLogs=!0,Y.runtimeSeed===void 0||Y.runtimeSeed===null)Y.runtimeSeed="";let z=console.log;console.log=(...T)=>{let V=T[0]?.toString()||"";if(V.includes("ASSERT")||V.includes("")||V.includes("")||V.includes("PHASE")||V.includes("TEST")||V.includes("settle_")||V.includes("")||V.includes("HOLD CHECK"))z(...T)},Y.scenarioLogLevel="info";let q=L8(Y,"settle");N9(Y,["2","3"],"settle");let W=new Y2;await W.init(),Y.browserVM=W;let G=W.getDepositoryAddress(),U=W.getEntityProviderAddress();if(s7(Y,G,W),W.registerEntitiesWithSigners){console.log("[SETTLE] Registering entities with EntityProvider...");let T=await W.registerEntitiesWithSigners(["2","3"]);console.log(`[SETTLE]  Registered entities: [${T.join(", ")}]`)}Y.jReplicas.set(ET,{name:ET,blockNumber:0n,stateRoot:new Uint8Array(32),mempool:[],blockDelayMs:100,lastBlockTimestamp:Y.timestamp,position:{x:0,y:600,z:0},depositoryAddress:G,entityProviderAddress:U,contracts:{depository:G,entityProvider:U}}),Y.activeJurisdiction=ET,Y.gossip=g2();let D="0x"+"2".padStart(64,"0"),P="0x"+"3".padStart(64,"0");O$0.set(D,"Alice"),O$0.set(P,"Hub");let H={name:ET,chainId:31337,entityProviderAddress:U,depositoryAddress:G};await Z(Y,{runtimeTxs:[{type:"importReplica",entityId:D,signerId:"2",data:{isProposer:!0,position:{x:-30,y:-30,z:0},config:{mode:"proposer-based",threshold:1n,validators:["2"],shares:{"2":1n},jurisdiction:H}}}],entityInputs:[]}),await Z(Y,{runtimeTxs:[{type:"importReplica",entityId:P,signerId:"3",data:{isProposer:!0,position:{x:30,y:-30,z:0},config:{mode:"proposer-based",threshold:1n,validators:["3"],shares:{"3":1n},jurisdiction:H}}}],entityInputs:[]}),console.log(` Created Alice (${D.slice(-4)}) and Hub (${P.slice(-4)})`),a1(Y,"Entities Created",{description:"Alice and Hub entities initialized",phase:"setup"}),IT=qJ(Y,W),await Q(Y,[{entityId:D,signerId:"2",entityTxs:[{type:"mintReserves",data:{tokenId:YQ,amount:JQ(1000)}}]}]),await Q(Y,[{entityId:P,signerId:"3",entityTxs:[{type:"mintReserves",data:{tokenId:YQ,amount:JQ(1000)}}]}]);for(let T=0;T<5;T++)J9(Y),await xA0(Y);await Q(Y,[{entityId:D,signerId:"2",entityTxs:[{type:"openAccount",data:{targetEntityId:P}}]}]);for(let T=0;T<10;T++)J9(Y),await Q(Y);console.log(" Account opened between Alice and Hub"),a1(Y,"Account Opened",{description:"Bilateral account between Alice and Hub",phase:"setup"}),console.log(`
\uD83D\uDCCB TEST 1: Conservation Law Validation`);let N={tokenId:YQ,leftDiff:-100n,rightDiff:50n,collateralDiff:50n,ondeltaDiff:0n};v8(N.leftDiff+N.rightDiff+N.collateralDiff===0n,"Valid diff should satisfy conservation law"),console.log(` Valid diff: ${N.leftDiff} + ${N.rightDiff} + ${N.collateralDiff} = 0`);let C={tokenId:YQ,leftDiff:-100n,rightDiff:50n,collateralDiff:40n,ondeltaDiff:0n};v8(C.leftDiff+C.rightDiff+C.collateralDiff!==0n,"Invalid diff should violate conservation law"),console.log(` Invalid diff: ${C.leftDiff} + ${C.rightDiff} + ${C.collateralDiff} = ${C.leftDiff+C.rightDiff+C.collateralDiff}`),console.log(`
\uD83D\uDCCB TEST 2: Auto-Approve Logic`);let L={tokenId:YQ,leftDiff:0n,rightDiff:100n,collateralDiff:-100n,ondeltaDiff:0n},B=MU(L,!0);console.log(`   Hub withdraws from collateral: aliceAutoApproves=${B}`),v8(B,"Alice should auto-approve when Hub withdraws from Hub share");let E={tokenId:YQ,leftDiff:-100n,rightDiff:100n,collateralDiff:0n,ondeltaDiff:0n},I=MU(E,!0);console.log(`   Hub takes from Alice: aliceAutoApproves=${I}`),v8(!I,"Alice should NOT auto-approve when losing reserve");let _={tokenId:YQ,leftDiff:100n,rightDiff:-100n,collateralDiff:0n,ondeltaDiff:0n},f=MU(_,!0);console.log(`   Hub sends to Alice: aliceAutoApproves=${f}`),v8(f,"Alice should auto-approve when gaining reserve"),console.log(" Auto-approve logic works correctly"),console.log(`
\uD83D\uDCCB TEST 3: Settlement Workspace Propose`);let x={tokenId:YQ,leftDiff:-JQ(100),rightDiff:0n,collateralDiff:JQ(100),ondeltaDiff:JQ(100)};await Q(Y,[{entityId:D,signerId:"2",entityTxs:[{type:"settle_propose",data:{counterpartyEntityId:P,diffs:[x],memo:"Alice deposits collateral"}}]}]);for(let T=0;T<5;T++)J9(Y),await Q(Y);let[,g]=$W(Y,D),[,h]=$W(Y,P),v=g.state.accounts.get(P),b=h.state.accounts.get(D);v8(v?.settlementWorkspace,"Alice should have settlement workspace",Y),v8(b?.settlementWorkspace,"Hub should have settlement workspace",Y),v8(v.settlementWorkspace.version===1,"Workspace should be version 1"),v8(v.settlementWorkspace.initiatedBy==="left","Alice (left) initiated");let m=v.deltas.get(YQ);v8(m,"USDC delta should exist",Y);let K=JQ(100);console.log(`   HOLD CHECK: leftSettleHold=${m.leftSettleHold||0n}, expected=${K}`),v8(m.leftSettleHold===K,`Settlement hold not set: expected ${K}, got ${m.leftSettleHold||0n}`,Y),console.log(" Settlement proposed: Alice  Hub"),console.log(`   Workspace version: ${v.settlementWorkspace.version}`),console.log(`   Status: ${v.settlementWorkspace.status}`),a1(Y,"Settlement Proposed",{description:"Alice proposes $100 deposit to collateral",phase:"propose",holdAmount:K.toString()}),console.log(`
\uD83D\uDCCB TEST 4: Settlement Workspace Update`);let M={tokenId:YQ,leftDiff:-JQ(50),rightDiff:0n,collateralDiff:JQ(50),ondeltaDiff:JQ(50)};await Q(Y,[{entityId:P,signerId:"3",entityTxs:[{type:"settle_update",data:{counterpartyEntityId:D,diffs:[M],memo:"Hub counter: 50 instead of 100"}}]}]);for(let T=0;T<5;T++)J9(Y),await Q(Y);let j=$W(Y,D)[1].state.accounts.get(P);v8(j?.settlementWorkspace?.version===2,"Version should be 2 after update",Y),v8(j.settlementWorkspace.diffs[0].leftDiff===-JQ(50),"Diff should be updated"),console.log(" Settlement updated by Hub"),console.log(`   New version: ${j.settlementWorkspace.version}`),a1(Y,"Settlement Updated",{description:"Hub counter-proposes $50 instead of $100",phase:"update"}),console.log(`
\uD83D\uDCCB TEST 5: Settlement Approve`),await Q(Y,[{entityId:D,signerId:"2",entityTxs:[{type:"settle_approve",data:{counterpartyEntityId:P}}]}]);for(let T=0;T<5;T++)J9(Y),await Q(Y);let O=$W(Y,D)[1].state.accounts.get(P);v8(O?.settlementWorkspace?.leftHanko,"Alice should have signed",Y),v8(!O.settlementWorkspace.rightHanko,"Hub should not have signed yet",Y),console.log(" Alice approved settlement"),console.log(`   leftHanko: ${O.settlementWorkspace.leftHanko?.slice(0,20)}...`),await Q(Y,[{entityId:P,signerId:"3",entityTxs:[{type:"settle_approve",data:{counterpartyEntityId:D}}]}]);for(let T=0;T<5;T++)J9(Y),await Q(Y);let R=$W(Y,D)[1].state.accounts.get(P);v8(R?.settlementWorkspace?.leftHanko,"Alice hanko still present",Y),v8(R.settlementWorkspace.rightHanko,"Hub should have signed",Y),v8(R.settlementWorkspace.status==="ready_to_submit","Should be ready to submit",Y),console.log(" Hub approved settlement"),console.log(`   rightHanko: ${R.settlementWorkspace.rightHanko?.slice(0,20)}...`),console.log(`   Status: ${R.settlementWorkspace.status}`),a1(Y,"Settlement Approved",{description:"Both parties signed - ready to submit",phase:"approve"}),console.log(`
\uD83D\uDCCB TEST 6: Settlement Execute`),await Q(Y,[{entityId:D,signerId:"2",entityTxs:[{type:"settle_execute",data:{counterpartyEntityId:P}}]}]);for(let T=0;T<3;T++)J9(Y),await Q(Y);let F=$W(Y,D)[1].state;v8(!F.accounts.get(P)?.settlementWorkspace,"Workspace should be cleared after execute",Y),v8(F.jBatchState?.batch?.settlements?.length===1,"Settlement should be in jBatch",Y),console.log(" Settlement executed - added to jBatch"),console.log(`   jBatch settlements: ${F.jBatchState?.batch?.settlements?.length}`),a1(Y,"Settlement Executed",{description:"Settlement added to jBatch for on-chain commit",phase:"execute"}),console.log(`
\uD83D\uDCCB TEST 7: Settlement Reject`),await Q(Y,[{entityId:D,signerId:"2",entityTxs:[{type:"settle_propose",data:{counterpartyEntityId:P,diffs:[x],memo:"Another proposal"}}]}]);for(let T=0;T<5;T++)J9(Y),await Q(Y);await Q(Y,[{entityId:P,signerId:"3",entityTxs:[{type:"settle_reject",data:{counterpartyEntityId:D,reason:"Not interested"}}]}]);for(let T=0;T<5;T++)J9(Y),await Q(Y);let A=$W(Y,D)[1].state.accounts.get(P);if(v8(!A?.settlementWorkspace,"Workspace should be cleared after reject",Y),console.log(" Settlement rejected - workspace cleared"),a1(Y,"Settlement Rejected",{description:"Hub rejected - workspace cleared, holds released",phase:"reject"}),a1(Y,"Scenario Complete",{description:"All settlement tests passed",phase:"complete"}),console.log=z,console.log(`
\uD83D\uDCCB CLEANUP`),IT?.stop)IT.stop(),IT=null;return q(),console.log(`
`),console.log("                     ALL SETTLEMENT TESTS PASSED                              "),console.log(`
`),Y}var YQ=1,fA0=18n,kA0,JQ=($)=>BigInt($)*kA0,ET="Settle Test",O$0,IT=null;var M$0=p(()=>{A2();$Q();uq();u2();UJ();lq();WJ();kA0=10n**fA0,O$0=new Map});var a5={};x1(a5,{verifySolvency:()=>Xw0,verifyAccountSignature:()=>iK,validateDelta:()=>XJ,validateAccountDeltas:()=>_20,transferNameBetweenEntities:()=>qx,toSignerId:()=>TM,toJId:()=>FM,toEpAddress:()=>Rb,toEntityId:()=>LM,submitSettle:()=>sD,submitReserveToReserve:()=>Kx,submitProcessBatch:()=>Zx,submitPrefundAccount:()=>Qx,stopP2P:()=>rA0,startP2P:()=>Av,startJEventWatcher:()=>T$0,signAccountFrame:()=>sQ,setRuntimeSeed:()=>lA0,setRuntimeId:()=>iA0,setBrowserVMJurisdiction:()=>s7,searchEntityNames:()=>Dw0,scheduleNetworkProcess:()=>wv,scenarios:()=>Iv,saveEnvToDB:()=>B$0,safeStringify:()=>h1,safeParseReplicaKey:()=>Lb,safeExtractEntityId:()=>K30,resolveEntityName:()=>Mw0,resolveEntityIdentifier:()=>Mx,requestNamedEntity:()=>Dx,registerTestKeys:()=>qE,registerSignerPublicKey:()=>XO,registerSignerKey:()=>aQ,registerNumberedEntityOnChain:()=>Xx,registerEnvChangeCallback:()=>cA0,queueEntityInput:()=>zw0,processJBlockEvents:()=>tA0,process:()=>w$0,prepopulateFullMechanics:()=>Ow0,prepopulateAHB:()=>Vw0,parseUniversalEntityId:()=>ME,parseTokenAmount:()=>b20,parseScenario:()=>R30,parseReplicaUri:()=>J30,parseReplicaKey:()=>ZQ,normalizeEntityId:()=>u6,mergeAndSortEvents:()=>WT,main:()=>eA0,loadEnvFromDB:()=>Gw0,jIdFromChainId:()=>q30,isValidSignerId:()=>Pb,isValidJId:()=>Hb,isValidEpAddress:()=>jb,isValidEntityId:()=>Mb,isNumberedEntity:()=>$30,isLeftEntity:()=>K5,isLeft:()=>E5,isLazyEntity:()=>Q30,isEntityRegistered:()=>Px,isDelta:()=>S20,initEnv:()=>sA0,hashBoard:()=>iZ,getTokenInfo:()=>d3,getSnapshot:()=>Qw0,getSignerPublicKey:()=>cK,getSignerDisplayInfo:()=>jx,getShortId:()=>YO,getScenariosByTag:()=>$$0,getScenario:()=>e30,getP2P:()=>aA0,getNextEntityNumber:()=>zx,getJurisdictionByAddress:()=>wL,getJWatcherStatus:()=>Jw0,getHistory:()=>$w0,getEnv:()=>dA0,getEntityShortId:()=>$M,getEntityNumber:()=>Rx,getEntityInfoFromChain:()=>Jx,getEntityDisplayNumber:()=>Z30,getEntityDisplayInfoFromProfile:()=>Pw0,getEntityDisplayInfo:()=>Hx,getDefaultCreditLimit:()=>t7,getCurrentHistoryIndex:()=>Zw0,getCleanLogs:()=>C$0,getBrowserVMInstance:()=>e4,getAvailableJurisdictions:()=>QQ,getActiveJAdapter:()=>Hw0,getAccountBarVisual:()=>H30,generateSignerAvatar:()=>eD,generateNumberedEntityId:()=>eY,generateNamedEntityId:()=>Ux,generateLazyEntityId:()=>BL,generateEntityAvatar:()=>$J,formatTokenAmountEthers:()=>qM,formatTokenAmount:()=>qM,formatSummary:()=>kb,formatSignerDisplay:()=>QJ,formatRuntime:()=>h2,formatReplicaUri:()=>Y30,formatReplicaKey:()=>RU,formatReplicaDisplay:()=>X30,formatOrderbook:()=>fb,formatEntityIdDisplay:()=>No,formatEntityId:()=>x6,formatEntityDisplay:()=>U4,formatEntity:()=>GT,formatAssetAmountEthers:()=>Ex,formatAccount:()=>UT,extractSignerId:()=>e70,extractProvider:()=>Lo,extractEntityId:()=>AM,executeScenario:()=>E30,entityIdsEqual:()=>Co,encodeBoard:()=>sY,encode:()=>KU,detectEntityType:()=>vq,deriveSignerKeySync:()=>j$,deriveSignerKey:()=>XR,deriveRuntimeId:()=>oA0,deriveDelta:()=>$7,demoCompleteHanko:()=>qw0,decode:()=>hq,debugFundReserves:()=>$x,db:()=>q2,createReplicaKey:()=>t70,createProviderScopedEntityId:()=>DE,createProfileUpdateTx:()=>L20,createNumberedEntity:()=>tD,createNumberedEntitiesBatch:()=>Ox,createLocalUri:()=>z30,createLazyJId:()=>W30,createLazyEntity:()=>Vx,createJAdapter:()=>ek,createEmptyEnv:()=>cM,createDemoDelta:()=>Ix,createDefaultDelta:()=>mq,copyCleanLogs:()=>hA0,convertTokenPrecision:()=>v20,connectToEthereum:()=>t4,compareEntityIds:()=>JO,clearSignerKeys:()=>WE,clearDatabaseAndHistory:()=>Yw0,clearDatabase:()=>IL,clearDB:()=>Uw0,clearCleanLogs:()=>gA0,classifyBilateralState:()=>P30,calculateSolvency:()=>F$0,calculatePercentageEthers:()=>vL,assignNameOnChain:()=>Yx,applyRuntimeInput:()=>dM,XLN_URI_SCHEME:()=>n70,XLN_COORDINATOR:()=>a70,SCENARIOS:()=>BT,ReplicaMap:()=>YT,MAX_NUMBERED_ENTITY:()=>XT,FINANCIAL_CONSTANTS:()=>g20,EntityMap:()=>Cb,DEFAULT_RUNTIME_HOST:()=>r70,CHAIN_IDS:()=>s70,BrowserVMProvider:()=>Y2,BigIntMath:()=>y20});function vA0($){let Q=$.toLowerCase().startsWith("0x")?$.slice(2):$;return"0x"+"0".repeat(24)+Q}async function uA0($,Q){return Promise.race([$,new Promise((Z,X)=>setTimeout(()=>X(Error("TIMEOUT")),Q))])}async function fT(){if(!Nv)Nv=(async()=>{try{return await q2.open(),console.log(" Database opened"),!0}catch($){if($ instanceof Error&&($.message?.includes("blocked")||$.name==="SecurityError"||$.name==="InvalidStateError"))return console.log(" IndexedDB blocked (incognito/private mode) - running in-memory"),!1;return console.warn(" DB open warning:",$ instanceof Error?$.message:$),!0}})();return Nv}function Hw0($){if(!$.activeJurisdiction)return null;return $.jReplicas?.get($.activeJurisdiction)?.jadapter||null}var N$0="2026-01-21-00:40Z",BU,yA0=2000,C$0=()=>BU.join(`
`),gA0=()=>{BU.length=0},hA0=async()=>{let $=C$0();if(v5&&navigator.clipboard)try{await navigator.clipboard.writeText($),console.log(` Copied ${BU.length} log entries to clipboard`)}catch{}return $},L$0,mA0,pA0,q2,Nv=null,Tv=null,T1,D4=null,K2=null,o2=null,uM=null,Cv=!1,ST=null,Fv=null,P$0=!1,cA0=($)=>{Tv=$},dA0=()=>{return T1||null},lA0=($)=>{if(T1?.lockRuntimeSeed){console.warn(" Runtime seed update blocked (scenario lock enabled)");return}let Q=$===null||$===void 0?"":$;if(D4=Q,yz(Q),Q!==null&&Q!==void 0)try{K2=dK(Q,"1")}catch(Z){console.warn(" Failed to derive runtimeId from seed:",Z),K2=null}else K2=null;if(T1)T1.runtimeSeed=Q,T1.runtimeId=K2||void 0;if(uM&&K2){console.log(`[P2P] pendingP2PConfig triggered, relayUrls=${uM.config.relayUrls?.join(",")}`);let{env:Z,config:X}=uM;uM=null,Av(Z,X)}if(T1&&o2&&ST&&K2)Av(T1,ST)},iA0=($)=>{if(K2=$&&$.length>0?$:null,T1)T1.runtimeId=K2||void 0},oA0=($)=>{return dK($,"1")},wv=($)=>{if(Cv)return;Cv=!0,(typeof setImmediate==="function"?setImmediate:(Z)=>{if(typeof queueMicrotask==="function")queueMicrotask(Z);else setTimeout(Z,0)})(async()=>{if(Cv=!1,!$.networkInbox||$.networkInbox.length===0)return;if(_T){wv($);return}try{await w$0($)}catch(Z){y1("NETWORK","Failed to process network inbox",Z)}})},nA0=($,Q)=>{if(!$.gossip?.getProfiles)return null;return $.gossip.getProfiles().find((Y)=>Y.entityId===Q)?.runtimeId||null},H$0=($,Q)=>{if(!o2)return Q;let Z=new Set;for(let q of $.eReplicas.keys())try{Z.add(AM(q))}catch{}let X=[],Y=$.pendingNetworkOutputs?[...$.pendingNetworkOutputs]:[];$.pendingNetworkOutputs=[];let z=[...Y,...Q],J=[];for(let q of z){if(Z.has(q.entityId)){X.push(q);continue}let W=nA0($,q.entityId);if(console.log(`\uD83D\uDD00 ROUTE: Output for entity ${q.entityId.slice(-4)}  runtimeId=${W?.slice(0,10)||"UNKNOWN"}`),!W){console.warn(` ROUTE-DEFER: No runtimeId for entity ${q.entityId.slice(-4)} - deferring output`),$.warn("network","Missing runtimeId for entity output (queued)",{entityId:q.entityId}),J.push(q);continue}console.log(`\uD83D\uDCE4 P2P-SEND: Enqueueing to runtimeId ${W.slice(0,10)} for entity ${q.entityId.slice(-4)}`),o2.enqueueEntityInput(W,q)}if(J.length>0)$.pendingNetworkOutputs=J;return X},Av=($,Q={})=>{console.log(`[P2P] startP2P called, relayUrls=${Q.relayUrls?.join(",")}, env.runtimeId=${$.runtimeId?.slice(0,10)||"NONE"}`),ST=Q;let Z=Q.runtimeId||$.runtimeId;if(!Z)return console.log("[P2P] No runtimeId, storing as pendingP2PConfig"),uM={env:$,config:Q},null;if(o2){if(o2.matchesIdentity(Z,Q.signerId))return o2.updateConfig(Q),o2;o2.close()}return o2=new wb({env:$,runtimeId:Z,signerId:Q.signerId,relayUrls:Q.relayUrls,seedRuntimeIds:Q.seedRuntimeIds,advertiseEntityIds:Q.advertiseEntityIds,isHub:Q.isHub,profileName:Q.profileName,onEntityInput:(X,Y)=>{let z=Y.entityTxs?.map((J)=>J.type).join(",")||"none";console.log(`\uD83D\uDCE8 P2P-RECEIVE: from=${X.slice(0,10)} entity=${Y.entityId.slice(-4)} txTypes=[${z}]`),$.networkInbox=$.networkInbox||[],$.networkInbox.push(Y),console.log(`\uD83D\uDCE5 NETWORK-INBOX: Added, size=${$.networkInbox.length}`),$.info("network","INBOUND_ENTITY_INPUT",{fromRuntimeId:X,entityId:Y.entityId},Y.entityId),wv($)},onGossipProfiles:(X,Y)=>{if(console.log(`\uD83D\uDCE5 onGossipProfiles: Received ${Y.length} profiles from ${X.slice(0,10)}`),console.log("\uD83D\uDCE5 Profile details:",Y.map((z)=>`${z.entityId?.slice(-4)||"????"}:${z.accounts?.length||0}acc`).join(", ")),!$.gossip?.announce){console.warn(" No env.gossip.announce!");return}console.log(`\uD83D\uDCE5 Starting announce loop for ${Y.length} profiles...`);for(let z=0;z<Y.length;z++){let J=Y[z];console.log(`  [${z}] Announcing ${J.entityId.slice(-4)} accounts=${J.accounts?.length||0} ts=${J.metadata?.lastUpdated}`),$.gossip.announce(J)}console.log("\uD83D\uDCE5 Announce loop complete"),$.info("network","GOSSIP_SYNC",{fromRuntimeId:X,profiles:Y.length})}}),o2.connect(),o2},rA0=()=>{if(o2)o2.close(),o2=null;ST=null},aA0=()=>o2,sA0=()=>{if(!T1){if(T1=cM(D4),T1.runtimeSeed!==void 0&&T1.runtimeSeed!==null)yz(T1.runtimeSeed);console.log("\uD83C\uDF0D Runtime env initialized (module-level)")}return T1},j$0=($)=>{if(Tv)Tv($)},tA0=async()=>{if(!T1){console.warn(" processJBlockEvents: No env available");return}let $=T1.runtimeInput.entityInputs.length;if($===0)return;console.log(`\uD83D\uDD17 J-BLOCK: ${$} j-events queued  routing to eReplicas`);let Q=[...T1.runtimeInput.entityInputs];T1.runtimeInput.entityInputs=[],await dM(T1,{runtimeTxs:[],entityInputs:Q}),console.log(`    ${Q.length} j-events processed`)},T$0=async($)=>{if(e4($)){console.log("\uD83D\uDD2D J-WATCHER: Using BrowserVM (external RPC not needed)");return}try{let Z,X,Y;if($.jReplicas)for(let z of $.jReplicas.values()){let J=z.rpcs?.[0];if(J&&z.entityProviderAddress&&z.depositoryAddress){Z=J,X=z.entityProviderAddress,Y=z.depositoryAddress;break}}if(!Z||!X||!Y){let z=await wL("arrakis");if(!z){console.warn(" Arrakis jurisdiction not found, skipping j-watcher");return}Z=z.address,X=z.entityProviderAddress,Y=z.depositoryAddress}if(v5&&Z.startsWith("/"))Z=`${window.location.origin}${Z}`;Fv=await P40($,Z,X,Y),console.log(" J-Event Watcher started (external RPC)"),console.log(`\uD83D\uDD2D Monitoring: ${Z}`),setInterval(async()=>{if($.runtimeInput.entityInputs.length>0){let z=[...$.runtimeInput.entityInputs];$.runtimeInput.entityInputs=[],await dM($,{runtimeTxs:[],entityInputs:z})}},100)}catch(Z){y1("RUNTIME_TICK"," Failed to start J-Event Watcher:",Z)}},dM=async($,Q)=>{let Z=nZ();if(!$.emit)QT($);try{if(!Q)return z5.error(" Null runtime input provided"),{entityOutbox:[],mergedInputs:[]};if(!Array.isArray(Q.runtimeTxs))return z5.error(` Invalid runtimeTxs: expected array, got ${typeof Q.runtimeTxs}`),{entityOutbox:[],mergedInputs:[]};if(!Array.isArray(Q.entityInputs))return z5.error(` Invalid entityInputs: expected array, got ${typeof Q.entityInputs}`),{entityOutbox:[],mergedInputs:[]};if(Q.jInputs&&Array.isArray(Q.jInputs)){if(z1)console.log(`\uD83D\uDD0D J-Input processing: ${Q.jInputs.length} jInputs`);for(let I of Q.jInputs){let _=$.jReplicas?.get(I.jurisdictionName);if(!_){console.error(` J-Input: Jurisdiction "${I.jurisdictionName}" not found`);continue}if(z1)console.log(`\uD83D\uDD0D J-Input has ${I.jTxs.length} JTxs for ${I.jurisdictionName}`);for(let f of I.jTxs){let x={...f,queuedAt:$.timestamp};_.mempool.push(x),console.log(`\uD83D\uDCE5 J-Input: Queued ${f.type} from ${f.entityId.slice(-4)} to ${I.jurisdictionName} mempool (mempool size now: ${_.mempool.length})`)}console.log(` J-Input: ${I.jTxs.length} txs queued (mempool: ${_.mempool.length})`)}}let X=[...$.runtimeInput.runtimeTxs],Y=[...$.runtimeInput.entityInputs];if($.runtimeInput.runtimeTxs=[],$.runtimeInput.entityInputs=[],X.length+Q.runtimeTxs.length>1000)return z5.error(` Too many runtime transactions: ${X.length+Q.runtimeTxs.length} > 1000`),{entityOutbox:[],mergedInputs:[]};if(Y.length+Q.entityInputs.length>1e4)return z5.error(` Too many entity inputs: ${Y.length+Q.entityInputs.length} > 10000`),{entityOutbox:[],mergedInputs:[]};let z=[...Q.runtimeTxs],J=[...Q.entityInputs];J.forEach((I,_)=>{try{Bx(I)}catch(f){throw y1("RUNTIME_TICK",`\uD83D\uDEA8 CRITICAL FINANCIAL ERROR: Invalid EntityInput[${_}] before merge!`,{error:f.message,input:I}),f}});let q=[...X,...z],W=[...Y,...J],G=_70(W),U=[],D=[];for(let I of q)if(I.type==="importJ"){console.log(`[Runtime] Importing J-machine "${I.data.name}" (chain ${I.data.chainId})...`);try{let{createJAdapter:_}=await Promise.resolve().then(() => ($Q(),zU)),f=I.data.rpcs.length===0,x=I.data.contracts?{depositoryAddress:I.data.contracts.depository,entityProviderAddress:I.data.contracts.entityProvider,contracts:I.data.contracts,chainId:I.data.chainId}:void 0,g=await _({mode:f?"browservm":"rpc",chainId:I.data.chainId,rpcUrl:f?void 0:I.data.rpcs[0],fromReplica:x});if(!x)await g.deployStack();if(f){let b=g.browserVM;if(b)s7($,g.addresses.depository,b)}if(!$.jReplicas)$.jReplicas=new Map;let h={name:I.data.name,blockNumber:0n,stateRoot:new Uint8Array(32),mempool:[],blockDelayMs:300,lastBlockTimestamp:$.timestamp,position:{x:0,y:50,z:0},depositoryAddress:g.addresses.depository,entityProviderAddress:g.addresses.entityProvider,rpcs:I.data.rpcs,chainId:I.data.chainId,jadapter:g};if($.jReplicas.set(I.data.name,h),!$.activeJurisdiction)$.activeJurisdiction=I.data.name;let v=$.signers?.[0];if(v){let b=vA0(v.address),m=`${b}:${v.address}`;if(!$.eReplicas.has(m)){console.log(`[Runtime] Auto-creating self-entity for signer ${v.address.slice(0,10)}...`);let K=g.browserVM;if(K?.registerEntitiesWithSigners)await K.registerEntitiesWithSigners([{entityId:b,signerAddresses:[v.address],threshold:1}]);let M={mode:"proposer-based",threshold:1n,validators:[v.address],shares:{[v.address]:1n},jurisdiction:{address:g.addresses.depository,name:I.data.name,chainId:I.data.chainId,entityProviderAddress:g.addresses.entityProvider,depositoryAddress:g.addresses.depository}},j={entityId:b,signerId:v.address,mempool:[],isProposer:!0,state:{entityId:b,height:0,timestamp:$.timestamp,nonces:new Map,accounts:new Map,reserves:new Map,lockBook:new Map,config:M,messages:[],proposals:new Map,lastFinalizedJHeight:0,htlcFeesEarned:0n}};if($.eReplicas.set(m,j),f&&K?.debugFundReserves)await K.debugFundReserves(b,1,1000n*10n**18n),console.log("[Runtime] Funded self-entity with 1000 tokens");console.log(`[Runtime]  Self-entity created: ${b.slice(0,18)}`)}}console.log(`[Runtime]  JReplica "${I.data.name}" ready`)}catch(_){console.error("[Runtime]  Failed to import J-machine:",_)}}else if(I.type==="importReplica"){if(D1)console.log(`Importing replica Entity #${U4(I.entityId)}:${QJ(I.signerId)} (proposer: ${I.data.isProposer})`);let _=`${I.entityId}:${I.signerId}`,f={entityId:I.entityId,signerId:I.signerId,mempool:[],isProposer:I.data.isProposer,state:{entityId:I.entityId,height:0,timestamp:$.timestamp,nonces:new Map,messages:[],proposals:new Map,config:I.data.config,reserves:new Map,accounts:new Map,deferredAccountProposals:new Map,lastFinalizedJHeight:0,jBlockObservations:[],jBlockChain:[],crontabState:void 0,jBatchState:void 0,htlcRoutes:new Map,htlcFeesEarned:0n,swapBook:new Map,lockBook:new Map,pendingSwapFillRatios:new Map}},{NobleCryptoProvider:x}=await Promise.resolve().then(() => (PM(),MM)),g=new x,{publicKey:h,privateKey:v}=await g.generateKeyPair();if(f.state.cryptoPublicKey=h,f.state.cryptoPrivateKey=v,I.data.position)f.position={...I.data.position,jurisdiction:I.data.position.jurisdiction||I.data.position.xlnomy||$.activeJurisdiction||"default"};$.eReplicas.set(_,f);let b=e4($);if(b){let M=I.data.config.validators,j=I.data.config.threshold;if(M.length===1&&j===1n){let O=M[0];try{let R=zE($,O),F=`0x${Array.from(R).map((A)=>A.toString(16).padStart(2,"0")).join("")}`;if(typeof b.registerEntityWallet==="function")b.registerEntityWallet(I.entityId,F);else console.warn(` BrowserVM missing registerEntityWallet - skipping wallet registration for ${I.entityId.slice(0,10)}...`)}catch(R){console.warn(` Cannot derive private key for signer ${O} (no env.runtimeSeed), skipping BrowserVM wallet registration`)}}}if(D4!==void 0&&D4!==null)try{let M=new TextEncoder().encode(D4),j=j$(M,I.entityId);aQ(I.entityId,j)}catch(M){console.warn(` Failed to derive entity key for ${I.entityId.slice(0,10)}:`,M)}let m=$.eReplicas.get(_),K=m?.state.lastFinalizedJHeight;if($.gossip&&m){let M=cK($,I.entityId),j=M?`0x${Buffer.from(M).toString("hex")}`:void 0,O=UU(m.state,void 0,$.timestamp);if(O.runtimeId=$.runtimeId,j)O.metadata={...O.metadata||{},entityPublicKey:j};$.gossip.announce(O)}if(typeof K!=="number"){if(y1("RUNTIME_TICK","\uD83D\uDCA5 ENTITY-CREATION-BUG: Just created entity with invalid jBlock!"),y1("RUNTIME_TICK",`\uD83D\uDCA5   Expected: 0 (number), Got: ${typeof K}, Value: ${K}`),m)m.state.lastFinalizedJHeight=0,console.log(`\uD83D\uDCA5   FIXED: Set jBlock to 0 for replica ${_}`)}}for(let I of G){let _=I.signerId;if(!_||_===""){if(I.entityTxs.some((h)=>h.type==="accountInput")){let h=Array.from($.eReplicas.keys()).filter((v)=>v.startsWith(I.entityId+":"));if(h.length>0){let v=h[0];if(!v){y1("RUNTIME_TICK",` Invalid replica key for entity ${I.entityId}`);continue}let b=$.eReplicas.get(v);if(b?.state.config.validators[0])_=b.state.config.validators[0]}}if(!_||_===""){console.warn(` No signerId and unable to determine proposer for entity ${I.entityId.slice(0,10)}...`);continue}}let f=`${I.entityId}:${_}`,x=$.eReplicas.get(f);if(x){if(D1){if(console.log(`Processing input for ${f}:`),I.entityTxs?.length)console.log(`   ${I.entityTxs.length} transactions`);if(I.proposedFrame)console.log(`   Proposed frame: ${I.proposedFrame.hash}`);if(I.hashPrecommits?.size)console.log(`   ${I.hashPrecommits.size} precommits`)}let{newState:g,outputs:h,jOutputs:v,workingReplica:b}=await I70($,x,I);if($.eReplicas.set(f,{...x,state:g,mempool:b.mempool,proposal:b.proposal,lockedFrame:b.lockedFrame,sentTransitions:b.sentTransitions??0}),h.forEach((m,K)=>{try{f20(m)}catch(M){throw y1("RUNTIME_TICK",`\uD83D\uDEA8 CRITICAL FINANCIAL ERROR: Invalid EntityOutput[${K}] from ${f}!`,{error:M.message,output:m}),M}}),U.push(...h),v&&v.length>0)console.log(`\uD83D\uDCE6 [2/6] Collecting ${v.length} jOutputs from ${f.slice(-10)}`),D.push(...v)}}if(D.length>0){console.log(`\uD83D\uDCE4 [3/6] J-OUTPUTS: ${D.length} J-outputs collected  routing to J-mempools`);for(let I of D){let _=$.jReplicas?.get(I.jurisdictionName);if(!_){console.error(` J-Output: Jurisdiction "${I.jurisdictionName}" not found`);continue}for(let f of I.jTxs){let x={...f,queuedAt:$.timestamp};_.mempool.push(x),console.log(`\uD83D\uDCE5 [4/6] J-Output: Queued ${f.type} from ${f.entityId.slice(-4)} to ${I.jurisdictionName} mempool (queuedAt: ${$.timestamp}, mempool.length: ${_.mempool.length})`),$.emit("JBatchQueued",{entityId:f.entityId,batchSize:f.data.batchSize,mempoolSize:_.mempool.length,jurisdictionName:I.jurisdictionName})}console.log(` J-Output: ${I.jTxs.length} txs queued to ${I.jurisdictionName} (mempool: ${_.mempool.length})`)}}let P=q.length>0,H=G.length>0,N=U.length>0,C=D.length>0;if(P||H||N||C){if($.emit("RuntimeTick",{height:$.height+1,runtimeTxs:q.length,entityInputs:G.length,outputs:U.length}),$.height++,!$.scenarioMode)$.timestamp=oZ();let I=`Tick ${$.height-1}: ${q.length} runtimeTxs, ${G.length} merged entityInputs  ${U.length} outputs`,_={runtimeTxs:[...q],entityInputs:[...G]},f=e4($);if(f?.captureStateRoot&&$.jReplicas)try{let x=await f.captureStateRoot();for(let[g,h]of $.jReplicas.entries())h.stateRoot=x}catch(x){}if(f?.syncAllCollaterals&&$.jReplicas&&$.eReplicas)try{let x=[];for(let[v,b]of $.eReplicas.entries())if(b.state.accounts)for(let[m,K]of b.state.accounts){let M=v.split(":")[0];x.push({entityId:M,counterpartyId:m})}let g=await f.syncAllCollaterals(x,1),h=f.getBlockHeight?f.getBlockHeight():0;for(let[v,b]of $.jReplicas.entries())b.collaterals=g,b.blockNumber=BigInt(h);for(let[v,b]of $.eReplicas.entries()){let m=v.split(":")[0];for(let[K,M]of b.state.accounts){if(M.pendingFrame||M.mempool.length>0||M.sentTransitions>M.ackedTransitions)continue;let j=`${m}:${K}`,O=g.get(j);for(let[R,F]of M.deltas){let A=O?.get(R),T=A?.collateral??0n,V=A?.ondelta??0n;if(F.collateral!==T||F.ondelta!==V)F.collateral=T,F.ondelta=V}}}}catch(x){console.warn("[Runtime] Failed to sync BrowserVM state:",x)}}else console.log(" SKIP-FRAME: No runtimeTxs, entityInputs, or outputs"),$.extra=void 0;if(!$.gossip)console.log("\uD83D\uDEA8 CRITICAL: gossip layer missing from environment, creating new one"),$.gossip=g2(),console.log(" Gossip layer created and added to environment");let L=Array.from($.eReplicas.keys()).filter((I)=>I.startsWith("0x0000000000000000000000000000000000000000000000000000000000000001:")||I.startsWith("0x0000000000000000000000000000000000000000000000000000000000000002:")),B=Array.from($.eReplicas.keys()).filter((I)=>!I.startsWith("0x0000000000000000000000000000000000000000000000000000000000000001:")&&!I.startsWith("0x0000000000000000000000000000000000000000000000000000000000000002:")&&!I.startsWith("0x57e360b00f393ea6d898d6119f71db49241be80aec0fbdecf6358b0103d43a31:"));if(L.length>0&&B.length>0){let I=L[0],_=B[0];if(!I||!_)y1("RUNTIME_TICK",` Invalid replica keys: old=${I}, new=${_}`)}if(j$0($),D1&&U.length>0)console.log(`\uD83D\uDCE4 Outputs: ${U.length} messages`),U.forEach((I,_)=>{console.log(`  ${_+1}.  ${I.signerId} (${I.entityTxs?`${I.entityTxs.length} txs`:""}${I.proposedFrame?` proposal: ${I.proposedFrame.hash.slice(0,10)}...`:""}${I.hashPrecommits?` ${I.hashPrecommits.size} precommits`:""})`)});else if(D1&&U.length===0)console.log("\uD83D\uDCE4 No outputs generated");j$0($);let E=nZ();if(D1)console.log(`  Tick ${$.height-1} completed in ${E-Z}ms`);return{entityOutbox:U,mergedInputs:G}}catch(X){throw console.error(" CRITICAL: applyRuntimeInput failed!",X),X}},eA0=async()=>{console.log(`\uD83D\uDE80 RUNTIME.JS VERSION: ${N$0}`);let $=await fT();if(!v5)try{let{loadJurisdictions:Z}=await Promise.resolve().then(() => (OE(),Ro)),X=Z();console.log("\uD83D\uDD0D STARTUP: Current jurisdictions content (from centralized loader):"),console.log("\uD83D\uDCCD Arrakis Depository:",X.jurisdictions.arrakis?.contracts?.depository),console.log("\uD83D\uDCCD Arrakis EntityProvider:",X.jurisdictions.arrakis?.contracts?.entityProvider),console.log("\uD83D\uDCCD Last updated:",X.lastUpdated),console.log("\uD83D\uDCCD Full Arrakis config:",h1(X.jurisdictions.arrakis))}catch(Z){console.log(" Failed to load jurisdictions:",Z.message)}console.log("\uD83D\uDD78 Initializing gossip layer...");let Q=g2();console.log(" Gossip layer initialized"),console.log("\uD83D\uDCE1 Loading persisted profiles from database..."),await S70(q2,Q),T1=cM(D4),T1.gossip=Q;try{if(!$)throw console.log("\uD83D\uDCBE Database unavailable - starting fresh"),Error("DB_UNAVAILABLE");console.log("\uD83D\uDCE5 Loading state from database...");let Z=await uA0(q2.get(Buffer.from("latest_height")),2000),X=parseInt(Z.toString(),10);console.log(`\uD83D\uDCCA BROWSER-DEBUG: Found latest height in DB: ${X}`),console.log(`\uD83D\uDCCA Found latest height: ${X}, loading ${X+1} snapshots...`),console.log(`\uD83D\uDCE5 Loading snapshots: 1 to ${X}...`);let Y=[];for(let z=1;z<=X;z++)try{let J=await q2.get(Buffer.from(`snapshot:${z}`)),q=hq(J);Kw0(q),Y.push(q),console.log(`\uD83D\uDCE6 Snapshot ${z}: loaded ${J.length} bytes`)}catch(J){y1("RUNTIME_TICK",` Failed to load snapshot ${z}:`,J),console.warn(` Snapshot ${z} missing, continuing with available data...`)}if(Y.length===0)throw console.log(`\uD83D\uDCE6 No snapshots found (latestHeight: ${X}), using fresh environment`),Error("LEVEL_NOT_FOUND");if(console.log(`\uD83D\uDCCA Successfully loaded ${Y.length}/${X} snapshots (starting from height 1)`),T1.history=Y,Y.length>0){let z=Y[Y.length-1];if(!z.eReplicas)throw console.warn(" Latest snapshot missing eReplicas data, using fresh environment"),Error("LEVEL_NOT_FOUND");let J=g2();if(z.gossip?.profiles){for(let[U,D]of Object.entries(z.gossip.profiles))J.profiles.set(U,D);console.log(`\uD83D\uDCE1 Restored gossip profiles: ${Object.keys(z.gossip.profiles).length} entries`)}let q;try{q=Bv(z.eReplicas)}catch(U){throw y1("RUNTIME_TICK"," Failed to convert eReplicas to Map:",U),console.warn(" Falling back to fresh environment"),Error("LEVEL_NOT_FOUND")}let W=Ev(z.jReplicas),G=z.runtimeSeed??null;if(T1=cM(G),G!==void 0&&G!==null)D4=G,yz(D4);if(z.runtimeId)K2=z.runtimeId,T1.runtimeId=K2;else if(D4!==void 0&&D4!==null)try{K2=dK(D4,"1"),T1.runtimeId=K2}catch(U){console.warn(" Failed to derive runtimeId on restore:",U)}if(T1.eReplicas=new Map(Array.from(q).map(([U,D])=>{return[U,uL(D)]})),T1.jReplicas=W,T1.height=z.height,T1.timestamp=z.timestamp,T1.runtimeInput={runtimeTxs:[],entityInputs:[]},T1.history=Y,T1.gossip=J,T1.frameLogs=[],z.browserVMState&&v5)try{let{BrowserVMProvider:U}=await Promise.resolve().then(() => ($Q(),zU)),D=new U;if(await D.init(),await D.restoreState(z.browserVMState),T1.browserVM=D,s7(T1,D.getDepositoryAddress(),D),typeof window<"u")window.__xlnBrowserVM=D;console.log(" BrowserVM restored from persisted state")}catch(U){console.warn(" Failed to restore BrowserVM state:",U)}console.log(` History restored. Runtime is at height ${T1.height} with ${T1.history.length} snapshots.`),console.log("\uD83D\uDCC8 Snapshot details:",{height:T1.height,replicaCount:T1.eReplicas.size,timestamp:new Date(T1.timestamp).toISOString(),runtimeInputs:T1.runtimeInput.entityInputs.length})}}catch(Z){let X=Z instanceof Error&&Z.message==="TIMEOUT",Y=Z instanceof Error&&(Z.name==="NotFoundError"||Z.message?.includes("NotFoundError")||Z.message?.includes("Entry not found"));if(X||Y)console.log("\uD83D\uDCE6 No saved state found - starting fresh");else if(Z instanceof Error&&Z.message==="DB_UNAVAILABLE");else console.warn(" Error loading state:",Z instanceof Error?Z.message:Z),console.log("\uD83D\uDCE6 Starting fresh")}if(!v5)console.log(`
\uD83D\uDE80 Hanko tests disabled during development - focusing on core functionality`);else console.log("\uD83C\uDF10 Browser environment: Demos available via UI buttons, not auto-running");if(z5.info(`\uD83C\uDFAF Runtime startup complete. Height: ${T1.height}, Entities: ${T1.eReplicas.size}`),v5){if(z1)console.log("\uD83D\uDD0D BROWSER-DEBUG: Final state before j-watcher start:");if(z1)console.log(`\uD83D\uDD0D   Environment height: ${T1.height}`);if(z1)console.log(`\uD83D\uDD0D   Total replicas: ${T1.eReplicas.size}`);for(let[Z,X]of T1.eReplicas.entries()){let{entityId:Y,signerId:z}=ZQ(Z);if(z1)console.log(`\uD83D\uDD0D   Entity ${Y.slice(0,10)}... (${z}): jBlock=${X.state.lastFinalizedJHeight}, isProposer=${X.isProposer}`)}}if(v5)if(!P$0)console.log("\uD83D\uDD2D STARTING-JWATCHER: Snapshots loaded, starting j-watcher (non-blocking)..."),Promise.race([T$0(T1),new Promise((Z,X)=>setTimeout(()=>X(Error("J-watcher startup timeout (3s)")),3000))]).then(()=>{P$0=!0,console.log("\uD83D\uDD2D JWATCHER-READY: J-watcher started successfully")}).catch((Z)=>{console.warn("  J-Event Watcher startup failed or timed out (non-critical):",Z.message),console.warn("    UI will load anyway. Blockchain sync will retry in background.")});else console.log("\uD83D\uDD2D JWATCHER-SKIP: J-watcher already started, skipping");else console.log("\uD83D\uDD2D J-WATCHER: Skipped in Node (server uses its own watcher)");return T1},$w0=()=>T1.history||[],Qw0=($)=>{let Q=T1.history||[];return $>=0&&$<Q.length?Q[$]:null},Zw0=()=>(T1.history||[]).length-1,F$0=($)=>{let Q=$||T1,Z=new Map,X=0n,Y=0n;for(let[z,J]of Q.eReplicas){for(let[q,W]of J.state.reserves){X+=W;let G=Z.get(q)||{reserves:0n,collateral:0n,total:0n};G.reserves+=W,G.total=G.reserves+G.collateral,Z.set(q,G)}for(let[q,W]of J.state.accounts)if(K5(J.state.entityId,q))for(let[G,U]of W.deltas){Y+=U.collateral;let D=Z.get(G)||{reserves:0n,collateral:0n,total:0n};D.collateral+=U.collateral,D.total=D.reserves+D.collateral,Z.set(G,D)}}return{reserves:X,collateral:Y,total:X+Y,byToken:Z}},Xw0=($,Q)=>{let Z=F$0(),X=Q?`[${Q}] `:"";if($!==void 0&&Z.total!==$)throw console.error(` ${X}SOLVENCY VIOLATION: Expected ${$}, got ${Z.total}`),console.error(`   Reserves: ${Z.reserves}, Collateral: ${Z.collateral}`),Error(`Solvency check failed: ${Z.total} !== ${$}`);return console.log(` ${X}Solvency: ${Z.total} (R:${Z.reserves} + C:${Z.collateral})`),!0},Yw0=async()=>{console.log("\uD83D\uDDD1 Clearing database and resetting runtime history..."),await IL(q2),T1={eReplicas:new Map,jReplicas:new Map,height:0,timestamp:0,...D4!==void 0&&D4!==null?{runtimeSeed:D4}:{},...K2?{runtimeId:K2}:{},runtimeInput:{runtimeTxs:[],entityInputs:[]},history:[],gossip:g2(),frameLogs:[]},console.log(" Database and runtime history cleared")},Jw0=()=>{if(!Fv||!T1)return null;return{isWatching:Fv.getStatus().isWatching,proposers:Array.from(T1.eReplicas.entries()).filter(([,$])=>$.isProposer).map(([$,Q])=>{let{entityId:Z,signerId:X}=ZQ($);return{entityId:Z.slice(0,10)+"...",signerId:X,lastFinalizedJHeight:Q.state.lastFinalizedJHeight}}),nextSyncIn:Math.floor((1000-(T1.timestamp||0)%1000)/100)/10}},zw0=async($,Q,Z)=>{if(!T1)throw Error("Runtime not initialized");await dM(T1,{runtimeTxs:[],entityInputs:[{entityId:$,signerId:Q,entityTxs:[{type:Z.type,data:Z}]}]})},qw0=async()=>{try{if(typeof window<"u"){console.log("\uD83C\uDFAF Browser environment detected - running simplified Hanko demo..."),console.log(" Basic signature verification available"),console.log("\uD83D\uDCA1 Full test suite available in Node.js environment"),console.log(" Hanko browser demo completed!");return}console.log("\uD83C\uDFAF Complete Hanko test suite disabled during strict TypeScript mode"),console.log(" Complete Hanko tests skipped!")}catch($){throw y1("RUNTIME_TICK"," Complete Hanko tests failed:",$),$}},Ww0=null,A$0=($)=>Array.isArray($)&&$.length>0&&Array.isArray($[0])&&$[0].length===2,Bv=($)=>{if($ instanceof Map)return $;if(Array.isArray($)){if($.length===0)return new Map;if(A$0($))return new Map($)}if($&&typeof $==="object")return new Map(Object.entries($));throw Error("Invalid eReplicas format in snapshot")},R$0=($)=>{if(typeof $==="string")return $;if($&&typeof $==="object"){let Q=$.address;if(typeof Q==="string")return Q;if(typeof $.toString==="function")return $.toString()}return},Lv=($)=>{if(!$?.contracts)return $;let Q=R$0($.contracts.depository||$.contracts.depositoryAddress),Z=R$0($.contracts.entityProvider||$.contracts.entityProviderAddress);return{...$,contracts:{...$.contracts,...Q?{depository:Q}:{},...Z?{entityProvider:Z}:{}}}},Ev=($)=>{if($ instanceof Map)return $;if(Array.isArray($)){if($.length===0)return new Map;if(A$0($)){let Z=new Map($);for(let[X,Y]of Z.entries())Z.set(X,Lv(Y));return Z}let Q=$[0];if(Q&&typeof Q==="object"&&typeof Q.name==="string")return new Map($.map((Z)=>[Z.name,Lv(Z)]))}if($&&typeof $==="object"){let Q=new Map(Object.entries($));for(let[Z,X]of Q.entries())Q.set(Z,Lv(X));return Q}return new Map},Kw0=($)=>{if(!$||typeof $!=="object")return;if($.eReplicas)$.eReplicas=Bv($.eReplicas);if($.jReplicas){let Q=Ev($.jReplicas);$.jReplicas=Array.from(Q.values()).map((Z)=>({...Z,stateRoot:Z.stateRoot?new Uint8Array(Z.stateRoot):Z.stateRoot}))}},cM=($)=>{let Q=Array.isArray($)?new Uint8Array($):$,Z=Q!==void 0&&Q!==null?typeof Q==="string"?Q:new TextDecoder().decode(Q):"",X={eReplicas:new Map,jReplicas:new Map,height:0,timestamp:0,...Z!==void 0&&Z!==null?{runtimeSeed:Z}:{},...K2?{runtimeId:K2}:{},runtimeInput:{runtimeTxs:[],entityInputs:[]},history:[],gossip:g2(),frameLogs:[],networkInbox:[],pendingNetworkOutputs:[],log:()=>{},info:()=>{},warn:()=>{},error:()=>{},emit:()=>{},browserVM:null,evms:new Map};return QT(X),Ww0=X,X},_T=!1,w$0=async($,Q,Z=0)=>{if(!$.emit)QT($);if($.stopAtFrame!==void 0&&$.height>=$.stopAtFrame){console.log(`
  FRAME STEPPING: Stopped at frame ${$.height}`),console.log("".repeat(80));let{formatRuntime:Y}=await Promise.resolve().then(() => (UJ(),L30));throw console.log(Y($,{maxAccounts:10,maxLocks:20,maxSwaps:20})),console.log("".repeat(80)+`
`),console.log("\uD83D\uDCBE State captured - use jq on /tmp/{scenario}-runtime.json for deep queries"),Error(`FRAME_STEP: Stopped at frame ${$.height} for debugging`)}if(_T)return console.warn(" SKIP: Previous tick still processing"),$;_T=!0;let X=[...$.pendingOutputs||[],...$.networkInbox||[],...Q||[]];$.pendingOutputs=[],$.networkInbox=[],X.forEach((Y)=>{try{Bx(Y)}catch(z){throw y1("RUNTIME_TICK","\uD83D\uDEA8 CRITICAL: Invalid EntityInput!",{error:z.message,entityId:Y.entityId.slice(0,10),signerId:Y.signerId}),z}});try{let Y=$.quietRuntimeLogs===!0;if(e4($)?.setQuietLogs?.(Y),$.scenarioMode)$.timestamp=($.timestamp??0)+100;else $.timestamp=oZ();if(e4($)?.setBlockTimestamp?.($.timestamp),X.length>0){if(!Y)console.log(`\uD83D\uDCE5 TICK: Processing ${X.length} inputs for [${X.map((U)=>U.entityId.slice(-4)).join(",")}]`);let W=await dM($,{runtimeTxs:[],entityInputs:X});if(z1)console.log(`\uD83D\uDD0D PROCESS-DEBUG: applyRuntimeInput returned entityOutbox.length=${W.entityOutbox.length}`);let G=H$0($,W.entityOutbox);if($.pendingOutputs=G,G.length>0&&!Y)console.log(`\uD83D\uDCE4 TICK: ${G.length} outputs queued for next tick  [${G.map((U)=>U.entityId.slice(-4)).join(",")}]`)}else if($.pendingNetworkOutputs&&$.pendingNetworkOutputs.length>0){let W=H$0($,[]);if(W.length>0){if($.pendingOutputs=[...$.pendingOutputs||[],...W],!Y)console.log(`\uD83D\uDCE4 TICK: ${W.length} local outputs queued from pending network outputs`)}}if($.jReplicas)for(let[W,G]of $.jReplicas.entries()){let U=G.mempool||[],D=G.blockDelayMs||300,P=G.lastBlockTimestamp||0,H=$.timestamp-P;if(U.length>0){if(z1)console.log(`\uD83D\uDD0D [J-Machine ${W}] mempool=${U.length}, elapsed=${H}ms, blockDelay=${D}ms, ready=${H>=D}`)}let N=U.length>0&&U[0].queuedAt?$.timestamp-U[0].queuedAt:999999,C=U.length>0&&N>=D;if(U.length>0&&!C&&!Y)console.log(` [J-Machine] ${U.length} pending (age: ${N}ms < ${D}ms) - waiting...`);if(C){if(!Y)console.log(` [5/6] J-Machine ${G.name}: Processing ${U.length} txs (oldest: ${N}ms >= ${D}ms)`),console.log("   Mempool BEFORE execution:",U.map((v)=>`${v.entityId.slice(-4)}:${v.data.batchSize||"?"}`));$.emit("JBlockProcessing",{jurisdictionName:W,txCount:U.length,blockNumber:Number(G.blockNumber)+1});let{broadcastBatch:L}=await Promise.resolve().then(() => (c6(),n9)),{getBrowserVMInstance:B}=await Promise.resolve().then(() => (A2(),$Z)),E=B($),I=G.rpcs?.[0],_=G.jadapter?.chainId??G.chainId,f=!E&&I&&G.depositoryAddress&&G.entityProviderAddress?{name:G.name,chainId:Number(_??0),address:I,entityProviderAddress:G.entityProviderAddress,depositoryAddress:G.depositoryAddress}:null;if(!E&&!f)console.warn(` [J-Machine ${G.name}] Missing jurisdiction config (rpc/addresses). Batch broadcast will be skipped.`);if(E?.beginJurisdictionBlock)E.beginJurisdictionBlock($.timestamp);for(let v of U){if(v.type==="batch"&&v.data?.batch){if(!Y)console.log(`\uD83D\uDD28 [J-Machine] Executing batch from ${v.entityId.slice(-4)}`),console.log(`   Batch size: ${v.data.batchSize||"unknown"}`),console.log("   Batch.reserveToReserve:",v.data.batch.reserveToReserve);let b;try{let{summarizeBatch:M}=await Promise.resolve().then(() => (c6(),n9));if(b=h1(M(v.data.batch)),!Y)console.log(`   Batch.summary: ${b}`)}catch{}let m={batch:v.data.batch,jurisdiction:null,lastBroadcast:v.timestamp,broadcastCount:1,failedAttempts:0};if(!E&&!f){console.error(`    Batch execution skipped: missing jurisdiction config for ${G.name}`);continue}let K=await L($,v.entityId,m,f,E||void 0,v.timestamp??$.timestamp,v.data?.signerId);if(K.success){if(!Y)console.log("    Batch executed successfully"),console.log(`   \uD83D\uDCE1 ${K.events?.length||0} events will route back to entities`)}else{if(console.error(`    Batch execution failed: ${K.error}`),!b)try{let{summarizeBatch:M}=await Promise.resolve().then(() => (c6(),n9));b=h1(M(v.data.batch)),console.error(`    Failed batch summary: ${b}`)}catch{}else console.error(`    Failed batch summary: ${b}`);if($.scenarioMode)throw Error(`J-BATCH FAILED: ${K.error||"unknown error"}`)}}if(v.type==="mint"&&v.data&&E?.debugFundReserves){let{entityId:b,tokenId:m,amount:K}=v.data;if(!Y)console.log(`\uD83D\uDCB0 [J-Machine] Minting ${K} token ${m} to ${b.slice(-4)}`);try{if(await E.debugFundReserves(b,m,K),!Y)console.log("    Mint successful")}catch(M){if(console.error(`    Mint failed: ${M}`),$.scenarioMode)throw Error(`J-MINT FAILED: ${M}`)}}}if(E?.endJurisdictionBlock)E.endJurisdictionBlock();let x=U.length,g=x,h=0;if(!Y)console.log(`\uD83E\uDDF9 [J-Machine] Clearing mempool (before: ${G.mempool.length} items)...`);if(G.mempool=[],!Y)console.log(`\uD83E\uDDF9 [J-Machine] Mempool AFTER clear: ${G.mempool.length} items (should be 0)`);if(G.lastBlockTimestamp=$.timestamp,G.blockNumber=G.blockNumber+1n,G.blockReady=!1,!Y)console.log(` [J-Machine ${G.name}] Block #${G.blockNumber} finalized (${g}/${x} batches)`);if(h>0)console.warn(`    ${h} batches failed, queued for retry`);if(!Y)console.log(`   Next block in ${D}ms`);$.emit("JBlockFinalized",{jurisdictionName:W,blockNumber:Number(G.blockNumber),txCount:U.length})}else if(U.length>0)G.blockReady=!0;else G.blockReady=!1}let z=void 0,J=e4($);if(J?.serializeState)try{z=await J.serializeState(),$.browserVMState=z}catch(W){if(console.warn("[Runtime] Failed to serialize BrowserVM state:",W),$.scenarioMode)throw W}let q={height:$.height,timestamp:$.timestamp,...$.runtimeSeed!==void 0&&$.runtimeSeed!==null?{runtimeSeed:$.runtimeSeed}:{},...$.runtimeId?{runtimeId:$.runtimeId}:{},eReplicas:new Map($.eReplicas),jReplicas:$.jReplicas?Array.from($.jReplicas.values()).map((W)=>({...W,mempool:[...W.mempool],stateRoot:new Uint8Array(W.stateRoot)})):[],runtimeInput:$.runtimeInput,runtimeOutputs:$.pendingOutputs||[],frameLogs:$.frameLogs||[],title:`Frame ${$.history?.length||0}`,...z?{browserVMState:z}:{}};if($.extra){let{subtitle:W,description:G}=$.extra;if(W)q.subtitle=W,q.title=W.title||q.title;if(G)q.description=G;$.extra=void 0}if(!$.history)$.history=[];if($.history.push(q),!Y)console.log(`\uD83D\uDCF8 Snapshot: ${q.title} (${$.history.length} total)`);if(await B$0($),$.strictScenario){let{assertRuntimeStateStrict:W}=await Promise.resolve().then(() => (J$0(),Y$0));await W($)}return $}finally{_T=!1}},B$0=async($)=>{if(!v5)return;try{if(!await fT())return;await q2.put(Buffer.from("latest_height"),Buffer.from(String($.height)));let Z=new WeakSet,X=JSON.stringify($,(Y,z)=>{if(Y==="history")return;if(Y==="browserVM")return;if(Y==="log"||Y==="info"||Y==="warn"||Y==="error"||Y==="emit")return;if(Y==="gossip"&&z&&typeof z==="object")return{profiles:z.profiles instanceof Map?Array.from(z.profiles.entries()):z.profiles};if(typeof z==="bigint")return String(z);if(z instanceof Uint8Array)return Array.from(z);if(z instanceof Map)return Array.from(z.entries());if(z instanceof Set)return Array.from(z);if(typeof z==="function")return;if(z&&typeof z==="object"){if(Z.has(z))return"[Circular]";Z.add(z)}return z});await q2.put(Buffer.from(`snapshot:${$.height}`),Buffer.from(X))}catch(Q){if(console.error(" Failed to save to LevelDB:",Q),$.scenarioMode)throw Q}},Gw0=async()=>{if(!v5)return null;try{if(!await fT())return null;let Q=await q2.get(Buffer.from("latest_height")),Z=parseInt(Q.toString()),X=[];for(let z=0;z<=Z;z++){let J=await q2.get(Buffer.from(`snapshot:${z}`)),q=JSON.parse(J.toString()),W=Array.isArray(q.runtimeSeed)?new TextDecoder().decode(new Uint8Array(q.runtimeSeed)):q.runtimeSeed,G=cM(W??null);if(G.height=Number(q.height||0),G.timestamp=Number(q.timestamp||0),q.browserVMState)G.browserVMState=q.browserVMState;if(W!==void 0&&W!==null)yz(W);if(q.runtimeId)G.runtimeId=q.runtimeId;else if(W!==void 0&&W!==null)try{G.runtimeId=dK(W,"1")}catch(U){console.warn(" Failed to derive runtimeId from DB snapshot:",U)}if(G.eReplicas=Bv(q.eReplicas||q.replicas||[]),G.jReplicas=Ev(q.jReplicas||[]),G.jReplicas.size>0){for(let[U,D]of G.jReplicas.entries())if(D.stateRoot)G.jReplicas.set(U,{...D,stateRoot:new Uint8Array(D.stateRoot)})}if(q.gossip?.profiles)G.gossip.profiles=new Map(q.gossip.profiles);X.push(G)}let Y=X[X.length-1];if(Y){if(Y.history=X,Y.browserVMState&&v5)try{let{BrowserVMProvider:z}=await Promise.resolve().then(() => ($Q(),zU)),J=new z;if(await J.init(),await J.restoreState(Y.browserVMState),Y.browserVM=J,s7(Y,J.getDepositoryAddress(),J),typeof window<"u")window.__xlnBrowserVM=J;console.log(" BrowserVM restored from loadEnvFromDB")}catch(z){console.warn(" Failed to restore BrowserVM state (loadEnvFromDB):",z)}}return Y}catch($){return console.log("No persisted state found"),null}},Uw0=async()=>{if(!v5)return;try{if(!await fT())return;await q2.clear(),console.log(" LevelDB cleared")}catch($){console.error(" Failed to clear LevelDB:",$)}},Iv,Vw0,Ow0,Dw0=($,Q)=>C20(q2,$,Q),Mw0=($)=>F20(q2,$),Pw0=($)=>A20(q2,$);var l5=p(()=>{ng();B8();zb();h8();tY();A2();lq();H8();gL();M30();Tb();lq();uq();Nx();SL();y9();WM();C8();B8();YJ();B8();hz();Ib();I30();Q$0();H8();$Q();h8();UJ();console.log(`\uD83D\uDE80 RUNTIME.JS BUILD: ${N$0}`);if(v5&&typeof globalThis.process>"u"){let $=()=>typeof performance<"u"&&performance.now?performance.now():Date.now(),Q=(Z)=>{let X=$(),Y=Math.floor(X/1000),z=Math.floor((X-Y*1000)*1e6);if(Z){let J=Y-Z[0],q=z-Z[1];if(q<0)J-=1,q+=1e9;return[J,q]}return[Y,z]};globalThis.process={env:{},browser:!0,version:"0",versions:{node:"0"},nextTick:(Z,...X)=>{if(typeof queueMicrotask==="function")queueMicrotask(()=>Z(...X));else Promise.resolve().then(()=>Z(...X))},hrtime:Q,uptime:()=>$()/1000,cwd:()=>"/"}}BU=[];if(v5){let{log:$,warn:Q,error:Z,debug:X}=console,Y=(J)=>{return J.map((q)=>{if(typeof q==="string")return q;if(typeof q==="bigint")return q.toString()+"n";try{return JSON.stringify(q)}catch{return String(q)}}).join(" ")},z=(J,q)=>{let W=new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3});if(BU.push(`[${W}] ${J}: ${q}`),BU.length>yA0)BU.shift()};console.log=function(...J){$.apply(console,J),z("LOG",Y(J))},console.warn=function(...J){Q.apply(console,J),z("WARN",Y(J))},console.error=function(...J){Z.apply(console,J),z("ERR",Y(J))},console.debug=function(...J){X.apply(console,J),z("DBG",Y(J))}}L$0=!v5&&typeof globalThis.process<"u"?globalThis.process:void 0,mA0=L$0?"db-tmp/runtime":"db",pA0=L$0?.env?.XLN_DB_PATH||mA0,q2=new lF(pA0,{valueEncoding:"buffer",keyEncoding:"binary"});Iv={ahb:async($)=>{let{ahb:Q}=await ob().then(() => ib);return await Q($),$},lockAhb:async($)=>{let{lockAhb:Q}=await tb().then(() => sb);return await Q($),$},swap:async($)=>{let{swap:Q,swapWithOrderbook:Z,multiPartyTrading:X}=await Uv().then(() => Gv);return await Q($),await Z($),await X($),$},swapMarket:async($)=>{let{swapMarket:Q}=await Mv().then(() => Dv);return await Q($),$},rapidFire:async($)=>{let{rapidFire:Q}=await Rv().then(() => jv);return await Q($),$},grid:async($)=>{let{grid:Q}=await V$0().then(() => U$0);return await Q($),$},settle:async($)=>{let{runSettleScenario:Q}=await Promise.resolve().then(() => (M$0(),D$0));return await Q($),$},fullMechanics:async($)=>{return await prepopulateFullMechanicsImpl($),$}},Vw0=Iv.ahb,Ow0=Iv.fullMechanics});l5();export{Xw0 as verifySolvency,iK as verifyAccountSignature,XJ as validateDelta,_20 as validateAccountDeltas,qx as transferNameBetweenEntities,TM as toSignerId,FM as toJId,Rb as toEpAddress,LM as toEntityId,sD as submitSettle,Kx as submitReserveToReserve,Zx as submitProcessBatch,Qx as submitPrefundAccount,rA0 as stopP2P,Av as startP2P,T$0 as startJEventWatcher,sQ as signAccountFrame,lA0 as setRuntimeSeed,iA0 as setRuntimeId,s7 as setBrowserVMJurisdiction,Dw0 as searchEntityNames,wv as scheduleNetworkProcess,Iv as scenarios,B$0 as saveEnvToDB,h1 as safeStringify,Lb as safeParseReplicaKey,K30 as safeExtractEntityId,Mw0 as resolveEntityName,Mx as resolveEntityIdentifier,Dx as requestNamedEntity,qE as registerTestKeys,XO as registerSignerPublicKey,aQ as registerSignerKey,Xx as registerNumberedEntityOnChain,cA0 as registerEnvChangeCallback,zw0 as queueEntityInput,tA0 as processJBlockEvents,w$0 as process,Ow0 as prepopulateFullMechanics,Vw0 as prepopulateAHB,ME as parseUniversalEntityId,b20 as parseTokenAmount,R30 as parseScenario,J30 as parseReplicaUri,ZQ as parseReplicaKey,u6 as normalizeEntityId,WT as mergeAndSortEvents,eA0 as main,Gw0 as loadEnvFromDB,q30 as jIdFromChainId,Pb as isValidSignerId,Hb as isValidJId,jb as isValidEpAddress,Mb as isValidEntityId,$30 as isNumberedEntity,K5 as isLeftEntity,E5 as isLeft,Q30 as isLazyEntity,Px as isEntityRegistered,S20 as isDelta,sA0 as initEnv,iZ as hashBoard,d3 as getTokenInfo,Qw0 as getSnapshot,cK as getSignerPublicKey,jx as getSignerDisplayInfo,YO as getShortId,$$0 as getScenariosByTag,e30 as getScenario,aA0 as getP2P,zx as getNextEntityNumber,wL as getJurisdictionByAddress,Jw0 as getJWatcherStatus,$w0 as getHistory,dA0 as getEnv,$M as getEntityShortId,Rx as getEntityNumber,Jx as getEntityInfoFromChain,Z30 as getEntityDisplayNumber,Pw0 as getEntityDisplayInfoFromProfile,Hx as getEntityDisplayInfo,t7 as getDefaultCreditLimit,Zw0 as getCurrentHistoryIndex,C$0 as getCleanLogs,e4 as getBrowserVMInstance,QQ as getAvailableJurisdictions,Hw0 as getActiveJAdapter,H30 as getAccountBarVisual,eD as generateSignerAvatar,eY as generateNumberedEntityId,Ux as generateNamedEntityId,BL as generateLazyEntityId,$J as generateEntityAvatar,qM as formatTokenAmountEthers,qM as formatTokenAmount,kb as formatSummary,QJ as formatSignerDisplay,h2 as formatRuntime,Y30 as formatReplicaUri,RU as formatReplicaKey,X30 as formatReplicaDisplay,fb as formatOrderbook,No as formatEntityIdDisplay,x6 as formatEntityId,U4 as formatEntityDisplay,GT as formatEntity,Ex as formatAssetAmountEthers,UT as formatAccount,e70 as extractSignerId,Lo as extractProvider,AM as extractEntityId,E30 as executeScenario,Co as entityIdsEqual,sY as encodeBoard,KU as encode,vq as detectEntityType,j$ as deriveSignerKeySync,XR as deriveSignerKey,oA0 as deriveRuntimeId,$7 as deriveDelta,qw0 as demoCompleteHanko,hq as decode,$x as debugFundReserves,q2 as db,t70 as createReplicaKey,DE as createProviderScopedEntityId,L20 as createProfileUpdateTx,tD as createNumberedEntity,Ox as createNumberedEntitiesBatch,z30 as createLocalUri,W30 as createLazyJId,Vx as createLazyEntity,ek as createJAdapter,cM as createEmptyEnv,Ix as createDemoDelta,mq as createDefaultDelta,hA0 as copyCleanLogs,v20 as convertTokenPrecision,t4 as connectToEthereum,JO as compareEntityIds,WE as clearSignerKeys,Yw0 as clearDatabaseAndHistory,IL as clearDatabase,Uw0 as clearDB,gA0 as clearCleanLogs,P30 as classifyBilateralState,F$0 as calculateSolvency,vL as calculatePercentageEthers,Yx as assignNameOnChain,dM as applyRuntimeInput,n70 as XLN_URI_SCHEME,a70 as XLN_COORDINATOR,BT as SCENARIOS,YT as ReplicaMap,XT as MAX_NUMBERED_ENTITY,g20 as FINANCIAL_CONSTANTS,Cb as EntityMap,r70 as DEFAULT_RUNTIME_HOST,s70 as CHAIN_IDS,Y2 as BrowserVMProvider,y20 as BigIntMath};
