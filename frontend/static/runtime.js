var sZ0=Object.create;var{getPrototypeOf:aZ0,defineProperty:SW,getOwnPropertyNames:uk,getOwnPropertyDescriptor:tZ0}=Object,dk=Object.prototype.hasOwnProperty;var RX=($,Q,X)=>{X=$!=null?sZ0(aZ0($)):{};let Y=Q||!$||!$.__esModule?SW(X,"default",{value:$,enumerable:!0}):X;for(let Z of uk($))if(!dk.call(Y,Z))SW(Y,Z,{get:()=>$[Z],enumerable:!0});return Y},lk=new WeakMap,I$=($)=>{var Q=lk.get($),X;if(Q)return Q;if(Q=SW({},"__esModule",{value:!0}),$&&typeof $==="object"||typeof $==="function")uk($).map((Y)=>!dk.call(Q,Y)&&SW(Q,Y,{get:()=>$[Y],enumerable:!(X=tZ0($,Y))||X.enumerable}));return lk.set($,Q),Q},d$=($,Q)=>()=>(Q||$((Q={exports:{}}).exports,Q),Q.exports);var r8=($,Q)=>{for(var X in Q)SW($,X,{get:Q[X],enumerable:!0,configurable:!0,set:(Y)=>Q[X]=()=>Y})};var y=($,Q)=>()=>($&&(Q=$($=0)),Q);var ik=(($)=>typeof require!=="undefined"?require:typeof Proxy!=="undefined"?new Proxy($,{get:(Q,X)=>(typeof require!=="undefined"?require:Q)[X]}):$)(function($){if(typeof require!=="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+$+'" is not supported')});var nk=d$((eZ0)=>{eZ0.supports=function $(...Q){let X=Q.reduce((Y,Z)=>Object.assign(Y,Z),{});return Object.assign(X,{snapshots:X.snapshots||!1,permanence:X.permanence||!1,seek:X.seek||!1,clear:X.clear||!1,getMany:X.getMany||!1,keyIterator:X.keyIterator||!1,valueIterator:X.valueIterator||!1,iteratorNextv:X.iteratorNextv||!1,iteratorAll:X.iteratorAll||!1,status:X.status||!1,createIfMissing:X.createIfMissing||!1,errorIfExists:X.errorIfExists||!1,deferredOpen:X.deferredOpen||!1,promises:X.promises||!1,streams:X.streams||!1,encodings:Object.assign({},X.encodings),events:Object.assign({},X.events),additionalMethods:Object.assign({},X.additionalMethods)})}});var V9=d$((YR0,ok)=>{ok.exports=class $ extends Error{constructor(Q,X){super(Q||"");if(typeof X==="object"&&X!==null){if(X.code)this.code=String(X.code);if(X.expected)this.expected=!0;if(X.transient)this.transient=!0;if(X.cause)this.cause=X.cause}if(Error.captureStackTrace)Error.captureStackTrace(this,this.constructor)}}});var b8={};r8(b8,{transcode:()=>h90,resolveObjectURL:()=>g90,kStringMaxLength:()=>Yx,kMaxLength:()=>EW,isUtf8:()=>y90,isAscii:()=>b90,default:()=>m90,constants:()=>U90,btoa:()=>q90,atob:()=>G90,INSPECT_MAX_BYTES:()=>Xx,File:()=>z90,Buffer:()=>H0,Blob:()=>K90});function Q90($){var Q=$.length;if(Q%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var X=$.indexOf("=");if(X===-1)X=Q;var Y=X===Q?0:4-X%4;return[X,Y]}function X90($,Q){return($+Q)*3/4-Q}function Y90($){var Q,X=Q90($),Y=X[0],Z=X[1],J=new Uint8Array(X90(Y,Z)),q=0,G=Z>0?Y-4:Y,z;for(z=0;z<G;z+=4)Q=IZ[$.charCodeAt(z)]<<18|IZ[$.charCodeAt(z+1)]<<12|IZ[$.charCodeAt(z+2)]<<6|IZ[$.charCodeAt(z+3)],J[q++]=Q>>16&255,J[q++]=Q>>8&255,J[q++]=Q&255;if(Z===2)Q=IZ[$.charCodeAt(z)]<<2|IZ[$.charCodeAt(z+1)]>>4,J[q++]=Q&255;if(Z===1)Q=IZ[$.charCodeAt(z)]<<10|IZ[$.charCodeAt(z+1)]<<4|IZ[$.charCodeAt(z+2)]>>2,J[q++]=Q>>8&255,J[q++]=Q&255;return J}function Z90($){return e9[$>>18&63]+e9[$>>12&63]+e9[$>>6&63]+e9[$&63]}function J90($,Q,X){var Y,Z=[];for(var J=Q;J<X;J+=3)Y=($[J]<<16&16711680)+($[J+1]<<8&65280)+($[J+2]&255),Z.push(Z90(Y));return Z.join("")}function sk($){var Q,X=$.length,Y=X%3,Z=[],J=16383;for(var q=0,G=X-Y;q<G;q+=J)Z.push(J90($,q,q+J>G?G:q+J));if(Y===1)Q=$[X-1],Z.push(e9[Q>>2]+e9[Q<<4&63]+"==");else if(Y===2)Q=($[X-2]<<8)+$[X-1],Z.push(e9[Q>>10]+e9[Q>>4&63]+e9[Q<<2&63]+"=");return Z.join("")}function CD($,Q,X,Y,Z){var J,q,G=Z*8-Y-1,z=(1<<G)-1,M=z>>1,j=-7,P=X?Z-1:0,D=X?-1:1,A=$[Q+P];P+=D,J=A&(1<<-j)-1,A>>=-j,j+=G;for(;j>0;J=J*256+$[Q+P],P+=D,j-=8);q=J&(1<<-j)-1,J>>=-j,j+=Y;for(;j>0;q=q*256+$[Q+P],P+=D,j-=8);if(J===0)J=1-M;else if(J===z)return q?NaN:(A?-1:1)*(1/0);else q=q+Math.pow(2,Y),J=J-M;return(A?-1:1)*q*Math.pow(2,J-Y)}function Qx($,Q,X,Y,Z,J){var q,G,z,M=J*8-Z-1,j=(1<<M)-1,P=j>>1,D=Z===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=Y?0:J-1,I=Y?1:-1,H=Q<0||Q===0&&1/Q<0?1:0;if(Q=Math.abs(Q),isNaN(Q)||Q===1/0)G=isNaN(Q)?1:0,q=j;else{if(q=Math.floor(Math.log(Q)/Math.LN2),Q*(z=Math.pow(2,-q))<1)q--,z*=2;if(q+P>=1)Q+=D/z;else Q+=D*Math.pow(2,1-P);if(Q*z>=2)q++,z/=2;if(q+P>=j)G=0,q=j;else if(q+P>=1)G=(Q*z-1)*Math.pow(2,Z),q=q+P;else G=Q*Math.pow(2,P-1)*Math.pow(2,Z),q=0}for(;Z>=8;$[X+A]=G&255,A+=I,G/=256,Z-=8);q=q<<Z|G,M+=Z;for(;M>0;$[X+A]=q&255,A+=I,q/=256,M-=8);$[X+A-I]|=H*128}function Y5($){if($>EW)throw new RangeError('The value "'+$+'" is invalid for option "size"');let Q=new Uint8Array($);return Object.setPrototypeOf(Q,H0.prototype),Q}function iA($,Q,X){return class Y extends X{constructor(){super();Object.defineProperty(this,"message",{value:Q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${$}]`,this.stack,delete this.name}get code(){return $}set code(Z){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Z,writable:!0})}toString(){return`${this.name} [${$}]: ${this.message}`}}}function H0($,Q,X){if(typeof $==="number"){if(typeof Q==="string")throw new TypeError('The "string" argument must be of type string. Received type number');return nA($)}return Zx($,Q,X)}function Zx($,Q,X){if(typeof $==="string")return M90($,Q);if(ArrayBuffer.isView($))return D90($);if($==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $);if($J($,ArrayBuffer)||$&&$J($.buffer,ArrayBuffer))return uA($,Q,X);if(typeof SharedArrayBuffer!=="undefined"&&($J($,SharedArrayBuffer)||$&&$J($.buffer,SharedArrayBuffer)))return uA($,Q,X);if(typeof $==="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let Y=$.valueOf&&$.valueOf();if(Y!=null&&Y!==$)return H0.from(Y,Q,X);let Z=j90($);if(Z)return Z;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof $[Symbol.toPrimitive]==="function")return H0.from($[Symbol.toPrimitive]("string"),Q,X);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}function Jx($){if(typeof $!=="number")throw new TypeError('"size" argument must be of type number');else if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function O90($,Q,X){if(Jx($),$<=0)return Y5($);if(Q!==void 0)return typeof X==="string"?Y5($).fill(Q,X):Y5($).fill(Q);return Y5($)}function nA($){return Jx($),Y5($<0?0:oA($)|0)}function M90($,Q){if(typeof Q!=="string"||Q==="")Q="utf8";if(!H0.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);let X=qx($,Q)|0,Y=Y5(X),Z=Y.write($,Q);if(Z!==X)Y=Y.slice(0,Z);return Y}function lA($){let Q=$.length<0?0:oA($.length)|0,X=Y5(Q);for(let Y=0;Y<Q;Y+=1)X[Y]=$[Y]&255;return X}function D90($){if($J($,Uint8Array)){let Q=new Uint8Array($);return uA(Q.buffer,Q.byteOffset,Q.byteLength)}return lA($)}function uA($,Q,X){if(Q<0||$.byteLength<Q)throw new RangeError('"offset" is outside of buffer bounds');if($.byteLength<Q+(X||0))throw new RangeError('"length" is outside of buffer bounds');let Y;if(Q===void 0&&X===void 0)Y=new Uint8Array($);else if(X===void 0)Y=new Uint8Array($,Q);else Y=new Uint8Array($,Q,X);return Object.setPrototypeOf(Y,H0.prototype),Y}function j90($){if(H0.isBuffer($)){let Q=oA($.length)|0,X=Y5(Q);if(X.length===0)return X;return $.copy(X,0,0,Q),X}if($.length!==void 0){if(typeof $.length!=="number"||Number.isNaN($.length))return Y5(0);return lA($)}if($.type==="Buffer"&&Array.isArray($.data))return lA($.data)}function oA($){if($>=EW)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+EW.toString(16)+" bytes");return $|0}function qx($,Q){if(H0.isBuffer($))return $.length;if(ArrayBuffer.isView($)||$J($,ArrayBuffer))return $.byteLength;if(typeof $!=="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);let X=$.length,Y=arguments.length>2&&arguments[2]===!0;if(!Y&&X===0)return 0;let Z=!1;for(;;)switch(Q){case"ascii":case"latin1":case"binary":return X;case"utf8":case"utf-8":return dA($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X*2;case"hex":return X>>>1;case"base64":return Dx($).length;default:if(Z)return Y?-1:dA($).length;Q=(""+Q).toLowerCase(),Z=!0}}function P90($,Q,X){let Y=!1;if(Q===void 0||Q<0)Q=0;if(Q>this.length)return"";if(X===void 0||X>this.length)X=this.length;if(X<=0)return"";if(X>>>=0,Q>>>=0,X<=Q)return"";if(!$)$="utf8";while(!0)switch($){case"hex":return F90(this,Q,X);case"utf8":case"utf-8":return zx(this,Q,X);case"ascii":return T90(this,Q,X);case"latin1":case"binary":return I90(this,Q,X);case"base64":return L90(this,Q,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B90(this,Q,X);default:if(Y)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),Y=!0}}function UG($,Q,X){let Y=$[Q];$[Q]=$[X],$[X]=Y}function Gx($,Q,X,Y,Z){if($.length===0)return-1;if(typeof X==="string")Y=X,X=0;else if(X>2147483647)X=2147483647;else if(X<-2147483648)X=-2147483648;if(X=+X,Number.isNaN(X))X=Z?0:$.length-1;if(X<0)X=$.length+X;if(X>=$.length)if(Z)return-1;else X=$.length-1;else if(X<0)if(Z)X=0;else return-1;if(typeof Q==="string")Q=H0.from(Q,Y);if(H0.isBuffer(Q)){if(Q.length===0)return-1;return tk($,Q,X,Y,Z)}else if(typeof Q==="number"){if(Q=Q&255,typeof Uint8Array.prototype.indexOf==="function")if(Z)return Uint8Array.prototype.indexOf.call($,Q,X);else return Uint8Array.prototype.lastIndexOf.call($,Q,X);return tk($,[Q],X,Y,Z)}throw new TypeError("val must be string, number or Buffer")}function tk($,Q,X,Y,Z){let J=1,q=$.length,G=Q.length;if(Y!==void 0){if(Y=String(Y).toLowerCase(),Y==="ucs2"||Y==="ucs-2"||Y==="utf16le"||Y==="utf-16le"){if($.length<2||Q.length<2)return-1;J=2,q/=2,G/=2,X/=2}}function z(j,P){if(J===1)return j[P];else return j.readUInt16BE(P*J)}let M;if(Z){let j=-1;for(M=X;M<q;M++)if(z($,M)===z(Q,j===-1?0:M-j)){if(j===-1)j=M;if(M-j+1===G)return j*J}else{if(j!==-1)M-=M-j;j=-1}}else{if(X+G>q)X=q-G;for(M=X;M>=0;M--){let j=!0;for(let P=0;P<G;P++)if(z($,M+P)!==z(Q,P)){j=!1;break}if(j)return M}}return-1}function H90($,Q,X,Y){X=Number(X)||0;let Z=$.length-X;if(!Y)Y=Z;else if(Y=Number(Y),Y>Z)Y=Z;let J=Q.length;if(Y>J/2)Y=J/2;let q;for(q=0;q<Y;++q){let G=parseInt(Q.substr(q*2,2),16);if(Number.isNaN(G))return q;$[X+q]=G}return q}function N90($,Q,X,Y){return LD(dA(Q,$.length-X),$,X,Y)}function A90($,Q,X,Y){return LD(k90(Q),$,X,Y)}function R90($,Q,X,Y){return LD(Dx(Q),$,X,Y)}function C90($,Q,X,Y){return LD(x90(Q,$.length-X),$,X,Y)}function L90($,Q,X){if(Q===0&&X===$.length)return sk($);else return sk($.slice(Q,X))}function zx($,Q,X){X=Math.min($.length,X);let Y=[],Z=Q;while(Z<X){let J=$[Z],q=null,G=J>239?4:J>223?3:J>191?2:1;if(Z+G<=X){let z,M,j,P;switch(G){case 1:if(J<128)q=J;break;case 2:if(z=$[Z+1],(z&192)===128){if(P=(J&31)<<6|z&63,P>127)q=P}break;case 3:if(z=$[Z+1],M=$[Z+2],(z&192)===128&&(M&192)===128){if(P=(J&15)<<12|(z&63)<<6|M&63,P>2047&&(P<55296||P>57343))q=P}break;case 4:if(z=$[Z+1],M=$[Z+2],j=$[Z+3],(z&192)===128&&(M&192)===128&&(j&192)===128){if(P=(J&15)<<18|(z&63)<<12|(M&63)<<6|j&63,P>65535&&P<1114112)q=P}}}if(q===null)q=65533,G=1;else if(q>65535)q-=65536,Y.push(q>>>10&1023|55296),q=56320|q&1023;Y.push(q),Z+=G}return w90(Y)}function w90($){let Q=$.length;if(Q<=ek)return String.fromCharCode.apply(String,$);let X="",Y=0;while(Y<Q)X+=String.fromCharCode.apply(String,$.slice(Y,Y+=ek));return X}function T90($,Q,X){let Y="";X=Math.min($.length,X);for(let Z=Q;Z<X;++Z)Y+=String.fromCharCode($[Z]&127);return Y}function I90($,Q,X){let Y="";X=Math.min($.length,X);for(let Z=Q;Z<X;++Z)Y+=String.fromCharCode($[Z]);return Y}function F90($,Q,X){let Y=$.length;if(!Q||Q<0)Q=0;if(!X||X<0||X>Y)X=Y;let Z="";for(let J=Q;J<X;++J)Z+=f90[$[J]];return Z}function B90($,Q,X){let Y=$.slice(Q,X),Z="";for(let J=0;J<Y.length-1;J+=2)Z+=String.fromCharCode(Y[J]+Y[J+1]*256);return Z}function SQ($,Q,X){if($%1!==0||$<0)throw new RangeError("offset is not uint");if($+Q>X)throw new RangeError("Trying to access beyond buffer length")}function NY($,Q,X,Y,Z,J){if(!H0.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(Q>Z||Q<J)throw new RangeError('"value" argument is out of bounds');if(X+Y>$.length)throw new RangeError("Index out of range")}function Kx($,Q,X,Y,Z){Mx(Q,Y,Z,$,X,7);let J=Number(Q&BigInt(4294967295));$[X++]=J,J=J>>8,$[X++]=J,J=J>>8,$[X++]=J,J=J>>8,$[X++]=J;let q=Number(Q>>BigInt(32)&BigInt(4294967295));return $[X++]=q,q=q>>8,$[X++]=q,q=q>>8,$[X++]=q,q=q>>8,$[X++]=q,X}function Ux($,Q,X,Y,Z){Mx(Q,Y,Z,$,X,7);let J=Number(Q&BigInt(4294967295));$[X+7]=J,J=J>>8,$[X+6]=J,J=J>>8,$[X+5]=J,J=J>>8,$[X+4]=J;let q=Number(Q>>BigInt(32)&BigInt(4294967295));return $[X+3]=q,q=q>>8,$[X+2]=q,q=q>>8,$[X+1]=q,q=q>>8,$[X]=q,X+8}function Wx($,Q,X,Y,Z,J){if(X+Y>$.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("Index out of range")}function Vx($,Q,X,Y,Z){if(Q=+Q,X=X>>>0,!Z)Wx($,Q,X,4,340282346638528860000000000000000000000,-340282346638528860000000000000000000000);return Qx($,Q,X,Y,23,4),X+4}function Ox($,Q,X,Y,Z){if(Q=+Q,X=X>>>0,!Z)Wx($,Q,X,8,179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,-179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000);return Qx($,Q,X,Y,52,8),X+8}function $x($){let Q="",X=$.length,Y=$[0]==="-"?1:0;for(;X>=Y+4;X-=3)Q=`_${$.slice(X-3,X)}${Q}`;return`${$.slice(0,X)}${Q}`}function S90($,Q,X){if(FK(Q,"offset"),$[Q]===void 0||$[Q+X]===void 0)_W(Q,$.length-(X+1))}function Mx($,Q,X,Y,Z,J){if($>X||$<Q){let q=typeof Q==="bigint"?"n":"",G;if(J>3)if(Q===0||Q===BigInt(0))G=`>= 0${q} and < 2${q} ** ${(J+1)*8}${q}`;else G=`>= -(2${q} ** ${(J+1)*8-1}${q}) and < 2 ** ${(J+1)*8-1}${q}`;else G=`>= ${Q}${q} and <= ${X}${q}`;throw new pA("value",G,$)}S90(Y,Z,J)}function FK($,Q){if(typeof $!=="number")throw new V90(Q,"number",$)}function _W($,Q,X){if(Math.floor($)!==$)throw FK($,X),new pA(X||"offset","an integer",$);if(Q<0)throw new W90;throw new pA(X||"offset",`>= ${X?1:0} and <= ${Q}`,$)}function _90($){if($=$.split("=")[0],$=$.trim().replace(E90,""),$.length<2)return"";while($.length%4!==0)$=$+"=";return $}function dA($,Q){Q=Q||1/0;let X,Y=$.length,Z=null,J=[];for(let q=0;q<Y;++q){if(X=$.charCodeAt(q),X>55295&&X<57344){if(!Z){if(X>56319){if((Q-=3)>-1)J.push(239,191,189);continue}else if(q+1===Y){if((Q-=3)>-1)J.push(239,191,189);continue}Z=X;continue}if(X<56320){if((Q-=3)>-1)J.push(239,191,189);Z=X;continue}X=(Z-55296<<10|X-56320)+65536}else if(Z){if((Q-=3)>-1)J.push(239,191,189)}if(Z=null,X<128){if((Q-=1)<0)break;J.push(X)}else if(X<2048){if((Q-=2)<0)break;J.push(X>>6|192,X&63|128)}else if(X<65536){if((Q-=3)<0)break;J.push(X>>12|224,X>>6&63|128,X&63|128)}else if(X<1114112){if((Q-=4)<0)break;J.push(X>>18|240,X>>12&63|128,X>>6&63|128,X&63|128)}else throw new Error("Invalid code point")}return J}function k90($){let Q=[];for(let X=0;X<$.length;++X)Q.push($.charCodeAt(X)&255);return Q}function x90($,Q){let X,Y,Z,J=[];for(let q=0;q<$.length;++q){if((Q-=2)<0)break;X=$.charCodeAt(q),Y=X>>8,Z=X%256,J.push(Z),J.push(Y)}return J}function Dx($){return Y90(_90($))}function LD($,Q,X,Y){let Z;for(Z=0;Z<Y;++Z){if(Z+X>=Q.length||Z>=$.length)break;Q[Z+X]=$[Z]}return Z}function $J($,Q){return $ instanceof Q||$!=null&&$.constructor!=null&&$.constructor.name!=null&&$.constructor.name===Q.name}function R1($){return typeof BigInt==="undefined"?v90:$}function v90(){throw new Error("BigInt not supported")}function rA($){return()=>{throw new Error($+" is not implemented for node:buffer browser polyfill")}}var e9,IZ,cA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",KG,rk,ak,Xx=50,EW=2147483647,Yx=536870888,q90,G90,z90,K90,U90,W90,V90,pA,ek=4096,E90,f90,g90,y90,b90=($)=>{for(let Q of $)if(Q.charCodeAt(0)>127)return!1;return!0},h90,m90;var h8=y(()=>{e9=[],IZ=[];for(KG=0,rk=cA.length;KG<rk;++KG)e9[KG]=cA[KG],IZ[cA.charCodeAt(KG)]=KG;IZ[45]=62;IZ[95]=63;ak=typeof Symbol==="function"&&typeof Symbol.for==="function"?Symbol.for("nodejs.util.inspect.custom"):null,q90=globalThis.btoa,G90=globalThis.atob,z90=globalThis.File,K90=globalThis.Blob,U90={MAX_LENGTH:EW,MAX_STRING_LENGTH:Yx};W90=iA("ERR_BUFFER_OUT_OF_BOUNDS",function($){if($)return`${$} is outside of buffer bounds`;return"Attempt to access memory outside buffer bounds"},RangeError),V90=iA("ERR_INVALID_ARG_TYPE",function($,Q){return`The "${$}" argument must be of type number. Received type ${typeof Q}`},TypeError),pA=iA("ERR_OUT_OF_RANGE",function($,Q,X){let Y=`The value of "${$}" is out of range.`,Z=X;if(Number.isInteger(X)&&Math.abs(X)>4294967296)Z=$x(String(X));else if(typeof X==="bigint"){if(Z=String(X),X>BigInt(2)**BigInt(32)||X<-(BigInt(2)**BigInt(32)))Z=$x(Z);Z+="n"}return Y+=` It must be ${Q}. Received ${Z}`,Y},RangeError);Object.defineProperty(H0.prototype,"parent",{enumerable:!0,get:function(){if(!H0.isBuffer(this))return;return this.buffer}});Object.defineProperty(H0.prototype,"offset",{enumerable:!0,get:function(){if(!H0.isBuffer(this))return;return this.byteOffset}});H0.poolSize=8192;H0.from=function($,Q,X){return Zx($,Q,X)};Object.setPrototypeOf(H0.prototype,Uint8Array.prototype);Object.setPrototypeOf(H0,Uint8Array);H0.alloc=function($,Q,X){return O90($,Q,X)};H0.allocUnsafe=function($){return nA($)};H0.allocUnsafeSlow=function($){return nA($)};H0.isBuffer=function $(Q){return Q!=null&&Q._isBuffer===!0&&Q!==H0.prototype};H0.compare=function $(Q,X){if($J(Q,Uint8Array))Q=H0.from(Q,Q.offset,Q.byteLength);if($J(X,Uint8Array))X=H0.from(X,X.offset,X.byteLength);if(!H0.isBuffer(Q)||!H0.isBuffer(X))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Q===X)return 0;let Y=Q.length,Z=X.length;for(let J=0,q=Math.min(Y,Z);J<q;++J)if(Q[J]!==X[J]){Y=Q[J],Z=X[J];break}if(Y<Z)return-1;if(Z<Y)return 1;return 0};H0.isEncoding=function $(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};H0.concat=function $(Q,X){if(!Array.isArray(Q))throw new TypeError('"list" argument must be an Array of Buffers');if(Q.length===0)return H0.alloc(0);let Y;if(X===void 0){X=0;for(Y=0;Y<Q.length;++Y)X+=Q[Y].length}let Z=H0.allocUnsafe(X),J=0;for(Y=0;Y<Q.length;++Y){let q=Q[Y];if($J(q,Uint8Array))if(J+q.length>Z.length){if(!H0.isBuffer(q))q=H0.from(q);q.copy(Z,J)}else Uint8Array.prototype.set.call(Z,q,J);else if(!H0.isBuffer(q))throw new TypeError('"list" argument must be an Array of Buffers');else q.copy(Z,J);J+=q.length}return Z};H0.byteLength=qx;H0.prototype._isBuffer=!0;H0.prototype.swap16=function $(){let Q=this.length;if(Q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let X=0;X<Q;X+=2)UG(this,X,X+1);return this};H0.prototype.swap32=function $(){let Q=this.length;if(Q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let X=0;X<Q;X+=4)UG(this,X,X+3),UG(this,X+1,X+2);return this};H0.prototype.swap64=function $(){let Q=this.length;if(Q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let X=0;X<Q;X+=8)UG(this,X,X+7),UG(this,X+1,X+6),UG(this,X+2,X+5),UG(this,X+3,X+4);return this};H0.prototype.toString=function $(){let Q=this.length;if(Q===0)return"";if(arguments.length===0)return zx(this,0,Q);return P90.apply(this,arguments)};H0.prototype.toLocaleString=H0.prototype.toString;H0.prototype.equals=function $(Q){if(!H0.isBuffer(Q))throw new TypeError("Argument must be a Buffer");if(this===Q)return!0;return H0.compare(this,Q)===0};H0.prototype.inspect=function $(){let Q="",X=Xx;if(Q=this.toString("hex",0,X).replace(/(.{2})/g,"$1 ").trim(),this.length>X)Q+=" ... ";return"<Buffer "+Q+">"};if(ak)H0.prototype[ak]=H0.prototype.inspect;H0.prototype.compare=function $(Q,X,Y,Z,J){if($J(Q,Uint8Array))Q=H0.from(Q,Q.offset,Q.byteLength);if(!H0.isBuffer(Q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Q);if(X===void 0)X=0;if(Y===void 0)Y=Q?Q.length:0;if(Z===void 0)Z=0;if(J===void 0)J=this.length;if(X<0||Y>Q.length||Z<0||J>this.length)throw new RangeError("out of range index");if(Z>=J&&X>=Y)return 0;if(Z>=J)return-1;if(X>=Y)return 1;if(X>>>=0,Y>>>=0,Z>>>=0,J>>>=0,this===Q)return 0;let q=J-Z,G=Y-X,z=Math.min(q,G),M=this.slice(Z,J),j=Q.slice(X,Y);for(let P=0;P<z;++P)if(M[P]!==j[P]){q=M[P],G=j[P];break}if(q<G)return-1;if(G<q)return 1;return 0};H0.prototype.includes=function $(Q,X,Y){return this.indexOf(Q,X,Y)!==-1};H0.prototype.indexOf=function $(Q,X,Y){return Gx(this,Q,X,Y,!0)};H0.prototype.lastIndexOf=function $(Q,X,Y){return Gx(this,Q,X,Y,!1)};H0.prototype.write=function $(Q,X,Y,Z){if(X===void 0)Z="utf8",Y=this.length,X=0;else if(Y===void 0&&typeof X==="string")Z=X,Y=this.length,X=0;else if(isFinite(X))if(X=X>>>0,isFinite(Y)){if(Y=Y>>>0,Z===void 0)Z="utf8"}else Z=Y,Y=void 0;else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let J=this.length-X;if(Y===void 0||Y>J)Y=J;if(Q.length>0&&(Y<0||X<0)||X>this.length)throw new RangeError("Attempt to write outside buffer bounds");if(!Z)Z="utf8";let q=!1;for(;;)switch(Z){case"hex":return H90(this,Q,X,Y);case"utf8":case"utf-8":return N90(this,Q,X,Y);case"ascii":case"latin1":case"binary":return A90(this,Q,X,Y);case"base64":return R90(this,Q,X,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C90(this,Q,X,Y);default:if(q)throw new TypeError("Unknown encoding: "+Z);Z=(""+Z).toLowerCase(),q=!0}};H0.prototype.toJSON=function $(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};H0.prototype.slice=function $(Q,X){let Y=this.length;if(Q=~~Q,X=X===void 0?Y:~~X,Q<0){if(Q+=Y,Q<0)Q=0}else if(Q>Y)Q=Y;if(X<0){if(X+=Y,X<0)X=0}else if(X>Y)X=Y;if(X<Q)X=Q;let Z=this.subarray(Q,X);return Object.setPrototypeOf(Z,H0.prototype),Z};H0.prototype.readUintLE=H0.prototype.readUIntLE=function $(Q,X,Y){if(Q=Q>>>0,X=X>>>0,!Y)SQ(Q,X,this.length);let Z=this[Q],J=1,q=0;while(++q<X&&(J*=256))Z+=this[Q+q]*J;return Z};H0.prototype.readUintBE=H0.prototype.readUIntBE=function $(Q,X,Y){if(Q=Q>>>0,X=X>>>0,!Y)SQ(Q,X,this.length);let Z=this[Q+--X],J=1;while(X>0&&(J*=256))Z+=this[Q+--X]*J;return Z};H0.prototype.readUint8=H0.prototype.readUInt8=function $(Q,X){if(Q=Q>>>0,!X)SQ(Q,1,this.length);return this[Q]};H0.prototype.readUint16LE=H0.prototype.readUInt16LE=function $(Q,X){if(Q=Q>>>0,!X)SQ(Q,2,this.length);return this[Q]|this[Q+1]<<8};H0.prototype.readUint16BE=H0.prototype.readUInt16BE=function $(Q,X){if(Q=Q>>>0,!X)SQ(Q,2,this.length);return this[Q]<<8|this[Q+1]};H0.prototype.readUint32LE=H0.prototype.readUInt32LE=function $(Q,X){if(Q=Q>>>0,!X)SQ(Q,4,this.length);return(this[Q]|this[Q+1]<<8|this[Q+2]<<16)+this[Q+3]*16777216};H0.prototype.readUint32BE=H0.prototype.readUInt32BE=function $(Q,X){if(Q=Q>>>0,!X)SQ(Q,4,this.length);return this[Q]*16777216+(this[Q+1]<<16|this[Q+2]<<8|this[Q+3])};H0.prototype.readBigUInt64LE=R1(function $(Q){Q=Q>>>0,FK(Q,"offset");let X=this[Q],Y=this[Q+7];if(X===void 0||Y===void 0)_W(Q,this.length-8);let Z=X+this[++Q]*256+this[++Q]*65536+this[++Q]*16777216,J=this[++Q]+this[++Q]*256+this[++Q]*65536+Y*16777216;return BigInt(Z)+(BigInt(J)<<BigInt(32))});H0.prototype.readBigUInt64BE=R1(function $(Q){Q=Q>>>0,FK(Q,"offset");let X=this[Q],Y=this[Q+7];if(X===void 0||Y===void 0)_W(Q,this.length-8);let Z=X*16777216+this[++Q]*65536+this[++Q]*256+this[++Q],J=this[++Q]*16777216+this[++Q]*65536+this[++Q]*256+Y;return(BigInt(Z)<<BigInt(32))+BigInt(J)});H0.prototype.readIntLE=function $(Q,X,Y){if(Q=Q>>>0,X=X>>>0,!Y)SQ(Q,X,this.length);let Z=this[Q],J=1,q=0;while(++q<X&&(J*=256))Z+=this[Q+q]*J;if(J*=128,Z>=J)Z-=Math.pow(2,8*X);return Z};H0.prototype.readIntBE=function $(Q,X,Y){if(Q=Q>>>0,X=X>>>0,!Y)SQ(Q,X,this.length);let Z=X,J=1,q=this[Q+--Z];while(Z>0&&(J*=256))q+=this[Q+--Z]*J;if(J*=128,q>=J)q-=Math.pow(2,8*X);return q};H0.prototype.readInt8=function $(Q,X){if(Q=Q>>>0,!X)SQ(Q,1,this.length);if(!(this[Q]&128))return this[Q];return(255-this[Q]+1)*-1};H0.prototype.readInt16LE=function $(Q,X){if(Q=Q>>>0,!X)SQ(Q,2,this.length);let Y=this[Q]|this[Q+1]<<8;return Y&32768?Y|4294901760:Y};H0.prototype.readInt16BE=function $(Q,X){if(Q=Q>>>0,!X)SQ(Q,2,this.length);let Y=this[Q+1]|this[Q]<<8;return Y&32768?Y|4294901760:Y};H0.prototype.readInt32LE=function $(Q,X){if(Q=Q>>>0,!X)SQ(Q,4,this.length);return this[Q]|this[Q+1]<<8|this[Q+2]<<16|this[Q+3]<<24};H0.prototype.readInt32BE=function $(Q,X){if(Q=Q>>>0,!X)SQ(Q,4,this.length);return this[Q]<<24|this[Q+1]<<16|this[Q+2]<<8|this[Q+3]};H0.prototype.readBigInt64LE=R1(function $(Q){Q=Q>>>0,FK(Q,"offset");let X=this[Q],Y=this[Q+7];if(X===void 0||Y===void 0)_W(Q,this.length-8);let Z=this[Q+4]+this[Q+5]*256+this[Q+6]*65536+(Y<<24);return(BigInt(Z)<<BigInt(32))+BigInt(X+this[++Q]*256+this[++Q]*65536+this[++Q]*16777216)});H0.prototype.readBigInt64BE=R1(function $(Q){Q=Q>>>0,FK(Q,"offset");let X=this[Q],Y=this[Q+7];if(X===void 0||Y===void 0)_W(Q,this.length-8);let Z=(X<<24)+this[++Q]*65536+this[++Q]*256+this[++Q];return(BigInt(Z)<<BigInt(32))+BigInt(this[++Q]*16777216+this[++Q]*65536+this[++Q]*256+Y)});H0.prototype.readFloatLE=function $(Q,X){if(Q=Q>>>0,!X)SQ(Q,4,this.length);return CD(this,Q,!0,23,4)};H0.prototype.readFloatBE=function $(Q,X){if(Q=Q>>>0,!X)SQ(Q,4,this.length);return CD(this,Q,!1,23,4)};H0.prototype.readDoubleLE=function $(Q,X){if(Q=Q>>>0,!X)SQ(Q,8,this.length);return CD(this,Q,!0,52,8)};H0.prototype.readDoubleBE=function $(Q,X){if(Q=Q>>>0,!X)SQ(Q,8,this.length);return CD(this,Q,!1,52,8)};H0.prototype.writeUintLE=H0.prototype.writeUIntLE=function $(Q,X,Y,Z){if(Q=+Q,X=X>>>0,Y=Y>>>0,!Z){let G=Math.pow(2,8*Y)-1;NY(this,Q,X,Y,G,0)}let J=1,q=0;this[X]=Q&255;while(++q<Y&&(J*=256))this[X+q]=Q/J&255;return X+Y};H0.prototype.writeUintBE=H0.prototype.writeUIntBE=function $(Q,X,Y,Z){if(Q=+Q,X=X>>>0,Y=Y>>>0,!Z){let G=Math.pow(2,8*Y)-1;NY(this,Q,X,Y,G,0)}let J=Y-1,q=1;this[X+J]=Q&255;while(--J>=0&&(q*=256))this[X+J]=Q/q&255;return X+Y};H0.prototype.writeUint8=H0.prototype.writeUInt8=function $(Q,X,Y){if(Q=+Q,X=X>>>0,!Y)NY(this,Q,X,1,255,0);return this[X]=Q&255,X+1};H0.prototype.writeUint16LE=H0.prototype.writeUInt16LE=function $(Q,X,Y){if(Q=+Q,X=X>>>0,!Y)NY(this,Q,X,2,65535,0);return this[X]=Q&255,this[X+1]=Q>>>8,X+2};H0.prototype.writeUint16BE=H0.prototype.writeUInt16BE=function $(Q,X,Y){if(Q=+Q,X=X>>>0,!Y)NY(this,Q,X,2,65535,0);return this[X]=Q>>>8,this[X+1]=Q&255,X+2};H0.prototype.writeUint32LE=H0.prototype.writeUInt32LE=function $(Q,X,Y){if(Q=+Q,X=X>>>0,!Y)NY(this,Q,X,4,4294967295,0);return this[X+3]=Q>>>24,this[X+2]=Q>>>16,this[X+1]=Q>>>8,this[X]=Q&255,X+4};H0.prototype.writeUint32BE=H0.prototype.writeUInt32BE=function $(Q,X,Y){if(Q=+Q,X=X>>>0,!Y)NY(this,Q,X,4,4294967295,0);return this[X]=Q>>>24,this[X+1]=Q>>>16,this[X+2]=Q>>>8,this[X+3]=Q&255,X+4};H0.prototype.writeBigUInt64LE=R1(function $(Q,X=0){return Kx(this,Q,X,BigInt(0),BigInt("0xffffffffffffffff"))});H0.prototype.writeBigUInt64BE=R1(function $(Q,X=0){return Ux(this,Q,X,BigInt(0),BigInt("0xffffffffffffffff"))});H0.prototype.writeIntLE=function $(Q,X,Y,Z){if(Q=+Q,X=X>>>0,!Z){let z=Math.pow(2,8*Y-1);NY(this,Q,X,Y,z-1,-z)}let J=0,q=1,G=0;this[X]=Q&255;while(++J<Y&&(q*=256)){if(Q<0&&G===0&&this[X+J-1]!==0)G=1;this[X+J]=(Q/q>>0)-G&255}return X+Y};H0.prototype.writeIntBE=function $(Q,X,Y,Z){if(Q=+Q,X=X>>>0,!Z){let z=Math.pow(2,8*Y-1);NY(this,Q,X,Y,z-1,-z)}let J=Y-1,q=1,G=0;this[X+J]=Q&255;while(--J>=0&&(q*=256)){if(Q<0&&G===0&&this[X+J+1]!==0)G=1;this[X+J]=(Q/q>>0)-G&255}return X+Y};H0.prototype.writeInt8=function $(Q,X,Y){if(Q=+Q,X=X>>>0,!Y)NY(this,Q,X,1,127,-128);if(Q<0)Q=255+Q+1;return this[X]=Q&255,X+1};H0.prototype.writeInt16LE=function $(Q,X,Y){if(Q=+Q,X=X>>>0,!Y)NY(this,Q,X,2,32767,-32768);return this[X]=Q&255,this[X+1]=Q>>>8,X+2};H0.prototype.writeInt16BE=function $(Q,X,Y){if(Q=+Q,X=X>>>0,!Y)NY(this,Q,X,2,32767,-32768);return this[X]=Q>>>8,this[X+1]=Q&255,X+2};H0.prototype.writeInt32LE=function $(Q,X,Y){if(Q=+Q,X=X>>>0,!Y)NY(this,Q,X,4,2147483647,-2147483648);return this[X]=Q&255,this[X+1]=Q>>>8,this[X+2]=Q>>>16,this[X+3]=Q>>>24,X+4};H0.prototype.writeInt32BE=function $(Q,X,Y){if(Q=+Q,X=X>>>0,!Y)NY(this,Q,X,4,2147483647,-2147483648);if(Q<0)Q=4294967295+Q+1;return this[X]=Q>>>24,this[X+1]=Q>>>16,this[X+2]=Q>>>8,this[X+3]=Q&255,X+4};H0.prototype.writeBigInt64LE=R1(function $(Q,X=0){return Kx(this,Q,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});H0.prototype.writeBigInt64BE=R1(function $(Q,X=0){return Ux(this,Q,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});H0.prototype.writeFloatLE=function $(Q,X,Y){return Vx(this,Q,X,!0,Y)};H0.prototype.writeFloatBE=function $(Q,X,Y){return Vx(this,Q,X,!1,Y)};H0.prototype.writeDoubleLE=function $(Q,X,Y){return Ox(this,Q,X,!0,Y)};H0.prototype.writeDoubleBE=function $(Q,X,Y){return Ox(this,Q,X,!1,Y)};H0.prototype.copy=function $(Q,X,Y,Z){if(!H0.isBuffer(Q))throw new TypeError("argument should be a Buffer");if(!Y)Y=0;if(!Z&&Z!==0)Z=this.length;if(X>=Q.length)X=Q.length;if(!X)X=0;if(Z>0&&Z<Y)Z=Y;if(Z===Y)return 0;if(Q.length===0||this.length===0)return 0;if(X<0)throw new RangeError("targetStart out of bounds");if(Y<0||Y>=this.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("sourceEnd out of bounds");if(Z>this.length)Z=this.length;if(Q.length-X<Z-Y)Z=Q.length-X+Y;let J=Z-Y;if(this===Q&&typeof Uint8Array.prototype.copyWithin==="function")this.copyWithin(X,Y,Z);else Uint8Array.prototype.set.call(Q,this.subarray(Y,Z),X);return J};H0.prototype.fill=function $(Q,X,Y,Z){if(typeof Q==="string"){if(typeof X==="string")Z=X,X=0,Y=this.length;else if(typeof Y==="string")Z=Y,Y=this.length;if(Z!==void 0&&typeof Z!=="string")throw new TypeError("encoding must be a string");if(typeof Z==="string"&&!H0.isEncoding(Z))throw new TypeError("Unknown encoding: "+Z);if(Q.length===1){let q=Q.charCodeAt(0);if(Z==="utf8"&&q<128||Z==="latin1")Q=q}}else if(typeof Q==="number")Q=Q&255;else if(typeof Q==="boolean")Q=Number(Q);if(X<0||this.length<X||this.length<Y)throw new RangeError("Out of range index");if(Y<=X)return this;if(X=X>>>0,Y=Y===void 0?this.length:Y>>>0,!Q)Q=0;let J;if(typeof Q==="number")for(J=X;J<Y;++J)this[J]=Q;else{let q=H0.isBuffer(Q)?Q:H0.from(Q,Z),G=q.length;if(G===0)throw new TypeError('The value "'+Q+'" is invalid for argument "value"');for(J=0;J<Y-X;++J)this[J+X]=q[J%G]}return this};E90=/[^+/0-9A-Za-z-_]/g;f90=function(){let $=new Array(256);for(let Q=0;Q<16;++Q){let X=Q*16;for(let Y=0;Y<16;++Y)$[X+Y]="0123456789abcdef"[Q]+"0123456789abcdef"[Y]}return $}();g90=rA("resolveObjectURL"),y90=rA("isUtf8"),h90=rA("transcode"),m90=H0});var aA=d$((ZR0,jx)=>{var sA=null;jx.exports=function(){if(sA===null)sA={textEncoder:new TextEncoder,textDecoder:new TextDecoder};return sA}});var eA=d$((p90)=>{var tA=V9(),c90=new Set(["buffer","view","utf8"]);class Px{constructor($){if(this.encode=$.encode||this.encode,this.decode=$.decode||this.decode,this.name=$.name||this.name,this.format=$.format||this.format,typeof this.encode!=="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!=="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!=="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!=="string"||!c90.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");if($.createViewTranscoder)this.createViewTranscoder=$.createViewTranscoder;if($.createBufferTranscoder)this.createBufferTranscoder=$.createBufferTranscoder;if($.createUTF8Transcoder)this.createUTF8Transcoder=$.createUTF8Transcoder}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new tA(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new tA(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new tA(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}}p90.Encoding=Px});var XR=d$((d90)=>{var{Buffer:$R}=(h8(),I$(b8))||{},{Encoding:QR}=eA(),u90=aA();class wD extends QR{constructor($){super({...$,format:"buffer"})}createViewTranscoder(){return new TD({encode:this.encode,decode:($)=>this.decode($R.from($.buffer,$.byteOffset,$.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}}class TD extends QR{constructor($){super({...$,format:"view"})}createBufferTranscoder(){return new wD({encode:($)=>{let Q=this.encode($);return $R.from(Q.buffer,Q.byteOffset,Q.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}}class Hx extends QR{constructor($){super({...$,format:"utf8"})}createBufferTranscoder(){return new wD({encode:($)=>$R.from(this.encode($),"utf8"),decode:($)=>this.decode($.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:$,textDecoder:Q}=u90();return new TD({encode:(X)=>$.encode(this.encode(X)),decode:(X)=>this.decode(Q.decode(X)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}}d90.BufferFormat=wD;d90.ViewFormat=TD;d90.UTF8Format=Hx});var Cx=d$((r90)=>{var{Buffer:CX}=(h8(),I$(b8))||{Buffer:{isBuffer:()=>!1}},{textEncoder:Ax,textDecoder:Nx}=aA()(),{BufferFormat:kW,ViewFormat:YR,UTF8Format:Rx}=XR(),ID=($)=>$;r90.utf8=new Rx({encode:function($){return CX.isBuffer($)?$.toString("utf8"):ArrayBuffer.isView($)?Nx.decode($):String($)},decode:ID,name:"utf8",createViewTranscoder(){return new YR({encode:function($){return ArrayBuffer.isView($)?$:Ax.encode($)},decode:function($){return Nx.decode($)},name:`${this.name}+view`})},createBufferTranscoder(){return new kW({encode:function($){return CX.isBuffer($)?$:ArrayBuffer.isView($)?CX.from($.buffer,$.byteOffset,$.byteLength):CX.from(String($),"utf8")},decode:function($){return $.toString("utf8")},name:`${this.name}+buffer`})}});r90.json=new Rx({encode:JSON.stringify,decode:JSON.parse,name:"json"});r90.buffer=new kW({encode:function($){return CX.isBuffer($)?$:ArrayBuffer.isView($)?CX.from($.buffer,$.byteOffset,$.byteLength):CX.from(String($),"utf8")},decode:ID,name:"buffer",createViewTranscoder(){return new YR({encode:function($){return ArrayBuffer.isView($)?$:CX.from(String($),"utf8")},decode:function($){return CX.from($.buffer,$.byteOffset,$.byteLength)},name:`${this.name}+view`})}});r90.view=new YR({encode:function($){return ArrayBuffer.isView($)?$:Ax.encode($)},decode:ID,name:"view",createBufferTranscoder(){return new kW({encode:function($){return CX.isBuffer($)?$:ArrayBuffer.isView($)?CX.from($.buffer,$.byteOffset,$.byteLength):CX.from(String($),"utf8")},decode:ID,name:`${this.name}+buffer`})}});r90.hex=new kW({encode:function($){return CX.isBuffer($)?$:CX.from(String($),"hex")},decode:function($){return $.toString("hex")},name:"hex"});r90.base64=new kW({encode:function($){return CX.isBuffer($)?$:CX.from(String($),"base64")},decode:function($){return $.toString("base64")},name:"base64"})});var Tx=d$((VJ0)=>{var Lx=V9(),BD=Cx(),{Encoding:XJ0}=eA(),{BufferFormat:YJ0,ViewFormat:ZJ0,UTF8Format:JJ0}=XR(),xW=Symbol("formats"),FD=Symbol("encodings"),qJ0=new Set(["buffer","view","utf8"]);class wx{constructor($){if(!Array.isArray($))throw new TypeError("The first argument 'formats' must be an array");else if(!$.every((Q)=>qJ0.has(Q)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'");this[FD]=new Map,this[xW]=new Set($);for(let Q in BD)try{this.encoding(Q)}catch(X){if(X.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw X}}encodings(){return Array.from(new Set(this[FD].values()))}encoding($){let Q=this[FD].get($);if(Q===void 0){if(typeof $==="string"&&$!==""){if(Q=UJ0[$],!Q)throw new Lx(`Encoding '${$}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else if(typeof $!=="object"||$===null)throw new TypeError("First argument 'encoding' must be a string or object");else Q=GJ0($);let{name:X,format:Y}=Q;if(!this[xW].has(Y))if(this[xW].has("view"))Q=Q.createViewTranscoder();else if(this[xW].has("buffer"))Q=Q.createBufferTranscoder();else if(this[xW].has("utf8"))Q=Q.createUTF8Transcoder();else throw new Lx(`Encoding '${X}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let Z of[$,X,Q.name,Q.commonName])this[FD].set(Z,Q)}return Q}}VJ0.Transcoder=wx;function GJ0($){if($ instanceof XJ0)return $;let Q="type"in $&&typeof $.type==="string"?$.type:void 0,X=$.name||Q||`anonymous-${WJ0++}`;switch(zJ0($)){case"view":return new ZJ0({...$,name:X});case"utf8":return new JJ0({...$,name:X});case"buffer":return new YJ0({...$,name:X});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function zJ0($){if("format"in $&&$.format!==void 0)return $.format;else if("buffer"in $&&typeof $.buffer==="boolean")return $.buffer?"buffer":"utf8";else if("code"in $&&Number.isInteger($.code))return"view";else return"buffer"}var KJ0={binary:BD.buffer,"utf-8":BD.utf8},UJ0={...BD,...KJ0},WJ0=0});var SK={};r8(SK,{setMaxListeners:()=>gx,once:()=>fx,listenerCount:()=>yx,init:()=>C1,getMaxListeners:()=>hx,getEventListeners:()=>vx,default:()=>CJ0,captureRejectionSymbol:()=>Ex,addAbortListener:()=>mx,EventEmitter:()=>C1});function _x($,Q){var{_events:X}=$;if(Q[0]??=new Error("Unhandled error."),!X)throw Q[0];var Y=X[Sx];if(Y)for(var Z of Fx.call(Y))Z.apply($,Q);var J=X.error;if(!J)throw Q[0];for(var Z of Fx.call(J))Z.apply($,Q);return!0}function jJ0($,Q,X,Y){Q.then(void 0,function(Z){queueMicrotask(()=>PJ0($,Z,X,Y))})}function PJ0($,Q,X,Y){if(typeof $[Ix]==="function")$[Ix](Q,X,...Y);else try{$[WG]=!1,$.emit("error",Q)}finally{$[WG]=!0}}function kx($,Q,X){X.warned=!0;let Y=new Error(`Possible EventEmitter memory leak detected. ${X.length} ${String(Q)} listeners added to [${$.constructor.name}]. Use emitter.setMaxListeners() to increase limit`);Y.name="MaxListenersExceededWarning",Y.emitter=$,Y.type=Q,Y.count=X.length,console.warn(Y)}function xx($,Q,...X){this.removeListener($,Q),Q.apply(this,X)}function fx($,Q,X){var Y=X?.signal;if(bx(Y,"options.signal"),Y?.aborted)throw new ZR(void 0,{cause:Y?.reason});let{resolve:Z,reject:J,promise:q}=$newPromiseCapability(Promise),G=(j)=>{if($.removeListener(Q,z),Y!=null)SD(Y,"abort",M);J(j)},z=(...j)=>{if(typeof $.removeListener==="function")$.removeListener("error",G);if(Y!=null)SD(Y,"abort",M);Z(j)};if(Bx($,Q,z,{once:!0}),Q!=="error"&&typeof $.once==="function")$.once("error",G);function M(){SD($,Q,z),SD($,"error",G),J(new ZR(void 0,{cause:Y?.reason}))}if(Y!=null)Bx(Y,"abort",M,{once:!0});return q}function vx($,Q){return $.listeners(Q)}function gx($,...Q){qR($,"setMaxListeners",0);var X;if(Q&&(X=Q.length))for(let Y=0;Y<X;Y++)Q[Y].setMaxListeners($);else VG=$}function yx($,Q){return $.listenerCount(Q)}function SD($,Q,X,Y){if(typeof $.removeListener==="function")$.removeListener(Q,X);else $.removeEventListener(Q,X,Y)}function Bx($,Q,X,Y){if(typeof $.on==="function")if(Y.once)$.once(Q,X);else $.on(Q,X);else $.addEventListener(Q,X,Y)}function BK($,Q,X){let Y=new TypeError(`The "${$}" argument must be of type ${Q}. Received ${X}`);return Y.code="ERR_INVALID_ARG_TYPE",Y}function AJ0($,Q,X){let Y=new RangeError(`The "${$}" argument is out of range. It must be ${Q}. Received ${X}`);return Y.code="ERR_OUT_OF_RANGE",Y}function bx($,Q){if($!==void 0&&($===null||typeof $!=="object"||!("aborted"in $)))throw BK(Q,"AbortSignal",$)}function qR($,Q,X,Y){if(typeof $!=="number")throw BK(Q,"number",$);if(X!=null&&$<X||Y!=null&&$>Y||(X!=null||Y!=null)&&Number.isNaN($))throw AJ0(Q,`${X!=null?`>= ${X}`:""}${X!=null&&Y!=null?" && ":""}${Y!=null?`<= ${Y}`:""}`,$)}function fW($){if(typeof $!=="function")throw new TypeError("The listener must be a function")}function RJ0($,Q){if(typeof $!=="boolean")throw BK(Q,"boolean",$)}function hx($){return $?._maxListeners??VG}function mx($,Q){if($===void 0)throw BK("signal","AbortSignal",$);if(bx($,"signal"),typeof Q!=="function")throw BK("listener","function",Q);let X;if($.aborted)queueMicrotask(()=>Q());else $.addEventListener("abort",Q,{__proto__:null,once:!0}),X=()=>{$.removeEventListener("abort",Q)};return{__proto__:null,[Symbol.dispose](){X?.()}}}var JR,WG,Sx,MJ0,DJ0,Ix,Ex,Fx,VG=10,C1=function $(Q){if(this._events===void 0||this._events===this.__proto__._events)this._events={__proto__:null},this._eventsCount=0;if(this._maxListeners??=void 0,this[WG]=Q?.captureRejections?Boolean(Q?.captureRejections):L8[WG])this.emit=NJ0},L8,HJ0=function $(Q,...X){if(Q==="error")return _x(this,X);var{_events:Y}=this;if(Y===void 0)return!1;var Z=Y[Q];if(Z===void 0)return!1;let J=Z.length>1?Z.slice():Z;for(let q=0,{length:G}=J;q<G;q++){let z=J[q];switch(X.length){case 0:z.call(this);break;case 1:z.call(this,X[0]);break;case 2:z.call(this,X[0],X[1]);break;case 3:z.call(this,X[0],X[1],X[2]);break;default:z.apply(this,X);break}}return!0},NJ0=function $(Q,...X){if(Q==="error")return _x(this,X);var{_events:Y}=this;if(Y===void 0)return!1;var Z=Y[Q];if(Z===void 0)return!1;let J=Z.length>1?Z.slice():Z;for(let q=0,{length:G}=J;q<G;q++){let z=J[q],M;switch(X.length){case 0:M=z.call(this);break;case 1:M=z.call(this,X[0]);break;case 2:M=z.call(this,X[0],X[1]);break;case 3:M=z.call(this,X[0],X[1],X[2]);break;default:M=z.apply(this,X);break}if(M!==void 0&&typeof M?.then==="function"&&M.then===Promise.prototype.then)jJ0(this,M,Q,X)}return!0},ZR,CJ0;var EK=y(()=>{JR=Symbol.for,WG=Symbol("kCapture"),Sx=JR("events.errorMonitor"),MJ0=Symbol("events.maxEventTargetListeners"),DJ0=Symbol("events.maxEventTargetListenersWarned"),Ix=JR("nodejs.rejection"),Ex=JR("nodejs.rejection"),Fx=Array.prototype.slice,L8=C1.prototype={};L8._events=void 0;L8._eventsCount=0;L8._maxListeners=void 0;L8.setMaxListeners=function $(Q){return qR(Q,"setMaxListeners",0),this._maxListeners=Q,this};L8.constructor=C1;L8.getMaxListeners=function $(){return this?._maxListeners??VG};L8.emit=HJ0;L8.addListener=function $(Q,X){fW(X);var Y=this._events;if(!Y)Y=this._events={__proto__:null},this._eventsCount=0;else if(Y.newListener)this.emit("newListener",Q,X.listener??X);var Z=Y[Q];if(!Z)Y[Q]=[X],this._eventsCount++;else{Z.push(X);var J=this._maxListeners??VG;if(J>0&&Z.length>J&&!Z.warned)kx(this,Q,Z)}return this};L8.on=L8.addListener;L8.prependListener=function $(Q,X){fW(X);var Y=this._events;if(!Y)Y=this._events={__proto__:null},this._eventsCount=0;else if(Y.newListener)this.emit("newListener",Q,X.listener??X);var Z=Y[Q];if(!Z)Y[Q]=[X],this._eventsCount++;else{Z.unshift(X);var J=this._maxListeners??VG;if(J>0&&Z.length>J&&!Z.warned)kx(this,Q,Z)}return this};L8.once=function $(Q,X){fW(X);let Y=xx.bind(this,Q,X);return Y.listener=X,this.addListener(Q,Y),this};L8.prependOnceListener=function $(Q,X){fW(X);let Y=xx.bind(this,Q,X);return Y.listener=X,this.prependListener(Q,Y),this};L8.removeListener=function $(Q,X){fW(X);var{_events:Y}=this;if(!Y)return this;var Z=Y[Q];if(!Z)return this;var J=Z.length;let q=-1;for(let G=J-1;G>=0;G--)if(Z[G]===X||Z[G].listener===X){q=G;break}if(q<0)return this;if(q===0)Z.shift();else Z.splice(q,1);if(Z.length===0)delete Y[Q],this._eventsCount--;return this};L8.off=L8.removeListener;L8.removeAllListeners=function $(Q){var{_events:X}=this;if(Q&&X){if(X[Q])delete X[Q],this._eventsCount--}else this._events={__proto__:null};return this};L8.listeners=function $(Q){var{_events:X}=this;if(!X)return[];var Y=X[Q];if(!Y)return[];return Y.map((Z)=>Z.listener??Z)};L8.rawListeners=function $(Q){var{_events:X}=this;if(!X)return[];var Y=X[Q];if(!Y)return[];return Y.slice()};L8.listenerCount=function $(Q){var{_events:X}=this;if(!X)return 0;return X[Q]?.length??0};L8.eventNames=function $(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};L8[WG]=!1;ZR=class ZR extends Error{constructor($="The operation was aborted",Q=void 0){if(Q!==void 0&&typeof Q!=="object")throw BK("options","Object",Q);super($,Q);this.code="ABORT_ERR",this.name="AbortError"}};Object.defineProperties(C1,{captureRejections:{get(){return L8[WG]},set($){RJ0($,"EventEmitter.captureRejections"),L8[WG]=$},enumerable:!0},defaultMaxListeners:{enumerable:!0,get:()=>{return VG},set:($)=>{qR($,"defaultMaxListeners",0),VG=$}},kMaxEventTargetListeners:{value:MJ0,enumerable:!1,configurable:!1,writable:!1},kMaxEventTargetListenersWarned:{value:DJ0,enumerable:!1,configurable:!1,writable:!1}});Object.assign(C1,{once:fx,getEventListeners:vx,getMaxListeners:hx,setMaxListeners:gx,EventEmitter:C1,usingDomains:!1,captureRejectionSymbol:Ex,errorMonitor:Sx,addAbortListener:mx,init:C1,listenerCount:yx});CJ0=C1});var px=d$((KR0,cx)=>{cx.exports=typeof queueMicrotask==="function"?queueMicrotask:($)=>Promise.resolve().then($)});var vW=d$((LJ0)=>{var lx=px();LJ0.fromCallback=function($,Q){if($===void 0){var X=new Promise(function(Y,Z){$=function(J,q){if(J)Z(J);else Y(q)}});$[Q!==void 0?Q:"promise"]=X}else if(typeof $!=="function")throw new TypeError("Callback must be a function");return $};LJ0.fromPromise=function($,Q){if(Q===void 0)return $;$.then(function(X){lx(()=>Q(null,X))}).catch(function(X){lx(()=>Q(X))})}});var ED=d$((IJ0)=>{IJ0.getCallback=function($,Q){return typeof $==="function"?$:Q};IJ0.getOptions=function($,Q){if(typeof $==="object"&&$!==null)return $;if(Q!==void 0)return Q;return{}}});var F1=d$((EJ0)=>{var{fromCallback:GR}=vW(),yY=V9(),{getOptions:zR,getCallback:ux}=ED(),OG=Symbol("promise"),_K=Symbol("callback"),QJ=Symbol("working"),MG=Symbol("handleOne"),Z5=Symbol("handleMany"),KR=Symbol("autoClose"),I1=Symbol("finishWork"),XJ=Symbol("returnMany"),L1=Symbol("closing"),gW=Symbol("handleClose"),_D=Symbol("closed"),yW=Symbol("closeCallbacks"),T1=Symbol("keyEncoding"),DG=Symbol("valueEncoding"),UR=Symbol("abortOnClose"),kD=Symbol("legacy"),WR=Symbol("keys"),VR=Symbol("values"),w1=Symbol("limit"),FZ=Symbol("count"),xD=Object.freeze({}),SJ0=()=>{},dx=!1;class fD{constructor($,Q,X){if(typeof $!=="object"||$===null)throw new TypeError(`The first argument must be an abstract-level database, received ${$===null?"null":typeof $}`);if(typeof Q!=="object"||Q===null)throw new TypeError("The second argument must be an options object");this[_D]=!1,this[yW]=[],this[QJ]=!1,this[L1]=!1,this[KR]=!1,this[_K]=null,this[MG]=this[MG].bind(this),this[Z5]=this[Z5].bind(this),this[gW]=this[gW].bind(this),this[T1]=Q[T1],this[DG]=Q[DG],this[kD]=X,this[w1]=Number.isInteger(Q.limit)&&Q.limit>=0?Q.limit:1/0,this[FZ]=0,this[UR]=!!Q.abortOnClose,this.db=$,this.db.attachResource(this),this.nextTick=$.nextTick}get count(){return this[FZ]}get limit(){return this[w1]}next($){let Q;if($===void 0)Q=new Promise((X,Y)=>{$=(Z,J,q)=>{if(Z)Y(Z);else if(!this[kD])X(J);else if(J===void 0&&q===void 0)X();else X([J,q])}});else if(typeof $!=="function")throw new TypeError("Callback must be a function");if(this[L1])this.nextTick($,new yY("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}));else if(this[QJ])this.nextTick($,new yY("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"}));else if(this[QJ]=!0,this[_K]=$,this[FZ]>=this[w1])this.nextTick(this[MG],null);else this._next(this[MG]);return Q}_next($){this.nextTick($)}nextv($,Q,X){if(X=ux(Q,X),X=GR(X,OG),Q=zR(Q,xD),!Number.isInteger($))return this.nextTick(X,new TypeError("The first argument 'size' must be an integer")),X[OG];if(this[L1])this.nextTick(X,new yY("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}));else if(this[QJ])this.nextTick(X,new yY("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"}));else{if($<1)$=1;if(this[w1]<1/0)$=Math.min($,this[w1]-this[FZ]);if(this[QJ]=!0,this[_K]=X,$<=0)this.nextTick(this[Z5],null,[]);else this._nextv($,Q,this[Z5])}return X[OG]}_nextv($,Q,X){let Y=[],Z=(J,q,G)=>{if(J)return X(J);else if(this[kD]?q===void 0&&G===void 0:q===void 0)return X(null,Y);if(Y.push(this[kD]?[q,G]:q),Y.length===$)X(null,Y);else this._next(Z)};this._next(Z)}all($,Q){if(Q=ux($,Q),Q=GR(Q,OG),$=zR($,xD),this[L1])this.nextTick(Q,new yY("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}));else if(this[QJ])this.nextTick(Q,new yY("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"}));else if(this[QJ]=!0,this[_K]=Q,this[KR]=!0,this[FZ]>=this[w1])this.nextTick(this[Z5],null,[]);else this._all($,this[Z5]);return Q[OG]}_all($,Q){let X=this[FZ],Y=[],Z=()=>{let q=this[w1]<1/0?Math.min(1000,this[w1]-X):1000;if(q<=0)this.nextTick(Q,null,Y);else this._nextv(q,xD,J)},J=(q,G)=>{if(q)Q(q);else if(G.length===0)Q(null,Y);else Y.push.apply(Y,G),X+=G.length,Z()};Z()}[I1](){let $=this[_K];if(this[UR]&&$===null)return SJ0;if(this[QJ]=!1,this[_K]=null,this[L1])this._close(this[gW]);return $}[XJ]($,Q,X){if(this[KR])this.close($.bind(null,Q,X));else $(Q,X)}seek($,Q){if(Q=zR(Q,xD),this[L1]);else if(this[QJ])throw new yY("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});else{let X=this.db.keyEncoding(Q.keyEncoding||this[T1]),Y=X.format;if(Q.keyEncoding!==Y)Q={...Q,keyEncoding:Y};let Z=this.db.prefixKey(X.encode($),Y);this._seek(Z,Q)}}_seek($,Q){throw new yY("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close($){if($=GR($,OG),this[_D])this.nextTick($);else if(this[L1])this[yW].push($);else if(this[L1]=!0,this[yW].push($),!this[QJ])this._close(this[gW]);else if(this[UR])this[I1]()(new yY("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}));return $[OG]}_close($){this.nextTick($)}[gW](){this[_D]=!0,this.db.detachResource(this);let $=this[yW];this[yW]=[];for(let Q of $)Q()}async*[Symbol.asyncIterator](){try{let $;while(($=await this.next())!==void 0)yield $}finally{if(!this[_D])await this.close()}}}class bW extends fD{constructor($,Q){super($,Q,!0);this[WR]=Q.keys!==!1,this[VR]=Q.values!==!1}[MG]($,Q,X){let Y=this[I1]();if($)return Y($);try{Q=this[WR]&&Q!==void 0?this[T1].decode(Q):void 0,X=this[VR]&&X!==void 0?this[DG].decode(X):void 0}catch(Z){return Y(new jG("entry",Z))}if(!(Q===void 0&&X===void 0))this[FZ]++;Y(null,Q,X)}[Z5]($,Q){let X=this[I1]();if($)return this[XJ](X,$);try{for(let Y of Q){let Z=Y[0],J=Y[1];Y[0]=this[WR]&&Z!==void 0?this[T1].decode(Z):void 0,Y[1]=this[VR]&&J!==void 0?this[DG].decode(J):void 0}}catch(Y){return this[XJ](X,new jG("entries",Y))}this[FZ]+=Q.length,this[XJ](X,null,Q)}end($){if(!dx&&typeof console!=="undefined")dx=!0,console.warn(new yY("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}));return this.close($)}}class ix extends fD{constructor($,Q){super($,Q,!1)}[MG]($,Q){let X=this[I1]();if($)return X($);try{Q=Q!==void 0?this[T1].decode(Q):void 0}catch(Y){return X(new jG("key",Y))}if(Q!==void 0)this[FZ]++;X(null,Q)}[Z5]($,Q){let X=this[I1]();if($)return this[XJ](X,$);try{for(let Y=0;Y<Q.length;Y++){let Z=Q[Y];Q[Y]=Z!==void 0?this[T1].decode(Z):void 0}}catch(Y){return this[XJ](X,new jG("keys",Y))}this[FZ]+=Q.length,this[XJ](X,null,Q)}}class nx extends fD{constructor($,Q){super($,Q,!1)}[MG]($,Q){let X=this[I1]();if($)return X($);try{Q=Q!==void 0?this[DG].decode(Q):void 0}catch(Y){return X(new jG("value",Y))}if(Q!==void 0)this[FZ]++;X(null,Q)}[Z5]($,Q){let X=this[I1]();if($)return this[XJ](X,$);try{for(let Y=0;Y<Q.length;Y++){let Z=Q[Y];Q[Y]=Z!==void 0?this[DG].decode(Z):void 0}}catch(Y){return this[XJ](X,new jG("values",Y))}this[FZ]+=Q.length,this[XJ](X,null,Q)}}class jG extends yY{constructor($,Q){super(`Iterator could not decode ${$}`,{code:"LEVEL_DECODE_ERROR",cause:Q})}}for(let $ of["_ended property","_nexting property","_end method"])Object.defineProperty(bW.prototype,$.split(" ")[0],{get(){throw new yY(`The ${$} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new yY(`The ${$} has been removed`,{code:"LEVEL_LEGACY"})}});bW.keyEncoding=T1;bW.valueEncoding=DG;EJ0.AbstractIterator=bW;EJ0.AbstractKeyIterator=ix;EJ0.AbstractValueIterator=nx});var ox=d$((gJ0)=>{var{AbstractKeyIterator:fJ0,AbstractValueIterator:vJ0}=F1(),PG=Symbol("iterator"),hW=Symbol("callback"),kK=Symbol("handleOne"),HG=Symbol("handleMany");class vD extends fJ0{constructor($,Q){super($,Q);this[PG]=$.iterator({...Q,keys:!0,values:!1}),this[kK]=this[kK].bind(this),this[HG]=this[HG].bind(this)}}class OR extends vJ0{constructor($,Q){super($,Q);this[PG]=$.iterator({...Q,keys:!1,values:!0}),this[kK]=this[kK].bind(this),this[HG]=this[HG].bind(this)}}for(let $ of[vD,OR]){let Q=$===vD,X=Q?(Y)=>Y[0]:(Y)=>Y[1];$.prototype._next=function(Y){this[hW]=Y,this[PG].next(this[kK])},$.prototype[kK]=function(Y,Z,J){let q=this[hW];if(Y)q(Y);else q(null,Q?Z:J)},$.prototype._nextv=function(Y,Z,J){this[hW]=J,this[PG].nextv(Y,Z,this[HG])},$.prototype._all=function(Y,Z){this[hW]=Z,this[PG].all(Y,this[HG])},$.prototype[HG]=function(Y,Z){let J=this[hW];if(Y)J(Y);else J(null,Z.map(X))},$.prototype._seek=function(Y,Z){this[PG].seek(Y,Z)},$.prototype._close=function(Y){this[PG].close(Y)}}gJ0.DefaultKeyIterator=vD;gJ0.DefaultValueIterator=OR});var rx=d$((pJ0)=>{var{AbstractIterator:hJ0,AbstractKeyIterator:mJ0,AbstractValueIterator:cJ0}=F1(),MR=V9(),AY=Symbol("nut"),gD=Symbol("undefer"),yD=Symbol("factory");class DR extends hJ0{constructor($,Q){super($,Q);this[AY]=null,this[yD]=()=>$.iterator(Q),this.db.defer(()=>this[gD]())}}class jR extends mJ0{constructor($,Q){super($,Q);this[AY]=null,this[yD]=()=>$.keys(Q),this.db.defer(()=>this[gD]())}}class PR extends cJ0{constructor($,Q){super($,Q);this[AY]=null,this[yD]=()=>$.values(Q),this.db.defer(()=>this[gD]())}}for(let $ of[DR,jR,PR])$.prototype[gD]=function(){if(this.db.status==="open")this[AY]=this[yD]()},$.prototype._next=function(Q){if(this[AY]!==null)this[AY].next(Q);else if(this.db.status==="opening")this.db.defer(()=>this._next(Q));else this.nextTick(Q,new MR("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},$.prototype._nextv=function(Q,X,Y){if(this[AY]!==null)this[AY].nextv(Q,X,Y);else if(this.db.status==="opening")this.db.defer(()=>this._nextv(Q,X,Y));else this.nextTick(Y,new MR("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},$.prototype._all=function(Q,X){if(this[AY]!==null)this[AY].all(X);else if(this.db.status==="opening")this.db.defer(()=>this._all(Q,X));else this.nextTick(X,new MR("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},$.prototype._seek=function(Q,X){if(this[AY]!==null)this[AY]._seek(Q,X);else if(this.db.status==="opening")this.db.defer(()=>this._seek(Q,X))},$.prototype._close=function(Q){if(this[AY]!==null)this[AY].close(Q);else if(this.db.status==="opening")this.db.defer(()=>this._close(Q));else this.nextTick(Q)};pJ0.DeferredIterator=DR;pJ0.DeferredKeyIterator=jR;pJ0.DeferredValueIterator=PR});var HR=d$((oJ0)=>{var{fromCallback:sx}=vW(),bD=V9(),{getCallback:iJ0,getOptions:nJ0}=ED(),hD=Symbol("promise"),BZ=Symbol("status"),xK=Symbol("operations"),mW=Symbol("finishClose"),fK=Symbol("closeCallbacks");class ax{constructor($){if(typeof $!=="object"||$===null)throw new TypeError(`The first argument must be an abstract-level database, received ${$===null?"null":typeof $}`);this[xK]=[],this[fK]=[],this[BZ]="open",this[mW]=this[mW].bind(this),this.db=$,this.db.attachResource(this),this.nextTick=$.nextTick}get length(){return this[xK].length}put($,Q,X){if(this[BZ]!=="open")throw new bD("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let Y=this.db._checkKey($)||this.db._checkValue(Q);if(Y)throw Y;let Z=X&&X.sublevel!=null?X.sublevel:this.db,J=X,q=Z.keyEncoding(X&&X.keyEncoding),G=Z.valueEncoding(X&&X.valueEncoding),z=q.format;if(X={...X,keyEncoding:z,valueEncoding:G.format},Z!==this.db)X.sublevel=null;let M=Z.prefixKey(q.encode($),z),j=G.encode(Q);return this._put(M,j,X),this[xK].push({...J,type:"put",key:$,value:Q}),this}_put($,Q,X){}del($,Q){if(this[BZ]!=="open")throw new bD("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let X=this.db._checkKey($);if(X)throw X;let Y=Q&&Q.sublevel!=null?Q.sublevel:this.db,Z=Q,J=Y.keyEncoding(Q&&Q.keyEncoding),q=J.format;if(Q={...Q,keyEncoding:q},Y!==this.db)Q.sublevel=null;return this._del(Y.prefixKey(J.encode($),q),Q),this[xK].push({...Z,type:"del",key:$}),this}_del($,Q){}clear(){if(this[BZ]!=="open")throw new bD("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[xK]=[],this}_clear(){}write($,Q){if(Q=iJ0($,Q),Q=sx(Q,hD),$=nJ0($),this[BZ]!=="open")this.nextTick(Q,new bD("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}));else if(this.length===0)this.close(Q);else this[BZ]="writing",this._write($,(X)=>{if(this[BZ]="closing",this[fK].push(()=>Q(X)),!X)this.db.emit("batch",this[xK]);this._close(this[mW])});return Q[hD]}_write($,Q){}close($){if($=sx($,hD),this[BZ]==="closing")this[fK].push($);else if(this[BZ]==="closed")this.nextTick($);else if(this[fK].push($),this[BZ]!=="writing")this[BZ]="closing",this._close(this[mW]);return $[hD]}_close($){this.nextTick($)}[mW](){this[BZ]="closed",this.db.detachResource(this);let $=this[fK];this[fK]=[];for(let Q of $)Q()}}oJ0.AbstractChainedBatch=ax});var ex=d$((tJ0)=>{var{AbstractChainedBatch:sJ0}=HR(),aJ0=V9(),vK=Symbol("encoded");class tx extends sJ0{constructor($){super($);this[vK]=[]}_put($,Q,X){this[vK].push({...X,type:"put",key:$,value:Q})}_del($,Q){this[vK].push({...Q,type:"del",key:$})}_clear(){this[vK]=[]}_write($,Q){if(this.db.status==="opening")this.db.defer(()=>this._write($,Q));else if(this.db.status==="open")if(this[vK].length===0)this.nextTick(Q);else this.db._batch(this[vK],$,Q);else this.nextTick(Q,new aJ0("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}}tJ0.DefaultChainedBatch=tx});var Xf=d$((PR0,Qf)=>{var $f=V9(),$50=Object.prototype.hasOwnProperty,Q50=new Set(["lt","lte","gt","gte"]);Qf.exports=function($,Q){let X={};for(let Y in $){if(!$50.call($,Y))continue;if(Y==="keyEncoding"||Y==="valueEncoding")continue;if(Y==="start"||Y==="end")throw new $f(`The legacy range option '${Y}' has been removed`,{code:"LEVEL_LEGACY"});else if(Y==="encoding")throw new $f("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});if(Q50.has(Y))X[Y]=Q.encode($[Y]);else X[Y]=$[Y]}return X.reverse=!!X.reverse,X.limit=Number.isInteger(X.limit)&&X.limit>=0?X.limit:-1,X}});var NR=d$((HR0,Zf)=>{/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Yf;Zf.exports=typeof queueMicrotask==="function"?queueMicrotask.bind(typeof window!=="undefined"?window:global):($)=>(Yf||(Yf=Promise.resolve())).then($).catch((Q)=>setTimeout(()=>{throw Q},0))});var Gf=d$((NR0,qf)=>{var Jf=NR();qf.exports=function($,...Q){if(Q.length===0)Jf($);else Jf(()=>$(...Q))}});var zf=d$((J50)=>{var{AbstractIterator:X50,AbstractKeyIterator:Y50,AbstractValueIterator:Z50}=F1(),gK=Symbol("unfix"),O9=Symbol("iterator"),NG=Symbol("handleOne"),B1=Symbol("handleMany"),J5=Symbol("callback");class mD extends X50{constructor($,Q,X,Y){super($,Q);this[O9]=X,this[gK]=Y,this[NG]=this[NG].bind(this),this[B1]=this[B1].bind(this),this[J5]=null}[NG]($,Q,X){let Y=this[J5];if($)return Y($);if(Q!==void 0)Q=this[gK](Q);Y($,Q,X)}[B1]($,Q){let X=this[J5];if($)return X($);for(let Y of Q){let Z=Y[0];if(Z!==void 0)Y[0]=this[gK](Z)}X($,Q)}}class cD extends Y50{constructor($,Q,X,Y){super($,Q);this[O9]=X,this[gK]=Y,this[NG]=this[NG].bind(this),this[B1]=this[B1].bind(this),this[J5]=null}[NG]($,Q){let X=this[J5];if($)return X($);if(Q!==void 0)Q=this[gK](Q);X($,Q)}[B1]($,Q){let X=this[J5];if($)return X($);for(let Y=0;Y<Q.length;Y++){let Z=Q[Y];if(Z!==void 0)Q[Y]=this[gK](Z)}X($,Q)}}class pD extends Z50{constructor($,Q,X){super($,Q);this[O9]=X}}for(let $ of[mD,cD])$.prototype._next=function(Q){this[J5]=Q,this[O9].next(this[NG])},$.prototype._nextv=function(Q,X,Y){this[J5]=Y,this[O9].nextv(Q,X,this[B1])},$.prototype._all=function(Q,X){this[J5]=X,this[O9].all(Q,this[B1])};for(let $ of[pD])$.prototype._next=function(Q){this[O9].next(Q)},$.prototype._nextv=function(Q,X,Y){this[O9].nextv(Q,X,Y)},$.prototype._all=function(Q,X){this[O9].all(Q,X)};for(let $ of[mD,cD,pD])$.prototype._seek=function(Q,X){this[O9].seek(Q,X)},$.prototype._close=function(Q){this[O9].close(Q)};J50.AbstractSublevelIterator=mD;J50.AbstractSublevelKeyIterator=cD;J50.AbstractSublevelValueIterator=pD});var Of=d$((RR0,Vf)=>{var AR=V9(),{Buffer:LR}=(h8(),I$(b8))||{},{AbstractSublevelIterator:K50,AbstractSublevelKeyIterator:U50,AbstractSublevelValueIterator:W50}=zf(),q5=Symbol("prefix"),Kf=Symbol("upperBound"),cW=Symbol("prefixRange"),bY=Symbol("parent"),RR=Symbol("unfix"),Uf=new TextEncoder,V50={separator:"!"};Vf.exports=function({AbstractLevel:$}){class Q extends ${static defaults(X){if(typeof X==="string")throw new AR("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});else if(X&&X.open)throw new AR("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});if(X==null)return V50;else if(!X.separator)return{...X,separator:"!"};else return X}constructor(X,Y,Z){let{separator:J,manifest:q,...G}=Q.defaults(Z);Y=M50(Y,J);let z=J.charCodeAt(0)+1,M=X[bY]||X;if(!Uf.encode(Y).every((D)=>D>z&&D<127))throw new AR(`Prefix must use bytes > ${z} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(O50(M,q),G);let j=(X.prefix||"")+J+Y+J,P=j.slice(0,-1)+String.fromCharCode(z);this[bY]=M,this[q5]=new wR(j),this[Kf]=new wR(P),this[RR]=new Wf,this.nextTick=M.nextTick}prefixKey(X,Y){if(Y==="utf8")return this[q5].utf8+X;else if(X.byteLength===0)return this[q5][Y];else if(Y==="view"){let Z=this[q5].view,J=new Uint8Array(Z.byteLength+X.byteLength);return J.set(Z,0),J.set(X,Z.byteLength),J}else{let Z=this[q5].buffer;return LR.concat([Z,X],Z.byteLength+X.byteLength)}}[cW](X,Y){if(X.gte!==void 0)X.gte=this.prefixKey(X.gte,Y);else if(X.gt!==void 0)X.gt=this.prefixKey(X.gt,Y);else X.gte=this[q5][Y];if(X.lte!==void 0)X.lte=this.prefixKey(X.lte,Y);else if(X.lt!==void 0)X.lt=this.prefixKey(X.lt,Y);else X.lte=this[Kf][Y]}get prefix(){return this[q5].utf8}get db(){return this[bY]}_open(X,Y){this[bY].open({passive:!0},Y)}_put(X,Y,Z,J){this[bY].put(X,Y,Z,J)}_get(X,Y,Z){this[bY].get(X,Y,Z)}_getMany(X,Y,Z){this[bY].getMany(X,Y,Z)}_del(X,Y,Z){this[bY].del(X,Y,Z)}_batch(X,Y,Z){this[bY].batch(X,Y,Z)}_clear(X,Y){this[cW](X,X.keyEncoding),this[bY].clear(X,Y)}_iterator(X){this[cW](X,X.keyEncoding);let Y=this[bY].iterator(X),Z=this[RR].get(this[q5].utf8.length,X.keyEncoding);return new K50(this,X,Y,Z)}_keys(X){this[cW](X,X.keyEncoding);let Y=this[bY].keys(X),Z=this[RR].get(this[q5].utf8.length,X.keyEncoding);return new U50(this,X,Y,Z)}_values(X){this[cW](X,X.keyEncoding);let Y=this[bY].values(X);return new W50(this,X,Y)}}return{AbstractSublevel:Q}};var O50=function($,Q){return{...$.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...Q,encodings:{utf8:CR($,"utf8"),buffer:CR($,"buffer"),view:CR($,"view")}}},CR=function($,Q){return $.supports.encodings[Q]?$.keyEncoding(Q).name===Q:!1};class wR{constructor($){this.utf8=$,this.view=Uf.encode($),this.buffer=LR?LR.from(this.view.buffer,0,this.view.byteLength):{}}}class Wf{constructor(){this.cache=new Map}get($,Q){let X=this.cache.get(Q);if(X===void 0){if(Q==="view")X=function(Y,Z){return Z.subarray(Y)}.bind(null,$);else X=function(Y,Z){return Z.slice(Y)}.bind(null,$);this.cache.set(Q,X)}return X}}var M50=function($,Q){let X=0,Y=$.length;while(X<Y&&$[X]===Q)X++;while(Y>X&&$[Y-1]===Q)Y--;return $.slice(X,Y)}});var BR=d$((T50)=>{var{supports:D50}=nk(),{Transcoder:j50}=Tx(),{EventEmitter:P50}=(EK(),I$(SK)),{fromCallback:S1}=vW(),M9=V9(),{AbstractIterator:AG}=F1(),{DefaultKeyIterator:H50,DefaultValueIterator:N50}=ox(),{DeferredIterator:A50,DeferredKeyIterator:R50,DeferredValueIterator:C50}=rx(),{DefaultChainedBatch:Mf}=ex(),{getCallback:RG,getOptions:E1}=ED(),lD=Xf(),S$=Symbol("promise"),G5=Symbol("landed"),CG=Symbol("resources"),TR=Symbol("closeResources"),pW=Symbol("operations"),lW=Symbol("undefer"),uD=Symbol("deferOpen"),Df=Symbol("options"),f$=Symbol("status"),LG=Symbol("defaultOptions"),yK=Symbol("transcoder"),dD=Symbol("keyEncoding"),IR=Symbol("valueEncoding"),L50=()=>{};class iD extends P50{constructor($,Q){super();if(typeof $!=="object"||$===null)throw new TypeError("The first argument 'manifest' must be an object");Q=E1(Q);let{keyEncoding:X,valueEncoding:Y,passive:Z,...J}=Q;this[CG]=new Set,this[pW]=[],this[uD]=!0,this[Df]=J,this[f$]="opening",this.supports=D50($,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:$.snapshots!==!1,permanence:$.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:$.encodings||{},events:Object.assign({},$.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[yK]=new j50(w50(this)),this[dD]=this[yK].encoding(X||"utf8"),this[IR]=this[yK].encoding(Y||"utf8");for(let q of this[yK].encodings())if(!this.supports.encodings[q.commonName])this.supports.encodings[q.commonName]=!0;this[LG]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[dD].commonName,valueEncoding:this[IR].commonName}),key:Object.freeze({keyEncoding:this[dD].commonName})},this.nextTick(()=>{if(this[uD])this.open({passive:!1},L50)})}get status(){return this[f$]}keyEncoding($){return this[yK].encoding($!=null?$:this[dD])}valueEncoding($){return this[yK].encoding($!=null?$:this[IR])}open($,Q){Q=RG($,Q),Q=S1(Q,S$),$={...this[Df],...E1($)},$.createIfMissing=$.createIfMissing!==!1,$.errorIfExists=!!$.errorIfExists;let X=(Y)=>{if(this[f$]==="closing"||this[f$]==="opening")this.once(G5,Y?()=>X(Y):X);else if(this[f$]!=="open")Q(new M9("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:Y}));else Q()};if($.passive)if(this[f$]==="opening")this.once(G5,X);else this.nextTick(X);else if(this[f$]==="closed"||this[uD])this[uD]=!1,this[f$]="opening",this.emit("opening"),this._open($,(Y)=>{if(Y){this[f$]="closed",this[TR](()=>{this.emit(G5),X(Y)}),this[lW]();return}if(this[f$]="open",this[lW](),this.emit(G5),this[f$]==="open")this.emit("open");if(this[f$]==="open")this.emit("ready");X()});else if(this[f$]==="open")this.nextTick(X);else this.once(G5,()=>this.open($,Q));return Q[S$]}_open($,Q){this.nextTick(Q)}close($){$=S1($,S$);let Q=(X)=>{if(this[f$]==="opening"||this[f$]==="closing")this.once(G5,X?Q(X):Q);else if(this[f$]!=="closed")$(new M9("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:X}));else $()};if(this[f$]==="open"){this[f$]="closing",this.emit("closing");let X=(Y)=>{this[f$]="open",this[lW](),this.emit(G5),Q(Y)};this[TR](()=>{this._close((Y)=>{if(Y)return X(Y);if(this[f$]="closed",this[lW](),this.emit(G5),this[f$]==="closed")this.emit("closed");Q()})})}else if(this[f$]==="closed")this.nextTick(Q);else this.once(G5,()=>this.close($));return $[S$]}[TR]($){if(this[CG].size===0)return this.nextTick($);let Q=this[CG].size,X=!0,Y=()=>{if(--Q===0)if(X)this.nextTick($);else $()};for(let Z of this[CG])Z.close(Y);X=!1,this[CG].clear()}_close($){this.nextTick($)}get($,Q,X){if(X=RG(Q,X),X=S1(X,S$),Q=E1(Q,this[LG].entry),this[f$]==="opening")return this.defer(()=>this.get($,Q,X)),X[S$];if(bK(this,X))return X[S$];let Y=this._checkKey($);if(Y)return this.nextTick(X,Y),X[S$];let Z=this.keyEncoding(Q.keyEncoding),J=this.valueEncoding(Q.valueEncoding),q=Z.format,G=J.format;if(Q.keyEncoding!==q||Q.valueEncoding!==G)Q=Object.assign({},Q,{keyEncoding:q,valueEncoding:G});return this._get(this.prefixKey(Z.encode($),q),Q,(z,M)=>{if(z){if(z.code==="LEVEL_NOT_FOUND"||z.notFound||/NotFound/i.test(z)){if(!z.code)z.code="LEVEL_NOT_FOUND";if(!z.notFound)z.notFound=!0;if(!z.status)z.status=404}return X(z)}try{M=J.decode(M)}catch(j){return X(new M9("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:j}))}X(null,M)}),X[S$]}_get($,Q,X){this.nextTick(X,new Error("NotFound"))}getMany($,Q,X){if(X=RG(Q,X),X=S1(X,S$),Q=E1(Q,this[LG].entry),this[f$]==="opening")return this.defer(()=>this.getMany($,Q,X)),X[S$];if(bK(this,X))return X[S$];if(!Array.isArray($))return this.nextTick(X,new TypeError("The first argument 'keys' must be an array")),X[S$];if($.length===0)return this.nextTick(X,null,[]),X[S$];let Y=this.keyEncoding(Q.keyEncoding),Z=this.valueEncoding(Q.valueEncoding),J=Y.format,q=Z.format;if(Q.keyEncoding!==J||Q.valueEncoding!==q)Q=Object.assign({},Q,{keyEncoding:J,valueEncoding:q});let G=new Array($.length);for(let z=0;z<$.length;z++){let M=$[z],j=this._checkKey(M);if(j)return this.nextTick(X,j),X[S$];G[z]=this.prefixKey(Y.encode(M),J)}return this._getMany(G,Q,(z,M)=>{if(z)return X(z);try{for(let j=0;j<M.length;j++)if(M[j]!==void 0)M[j]=Z.decode(M[j])}catch(j){return X(new M9(`Could not decode one or more of ${M.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:j}))}X(null,M)}),X[S$]}_getMany($,Q,X){this.nextTick(X,null,new Array($.length).fill(void 0))}put($,Q,X,Y){if(Y=RG(X,Y),Y=S1(Y,S$),X=E1(X,this[LG].entry),this[f$]==="opening")return this.defer(()=>this.put($,Q,X,Y)),Y[S$];if(bK(this,Y))return Y[S$];let Z=this._checkKey($)||this._checkValue(Q);if(Z)return this.nextTick(Y,Z),Y[S$];let J=this.keyEncoding(X.keyEncoding),q=this.valueEncoding(X.valueEncoding),G=J.format,z=q.format;if(X.keyEncoding!==G||X.valueEncoding!==z)X=Object.assign({},X,{keyEncoding:G,valueEncoding:z});let M=this.prefixKey(J.encode($),G),j=q.encode(Q);return this._put(M,j,X,(P)=>{if(P)return Y(P);this.emit("put",$,Q),Y()}),Y[S$]}_put($,Q,X,Y){this.nextTick(Y)}del($,Q,X){if(X=RG(Q,X),X=S1(X,S$),Q=E1(Q,this[LG].key),this[f$]==="opening")return this.defer(()=>this.del($,Q,X)),X[S$];if(bK(this,X))return X[S$];let Y=this._checkKey($);if(Y)return this.nextTick(X,Y),X[S$];let Z=this.keyEncoding(Q.keyEncoding),J=Z.format;if(Q.keyEncoding!==J)Q=Object.assign({},Q,{keyEncoding:J});return this._del(this.prefixKey(Z.encode($),J),Q,(q)=>{if(q)return X(q);this.emit("del",$),X()}),X[S$]}_del($,Q,X){this.nextTick(X)}batch($,Q,X){if(!arguments.length){if(this[f$]==="opening")return new Mf(this);if(this[f$]!=="open")throw new M9("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof $==="function")X=$;else X=RG(Q,X);if(X=S1(X,S$),Q=E1(Q,this[LG].empty),this[f$]==="opening")return this.defer(()=>this.batch($,Q,X)),X[S$];if(bK(this,X))return X[S$];if(!Array.isArray($))return this.nextTick(X,new TypeError("The first argument 'operations' must be an array")),X[S$];if($.length===0)return this.nextTick(X),X[S$];let Y=new Array($.length),{keyEncoding:Z,valueEncoding:J,...q}=Q;for(let G=0;G<$.length;G++){if(typeof $[G]!=="object"||$[G]===null)return this.nextTick(X,new TypeError("A batch operation must be an object")),X[S$];let z=Object.assign({},$[G]);if(z.type!=="put"&&z.type!=="del")return this.nextTick(X,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),X[S$];let M=this._checkKey(z.key);if(M)return this.nextTick(X,M),X[S$];let j=z.sublevel!=null?z.sublevel:this,P=j.keyEncoding(z.keyEncoding||Z),D=P.format;if(z.key=j.prefixKey(P.encode(z.key),D),z.keyEncoding=D,z.type==="put"){let A=this._checkValue(z.value);if(A)return this.nextTick(X,A),X[S$];let I=j.valueEncoding(z.valueEncoding||J);z.value=I.encode(z.value),z.valueEncoding=I.format}if(j!==this)z.sublevel=null;Y[G]=z}return this._batch(Y,q,(G)=>{if(G)return X(G);this.emit("batch",$),X()}),X[S$]}_batch($,Q,X){this.nextTick(X)}sublevel($,Q){return this._sublevel($,FR.defaults(Q))}_sublevel($,Q){return new FR(this,$,Q)}prefixKey($,Q){return $}clear($,Q){if(Q=RG($,Q),Q=S1(Q,S$),$=E1($,this[LG].empty),this[f$]==="opening")return this.defer(()=>this.clear($,Q)),Q[S$];if(bK(this,Q))return Q[S$];let X=$,Y=this.keyEncoding($.keyEncoding);if($=lD($,Y),$.keyEncoding=Y.format,$.limit===0)this.nextTick(Q);else this._clear($,(Z)=>{if(Z)return Q(Z);this.emit("clear",X),Q()});return Q[S$]}_clear($,Q){this.nextTick(Q)}iterator($){let Q=this.keyEncoding($&&$.keyEncoding),X=this.valueEncoding($&&$.valueEncoding);if($=lD($,Q),$.keys=$.keys!==!1,$.values=$.values!==!1,$[AG.keyEncoding]=Q,$[AG.valueEncoding]=X,$.keyEncoding=Q.format,$.valueEncoding=X.format,this[f$]==="opening")return new A50(this,$);else if(this[f$]!=="open")throw new M9("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator($)}_iterator($){return new AG(this,$)}keys($){let Q=this.keyEncoding($&&$.keyEncoding),X=this.valueEncoding($&&$.valueEncoding);if($=lD($,Q),$[AG.keyEncoding]=Q,$[AG.valueEncoding]=X,$.keyEncoding=Q.format,$.valueEncoding=X.format,this[f$]==="opening")return new R50(this,$);else if(this[f$]!=="open")throw new M9("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys($)}_keys($){return new H50(this,$)}values($){let Q=this.keyEncoding($&&$.keyEncoding),X=this.valueEncoding($&&$.valueEncoding);if($=lD($,Q),$[AG.keyEncoding]=Q,$[AG.valueEncoding]=X,$.keyEncoding=Q.format,$.valueEncoding=X.format,this[f$]==="opening")return new C50(this,$);else if(this[f$]!=="open")throw new M9("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values($)}_values($){return new N50(this,$)}defer($){if(typeof $!=="function")throw new TypeError("The first argument must be a function");this[pW].push($)}[lW](){if(this[pW].length===0)return;let $=this[pW];this[pW]=[];for(let Q of $)Q()}attachResource($){if(typeof $!=="object"||$===null||typeof $.close!=="function")throw new TypeError("The first argument must be a resource object");this[CG].add($)}detachResource($){this[CG].delete($)}_chainedBatch(){return new Mf(this)}_checkKey($){if($===null||$===void 0)return new M9("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue($){if($===null||$===void 0)return new M9("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}}iD.prototype.nextTick=Gf();var{AbstractSublevel:FR}=Of()({AbstractLevel:iD});T50.AbstractLevel=iD;T50.AbstractSublevel=FR;var bK=function($,Q){if($[f$]!=="open")return $.nextTick(Q,new M9("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0;return!1},w50=function($){return Object.keys($.supports.encodings).filter((Q)=>!!$.supports.encodings[Q])}});var SR=d$((B50)=>{B50.AbstractLevel=BR().AbstractLevel;B50.AbstractSublevel=BR().AbstractSublevel;B50.AbstractIterator=F1().AbstractIterator;B50.AbstractKeyIterator=F1().AbstractKeyIterator;B50.AbstractValueIterator=F1().AbstractValueIterator;B50.AbstractChainedBatch=HR().AbstractChainedBatch});var Pf=d$((wR0,jf)=>{/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */jf.exports=g50;var v50=NR();function g50($,Q,X){if(typeof Q!=="number")throw new Error("second argument must be a Number");let Y,Z,J,q,G,z=!0,M;if(Array.isArray($))Y=[],J=Z=$.length;else q=Object.keys($),Y={},J=Z=q.length;function j(D){function A(){if(X)X(D,Y);X=null}if(z)v50(A);else A()}function P(D,A,I){if(Y[D]=I,A)G=!0;if(--J===0||A)j(A);else if(!G&&M<Z){let H;if(q)H=q[M],M+=1,$[H](function(C,B){P(H,C,B)});else H=M,M+=1,$[H](function(C,B){P(H,C,B)})}}if(M=Q,!J)j(null);else if(q)q.some(function(D,A){if($[D](function(I,H){P(D,I,H)}),A===Q-1)return!0;return!1});else $.some(function(D,A){if(D(function(I,H){P(A,I,H)}),A===Q-1)return!0;return!1});z=!1}});var ER=d$((TR0,Hf)=>{Hf.exports=function $(Q){let X=Q.gte!==void 0?Q.gte:Q.gt!==void 0?Q.gt:void 0,Y=Q.lte!==void 0?Q.lte:Q.lt!==void 0?Q.lt:void 0,Z=Q.gte===void 0,J=Q.lte===void 0;if(X!==void 0&&Y!==void 0)return IDBKeyRange.bound(X,Y,Z,J);else if(X!==void 0)return IDBKeyRange.lowerBound(X,Z);else if(Y!==void 0)return IDBKeyRange.upperBound(Y,J);else return null}});var _R=d$((IR0,Nf)=>{var y50=new TextEncoder;Nf.exports=function($){if($ instanceof Uint8Array)return $;else if($ instanceof ArrayBuffer)return new Uint8Array($);else return y50.encode($)}});var wf=d$((h50)=>{var{AbstractIterator:b50}=SR(),Af=ER(),nD=_R(),YJ=Symbol("cache"),z5=Symbol("finished"),hY=Symbol("options"),K5=Symbol("currentOptions"),wG=Symbol("position"),kR=Symbol("location"),hK=Symbol("first"),Rf={};class Lf extends b50{constructor($,Q,X){super($,X);this[YJ]=[],this[z5]=this.limit===0,this[hY]=X,this[K5]={...X},this[wG]=void 0,this[kR]=Q,this[hK]=!0}_nextv($,Q,X){if(this[hK]=!1,this[z5])return this.nextTick(X,null,[]);else if(this[YJ].length>0)return $=Math.min($,this[YJ].length),this.nextTick(X,null,this[YJ].splice(0,$));if(this[wG]!==void 0)if(this[hY].reverse)this[K5].lt=this[wG],this[K5].lte=void 0;else this[K5].gt=this[wG],this[K5].gte=void 0;let Y;try{Y=Af(this[K5])}catch(G){return this[z5]=!0,this.nextTick(X,null,[])}let Z=this.db.db.transaction([this[kR]],"readonly"),J=Z.objectStore(this[kR]),q=[];if(!this[hY].reverse){let G,z,M=()=>{if(G===void 0||z===void 0)return;let j=Math.max(G.length,z.length);if(j===0||$===1/0)this[z5]=!0;else this[wG]=G[j-1];q.length=j;for(let P=0;P<j;P++){let D=G[P],A=z[P];q[P]=[this[hY].keys&&D!==void 0?nD(D):void 0,this[hY].values&&A!==void 0?nD(A):void 0]}Cf(Z)};if(this[hY].keys||$<1/0)J.getAllKeys(Y,$<1/0?$:void 0).onsuccess=(j)=>{G=j.target.result,M()};else G=[],this.nextTick(M);if(this[hY].values)J.getAll(Y,$<1/0?$:void 0).onsuccess=(j)=>{z=j.target.result,M()};else z=[],this.nextTick(M)}else{let G=!this[hY].values&&J.openKeyCursor?"openKeyCursor":"openCursor";J[G](Y,"prev").onsuccess=(z)=>{let M=z.target.result;if(M){let{key:j,value:P}=M;if(this[wG]=j,q.push([this[hY].keys&&j!==void 0?nD(j):void 0,this[hY].values&&P!==void 0?nD(P):void 0]),q.length<$)M.continue();else Cf(Z)}else this[z5]=!0}}Z.onabort=()=>{X(Z.error||new Error("aborted by user")),X=null},Z.oncomplete=()=>{X(null,q),X=null}}_next($){if(this[YJ].length>0){let[Q,X]=this[YJ].shift();this.nextTick($,null,Q,X)}else if(this[z5])this.nextTick($);else{let Q=Math.min(100,this.limit-this.count);if(this[hK])this[hK]=!1,Q=1;this._nextv(Q,Rf,(X,Y)=>{if(X)return $(X);this[YJ]=Y,this._next($)})}}_all($,Q){this[hK]=!1;let X=this[YJ].splice(0,this[YJ].length),Y=this.limit-this.count-X.length;if(Y<=0)return this.nextTick(Q,null,X);this._nextv(Y,Rf,(Z,J)=>{if(Z)return Q(Z);if(X.length>0)J=X.concat(J);Q(null,J)})}_seek($,Q){this[hK]=!0,this[YJ]=[],this[z5]=!1,this[wG]=void 0,this[K5]={...this[hY]};let X;try{X=Af(this[hY])}catch(Y){this[z5]=!0;return}if(X!==null&&!X.includes($))this[z5]=!0;else if(this[hY].reverse)this[K5].lte=$;else this[K5].gte=$}}h50.Iterator=Lf;function Cf($){if(typeof $.commit==="function")$.commit()}});var If=d$((BR0,Tf)=>{Tf.exports=function $(Q,X,Y,Z,J){if(Z.limit===0)return Q.nextTick(J);let q=Q.db.transaction([X],"readwrite"),G=q.objectStore(X),z=0;q.oncomplete=function(){J()},q.onabort=function(){J(q.error||new Error("aborted by user"))};let M=G.openKeyCursor?"openKeyCursor":"openCursor",j=Z.reverse?"prev":"next";G[M](Y,j).onsuccess=function(P){let D=P.target.result;if(D)G.delete(D.key).onsuccess=function(){if(Z.limit<=0||++z<Z.limit)D.continue()}}}});var Ef=d$((n50)=>{var{AbstractLevel:c50}=SR(),Ff=V9(),p50=Pf(),{fromCallback:l50}=vW(),{Iterator:u50}=wf(),Bf=_R(),d50=If(),i50=ER(),uW=Symbol("idb"),xR=Symbol("namePrefix"),U5=Symbol("location"),fR=Symbol("version"),TG=Symbol("store"),dW=Symbol("onComplete"),Sf=Symbol("promise");class vR extends c50{constructor($,Q,X){if(typeof Q==="function"||typeof X==="function")throw new Ff("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:Y,version:Z,...J}=Q||{};super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},J);if(typeof $!=="string")throw new Error("constructor requires a location string argument");this[U5]=$,this[xR]=Y==null?"level-js-":Y,this[fR]=parseInt(Z||1,10),this[uW]=null}get location(){return this[U5]}get namePrefix(){return this[xR]}get version(){return this[fR]}get db(){return this[uW]}get type(){return"browser-level"}_open($,Q){let X=indexedDB.open(this[xR]+this[U5],this[fR]);X.onerror=function(){Q(X.error||new Error("unknown error"))},X.onsuccess=()=>{this[uW]=X.result,Q()},X.onupgradeneeded=(Y)=>{let Z=Y.target.result;if(!Z.objectStoreNames.contains(this[U5]))Z.createObjectStore(this[U5])}}[TG]($){return this[uW].transaction([this[U5]],$).objectStore(this[U5])}[dW]($,Q){let X=$.transaction;X.onabort=function(){Q(X.error||new Error("aborted by user"))},X.oncomplete=function(){Q(null,$.result)}}_get($,Q,X){let Y=this[TG]("readonly"),Z;try{Z=Y.get($)}catch(J){return this.nextTick(X,J)}this[dW](Z,function(J,q){if(J)return X(J);if(q===void 0)return X(new Ff("Entry not found",{code:"LEVEL_NOT_FOUND"}));X(null,Bf(q))})}_getMany($,Q,X){let Y=this[TG]("readonly"),Z=$.map((J)=>(q)=>{let G;try{G=Y.get(J)}catch(z){return q(z)}G.onsuccess=()=>{let z=G.result;q(null,z===void 0?z:Bf(z))},G.onerror=(z)=>{z.stopPropagation(),q(G.error)}});p50(Z,16,X)}_del($,Q,X){let Y=this[TG]("readwrite"),Z;try{Z=Y.delete($)}catch(J){return this.nextTick(X,J)}this[dW](Z,X)}_put($,Q,X,Y){let Z=this[TG]("readwrite"),J;try{J=Z.put(Q,$)}catch(q){return this.nextTick(Y,q)}this[dW](J,Y)}_iterator($){return new u50(this,this[U5],$)}_batch($,Q,X){let Y=this[TG]("readwrite"),Z=Y.transaction,J=0,q;Z.onabort=function(){X(q||Z.error||new Error("aborted by user"))},Z.oncomplete=function(){X()};function G(){let z=$[J++],M=z.key,j;try{j=z.type==="del"?Y.delete(M):Y.put(z.value,M)}catch(P){q=P,Z.abort();return}if(J<$.length)j.onsuccess=G;else if(typeof Z.commit==="function")Z.commit()}G()}_clear($,Q){let X,Y;try{X=i50($)}catch(Z){return this.nextTick(Q)}if($.limit>=0)return d50(this,this[U5],X,$,Q);try{let Z=this[TG]("readwrite");Y=X?Z.delete(X):Z.clear()}catch(Z){return this.nextTick(Q,Z)}this[dW](Y,Q)}_close($){this[uW].close(),this.nextTick($)}}vR.destroy=function($,Q,X){if(typeof Q==="function")X=Q,Q="level-js-";X=l50(X,Sf);let Y=indexedDB.deleteDatabase(Q+$);return Y.onsuccess=function(){X()},Y.onerror=function(Z){X(Z)},X[Sf]};n50.BrowserLevel=vR});var gR;var _f=y(()=>{gR=Ef().BrowserLevel});function oD($){if(!$||$==="0x"||$==="0x0")return"0";let Q=$.startsWith("0x")?$.slice(2):$;try{let X=BigInt("0x"+Q),Y=BigInt(281474976710656);if(X>=0n&&X<Y)return X.toString()}catch{}return Q.slice(0,4).toUpperCase()}function AQ($){let Q=oD($),X=parseInt(Q,10);if(!isNaN(X)&&Q===X.toString())return`#${Q}`;return Q}function kf($){return oD($)}var r50=($,Q)=>{if($==="clonedForValidation")return;if(Q instanceof Map)return{_dataType:"Map",value:Array.from(Q.entries())};if(typeof Q==="bigint")return{_dataType:"BigInt",value:Q.toString()};return Q},s50=($,Q)=>{if(typeof Q==="object"&&Q!==null){if(Q._dataType==="Map")return new Map(Q.value);if(Q._dataType==="BigInt")return BigInt(Q.value)}return Q},IG=($)=>{if($&&$.replicas){for(let[Q,X]of $.replicas.entries())if(X&&X.state&&typeof X.state.jBlock!=="number")console.error(`\uD83D\uDCA5 CRITICAL: Invalid jBlock for ${Q.slice(0,20)}... - auto-fixing to 0`),X.state.jBlock=0}return Buffer.from(JSON.stringify($,r50))},FG=($)=>{{let Q=JSON.parse($.toString(),s50);if(Q&&Q.replicas){for(let[X,Y]of Q.replicas.entries())if(Y&&Y.state){if(typeof Y.state.jBlock!=="number"){let J=Number(Q.height)||0;console.warn(` jBlock missing for replica ${X}, using height ${J} as fallback`),Y.state.jBlock=J}}}return Q}};var rD=()=>{};function nW($,Q,X){return parseInt($.substr(Q,X),16)}function vf($){return $|=0,$<0?"00":$<16?"0"+$.toString(16):$<256?$.toString(16):"ff"}function yR($,Q,X){return X=X<0?X+6:X>6?X-6:X,vf(255*(X<1?$+(Q-$)*X:X<3?Q:X<4?$+(Q-$)*(4-X):$))}function a50($){if(/^#[0-9a-f]{3,8}$/i.test($)){let Q,X=$.length;if(X<6){let Y=$[1],Z=$[2],J=$[3],q=$[4]||"";Q="#"+Y+Y+Z+Z+J+J+q+q}if(X==7||X>8)Q=$;return Q}}function t50($,Q,X){let Y;if(Q==0){let Z=vf(X*255);Y=Z+Z+Z}else{let Z=X<=0.5?X*(Q+1):X+Q-X*Q,J=X*2-Z;Y=yR(J,Z,$*6+2)+yR(J,Z,$*6)+yR(J,Z,$*6-2)}return"#"+Y}function iW($,Q,X){let Y=[0.55,0.5,0.5,0.46,0.6,0.55,0.55],Z=Y[$*6+0.5|0];return X=X<0.5?X*Z*2:Z+(X-0.5)*(1-Z)*2,t50($,Q,X)}function Qq0($,Q){let X=typeof $=="object"&&$||$q0[xf.n]||e50[xf.V]||{},Y=X.lightness||{},Z=X.saturation||{},J="color"in Z?Z.color:Z,q=Z.grayscale,G=X.backColor,z=X.padding;function M(P,D){let A=Y[P];if(!(A&&A.length>1))A=D;return function(I){return I=A[0]+I*(A[1]-A[0]),I<0?0:I>1?1:I}}function j(P){let D=X.hues,A;if(D&&D.length>0)A=D[0|0.999*P*D.length];return typeof A=="number"?(A/360%1+1)%1:P}return{W:j,o:typeof J=="number"?J:0.5,D:typeof q=="number"?q:0,p:M("color",[0.4,0.8]),F:M("grayscale",[0.3,0.9]),G:a50(G),X:typeof $=="number"?$:typeof z=="number"?z:Q}}class oW{constructor($,Q){this.x=$,this.y=Q}}class bR{constructor($,Q,X,Y){this.q=$,this.t=Q,this.H=X,this.Y=Y}I($,Q,X,Y){let Z=this.q+this.H,J=this.t+this.H,q=this.Y;return q===1?new oW(Z-Q-(Y||0),this.t+$):q===2?new oW(Z-$-(X||0),J-Q-(Y||0)):q===3?new oW(this.q+Q,J-$-(X||0)):new oW(this.q+$,this.t+Q)}}class gf{constructor($){this.J=$,this.u=Xq0}g($,Q){let X=Q?-2:2,Y=[];for(let Z=Q?$.length-2:0;Z<$.length&&Z>=0;Z+=X)Y.push(this.u.I($[Z],$[Z+1]));this.J.g(Y)}h($,Q,X,Y){let Z=this.u.I($,Q,X,X);this.J.h(Z,X,Y)}i($,Q,X,Y,Z){this.g([$,Q,$+X,Q,$+X,Q+Y,$,Q+Y],Z)}j($,Q,X,Y,Z,J){let q=[$+X,Q,$+X,Q+Y,$,Q+Y,$,Q];q.splice((Z||0)%4*2,2),this.g(q,J)}K($,Q,X,Y,Z){this.g([$+X/2,Q,$+X,Q+Y/2,$+X/2,Q+Y,$,Q+Y/2],Z)}}function Yq0($,Q,X,Y){$=$%14;let Z,J,q,G,z,M;!$?(Z=X*0.42,Q.g([0,0,X,0,X,X-Z*2,X-Z,X,0,X])):$==1?(q=0|X*0.5,G=0|X*0.8,Q.j(X-q,0,q,G,2)):$==2?(q=0|X/3,Q.i(q,q,X-q,X-q)):$==3?(z=X*0.1,M=X<6?1:X<8?2:0|X*0.25,z=z>1?0|z:z>0.5?1:z,Q.i(M,M,X-z-M,X-z-M)):$==4?(J=0|X*0.15,q=0|X*0.5,Q.h(X-q-J,X-q-J,q)):$==5?(z=X*0.1,M=z*4,M>3&&(M=0|M),Q.i(0,0,X,X),Q.g([M,M,X-z,M,M+(X-M-z)/2,X-z],!0)):$==6?Q.g([0,0,X,0,X,X*0.7,X*0.4,X*0.4,X*0.7,X,0,X]):$==7?Q.j(X/2,X/2,X/2,X/2,3):$==8?(Q.i(0,0,X,X/2),Q.i(0,X/2,X/2,X/2),Q.j(X/2,X/2,X/2,X/2,1)):$==9?(z=X*0.14,M=X<4?1:X<6?2:0|X*0.35,z=X<8?z:0|z,Q.i(0,0,X,X),Q.i(M,M,X-M-z,X-M-z,!0)):$==10?(z=X*0.12,M=z*3,Q.i(0,0,X,X),Q.h(M,M,X-z-M,!0)):$==11?Q.j(X/2,X/2,X/2,X/2,3):$==12?(J=X*0.25,Q.i(0,0,X,X),Q.K(J,J,X-J,X-J,!0)):!Y&&(J=X*0.4,q=X*1.2,Q.h(J,J,q))}function ff($,Q,X){$=$%4;let Y;!$?Q.j(0,0,X,X,0):$==1?Q.j(0,X/2,X,X/2,0):$==2?Q.K(0,0,X,X):(Y=X/6,Q.h(Y,Y,X-2*Y))}function Zq0($,Q){return $=Q.W($),[iW($,Q.D,Q.F(0)),iW($,Q.o,Q.p(0.5)),iW($,Q.D,Q.F(1)),iW($,Q.o,Q.p(1)),iW($,Q.o,Q.p(0))]}function Jq0($,Q,X){let Y=Qq0(X,0.08);if(Y.G)$.m(Y.G);let Z=$.k,J=0.5+Z*Y.X|0;Z-=J*2;let q=new gf($),G=0|Z/4,z=0|J+Z/2-G*2,M=0|J+Z/2-G*2;function j(C,B,S,_,k){let f=nW(Q,S,1),g=_?nW(Q,_,1):0;$.L(D[A[C]]);for(let b=0;b<k.length;b++)q.u=new bR(z+k[b][0]*G,M+k[b][1]*G,G,g++%4),B(f,q,G,b);$.M()}let P=nW(Q,-7)/268435455,D=Zq0(P,Y),A=[],I;function H(C){if(C.indexOf(I)>=0){for(let B=0;B<C.length;B++)if(A.indexOf(C[B])>=0)return!0}}for(let C=0;C<3;C++){if(I=nW(Q,8+C,1)%D.length,H([0,4])||H([2,3]))I=1;A.push(I)}j(0,ff,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),j(1,ff,4,5,[[0,0],[3,0],[3,3],[0,3]]),j(2,Yq0,1,null,[[1,1],[2,1],[2,2],[1,2]]),$.finish()}function qq0($){var Y=0,Z=0,J=encodeURI($)+"%80",q=[],G,z=[],M=1732584193,j=4023233417,P=~M,D=~j,A=3285377520,I=[M,j,P,D,A],H=0,C="";function B(S,_){return S<<_|S>>>32-_}for(;Y<J.length;Z++)q[Z>>2]=q[Z>>2]|(J[Y]=="%"?parseInt(J.substring(Y+1,Y+=3),16):J.charCodeAt(Y++))<<(3-(Z&3))*8;G=((Z+7>>6)+1)*16,q[G-1]=Z*8-8;for(;H<G;H+=16){for(Y=0;Y<80;Y++)Z=B(M,5)+A+(Y<20?(j&P^~j&D)+1518500249:Y<40?(j^P^D)+1859775393:Y<60?(j&P^j&D^P&D)+2400959708:(j^P^D)+3395469782)+(z[Y]=Y<16?q[H+Y]|0:B(z[Y-3]^z[Y-8]^z[Y-14]^z[Y-16],1)),A=D,D=P,P=B(j,30),j=M,M=Z;I[0]=M=I[0]+M|0,I[1]=j=I[1]+j|0,I[2]=P=I[2]+P|0,I[3]=D=I[3]+D|0,I[4]=A=I[4]+A|0}for(Y=0;Y<40;Y++)C+=(I[Y>>3]>>>(7-(Y&7))*4&15).toString(16);return C}function Gq0($){return/^[0-9a-f]{11,}$/i.test($)&&$}function zq0($){return qq0($==null?"":""+$)}function mK($){return($*10+0.5|0)/10}class yf{constructor(){this.v=""}g($){let Q="";for(let X=0;X<$.length;X++)Q+=(X?"L":"M")+mK($[X].x)+" "+mK($[X].y);this.v+=Q+"Z"}h($,Q,X){let Y=X?0:1,Z=mK(Q/2),J=mK(Q),q="a"+Z+","+Z+" 0 1,"+Y+" ";this.v+="M"+mK($.x)+" "+mK($.y+Q/2)+q+J+",0"+q+-J+",0"}}class bf{constructor($){this.A,this.B={},this.O=$,this.k=$.k}m($){let Q=/^(#......)(..)?/.exec($),X=Q[2]?nW(Q[2],0)/255:1;this.O.m(Q[1],X)}L($){this.A=this.B[$]||(this.B[$]=new yf)}M(){}g($){this.A.g($)}h($,Q,X){this.A.h($,Q,X)}finish(){let $=this.B;for(let Q in $)if($.hasOwnProperty(Q))this.O.P(Q,$[Q].v)}}class hf{constructor($){this.k=$,this.C='<svg xmlns="'+Kq0.R+'" width="'+$+'" height="'+$+'" viewBox="0 0 '+$+" "+$+'">'}m($,Q){if(Q)this.C+='<rect width="100%" height="100%" fill="'+$+'" opacity="'+Q.toFixed(2)+'"/>'}P($,Q){this.C+='<path fill="'+$+'" d="'+Q+'"/>'}toString(){return this.C+"</svg>"}}function hR($,Q,X){let Y=new hf(Q);return Jq0(new bf(Y),Gq0($)||zq0($),X),Y.toString()}var e50,xf,$q0,Xq0,xR0,Kq0;var mf=y(()=>{e50=typeof window!=="undefined"?window:typeof self!=="undefined"?self:typeof global!=="undefined"?global:{},xf={V:"jdenticon_config",n:"config"},$q0={};Xq0=new bR(0,0,0,0);xR0=typeof document!=="undefined"&&document.querySelectorAll.bind(document);Kq0={R:"http://www.w3.org/2000/svg",S:"width",T:"height"}});var BG="6.15.0";function Uq0($,Q,X){let Y=Q.split("|").map((J)=>J.trim());for(let J=0;J<Y.length;J++)switch(Q){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof $===Q)return}let Z=new Error(`invalid value for type ${Q}`);throw Z.code="INVALID_ARGUMENT",Z.argument=`value.${X}`,Z.value=$,Z}async function W8($){let Q=Object.keys($);return(await Promise.all(Q.map((Y)=>Promise.resolve($[Y])))).reduce((Y,Z,J)=>{return Y[Q[J]]=Z,Y},{})}function E0($,Q,X){for(let Y in Q){let Z=Q[Y],J=X?X[Y]:null;if(J)Uq0(Z,J,Y);Object.defineProperty($,Y,{enumerable:!0,value:Z,writable:!1})}}function cK($,Q){if($==null)return"null";if(Q==null)Q=new Set;if(typeof $==="object"){if(Q.has($))return"[Circular]";Q.add($)}if(Array.isArray($))return"[ "+$.map((X)=>cK(X,Q)).join(", ")+" ]";if($ instanceof Uint8Array){let Y="0x";for(let Z=0;Z<$.length;Z++)Y+="0123456789abcdef"[$[Z]>>4],Y+="0123456789abcdef"[$[Z]&15];return Y}if(typeof $==="object"&&typeof $.toJSON==="function")return cK($.toJSON(),Q);switch(typeof $){case"boolean":case"number":case"symbol":return $.toString();case"bigint":return BigInt($).toString();case"string":return JSON.stringify($);case"object":{let X=Object.keys($);return X.sort(),"{ "+X.map((Y)=>`${cK(Y,Q)}: ${cK($[Y],Q)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function i$($,Q){return $&&$.code===Q}function W5($){return i$($,"CALL_EXCEPTION")}function _$($,Q,X){let Y=$;{let J=[];if(X){if("message"in X||"code"in X||"name"in X)throw new Error(`value will overwrite populated values: ${cK(X)}`);for(let q in X){if(q==="shortMessage")continue;let G=X[q];J.push(q+"="+cK(G))}}if(J.push(`code=${Q}`),J.push(`version=${BG}`),J.length)$+=" ("+J.join(", ")+")"}let Z;switch(Q){case"INVALID_ARGUMENT":Z=new TypeError($);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":Z=new RangeError($);break;default:Z=new Error($)}if(E0(Z,{code:Q}),X)Object.assign(Z,X);if(Z.shortMessage==null)E0(Z,{shortMessage:Y});return Z}function V0($,Q,X,Y){if(!$)throw _$(Q,X,Y)}function o($,Q,X,Y){V0($,Q,"INVALID_ARGUMENT",{argument:X,value:Y})}function _1($,Q,X){if(X==null)X="";if(X)X=": "+X;V0($>=Q,"missing argument"+X,"MISSING_ARGUMENT",{count:$,expectedCount:Q}),V0($<=Q,"too many arguments"+X,"UNEXPECTED_ARGUMENT",{count:$,expectedCount:Q})}function k1($){V0(Wq0.indexOf($)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:$}})}function EQ($,Q,X){if(X==null)X="";if($!==Q){let Y=X,Z="new";if(X)Y+=".",Z+=" "+X;V0(!1,`private constructor; use ${Y}from* methods`,"UNSUPPORTED_OPERATION",{operation:Z})}}var Wq0;var D9=y(()=>{Wq0=["NFD","NFC","NFKD","NFKC"].reduce(($,Q)=>{try{if("test".normalize(Q)!=="test")throw new Error("bad");if(Q==="NFD"){let X=String.fromCharCode(233).normalize("NFD"),Y=String.fromCharCode(101,769);if(X!==Y)throw new Error("broken")}$.push(Q)}catch(X){}return $},[])});function pf($,Q,X){if($ instanceof Uint8Array){if(X)return new Uint8Array($);return $}if(typeof $==="string"&&$.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){let Y=new Uint8Array(($.length-2)/2),Z=2;for(let J=0;J<Y.length;J++)Y[J]=parseInt($.substring(Z,Z+2),16),Z+=2;return Y}o(!1,"invalid BytesLike value",Q||"value",$)}function L0($,Q){return pf($,Q,!1)}function P8($,Q){return pf($,Q,!0)}function w$($,Q){if(typeof $!=="string"||!$.match(/^0x[0-9A-Fa-f]*$/))return!1;if(typeof Q==="number"&&$.length!==2+2*Q)return!1;if(Q===!0&&$.length%2!==0)return!1;return!0}function SZ($){return w$($,!0)||$ instanceof Uint8Array}function D0($){let Q=L0($),X="0x";for(let Y=0;Y<Q.length;Y++){let Z=Q[Y];X+=cf[(Z&240)>>4]+cf[Z&15]}return X}function V$($){return"0x"+$.map((Q)=>D0(Q).substring(2)).join("")}function uX($){if(w$($,!0))return($.length-2)/2;return L0($).length}function c$($,Q,X){let Y=L0($);if(X!=null&&X>Y.length)V0(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:Y,length:Y.length,offset:X});return D0(Y.slice(Q==null?0:Q,X==null?Y.length:X))}function sD($){let Q=D0($).substring(2);while(Q.startsWith("00"))Q=Q.substring(2);return"0x"+Q}function lf($,Q,X){let Y=L0($);V0(Q>=Y.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(Y),length:Q,offset:Q+1});let Z=new Uint8Array(Q);if(Z.fill(0),X)Z.set(Y,Q-Y.length);else Z.set(Y,0);return D0(Z)}function m8($,Q){return lf($,Q,!0)}function ZJ($,Q){return lf($,Q,!1)}var cf="0123456789abcdef";var EZ=y(()=>{D9()});function JJ($,Q){let X=x1($,"value"),Y=BigInt(Y$(Q,"width"));if(V0(X>>Y===aD,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:$}),X>>Y-j9){let Z=(j9<<Y)-j9;return-((~X&Z)+j9)}return X}function qJ($,Q){let X=n0($,"value"),Y=BigInt(Y$(Q,"width")),Z=j9<<Y-j9;if(X<aD){X=-X,V0(X<=Z,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:$});let J=(j9<<Y)-j9;return(~X&J)+j9}else V0(X<Z,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:$});return X}function RY($,Q){let X=x1($,"value"),Y=BigInt(Y$(Q,"bits"));return X&(j9<<Y)-j9}function n0($,Q){switch(typeof $){case"bigint":return $;case"number":return o(Number.isInteger($),"underflow",Q||"value",$),o($>=-pK&&$<=pK,"overflow",Q||"value",$),BigInt($);case"string":try{if($==="")throw new Error("empty string");if($[0]==="-"&&$[1]!=="-")return-BigInt($.substring(1));return BigInt($)}catch(X){o(!1,`invalid BigNumberish string: ${X.message}`,Q||"value",$)}}o(!1,"invalid BigNumberish value",Q||"value",$)}function x1($,Q){let X=n0($,Q);return V0(X>=aD,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:$}),X}function mY($){if($ instanceof Uint8Array){let Q="0x0";for(let X of $)Q+=uf[X>>4],Q+=uf[X&15];return BigInt(Q)}return n0($)}function Y$($,Q){switch(typeof $){case"bigint":return o($>=-pK&&$<=pK,"overflow",Q||"value",$),Number($);case"number":return o(Number.isInteger($),"underflow",Q||"value",$),o($>=-pK&&$<=pK,"overflow",Q||"value",$),$;case"string":try{if($==="")throw new Error("empty string");return Y$(BigInt($),Q)}catch(X){o(!1,`invalid numeric string: ${X.message}`,Q||"value",$)}}o(!1,"invalid numeric value",Q||"value",$)}function lK($){return Y$(mY($))}function RQ($,Q){let Y=x1($,"value").toString(16);if(Q==null){if(Y.length%2)Y="0"+Y}else{let Z=Y$(Q,"width");V0(Z*2>=Y.length,`value exceeds width (${Z} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:$});while(Y.length<Z*2)Y="0"+Y}return"0x"+Y}function p$($){let Q=x1($,"value");if(Q===aD)return new Uint8Array([]);let X=Q.toString(16);if(X.length%2)X="0"+X;let Y=new Uint8Array(X.length/2);for(let Z=0;Z<Y.length;Z++){let J=Z*2;Y[Z]=parseInt(X.substring(J,J+2),16)}return Y}function QQ($){let Q=D0(SZ($)?$:p$($)).substring(2);while(Q.startsWith("0"))Q=Q.substring(1);if(Q==="")Q="0";return"0x"+Q}var aD,j9,pK=9007199254740991,uf="0123456789abcdef";var uK=y(()=>{EZ();D9();aD=BigInt(0),j9=BigInt(1)});function Vq0($){if(tD==null){tD={};for(let X=0;X<eD.length;X++)tD[eD[X]]=BigInt(X)}let Q=tD[$];return o(Q!=null,"invalid base58 value","letter",$),Q}function f1($){let Q=L0($),X=mY(Q),Y="";while(X)Y=eD[Number(X%mR)]+Y,X/=mR;for(let Z=0;Z<Q.length;Z++){if(Q[Z])break;Y=eD[0]+Y}return Y}function dK($){let Q=Oq0;for(let X=0;X<$.length;X++)Q*=mR,Q+=Vq0($[X]);return Q}var eD="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",tD=null,Oq0,mR;var df=y(()=>{EZ();D9();uK();Oq0=BigInt(0),mR=BigInt(58)});function iK($){$=atob($);let Q=new Uint8Array($.length);for(let X=0;X<$.length;X++)Q[X]=$.charCodeAt(X);return L0(Q)}function nK($){let Q=L0($),X="";for(let Y=0;Y<Q.length;Y++)X+=String.fromCharCode(Q[Y]);return btoa(X)}var cR=y(()=>{EZ()});class V5{filter;emitter;#$;constructor($,Q,X){this.#$=Q,E0(this,{emitter:$,filter:X})}async removeListener(){if(this.#$==null)return;await this.emitter.off(this.filter,this.#$)}}var nf=()=>{};function Mq0($,Q,X,Y,Z){o(!1,`invalid codepoint at offset ${Q}; ${$}`,"bytes",X)}function of($,Q,X,Y,Z){if($==="BAD_PREFIX"||$==="UNEXPECTED_CONTINUE"){let J=0;for(let q=Q+1;q<X.length;q++){if(X[q]>>6!==2)break;J++}return J}if($==="OVERRUN")return X.length-Q-1;return 0}function Dq0($,Q,X,Y,Z){if($==="OVERLONG")return o(typeof Z==="number","invalid bad code point for replacement","badCodepoint",Z),Y.push(Z),0;return Y.push(65533),of($,Q,X,Y,Z)}function rf($,Q){if(Q==null)Q=rW.error;let X=L0($,"bytes"),Y=[],Z=0;while(Z<X.length){let J=X[Z++];if(J>>7===0){Y.push(J);continue}let q=null,G=null;if((J&224)===192)q=1,G=127;else if((J&240)===224)q=2,G=2047;else if((J&248)===240)q=3,G=65535;else{if((J&192)===128)Z+=Q("UNEXPECTED_CONTINUE",Z-1,X,Y);else Z+=Q("BAD_PREFIX",Z-1,X,Y);continue}if(Z-1+q>=X.length){Z+=Q("OVERRUN",Z-1,X,Y);continue}let z=J&(1<<8-q-1)-1;for(let M=0;M<q;M++){let j=X[Z];if((j&192)!=128){Z+=Q("MISSING_CONTINUE",Z,X,Y),z=null;break}z=z<<6|j&63,Z++}if(z===null)continue;if(z>1114111){Z+=Q("OUT_OF_RANGE",Z-1-q,X,Y,z);continue}if(z>=55296&&z<=57343){Z+=Q("UTF16_SURROGATE",Z-1-q,X,Y,z);continue}if(z<=G){Z+=Q("OVERLONG",Z-1-q,X,Y,z);continue}Y.push(z)}return Y}function s$($,Q){if(o(typeof $==="string","invalid string value","str",$),Q!=null)k1(Q),$=$.normalize(Q);let X=[];for(let Y=0;Y<$.length;Y++){let Z=$.charCodeAt(Y);if(Z<128)X.push(Z);else if(Z<2048)X.push(Z>>6|192),X.push(Z&63|128);else if((Z&64512)==55296){Y++;let J=$.charCodeAt(Y);o(Y<$.length&&(J&64512)===56320,"invalid surrogate pair","str",$);let q=65536+((Z&1023)<<10)+(J&1023);X.push(q>>18|240),X.push(q>>12&63|128),X.push(q>>6&63|128),X.push(q&63|128)}else X.push(Z>>12|224),X.push(Z>>6&63|128),X.push(Z&63|128)}return new Uint8Array(X)}function jq0($){return $.map((Q)=>{if(Q<=65535)return String.fromCharCode(Q);return Q-=65536,String.fromCharCode((Q>>10&1023)+55296,(Q&1023)+56320)}).join("")}function LX($,Q){return jq0(rf($,Q))}function $j($,Q){return rf(s$($,Q))}var rW;var Qj=y(()=>{EZ();D9();rW=Object.freeze({error:Mq0,ignore:of,replace:Dq0})});function Xj($){async function Q(X,Y){V0(Y==null||!Y.cancelled,"request cancelled before sending","CANCELLED");let Z=X.url.split(":")[0].toLowerCase();V0(Z==="http"||Z==="https",`unsupported protocol ${Z}`,"UNSUPPORTED_OPERATION",{info:{protocol:Z},operation:"request"}),V0(Z==="https"||!X.credentials||X.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let J=null,q=new AbortController,G=setTimeout(()=>{J=_$("request timeout","TIMEOUT"),q.abort()},X.timeout);if(Y)Y.addListener(()=>{J=_$("request cancelled","CANCELLED"),q.abort()});let z=Object.assign({},$,{method:X.method,headers:new Headers(Array.from(X)),body:X.body||void 0,signal:q.signal}),M;try{M=await fetch(X.url,z)}catch(A){if(clearTimeout(G),J)throw J;throw A}clearTimeout(G);let j={};M.headers.forEach((A,I)=>{j[I.toLowerCase()]=A});let P=await M.arrayBuffer(),D=P==null?null:new Uint8Array(P);return{statusCode:M.status,statusMessage:M.statusText,headers:j,body:D}}return Q}var YC0;var sf=y(()=>{D9();YC0=Xj({})});async function ef($,Q){try{let X=$.match(Nq0);if(!X)throw new Error("invalid data");return new _Z(200,"OK",{"content-type":X[1]||"text/plain"},X[2]?iK(X[3]):Rq0(X[3]))}catch(X){return new _Z(599,"BAD REQUEST (invalid data: URI)",{},null,new n$($))}}function $v($){async function Q(X,Y){try{let Z=X.match(Aq0);if(!Z)throw new Error("invalid link");return new n$(`${$}${Z[2]}`)}catch(Z){return new _Z(599,"BAD REQUEST (invalid IPFS URI)",{},null,new n$(X))}}return Q}class oK{#$;#Q;constructor($){this.#$=[],this.#Q=!1,Qv.set($,()=>{if(this.#Q)return;this.#Q=!0;for(let Q of this.#$)setTimeout(()=>{Q()},0);this.#$=[]})}addListener($){V0(!this.#Q,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#$.push($)}get cancelled(){return this.#Q}checkSignal(){V0(!this.cancelled,"cancelled","CANCELLED",{})}}function Zj($){if($==null)throw new Error("missing signal; should not happen");return $.checkSignal(),$}function tf(){return new Date().getTime()}function Rq0($){return s$($.replace(/%([0-9a-f][0-9a-f])/gi,(Q,X)=>{return String.fromCharCode(parseInt(X,16))}))}function Cq0($){return new Promise((Q)=>setTimeout(Q,$))}var Pq0=12,Hq0=250,af,Nq0,Aq0,pR=!1,Yj,Qv,n$,_Z;var Xv=y(()=>{cR();EZ();D9();Qj();sf();af=Xj(),Nq0=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Aq0=new RegExp("^ipfs://(ipfs/)?(.*)$","i");Yj={data:ef,ipfs:$v("https://gateway.ipfs.io/ipfs/")},Qv=new WeakMap;n$=class n${#$;#Q;#X;#Y;#Z;#G;#J;#z;#W;#K;#q;#M;#U;#O;#V;get url(){return this.#G}set url($){this.#G=String($)}get body(){if(this.#J==null)return null;return new Uint8Array(this.#J)}set body($){if($==null)this.#J=void 0,this.#z=void 0;else if(typeof $==="string")this.#J=s$($),this.#z="text/plain";else if($ instanceof Uint8Array)this.#J=$,this.#z="application/octet-stream";else if(typeof $==="object")this.#J=s$(JSON.stringify($)),this.#z="application/json";else throw new Error("invalid body")}hasBody(){return this.#J!=null}get method(){if(this.#Y)return this.#Y;if(this.hasBody())return"POST";return"GET"}set method($){if($==null)$="";this.#Y=String($).toUpperCase()}get headers(){let $=Object.assign({},this.#X);if(this.#W)$.authorization=`Basic ${nK(s$(this.#W))}`;if(this.allowGzip)$["accept-encoding"]="gzip";if($["content-type"]==null&&this.#z)$["content-type"]=this.#z;if(this.body)$["content-length"]=String(this.body.length);return $}getHeader($){return this.headers[$.toLowerCase()]}setHeader($,Q){this.#X[String($).toLowerCase()]=String(Q)}clearHeaders(){this.#X={}}[Symbol.iterator](){let $=this.headers,Q=Object.keys($),X=0;return{next:()=>{if(X<Q.length){let Y=Q[X++];return{value:[Y,$[Y]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#W||null}setCredentials($,Q){o(!$.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#W=`${$}:${Q}`}get allowGzip(){return this.#Q}set allowGzip($){this.#Q=!!$}get allowInsecureAuthentication(){return!!this.#$}set allowInsecureAuthentication($){this.#$=!!$}get timeout(){return this.#Z}set timeout($){o($>=0,"timeout must be non-zero","timeout",$),this.#Z=$}get preflightFunc(){return this.#K||null}set preflightFunc($){this.#K=$}get processFunc(){return this.#q||null}set processFunc($){this.#q=$}get retryFunc(){return this.#M||null}set retryFunc($){this.#M=$}get getUrlFunc(){return this.#V||af}set getUrlFunc($){this.#V=$}constructor($){this.#G=String($),this.#$=!1,this.#Q=!0,this.#X={},this.#Y="",this.#Z=300000,this.#O={slotInterval:Hq0,maxAttempts:Pq0},this.#V=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#J?D0(this.#J):"null"}>`}setThrottleParams($){if($.slotInterval!=null)this.#O.slotInterval=$.slotInterval;if($.maxAttempts!=null)this.#O.maxAttempts=$.maxAttempts}async#D($,Q,X,Y,Z){if($>=this.#O.maxAttempts)return Z.makeServerError("exceeded maximum retry limit");if(V0(tf()<=Q,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:Y}),X>0)await Cq0(X);let J=this.clone(),q=(J.url.split(":")[0]||"").toLowerCase();if(q in Yj){let M=await Yj[q](J.url,Zj(Y.#U));if(M instanceof _Z){let j=M;if(this.processFunc){Zj(Y.#U);try{j=await this.processFunc(J,j)}catch(P){if(P.throttle==null||typeof P.stall!=="number")j.makeServerError("error in post-processing function",P).assertOk()}}return j}J=M}if(this.preflightFunc)J=await this.preflightFunc(J);let G=await this.getUrlFunc(J,Zj(Y.#U)),z=new _Z(G.statusCode,G.statusMessage,G.headers,G.body,Y);if(z.statusCode===301||z.statusCode===302){try{let M=z.headers.location||"";return J.redirect(M).#D($+1,Q,0,Y,z)}catch(M){}return z}else if(z.statusCode===429){if(this.retryFunc==null||await this.retryFunc(J,z,$)){let M=z.headers["retry-after"],j=this.#O.slotInterval*Math.trunc(Math.random()*Math.pow(2,$));if(typeof M==="string"&&M.match(/^[1-9][0-9]*$/))j=parseInt(M);return J.clone().#D($+1,Q,j,Y,z)}}if(this.processFunc){Zj(Y.#U);try{z=await this.processFunc(J,z)}catch(M){if(M.throttle==null||typeof M.stall!=="number")z.makeServerError("error in post-processing function",M).assertOk();let j=this.#O.slotInterval*Math.trunc(Math.random()*Math.pow(2,$));if(M.stall>=0)j=M.stall;return J.clone().#D($+1,Q,j,Y,z)}}return z}send(){return V0(this.#U==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#U=new oK(this),this.#D(0,tf()+this.timeout,0,this,new _Z(0,"",{},null,this))}cancel(){V0(this.#U!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});let $=Qv.get(this);if(!$)throw new Error("missing signal; should not happen");$()}redirect($){let Q=this.url.split(":")[0].toLowerCase(),X=$.split(":")[0].toLowerCase();V0(this.method==="GET"&&(Q!=="https"||X!=="http")&&$.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify($)})`});let Y=new n$($);if(Y.method="GET",Y.allowGzip=this.allowGzip,Y.timeout=this.timeout,Y.#X=Object.assign({},this.#X),this.#J)Y.#J=new Uint8Array(this.#J);return Y.#z=this.#z,Y}clone(){let $=new n$(this.url);if($.#Y=this.#Y,this.#J)$.#J=this.#J;if($.#z=this.#z,$.#X=Object.assign({},this.#X),$.#W=this.#W,this.allowGzip)$.allowGzip=!0;if($.timeout=this.timeout,this.allowInsecureAuthentication)$.allowInsecureAuthentication=!0;return $.#K=this.#K,$.#q=this.#q,$.#M=this.#M,$.#O=Object.assign({},this.#O),$.#V=this.#V,$}static lockConfig(){pR=!0}static getGateway($){return Yj[$.toLowerCase()]||null}static registerGateway($,Q){if($=$.toLowerCase(),$==="http"||$==="https")throw new Error(`cannot intercept ${$}; use registerGetUrl`);if(pR)throw new Error("gateways locked");Yj[$]=Q}static registerGetUrl($){if(pR)throw new Error("gateways locked");af=$}static createGetUrlFunc($){return Xj($)}static createDataGateway(){return ef}static createIpfsGatewayFunc($){return $v($)}};_Z=class _Z{#$;#Q;#X;#Y;#Z;#G;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#Y?D0(this.#Y):"null"}>`}get statusCode(){return this.#$}get statusMessage(){return this.#Q}get headers(){return Object.assign({},this.#X)}get body(){return this.#Y==null?null:new Uint8Array(this.#Y)}get bodyText(){try{return this.#Y==null?"":LX(this.#Y)}catch($){V0(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch($){V0(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){let $=this.headers,Q=Object.keys($),X=0;return{next:()=>{if(X<Q.length){let Y=Q[X++];return{value:[Y,$[Y]],done:!1}}return{value:void 0,done:!0}}}}constructor($,Q,X,Y,Z){this.#$=$,this.#Q=Q,this.#X=Object.keys(X).reduce((J,q)=>{return J[q.toLowerCase()]=String(X[q]),J},{}),this.#Y=Y==null?null:new Uint8Array(Y),this.#Z=Z||null,this.#G={message:""}}makeServerError($,Q){let X;if(!$)$=`${this.statusCode} ${this.statusMessage}`,X=`CLIENT ESCALATED SERVER ERROR (${$})`;else X=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${$})`;let Y=new _Z(599,X,this.headers,this.body,this.#Z||void 0);return Y.#G={message:$,error:Q},Y}throwThrottleError($,Q){if(Q==null)Q=-1;else o(Number.isInteger(Q)&&Q>=0,"invalid stall timeout","stall",Q);let X=new Error($||"throttling requests");throw E0(X,{stall:Q,throttle:!0}),X}getHeader($){return this.headers[$.toLowerCase()]}hasBody(){return this.#Y!=null}get request(){return this.#Z}ok(){return this.#G.message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:$,error:Q}=this.#G;if($==="")$=`server response ${this.statusCode} ${this.statusMessage}`;let X=null;if(this.request)X=this.request.url;let Y=null;try{if(this.#Y)Y=LX(this.#Y)}catch(Z){}V0(!1,$,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:Q,info:{requestUrl:X,responseBody:Y,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}});function SG($){let Q=aK;while(Q.length<$)Q+=Q;return BigInt("1"+Q.substring(0,$))}function sW($,Q,X){let Y=BigInt(Q.width);if(Q.signed){let Z=sK<<Y-sK;if(V0(X==null||$>=-Z&&$<Z,"overflow","NUMERIC_FAULT",{operation:X,fault:"overflow",value:$}),$>P9)$=JJ(RY($,Y),Y);else $=-JJ(RY(-$,Y),Y)}else{let Z=sK<<Y;V0(X==null||$>=0&&$<Z,"overflow","NUMERIC_FAULT",{operation:X,fault:"overflow",value:$}),$=($%Z+Z)%Z&Z-sK}return $}function lR($){if(typeof $==="number")$=`fixed128x${$}`;let Q=!0,X=128,Y=18;if(typeof $==="string")if($==="fixed");else if($==="ufixed")Q=!1;else{let J=$.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);o(J,"invalid fixed format","format",$),Q=J[1]!=="u",X=parseInt(J[2]),Y=parseInt(J[3])}else if($){let J=$,q=(G,z,M)=>{if(J[G]==null)return M;return o(typeof J[G]===z,"invalid fixed format ("+G+" not "+z+")","format."+G,J[G]),J[G]};Q=q("signed","boolean",Q),X=q("width","number",X),Y=q("decimals","number",Y)}o(X%8===0,"invalid FixedNumber width (not byte aligned)","format.width",X),o(Y<=80,"invalid FixedNumber decimals (too large)","format.decimals",Y);let Z=(Q?"":"u")+"fixed"+String(X)+"x"+String(Y);return{signed:Q,width:X,decimals:Y,name:Z}}function Tq0($,Q){let X="";if($<P9)X="-",$*=Lq0;let Y=$.toString();if(Q===0)return X+Y;while(Y.length<=Q)Y=aK+Y;let Z=Y.length-Q;Y=Y.substring(0,Z)+"."+Y.substring(Z);while(Y[0]==="0"&&Y[1]!==".")Y=Y.substring(1);while(Y[Y.length-1]==="0"&&Y[Y.length-2]!==".")Y=Y.substring(0,Y.length-1);return X+Y}class CY{format;#$;#Q;#X;_value;constructor($,Q,X){EQ($,rK,"FixedNumber"),this.#Q=Q,this.#$=X;let Y=Tq0(Q,X.decimals);E0(this,{format:X.name,_value:Y}),this.#X=SG(X.decimals)}get signed(){return this.#$.signed}get width(){return this.#$.width}get decimals(){return this.#$.decimals}get value(){return this.#Q}#Y($){o(this.format===$.format,"incompatible format; use fixedNumber.toFormat","other",$)}#Z($,Q){return $=sW($,this.#$,Q),new CY(rK,$,this.#$)}#G($,Q){return this.#Y($),this.#Z(this.#Q+$.#Q,Q)}addUnsafe($){return this.#G($)}add($){return this.#G($,"add")}#J($,Q){return this.#Y($),this.#Z(this.#Q-$.#Q,Q)}subUnsafe($){return this.#J($)}sub($){return this.#J($,"sub")}#z($,Q){return this.#Y($),this.#Z(this.#Q*$.#Q/this.#X,Q)}mulUnsafe($){return this.#z($)}mul($){return this.#z($,"mul")}mulSignal($){this.#Y($);let Q=this.#Q*$.#Q;return V0(Q%this.#X===P9,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#Z(Q/this.#X,"mulSignal")}#W($,Q){return V0($.#Q!==P9,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#Y($),this.#Z(this.#Q*this.#X/$.#Q,Q)}divUnsafe($){return this.#W($)}div($){return this.#W($,"div")}divSignal($){V0($.#Q!==P9,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#Y($);let Q=this.#Q*this.#X;return V0(Q%$.#Q===P9,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#Z(Q/$.#Q,"divSignal")}cmp($){let Q=this.value,X=$.value,Y=this.decimals-$.decimals;if(Y>0)X*=SG(Y);else if(Y<0)Q*=SG(-Y);if(Q<X)return-1;if(Q>X)return 1;return 0}eq($){return this.cmp($)===0}lt($){return this.cmp($)<0}lte($){return this.cmp($)<=0}gt($){return this.cmp($)>0}gte($){return this.cmp($)>=0}floor(){let $=this.#Q;if(this.#Q<P9)$-=this.#X-sK;return $=this.#Q/this.#X*this.#X,this.#Z($,"floor")}ceiling(){let $=this.#Q;if(this.#Q>P9)$+=this.#X-sK;return $=this.#Q/this.#X*this.#X,this.#Z($,"ceiling")}round($){if($==null)$=0;if($>=this.decimals)return this;let Q=this.decimals-$,X=wq0*SG(Q-1),Y=this.value+X,Z=SG(Q);return Y=Y/Z*Z,sW(Y,this.#$,"round"),new CY(rK,Y,this.#$)}isZero(){return this.#Q===P9}isNegative(){return this.#Q<P9}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat($){return CY.fromString(this.toString(),$)}static fromValue($,Q,X){let Y=Q==null?0:Y$(Q),Z=lR(X),J=n0($,"value"),q=Y-Z.decimals;if(q>0){let G=SG(q);V0(J%G===P9,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:$}),J/=G}else if(q<0)J*=SG(-q);return sW(J,Z,"fromValue"),new CY(rK,J,Z)}static fromString($,Q){let X=$.match(/^(-?)([0-9]*)\.?([0-9]*)$/);o(X&&X[2].length+X[3].length>0,"invalid FixedNumber string value","value",$);let Y=lR(Q),Z=X[2]||"0",J=X[3]||"";while(J.length<Y.decimals)J+=aK;V0(J.substring(Y.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:$}),J=J.substring(0,Y.decimals);let q=BigInt(X[1]+Z+J);return sW(q,Y,"fromString"),new CY(rK,q,Y)}static fromBytes($,Q){let X=mY(L0($,"value")),Y=lR(Q);if(Y.signed)X=JJ(X,Y.width);return sW(X,Y,"fromBytes"),new CY(rK,X,Y)}}var Lq0,P9,sK,wq0,rK,aK="0000";var uR=y(()=>{EZ();D9();uK();Lq0=BigInt(-1),P9=BigInt(0),sK=BigInt(1),wq0=BigInt(5),rK={};while(aK.length<80)aK+=aK});function Iq0($){let Q=$.toString(16);while(Q.length<2)Q="0"+Q;return"0x"+Q}function Yv($,Q,X){let Y=0;for(let Z=0;Z<X;Z++)Y=Y*256+$[Q+Z];return Y}function Zv($,Q,X,Y){let Z=[];while(X<Q+1+Y){let J=Jv($,X);Z.push(J.result),X+=J.consumed,V0(X<=Q+1+Y,"child data too short","BUFFER_OVERRUN",{buffer:$,length:Y,offset:Q})}return{consumed:1+Y,result:Z}}function Jv($,Q){V0($.length!==0,"data too short","BUFFER_OVERRUN",{buffer:$,length:0,offset:1});let X=(Y)=>{V0(Y<=$.length,"data short segment too short","BUFFER_OVERRUN",{buffer:$,length:$.length,offset:Y})};if($[Q]>=248){let Y=$[Q]-247;X(Q+1+Y);let Z=Yv($,Q+1,Y);return X(Q+1+Y+Z),Zv($,Q,Q+1+Y,Y+Z)}else if($[Q]>=192){let Y=$[Q]-192;return X(Q+1+Y),Zv($,Q,Q+1,Y)}else if($[Q]>=184){let Y=$[Q]-183;X(Q+1+Y);let Z=Yv($,Q+1,Y);X(Q+1+Y+Z);let J=D0($.slice(Q+1+Y,Q+1+Y+Z));return{consumed:1+Y+Z,result:J}}else if($[Q]>=128){let Y=$[Q]-128;X(Q+1+Y);let Z=D0($.slice(Q+1,Q+1+Y));return{consumed:1+Y,result:Z}}return{consumed:1,result:Iq0($[Q])}}function GJ($){let Q=L0($,"data"),X=Jv(Q,0);return o(X.consumed===Q.length,"unexpected junk after rlp payload","data",$),X.result}var qv=y(()=>{EZ();D9();EZ()});function Gv($){let Q=[];while($)Q.unshift($&255),$>>=8;return Q}function Kv($){if(Array.isArray($)){let Y=[];if($.forEach(function(J){Y=Y.concat(Kv(J))}),Y.length<=55)return Y.unshift(192+Y.length),Y;let Z=Gv(Y.length);return Z.unshift(247+Z.length),Z.concat(Y)}let Q=Array.prototype.slice.call(L0($,"object"));if(Q.length===1&&Q[0]<=127)return Q;else if(Q.length<=55)return Q.unshift(128+Q.length),Q;let X=Gv(Q.length);return X.unshift(183+X.length),X.concat(Q)}function wX($){let Q="0x";for(let X of Kv($))Q+=zv[X>>4],Q+=zv[X&15];return Q}var zv="0123456789abcdef";var Uv=y(()=>{EZ()});function v1($,Q){let X=18;if(typeof Q==="string"){let Y=Wv.indexOf(Q);o(Y>=0,"invalid unit","unit",Q),X=3*Y}else if(Q!=null)X=Y$(Q,"unit");return CY.fromValue($,X,{decimals:X,width:512}).toString()}function EG($,Q){o(typeof $==="string","value must be a string","value",$);let X=18;if(typeof Q==="string"){let Y=Wv.indexOf(Q);o(Y>=0,"invalid unit","unit",Q),X=3*Y}else if(Q!=null)X=Y$(Q,"unit");return CY.fromString($,{decimals:X,width:512}).value}function Jj($){return v1($,18)}function qj($){return EG($,18)}var Wv;var Vv=y(()=>{D9();uR();uK();Wv=["wei","kwei","mwei","gwei","szabo","finney","ether"]});function tK($){let Q=L0($,"randomBytes");Q[6]=Q[6]&15|64,Q[8]=Q[8]&63|128;let X=D0(Q);return[X.substring(2,10),X.substring(10,14),X.substring(14,18),X.substring(18,22),X.substring(22,34)].join("-")}var Ov=y(()=>{EZ()});var a0=y(()=>{df();cR();EZ();D9();nf();Xv();uR();uK();qv();Uv();Vv();Qj();Ov()});function _G($){return jv.get($)}function Mv($,Q){jv.set($,Q)}function aW($,Q){let X=new Error(`deferred error during ABI decoding triggered accessing ${$}`);throw X.error=Q,X}function iR($,Q,X){if($.indexOf(null)>=0)return Q.map((Y,Z)=>{if(Y instanceof dX)return iR(_G(Y),Y,X);return Y});return $.reduce((Y,Z,J)=>{let q=Q.getValue(Z);if(!(Z in Y)){if(X&&q instanceof dX)q=iR(_G(q),q,X);Y[Z]=q}return Y},{})}function tW($){let Q=[],X=function(Y,Z){if(!Array.isArray(Z))return;for(let J in Z){let q=Y.slice();q.push(J);try{X(q,Z[J])}catch(G){Q.push({path:q,error:G})}}};return X([],$),Q}function Dv($){let Q=p$($);if(V0(Q.length<=sQ,"value out-of-bounds","BUFFER_OVERRUN",{buffer:Q,length:sQ,offset:Q.length}),Q.length!==sQ)Q=P8(V$([dR.slice(Q.length%sQ),Q]));return Q}class CQ{name;type;localName;dynamic;constructor($,Q,X,Y){E0(this,{name:$,type:Q,localName:X,dynamic:Y},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError($,Q){o(!1,$,this.localName,Q)}}class eK{#$;#Q;constructor(){this.#$=[],this.#Q=0}get data(){return V$(this.#$)}get length(){return this.#Q}#X($){return this.#$.push($),this.#Q+=$.length,$.length}appendWriter($){return this.#X(P8($.data))}writeBytes($){let Q=P8($),X=Q.length%sQ;if(X)Q=P8(V$([Q,dR.slice(X)]));return this.#X(Q)}writeValue($){return this.#X(Dv($))}writeUpdatableValue(){let $=this.#$.length;return this.#$.push(dR),this.#Q+=sQ,(Q)=>{this.#$[$]=Dv(Q)}}}class zj{allowLoose;#$;#Q;#X;#Y;#Z;constructor($,Q,X){E0(this,{allowLoose:!!Q}),this.#$=P8($),this.#X=0,this.#Y=null,this.#Z=X!=null?X:1024,this.#Q=0}get data(){return D0(this.#$)}get dataLength(){return this.#$.length}get consumed(){return this.#Q}get bytes(){return new Uint8Array(this.#$)}#G($){if(this.#Y)return this.#Y.#G($);this.#X+=$,V0(this.#Z<1||this.#X<=this.#Z*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#Z} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:P8(this.#$),offset:this.#Q,length:$,info:{bytesRead:this.#X,dataLength:this.dataLength}})}#J($,Q,X){let Y=Math.ceil(Q/sQ)*sQ;if(this.#Q+Y>this.#$.length)if(this.allowLoose&&X&&this.#Q+Q<=this.#$.length)Y=Q;else V0(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:P8(this.#$),length:this.#$.length,offset:this.#Q+Y});return this.#$.slice(this.#Q,this.#Q+Y)}subReader($){let Q=new zj(this.#$.slice(this.#Q+$),this.allowLoose,this.#Z);return Q.#Y=this,Q}readBytes($,Q){let X=this.#J(0,$,!!Q);return this.#G($),this.#Q+=X.length,X.slice(0,$)}readValue(){return mY(this.readBytes(sQ))}readIndex(){return lK(this.readBytes(sQ))}}var sQ=32,dR,Fq0,Gj,jv,dX;var kZ=y(()=>{a0();dR=new Uint8Array(sQ),Fq0=["then"],Gj={},jv=new WeakMap;dX=class dX extends Array{#$;constructor(...$){let Q=$[0],X=$[1],Y=($[2]||[]).slice(),Z=!0;if(Q!==Gj)X=$,Y=[],Z=!1;super(X.length);X.forEach((G,z)=>{this[z]=G});let J=Y.reduce((G,z)=>{if(typeof z==="string")G.set(z,(G.get(z)||0)+1);return G},new Map);if(Mv(this,Object.freeze(X.map((G,z)=>{let M=Y[z];if(M!=null&&J.get(M)===1)return M;return null}))),this.#$=[],this.#$==null)this.#$;if(!Z)return;Object.freeze(this);let q=new Proxy(this,{get:(G,z,M)=>{if(typeof z==="string"){if(z.match(/^[0-9]+$/)){let P=Y$(z,"%index");if(P<0||P>=this.length)throw new RangeError("out of result range");let D=G[P];if(D instanceof Error)aW(`index ${P}`,D);return D}if(Fq0.indexOf(z)>=0)return Reflect.get(G,z,M);let j=G[z];if(j instanceof Function)return function(...P){return j.apply(this===M?G:this,P)};else if(!(z in G))return G.getValue.apply(this===M?G:this,[z])}return Reflect.get(G,z,M)}});return Mv(q,_G(this)),q}toArray($){let Q=[];return this.forEach((X,Y)=>{if(X instanceof Error)aW(`index ${Y}`,X);if($&&X instanceof dX)X=X.toArray($);Q.push(X)}),Q}toObject($){let Q=_G(this);return Q.reduce((X,Y,Z)=>{return V0(Y!=null,`value at index ${Z} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),iR(Q,this,$)},{})}slice($,Q){if($==null)$=0;if($<0){if($+=this.length,$<0)$=0}if(Q==null)Q=this.length;if(Q<0){if(Q+=this.length,Q<0)Q=0}if(Q>this.length)Q=this.length;let X=_G(this),Y=[],Z=[];for(let J=$;J<Q;J++)Y.push(this[J]),Z.push(X[J]);return new dX(Gj,Y,Z)}filter($,Q){let X=_G(this),Y=[],Z=[];for(let J=0;J<this.length;J++){let q=this[J];if(q instanceof Error)aW(`index ${J}`,q);if($.call(Q,q,J,this))Y.push(q),Z.push(X[J])}return new dX(Gj,Y,Z)}map($,Q){let X=[];for(let Y=0;Y<this.length;Y++){let Z=this[Y];if(Z instanceof Error)aW(`index ${Y}`,Z);X.push($.call(Q,Z,Y,this))}return X}getValue($){let Q=_G(this).indexOf($);if(Q===-1)return;let X=this[Q];if(X instanceof Error)aW(`property ${JSON.stringify($)}`,X.error);return X}static fromItems($,Q){return new dX(Gj,$,Q)}}});function TX($){if(!Number.isSafeInteger($)||$<0)throw new Error(`Wrong positive integer: ${$}`)}function eW($,...Q){if(!($ instanceof Uint8Array))throw new Error("Expected Uint8Array");if(Q.length>0&&!Q.includes($.length))throw new Error(`Expected Uint8Array of length ${Q}, not of length=${$.length}`)}function Kj($){if(typeof $!=="function"||typeof $.create!=="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");TX($.outputLen),TX($.blockLen)}function O5($,Q=!0){if($.destroyed)throw new Error("Hash instance has been destroyed");if(Q&&$.finished)throw new Error("Hash#digest() has already been called")}function Uj($,Q){eW($);let X=Q.outputLen;if($.length<X)throw new Error(`digestInto() expects output buffer of length at least ${X}`)}var $U=()=>{};var Wj;var Pv=y(()=>{Wj=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:void 0});async function Vj($,Q,X){let Y=Date.now();for(let Z=0;Z<$;Z++){X(Z);let J=Date.now()-Y;if(J>=0&&J<Q)continue;await Sq0(),Y+=J}}function Eq0($){if(typeof $!=="string")throw new Error(`utf8ToBytes expected string, got ${typeof $}`);return new Uint8Array(new TextEncoder().encode($))}function zJ($){if(typeof $==="string")$=Eq0($);if(!Hv($))throw new Error(`expected Uint8Array, got ${typeof $}`);return $}function Nv(...$){let Q=new Uint8Array($.reduce((Y,Z)=>Y+Z.length,0)),X=0;return $.forEach((Y)=>{if(!Hv(Y))throw new Error("Uint8Array expected");Q.set(Y,X),X+=Y.length}),Q}class kG{clone(){return this._cloneInto()}}function Oj($,Q){if(Q!==void 0&&_q0.call(Q)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign($,Q)}function g1($){let Q=(Y)=>$().update(zJ(Y)).digest(),X=$();return Q.outputLen=X.outputLen,Q.blockLen=X.blockLen,Q.create=()=>$(),Q}function Av($=32){if(Wj&&typeof Wj.getRandomValues==="function")return Wj.getRandomValues(new Uint8Array($));throw new Error("crypto.getRandomValues must be defined")}var Hv=($)=>$ instanceof Uint8Array,QU=($)=>new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4)),XU=($)=>new DataView($.buffer,$.byteOffset,$.byteLength),H9=($,Q)=>$<<32-Q|$>>>Q,Bq0,Sq0=async()=>{},_q0;var KJ=y(()=>{Pv();/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Bq0=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Bq0)throw new Error("Non little-endian hardware is not supported");_q0={}.toString});var nR,xG=($,Q,X)=>new nR($,Q).update(X).digest();var Mj=y(()=>{$U();KJ();nR=class nR extends kG{constructor($,Q){super();this.finished=!1,this.destroyed=!1,Kj($);let X=zJ(Q);if(this.iHash=$.create(),typeof this.iHash.update!=="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let Y=this.blockLen,Z=new Uint8Array(Y);Z.set(X.length>Y?$.create().update(X).digest():X);for(let J=0;J<Z.length;J++)Z[J]^=54;this.iHash.update(Z),this.oHash=$.create();for(let J=0;J<Z.length;J++)Z[J]^=106;this.oHash.update(Z),Z.fill(0)}update($){return O5(this),this.iHash.update($),this}digestInto($){O5(this),eW($,this.outputLen),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||($=Object.create(Object.getPrototypeOf(this),{}));let{oHash:Q,iHash:X,finished:Y,destroyed:Z,blockLen:J,outputLen:q}=this;return $=$,$.finished=Y,$.destroyed=Z,$.blockLen=J,$.outputLen=q,$.oHash=Q._cloneInto($.oHash),$.iHash=X._cloneInto($.iHash),$}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};xG.create=($,Q)=>new nR($,Q)});function kq0($,Q,X,Y){Kj($);let Z=Oj({dkLen:32,asyncTick:10},Y),{c:J,dkLen:q,asyncTick:G}=Z;if(TX(J),TX(q),TX(G),J<1)throw new Error("PBKDF2: iterations (c) should be >= 1");let z=zJ(Q),M=zJ(X),j=new Uint8Array(q),P=xG.create($,z),D=P._cloneInto().update(M);return{c:J,dkLen:q,asyncTick:G,DK:j,PRF:P,PRFSalt:D}}function xq0($,Q,X,Y,Z){if($.destroy(),Q.destroy(),Y)Y.destroy();return Z.fill(0),X}function $V($,Q,X,Y){let{c:Z,dkLen:J,DK:q,PRF:G,PRFSalt:z}=kq0($,Q,X,Y),M,j=new Uint8Array(4),P=XU(j),D=new Uint8Array(G.outputLen);for(let A=1,I=0;I<J;A++,I+=G.outputLen){let H=q.subarray(I,I+G.outputLen);P.setInt32(0,A,!1),(M=z._cloneInto(M)).update(j).digestInto(D),H.set(D.subarray(0,H.length));for(let C=1;C<Z;C++){G._cloneInto(M).update(D).digestInto(D);for(let B=0;B<H.length;B++)H[B]^=D[B]}}return xq0(G,z,q,M,D)}var oR=y(()=>{$U();Mj();KJ()});function fq0($,Q,X,Y){if(typeof $.setBigUint64==="function")return $.setBigUint64(Q,X,Y);let Z=BigInt(32),J=BigInt(4294967295),q=Number(X>>Z&J),G=Number(X&J),z=Y?4:0,M=Y?0:4;$.setUint32(Q+z,q,Y),$.setUint32(Q+M,G,Y)}var fG;var Dj=y(()=>{$U();KJ();fG=class fG extends kG{constructor($,Q,X,Y){super();this.blockLen=$,this.outputLen=Q,this.padOffset=X,this.isLE=Y,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array($),this.view=XU(this.buffer)}update($){O5(this);let{view:Q,buffer:X,blockLen:Y}=this;$=zJ($);let Z=$.length;for(let J=0;J<Z;){let q=Math.min(Y-this.pos,Z-J);if(q===Y){let G=XU($);for(;Y<=Z-J;J+=Y)this.process(G,J);continue}if(X.set($.subarray(J,J+q),this.pos),this.pos+=q,J+=q,this.pos===Y)this.process(Q,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){O5(this),Uj($,this),this.finished=!0;let{buffer:Q,view:X,blockLen:Y,isLE:Z}=this,{pos:J}=this;if(Q[J++]=128,this.buffer.subarray(J).fill(0),this.padOffset>Y-J)this.process(X,0),J=0;for(let j=J;j<Y;j++)Q[j]=0;fq0(X,Y-8,BigInt(this.length*8),Z),this.process(X,0);let q=XU($),G=this.outputLen;if(G%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let z=G/4,M=this.get();if(z>M.length)throw new Error("_sha2: outputLen bigger than state");for(let j=0;j<z;j++)q.setUint32(4*j,M[j],Z)}digest(){let{buffer:$,outputLen:Q}=this;this.digestInto($);let X=$.slice(0,Q);return this.destroy(),X}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:Q,buffer:X,length:Y,finished:Z,destroyed:J,pos:q}=this;if($.length=Y,$.pos=q,$.finished=Z,$.destroyed=J,Y%Q)$.buffer.set(X);return $}}});var vq0=($,Q,X)=>$&Q^~$&X,gq0=($,Q,X)=>$&Q^$&X^Q&X,yq0,y1,b1,Rv,M5;var jj=y(()=>{Dj();KJ();yq0=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),y1=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),b1=new Uint32Array(64);Rv=class Rv extends fG{constructor(){super(64,32,8,!1);this.A=y1[0]|0,this.B=y1[1]|0,this.C=y1[2]|0,this.D=y1[3]|0,this.E=y1[4]|0,this.F=y1[5]|0,this.G=y1[6]|0,this.H=y1[7]|0}get(){let{A:$,B:Q,C:X,D:Y,E:Z,F:J,G:q,H:G}=this;return[$,Q,X,Y,Z,J,q,G]}set($,Q,X,Y,Z,J,q,G){this.A=$|0,this.B=Q|0,this.C=X|0,this.D=Y|0,this.E=Z|0,this.F=J|0,this.G=q|0,this.H=G|0}process($,Q){for(let j=0;j<16;j++,Q+=4)b1[j]=$.getUint32(Q,!1);for(let j=16;j<64;j++){let P=b1[j-15],D=b1[j-2],A=H9(P,7)^H9(P,18)^P>>>3,I=H9(D,17)^H9(D,19)^D>>>10;b1[j]=I+b1[j-7]+A+b1[j-16]|0}let{A:X,B:Y,C:Z,D:J,E:q,F:G,G:z,H:M}=this;for(let j=0;j<64;j++){let P=H9(q,6)^H9(q,11)^H9(q,25),D=M+P+vq0(q,G,z)+yq0[j]+b1[j]|0,I=(H9(X,2)^H9(X,13)^H9(X,22))+gq0(X,Y,Z)|0;M=z,z=G,G=q,q=J+D|0,J=Z,Z=Y,Y=X,X=D+I|0}X=X+this.A|0,Y=Y+this.B|0,Z=Z+this.C|0,J=J+this.D|0,q=q+this.E|0,G=G+this.F|0,z=z+this.G|0,M=M+this.H|0,this.set(X,Y,Z,J,q,G,z,M)}roundClean(){b1.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};M5=g1(()=>new Rv)});function Cv($,Q=!1){if(Q)return{h:Number($&Pj),l:Number($>>rR&Pj)};return{h:Number($>>rR&Pj)|0,l:Number($&Pj)|0}}function sR($,Q=!1){let X=new Uint32Array($.length),Y=new Uint32Array($.length);for(let Z=0;Z<$.length;Z++){let{h:J,l:q}=Cv($[Z],Q);[X[Z],Y[Z]]=[J,q]}return[X,Y]}function nq0($,Q,X,Y){let Z=(Q>>>0)+(Y>>>0);return{h:$+X+(Z/4294967296|0)|0,l:Z|0}}var Pj,rR,bq0=($,Q)=>BigInt($>>>0)<<rR|BigInt(Q>>>0),hq0=($,Q,X)=>$>>>X,mq0=($,Q,X)=>$<<32-X|Q>>>X,cq0=($,Q,X)=>$>>>X|Q<<32-X,pq0=($,Q,X)=>$<<32-X|Q>>>X,lq0=($,Q,X)=>$<<64-X|Q>>>X-32,uq0=($,Q,X)=>$>>>X-32|Q<<64-X,dq0=($,Q)=>Q,iq0=($,Q)=>$,aR=($,Q,X)=>$<<X|Q>>>32-X,tR=($,Q,X)=>Q<<X|$>>>32-X,eR=($,Q,X)=>Q<<X-32|$>>>64-X,$C=($,Q,X)=>$<<X-32|Q>>>64-X,oq0=($,Q,X)=>($>>>0)+(Q>>>0)+(X>>>0),rq0=($,Q,X,Y)=>Q+X+Y+($/4294967296|0)|0,sq0=($,Q,X,Y)=>($>>>0)+(Q>>>0)+(X>>>0)+(Y>>>0),aq0=($,Q,X,Y,Z)=>Q+X+Y+Z+($/4294967296|0)|0,tq0=($,Q,X,Y,Z)=>($>>>0)+(Q>>>0)+(X>>>0)+(Y>>>0)+(Z>>>0),eq0=($,Q,X,Y,Z,J)=>Q+X+Y+Z+J+($/4294967296|0)|0,$10,F$;var QC=y(()=>{Pj=BigInt(4294967295),rR=BigInt(32);$10={fromBig:Cv,split:sR,toBig:bq0,shrSH:hq0,shrSL:mq0,rotrSH:cq0,rotrSL:pq0,rotrBH:lq0,rotrBL:uq0,rotr32H:dq0,rotr32L:iq0,rotlSH:aR,rotlSL:tR,rotlBH:eR,rotlBL:$C,add:nq0,add3L:oq0,add3H:rq0,add4L:sq0,add4H:aq0,add5H:eq0,add5L:tq0},F$=$10});var Q10,X10,h1,m1,Lv,Hj;var wv=y(()=>{Dj();QC();KJ();[Q10,X10]=(()=>F$.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(($)=>BigInt($))))(),h1=new Uint32Array(80),m1=new Uint32Array(80);Lv=class Lv extends fG{constructor(){super(128,64,16,!1);this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:$,Al:Q,Bh:X,Bl:Y,Ch:Z,Cl:J,Dh:q,Dl:G,Eh:z,El:M,Fh:j,Fl:P,Gh:D,Gl:A,Hh:I,Hl:H}=this;return[$,Q,X,Y,Z,J,q,G,z,M,j,P,D,A,I,H]}set($,Q,X,Y,Z,J,q,G,z,M,j,P,D,A,I,H){this.Ah=$|0,this.Al=Q|0,this.Bh=X|0,this.Bl=Y|0,this.Ch=Z|0,this.Cl=J|0,this.Dh=q|0,this.Dl=G|0,this.Eh=z|0,this.El=M|0,this.Fh=j|0,this.Fl=P|0,this.Gh=D|0,this.Gl=A|0,this.Hh=I|0,this.Hl=H|0}process($,Q){for(let S=0;S<16;S++,Q+=4)h1[S]=$.getUint32(Q),m1[S]=$.getUint32(Q+=4);for(let S=16;S<80;S++){let _=h1[S-15]|0,k=m1[S-15]|0,f=F$.rotrSH(_,k,1)^F$.rotrSH(_,k,8)^F$.shrSH(_,k,7),g=F$.rotrSL(_,k,1)^F$.rotrSL(_,k,8)^F$.shrSL(_,k,7),b=h1[S-2]|0,m=m1[S-2]|0,l=F$.rotrSH(b,m,19)^F$.rotrBH(b,m,61)^F$.shrSH(b,m,6),h=F$.rotrSL(b,m,19)^F$.rotrBL(b,m,61)^F$.shrSL(b,m,6),c=F$.add4L(g,h,m1[S-7],m1[S-16]),T=F$.add4H(c,f,l,h1[S-7],h1[S-16]);h1[S]=T|0,m1[S]=c|0}let{Ah:X,Al:Y,Bh:Z,Bl:J,Ch:q,Cl:G,Dh:z,Dl:M,Eh:j,El:P,Fh:D,Fl:A,Gh:I,Gl:H,Hh:C,Hl:B}=this;for(let S=0;S<80;S++){let _=F$.rotrSH(j,P,14)^F$.rotrSH(j,P,18)^F$.rotrBH(j,P,41),k=F$.rotrSL(j,P,14)^F$.rotrSL(j,P,18)^F$.rotrBL(j,P,41),f=j&D^~j&I,g=P&A^~P&H,b=F$.add5L(B,k,g,X10[S],m1[S]),m=F$.add5H(b,C,_,f,Q10[S],h1[S]),l=b|0,h=F$.rotrSH(X,Y,28)^F$.rotrBH(X,Y,34)^F$.rotrBH(X,Y,39),c=F$.rotrSL(X,Y,28)^F$.rotrBL(X,Y,34)^F$.rotrBL(X,Y,39),T=X&Z^X&q^Z&q,K=Y&J^Y&G^J&G;C=I|0,B=H|0,I=D|0,H=A|0,D=j|0,A=P|0,{h:j,l:P}=F$.add(z|0,M|0,m|0,l|0),z=q|0,M=G|0,q=Z|0,G=J|0,Z=X|0,J=Y|0;let U=F$.add3L(l,c,K);X=F$.add3H(U,m,h,T),Y=U|0}({h:X,l:Y}=F$.add(this.Ah|0,this.Al|0,X|0,Y|0)),{h:Z,l:J}=F$.add(this.Bh|0,this.Bl|0,Z|0,J|0),{h:q,l:G}=F$.add(this.Ch|0,this.Cl|0,q|0,G|0),{h:z,l:M}=F$.add(this.Dh|0,this.Dl|0,z|0,M|0),{h:j,l:P}=F$.add(this.Eh|0,this.El|0,j|0,P|0),{h:D,l:A}=F$.add(this.Fh|0,this.Fl|0,D|0,A|0),{h:I,l:H}=F$.add(this.Gh|0,this.Gl|0,I|0,H|0),{h:C,l:B}=F$.add(this.Hh|0,this.Hl|0,C|0,B|0),this.set(X,Y,Z,J,q,G,z,M,j,P,D,A,I,H,C,B)}roundClean(){h1.fill(0),m1.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};Hj=g1(()=>new Lv)});function Y10(){if(typeof self!=="undefined")return self;if(typeof window!=="undefined")return window;if(typeof global!=="undefined")return global;throw new Error("unable to locate global object")}function XC($){switch($){case"sha256":return M5.create();case"sha512":return Hj.create()}o(!1,"invalid hashing algorithm name","algorithm",$)}function Fv($,Q){let X={sha256:M5,sha512:Hj}[$];return o(X!=null,"invalid hmac algorithm","algorithm",$),xG.create(X,Q)}function Bv($,Q,X,Y,Z){let J={sha256:M5,sha512:Hj}[Z];return o(J!=null,"invalid pbkdf2 algorithm","algorithm",Z),$V(J,$,Q,{c:X,dkLen:Y})}function Sv($){V0(Iv!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),o(Number.isInteger($)&&$>0&&$<=1024,"invalid length","length",$);let Q=new Uint8Array($);return Iv.getRandomValues(Q),Q}var Tv,Iv;var QV=y(()=>{Mj();oR();jj();wv();a0();Tv=Y10(),Iv=Tv.crypto||Tv.msCrypto});function xZ($,Q,X){let Y=L0(Q,"key"),Z=L0(X,"data");return D0(kv($,Y,Z))}var Ev=!1,_v=function($,Q,X){return Fv($,Q).update(X).digest()},kv;var xv=y(()=>{QV();a0();kv=_v;xZ._=_v;xZ.lock=function(){Ev=!0};xZ.register=function($){if(Ev)throw new Error("computeHmac is locked");kv=$};Object.freeze(xZ)});function W10($,Q=24){let X=new Uint32Array(10);for(let Y=24-Q;Y<24;Y++){for(let q=0;q<10;q++)X[q]=$[q]^$[q+10]^$[q+20]^$[q+30]^$[q+40];for(let q=0;q<10;q+=2){let G=(q+8)%10,z=(q+2)%10,M=X[z],j=X[z+1],P=fv(M,j,1)^X[G],D=vv(M,j,1)^X[G+1];for(let A=0;A<50;A+=10)$[q+A]^=P,$[q+A+1]^=D}let Z=$[2],J=$[3];for(let q=0;q<24;q++){let G=yv[q],z=fv(Z,J,G),M=vv(Z,J,G),j=gv[q];Z=$[j],J=$[j+1],$[j]=z,$[j+1]=M}for(let q=0;q<50;q+=10){for(let G=0;G<10;G++)X[G]=$[q+G];for(let G=0;G<10;G++)$[q+G]^=~X[(G+2)%10]&X[(G+4)%10]}$[0]^=K10[Y],$[1]^=U10[Y]}X.fill(0)}var gv,yv,bv,Z10,XV,J10,q10,G10,z10,K10,U10,fv=($,Q,X)=>X>32?eR($,Q,X):aR($,Q,X),vv=($,Q,X)=>X>32?$C($,Q,X):tR($,Q,X),YC,V10=($,Q,X)=>g1(()=>new YC(Q,$,X)),hv;var mv=y(()=>{$U();QC();KJ();[gv,yv,bv]=[[],[],[]],Z10=BigInt(0),XV=BigInt(1),J10=BigInt(2),q10=BigInt(7),G10=BigInt(256),z10=BigInt(113);for(let $=0,Q=XV,X=1,Y=0;$<24;$++){[X,Y]=[Y,(2*X+3*Y)%5],gv.push(2*(5*Y+X)),yv.push(($+1)*($+2)/2%64);let Z=Z10;for(let J=0;J<7;J++)if(Q=(Q<<XV^(Q>>q10)*z10)%G10,Q&J10)Z^=XV<<(XV<<BigInt(J))-XV;bv.push(Z)}[K10,U10]=sR(bv,!0);YC=class YC extends kG{constructor($,Q,X,Y=!1,Z=24){super();if(this.blockLen=$,this.suffix=Q,this.outputLen=X,this.enableXOF=Y,this.rounds=Z,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,TX(X),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=QU(this.state)}keccak(){W10(this.state32,this.rounds),this.posOut=0,this.pos=0}update($){O5(this);let{blockLen:Q,state:X}=this;$=zJ($);let Y=$.length;for(let Z=0;Z<Y;){let J=Math.min(Q-this.pos,Y-Z);for(let q=0;q<J;q++)X[this.pos++]^=$[Z++];if(this.pos===Q)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:$,suffix:Q,pos:X,blockLen:Y}=this;if($[X]^=Q,(Q&128)!==0&&X===Y-1)this.keccak();$[Y-1]^=128,this.keccak()}writeInto($){O5(this,!1),eW($),this.finish();let Q=this.state,{blockLen:X}=this;for(let Y=0,Z=$.length;Y<Z;){if(this.posOut>=X)this.keccak();let J=Math.min(X-this.posOut,Z-Y);$.set(Q.subarray(this.posOut,this.posOut+J),Y),this.posOut+=J,Y+=J}return $}xofInto($){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto($)}xof($){return TX($),this.xofInto(new Uint8Array($))}digestInto($){if(Uj($,this),this.finished)throw new Error("digest() was already called");return this.writeInto($),this.destroy(),$}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto($){let{blockLen:Q,suffix:X,outputLen:Y,rounds:Z,enableXOF:J}=this;return $||($=new YC(Q,X,Y,J,Z)),$.state32.set(this.state32),$.pos=this.pos,$.posOut=this.posOut,$.finished=this.finished,$.rounds=Z,$.suffix=X,$.outputLen=Y,$.enableXOF=J,$.destroyed=this.destroyed,$}};hv=V10(1,136,32)});function A$($){let Q=L0($,"data");return D0(lv(Q))}var cv=!1,pv=function($){return hv($)},lv;var uv=y(()=>{mv();a0();lv=pv;A$._=pv;A$.lock=function(){cv=!0};A$.register=function($){if(cv)throw new TypeError("keccak256 is locked");lv=$};Object.freeze(A$)});function dv($,Q,X,Y){if($===0)return Q^X^Y;else if($===1)return Q&X|~Q&Y;else if($===2)return(Q|~X)^Y;else if($===3)return Q&Y|X&~Y;else return Q^(X|~Y)}var O10,iv,M10,ZC,JC,nv,D10,j10,P10,H10,Nj=($,Q)=>$<<Q|$>>>32-Q,Aj,ov,rv;var sv=y(()=>{Dj();KJ();O10=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),iv=Uint8Array.from({length:16},($,Q)=>Q),M10=iv.map(($)=>(9*$+5)%16),ZC=[iv],JC=[M10];for(let $=0;$<4;$++)for(let Q of[ZC,JC])Q.push(Q[$].map((X)=>O10[X]));nv=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(($)=>new Uint8Array($)),D10=ZC.map(($,Q)=>$.map((X)=>nv[Q][X])),j10=JC.map(($,Q)=>$.map((X)=>nv[Q][X])),P10=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),H10=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);Aj=new Uint32Array(16);ov=class ov extends fG{constructor(){super(64,20,8,!0);this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:$,h1:Q,h2:X,h3:Y,h4:Z}=this;return[$,Q,X,Y,Z]}set($,Q,X,Y,Z){this.h0=$|0,this.h1=Q|0,this.h2=X|0,this.h3=Y|0,this.h4=Z|0}process($,Q){for(let D=0;D<16;D++,Q+=4)Aj[D]=$.getUint32(Q,!0);let X=this.h0|0,Y=X,Z=this.h1|0,J=Z,q=this.h2|0,G=q,z=this.h3|0,M=z,j=this.h4|0,P=j;for(let D=0;D<5;D++){let A=4-D,I=P10[D],H=H10[D],C=ZC[D],B=JC[D],S=D10[D],_=j10[D];for(let k=0;k<16;k++){let f=Nj(X+dv(D,Z,q,z)+Aj[C[k]]+I,S[k])+j|0;X=j,j=z,z=Nj(q,10)|0,q=Z,Z=f}for(let k=0;k<16;k++){let f=Nj(Y+dv(A,J,G,M)+Aj[B[k]]+H,_[k])+P|0;Y=P,P=M,M=Nj(G,10)|0,G=J,J=f}}this.set(this.h1+q+M|0,this.h2+z+P|0,this.h3+j+Y|0,this.h4+X+J|0,this.h0+Z+G|0)}roundClean(){Aj.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};rv=g1(()=>new ov)});function fZ($){let Q=L0($,"data");return D0(ev(Q))}var av=!1,tv=function($){return rv($)},ev;var $g=y(()=>{sv();a0();ev=tv;fZ._=tv;fZ.lock=function(){av=!0};fZ.register=function($){if(av)throw new TypeError("ripemd160 is locked");ev=$};Object.freeze(fZ)});function IX($,Q,X,Y,Z){let J=L0($,"password"),q=L0(Q,"salt");return D0(Yg(J,q,X,Y,Z))}var Qg=!1,Xg=function($,Q,X,Y,Z){return Bv($,Q,X,Y,Z)},Yg;var Zg=y(()=>{QV();a0();Yg=Xg;IX._=Xg;IX.lock=function(){Qg=!0};IX.register=function($){if(Qg)throw new Error("pbkdf2 is locked");Yg=$};Object.freeze(IX)});function aQ($){return Gg($)}var Jg=!1,qg=function($){return new Uint8Array(Sv($))},Gg;var zg=y(()=>{QV();Gg=qg;aQ._=qg;aQ.lock=function(){Jg=!0};aQ.register=function($){if(Jg)throw new Error("randomBytes is locked");Gg=$};Object.freeze(aQ)});function Kg($,Q,X,Y,Z,J){let q=$[Q++]^X[Y++],G=$[Q++]^X[Y++],z=$[Q++]^X[Y++],M=$[Q++]^X[Y++],j=$[Q++]^X[Y++],P=$[Q++]^X[Y++],D=$[Q++]^X[Y++],A=$[Q++]^X[Y++],I=$[Q++]^X[Y++],H=$[Q++]^X[Y++],C=$[Q++]^X[Y++],B=$[Q++]^X[Y++],S=$[Q++]^X[Y++],_=$[Q++]^X[Y++],k=$[Q++]^X[Y++],f=$[Q++]^X[Y++],g=q,b=G,m=z,l=M,h=j,c=P,T=D,K=A,U=I,W=H,V=C,N=B,L=S,F=_,R=k,O=f;for(let w=0;w<8;w+=2)h^=a$(g+L|0,7),U^=a$(h+g|0,9),L^=a$(U+h|0,13),g^=a$(L+U|0,18),W^=a$(c+b|0,7),F^=a$(W+c|0,9),b^=a$(F+W|0,13),c^=a$(b+F|0,18),R^=a$(V+T|0,7),m^=a$(R+V|0,9),T^=a$(m+R|0,13),V^=a$(T+m|0,18),l^=a$(O+N|0,7),K^=a$(l+O|0,9),N^=a$(K+l|0,13),O^=a$(N+K|0,18),b^=a$(g+l|0,7),m^=a$(b+g|0,9),l^=a$(m+b|0,13),g^=a$(l+m|0,18),T^=a$(c+h|0,7),K^=a$(T+c|0,9),h^=a$(K+T|0,13),c^=a$(h+K|0,18),N^=a$(V+W|0,7),U^=a$(N+V|0,9),W^=a$(U+N|0,13),V^=a$(W+U|0,18),L^=a$(O+R|0,7),F^=a$(L+O|0,9),R^=a$(F+L|0,13),O^=a$(R+F|0,18);Z[J++]=q+g|0,Z[J++]=G+b|0,Z[J++]=z+m|0,Z[J++]=M+l|0,Z[J++]=j+h|0,Z[J++]=P+c|0,Z[J++]=D+T|0,Z[J++]=A+K|0,Z[J++]=I+U|0,Z[J++]=H+W|0,Z[J++]=C+V|0,Z[J++]=B+N|0,Z[J++]=S+L|0,Z[J++]=_+F|0,Z[J++]=k+R|0,Z[J++]=f+O|0}function YU($,Q,X,Y,Z){let J=Y+0,q=Y+16*Z;for(let G=0;G<16;G++)X[q+G]=$[Q+(2*Z-1)*16+G];for(let G=0;G<Z;G++,J+=16,Q+=16){if(Kg(X,q,$,Q,X,J),G>0)q+=16;Kg(X,J,$,Q+=16,X,q)}}function Ug($,Q,X){let Y=Oj({dkLen:32,asyncTick:10,maxmem:1073742848},X),{N:Z,r:J,p:q,dkLen:G,asyncTick:z,maxmem:M,onProgress:j}=Y;if(TX(Z),TX(J),TX(q),TX(G),TX(z),TX(M),j!==void 0&&typeof j!=="function")throw new Error("progressCb should be function");let P=128*J,D=P/4;if(Z<=1||(Z&Z-1)!==0||Z>=2**(P/8)||Z>4294967296)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(q<0||q>137438953440/P)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(G<0||G>137438953440)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");let A=P*(Z+q);if(A>M)throw new Error(`Scrypt: parameters too large, ${A} (128 * r * (N + p)) > ${M} (maxmem)`);let I=$V(M5,$,Q,{c:1,dkLen:P*q}),H=QU(I),C=QU(new Uint8Array(P*Z)),B=QU(new Uint8Array(P)),S=()=>{};if(j){let _=2*Z*q,k=Math.max(Math.floor(_/1e4),1),f=0;S=()=>{if(f++,j&&(!(f%k)||f===_))j(f/_)}}return{N:Z,r:J,p:q,dkLen:G,blockSize32:D,V:C,B32:H,B:I,tmp:B,blockMixCb:S,asyncTick:z}}function Wg($,Q,X,Y,Z){let J=$V(M5,$,X,{c:1,dkLen:Q});return X.fill(0),Y.fill(0),Z.fill(0),J}function Vg($,Q,X){let{N:Y,r:Z,p:J,dkLen:q,blockSize32:G,V:z,B32:M,B:j,tmp:P,blockMixCb:D}=Ug($,Q,X);for(let A=0;A<J;A++){let I=G*A;for(let H=0;H<G;H++)z[H]=M[I+H];for(let H=0,C=0;H<Y-1;H++)YU(z,C,z,C+=G,Z),D();YU(z,(Y-1)*G,M,I,Z),D();for(let H=0;H<Y;H++){let C=M[I+G-16]%Y;for(let B=0;B<G;B++)P[B]=M[I+B]^z[C*G+B];YU(P,0,M,I,Z),D()}}return Wg($,q,j,z,P)}async function Og($,Q,X){let{N:Y,r:Z,p:J,dkLen:q,blockSize32:G,V:z,B32:M,B:j,tmp:P,blockMixCb:D,asyncTick:A}=Ug($,Q,X);for(let I=0;I<J;I++){let H=G*I;for(let B=0;B<G;B++)z[B]=M[H+B];let C=0;await Vj(Y-1,A,()=>{YU(z,C,z,C+=G,Z),D()}),YU(z,(Y-1)*G,M,H,Z),D(),await Vj(Y,A,()=>{let B=M[H+G-16]%Y;for(let S=0;S<G;S++)P[S]=M[H+S]^z[B*G+S];YU(P,0,M,H,Z),D()})}return Wg($,q,j,z,P)}var a$=($,Q)=>$<<Q|$>>>32-Q;var Mg=y(()=>{$U();jj();oR();KJ()});async function vZ($,Q,X,Y,Z,J,q){let G=L0($,"passwd"),z=L0(Q,"salt");return D0(await Ng(G,z,X,Y,Z,J,q))}function gZ($,Q,X,Y,Z,J){let q=L0($,"passwd"),G=L0(Q,"salt");return D0(Ag(q,G,X,Y,Z,J))}var Dg=!1,jg=!1,Pg=async function($,Q,X,Y,Z,J,q){return await Og($,Q,{N:X,r:Y,p:Z,dkLen:J,onProgress:q})},Hg=function($,Q,X,Y,Z,J){return Vg($,Q,{N:X,r:Y,p:Z,dkLen:J})},Ng,Ag;var Rg=y(()=>{Mg();a0();Ng=Pg,Ag=Hg;vZ._=Pg;vZ.lock=function(){jg=!0};vZ.register=function($){if(jg)throw new Error("scrypt is locked");Ng=$};Object.freeze(vZ);gZ._=Hg;gZ.lock=function(){Dg=!0};gZ.register=function($){if(Dg)throw new Error("scryptSync is locked");Ag=$};Object.freeze(gZ)});function c8($){let Q=L0($,"data");return D0(wg(Q))}function c1($){let Q=L0($,"data");return D0(Tg(Q))}var Cg=function($){return XC("sha256").update($).digest()},Lg=function($){return XC("sha512").update($).digest()},wg,Tg,Ig=!1,Fg=!1;var Bg=y(()=>{QV();a0();wg=Cg,Tg=Lg;c8._=Cg;c8.lock=function(){Ig=!0};c8.register=function($){if(Ig)throw new Error("sha256 is locked");wg=$};Object.freeze(c8);c1._=Lg;c1.lock=function(){Fg=!0};c1.register=function($){if(Fg)throw new Error("sha512 is locked");Tg=$};Object.freeze(c8)});var KC={};r8(KC,{validateObject:()=>l1,utf8ToBytes:()=>L10,numberToVarBytesBE:()=>R10,numberToHexUnpadded:()=>_g,numberToBytesLE:()=>wj,numberToBytesBE:()=>p1,hexToNumber:()=>GC,hexToBytes:()=>gG,equalBytes:()=>C10,ensureBytes:()=>cY,createHmacDrbg:()=>zC,concatBytes:()=>ZU,bytesToNumberLE:()=>Lj,bytesToNumberBE:()=>D5,bytesToHex:()=>vG,bitSet:()=>I10,bitMask:()=>YV,bitLen:()=>w10,bitGet:()=>T10});function vG($){if(!Cj($))throw new Error("Uint8Array expected");let Q="";for(let X=0;X<$.length;X++)Q+=A10[$[X]];return Q}function _g($){let Q=$.toString(16);return Q.length&1?`0${Q}`:Q}function GC($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);return BigInt($===""?"0":`0x${$}`)}function gG($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);let Q=$.length;if(Q%2)throw new Error("padded hex string expected, got unpadded hex of length "+Q);let X=new Uint8Array(Q/2);for(let Y=0;Y<X.length;Y++){let Z=Y*2,J=$.slice(Z,Z+2),q=Number.parseInt(J,16);if(Number.isNaN(q)||q<0)throw new Error("Invalid byte sequence");X[Y]=q}return X}function D5($){return GC(vG($))}function Lj($){if(!Cj($))throw new Error("Uint8Array expected");return GC(vG(Uint8Array.from($).reverse()))}function p1($,Q){return gG($.toString(16).padStart(Q*2,"0"))}function wj($,Q){return p1($,Q).reverse()}function R10($){return gG(_g($))}function cY($,Q,X){let Y;if(typeof Q==="string")try{Y=gG(Q)}catch(J){throw new Error(`${$} must be valid hex string, got "${Q}". Cause: ${J}`)}else if(Cj(Q))Y=Uint8Array.from(Q);else throw new Error(`${$} must be hex string or Uint8Array`);let Z=Y.length;if(typeof X==="number"&&Z!==X)throw new Error(`${$} expected ${X} bytes, got ${Z}`);return Y}function ZU(...$){let Q=new Uint8Array($.reduce((Y,Z)=>Y+Z.length,0)),X=0;return $.forEach((Y)=>{if(!Cj(Y))throw new Error("Uint8Array expected");Q.set(Y,X),X+=Y.length}),Q}function C10($,Q){if($.length!==Q.length)return!1;for(let X=0;X<$.length;X++)if($[X]!==Q[X])return!1;return!0}function L10($){if(typeof $!=="string")throw new Error(`utf8ToBytes expected string, got ${typeof $}`);return new Uint8Array(new TextEncoder().encode($))}function w10($){let Q;for(Q=0;$>Eg;$>>=Rj,Q+=1);return Q}function T10($,Q){return $>>BigInt(Q)&Rj}function zC($,Q,X){if(typeof $!=="number"||$<2)throw new Error("hashLen must be a number");if(typeof Q!=="number"||Q<2)throw new Error("qByteLen must be a number");if(typeof X!=="function")throw new Error("hmacFn must be a function");let Y=qC($),Z=qC($),J=0,q=()=>{Y.fill(1),Z.fill(0),J=0},G=(...P)=>X(Z,Y,...P),z=(P=qC())=>{if(Z=G(Sg([0]),P),Y=G(),P.length===0)return;Z=G(Sg([1]),P),Y=G()},M=()=>{if(J++>=1000)throw new Error("drbg: tried 1000 values");let P=0,D=[];while(P<Q){Y=G();let A=Y.slice();D.push(A),P+=Y.length}return ZU(...D)};return(P,D)=>{q(),z(P);let A=void 0;while(!(A=D(M())))z();return q(),A}}function l1($,Q,X={}){let Y=(Z,J,q)=>{let G=F10[J];if(typeof G!=="function")throw new Error(`Invalid validator "${J}", expected function`);let z=$[Z];if(q&&z===void 0)return;if(!G(z,$))throw new Error(`Invalid param ${String(Z)}=${z} (${typeof z}), expected ${J}`)};for(let[Z,J]of Object.entries(Q))Y(Z,J,!1);for(let[Z,J]of Object.entries(X))Y(Z,J,!0);return $}var Eg,Rj,N10,Cj=($)=>$ instanceof Uint8Array,A10,I10=($,Q,X)=>{return $|(X?Rj:Eg)<<BigInt(Q)},YV=($)=>(N10<<BigInt($-1))-Rj,qC=($)=>new Uint8Array($),Sg=($)=>Uint8Array.from($),F10;var ZV=y(()=>{/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Eg=BigInt(0),Rj=BigInt(1),N10=BigInt(2),A10=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));F10={bigint:($)=>typeof $==="bigint",function:($)=>typeof $==="function",boolean:($)=>typeof $==="boolean",string:($)=>typeof $==="string",stringOrUint8Array:($)=>typeof $==="string"||$ instanceof Uint8Array,isSafeInteger:($)=>Number.isSafeInteger($),array:($)=>Array.isArray($),field:($,Q)=>Q.Fp.isValid($),hash:($)=>typeof $==="function"&&Number.isSafeInteger($.outputLen)}});function FX($,Q){let X=$%Q;return X>=LQ?X:Q+X}function _10($,Q,X){if(X<=LQ||Q<LQ)throw new Error("Expected power/modulo > 0");if(X===p8)return LQ;let Y=p8;while(Q>LQ){if(Q&p8)Y=Y*$%X;$=$*$%X,Q>>=p8}return Y}function pY($,Q,X){let Y=$;while(Q-- >LQ)Y*=Y,Y%=X;return Y}function Tj($,Q){if($===LQ||Q<=LQ)throw new Error(`invert: expected positive integers, got n=${$} mod=${Q}`);let X=FX($,Q),Y=Q,Z=LQ,J=p8,q=p8,G=LQ;while(X!==LQ){let M=Y/X,j=Y%X,P=Z-q*M,D=J-G*M;Y=X,X=j,Z=q,J=G,q=P,G=D}if(Y!==p8)throw new Error("invert: does not exist");return FX(Z,Q)}function k10($){let Q=($-p8)/yG,X,Y,Z;for(X=$-p8,Y=0;X%yG===LQ;X/=yG,Y++);for(Z=yG;Z<$&&_10(Z,Q,$)!==$-p8;Z++);if(Y===1){let q=($+p8)/UC;return function G(z,M){let j=z.pow(M,q);if(!z.eql(z.sqr(j),M))throw new Error("Cannot find square root");return j}}let J=(X+p8)/yG;return function q(G,z){if(G.pow(z,Q)===G.neg(G.ONE))throw new Error("Cannot find square root");let M=Y,j=G.pow(G.mul(G.ONE,Z),X),P=G.pow(z,J),D=G.pow(z,X);while(!G.eql(D,G.ONE)){if(G.eql(D,G.ZERO))return G.ZERO;let A=1;for(let H=G.sqr(D);A<M;A++){if(G.eql(H,G.ONE))break;H=G.sqr(H)}let I=G.pow(j,p8<<BigInt(M-A-1));j=G.sqr(I),P=G.mul(P,I),D=G.mul(D,j),M=A}return P}}function x10($){if($%UC===B10){let Q=($+p8)/UC;return function X(Y,Z){let J=Y.pow(Z,Q);if(!Y.eql(Y.sqr(J),Z))throw new Error("Cannot find square root");return J}}if($%xg===kg){let Q=($-kg)/xg;return function X(Y,Z){let J=Y.mul(Z,yG),q=Y.pow(J,Q),G=Y.mul(Z,q),z=Y.mul(Y.mul(G,yG),q),M=Y.mul(G,Y.sub(z,Y.ONE));if(!Y.eql(Y.sqr(M),Z))throw new Error("Cannot find square root");return M}}if($%E10===S10);return k10($)}function WC($){let Q={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},X=f10.reduce((Y,Z)=>{return Y[Z]="function",Y},Q);return l1($,X)}function v10($,Q,X){if(X<LQ)throw new Error("Expected power > 0");if(X===LQ)return $.ONE;if(X===p8)return Q;let Y=$.ONE,Z=Q;while(X>LQ){if(X&p8)Y=$.mul(Y,Z);Z=$.sqr(Z),X>>=p8}return Y}function g10($,Q){let X=new Array(Q.length),Y=Q.reduce((J,q,G)=>{if($.is0(q))return J;return X[G]=J,$.mul(J,q)},$.ONE),Z=$.inv(Y);return Q.reduceRight((J,q,G)=>{if($.is0(q))return J;return X[G]=$.mul(J,X[G]),$.mul(J,q)},Z),X}function VC($,Q){let X=Q!==void 0?Q:$.toString(2).length,Y=Math.ceil(X/8);return{nBitLength:X,nByteLength:Y}}function fg($,Q,X=!1,Y={}){if($<=LQ)throw new Error(`Expected Field ORDER > 0, got ${$}`);let{nBitLength:Z,nByteLength:J}=VC($,Q);if(J>2048)throw new Error("Field lengths over 2048 bytes are not supported");let q=x10($),G=Object.freeze({ORDER:$,BITS:Z,BYTES:J,MASK:YV(Z),ZERO:LQ,ONE:p8,create:(z)=>FX(z,$),isValid:(z)=>{if(typeof z!=="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof z}`);return LQ<=z&&z<$},is0:(z)=>z===LQ,isOdd:(z)=>(z&p8)===p8,neg:(z)=>FX(-z,$),eql:(z,M)=>z===M,sqr:(z)=>FX(z*z,$),add:(z,M)=>FX(z+M,$),sub:(z,M)=>FX(z-M,$),mul:(z,M)=>FX(z*M,$),pow:(z,M)=>v10(G,z,M),div:(z,M)=>FX(z*Tj(M,$),$),sqrN:(z)=>z*z,addN:(z,M)=>z+M,subN:(z,M)=>z-M,mulN:(z,M)=>z*M,inv:(z)=>Tj(z,$),sqrt:Y.sqrt||((z)=>q(G,z)),invertBatch:(z)=>g10(G,z),cmov:(z,M,j)=>j?M:z,toBytes:(z)=>X?wj(z,J):p1(z,J),fromBytes:(z)=>{if(z.length!==J)throw new Error(`Fp.fromBytes: expected ${J}, got ${z.length}`);return X?Lj(z):D5(z)}});return Object.freeze(G)}function vg($){if(typeof $!=="bigint")throw new Error("field order must be bigint");let Q=$.toString(2).length;return Math.ceil(Q/8)}function OC($){let Q=vg($);return Q+Math.ceil(Q/2)}function gg($,Q,X=!1){let Y=$.length,Z=vg(Q),J=OC(Q);if(Y<16||Y<J||Y>1024)throw new Error(`expected ${J}-1024 bytes of input, got ${Y}`);let q=X?D5($):Lj($),G=FX(q,Q-p8)+p8;return X?wj(G,Z):p1(G,Z)}var LQ,p8,yG,B10,UC,kg,xg,S10,E10,f10;var Ij=y(()=>{ZV();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */LQ=BigInt(0),p8=BigInt(1),yG=BigInt(2),B10=BigInt(3),UC=BigInt(4),kg=BigInt(5),xg=BigInt(8),S10=BigInt(9),E10=BigInt(16);f10=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function yg($,Q){let X=(Z,J)=>{let q=J.negate();return Z?q:J},Y=(Z)=>{let J=Math.ceil(Q/Z)+1,q=2**(Z-1);return{windows:J,windowSize:q}};return{constTimeNegate:X,unsafeLadder(Z,J){let q=$.ZERO,G=Z;while(J>b10){if(J&MC)q=q.add(G);G=G.double(),J>>=MC}return q},precomputeWindow(Z,J){let{windows:q,windowSize:G}=Y(J),z=[],M=Z,j=M;for(let P=0;P<q;P++){j=M,z.push(j);for(let D=1;D<G;D++)j=j.add(M),z.push(j);M=j.double()}return z},wNAF(Z,J,q){let{windows:G,windowSize:z}=Y(Z),M=$.ZERO,j=$.BASE,P=BigInt(2**Z-1),D=2**Z,A=BigInt(Z);for(let I=0;I<G;I++){let H=I*z,C=Number(q&P);if(q>>=A,C>z)C-=D,q+=MC;let B=H,S=H+Math.abs(C)-1,_=I%2!==0,k=C<0;if(C===0)j=j.add(X(_,J[B]));else M=M.add(X(k,J[S]))}return{p:M,f:j}},wNAFCached(Z,J,q,G){let z=Z._WINDOW_SIZE||1,M=J.get(Z);if(!M){if(M=this.precomputeWindow(Z,z),z!==1)J.set(Z,G(M))}return this.wNAF(z,M,q)}}}function DC($){return WC($.Fp),l1($,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...VC($.n,$.nBitLength),...$,...{p:$.Fp.ORDER}})}var b10,MC;var bg=y(()=>{Ij();ZV();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */b10=BigInt(0),MC=BigInt(1)});function h10($){let Q=DC($);l1(Q,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:X,Fp:Y,a:Z}=Q;if(X){if(!Y.eql(Z,Y.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof X!=="object"||typeof X.beta!=="bigint"||typeof X.splitScalar!=="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...Q})}function p10($){let Q=h10($),{Fp:X}=Q,Y=Q.toBytes||((I,H,C)=>{let B=H.toAffine();return ZU(Uint8Array.from([4]),X.toBytes(B.x),X.toBytes(B.y))}),Z=Q.fromBytes||((I)=>{let H=I.subarray(1),C=X.fromBytes(H.subarray(0,X.BYTES)),B=X.fromBytes(H.subarray(X.BYTES,2*X.BYTES));return{x:C,y:B}});function J(I){let{a:H,b:C}=Q,B=X.sqr(I),S=X.mul(B,I);return X.add(X.add(S,X.mul(I,H)),C)}if(!X.eql(X.sqr(Q.Gy),J(Q.Gx)))throw new Error("bad generator point: equation left != right");function q(I){return typeof I==="bigint"&&j5<I&&I<Q.n}function G(I){if(!q(I))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function z(I){let{allowedPrivateKeyLengths:H,nByteLength:C,wrapPrivateKey:B,n:S}=Q;if(H&&typeof I!=="bigint"){if(I instanceof Uint8Array)I=vG(I);if(typeof I!=="string"||!H.includes(I.length))throw new Error("Invalid key");I=I.padStart(C*2,"0")}let _;try{_=typeof I==="bigint"?I:D5(cY("private key",I,C))}catch(k){throw new Error(`private key must be ${C} bytes, hex or bigint, not ${typeof I}`)}if(B)_=FX(_,S);return G(_),_}let M=new Map;function j(I){if(!(I instanceof P))throw new Error("ProjectivePoint expected")}class P{constructor(I,H,C){if(this.px=I,this.py=H,this.pz=C,I==null||!X.isValid(I))throw new Error("x required");if(H==null||!X.isValid(H))throw new Error("y required");if(C==null||!X.isValid(C))throw new Error("z required")}static fromAffine(I){let{x:H,y:C}=I||{};if(!I||!X.isValid(H)||!X.isValid(C))throw new Error("invalid affine point");if(I instanceof P)throw new Error("projective point not allowed");let B=(S)=>X.eql(S,X.ZERO);if(B(H)&&B(C))return P.ZERO;return new P(H,C,X.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){let H=X.invertBatch(I.map((C)=>C.pz));return I.map((C,B)=>C.toAffine(H[B])).map(P.fromAffine)}static fromHex(I){let H=P.fromAffine(Z(cY("pointHex",I)));return H.assertValidity(),H}static fromPrivateKey(I){return P.BASE.multiply(z(I))}_setWindowSize(I){this._WINDOW_SIZE=I,M.delete(this)}assertValidity(){if(this.is0()){if(Q.allowInfinityPoint&&!X.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:I,y:H}=this.toAffine();if(!X.isValid(I)||!X.isValid(H))throw new Error("bad point: x or y not FE");let C=X.sqr(H),B=J(I);if(!X.eql(C,B))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:I}=this.toAffine();if(X.isOdd)return!X.isOdd(I);throw new Error("Field doesn't support isOdd")}equals(I){j(I);let{px:H,py:C,pz:B}=this,{px:S,py:_,pz:k}=I,f=X.eql(X.mul(H,k),X.mul(S,B)),g=X.eql(X.mul(C,k),X.mul(_,B));return f&&g}negate(){return new P(this.px,X.neg(this.py),this.pz)}double(){let{a:I,b:H}=Q,C=X.mul(H,hg),{px:B,py:S,pz:_}=this,k=X.ZERO,f=X.ZERO,g=X.ZERO,b=X.mul(B,B),m=X.mul(S,S),l=X.mul(_,_),h=X.mul(B,S);return h=X.add(h,h),g=X.mul(B,_),g=X.add(g,g),k=X.mul(I,g),f=X.mul(C,l),f=X.add(k,f),k=X.sub(m,f),f=X.add(m,f),f=X.mul(k,f),k=X.mul(h,k),g=X.mul(C,g),l=X.mul(I,l),h=X.sub(b,l),h=X.mul(I,h),h=X.add(h,g),g=X.add(b,b),b=X.add(g,b),b=X.add(b,l),b=X.mul(b,h),f=X.add(f,b),l=X.mul(S,_),l=X.add(l,l),b=X.mul(l,h),k=X.sub(k,b),g=X.mul(l,m),g=X.add(g,g),g=X.add(g,g),new P(k,f,g)}add(I){j(I);let{px:H,py:C,pz:B}=this,{px:S,py:_,pz:k}=I,f=X.ZERO,g=X.ZERO,b=X.ZERO,m=Q.a,l=X.mul(Q.b,hg),h=X.mul(H,S),c=X.mul(C,_),T=X.mul(B,k),K=X.add(H,C),U=X.add(S,_);K=X.mul(K,U),U=X.add(h,c),K=X.sub(K,U),U=X.add(H,B);let W=X.add(S,k);return U=X.mul(U,W),W=X.add(h,T),U=X.sub(U,W),W=X.add(C,B),f=X.add(_,k),W=X.mul(W,f),f=X.add(c,T),W=X.sub(W,f),b=X.mul(m,U),f=X.mul(l,T),b=X.add(f,b),f=X.sub(c,b),b=X.add(c,b),g=X.mul(f,b),c=X.add(h,h),c=X.add(c,h),T=X.mul(m,T),U=X.mul(l,U),c=X.add(c,T),T=X.sub(h,T),T=X.mul(m,T),U=X.add(U,T),h=X.mul(c,U),g=X.add(g,h),h=X.mul(W,U),f=X.mul(K,f),f=X.sub(f,h),h=X.mul(K,c),b=X.mul(W,b),b=X.add(b,h),new P(f,g,b)}subtract(I){return this.add(I.negate())}is0(){return this.equals(P.ZERO)}wNAF(I){return A.wNAFCached(this,M,I,(H)=>{let C=X.invertBatch(H.map((B)=>B.pz));return H.map((B,S)=>B.toAffine(C[S])).map(P.fromAffine)})}multiplyUnsafe(I){let H=P.ZERO;if(I===j5)return H;if(G(I),I===yZ)return this;let{endo:C}=Q;if(!C)return A.unsafeLadder(this,I);let{k1neg:B,k1:S,k2neg:_,k2:k}=C.splitScalar(I),f=H,g=H,b=this;while(S>j5||k>j5){if(S&yZ)f=f.add(b);if(k&yZ)g=g.add(b);b=b.double(),S>>=yZ,k>>=yZ}if(B)f=f.negate();if(_)g=g.negate();return g=new P(X.mul(g.px,C.beta),g.py,g.pz),f.add(g)}multiply(I){G(I);let H=I,C,B,{endo:S}=Q;if(S){let{k1neg:_,k1:k,k2neg:f,k2:g}=S.splitScalar(H),{p:b,f:m}=this.wNAF(k),{p:l,f:h}=this.wNAF(g);b=A.constTimeNegate(_,b),l=A.constTimeNegate(f,l),l=new P(X.mul(l.px,S.beta),l.py,l.pz),C=b.add(l),B=m.add(h)}else{let{p:_,f:k}=this.wNAF(H);C=_,B=k}return P.normalizeZ([C,B])[0]}multiplyAndAddUnsafe(I,H,C){let B=P.BASE,S=(k,f)=>f===j5||f===yZ||!k.equals(B)?k.multiplyUnsafe(f):k.multiply(f),_=S(this,H).add(S(I,C));return _.is0()?void 0:_}toAffine(I){let{px:H,py:C,pz:B}=this,S=this.is0();if(I==null)I=S?X.ONE:X.inv(B);let _=X.mul(H,I),k=X.mul(C,I),f=X.mul(B,I);if(S)return{x:X.ZERO,y:X.ZERO};if(!X.eql(f,X.ONE))throw new Error("invZ was invalid");return{x:_,y:k}}isTorsionFree(){let{h:I,isTorsionFree:H}=Q;if(I===yZ)return!0;if(H)return H(P,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:I,clearCofactor:H}=Q;if(I===yZ)return this;if(H)return H(P,this);return this.multiplyUnsafe(Q.h)}toRawBytes(I=!0){return this.assertValidity(),Y(P,this,I)}toHex(I=!0){return vG(this.toRawBytes(I))}}P.BASE=new P(Q.Gx,Q.Gy,X.ONE),P.ZERO=new P(X.ZERO,X.ONE,X.ZERO);let D=Q.nBitLength,A=yg(P,Q.endo?Math.ceil(D/2):D);return{CURVE:Q,ProjectivePoint:P,normPrivateKeyToScalar:z,weierstrassEquation:J,isWithinCurveOrder:q}}function l10($){let Q=DC($);return l1(Q,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...Q})}function mg($){let Q=l10($),{Fp:X,n:Y}=Q,Z=X.BYTES+1,J=2*X.BYTES+1;function q(W){return j5<W&&W<X.ORDER}function G(W){return FX(W,Y)}function z(W){return Tj(W,Y)}let{ProjectivePoint:M,normPrivateKeyToScalar:j,weierstrassEquation:P,isWithinCurveOrder:D}=p10({...Q,toBytes(W,V,N){let L=V.toAffine(),F=X.toBytes(L.x),R=ZU;if(N)return R(Uint8Array.from([V.hasEvenY()?2:3]),F);else return R(Uint8Array.from([4]),F,X.toBytes(L.y))},fromBytes(W){let V=W.length,N=W[0],L=W.subarray(1);if(V===Z&&(N===2||N===3)){let F=D5(L);if(!q(F))throw new Error("Point is not on curve");let R=P(F),O=X.sqrt(R),w=(O&yZ)===yZ;if((N&1)===1!==w)O=X.neg(O);return{x:F,y:O}}else if(V===J&&N===4){let F=X.fromBytes(L.subarray(0,X.BYTES)),R=X.fromBytes(L.subarray(X.BYTES,2*X.BYTES));return{x:F,y:R}}else throw new Error(`Point of length ${V} was invalid. Expected ${Z} compressed bytes or ${J} uncompressed bytes`)}}),A=(W)=>vG(p1(W,Q.nByteLength));function I(W){let V=Y>>yZ;return W>V}function H(W){return I(W)?G(-W):W}let C=(W,V,N)=>D5(W.slice(V,N));class B{constructor(W,V,N){this.r=W,this.s=V,this.recovery=N,this.assertValidity()}static fromCompact(W){let V=Q.nByteLength;return W=cY("compactSignature",W,V*2),new B(C(W,0,V),C(W,V,2*V))}static fromDER(W){let{r:V,s:N}=bG.toSig(cY("DER",W));return new B(V,N)}assertValidity(){if(!D(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!D(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(W){return new B(this.r,this.s,W)}recoverPublicKey(W){let{r:V,s:N,recovery:L}=this,F=b(cY("msgHash",W));if(L==null||![0,1,2,3].includes(L))throw new Error("recovery id invalid");let R=L===2||L===3?V+Q.n:V;if(R>=X.ORDER)throw new Error("recovery id 2 or 3 invalid");let O=(L&1)===0?"02":"03",w=M.fromHex(O+A(R)),x=z(R),E=G(-F*x),v=G(N*x),p=M.BASE.multiplyAndAddUnsafe(w,E,v);if(!p)throw new Error("point at infinify");return p.assertValidity(),p}hasHighS(){return I(this.s)}normalizeS(){return this.hasHighS()?new B(this.r,G(-this.s),this.recovery):this}toDERRawBytes(){return gG(this.toDERHex())}toDERHex(){return bG.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return gG(this.toCompactHex())}toCompactHex(){return A(this.r)+A(this.s)}}let S={isValidPrivateKey(W){try{return j(W),!0}catch(V){return!1}},normPrivateKeyToScalar:j,randomPrivateKey:()=>{let W=OC(Q.n);return gg(Q.randomBytes(W),Q.n)},precompute(W=8,V=M.BASE){return V._setWindowSize(W),V.multiply(BigInt(3)),V}};function _(W,V=!0){return M.fromPrivateKey(W).toRawBytes(V)}function k(W){let V=W instanceof Uint8Array,N=typeof W==="string",L=(V||N)&&W.length;if(V)return L===Z||L===J;if(N)return L===2*Z||L===2*J;if(W instanceof M)return!0;return!1}function f(W,V,N=!0){if(k(W))throw new Error("first arg must be private key");if(!k(V))throw new Error("second arg must be public key");return M.fromHex(V).multiply(j(W)).toRawBytes(N)}let g=Q.bits2int||function(W){let V=D5(W),N=W.length*8-Q.nBitLength;return N>0?V>>BigInt(N):V},b=Q.bits2int_modN||function(W){return G(g(W))},m=YV(Q.nBitLength);function l(W){if(typeof W!=="bigint")throw new Error("bigint expected");if(!(j5<=W&&W<m))throw new Error(`bigint expected < 2^${Q.nBitLength}`);return p1(W,Q.nByteLength)}function h(W,V,N=c){if(["recovered","canonical"].some((X0)=>(X0 in N)))throw new Error("sign() legacy options not supported");let{hash:L,randomBytes:F}=Q,{lowS:R,prehash:O,extraEntropy:w}=N;if(R==null)R=!0;if(W=cY("msgHash",W),O)W=cY("prehashed msgHash",L(W));let x=b(W),E=j(V),v=[l(E),l(x)];if(w!=null){let X0=w===!0?F(X.BYTES):w;v.push(cY("extraEntropy",X0))}let p=ZU(...v),i=x;function s(X0){let n=g(X0);if(!D(n))return;let r=z(n),Z0=M.BASE.multiply(n).toAffine(),e=G(Z0.x);if(e===j5)return;let Q0=G(r*G(i+e*E));if(Q0===j5)return;let t=(Z0.x===e?0:2)|Number(Z0.y&yZ),a=Q0;if(R&&I(Q0))a=H(Q0),t^=1;return new B(e,a,t)}return{seed:p,k2sig:s}}let c={lowS:Q.lowS,prehash:!1},T={lowS:Q.lowS,prehash:!1};function K(W,V,N=c){let{seed:L,k2sig:F}=h(W,V,N),R=Q;return zC(R.hash.outputLen,R.nByteLength,R.hmac)(L,F)}M.BASE._setWindowSize(8);function U(W,V,N,L=T){let F=W;if(V=cY("msgHash",V),N=cY("publicKey",N),"strict"in L)throw new Error("options.strict was renamed to lowS");let{lowS:R,prehash:O}=L,w=void 0,x;try{if(typeof F==="string"||F instanceof Uint8Array)try{w=B.fromDER(F)}catch(Z0){if(!(Z0 instanceof bG.Err))throw Z0;w=B.fromCompact(F)}else if(typeof F==="object"&&typeof F.r==="bigint"&&typeof F.s==="bigint"){let{r:Z0,s:e}=F;w=new B(Z0,e)}else throw new Error("PARSE");x=M.fromHex(N)}catch(Z0){if(Z0.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(R&&w.hasHighS())return!1;if(O)V=Q.hash(V);let{r:E,s:v}=w,p=b(V),i=z(v),s=G(p*i),X0=G(E*i),n=M.BASE.multiplyAndAddUnsafe(x,s,X0)?.toAffine();if(!n)return!1;return G(n.x)===E}return{CURVE:Q,getPublicKey:_,getSharedSecret:f,sign:K,verify:U,ProjectivePoint:M,Signature:B,utils:S}}var m10,c10,bG,j5,yZ,Jw0,hg,qw0;var cg=y(()=>{Ij();ZV();ZV();bg();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */({bytesToNumberBE:m10,hexToBytes:c10}=KC),bG={Err:class $ extends Error{constructor(Q=""){super(Q)}},_parseInt($){let{Err:Q}=bG;if($.length<2||$[0]!==2)throw new Q("Invalid signature integer tag");let X=$[1],Y=$.subarray(2,X+2);if(!X||Y.length!==X)throw new Q("Invalid signature integer: wrong length");if(Y[0]&128)throw new Q("Invalid signature integer: negative");if(Y[0]===0&&!(Y[1]&128))throw new Q("Invalid signature integer: unnecessary leading zero");return{d:m10(Y),l:$.subarray(X+2)}},toSig($){let{Err:Q}=bG,X=typeof $==="string"?c10($):$;if(!(X instanceof Uint8Array))throw new Error("ui8a expected");let Y=X.length;if(Y<2||X[0]!=48)throw new Q("Invalid signature tag");if(X[1]!==Y-2)throw new Q("Invalid signature: incorrect length");let{d:Z,l:J}=bG._parseInt(X.subarray(2)),{d:q,l:G}=bG._parseInt(J);if(G.length)throw new Q("Invalid signature: left bytes after parsing");return{r:Z,s:q}},hexFromSig($){let Q=(M)=>Number.parseInt(M[0],16)&8?"00"+M:M,X=(M)=>{let j=M.toString(16);return j.length&1?`0${j}`:j},Y=Q(X($.s)),Z=Q(X($.r)),J=Y.length/2,q=Z.length/2,G=X(J),z=X(q);return`30${X(q+J+4)}02${z}${Z}02${G}${Y}`}},j5=BigInt(0),yZ=BigInt(1),Jw0=BigInt(2),hg=BigInt(3),qw0=BigInt(4)});function u10($){return{hash:$,hmac:(Q,...X)=>xG($,Q,Nv(...X)),randomBytes:Av}}function pg($,Q){let X=(Y)=>mg({...$,...u10(Y)});return Object.freeze({...X(Q),create:X})}var lg=y(()=>{Mj();KJ();cg();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */});function i10($){let Q=ig,X=BigInt(3),Y=BigInt(6),Z=BigInt(11),J=BigInt(22),q=BigInt(23),G=BigInt(44),z=BigInt(88),M=$*$*$%Q,j=M*M*$%Q,P=pY(j,X,Q)*j%Q,D=pY(P,X,Q)*j%Q,A=pY(D,jC,Q)*M%Q,I=pY(A,Z,Q)*A%Q,H=pY(I,J,Q)*I%Q,C=pY(H,G,Q)*H%Q,B=pY(C,z,Q)*C%Q,S=pY(B,G,Q)*H%Q,_=pY(S,X,Q)*j%Q,k=pY(_,q,Q)*I%Q,f=pY(k,Y,Q)*M%Q,g=pY(f,jC,Q);if(!PC.eql(PC.sqr(g),$))throw new Error("Cannot find square root");return g}var ig,ug,d10,jC,dg=($,Q)=>($+Q/jC)/Q,PC,P5,Dw0,jw0;var ng=y(()=>{jj();Ij();lg();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */ig=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ug=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),d10=BigInt(1),jC=BigInt(2);PC=fg(ig,void 0,void 0,{sqrt:i10}),P5=pg({a:BigInt(0),b:BigInt(7),Fp:PC,n:ug,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:($)=>{let Q=ug,X=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),Y=-d10*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),Z=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),J=X,q=BigInt("0x100000000000000000000000000000000"),G=dg(J*$,Q),z=dg(-Y*$,Q),M=FX($-G*X-z*Z,Q),j=FX(-G*Y-z*J,Q),P=M>q,D=j>q;if(P)M=Q-M;if(D)j=Q-j;if(M>q||j>q)throw new Error("splitScalar: Endomorphism failed, k="+$);return{k1neg:P,k1:M,k2neg:D,k2:j}}}},M5),Dw0=BigInt(0),jw0=P5.ProjectivePoint});var bZ="0x0000000000000000000000000000000000000000";var hG="0x0000000000000000000000000000000000000000000000000000000000000000";var Fj,Bj,Sj,Ej,_j;var og=y(()=>{Fj=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Bj=BigInt("1000000000000000000"),Sj=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Ej=BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1),_j=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff")});var kj="",JU=`\x19Ethereum Signed Message:
`;var qU=y(()=>{og()});function $y($){return m8(p$($),32)}var rg,sg,ag,tg,eg,xj,GU,Y8;var HC=y(()=>{qU();a0();rg=BigInt(0),sg=BigInt(1),ag=BigInt(2),tg=BigInt(27),eg=BigInt(28),xj=BigInt(35),GU={};Y8=class Y8{#$;#Q;#X;#Y;get r(){return this.#$}set r($){o(uX($)===32,"invalid r","value",$),this.#$=D0($)}get s(){return o(parseInt(this.#Q.substring(0,3))<8,"non-canonical s; use ._s","s",this.#Q),this.#Q}set s($){o(uX($)===32,"invalid s","value",$),this.#Q=D0($)}get _s(){return this.#Q}isValid(){return parseInt(this.#Q.substring(0,3))<8}get v(){return this.#X}set v($){let Q=Y$($,"value");o(Q===27||Q===28,"invalid v","v",$),this.#X=Q}get networkV(){return this.#Y}get legacyChainId(){let $=this.networkV;if($==null)return null;return Y8.getChainId($)}get yParity(){return this.v===27?0:1}get yParityAndS(){let $=L0(this.s);if(this.yParity)$[0]|=128;return D0($)}get compactSerialized(){return V$([this.r,this.yParityAndS])}get serialized(){return V$([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor($,Q,X,Y){EQ($,GU,"Signature"),this.#$=Q,this.#Q=X,this.#X=Y,this.#Y=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){let $=new Y8(GU,this.r,this._s,this.v);if(this.networkV)$.#Y=this.networkV;return $}toJSON(){let $=this.networkV;return{_type:"signature",networkV:$!=null?$.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId($){let Q=n0($,"v");if(Q==tg||Q==eg)return rg;return o(Q>=xj,"invalid EIP-155 v","v",$),(Q-xj)/ag}static getChainIdV($,Q){return n0($)*ag+BigInt(35+Q-27)}static getNormalizedV($){let Q=n0($);if(Q===rg||Q===tg)return 27;if(Q===sg||Q===eg)return 28;return o(Q>=xj,"invalid v","v",$),Q&sg?27:28}static from($){function Q(z,M){o(z,M,"signature",$)}if($==null)return new Y8(GU,hG,hG,27);if(typeof $==="string"){let z=L0($,"signature");if(z.length===64){let M=D0(z.slice(0,32)),j=z.slice(32,64),P=j[0]&128?28:27;return j[0]&=127,new Y8(GU,M,D0(j),P)}if(z.length===65){let M=D0(z.slice(0,32)),j=D0(z.slice(32,64)),P=Y8.getNormalizedV(z[64]);return new Y8(GU,M,j,P)}Q(!1,"invalid raw signature length")}if($ instanceof Y8)return $.clone();let X=$.r;Q(X!=null,"missing r");let Y=$y(X),Z=function(z,M){if(z!=null)return $y(z);if(M!=null){Q(w$(M,32),"invalid yParityAndS");let j=L0(M);return j[0]&=127,D0(j)}Q(!1,"missing s")}($.s,$.yParityAndS),{networkV:J,v:q}=function(z,M,j){if(z!=null){let P=n0(z);return{networkV:P>=xj?P:void 0,v:Y8.getNormalizedV(P)}}if(M!=null)return Q(w$(M,32),"invalid yParityAndS"),{v:L0(M)[0]&128?28:27};if(j!=null){switch(Y$(j,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}Q(!1,"invalid yParity")}Q(!1,"missing v")}($.v,$.yParityAndS,$.yParity),G=new Y8(GU,Y,Z,q);if(J)G.#Y=J;return Q($.yParity==null||Y$($.yParity,"sig.yParity")===G.yParity,"yParity mismatch"),Q($.yParityAndS==null||$.yParityAndS===G.yParityAndS,"yParityAndS mismatch"),G}}});class l8{#$;constructor($){o(uX($)===32,"invalid private key","privateKey","[REDACTED]"),this.#$=D0($)}get privateKey(){return this.#$}get publicKey(){return l8.computePublicKey(this.#$)}get compressedPublicKey(){return l8.computePublicKey(this.#$,!0)}sign($){o(uX($)===32,"invalid digest length","digest",$);let Q=P5.sign(P8($),P8(this.#$),{lowS:!0});return Y8.from({r:RQ(Q.r,32),s:RQ(Q.s,32),v:Q.recovery?28:27})}computeSharedSecret($){let Q=l8.computePublicKey($);return D0(P5.getSharedSecret(P8(this.#$),L0(Q),!1))}static computePublicKey($,Q){let X=L0($,"key");if(X.length===32){let Z=P5.getPublicKey(X,!!Q);return D0(Z)}if(X.length===64){let Z=new Uint8Array(65);Z[0]=4,Z.set(X,1),X=Z}let Y=P5.ProjectivePoint.fromHex(X);return D0(Y.toRawBytes(Q))}static recoverPublicKey($,Q){o(uX($)===32,"invalid digest length","digest",$);let X=Y8.from(Q),Y=P5.Signature.fromCompact(P8(V$([X.r,X.s])));Y=Y.addRecoveryBit(X.yParity);let Z=Y.recoverPublicKey(P8($));return o(Z!=null,"invalid signature for digest","signature",Q),"0x"+Z.toHex(!1)}static addPoints($,Q,X){let Y=P5.ProjectivePoint.fromHex(l8.computePublicKey($).substring(2)),Z=P5.ProjectivePoint.fromHex(l8.computePublicKey(Q).substring(2));return"0x"+Y.add(Z).toHex(!!X)}}var Qy=y(()=>{ng();a0();HC()});function NC(){xZ.lock(),A$.lock(),IX.lock(),aQ.lock(),fZ.lock(),vZ.lock(),gZ.lock(),c8.lock(),c1.lock(),aQ.lock()}var XQ=y(()=>{xv();uv();$g();Zg();zg();Rg();Bg();Qy();HC()});function Xy($){$=$.toLowerCase();let Q=$.substring(2).split(""),X=new Uint8Array(40);for(let Z=0;Z<40;Z++)X[Z]=Q[Z].charCodeAt(0);let Y=L0(A$(X));for(let Z=0;Z<40;Z+=2){if(Y[Z>>1]>>4>=8)Q[Z]=Q[Z].toUpperCase();if((Y[Z>>1]&15)>=8)Q[Z+1]=Q[Z+1].toUpperCase()}return"0x"+Q.join("")}function Zy($){$=$.toUpperCase(),$=$.substring(4)+$.substring(0,2)+"00";let Q=$.split("").map((Y)=>{return AC[Y]}).join("");while(Q.length>=Yy){let Y=Q.substring(0,Yy);Q=parseInt(Y,10)%97+Q.substring(Y.length)}let X=String(98-parseInt(Q,10)%97);while(X.length<2)X="0"+X;return X}function s10($){$=$.toLowerCase();let Q=n10;for(let X=0;X<$.length;X++)Q=Q*o10+r10[$[X]];return Q}function J$($){if(o(typeof $==="string","invalid address","address",$),$.match(/^(0x)?[0-9a-fA-F]{40}$/)){if(!$.startsWith("0x"))$="0x"+$;let Q=Xy($);return o(!$.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||Q===$,"bad address checksum","address",$),Q}if($.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){o($.substring(2,4)===Zy($),"bad icap checksum","address",$);let Q=s10($.substring(4)).toString(16);while(Q.length<40)Q="0"+Q;return Xy("0x"+Q)}o(!1,"invalid address","address",$)}function fj($){let Q=BigInt(J$($)).toString(36).toUpperCase();while(Q.length<30)Q="0"+Q;return"XE"+Zy("XE00"+Q)+Q}var n10,o10,AC,Yy=15,r10;var vj=y(()=>{XQ();a0();n10=BigInt(0),o10=BigInt(36);AC={};for(let $=0;$<10;$++)AC[String($)]=String($);for(let $=0;$<26;$++)AC[String.fromCharCode(65+$)]=String(10+$);r10=function(){let $={};for(let Q=0;Q<36;Q++){let X="0123456789abcdefghijklmnopqrstuvwxyz"[Q];$[X]=BigInt(Q)}return $}()});function u1($){let Q=J$($.from),Y=n0($.nonce,"tx.nonce").toString(16);if(Y==="0")Y="0x";else if(Y.length%2)Y="0x0"+Y;else Y="0x"+Y;return J$(c$(A$(wX([Q,Y])),12))}function gj($,Q,X){let Y=J$($),Z=L0(Q,"salt"),J=L0(X,"initCodeHash");return o(Z.length===32,"salt must be 32 bytes","salt",Q),o(J.length===32,"initCodeHash must be 32 bytes","initCodeHash",X),J$(c$(A$(V$(["0xff",Y,Z,J])),12))}var Jy=y(()=>{XQ();a0();vj()});function mG($){return $&&typeof $.getAddress==="function"}function yj($){try{return J$($),!0}catch(Q){}return!1}async function RC($,Q){let X=await Q;if(X==null||X==="0x0000000000000000000000000000000000000000")V0(typeof $!=="string","unconfigured name","UNCONFIGURED_NAME",{value:$}),o(!1,"invalid AddressLike value; did not resolve to a value address","target",$);return J$(X)}function H8($,Q){if(typeof $==="string"){if($.match(/^0x[0-9a-f]{40}$/i))return J$($);return V0(Q!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),RC($,Q.resolveName($))}else if(mG($))return RC($,$.getAddress());else if($&&typeof $.then==="function")return RC($,$);o(!1,"unsupported addressable value","target",$)}var qy=y(()=>{a0();vj()});var s8=y(()=>{vj();Jy();qy()});function Q$($,Q){let X=!1;if(Q<0)X=!0,Q*=-1;return new v$(N9,`${X?"":"u"}int${Q}`,$,{signed:X,width:Q})}function t$($,Q){return new v$(N9,`bytes${Q?Q:""}`,$,{size:Q})}class v${type;value;#$;_typedSymbol;constructor($,Q,X,Y){if(Y==null)Y=null;EQ(N9,$,"Typed"),E0(this,{_typedSymbol:Gy,type:Q,value:X}),this.#$=Y,this.format()}format(){if(this.type==="array")throw new Error("");else if(this.type==="dynamicArray")throw new Error("");else if(this.type==="tuple")return`tuple(${this.value.map(($)=>$.format()).join(",")})`;return this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#$}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");if(this.#$===!0)return-1;if(this.#$===!1)return this.value.length;return null}static from($,Q){return new v$(N9,$,Q)}static uint8($){return Q$($,8)}static uint16($){return Q$($,16)}static uint24($){return Q$($,24)}static uint32($){return Q$($,32)}static uint40($){return Q$($,40)}static uint48($){return Q$($,48)}static uint56($){return Q$($,56)}static uint64($){return Q$($,64)}static uint72($){return Q$($,72)}static uint80($){return Q$($,80)}static uint88($){return Q$($,88)}static uint96($){return Q$($,96)}static uint104($){return Q$($,104)}static uint112($){return Q$($,112)}static uint120($){return Q$($,120)}static uint128($){return Q$($,128)}static uint136($){return Q$($,136)}static uint144($){return Q$($,144)}static uint152($){return Q$($,152)}static uint160($){return Q$($,160)}static uint168($){return Q$($,168)}static uint176($){return Q$($,176)}static uint184($){return Q$($,184)}static uint192($){return Q$($,192)}static uint200($){return Q$($,200)}static uint208($){return Q$($,208)}static uint216($){return Q$($,216)}static uint224($){return Q$($,224)}static uint232($){return Q$($,232)}static uint240($){return Q$($,240)}static uint248($){return Q$($,248)}static uint256($){return Q$($,256)}static uint($){return Q$($,256)}static int8($){return Q$($,-8)}static int16($){return Q$($,-16)}static int24($){return Q$($,-24)}static int32($){return Q$($,-32)}static int40($){return Q$($,-40)}static int48($){return Q$($,-48)}static int56($){return Q$($,-56)}static int64($){return Q$($,-64)}static int72($){return Q$($,-72)}static int80($){return Q$($,-80)}static int88($){return Q$($,-88)}static int96($){return Q$($,-96)}static int104($){return Q$($,-104)}static int112($){return Q$($,-112)}static int120($){return Q$($,-120)}static int128($){return Q$($,-128)}static int136($){return Q$($,-136)}static int144($){return Q$($,-144)}static int152($){return Q$($,-152)}static int160($){return Q$($,-160)}static int168($){return Q$($,-168)}static int176($){return Q$($,-176)}static int184($){return Q$($,-184)}static int192($){return Q$($,-192)}static int200($){return Q$($,-200)}static int208($){return Q$($,-208)}static int216($){return Q$($,-216)}static int224($){return Q$($,-224)}static int232($){return Q$($,-232)}static int240($){return Q$($,-240)}static int248($){return Q$($,-248)}static int256($){return Q$($,-256)}static int($){return Q$($,-256)}static bytes1($){return t$($,1)}static bytes2($){return t$($,2)}static bytes3($){return t$($,3)}static bytes4($){return t$($,4)}static bytes5($){return t$($,5)}static bytes6($){return t$($,6)}static bytes7($){return t$($,7)}static bytes8($){return t$($,8)}static bytes9($){return t$($,9)}static bytes10($){return t$($,10)}static bytes11($){return t$($,11)}static bytes12($){return t$($,12)}static bytes13($){return t$($,13)}static bytes14($){return t$($,14)}static bytes15($){return t$($,15)}static bytes16($){return t$($,16)}static bytes17($){return t$($,17)}static bytes18($){return t$($,18)}static bytes19($){return t$($,19)}static bytes20($){return t$($,20)}static bytes21($){return t$($,21)}static bytes22($){return t$($,22)}static bytes23($){return t$($,23)}static bytes24($){return t$($,24)}static bytes25($){return t$($,25)}static bytes26($){return t$($,26)}static bytes27($){return t$($,27)}static bytes28($){return t$($,28)}static bytes29($){return t$($,29)}static bytes30($){return t$($,30)}static bytes31($){return t$($,31)}static bytes32($){return t$($,32)}static address($){return new v$(N9,"address",$)}static bool($){return new v$(N9,"bool",!!$)}static bytes($){return new v$(N9,"bytes",$)}static string($){return new v$(N9,"string",$)}static array($,Q){throw new Error("not implemented yet")}static tuple($,Q){throw new Error("not implemented yet")}static overrides($){return new v$(N9,"overrides",Object.assign({},$))}static isTyped($){return $&&typeof $==="object"&&"_typedSymbol"in $&&$._typedSymbol===Gy}static dereference($,Q){if(v$.isTyped($)){if($.type!==Q)throw new Error(`invalid type: expecetd ${Q}, got ${$.type}`);return $.value}return $}}var N9,Gy;var UJ=y(()=>{a0();N9={};Gy=Symbol.for("_ethers_typed")});var CC;var zy=y(()=>{s8();uK();UJ();kZ();CC=class CC extends CQ{constructor($){super("address","address",$,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode($,Q){let X=v$.dereference(Q,"string");try{X=J$(X)}catch(Y){return this._throwError(Y.message,Q)}return $.writeValue(X)}decode($){return J$(RQ($.readValue(),20))}}});var LC;var Ky=y(()=>{kZ();LC=class LC extends CQ{coder;constructor($){super($.name,$.type,"_",$.dynamic);this.coder=$}defaultValue(){return this.coder.defaultValue()}encode($,Q){return this.coder.encode($,Q)}decode($){return this.coder.decode($)}}});function wC($,Q,X){let Y=[];if(Array.isArray(X))Y=X;else if(X&&typeof X==="object"){let z={};Y=Q.map((M)=>{let j=M.localName;return V0(j,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:M},value:X}),V0(!z[j],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:M},value:X}),z[j]=!0,X[j]})}else o(!1,"invalid tuple value","tuple",X);o(Q.length===Y.length,"types/value length mismatch","tuple",X);let Z=new eK,J=new eK,q=[];Q.forEach((z,M)=>{let j=Y[M];if(z.dynamic){let P=J.length;z.encode(J,j);let D=Z.writeUpdatableValue();q.push((A)=>{D(A+P)})}else z.encode(Z,j)}),q.forEach((z)=>{z(Z.length)});let G=$.appendWriter(Z);return G+=$.appendWriter(J),G}function TC($,Q){let X=[],Y=[],Z=$.subReader(0);return Q.forEach((J)=>{let q=null;if(J.dynamic){let G=$.readIndex(),z=Z.subReader(G);try{q=J.decode(z)}catch(M){if(i$(M,"BUFFER_OVERRUN"))throw M;q=M,q.baseType=J.name,q.name=J.localName,q.type=J.type}}else try{q=J.decode($)}catch(G){if(i$(G,"BUFFER_OVERRUN"))throw G;q=G,q.baseType=J.name,q.name=J.localName,q.type=J.type}if(q==null)throw new Error("investigate");X.push(q),Y.push(J.localName||null)}),dX.fromItems(X,Y)}var IC;var FC=y(()=>{a0();UJ();kZ();Ky();IC=class IC extends CQ{coder;length;constructor($,Q,X){let Y=$.type+"["+(Q>=0?Q:"")+"]",Z=Q===-1||$.dynamic;super("array",Y,X,Z);E0(this,{coder:$,length:Q})}defaultValue(){let $=this.coder.defaultValue(),Q=[];for(let X=0;X<this.length;X++)Q.push($);return Q}encode($,Q){let X=v$.dereference(Q,"array");if(!Array.isArray(X))this._throwError("expected array value",X);let Y=this.length;if(Y===-1)Y=X.length,$.writeValue(X.length);_1(X.length,Y,"coder array"+(this.localName?" "+this.localName:""));let Z=[];for(let J=0;J<X.length;J++)Z.push(this.coder);return wC($,Z,X)}decode($){let Q=this.length;if(Q===-1)Q=$.readIndex(),V0(Q*sQ<=$.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:$.bytes,offset:Q*sQ,length:$.dataLength});let X=[];for(let Y=0;Y<Q;Y++)X.push(new LC(this.coder));return TC($,X)}}});var BC;var Uy=y(()=>{UJ();kZ();BC=class BC extends CQ{constructor($){super("bool","bool",$,!1)}defaultValue(){return!1}encode($,Q){let X=v$.dereference(Q,"bool");return $.writeValue(X?1:0)}decode($){return!!$.readValue()}}});var bj,SC;var EC=y(()=>{a0();kZ();bj=class bj extends CQ{constructor($,Q){super($,$,Q,!0)}defaultValue(){return"0x"}encode($,Q){Q=P8(Q);let X=$.writeValue(Q.length);return X+=$.writeBytes(Q),X}decode($){return $.readBytes($.readIndex(),!0)}};SC=class SC extends bj{constructor($){super("bytes",$)}decode($){return D0(super.decode($))}}});var _C;var Wy=y(()=>{a0();UJ();kZ();_C=class _C extends CQ{size;constructor($,Q){let X="bytes"+String($);super(X,X,Q,!1);E0(this,{size:$},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode($,Q){let X=P8(v$.dereference(Q,this.type));if(X.length!==this.size)this._throwError("incorrect data length",Q);return $.writeBytes(X)}decode($){return D0($.readBytes(this.size))}}});var a10,kC;var Vy=y(()=>{kZ();a10=new Uint8Array([]);kC=class kC extends CQ{constructor($){super("null","",$,!1)}defaultValue(){return null}encode($,Q){if(Q!=null)this._throwError("not null",Q);return $.writeBytes(a10)}decode($){return $.readBytes(0),null}}});var t10,e10,$70,xC;var Oy=y(()=>{a0();UJ();kZ();t10=BigInt(0),e10=BigInt(1),$70=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");xC=class xC extends CQ{size;signed;constructor($,Q,X){let Y=(Q?"int":"uint")+$*8;super(Y,Y,X,!1);E0(this,{size:$,signed:Q},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode($,Q){let X=n0(v$.dereference(Q,this.type)),Y=RY($70,sQ*8);if(this.signed){let Z=RY(Y,this.size*8-1);if(X>Z||X<-(Z+e10))this._throwError("value out-of-bounds",Q);X=qJ(X,8*sQ)}else if(X<t10||X>RY(Y,this.size*8))this._throwError("value out-of-bounds",Q);return $.writeValue(X)}decode($){let Q=RY($.readValue(),this.size*8);if(this.signed)Q=JJ(Q,this.size*8);return Q}}});var fC;var My=y(()=>{Qj();UJ();EC();fC=class fC extends bj{constructor($){super("string",$)}defaultValue(){return""}encode($,Q){return super.encode($,s$(v$.dereference(Q,"string")))}decode($){return LX(super.decode($))}}});var zU;var Dy=y(()=>{UJ();kZ();FC();zU=class zU extends CQ{coders;constructor($,Q){let X=!1,Y=[];$.forEach((J)=>{if(J.dynamic)X=!0;Y.push(J.type)});let Z="tuple("+Y.join(",")+")";super("tuple",Z,Q,X);E0(this,{coders:Object.freeze($.slice())})}defaultValue(){let $=[];this.coders.forEach((X)=>{$.push(X.defaultValue())});let Q=this.coders.reduce((X,Y)=>{let Z=Y.localName;if(Z){if(!X[Z])X[Z]=0;X[Z]++}return X},{});return this.coders.forEach((X,Y)=>{let Z=X.localName;if(!Z||Q[Z]!==1)return;if(Z==="length")Z="_length";if($[Z]!=null)return;$[Z]=$[Y]}),Object.freeze($)}encode($,Q){let X=v$.dereference(Q,"tuple");return wC($,this.coders,X)}decode($){return TC($,this.coders)}}});function vC($,Q){return{address:J$($),storageKeys:Q.map((X,Y)=>{return o(w$(X,32),"invalid slot",`storageKeys[${Y}]`,X),X.toLowerCase()})}}function _Q($){if(Array.isArray($))return $.map((X,Y)=>{if(Array.isArray(X))return o(X.length===2,"invalid slot set",`value[${Y}]`,X),vC(X[0],X[1]);return o(X!=null&&typeof X==="object","invalid address-slot set","value",$),vC(X.address,X.storageKeys)});o($!=null&&typeof $==="object","invalid access list","value",$);let Q=Object.keys($).map((X)=>{let Y=$[X].reduce((Z,J)=>{return Z[J]=!0,Z},{});return vC(X,Object.keys(Y).sort())});return Q.sort((X,Y)=>X.address.localeCompare(Y.address)),Q}var gC=y(()=>{s8();a0()});function d1($){return{address:J$($.address),nonce:n0($.nonce!=null?$.nonce:0),chainId:n0($.chainId!=null?$.chainId:0),signature:Y8.from($.signature)}}var yC=y(()=>{s8();XQ();a0()});function hZ($){let Q;if(typeof $==="string")Q=l8.computePublicKey($,!1);else Q=$.publicKey;return J$(A$("0x"+Q.substring(4)).substring(26))}function mZ($,Q){return hZ(l8.recoverPublicKey($,Q))}var bC=y(()=>{s8();XQ()});function q70($){return{blobToKzgCommitment:(Y)=>{if("computeBlobProof"in $){if("blobToKzgCommitment"in $&&typeof $.blobToKzgCommitment==="function")return L0($.blobToKzgCommitment(D0(Y)))}else if("blobToKzgCommitment"in $&&typeof $.blobToKzgCommitment==="function")return L0($.blobToKzgCommitment(Y));if("blobToKZGCommitment"in $&&typeof $.blobToKZGCommitment==="function")return L0($.blobToKZGCommitment(D0(Y)));o(!1,"unsupported KZG library","kzg",$)},computeBlobKzgProof:(Y,Z)=>{if("computeBlobProof"in $&&typeof $.computeBlobProof==="function")return L0($.computeBlobProof(D0(Y),D0(Z)));if("computeBlobKzgProof"in $&&typeof $.computeBlobKzgProof==="function")return $.computeBlobKzgProof(Y,Z);if("computeBlobKZGProof"in $&&typeof $.computeBlobKZGProof==="function")return L0($.computeBlobKZGProof(D0(Y),D0(Z)));o(!1,"unsupported KZG library","kzg",$)}}}function jy($,Q){let X=$.toString(16);while(X.length<2)X="0"+X;return X+=c8(Q).substring(4),"0x"+X}function KU($){if($==="0x")return null;return J$($)}function hj($,Q){try{return _Q($)}catch(X){o(!1,X.message,Q,$)}}function G70($,Q){try{if(!Array.isArray($))throw new Error("authorizationList: invalid array");let X=[];for(let Y=0;Y<$.length;Y++){let Z=$[Y];if(!Array.isArray(Z))throw new Error(`authorization[${Y}]: invalid array`);if(Z.length!==6)throw new Error(`authorization[${Y}]: wrong length`);if(!Z[1])throw new Error(`authorization[${Y}]: null address`);X.push({address:KU(Z[1]),nonce:V8(Z[2],"nonce"),chainId:V8(Z[0],"chainId"),signature:Y8.from({yParity:cG(Z[3],"yParity"),r:m8(Z[4],32),s:m8(Z[5],32)})})}return X}catch(X){o(!1,X.message,Q,$)}}function cG($,Q){if($==="0x")return 0;return Y$($,Q)}function V8($,Q){if($==="0x")return kQ;let X=n0($,Q);return o(X<=J70,"value exceeds uint size",Q,X),X}function h$($,Q){let X=n0($,"value"),Y=p$(X);return o(Y.length<=32,"value too large",`tx.${Q}`,X),Y}function mj($){return _Q($).map((Q)=>[Q.address,Q.storageKeys])}function z70($){return $.map((Q)=>{return[h$(Q.chainId,"chainId"),Q.address,h$(Q.nonce,"nonce"),h$(Q.signature.yParity,"yParity"),p$(Q.signature.r),p$(Q.signature.s)]})}function K70($,Q){o(Array.isArray($),`invalid ${Q}`,"value",$);for(let X=0;X<$.length;X++)o(w$($[X],32),"invalid ${ param } hash",`value[${X}]`,$[X]);return $}function U70($){let Q=GJ($);o(Array.isArray(Q)&&(Q.length===9||Q.length===6),"invalid field count for legacy transaction","data",$);let X={type:0,nonce:cG(Q[0],"nonce"),gasPrice:V8(Q[1],"gasPrice"),gasLimit:V8(Q[2],"gasLimit"),to:KU(Q[3]),value:V8(Q[4],"value"),data:D0(Q[5]),chainId:kQ};if(Q.length===6)return X;let Y=V8(Q[6],"v"),Z=V8(Q[7],"r"),J=V8(Q[8],"s");if(Z===kQ&&J===kQ)X.chainId=Y;else{let q=(Y-Z70)/Q70;if(q<kQ)q=kQ;X.chainId=q,o(q!==kQ||(Y===X70||Y===Y70),"non-canonical legacy v","v",Q[6]),X.signature=Y8.from({r:m8(Q[7],32),s:m8(Q[8],32),v:Y})}return X}function W70($,Q){let X=[h$($.nonce,"nonce"),h$($.gasPrice||0,"gasPrice"),h$($.gasLimit,"gasLimit"),$.to||"0x",h$($.value,"value"),$.data],Y=kQ;if($.chainId!=kQ)Y=n0($.chainId,"tx.chainId"),o(!Q||Q.networkV==null||Q.legacyChainId===Y,"tx.chainId/sig.v mismatch","sig",Q);else if($.signature){let J=$.signature.legacyChainId;if(J!=null)Y=J}if(!Q){if(Y!==kQ)X.push(p$(Y)),X.push("0x"),X.push("0x");return wX(X)}let Z=BigInt(27+Q.yParity);if(Y!==kQ)Z=Y8.getChainIdV(Y,Q.v);else if(BigInt(Q.v)!==Z)o(!1,"tx.chainId/sig.v mismatch","sig",Q);return X.push(p$(Z)),X.push(p$(Q.r)),X.push(p$(Q.s)),wX(X)}function cj($,Q){let X;try{if(X=cG(Q[0],"yParity"),X!==0&&X!==1)throw new Error("bad yParity")}catch(q){o(!1,"invalid yParity","yParity",Q[0])}let Y=m8(Q[1],32),Z=m8(Q[2],32),J=Y8.from({r:Y,s:Z,yParity:X});$.signature=J}function V70($){let Q=GJ(L0($).slice(1));o(Array.isArray(Q)&&(Q.length===9||Q.length===12),"invalid field count for transaction type: 2","data",D0($));let X={type:2,chainId:V8(Q[0],"chainId"),nonce:cG(Q[1],"nonce"),maxPriorityFeePerGas:V8(Q[2],"maxPriorityFeePerGas"),maxFeePerGas:V8(Q[3],"maxFeePerGas"),gasPrice:null,gasLimit:V8(Q[4],"gasLimit"),to:KU(Q[5]),value:V8(Q[6],"value"),data:D0(Q[7]),accessList:hj(Q[8],"accessList")};if(Q.length===9)return X;return cj(X,Q.slice(9)),X}function O70($,Q){let X=[h$($.chainId,"chainId"),h$($.nonce,"nonce"),h$($.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),h$($.maxFeePerGas||0,"maxFeePerGas"),h$($.gasLimit,"gasLimit"),$.to||"0x",h$($.value,"value"),$.data,mj($.accessList||[])];if(Q)X.push(h$(Q.yParity,"yParity")),X.push(p$(Q.r)),X.push(p$(Q.s));return V$(["0x02",wX(X)])}function M70($){let Q=GJ(L0($).slice(1));o(Array.isArray(Q)&&(Q.length===8||Q.length===11),"invalid field count for transaction type: 1","data",D0($));let X={type:1,chainId:V8(Q[0],"chainId"),nonce:cG(Q[1],"nonce"),gasPrice:V8(Q[2],"gasPrice"),gasLimit:V8(Q[3],"gasLimit"),to:KU(Q[4]),value:V8(Q[5],"value"),data:D0(Q[6]),accessList:hj(Q[7],"accessList")};if(Q.length===8)return X;return cj(X,Q.slice(8)),X}function D70($,Q){let X=[h$($.chainId,"chainId"),h$($.nonce,"nonce"),h$($.gasPrice||0,"gasPrice"),h$($.gasLimit,"gasLimit"),$.to||"0x",h$($.value,"value"),$.data,mj($.accessList||[])];if(Q)X.push(h$(Q.yParity,"recoveryParam")),X.push(p$(Q.r)),X.push(p$(Q.s));return V$(["0x01",wX(X)])}function j70($){let Q=GJ(L0($).slice(1)),X="3",Y=null;if(Q.length===4&&Array.isArray(Q[0])){X="3 (network format)";let J=Q[1],q=Q[2],G=Q[3];o(Array.isArray(J),"invalid network format: blobs not an array","fields[1]",J),o(Array.isArray(q),"invalid network format: commitments not an array","fields[2]",q),o(Array.isArray(G),"invalid network format: proofs not an array","fields[3]",G),o(J.length===q.length,"invalid network format: blobs/commitments length mismatch","fields",Q),o(J.length===G.length,"invalid network format: blobs/proofs length mismatch","fields",Q),Y=[];for(let z=0;z<Q[1].length;z++)Y.push({data:J[z],commitment:q[z],proof:G[z]});Q=Q[0]}o(Array.isArray(Q)&&(Q.length===11||Q.length===14),`invalid field count for transaction type: ${X}`,"data",D0($));let Z={type:3,chainId:V8(Q[0],"chainId"),nonce:cG(Q[1],"nonce"),maxPriorityFeePerGas:V8(Q[2],"maxPriorityFeePerGas"),maxFeePerGas:V8(Q[3],"maxFeePerGas"),gasPrice:null,gasLimit:V8(Q[4],"gasLimit"),to:KU(Q[5]),value:V8(Q[6],"value"),data:D0(Q[7]),accessList:hj(Q[8],"accessList"),maxFeePerBlobGas:V8(Q[9],"maxFeePerBlobGas"),blobVersionedHashes:Q[10]};if(Y)Z.blobs=Y;o(Z.to!=null,`invalid address for transaction type: ${X}`,"data",$),o(Array.isArray(Z.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",$);for(let J=0;J<Z.blobVersionedHashes.length;J++)o(w$(Z.blobVersionedHashes[J],32),`invalid blobVersionedHash at index ${J}: must be length 32`,"data",$);if(Q.length===11)return Z;return cj(Z,Q.slice(11)),Z}function P70($,Q,X){let Y=[h$($.chainId,"chainId"),h$($.nonce,"nonce"),h$($.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),h$($.maxFeePerGas||0,"maxFeePerGas"),h$($.gasLimit,"gasLimit"),$.to||bZ,h$($.value,"value"),$.data,mj($.accessList||[]),h$($.maxFeePerBlobGas||0,"maxFeePerBlobGas"),K70($.blobVersionedHashes||[],"blobVersionedHashes")];if(Q){if(Y.push(h$(Q.yParity,"yParity")),Y.push(p$(Q.r)),Y.push(p$(Q.s)),X)return V$(["0x03",wX([Y,X.map((Z)=>Z.data),X.map((Z)=>Z.commitment),X.map((Z)=>Z.proof)])])}return V$(["0x03",wX(Y)])}function H70($){let Q=GJ(L0($).slice(1));o(Array.isArray(Q)&&(Q.length===10||Q.length===13),"invalid field count for transaction type: 4","data",D0($));let X={type:4,chainId:V8(Q[0],"chainId"),nonce:cG(Q[1],"nonce"),maxPriorityFeePerGas:V8(Q[2],"maxPriorityFeePerGas"),maxFeePerGas:V8(Q[3],"maxFeePerGas"),gasPrice:null,gasLimit:V8(Q[4],"gasLimit"),to:KU(Q[5]),value:V8(Q[6],"value"),data:D0(Q[7]),accessList:hj(Q[8],"accessList"),authorizationList:G70(Q[9],"authorizationList")};if(Q.length===10)return X;return cj(X,Q.slice(10)),X}function N70($,Q){let X=[h$($.chainId,"chainId"),h$($.nonce,"nonce"),h$($.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),h$($.maxFeePerGas||0,"maxFeePerGas"),h$($.gasLimit,"gasLimit"),$.to||"0x",h$($.value,"value"),$.data,mj($.accessList||[]),z70($.authorizationList||[])];if(Q)X.push(h$(Q.yParity,"yParity")),X.push(p$(Q.r)),X.push(p$(Q.s));return V$(["0x04",wX(X)])}class a8{#$;#Q;#X;#Y;#Z;#G;#J;#z;#W;#K;#q;#M;#U;#O;#V;#D;#P;get type(){return this.#$}set type($){switch($){case null:this.#$=null;break;case 0:case"legacy":this.#$=0;break;case 1:case"berlin":case"eip-2930":this.#$=1;break;case 2:case"london":case"eip-1559":this.#$=2;break;case 3:case"cancun":case"eip-4844":this.#$=3;break;case 4:case"pectra":case"eip-7702":this.#$=4;break;default:o(!1,"unsupported transaction type","type",$)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){let $=this.#Q;if($==null&&this.type===3)return bZ;return $}set to($){this.#Q=$==null?null:J$($)}get nonce(){return this.#Y}set nonce($){this.#Y=Y$($,"value")}get gasLimit(){return this.#Z}set gasLimit($){this.#Z=n0($)}get gasPrice(){let $=this.#G;if($==null&&(this.type===0||this.type===1))return kQ;return $}set gasPrice($){this.#G=$==null?null:n0($,"gasPrice")}get maxPriorityFeePerGas(){let $=this.#J;if($==null){if(this.type===2||this.type===3)return kQ;return null}return $}set maxPriorityFeePerGas($){this.#J=$==null?null:n0($,"maxPriorityFeePerGas")}get maxFeePerGas(){let $=this.#z;if($==null){if(this.type===2||this.type===3)return kQ;return null}return $}set maxFeePerGas($){this.#z=$==null?null:n0($,"maxFeePerGas")}get data(){return this.#X}set data($){this.#X=D0($)}get value(){return this.#W}set value($){this.#W=n0($,"value")}get chainId(){return this.#K}set chainId($){this.#K=n0($)}get signature(){return this.#q||null}set signature($){this.#q=$==null?null:Y8.from($)}get accessList(){let $=this.#M||null;if($==null){if(this.type===1||this.type===2||this.type===3)return[];return null}return $}set accessList($){this.#M=$==null?null:_Q($)}get authorizationList(){let $=this.#P||null;if($==null){if(this.type===4)return[]}return $}set authorizationList($){this.#P=$==null?null:$.map((Q)=>d1(Q))}get maxFeePerBlobGas(){let $=this.#U;if($==null&&this.type===3)return kQ;return $}set maxFeePerBlobGas($){this.#U=$==null?null:n0($,"maxFeePerBlobGas")}get blobVersionedHashes(){let $=this.#O;if($==null&&this.type===3)return[];return $}set blobVersionedHashes($){if($!=null){o(Array.isArray($),"blobVersionedHashes must be an Array","value",$),$=$.slice();for(let Q=0;Q<$.length;Q++)o(w$($[Q],32),"invalid blobVersionedHash",`value[${Q}]`,$[Q])}this.#O=$}get blobs(){if(this.#D==null)return null;return this.#D.map(($)=>Object.assign({},$))}set blobs($){if($==null){this.#D=null;return}let Q=[],X=[];for(let Y=0;Y<$.length;Y++){let Z=$[Y];if(SZ(Z)){V0(this.#V,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let J=L0(Z);if(o(J.length<=hC,"blob is too large",`blobs[${Y}]`,Z),J.length!==hC){let z=new Uint8Array(hC);z.set(J),J=z}let q=this.#V.blobToKzgCommitment(J),G=D0(this.#V.computeBlobKzgProof(J,q));Q.push({data:D0(J),commitment:D0(q),proof:G}),X.push(jy(1,q))}else{let J=D0(Z.commitment);Q.push({data:D0(Z.data),commitment:J,proof:D0(Z.proof)}),X.push(jy(1,J))}}this.#D=Q,this.#O=X}get kzg(){return this.#V}set kzg($){if($==null)this.#V=null;else this.#V=q70($)}constructor(){this.#$=null,this.#Q=null,this.#Y=0,this.#Z=kQ,this.#G=null,this.#J=null,this.#z=null,this.#X="0x",this.#W=kQ,this.#K=kQ,this.#q=null,this.#M=null,this.#U=null,this.#O=null,this.#V=null,this.#D=null,this.#P=null}get hash(){if(this.signature==null)return null;return A$(this.#H(!0,!1))}get unsignedHash(){return A$(this.unsignedSerialized)}get from(){if(this.signature==null)return null;return mZ(this.unsignedHash,this.signature)}get fromPublicKey(){if(this.signature==null)return null;return l8.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}#H($,Q){V0(!$||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});let X=$?this.signature:null;switch(this.inferType()){case 0:return W70(this,X);case 1:return D70(this,X);case 2:return O70(this,X);case 3:return P70(this,X,Q?this.blobs:null);case 4:return N70(this,X)}V0(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#H(!0,!0)}get unsignedSerialized(){return this.#H(!1,!1)}inferType(){let $=this.inferTypes();if($.indexOf(2)>=0)return 2;return $.pop()}inferTypes(){let $=this.gasPrice!=null,Q=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,X=this.accessList!=null,Y=this.#U!=null||this.#O;if(this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null)V0(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this});V0(!Q||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),V0(this.type!==0||!X,"legacy transaction cannot have accessList","BAD_DATA",{value:this});let Z=[];if(this.type!=null)Z.push(this.type);else if(this.authorizationList&&this.authorizationList.length)Z.push(4);else if(Q)Z.push(2);else if($){if(Z.push(1),!X)Z.push(0)}else if(X)Z.push(1),Z.push(2);else if(Y&&this.to)Z.push(3);else Z.push(0),Z.push(1),Z.push(2),Z.push(3);return Z.sort(),Z}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return a8.from(this)}toJSON(){let $=(Q)=>{if(Q==null)return null;return Q.toString()};return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:$(this.gasLimit),gasPrice:$(this.gasPrice),maxPriorityFeePerGas:$(this.maxPriorityFeePerGas),maxFeePerGas:$(this.maxFeePerGas),value:$(this.value),chainId:$(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from($){if($==null)return new a8;if(typeof $==="string"){let X=L0($);if(X[0]>=127)return a8.from(U70(X));switch(X[0]){case 1:return a8.from(M70(X));case 2:return a8.from(V70(X));case 3:return a8.from(j70(X));case 4:return a8.from(H70(X))}V0(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}let Q=new a8;if($.type!=null)Q.type=$.type;if($.to!=null)Q.to=$.to;if($.nonce!=null)Q.nonce=$.nonce;if($.gasLimit!=null)Q.gasLimit=$.gasLimit;if($.gasPrice!=null)Q.gasPrice=$.gasPrice;if($.maxPriorityFeePerGas!=null)Q.maxPriorityFeePerGas=$.maxPriorityFeePerGas;if($.maxFeePerGas!=null)Q.maxFeePerGas=$.maxFeePerGas;if($.maxFeePerBlobGas!=null)Q.maxFeePerBlobGas=$.maxFeePerBlobGas;if($.data!=null)Q.data=$.data;if($.value!=null)Q.value=$.value;if($.chainId!=null)Q.chainId=$.chainId;if($.signature!=null)Q.signature=Y8.from($.signature);if($.accessList!=null)Q.accessList=$.accessList;if($.authorizationList!=null)Q.authorizationList=$.authorizationList;if($.blobVersionedHashes!=null)Q.blobVersionedHashes=$.blobVersionedHashes;if($.kzg!=null)Q.kzg=$.kzg;if($.blobs!=null)Q.blobs=$.blobs;if($.hash!=null)o(Q.isSigned(),"unsigned transaction cannot define '.hash'","tx",$),o(Q.hash===$.hash,"hash mismatch","tx",$);if($.from!=null)o(Q.isSigned(),"unsigned transaction cannot define '.from'","tx",$),o(Q.from.toLowerCase()===($.from||"").toLowerCase(),"from mismatch","tx",$);return Q}}var kQ,Q70,X70,Y70,Z70,J70,hC=131072;var Py=y(()=>{s8();XQ();a0();gC();yC();bC();kQ=BigInt(0),Q70=BigInt(2),X70=BigInt(27),Y70=BigInt(28),Z70=BigInt(35),J70=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff")});var iX=y(()=>{gC();yC();bC();Py()});function pG($){return o(typeof $.address==="string","invalid address for hashAuthorization","auth.address",$),A$(V$(["0x05",wX([$.chainId!=null?p$($.chainId):"0x",J$($.address),$.nonce!=null?p$($.nonce):"0x"])]))}function pj($,Q){return mZ(pG($),Q)}var Hy=y(()=>{s8();XQ();iX();a0()});function xQ($){return A$(s$($))}var mC=y(()=>{XQ();a0()});function R70($){let Q=0;function X(){return $[Q++]<<8|$[Q++]}let Y=X(),Z=1,J=[0,1];for(let f=1;f<Y;f++)J.push(Z+=X());let q=X(),G=Q;Q+=q;let z=0,M=0;function j(){if(z==0)M=M<<8|$[Q++],z=8;return M>>--z&1}let P=31,D=2**P,A=D>>>1,I=A>>1,H=D-1,C=0;for(let f=0;f<P;f++)C=C<<1|j();let B=[],S=0,_=D;while(!0){let f=Math.floor(((C-S+1)*Z-1)/_),g=0,b=Y;while(b-g>1){let h=g+b>>>1;if(f<J[h])b=h;else g=h}if(g==0)break;B.push(g);let m=S+Math.floor(_*J[g]/Z),l=S+Math.floor(_*J[g+1]/Z)-1;while(((m^l)&A)==0)C=C<<1&H|j(),m=m<<1&H,l=l<<1&H|1;while(m&~l&I)C=C&A|C<<1&H>>>1|j(),m=m<<1^A,l=(l^A)<<1|A|1;S=m,_=1+l-m}let k=Y-4;return B.map((f)=>{switch(f-k){case 3:return k+65792+($[G++]<<16|$[G++]<<8|$[G++]);case 2:return k+256+($[G++]<<8|$[G++]);case 1:return k+$[G++];default:return f-1}})}function C70($){let Q=0;return()=>$[Q++]}function wy($){return C70(R70(L70($)))}function L70($){let Q=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((Z,J)=>Q[Z.charCodeAt(0)]=J);let X=$.length,Y=new Uint8Array(6*X>>3);for(let Z=0,J=0,q=0,G=0;Z<X;Z++)if(G=G<<6|Q[$.charCodeAt(Z)],q+=6,q>=8)Y[J++]=G>>(q-=8);return Y}function w70($){return $&1?~$>>1:$>>1}function T70($,Q){let X=Array($);for(let Y=0,Z=0;Y<$;Y++)X[Y]=Z+=w70(Q());return X}function GV($,Q=0){let X=[];while(!0){let Y=$(),Z=$();if(!Z)break;Q+=Y;for(let J=0;J<Z;J++)X.push(Q+J);Q+=Z+1}return X}function Ty($){return zV(()=>{let Q=GV($);if(Q.length)return Q})}function Iy($){let Q=[];while(!0){let X=$();if(X==0)break;Q.push(I70(X,$))}while(!0){let X=$()-1;if(X<0)break;Q.push(F70(X,$))}return Q.flat()}function zV($){let Q=[];while(!0){let X=$(Q.length);if(!X)break;Q.push(X)}return Q}function Fy($,Q,X){let Y=Array($).fill().map(()=>[]);for(let Z=0;Z<Q;Z++)T70($,X).forEach((J,q)=>Y[q].push(J));return Y}function I70($,Q){let X=1+Q(),Y=Q(),Z=zV(Q);return Fy(Z.length,1+$,Q).flatMap((q,G)=>{let[z,...M]=q;return Array(Z[G]).fill().map((j,P)=>{let D=P*Y;return[z+P*X,M.map((A)=>A+D)]})})}function F70($,Q){let X=1+Q();return Fy(X,1+$,Q).map((Z)=>[Z[0],Z.slice(1)])}function B70($){let Q=[],X=GV($);return Z(Y([]),[]),Q;function Y(J){let q=$(),G=zV(()=>{let z=GV($).map((M)=>X[M]);if(z.length)return Y(z)});return{S:q,B:G,Q:J}}function Z({S:J,B:q},G,z){if(J&4&&z===G[G.length-1])return;if(J&2)z=G[G.length-1];if(J&1)Q.push(G);for(let M of q)for(let j of M.Q)Z(M,[...G,j],z)}}function S70($){return $.toString(16).toUpperCase().padStart(2,"0")}function By($){return`{${S70($)}}`}function E70($){let Q=[];for(let X=0,Y=$.length;X<Y;){let Z=$.codePointAt(X);X+=Z<65536?1:2,Q.push(Z)}return Q}function VU($){let X=$.length;if(X<4096)return String.fromCodePoint(...$);let Y=[];for(let Z=0;Z<X;)Y.push(String.fromCodePoint(...$.slice(Z,Z+=4096)));return Y.join("")}function _70($,Q){let X=$.length,Y=X-Q.length;for(let Z=0;Y==0&&Z<X;Z++)Y=$[Z]-Q[Z];return Y}function JV($){return $>>24&255}function _y($){return $&16777215}function b70(){let $=wy(k70);pC=new Map(Ty($).flatMap((Q,X)=>Q.map((Y)=>[Y,X+1<<24]))),Ry=new Set(GV($)),lC=new Map,lj=new Map;for(let[Q,X]of Iy($)){if(!Ry.has(Q)&&X.length==2){let[Y,Z]=X,J=lj.get(Y);if(!J)J=new Map,lj.set(Y,J);J.set(Z,Q)}lC.set(Q,X.reverse())}}function ky($){return $>=KV&&$<f70}function h70($,Q){if($>=uj&&$<v70&&Q>=dj&&Q<g70)return KV+($-uj)*nj+(Q-dj)*OU;else if(ky($)&&Q>ij&&Q<y70&&($-KV)%OU==0)return $+(Q-ij);else{let X=lj.get($);if(X){if(X=X.get(Q),X)return X}return-1}}function xy($){if(!pC)b70();let Q=[],X=[],Y=!1;function Z(J){let q=pC.get(J);if(q)Y=!0,J|=q;Q.push(J)}for(let J of $)while(!0){if(J<128)Q.push(J);else if(ky(J)){let q=J-KV,G=q/nj|0,z=q%nj/OU|0,M=q%OU;if(Z(uj+G),Z(dj+z),M>0)Z(ij+M)}else{let q=lC.get(J);if(q)X.push(...q);else Z(J)}if(!X.length)break;J=X.pop()}if(Y&&Q.length>1){let J=JV(Q[0]);for(let q=1;q<Q.length;q++){let G=JV(Q[q]);if(G==0||J<=G){J=G;continue}let z=q-1;while(!0){let M=Q[z+1];if(Q[z+1]=Q[z],Q[z]=M,!z)break;if(J=JV(Q[--z]),J<=G)break}J=JV(Q[q])}}return Q}function m70($){let Q=[],X=[],Y=-1,Z=0;for(let J of $){let q=JV(J),G=_y(J);if(Y==-1)if(q==0)Y=G;else Q.push(G);else if(Z>0&&Z>=q){if(q==0)Q.push(Y,...X),X.length=0,Y=G;else X.push(G);Z=q}else{let z=h70(Y,G);if(z>=0)Y=z;else if(Z==0&&q==0)Q.push(Y),Y=G;else X.push(G),Z=q}}if(Y>=0)Q.push(Y,...X);return Q}function fy($){return xy($).map(_y)}function c70($){return m70(xy($))}function UV($,Q){return $.P.has(Q)||$.Q.has(Q)}function nC(){if(uC)return;let $=wy(A70),Q=()=>GV($),X=()=>new Set(Q()),Y=(j,P)=>P.forEach((D)=>j.add(D));uC=new Map(Iy($)),hy=X(),uG=Q(),dC=new Set(Q().map((j)=>uG[j])),uG=new Set(uG),my=X(),p70=X();let Z=Ty($),J=$(),q=()=>{let j=new Set;return Q().forEach((P)=>Y(j,Z[P])),Y(j,Q()),j};WU=zV((j)=>{let P=zV($).map((D)=>D+96);if(P.length){let D=j>=J;if(P[0]-=32,P=VU(P),D)P=`Restricted[${P}]`;let A=q(),I=q(),H=!$();return{N:P,P:A,Q:I,M:H,R:D}}}),cC=X(),UU=new Map;let G=Q().concat(oj(cC)).sort((j,P)=>j-P);G.forEach((j,P)=>{let D=$(),A=G[P]=D?G[P-D]:{V:[],M:new Map};if(A.V.push(j),!cC.has(j))UU.set(j,A)});for(let{V:j,M:P}of new Set(UU.values())){let D=[];for(let I of j){let H=WU.filter((B)=>UV(B,I)),C=D.find(({G:B})=>H.some((S)=>B.has(S)));if(!C)C={G:new Set,V:[]},D.push(C);C.V.push(I),Y(C.G,H)}let A=D.flatMap((I)=>oj(I.G));for(let{G:I,V:H}of D){let C=new Set(A.filter((B)=>!I.has(B)));for(let B of H)P.set(B,C)}}lG=new Set;let z=new Set,M=(j)=>lG.has(j)?z.add(j):lG.add(j);for(let j of WU){for(let P of j.P)M(P);for(let P of j.Q)M(P)}for(let j of lG)if(!UU.has(j)&&!z.has(j))UU.set(j,yy);Y(lG,fy(lG)),Ly=B70($).map((j)=>by.from(j)).sort(_70),iC=new Map;for(let j of Ly){let P=[iC];for(let D of j){let A=P.map((I)=>{let H=I.get(D);if(!H)H=new Map,I.set(D,H);return H});if(D===gy)P.push(...A);else P=A}for(let D of P)D.V=j}}function oC($){return(cy($)?"":`${rC(rj([$]))} `)+By($)}function rC($){return`"${$}"`}function l70($){if($.length>=4&&$[2]==Cy&&$[3]==Cy)throw new Error(`invalid label extension: "${VU($.slice(0,4))}"`)}function u70($){for(let X=$.lastIndexOf(95);X>0;)if($[--X]!==95)throw new Error("underscore allowed only at start")}function d70($){let Q=$[0],X=Ny.get(Q);if(X)throw qV(`leading ${X}`);let Y=$.length,Z=-1;for(let J=1;J<Y;J++){Q=$[J];let q=Ny.get(Q);if(q){if(Z==J)throw qV(`${X} + ${q}`);Z=J+1,X=q}}if(Z==Y)throw qV(`trailing ${X}`)}function rj($,Q=1/0,X=By){let Y=[];if(i70($[0]))Y.push("");if($.length>Q)Q>>=1,$=[...$.slice(0,Q),8230,...$.slice(-Q)];let Z=0,J=$.length;for(let q=0;q<J;q++){let G=$[q];if(cy(G))Y.push(VU($.slice(Z,q))),Y.push(X(G)),Z=q+1}return Y.push(VU($.slice(Z,J))),Y.join("")}function i70($){return nC(),uG.has($)}function cy($){return nC(),my.has($)}function py($){return s70(n70($,c70,e70))}function n70($,Q,X){if(!$)return[];nC();let Y=0;return $.split(vy).map((Z)=>{let J=E70(Z),q={input:J,offset:Y};Y+=J.length+1;try{let G=q.tokens=t70(J,Q,X),z=G.length,M;if(!z)throw new Error("empty label");let j=q.output=G.flat();if(u70(j),!(q.emoji=z>1||G[0].is_emoji)&&j.every((D)=>D<128))l70(j),M="ASCII";else{let D=G.flatMap((A)=>A.is_emoji?[]:A);if(!D.length)M="Emoji";else{if(uG.has(j[0]))throw qV("leading combining mark");for(let H=1;H<z;H++){let C=G[H];if(!C.is_emoji&&uG.has(C[0]))throw qV(`emoji + combining mark: "${VU(G[H-1])} + ${rj([C[0]])}"`)}d70(j);let A=oj(new Set(D)),[I]=r70(A);a70(I,D),o70(I,A),M=I.N}}q.type=M}catch(G){q.error=G}return q})}function o70($,Q){let X,Y=[];for(let Z of Q){let J=UU.get(Z);if(J===yy)return;if(J){let q=J.M.get(Z);if(X=X?X.filter((G)=>q.has(G)):oj(q),!X.length)return}else Y.push(Z)}if(X){for(let Z of X)if(Y.every((J)=>UV(Z,J)))throw new Error(`whole-script confusable: ${$.N}/${Z.N}`)}}function r70($){let Q=WU;for(let X of $){let Y=Q.filter((Z)=>UV(Z,X));if(!Y.length)if(!WU.some((Z)=>UV(Z,X)))throw ly(X);else throw uy(Q[0],X);if(Q=Y,Y.length==1)break}return Q}function s70($){return $.map(({input:Q,error:X,output:Y})=>{if(X){let Z=X.message;throw new Error($.length==1?Z:`Invalid label ${rC(rj(Q,63))}: ${Z}`)}return VU(Y)}).join(vy)}function ly($){return new Error(`disallowed character: ${oC($)}`)}function uy($,Q){let X=oC(Q),Y=WU.find((Z)=>Z.P.has(Q));if(Y)X=`${Y.N} ${X}`;return new Error(`illegal mixture: ${$.N} + ${X}`)}function qV($){return new Error(`illegal placement: ${$}`)}function a70($,Q){for(let X of Q)if(!UV($,X))throw uy($,X);if($.M){let X=fy(Q);for(let Y=1,Z=X.length;Y<Z;Y++)if(dC.has(X[Y])){let J=Y+1;for(let q;J<Z&&dC.has(q=X[J]);J++)for(let G=Y;G<J;G++)if(X[G]==q)throw new Error(`duplicate non-spacing marks: ${oC(q)}`);if(J-Y>Ay)throw new Error(`excessive non-spacing marks: ${rC(rj(X.slice(Y-1,J)))} (${J-Y}/${Ay})`);Y=J}}}function t70($,Q,X){let Y=[],Z=[];$=$.slice().reverse();while($.length){let J=$G0($);if(J){if(Z.length)Y.push(Q(Z)),Z=[];Y.push(X(J))}else{let q=$.pop();if(lG.has(q))Z.push(q);else{let G=uC.get(q);if(G)Z.push(...G);else if(!hy.has(q))throw ly(q)}}}if(Z.length)Y.push(Q(Z));return Y}function e70($){return $.filter((Q)=>Q!=gy)}function $G0($,Q){let X=iC,Y,Z=$.length;while(Z){if(X=X.get($[--Z]),!X)break;let{V:J}=X;if(J){if(Y=J,Q)Q.push(...$.slice(Z).reverse());$.length=Z}}return Y}var A70="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI",Ny,Ay=4,k70="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g",KV=44032,uj=4352,dj=4449,ij=4519,Sy=19,Ey=21,OU=28,nj,x70,f70,v70,g70,y70,pC,Ry,lC,lj,Cy=45,vy=".",gy=65039,yy=1,oj=($)=>Array.from($),by,uC,hy,uG,dC,my,p70,WU,cC,UU,lG,Ly,iC;var dy=y(()=>{Ny=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);nj=Ey*OU,x70=Sy*nj,f70=KV+x70,v70=uj+Sy,g70=dj+Ey,y70=ij+OU;by=class by extends Array{get is_emoji(){return!0}}});function iy($){return o($.length!==0,"invalid ENS name; empty component","comp",$),$}function sC($){let Q=s$(WV($)),X=[];if($.length===0)return X;let Y=0;for(let Z=0;Z<Q.length;Z++)if(Q[Z]===46)X.push(iy(Q.slice(Y,Z))),Y=Z+1;return o(Y<Q.length,"invalid ENS name; empty component","name",$),X.push(iy(Q.slice(Y))),X}function WV($){try{if($.length===0)throw new Error("empty label");return py($)}catch(Q){o(!1,`invalid ENS name (${Q.message})`,"name",$)}}function sj($){try{return sC($).length!==0}catch(Q){}return!1}function H5($){o(typeof $==="string","invalid ENS name; not a string","name",$),o($.length,"invalid ENS name (empty label)","name",$);let Q=ny,X=sC($);while(X.length)Q=A$(V$([Q,A$(X.pop())]));return D0(Q)}function MU($,Q){let X=Q!=null?Q:63;return o(X<=255,"DNS encoded label cannot exceed 255","length",X),D0(V$(sC($).map((Y)=>{o(Y.length<=X,`label ${JSON.stringify($)} exceeds ${X} bytes`,"name",$);let Z=new Uint8Array(Y.length+1);return Z.set(Y,1),Z[0]=Z.length-1,Z})))+"00"}var ny;var oy=y(()=>{XQ();a0();dy();ny=new Uint8Array(32);ny.fill(0)});function dG($){if(typeof $==="string")$=s$($);return A$(V$([s$(JU),s$(String($.length)),$]))}function aj($,Q){let X=dG($);return mZ(X,Q)}var ry=y(()=>{XQ();qU();iX();a0()});function sy($,Q,X){switch($){case"address":if(X)return L0(m8(Q,32));return L0(J$(Q));case"string":return s$(Q);case"bytes":return L0(Q);case"bool":if(Q=Q?"0x01":"0x00",X)return L0(m8(Q,32));return L0(Q)}let Y=$.match(XG0);if(Y){let Z=Y[1]==="int",J=parseInt(Y[2]||"256");if(o((!Y[2]||Y[2]===String(J))&&J%8===0&&J!==0&&J<=256,"invalid number type","type",$),X)J=256;if(Z)Q=qJ(Q,J);return L0(m8(p$(Q),J/8))}if(Y=$.match(QG0),Y){let Z=parseInt(Y[1]);if(o(String(Z)===Y[1]&&Z!==0&&Z<=32,"invalid bytes type","type",$),o(uX(Q)===Z,`invalid value for ${$}`,"value",Q),X)return L0(ZJ(Q,32));return Q}if(Y=$.match(YG0),Y&&Array.isArray(Q)){let Z=Y[1],J=parseInt(Y[2]||String(Q.length));o(J===Q.length,`invalid array length for ${$}`,"value",Q);let q=[];return Q.forEach(function(G){q.push(sy(Z,G,!0))}),L0(V$(q))}o(!1,"invalid type","type",$)}function DU($,Q){o($.length===Q.length,"wrong number of values; expected ${ types.length }","values",Q);let X=[];return $.forEach(function(Y,Z){X.push(sy(Y,Q[Z]))}),D0(V$(X))}function tj($,Q){return A$(DU($,Q))}function ej($,Q){return c8(DU($,Q))}var QG0,XG0,YG0;var ay=y(()=>{s8();XQ();a0();QG0=new RegExp("^bytes([0-9]+)$"),XG0=new RegExp("^(u?int)([0-9]*)$"),YG0=new RegExp("^(.*)\\[([0-9]*)\\]$")});function qG0($){let Q=L0($),X=Q.length%32;if(X)return V$([Q,Qb.slice(X)]);return D0(Q)}function ey($){return function(Q){return o(typeof Q==="string",`invalid domain value for ${JSON.stringify($)}`,`domain.${$}`,Q),Q}}function tC($){{let Q=$.match(/^(u?)int(\d+)$/);if(Q){let X=Q[1]==="",Y=parseInt(Q[2]);o(Y%8===0&&Y!==0&&Y<=256&&Q[2]===String(Y),"invalid numeric width","type",$);let Z=RY(JG0,X?Y-1:Y),J=X?(Z+Yb)*ZG0:Xb;return function(q){let G=n0(q,"value");return o(G>=J&&G<=Z,`value out-of-bounds for ${$}`,"value",G),RQ(X?qJ(G,256):G,32)}}}{let Q=$.match(/^bytes(\d+)$/);if(Q){let X=parseInt(Q[1]);return o(X!==0&&X<=32&&Q[1]===String(X),"invalid bytes width","type",$),function(Y){let Z=L0(Y);return o(Z.length===X,`invalid length for ${$}`,"value",Y),qG0(Y)}}}switch($){case"address":return function(Q){return m8(J$(Q),32)};case"bool":return function(Q){return!Q?zG0:GG0};case"bytes":return function(Q){return A$(Q)};case"string":return function(Q){return xQ(Q)}}return null}function $b($,Q){return`${$}(${Q.map(({name:X,type:Y})=>Y+" "+X).join(",")})`}function $P($){let Q=$.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);if(Q)return{base:Q[1],index:Q[2]+Q[4],array:{base:Q[1],prefix:Q[1]+Q[2],count:Q[5]?parseInt(Q[5]):-1}};return{base:$}}class u8{primaryType;#$;get types(){return JSON.parse(this.#$)}#Q;#X;constructor($){this.#Q=new Map,this.#X=new Map;let Q=new Map,X=new Map,Y=new Map,Z={};Object.keys($).forEach((G)=>{Z[G]=$[G].map(({name:z,type:M})=>{let{base:j,index:P}=$P(M);if(j==="int"&&!$.int)j="int256";if(j==="uint"&&!$.uint)j="uint256";return{name:z,type:j+(P||"")}}),Q.set(G,new Set),X.set(G,[]),Y.set(G,new Set)}),this.#$=JSON.stringify(Z);for(let G in Z){let z=new Set;for(let M of Z[G]){o(!z.has(M.name),`duplicate variable name ${JSON.stringify(M.name)} in ${JSON.stringify(G)}`,"types",$),z.add(M.name);let j=$P(M.type).base;if(o(j!==G,`circular type reference to ${JSON.stringify(j)}`,"types",$),tC(j))continue;o(X.has(j),`unknown type ${JSON.stringify(j)}`,"types",$),X.get(j).push(G),Q.get(G).add(j)}}let J=Array.from(X.keys()).filter((G)=>X.get(G).length===0);o(J.length!==0,"missing primary type","types",$),o(J.length===1,`ambiguous primary types or unused types: ${J.map((G)=>JSON.stringify(G)).join(", ")}`,"types",$),E0(this,{primaryType:J[0]});function q(G,z){o(!z.has(G),`circular type reference to ${JSON.stringify(G)}`,"types",$),z.add(G);for(let M of Q.get(G)){if(!X.has(M))continue;q(M,z);for(let j of z)Y.get(j).add(M)}z.delete(G)}q(this.primaryType,new Set);for(let[G,z]of Y){let M=Array.from(z);M.sort(),this.#Q.set(G,$b(G,Z[G])+M.map((j)=>$b(j,Z[j])).join(""))}}getEncoder($){let Q=this.#X.get($);if(!Q)Q=this.#Y($),this.#X.set($,Q);return Q}#Y($){{let Y=tC($);if(Y)return Y}let Q=$P($).array;if(Q){let Y=Q.prefix,Z=this.getEncoder(Y);return(J)=>{o(Q.count===-1||Q.count===J.length,`array length mismatch; expected length ${Q.count}`,"value",J);let q=J.map(Z);if(this.#Q.has(Y))q=q.map(A$);return A$(V$(q))}}let X=this.types[$];if(X){let Y=xQ(this.#Q.get($));return(Z)=>{let J=X.map(({name:q,type:G})=>{let z=this.getEncoder(G)(Z[q]);if(this.#Q.has(G))return A$(z);return z});return J.unshift(Y),V$(J)}}o(!1,`unknown type: ${$}`,"type",$)}encodeType($){let Q=this.#Q.get($);return o(Q,`unknown type: ${JSON.stringify($)}`,"name",$),Q}encodeData($,Q){return this.getEncoder($)(Q)}hashStruct($,Q){return A$(this.encodeData($,Q))}encode($){return this.encodeData(this.primaryType,$)}hash($){return this.hashStruct(this.primaryType,$)}_visit($,Q,X){if(tC($))return X($,Q);let Y=$P($).array;if(Y)return o(Y.count===-1||Y.count===Q.length,`array length mismatch; expected length ${Y.count}`,"value",Q),Q.map((J)=>this._visit(Y.prefix,J,X));let Z=this.types[$];if(Z)return Z.reduce((J,{name:q,type:G})=>{return J[q]=this._visit(G,Q[q],X),J},{});o(!1,`unknown type: ${$}`,"type",$)}visit($,Q){return this._visit(this.primaryType,$,Q)}static from($){return new u8($)}static getPrimaryType($){return u8.from($).primaryType}static hashStruct($,Q,X){return u8.from(Q).hashStruct($,X)}static hashDomain($){let Q=[];for(let X in $){if($[X]==null)continue;let Y=ty[X];o(Y,`invalid typed-data domain key: ${JSON.stringify(X)}`,"domain",$),Q.push({name:X,type:Y})}return Q.sort((X,Y)=>{return aC.indexOf(X.name)-aC.indexOf(Y.name)}),u8.hashStruct("EIP712Domain",{EIP712Domain:Q},$)}static encode($,Q,X){return V$(["0x1901",u8.hashDomain($),u8.from(Q).hash(X)])}static hash($,Q,X){return A$(u8.encode($,Q,X))}static async resolveNames($,Q,X,Y){$=Object.assign({},$);for(let q in $)if($[q]==null)delete $[q];let Z={};if($.verifyingContract&&!w$($.verifyingContract,20))Z[$.verifyingContract]="0x";let J=u8.from(Q);J.visit(X,(q,G)=>{if(q==="address"&&!w$(G,20))Z[G]="0x";return G});for(let q in Z)Z[q]=await Y(q);if($.verifyingContract&&Z[$.verifyingContract])$.verifyingContract=Z[$.verifyingContract];return X=J.visit(X,(q,G)=>{if(q==="address"&&Z[G])return Z[G];return G}),{domain:$,value:X}}static getPayload($,Q,X){u8.hashDomain($);let Y={},Z=[];aC.forEach((G)=>{let z=$[G];if(z==null)return;Y[G]=KG0[G](z),Z.push({name:G,type:ty[G]})});let J=u8.from(Q);Q=J.types;let q=Object.assign({},Q);return o(q.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",Q),q.EIP712Domain=Z,J.encode(X),{types:q,domain:Y,primaryType:J.primaryType,message:J.visit(X,(G,z)=>{if(G.match(/^bytes(\d*)/))return D0(L0(z));if(G.match(/^u?int/))return n0(z).toString();switch(G){case"address":return z.toLowerCase();case"bool":return!!z;case"string":return o(typeof z==="string","invalid string","value",z),z}o(!1,"unsupported type","type",G)})}}}function QP($,Q,X,Y){return mZ(u8.hash($,Q,X),Y)}var Qb,ZG0,Xb,Yb,JG0,GG0,zG0,ty,aC,KG0;var Zb=y(()=>{s8();XQ();iX();a0();mC();Qb=new Uint8Array(32);Qb.fill(0);ZG0=BigInt(-1),Xb=BigInt(0),Yb=BigInt(1),JG0=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");GG0=RQ(Yb,32),zG0=RQ(Xb,32),ty={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},aC=["name","version","chainId","verifyingContract","salt"];KG0={name:ey("name"),version:ey("version"),chainId:function($){let Q=n0($,"domain.chainId");if(o(Q>=0,"invalid chain ID","domain.chainId",$),Number.isSafeInteger(Q))return Number(Q);return QQ(Q)},verifyingContract:function($){try{return J$($).toLowerCase()}catch(Q){}o(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",$)},salt:function($){let Q=L0($,"domain.salt");return o(Q.length===32,'invalid domain value "salt"',"domain.salt",$),D0(Q)}}});var WJ=y(()=>{Hy();mC();oy();ry();ay();Zb()});function rX($){let Q=new Set;return $.forEach((X)=>Q.add(X)),Object.freeze(Q)}class cZ{#$;#Q;get offset(){return this.#$}get length(){return this.#Q.length-this.#$}constructor($){this.#$=0,this.#Q=$.slice()}clone(){return new cZ(this.#Q)}reset(){this.#$=0}#X($=0,Q=0){return new cZ(this.#Q.slice($,Q).map((X)=>{return Object.freeze(Object.assign({},X,{match:X.match-$,linkBack:X.linkBack-$,linkNext:X.linkNext-$}))}))}popKeyword($){let Q=this.peek();if(Q.type!=="KEYWORD"||!$.has(Q.text))throw new Error(`expected keyword ${Q.text}`);return this.pop().text}popType($){if(this.peek().type!==$){let Q=this.peek();throw new Error(`expected ${$}; got ${Q.type} ${JSON.stringify(Q.text)}`)}return this.pop().text}popParen(){let $=this.peek();if($.type!=="OPEN_PAREN")throw new Error("bad start");let Q=this.#X(this.#$+1,$.match+1);return this.#$=$.match+1,Q}popParams(){let $=this.peek();if($.type!=="OPEN_PAREN")throw new Error("bad start");let Q=[];while(this.#$<$.match-1){let X=this.peek().linkNext;Q.push(this.#X(this.#$+1,X)),this.#$=X}return this.#$=$.match+1,Q}peek(){if(this.#$>=this.#Q.length)throw new Error("out-of-bounds");return this.#Q[this.#$]}peekKeyword($){let Q=this.peekType("KEYWORD");return Q!=null&&$.has(Q)?Q:null}peekType($){if(this.length===0)return null;let Q=this.peek();return Q.type===$?Q.text:null}pop(){let $=this.peek();return this.#$++,$}toString(){let $=[];for(let Q=this.#$;Q<this.#Q.length;Q++){let X=this.#Q[Q];$.push(`${X.type}:${X.text}`)}return`<TokenString ${$.join(" ")}>`}}function i1($){let Q=[],X=(q)=>{let G=J<$.length?JSON.stringify($[J]):"$EOI";throw new Error(`invalid token ${G} at ${J}: ${q}`)},Y=[],Z=[],J=0;while(J<$.length){let q=$.substring(J),G=q.match(HG0);if(G)J+=G[1].length,q=$.substring(J);let z={depth:Y.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:J,value:-1};Q.push(z);let M=PG0[q[0]]||"";if(M){if(z.type=M,z.text=q[0],J++,M==="OPEN_PAREN")Y.push(Q.length-1),Z.push(Q.length-1);else if(M=="CLOSE_PAREN"){if(Y.length===0)X("no matching open bracket");z.match=Y.pop(),Q[z.match].match=Q.length-1,z.depth--,z.linkBack=Z.pop(),Q[z.linkBack].linkNext=Q.length-1}else if(M==="COMMA")z.linkBack=Z.pop(),Q[z.linkBack].linkNext=Q.length-1,Z.push(Q.length-1);else if(M==="OPEN_BRACKET")z.type="BRACKET";else if(M==="CLOSE_BRACKET"){let j=Q.pop().text;if(Q.length>0&&Q[Q.length-1].type==="NUMBER"){let P=Q.pop().text;j=P+j,Q[Q.length-1].value=Y$(P)}if(Q.length===0||Q[Q.length-1].type!=="BRACKET")throw new Error("missing opening bracket");Q[Q.length-1].text+=j}continue}if(G=q.match(AG0),G){if(z.text=G[1],J+=z.text.length,jG0.has(z.text)){z.type="KEYWORD";continue}if(z.text.match(Nb)){z.type="TYPE";continue}z.type="ID";continue}if(G=q.match(NG0),G){z.text=G[1],z.type="NUMBER",J+=z.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(q[0])} at position ${J}`)}return new cZ(Q.map((q)=>Object.freeze(q)))}function Jb($,Q){let X=[];for(let Y in Q.keys())if($.has(Y))X.push(Y);if(X.length>1)throw new Error(`conflicting types: ${X.join(", ")}`)}function XP($,Q){if(Q.peekKeyword(jb)){let X=Q.pop().text;if(X!==$)throw new Error(`expected ${$}, got ${X}`)}return Q.popType("ID")}function A5($,Q){let X=new Set;while(!0){let Y=$.peekType("KEYWORD");if(Y==null||Q&&!Q.has(Y))break;if($.pop(),X.has(Y))throw new Error(`duplicate keywords: ${JSON.stringify(Y)}`);X.add(Y)}return Object.freeze(X)}function Ab($){let Q=A5($,VG0);if(Jb(Q,rX("constant payable nonpayable".split(" "))),Jb(Q,rX("pure view payable nonpayable".split(" "))),Q.has("view"))return"view";if(Q.has("pure"))return"pure";if(Q.has("payable"))return"payable";if(Q.has("nonpayable"))return"nonpayable";if(Q.has("constant"))return"view";return"nonpayable"}function N5($,Q){return $.popParams().map((X)=>e$.from(X,Q))}function Rb($){if($.peekType("AT")){if($.pop(),$.peekType("NUMBER"))return n0($.pop().text);throw new Error("invalid gas")}return null}function iG($){if($.length)throw new Error(`unexpected tokens at offset ${$.offset}: ${$.toString()}`)}function qb($){let Q=$.match(Nb);if(o(Q,"invalid type","type",$),$==="uint")return"uint256";if($==="int")return"int256";if(Q[2]){let X=parseInt(Q[2]);o(X!==0&&X<=32,"invalid bytes length","type",$)}else if(Q[3]){let X=parseInt(Q[3]);o(X!==0&&X<=256&&X%8===0,"invalid numeric width","type",$)}return $}class e${name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor($,Q,X,Y,Z,J,q,G){if(EQ($,E8,"ParamType"),Object.defineProperty(this,wY,{value:Gb}),J)J=Object.freeze(J.slice());if(Y==="array"){if(q==null||G==null)throw new Error("")}else if(q!=null||G!=null)throw new Error("");if(Y==="tuple"){if(J==null)throw new Error("")}else if(J!=null)throw new Error("");E0(this,{name:Q,type:X,baseType:Y,indexed:Z,components:J,arrayLength:q,arrayChildren:G})}format($){if($==null)$="sighash";if($==="json"){let X=this.name||"";if(this.isArray()){let Z=JSON.parse(this.arrayChildren.format("json"));return Z.name=X,Z.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(Z)}let Y={type:this.baseType==="tuple"?"tuple":this.type,name:X};if(typeof this.indexed==="boolean")Y.indexed=this.indexed;if(this.isTuple())Y.components=this.components.map((Z)=>JSON.parse(Z.format($)));return JSON.stringify(Y)}let Q="";if(this.isArray())Q+=this.arrayChildren.format($),Q+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`;else if(this.isTuple())Q+="("+this.components.map((X)=>X.format($)).join($==="full"?", ":",")+")";else Q+=this.type;if($!=="sighash"){if(this.indexed===!0)Q+=" indexed";if($==="full"&&this.name)Q+=" "+this.name}return Q}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk($,Q){if(this.isArray()){if(!Array.isArray($))throw new Error("invalid array value");if(this.arrayLength!==-1&&$.length!==this.arrayLength)throw new Error("array is wrong length");let X=this;return $.map((Y)=>X.arrayChildren.walk(Y,Q))}if(this.isTuple()){if(!Array.isArray($))throw new Error("invalid tuple value");if($.length!==this.components.length)throw new Error("array is wrong length");let X=this;return $.map((Y,Z)=>X.components[Z].walk(Y,Q))}return Q(this.type,$)}#$($,Q,X,Y){if(this.isArray()){if(!Array.isArray(Q))throw new Error("invalid array value");if(this.arrayLength!==-1&&Q.length!==this.arrayLength)throw new Error("array is wrong length");let J=this.arrayChildren,q=Q.slice();q.forEach((G,z)=>{J.#$($,G,X,(M)=>{q[z]=M})}),Y(q);return}if(this.isTuple()){let J=this.components,q;if(Array.isArray(Q))q=Q.slice();else{if(Q==null||typeof Q!=="object")throw new Error("invalid tuple value");q=J.map((G)=>{if(!G.name)throw new Error("cannot use object value with unnamed components");if(!(G.name in Q))throw new Error(`missing value for component ${G.name}`);return Q[G.name]})}if(q.length!==this.components.length)throw new Error("array is wrong length");q.forEach((G,z)=>{J[z].#$($,G,X,(M)=>{q[z]=M})}),Y(q);return}let Z=X(this.type,Q);if(Z.then)$.push(async function(){Y(await Z)}());else Y(Z)}async walkAsync($,Q){let X=[],Y=[$];if(this.#$(X,$,Q,(Z)=>{Y[0]=Z}),X.length)await Promise.all(X);return Y[0]}static from($,Q){if(e$.isParamType($))return $;if(typeof $==="string")try{return e$.from(i1($),Q)}catch(q){o(!1,"invalid param type","obj",$)}else if($ instanceof cZ){let q="",G="",z=null;if(A5($,rX(["tuple"])).has("tuple")||$.peekType("OPEN_PAREN"))G="tuple",z=$.popParams().map((I)=>e$.from(I)),q=`tuple(${z.map((I)=>I.format()).join(",")})`;else q=qb($.popType("TYPE")),G=q;let M=null,j=null;while($.length&&$.peekType("BRACKET")){let I=$.pop();M=new e$(E8,"",q,G,null,z,j,M),j=I.value,q+=I.text,G="array",z=null}let P=null;if(A5($,OG0).has("indexed")){if(!Q)throw new Error("");P=!0}let A=$.peekType("ID")?$.pop().text:"";if($.length)throw new Error("leftover tokens");return new e$(E8,A,q,G,P,z,j,M)}let X=$.name;o(!X||typeof X==="string"&&X.match(Hb),"invalid name","obj.name",X);let Y=$.indexed;if(Y!=null)o(Q,"parameter cannot be indexed","obj.indexed",$.indexed),Y=!!Y;let Z=$.type,J=Z.match(RG0);if(J){let q=parseInt(J[2]||"-1"),G=e$.from({type:J[1],components:$.components});return new e$(E8,X||"",Z,"array",Y,null,q,G)}if(Z==="tuple"||Z.startsWith("tuple(")||Z.startsWith("(")){let q=$.components!=null?$.components.map((z)=>e$.from(z)):null;return new e$(E8,X||"",Z,"tuple",Y,q,null,null)}return Z=qb($.type),new e$(E8,X||"",Z,Z,Y,null,null,null)}static isParamType($){return $&&$[wY]===Gb}}class pZ{type;inputs;constructor($,Q,X){EQ($,E8,"Fragment"),X=Object.freeze(X.slice()),E0(this,{type:Q,inputs:X})}static from($){if(typeof $==="string"){try{pZ.from(JSON.parse($))}catch(Q){}return pZ.from(i1($))}if($ instanceof cZ)switch($.peekKeyword(jb)){case"constructor":return LY.from($);case"error":return wQ.from($);case"event":return nX.from($);case"fallback":case"receive":return lY.from($);case"function":return oX.from($);case"struct":return A9.from($)}else if(typeof $==="object"){switch($.type){case"constructor":return LY.from($);case"error":return wQ.from($);case"event":return nX.from($);case"fallback":case"receive":return lY.from($);case"function":return oX.from($);case"struct":return A9.from($)}V0(!1,`unsupported type: ${$.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}o(!1,"unsupported frgament object","obj",$)}static isConstructor($){return LY.isFragment($)}static isError($){return wQ.isFragment($)}static isEvent($){return nX.isFragment($)}static isFunction($){return oX.isFragment($)}static isStruct($){return A9.isFragment($)}}function VV($,Q){return"("+Q.map((X)=>X.format($)).join($==="full"?", ":",")+")"}var UG0="external public payable override",WG0,Mb="constant external internal payable private public pure view override",VG0,Db="constructor error event fallback function receive struct",jb,Pb="calldata memory storage payable indexed",OG0,MG0="tuple returns",DG0,jG0,PG0,HG0,NG0,AG0,Hb,Nb,RG0,E8,wY,Gb="_ParamTypeInternal",zb="_ErrorInternal",Kb="_EventInternal",Ub="_ConstructorInternal",Wb="_FallbackInternal",Vb="_FunctionInternal",Ob="_StructInternal",R5,wQ,nX,LY,lY,oX,A9;var YP=y(()=>{a0();WJ();WG0=rX(UG0.split(" ")),VG0=rX(Mb.split(" ")),jb=rX(Db.split(" ")),OG0=rX(Pb.split(" ")),DG0=[Db,Pb,MG0,Mb].join(" "),jG0=rX(DG0.split(" ")),PG0={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},HG0=new RegExp("^(\\s*)"),NG0=new RegExp("^([0-9]+)"),AG0=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Hb=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Nb=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");RG0=new RegExp(/^(.*)\[([0-9]*)\]$/);E8={},wY=Symbol.for("_ethers_internal");R5=class R5 extends pZ{name;constructor($,Q,X,Y){super($,Q,Y);o(typeof X==="string"&&X.match(Hb),"invalid identifier","name",X),Y=Object.freeze(Y.slice()),E0(this,{name:X})}};wQ=class wQ extends R5{constructor($,Q,X){super($,"error",Q,X);Object.defineProperty(this,wY,{value:zb})}get selector(){return xQ(this.format("sighash")).substring(0,10)}format($){if($==null)$="sighash";if($==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((X)=>JSON.parse(X.format($)))});let Q=[];if($!=="sighash")Q.push("error");return Q.push(this.name+VV($,this.inputs)),Q.join(" ")}static from($){if(wQ.isFragment($))return $;if(typeof $==="string")return wQ.from(i1($));else if($ instanceof cZ){let Q=XP("error",$),X=N5($);return iG($),new wQ(E8,Q,X)}return new wQ(E8,$.name,$.inputs?$.inputs.map(e$.from):[])}static isFragment($){return $&&$[wY]===zb}};nX=class nX extends R5{anonymous;constructor($,Q,X,Y){super($,"event",Q,X);Object.defineProperty(this,wY,{value:Kb}),E0(this,{anonymous:Y})}get topicHash(){return xQ(this.format("sighash"))}format($){if($==null)$="sighash";if($==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((X)=>JSON.parse(X.format($)))});let Q=[];if($!=="sighash")Q.push("event");if(Q.push(this.name+VV($,this.inputs)),$!=="sighash"&&this.anonymous)Q.push("anonymous");return Q.join(" ")}static getTopicHash($,Q){return Q=(Q||[]).map((Y)=>e$.from(Y)),new nX(E8,$,Q,!1).topicHash}static from($){if(nX.isFragment($))return $;if(typeof $==="string")try{return nX.from(i1($))}catch(Q){o(!1,"invalid event fragment","obj",$)}else if($ instanceof cZ){let Q=XP("event",$),X=N5($,!0),Y=!!A5($,rX(["anonymous"])).has("anonymous");return iG($),new nX(E8,Q,X,Y)}return new nX(E8,$.name,$.inputs?$.inputs.map((Q)=>e$.from(Q,!0)):[],!!$.anonymous)}static isFragment($){return $&&$[wY]===Kb}};LY=class LY extends pZ{payable;gas;constructor($,Q,X,Y,Z){super($,Q,X);Object.defineProperty(this,wY,{value:Ub}),E0(this,{payable:Y,gas:Z})}format($){if(V0($!=null&&$!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),$==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map((X)=>JSON.parse(X.format($)))});let Q=[`constructor${VV($,this.inputs)}`];if(this.payable)Q.push("payable");if(this.gas!=null)Q.push(`@${this.gas.toString()}`);return Q.join(" ")}static from($){if(LY.isFragment($))return $;if(typeof $==="string")try{return LY.from(i1($))}catch(Q){o(!1,"invalid constuctor fragment","obj",$)}else if($ instanceof cZ){A5($,rX(["constructor"]));let Q=N5($),X=!!A5($,WG0).has("payable"),Y=Rb($);return iG($),new LY(E8,"constructor",Q,X,Y)}return new LY(E8,"constructor",$.inputs?$.inputs.map(e$.from):[],!!$.payable,$.gas!=null?$.gas:null)}static isFragment($){return $&&$[wY]===Ub}};lY=class lY extends pZ{payable;constructor($,Q,X){super($,"fallback",Q);Object.defineProperty(this,wY,{value:Wb}),E0(this,{payable:X})}format($){let Q=this.inputs.length===0?"receive":"fallback";if($==="json"){let X=this.payable?"payable":"nonpayable";return JSON.stringify({type:Q,stateMutability:X})}return`${Q}()${this.payable?" payable":""}`}static from($){if(lY.isFragment($))return $;if(typeof $==="string")try{return lY.from(i1($))}catch(Q){o(!1,"invalid fallback fragment","obj",$)}else if($ instanceof cZ){let Q=$.toString(),X=$.peekKeyword(rX(["fallback","receive"]));if(o(X,"type must be fallback or receive","obj",Q),$.popKeyword(rX(["fallback","receive"]))==="receive"){let q=N5($);return o(q.length===0,"receive cannot have arguments","obj.inputs",q),A5($,rX(["payable"])),iG($),new lY(E8,[],!0)}let Z=N5($);if(Z.length)o(Z.length===1&&Z[0].type==="bytes","invalid fallback inputs","obj.inputs",Z.map((q)=>q.format("minimal")).join(", "));else Z=[e$.from("bytes")];let J=Ab($);if(o(J==="nonpayable"||J==="payable","fallback cannot be constants","obj.stateMutability",J),A5($,rX(["returns"])).has("returns")){let q=N5($);o(q.length===1&&q[0].type==="bytes","invalid fallback outputs","obj.outputs",q.map((G)=>G.format("minimal")).join(", "))}return iG($),new lY(E8,Z,J==="payable")}if($.type==="receive")return new lY(E8,[],!0);if($.type==="fallback"){let Q=[e$.from("bytes")],X=$.stateMutability==="payable";return new lY(E8,Q,X)}o(!1,"invalid fallback description","obj",$)}static isFragment($){return $&&$[wY]===Wb}};oX=class oX extends R5{constant;outputs;stateMutability;payable;gas;constructor($,Q,X,Y,Z,J){super($,"function",Q,Y);Object.defineProperty(this,wY,{value:Vb}),Z=Object.freeze(Z.slice()),E0(this,{constant:X==="view"||X==="pure",gas:J,outputs:Z,payable:X==="payable",stateMutability:X})}get selector(){return xQ(this.format("sighash")).substring(0,10)}format($){if($==null)$="sighash";if($==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map((X)=>JSON.parse(X.format($))),outputs:this.outputs.map((X)=>JSON.parse(X.format($)))});let Q=[];if($!=="sighash")Q.push("function");if(Q.push(this.name+VV($,this.inputs)),$!=="sighash"){if(this.stateMutability!=="nonpayable")Q.push(this.stateMutability);if(this.outputs&&this.outputs.length)Q.push("returns"),Q.push(VV($,this.outputs));if(this.gas!=null)Q.push(`@${this.gas.toString()}`)}return Q.join(" ")}static getSelector($,Q){return Q=(Q||[]).map((Y)=>e$.from(Y)),new oX(E8,$,"view",Q,[],null).selector}static from($){if(oX.isFragment($))return $;if(typeof $==="string")try{return oX.from(i1($))}catch(X){o(!1,"invalid function fragment","obj",$)}else if($ instanceof cZ){let X=XP("function",$),Y=N5($),Z=Ab($),J=[];if(A5($,rX(["returns"])).has("returns"))J=N5($);let q=Rb($);return iG($),new oX(E8,X,Z,Y,J,q)}let Q=$.stateMutability;if(Q==null){if(Q="payable",typeof $.constant==="boolean"){if(Q="view",!$.constant){if(Q="payable",typeof $.payable==="boolean"&&!$.payable)Q="nonpayable"}}else if(typeof $.payable==="boolean"&&!$.payable)Q="nonpayable"}return new oX(E8,$.name,Q,$.inputs?$.inputs.map(e$.from):[],$.outputs?$.outputs.map(e$.from):[],$.gas!=null?$.gas:null)}static isFragment($){return $&&$[wY]===Vb}};A9=class A9 extends R5{constructor($,Q,X){super($,"struct",Q,X);Object.defineProperty(this,wY,{value:Ob})}format(){throw new Error("@TODO")}static from($){if(typeof $==="string")try{return A9.from(i1($))}catch(Q){o(!1,"invalid struct fragment","obj",$)}else if($ instanceof cZ){let Q=XP("struct",$),X=N5($);return iG($),new A9(E8,Q,X)}return new A9(E8,$.name,$.inputs?$.inputs.map(e$.from):[])}static isFragment($){return $&&$[wY]===Ob}}});function wG0($,Q,X,Y){let Z="missing revert data",J=null,q=null,G=null;if(X){Z="execution reverted";let M=L0(X);if(X=D0(X),M.length===0)Z+=" (no data present; likely require(false) occurred",J="require(false)";else if(M.length%32!==4)Z+=" (could not decode reason; invalid data length)";else if(D0(M.slice(0,4))==="0x08c379a0")try{J=Y.decode(["string"],M.slice(4))[0],G={signature:"Error(string)",name:"Error",args:[J]},Z+=`: ${JSON.stringify(J)}`}catch(j){Z+=" (could not decode reason; invalid string data)"}else if(D0(M.slice(0,4))==="0x4e487b71")try{let j=Number(Y.decode(["uint256"],M.slice(4))[0]);G={signature:"Panic(uint256)",name:"Panic",args:[j]},J=`Panic due to ${R9.get(j)||"UNKNOWN"}(${j})`,Z+=`: ${J}`}catch(j){Z+=" (could not decode panic code)"}else Z+=" (unknown custom error)"}let z={to:Q.to?J$(Q.to):null,data:Q.data||"0x"};if(Q.from)z.from=J$(Q.from);return _$(Z,"CALL_EXCEPTION",{action:$,data:X,reason:J,transaction:z,invocation:q,revert:G})}class TY{#$($){if($.isArray())return new IC(this.#$($.arrayChildren),$.arrayLength,$.name);if($.isTuple())return new zU($.components.map((X)=>this.#$(X)),$.name);switch($.baseType){case"address":return new CC($.name);case"bool":return new BC($.name);case"string":return new fC($.name);case"bytes":return new SC($.name);case"":return new kC($.name)}let Q=$.type.match(LG0);if(Q){let X=parseInt(Q[2]||"256");return o(X!==0&&X<=256&&X%8===0,"invalid "+Q[1]+" bit length","param",$),new xC(X/8,Q[1]==="int",$.name)}if(Q=$.type.match(CG0),Q){let X=parseInt(Q[1]);return o(X!==0&&X<=32,"invalid bytes length","param",$),new _C(X,$.name)}o(!1,"invalid type","type",$.type)}getDefaultValue($){let Q=$.map((Y)=>this.#$(e$.from(Y)));return new zU(Q,"_").defaultValue()}encode($,Q){_1(Q.length,$.length,"types/values length mismatch");let X=$.map((J)=>this.#$(e$.from(J))),Y=new zU(X,"_"),Z=new eK;return Y.encode(Z,Q),Z.data}decode($,Q,X){let Y=$.map((J)=>this.#$(e$.from(J)));return new zU(Y,"_").decode(new zj(Q,X,Cb))}static _setDefaultMaxInflation($){o(typeof $==="number"&&Number.isInteger($),"invalid defaultMaxInflation factor","value",$),Cb=$}static defaultAbiCoder(){if(eC==null)eC=new TY;return eC}static getBuiltinCallException($,Q,X){return wG0($,Q,X,TY.defaultAbiCoder())}}var R9,CG0,LG0,eC=null,Cb=1024;var $L=y(()=>{a0();kZ();zy();FC();Uy();EC();Wy();Vy();Oy();My();Dy();YP();s8();a0();R9=new Map;R9.set(0,"GENERIC_PANIC");R9.set(1,"ASSERT_FALSE");R9.set(17,"OVERFLOW");R9.set(18,"DIVIDE_BY_ZERO");R9.set(33,"ENUM_RANGE_ERROR");R9.set(34,"BAD_STORAGE_DATA");R9.set(49,"STACK_UNDERFLOW");R9.set(50,"ARRAY_RANGE_ERROR");R9.set(65,"OUT_OF_MEMORY");R9.set(81,"UNINITIALIZED_FUNCTION_CALL");CG0=new RegExp(/^bytes([0-9]*)$/),LG0=new RegExp(/^(u?int)([0-9]*)$/)});function ZP($){let Q=s$($);if(Q.length>31)throw new Error("bytes32 string must be less than 32 bytes");return ZJ(Q,32)}function JP($){let Q=L0($,"bytes");if(Q.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(Q[31]!==0)throw new Error("invalid bytes32 string - no null terminator");let X=31;while(Q[X-1]===0)X--;return LX(Q.slice(0,X))}var Lb=y(()=>{a0()});class jU{fragment;name;signature;topic;args;constructor($,Q,X){let Y=$.name,Z=$.format();E0(this,{fragment:$,name:Y,signature:Z,topic:Q,args:X})}}class PU{fragment;name;args;signature;selector;value;constructor($,Q,X,Y){let Z=$.name,J=$.format();E0(this,{fragment:$,name:Z,args:X,signature:J,selector:Q,value:Y})}}class HU{fragment;name;args;signature;selector;constructor($,Q,X){let Y=$.name,Z=$.format();E0(this,{fragment:$,name:Y,args:X,signature:Z,selector:Q})}}class nG{hash;_isIndexed;static isIndexed($){return!!($&&$._isIndexed)}constructor($){E0(this,{hash:$,_isIndexed:!0})}}class IY{fragments;deploy;fallback;receive;#$;#Q;#X;#Y;constructor($){let Q=[];if(typeof $==="string")Q=JSON.parse($);else Q=$;this.#X=new Map,this.#$=new Map,this.#Q=new Map;let X=[];for(let J of Q)try{X.push(pZ.from(J))}catch(q){console.log(`[Warning] Invalid Fragment ${JSON.stringify(J)}:`,q.message)}E0(this,{fragments:Object.freeze(X)});let Y=null,Z=!1;if(this.#Y=this.getAbiCoder(),this.fragments.forEach((J,q)=>{let G;switch(J.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}E0(this,{deploy:J});return;case"fallback":if(J.inputs.length===0)Z=!0;else o(!Y||J.payable!==Y.payable,"conflicting fallback fragments",`fragments[${q}]`,J),Y=J,Z=Y.payable;return;case"function":G=this.#X;break;case"event":G=this.#Q;break;case"error":G=this.#$;break;default:return}let z=J.format();if(G.has(z))return;G.set(z,J)}),!this.deploy)E0(this,{deploy:LY.from("constructor()")});E0(this,{fallback:Y,receive:Z})}format($){let Q=$?"minimal":"full";return this.fragments.map((Y)=>Y.format(Q))}formatJson(){let $=this.fragments.map((Q)=>Q.format("json"));return JSON.stringify($.map((Q)=>JSON.parse(Q)))}getAbiCoder(){return TY.defaultAbiCoder()}#Z($,Q,X){if(w$($)){let Z=$.toLowerCase();for(let J of this.#X.values())if(Z===J.selector)return J;return null}if($.indexOf("(")===-1){let Z=[];for(let[J,q]of this.#X)if(J.split("(")[0]===$)Z.push(q);if(Q){let J=Q.length>0?Q[Q.length-1]:null,q=Q.length,G=!0;if(v$.isTyped(J)&&J.type==="overrides")G=!1,q--;for(let z=Z.length-1;z>=0;z--){let M=Z[z].inputs.length;if(M!==q&&(!G||M!==q-1))Z.splice(z,1)}for(let z=Z.length-1;z>=0;z--){let M=Z[z].inputs;for(let j=0;j<Q.length;j++){if(!v$.isTyped(Q[j]))continue;if(j>=M.length){if(Q[j].type==="overrides")continue;Z.splice(z,1);break}if(Q[j].type!==M[j].baseType){Z.splice(z,1);break}}}}if(Z.length===1&&Q&&Q.length!==Z[0].inputs.length){let J=Q[Q.length-1];if(J==null||Array.isArray(J)||typeof J!=="object")Z.splice(0,1)}if(Z.length===0)return null;if(Z.length>1&&X){let J=Z.map((q)=>JSON.stringify(q.format())).join(", ");o(!1,`ambiguous function description (i.e. matches ${J})`,"key",$)}return Z[0]}let Y=this.#X.get(oX.from($).format());if(Y)return Y;return null}getFunctionName($){let Q=this.#Z($,null,!1);return o(Q,"no matching function","key",$),Q.name}hasFunction($){return!!this.#Z($,null,!1)}getFunction($,Q){return this.#Z($,Q||null,!0)}forEachFunction($){let Q=Array.from(this.#X.keys());Q.sort((X,Y)=>X.localeCompare(Y));for(let X=0;X<Q.length;X++){let Y=Q[X];$(this.#X.get(Y),X)}}#G($,Q,X){if(w$($)){let Z=$.toLowerCase();for(let J of this.#Q.values())if(Z===J.topicHash)return J;return null}if($.indexOf("(")===-1){let Z=[];for(let[J,q]of this.#Q)if(J.split("(")[0]===$)Z.push(q);if(Q){for(let J=Z.length-1;J>=0;J--)if(Z[J].inputs.length<Q.length)Z.splice(J,1);for(let J=Z.length-1;J>=0;J--){let q=Z[J].inputs;for(let G=0;G<Q.length;G++){if(!v$.isTyped(Q[G]))continue;if(Q[G].type!==q[G].baseType){Z.splice(J,1);break}}}}if(Z.length===0)return null;if(Z.length>1&&X){let J=Z.map((q)=>JSON.stringify(q.format())).join(", ");o(!1,`ambiguous event description (i.e. matches ${J})`,"key",$)}return Z[0]}let Y=this.#Q.get(nX.from($).format());if(Y)return Y;return null}getEventName($){let Q=this.#G($,null,!1);return o(Q,"no matching event","key",$),Q.name}hasEvent($){return!!this.#G($,null,!1)}getEvent($,Q){return this.#G($,Q||null,!0)}forEachEvent($){let Q=Array.from(this.#Q.keys());Q.sort((X,Y)=>X.localeCompare(Y));for(let X=0;X<Q.length;X++){let Y=Q[X];$(this.#Q.get(Y),X)}}getError($,Q){if(w$($)){let Y=$.toLowerCase();if(Tb[Y])return wQ.from(Tb[Y].signature);for(let Z of this.#$.values())if(Y===Z.selector)return Z;return null}if($.indexOf("(")===-1){let Y=[];for(let[Z,J]of this.#$)if(Z.split("(")[0]===$)Y.push(J);if(Y.length===0){if($==="Error")return wQ.from("error Error(string)");if($==="Panic")return wQ.from("error Panic(uint256)");return null}else if(Y.length>1){let Z=Y.map((J)=>JSON.stringify(J.format())).join(", ");o(!1,`ambiguous error description (i.e. ${Z})`,"name",$)}return Y[0]}if($=wQ.from($).format(),$==="Error(string)")return wQ.from("error Error(string)");if($==="Panic(uint256)")return wQ.from("error Panic(uint256)");let X=this.#$.get($);if(X)return X;return null}forEachError($){let Q=Array.from(this.#$.keys());Q.sort((X,Y)=>X.localeCompare(Y));for(let X=0;X<Q.length;X++){let Y=Q[X];$(this.#$.get(Y),X)}}_decodeParams($,Q){return this.#Y.decode($,Q)}_encodeParams($,Q){return this.#Y.encode($,Q)}encodeDeploy($){return this._encodeParams(this.deploy.inputs,$||[])}decodeErrorResult($,Q){if(typeof $==="string"){let X=this.getError($);o(X,"unknown error","fragment",$),$=X}return o(c$(Q,0,4)===$.selector,`data signature does not match error ${$.name}.`,"data",Q),this._decodeParams($.inputs,c$(Q,4))}encodeErrorResult($,Q){if(typeof $==="string"){let X=this.getError($);o(X,"unknown error","fragment",$),$=X}return V$([$.selector,this._encodeParams($.inputs,Q||[])])}decodeFunctionData($,Q){if(typeof $==="string"){let X=this.getFunction($);o(X,"unknown function","fragment",$),$=X}return o(c$(Q,0,4)===$.selector,`data signature does not match function ${$.name}.`,"data",Q),this._decodeParams($.inputs,c$(Q,4))}encodeFunctionData($,Q){if(typeof $==="string"){let X=this.getFunction($);o(X,"unknown function","fragment",$),$=X}return V$([$.selector,this._encodeParams($.inputs,Q||[])])}decodeFunctionResult($,Q){if(typeof $==="string"){let Z=this.getFunction($);o(Z,"unknown function","fragment",$),$=Z}let X="invalid length for result data",Y=P8(Q);if(Y.length%32===0)try{return this.#Y.decode($.outputs,Y)}catch(Z){X="could not decode result data"}V0(!1,X,"BAD_DATA",{value:D0(Y),info:{method:$.name,signature:$.format()}})}makeError($,Q){let X=L0($,"data"),Y=TY.getBuiltinCallException("call",Q,X),Z="execution reverted (unknown custom error)";if(Y.message.startsWith("execution reverted (unknown custom error)")){let q=D0(X.slice(0,4)),G=this.getError(q);if(G)try{let z=this.#Y.decode(G.inputs,X.slice(4));Y.revert={name:G.name,signature:G.format(),args:z},Y.reason=Y.revert.signature,Y.message=`execution reverted: ${Y.reason}`}catch(z){Y.message="execution reverted (coult not decode custom error)"}}let J=this.parseTransaction(Q);if(J)Y.invocation={method:J.name,signature:J.signature,args:J.args};return Y}encodeFunctionResult($,Q){if(typeof $==="string"){let X=this.getFunction($);o(X,"unknown function","fragment",$),$=X}return D0(this.#Y.encode($.outputs,Q||[]))}encodeFilterTopics($,Q){if(typeof $==="string"){let Z=this.getEvent($);o(Z,"unknown event","eventFragment",$),$=Z}V0(Q.length<=$.inputs.length,`too many arguments for ${$.format()}`,"UNEXPECTED_ARGUMENT",{count:Q.length,expectedCount:$.inputs.length});let X=[];if(!$.anonymous)X.push($.topicHash);let Y=(Z,J)=>{if(Z.type==="string")return xQ(J);else if(Z.type==="bytes")return A$(D0(J));if(Z.type==="bool"&&typeof J==="boolean")J=J?"0x01":"0x00";else if(Z.type.match(/^u?int/))J=RQ(J);else if(Z.type.match(/^bytes/))J=ZJ(J,32);else if(Z.type==="address")this.#Y.encode(["address"],[J]);return m8(D0(J),32)};Q.forEach((Z,J)=>{let q=$.inputs[J];if(!q.indexed){o(Z==null,"cannot filter non-indexed parameters; must be null","contract."+q.name,Z);return}if(Z==null)X.push(null);else if(q.baseType==="array"||q.baseType==="tuple")o(!1,"filtering with tuples or arrays not supported","contract."+q.name,Z);else if(Array.isArray(Z))X.push(Z.map((G)=>Y(q,G)));else X.push(Y(q,Z))});while(X.length&&X[X.length-1]===null)X.pop();return X}encodeEventLog($,Q){if(typeof $==="string"){let J=this.getEvent($);o(J,"unknown event","eventFragment",$),$=J}let X=[],Y=[],Z=[];if(!$.anonymous)X.push($.topicHash);return o(Q.length===$.inputs.length,"event arguments/values mismatch","values",Q),$.inputs.forEach((J,q)=>{let G=Q[q];if(J.indexed)if(J.type==="string")X.push(xQ(G));else if(J.type==="bytes")X.push(A$(G));else if(J.baseType==="tuple"||J.baseType==="array")throw new Error("not implemented");else X.push(this.#Y.encode([J.type],[G]));else Y.push(J),Z.push(G)}),{data:this.#Y.encode(Y,Z),topics:X}}decodeEventLog($,Q,X){if(typeof $==="string"){let D=this.getEvent($);o(D,"unknown event","eventFragment",$),$=D}if(X!=null&&!$.anonymous){let D=$.topicHash;o(w$(X[0],32)&&X[0].toLowerCase()===D,"fragment/topic mismatch","topics[0]",X[0]),X=X.slice(1)}let Y=[],Z=[],J=[];$.inputs.forEach((D,A)=>{if(D.indexed)if(D.type==="string"||D.type==="bytes"||D.baseType==="tuple"||D.baseType==="array")Y.push(e$.from({type:"bytes32",name:D.name})),J.push(!0);else Y.push(D),J.push(!1);else Z.push(D),J.push(!1)});let q=X!=null?this.#Y.decode(Y,V$(X)):null,G=this.#Y.decode(Z,Q,!0),z=[],M=[],j=0,P=0;return $.inputs.forEach((D,A)=>{let I=null;if(D.indexed)if(q==null)I=new nG(null);else if(J[A])I=new nG(q[P++]);else try{I=q[P++]}catch(H){I=H}else try{I=G[j++]}catch(H){I=H}z.push(I),M.push(D.name||null)}),dX.fromItems(z,M)}parseTransaction($){let Q=L0($.data,"tx.data"),X=n0($.value!=null?$.value:0,"tx.value"),Y=this.getFunction(D0(Q.slice(0,4)));if(!Y)return null;let Z=this.#Y.decode(Y.inputs,Q.slice(4));return new PU(Y,Y.selector,Z,X)}parseCallResult($){throw new Error("@TODO")}parseLog($){let Q=this.getEvent($.topics[0]);if(!Q||Q.anonymous)return null;return new jU(Q,Q.topicHash,this.decodeEventLog(Q,$.data,$.topics))}parseError($){let Q=D0($),X=this.getError(c$(Q,0,4));if(!X)return null;let Y=this.#Y.decode(X.inputs,c$(Q,4));return new HU(X,X.selector,Y)}static from($){if($ instanceof IY)return $;if(typeof $==="string")return new IY(JSON.parse($));if(typeof $.formatJson==="function")return new IY($.formatJson());if(typeof $.format==="function")return new IY($.format("json"));return new IY($)}}var wb,Tb;var Ib=y(()=>{XQ();WJ();a0();$L();kZ();YP();UJ();wb={"0":"generic panic","1":"assert(false)","17":"arithmetic overflow","18":"division or modulo by zero","33":"enum overflow","34":"invalid encoded storage byte array accessed","49":"out-of-bounds array access; popping on an empty array","50":"out-of-bounds access of an array or bytesN","65":"out of memory","81":"uninitialized function"},Tb={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:($)=>{return`reverted with reason string ${JSON.stringify($)}`}},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:($)=>{let Q="unknown panic code";if($>=0&&$<=255&&wb[$.toString()])Q=wb[$.toString()];return`reverted with panic code 0x${$.toString(16)} (${Q})`}}}});var NU=y(()=>{$L();Lb();YP();Ib();UJ()});function AU($){if($==null)return null;return $}function t8($){if($==null)return null;return $.toString()}class n1{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor($,Q,X){E0(this,{gasPrice:AU($),maxFeePerGas:AU(Q),maxPriorityFeePerGas:AU(X)})}toJSON(){let{gasPrice:$,maxFeePerGas:Q,maxPriorityFeePerGas:X}=this;return{_type:"FeeData",gasPrice:t8($),maxFeePerGas:t8(Q),maxPriorityFeePerGas:t8(X)}}}function uY($){let Q={};if($.to)Q.to=$.to;if($.from)Q.from=$.from;if($.data)Q.data=D0($.data);let X="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(let Z of X){if(!(Z in $)||$[Z]==null)continue;Q[Z]=n0($[Z],`request.${Z}`)}let Y="type,nonce".split(/,/);for(let Z of Y){if(!(Z in $)||$[Z]==null)continue;Q[Z]=Y$($[Z],`request.${Z}`)}if($.accessList)Q.accessList=_Q($.accessList);if($.authorizationList)Q.authorizationList=$.authorizationList.slice();if("blockTag"in $)Q.blockTag=$.blockTag;if("enableCcipRead"in $)Q.enableCcipRead=!!$.enableCcipRead;if("customData"in $)Q.customData=$.customData;if("blobVersionedHashes"in $&&$.blobVersionedHashes)Q.blobVersionedHashes=$.blobVersionedHashes.slice();if("kzg"in $)Q.kzg=$.kzg;if("blobs"in $&&$.blobs)Q.blobs=$.blobs.map((Z)=>{if(SZ(Z))return D0(Z);return Object.assign({},Z)});return Q}class dY{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor($,Q){this.provider=Q;let X=Object.freeze($.topics.slice());E0(this,{transactionHash:$.transactionHash,blockHash:$.blockHash,blockNumber:$.blockNumber,removed:$.removed,address:$.address,data:$.data,topics:X,index:$.index,transactionIndex:$.transactionIndex})}toJSON(){let{address:$,blockHash:Q,blockNumber:X,data:Y,index:Z,removed:J,topics:q,transactionHash:G,transactionIndex:z}=this;return{_type:"log",address:$,blockHash:Q,blockNumber:X,data:Y,index:Z,removed:J,topics:q,transactionHash:G,transactionIndex:z}}async getBlock(){let $=await this.provider.getBlock(this.blockHash);return V0(!!$,"failed to find transaction","UNKNOWN_ERROR",{}),$}async getTransaction(){let $=await this.provider.getTransaction(this.transactionHash);return V0(!!$,"failed to find transaction","UNKNOWN_ERROR",{}),$}async getTransactionReceipt(){let $=await this.provider.getTransactionReceipt(this.transactionHash);return V0(!!$,"failed to find transaction receipt","UNKNOWN_ERROR",{}),$}removedEvent(){return IG0(this)}}class C9{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#$;constructor($,Q){this.provider=Q,this.blockNumber=$.blockNumber!=null?$.blockNumber:null,this.blockHash=$.blockHash!=null?$.blockHash:null,this.hash=$.hash,this.index=$.index,this.type=$.type,this.from=$.from,this.to=$.to||null,this.gasLimit=$.gasLimit,this.nonce=$.nonce,this.data=$.data,this.value=$.value,this.gasPrice=$.gasPrice,this.maxPriorityFeePerGas=$.maxPriorityFeePerGas!=null?$.maxPriorityFeePerGas:null,this.maxFeePerGas=$.maxFeePerGas!=null?$.maxFeePerGas:null,this.maxFeePerBlobGas=$.maxFeePerBlobGas!=null?$.maxFeePerBlobGas:null,this.chainId=$.chainId,this.signature=$.signature,this.accessList=$.accessList!=null?$.accessList:null,this.blobVersionedHashes=$.blobVersionedHashes!=null?$.blobVersionedHashes:null,this.authorizationList=$.authorizationList!=null?$.authorizationList:null,this.#$=-1}toJSON(){let{blockNumber:$,blockHash:Q,index:X,hash:Y,type:Z,to:J,from:q,nonce:G,data:z,signature:M,accessList:j,blobVersionedHashes:P}=this;return{_type:"TransactionResponse",accessList:j,blockNumber:$,blockHash:Q,blobVersionedHashes:P,chainId:t8(this.chainId),data:z,from:q,gasLimit:t8(this.gasLimit),gasPrice:t8(this.gasPrice),hash:Y,maxFeePerGas:t8(this.maxFeePerGas),maxPriorityFeePerGas:t8(this.maxPriorityFeePerGas),maxFeePerBlobGas:t8(this.maxFeePerBlobGas),nonce:G,signature:M,to:J,index:X,type:Z,value:t8(this.value)}}async getBlock(){let $=this.blockNumber;if($==null){let X=await this.getTransaction();if(X)$=X.blockNumber}if($==null)return null;let Q=this.provider.getBlock($);if(Q==null)throw new Error("TODO");return Q}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){let{tx:Q,blockNumber:X}=await W8({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});if(Q==null||Q.blockNumber==null)return 0;return X-Q.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait($,Q){let X=$==null?1:$,Y=Q==null?0:Q,Z=this.#$,J=-1,q=Z===-1?!0:!1,G=async()=>{if(q)return null;let{blockNumber:P,nonce:D}=await W8({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(D<this.nonce){Z=P;return}if(q)return null;let A=await this.getTransaction();if(A&&A.blockNumber!=null)return;if(J===-1){if(J=Z-3,J<this.#$)J=this.#$}while(J<=P){if(q)return null;let I=await this.provider.getBlock(J,!0);if(I==null)return;for(let H of I)if(H===this.hash)return;for(let H=0;H<I.length;H++){let C=await I.getTransaction(H);if(C.from===this.from&&C.nonce===this.nonce){if(q)return null;let B=await this.provider.getTransactionReceipt(C.hash);if(B==null)return;if(P-B.blockNumber+1<X)return;let S="replaced";if(C.data===this.data&&C.to===this.to&&C.value===this.value)S="repriced";else if(C.data==="0x"&&C.from===C.to&&C.value===Fb)S="cancelled";V0(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:S==="replaced"||S==="cancelled",reason:S,replacement:C.replaceableTransaction(Z),hash:C.hash,receipt:B})}}J++}return},z=(P)=>{if(P==null||P.status!==0)return P;V0(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:P.to,from:P.from,data:""},receipt:P})},M=await this.provider.getTransactionReceipt(this.hash);if(X===0)return z(M);if(M){if(X===1||await M.confirmations()>=X)return z(M)}else if(await G(),X===0)return null;return await new Promise((P,D)=>{let A=[],I=()=>{A.forEach((C)=>C())};if(A.push(()=>{q=!0}),Y>0){let C=setTimeout(()=>{I(),D(_$("wait for transaction timeout","TIMEOUT"))},Y);A.push(()=>{clearTimeout(C)})}let H=async(C)=>{if(await C.confirmations()>=X){I();try{P(z(C))}catch(B){D(B)}}};if(A.push(()=>{this.provider.off(this.hash,H)}),this.provider.on(this.hash,H),Z>=0){let C=async()=>{try{await G()}catch(B){if(i$(B,"TRANSACTION_REPLACED")){I(),D(B);return}}if(!q)this.provider.once("block",C)};A.push(()=>{this.provider.off("block",C)}),this.provider.once("block",C)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return V0(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Sb(this)}reorderedEvent($){return V0(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),V0(!$||$.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Bb(this,$)}replaceableTransaction($){o(Number.isInteger($)&&$>=0,"invalid startBlock","startBlock",$);let Q=new C9(this,this.provider);return Q.#$=$,Q}}function TG0($){return{orphan:"drop-block",hash:$.hash,number:$.number}}function Bb($,Q){return{orphan:"reorder-transaction",tx:$,other:Q}}function Sb($){return{orphan:"drop-transaction",tx:$}}function IG0($){return{orphan:"drop-log",log:{transactionHash:$.transactionHash,blockHash:$.blockHash,blockNumber:$.blockNumber,address:$.address,data:$.data,topics:Object.freeze($.topics.slice()),index:$.index}}}var Fb,oG,C5;var RU=y(()=>{a0();iX();Fb=BigInt(0);oG=class oG{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#$;constructor($,Q){this.#$=$.transactions.map((X)=>{if(typeof X!=="string")return new C9(X,Q);return X}),E0(this,{provider:Q,hash:AU($.hash),number:$.number,timestamp:$.timestamp,parentHash:$.parentHash,parentBeaconBlockRoot:$.parentBeaconBlockRoot,nonce:$.nonce,difficulty:$.difficulty,gasLimit:$.gasLimit,gasUsed:$.gasUsed,blobGasUsed:$.blobGasUsed,excessBlobGas:$.excessBlobGas,miner:$.miner,prevRandao:AU($.prevRandao),extraData:$.extraData,baseFeePerGas:AU($.baseFeePerGas),stateRoot:$.stateRoot,receiptsRoot:$.receiptsRoot})}get transactions(){return this.#$.map(($)=>{if(typeof $==="string")return $;return $.hash})}get prefetchedTransactions(){let $=this.#$.slice();if($.length===0)return[];return V0(typeof $[0]==="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),$}toJSON(){let{baseFeePerGas:$,difficulty:Q,extraData:X,gasLimit:Y,gasUsed:Z,hash:J,miner:q,prevRandao:G,nonce:z,number:M,parentHash:j,parentBeaconBlockRoot:P,stateRoot:D,receiptsRoot:A,timestamp:I,transactions:H}=this;return{_type:"Block",baseFeePerGas:t8($),difficulty:t8(Q),extraData:X,gasLimit:t8(Y),gasUsed:t8(Z),blobGasUsed:t8(this.blobGasUsed),excessBlobGas:t8(this.excessBlobGas),hash:J,miner:q,prevRandao:G,nonce:z,number:M,parentHash:j,timestamp:I,parentBeaconBlockRoot:P,stateRoot:D,receiptsRoot:A,transactions:H}}[Symbol.iterator](){let $=0,Q=this.transactions;return{next:()=>{if($<this.length)return{value:Q[$++],done:!1};return{value:void 0,done:!0}}}}get length(){return this.#$.length}get date(){if(this.timestamp==null)return null;return new Date(this.timestamp*1000)}async getTransaction($){let Q=void 0;if(typeof $==="number")Q=this.#$[$];else{let X=$.toLowerCase();for(let Y of this.#$)if(typeof Y==="string"){if(Y!==X)continue;Q=Y;break}else{if(Y.hash!==X)continue;Q=Y;break}}if(Q==null)throw new Error("no such tx");if(typeof Q==="string")return await this.provider.getTransaction(Q);else return Q}getPrefetchedTransaction($){let Q=this.prefetchedTransactions;if(typeof $==="number")return Q[$];$=$.toLowerCase();for(let X of Q)if(X.hash===$)return X;o(!1,"no matching transaction","indexOrHash",$)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return TG0(this)}};C5=class C5{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#$;constructor($,Q){this.#$=Object.freeze($.logs.map((Y)=>{return new dY(Y,Q)}));let X=Fb;if($.effectiveGasPrice!=null)X=$.effectiveGasPrice;else if($.gasPrice!=null)X=$.gasPrice;E0(this,{provider:Q,to:$.to,from:$.from,contractAddress:$.contractAddress,hash:$.hash,index:$.index,blockHash:$.blockHash,blockNumber:$.blockNumber,logsBloom:$.logsBloom,gasUsed:$.gasUsed,cumulativeGasUsed:$.cumulativeGasUsed,blobGasUsed:$.blobGasUsed,gasPrice:X,blobGasPrice:$.blobGasPrice,type:$.type,status:$.status,root:$.root})}get logs(){return this.#$}toJSON(){let{to:$,from:Q,contractAddress:X,hash:Y,index:Z,blockHash:J,blockNumber:q,logsBloom:G,logs:z,status:M,root:j}=this;return{_type:"TransactionReceipt",blockHash:J,blockNumber:q,contractAddress:X,cumulativeGasUsed:t8(this.cumulativeGasUsed),from:Q,gasPrice:t8(this.gasPrice),blobGasUsed:t8(this.blobGasUsed),blobGasPrice:t8(this.blobGasPrice),gasUsed:t8(this.gasUsed),hash:Y,index:Z,logs:z,logsBloom:G,root:j,status:M,to:$}}get length(){return this.logs.length}[Symbol.iterator](){let $=0;return{next:()=>{if($<this.length)return{value:this.logs[$++],done:!1};return{value:void 0,done:!0}}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){let $=await this.provider.getBlock(this.blockHash);if($==null)throw new Error("TODO");return $}async getTransaction(){let $=await this.provider.getTransaction(this.hash);if($==null)throw new Error("TODO");return $}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Sb(this)}reorderedEvent($){return V0(!$||$.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Bb(this,$)}}});var L5,o1,CU,w5,r1,rG;var QL=y(()=>{RU();a0();L5=class L5 extends dY{interface;fragment;args;constructor($,Q,X){super($,$.provider);let Y=Q.decodeEventLog(X,$.data,$.topics);E0(this,{args:Y,fragment:X,interface:Q})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}};o1=class o1 extends dY{error;constructor($,Q){super($,$.provider);E0(this,{error:Q})}};CU=class CU extends C5{#$;constructor($,Q,X){super(X,Q);this.#$=$}get logs(){return super.logs.map(($)=>{let Q=$.topics.length?this.#$.getEvent($.topics[0]):null;if(Q)try{return new L5($,this.#$,Q)}catch(X){return new o1($,X)}return $})}};w5=class w5 extends C9{#$;constructor($,Q,X){super(X,Q);this.#$=$}async wait($,Q){let X=await super.wait($,Q);if(X==null)return null;return new CU(this.#$,this.provider,X)}};r1=class r1 extends V5{log;constructor($,Q,X,Y){super($,Q,X);E0(this,{log:Y})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}};rG=class rG extends r1{constructor($,Q,X,Y,Z){super($,Q,X,new L5(Z,$.interface,Y));let J=$.interface.decodeEventLog(Y,this.log.data,this.log.topics);E0(this,{args:J,fragment:Y})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}});function kb($){return $&&typeof $.call==="function"}function xb($){return $&&typeof $.estimateGas==="function"}function zP($){return $&&typeof $.resolveName==="function"}function fb($){return $&&typeof $.sendTransaction==="function"}function vb($){if($!=null){if(zP($))return $;if($.provider)return $.provider}return}class gb{#$;fragment;constructor($,Q,X){if(E0(this,{fragment:Q}),Q.inputs.length<X.length)throw new Error("too many arguments");let Y=aG($.runner,"resolveName"),Z=zP(Y)?Y:null;this.#$=async function(){let J=await Promise.all(Q.inputs.map((q,G)=>{if(X[G]==null)return null;return q.walkAsync(X[G],(M,j)=>{if(M==="address"){if(Array.isArray(j))return Promise.all(j.map((P)=>H8(P,Z)));return H8(j,Z)}return j})}));return $.interface.encodeFilterTopics(Q,J)}()}getTopicFilter(){return this.#$}}function aG($,Q){if($==null)return null;if(typeof $[Q]==="function")return $;if($.provider&&typeof $.provider[Q]==="function")return $.provider;return null}function sG($){if($==null)return null;return $.provider||null}async function KP($,Q){let X=v$.dereference($,"overrides");o(typeof X==="object","invalid overrides parameter","overrides",$);let Y=uY(X);if(o(Y.to==null||(Q||[]).indexOf("to")>=0,"cannot override to","overrides.to",Y.to),o(Y.data==null||(Q||[]).indexOf("data")>=0,"cannot override data","overrides.data",Y.data),Y.from)Y.from=Y.from;return Y}async function ZL($,Q,X){let Y=aG($,"resolveName"),Z=zP(Y)?Y:null;return await Promise.all(Q.map((J,q)=>{return J.walkAsync(X[q],(G,z)=>{if(z=v$.dereference(z,G),G==="address")return H8(z,Z);return z})}))}function FG0($){let Q=async function(q){let G=await KP(q,["data"]);if(G.to=await $.getAddress(),G.from)G.from=await H8(G.from,vb($.runner));let z=$.interface,M=n0(G.value||Eb,"overrides.value")===Eb,j=(G.data||"0x")==="0x";if(z.fallback&&!z.fallback.payable&&z.receive&&!j&&!M)o(!1,"cannot send data to receive or send value to non-payable fallback","overrides",q);o(z.fallback||j,"cannot send data to receive-only contract","overrides.data",G.data);let P=z.receive||z.fallback&&z.fallback.payable;return o(P||M,"cannot send value to non-payable fallback","overrides.value",G.value),o(z.fallback||j,"cannot send data to receive-only contract","overrides.data",G.data),G},X=async function(q){let G=aG($.runner,"call");V0(kb(G),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let z=await Q(q);try{return await G.call(z)}catch(M){if(W5(M)&&M.data)throw $.interface.makeError(M.data,z);throw M}},Y=async function(q){let G=$.runner;V0(fb(G),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let z=await G.sendTransaction(await Q(q)),M=sG($.runner);return new w5($.interface,M,z)},Z=async function(q){let G=aG($.runner,"estimateGas");return V0(xb(G),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await G.estimateGas(await Q(q))},J=async(q)=>{return await Y(q)};return E0(J,{_contract:$,estimateGas:Z,populateTransaction:Q,send:Y,staticCall:X}),J}function BG0($,Q){let X=function(...M){let j=$.interface.getFunction(Q,M);return V0(j,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:Q,args:M}}),j},Y=async function(...M){let j=X(...M),P={};if(j.inputs.length+1===M.length){if(P=await KP(M.pop()),P.from)P.from=await H8(P.from,vb($.runner))}if(j.inputs.length!==M.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");let D=await ZL($.runner,j.inputs,M);return Object.assign({},P,await W8({to:$.getAddress(),data:$.interface.encodeFunctionData(j,D)}))},Z=async function(...M){let j=await G(...M);if(j.length===1)return j[0];return j},J=async function(...M){let j=$.runner;V0(fb(j),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let P=await j.sendTransaction(await Y(...M)),D=sG($.runner);return new w5($.interface,D,P)},q=async function(...M){let j=aG($.runner,"estimateGas");return V0(xb(j),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await j.estimateGas(await Y(...M))},G=async function(...M){let j=aG($.runner,"call");V0(kb(j),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let P=await Y(...M),D="0x";try{D=await j.call(P)}catch(I){if(W5(I)&&I.data)throw $.interface.makeError(I.data,P);throw I}let A=X(...M);return $.interface.decodeFunctionResult(A,D)},z=async(...M)=>{if(X(...M).constant)return await Z(...M);return await J(...M)};return E0(z,{name:$.interface.getFunctionName(Q),_contract:$,_key:Q,getFragment:X,estimateGas:q,populateTransaction:Y,send:J,staticCall:Z,staticCallResult:G}),Object.defineProperty(z,"fragment",{configurable:!1,enumerable:!0,get:()=>{let M=$.interface.getFunction(Q);return V0(M,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:Q}}),M}}),z}function SG0($,Q){let X=function(...Z){let J=$.interface.getEvent(Q,Z);return V0(J,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:Q,args:Z}}),J},Y=function(...Z){return new gb($,X(...Z),Z)};return E0(Y,{name:$.interface.getEventName(Q),_contract:$,_key:Q,getFragment:X}),Object.defineProperty(Y,"fragment",{configurable:!1,enumerable:!0,get:()=>{let Z=$.interface.getEvent(Q);return V0(Z,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:Q}}),Z}}),Y}function EG0($,Q){yb.set($[GP],Q)}function iY($){return yb.get($[GP])}function _G0($){return $&&typeof $==="object"&&"getTopicFilter"in $&&typeof $.getTopicFilter==="function"&&$.fragment}async function JL($,Q){let X,Y=null;if(Array.isArray(Q)){let J=function(q){if(w$(q,32))return q;let G=$.interface.getEvent(q);return o(G,"unknown fragment","name",q),G.topicHash};X=Q.map((q)=>{if(q==null)return null;if(Array.isArray(q))return q.map(J);return J(q)})}else if(Q==="*")X=[null];else if(typeof Q==="string")if(w$(Q,32))X=[Q];else Y=$.interface.getEvent(Q),o(Y,"unknown fragment","event",Q),X=[Y.topicHash];else if(_G0(Q))X=await Q.getTopicFilter();else if("fragment"in Q)Y=Q.fragment,X=[Y.topicHash];else o(!1,"unknown event name","event",Q);X=X.map((J)=>{if(J==null)return null;if(Array.isArray(J)){let q=Array.from(new Set(J.map((G)=>G.toLowerCase())).values());if(q.length===1)return q[0];return q.sort(),q}return J.toLowerCase()});let Z=X.map((J)=>{if(J==null)return"null";if(Array.isArray(J))return J.join("|");return J}).join("&");return{fragment:Y,tag:Z,topics:X}}async function OV($,Q){let{subs:X}=iY($);return X.get((await JL($,Q)).tag)||null}async function _b($,Q,X){let Y=sG($.runner);V0(Y,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:Q});let{fragment:Z,tag:J,topics:q}=await JL($,X),{addr:G,subs:z}=iY($),M=z.get(J);if(!M){let P={address:G?G:$,topics:q},D=(C)=>{let B=Z;if(B==null)try{B=$.interface.getEvent(C.topics[0])}catch(S){}if(B){let S=B,_=Z?$.interface.decodeEventLog(Z,C.data,C.topics):[];YL($,X,_,(k)=>{return new rG($,k,X,S,C)})}else YL($,X,[],(S)=>{return new r1($,S,X,C)})},A=[];M={tag:J,listeners:[],start:()=>{if(A.length)return;A.push(Y.on(P,D))},stop:async()=>{if(A.length==0)return;let C=A;A=[],await Promise.all(C),Y.off(P,D)}},z.set(J,M)}return M}async function kG0($,Q,X,Y){await XL;let Z=await OV($,Q);if(!Z)return!1;let J=Z.listeners.length;if(Z.listeners=Z.listeners.filter(({listener:q,once:G})=>{let z=Array.from(X);if(Y)z.push(Y(G?null:q));try{q.call($,...z)}catch(M){}return!G}),Z.listeners.length===0)Z.stop(),iY($).subs.delete(Z.tag);return J>0}async function YL($,Q,X,Y){try{await XL}catch(J){}let Z=kG0($,Q,X,Y);return XL=Z,await Z}function xG0(){return lZ}var Eb,GP,yb,XL,qP,lZ,FY;var qL=y(()=>{NU();s8();RU();a0();QL();Eb=BigInt(0);GP=Symbol.for("_ethersInternal_contract"),yb=new WeakMap;XL=Promise.resolve();qP=["then"];lZ=class lZ{target;interface;runner;filters;[GP];fallback;constructor($,Q,X,Y){if(o(typeof $==="string"||mG($),"invalid value for Contract target","target",$),X==null)X=null;let Z=IY.from(Q);E0(this,{target:$,runner:X,interface:Z}),Object.defineProperty(this,GP,{value:{}});let J,q=null,G=null;if(Y){let j=sG(X);G=new w5(this.interface,j,Y)}let z=new Map;if(typeof $==="string")if(w$($))q=$,J=Promise.resolve($);else{let j=aG(X,"resolveName");if(!zP(j))throw _$("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});J=j.resolveName($).then((P)=>{if(P==null)throw _$("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:$});return iY(this).addr=P,P})}else J=$.getAddress().then((j)=>{if(j==null)throw new Error("TODO");return iY(this).addr=j,j});EG0(this,{addrPromise:J,addr:q,deployTx:G,subs:z});let M=new Proxy({},{get:(j,P,D)=>{if(typeof P==="symbol"||qP.indexOf(P)>=0)return Reflect.get(j,P,D);try{return this.getEvent(P)}catch(A){if(!i$(A,"INVALID_ARGUMENT")||A.argument!=="key")throw A}return},has:(j,P)=>{if(qP.indexOf(P)>=0)return Reflect.has(j,P);return Reflect.has(j,P)||this.interface.hasEvent(String(P))}});return E0(this,{filters:M}),E0(this,{fallback:Z.receive||Z.fallback?FG0(this):null}),new Proxy(this,{get:(j,P,D)=>{if(typeof P==="symbol"||P in j||qP.indexOf(P)>=0)return Reflect.get(j,P,D);try{return j.getFunction(P)}catch(A){if(!i$(A,"INVALID_ARGUMENT")||A.argument!=="key")throw A}return},has:(j,P)=>{if(typeof P==="symbol"||P in j||qP.indexOf(P)>=0)return Reflect.has(j,P);return j.interface.hasFunction(P)}})}connect($){return new lZ(this.target,this.interface,$)}attach($){return new lZ($,this.interface,this.runner)}async getAddress(){return await iY(this).addrPromise}async getDeployedCode(){let $=sG(this.runner);V0($,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});let Q=await $.getCode(await this.getAddress());if(Q==="0x")return null;return Q}async waitForDeployment(){let $=this.deploymentTransaction();if($)return await $.wait(),this;if(await this.getDeployedCode()!=null)return this;let X=sG(this.runner);return V0(X!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((Y,Z)=>{let J=async()=>{try{if(await this.getDeployedCode()!=null)return Y(this);X.once("block",J)}catch(q){Z(q)}};J()})}deploymentTransaction(){return iY(this).deployTx}getFunction($){if(typeof $!=="string")$=$.format();return BG0(this,$)}getEvent($){if(typeof $!=="string")$=$.format();return SG0(this,$)}async queryTransaction($){throw new Error("@TODO")}async queryFilter($,Q,X){if(Q==null)Q=0;if(X==null)X="latest";let{addr:Y,addrPromise:Z}=iY(this),J=Y?Y:await Z,{fragment:q,topics:G}=await JL(this,$),z={address:J,topics:G,fromBlock:Q,toBlock:X},M=sG(this.runner);return V0(M,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await M.getLogs(z)).map((j)=>{let P=q;if(P==null)try{P=this.interface.getEvent(j.topics[0])}catch(D){}if(P)try{return new L5(j,this.interface,P)}catch(D){return new o1(j,D)}return new dY(j,M)})}async on($,Q){let X=await _b(this,"on",$);return X.listeners.push({listener:Q,once:!1}),X.start(),this}async once($,Q){let X=await _b(this,"once",$);return X.listeners.push({listener:Q,once:!0}),X.start(),this}async emit($,...Q){return await YL(this,$,Q,null)}async listenerCount($){if($){let Y=await OV(this,$);if(!Y)return 0;return Y.listeners.length}let{subs:Q}=iY(this),X=0;for(let{listeners:Y}of Q.values())X+=Y.length;return X}async listeners($){if($){let Y=await OV(this,$);if(!Y)return[];return Y.listeners.map(({listener:Z})=>Z)}let{subs:Q}=iY(this),X=[];for(let{listeners:Y}of Q.values())X=X.concat(Y.map(({listener:Z})=>Z));return X}async off($,Q){let X=await OV(this,$);if(!X)return this;if(Q){let Y=X.listeners.map(({listener:Z})=>Z).indexOf(Q);if(Y>=0)X.listeners.splice(Y,1)}if(Q==null||X.listeners.length===0)X.stop(),iY(this).subs.delete(X.tag);return this}async removeAllListeners($){if($){let Q=await OV(this,$);if(!Q)return this;Q.stop(),iY(this).subs.delete(Q.tag)}else{let{subs:Q}=iY(this);for(let{tag:X,stop:Y}of Q.values())Y(),Q.delete(X)}return this}async addListener($,Q){return await this.on($,Q)}async removeListener($,Q){return await this.off($,Q)}static buildClass($){class Q extends lZ{constructor(X,Y=null){super(X,$,Y)}}return Q}static from($,Q,X){if(X==null)X=null;return new this($,Q,X)}};FY=class FY extends xG0(){}});class LU{interface;bytecode;runner;constructor($,Q,X){let Y=IY.from($);if(Q instanceof Uint8Array)Q=D0(L0(Q));else{if(typeof Q==="object")Q=Q.object;if(!Q.startsWith("0x"))Q="0x"+Q;Q=D0(L0(Q))}E0(this,{bytecode:Q,interface:Y,runner:X||null})}attach($){return new lZ($,this.interface,this.runner)}async getDeployTransaction(...$){let Q={},X=this.interface.deploy;if(X.inputs.length+1===$.length)Q=await KP($.pop());if(X.inputs.length!==$.length)throw new Error("incorrect number of arguments to constructor");let Y=await ZL(this.runner,X.inputs,$),Z=V$([this.bytecode,this.interface.encodeDeploy(Y)]);return Object.assign({},Q,{data:Z})}async deploy(...$){let Q=await this.getDeployTransaction(...$);V0(this.runner&&typeof this.runner.sendTransaction==="function","factory runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let X=await this.runner.sendTransaction(Q),Y=u1(X);return new lZ(Y,this.interface,this.runner,X)}connect($){return new LU(this.interface,this.bytecode,$)}static fromSolidity($,Q){if(o($!=null,"bad compiler output","output",$),typeof $==="string")$=JSON.parse($);let X=$.abi,Y="";if($.bytecode)Y=$.bytecode;else if($.evm&&$.evm.bytecode)Y=$.evm.bytecode;return new this(X,Y,Q)}}var bb=y(()=>{NU();s8();a0();qL()});var MV=y(()=>{qL();bb();QL()});function GL($){if($.match(/^ipfs:\/\/ipfs\//i))$=$.substring(12);else if($.match(/^ipfs:\/\//i))$=$.substring(7);else o(!1,"unsupported IPFS format","link",$);return`https://gateway.ipfs.io/ipfs/${$}`}class wU{name;constructor($){E0(this,{name:$})}connect($){return this}supportsCoinType($){return!1}async encodeAddress($,Q){throw new Error("unsupported coin")}async decodeAddress($,Q){throw new Error("unsupported coin")}}class L9{provider;address;name;#$;#Q;constructor($,Q,X){E0(this,{provider:$,address:Q,name:X}),this.#$=null,this.#Q=new FY(Q,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],$)}async supportsWildcard(){if(this.#$==null)this.#$=(async()=>{try{return await this.#Q.supportsInterface("0x9061b923")}catch($){if(i$($,"CALL_EXCEPTION"))return!1;throw this.#$=null,$}})();return await this.#$}async#X($,Q){Q=(Q||[]).slice();let X=this.#Q.interface;Q.unshift(H5(this.name));let Y=null;if(await this.supportsWildcard())Y=X.getFunction($),V0(Y,"missing fragment","UNKNOWN_ERROR",{info:{funcName:$}}),Q=[MU(this.name,255),X.encodeFunctionData(Y,Q)],$="resolve(bytes,bytes)";Q.push({enableCcipRead:!0});try{let Z=await this.#Q[$](...Q);if(Y)return X.decodeFunctionResult(Y,Z)[0];return Z}catch(Z){if(!i$(Z,"CALL_EXCEPTION"))throw Z}return null}async getAddress($){if($==null)$=60;if($===60)try{let Z=await this.#X("addr(bytes32)");if(Z==null||Z===bZ)return null;return Z}catch(Z){if(i$(Z,"CALL_EXCEPTION"))return null;throw Z}if($>=0&&$<2147483648){let Z=$+2147483648,J=await this.#X("addr(bytes32,uint)",[Z]);if(w$(J,20))return J$(J)}let Q=null;for(let Z of this.provider.plugins){if(!(Z instanceof wU))continue;if(Z.supportsCoinType($)){Q=Z;break}}if(Q==null)return null;let X=await this.#X("addr(bytes32,uint)",[$]);if(X==null||X==="0x")return null;let Y=await Q.decodeAddress($,X);if(Y!=null)return Y;V0(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${$})`,info:{coinType:$,data:X}})}async getText($){let Q=await this.#X("text(bytes32,string)",[$]);if(Q==null||Q==="0x")return null;return Q}async getContentHash(){let $=await this.#X("contenthash(bytes32)");if($==null||$==="0x")return null;let Q=$.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(Q){let Y=Q[1]==="e3010170"?"ipfs":"ipns",Z=parseInt(Q[4],16);if(Q[5].length===Z*2)return`${Y}://${f1("0x"+Q[2])}`}let X=$.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(X&&X[1].length===64)return`bzz://${X[1]}`;V0(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:$}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){let $=[{type:"name",value:this.name}];try{let Q=await this.getText("avatar");if(Q==null)return $.push({type:"!avatar",value:""}),{url:null,linkage:$};$.push({type:"avatar",value:Q});for(let X=0;X<hb.length;X++){let Y=Q.match(hb[X]);if(Y==null)continue;let Z=Y[1].toLowerCase();switch(Z){case"https":case"data":return $.push({type:"url",value:Q}),{linkage:$,url:Q};case"ipfs":{let J=GL(Q);return $.push({type:"ipfs",value:Q}),$.push({type:"url",value:J}),{linkage:$,url:J}}case"erc721":case"erc1155":{let J=Z==="erc721"?"tokenURI(uint256)":"uri(uint256)";$.push({type:Z,value:Q});let q=await this.getAddress();if(q==null)return $.push({type:"!owner",value:""}),{url:null,linkage:$};let G=(Y[2]||"").split("/");if(G.length!==2)return $.push({type:`!${Z}caip`,value:Y[2]||""}),{url:null,linkage:$};let z=G[1],M=new FY(G[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(Z==="erc721"){let I=await M.ownerOf(z);if(q!==I)return $.push({type:"!owner",value:I}),{url:null,linkage:$};$.push({type:"owner",value:I})}else if(Z==="erc1155"){let I=await M.balanceOf(q,z);if(!I)return $.push({type:"!balance",value:"0"}),{url:null,linkage:$};$.push({type:"balance",value:I.toString()})}let j=await M[J](z);if(j==null||j==="0x")return $.push({type:"!metadata-url",value:""}),{url:null,linkage:$};if($.push({type:"metadata-url-base",value:j}),Z==="erc1155")j=j.replace("{id}",RQ(z,32).substring(2)),$.push({type:"metadata-url-expanded",value:j});if(j.match(/^ipfs:/i))j=GL(j);$.push({type:"metadata-url",value:j});let P={},D=await new n$(j).send();D.assertOk();try{P=D.bodyJson}catch(I){try{$.push({type:"!metadata",value:D.bodyText})}catch(H){let C=D.body;if(C)$.push({type:"!metadata",value:D0(C)});return{url:null,linkage:$}}return{url:null,linkage:$}}if(!P)return $.push({type:"!metadata",value:""}),{url:null,linkage:$};$.push({type:"metadata",value:JSON.stringify(P)});let A=P.image;if(typeof A!=="string")return $.push({type:"!imageUrl",value:""}),{url:null,linkage:$};if(A.match(/^(https:\/\/|data:)/i));else{if(A.match(mb)==null)return $.push({type:"!imageUrl-ipfs",value:A}),{url:null,linkage:$};$.push({type:"imageUrl-ipfs",value:A}),A=GL(A)}return $.push({type:"url",value:A}),{linkage:$,url:A}}}}}catch(Q){}return{linkage:$,url:null}}static async getEnsAddress($){let Q=await $.getNetwork(),X=Q.getPlugin("org.ethers.plugins.network.Ens");return V0(X,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:Q}}),X.address}static async#Y($,Q){let X=await L9.getEnsAddress($);try{let Z=await new FY(X,["function resolver(bytes32) view returns (address)"],$).resolver(H5(Q),{enableCcipRead:!0});if(Z===bZ)return null;return Z}catch(Y){throw Y}return null}static async fromName($,Q){let X=Q;while(!0){if(X===""||X===".")return null;if(Q!=="eth"&&X==="eth")return null;let Y=await L9.#Y($,X);if(Y!=null){let Z=new L9($,Y,Q);if(X!==Q&&!await Z.supportsWildcard())return null;return Z}X=X.split(".").slice(1).join(".")}}}var mb,hb;var zL=y(()=>{s8();qU();MV();WJ();a0();mb=new RegExp("^(ipfs)://(.*)$","i"),hb=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),mb,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")]});function m$($,Q){return function(X){if(X==null)return Q;return $(X)}}function DV($,Q){return(X)=>{if(Q&&X==null)return null;if(!Array.isArray(X))throw new Error("not an array");return X.map((Y)=>$(Y))}}function jV($,Q){return(X)=>{let Y={};for(let Z in $){let J=Z;if(Q&&Z in Q&&!(J in X)){for(let q of Q[Z])if(q in X){J=q;break}}try{let q=$[Z](X[J]);if(q!==void 0)Y[Z]=q}catch(q){let G=q instanceof Error?q.message:"not-an-error";V0(!1,`invalid value for value.${Z} (${G})`,"BAD_DATA",{value:X})}}return Y}}function fG0($){switch($){case!0:case"true":return!0;case!1:case"false":return!1}o(!1,`invalid boolean; ${JSON.stringify($)}`,"value",$)}function TU($){return o(w$($,!0),"invalid data","value",$),$}function tQ($){return o(w$($,32),"invalid hash","value",$),$}function pb($){return vG0($)}function lb($){let Q=gG0($);return Q.transactions=$.transactions.map((X)=>{if(typeof X==="string")return X;return KL(X)}),Q}function bG0($){return yG0($)}function ub($){return hG0($)}function KL($){if($.to&&n0($.to)===cb)$.to="0x0000000000000000000000000000000000000000";let Q=jV({hash:tQ,index:m$(Y$,void 0),type:(X)=>{if(X==="0x"||X==null)return 0;return Y$(X)},accessList:m$(_Q,null),blobVersionedHashes:m$(DV(tQ,!0),null),authorizationList:m$(DV((X)=>{let Y;if(X.signature)Y=X.signature;else{let Z=X.yParity;if(Z==="0x1b")Z=0;else if(Z==="0x1c")Z=1;Y=Object.assign({},X,{yParity:Z})}return{address:J$(X.address),chainId:n0(X.chainId),nonce:n0(X.nonce),signature:Y8.from(Y)}},!1),null),blockHash:m$(tQ,null),blockNumber:m$(Y$,null),transactionIndex:m$(Y$,null),from:J$,gasPrice:m$(n0),maxPriorityFeePerGas:m$(n0),maxFeePerGas:m$(n0),maxFeePerBlobGas:m$(n0,null),gasLimit:n0,to:m$(J$,null),value:n0,nonce:Y$,data:TU,creates:m$(J$,null),chainId:m$(n0,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})($);if(Q.to==null&&Q.creates==null)Q.creates=u1(Q);if(($.type===1||$.type===2)&&$.accessList==null)Q.accessList=[];if($.signature)Q.signature=Y8.from($.signature);else Q.signature=Y8.from($);if(Q.chainId==null){let X=Q.signature.legacyChainId;if(X!=null)Q.chainId=X}if(Q.blockHash&&n0(Q.blockHash)===cb)Q.blockHash=null;return Q}var cb,vG0,gG0,yG0,hG0;var db=y(()=>{s8();XQ();iX();a0();cb=BigInt(0);vG0=jV({address:J$,blockHash:tQ,blockNumber:Y$,data:TU,index:Y$,removed:m$(fG0,!1),topics:DV(tQ),transactionHash:tQ,transactionIndex:Y$},{index:["logIndex"]});gG0=jV({hash:m$(tQ),parentHash:tQ,parentBeaconBlockRoot:m$(tQ,null),number:Y$,timestamp:Y$,nonce:m$(TU),difficulty:n0,gasLimit:n0,gasUsed:n0,stateRoot:m$(tQ,null),receiptsRoot:m$(tQ,null),blobGasUsed:m$(n0,null),excessBlobGas:m$(n0,null),miner:m$(J$),prevRandao:m$(tQ,null),extraData:TU,baseFeePerGas:m$(n0)},{prevRandao:["mixHash"]});yG0=jV({transactionIndex:Y$,blockNumber:Y$,transactionHash:tQ,address:J$,topics:DV(tQ),data:TU,index:Y$,blockHash:tQ},{index:["logIndex"]});hG0=jV({to:m$(J$,null),from:m$(J$,null),contractAddress:m$(J$,null),index:Y$,root:m$(D0),gasUsed:n0,blobGasUsed:m$(n0,null),logsBloom:m$(TU),blockHash:tQ,hash:tQ,logs:DV(bG0),blockNumber:Y$,cumulativeGasUsed:n0,effectiveGasPrice:m$(n0),blobGasPrice:m$(n0,null),status:m$(Y$),type:m$(Y$,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]})});class uZ{name;constructor($){E0(this,{name:$})}clone(){return new uZ(this.name)}}var mG0="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",T5,I5,IU,tG;var UP=y(()=>{a0();T5=class T5 extends uZ{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor($,Q){if($==null)$=0;super(`org.ethers.network.plugins.GasCost#${$||0}`);let X={effectiveBlock:$};function Y(Z,J){let q=(Q||{})[Z];if(q==null)q=J;o(typeof q==="number",`invalud value for ${Z}`,"costs",Q),X[Z]=q}Y("txBase",21000),Y("txCreate",32000),Y("txDataZero",4),Y("txDataNonzero",16),Y("txAccessListStorageKey",1900),Y("txAccessListAddress",2400),E0(this,X)}clone(){return new T5(this.effectiveBlock,this)}};I5=class I5 extends uZ{address;targetNetwork;constructor($,Q){super("org.ethers.plugins.network.Ens");E0(this,{address:$||mG0,targetNetwork:Q==null?1:Q})}clone(){return new I5(this.address,this.targetNetwork)}};IU=class IU extends uZ{#$;get feeDataFunc(){return this.#$}constructor($){super("org.ethers.plugins.network.FeeData");this.#$=$}async getFeeData($){return await this.#$($)}clone(){return new IU(this.#$)}};tG=class tG extends uZ{#$;#Q;get url(){return this.#$}get processFunc(){return this.#Q}constructor($,Q){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");this.#$=$,this.#Q=Q}clone(){return this}}});class B${#$;#Q;#X;constructor($,Q){this.#$=$,this.#Q=n0(Q),this.#X=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#$}set name($){this.#$=$}get chainId(){return this.#Q}set chainId($){this.#Q=n0($,"chainId")}matches($){if($==null)return!1;if(typeof $==="string"){try{return this.chainId===n0($)}catch(Q){}return this.name===$}if(typeof $==="number"||typeof $==="bigint"){try{return this.chainId===n0($)}catch(Q){}return!1}if(typeof $==="object"){if($.chainId!=null){try{return this.chainId===n0($.chainId)}catch(Q){}return!1}if($.name!=null)return this.name===$.name;return!1}return!1}get plugins(){return Array.from(this.#X.values())}attachPlugin($){if(this.#X.get($.name))throw new Error(`cannot replace existing plugin: ${$.name} `);return this.#X.set($.name,$.clone()),this}getPlugin($){return this.#X.get($)||null}getPlugins($){return this.plugins.filter((Q)=>Q.name.split("#")[0]===$)}clone(){let $=new B$(this.name,this.chainId);return this.plugins.forEach((Q)=>{$.attachPlugin(Q.clone())}),$}computeIntrinsicGas($){let Q=this.getPlugin("org.ethers.plugins.network.GasCost")||new T5,X=Q.txBase;if($.to==null)X+=Q.txCreate;if($.data)for(let Y=2;Y<$.data.length;Y+=2)if($.data.substring(Y,Y+2)==="00")X+=Q.txDataZero;else X+=Q.txDataNonzero;if($.accessList){let Y=_Q($.accessList);for(let Z in Y)X+=Q.txAccessListAddress+Q.txAccessListStorageKey*Y[Z].storageKeys.length}return X}static from($){if(cG0(),$==null)return B$.from("mainnet");if(typeof $==="number")$=BigInt($);if(typeof $==="string"||typeof $==="bigint"){let Q=UL.get($);if(Q)return Q();if(typeof $==="bigint")return new B$("unknown",$);o(!1,"unknown network","network",$)}if(typeof $.clone==="function")return $.clone();if(typeof $==="object"){o(typeof $.name==="string"&&typeof $.chainId==="number","invalid network object name or chainId","network",$);let Q=new B$($.name,$.chainId);if($.ensAddress||$.ensNetwork!=null)Q.attachPlugin(new I5($.ensAddress,$.ensNetwork));return Q}o(!1,"invalid network","network",$)}static register($,Q){if(typeof $==="number")$=BigInt($);let X=UL.get($);if(X)o(!1,`conflicting network for ${JSON.stringify(X.name)}`,"nameOrChainId",$);UL.set($,Q)}}function ib($,Q){let X=String($);if(!X.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${$}`);let Y=X.split(".");if(Y.length===1)Y.push("");if(Y.length!==2)throw new Error(`invalid gwei value: ${$}`);while(Y[1].length<Q)Y[1]+="0";if(Y[1].length>9){let Z=BigInt(Y[1].substring(0,9));if(!Y[1].substring(9).match(/^0+$/))Z++;Y[1]=Z.toString()}return BigInt(Y[0]+Y[1])}function nb($){return new tG($,async(Q,X,Y)=>{Y.setHeader("User-Agent","ethers");let Z;try{let[J,q]=await Promise.all([Y.send(),Q()]);Z=J;let G=Z.bodyJson.standard;return{gasPrice:q.gasPrice,maxFeePerGas:ib(G.maxFee,9),maxPriorityFeePerGas:ib(G.maxPriorityFee,9)}}catch(J){V0(!1,`error encountered with polygon gas station (${JSON.stringify(Y.url)})`,"SERVER_ERROR",{request:Y,response:Z,error:J})}})}function cG0(){if(ob)return;ob=!0;function $(Q,X,Y){let Z=function(){let J=new B$(Q,X);if(Y.ensNetwork!=null)J.attachPlugin(new I5(null,Y.ensNetwork));return J.attachPlugin(new T5),(Y.plugins||[]).forEach((q)=>{J.attachPlugin(q)}),J};if(B$.register(Q,Z),B$.register(X,Z),Y.altNames)Y.altNames.forEach((J)=>{B$.register(J,Z)})}$("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),$("ropsten",3,{ensNetwork:3}),$("rinkeby",4,{ensNetwork:4}),$("goerli",5,{ensNetwork:5}),$("kovan",42,{ensNetwork:42}),$("sepolia",11155111,{ensNetwork:11155111}),$("holesky",17000,{ensNetwork:17000}),$("classic",61,{}),$("classicKotti",6,{}),$("arbitrum",42161,{ensNetwork:1}),$("arbitrum-goerli",421613,{}),$("arbitrum-sepolia",421614,{}),$("base",8453,{ensNetwork:1}),$("base-goerli",84531,{}),$("base-sepolia",84532,{}),$("bnb",56,{ensNetwork:1}),$("bnbt",97,{}),$("linea",59144,{ensNetwork:1}),$("linea-goerli",59140,{}),$("linea-sepolia",59141,{}),$("matic",137,{ensNetwork:1,plugins:[nb("https://gasstation.polygon.technology/v2")]}),$("matic-amoy",80002,{}),$("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[nb("https://gasstation-testnet.polygon.technology/v2")]}),$("optimism",10,{ensNetwork:1,plugins:[]}),$("optimism-goerli",420,{}),$("optimism-sepolia",11155420,{}),$("xdai",100,{ensNetwork:1})}var UL,ob=!1;var sX=y(()=>{iX();a0();UP();UL=new Map});function WL($){return JSON.parse(JSON.stringify($))}class VL{#$;#Q;#X;#Y;constructor($){this.#$=$,this.#Q=null,this.#X=4000,this.#Y=-2}get pollingInterval(){return this.#X}set pollingInterval($){this.#X=$}async#Z(){try{let $=await this.#$.getBlockNumber();if(this.#Y===-2){this.#Y=$;return}if($!==this.#Y){for(let Q=this.#Y+1;Q<=$;Q++){if(this.#Q==null)return;await this.#$.emit("block",Q)}this.#Y=$}}catch($){}if(this.#Q==null)return;this.#Q=this.#$._setTimeout(this.#Z.bind(this),this.#X)}start(){if(this.#Q)return;this.#Q=this.#$._setTimeout(this.#Z.bind(this),this.#X),this.#Z()}stop(){if(!this.#Q)return;this.#$._clearTimeout(this.#Q),this.#Q=null}pause($){if(this.stop(),$)this.#Y=-2}resume(){this.start()}}class WP{#$;#Q;#X;constructor($){this.#$=$,this.#X=!1,this.#Q=(Q)=>{this._poll(Q,this.#$)}}async _poll($,Q){throw new Error("sub-classes must override this")}start(){if(this.#X)return;this.#X=!0,this.#Q(-2),this.#$.on("block",this.#Q)}stop(){if(!this.#X)return;this.#X=!1,this.#$.off("block",this.#Q)}pause($){this.stop()}resume(){this.start()}}class eG{#$;#Q;#X;#Y;#Z;constructor($,Q){this.#$=$,this.#Q=WL(Q),this.#X=this.#G.bind(this),this.#Y=!1,this.#Z=-2}async#G($){if(this.#Z===-2)return;let Q=WL(this.#Q);Q.fromBlock=this.#Z+1,Q.toBlock=$;let X=await this.#$.getLogs(Q);if(X.length===0){if(this.#Z<$-60)this.#Z=$-60;return}for(let Y of X)this.#$.emit(this.#Q,Y),this.#Z=Y.blockNumber}start(){if(this.#Y)return;if(this.#Y=!0,this.#Z===-2)this.#$.getBlockNumber().then(($)=>{this.#Z=$});this.#$.on("block",this.#X)}stop(){if(!this.#Y)return;this.#Y=!1,this.#$.off("block",this.#X)}pause($){if(this.stop(),$)this.#Z=-2}resume(){this.start()}}var OL,ML,DL;var VP=y(()=>{OL=class OL extends WP{#$;#Q;constructor($,Q){super($);this.#$=Q,this.#Q=-2}pause($){if($)this.#Q=-2;super.pause($)}async _poll($,Q){let X=await Q.getBlock(this.#$);if(X==null)return;if(this.#Q===-2)this.#Q=X.number;else if(X.number>this.#Q)Q.emit(this.#$,X.number),this.#Q=X.number}};ML=class ML extends WP{#$;constructor($,Q){super($);this.#$=WL(Q)}async _poll($,Q){throw new Error("@TODO")}};DL=class DL extends WP{#$;constructor($,Q){super($);this.#$=Q}async _poll($,Q){let X=await Q.getTransactionReceipt(this.#$);if(X)Q.emit(this.#$,X)}}});function OP($){return $&&typeof $.then==="function"}function MP($,Q){return $+":"+JSON.stringify(Q,(X,Y)=>{if(Y==null)return"null";if(typeof Y==="bigint")return`bigint:${Y.toString()}`;if(typeof Y==="string")return Y.toLowerCase();if(typeof Y==="object"&&!Array.isArray(Y)){let Z=Object.keys(Y);return Z.sort(),Z.reduce((J,q)=>{return J[q]=Y[q],J},{})}return Y})}class w9{name;constructor($){E0(this,{name:$})}start(){}stop(){}pause($){}resume(){}}function uG0($){return JSON.parse(JSON.stringify($))}function HL($){return $=Array.from(new Set($).values()),$.sort(),$}async function jL($,Q){if($==null)throw new Error("invalid event");if(Array.isArray($))$={topics:$};if(typeof $==="string")switch($){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:$,tag:$}}if(w$($,32)){let X=$.toLowerCase();return{type:"transaction",tag:MP("tx",{hash:X}),hash:X}}if($.orphan){let X=$;return{type:"orphan",tag:MP("orphan",X),filter:uG0(X)}}if($.address||$.topics){let X=$,Y={topics:(X.topics||[]).map((Z)=>{if(Z==null)return null;if(Array.isArray(Z))return HL(Z.map((J)=>J.toLowerCase()));return Z.toLowerCase()})};if(X.address){let Z=[],J=[],q=(G)=>{if(w$(G))Z.push(G);else J.push((async()=>{Z.push(await H8(G,Q))})())};if(Array.isArray(X.address))X.address.forEach(q);else q(X.address);if(J.length)await Promise.all(J);Y.address=HL(Z.map((G)=>G.toLowerCase()))}return{filter:Y,tag:MP("event",Y),type:"event"}}o(!1,"unknown ProviderEvent","event",$)}function PL(){return new Date().getTime()}class dZ{#$;#Q;#X;#Y;#Z;#G;#J;#z;#W;#K;#q;#M;constructor($,Q){if(this.#M=Object.assign({},dG0,Q||{}),$==="any")this.#G=!0,this.#Z=null;else if($){let X=B$.from($);this.#G=!1,this.#Z=Promise.resolve(X),setTimeout(()=>{this.emit("network",X,null)},0)}else this.#G=!1,this.#Z=null;this.#z=-1,this.#J=new Map,this.#$=new Map,this.#Q=new Map,this.#X=null,this.#Y=!1,this.#W=1,this.#K=new Map,this.#q=!1}get pollingInterval(){return this.#M.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#Q.values())}attachPlugin($){if(this.#Q.get($.name))throw new Error(`cannot replace existing plugin: ${$.name} `);return this.#Q.set($.name,$.connect(this)),this}getPlugin($){return this.#Q.get($)||null}get disableCcipRead(){return this.#q}set disableCcipRead($){this.#q=!!$}async#U($){let Q=this.#M.cacheTimeout;if(Q<0)return await this._perform($);let X=MP($.method,$),Y=this.#J.get(X);if(!Y)Y=this._perform($),this.#J.set(X,Y),setTimeout(()=>{if(this.#J.get(X)===Y)this.#J.delete(X)},Q);return await Y}async ccipReadFetch($,Q,X){if(this.disableCcipRead||X.length===0||$.to==null)return null;let Y=$.to.toLowerCase(),Z=Q.toLowerCase(),J=[];for(let q=0;q<X.length;q++){let G=X[q],z=G.replace("{sender}",Y).replace("{data}",Z),M=new n$(z);if(G.indexOf("{data}")===-1)M.body={data:Z,sender:Y};this.emit("debug",{action:"sendCcipReadFetchRequest",request:M,index:q,urls:X});let j="unknown error",P;try{P=await M.send()}catch(D){J.push(D.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:M,result:{error:D}});continue}try{let D=P.bodyJson;if(D.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:M,result:D}),D.data;if(D.message)j=D.message;this.emit("debug",{action:"receiveCcipReadFetchError",request:M,result:D})}catch(D){}V0(P.statusCode<400||P.statusCode>=500,`response not found during CCIP fetch: ${j}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:$,info:{url:G,errorMessage:j}}),J.push(j)}V0(!1,`error encountered during CCIP fetch: ${J.map((q)=>JSON.stringify(q)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:$,info:{urls:X,errorMessages:J}})}_wrapBlock($,Q){return new oG(lb($),this)}_wrapLog($,Q){return new dY(pb($),this)}_wrapTransactionReceipt($,Q){return new C5(ub($),this)}_wrapTransactionResponse($,Q){return new C9(KL($),this)}_detectNetwork(){V0(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform($){V0(!1,`unsupported method: ${$.method}`,"UNSUPPORTED_OPERATION",{operation:$.method,info:$})}async getBlockNumber(){let $=Y$(await this.#U({method:"getBlockNumber"}),"%response");if(this.#z>=0)this.#z=$;return $}_getAddress($){return H8($,this)}_getBlockTag($){if($==null)return"latest";switch($){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return $}if(w$($)){if(w$($,32))return $;return QQ($)}if(typeof $==="bigint")$=Y$($,"blockTag");if(typeof $==="number"){if($>=0)return QQ($);if(this.#z>=0)return QQ(this.#z+$);return this.getBlockNumber().then((Q)=>QQ(Q+$))}o(!1,"invalid blockTag","blockTag",$)}_getFilter($){let Q=($.topics||[]).map((G)=>{if(G==null)return null;if(Array.isArray(G))return HL(G.map((z)=>z.toLowerCase()));return G.toLowerCase()}),X="blockHash"in $?$.blockHash:void 0,Y=(G,z,M)=>{let j=void 0;switch(G.length){case 0:break;case 1:j=G[0];break;default:G.sort(),j=G}if(X){if(z!=null||M!=null)throw new Error("invalid filter")}let P={};if(j)P.address=j;if(Q.length)P.topics=Q;if(z)P.fromBlock=z;if(M)P.toBlock=M;if(X)P.blockHash=X;return P},Z=[];if($.address)if(Array.isArray($.address))for(let G of $.address)Z.push(this._getAddress(G));else Z.push(this._getAddress($.address));let J=void 0;if("fromBlock"in $)J=this._getBlockTag($.fromBlock);let q=void 0;if("toBlock"in $)q=this._getBlockTag($.toBlock);if(Z.filter((G)=>typeof G!=="string").length||J!=null&&typeof J!=="string"||q!=null&&typeof q!=="string")return Promise.all([Promise.all(Z),J,q]).then((G)=>{return Y(G[0],G[1],G[2])});return Y(Z,J,q)}_getTransactionRequest($){let Q=uY($),X=[];if(["to","from"].forEach((Y)=>{if(Q[Y]==null)return;let Z=H8(Q[Y],this);if(OP(Z))X.push(async function(){Q[Y]=await Z}());else Q[Y]=Z}),Q.blockTag!=null){let Y=this._getBlockTag(Q.blockTag);if(OP(Y))X.push(async function(){Q.blockTag=await Y}());else Q.blockTag=Y}if(X.length)return async function(){return await Promise.all(X),Q}();return Q}async getNetwork(){if(this.#Z==null){let Y=(async()=>{try{let Z=await this._detectNetwork();return this.emit("network",Z,null),Z}catch(Z){if(this.#Z===Y)this.#Z=null;throw Z}})();return this.#Z=Y,(await Y).clone()}let $=this.#Z,[Q,X]=await Promise.all([$,this._detectNetwork()]);if(Q.chainId!==X.chainId)if(this.#G){if(this.emit("network",X,Q),this.#Z===$)this.#Z=Promise.resolve(X)}else V0(!1,`network changed: ${Q.chainId} => ${X.chainId} `,"NETWORK_ERROR",{event:"changed"});return Q.clone()}async getFeeData(){let $=await this.getNetwork(),Q=async()=>{let{_block:Y,gasPrice:Z,priorityFee:J}=await W8({_block:this.#P("latest",!1),gasPrice:(async()=>{try{let M=await this.#U({method:"getGasPrice"});return n0(M,"%response")}catch(M){}return null})(),priorityFee:(async()=>{try{let M=await this.#U({method:"getPriorityFee"});return n0(M,"%response")}catch(M){}return null})()}),q=null,G=null,z=this._wrapBlock(Y,$);if(z&&z.baseFeePerGas)G=J!=null?J:BigInt("1000000000"),q=z.baseFeePerGas*pG0+G;return new n1(Z,q,G)},X=$.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(X){let Y=new n$(X.url),Z=await X.processFunc(Q,this,Y);return new n1(Z.gasPrice,Z.maxFeePerGas,Z.maxPriorityFeePerGas)}return await Q()}async estimateGas($){let Q=this._getTransactionRequest($);if(OP(Q))Q=await Q;return n0(await this.#U({method:"estimateGas",transaction:Q}),"%response")}async#O($,Q,X){V0(X<lG0,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},$,{blockTag:Q,enableCcipRead:!0})});let Y=uY($);try{return D0(await this._perform({method:"call",transaction:Y,blockTag:Q}))}catch(Z){if(!this.disableCcipRead&&W5(Z)&&Z.data&&X>=0&&Q==="latest"&&Y.to!=null&&c$(Z.data,0,4)==="0x556f1830"){let J=Z.data,q=await H8(Y.to,this),G;try{G=sG0(c$(Z.data,4))}catch(j){V0(!1,j.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:Y,info:{data:J}})}V0(G.sender.toLowerCase()===q.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:J,reason:"OffchainLookup",transaction:Y,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:G.errorArgs}});let z=await this.ccipReadFetch(Y,G.calldata,G.urls);V0(z!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:Y,info:{data:Z.data,errorArgs:G.errorArgs}});let M={to:q,data:V$([G.selector,rG0([z,G.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:M});try{let j=await this.#O(M,Q,X+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},M),result:j}),j}catch(j){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},M),error:j}),j}}throw Z}}async#V($){let{value:Q}=await W8({network:this.getNetwork(),value:$});return Q}async call($){let{tx:Q,blockTag:X}=await W8({tx:this._getTransactionRequest($),blockTag:this._getBlockTag($.blockTag)});return await this.#V(this.#O(Q,X,$.enableCcipRead?0:-1))}async#D($,Q,X){let Y=this._getAddress(Q),Z=this._getBlockTag(X);if(typeof Y!=="string"||typeof Z!=="string")[Y,Z]=await Promise.all([Y,Z]);return await this.#V(this.#U(Object.assign($,{address:Y,blockTag:Z})))}async getBalance($,Q){return n0(await this.#D({method:"getBalance"},$,Q),"%response")}async getTransactionCount($,Q){return Y$(await this.#D({method:"getTransactionCount"},$,Q),"%response")}async getCode($,Q){return D0(await this.#D({method:"getCode"},$,Q))}async getStorage($,Q,X){let Y=n0(Q,"position");return D0(await this.#D({method:"getStorage",position:Y},$,X))}async broadcastTransaction($){let{blockNumber:Q,hash:X,network:Y}=await W8({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:$}),network:this.getNetwork()}),Z=a8.from($);if(Z.hash!==X)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(Z,Y).replaceableTransaction(Q)}async#P($,Q){if(w$($,32))return await this.#U({method:"getBlock",blockHash:$,includeTransactions:Q});let X=this._getBlockTag($);if(typeof X!=="string")X=await X;return await this.#U({method:"getBlock",blockTag:X,includeTransactions:Q})}async getBlock($,Q){let{network:X,params:Y}=await W8({network:this.getNetwork(),params:this.#P($,!!Q)});if(Y==null)return null;return this._wrapBlock(Y,X)}async getTransaction($){let{network:Q,params:X}=await W8({network:this.getNetwork(),params:this.#U({method:"getTransaction",hash:$})});if(X==null)return null;return this._wrapTransactionResponse(X,Q)}async getTransactionReceipt($){let{network:Q,params:X}=await W8({network:this.getNetwork(),params:this.#U({method:"getTransactionReceipt",hash:$})});if(X==null)return null;if(X.gasPrice==null&&X.effectiveGasPrice==null){let Y=await this.#U({method:"getTransaction",hash:$});if(Y==null)throw new Error("report this; could not find tx or effectiveGasPrice");X.effectiveGasPrice=Y.gasPrice}return this._wrapTransactionReceipt(X,Q)}async getTransactionResult($){let{result:Q}=await W8({network:this.getNetwork(),result:this.#U({method:"getTransactionResult",hash:$})});if(Q==null)return null;return D0(Q)}async getLogs($){let Q=this._getFilter($);if(OP(Q))Q=await Q;let{network:X,params:Y}=await W8({network:this.getNetwork(),params:this.#U({method:"getLogs",filter:Q})});return Y.map((Z)=>this._wrapLog(Z,X))}_getProvider($){V0(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver($){return await L9.fromName(this,$)}async getAvatar($){let Q=await this.getResolver($);if(Q)return await Q.getAvatar();return null}async resolveName($){let Q=await this.getResolver($);if(Q)return await Q.getAddress();return null}async lookupAddress($){$=J$($);let Q=H5($.substring(2).toLowerCase()+".addr.reverse");try{let X=await L9.getEnsAddress(this),Z=await new FY(X,["function resolver(bytes32) view returns (address)"],this).resolver(Q);if(Z==null||Z===bZ)return null;let q=await new FY(Z,["function name(bytes32) view returns (string)"],this).name(Q);if(await this.resolveName(q)!==$)return null;return q}catch(X){if(i$(X,"BAD_DATA")&&X.value==="0x")return null;if(i$(X,"CALL_EXCEPTION"))return null;throw X}return null}async waitForTransaction($,Q,X){let Y=Q!=null?Q:1;if(Y===0)return this.getTransactionReceipt($);return new Promise(async(Z,J)=>{let q=null,G=async(z)=>{try{let M=await this.getTransactionReceipt($);if(M!=null){if(z-M.blockNumber+1>=Y){if(Z(M),q)clearTimeout(q),q=null;return}}}catch(M){console.log("EEE",M)}this.once("block",G)};if(X!=null)q=setTimeout(()=>{if(q==null)return;q=null,this.off("block",G),J(_$("timeout","TIMEOUT",{reason:"timeout"}))},X);G(await this.getBlockNumber())})}async waitForBlock($){V0(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout($){let Q=this.#K.get($);if(!Q)return;if(Q.timer)clearTimeout(Q.timer);this.#K.delete($)}_setTimeout($,Q){if(Q==null)Q=0;let X=this.#W++,Y=()=>{this.#K.delete(X),$()};if(this.paused)this.#K.set(X,{timer:null,func:Y,time:Q});else{let Z=setTimeout(Y,Q);this.#K.set(X,{timer:Z,func:Y,time:PL()})}return X}_forEachSubscriber($){for(let Q of this.#$.values())$(Q.subscriber)}_getSubscriber($){switch($.type){case"debug":case"error":case"network":return new w9($.type);case"block":{let Q=new VL(this);return Q.pollingInterval=this.pollingInterval,Q}case"safe":case"finalized":return new OL(this,$.type);case"event":return new eG(this,$.filter);case"transaction":return new DL(this,$.hash);case"orphan":return new ML(this,$.filter)}throw new Error(`unsupported event: ${$.type}`)}_recoverSubscriber($,Q){for(let X of this.#$.values())if(X.subscriber===$){if(X.started)X.subscriber.stop();if(X.subscriber=Q,X.started)Q.start();if(this.#X!=null)Q.pause(this.#X);break}}async#H($,Q){let X=await jL($,this);if(X.type==="event"&&Q&&Q.length>0&&Q[0].removed===!0)X=await jL({orphan:"drop-log",log:Q[0]},this);return this.#$.get(X.tag)||null}async#N($){let Q=await jL($,this),X=Q.tag,Y=this.#$.get(X);if(!Y)Y={subscriber:this._getSubscriber(Q),tag:X,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#$.set(X,Y);return Y}async on($,Q){let X=await this.#N($);if(X.listeners.push({listener:Q,once:!1}),!X.started){if(X.subscriber.start(),X.started=!0,this.#X!=null)X.subscriber.pause(this.#X)}return this}async once($,Q){let X=await this.#N($);if(X.listeners.push({listener:Q,once:!0}),!X.started){if(X.subscriber.start(),X.started=!0,this.#X!=null)X.subscriber.pause(this.#X)}return this}async emit($,...Q){let X=await this.#H($,Q);if(!X||X.listeners.length===0)return!1;let Y=X.listeners.length;if(X.listeners=X.listeners.filter(({listener:Z,once:J})=>{let q=new V5(this,J?null:Z,$);try{Z.call(this,...Q,q)}catch(G){}return!J}),X.listeners.length===0){if(X.started)X.subscriber.stop();this.#$.delete(X.tag)}return Y>0}async listenerCount($){if($){let X=await this.#H($);if(!X)return 0;return X.listeners.length}let Q=0;for(let{listeners:X}of this.#$.values())Q+=X.length;return Q}async listeners($){if($){let X=await this.#H($);if(!X)return[];return X.listeners.map(({listener:Y})=>Y)}let Q=[];for(let{listeners:X}of this.#$.values())Q=Q.concat(X.map(({listener:Y})=>Y));return Q}async off($,Q){let X=await this.#H($);if(!X)return this;if(Q){let Y=X.listeners.map(({listener:Z})=>Z).indexOf(Q);if(Y>=0)X.listeners.splice(Y,1)}if(!Q||X.listeners.length===0){if(X.started)X.subscriber.stop();this.#$.delete(X.tag)}return this}async removeAllListeners($){if($){let{tag:Q,started:X,subscriber:Y}=await this.#N($);if(X)Y.stop();this.#$.delete(Q)}else for(let[Q,{started:X,subscriber:Y}]of this.#$){if(X)Y.stop();this.#$.delete(Q)}return this}async addListener($,Q){return await this.on($,Q)}async removeListener($,Q){return this.off($,Q)}get destroyed(){return this.#Y}destroy(){this.removeAllListeners();for(let $ of this.#K.keys())this._clearTimeout($);this.#Y=!0}get paused(){return this.#X!=null}set paused($){if(!!$===this.paused)return;if(this.paused)this.resume();else this.pause(!1)}pause($){if(this.#z=-1,this.#X!=null){if(this.#X==!!$)return;V0(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber((Q)=>Q.pause($)),this.#X=!!$;for(let Q of this.#K.values()){if(Q.timer)clearTimeout(Q.timer);Q.time=PL()-Q.time}}resume(){if(this.#X==null)return;this._forEachSubscriber(($)=>$.resume()),this.#X=null;for(let $ of this.#K.values()){let Q=$.time;if(Q<0)Q=0;$.time=PL(),setTimeout($.func,Q)}}}function iG0($,Q){try{let X=NL($,Q);if(X)return LX(X)}catch(X){}return null}function NL($,Q){if($==="0x")return null;try{let X=Y$(c$($,Q,Q+32)),Y=Y$(c$($,X,X+32));return c$($,X+32,X+32+Y)}catch(X){}return null}function rb($){let Q=p$($);if(Q.length>32)throw new Error("internal; should not happen");let X=new Uint8Array(32);return X.set(Q,32-Q.length),X}function nG0($){if($.length%32===0)return $;let Q=new Uint8Array(Math.ceil($.length/32)*32);return Q.set($),Q}function rG0($){let Q=[],X=0;for(let Y=0;Y<$.length;Y++)Q.push(oG0),X+=32;for(let Y=0;Y<$.length;Y++){let Z=L0($[Y]);Q[Y]=rb(X),Q.push(rb(Z.length)),Q.push(nG0(Z)),X+=32+Math.ceil(Z.length/32)*32}return V$(Q)}function sG0($){let Q={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};V0(uX($)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});let X=c$($,0,32);V0(c$(X,0,12)===c$(sb,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),Q.sender=c$(X,12);try{let Y=[],Z=Y$(c$($,32,64)),J=Y$(c$($,Z,Z+32)),q=c$($,Z+32);for(let G=0;G<J;G++){let z=iG0(q,G*32);if(z==null)throw new Error("abort");Y.push(z)}Q.urls=Y}catch(Y){V0(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{let Y=NL($,64);if(Y==null)throw new Error("abort");Q.calldata=Y}catch(Y){V0(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}V0(c$($,100,128)===c$(sb,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),Q.selector=c$($,96,100);try{let Y=NL($,128);if(Y==null)throw new Error("abort");Q.extraData=Y}catch(Y){V0(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return Q.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map((Y)=>Q[Y]),Q}var pG0,lG0=10,dG0,oG0,sb="0x0000000000000000000000000000000000000000000000000000000000000000";var FU=y(()=>{s8();qU();MV();WJ();iX();a0();zL();db();sX();RU();VP();pG0=BigInt(2);dG0={cacheTimeout:250,pollingInterval:4000};oG0=new Uint8Array([])});function $z($,Q){if($.provider)return $.provider;V0(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:Q})}async function ab($,Q){let X=uY(Q);if(X.to!=null)X.to=H8(X.to,$);if(X.from!=null){let Y=X.from;X.from=Promise.all([$.getAddress(),H8(Y,$)]).then(([Z,J])=>{return o(Z.toLowerCase()===J.toLowerCase(),"transaction from mismatch","tx.from",J),Z})}else X.from=$.getAddress();return await W8(X)}class iZ{provider;constructor($){E0(this,{provider:$||null})}async getNonce($){return $z(this,"getTransactionCount").getTransactionCount(await this.getAddress(),$)}async populateCall($){return await ab(this,$)}async populateTransaction($){let Q=$z(this,"populateTransaction"),X=await ab(this,$);if(X.nonce==null)X.nonce=await this.getNonce("pending");if(X.gasLimit==null)X.gasLimit=await this.estimateGas(X);let Y=await this.provider.getNetwork();if(X.chainId!=null){let J=n0(X.chainId);o(J===Y.chainId,"transaction chainId mismatch","tx.chainId",$.chainId)}else X.chainId=Y.chainId;let Z=X.maxFeePerGas!=null||X.maxPriorityFeePerGas!=null;if(X.gasPrice!=null&&(X.type===2||Z))o(!1,"eip-1559 transaction do not support gasPrice","tx",$);else if((X.type===0||X.type===1)&&Z)o(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",$);if((X.type===2||X.type==null)&&(X.maxFeePerGas!=null&&X.maxPriorityFeePerGas!=null))X.type=2;else if(X.type===0||X.type===1){let J=await Q.getFeeData();if(V0(J.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),X.gasPrice==null)X.gasPrice=J.gasPrice}else{let J=await Q.getFeeData();if(X.type==null)if(J.maxFeePerGas!=null&&J.maxPriorityFeePerGas!=null){if(X.authorizationList&&X.authorizationList.length)X.type=4;else X.type=2;if(X.gasPrice!=null){let q=X.gasPrice;delete X.gasPrice,X.maxFeePerGas=q,X.maxPriorityFeePerGas=q}else{if(X.maxFeePerGas==null)X.maxFeePerGas=J.maxFeePerGas;if(X.maxPriorityFeePerGas==null)X.maxPriorityFeePerGas=J.maxPriorityFeePerGas}}else if(J.gasPrice!=null){if(V0(!Z,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),X.gasPrice==null)X.gasPrice=J.gasPrice;X.type=0}else V0(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else if(X.type===2||X.type===3||X.type===4){if(X.maxFeePerGas==null)X.maxFeePerGas=J.maxFeePerGas;if(X.maxPriorityFeePerGas==null)X.maxPriorityFeePerGas=J.maxPriorityFeePerGas}}return await W8(X)}async populateAuthorization($){let Q=Object.assign({},$);if(Q.chainId==null)Q.chainId=(await $z(this,"getNetwork").getNetwork()).chainId;if(Q.nonce==null)Q.nonce=await this.getNonce();return Q}async estimateGas($){return $z(this,"estimateGas").estimateGas(await this.populateCall($))}async call($){return $z(this,"call").call(await this.populateCall($))}async resolveName($){return await $z(this,"resolveName").resolveName($)}async sendTransaction($){let Q=$z(this,"sendTransaction"),X=await this.populateTransaction($);delete X.from;let Y=a8.from(X);return await Q.broadcastTransaction(await this.signTransaction(Y))}authorize($){V0(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var s1;var DP=y(()=>{s8();iX();a0();RU();s1=class s1 extends iZ{address;constructor($,Q){super(Q);E0(this,{address:$})}async getAddress(){return this.address}connect($){return new s1(this.address,$)}#$($,Q){V0(!1,`VoidSigner cannot sign ${$}`,"UNSUPPORTED_OPERATION",{operation:Q})}async signTransaction($){this.#$("transactions","signTransaction")}async signMessage($){this.#$("messages","signMessage")}async signTypedData($,Q,X){this.#$("typed-data","signTypedData")}}});function fQ($){if(tb.has($))return;tb.add($),console.log("========= NOTICE ========="),console.log(`Request-Rate Exceeded for ${$} (this message will not be repeated)`),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.org/api-keys/"),console.log("==========================")}var tb;var F5=y(()=>{tb=new Set});function aG0($){return JSON.parse(JSON.stringify($))}class AL{#$;#Q;#X;#Y;#Z;#G;constructor($){this.#$=$,this.#Q=null,this.#X=this.#J.bind(this),this.#Y=!1,this.#Z=null,this.#G=!1}_subscribe($){throw new Error("subclasses must override this")}_emitResults($,Q){throw new Error("subclasses must override this")}_recover($){throw new Error("subclasses must override this")}async#J($){try{if(this.#Q==null)this.#Q=this._subscribe(this.#$);let Q=null;try{Q=await this.#Q}catch(Z){if(!i$(Z,"UNSUPPORTED_OPERATION")||Z.operation!=="eth_newFilter")throw Z}if(Q==null){this.#Q=null,this.#$._recoverSubscriber(this,this._recover(this.#$));return}let X=await this.#$.getNetwork();if(!this.#Z)this.#Z=X;if(this.#Z.chainId!==X.chainId)throw new Error("chaid changed");if(this.#G)return;let Y=await this.#$.send("eth_getFilterChanges",[Q]);await this._emitResults(this.#$,Y)}catch(Q){console.log("@TODO",Q)}this.#$.once("block",this.#X)}#z(){let $=this.#Q;if($)this.#Q=null,$.then((Q)=>{if(this.#$.destroyed)return;this.#$.send("eth_uninstallFilter",[Q])})}start(){if(this.#Y)return;this.#Y=!0,this.#J(-2)}stop(){if(!this.#Y)return;this.#Y=!1,this.#G=!0,this.#z(),this.#$.off("block",this.#X)}pause($){if($)this.#z();this.#$.off("block",this.#X)}resume(){this.start()}}var RL,CL;var eb=y(()=>{a0();VP();RL=class RL extends AL{#$;constructor($,Q){super($);this.#$=aG0(Q)}_recover($){return new eG($,this.#$)}async _subscribe($){return await $.send("eth_newFilter",[this.#$])}async _emitResults($,Q){for(let X of Q)$.emit(this.#$,$._wrapLog(X,$._network))}};CL=class CL extends AL{async _subscribe($){return await $.send("eth_newPendingTransactionFilter",[])}async _emitResults($,Q){for(let X of Q)$.emit("pending",X)}}});function jP($){if($==null||tG0.indexOf(typeof $)>=0)return $;if(typeof $.getAddress==="function")return $;if(Array.isArray($))return $.map(jP);if(typeof $==="object")return Object.keys($).reduce((Q,X)=>{return Q[X]=$[X],Q},{});throw new Error(`should not happen: ${$} (${typeof $})`)}function eG0($){return new Promise((Q)=>{setTimeout(Q,$)})}function BU($){if($)return $.toLowerCase();return $}function $h($){return $&&typeof $.pollingInterval==="number"}function LL($){if($==null)return null;if(typeof $.message==="string"&&$.message.match(/revert/i)&&w$($.data))return{message:$.message,data:$.data};if(typeof $==="object"){for(let Q in $){let X=LL($[Q]);if(X)return X}return null}if(typeof $==="string")try{return LL(JSON.parse($))}catch(Q){}return null}function wL($,Q){if($==null)return;if(typeof $.message==="string")Q.push($.message);if(typeof $==="object")for(let X in $)wL($[X],Q);if(typeof $==="string")try{return wL(JSON.parse($),Q)}catch(X){}}function $z0($){let Q=[];return wL($,Q),Q}var tG0,Qh,a1,t1,PP,w8;var nY=y(()=>{NU();s8();WJ();iX();a0();FU();DP();sX();eb();VP();tG0="bigint,boolean,function,number,string,symbol".split(/,/g);Qh={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1048576,batchMaxCount:100,cacheTimeout:250,pollingInterval:4000};a1=class a1 extends iZ{address;constructor($,Q){super($);Q=J$(Q),E0(this,{address:Q})}connect($){V0(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction($){return await this.populateCall($)}async sendUncheckedTransaction($){let Q=jP($),X=[];if(Q.from){let Z=Q.from;X.push((async()=>{let J=await H8(Z,this.provider);o(J!=null&&J.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",$),Q.from=J})())}else Q.from=this.address;if(Q.gasLimit==null)X.push((async()=>{Q.gasLimit=await this.provider.estimateGas({...Q,from:this.address})})());if(Q.to!=null){let Z=Q.to;X.push((async()=>{Q.to=await H8(Z,this.provider)})())}if(X.length)await Promise.all(X);let Y=this.provider.getRpcTransaction(Q);return this.provider.send("eth_sendTransaction",[Y])}async sendTransaction($){let Q=await this.provider.getBlockNumber(),X=await this.sendUncheckedTransaction($);return await new Promise((Y,Z)=>{let J=[1000,100],q=0,G=async()=>{try{let z=await this.provider.getTransaction(X);if(z!=null){Y(z.replaceableTransaction(Q));return}}catch(z){if(i$(z,"CANCELLED")||i$(z,"BAD_DATA")||i$(z,"NETWORK_ERROR")||i$(z,"UNSUPPORTED_OPERATION")){if(z.info==null)z.info={};z.info.sendTransactionHash=X,Z(z);return}if(i$(z,"INVALID_ARGUMENT")){if(q++,z.info==null)z.info={};if(z.info.sendTransactionHash=X,q>10){Z(z);return}}this.provider.emit("error",_$("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:z}))}this.provider._setTimeout(()=>{G()},J.pop()||4000)};G()})}async signTransaction($){let Q=jP($);if(Q.from){let Y=await H8(Q.from,this.provider);o(Y!=null&&Y.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",$),Q.from=Y}else Q.from=this.address;let X=this.provider.getRpcTransaction(Q);return await this.provider.send("eth_signTransaction",[X])}async signMessage($){let Q=typeof $==="string"?s$($):$;return await this.provider.send("personal_sign",[D0(Q),this.address.toLowerCase()])}async signTypedData($,Q,X){let Y=jP(X),Z=await u8.resolveNames($,Q,Y,async(J)=>{let q=await H8(J);return o(q!=null,"TypedData does not support null address","value",J),q});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(u8.getPayload(Z.domain,Q,Z.value))])}async unlock($){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),$,null])}async _legacySignMessage($){let Q=typeof $==="string"?s$($):$;return await this.provider.send("eth_sign",[this.address.toLowerCase(),D0(Q)])}};t1=class t1 extends dZ{#$;#Q;#X;#Y;#Z;#G;#J;#z(){if(this.#Y)return;let $=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");this.#Y=setTimeout(()=>{this.#Y=null;let Q=this.#X;this.#X=[];while(Q.length){let X=[Q.shift()];while(Q.length){if(X.length===this.#$.batchMaxCount)break;if(X.push(Q.shift()),JSON.stringify(X.map((Z)=>Z.payload)).length>this.#$.batchMaxSize){Q.unshift(X.pop());break}}(async()=>{let Y=X.length===1?X[0].payload:X.map((Z)=>Z.payload);this.emit("debug",{action:"sendRpcPayload",payload:Y});try{let Z=await this._send(Y);this.emit("debug",{action:"receiveRpcResult",result:Z});for(let{resolve:J,reject:q,payload:G}of X){if(this.destroyed){q(_$("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:G.method}));continue}let z=Z.filter((M)=>M.id===G.id)[0];if(z==null){let M=_$("missing response for request","BAD_DATA",{value:Z,info:{payload:G}});this.emit("error",M),q(M);continue}if("error"in z){q(this.getRpcError(G,z));continue}J(z.result)}}catch(Z){this.emit("debug",{action:"receiveRpcError",error:Z});for(let{reject:J}of X)J(Z)}})()}},$)}constructor($,Q){super($,Q);this.#Q=1,this.#$=Object.assign({},Qh,Q||{}),this.#X=[],this.#Y=null,this.#G=null,this.#J=null;{let Y=null,Z=new Promise((J)=>{Y=J});this.#Z={promise:Z,resolve:Y}}let X=this._getOption("staticNetwork");if(typeof X==="boolean"){if(o(!X||$!=="any","staticNetwork cannot be used on special network 'any'","options",Q),X&&$!=null)this.#G=B$.from($)}else if(X)o($==null||X.matches($),"staticNetwork MUST match network object","options",Q),this.#G=X}_getOption($){return this.#$[$]}get _network(){return V0(this.#G,"network is not available yet","NETWORK_ERROR"),this.#G}async _perform($){if($.method==="call"||$.method==="estimateGas"){let X=$.transaction;if(X&&X.type!=null&&n0(X.type)){if(X.maxFeePerGas==null&&X.maxPriorityFeePerGas==null){let Y=await this.getFeeData();if(Y.maxFeePerGas==null&&Y.maxPriorityFeePerGas==null)$=Object.assign({},$,{transaction:Object.assign({},X,{type:void 0})})}}}let Q=this.getRpcRequest($);if(Q!=null)return await this.send(Q.method,Q.args);return super._perform($)}async _detectNetwork(){let $=this._getOption("staticNetwork");if($)if($===!0){if(this.#G)return this.#G}else return $;if(this.#J)return await this.#J;if(this.ready)return this.#J=(async()=>{try{let Q=B$.from(n0(await this.send("eth_chainId",[])));return this.#J=null,Q}catch(Q){throw this.#J=null,Q}})(),await this.#J;return this.#J=(async()=>{let Q={id:this.#Q++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:Q});let X;try{X=(await this._send(Q))[0],this.#J=null}catch(Y){throw this.#J=null,this.emit("debug",{action:"receiveRpcError",error:Y}),Y}if(this.emit("debug",{action:"receiveRpcResult",result:X}),"result"in X)return B$.from(n0(X.result));throw this.getRpcError(Q,X)})(),await this.#J}_start(){if(this.#Z==null||this.#Z.resolve==null)return;this.#Z.resolve(),this.#Z=null,(async()=>{while(this.#G==null&&!this.destroyed)try{this.#G=await this._detectNetwork()}catch($){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",_$("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:$}})),await eG0(1000)}this.#z()})()}async _waitUntilReady(){if(this.#Z==null)return;return await this.#Z.promise}_getSubscriber($){if($.type==="pending")return new CL(this);if($.type==="event"){if(this._getOption("polling"))return new eG(this,$.filter);return new RL(this,$.filter)}if($.type==="orphan"&&$.filter.orphan==="drop-log")return new w9("orphan");return super._getSubscriber($)}get ready(){return this.#Z==null}getRpcTransaction($){let Q={};if(["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((X)=>{if($[X]==null)return;let Y=X;if(X==="gasLimit")Y="gas";Q[Y]=QQ(n0($[X],`tx.${X}`))}),["from","to","data"].forEach((X)=>{if($[X]==null)return;Q[X]=D0($[X])}),$.accessList)Q.accessList=_Q($.accessList);if($.blobVersionedHashes)Q.blobVersionedHashes=$.blobVersionedHashes.map((X)=>X.toLowerCase());if($.authorizationList)Q.authorizationList=$.authorizationList.map((X)=>{let Y=d1(X);return{address:Y.address,nonce:QQ(Y.nonce),chainId:QQ(Y.chainId),yParity:QQ(Y.signature.yParity),r:QQ(Y.signature.r),s:QQ(Y.signature.s)}});return Q}getRpcRequest($){switch($.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[BU($.address),$.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[BU($.address),$.blockTag]};case"getCode":return{method:"eth_getCode",args:[BU($.address),$.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[BU($.address),"0x"+$.position.toString(16),$.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[$.signedTransaction]};case"getBlock":if("blockTag"in $)return{method:"eth_getBlockByNumber",args:[$.blockTag,!!$.includeTransactions]};else if("blockHash"in $)return{method:"eth_getBlockByHash",args:[$.blockHash,!!$.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[$.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[$.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction($.transaction),$.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction($.transaction)]};case"getLogs":if($.filter&&$.filter.address!=null)if(Array.isArray($.filter.address))$.filter.address=$.filter.address.map(BU);else $.filter.address=BU($.filter.address);return{method:"eth_getLogs",args:[$.filter]}}return null}getRpcError($,Q){let{method:X}=$,{error:Y}=Q;if(X==="eth_estimateGas"&&Y.message){let q=Y.message;if(!q.match(/revert/i)&&q.match(/insufficient funds/i))return _$("insufficient funds","INSUFFICIENT_FUNDS",{transaction:$.params[0],info:{payload:$,error:Y}});else if(q.match(/nonce/i)&&q.match(/too low/i))return _$("nonce has already been used","NONCE_EXPIRED",{transaction:$.params[0],info:{payload:$,error:Y}})}if(X==="eth_call"||X==="eth_estimateGas"){let q=LL(Y),G=TY.getBuiltinCallException(X==="eth_call"?"call":"estimateGas",$.params[0],q?q.data:null);return G.info={error:Y,payload:$},G}let Z=JSON.stringify($z0(Y));if(typeof Y.message==="string"&&Y.message.match(/user denied|ethers-user-denied/i))return _$("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[X]||"unknown",reason:"rejected",info:{payload:$,error:Y}});if(X==="eth_sendRawTransaction"||X==="eth_sendTransaction"){let q=$.params[0];if(Z.match(/insufficient funds|base fee exceeds gas limit/i))return _$("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:q,info:{error:Y}});if(Z.match(/nonce/i)&&Z.match(/too low/i))return _$("nonce has already been used","NONCE_EXPIRED",{transaction:q,info:{error:Y}});if(Z.match(/replacement transaction/i)&&Z.match(/underpriced/i))return _$("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:q,info:{error:Y}});if(Z.match(/only replay-protected/i))return _$("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:X,info:{transaction:q,info:{error:Y}}})}let J=!!Z.match(/the method .* does not exist/i);if(!J){if(Y&&Y.details&&Y.details.startsWith("Unauthorized method:"))J=!0}if(J)return _$("unsupported operation","UNSUPPORTED_OPERATION",{operation:$.method,info:{error:Y,payload:$}});return _$("could not coalesce error","UNKNOWN_ERROR",{error:Y,payload:$})}send($,Q){if(this.destroyed)return Promise.reject(_$("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:$}));let X=this.#Q++,Y=new Promise((Z,J)=>{this.#X.push({resolve:Z,reject:J,payload:{method:$,params:Q,id:X,jsonrpc:"2.0"}})});return this.#z(),Y}async getSigner($){if($==null)$=0;let Q=this.send("eth_accounts",[]);if(typeof $==="number"){let Y=await Q;if($>=Y.length)throw new Error("no such account");return new a1(this,Y[$])}let{accounts:X}=await W8({network:this.getNetwork(),accounts:Q});$=J$($);for(let Y of X)if(J$(Y)===$)return new a1(this,$);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map((Q)=>new a1(this,Q))}destroy(){if(this.#Y)clearTimeout(this.#Y),this.#Y=null;for(let{payload:$,reject:Q}of this.#X)Q(_$("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:$.method}));this.#X=[],super.destroy()}};PP=class PP extends t1{#$;constructor($,Q){super($,Q);let X=this._getOption("pollingInterval");if(X==null)X=Qh.pollingInterval;this.#$=X}_getSubscriber($){let Q=super._getSubscriber($);if($h(Q))Q.pollingInterval=this.#$;return Q}get pollingInterval(){return this.#$}set pollingInterval($){if(!Number.isInteger($)||$<0)throw new Error("invalid interval");this.#$=$,this._forEachSubscriber((Q)=>{if($h(Q))Q.pollingInterval=this.#$})}};w8=class w8 extends PP{#$;constructor($,Q,X){if($==null)$="http://localhost:8545";super(Q,X);if(typeof $==="string")this.#$=new n$($);else this.#$=$.clone()}_getConnection(){return this.#$.clone()}async send($,Q){return await this._start(),await super.send($,Q)}async _send($){let Q=this._getConnection();Q.body=JSON.stringify($),Q.setHeader("content-type","application/json");let X=await Q.send();X.assertOk();let Y=X.bodyJson;if(!Array.isArray(Y))Y=[Y];return Y}}});function Qz0($){switch($){case"mainnet":return"rpc.ankr.com/eth";case"goerli":return"rpc.ankr.com/eth_goerli";case"sepolia":return"rpc.ankr.com/eth_sepolia";case"arbitrum":return"rpc.ankr.com/arbitrum";case"base":return"rpc.ankr.com/base";case"base-goerli":return"rpc.ankr.com/base_goerli";case"base-sepolia":return"rpc.ankr.com/base_sepolia";case"bnb":return"rpc.ankr.com/bsc";case"bnbt":return"rpc.ankr.com/bsc_testnet_chapel";case"matic":return"rpc.ankr.com/polygon";case"matic-mumbai":return"rpc.ankr.com/polygon_mumbai";case"optimism":return"rpc.ankr.com/optimism";case"optimism-goerli":return"rpc.ankr.com/optimism_testnet";case"optimism-sepolia":return"rpc.ankr.com/optimism_sepolia"}o(!1,"unsupported network","network",$)}var HP="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972",B5;var TL=y(()=>{a0();F5();sX();nY();B5=class B5 extends w8{apiKey;constructor($,Q){if($==null)$="mainnet";let X=B$.from($);if(Q==null)Q=HP;let Y={polling:!0,staticNetwork:X},Z=B5.getRequest(X,Q);super(Z,X,Y);E0(this,{apiKey:Q})}_getProvider($){try{return new B5($,this.apiKey)}catch(Q){}return super._getProvider($)}static getRequest($,Q){if(Q==null)Q=HP;let X=new n$(`https://${Qz0($.name)}/${Q}`);if(X.allowGzip=!0,Q===HP)X.retryFunc=async(Y,Z,J)=>{return fQ("AnkrProvider"),!0};return X}getRpcError($,Q){if($.method==="eth_sendRawTransaction"){if(Q&&Q.error&&Q.error.message==="INTERNAL_ERROR: could not replace existing tx")Q.error.message="replacement transaction underpriced"}return super.getRpcError($,Q)}isCommunityResource(){return this.apiKey===HP}}});function Xz0($){switch($){case"mainnet":return"eth-mainnet.alchemyapi.io";case"goerli":return"eth-goerli.g.alchemy.com";case"sepolia":return"eth-sepolia.g.alchemy.com";case"arbitrum":return"arb-mainnet.g.alchemy.com";case"arbitrum-goerli":return"arb-goerli.g.alchemy.com";case"arbitrum-sepolia":return"arb-sepolia.g.alchemy.com";case"base":return"base-mainnet.g.alchemy.com";case"base-goerli":return"base-goerli.g.alchemy.com";case"base-sepolia":return"base-sepolia.g.alchemy.com";case"matic":return"polygon-mainnet.g.alchemy.com";case"matic-amoy":return"polygon-amoy.g.alchemy.com";case"matic-mumbai":return"polygon-mumbai.g.alchemy.com";case"optimism":return"opt-mainnet.g.alchemy.com";case"optimism-goerli":return"opt-goerli.g.alchemy.com";case"optimism-sepolia":return"opt-sepolia.g.alchemy.com"}o(!1,"unsupported network","network",$)}var NP="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC",S5;var IL=y(()=>{a0();F5();sX();nY();S5=class S5 extends w8{apiKey;constructor($,Q){if($==null)$="mainnet";let X=B$.from($);if(Q==null)Q=NP;let Y=S5.getRequest(X,Q);super(Y,X,{staticNetwork:X});E0(this,{apiKey:Q})}_getProvider($){try{return new S5($,this.apiKey)}catch(Q){}return super._getProvider($)}async _perform($){if($.method==="getTransactionResult"){let{trace:Q,tx:X}=await W8({trace:this.send("trace_transaction",[$.hash]),tx:this.getTransaction($.hash)});if(Q==null||X==null)return null;let Y,Z=!1;try{Y=Q[0].result.output,Z=Q[0].error==="Reverted"}catch(J){}if(Y)return V0(!Z,"an error occurred during transaction executions","CALL_EXCEPTION",{action:"getTransactionResult",data:Y,reason:null,transaction:X,invocation:null,revert:null}),Y;V0(!1,"could not parse trace result","BAD_DATA",{value:Q})}return await super._perform($)}isCommunityResource(){return this.apiKey===NP}static getRequest($,Q){if(Q==null)Q=NP;let X=new n$(`https://${Xz0($.name)}/v2/${Q}`);if(X.allowGzip=!0,Q===NP)X.retryFunc=async(Y,Z,J)=>{return fQ("alchemy"),!0};return X}}});function AP($){switch($){case"mainnet":return"39f1d67cedf8b7831010a665328c9197";case"arbitrum":return"0550c209db33c3abf4cc927e1e18cea1";case"bnb":return"98b5a77e531614387366f6fc5da097f8";case"matic":return"cd9d4d70377471aa7c142ec4a4205249"}o(!1,"unsupported network","network",$)}function Yz0($){switch($){case"mainnet":return"ethereum-mainnet.core.chainstack.com";case"arbitrum":return"arbitrum-mainnet.core.chainstack.com";case"bnb":return"bsc-mainnet.core.chainstack.com";case"matic":return"polygon-mainnet.core.chainstack.com"}o(!1,"unsupported network","network",$)}var E5;var FL=y(()=>{a0();F5();sX();nY();E5=class E5 extends w8{apiKey;constructor($,Q){if($==null)$="mainnet";let X=B$.from($);if(Q==null)Q=AP(X.name);let Y=E5.getRequest(X,Q);super(Y,X,{staticNetwork:X});E0(this,{apiKey:Q})}_getProvider($){try{return new E5($,this.apiKey)}catch(Q){}return super._getProvider($)}isCommunityResource(){return this.apiKey===AP(this._network.name)}static getRequest($,Q){if(Q==null)Q=AP($.name);let X=new n$(`https://${Yz0($.name)}/${Q}`);if(X.allowGzip=!0,Q===AP($.name))X.retryFunc=async(Y,Z,J)=>{return fQ("ChainstackProvider"),!0};return X}}});var Qz;var BL=y(()=>{a0();sX();nY();Qz=class Qz extends w8{constructor($){if($==null)$="mainnet";let Q=B$.from($);o(Q.name==="mainnet","unsupported network","network",$);super("https://cloudflare-eth.com/",Q,{staticNetwork:Q})}}});function Zz0($){return $&&typeof $.then==="function"}var Xh=2000,Yh="org.ethers.plugins.provider.Etherscan",SU,Jz0,qz0=1,Xz;var SL=y(()=>{NU();MV();iX();a0();FU();sX();UP();F5();SU=class SU extends uZ{baseUrl;constructor($){super(Yh);E0(this,{baseUrl:$})}clone(){return new SU(this.baseUrl)}};Jz0=["enableCcipRead"];Xz=class Xz extends dZ{network;apiKey;#$;constructor($,Q){let X=Q!=null?Q:null;super();let Y=B$.from($);this.#$=Y.getPlugin(Yh),E0(this,{apiKey:X,network:Y})}getBaseUrl(){if(this.#$)return this.#$.baseUrl;switch(this.network.name){case"mainnet":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"holesky":return"https://api-holesky.etherscan.io";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"base":return"https://api.basescan.org";case"base-sepolia":return"https://api-sepolia.basescan.org";case"bnb":return"https://api.bscscan.com";case"bnbt":return"https://api-testnet.bscscan.com";case"matic":return"https://api.polygonscan.com";case"matic-amoy":return"https://api-amoy.polygonscan.com";case"matic-mumbai":return"https://api-testnet.polygonscan.com";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io";default:}o(!1,"unsupported network","network",this.network)}getUrl($,Q){let X=Object.keys(Q).reduce((Y,Z)=>{let J=Q[Z];if(J!=null)Y+=`&${Z}=${J}`;return Y},"");if(this.apiKey)X+=`&apikey=${this.apiKey}`;return`https://api.etherscan.io/v2/api?chainid=${this.network.chainId}&module=${$}${X}`}getPostUrl(){return`https://api.etherscan.io/v2/api?chainid=${this.network.chainId}`}getPostData($,Q){return Q.module=$,Q.apikey=this.apiKey,Q.chainid=this.network.chainId,Q}async detectNetwork(){return this.network}async fetch($,Q,X){let Y=qz0++,Z=X?this.getPostUrl():this.getUrl($,Q),J=X?this.getPostData($,Q):null;this.emit("debug",{action:"sendRequest",id:Y,url:Z,payload:J});let q=new n$(Z);if(q.setThrottleParams({slotInterval:1000}),q.retryFunc=(M,j,P)=>{if(this.isCommunityResource())fQ("Etherscan");return Promise.resolve(!0)},q.processFunc=async(M,j)=>{let P=j.hasBody()?JSON.parse(LX(j.body)):{},D=(typeof P.result==="string"?P.result:"").toLowerCase().indexOf("rate limit")>=0;if($==="proxy"){if(P&&P.status==0&&P.message=="NOTOK"&&D)this.emit("debug",{action:"receiveError",id:Y,reason:"proxy-NOTOK",error:P}),j.throwThrottleError(P.result,Xh)}else if(D)this.emit("debug",{action:"receiveError",id:Y,reason:"null result",error:P.result}),j.throwThrottleError(P.result,Xh);return j},J)q.setHeader("content-type","application/x-www-form-urlencoded; charset=UTF-8"),q.body=Object.keys(J).map((M)=>`${M}=${J[M]}`).join("&");let G=await q.send();try{G.assertOk()}catch(M){this.emit("debug",{action:"receiveError",id:Y,error:M,reason:"assertOk"}),V0(!1,"response error","SERVER_ERROR",{request:q,response:G})}if(!G.hasBody())this.emit("debug",{action:"receiveError",id:Y,error:"missing body",reason:"null body"}),V0(!1,"missing response","SERVER_ERROR",{request:q,response:G});let z=JSON.parse(LX(G.body));if($==="proxy"){if(z.jsonrpc!="2.0")this.emit("debug",{action:"receiveError",id:Y,result:z,reason:"invalid JSON-RPC"}),V0(!1,"invalid JSON-RPC response (missing jsonrpc='2.0')","SERVER_ERROR",{request:q,response:G,info:{result:z}});if(z.error)this.emit("debug",{action:"receiveError",id:Y,result:z,reason:"JSON-RPC error"}),V0(!1,"error response","SERVER_ERROR",{request:q,response:G,info:{result:z}});return this.emit("debug",{action:"receiveRequest",id:Y,result:z}),z.result}else{if(z.status==0&&(z.message==="No records found"||z.message==="No transactions found"))return this.emit("debug",{action:"receiveRequest",id:Y,result:z}),z.result;if(z.status!=1||typeof z.message==="string"&&!z.message.match(/^OK/))this.emit("debug",{action:"receiveError",id:Y,result:z}),V0(!1,"error response","SERVER_ERROR",{request:q,response:G,info:{result:z}});return this.emit("debug",{action:"receiveRequest",id:Y,result:z}),z.result}}_getTransactionPostData($){let Q={};for(let X in $){if(Jz0.indexOf(X)>=0)continue;if($[X]==null)continue;let Y=$[X];if(X==="type"&&Y===0)continue;if(X==="blockTag"&&Y==="latest")continue;if({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[X])Y=QQ(Y);else if(X==="accessList")Y="["+_Q(Y).map((Z)=>{return`{address:"${Z.address}",storageKeys:["${Z.storageKeys.join('","')}"]}`}).join(",")+"]";else if(X==="blobVersionedHashes"){if(Y.length===0)continue;V0(!1,"Etherscan API does not support blobVersionedHashes","UNSUPPORTED_OPERATION",{operation:"_getTransactionPostData",info:{transaction:$}})}else Y=D0(Y);Q[X]=Y}return Q}_checkError($,Q,X){let Y="";if(i$(Q,"SERVER_ERROR")){try{Y=Q.info.result.error.message}catch(Z){}if(!Y)try{Y=Q.info.message}catch(Z){}}if($.method==="estimateGas"){if(!Y.match(/revert/i)&&Y.match(/insufficient funds/i))V0(!1,"insufficient funds","INSUFFICIENT_FUNDS",{transaction:$.transaction})}if($.method==="call"||$.method==="estimateGas"){if(Y.match(/execution reverted/i)){let Z="";try{Z=Q.info.result.error.data}catch(q){}let J=TY.getBuiltinCallException($.method,$.transaction,Z);throw J.info={request:$,error:Q},J}}if(Y){if($.method==="broadcastTransaction"){let Z=a8.from($.signedTransaction);if(Y.match(/replacement/i)&&Y.match(/underpriced/i))V0(!1,"replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:Z});if(Y.match(/insufficient funds/))V0(!1,"insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:Z});if(Y.match(/same hash was already imported|transaction nonce is too low|nonce too low/))V0(!1,"nonce has already been used","NONCE_EXPIRED",{transaction:Z})}}throw Q}async _detectNetwork(){return this.network}async _perform($){switch($.method){case"chainId":return this.network.chainId;case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getPriorityFee":if(this.network.name==="mainnet")return"1000000000";else if(this.network.name==="optimism")return"1000000";else throw new Error("fallback onto the AbstractProvider default");case"getBalance":return this.fetch("account",{action:"balance",address:$.address,tag:$.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:$.address,tag:$.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:$.address,tag:$.blockTag});case"getStorage":return this.fetch("proxy",{action:"eth_getStorageAt",address:$.address,position:$.position,tag:$.blockTag});case"broadcastTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:$.signedTransaction},!0).catch((Q)=>{return this._checkError($,Q,$.signedTransaction)});case"getBlock":if("blockTag"in $)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:$.blockTag,boolean:$.includeTransactions?"true":"false"});V0(!1,"getBlock by blockHash not supported by Etherscan","UNSUPPORTED_OPERATION",{operation:"getBlock(blockHash)"});case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:$.hash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:$.hash});case"call":{if($.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");let Q=this._getTransactionPostData($.transaction);Q.module="proxy",Q.action="eth_call";try{return await this.fetch("proxy",Q,!0)}catch(X){return this._checkError($,X,$.transaction)}}case"estimateGas":{let Q=this._getTransactionPostData($.transaction);Q.module="proxy",Q.action="eth_estimateGas";try{return await this.fetch("proxy",Q,!0)}catch(X){return this._checkError($,X,$.transaction)}}default:break}return super._perform($)}async getNetwork(){return this.network}async getEtherPrice(){if(this.network.name!=="mainnet")return 0;return parseFloat((await this.fetch("stats",{action:"ethprice"})).ethusd)}async getContract($){let Q=this._getAddress($);if(Zz0(Q))Q=await Q;try{let X=await this.fetch("contract",{action:"getabi",address:Q}),Y=JSON.parse(X);return new FY(Q,Y,this)}catch(X){return null}}isCommunityResource(){return this.apiKey==null}}});function Gz0(){if(typeof self!=="undefined")return self;if(typeof window!=="undefined")return window;if(typeof global!=="undefined")return global;throw new Error("unable to locate global object")}var Zh;var Jh=y(()=>{Zh=Gz0().WebSocket});class e1{#$;#Q;get filter(){return JSON.parse(this.#Q)}#X;#Y;#Z;constructor($,Q){this.#$=$,this.#Q=JSON.stringify(Q),this.#X=null,this.#Y=null,this.#Z=null}start(){this.#X=this.#$.send("eth_subscribe",this.filter).then(($)=>{return this.#$._register($,this),$})}stop(){this.#X.then(($)=>{if(this.#$.destroyed)return;this.#$.send("eth_unsubscribe",[$])}),this.#X=null}pause($){V0($,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"}),this.#Y=!!$}resume(){this.#Y=null}_handleMessage($){if(this.#X==null)return;if(this.#Y===null){let Q=this.#Z;if(Q==null)Q=this._emit(this.#$,$);else Q=Q.then(async()=>{await this._emit(this.#$,$)});this.#Z=Q.then(()=>{if(this.#Z===Q)this.#Z=null})}}async _emit($,Q){throw new Error("sub-classes must implemente this; _emit")}}var EU,_U,kU,Yz;var RP=y(()=>{FU();a0();nY();EU=class EU extends e1{constructor($){super($,["newHeads"])}async _emit($,Q){$.emit("block",parseInt(Q.number))}};_U=class _U extends e1{constructor($){super($,["newPendingTransactions"])}async _emit($,Q){$.emit("pending",Q)}};kU=class kU extends e1{#$;get logFilter(){return JSON.parse(this.#$)}constructor($,Q){super($,["logs",Q]);this.#$=JSON.stringify(Q)}async _emit($,Q){$.emit(this.logFilter,$._wrapLog(Q,$._network))}};Yz=class Yz extends t1{#$;#Q;#X;constructor($,Q){let X=Object.assign({},Q!=null?Q:{});if(o(X.batchMaxCount==null||X.batchMaxCount===1,"sockets-based providers do not support batches","options.batchMaxCount",Q),X.batchMaxCount=1,X.staticNetwork==null)X.staticNetwork=!0;super($,X);this.#$=new Map,this.#Q=new Map,this.#X=new Map}_getSubscriber($){switch($.type){case"close":return new w9("close");case"block":return new EU(this);case"pending":return new _U(this);case"event":return new kU(this,$.filter);case"orphan":if($.filter.orphan==="drop-log")return new w9("drop-log")}return super._getSubscriber($)}_register($,Q){this.#Q.set($,Q);let X=this.#X.get($);if(X){for(let Y of X)Q._handleMessage(Y);this.#X.delete($)}}async _send($){o(!Array.isArray($),"WebSocket does not support batch send","payload",$);let Q=new Promise((X,Y)=>{this.#$.set($.id,{payload:$,resolve:X,reject:Y})});return await this._waitUntilReady(),await this._write(JSON.stringify($)),[await Q]}async _processMessage($){let Q=JSON.parse($);if(Q&&typeof Q==="object"&&"id"in Q){let X=this.#$.get(Q.id);if(X==null){this.emit("error",_$("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:Q}));return}this.#$.delete(Q.id),X.resolve(Q)}else if(Q&&Q.method==="eth_subscription"){let X=Q.params.subscription,Y=this.#Q.get(X);if(Y)Y._handleMessage(Q.params.result);else{let Z=this.#X.get(X);if(Z==null)Z=[],this.#X.set(X,Z);Z.push(Q.params.result)}}else{this.emit("error",_$("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:Q}));return}}async _write($){throw new Error("sub-classes must override this")}}});var _5;var CP=y(()=>{Jh();RP();_5=class _5 extends Yz{#$;#Q;get websocket(){if(this.#Q==null)throw new Error("websocket closed");return this.#Q}constructor($,Q,X){super(Q,X);if(typeof $==="string")this.#$=()=>{return new Zh($)},this.#Q=this.#$();else if(typeof $==="function")this.#$=$,this.#Q=$();else this.#$=null,this.#Q=$;this.websocket.onopen=async()=>{try{await this._start(),this.resume()}catch(Y){console.log("failed to start WebsocketProvider",Y)}},this.websocket.onmessage=(Y)=>{this._processMessage(Y.data)}}async _write($){this.websocket.send($)}async destroy(){if(this.#Q!=null)this.#Q.close(),this.#Q=null;super.destroy()}}});function zz0($){switch($){case"mainnet":return"mainnet.infura.io";case"goerli":return"goerli.infura.io";case"sepolia":return"sepolia.infura.io";case"arbitrum":return"arbitrum-mainnet.infura.io";case"arbitrum-goerli":return"arbitrum-goerli.infura.io";case"arbitrum-sepolia":return"arbitrum-sepolia.infura.io";case"base":return"base-mainnet.infura.io";case"base-goerlia":case"base-goerli":return"base-goerli.infura.io";case"base-sepolia":return"base-sepolia.infura.io";case"bnb":return"bsc-mainnet.infura.io";case"bnbt":return"bsc-testnet.infura.io";case"linea":return"linea-mainnet.infura.io";case"linea-goerli":return"linea-goerli.infura.io";case"linea-sepolia":return"linea-sepolia.infura.io";case"matic":return"polygon-mainnet.infura.io";case"matic-amoy":return"polygon-amoy.infura.io";case"matic-mumbai":return"polygon-mumbai.infura.io";case"optimism":return"optimism-mainnet.infura.io";case"optimism-goerli":return"optimism-goerli.infura.io";case"optimism-sepolia":return"optimism-sepolia.infura.io"}o(!1,"unsupported network","network",$)}var PV="84842078b09946638c03157f83405213",xU,VJ;var EL=y(()=>{a0();F5();sX();nY();CP();xU=class xU extends _5{projectId;projectSecret;constructor($,Q){let X=new VJ($,Q),Y=X._getConnection();V0(!Y.credentials,"INFURA WebSocket project secrets unsupported","UNSUPPORTED_OPERATION",{operation:"InfuraProvider.getWebSocketProvider()"});let Z=Y.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(Z,X._network);E0(this,{projectId:X.projectId,projectSecret:X.projectSecret})}isCommunityResource(){return this.projectId===PV}};VJ=class VJ extends w8{projectId;projectSecret;constructor($,Q,X){if($==null)$="mainnet";let Y=B$.from($);if(Q==null)Q=PV;if(X==null)X=null;let Z=VJ.getRequest(Y,Q,X);super(Z,Y,{staticNetwork:Y});E0(this,{projectId:Q,projectSecret:X})}_getProvider($){try{return new VJ($,this.projectId,this.projectSecret)}catch(Q){}return super._getProvider($)}isCommunityResource(){return this.projectId===PV}static getWebSocketProvider($,Q){return new xU($,Q)}static getRequest($,Q,X){if(Q==null)Q=PV;if(X==null)X=null;let Y=new n$(`https://${zz0($.name)}/v3/${Q}`);if(Y.allowGzip=!0,X)Y.setCredentials("",X);if(Q===PV)Y.retryFunc=async(Z,J,q)=>{return fQ("InfuraProvider"),!0};return Y}}});function Kz0($){switch($){case"mainnet":return"ethers.quiknode.pro";case"goerli":return"ethers.ethereum-goerli.quiknode.pro";case"sepolia":return"ethers.ethereum-sepolia.quiknode.pro";case"holesky":return"ethers.ethereum-holesky.quiknode.pro";case"arbitrum":return"ethers.arbitrum-mainnet.quiknode.pro";case"arbitrum-goerli":return"ethers.arbitrum-goerli.quiknode.pro";case"arbitrum-sepolia":return"ethers.arbitrum-sepolia.quiknode.pro";case"base":return"ethers.base-mainnet.quiknode.pro";case"base-goerli":return"ethers.base-goerli.quiknode.pro";case"base-spolia":return"ethers.base-sepolia.quiknode.pro";case"bnb":return"ethers.bsc.quiknode.pro";case"bnbt":return"ethers.bsc-testnet.quiknode.pro";case"matic":return"ethers.matic.quiknode.pro";case"matic-mumbai":return"ethers.matic-testnet.quiknode.pro";case"optimism":return"ethers.optimism.quiknode.pro";case"optimism-goerli":return"ethers.optimism-goerli.quiknode.pro";case"optimism-sepolia":return"ethers.optimism-sepolia.quiknode.pro";case"xdai":return"ethers.xdai.quiknode.pro"}o(!1,"unsupported network","network",$)}var LP="919b412a057b5e9c9b6dce193c5a60242d6efadb",k5;var _L=y(()=>{a0();F5();sX();nY();k5=class k5 extends w8{token;constructor($,Q){if($==null)$="mainnet";let X=B$.from($);if(Q==null)Q=LP;let Y=k5.getRequest(X,Q);super(Y,X,{staticNetwork:X});E0(this,{token:Q})}_getProvider($){try{return new k5($,this.token)}catch(Q){}return super._getProvider($)}isCommunityResource(){return this.token===LP}static getRequest($,Q){if(Q==null)Q=LP;let X=new n$(`https://${Kz0($.name)}/${Q}`);if(X.allowGzip=!0,Q===LP)X.retryFunc=async(Y,Z,J)=>{return fQ("QuickNodeProvider"),!0};return X}}});function Vz0($){for(let Q=$.length-1;Q>0;Q--){let X=Math.floor(Math.random()*(Q+1)),Y=$[Q];$[Q]=$[X],$[X]=Y}}function Oz0($){return new Promise((Q)=>{setTimeout(Q,$)})}function vL(){return new Date().getTime()}function kL($){return JSON.stringify($,(Q,X)=>{if(typeof X==="bigint")return{type:"bigint",value:X.toString()};return X})}async function Mz0($,Q){while($.blockNumber<0||$.blockNumber<Q){if(!$._updateNumber)$._updateNumber=(async()=>{try{let X=await $.provider.getBlockNumber();if(X>$.blockNumber)$.blockNumber=X}catch(X){$.blockNumber=-2,$._lastFatalError=X,$._lastFatalErrorTimestamp=vL()}$._updateNumber=null})();if(await $._updateNumber,$.outOfSync++,$._lastFatalError)break}}function fU($){if($==null)return"null";if(Array.isArray($))return"["+$.map(fU).join(",")+"]";if(typeof $==="object"&&typeof $.toJSON==="function")return fU($.toJSON());switch(typeof $){case"boolean":case"symbol":return $.toString();case"bigint":case"number":return BigInt($).toString();case"string":return JSON.stringify($);case"object":{let Q=Object.keys($);return Q.sort(),"{"+Q.map((X)=>`${JSON.stringify(X)}:${fU($[X])}`).join(",")+"}"}}throw console.log("Could not serialize",$),new Error("Hmm...")}function xL($,Q){if("error"in Q){let Y=Q.error,Z;if(i$(Y,"CALL_EXCEPTION"))Z=fU(Object.assign({},Y,{shortMessage:void 0,reason:void 0,info:void 0}));else Z=fU(Y);return{tag:Z,value:Y}}let X=Q.result;return{tag:fU(X),value:X}}function wP($,Q){let X=new Map;for(let{value:Z,tag:J,weight:q}of Q){let G=X.get(J)||{value:Z,weight:0};G.weight+=q,X.set(J,G)}let Y=null;for(let Z of X.values())if(Z.weight>=$&&(!Y||Z.weight>Y.weight))Y=Z;if(Y)return Y.value;return}function gL($,Q){let X=0,Y=new Map,Z=null,J=[];for(let{value:G,tag:z,weight:M}of Q)if(G instanceof Error){let j=Y.get(z)||{value:G,weight:0};if(j.weight+=M,Y.set(z,j),Z==null||j.weight>Z.weight)Z=j}else J.push(BigInt(G)),X+=M;if(X<$){if(Z&&Z.weight>=$)return Z.value;return}J.sort((G,z)=>G<z?-1:z>G?1:0);let q=Math.floor(J.length/2);if(J.length%2)return J[q];return(J[q-1]+J[q]+Uz0)/Wz0}function fL($,Q){let X=wP($,Q);if(X!==void 0)return X;for(let Y of Q)if(Y.value)return Y.value;return}function Dz0($,Q){if($===1)return Y$(gL($,Q),"%internal");let X=new Map,Y=(q,G)=>{let z=X.get(q)||{result:q,weight:0};z.weight+=G,X.set(q,z)};for(let{weight:q,value:G}of Q){let z=Y$(G);Y(z-1,q),Y(z,q),Y(z+1,q)}let Z=0,J=void 0;for(let{weight:q,result:G}of X.values())if(q>=$&&(q>Z||J!=null&&q===Z&&G>J))Z=q,J=G;return J}var Uz0,Wz0,qh,Gh,Zz;var yL=y(()=>{a0();FU();sX();Uz0=BigInt("1"),Wz0=BigInt("2");qh={stallTimeout:400,priority:1,weight:1},Gh={blockNumber:-2,requests:0,lateResponses:0,errorResponses:0,outOfSync:-1,unsupportedEvents:0,rollingDuration:0,score:0,_network:null,_updateNumber:null,_totalTime:0,_lastFatalError:null,_lastFatalErrorTimestamp:0};Zz=class Zz extends dZ{quorum;eventQuorum;eventWorkers;#$;#Q;#X;constructor($,Q,X){super(Q,X);if(this.#$=$.map((Y)=>{if(Y instanceof dZ)return Object.assign({provider:Y},qh,Gh);else return Object.assign({},qh,Y,Gh)}),this.#Q=-2,this.#X=null,X&&X.quorum!=null)this.quorum=X.quorum;else this.quorum=Math.ceil(this.#$.reduce((Y,Z)=>{return Y+=Z.weight,Y},0)/2);this.eventQuorum=1,this.eventWorkers=1,o(this.quorum<=this.#$.reduce((Y,Z)=>Y+Z.weight,0),"quorum exceed provider weight","quorum",this.quorum)}get providerConfigs(){return this.#$.map(($)=>{let Q=Object.assign({},$);for(let X in Q)if(X[0]==="_")delete Q[X];return Q})}async _detectNetwork(){return B$.from(n0(await this._perform({method:"chainId"})))}async _translatePerform($,Q){switch(Q.method){case"broadcastTransaction":return await $.broadcastTransaction(Q.signedTransaction);case"call":return await $.call(Object.assign({},Q.transaction,{blockTag:Q.blockTag}));case"chainId":return(await $.getNetwork()).chainId;case"estimateGas":return await $.estimateGas(Q.transaction);case"getBalance":return await $.getBalance(Q.address,Q.blockTag);case"getBlock":{let X="blockHash"in Q?Q.blockHash:Q.blockTag;return await $.getBlock(X,Q.includeTransactions)}case"getBlockNumber":return await $.getBlockNumber();case"getCode":return await $.getCode(Q.address,Q.blockTag);case"getGasPrice":return(await $.getFeeData()).gasPrice;case"getPriorityFee":return(await $.getFeeData()).maxPriorityFeePerGas;case"getLogs":return await $.getLogs(Q.filter);case"getStorage":return await $.getStorage(Q.address,Q.position,Q.blockTag);case"getTransaction":return await $.getTransaction(Q.hash);case"getTransactionCount":return await $.getTransactionCount(Q.address,Q.blockTag);case"getTransactionReceipt":return await $.getTransactionReceipt(Q.hash);case"getTransactionResult":return await $.getTransactionResult(Q.hash)}}#Y($){let Q=Array.from($).map((Y)=>Y.config),X=this.#$.slice();Vz0(X),X.sort((Y,Z)=>Y.priority-Z.priority);for(let Y of X){if(Y._lastFatalError)continue;if(Q.indexOf(Y)===-1)return Y}return null}#Z($,Q){let X=this.#Y($);if(X==null)return null;let Y={config:X,result:null,didBump:!1,perform:null,staller:null},Z=vL();return Y.perform=(async()=>{try{X.requests++;let q=await this._translatePerform(X.provider,Q);Y.result={result:q}}catch(q){X.errorResponses++,Y.result={error:q}}let J=vL()-Z;X._totalTime+=J,X.rollingDuration=0.95*X.rollingDuration+0.05*J,Y.perform=null})(),Y.staller=(async()=>{await Oz0(X.stallTimeout),Y.staller=null})(),$.add(Y),Y}async#G(){let $=this.#X;if(!$){let Q=[];this.#$.forEach((X)=>{Q.push((async()=>{if(await Mz0(X,0),!X._lastFatalError)X._network=await X.provider.getNetwork()})())}),this.#X=$=(async()=>{await Promise.all(Q);let X=null;for(let Y of this.#$){if(Y._lastFatalError)continue;let Z=Y._network;if(X==null)X=Z.chainId;else if(Z.chainId!==X)V0(!1,"cannot mix providers on different networks","UNSUPPORTED_OPERATION",{operation:"new FallbackProvider"})}})()}await $}async#J($,Q){let X=[];for(let Y of $)if(Y.result!=null){let{tag:Z,value:J}=xL(Q.method,Y.result);X.push({tag:Z,value:J,weight:Y.config.weight})}if(X.reduce((Y,Z)=>Y+Z.weight,0)<this.quorum)return;switch(Q.method){case"getBlockNumber":{if(this.#Q===-2)this.#Q=Math.ceil(Y$(gL(this.quorum,this.#$.filter((Z)=>!Z._lastFatalError).map((Z)=>({value:Z.blockNumber,tag:Y$(Z.blockNumber).toString(),weight:Z.weight})))));let Y=Dz0(this.quorum,X);if(Y===void 0)return;if(Y>this.#Q)this.#Q=Y;return this.#Q}case"getGasPrice":case"getPriorityFee":case"estimateGas":return gL(this.quorum,X);case"getBlock":if("blockTag"in Q&&Q.blockTag==="pending")return fL(this.quorum,X);return wP(this.quorum,X);case"call":case"chainId":case"getBalance":case"getTransactionCount":case"getCode":case"getStorage":case"getTransaction":case"getTransactionReceipt":case"getLogs":return wP(this.quorum,X);case"broadcastTransaction":return fL(this.quorum,X)}V0(!1,"unsupported method","UNSUPPORTED_OPERATION",{operation:`_perform(${kL(Q.method)})`})}async#z($,Q){if($.size===0)throw new Error("no runners?!");let X=[],Y=0;for(let J of $){if(J.perform)X.push(J.perform);if(J.staller){X.push(J.staller);continue}if(J.didBump)continue;J.didBump=!0,Y++}let Z=await this.#J($,Q);if(Z!==void 0){if(Z instanceof Error)throw Z;return Z}for(let J=0;J<Y;J++)this.#Z($,Q);return V0(X.length>0,"quorum not met","SERVER_ERROR",{request:"%sub-requests",info:{request:Q,results:Array.from($).map((J)=>kL(J.result))}}),await Promise.race(X),await this.#z($,Q)}async _perform($){if($.method==="broadcastTransaction"){let Z=this.#$.map((G)=>null),J=this.#$.map(async({provider:G,weight:z},M)=>{try{let j=await G._perform($);Z[M]=Object.assign(xL($.method,{result:j}),{weight:z})}catch(j){Z[M]=Object.assign(xL($.method,{error:j}),{weight:z})}});while(!0){let G=Z.filter((j)=>j!=null);for(let{value:j}of G)if(!(j instanceof Error))return j;let z=wP(this.quorum,Z.filter((j)=>j!=null));if(i$(z,"INSUFFICIENT_FUNDS"))throw z;let M=J.filter((j,P)=>Z[P]==null);if(M.length===0)break;await Promise.race(M)}let q=fL(this.quorum,Z);if(V0(q!==void 0,"problem multi-broadcasting","SERVER_ERROR",{request:"%sub-requests",info:{request:$,results:Z.map(kL)}}),q instanceof Error)throw q;return q}await this.#G();let Q=new Set,X=0;while(!0){let Z=this.#Z(Q,$);if(Z==null)break;if(X+=Z.config.weight,X>=this.quorum)break}let Y=await this.#z(Q,$);for(let Z of Q)if(Z.perform&&Z.result==null)Z.config.lateResponses++;return Y}async destroy(){for(let{provider:$}of this.#$)$.destroy();super.destroy()}}});function jz0($){return $&&typeof $.send==="function"&&typeof $.close==="function"}function TP($,Q){if(Q==null)Q={};let X=(q)=>{if(Q[q]==="-")return!1;if(typeof Q.exclusive==="string")return q===Q.exclusive;if(Array.isArray(Q.exclusive))return Q.exclusive.indexOf(q)!==-1;return!0};if(typeof $==="string"&&$.match(/^https?:/))return new w8($);if(typeof $==="string"&&$.match(/^wss?:/)||jz0($))return new _5($);let Y=null;try{Y=B$.from($)}catch(q){}let Z=[];if(X("publicPolygon")&&Y){if(Y.name==="matic")Z.push(new w8("https://polygon-rpc.com/",Y,{staticNetwork:Y}));else if(Y.name==="matic-amoy")Z.push(new w8("https://rpc-amoy.polygon.technology/",Y,{staticNetwork:Y}))}if(X("alchemy"))try{Z.push(new S5($,Q.alchemy))}catch(q){}if(X("ankr")&&Q.ankr!=null)try{Z.push(new B5($,Q.ankr))}catch(q){}if(X("chainstack"))try{Z.push(new E5($,Q.chainstack))}catch(q){}if(X("cloudflare"))try{Z.push(new Qz($))}catch(q){}if(X("etherscan"))try{Z.push(new Xz($,Q.etherscan))}catch(q){}if(X("infura"))try{let q=Q.infura,G=void 0;if(typeof q==="object")G=q.projectSecret,q=q.projectId;Z.push(new VJ($,q,G))}catch(q){}if(X("quicknode"))try{let q=Q.quicknode;Z.push(new k5($,q))}catch(q){}if(V0(Z.length,"unsupported default network","UNSUPPORTED_OPERATION",{operation:"getDefaultProvider"}),Z.length===1)return Z[0];let J=Math.floor(Z.length/2);if(J>2)J=2;if(Y&&Pz0.indexOf(Y.name)!==-1)J=1;if(Q&&Q.quorum)J=Q.quorum;return new Zz(Z,void 0,{quorum:J})}var Pz0;var zh=y(()=>{a0();TL();IL();FL();BL();SL();EL();_L();yL();nY();sX();CP();Pz0="goerli kovan sepolia classicKotti optimism-goerli arbitrum-goerli matic-mumbai bnbt".split(" ")});var vU;var Kh=y(()=>{a0();DP();vU=class vU extends iZ{signer;#$;#Q;constructor($){super($.provider);E0(this,{signer:$}),this.#$=null,this.#Q=0}async getAddress(){return this.signer.getAddress()}connect($){return new vU(this.signer.connect($))}async getNonce($){if($==="pending"){if(this.#$==null)this.#$=super.getNonce("pending");let Q=this.#Q;return await this.#$+Q}return super.getNonce($)}increment(){this.#Q++}reset(){this.#Q=0,this.#$=null}async sendTransaction($){let Q=this.getNonce("pending");return this.increment(),$=await this.signer.populateTransaction($),$.nonce=await Q,await this.signer.sendTransaction($)}signTransaction($){return this.signer.signTransaction($)}signMessage($){return this.signer.signMessage($)}signTypedData($,Q,X){return this.signer.signTypedData($,Q,X)}}});var OJ;var Uh=y(()=>{a0();nY();OJ=class OJ extends PP{#$;#Q;constructor($,Q,X){let Y=Object.assign({},X!=null?X:{},{batchMaxCount:1});o($&&$.request,"invalid EIP-1193 provider","ethereum",$);super(Q,Y);if(this.#Q=null,X&&X.providerInfo)this.#Q=X.providerInfo;this.#$=async(Z,J)=>{let q={method:Z,params:J};this.emit("debug",{action:"sendEip1193Request",payload:q});try{let G=await $.request(q);return this.emit("debug",{action:"receiveEip1193Result",result:G}),G}catch(G){let z=new Error(G.message);throw z.code=G.code,z.data=G.data,z.payload=q,this.emit("debug",{action:"receiveEip1193Error",error:z}),z}}}get providerInfo(){return this.#Q}async send($,Q){return await this._start(),await super.send($,Q)}async _send($){o(!Array.isArray($),"EIP-1193 does not support batch request","payload",$);try{let Q=await this.#$($.method,$.params||[]);return[{id:$.id,result:Q}]}catch(Q){return[{id:$.id,error:{code:Q.code,data:Q.data,message:Q.message}}]}}getRpcError($,Q){switch(Q=JSON.parse(JSON.stringify(Q)),Q.error.code||-1){case 4001:Q.error.message=`ethers-user-denied: ${Q.error.message}`;break;case 4200:Q.error.message=`ethers-unsupported: ${Q.error.message}`;break}return super.getRpcError($,Q)}async hasSigner($){if($==null)$=0;let Q=await this.send("eth_accounts",[]);if(typeof $==="number")return Q.length>$;return $=$.toLowerCase(),Q.filter((X)=>X.toLowerCase()===$).length!==0}async getSigner($){if($==null)$=0;if(!await this.hasSigner($))try{await this.#$("eth_requestAccounts",[])}catch(Q){let X=Q.payload;throw this.getRpcError(X,{id:X.id,error:Q})}return await super.getSigner($)}static async discover($){if($==null)$={};if($.provider)return new OJ($.provider);let Q=$.window?$.window:typeof window!=="undefined"?window:null;if(Q==null)return null;let X=$.anyProvider;if(X&&Q.ethereum)return new OJ(Q.ethereum);if(!(("addEventListener"in Q)&&("dispatchEvent"in Q)&&("removeEventListener"in Q)))return null;let Y=$.timeout?$.timeout:300;if(Y===0)return null;return await new Promise((Z,J)=>{let q=[],G=(j)=>{if(q.push(j.detail),X)z()},z=()=>{if(clearTimeout(M),q.length)if($&&$.filter){let j=$.filter(q.map((P)=>Object.assign({},P.info)));if(j==null)Z(null);else if(j instanceof OJ)Z(j);else{let P=null;if(j.uuid)P=q.filter((A)=>j.uuid===A.info.uuid)[0];if(P){let{provider:D,info:A}=P;Z(new OJ(D,void 0,{providerInfo:A}))}else J(_$("filter returned unknown info","UNSUPPORTED_OPERATION",{value:j}))}}else{let{provider:j,info:P}=q[0];Z(new OJ(j,void 0,{providerInfo:P}))}else Z(null);Q.removeEventListener("eip6963:announceProvider",G)},M=setTimeout(()=>{z()},Y);Q.addEventListener("eip6963:announceProvider",G),Q.dispatchEvent(new Event("eip6963:requestProvider"))})}}});function Hz0($){switch($){case"mainnet":return"https://eth.blockscout.com/api/eth-rpc";case"sepolia":return"https://eth-sepolia.blockscout.com/api/eth-rpc";case"holesky":return"https://eth-holesky.blockscout.com/api/eth-rpc";case"classic":return"https://etc.blockscout.com/api/eth-rpc";case"arbitrum":return"https://arbitrum.blockscout.com/api/eth-rpc";case"base":return"https://base.blockscout.com/api/eth-rpc";case"base-sepolia":return"https://base-sepolia.blockscout.com/api/eth-rpc";case"matic":return"https://polygon.blockscout.com/api/eth-rpc";case"optimism":return"https://optimism.blockscout.com/api/eth-rpc";case"optimism-sepolia":return"https://optimism-sepolia.blockscout.com/api/eth-rpc";case"xdai":return"https://gnosis.blockscout.com/api/eth-rpc"}o(!1,"unsupported network","network",$)}var Jz;var Wh=y(()=>{a0();sX();nY();Jz=class Jz extends w8{apiKey;constructor($,Q){if($==null)$="mainnet";let X=B$.from($);if(Q==null)Q=null;let Y=Jz.getRequest(X);super(Y,X,{staticNetwork:X});E0(this,{apiKey:Q})}_getProvider($){try{return new Jz($,this.apiKey)}catch(Q){}return super._getProvider($)}isCommunityResource(){return this.apiKey===null}getRpcRequest($){let Q=super.getRpcRequest($);if(Q&&Q.method==="eth_estimateGas"&&Q.args.length==1)Q.args=Q.args.slice(),Q.args.push("latest");return Q}getRpcError($,Q){let X=Q?Q.error:null;if(X&&X.code===-32015&&!w$(X.data||"",!0)){let Y={"assert(false)":"01","arithmetic underflow or overflow":"11","division or modulo by zero":"12","out-of-bounds array access; popping on an empty array":"31","out-of-bounds access of an array or bytesN":"32"},Z="";if(X.message==="VM execution error.")Z=Y[X.data]||"";else if(Y[X.message||""])Z=Y[X.message||""];if(Z)X.message+=` (reverted: ${X.data})`,X.data="0x4e487b7100000000000000000000000000000000000000000000000000000000000000"+Z}else if(X&&X.code===-32000){if(X.message==="wrong transaction nonce")X.message+=" (nonce too low)"}return super.getRpcError($,Q)}static getRequest($){let Q=new n$(Hz0($.name));return Q.allowGzip=!0,Q}}});function Nz0($){switch($){case"mainnet":return"eth-mainnet.gateway.pokt.network";case"goerli":return"eth-goerli.gateway.pokt.network";case"matic":return"poly-mainnet.gateway.pokt.network";case"matic-mumbai":return"polygon-mumbai-rpc.gateway.pokt.network"}o(!1,"unsupported network","network",$)}var IP="62e1ad51b37b8e00394bda3b",qz;var Vh=y(()=>{a0();F5();sX();nY();qz=class qz extends w8{applicationId;applicationSecret;constructor($,Q,X){if($==null)$="mainnet";let Y=B$.from($);if(Q==null)Q=IP;if(X==null)X=null;let Z={staticNetwork:Y},J=qz.getRequest(Y,Q,X);super(J,Y,Z);E0(this,{applicationId:Q,applicationSecret:X})}_getProvider($){try{return new qz($,this.applicationId,this.applicationSecret)}catch(Q){}return super._getProvider($)}static getRequest($,Q,X){if(Q==null)Q=IP;let Y=new n$(`https://${Nz0($.name)}/v1/lb/${Q}`);if(Y.allowGzip=!0,X)Y.setCredentials("",X);if(Q===IP)Y.retryFunc=async(Z,J,q)=>{return fQ("PocketProvider"),!0};return Y}isCommunityResource(){return this.applicationId===IP}}});var FP=void 0;var Oh=()=>{};var BP=y(()=>{FU();DP();F5();zh();zL();sX();Kh();UP();RU();yL();nY();Uh();IL();Wh();TL();BL();FL();SL();EL();Vh();_L();Oh();RP();CP();RP()});var MJ;var SP=y(()=>{s8();WJ();BP();iX();a0();MJ=class MJ extends iZ{address;#$;constructor($,Q){super(Q);o($&&typeof $.sign==="function","invalid private key","privateKey","[ REDACTED ]"),this.#$=$;let X=hZ(this.signingKey.publicKey);E0(this,{address:X})}get signingKey(){return this.#$}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect($){return new MJ(this.#$,$)}async signTransaction($){$=uY($);let{to:Q,from:X}=await W8({to:$.to?H8($.to,this):void 0,from:$.from?H8($.from,this):void 0});if(Q!=null)$.to=Q;if(X!=null)$.from=X;if($.from!=null)o(J$($.from)===this.address,"transaction from address mismatch","tx.from",$.from),delete $.from;let Y=a8.from($);return Y.signature=this.signingKey.sign(Y.unsignedHash),Y.serialized}async signMessage($){return this.signMessageSync($)}signMessageSync($){return this.signingKey.sign(dG($)).serialized}authorizeSync($){o(typeof $.address==="string","invalid address for authorizeSync","auth.address",$);let Q=this.signingKey.sign(pG($));return Object.assign({},{address:J$($.address),nonce:n0($.nonce||0),chainId:n0($.chainId||0)},{signature:Q})}async authorize($){return $=Object.assign({},$,{address:await H8($.address,this)}),this.authorizeSync(await this.populateAuthorization($))}async signTypedData($,Q,X){let Y=await u8.resolveNames($,Q,X,async(Z)=>{V0(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:Z}});let J=await this.provider.resolveName(Z);return V0(J!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:Z}),J});return this.signingKey.sign(u8.hash(Y.domain,Q,Y.value)).serialized}}});function Mh($,Q){let X=97;return $.reduce((Y,Z)=>{if(Z===Q)X++;else if(Z.match(Az0))Y.push(String.fromCharCode(X)+Z);else X=97,Y.push(Z);return Y},[])}function Rz0($,Q){for(let Z=EP.length-1;Z>=0;Z--)$=$.split(EP[Z]).join(Q.substring(2*Z,2*Z+2));let X=[],Y=$.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(Z,J,q,G)=>{if(q)for(let z=parseInt(q);z>=0;z--)X.push(";");else X.push(J.toLowerCase());return""});if(Y)throw new Error(`leftovers: ${JSON.stringify(Y)}`);return Mh(Mh(X,";"),":")}function _P($){return o($[0]==="0","unsupported auwl data","data",$),Rz0($.substring(1+2*EP.length),$.substring(1,1+2*EP.length))}var EP=" !#$%&'()*+,-./<=>?@[]^_`{|}~",Az0;var bL=y(()=>{a0();Az0=/^[a-z]*$/i});class Gz{locale;constructor($){E0(this,{locale:$})}split($){return $.toLowerCase().split(/\s+/g)}join($){return $.join(" ")}}var hL=y(()=>{a0()});var x5;var kP=y(()=>{WJ();a0();bL();hL();x5=class x5 extends Gz{#$;#Q;constructor($,Q,X){super($);this.#$=Q,this.#Q=X,this.#X=null}get _data(){return this.#$}_decodeWords(){return _P(this.#$)}#X;#Y(){if(this.#X==null){let $=this._decodeWords();if(xQ($.join(`
`)+`
`)!==this.#Q)throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);this.#X=$}return this.#X}getWord($){let Q=this.#Y();return o($>=0&&$<Q.length,`invalid word index: ${$}`,"index",$),Q[$]}getWordIndex($){return this.#Y().indexOf($)}}});var Cz0="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",Lz0="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60",mL=null,aX;var HV=y(()=>{kP();aX=class aX extends x5{constructor(){super("en",Cz0,Lz0)}static wordlist(){if(mL==null)mL=new aX;return mL}}});function Dh($){return(1<<$)-1<<8-$&255}function wz0($){return(1<<$)-1&255}function cL($,Q){if(k1("NFKD"),Q==null)Q=aX.wordlist();let X=Q.split($);o(X.length%3===0&&X.length>=12&&X.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");let Y=new Uint8Array(Math.ceil(11*X.length/8)),Z=0;for(let M=0;M<X.length;M++){let j=Q.getWordIndex(X[M].normalize("NFKD"));o(j>=0,`invalid mnemonic word at index ${M}`,"mnemonic","[ REDACTED ]");for(let P=0;P<11;P++){if(j&1<<10-P)Y[Z>>3]|=1<<7-Z%8;Z++}}let J=32*X.length/3,q=X.length/3,G=Dh(q),z=L0(c8(Y.slice(0,J/8)))[0]&G;return o(z===(Y[Y.length-1]&G),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),D0(Y.slice(0,J/8))}function pL($,Q){if(o($.length%4===0&&$.length>=16&&$.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),Q==null)Q=aX.wordlist();let X=[0],Y=11;for(let q=0;q<$.length;q++)if(Y>8)X[X.length-1]<<=8,X[X.length-1]|=$[q],Y-=8;else X[X.length-1]<<=Y,X[X.length-1]|=$[q]>>8-Y,X.push($[q]&wz0(8-Y)),Y+=3;let Z=$.length/4,J=parseInt(c8($).substring(2,4),16)&Dh(Z);return X[X.length-1]<<=Z,X[X.length-1]|=J>>8-Z,Q.join(X.map((q)=>Q.getWord(q)))}class nZ{phrase;password;wordlist;entropy;constructor($,Q,X,Y,Z){if(Y==null)Y="";if(Z==null)Z=aX.wordlist();EQ($,lL,"Mnemonic"),E0(this,{phrase:X,password:Y,wordlist:Z,entropy:Q})}computeSeed(){let $=s$("mnemonic"+this.password,"NFKD");return IX(s$(this.phrase,"NFKD"),$,2048,64,"sha512")}static fromPhrase($,Q,X){let Y=cL($,X);return $=pL(L0(Y),X),new nZ(lL,Y,$,Q,X)}static fromEntropy($,Q,X){let Y=L0($,"entropy"),Z=pL(Y,X);return new nZ(lL,D0(Y),Z,Q,X)}static entropyToPhrase($,Q){let X=L0($,"entropy");return pL(X,Q)}static phraseToEntropy($,Q){return cL($,Q)}static isValidMnemonic($,Q){try{return cL($,Q),!0}catch(X){}return!1}}var lL;var xP=y(()=>{XQ();a0();HV();lL={}});function dL($){let Q=[];for(let X=0;X<$.length;X+=4)Q.push($[X]<<24|$[X+1]<<16|$[X+2]<<8|$[X+3]);return Q}class gP{get key(){return eQ(this,vP,"f").slice()}constructor($){if(vP.set(this,void 0),rZ.set(this,void 0),DJ.set(this,void 0),!(this instanceof gP))throw Error("AES must be instanitated with `new`");uL(this,vP,new Uint8Array($),"f");let Q=Tz0[this.key.length];if(Q==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");uL(this,DJ,[],"f"),uL(this,rZ,[],"f");for(let M=0;M<=Q;M++)eQ(this,DJ,"f").push([0,0,0,0]),eQ(this,rZ,"f").push([0,0,0,0]);let X=(Q+1)*4,Y=this.key.length/4,Z=dL(this.key),J;for(let M=0;M<Y;M++)J=M>>2,eQ(this,DJ,"f")[J][M%4]=Z[M],eQ(this,rZ,"f")[Q-J][M%4]=Z[M];let q=0,G=Y,z;while(G<X){if(z=Z[Y-1],Z[0]^=oZ[z>>16&255]<<24^oZ[z>>8&255]<<16^oZ[z&255]<<8^oZ[z>>24&255]^Iz0[q]<<24,q+=1,Y!=8)for(let D=1;D<Y;D++)Z[D]^=Z[D-1];else{for(let D=1;D<Y/2;D++)Z[D]^=Z[D-1];z=Z[Y/2-1],Z[Y/2]^=oZ[z&255]^oZ[z>>8&255]<<8^oZ[z>>16&255]<<16^oZ[z>>24&255]<<24;for(let D=Y/2+1;D<Y;D++)Z[D]^=Z[D-1]}let M=0,j,P;while(M<Y&&G<X)j=G>>2,P=G%4,eQ(this,DJ,"f")[j][P]=Z[M],eQ(this,rZ,"f")[Q-j][P]=Z[M++],G++}for(let M=1;M<Q;M++)for(let j=0;j<4;j++)z=eQ(this,rZ,"f")[M][j],eQ(this,rZ,"f")[M][j]=vz0[z>>24&255]^gz0[z>>16&255]^yz0[z>>8&255]^bz0[z&255]}encrypt($){if($.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");let Q=eQ(this,DJ,"f").length-1,X=[0,0,0,0],Y=dL($);for(let q=0;q<4;q++)Y[q]^=eQ(this,DJ,"f")[0][q];for(let q=1;q<Q;q++){for(let G=0;G<4;G++)X[G]=Fz0[Y[G]>>24&255]^Bz0[Y[(G+1)%4]>>16&255]^Sz0[Y[(G+2)%4]>>8&255]^Ez0[Y[(G+3)%4]&255]^eQ(this,DJ,"f")[q][G];Y=X.slice()}let Z=new Uint8Array(16),J=0;for(let q=0;q<4;q++)J=eQ(this,DJ,"f")[Q][q],Z[4*q]=(oZ[Y[q]>>24&255]^J>>24)&255,Z[4*q+1]=(oZ[Y[(q+1)%4]>>16&255]^J>>16)&255,Z[4*q+2]=(oZ[Y[(q+2)%4]>>8&255]^J>>8)&255,Z[4*q+3]=(oZ[Y[(q+3)%4]&255]^J)&255;return Z}decrypt($){if($.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");let Q=eQ(this,rZ,"f").length-1,X=[0,0,0,0],Y=dL($);for(let q=0;q<4;q++)Y[q]^=eQ(this,rZ,"f")[0][q];for(let q=1;q<Q;q++){for(let G=0;G<4;G++)X[G]=_z0[Y[G]>>24&255]^kz0[Y[(G+3)%4]>>16&255]^xz0[Y[(G+2)%4]>>8&255]^fz0[Y[(G+1)%4]&255]^eQ(this,rZ,"f")[q][G];Y=X.slice()}let Z=new Uint8Array(16),J=0;for(let q=0;q<4;q++)J=eQ(this,rZ,"f")[Q][q],Z[4*q]=(fP[Y[q]>>24&255]^J>>24)&255,Z[4*q+1]=(fP[Y[(q+3)%4]>>16&255]^J>>16)&255,Z[4*q+2]=(fP[Y[(q+2)%4]>>8&255]^J>>8)&255,Z[4*q+3]=(fP[Y[(q+1)%4]&255]^J)&255;return Z}}var eQ=function($,Q,X,Y){if(X==="a"&&!Y)throw new TypeError("Private accessor was defined without a getter");if(typeof Q==="function"?$!==Q||!Y:!Q.has($))throw new TypeError("Cannot read private member from an object whose class did not declare it");return X==="m"?Y:X==="a"?Y.call($):Y?Y.value:Q.get($)},uL=function($,Q,X,Y,Z){if(Y==="m")throw new TypeError("Private method is not writable");if(Y==="a"&&!Z)throw new TypeError("Private accessor was defined without a setter");if(typeof Q==="function"?$!==Q||!Z:!Q.has($))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Y==="a"?Z.call($,X):Z?Z.value=X:Q.set($,X),X},vP,rZ,DJ,Tz0,Iz0,oZ,fP,Fz0,Bz0,Sz0,Ez0,_z0,kz0,xz0,fz0,vz0,gz0,yz0,bz0;var jh=y(()=>{/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */Tz0={16:10,24:12,32:14},Iz0=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],oZ=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],fP=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],Fz0=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],Bz0=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],Sz0=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],Ez0=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],_z0=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],kz0=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],xz0=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239000,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],fz0=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998000,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],vz0=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],gz0=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],yz0=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239000,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],bz0=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998000,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];vP=new WeakMap,rZ=new WeakMap,DJ=new WeakMap});class NV{constructor($,Q,X){if(X&&!(this instanceof X))throw new Error(`${$} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new gP(Q)},name:{enumerable:!0,value:$}})}}var iL=y(()=>{jh()});var yP=function($,Q,X,Y,Z){if(Y==="m")throw new TypeError("Private method is not writable");if(Y==="a"&&!Z)throw new TypeError("Private accessor was defined without a setter");if(typeof Q==="function"?$!==Q||!Z:!Q.has($))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Y==="a"?Z.call($,X):Z?Z.value=X:Q.set($,X),X},gU=function($,Q,X,Y){if(X==="a"&&!Y)throw new TypeError("Private accessor was defined without a getter");if(typeof Q==="function"?$!==Q||!Y:!Q.has($))throw new TypeError("Cannot read private member from an object whose class did not declare it");return X==="m"?Y:X==="a"?Y.call($):Y?Y.value:Q.get($)},AV,f5,RV;var Ph=y(()=>{iL();RV=class RV extends NV{constructor($,Q){super("ECC",$,RV);if(AV.set(this,void 0),f5.set(this,void 0),Q){if(Q.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");yP(this,AV,new Uint8Array(Q),"f")}else yP(this,AV,new Uint8Array(16),"f");yP(this,f5,this.iv,"f")}get iv(){return new Uint8Array(gU(this,AV,"f"))}encrypt($){if($.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");let Q=new Uint8Array($.length);for(let X=0;X<$.length;X+=16){for(let Y=0;Y<16;Y++)gU(this,f5,"f")[Y]^=$[X+Y];yP(this,f5,this.aes.encrypt(gU(this,f5,"f")),"f"),Q.set(gU(this,f5,"f"),X)}return Q}decrypt($){if($.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");let Q=new Uint8Array($.length);for(let X=0;X<$.length;X+=16){let Y=this.aes.decrypt($.subarray(X,X+16));for(let Z=0;Z<16;Z++)Q[X+Z]=Y[Z]^gU(this,f5,"f")[Z],gU(this,f5,"f")[Z]=$[X+Z]}return Q}};AV=new WeakMap,f5=new WeakMap});var yU=function($,Q,X,Y,Z){if(Y==="m")throw new TypeError("Private method is not writable");if(Y==="a"&&!Z)throw new TypeError("Private accessor was defined without a setter");if(typeof Q==="function"?$!==Q||!Z:!Q.has($))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Y==="a"?Z.call($,X):Z?Z.value=X:Q.set($,X),X},sZ=function($,Q,X,Y){if(X==="a"&&!Y)throw new TypeError("Private accessor was defined without a getter");if(typeof Q==="function"?$!==Q||!Y:!Q.has($))throw new TypeError("Cannot read private member from an object whose class did not declare it");return X==="m"?Y:X==="a"?Y.call($):Y?Y.value:Q.get($)},CV,zz,aZ,$7;var Hh=y(()=>{iL();$7=class $7 extends NV{constructor($,Q){super("CTR",$,$7);if(CV.set(this,void 0),zz.set(this,void 0),aZ.set(this,void 0),yU(this,aZ,new Uint8Array(16),"f"),sZ(this,aZ,"f").fill(0),yU(this,CV,sZ(this,aZ,"f"),"f"),yU(this,zz,16,"f"),Q==null)Q=1;if(typeof Q==="number")this.setCounterValue(Q);else this.setCounterBytes(Q)}get counter(){return new Uint8Array(sZ(this,aZ,"f"))}setCounterValue($){if(!Number.isInteger($)||$<0||$>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let Q=15;Q>=0;--Q)sZ(this,aZ,"f")[Q]=$%256,$=Math.floor($/256)}setCounterBytes($){if($.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");sZ(this,aZ,"f").set($)}increment(){for(let $=15;$>=0;$--)if(sZ(this,aZ,"f")[$]===255)sZ(this,aZ,"f")[$]=0;else{sZ(this,aZ,"f")[$]++;break}}encrypt($){var Q,X;let Y=new Uint8Array($);for(let Z=0;Z<Y.length;Z++){if(sZ(this,zz,"f")===16)yU(this,CV,this.aes.encrypt(sZ(this,aZ,"f")),"f"),yU(this,zz,0,"f"),this.increment();Y[Z]^=sZ(this,CV,"f")[yU(this,zz,(X=sZ(this,zz,"f"),Q=X++,X),"f"),Q]}return Y}decrypt($){return this.encrypt($)}};CV=new WeakMap,zz=new WeakMap,aZ=new WeakMap});function nL($){if($.length<16)throw new TypeError("PKCS#7 invalid length");let Q=$[$.length-1];if(Q>16)throw new TypeError("PKCS#7 padding byte out of range");let X=$.length-Q;for(let Y=0;Y<Q;Y++)if($[X+Y]!==Q)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array($.subarray(0,X))}var oL=y(()=>{Ph();Hh()});function rL($){if(typeof $==="string"&&!$.startsWith("0x"))$="0x"+$;return P8($)}function bU($,Q){$=String($);while($.length<Q)$="0"+$;return $}function Kz($){if(typeof $==="string")return s$($,"NFKC");return P8($)}function _8($,Q){let X=Q.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);o(X!=null,"invalid path","path",Q);let Y=X[1],Z=X[3],J=X[4]==="!",q=$;for(let G of Y.toLowerCase().split(".")){if(Array.isArray(q)){if(!G.match(/^[0-9]+$/))break;q=q[parseInt(G)]}else if(typeof q==="object"){let z=null;for(let M in q)if(M.toLowerCase()===G){z=q[M];break}q=z}else q=null;if(q==null)break}if(o(!J||q!=null,"missing required value","path",Y),Z&&q!=null){if(Z==="int"){if(typeof q==="string"&&q.match(/^-?[0-9]+$/))return parseInt(q);else if(Number.isSafeInteger(q))return q}if(Z==="number"){if(typeof q==="string"&&q.match(/^-?[0-9.]*$/))return parseFloat(q)}if(Z==="data"){if(typeof q==="string")return rL(q)}if(Z==="array"&&Array.isArray(q))return q;if(Z===typeof q)return q;o(!1,`wrong type found for ${Z} `,"path",Y)}return q}var sL=y(()=>{a0()});function Uz($){try{let Q=JSON.parse($);if((Q.version!=null?parseInt(Q.version):0)===3)return!0}catch(Q){}return!1}function hz0($,Q,X){if(_8($,"crypto.cipher:string")==="aes-128-ctr"){let Z=_8($,"crypto.cipherparams.iv:data!"),J=new $7(Q,Z);return D0(J.decrypt(X))}V0(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}function bP($,Q){let X=L0(Q),Y=_8($,"crypto.ciphertext:data!"),Z=D0(A$(V$([X.slice(16,32),Y]))).substring(2);o(Z===_8($,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");let J=hz0($,X.slice(0,16),Y),q=hZ(J);if($.address){let M=$.address.toLowerCase();if(!M.startsWith("0x"))M="0x"+M;o(J$(M)===q,"keystore address/privateKey mismatch","address",$.address)}let G={address:q,privateKey:J};if(_8($,"x-ethers.version:string")==="0.1"){let M=X.slice(32,64),j=_8($,"x-ethers.mnemonicCiphertext:data!"),P=_8($,"x-ethers.mnemonicCounter:data!"),D=new $7(M,P);G.mnemonic={path:_8($,"x-ethers.path:string")||Ah,locale:_8($,"x-ethers.locale:string")||"en",entropy:D0(L0(D.decrypt(j)))}}return G}function Rh($){let Q=_8($,"crypto.kdf:string");if(Q&&typeof Q==="string"){if(Q.toLowerCase()==="scrypt"){let X=_8($,"crypto.kdfparams.salt:data!"),Y=_8($,"crypto.kdfparams.n:int!"),Z=_8($,"crypto.kdfparams.r:int!"),J=_8($,"crypto.kdfparams.p:int!");o(Y>0&&(Y&Y-1)===0,"invalid kdf.N","kdf.N",Y),o(Z>0&&J>0,"invalid kdf","kdf",Q);let q=_8($,"crypto.kdfparams.dklen:int!");return o(q===32,"invalid kdf.dklen","kdf.dflen",q),{name:"scrypt",salt:X,N:Y,r:Z,p:J,dkLen:64}}else if(Q.toLowerCase()==="pbkdf2"){let X=_8($,"crypto.kdfparams.salt:data!"),Y=_8($,"crypto.kdfparams.prf:string!"),Z=Y.split("-").pop();o(Z==="sha256"||Z==="sha512","invalid kdf.pdf","kdf.pdf",Y);let J=_8($,"crypto.kdfparams.c:int!"),q=_8($,"crypto.kdfparams.dklen:int!");return o(q===32,"invalid kdf.dklen","kdf.dklen",q),{name:"pbkdf2",salt:X,count:J,dkLen:q,algorithm:Z}}}o(!1,"unsupported key-derivation function","kdf",Q)}function hU($,Q){let X=JSON.parse($),Y=Kz(Q),Z=Rh(X);if(Z.name==="pbkdf2"){let{salt:P,count:D,dkLen:A,algorithm:I}=Z,H=IX(Y,P,D,A,I);return bP(X,H)}V0(Z.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:Z});let{salt:J,N:q,r:G,p:z,dkLen:M}=Z,j=gZ(Y,J,q,G,z,M);return bP(X,j)}function Nh($){return new Promise((Q)=>{setTimeout(()=>{Q()},$)})}async function mU($,Q,X){let Y=JSON.parse($),Z=Kz(Q),J=Rh(Y);if(J.name==="pbkdf2"){if(X)X(0),await Nh(0);let{salt:D,count:A,dkLen:I,algorithm:H}=J,C=IX(Z,D,A,I,H);if(X)X(1),await Nh(0);return bP(Y,C)}V0(J.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:J});let{salt:q,N:G,r:z,p:M,dkLen:j}=J,P=await vZ(Z,q,G,z,M,j,X);return bP(Y,P)}function Ch($){let Q=$.salt!=null?L0($.salt,"options.salt"):aQ(32),X=131072,Y=8,Z=1;if($.scrypt){if($.scrypt.N)X=$.scrypt.N;if($.scrypt.r)Y=$.scrypt.r;if($.scrypt.p)Z=$.scrypt.p}return o(typeof X==="number"&&X>0&&Number.isSafeInteger(X)&&(BigInt(X)&BigInt(X-1))===BigInt(0),"invalid scrypt N parameter","options.N",X),o(typeof Y==="number"&&Y>0&&Number.isSafeInteger(Y),"invalid scrypt r parameter","options.r",Y),o(typeof Z==="number"&&Z>0&&Number.isSafeInteger(Z),"invalid scrypt p parameter","options.p",Z),{name:"scrypt",dkLen:32,salt:Q,N:X,r:Y,p:Z}}function Lh($,Q,X,Y){let Z=L0(X.privateKey,"privateKey"),J=Y.iv!=null?L0(Y.iv,"options.iv"):aQ(16);o(J.length===16,"invalid options.iv length","options.iv",Y.iv);let q=Y.uuid!=null?L0(Y.uuid,"options.uuid"):aQ(16);o(q.length===16,"invalid options.uuid length","options.uuid",Y.iv);let G=$.slice(0,16),z=$.slice(16,32),M=new $7(G,J),j=L0(M.encrypt(Z)),P=A$(V$([z,j])),D={address:X.address.substring(2).toLowerCase(),id:tK(q),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:D0(J).substring(2)},ciphertext:D0(j).substring(2),kdf:"scrypt",kdfparams:{salt:D0(Q.salt).substring(2),n:Q.N,dklen:32,p:Q.p,r:Q.r},mac:P.substring(2)}};if(X.mnemonic){let A=Y.client!=null?Y.client:`ethers/${BG}`,I=X.mnemonic.path||Ah,H=X.mnemonic.locale||"en",C=$.slice(32,64),B=L0(X.mnemonic.entropy,"account.mnemonic.entropy"),S=aQ(16),_=new $7(C,S),k=L0(_.encrypt(B)),f=new Date,b="UTC--"+(f.getUTCFullYear()+"-"+bU(f.getUTCMonth()+1,2)+"-"+bU(f.getUTCDate(),2)+"T"+bU(f.getUTCHours(),2)+"-"+bU(f.getUTCMinutes(),2)+"-"+bU(f.getUTCSeconds(),2)+".0Z")+"--"+D.address;D["x-ethers"]={client:A,gethFilename:b,path:I,locale:H,mnemonicCounter:D0(S).substring(2),mnemonicCiphertext:D0(k).substring(2),version:"0.1"}}return JSON.stringify(D)}function Q7($,Q,X){if(X==null)X={};let Y=Kz(Q),Z=Ch(X),J=gZ(Y,Z.salt,Z.N,Z.r,Z.p,64);return Lh(L0(J),Z,$,X)}async function X7($,Q,X){if(X==null)X={};let Y=Kz(Q),Z=Ch(X),J=await vZ(Y,Z.salt,Z.N,Z.r,Z.p,64,X.progressCallback);return Lh(L0(J),Z,$,X)}var Ah="m/44'/60'/0'/0/0";var hP=y(()=>{oL();s8();XQ();iX();a0();sL()});function mP($,Q){let X="";while($)X=pz0[$%16]+X,$=Math.trunc($/16);while(X.length<Q*2)X="0"+X;return"0x"+X}function aL($){let Q=L0($),X=c$(c8(c8(Q)),0,4),Y=V$([Q,X]);return f1(Y)}function wh($,Q,X,Y){let Z=new Uint8Array(37);if($&PJ)V0(Y!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),Z.set(L0(Y),1);else Z.set(L0(X));for(let q=24;q>=0;q-=8)Z[33+(q>>3)]=$>>24-q&255;let J=L0(xZ("sha512",Q,Z));return{IL:J.slice(0,32),IR:J.slice(32)}}function Th($,Q){let X=Q.split("/");if(o(X.length>0,"invalid path","path",Q),X[0]==="m")o($.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${$.depth}`,"path",Q),X.shift();let Y=$;for(let Z=0;Z<X.length;Z++){let J=X[Z];if(J.match(/^[0-9]+'$/)){let q=parseInt(J.substring(0,J.length-1));o(q<PJ,"invalid path index",`path[${Z}]`,J),Y=Y.deriveChild(PJ+q)}else if(J.match(/^[0-9]+$/)){let q=parseInt(J);o(q<PJ,"invalid path index",`path[${Z}]`,J),Y=Y.deriveChild(q)}else o(!1,"invalid path component",`path[${Z}]`,J)}return Y}function cP($){let Q=Y$($,"index");return o(Q>=0&&Q<PJ,"invalid account index","index",Q),`m/44'/60'/${Q}'/0/0`}function pP($){let Q=Y$($,"index");return o(Q>=0&&Q<PJ,"invalid account index","index",Q),`m/44'/60'/0'/0/${Q}`}var Wz="m/44'/60'/0'/0/0",mz0,PJ=2147483648,cz0,pz0="0123456789abcdef",jJ,$X,v5;var tL=y(()=>{XQ();BP();iX();a0();HV();SP();xP();hP();mz0=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),cz0=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");jJ={};$X=class $X extends MJ{publicKey;fingerprint;parentFingerprint;mnemonic;chainCode;path;index;depth;constructor($,Q,X,Y,Z,J,q,G,z){super(Q,z);EQ($,jJ,"HDNodeWallet"),E0(this,{publicKey:Q.compressedPublicKey});let M=c$(fZ(c8(this.publicKey)),0,4);E0(this,{parentFingerprint:X,fingerprint:M,chainCode:Y,path:Z,index:J,depth:q}),E0(this,{mnemonic:G})}connect($){return new $X(jJ,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,$)}#$(){let $={address:this.address,privateKey:this.privateKey},Q=this.mnemonic;if(this.path&&Q&&Q.wordlist.locale==="en"&&Q.password==="")$.mnemonic={path:this.path,locale:"en",entropy:Q.entropy};return $}async encrypt($,Q){return await X7(this.#$(),$,{progressCallback:Q})}encryptSync($){return Q7(this.#$(),$)}get extendedKey(){return V0(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),aL(V$(["0x0488ADE4",mP(this.depth,1),this.parentFingerprint,mP(this.index,4),this.chainCode,V$(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new v5(jJ,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild($){let Q=Y$($,"index");o(Q<=4294967295,"invalid index","index",Q);let X=this.path;if(X){if(X+="/"+(Q&~PJ),Q&PJ)X+="'"}let{IR:Y,IL:Z}=wh(Q,this.chainCode,this.publicKey,this.privateKey),J=new l8(RQ((mY(Z)+BigInt(this.privateKey))%cz0,32));return new $X(jJ,J,this.fingerprint,D0(Y),X,Q,this.depth+1,this.mnemonic,this.provider)}derivePath($){return Th(this,$)}static#Q($,Q){o(SZ($),"invalid seed","seed","[REDACTED]");let X=L0($,"seed");o(X.length>=16&&X.length<=64,"invalid seed","seed","[REDACTED]");let Y=L0(xZ("sha512",mz0,X)),Z=new l8(D0(Y.slice(0,32)));return new $X(jJ,Z,"0x00000000",D0(Y.slice(32)),"m",0,0,Q,null)}static fromExtendedKey($){let Q=p$(dK($));o(Q.length===82||aL(Q.slice(0,78))===$,"invalid extended key","extendedKey","[ REDACTED ]");let X=Q[4],Y=D0(Q.slice(5,9)),Z=parseInt(D0(Q.slice(9,13)).substring(2),16),J=D0(Q.slice(13,45)),q=Q.slice(45,78);switch(D0(Q.slice(0,4))){case"0x0488b21e":case"0x043587cf":{let G=D0(q);return new v5(jJ,hZ(G),G,Y,J,null,Z,X,null)}case"0x0488ade4":case"0x04358394 ":if(q[0]!==0)break;return new $X(jJ,new l8(q.slice(1)),Y,J,null,Z,X,null,null)}o(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom($,Q,X){if($==null)$="";if(Q==null)Q=Wz;if(X==null)X=aX.wordlist();let Y=nZ.fromEntropy(aQ(16),$,X);return $X.#Q(Y.computeSeed(),Y).derivePath(Q)}static fromMnemonic($,Q){if(!Q)Q=Wz;return $X.#Q($.computeSeed(),$).derivePath(Q)}static fromPhrase($,Q,X,Y){if(Q==null)Q="";if(X==null)X=Wz;if(Y==null)Y=aX.wordlist();let Z=nZ.fromPhrase($,Q,Y);return $X.#Q(Z.computeSeed(),Z).derivePath(X)}static fromSeed($){return $X.#Q($,null)}};v5=class v5 extends s1{publicKey;fingerprint;parentFingerprint;chainCode;path;index;depth;constructor($,Q,X,Y,Z,J,q,G,z){super(Q,z);EQ($,jJ,"HDNodeVoidWallet"),E0(this,{publicKey:X});let M=c$(fZ(c8(X)),0,4);E0(this,{publicKey:X,fingerprint:M,parentFingerprint:Y,chainCode:Z,path:J,index:q,depth:G})}connect($){return new v5(jJ,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,$)}get extendedKey(){return V0(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),aL(V$(["0x0488B21E",mP(this.depth,1),this.parentFingerprint,mP(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild($){let Q=Y$($,"index");o(Q<=4294967295,"invalid index","index",Q);let X=this.path;if(X){if(X+="/"+(Q&~PJ),Q&PJ)X+="'"}let{IR:Y,IL:Z}=wh(Q,this.chainCode,this.publicKey,null),J=l8.addPoints(Z,this.publicKey,!0),q=hZ(J);return new v5(jJ,q,J,this.fingerprint,D0(Y),X,Q,this.depth+1,this.provider)}derivePath($){return Th(this,$)}}});function Vz($){try{if(JSON.parse($).encseed)return!0}catch(Q){}return!1}function Oz($,Q){let X=JSON.parse($),Y=Kz(Q),Z=J$(_8(X,"ethaddr:string!")),J=rL(_8(X,"encseed:string!"));o(J&&J.length%16===0,"invalid encseed","json",$);let q=L0(IX(Y,Y,2000,32,"sha256")).slice(0,16),G=J.slice(0,16),z=J.slice(16),M=new RV(q,G),j=nL(L0(M.decrypt(z))),P="";for(let D=0;D<j.length;D++)P+=String.fromCharCode(j[D]);return{address:Z,privateKey:xQ(P)}}var eL=y(()=>{oL();s8();XQ();WJ();a0();sL()});function Ih($){return new Promise((Q)=>{setTimeout(()=>{Q()},$)})}var g5;var Fh=y(()=>{XQ();a0();SP();tL();eL();hP();xP();g5=class g5 extends MJ{constructor($,Q){if(typeof $==="string"&&!$.startsWith("0x"))$="0x"+$;let X=typeof $==="string"?new l8($):$;super(X,Q)}connect($){return new g5(this.signingKey,$)}async encrypt($,Q){let X={address:this.address,privateKey:this.privateKey};return await X7(X,$,{progressCallback:Q})}encryptSync($){let Q={address:this.address,privateKey:this.privateKey};return Q7(Q,$)}static#$($){if(o($,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in $&&$.mnemonic&&$.mnemonic.locale==="en"){let X=nZ.fromEntropy($.mnemonic.entropy),Y=$X.fromMnemonic(X,$.mnemonic.path);if(Y.address===$.address&&Y.privateKey===$.privateKey)return Y;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}let Q=new g5($.privateKey);return o(Q.address===$.address,"address/privateKey mismatch","json","[ REDACTED ]"),Q}static async fromEncryptedJson($,Q,X){let Y=null;if(Uz($))Y=await mU($,Q,X);else if(Vz($)){if(X)X(0),await Ih(0);if(Y=Oz($,Q),X)X(1),await Ih(0)}return g5.#$(Y)}static fromEncryptedJsonSync($,Q){let X=null;if(Uz($))X=hU($,Q);else if(Vz($))X=Oz($,Q);else o(!1,"invalid JSON wallet","json","[ REDACTED ]");return g5.#$(X)}static createRandom($){let Q=$X.createRandom();if($)return Q.connect($);return Q}static fromPhrase($,Q){let X=$X.fromPhrase($);if(Q)return X.connect(Q);return X}}});var Bh=y(()=>{SP();tL();eL();hP();xP();Fh()});function Sh($,Q){let X=(1<<$)-1,Y=[],Z=0,J=0,q=0;for(let G=0;G<Q.length;G++){Z=Z<<6|")!@#$%^&*(ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".indexOf(Q[G]),J+=6;while(J>=$){let z=Z>>J-$;if(Z&=(1<<J-$)-1,J-=$,z===0)q+=X;else Y.push(z+q),q=0}}return Y}function Eh($,Q){let X=_P($).join(",");return Q.split(/,/g).forEach((Y)=>{let Z=Y.match(/^([a-z]*)([0-9]+)([0-9])(.*)$/);o(Z!==null,"internal error parsing accents","accents",Q);let J=0,q=Sh(parseInt(Z[3]),Z[4]),G=parseInt(Z[2]),z=new RegExp(`([${Z[1]}])`,"g");X=X.replace(z,(M,j)=>{if(--q[J]===0)j=String.fromCharCode(j.charCodeAt(0),G),J++;return j})}),X.split(",")}var _h=y(()=>{a0();bL()});var LV;var kh=y(()=>{kP();_h();LV=class LV extends x5{#$;constructor($,Q,X,Y){super($,Q,Y);this.#$=X}get _accent(){return this.#$}_decodeWords(){return Eh(this._data,this._accent)}}});var lP;var xh=y(()=>{HV();lP={en:aX.wordlist()}});var fh=y(()=>{hL();HV();kP();kh();xh()});var O8={};r8(O8,{zeroPadValue:()=>m8,zeroPadBytes:()=>ZJ,wordlists:()=>lP,version:()=>BG,verifyTypedData:()=>QP,verifyMessage:()=>aj,verifyAuthorization:()=>pj,uuidV4:()=>tK,toUtf8String:()=>LX,toUtf8CodePoints:()=>$j,toUtf8Bytes:()=>s$,toTwos:()=>qJ,toQuantity:()=>QQ,toNumber:()=>lK,toBigInt:()=>mY,toBeHex:()=>RQ,toBeArray:()=>p$,stripZerosLeft:()=>sD,solidityPackedSha256:()=>ej,solidityPackedKeccak256:()=>tj,solidityPacked:()=>DU,showThrottleMessage:()=>fQ,sha512:()=>c1,sha256:()=>c8,scryptSync:()=>gZ,scrypt:()=>vZ,ripemd160:()=>fZ,resolveProperties:()=>W8,resolveAddress:()=>H8,recoverAddress:()=>mZ,randomBytes:()=>aQ,pbkdf2:()=>IX,parseUnits:()=>EG,parseEther:()=>qj,namehash:()=>H5,mask:()=>RY,makeError:()=>_$,lock:()=>NC,keccak256:()=>A$,isValidName:()=>sj,isKeystoreJson:()=>Uz,isHexString:()=>w$,isError:()=>i$,isCrowdsaleJson:()=>Vz,isCallException:()=>W5,isBytesLike:()=>SZ,isAddressable:()=>mG,isAddress:()=>yj,id:()=>xQ,hexlify:()=>D0,hashMessage:()=>dG,hashAuthorization:()=>pG,getUint:()=>x1,getNumber:()=>Y$,getIndexedAccountPath:()=>pP,getIcapAddress:()=>fj,getDefaultProvider:()=>TP,getCreateAddress:()=>u1,getCreate2Address:()=>gj,getBytesCopy:()=>P8,getBytes:()=>L0,getBigInt:()=>n0,getAddress:()=>J$,getAccountPath:()=>cP,fromTwos:()=>JJ,formatUnits:()=>v1,formatEther:()=>Jj,ensNormalize:()=>WV,encryptKeystoreJsonSync:()=>Q7,encryptKeystoreJson:()=>X7,encodeRlp:()=>wX,encodeBytes32String:()=>ZP,encodeBase64:()=>nK,encodeBase58:()=>f1,dnsEncode:()=>MU,defineProperties:()=>E0,defaultPath:()=>Wz,decryptKeystoreJsonSync:()=>hU,decryptKeystoreJson:()=>mU,decryptCrowdsaleJson:()=>Oz,decodeRlp:()=>GJ,decodeBytes32String:()=>JP,decodeBase64:()=>iK,decodeBase58:()=>dK,dataSlice:()=>c$,dataLength:()=>uX,copyRequest:()=>uY,concat:()=>V$,computeHmac:()=>xZ,computeAddress:()=>hZ,checkResultErrors:()=>tW,authorizationify:()=>d1,assertPrivate:()=>EQ,assertNormalize:()=>k1,assertArgumentCount:()=>_1,assertArgument:()=>o,assert:()=>V0,accessListify:()=>_Q,ZeroHash:()=>hG,ZeroAddress:()=>bZ,WordlistOwlA:()=>LV,WordlistOwl:()=>x5,Wordlist:()=>Gz,WeiPerEther:()=>Bj,WebSocketProvider:()=>_5,Wallet:()=>g5,VoidSigner:()=>s1,Utf8ErrorFuncs:()=>rW,UnmanagedSubscriber:()=>w9,UndecodedEventLog:()=>o1,TypedDataEncoder:()=>u8,Typed:()=>v$,TransactionResponse:()=>C9,TransactionReceipt:()=>C5,TransactionDescription:()=>PU,Transaction:()=>a8,StructFragment:()=>A9,SocketSubscriber:()=>e1,SocketProvider:()=>Yz,SocketPendingSubscriber:()=>_U,SocketEventSubscriber:()=>kU,SocketBlockSubscriber:()=>EU,SigningKey:()=>l8,Signature:()=>Y8,Result:()=>dX,QuickNodeProvider:()=>k5,PocketProvider:()=>qz,ParamType:()=>e$,NonceManager:()=>vU,NetworkPlugin:()=>uZ,Network:()=>B$,NamedFragment:()=>R5,N:()=>Fj,MulticoinProviderPlugin:()=>wU,Mnemonic:()=>nZ,MinInt256:()=>Ej,MessagePrefix:()=>JU,MaxUint256:()=>Sj,MaxInt256:()=>_j,LogDescription:()=>jU,Log:()=>dY,LangEn:()=>aX,JsonRpcSigner:()=>a1,JsonRpcProvider:()=>w8,JsonRpcApiProvider:()=>t1,IpcSocketProvider:()=>FP,Interface:()=>IY,InfuraWebSocketProvider:()=>xU,InfuraProvider:()=>VJ,Indexed:()=>nG,HDNodeWallet:()=>$X,HDNodeVoidWallet:()=>v5,GasCostPlugin:()=>T5,FunctionFragment:()=>oX,Fragment:()=>pZ,FixedNumber:()=>CY,FetchUrlFeeDataNetworkPlugin:()=>tG,FetchResponse:()=>_Z,FetchRequest:()=>n$,FetchCancelSignal:()=>oK,FeeDataNetworkPlugin:()=>IU,FeeData:()=>n1,FallbackProvider:()=>Zz,FallbackFragment:()=>lY,EventPayload:()=>V5,EventLog:()=>L5,EventFragment:()=>nX,EtherscanProvider:()=>Xz,EtherscanPlugin:()=>SU,EtherSymbol:()=>kj,ErrorFragment:()=>wQ,ErrorDescription:()=>HU,EnsResolver:()=>L9,EnsPlugin:()=>I5,ContractUnknownEventPayload:()=>r1,ContractTransactionResponse:()=>w5,ContractTransactionReceipt:()=>CU,ContractFactory:()=>LU,ContractEventPayload:()=>rG,Contract:()=>FY,ConstructorFragment:()=>LY,CloudflareProvider:()=>Qz,ChainstackProvider:()=>E5,BrowserProvider:()=>OJ,BlockscoutProvider:()=>Jz,Block:()=>oG,BaseWallet:()=>MJ,BaseContract:()=>lZ,AnkrProvider:()=>B5,AlchemyProvider:()=>S5,AbstractSigner:()=>iZ,AbstractProvider:()=>dZ,AbiCoder:()=>TY});var $w=y(()=>{NU();s8();qU();MV();XQ();WJ();BP();iX();a0();Bh();fh()});var vh={};r8(vh,{zeroPadValue:()=>m8,zeroPadBytes:()=>ZJ,wordlists:()=>lP,version:()=>BG,verifyTypedData:()=>QP,verifyMessage:()=>aj,verifyAuthorization:()=>pj,uuidV4:()=>tK,toUtf8String:()=>LX,toUtf8CodePoints:()=>$j,toUtf8Bytes:()=>s$,toTwos:()=>qJ,toQuantity:()=>QQ,toNumber:()=>lK,toBigInt:()=>mY,toBeHex:()=>RQ,toBeArray:()=>p$,stripZerosLeft:()=>sD,solidityPackedSha256:()=>ej,solidityPackedKeccak256:()=>tj,solidityPacked:()=>DU,showThrottleMessage:()=>fQ,sha512:()=>c1,sha256:()=>c8,scryptSync:()=>gZ,scrypt:()=>vZ,ripemd160:()=>fZ,resolveProperties:()=>W8,resolveAddress:()=>H8,recoverAddress:()=>mZ,randomBytes:()=>aQ,pbkdf2:()=>IX,parseUnits:()=>EG,parseEther:()=>qj,namehash:()=>H5,mask:()=>RY,makeError:()=>_$,lock:()=>NC,keccak256:()=>A$,isValidName:()=>sj,isKeystoreJson:()=>Uz,isHexString:()=>w$,isError:()=>i$,isCrowdsaleJson:()=>Vz,isCallException:()=>W5,isBytesLike:()=>SZ,isAddressable:()=>mG,isAddress:()=>yj,id:()=>xQ,hexlify:()=>D0,hashMessage:()=>dG,hashAuthorization:()=>pG,getUint:()=>x1,getNumber:()=>Y$,getIndexedAccountPath:()=>pP,getIcapAddress:()=>fj,getDefaultProvider:()=>TP,getCreateAddress:()=>u1,getCreate2Address:()=>gj,getBytesCopy:()=>P8,getBytes:()=>L0,getBigInt:()=>n0,getAddress:()=>J$,getAccountPath:()=>cP,fromTwos:()=>JJ,formatUnits:()=>v1,formatEther:()=>Jj,ethers:()=>O8,ensNormalize:()=>WV,encryptKeystoreJsonSync:()=>Q7,encryptKeystoreJson:()=>X7,encodeRlp:()=>wX,encodeBytes32String:()=>ZP,encodeBase64:()=>nK,encodeBase58:()=>f1,dnsEncode:()=>MU,defineProperties:()=>E0,defaultPath:()=>Wz,decryptKeystoreJsonSync:()=>hU,decryptKeystoreJson:()=>mU,decryptCrowdsaleJson:()=>Oz,decodeRlp:()=>GJ,decodeBytes32String:()=>JP,decodeBase64:()=>iK,decodeBase58:()=>dK,dataSlice:()=>c$,dataLength:()=>uX,copyRequest:()=>uY,concat:()=>V$,computeHmac:()=>xZ,computeAddress:()=>hZ,checkResultErrors:()=>tW,authorizationify:()=>d1,assertPrivate:()=>EQ,assertNormalize:()=>k1,assertArgumentCount:()=>_1,assertArgument:()=>o,assert:()=>V0,accessListify:()=>_Q,ZeroHash:()=>hG,ZeroAddress:()=>bZ,WordlistOwlA:()=>LV,WordlistOwl:()=>x5,Wordlist:()=>Gz,WeiPerEther:()=>Bj,WebSocketProvider:()=>_5,Wallet:()=>g5,VoidSigner:()=>s1,Utf8ErrorFuncs:()=>rW,UnmanagedSubscriber:()=>w9,UndecodedEventLog:()=>o1,TypedDataEncoder:()=>u8,Typed:()=>v$,TransactionResponse:()=>C9,TransactionReceipt:()=>C5,TransactionDescription:()=>PU,Transaction:()=>a8,StructFragment:()=>A9,SocketSubscriber:()=>e1,SocketProvider:()=>Yz,SocketPendingSubscriber:()=>_U,SocketEventSubscriber:()=>kU,SocketBlockSubscriber:()=>EU,SigningKey:()=>l8,Signature:()=>Y8,Result:()=>dX,QuickNodeProvider:()=>k5,PocketProvider:()=>qz,ParamType:()=>e$,NonceManager:()=>vU,NetworkPlugin:()=>uZ,Network:()=>B$,NamedFragment:()=>R5,N:()=>Fj,MulticoinProviderPlugin:()=>wU,Mnemonic:()=>nZ,MinInt256:()=>Ej,MessagePrefix:()=>JU,MaxUint256:()=>Sj,MaxInt256:()=>_j,LogDescription:()=>jU,Log:()=>dY,LangEn:()=>aX,JsonRpcSigner:()=>a1,JsonRpcProvider:()=>w8,JsonRpcApiProvider:()=>t1,IpcSocketProvider:()=>FP,Interface:()=>IY,InfuraWebSocketProvider:()=>xU,InfuraProvider:()=>VJ,Indexed:()=>nG,HDNodeWallet:()=>$X,HDNodeVoidWallet:()=>v5,GasCostPlugin:()=>T5,FunctionFragment:()=>oX,Fragment:()=>pZ,FixedNumber:()=>CY,FetchUrlFeeDataNetworkPlugin:()=>tG,FetchResponse:()=>_Z,FetchRequest:()=>n$,FetchCancelSignal:()=>oK,FeeDataNetworkPlugin:()=>IU,FeeData:()=>n1,FallbackProvider:()=>Zz,FallbackFragment:()=>lY,EventPayload:()=>V5,EventLog:()=>L5,EventFragment:()=>nX,EtherscanProvider:()=>Xz,EtherscanPlugin:()=>SU,EtherSymbol:()=>kj,ErrorFragment:()=>wQ,ErrorDescription:()=>HU,EnsResolver:()=>L9,EnsPlugin:()=>I5,ContractUnknownEventPayload:()=>r1,ContractTransactionResponse:()=>w5,ContractTransactionReceipt:()=>CU,ContractFactory:()=>LU,ContractEventPayload:()=>rG,Contract:()=>FY,ConstructorFragment:()=>LY,CloudflareProvider:()=>Qz,ChainstackProvider:()=>E5,BrowserProvider:()=>OJ,BlockscoutProvider:()=>Jz,Block:()=>oG,BaseWallet:()=>MJ,BaseContract:()=>lZ,AnkrProvider:()=>B5,AlchemyProvider:()=>S5,AbstractSigner:()=>iZ,AbstractProvider:()=>dZ,AbiCoder:()=>TY});var Mz=y(()=>{$w();$w()});function lz0($,Q){if(typeof Q==="bigint")return`BigInt(${Q.toString()})`;if(Q instanceof Map)return Object.fromEntries(Q);if(Q instanceof Set)return Array.from(Q);if(Q&&typeof Q==="object"&&Q.type==="Buffer"&&Array.isArray(Q.data))return`Buffer(${Q.data.length} bytes)`;if(typeof Q==="function")return`[Function: ${Q.name||"anonymous"}]`;return Q}function k$($,Q){try{return JSON.stringify($,lz0,Q)}catch(X){return`[Error stringifying: ${X.message}]`}}function uz0($,Q){if(typeof Q==="string"&&Q.startsWith("BigInt(")&&Q.endsWith(")")){let X=Q.slice(7,-1);return BigInt(X)}return Q}function gh($){try{return JSON.parse($,uz0)}catch(Q){throw new Error(`Failed to parse JSON: ${Q.message}`)}}var yh={};r8(yh,{loadJurisdictions:()=>Qw,getCachedJurisdictions:()=>iz0,clearJurisdictionsCache:()=>dz0});function Qw(){if(U8)throw new Error("loadJurisdictions() not available in browser - use evm.ts generateJurisdictions() instead");if(T9)return T9;try{let Q=(()=>{throw new Error("Cannot require module "+"fs");})().readFileSync("./jurisdictions.json","utf8");return T9=JSON.parse(Q),console.log("\uD83D\uDCCB Jurisdictions loaded from file (cached for future use)"),console.log(`   Version: ${T9?.version}`),console.log(`   Last updated: ${T9?.lastUpdated}`),console.log(`   Jurisdictions: ${Object.keys(T9?.jurisdictions||{}).join(", ")}`),T9}catch($){return console.error(" Failed to load jurisdictions.json:",$),T9={version:"1.0.0",lastUpdated:new Date().toISOString(),jurisdictions:{},defaults:{timeout:30000,retryAttempts:3,gasLimit:1e6}},T9}}function dz0(){T9=null,console.log("\uD83D\uDD04 Jurisdictions cache cleared")}function iz0(){return T9}var T9=null;var Xw=y(()=>{tX()});var c_0,BY,p_0;var bh=y(()=>{c_0={MAX_PAYMENT_AMOUNT:2n**128n-1n,MIN_PAYMENT_AMOUNT:1n,MAX_CREDIT_LIMIT:1000000000n*10n**6n,MAX_COLLATERAL:2n**64n-1n,MAX_ROUTE_HOPS:10},BY={DEBUG_LOGGING:!1,DEBUG_CONSENSUS:!1,DEBUG_ACCOUNTS:!1,DEBUG_ROUTING:!1,LOG_BLOCKCHAIN_ERRORS:!0,DB_BATCH_SIZE:100,SNAPSHOT_INTERVAL:100},p_0={MAX_NONCE_GAP:100,MAX_COUNTER_GAP:100,MAX_FRAME_AGE_MS:3600000,MIN_ENTITY_SHARES:1n,MAX_ENTITY_SHARES:2n**64n-1n}});function nz0($){return Y7[$]??!1}function oz0($,Q,...X){if(nz0($)){let Y=`[${$}]`;switch(Q){case"error":console.error(Y,...X);break;case"warn":console.warn(Y,...X);break;case"info":console.info(Y,...X);break;case"debug":default:console.log(Y,...X);break}}}function t0($,...Q){oz0($,"error",...Q)}function rz0(){console.log("\uD83D\uDCCA Current Log Configuration:"),Object.entries(Y7).forEach(([$,Q])=>{console.log(`  ${Q?"":""} ${$}`)})}function sz0($,Q){Y7[$]=Q,console.log(`\uD83D\uDD27 Log category "${$}" set to ${Q?"ON":"OFF"}`)}function az0(){Object.keys(Y7).forEach(($)=>{Y7[$]=!0}),console.log(" All logs enabled")}function tz0(){Object.keys(Y7).forEach(($)=>{Y7[$]=!1}),console.log(" All logs disabled")}var Y7;var cU=y(()=>{bh();Y7={ENTITY_TX:BY.DEBUG_CONSENSUS,ACCOUNT_OPEN:BY.DEBUG_ACCOUNTS,SIGNER_LOOKUP:BY.DEBUG_CONSENSUS,PROCESS_CASCADE:BY.DEBUG_LOGGING,FRAME_CONSENSUS:BY.DEBUG_CONSENSUS,ENTITY_OUTPUT:BY.DEBUG_LOGGING,ENTITY_INPUT:BY.DEBUG_LOGGING,SERVER_TICK:BY.DEBUG_LOGGING,J_WATCHER:BY.LOG_BLOCKCHAIN_ERRORS,BLOCKCHAIN:BY.LOG_BLOCKCHAIN_ERRORS,GOSSIP:BY.DEBUG_LOGGING,R2R_FLOW:BY.DEBUG_ACCOUNTS,ACCOUNT_STATE:BY.DEBUG_ACCOUNTS};if(typeof window!=="undefined")window.logConfig={show:rz0,set:sz0,enableAll:az0,disableAll:tz0,config:Y7},console.log("\uD83D\uDD27 Log config available at window.logConfig")});var Yw;var hh=y(()=>{Mz();Yw=class Yw extends O8.AbstractProvider{browserVM;constructor($){super();this.browserVM=$}async _perform($){switch($.method){case"chainId":return 1337;case"getBlockNumber":return 0;case"getTransactionCount":let Q=await this.browserVM.vm.stateManager.getAccount(O8.getAddress($.address));return Number(Q?.nonce||0n);case"getBalance":return(await this.browserVM.vm.stateManager.getAccount(O8.getAddress($.address)))?.balance||0n;case"getCode":let Y=await this.browserVM.vm.stateManager.getCode(O8.getAddress($.address));return O8.hexlify(Y);case"call":let Z=await this.browserVM.vm.evm.runCall({to:O8.getAddress($.transaction.to),caller:$.transaction.from?O8.getAddress($.transaction.from):this.browserVM.deployerAddress,data:O8.getBytes($.transaction.data||"0x"),gasLimit:$.transaction.gasLimit||100000n});if(Z.execResult.exceptionError)throw new Error(`Call failed: ${Z.execResult.exceptionError}`);return O8.hexlify(Z.execResult.returnValue);case"sendTransaction":return await this.browserVM.executeTx({to:$.signedTransaction.to,data:$.signedTransaction.data,gasLimit:$.signedTransaction.gasLimit?BigInt($.signedTransaction.gasLimit):void 0});case"getTransaction":case"getTransactionReceipt":return null;case"estimateGas":return 1e6;default:throw new Error(`Unsupported method: ${$.method}`)}}async _getCurrentNonce(){return(await this.browserVM.vm.stateManager.getAccount(this.browserVM.deployerAddress))?.nonce||0n}}});var IV={};r8(IV,{transferNameBetweenEntities:()=>Ww,submitSettle:()=>TV,submitReserveToReserve:()=>Mw,submitProcessBatch:()=>qw,submitPrefundAccount:()=>Jw,setBrowserVMJurisdiction:()=>Ow,registerNumberedEntityOnChain:()=>Gw,registerNumberedEntitiesBatchOnChain:()=>$40,getNextEntityNumber:()=>Uw,getJurisdictions:()=>Vw,getJurisdictionByAddress:()=>pU,getEntityInfoFromChain:()=>Kw,getAvailableJurisdictions:()=>y5,generateJurisdictions:()=>lh,fundEntityReserves:()=>ez0,debugFundReserves:()=>Zw,connectToEthereum:()=>SY,assignNameOnChain:()=>zw,ENTITY_PROVIDER_ABI:()=>ch,DEPOSITORY_ABI:()=>ph,DEFAULT_JURISDICTIONS:()=>Dz});var k8=($,Q)=>{if(console.log($,Q),U8&&window.xlnErrorLog)window.xlnErrorLog($,"EVM",Q)},mh=($,Q)=>{if(t0("BLOCKCHAIN",$,Q),U8&&window.xlnErrorLog)window.xlnErrorLog($,"EVM-ERROR",Q)},ch,ph,SY=async($)=>{let{address:Q,entityProviderAddress:X,depositoryAddress:Y}=$;try{if(!Q&&"rpc"in $)console.warn("\uD83D\uDEA8 JURISDICTION-LEGACY: Using deprecated rpc field, should be address");if(!X&&"contracts"in $)console.warn("\uD83D\uDEA8 JURISDICTION-LEGACY: Using deprecated contracts.entityProvider field");if(!Q)throw new Error("Jurisdiction missing RPC URL (address or rpc property)");if(!X||!Y)throw new Error("Jurisdiction missing contract addresses (entityProvider and depository)");if(k8(`\uD83D\uDD0C CONNECTING: jurisdiction=${$.name}, rpcUrl=${Q}`),U8){k8(`   Page Origin: ${window.location.origin}`),k8(`   Page Protocol: ${window.location.protocol}`),k8(`   Page Host: ${window.location.hostname}:${window.location.port}`);let D=new URL(Q,window.location.origin);k8(`   RPC URL: ${D.href}`);let A=window.location.origin!==D.origin;k8(`   CORS issue? ${A?"YES - Different origins!":"No (using proxy)"}`,{corsIssue:A}),k8(`   User Agent: ${navigator.userAgent}`)}k8(`   Contracts: EP=${X.slice(0,10)}, DEP=${Y.slice(0,10)}`);let Z=Q;if(U8&&Q.startsWith("/"))Z=new URL(Q,window.location.origin).href,k8(`   Resolved RPC: ${Z}`);let J,q=Z.startsWith("browservm://");if(q){if(!wV)throw new Error("BrowserVM instance not set - call setBrowserVMJurisdiction with browserVM instance first");k8("\uD83E\uDDEA Using BrowserVM ethers provider"),J=new Yw(wV)}else J=new O8.JsonRpcProvider(Z);k8(" Provider created");let G="0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80",z=new O8.Wallet(G,J),M=await z.getAddress();if(k8(` Signer created: ${M}`),!q)try{let D=await J.getNetwork();k8(` Network connected: chainId=${D.chainId}`)}catch(D){throw mh(" NETWORK-CONNECT-FAILED",{rpcUrl:Q,errorCode:D?.code,errorMessage:D?.message,errorStack:D?.stack}),D}else k8(" BrowserVM connection established (chainId=1337)");let j=new O8.Contract(X,ch,z),P=new O8.Contract(Y,ph,z);return k8(` Contracts created for ${$.name}`),{provider:J,signer:z,entityProvider:j,depository:P}}catch(Z){throw mh(` CONNECT-FAILED: ${$.name}`,{rpcUrl:Q,errorType:Z?.constructor?.name,errorCode:Z?.code,errorReason:Z?.reason,errorMessage:Z?.message,errorStack:Z?.stack}),Z}},Zw=async($,Q,X,Y)=>{try{console.log(`\uD83D\uDCB0 DEBUG: Funding entity ${Q.slice(0,10)} with ${Y} of token ${X}...`);let{depository:Z}=await SY($),J=await Z.debugFundReserves(Q,X,Y);console.log(`\uD83D\uDCE1 Debug funding transaction: ${J.hash}`);let q=await J.wait();console.log(` Debug funding confirmed in block ${q.blockNumber}`);let G=await Z._reserves(Q,X);return console.log(`\uD83D\uDCB0 Entity ${Q.slice(0,10)} now has ${G.toString()} of token ${X}`),{transaction:J,receipt:q,newBalance:G}}catch(Z){throw t0("BLOCKCHAIN"," Failed to fund reserves:",Z),Z}},ez0=async($,Q)=>{console.log(`\uD83D\uDCB0 Funding entity ${$.slice(0,10)}... with ${Q.length} assets`);for(let X of Q)console.log(`  \uD83D\uDCB3 Adding ${X.symbol}: ${X.amount} (token ${X.tokenId})`),console.log(`  - Funding ${$.slice(0,10)} with ${X.amount} of token ${X.tokenId}`);console.log(` Entity ${$.slice(0,10)}... funded with all assets`)},Jw=async($,Q,X,Y,Z)=>{try{console.log(`\uD83D\uDCB0 Prefunding account between ${Q.slice(0,10)}... and ${X.slice(0,10)}...`),console.log(`\uD83D\uDD0D TOKEN: ${Y}, AMOUNT: ${Z}`);let{depository:J,provider:q}=await SY($);if(console.log(`\uD83D\uDD0D CONTRACT ADDRESS: ${J.target}`),await q.getCode(J.target)==="0x")throw new Error("Contract not deployed at this address");let z=await J._reserves(Q,Y);if(console.log(`\uD83D\uDD0D Current balance: ${z.toString()}`),console.log(`\uD83D\uDD0D Requested amount: ${Z}`),z<BigInt(Z))throw new Error(`Insufficient reserves: have ${z.toString()}, need ${Z}`);console.log(`\uD83D\uDCDE Calling prefundAccount(${X}, ${Y}, ${Z})`);let M=await J.prefundAccount(X,Y,Z);console.log(` Transaction sent: ${M.hash}`);let j=await M.wait();return console.log(` Prefunding confirmed in block ${j.blockNumber}`),{hash:M.hash,receipt:j}}catch(J){throw t0("BLOCKCHAIN"," Failed to prefund account:",J),J}},qw=async($,Q,X)=>{try{if(console.log(`\uD83D\uDCB8 Submitting processBatch to ${$.name} as entity ${Q.slice(0,10)}...`),console.log("\uD83D\uDD0D BATCH DEBUG:",k$(X)),console.log(`\uD83D\uDD0D ENTITY DEBUG: ${Q}`),console.log("\uD83D\uDD0D JURISDICTION DEBUG:",$),console.log("\uD83D\uDD0D JURISDICTION SOURCE: Reading from jurisdictions.json file"),console.log(`\uD83D\uDD0D DEPOSITORY ADDRESS FROM JURISDICTION: ${$.depositoryAddress}`),console.log(`\uD83D\uDD0D ENTITY PROVIDER ADDRESS FROM JURISDICTION: ${$.entityProviderAddress}`),X.reserveToReserve)for(let S=0;S<X.reserveToReserve.length;S++){let _=X.reserveToReserve[S];if(typeof _.amount==="number"){let k=BigInt(Math.floor(_.amount*1000000000000000000)).toString();console.log(`\uD83D\uDD27 Converting amount ${_.amount}  ${k} wei`),_.amount=k}}console.log("\uD83D\uDD0D FIXED BATCH:",k$(X));let{depository:Y,provider:Z}=await SY($);console.log(`\uD83D\uDD0D CONTRACT ADDRESS: ${Y.target}`);let J=await Z.getCode(Y.target);if(console.log(`\uD83D\uDD0D CONTRACT CODE LENGTH: ${J.length} characters`),J==="0x")throw new Error("Contract not deployed at this address");try{console.log("\uD83D\uDD0D Testing if contract has debugBulkFundEntities..."),await Y.debugBulkFundEntities?.staticCall?.(),console.log(" This is our NEW contract with debug functions!")}catch(S){console.log(" This is OLD contract - no debug functions:",S.message)}console.log(`\uD83D\uDD0D Checking balance for entity ${Q} token ${X.reserveToReserve[0]?.tokenId||1}...`);try{let S=await Y._reserves(Q,X.reserveToReserve[0]?.tokenId||1);if(console.log(`\uD83D\uDD0D Current balance: ${S.toString()}`),S.toString()==="0")throw console.log(" Entity has no reserves - this suggests old contract without pre-funding"),new Error(`Entity ${Q.slice(0,10)} has no reserves! Contract should be pre-funded.`)}catch(S){throw console.log(" Failed to check balance:",S.message),S}console.log("\uD83D\uDD0D Function signature: processBatch(bytes32,tuple)"),console.log(`\uD83D\uDD0D Entity ID: ${Q}`),console.log("\uD83D\uDD0D Batch structure:",Object.keys(X)),console.log("\uD83D\uDD0D reserveToReserve array:",X.reserveToReserve);let G=Y.interface.fragments.filter((S)=>S.type==="function").map((S)=>{return"name"in S?S.name:"unknown"}),z=G.includes("processBatch");console.log(`\uD83D\uDD0D Contract has processBatch function: ${z}`),console.log("\uD83D\uDD0D Available functions:",G.slice(0,10),"..."),console.log("\uD83D\uDD0D DEEP DEBUG: Contract interface analysis"),console.log(`\uD83D\uDD0D Contract target address: ${Y.target}`);let j=Y.interface.getFunction("processBatch")?.selector||"NOT_FOUND";console.log(`\uD83D\uDD0D Function selector: ${j}`);let P=await Z.getCode(Y.target),D=P.includes(j.slice(2));console.log(`\uD83D\uDD0D Deployed bytecode contains processBatch selector: ${D}`),console.log(`\uD83D\uDD0D Bytecode length: ${P.length} chars`);let A=O8.keccak256(O8.toUtf8Bytes(k$(Y.interface.fragments.map((S)=>{return"format"in S&&typeof S.format==="function"?S.format():S.toString()}))));console.log(`\uD83D\uDD0D ABI hash: ${A.slice(0,10)}...`);let I=Y.interface.encodeFunctionData("processBatch",[Q,X]);console.log(`\uD83D\uDD0D Call data length: ${I.length} chars`),console.log(`\uD83D\uDD0D Call data start: ${I.slice(0,20)}...`),console.log("\uD83D\uDD0D Testing with different entity addresses...");try{let S=await Y._reserves("0x0000000000000000000000000000000000000000000000000000000000000000",0);console.log(`\uD83D\uDD0D Entity 0 Token 0 balance: ${S.toString()}`)}catch(S){console.log(` Entity 0 balance check failed: ${S.message}`)}let H={reserveToExternalToken:[],externalTokenToReserve:[],reserveToReserve:[],reserveToCollateral:[],cooperativeUpdate:[],cooperativeDisputeProof:[],initialDisputeProof:[],finalDisputeProof:[],flashloans:[],hub_id:0};console.log("\uD83D\uDD0D Testing empty batch first...");try{let S=await Y.processBatch?.staticCall(Q,H);console.log(` Empty batch works: ${S}`),console.log("\uD83D\uDD0D Now testing our batch...");let _=await Y.processBatch?.staticCall(Q,X);console.log(` Static call successful: ${_}`)}catch(S){t0("BLOCKCHAIN"," Static call failed:",S);let _={};if(S&&typeof S==="object"){let k=S,f=k.code,g=k.data,b=k.reason;if(f!==void 0)_.code=f;if(g!==void 0)_.data=g;if(b!==void 0)_.reason=b}throw console.log("\uD83D\uDD0D Error details:",_),S}console.log("\uD83D\uDD0D Estimating gas for processBatch...");try{let S=await Y.processBatch?.estimateGas(Q,X);console.log(`\uD83D\uDD0D Gas estimate: ${S?.toString()||"N/A"}`)}catch(S){throw t0("BLOCKCHAIN"," Gas estimation failed:",S),S}let C=await Y.processBatch(Q,X);console.log(`\uD83D\uDCE1 Transaction submitted: ${C.hash}`);let B=await C.wait();return console.log(` Transaction confirmed in block ${B.blockNumber}`),{transaction:C,receipt:B}}catch(Y){throw t0("BLOCKCHAIN",` Failed to submit processBatch to ${$.name}:`,Y),Y}},Gw=async($,Q)=>{if(!$.jurisdiction)throw new Error("Jurisdiction required for on-chain registration");try{let{entityProvider:X}=await SY($.jurisdiction),Y=jz($),Z=b5(Y);if(s0)console.log(`\uD83C\uDFDB Registering numbered entity "${Q}" on chain`);if(s0)console.log(`   Jurisdiction: ${$.jurisdiction.name}`);if(s0)console.log(`   EntityProvider: ${$.jurisdiction.entityProviderAddress}`);if(s0)console.log(`   Board Hash: ${Z}`);try{let j=await X.nextNumber();if(s0)console.log(`   \uD83D\uDCCA Next entity number will be: ${j}`)}catch(j){throw new Error(`Failed to call nextNumber(): ${j}`)}let J=await X.registerNumberedEntity(Z);if(s0)console.log(`   \uD83D\uDCE4 Transaction sent: ${J.hash}`);let q=await J.wait();if(s0)console.log(`    Transaction confirmed in block ${q.blockNumber}`);if(q.status===0)throw new Error(`Transaction reverted! Hash: ${J.hash}`);if(s0)console.log(`   \uD83D\uDCCB Receipt logs count: ${q.logs.length}`),q.logs.forEach((j,P)=>{try{let D=X.interface.parseLog(j);console.log(`   \uD83D\uDCDD Log ${P}: ${D?.name} - ${k$(D?.args)}`)}catch{console.log(`   \uD83D\uDCDD Log ${P}: Unable to parse log - ${j.topics?.[0]}`)}});let G=q.logs.find((j)=>{try{return X.interface.parseLog(j)?.name==="EntityRegistered"}catch{return!1}});if(!G)throw new Error("EntityRegistered event not found in transaction logs");let z=X.interface.parseLog(G),M=Number(z?.args[1]);if(s0)console.log(" Numbered entity registered!");if(s0)console.log(`   TX: ${J.hash}`);if(s0)console.log(`   Entity Number: ${M}`);return{txHash:J.hash,entityNumber:M}}catch(X){throw t0("BLOCKCHAIN"," Blockchain registration failed:",X),X}},$40=async($,Q)=>{try{let X=$.map((G)=>{let z=jz(G);return b5(z)});if(console.log(`\uD83C\uDFDB Batch registering ${$.length} entities in ONE transaction...`),Q.address.startsWith("browservm://")){if(!wV)throw new Error("BrowserVM instance not set");return await wV.registerNumberedEntitiesBatch(X)}let{entityProvider:Y}=await SY(Q),Z=await Y.registerNumberedEntitiesBatch(X);console.log(`\uD83D\uDCE4 Batch tx sent: ${Z.hash}`);let J=await Z.wait();if(console.log(` Batch confirmed in block ${J.blockNumber}`),J.status===0)throw new Error(`Batch registration reverted! Hash: ${Z.hash}`);let q=[];return J.logs.forEach((G)=>{try{let z=Y.interface.parseLog(G);if(z?.name==="EntityRegistered")q.push(Number(z.args[1]))}catch{}}),console.log(` Registered ${q.length} entities: ${q[0]}-${q[q.length-1]}`),{txHash:Z.hash,entityNumbers:q}}catch(X){throw t0("BLOCKCHAIN"," Batch registration failed:",X),X}},zw=async($,Q,X)=>{try{let{entityProvider:Y}=await SY(X);if(s0)console.log(`\uD83C\uDFF7  Assigning name "${$}" to entity #${Q}`);let Z=await Y.assignName($,Q);if(s0)console.log(`   \uD83D\uDCE4 Transaction sent: ${Z.hash}`);let J=await Z.wait();if(s0)console.log(`    Transaction confirmed in block ${J.blockNumber}`);if(J.status===0)throw new Error(`Transaction reverted! Hash: ${Z.hash}`);if(s0)console.log(" Name assigned successfully!");if(s0)console.log(`   TX: ${Z.hash}`);return{txHash:Z.hash}}catch(Y){throw t0("BLOCKCHAIN"," Name assignment failed:",Y),Y}},Kw=async($,Q)=>{try{let{entityProvider:X}=await SY(Q);if((await X.entities($)).status===0)return{exists:!1};let Z=Pz($),J,q;if(Z==="numbered"){let G=Hz($);if(G!==null){J=G;try{q=await X.numberToName(J)||void 0}catch{}}}return{exists:!0,...J!==void 0?{entityNumber:J}:{},...q!==void 0?{name:q}:{}}}catch(X){return t0("BLOCKCHAIN"," Failed to get entity info from chain:",X),{exists:!1}}},Uw=async($)=>{try{if(!$)throw new Error("Jurisdiction parameter is required");let Q=$.entityProviderAddress;if(!Q&&"contracts"in $){let q=$.contracts?.entityProvider;if(q)Q=q}if(!$.name||!Q)throw new Error("Jurisdiction object is missing required properties (name, entityProvider address)");let{entityProvider:X}=await SY($);if(s0)console.log(`\uD83D\uDD0D Fetching next entity number from ${Q} (${$.name})`);let Y=await X.nextNumber(),Z=Number(Y);if(s0)console.log(`\uD83D\uDD22 Next entity number: ${Z}`);return Z}catch(Q){throw t0("BLOCKCHAIN"," Failed to get next entity number:",Q),Q}},Ww=async($,Q,X,Y)=>{if(s0)console.log(`\uD83D\uDD04 Transferring name "${$}" from #${Q} to #${X}`);throw new Error("Name transfer not implemented - requires blockchain integration")},lh=async()=>{let $=new Map;try{let Q;if(!U8&&typeof process!=="undefined")console.log("\uD83D\uDD0D JURISDICTION SOURCE: Using centralized jurisdiction-loader"),Q=Qw(),console.log("\uD83D\uDD0D JURISDICTION DEBUG: Loaded config with contracts:",Q.jurisdictions?.ethereum?.contracts),console.log(" Loaded jurisdictions from centralized loader (cached)");else{let Y=await fetch("./jurisdictions.json");if(!Y.ok)throw new Error(`Failed to fetch jurisdictions.json: ${Y.status} ${Y.statusText}`);Q=await Y.json(),console.log("\uD83D\uDD0D JURISDICTION DEBUG: Browser loaded config with contracts:",Q.jurisdictions?.ethereum?.contracts),console.log(" Loaded jurisdictions from runtime")}let X=Q.jurisdictions;for(let[Y,Z]of Object.entries(X)){if(!Z||typeof Z!=="object"){console.warn(`\uD83D\uDEA8 Invalid jurisdiction data for ${Y}:`,Z);continue}let J=Z,q=J.rpc,G=U8&&/OculusBrowser|Quest/i.test(navigator.userAgent),z=U8?localStorage.getItem("xln_rpc_override"):null;if(k8(`\uD83D\uDD0D RPC-TRANSFORM-START: key=${Y}, rpc=${q}`,{isOculusBrowser:G,override:z,userAgent:U8?navigator.userAgent:"N/A"}),G&&!z&&q.startsWith(":")){let M=parseInt(q.slice(1));q=`${window.location.protocol}//${window.location.hostname}:${M}`,k8(`\uD83C\uDFAE OCULUS FIX: Using direct port ${M}  ${q}`)}if(z&&z!=="")if(z.startsWith("/")){let M=Object.keys(Q.jurisdictions).length,j=M===1?z:z.endsWith("/")?z+J.name.toLowerCase():`${z}/${J.name.toLowerCase()}`;q=`${window.location.origin}${j}`,k8(`\uD83D\uDD27 RPC URL (override): ${J.rpc}  ${q} (path proxy, ${M} jurisdictions)`)}else if(z.startsWith(":"))q=`${window.location.protocol}//${window.location.hostname}${z}`,k8(`\uD83D\uDD27 RPC URL (override): ${J.rpc}  ${q} (custom port)`);else q=z,k8(`\uD83D\uDD27 RPC URL (override): ${J.rpc}  ${q} (full URL)`);else if(U8&&q.startsWith("/"))q=`${window.location.origin}${q}`,k8(`\uD83D\uDD27 RPC-TRANSFORM-PROXY: ${J.rpc}  ${q}`,{origin:window.location.origin,proxyPath:J.rpc});else if(U8&&q.startsWith(":")){let M=parseInt(q.slice(1)),j=window.location.hostname.match(/localhost|127\.0\.0\.1/),P=j?M:M+1e4;q=`${window.location.protocol}//${window.location.hostname}:${P}`,k8(`\uD83D\uDD27 RPC-TRANSFORM-DEFAULT: ${J.rpc}  ${q}`,{hostname:window.location.hostname,isLocalhost:!!j,port:M,actualPort:P,portOffset:j?0:1e4})}else if(!U8&&q.startsWith(":"))q=`http://localhost${q}`;k8(`\uD83D\uDCCD FINAL-RPC-URL: ${Y}  ${q}`,{entityProvider:J.contracts.entityProvider,depository:J.contracts.depository}),$.set(Y,{address:q,name:J.name,entityProviderAddress:J.contracts.entityProvider,depositoryAddress:J.contracts.depository,chainId:J.chainId})}}catch(Q){t0("BLOCKCHAIN"," Failed to load jurisdictions:",Q)}return $},Dz=null,Vw=async()=>{if(U8&&Dz!==null)return console.log("\uD83D\uDD0D JURISDICTIONS: Using cached browser data"),Dz;return Dz=await lh(),Dz},y5=async()=>{let $=await Vw();return Array.from($.values())},wV=null,Ow=($,Q)=>{if(console.log("[BrowserVM] Setting jurisdiction override:",{depositoryAddress:$,hasBrowserVM:!!Q}),Q)wV=Q,console.log("[BrowserVM] Stored browserVM instance for runtime access");Dz=new Map,Dz.set("arrakis",{name:"Arrakis",chainId:1337,address:"browservm://",entityProviderAddress:"0x0000000000000000000000000000000000000000",depositoryAddress:$}),console.log(" BrowserVM jurisdiction active - numbered entities will register here")},pU=async($)=>{return(await Vw()).get($)},TV=async($,Q,X,Y)=>{try{console.log(` Submitting settle transaction between ${Q.slice(0,10)}... and ${X.slice(0,10)}...`),console.log("\uD83D\uDD0D DIFFS:",Y.map((M)=>({...M,leftDiff:M.leftDiff.toString(),rightDiff:M.rightDiff.toString(),collateralDiff:M.collateralDiff.toString()})));let{depository:Z,provider:J}=await SY($);if(console.log(`\uD83D\uDD0D CONTRACT ADDRESS: ${Z.target}`),await J.getCode(Z.target)==="0x")throw new Error("Contract not deployed at this address");console.log("\uD83D\uDCE4 Calling settle function...");let G=await Z.settle(Q,X,Y);console.log(`\uD83D\uDCAB Transaction sent: ${G.hash}`);let z=await G.wait();if(console.log(` Settlement confirmed in block ${z.blockNumber}`),z.status===0)throw new Error(`Settlement transaction reverted! Hash: ${G.hash}`);return console.log("\uD83C\uDF89 Settlement successful! Both entities should receive SettlementProcessed events"),{txHash:G.hash,blockNumber:z.blockNumber}}catch(Z){throw t0("BLOCKCHAIN"," Settlement failed:",Z),Z}},Mw=async($,Q,X,Y,Z)=>{try{console.log(`\uD83D\uDCB8 DIRECT R2R: ${Q.slice(0,10)}  ${X.slice(0,10)}, token ${Y}, amount ${Z}`);let{depository:J,provider:q}=await SY($);if(console.log(`\uD83D\uDD0D CONTRACT ADDRESS: ${J.target}`),await q.getCode(J.target)==="0x")throw new Error("Contract not deployed at this address");console.log(`\uD83D\uDCE4 Calling reserveToReserve(${Q}, ${X}, ${Y}, ${Z})...`);let z=await J.reserveToReserve(Q,X,Y,Z);console.log(`\uD83D\uDCAB Transaction sent: ${z.hash}`);let M=await z.wait();if(console.log(` R2R confirmed in block ${M.blockNumber}`),M.status===0)throw new Error(`R2R transaction reverted! Hash: ${z.hash}`);return console.log("\uD83C\uDF89 Direct R2R successful!"),{txHash:z.hash,blockNumber:M.blockNumber}}catch(J){throw t0("BLOCKCHAIN"," Direct R2R failed:",J),J}};var HJ=y(()=>{Mz();Xw();NJ();tX();cU();hh();ch=["function registerNumberedEntity(bytes32 boardHash) external returns (uint256 entityNumber)","function registerNumberedEntitiesBatch(bytes32[] calldata boardHashes) external returns (uint256[] memory entityNumbers)","function assignName(string memory name, uint256 entityNumber) external","function transferName(string memory name, uint256 newEntityNumber) external","function entities(bytes32 entityId) external view returns (tuple(uint256 boardHash, uint8 status, uint256 activationTime))","function nameToNumber(string memory name) external view returns (uint256)","function numberToName(uint256 entityNumber) external view returns (string memory)","function nextNumber() external view returns (uint256)","function getTokenIds(uint256 entityNumber) external pure returns (uint256 controlTokenId, uint256 dividendTokenId)","function getGovernanceInfo(uint256 entityNumber) external view returns (uint256 controlTokenId, uint256 dividendTokenId, uint256 controlSupply, uint256 dividendSupply, bool hasActiveProposal, bytes32 articlesHash)","function balanceOf(address account, uint256 id) external view returns (uint256)","function safeTransferFrom(address from, address to, uint256 id, uint256 amount, bytes data) external","event EntityRegistered(bytes32 indexed entityId, uint256 indexed entityNumber, bytes32 boardHash)","event NameAssigned(string indexed name, uint256 indexed entityNumber)","event NameTransferred(string indexed name, uint256 indexed oldEntityNumber, uint256 indexed newEntityNumber)","event GovernanceEnabled(bytes32 indexed entityId, uint256 controlTokenId, uint256 dividendTokenId)"],ph=["function debugFundReserves(bytes32 entity, uint256 tokenId, uint256 amount) external","function debugBulkFundEntities() external","function reserveToReserve(bytes32 fromEntity, bytes32 toEntity, uint256 tokenId, uint256 amount) external returns (bool)","function processBatch(bytes32 entity, tuple(tuple(bytes32 receivingEntity, uint256 tokenId, uint256 amount)[] reserveToExternalToken, tuple(bytes32 entity, bytes32 packedToken, uint256 internalTokenId, uint256 amount)[] externalTokenToReserve, tuple(bytes32 receivingEntity, uint256 tokenId, uint256 amount)[] reserveToReserve, tuple(uint256 tokenId, bytes32 receivingEntity, tuple(bytes32 entity, uint256 amount)[] pairs)[] reserveToCollateral, tuple(bytes32 leftEntity, bytes32 rightEntity, tuple(uint256 tokenId, int256 leftDiff, int256 rightDiff, int256 collateralDiff, int256 ondeltaDiff)[] diffs)[] settlements, tuple(bytes32 counterentity, tuple(uint256 tokenId, int256 peerReserveDiff, int256 collateralDiff, int256 ondeltaDiff)[] diffs, uint256[] forgiveDebtsInTokenIds, bytes sig)[] cooperativeUpdate, tuple(bytes32 counterentity, tuple(int256[] offdeltas, uint256[] tokenIds, tuple(address subcontractProviderAddress, bytes encodedBatch, tuple(uint256 deltaIndex, uint256 rightAllowence, uint256 leftAllowence)[] allowences)[] subcontracts) proofbody, bytes initialArguments, bytes finalArguments, bytes sig)[] cooperativeDisputeProof, tuple(bytes32 counterentity, uint256 cooperativeNonce, uint256 disputeNonce, bytes32 proofbodyHash, bytes sig, bytes initialArguments)[] initialDisputeProof, tuple(bytes32 counterentity, uint256 initialCooperativeNonce, uint256 initialDisputeNonce, uint256 disputeUntilBlock, bytes32 initialProofbodyHash, bytes initialArguments, bool startedByLeft, uint256 finalCooperativeNonce, uint256 finalDisputeNonce, tuple(int256[] offdeltas, uint256[] tokenIds, tuple(address subcontractProviderAddress, bytes encodedBatch, tuple(uint256 deltaIndex, uint256 rightAllowence, uint256 leftAllowence)[] allowences)[] subcontracts) finalProofbody, bytes finalArguments, bytes sig)[] finalDisputeProof, tuple(uint256 tokenId, uint256 amount)[] flashloans, uint256 hub_id) batch) external returns (bool)","function prefundAccount(bytes32 counterpartyEntity, uint256 tokenId, uint256 amount) external returns (bool)","function settle(bytes32 leftEntity, bytes32 rightEntity, tuple(uint256 tokenId, int256 leftDiff, int256 rightDiff, int256 collateralDiff)[] diffs) external returns (bool)","function _reserves(bytes32 entity, uint256 tokenId) external view returns (uint256)","event ReserveUpdated(bytes32 indexed entity, uint256 indexed tokenId, uint256 newBalance)","event ReserveTransferred(bytes32 indexed from, bytes32 indexed to, uint256 indexed tokenId, uint256 amount)","event SettlementProcessed(bytes32 indexed leftEntity, bytes32 indexed rightEntity, uint256 indexed tokenId, uint256 leftReserve, uint256 rightReserve, uint256 collateral, int256 ondelta)"]});var dP={};r8(dP,{resolveEntityIdentifier:()=>Nw,requestNamedEntity:()=>Hw,isEntityRegistered:()=>Aw,hashBoard:()=>b5,generateNumberedEntityId:()=>tZ,generateNamedEntityId:()=>Dw,generateLazyEntityId:()=>uP,extractNumberFromEntityId:()=>Hz,encodeBoard:()=>jz,detectEntityType:()=>Pz,createNumberedEntity:()=>Nz,createNumberedEntitiesBatch:()=>Pw,createLazyEntity:()=>jw});var jz=($)=>{let Q=$.validators.map((Y)=>({entityId:Y,votingPower:Number($.shares[Y]||1n)})),X={votingThreshold:Number($.threshold),delegates:Q};return k$(X)},b5=($)=>{return O8.keccak256(O8.toUtf8Bytes($))},uP=($,Q)=>{let X;if(typeof $[0]==="string")X=$.map((q)=>({name:q,weight:1}));else X=$;let Z={validators:X.slice().sort((q,G)=>q.name.localeCompare(G.name)),threshold:Q.toString()},J=k$(Z);return b5(J)},tZ=($)=>{return`0x${$.toString(16).padStart(64,"0")}`},Dw=($)=>{return b5($)},Pz=($)=>{if($.startsWith("0x")&&$.length===66)try{let Q=BigInt($);if(Q>0n&&Q<1000000n)return"numbered";return"lazy"}catch{return"lazy"}if(/^[0-9]+$/.test($))try{let Q=BigInt($);if(Q>0n&&Q<1000000n)return"numbered";return"lazy"}catch{return"lazy"}return"lazy"},Hz=($)=>{if(!$||typeof $!=="string")throw new Error(`FINTECH-SAFETY: Invalid entityId type: ${typeof $}`);if($.startsWith("0x")&&$.length===66)try{let Q=BigInt($);if(Q>0n&&Q<1000000n)return Number(Q);let X=$.slice(-8);return parseInt(X,16)%9000000+1e6}catch(Q){throw new Error(`FINTECH-SAFETY: Invalid entityId format: ${$} - ${Q}`)}if(/^[0-9]+$/.test($))try{let Q=BigInt($);if(Q>0n&&Q<1000000n)return Number(Q);return Number(Q%9000000n+1000000n)}catch(Q){throw new Error(`FINTECH-SAFETY: Invalid numeric entityId: ${$} - ${Q}`)}throw new Error(`FINTECH-SAFETY: EntityId must be hex or numeric, got: ${$}`)},jw=($,Q,X,Y)=>{let Z=performance.now(),J=uP(Q,X);if(s0)console.log(`\uD83D\uDD12 Creating lazy entity: ${$}`);if(s0)console.log(`   EntityID: ${J} (quorum hash)`);if(s0)console.log(`   Validators: ${Q.join(", ")}`);if(s0)console.log(`   Threshold: ${X}`);if(s0)console.log("   \uD83C\uDD93 FREE - No gas required");let q={};Q.forEach((M)=>{q[M]=1n});let G={mode:"proposer-based",threshold:X,validators:Q,shares:q,...Y&&{jurisdiction:Y}},z=performance.now()-Z;return console.log(` Lazy entity creation: ${z.toFixed(3)}ms (pure in-memory)`),{config:G,executionTimeMs:z}},Nz=async($,Q,X,Y)=>{if(!Y)throw new Error("Jurisdiction required for numbered entity registration");let Z=b5(jz({mode:"proposer-based",threshold:X,validators:Q,shares:Q.reduce((G,z)=>({...G,[z]:1n}),{}),jurisdiction:Y}));if(s0)console.log(`\uD83D\uDD22 Creating numbered entity: ${$}`);if(s0)console.log(`   Board Hash: ${Z}`);if(s0)console.log(`   Jurisdiction: ${Y.name}`);if(s0)console.log("   \uD83D\uDCB8 Gas required for registration");let{getNextEntityNumber:J,registerNumberedEntityOnChain:q}=await Promise.resolve().then(() => (HJ(),IV));try{await J(Y);let{entityNumber:G}=await q({mode:"proposer-based",threshold:X,validators:Q,shares:Q.reduce((P,D)=>({...P,[D]:1n}),{}),jurisdiction:Y},$),z=tZ(G);if(s0)console.log(`    Registered Entity Number: ${G}`);if(s0)console.log(`   EntityID: ${z}`);let M={};return Q.forEach((P)=>{M[P]=1n}),{config:{mode:"proposer-based",threshold:X,validators:Q,shares:M,jurisdiction:Y},entityNumber:G,entityId:z}}catch(G){throw console.error(" Failed to register numbered entity on blockchain:",G),G}},Pw=async($,Q)=>{if(!Q)throw new Error("Jurisdiction required for numbered entity registration");console.log(`\uD83D\uDD22 Batch creating ${$.length} numbered entities in ONE transaction`);let X=$.map((J)=>({mode:"proposer-based",threshold:J.threshold,validators:J.validators,shares:J.validators.reduce((q,G)=>({...q,[G]:1n}),{}),jurisdiction:Q})),{registerNumberedEntitiesBatchOnChain:Y}=await Promise.resolve().then(() => (HJ(),IV)),{entityNumbers:Z}=await Y(X,Q);return Z.map((J,q)=>{let G=tZ(J),z=X[q];if(!z)throw new Error(`Missing config for entity ${q}`);return console.log(`   Entity ${q+1}/${$.length}: #${J} (${G.slice(0,10)}...)`),{config:z,entityNumber:J,entityId:G}})},Hw=async($,Q,X)=>{if(!X)throw new Error("Jurisdiction required for named entity");if(s0)console.log("\uD83C\uDFF7 Requesting named entity assignment");if(s0)console.log(`   Name: ${$}`);if(s0)console.log(`   Target Entity Number: ${Q}`);if(s0)console.log(`   Jurisdiction: ${X.name}`);if(s0)console.log("   \uD83D\uDC51 Requires admin approval");let Y=`req_${Math.random().toString(16).substring(2,10)}`;if(s0)console.log(`   \uD83D\uDCDD Name assignment request submitted: ${Y}`);if(s0)console.log("    Waiting for admin approval...");return Y},Nw=async($)=>{if($.startsWith("#")){let Q=parseInt($.slice(1));return{entityId:tZ(Q),type:"numbered"}}else if(/^\d+$/.test($)){let Q=parseInt($);return{entityId:tZ(Q),type:"numbered"}}else if($.startsWith("0x"))return{entityId:$,type:Pz($)};else{if(s0)console.log(`\uD83D\uDD0D Looking up named entity: ${$}`);let Q=$==="coinbase"?42:0;if(Q>0)return{entityId:tZ(Q),type:"named"};else throw new Error(`Named entity "${$}" not found`)}},Aw=async($)=>{if(Pz($)==="lazy")return!1;if(!/^[0-9]+$/.test($))return!1;try{let X=BigInt($);return X>0n&&X<1000000n}catch{return!1}};var NJ=y(()=>{Mz();tX()});var eh={};r8(eh,{types:()=>U40,promisify:()=>rh,log:()=>ih,isUndefined:()=>lU,isSymbol:()=>V40,isString:()=>aP,isRegExp:()=>iP,isPrimitive:()=>O40,isObject:()=>uU,isNumber:()=>dh,isNullOrUndefined:()=>W40,isNull:()=>sP,isFunction:()=>oP,isError:()=>nP,isDate:()=>ww,isBuffer:()=>M40,isBoolean:()=>Iw,isArray:()=>uh,inspect:()=>Az,inherits:()=>nh,format:()=>Tw,deprecate:()=>X40,default:()=>P40,debuglog:()=>Y40,callbackifyOnRejected:()=>Sw,callbackify:()=>sh,_extend:()=>Bw,TextEncoder:()=>ah,TextDecoder:()=>th});function Tw($,...Q){if(!aP($)){var X=[$];for(var Y=0;Y<Q.length;Y++)X.push(Az(Q[Y]));return X.join(" ")}var Y=0,Z=Q.length,J=String($).replace(Q40,function(G){if(G==="%%")return"%";if(Y>=Z)return G;switch(G){case"%s":return String(Q[Y++]);case"%d":return Number(Q[Y++]);case"%j":try{return JSON.stringify(Q[Y++])}catch(z){return"[Circular]"}default:return G}});for(var q=Q[Y];Y<Z;q=Q[++Y])if(sP(q)||!uU(q))J+=" "+q;else J+=" "+Az(q);return J}function X40($,Q){if(typeof process==="undefined"||process?.noDeprecation===!0)return $;var X=!1;function Y(...Z){if(!X){if(process.throwDeprecation)throw new Error(Q);else if(process.traceDeprecation)console.trace(Q);else console.error(Q);X=!0}return $.apply(this,...Z)}return Y}function Z40($,Q){var X=Az.styles[Q];if(X)return"\x1B["+Az.colors[X][0]+"m"+$+"\x1B["+Az.colors[X][1]+"m";else return $}function J40($,Q){return $}function q40($){var Q={};return $.forEach(function(X,Y){Q[X]=!0}),Q}function rP($,Q,X){if($.customInspect&&Q&&oP(Q.inspect)&&Q.inspect!==Az&&!(Q.constructor&&Q.constructor.prototype===Q)){var Y=Q.inspect(X,$);if(!aP(Y))Y=rP($,Y,X);return Y}var Z=G40($,Q);if(Z)return Z;var J=Object.keys(Q),q=q40(J);if($.showHidden)J=Object.getOwnPropertyNames(Q);if(nP(Q)&&(J.indexOf("message")>=0||J.indexOf("description")>=0))return Rw(Q);if(J.length===0){if(oP(Q)){var G=Q.name?": "+Q.name:"";return $.stylize("[Function"+G+"]","special")}if(iP(Q))return $.stylize(RegExp.prototype.toString.call(Q),"regexp");if(ww(Q))return $.stylize(Date.prototype.toString.call(Q),"date");if(nP(Q))return Rw(Q)}var z="",M=!1,j=["{","}"];if(uh(Q))M=!0,j=["[","]"];if(oP(Q)){var P=Q.name?": "+Q.name:"";z=" [Function"+P+"]"}if(iP(Q))z=" "+RegExp.prototype.toString.call(Q);if(ww(Q))z=" "+Date.prototype.toUTCString.call(Q);if(nP(Q))z=" "+Rw(Q);if(J.length===0&&(!M||Q.length==0))return j[0]+z+j[1];if(X<0)if(iP(Q))return $.stylize(RegExp.prototype.toString.call(Q),"regexp");else return $.stylize("[Object]","special");$.seen.push(Q);var D;if(M)D=z40($,Q,X,q,J);else D=J.map(function(A){return Lw($,Q,X,q,A,M)});return $.seen.pop(),K40(D,z,j)}function G40($,Q){if(lU(Q))return $.stylize("undefined","undefined");if(aP(Q)){var X="'"+JSON.stringify(Q).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return $.stylize(X,"string")}if(dh(Q))return $.stylize(""+Q,"number");if(Iw(Q))return $.stylize(""+Q,"boolean");if(sP(Q))return $.stylize("null","null")}function Rw($){return"["+Error.prototype.toString.call($)+"]"}function z40($,Q,X,Y,Z){var J=[];for(var q=0,G=Q.length;q<G;++q)if(oh(Q,String(q)))J.push(Lw($,Q,X,Y,String(q),!0));else J.push("");return Z.forEach(function(z){if(!z.match(/^\d+$/))J.push(Lw($,Q,X,Y,z,!0))}),J}function Lw($,Q,X,Y,Z,J){var q,G,z;if(z=Object.getOwnPropertyDescriptor(Q,Z)||{value:Q[Z]},z.get)if(z.set)G=$.stylize("[Getter/Setter]","special");else G=$.stylize("[Getter]","special");else if(z.set)G=$.stylize("[Setter]","special");if(!oh(Y,Z))q="["+Z+"]";if(!G)if($.seen.indexOf(z.value)<0){if(sP(X))G=rP($,z.value,null);else G=rP($,z.value,X-1);if(G.indexOf(`
`)>-1)if(J)G=G.split(`
`).map(function(M){return"  "+M}).join(`
`).slice(2);else G=`
`+G.split(`
`).map(function(M){return"   "+M}).join(`
`)}else G=$.stylize("[Circular]","special");if(lU(q)){if(J&&Z.match(/^\d+$/))return G;if(q=JSON.stringify(""+Z),q.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/))q=q.slice(1,-1),q=$.stylize(q,"name");else q=q.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),q=$.stylize(q,"string")}return q+": "+G}function K40($,Q,X){var Y=0,Z=$.reduce(function(J,q){if(Y++,q.indexOf(`
`)>=0)Y++;return J+q.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(Z>60)return X[0]+(Q===""?"":Q+`
 `)+" "+$.join(`,
  `)+" "+X[1];return X[0]+Q+" "+$.join(", ")+" "+X[1]}function uh($){return Array.isArray($)}function Iw($){return typeof $==="boolean"}function sP($){return $===null}function W40($){return $==null}function dh($){return typeof $==="number"}function aP($){return typeof $==="string"}function V40($){return typeof $==="symbol"}function lU($){return $===void 0}function iP($){return uU($)&&Fw($)==="[object RegExp]"}function uU($){return typeof $==="object"&&$!==null}function ww($){return uU($)&&Fw($)==="[object Date]"}function nP($){return uU($)&&(Fw($)==="[object Error]"||$ instanceof Error)}function oP($){return typeof $==="function"}function O40($){return $===null||typeof $==="boolean"||typeof $==="number"||typeof $==="string"||typeof $==="symbol"||typeof $==="undefined"}function M40($){return $ instanceof Buffer}function Fw($){return Object.prototype.toString.call($)}function Cw($){return $<10?"0"+$.toString(10):$.toString(10)}function j40(){var $=new Date,Q=[Cw($.getHours()),Cw($.getMinutes()),Cw($.getSeconds())].join(":");return[$.getDate(),D40[$.getMonth()],Q].join(" ")}function ih(...$){console.log("%s - %s",j40(),Tw.apply(null,$))}function nh($,Q){if(Q)$.super_=Q,$.prototype=Object.create(Q.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}})}function Bw($,Q){if(!Q||!uU(Q))return $;var X=Object.keys(Q),Y=X.length;while(Y--)$[X[Y]]=Q[X[Y]];return $}function oh($,Q){return Object.prototype.hasOwnProperty.call($,Q)}function Sw($,Q){if(!$){var X=new Error("Promise was rejected with a falsy value");X.reason=$,$=X}return Q($)}function sh($){if(typeof $!=="function")throw new TypeError('The "original" argument must be of type Function');function Q(...X){var Y=X.pop();if(typeof Y!=="function")throw new TypeError("The last argument must be of type Function");var Z=this,J=function(...q){return Y.apply(Z,...q)};$.apply(this,X).then(function(q){process.nextTick(J.bind(null,null,q))},function(q){process.nextTick(Sw.bind(null,q,J))})}return Object.setPrototypeOf(Q,Object.getPrototypeOf($)),Object.defineProperties(Q,Object.getOwnPropertyDescriptors($)),Q}var Q40,Y40,Az,U40=()=>{},D40,rh,ah,th,P40;var $m=y(()=>{Q40=/%[sdj%]/g;Y40=(($={},Q={},X)=>((X=typeof process!=="undefined"&&!1)&&(X=X.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase()),Q=new RegExp("^"+X+"$","i"),(Y)=>{if(Y=Y.toUpperCase(),!$[Y])if(Q.test(Y))$[Y]=function(...Z){console.error("%s: %s",Y,pid,Tw.apply(null,...Z))};else $[Y]=function(){};return $[Y]}))(),Az=(($)=>($.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},$.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},$.custom=Symbol.for("nodejs.util.inspect.custom"),$))(function $(Q,X,...Y){var Z={seen:[],stylize:J40};if(Y.length>=1)Z.depth=Y[0];if(Y.length>=2)Z.colors=Y[1];if(Iw(X))Z.showHidden=X;else if(X)Bw(Z,X);if(lU(Z.showHidden))Z.showHidden=!1;if(lU(Z.depth))Z.depth=2;if(lU(Z.colors))Z.colors=!1;if(Z.colors)Z.stylize=Z40;return rP(Z,Q,Z.depth)});D40=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];rh=(($)=>($.custom=Symbol.for("nodejs.util.promisify.custom"),$))(function $(Q){if(typeof Q!=="function")throw new TypeError('The "original" argument must be of type Function');if(kCustomPromisifiedSymbol&&Q[kCustomPromisifiedSymbol]){var X=Q[kCustomPromisifiedSymbol];if(typeof X!=="function")throw new TypeError('The "nodejs.util.promisify.custom" argument must be of type Function');return Object.defineProperty(X,kCustomPromisifiedSymbol,{value:X,enumerable:!1,writable:!1,configurable:!0}),X}function X(...Y){var Z,J,q=new Promise(function(G,z){Z=G,J=z});Y.push(function(G,z){if(G)J(G);else Z(z)});try{Q.apply(this,Y)}catch(G){J(G)}return q}if(Object.setPrototypeOf(X,Object.getPrototypeOf(Q)),kCustomPromisifiedSymbol)Object.defineProperty(X,kCustomPromisifiedSymbol,{value:X,enumerable:!1,writable:!1,configurable:!0});return Object.defineProperties(X,Object.getOwnPropertyDescriptors(Q))});({TextEncoder:ah,TextDecoder:th}=globalThis),P40={TextEncoder:ah,TextDecoder:th,promisify:rh,log:ih,inherits:nh,_extend:Bw,callbackifyOnRejected:Sw,callbackify:sh}});var xw=d$((Zk0,zm)=>{var Z8=($,Q)=>()=>(Q||$((Q={exports:{}}).exports,Q),Q.exports),x8=Z8(($,Q)=>{class X extends Error{constructor(Y){if(!Array.isArray(Y))throw new TypeError(`Expected input to be an Array, got ${typeof Y}`);let Z="";for(let J=0;J<Y.length;J++)Z+=`    ${Y[J].stack}
`;super(Z);this.name="AggregateError",this.errors=Y}}Q.exports={AggregateError:X,ArrayIsArray(Y){return Array.isArray(Y)},ArrayPrototypeIncludes(Y,Z){return Y.includes(Z)},ArrayPrototypeIndexOf(Y,Z){return Y.indexOf(Z)},ArrayPrototypeJoin(Y,Z){return Y.join(Z)},ArrayPrototypeMap(Y,Z){return Y.map(Z)},ArrayPrototypePop(Y,Z){return Y.pop(Z)},ArrayPrototypePush(Y,Z){return Y.push(Z)},ArrayPrototypeSlice(Y,Z,J){return Y.slice(Z,J)},Error,FunctionPrototypeCall(Y,Z,...J){return Y.call(Z,...J)},FunctionPrototypeSymbolHasInstance(Y,Z){return Function.prototype[Symbol.hasInstance].call(Y,Z)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(Y,Z){return Object.defineProperties(Y,Z)},ObjectDefineProperty(Y,Z,J){return Object.defineProperty(Y,Z,J)},ObjectGetOwnPropertyDescriptor(Y,Z){return Object.getOwnPropertyDescriptor(Y,Z)},ObjectKeys(Y){return Object.keys(Y)},ObjectSetPrototypeOf(Y,Z){return Object.setPrototypeOf(Y,Z)},Promise,PromisePrototypeCatch(Y,Z){return Y.catch(Z)},PromisePrototypeThen(Y,Z,J){return Y.then(Z,J)},PromiseReject(Y){return Promise.reject(Y)},PromiseResolve(Y){return Promise.resolve(Y)},ReflectApply:Reflect.apply,RegExpPrototypeTest(Y,Z){return Y.test(Z)},SafeSet:Set,String,StringPrototypeSlice(Y,Z,J){return Y.slice(Z,J)},StringPrototypeToLowerCase(Y){return Y.toLowerCase()},StringPrototypeToUpperCase(Y){return Y.toUpperCase()},StringPrototypeTrim(Y){return Y.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(Y,Z,J){return Y.set(Z,J)},Boolean,Uint8Array}}),Qm=Z8(($,Q)=>{Q.exports={format(X,...Y){return X.replace(/%([sdifj])/g,function(...[Z,J]){let q=Y.shift();if(J==="f")return q.toFixed(6);else if(J==="j")return JSON.stringify(q);else if(J==="s"&&typeof q==="object")return`${q.constructor!==Object?q.constructor.name:""} {}`.trim();else return q.toString()})},inspect(X){switch(typeof X){case"string":if(X.includes("'")){if(!X.includes('"'))return`"${X}"`;else if(!X.includes("`")&&!X.includes("${"))return`\`${X}\``}return`'${X}'`;case"number":if(isNaN(X))return"NaN";else if(Object.is(X,-0))return String(X);return X;case"bigint":return`${String(X)}n`;case"boolean":case"undefined":return String(X);case"object":return"{}"}}}}),eX=Z8(($,Q)=>{var{format:X,inspect:Y}=Qm(),{AggregateError:Z}=x8(),J=globalThis.AggregateError||Z,q=Symbol("kIsNodeError"),G=["string","function","number","object","Function","Object","boolean","bigint","symbol"],z=/^([A-Z][a-z0-9]*)+$/,M={};function j(B,S){if(!B)throw new M.ERR_INTERNAL_ASSERTION(S)}function P(B){let S="",_=B.length,k=B[0]==="-"?1:0;for(;_>=k+4;_-=3)S=`_${B.slice(_-3,_)}${S}`;return`${B.slice(0,_)}${S}`}function D(B,S,_){if(typeof S==="function")return j(S.length<=_.length,`Code: ${B}; The provided arguments length (${_.length}) does not match the required ones (${S.length}).`),S(..._);let k=(S.match(/%[dfijoOs]/g)||[]).length;if(j(k===_.length,`Code: ${B}; The provided arguments length (${_.length}) does not match the required ones (${k}).`),_.length===0)return S;return X(S,..._)}function A(B,S,_){if(!_)_=Error;class k extends _{constructor(...f){super(D(B,S,f))}toString(){return`${this.name} [${B}]: ${this.message}`}}Object.defineProperties(k.prototype,{name:{value:_.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${B}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),k.prototype.code=B,k.prototype[q]=!0,M[B]=k}function I(B){let S="__node_internal_"+B.name;return Object.defineProperty(B,"name",{value:S}),B}function H(B,S){if(B&&S&&B!==S){if(Array.isArray(S.errors))return S.errors.push(B),S;let _=new J([S,B],S.message);return _.code=S.code,_}return B||S}class C extends Error{constructor(B="The operation was aborted",S=void 0){if(S!==void 0&&typeof S!=="object")throw new M.ERR_INVALID_ARG_TYPE("options","Object",S);super(B,S);this.code="ABORT_ERR",this.name="AbortError"}}A("ERR_ASSERTION","%s",Error),A("ERR_INVALID_ARG_TYPE",(B,S,_)=>{if(j(typeof B==="string","'name' must be a string"),!Array.isArray(S))S=[S];let k="The ";if(B.endsWith(" argument"))k+=`${B} `;else k+=`"${B}" ${B.includes(".")?"property":"argument"} `;k+="must be ";let f=[],g=[],b=[];for(let l of S)if(j(typeof l==="string","All expected entries have to be of type string"),G.includes(l))f.push(l.toLowerCase());else if(z.test(l))g.push(l);else j(l!=="object",'The value "object" should be written as "Object"'),b.push(l);if(g.length>0){let l=f.indexOf("object");if(l!==-1)f.splice(f,l,1),g.push("Object")}if(f.length>0){switch(f.length){case 1:k+=`of type ${f[0]}`;break;case 2:k+=`one of type ${f[0]} or ${f[1]}`;break;default:{let l=f.pop();k+=`one of type ${f.join(", ")}, or ${l}`}}if(g.length>0||b.length>0)k+=" or "}if(g.length>0){switch(g.length){case 1:k+=`an instance of ${g[0]}`;break;case 2:k+=`an instance of ${g[0]} or ${g[1]}`;break;default:{let l=g.pop();k+=`an instance of ${g.join(", ")}, or ${l}`}}if(b.length>0)k+=" or "}switch(b.length){case 0:break;case 1:if(b[0].toLowerCase()!==b[0])k+="an ";k+=`${b[0]}`;break;case 2:k+=`one of ${b[0]} or ${b[1]}`;break;default:{let l=b.pop();k+=`one of ${b.join(", ")}, or ${l}`}}if(_==null)k+=`. Received ${_}`;else if(typeof _==="function"&&_.name)k+=`. Received function ${_.name}`;else if(typeof _==="object"){var m;if((m=_.constructor)!==null&&m!==void 0&&m.name)k+=`. Received an instance of ${_.constructor.name}`;else{let l=Y(_,{depth:-1});k+=`. Received ${l}`}}else{let l=Y(_,{colors:!1});if(l.length>25)l=`${l.slice(0,25)}...`;k+=`. Received type ${typeof _} (${l})`}return k},TypeError),A("ERR_INVALID_ARG_VALUE",(B,S,_="is invalid")=>{let k=Y(S);if(k.length>128)k=k.slice(0,128)+"...";return`The ${B.includes(".")?"property":"argument"} '${B}' ${_}. Received ${k}`},TypeError),A("ERR_INVALID_RETURN_VALUE",(B,S,_)=>{var k;let f=_!==null&&_!==void 0&&(k=_.constructor)!==null&&k!==void 0&&k.name?`instance of ${_.constructor.name}`:`type ${typeof _}`;return`Expected ${B} to be returned from the "${S}" function but got ${f}.`},TypeError),A("ERR_MISSING_ARGS",(...B)=>{j(B.length>0,"At least one arg needs to be specified");let S,_=B.length;switch(B=(Array.isArray(B)?B:[B]).map((k)=>`"${k}"`).join(" or "),_){case 1:S+=`The ${B[0]} argument`;break;case 2:S+=`The ${B[0]} and ${B[1]} arguments`;break;default:{let k=B.pop();S+=`The ${B.join(", ")}, and ${k} arguments`}break}return`${S} must be specified`},TypeError),A("ERR_OUT_OF_RANGE",(B,S,_)=>{j(S,'Missing "range" argument');let k;if(Number.isInteger(_)&&Math.abs(_)>4294967296)k=P(String(_));else if(typeof _==="bigint"){k=String(_);let f=BigInt(2)**BigInt(32);if(_>f||_<-f)k=P(k);k+="n"}else k=Y(_);return`The value of "${B}" is out of range. It must be ${S}. Received ${k}`},RangeError),A("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),A("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),A("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),A("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),A("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),A("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),A("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),A("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),A("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),A("ERR_STREAM_WRITE_AFTER_END","write after end",Error),A("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Q.exports={AbortError:C,aggregateTwoErrors:I(H),hideStackFrames:I,codes:M}}),H40=Z8(($,Q)=>{Object.defineProperty($,"__esModule",{value:!0});var X=new WeakMap,Y=new WeakMap;function Z(h){let c=X.get(h);return console.assert(c!=null,"'this' is expected an Event object, but got",h),c}function J(h){if(h.passiveListener!=null){if(typeof console!=="undefined"&&typeof console.error==="function")console.error("Unable to preventDefault inside passive event listener invocation.",h.passiveListener);return}if(!h.event.cancelable)return;if(h.canceled=!0,typeof h.event.preventDefault==="function")h.event.preventDefault()}function q(h,c){X.set(this,{eventTarget:h,event:c,eventPhase:2,currentTarget:h,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:c.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let T=Object.keys(c);for(let K=0;K<T.length;++K){let U=T[K];if(!(U in this))Object.defineProperty(this,U,G(U))}}if(q.prototype={get type(){return Z(this).event.type},get target(){return Z(this).eventTarget},get currentTarget(){return Z(this).currentTarget},composedPath(){let h=Z(this).currentTarget;if(h==null)return[];return[h]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return Z(this).eventPhase},stopPropagation(){let h=Z(this);if(h.stopped=!0,typeof h.event.stopPropagation==="function")h.event.stopPropagation()},stopImmediatePropagation(){let h=Z(this);if(h.stopped=!0,h.immediateStopped=!0,typeof h.event.stopImmediatePropagation==="function")h.event.stopImmediatePropagation()},get bubbles(){return Boolean(Z(this).event.bubbles)},get cancelable(){return Boolean(Z(this).event.cancelable)},preventDefault(){J(Z(this))},get defaultPrevented(){return Z(this).canceled},get composed(){return Boolean(Z(this).event.composed)},get timeStamp(){return Z(this).timeStamp},get srcElement(){return Z(this).eventTarget},get cancelBubble(){return Z(this).stopped},set cancelBubble(h){if(!h)return;let c=Z(this);if(c.stopped=!0,typeof c.event.cancelBubble==="boolean")c.event.cancelBubble=!0},get returnValue(){return!Z(this).canceled},set returnValue(h){if(!h)J(Z(this))},initEvent(){}},Object.defineProperty(q.prototype,"constructor",{value:q,configurable:!0,writable:!0}),typeof window!=="undefined"&&typeof window.Event!=="undefined")Object.setPrototypeOf(q.prototype,window.Event.prototype),Y.set(window.Event.prototype,q);function G(h){return{get(){return Z(this).event[h]},set(c){Z(this).event[h]=c},configurable:!0,enumerable:!0}}function z(h){return{value(){let c=Z(this).event;return c[h].apply(c,arguments)},configurable:!0,enumerable:!0}}function M(h,c){let T=Object.keys(c);if(T.length===0)return h;function K(U,W){h.call(this,U,W)}K.prototype=Object.create(h.prototype,{constructor:{value:K,configurable:!0,writable:!0}});for(let U=0;U<T.length;++U){let W=T[U];if(!(W in h.prototype)){let V=typeof Object.getOwnPropertyDescriptor(c,W).value==="function";Object.defineProperty(K.prototype,W,V?z(W):G(W))}}return K}function j(h){if(h==null||h===Object.prototype)return q;let c=Y.get(h);if(c==null)c=M(j(Object.getPrototypeOf(h)),h),Y.set(h,c);return c}function P(h,c){return new(j(Object.getPrototypeOf(c)))(h,c)}function D(h){return Z(h).immediateStopped}function A(h,c){Z(h).eventPhase=c}function I(h,c){Z(h).currentTarget=c}function H(h,c){Z(h).passiveListener=c}var C=new WeakMap,B=1,S=2,_=3;function k(h){return h!==null&&typeof h==="object"}function f(h){let c=C.get(h);if(c==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return c}function g(h){return{get(){let c=f(this).get(h);while(c!=null){if(c.listenerType===_)return c.listener;c=c.next}return null},set(c){if(typeof c!=="function"&&!k(c))c=null;let T=f(this),K=null,U=T.get(h);while(U!=null){if(U.listenerType===_)if(K!==null)K.next=U.next;else if(U.next!==null)T.set(h,U.next);else T.delete(h);else K=U;U=U.next}if(c!==null){let W={listener:c,listenerType:_,passive:!1,once:!1,next:null};if(K===null)T.set(h,W);else K.next=W}},configurable:!0,enumerable:!0}}function b(h,c){Object.defineProperty(h,`on${c}`,g(c))}function m(h){function c(){l.call(this)}c.prototype=Object.create(l.prototype,{constructor:{value:c,configurable:!0,writable:!0}});for(let T=0;T<h.length;++T)b(c.prototype,h[T]);return c}function l(){if(this instanceof l){C.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return m(arguments[0]);if(arguments.length>0){let h=new Array(arguments.length);for(let c=0;c<arguments.length;++c)h[c]=arguments[c];return m(h)}throw new TypeError("Cannot call a class as a function")}if(l.prototype={addEventListener(h,c,T){if(c==null)return;if(typeof c!=="function"&&!k(c))throw new TypeError("'listener' should be a function or an object.");let K=f(this),U=k(T),W=(U?Boolean(T.capture):Boolean(T))?B:S,V={listener:c,listenerType:W,passive:U&&Boolean(T.passive),once:U&&Boolean(T.once),next:null},N=K.get(h);if(N===void 0){K.set(h,V);return}let L=null;while(N!=null){if(N.listener===c&&N.listenerType===W)return;L=N,N=N.next}L.next=V},removeEventListener(h,c,T){if(c==null)return;let K=f(this),U=(k(T)?Boolean(T.capture):Boolean(T))?B:S,W=null,V=K.get(h);while(V!=null){if(V.listener===c&&V.listenerType===U){if(W!==null)W.next=V.next;else if(V.next!==null)K.set(h,V.next);else K.delete(h);return}W=V,V=V.next}},dispatchEvent(h){if(h==null||typeof h.type!=="string")throw new TypeError('"event.type" should be a string.');let c=f(this),T=h.type,K=c.get(T);if(K==null)return!0;let U=P(this,h),W=null;while(K!=null){if(K.once)if(W!==null)W.next=K.next;else if(K.next!==null)c.set(T,K.next);else c.delete(T);else W=K;if(H(U,K.passive?K.listener:null),typeof K.listener==="function")try{K.listener.call(this,U)}catch(V){if(typeof console!=="undefined"&&typeof console.error==="function")console.error(V)}else if(K.listenerType!==_&&typeof K.listener.handleEvent==="function")K.listener.handleEvent(U);if(D(U))break;K=K.next}return H(U,null),A(U,0),I(U,null),!U.defaultPrevented}},Object.defineProperty(l.prototype,"constructor",{value:l,configurable:!0,writable:!0}),typeof window!=="undefined"&&typeof window.EventTarget!=="undefined")Object.setPrototypeOf(l.prototype,window.EventTarget.prototype);$.defineEventAttribute=b,$.EventTarget=l,$.default=l,Q.exports=l,Q.exports.EventTarget=Q.exports.default=l,Q.exports.defineEventAttribute=b}),FV=Z8(($,Q)=>{Object.defineProperty($,"__esModule",{value:!0});var X=H40();class Y extends X.EventTarget{constructor(){super();throw new TypeError("AbortSignal cannot be constructed directly")}get aborted(){let j=q.get(this);if(typeof j!=="boolean")throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return j}}X.defineEventAttribute(Y.prototype,"abort");function Z(){let j=Object.create(Y.prototype);return X.EventTarget.call(j),q.set(j,!1),j}function J(j){if(q.get(j)!==!1)return;q.set(j,!0),j.dispatchEvent({type:"abort"})}var q=new WeakMap;if(Object.defineProperties(Y.prototype,{aborted:{enumerable:!0}}),typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol")Object.defineProperty(Y.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});class G{constructor(){z.set(this,Z())}get signal(){return M(this)}abort(){J(M(this))}}var z=new WeakMap;function M(j){let P=z.get(j);if(P==null)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${j===null?"null":typeof j}`);return P}if(Object.defineProperties(G.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol")Object.defineProperty(G.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});$.AbortController=G,$.AbortSignal=Y,$.default=G,Q.exports=G,Q.exports.AbortController=Q.exports.default=G,Q.exports.AbortSignal=Y}),EY=Z8(($,Q)=>{var X=(h8(),I$(b8)),{format:Y,inspect:Z}=Qm(),{codes:{ERR_INVALID_ARG_TYPE:J}}=eX(),{kResistStopPropagation:q,AggregateError:G,SymbolDispose:z}=x8(),M=globalThis.AbortSignal||FV().AbortSignal,j=globalThis.AbortController||FV().AbortController,P=Object.getPrototypeOf(async function(){}).constructor,D=globalThis.Blob||X.Blob,A=typeof D!=="undefined"?function C(B){return B instanceof D}:function C(B){return!1},I=(C,B)=>{if(C!==void 0&&(C===null||typeof C!=="object"||!("aborted"in C)))throw new J(B,"AbortSignal",C)},H=(C,B)=>{if(typeof C!=="function")throw new J(B,"Function",C)};Q.exports={AggregateError:G,kEmptyObject:Object.freeze({}),once(C){let B=!1;return function(...S){if(B)return;B=!0,C.apply(this,S)}},createDeferredPromise:function(){let C,B;return{promise:new Promise((S,_)=>{C=S,B=_}),resolve:C,reject:B}},promisify(C){return new Promise((B,S)=>{C((_,...k)=>{if(_)return S(_);return B(...k)})})},debuglog(){return function(){}},format:Y,inspect:Z,types:{isAsyncFunction(C){return C instanceof P},isArrayBufferView(C){return ArrayBuffer.isView(C)}},isBlob:A,deprecate(C,B){return C},addAbortListener:(EK(),I$(SK)).addAbortListener||function C(B,S){if(B===void 0)throw new J("signal","AbortSignal",B);I(B,"signal"),H(S,"listener");let _;if(B.aborted)queueMicrotask(()=>S());else B.addEventListener("abort",S,{__proto__:null,once:!0,[q]:!0}),_=()=>{B.removeEventListener("abort",S)};return{__proto__:null,[z](){var k;(k=_)===null||k===void 0||k()}}},AbortSignalAny:M.any||function C(B){if(B.length===1)return B[0];let S=new j,_=()=>S.abort();return B.forEach((k)=>{I(k,"signals"),k.addEventListener("abort",_,{once:!0})}),S.signal.addEventListener("abort",()=>{B.forEach((k)=>k.removeEventListener("abort",_))},{once:!0}),S.signal}},Q.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),BV=Z8(($,Q)=>{var{ArrayIsArray:X,ArrayPrototypeIncludes:Y,ArrayPrototypeJoin:Z,ArrayPrototypeMap:J,NumberIsInteger:q,NumberIsNaN:G,NumberMAX_SAFE_INTEGER:z,NumberMIN_SAFE_INTEGER:M,NumberParseInt:j,ObjectPrototypeHasOwnProperty:P,RegExpPrototypeExec:D,String:A,StringPrototypeToUpperCase:I,StringPrototypeTrim:H}=x8(),{hideStackFrames:C,codes:{ERR_SOCKET_BAD_PORT:B,ERR_INVALID_ARG_TYPE:S,ERR_INVALID_ARG_VALUE:_,ERR_OUT_OF_RANGE:k,ERR_UNKNOWN_SIGNAL:f}}=eX(),{normalizeEncoding:g}=EY(),{isAsyncFunction:b,isArrayBufferView:m}=EY().types,l={};function h(J0){return J0===(J0|0)}function c(J0){return J0===J0>>>0}var T=/^[0-7]+$/,K="must be a 32-bit unsigned integer or an octal string";function U(J0,Y0,W0){if(typeof J0==="undefined")J0=W0;if(typeof J0==="string"){if(D(T,J0)===null)throw new _(Y0,J0,K);J0=j(J0,8)}return N(J0,Y0),J0}var W=C((J0,Y0,W0=M,T0=z)=>{if(typeof J0!=="number")throw new S(Y0,"number",J0);if(!q(J0))throw new k(Y0,"an integer",J0);if(J0<W0||J0>T0)throw new k(Y0,`>= ${W0} && <= ${T0}`,J0)}),V=C((J0,Y0,W0=-2147483648,T0=2147483647)=>{if(typeof J0!=="number")throw new S(Y0,"number",J0);if(!q(J0))throw new k(Y0,"an integer",J0);if(J0<W0||J0>T0)throw new k(Y0,`>= ${W0} && <= ${T0}`,J0)}),N=C((J0,Y0,W0=!1)=>{if(typeof J0!=="number")throw new S(Y0,"number",J0);if(!q(J0))throw new k(Y0,"an integer",J0);let T0=W0?1:0,M0=4294967295;if(J0<T0||J0>M0)throw new k(Y0,`>= ${T0} && <= ${M0}`,J0)});function L(J0,Y0){if(typeof J0!=="string")throw new S(Y0,"string",J0)}function F(J0,Y0,W0=void 0,T0){if(typeof J0!=="number")throw new S(Y0,"number",J0);if(W0!=null&&J0<W0||T0!=null&&J0>T0||(W0!=null||T0!=null)&&G(J0))throw new k(Y0,`${W0!=null?`>= ${W0}`:""}${W0!=null&&T0!=null?" && ":""}${T0!=null?`<= ${T0}`:""}`,J0)}var R=C((J0,Y0,W0)=>{if(!Y(W0,J0)){let T0="must be one of: "+Z(J(W0,(M0)=>typeof M0==="string"?`'${M0}'`:A(M0)),", ");throw new _(Y0,J0,T0)}});function O(J0,Y0){if(typeof J0!=="boolean")throw new S(Y0,"boolean",J0)}function w(J0,Y0,W0){return J0==null||!P(J0,Y0)?W0:J0[Y0]}var x=C((J0,Y0,W0=null)=>{let T0=w(W0,"allowArray",!1),M0=w(W0,"allowFunction",!1);if(!w(W0,"nullable",!1)&&J0===null||!T0&&X(J0)||typeof J0!=="object"&&(!M0||typeof J0!=="function"))throw new S(Y0,"Object",J0)}),E=C((J0,Y0)=>{if(J0!=null&&typeof J0!=="object"&&typeof J0!=="function")throw new S(Y0,"a dictionary",J0)}),v=C((J0,Y0,W0=0)=>{if(!X(J0))throw new S(Y0,"Array",J0);if(J0.length<W0){let T0=`must be longer than ${W0}`;throw new _(Y0,J0,T0)}});function p(J0,Y0){v(J0,Y0);for(let W0=0;W0<J0.length;W0++)L(J0[W0],`${Y0}[${W0}]`)}function i(J0,Y0){v(J0,Y0);for(let W0=0;W0<J0.length;W0++)O(J0[W0],`${Y0}[${W0}]`)}function s(J0,Y0){v(J0,Y0);for(let W0=0;W0<J0.length;W0++){let T0=J0[W0],M0=`${Y0}[${W0}]`;if(T0==null)throw new S(M0,"AbortSignal",T0);e(T0,M0)}}function X0(J0,Y0="signal"){if(L(J0,Y0),l[J0]===void 0){if(l[I(J0)]!==void 0)throw new f(J0+" (signals must use all capital letters)");throw new f(J0)}}var n=C((J0,Y0="buffer")=>{if(!m(J0))throw new S(Y0,["Buffer","TypedArray","DataView"],J0)});function r(J0,Y0){let W0=g(Y0),T0=J0.length;if(W0==="hex"&&T0%2!==0)throw new _("encoding",Y0,`is invalid for data of length ${T0}`)}function Z0(J0,Y0="Port",W0=!0){if(typeof J0!=="number"&&typeof J0!=="string"||typeof J0==="string"&&H(J0).length===0||+J0!==+J0>>>0||J0>65535||J0===0&&!W0)throw new B(Y0,J0,W0);return J0|0}var e=C((J0,Y0)=>{if(J0!==void 0&&(J0===null||typeof J0!=="object"||!("aborted"in J0)))throw new S(Y0,"AbortSignal",J0)}),Q0=C((J0,Y0)=>{if(typeof J0!=="function")throw new S(Y0,"Function",J0)}),t=C((J0,Y0)=>{if(typeof J0!=="function"||b(J0))throw new S(Y0,"Function",J0)}),a=C((J0,Y0)=>{if(J0!==void 0)throw new S(Y0,"undefined",J0)});function $0(J0,Y0,W0){if(!Y(W0,J0))throw new S(Y0,`('${Z(W0,"|")}')`,J0)}var d0=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function K0(J0,Y0){if(typeof J0==="undefined"||!D(d0,J0))throw new _(Y0,J0,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function z0(J0){if(typeof J0==="string")return K0(J0,"hints"),J0;else if(X(J0)){let Y0=J0.length,W0="";if(Y0===0)return W0;for(let T0=0;T0<Y0;T0++){let M0=J0[T0];if(K0(M0,"hints"),W0+=M0,T0!==Y0-1)W0+=", "}return W0}throw new _("hints",J0,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Q.exports={isInt32:h,isUint32:c,parseFileMode:U,validateArray:v,validateStringArray:p,validateBooleanArray:i,validateAbortSignalArray:s,validateBoolean:O,validateBuffer:n,validateDictionary:E,validateEncoding:r,validateFunction:Q0,validateInt32:V,validateInteger:W,validateNumber:F,validateObject:x,validateOneOf:R,validatePlainFunction:t,validatePort:Z0,validateSignalName:X0,validateString:L,validateUint32:N,validateUndefined:a,validateUnion:$0,validateAbortSignal:e,validateLinkHeaderValue:z0}}),Rz=Z8(($,Q)=>{Q.exports=globalThis.process}),m5=Z8(($,Q)=>{var{SymbolAsyncIterator:X,SymbolIterator:Y,SymbolFor:Z}=x8(),J=Z("nodejs.stream.destroyed"),q=Z("nodejs.stream.errored"),G=Z("nodejs.stream.readable"),z=Z("nodejs.stream.writable"),M=Z("nodejs.stream.disturbed"),j=Z("nodejs.webstream.isClosedPromise"),P=Z("nodejs.webstream.controllerErrorFunction");function D(w,x=!1){var E;return!!(w&&typeof w.pipe==="function"&&typeof w.on==="function"&&(!x||typeof w.pause==="function"&&typeof w.resume==="function")&&(!w._writableState||((E=w._readableState)===null||E===void 0?void 0:E.readable)!==!1)&&(!w._writableState||w._readableState))}function A(w){var x;return!!(w&&typeof w.write==="function"&&typeof w.on==="function"&&(!w._readableState||((x=w._writableState)===null||x===void 0?void 0:x.writable)!==!1))}function I(w){return!!(w&&typeof w.pipe==="function"&&w._readableState&&typeof w.on==="function"&&typeof w.write==="function")}function H(w){return w&&(w._readableState||w._writableState||typeof w.write==="function"&&typeof w.on==="function"||typeof w.pipe==="function"&&typeof w.on==="function")}function C(w){return!!(w&&!H(w)&&typeof w.pipeThrough==="function"&&typeof w.getReader==="function"&&typeof w.cancel==="function")}function B(w){return!!(w&&!H(w)&&typeof w.getWriter==="function"&&typeof w.abort==="function")}function S(w){return!!(w&&!H(w)&&typeof w.readable==="object"&&typeof w.writable==="object")}function _(w){return C(w)||B(w)||S(w)}function k(w,x){if(w==null)return!1;if(x===!0)return typeof w[X]==="function";if(x===!1)return typeof w[Y]==="function";return typeof w[X]==="function"||typeof w[Y]==="function"}function f(w){if(!H(w))return null;let{_writableState:x,_readableState:E}=w,v=x||E;return!!(w.destroyed||w[J]||v!==null&&v!==void 0&&v.destroyed)}function g(w){if(!A(w))return null;if(w.writableEnded===!0)return!0;let x=w._writableState;if(x!==null&&x!==void 0&&x.errored)return!1;if(typeof(x===null||x===void 0?void 0:x.ended)!=="boolean")return null;return x.ended}function b(w,x){if(!A(w))return null;if(w.writableFinished===!0)return!0;let E=w._writableState;if(E!==null&&E!==void 0&&E.errored)return!1;if(typeof(E===null||E===void 0?void 0:E.finished)!=="boolean")return null;return!!(E.finished||x===!1&&E.ended===!0&&E.length===0)}function m(w){if(!D(w))return null;if(w.readableEnded===!0)return!0;let x=w._readableState;if(!x||x.errored)return!1;if(typeof(x===null||x===void 0?void 0:x.ended)!=="boolean")return null;return x.ended}function l(w,x){if(!D(w))return null;let E=w._readableState;if(E!==null&&E!==void 0&&E.errored)return!1;if(typeof(E===null||E===void 0?void 0:E.endEmitted)!=="boolean")return null;return!!(E.endEmitted||x===!1&&E.ended===!0&&E.length===0)}function h(w){if(w&&w[G]!=null)return w[G];if(typeof(w===null||w===void 0?void 0:w.readable)!=="boolean")return null;if(f(w))return!1;return D(w)&&w.readable&&!l(w)}function c(w){if(w&&w[z]!=null)return w[z];if(typeof(w===null||w===void 0?void 0:w.writable)!=="boolean")return null;if(f(w))return!1;return A(w)&&w.writable&&!g(w)}function T(w,x){if(!H(w))return null;if(f(w))return!0;if((x===null||x===void 0?void 0:x.readable)!==!1&&h(w))return!1;if((x===null||x===void 0?void 0:x.writable)!==!1&&c(w))return!1;return!0}function K(w){var x,E;if(!H(w))return null;if(w.writableErrored)return w.writableErrored;return(x=(E=w._writableState)===null||E===void 0?void 0:E.errored)!==null&&x!==void 0?x:null}function U(w){var x,E;if(!H(w))return null;if(w.readableErrored)return w.readableErrored;return(x=(E=w._readableState)===null||E===void 0?void 0:E.errored)!==null&&x!==void 0?x:null}function W(w){if(!H(w))return null;if(typeof w.closed==="boolean")return w.closed;let{_writableState:x,_readableState:E}=w;if(typeof(x===null||x===void 0?void 0:x.closed)==="boolean"||typeof(E===null||E===void 0?void 0:E.closed)==="boolean")return(x===null||x===void 0?void 0:x.closed)||(E===null||E===void 0?void 0:E.closed);if(typeof w._closed==="boolean"&&V(w))return w._closed;return null}function V(w){return typeof w._closed==="boolean"&&typeof w._defaultKeepAlive==="boolean"&&typeof w._removedConnection==="boolean"&&typeof w._removedContLen==="boolean"}function N(w){return typeof w._sent100==="boolean"&&V(w)}function L(w){var x;return typeof w._consuming==="boolean"&&typeof w._dumped==="boolean"&&((x=w.req)===null||x===void 0?void 0:x.upgradeOrConnect)===void 0}function F(w){if(!H(w))return null;let{_writableState:x,_readableState:E}=w,v=x||E;return!v&&N(w)||!!(v&&v.autoDestroy&&v.emitClose&&v.closed===!1)}function R(w){var x;return!!(w&&((x=w[M])!==null&&x!==void 0?x:w.readableDidRead||w.readableAborted))}function O(w){var x,E,v,p,i,s,X0,n,r,Z0;return!!(w&&((x=(E=(v=(p=(i=(s=w[q])!==null&&s!==void 0?s:w.readableErrored)!==null&&i!==void 0?i:w.writableErrored)!==null&&p!==void 0?p:(X0=w._readableState)===null||X0===void 0?void 0:X0.errorEmitted)!==null&&v!==void 0?v:(n=w._writableState)===null||n===void 0?void 0:n.errorEmitted)!==null&&E!==void 0?E:(r=w._readableState)===null||r===void 0?void 0:r.errored)!==null&&x!==void 0?x:(Z0=w._writableState)===null||Z0===void 0?void 0:Z0.errored))}Q.exports={isDestroyed:f,kIsDestroyed:J,isDisturbed:R,kIsDisturbed:M,isErrored:O,kIsErrored:q,isReadable:h,kIsReadable:G,kIsClosedPromise:j,kControllerErrorFunction:P,kIsWritable:z,isClosed:W,isDuplexNodeStream:I,isFinished:T,isIterable:k,isReadableNodeStream:D,isReadableStream:C,isReadableEnded:m,isReadableFinished:l,isReadableErrored:U,isNodeStream:H,isWebStream:_,isWritable:c,isWritableNodeStream:A,isWritableStream:B,isWritableEnded:g,isWritableFinished:b,isWritableErrored:K,isServerRequest:L,isServerResponse:N,willEmitClose:F,isTransformStream:S}}),Z7=Z8(($,Q)=>{var X=Rz(),{AbortError:Y,codes:Z}=eX(),{ERR_INVALID_ARG_TYPE:J,ERR_STREAM_PREMATURE_CLOSE:q}=Z,{kEmptyObject:G,once:z}=EY(),{validateAbortSignal:M,validateFunction:j,validateObject:P,validateBoolean:D}=BV(),{Promise:A,PromisePrototypeThen:I,SymbolDispose:H}=x8(),{isClosed:C,isReadable:B,isReadableNodeStream:S,isReadableStream:_,isReadableFinished:k,isReadableErrored:f,isWritable:g,isWritableNodeStream:b,isWritableStream:m,isWritableFinished:l,isWritableErrored:h,isNodeStream:c,willEmitClose:T,kIsClosedPromise:K}=m5(),U;function W(R){return R.setHeader&&typeof R.abort==="function"}var V=()=>{};function N(R,O,w){var x,E;if(arguments.length===2)w=O,O=G;else if(O==null)O=G;else P(O,"options");if(j(w,"callback"),M(O.signal,"options.signal"),w=z(w),_(R)||m(R))return L(R,O,w);if(!c(R))throw new J("stream",["ReadableStream","WritableStream","Stream"],R);let v=(x=O.readable)!==null&&x!==void 0?x:S(R),p=(E=O.writable)!==null&&E!==void 0?E:b(R),i=R._writableState,s=R._readableState,X0=()=>{if(!R.writable)Z0()},n=T(R)&&S(R)===v&&b(R)===p,r=l(R,!1),Z0=()=>{if(r=!0,R.destroyed)n=!1;if(n&&(!R.readable||v))return;if(!v||e)w.call(R)},e=k(R,!1),Q0=()=>{if(e=!0,R.destroyed)n=!1;if(n&&(!R.writable||p))return;if(!p||r)w.call(R)},t=(J0)=>{w.call(R,J0)},a=C(R),$0=()=>{a=!0;let J0=h(R)||f(R);if(J0&&typeof J0!=="boolean")return w.call(R,J0);if(v&&!e&&S(R,!0)){if(!k(R,!1))return w.call(R,new q)}if(p&&!r){if(!l(R,!1))return w.call(R,new q)}w.call(R)},d0=()=>{a=!0;let J0=h(R)||f(R);if(J0&&typeof J0!=="boolean")return w.call(R,J0);w.call(R)},K0=()=>{R.req.on("finish",Z0)};if(W(R)){if(R.on("complete",Z0),!n)R.on("abort",$0);if(R.req)K0();else R.on("request",K0)}else if(p&&!i)R.on("end",X0),R.on("close",X0);if(!n&&typeof R.aborted==="boolean")R.on("aborted",$0);if(R.on("end",Q0),R.on("finish",Z0),O.error!==!1)R.on("error",t);if(R.on("close",$0),a)X.nextTick($0);else if(i!==null&&i!==void 0&&i.errorEmitted||s!==null&&s!==void 0&&s.errorEmitted){if(!n)X.nextTick(d0)}else if(!v&&(!n||B(R))&&(r||g(R)===!1))X.nextTick(d0);else if(!p&&(!n||g(R))&&(e||B(R)===!1))X.nextTick(d0);else if(s&&R.req&&R.aborted)X.nextTick(d0);let z0=()=>{if(w=V,R.removeListener("aborted",$0),R.removeListener("complete",Z0),R.removeListener("abort",$0),R.removeListener("request",K0),R.req)R.req.removeListener("finish",Z0);R.removeListener("end",X0),R.removeListener("close",X0),R.removeListener("finish",Z0),R.removeListener("end",Q0),R.removeListener("error",t),R.removeListener("close",$0)};if(O.signal&&!a){let J0=()=>{let Y0=w;z0(),Y0.call(R,new Y(void 0,{cause:O.signal.reason}))};if(O.signal.aborted)X.nextTick(J0);else{U=U||EY().addAbortListener;let Y0=U(O.signal,J0),W0=w;w=z((...T0)=>{Y0[H](),W0.apply(R,T0)})}}return z0}function L(R,O,w){let x=!1,E=V;if(O.signal)if(E=()=>{x=!0,w.call(R,new Y(void 0,{cause:O.signal.reason}))},O.signal.aborted)X.nextTick(E);else{U=U||EY().addAbortListener;let p=U(O.signal,E),i=w;w=z((...s)=>{p[H](),i.apply(R,s)})}let v=(...p)=>{if(!x)X.nextTick(()=>w.apply(R,p))};return I(R[K].promise,v,v),V}function F(R,O){var w;let x=!1;if(O===null)O=G;if((w=O)!==null&&w!==void 0&&w.cleanup)D(O.cleanup,"cleanup"),x=O.cleanup;return new A((E,v)=>{let p=N(R,O,(i)=>{if(x)p();if(i)v(i);else E()})})}Q.exports=N,Q.exports.finished=F}),dU=Z8(($,Q)=>{var X=Rz(),{aggregateTwoErrors:Y,codes:{ERR_MULTIPLE_CALLBACK:Z},AbortError:J}=eX(),{Symbol:q}=x8(),{kIsDestroyed:G,isDestroyed:z,isFinished:M,isServerRequest:j}=m5(),P=q("kDestroy"),D=q("kConstruct");function A(T,K,U){if(T){if(T.stack,K&&!K.errored)K.errored=T;if(U&&!U.errored)U.errored=T}}function I(T,K){let U=this._readableState,W=this._writableState,V=W||U;if(W!==null&&W!==void 0&&W.destroyed||U!==null&&U!==void 0&&U.destroyed){if(typeof K==="function")K();return this}if(A(T,W,U),W)W.destroyed=!0;if(U)U.destroyed=!0;if(!V.constructed)this.once(P,function(N){H(this,Y(N,T),K)});else H(this,T,K);return this}function H(T,K,U){let W=!1;function V(N){if(W)return;W=!0;let{_readableState:L,_writableState:F}=T;if(A(N,F,L),F)F.closed=!0;if(L)L.closed=!0;if(typeof U==="function")U(N);if(N)X.nextTick(C,T,N);else X.nextTick(B,T)}try{T._destroy(K||null,V)}catch(N){V(N)}}function C(T,K){S(T,K),B(T)}function B(T){let{_readableState:K,_writableState:U}=T;if(U)U.closeEmitted=!0;if(K)K.closeEmitted=!0;if(U!==null&&U!==void 0&&U.emitClose||K!==null&&K!==void 0&&K.emitClose)T.emit("close")}function S(T,K){let{_readableState:U,_writableState:W}=T;if(W!==null&&W!==void 0&&W.errorEmitted||U!==null&&U!==void 0&&U.errorEmitted)return;if(W)W.errorEmitted=!0;if(U)U.errorEmitted=!0;T.emit("error",K)}function _(){let T=this._readableState,K=this._writableState;if(T)T.constructed=!0,T.closed=!1,T.closeEmitted=!1,T.destroyed=!1,T.errored=null,T.errorEmitted=!1,T.reading=!1,T.ended=T.readable===!1,T.endEmitted=T.readable===!1;if(K)K.constructed=!0,K.destroyed=!1,K.closed=!1,K.closeEmitted=!1,K.errored=null,K.errorEmitted=!1,K.finalCalled=!1,K.prefinished=!1,K.ended=K.writable===!1,K.ending=K.writable===!1,K.finished=K.writable===!1}function k(T,K,U){let{_readableState:W,_writableState:V}=T;if(V!==null&&V!==void 0&&V.destroyed||W!==null&&W!==void 0&&W.destroyed)return this;if(W!==null&&W!==void 0&&W.autoDestroy||V!==null&&V!==void 0&&V.autoDestroy)T.destroy(K);else if(K){if(K.stack,V&&!V.errored)V.errored=K;if(W&&!W.errored)W.errored=K;if(U)X.nextTick(S,T,K);else S(T,K)}}function f(T,K){if(typeof T._construct!=="function")return;let{_readableState:U,_writableState:W}=T;if(U)U.constructed=!1;if(W)W.constructed=!1;if(T.once(D,K),T.listenerCount(D)>1)return;X.nextTick(g,T)}function g(T){let K=!1;function U(W){if(K){k(T,W!==null&&W!==void 0?W:new Z);return}K=!0;let{_readableState:V,_writableState:N}=T,L=N||V;if(V)V.constructed=!0;if(N)N.constructed=!0;if(L.destroyed)T.emit(P,W);else if(W)k(T,W,!0);else X.nextTick(b,T)}try{T._construct((W)=>{X.nextTick(U,W)})}catch(W){X.nextTick(U,W)}}function b(T){T.emit(D)}function m(T){return(T===null||T===void 0?void 0:T.setHeader)&&typeof T.abort==="function"}function l(T){T.emit("close")}function h(T,K){T.emit("error",K),X.nextTick(l,T)}function c(T,K){if(!T||z(T))return;if(!K&&!M(T))K=new J;if(j(T))T.socket=null,T.destroy(K);else if(m(T))T.abort();else if(m(T.req))T.req.abort();else if(typeof T.destroy==="function")T.destroy(K);else if(typeof T.close==="function")T.close();else if(K)X.nextTick(h,T,K);else X.nextTick(l,T);if(!T.destroyed)T[G]=!0}Q.exports={construct:f,destroyer:c,destroy:I,undestroy:_,errorOrDestroy:k}}),Ew=Z8(($,Q)=>{var{ArrayIsArray:X,ObjectSetPrototypeOf:Y}=x8(),{EventEmitter:Z}=(EK(),I$(SK));function J(G){Z.call(this,G)}Y(J.prototype,Z.prototype),Y(J,Z),J.prototype.pipe=function(G,z){let M=this;function j(B){if(G.writable&&G.write(B)===!1&&M.pause)M.pause()}M.on("data",j);function P(){if(M.readable&&M.resume)M.resume()}if(G.on("drain",P),!G._isStdio&&(!z||z.end!==!1))M.on("end",A),M.on("close",I);let D=!1;function A(){if(D)return;D=!0,G.end()}function I(){if(D)return;if(D=!0,typeof G.destroy==="function")G.destroy()}function H(B){if(C(),Z.listenerCount(this,"error")===0)this.emit("error",B)}q(M,"error",H),q(G,"error",H);function C(){M.removeListener("data",j),G.removeListener("drain",P),M.removeListener("end",A),M.removeListener("close",I),M.removeListener("error",H),G.removeListener("error",H),M.removeListener("end",C),M.removeListener("close",C),G.removeListener("close",C)}return M.on("end",C),M.on("close",C),G.on("close",C),G.emit("pipe",M),G};function q(G,z,M){if(typeof G.prependListener==="function")return G.prependListener(z,M);if(!G._events||!G._events[z])G.on(z,M);else if(X(G._events[z]))G._events[z].unshift(M);else G._events[z]=[M,G._events[z]]}Q.exports={Stream:J,prependListener:q}}),tP=Z8(($,Q)=>{var{SymbolDispose:X}=x8(),{AbortError:Y,codes:Z}=eX(),{isNodeStream:J,isWebStream:q,kControllerErrorFunction:G}=m5(),z=Z7(),{ERR_INVALID_ARG_TYPE:M}=Z,j,P=(D,A)=>{if(typeof D!=="object"||!("aborted"in D))throw new M(A,"AbortSignal",D)};Q.exports.addAbortSignal=function D(A,I){if(P(A,"signal"),!J(I)&&!q(I))throw new M("stream",["ReadableStream","WritableStream","Stream"],I);return Q.exports.addAbortSignalNoValidate(A,I)},Q.exports.addAbortSignalNoValidate=function(D,A){if(typeof D!=="object"||!("aborted"in D))return A;let I=J(A)?()=>{A.destroy(new Y(void 0,{cause:D.reason}))}:()=>{A[G](new Y(void 0,{cause:D.reason}))};if(D.aborted)I();else{j=j||EY().addAbortListener;let H=j(D,I);z(A,H[X])}return A}}),N40=Z8(($,Q)=>{var{StringPrototypeSlice:X,SymbolIterator:Y,TypedArrayPrototypeSet:Z,Uint8Array:J}=x8(),{Buffer:q}=(h8(),I$(b8)),{inspect:G}=EY();Q.exports=class z{constructor(){this.head=null,this.tail=null,this.length=0}push(M){let j={data:M,next:null};if(this.length>0)this.tail.next=j;else this.head=j;this.tail=j,++this.length}unshift(M){let j={data:M,next:this.head};if(this.length===0)this.tail=j;this.head=j,++this.length}shift(){if(this.length===0)return;let M=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;return--this.length,M}clear(){this.head=this.tail=null,this.length=0}join(M){if(this.length===0)return"";let j=this.head,P=""+j.data;while((j=j.next)!==null)P+=M+j.data;return P}concat(M){if(this.length===0)return q.alloc(0);let j=q.allocUnsafe(M>>>0),P=this.head,D=0;while(P)Z(j,P.data,D),D+=P.data.length,P=P.next;return j}consume(M,j){let P=this.head.data;if(M<P.length){let D=P.slice(0,M);return this.head.data=P.slice(M),D}if(M===P.length)return this.shift();return j?this._getString(M):this._getBuffer(M)}first(){return this.head.data}*[Y](){for(let M=this.head;M;M=M.next)yield M.data}_getString(M){let j="",P=this.head,D=0;do{let A=P.data;if(M>A.length)j+=A,M-=A.length;else{if(M===A.length)if(j+=A,++D,P.next)this.head=P.next;else this.head=this.tail=null;else j+=X(A,0,M),this.head=P,P.data=X(A,M);break}++D}while((P=P.next)!==null);return this.length-=D,j}_getBuffer(M){let j=q.allocUnsafe(M),P=M,D=this.head,A=0;do{let I=D.data;if(M>I.length)Z(j,I,P-M),M-=I.length;else{if(M===I.length)if(Z(j,I,P-M),++A,D.next)this.head=D.next;else this.head=this.tail=null;else Z(j,new J(I.buffer,I.byteOffset,M),P-M),this.head=D,D.data=I.slice(M);break}++A}while((D=D.next)!==null);return this.length-=A,j}[Symbol.for("nodejs.util.inspect.custom")](M,j){return G(this,{...j,depth:0,customInspect:!1})}}}),eP=Z8(($,Q)=>{var{MathFloor:X,NumberIsInteger:Y}=x8(),{validateInteger:Z}=BV(),{ERR_INVALID_ARG_VALUE:J}=eX().codes,q=16384,G=16;function z(D,A,I){return D.highWaterMark!=null?D.highWaterMark:A?D[I]:null}function M(D){return D?G:q}function j(D,A){if(Z(A,"value",0),D)G=A;else q=A}function P(D,A,I,H){let C=z(A,H,I);if(C!=null){if(!Y(C)||C<0){let B=H?`options.${I}`:"options.highWaterMark";throw new J(B,C)}return X(C)}return M(D.objectMode)}Q.exports={getHighWaterMark:P,getDefaultHighWaterMark:M,setDefaultHighWaterMark:j}}),A40=Z8(($,Q)=>{/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var X=(h8(),I$(b8)),Y=X.Buffer;function Z(q,G){for(var z in q)G[z]=q[z]}if(Y.from&&Y.alloc&&Y.allocUnsafe&&Y.allocUnsafeSlow)Q.exports=X;else Z(X,$),$.Buffer=J;function J(q,G,z){return Y(q,G,z)}J.prototype=Object.create(Y.prototype),Z(Y,J),J.from=function(q,G,z){if(typeof q==="number")throw new TypeError("Argument must not be a number");return Y(q,G,z)},J.alloc=function(q,G,z){if(typeof q!=="number")throw new TypeError("Argument must be a number");var M=Y(q);if(G!==void 0)if(typeof z==="string")M.fill(G,z);else M.fill(G);else M.fill(0);return M},J.allocUnsafe=function(q){if(typeof q!=="number")throw new TypeError("Argument must be a number");return Y(q)},J.allocUnsafeSlow=function(q){if(typeof q!=="number")throw new TypeError("Argument must be a number");return X.SlowBuffer(q)}}),R40=Z8(($)=>{var Q=A40().Buffer,X=Q.isEncoding||function(S){switch(S=""+S,S&&S.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Y(S){if(!S)return"utf8";var _;while(!0)switch(S){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return S;default:if(_)return;S=(""+S).toLowerCase(),_=!0}}function Z(S){var _=Y(S);if(typeof _!=="string"&&(Q.isEncoding===X||!X(S)))throw new Error("Unknown encoding: "+S);return _||S}$.StringDecoder=J;function J(S){this.encoding=Z(S);var _;switch(this.encoding){case"utf16le":this.text=D,this.end=A,_=4;break;case"utf8":this.fillLast=M,_=4;break;case"base64":this.text=I,this.end=H,_=3;break;default:this.write=C,this.end=B;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Q.allocUnsafe(_)}J.prototype.write=function(S){if(S.length===0)return"";var _,k;if(this.lastNeed){if(_=this.fillLast(S),_===void 0)return"";k=this.lastNeed,this.lastNeed=0}else k=0;if(k<S.length)return _?_+this.text(S,k):this.text(S,k);return _||""},J.prototype.end=P,J.prototype.text=j,J.prototype.fillLast=function(S){if(this.lastNeed<=S.length)return S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,S.length),this.lastNeed-=S.length};function q(S){if(S<=127)return 0;else if(S>>5===6)return 2;else if(S>>4===14)return 3;else if(S>>3===30)return 4;return S>>6===2?-1:-2}function G(S,_,k){var f=_.length-1;if(f<k)return 0;var g=q(_[f]);if(g>=0){if(g>0)S.lastNeed=g-1;return g}if(--f<k||g===-2)return 0;if(g=q(_[f]),g>=0){if(g>0)S.lastNeed=g-2;return g}if(--f<k||g===-2)return 0;if(g=q(_[f]),g>=0){if(g>0)if(g===2)g=0;else S.lastNeed=g-3;return g}return 0}function z(S,_,k){if((_[0]&192)!==128)return S.lastNeed=0,"";if(S.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return S.lastNeed=1,"";if(S.lastNeed>2&&_.length>2){if((_[2]&192)!==128)return S.lastNeed=2,""}}}function M(S){var _=this.lastTotal-this.lastNeed,k=z(this,S,_);if(k!==void 0)return k;if(this.lastNeed<=S.length)return S.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,_,0,S.length),this.lastNeed-=S.length}function j(S,_){var k=G(this,S,_);if(!this.lastNeed)return S.toString("utf8",_);this.lastTotal=k;var f=S.length-(k-this.lastNeed);return S.copy(this.lastChar,0,f),S.toString("utf8",_,f)}function P(S){var _=S&&S.length?this.write(S):"";if(this.lastNeed)return _+"";return _}function D(S,_){if((S.length-_)%2===0){var k=S.toString("utf16le",_);if(k){var f=k.charCodeAt(k.length-1);if(f>=55296&&f<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1],k.slice(0,-1)}return k}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=S[S.length-1],S.toString("utf16le",_,S.length-1)}function A(S){var _=S&&S.length?this.write(S):"";if(this.lastNeed){var k=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,k)}return _}function I(S,_){var k=(S.length-_)%3;if(k===0)return S.toString("base64",_);if(this.lastNeed=3-k,this.lastTotal=3,k===1)this.lastChar[0]=S[S.length-1];else this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1];return S.toString("base64",_,S.length-k)}function H(S){var _=S&&S.length?this.write(S):"";if(this.lastNeed)return _+this.lastChar.toString("base64",0,3-this.lastNeed);return _}function C(S){return S.toString(this.encoding)}function B(S){return S&&S.length?this.write(S):""}}),Xm=Z8(($,Q)=>{var X=Rz(),{PromisePrototypeThen:Y,SymbolAsyncIterator:Z,SymbolIterator:J}=x8(),{Buffer:q}=(h8(),I$(b8)),{ERR_INVALID_ARG_TYPE:G,ERR_STREAM_NULL_VALUES:z}=eX().codes;function M(j,P,D){let A;if(typeof P==="string"||P instanceof q)return new j({objectMode:!0,...D,read(){this.push(P),this.push(null)}});let I;if(P&&P[Z])I=!0,A=P[Z]();else if(P&&P[J])I=!1,A=P[J]();else throw new G("iterable",["Iterable"],P);let H=new j({objectMode:!0,highWaterMark:1,...D}),C=!1;H._read=function(){if(!C)C=!0,S()},H._destroy=function(_,k){Y(B(_),()=>X.nextTick(k,_),(f)=>X.nextTick(k,f||_))};async function B(_){let k=_!==void 0&&_!==null,f=typeof A.throw==="function";if(k&&f){let{value:g,done:b}=await A.throw(_);if(await g,b)return}if(typeof A.return==="function"){let{value:g}=await A.return();await g}}async function S(){for(;;){try{let{value:_,done:k}=I?await A.next():A.next();if(k)H.push(null);else{let f=_&&typeof _.then==="function"?await _:_;if(f===null)throw C=!1,new z;else if(H.push(f))continue;else C=!1}}catch(_){H.destroy(_)}break}}return H}Q.exports=M}),$H=Z8(($,Q)=>{var X=Rz(),{ArrayPrototypeIndexOf:Y,NumberIsInteger:Z,NumberIsNaN:J,NumberParseInt:q,ObjectDefineProperties:G,ObjectKeys:z,ObjectSetPrototypeOf:M,Promise:j,SafeSet:P,SymbolAsyncDispose:D,SymbolAsyncIterator:A,Symbol:I}=x8();Q.exports=T0,T0.ReadableState=W0;var{EventEmitter:H}=(EK(),I$(SK)),{Stream:C,prependListener:B}=Ew(),{Buffer:S}=(h8(),I$(b8)),{addAbortSignal:_}=tP(),k=Z7(),f=EY().debuglog("stream",(u)=>{f=u}),g=N40(),b=dU(),{getHighWaterMark:m,getDefaultHighWaterMark:l}=eP(),{aggregateTwoErrors:h,codes:{ERR_INVALID_ARG_TYPE:c,ERR_METHOD_NOT_IMPLEMENTED:T,ERR_OUT_OF_RANGE:K,ERR_STREAM_PUSH_AFTER_EOF:U,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:W},AbortError:V}=eX(),{validateObject:N}=BV(),L=I("kPaused"),{StringDecoder:F}=R40(),R=Xm();M(T0.prototype,C.prototype),M(T0,C);var O=()=>{},{errorOrDestroy:w}=b,x=1,E=2,v=4,p=8,i=16,s=32,X0=64,n=128,r=256,Z0=512,e=1024,Q0=2048,t=4096,a=8192,$0=16384,d0=32768,K0=65536,z0=131072,J0=262144;function Y0(u){return{enumerable:!1,get(){return(this.state&u)!==0},set(d){if(d)this.state|=u;else this.state&=~u}}}G(W0.prototype,{objectMode:Y0(x),ended:Y0(E),endEmitted:Y0(v),reading:Y0(p),constructed:Y0(i),sync:Y0(s),needReadable:Y0(X0),emittedReadable:Y0(n),readableListening:Y0(r),resumeScheduled:Y0(Z0),errorEmitted:Y0(e),emitClose:Y0(Q0),autoDestroy:Y0(t),destroyed:Y0(a),closed:Y0($0),closeEmitted:Y0(d0),multiAwaitDrain:Y0(K0),readingMore:Y0(z0),dataEmitted:Y0(J0)});function W0(u,d,i0){if(typeof i0!=="boolean")i0=d instanceof h5();if(this.state=Q0|t|i|s,u&&u.objectMode)this.state|=x;if(i0&&u&&u.readableObjectMode)this.state|=x;if(this.highWaterMark=u?m(this,u,"readableHighWaterMark",i0):l(!1),this.buffer=new g,this.length=0,this.pipes=[],this.flowing=null,this[L]=null,u&&u.emitClose===!1)this.state&=~Q0;if(u&&u.autoDestroy===!1)this.state&=~t;if(this.errored=null,this.defaultEncoding=u&&u.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,u&&u.encoding)this.decoder=new F(u.encoding),this.encoding=u.encoding}function T0(u){if(!(this instanceof T0))return new T0(u);let d=this instanceof h5();if(this._readableState=new W0(u,this,d),u){if(typeof u.read==="function")this._read=u.read;if(typeof u.destroy==="function")this._destroy=u.destroy;if(typeof u.construct==="function")this._construct=u.construct;if(u.signal&&!d)_(u.signal,this)}C.call(this,u),b.construct(this,()=>{if(this._readableState.needReadable)o8(this,this._readableState)})}T0.prototype.destroy=b.destroy,T0.prototype._undestroy=b.undestroy,T0.prototype._destroy=function(u,d){d(u)},T0.prototype[H.captureRejectionSymbol]=function(u){this.destroy(u)},T0.prototype[D]=function(){let u;if(!this.destroyed)u=this.readableEnded?null:new V,this.destroy(u);return new j((d,i0)=>k(this,(U0)=>U0&&U0!==u?i0(U0):d(null)))},T0.prototype.push=function(u,d){return M0(this,u,d,!1)},T0.prototype.unshift=function(u,d){return M0(this,u,d,!0)};function M0(u,d,i0,U0){f("readableAddChunk",d);let O0=u._readableState,Q8;if((O0.state&x)===0){if(typeof d==="string"){if(i0=i0||O0.defaultEncoding,O0.encoding!==i0)if(U0&&O0.encoding)d=S.from(d,i0).toString(O0.encoding);else d=S.from(d,i0),i0=""}else if(d instanceof S)i0="";else if(C._isUint8Array(d))d=C._uint8ArrayToBuffer(d),i0="";else if(d!=null)Q8=new c("chunk",["string","Buffer","Uint8Array"],d)}if(Q8)w(u,Q8);else if(d===null)O0.state&=~p,$8(u,O0);else if((O0.state&x)!==0||d&&d.length>0)if(U0)if((O0.state&v)!==0)w(u,new W);else if(O0.destroyed||O0.errored)return!1;else A0(u,O0,d,!0);else if(O0.ended)w(u,new U);else if(O0.destroyed||O0.errored)return!1;else if(O0.state&=~p,O0.decoder&&!i0)if(d=O0.decoder.write(d),O0.objectMode||d.length!==0)A0(u,O0,d,!1);else o8(u,O0);else A0(u,O0,d,!1);else if(!U0)O0.state&=~p,o8(u,O0);return!O0.ended&&(O0.length<O0.highWaterMark||O0.length===0)}function A0(u,d,i0,U0){if(d.flowing&&d.length===0&&!d.sync&&u.listenerCount("data")>0){if((d.state&K0)!==0)d.awaitDrainWriters.clear();else d.awaitDrainWriters=null;d.dataEmitted=!0,u.emit("data",i0)}else{if(d.length+=d.objectMode?1:i0.length,U0)d.buffer.unshift(i0);else d.buffer.push(i0);if((d.state&X0)!==0)C0(u)}o8(u,d)}T0.prototype.isPaused=function(){let u=this._readableState;return u[L]===!0||u.flowing===!1},T0.prototype.setEncoding=function(u){let d=new F(u);this._readableState.decoder=d,this._readableState.encoding=this._readableState.decoder.encoding;let i0=this._readableState.buffer,U0="";for(let O0 of i0)U0+=d.write(O0);if(i0.clear(),U0!=="")i0.push(U0);return this._readableState.length=U0.length,this};var C$=1073741824;function P0(u){if(u>C$)throw new K("size","<= 1GiB",u);else u--,u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u++;return u}function I0(u,d){if(u<=0||d.length===0&&d.ended)return 0;if((d.state&x)!==0)return 1;if(J(u)){if(d.flowing&&d.length)return d.buffer.first().length;return d.length}if(u<=d.length)return u;return d.ended?d.length:0}T0.prototype.read=function(u){if(f("read",u),u===void 0)u=NaN;else if(!Z(u))u=q(u,10);let d=this._readableState,i0=u;if(u>d.highWaterMark)d.highWaterMark=P0(u);if(u!==0)d.state&=~n;if(u===0&&d.needReadable&&((d.highWaterMark!==0?d.length>=d.highWaterMark:d.length>0)||d.ended)){if(f("read: emitReadable",d.length,d.ended),d.length===0&&d.ended)_0(this);else C0(this);return null}if(u=I0(u,d),u===0&&d.ended){if(d.length===0)_0(this);return null}let U0=(d.state&X0)!==0;if(f("need readable",U0),d.length===0||d.length-u<d.highWaterMark)U0=!0,f("length less than watermark",U0);if(d.ended||d.reading||d.destroyed||d.errored||!d.constructed)U0=!1,f("reading, ended or constructing",U0);else if(U0){if(f("do read"),d.state|=p|s,d.length===0)d.state|=X0;try{this._read(d.highWaterMark)}catch(Q8){w(this,Q8)}if(d.state&=~s,!d.reading)u=I0(i0,d)}let O0;if(u>0)O0=y0(u,d);else O0=null;if(O0===null)d.needReadable=d.length<=d.highWaterMark,u=0;else if(d.length-=u,d.multiAwaitDrain)d.awaitDrainWriters.clear();else d.awaitDrainWriters=null;if(d.length===0){if(!d.ended)d.needReadable=!0;if(i0!==u&&d.ended)_0(this)}if(O0!==null&&!d.errorEmitted&&!d.closeEmitted)d.dataEmitted=!0,this.emit("data",O0);return O0};function $8(u,d){if(f("onEofChunk"),d.ended)return;if(d.decoder){let i0=d.decoder.end();if(i0&&i0.length)d.buffer.push(i0),d.length+=d.objectMode?1:i0.length}if(d.ended=!0,d.sync)C0(u);else d.needReadable=!1,d.emittedReadable=!0,S0(u)}function C0(u){let d=u._readableState;if(f("emitReadable",d.needReadable,d.emittedReadable),d.needReadable=!1,!d.emittedReadable)f("emitReadable",d.flowing),d.emittedReadable=!0,X.nextTick(S0,u)}function S0(u){let d=u._readableState;if(f("emitReadable_",d.destroyed,d.length,d.ended),!d.destroyed&&!d.errored&&(d.length||d.ended))u.emit("readable"),d.emittedReadable=!1;d.needReadable=!d.flowing&&!d.ended&&d.length<=d.highWaterMark,v0(u)}function o8(u,d){if(!d.readingMore&&d.constructed)d.readingMore=!0,X.nextTick(F0,u,d)}function F0(u,d){while(!d.reading&&!d.ended&&(d.length<d.highWaterMark||d.flowing&&d.length===0)){let i0=d.length;if(f("maybeReadMore read 0"),u.read(0),i0===d.length)break}d.readingMore=!1}T0.prototype._read=function(u){throw new T("_read()")},T0.prototype.pipe=function(u,d){let i0=this,U0=this._readableState;if(U0.pipes.length===1){if(!U0.multiAwaitDrain)U0.multiAwaitDrain=!0,U0.awaitDrainWriters=new P(U0.awaitDrainWriters?[U0.awaitDrainWriters]:[])}U0.pipes.push(u),f("pipe count=%d opts=%j",U0.pipes.length,d);let O0=(!d||d.end!==!1)&&u!==X.stdout&&u!==X.stderr?w0:L$;if(U0.endEmitted)X.nextTick(O0);else i0.once("end",O0);u.on("unpipe",Q8);function Q8(H$,K8){if(f("onunpipe"),H$===i0){if(K8&&K8.hasUnpiped===!1)K8.hasUnpiped=!0,u0()}}function w0(){f("onend"),u.end()}let B0,oQ=!1;function u0(){if(f("cleanup"),u.removeListener("close",f0),u.removeListener("finish",y8),B0)u.removeListener("drain",B0);if(u.removeListener("error",x0),u.removeListener("unpipe",Q8),i0.removeListener("end",w0),i0.removeListener("end",L$),i0.removeListener("data",rQ),oQ=!0,B0&&U0.awaitDrainWriters&&(!u._writableState||u._writableState.needDrain))B0()}function b0(){if(!oQ){if(U0.pipes.length===1&&U0.pipes[0]===u)f("false write response, pause",0),U0.awaitDrainWriters=u,U0.multiAwaitDrain=!1;else if(U0.pipes.length>1&&U0.pipes.includes(u))f("false write response, pause",U0.awaitDrainWriters.size),U0.awaitDrainWriters.add(u);i0.pause()}if(!B0)B0=m0(i0,u),u.on("drain",B0)}i0.on("data",rQ);function rQ(H$){f("ondata");let K8=u.write(H$);if(f("dest.write",K8),K8===!1)b0()}function x0(H$){if(f("onerror",H$),L$(),u.removeListener("error",x0),u.listenerCount("error")===0){let K8=u._writableState||u._readableState;if(K8&&!K8.errorEmitted)w(u,H$);else u.emit("error",H$)}}B(u,"error",x0);function f0(){u.removeListener("finish",y8),L$()}u.once("close",f0);function y8(){f("onfinish"),u.removeListener("close",f0),L$()}u.once("finish",y8);function L$(){f("unpipe"),i0.unpipe(u)}if(u.emit("pipe",i0),u.writableNeedDrain===!0)b0();else if(!U0.flowing)f("pipe resume"),i0.resume();return u};function m0(u,d){return function i0(){let U0=u._readableState;if(U0.awaitDrainWriters===d)f("pipeOnDrain",1),U0.awaitDrainWriters=null;else if(U0.multiAwaitDrain)f("pipeOnDrain",U0.awaitDrainWriters.size),U0.awaitDrainWriters.delete(d);if((!U0.awaitDrainWriters||U0.awaitDrainWriters.size===0)&&u.listenerCount("data"))u.resume()}}T0.prototype.unpipe=function(u){let d=this._readableState,i0={hasUnpiped:!1};if(d.pipes.length===0)return this;if(!u){let O0=d.pipes;d.pipes=[],this.pause();for(let Q8=0;Q8<O0.length;Q8++)O0[Q8].emit("unpipe",this,{hasUnpiped:!1});return this}let U0=Y(d.pipes,u);if(U0===-1)return this;if(d.pipes.splice(U0,1),d.pipes.length===0)this.pause();return u.emit("unpipe",this,i0),this},T0.prototype.on=function(u,d){let i0=C.prototype.on.call(this,u,d),U0=this._readableState;if(u==="data"){if(U0.readableListening=this.listenerCount("readable")>0,U0.flowing!==!1)this.resume()}else if(u==="readable"){if(!U0.endEmitted&&!U0.readableListening){if(U0.readableListening=U0.needReadable=!0,U0.flowing=!1,U0.emittedReadable=!1,f("on readable",U0.length,U0.reading),U0.length)C0(this);else if(!U0.reading)X.nextTick(c0,this)}}return i0},T0.prototype.addListener=T0.prototype.on,T0.prototype.removeListener=function(u,d){let i0=C.prototype.removeListener.call(this,u,d);if(u==="readable")X.nextTick(iQ,this);return i0},T0.prototype.off=T0.prototype.removeListener,T0.prototype.removeAllListeners=function(u){let d=C.prototype.removeAllListeners.apply(this,arguments);if(u==="readable"||u===void 0)X.nextTick(iQ,this);return d};function iQ(u){let d=u._readableState;if(d.readableListening=u.listenerCount("readable")>0,d.resumeScheduled&&d[L]===!1)d.flowing=!0;else if(u.listenerCount("data")>0)u.resume();else if(!d.readableListening)d.flowing=null}function c0(u){f("readable nexttick read 0"),u.read(0)}T0.prototype.resume=function(){let u=this._readableState;if(!u.flowing)f("resume"),u.flowing=!u.readableListening,p0(this,u);return u[L]=!1,this};function p0(u,d){if(!d.resumeScheduled)d.resumeScheduled=!0,X.nextTick(HX,u,d)}function HX(u,d){if(f("resume",d.reading),!d.reading)u.read(0);if(d.resumeScheduled=!1,u.emit("resume"),v0(u),d.flowing&&!d.reading)u.read(0)}T0.prototype.pause=function(){if(f("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1)f("pause"),this._readableState.flowing=!1,this.emit("pause");return this._readableState[L]=!0,this};function v0(u){let d=u._readableState;f("flow",d.flowing);while(d.flowing&&u.read()!==null);}T0.prototype.wrap=function(u){let d=!1;u.on("data",(U0)=>{if(!this.push(U0)&&u.pause)d=!0,u.pause()}),u.on("end",()=>{this.push(null)}),u.on("error",(U0)=>{w(this,U0)}),u.on("close",()=>{this.destroy()}),u.on("destroy",()=>{this.destroy()}),this._read=()=>{if(d&&u.resume)d=!1,u.resume()};let i0=z(u);for(let U0=1;U0<i0.length;U0++){let O0=i0[U0];if(this[O0]===void 0&&typeof u[O0]==="function")this[O0]=u[O0].bind(u)}return this},T0.prototype[A]=function(){return g0(this)},T0.prototype.iterator=function(u){if(u!==void 0)N(u,"options");return g0(this,u)};function g0(u,d){if(typeof u.read!=="function")u=T0.wrap(u,{objectMode:!0});let i0=NX(u,d);return i0.stream=u,i0}async function*NX(u,d){let i0=O;function U0(w0){if(this===u)i0(),i0=O;else i0=w0}u.on("readable",U0);let O0,Q8=k(u,{writable:!1},(w0)=>{O0=w0?h(O0,w0):null,i0(),i0=O});try{while(!0){let w0=u.destroyed?null:u.read();if(w0!==null)yield w0;else if(O0)throw O0;else if(O0===null)return;else await new j(U0)}}catch(w0){throw O0=h(O0,w0),O0}finally{if((O0||(d===null||d===void 0?void 0:d.destroyOnReturn)!==!1)&&(O0===void 0||u._readableState.autoDestroy))b.destroyer(u,null);else u.off("readable",U0),Q8()}}G(T0.prototype,{readable:{__proto__:null,get(){let u=this._readableState;return!!u&&u.readable!==!1&&!u.destroyed&&!u.errorEmitted&&!u.endEmitted},set(u){if(this._readableState)this._readableState.readable=!!u}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(u){if(this._readableState)this._readableState.flowing=u}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(u){if(!this._readableState)return;this._readableState.destroyed=u}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),G(W0.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[L]!==!1},set(u){this[L]=!!u}}}),T0._fromList=y0;function y0(u,d){if(d.length===0)return null;let i0;if(d.objectMode)i0=d.buffer.shift();else if(!u||u>=d.length){if(d.decoder)i0=d.buffer.join("");else if(d.buffer.length===1)i0=d.buffer.first();else i0=d.buffer.concat(d.length);d.buffer.clear()}else i0=d.buffer.consume(u,d.decoder);return i0}function _0(u){let d=u._readableState;if(f("endReadable",d.endEmitted),!d.endEmitted)d.ended=!0,X.nextTick(AX,d,u)}function AX(u,d){if(f("endReadableNT",u.endEmitted,u.length),!u.errored&&!u.closeEmitted&&!u.endEmitted&&u.length===0){if(u.endEmitted=!0,d.emit("end"),d.writable&&d.allowHalfOpen===!1)X.nextTick(l0,d);else if(u.autoDestroy){let i0=d._writableState;if(!i0||i0.autoDestroy&&(i0.finished||i0.writable===!1))d.destroy()}}}function l0(u){if(u.writable&&!u.writableEnded&&!u.destroyed)u.end()}T0.from=function(u,d){return R(T0,u,d)};var k0;function nQ(){if(k0===void 0)k0={};return k0}T0.fromWeb=function(u,d){return nQ().newStreamReadableFromReadableStream(u,d)},T0.toWeb=function(u,d){return nQ().newReadableStreamFromStreamReadable(u,d)},T0.wrap=function(u,d){var i0,U0;return new T0({objectMode:(i0=(U0=u.readableObjectMode)!==null&&U0!==void 0?U0:u.objectMode)!==null&&i0!==void 0?i0:!0,...d,destroy(O0,Q8){b.destroyer(u,O0),Q8(O0)}}).wrap(u)}}),_w=Z8(($,Q)=>{var X=Rz(),{ArrayPrototypeSlice:Y,Error:Z,FunctionPrototypeSymbolHasInstance:J,ObjectDefineProperty:q,ObjectDefineProperties:G,ObjectSetPrototypeOf:z,StringPrototypeToLowerCase:M,Symbol:j,SymbolHasInstance:P}=x8();Q.exports=N,N.WritableState=W;var{EventEmitter:D}=(EK(),I$(SK)),A=Ew().Stream,{Buffer:I}=(h8(),I$(b8)),H=dU(),{addAbortSignal:C}=tP(),{getHighWaterMark:B,getDefaultHighWaterMark:S}=eP(),{ERR_INVALID_ARG_TYPE:_,ERR_METHOD_NOT_IMPLEMENTED:k,ERR_MULTIPLE_CALLBACK:f,ERR_STREAM_CANNOT_PIPE:g,ERR_STREAM_DESTROYED:b,ERR_STREAM_ALREADY_FINISHED:m,ERR_STREAM_NULL_VALUES:l,ERR_STREAM_WRITE_AFTER_END:h,ERR_UNKNOWN_ENCODING:c}=eX().codes,{errorOrDestroy:T}=H;z(N.prototype,A.prototype),z(N,A);function K(){}var U=j("kOnFinished");function W(t,a,$0){if(typeof $0!=="boolean")$0=a instanceof h5();if(this.objectMode=!!(t&&t.objectMode),$0)this.objectMode=this.objectMode||!!(t&&t.writableObjectMode);this.highWaterMark=t?B(this,t,"writableHighWaterMark",$0):S(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let d0=!!(t&&t.decodeStrings===!1);this.decodeStrings=!d0,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=w.bind(void 0,a),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,V(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[U]=[]}function V(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}W.prototype.getBuffer=function t(){return Y(this.buffered,this.bufferedIndex)},q(W.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function N(t){let a=this instanceof h5();if(!a&&!J(N,this))return new N(t);if(this._writableState=new W(t,this,a),t){if(typeof t.write==="function")this._write=t.write;if(typeof t.writev==="function")this._writev=t.writev;if(typeof t.destroy==="function")this._destroy=t.destroy;if(typeof t.final==="function")this._final=t.final;if(typeof t.construct==="function")this._construct=t.construct;if(t.signal)C(t.signal,this)}A.call(this,t),H.construct(this,()=>{let $0=this._writableState;if(!$0.writing)p(this,$0);n(this,$0)})}q(N,P,{__proto__:null,value:function(t){if(J(this,t))return!0;if(this!==N)return!1;return t&&t._writableState instanceof W}}),N.prototype.pipe=function(){T(this,new g)};function L(t,a,$0,d0){let K0=t._writableState;if(typeof $0==="function")d0=$0,$0=K0.defaultEncoding;else{if(!$0)$0=K0.defaultEncoding;else if($0!=="buffer"&&!I.isEncoding($0))throw new c($0);if(typeof d0!=="function")d0=K}if(a===null)throw new l;else if(!K0.objectMode)if(typeof a==="string"){if(K0.decodeStrings!==!1)a=I.from(a,$0),$0="buffer"}else if(a instanceof I)$0="buffer";else if(A._isUint8Array(a))a=A._uint8ArrayToBuffer(a),$0="buffer";else throw new _("chunk",["string","Buffer","Uint8Array"],a);let z0;if(K0.ending)z0=new h;else if(K0.destroyed)z0=new b("write");if(z0)return X.nextTick(d0,z0),T(t,z0,!0),z0;return K0.pendingcb++,F(t,K0,a,$0,d0)}N.prototype.write=function(t,a,$0){return L(this,t,a,$0)===!0},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){let t=this._writableState;if(t.corked){if(t.corked--,!t.writing)p(this,t)}},N.prototype.setDefaultEncoding=function t(a){if(typeof a==="string")a=M(a);if(!I.isEncoding(a))throw new c(a);return this._writableState.defaultEncoding=a,this};function F(t,a,$0,d0,K0){let z0=a.objectMode?1:$0.length;a.length+=z0;let J0=a.length<a.highWaterMark;if(!J0)a.needDrain=!0;if(a.writing||a.corked||a.errored||!a.constructed){if(a.buffered.push({chunk:$0,encoding:d0,callback:K0}),a.allBuffers&&d0!=="buffer")a.allBuffers=!1;if(a.allNoop&&K0!==K)a.allNoop=!1}else a.writelen=z0,a.writecb=K0,a.writing=!0,a.sync=!0,t._write($0,d0,a.onwrite),a.sync=!1;return J0&&!a.errored&&!a.destroyed}function R(t,a,$0,d0,K0,z0,J0){if(a.writelen=d0,a.writecb=J0,a.writing=!0,a.sync=!0,a.destroyed)a.onwrite(new b("write"));else if($0)t._writev(K0,a.onwrite);else t._write(K0,z0,a.onwrite);a.sync=!1}function O(t,a,$0,d0){--a.pendingcb,d0($0),v(a),T(t,$0)}function w(t,a){let $0=t._writableState,d0=$0.sync,K0=$0.writecb;if(typeof K0!=="function"){T(t,new f);return}if($0.writing=!1,$0.writecb=null,$0.length-=$0.writelen,$0.writelen=0,a){if(a.stack,!$0.errored)$0.errored=a;if(t._readableState&&!t._readableState.errored)t._readableState.errored=a;if(d0)X.nextTick(O,t,$0,a,K0);else O(t,$0,a,K0)}else{if($0.buffered.length>$0.bufferedIndex)p(t,$0);if(d0)if($0.afterWriteTickInfo!==null&&$0.afterWriteTickInfo.cb===K0)$0.afterWriteTickInfo.count++;else $0.afterWriteTickInfo={count:1,cb:K0,stream:t,state:$0},X.nextTick(x,$0.afterWriteTickInfo);else E(t,$0,1,K0)}}function x({stream:t,state:a,count:$0,cb:d0}){return a.afterWriteTickInfo=null,E(t,a,$0,d0)}function E(t,a,$0,d0){if(!a.ending&&!t.destroyed&&a.length===0&&a.needDrain)a.needDrain=!1,t.emit("drain");while($0-- >0)a.pendingcb--,d0();if(a.destroyed)v(a);n(t,a)}function v(t){if(t.writing)return;for(let K0=t.bufferedIndex;K0<t.buffered.length;++K0){var a;let{chunk:z0,callback:J0}=t.buffered[K0],Y0=t.objectMode?1:z0.length;t.length-=Y0,J0((a=t.errored)!==null&&a!==void 0?a:new b("write"))}let $0=t[U].splice(0);for(let K0=0;K0<$0.length;K0++){var d0;$0[K0]((d0=t.errored)!==null&&d0!==void 0?d0:new b("end"))}V(t)}function p(t,a){if(a.corked||a.bufferProcessing||a.destroyed||!a.constructed)return;let{buffered:$0,bufferedIndex:d0,objectMode:K0}=a,z0=$0.length-d0;if(!z0)return;let J0=d0;if(a.bufferProcessing=!0,z0>1&&t._writev){a.pendingcb-=z0-1;let Y0=a.allNoop?K:(T0)=>{for(let M0=J0;M0<$0.length;++M0)$0[M0].callback(T0)},W0=a.allNoop&&J0===0?$0:Y($0,J0);W0.allBuffers=a.allBuffers,R(t,a,!0,a.length,W0,"",Y0),V(a)}else{do{let{chunk:Y0,encoding:W0,callback:T0}=$0[J0];$0[J0++]=null;let M0=K0?1:Y0.length;R(t,a,!1,M0,Y0,W0,T0)}while(J0<$0.length&&!a.writing);if(J0===$0.length)V(a);else if(J0>256)$0.splice(0,J0),a.bufferedIndex=0;else a.bufferedIndex=J0}a.bufferProcessing=!1}N.prototype._write=function(t,a,$0){if(this._writev)this._writev([{chunk:t,encoding:a}],$0);else throw new k("_write()")},N.prototype._writev=null,N.prototype.end=function(t,a,$0){let d0=this._writableState;if(typeof t==="function")$0=t,t=null,a=null;else if(typeof a==="function")$0=a,a=null;let K0;if(t!==null&&t!==void 0){let z0=L(this,t,a);if(z0 instanceof Z)K0=z0}if(d0.corked)d0.corked=1,this.uncork();if(K0);else if(!d0.errored&&!d0.ending)d0.ending=!0,n(this,d0,!0),d0.ended=!0;else if(d0.finished)K0=new m("end");else if(d0.destroyed)K0=new b("end");if(typeof $0==="function")if(K0||d0.finished)X.nextTick($0,K0);else d0[U].push($0);return this};function i(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function s(t,a){let $0=!1;function d0(K0){if($0){T(t,K0!==null&&K0!==void 0?K0:f());return}if($0=!0,a.pendingcb--,K0){let z0=a[U].splice(0);for(let J0=0;J0<z0.length;J0++)z0[J0](K0);T(t,K0,a.sync)}else if(i(a))a.prefinished=!0,t.emit("prefinish"),a.pendingcb++,X.nextTick(r,t,a)}a.sync=!0,a.pendingcb++;try{t._final(d0)}catch(K0){d0(K0)}a.sync=!1}function X0(t,a){if(!a.prefinished&&!a.finalCalled)if(typeof t._final==="function"&&!a.destroyed)a.finalCalled=!0,s(t,a);else a.prefinished=!0,t.emit("prefinish")}function n(t,a,$0){if(i(a)){if(X0(t,a),a.pendingcb===0){if($0)a.pendingcb++,X.nextTick((d0,K0)=>{if(i(K0))r(d0,K0);else K0.pendingcb--},t,a);else if(i(a))a.pendingcb++,r(t,a)}}}function r(t,a){a.pendingcb--,a.finished=!0;let $0=a[U].splice(0);for(let d0=0;d0<$0.length;d0++)$0[d0]();if(t.emit("finish"),a.autoDestroy){let d0=t._readableState;if(!d0||d0.autoDestroy&&(d0.endEmitted||d0.readable===!1))t.destroy()}}G(N.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){if(this._writableState)this._writableState.destroyed=t}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){if(this._writableState)this._writableState.writable=!!t}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;if(!t)return!1;return!t.destroyed&&!t.ending&&t.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var Z0=H.destroy;N.prototype.destroy=function(t,a){let $0=this._writableState;if(!$0.destroyed&&($0.bufferedIndex<$0.buffered.length||$0[U].length))X.nextTick(v,$0);return Z0.call(this,t,a),this},N.prototype._undestroy=H.undestroy,N.prototype._destroy=function(t,a){a(t)},N.prototype[D.captureRejectionSymbol]=function(t){this.destroy(t)};var e;function Q0(){if(e===void 0)e={};return e}N.fromWeb=function(t,a){return Q0().newStreamWritableFromWritableStream(t,a)},N.toWeb=function(t){return Q0().newWritableStreamFromStreamWritable(t)}}),C40=Z8(($,Q)=>{var X=Rz(),Y=(h8(),I$(b8)),{isReadable:Z,isWritable:J,isIterable:q,isNodeStream:G,isReadableNodeStream:z,isWritableNodeStream:M,isDuplexNodeStream:j,isReadableStream:P,isWritableStream:D}=m5(),A=Z7(),{AbortError:I,codes:{ERR_INVALID_ARG_TYPE:H,ERR_INVALID_RETURN_VALUE:C}}=eX(),{destroyer:B}=dU(),S=h5(),_=$H(),k=_w(),{createDeferredPromise:f}=EY(),g=Xm(),b=globalThis.Blob||Y.Blob,m=typeof b!=="undefined"?function U(W){return W instanceof b}:function U(W){return!1},l=globalThis.AbortController||FV().AbortController,{FunctionPrototypeCall:h}=x8();class c extends S{constructor(U){super(U);if((U===null||U===void 0?void 0:U.readable)===!1)this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0;if((U===null||U===void 0?void 0:U.writable)===!1)this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0}}Q.exports=function U(W,V){if(j(W))return W;if(z(W))return K({readable:W});if(M(W))return K({writable:W});if(G(W))return K({writable:!1,readable:!1});if(P(W))return K({readable:_.fromWeb(W)});if(D(W))return K({writable:k.fromWeb(W)});if(typeof W==="function"){let{value:L,write:F,final:R,destroy:O}=T(W);if(q(L))return g(c,L,{objectMode:!0,write:F,final:R,destroy:O});let w=L===null||L===void 0?void 0:L.then;if(typeof w==="function"){let x,E=h(w,L,(v)=>{if(v!=null)throw new C("nully","body",v)},(v)=>{B(x,v)});return x=new c({objectMode:!0,readable:!1,write:F,final(v){R(async()=>{try{await E,X.nextTick(v,null)}catch(p){X.nextTick(v,p)}})},destroy:O})}throw new C("Iterable, AsyncIterable or AsyncFunction",V,L)}if(m(W))return U(W.arrayBuffer());if(q(W))return g(c,W,{objectMode:!0,writable:!1});if(P(W===null||W===void 0?void 0:W.readable)&&D(W===null||W===void 0?void 0:W.writable))return c.fromWeb(W);if(typeof(W===null||W===void 0?void 0:W.writable)==="object"||typeof(W===null||W===void 0?void 0:W.readable)==="object"){let L=W!==null&&W!==void 0&&W.readable?z(W===null||W===void 0?void 0:W.readable)?W===null||W===void 0?void 0:W.readable:U(W.readable):void 0,F=W!==null&&W!==void 0&&W.writable?M(W===null||W===void 0?void 0:W.writable)?W===null||W===void 0?void 0:W.writable:U(W.writable):void 0;return K({readable:L,writable:F})}let N=W===null||W===void 0?void 0:W.then;if(typeof N==="function"){let L;return h(N,W,(F)=>{if(F!=null)L.push(F);L.push(null)},(F)=>{B(L,F)}),L=new c({objectMode:!0,writable:!1,read(){}})}throw new H(V,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],W)};function T(U){let{promise:W,resolve:V}=f(),N=new l,L=N.signal;return{value:U(async function*(){while(!0){let F=W;W=null;let{chunk:R,done:O,cb:w}=await F;if(X.nextTick(w),O)return;if(L.aborted)throw new I(void 0,{cause:L.reason});({promise:W,resolve:V}=f()),yield R}}(),{signal:L}),write(F,R,O){let w=V;V=null,w({chunk:F,done:!1,cb:O})},final(F){let R=V;V=null,R({done:!0,cb:F})},destroy(F,R){N.abort(),R(F)}}}function K(U){let W=U.readable&&typeof U.readable.read!=="function"?_.wrap(U.readable):U.readable,V=U.writable,N=!!Z(W),L=!!J(V),F,R,O,w,x;function E(v){let p=w;if(w=null,p)p(v);else if(v)x.destroy(v)}if(x=new c({readableObjectMode:!!(W!==null&&W!==void 0&&W.readableObjectMode),writableObjectMode:!!(V!==null&&V!==void 0&&V.writableObjectMode),readable:N,writable:L}),L)A(V,(v)=>{if(L=!1,v)B(W,v);E(v)}),x._write=function(v,p,i){if(V.write(v,p))i();else F=i},x._final=function(v){V.end(),R=v},V.on("drain",function(){if(F){let v=F;F=null,v()}}),V.on("finish",function(){if(R){let v=R;R=null,v()}});if(N)A(W,(v)=>{if(N=!1,v)B(W,v);E(v)}),W.on("readable",function(){if(O){let v=O;O=null,v()}}),W.on("end",function(){x.push(null)}),x._read=function(){while(!0){let v=W.read();if(v===null){O=x._read;return}if(!x.push(v))return}};return x._destroy=function(v,p){if(!v&&w!==null)v=new I;if(O=null,F=null,R=null,w===null)p(v);else w=p,B(V,v),B(W,v)},x}}),h5=Z8(($,Q)=>{var{ObjectDefineProperties:X,ObjectGetOwnPropertyDescriptor:Y,ObjectKeys:Z,ObjectSetPrototypeOf:J}=x8();Q.exports=z;var q=$H(),G=_w();J(z.prototype,q.prototype),J(z,q);{let D=Z(G.prototype);for(let A=0;A<D.length;A++){let I=D[A];if(!z.prototype[I])z.prototype[I]=G.prototype[I]}}function z(D){if(!(this instanceof z))return new z(D);if(q.call(this,D),G.call(this,D),D){if(this.allowHalfOpen=D.allowHalfOpen!==!1,D.readable===!1)this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0;if(D.writable===!1)this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0}else this.allowHalfOpen=!0}X(z.prototype,{writable:{__proto__:null,...Y(G.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Y(G.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Y(G.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Y(G.prototype,"writableBuffer")},writableLength:{__proto__:null,...Y(G.prototype,"writableLength")},writableFinished:{__proto__:null,...Y(G.prototype,"writableFinished")},writableCorked:{__proto__:null,...Y(G.prototype,"writableCorked")},writableEnded:{__proto__:null,...Y(G.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Y(G.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){if(this._readableState===void 0||this._writableState===void 0)return!1;return this._readableState.destroyed&&this._writableState.destroyed},set(D){if(this._readableState&&this._writableState)this._readableState.destroyed=D,this._writableState.destroyed=D}}});var M;function j(){if(M===void 0)M={};return M}z.fromWeb=function(D,A){return j().newStreamDuplexFromReadableWritablePair(D,A)},z.toWeb=function(D){return j().newReadableWritablePairFromDuplex(D)};var P;z.from=function(D){if(!P)P=C40();return P(D,"body")}}),Ym=Z8(($,Q)=>{var{ObjectSetPrototypeOf:X,Symbol:Y}=x8();Q.exports=z;var{ERR_METHOD_NOT_IMPLEMENTED:Z}=eX().codes,J=h5(),{getHighWaterMark:q}=eP();X(z.prototype,J.prototype),X(z,J);var G=Y("kCallback");function z(P){if(!(this instanceof z))return new z(P);let D=P?q(this,P,"readableHighWaterMark",!0):null;if(D===0)P={...P,highWaterMark:null,readableHighWaterMark:D,writableHighWaterMark:P.writableHighWaterMark||0};if(J.call(this,P),this._readableState.sync=!1,this[G]=null,P){if(typeof P.transform==="function")this._transform=P.transform;if(typeof P.flush==="function")this._flush=P.flush}this.on("prefinish",j)}function M(P){if(typeof this._flush==="function"&&!this.destroyed)this._flush((D,A)=>{if(D){if(P)P(D);else this.destroy(D);return}if(A!=null)this.push(A);if(this.push(null),P)P()});else if(this.push(null),P)P()}function j(){if(this._final!==M)M.call(this)}z.prototype._final=M,z.prototype._transform=function(P,D,A){throw new Z("_transform()")},z.prototype._write=function(P,D,A){let I=this._readableState,H=this._writableState,C=I.length;this._transform(P,D,(B,S)=>{if(B){A(B);return}if(S!=null)this.push(S);if(H.ended||C===I.length||I.length<I.highWaterMark)A();else this[G]=A})},z.prototype._read=function(){if(this[G]){let P=this[G];this[G]=null,P()}}}),Zm=Z8(($,Q)=>{var{ObjectSetPrototypeOf:X}=x8();Q.exports=Z;var Y=Ym();X(Z.prototype,Y.prototype),X(Z,Y);function Z(J){if(!(this instanceof Z))return new Z(J);Y.call(this,J)}Z.prototype._transform=function(J,q,G){G(null,J)}}),kw=Z8(($,Q)=>{var X=Rz(),{ArrayIsArray:Y,Promise:Z,SymbolAsyncIterator:J,SymbolDispose:q}=x8(),G=Z7(),{once:z}=EY(),M=dU(),j=h5(),{aggregateTwoErrors:P,codes:{ERR_INVALID_ARG_TYPE:D,ERR_INVALID_RETURN_VALUE:A,ERR_MISSING_ARGS:I,ERR_STREAM_DESTROYED:H,ERR_STREAM_PREMATURE_CLOSE:C},AbortError:B}=eX(),{validateFunction:S,validateAbortSignal:_}=BV(),{isIterable:k,isReadable:f,isReadableNodeStream:g,isNodeStream:b,isTransformStream:m,isWebStream:l,isReadableStream:h,isReadableFinished:c}=m5(),T=globalThis.AbortController||FV().AbortController,K,U,W;function V(v,p,i){let s=!1;v.on("close",()=>{s=!0});let X0=G(v,{readable:p,writable:i},(n)=>{s=!n});return{destroy:(n)=>{if(s)return;s=!0,M.destroyer(v,n||new H("pipe"))},cleanup:X0}}function N(v){return S(v[v.length-1],"streams[stream.length - 1]"),v.pop()}function L(v){if(k(v))return v;else if(g(v))return F(v);throw new D("val",["Readable","Iterable","AsyncIterable"],v)}async function*F(v){if(!U)U=$H();yield*U.prototype[J].call(v)}async function R(v,p,i,{end:s}){let X0,n=null,r=(Q0)=>{if(Q0)X0=Q0;if(n){let t=n;n=null,t()}},Z0=()=>new Z((Q0,t)=>{if(X0)t(X0);else n=()=>{if(X0)t(X0);else Q0()}});p.on("drain",r);let e=G(p,{readable:!1},r);try{if(p.writableNeedDrain)await Z0();for await(let Q0 of v)if(!p.write(Q0))await Z0();if(s)p.end(),await Z0();i()}catch(Q0){i(X0!==Q0?P(X0,Q0):Q0)}finally{e(),p.off("drain",r)}}async function O(v,p,i,{end:s}){if(m(p))p=p.writable;let X0=p.getWriter();try{for await(let n of v)await X0.ready,X0.write(n).catch(()=>{});if(await X0.ready,s)await X0.close();i()}catch(n){try{await X0.abort(n),i(n)}catch(r){i(r)}}}function w(...v){return x(v,z(N(v)))}function x(v,p,i){if(v.length===1&&Y(v[0]))v=v[0];if(v.length<2)throw new I("streams");let s=new T,X0=s.signal,n=i===null||i===void 0?void 0:i.signal,r=[];_(n,"options.signal");function Z0(){K0(new B)}W=W||EY().addAbortListener;let e;if(n)e=W(n,Z0);let Q0,t,a=[],$0=0;function d0(T0){K0(T0,--$0===0)}function K0(T0,M0){var A0;if(T0&&(!Q0||Q0.code==="ERR_STREAM_PREMATURE_CLOSE"))Q0=T0;if(!Q0&&!M0)return;while(a.length)a.shift()(Q0);if((A0=e)===null||A0===void 0||A0[q](),s.abort(),M0){if(!Q0)r.forEach((C$)=>C$());X.nextTick(p,Q0,t)}}let z0;for(let T0=0;T0<v.length;T0++){let M0=v[T0],A0=T0<v.length-1,C$=T0>0,P0=A0||(i===null||i===void 0?void 0:i.end)!==!1,I0=T0===v.length-1;if(b(M0)){let $8=function(C0){if(C0&&C0.name!=="AbortError"&&C0.code!=="ERR_STREAM_PREMATURE_CLOSE")d0(C0)};var J0=$8;if(P0){let{destroy:C0,cleanup:S0}=V(M0,A0,C$);if(a.push(C0),f(M0)&&I0)r.push(S0)}if(M0.on("error",$8),f(M0)&&I0)r.push(()=>{M0.removeListener("error",$8)})}if(T0===0)if(typeof M0==="function"){if(z0=M0({signal:X0}),!k(z0))throw new A("Iterable, AsyncIterable or Stream","source",z0)}else if(k(M0)||g(M0)||m(M0))z0=M0;else z0=j.from(M0);else if(typeof M0==="function"){if(m(z0)){var Y0;z0=L((Y0=z0)===null||Y0===void 0?void 0:Y0.readable)}else z0=L(z0);if(z0=M0(z0,{signal:X0}),A0){if(!k(z0,!0))throw new A("AsyncIterable",`transform[${T0-1}]`,z0)}else{var W0;if(!K)K=Zm();let $8=new K({objectMode:!0}),C0=(W0=z0)===null||W0===void 0?void 0:W0.then;if(typeof C0==="function")$0++,C0.call(z0,(F0)=>{if(t=F0,F0!=null)$8.write(F0);if(P0)$8.end();X.nextTick(d0)},(F0)=>{$8.destroy(F0),X.nextTick(d0,F0)});else if(k(z0,!0))$0++,R(z0,$8,d0,{end:P0});else if(h(z0)||m(z0)){let F0=z0.readable||z0;$0++,R(F0,$8,d0,{end:P0})}else throw new A("AsyncIterable or Promise","destination",z0);z0=$8;let{destroy:S0,cleanup:o8}=V(z0,!1,!0);if(a.push(S0),I0)r.push(o8)}}else if(b(M0)){if(g(z0)){$0+=2;let $8=E(z0,M0,d0,{end:P0});if(f(M0)&&I0)r.push($8)}else if(m(z0)||h(z0)){let $8=z0.readable||z0;$0++,R($8,M0,d0,{end:P0})}else if(k(z0))$0++,R(z0,M0,d0,{end:P0});else throw new D("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],z0);z0=M0}else if(l(M0)){if(g(z0))$0++,O(L(z0),M0,d0,{end:P0});else if(h(z0)||k(z0))$0++,O(z0,M0,d0,{end:P0});else if(m(z0))$0++,O(z0.readable,M0,d0,{end:P0});else throw new D("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],z0);z0=M0}else z0=j.from(M0)}if(X0!==null&&X0!==void 0&&X0.aborted||n!==null&&n!==void 0&&n.aborted)X.nextTick(Z0);return z0}function E(v,p,i,{end:s}){let X0=!1;if(p.on("close",()=>{if(!X0)i(new C)}),v.pipe(p,{end:!1}),s){let r=function(){X0=!0,p.end()};var n=r;if(c(v))X.nextTick(r);else v.once("end",r)}else i();return G(v,{readable:!0,writable:!1},(r)=>{let Z0=v._readableState;if(r&&r.code==="ERR_STREAM_PREMATURE_CLOSE"&&Z0&&Z0.ended&&!Z0.errored&&!Z0.errorEmitted)v.once("end",i).once("error",i);else i(r)}),G(p,{readable:!1,writable:!0},i)}Q.exports={pipelineImpl:x,pipeline:w}}),Jm=Z8(($,Q)=>{var{pipeline:X}=kw(),Y=h5(),{destroyer:Z}=dU(),{isNodeStream:J,isReadable:q,isWritable:G,isWebStream:z,isTransformStream:M,isWritableStream:j,isReadableStream:P}=m5(),{AbortError:D,codes:{ERR_INVALID_ARG_VALUE:A,ERR_MISSING_ARGS:I}}=eX(),H=Z7();Q.exports=function C(...B){if(B.length===0)throw new I("streams");if(B.length===1)return Y.from(B[0]);let S=[...B];if(typeof B[0]==="function")B[0]=Y.from(B[0]);if(typeof B[B.length-1]==="function"){let K=B.length-1;B[K]=Y.from(B[K])}for(let K=0;K<B.length;++K){if(!J(B[K])&&!z(B[K]))continue;if(K<B.length-1&&!(q(B[K])||P(B[K])||M(B[K])))throw new A(`streams[${K}]`,S[K],"must be readable");if(K>0&&!(G(B[K])||j(B[K])||M(B[K])))throw new A(`streams[${K}]`,S[K],"must be writable")}let _,k,f,g,b;function m(K){let U=g;if(g=null,U)U(K);else if(K)b.destroy(K);else if(!T&&!c)b.destroy()}let l=B[0],h=X(B,m),c=!!(G(l)||j(l)||M(l)),T=!!(q(h)||P(h)||M(h));if(b=new Y({writableObjectMode:!!(l!==null&&l!==void 0&&l.writableObjectMode),readableObjectMode:!!(h!==null&&h!==void 0&&h.readableObjectMode),writable:c,readable:T}),c){if(J(l))b._write=function(U,W,V){if(l.write(U,W))V();else _=V},b._final=function(U){l.end(),k=U},l.on("drain",function(){if(_){let U=_;_=null,U()}});else if(z(l)){let U=(M(l)?l.writable:l).getWriter();b._write=async function(W,V,N){try{await U.ready,U.write(W).catch(()=>{}),N()}catch(L){N(L)}},b._final=async function(W){try{await U.ready,U.close().catch(()=>{}),k=W}catch(V){W(V)}}}let K=M(h)?h.readable:h;H(K,()=>{if(k){let U=k;k=null,U()}})}if(T){if(J(h))h.on("readable",function(){if(f){let K=f;f=null,K()}}),h.on("end",function(){b.push(null)}),b._read=function(){while(!0){let K=h.read();if(K===null){f=b._read;return}if(!b.push(K))return}};else if(z(h)){let K=(M(h)?h.readable:h).getReader();b._read=async function(){while(!0)try{let{value:U,done:W}=await K.read();if(!b.push(U))return;if(W){b.push(null);return}}catch{return}}}}return b._destroy=function(K,U){if(!K&&g!==null)K=new D;if(f=null,_=null,k=null,g===null)U(K);else if(g=U,J(h))Z(h,K)},b}}),L40=Z8(($,Q)=>{var X=globalThis.AbortController||FV().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Y,ERR_INVALID_ARG_TYPE:Z,ERR_MISSING_ARGS:J,ERR_OUT_OF_RANGE:q},AbortError:G}=eX(),{validateAbortSignal:z,validateInteger:M,validateObject:j}=BV(),P=x8().Symbol("kWeak"),D=x8().Symbol("kResistStopPropagation"),{finished:A}=Z7(),I=Jm(),{addAbortSignalNoValidate:H}=tP(),{isWritable:C,isNodeStream:B}=m5(),{deprecate:S}=EY(),{ArrayPrototypePush:_,Boolean:k,MathFloor:f,Number:g,NumberIsNaN:b,Promise:m,PromiseReject:l,PromiseResolve:h,PromisePrototypeThen:c,Symbol:T}=x8(),K=T("kEmpty"),U=T("kEof");function W(n,r){if(r!=null)j(r,"options");if((r===null||r===void 0?void 0:r.signal)!=null)z(r.signal,"options.signal");if(B(n)&&!C(n))throw new Y("stream",n,"must be writable");let Z0=I(this,n);if(r!==null&&r!==void 0&&r.signal)H(r.signal,Z0);return Z0}function V(n,r){if(typeof n!=="function")throw new Z("fn",["Function","AsyncFunction"],n);if(r!=null)j(r,"options");if((r===null||r===void 0?void 0:r.signal)!=null)z(r.signal,"options.signal");let Z0=1;if((r===null||r===void 0?void 0:r.concurrency)!=null)Z0=f(r.concurrency);let e=Z0-1;if((r===null||r===void 0?void 0:r.highWaterMark)!=null)e=f(r.highWaterMark);return M(Z0,"options.concurrency",1),M(e,"options.highWaterMark",0),e+=Z0,async function*Q0(){let t=EY().AbortSignalAny([r===null||r===void 0?void 0:r.signal].filter(k)),a=this,$0=[],d0={signal:t},K0,z0,J0=!1,Y0=0;function W0(){J0=!0,T0()}function T0(){Y0-=1,M0()}function M0(){if(z0&&!J0&&Y0<Z0&&$0.length<e)z0(),z0=null}async function A0(){try{for await(let C$ of a){if(J0)return;if(t.aborted)throw new G;try{if(C$=n(C$,d0),C$===K)continue;C$=h(C$)}catch(P0){C$=l(P0)}if(Y0+=1,c(C$,T0,W0),$0.push(C$),K0)K0(),K0=null;if(!J0&&($0.length>=e||Y0>=Z0))await new m((P0)=>{z0=P0})}$0.push(U)}catch(C$){let P0=l(C$);c(P0,T0,W0),$0.push(P0)}finally{if(J0=!0,K0)K0(),K0=null}}A0();try{while(!0){while($0.length>0){let C$=await $0[0];if(C$===U)return;if(t.aborted)throw new G;if(C$!==K)yield C$;$0.shift(),M0()}await new m((C$)=>{K0=C$})}}finally{if(J0=!0,z0)z0(),z0=null}}.call(this)}function N(n=void 0){if(n!=null)j(n,"options");if((n===null||n===void 0?void 0:n.signal)!=null)z(n.signal,"options.signal");return async function*r(){let Z0=0;for await(let Q0 of this){var e;if(n!==null&&n!==void 0&&(e=n.signal)!==null&&e!==void 0&&e.aborted)throw new G({cause:n.signal.reason});yield[Z0++,Q0]}}.call(this)}async function L(n,r=void 0){for await(let Z0 of w.call(this,n,r))return!0;return!1}async function F(n,r=void 0){if(typeof n!=="function")throw new Z("fn",["Function","AsyncFunction"],n);return!await L.call(this,async(...Z0)=>{return!await n(...Z0)},r)}async function R(n,r){for await(let Z0 of w.call(this,n,r))return Z0;return}async function O(n,r){if(typeof n!=="function")throw new Z("fn",["Function","AsyncFunction"],n);async function Z0(e,Q0){return await n(e,Q0),K}for await(let e of V.call(this,Z0,r));}function w(n,r){if(typeof n!=="function")throw new Z("fn",["Function","AsyncFunction"],n);async function Z0(e,Q0){if(await n(e,Q0))return e;return K}return V.call(this,Z0,r)}class x extends J{constructor(){super("reduce");this.message="Reduce of an empty stream requires an initial value"}}async function E(n,r,Z0){var e;if(typeof n!=="function")throw new Z("reducer",["Function","AsyncFunction"],n);if(Z0!=null)j(Z0,"options");if((Z0===null||Z0===void 0?void 0:Z0.signal)!=null)z(Z0.signal,"options.signal");let Q0=arguments.length>1;if(Z0!==null&&Z0!==void 0&&(e=Z0.signal)!==null&&e!==void 0&&e.aborted){let K0=new G(void 0,{cause:Z0.signal.reason});throw this.once("error",()=>{}),await A(this.destroy(K0)),K0}let t=new X,a=t.signal;if(Z0!==null&&Z0!==void 0&&Z0.signal){let K0={once:!0,[P]:this,[D]:!0};Z0.signal.addEventListener("abort",()=>t.abort(),K0)}let $0=!1;try{for await(let K0 of this){var d0;if($0=!0,Z0!==null&&Z0!==void 0&&(d0=Z0.signal)!==null&&d0!==void 0&&d0.aborted)throw new G;if(!Q0)r=K0,Q0=!0;else r=await n(r,K0,{signal:a})}if(!$0&&!Q0)throw new x}finally{t.abort()}return r}async function v(n){if(n!=null)j(n,"options");if((n===null||n===void 0?void 0:n.signal)!=null)z(n.signal,"options.signal");let r=[];for await(let e of this){var Z0;if(n!==null&&n!==void 0&&(Z0=n.signal)!==null&&Z0!==void 0&&Z0.aborted)throw new G(void 0,{cause:n.signal.reason});_(r,e)}return r}function p(n,r){let Z0=V.call(this,n,r);return async function*e(){for await(let Q0 of Z0)yield*Q0}.call(this)}function i(n){if(n=g(n),b(n))return 0;if(n<0)throw new q("number",">= 0",n);return n}function s(n,r=void 0){if(r!=null)j(r,"options");if((r===null||r===void 0?void 0:r.signal)!=null)z(r.signal,"options.signal");return n=i(n),async function*Z0(){var e;if(r!==null&&r!==void 0&&(e=r.signal)!==null&&e!==void 0&&e.aborted)throw new G;for await(let t of this){var Q0;if(r!==null&&r!==void 0&&(Q0=r.signal)!==null&&Q0!==void 0&&Q0.aborted)throw new G;if(n--<=0)yield t}}.call(this)}function X0(n,r=void 0){if(r!=null)j(r,"options");if((r===null||r===void 0?void 0:r.signal)!=null)z(r.signal,"options.signal");return n=i(n),async function*Z0(){var e;if(r!==null&&r!==void 0&&(e=r.signal)!==null&&e!==void 0&&e.aborted)throw new G;for await(let t of this){var Q0;if(r!==null&&r!==void 0&&(Q0=r.signal)!==null&&Q0!==void 0&&Q0.aborted)throw new G;if(n-- >0)yield t;if(n<=0)return}}.call(this)}Q.exports.streamReturningOperators={asIndexedPairs:S(N,"readable.asIndexedPairs will be removed in a future version."),drop:s,filter:w,flatMap:p,map:V,take:X0,compose:W},Q.exports.promiseReturningOperators={every:F,forEach:O,reduce:E,toArray:v,some:L,find:R}}),qm=Z8(($,Q)=>{var{ArrayPrototypePop:X,Promise:Y}=x8(),{isIterable:Z,isNodeStream:J,isWebStream:q}=m5(),{pipelineImpl:G}=kw(),{finished:z}=Z7();Gm();function M(...j){return new Y((P,D)=>{let A,I,H=j[j.length-1];if(H&&typeof H==="object"&&!J(H)&&!Z(H)&&!q(H)){let C=X(j);A=C.signal,I=C.end}G(j,(C,B)=>{if(C)D(C);else P(B)},{signal:A,end:I})})}Q.exports={finished:z,pipeline:M}}),Gm=Z8(($,Q)=>{var{Buffer:X}=(h8(),I$(b8)),{ObjectDefineProperty:Y,ObjectKeys:Z,ReflectApply:J}=x8(),{promisify:{custom:q}}=EY(),{streamReturningOperators:G,promiseReturningOperators:z}=L40(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:M}}=eX(),j=Jm(),{setDefaultHighWaterMark:P,getDefaultHighWaterMark:D}=eP(),{pipeline:A}=kw(),{destroyer:I}=dU(),H=Z7(),C=qm(),B=m5(),S=Q.exports=Ew().Stream;S.isDestroyed=B.isDestroyed,S.isDisturbed=B.isDisturbed,S.isErrored=B.isErrored,S.isReadable=B.isReadable,S.isWritable=B.isWritable,S.Readable=$H();for(let k of Z(G)){let f=function(...b){if(new.target)throw M();return S.Readable.from(J(g,this,b))},g=G[k];Y(f,"name",{__proto__:null,value:g.name}),Y(f,"length",{__proto__:null,value:g.length}),Y(S.Readable.prototype,k,{__proto__:null,value:f,enumerable:!1,configurable:!0,writable:!0})}for(let k of Z(z)){let f=function(...b){if(new.target)throw M();return J(g,this,b)},g=z[k];Y(f,"name",{__proto__:null,value:g.name}),Y(f,"length",{__proto__:null,value:g.length}),Y(S.Readable.prototype,k,{__proto__:null,value:f,enumerable:!1,configurable:!0,writable:!0})}S.Writable=_w(),S.Duplex=h5(),S.Transform=Ym(),S.PassThrough=Zm(),S.pipeline=A;var{addAbortSignal:_}=tP();S.addAbortSignal=_,S.finished=H,S.destroy=I,S.compose=j,S.setDefaultHighWaterMark=P,S.getDefaultHighWaterMark=D,Y(S,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return C}}),Y(A,q,{__proto__:null,enumerable:!0,get(){return C.pipeline}}),Y(H,q,{__proto__:null,enumerable:!0,get(){return C.finished}}),S.Stream=S,S._isUint8Array=function k(f){return f instanceof Uint8Array},S._uint8ArrayToBuffer=function k(f){return X.from(f.buffer,f.byteOffset,f.byteLength)}}),w40=Z8(($,Q)=>{var X=xw();{let Y=Gm(),Z=qm(),J=Y.Readable.destroy;Q.exports=Y.Readable,Q.exports._uint8ArrayToBuffer=Y._uint8ArrayToBuffer,Q.exports._isUint8Array=Y._isUint8Array,Q.exports.isDisturbed=Y.isDisturbed,Q.exports.isErrored=Y.isErrored,Q.exports.isReadable=Y.isReadable,Q.exports.Readable=Y.Readable,Q.exports.Writable=Y.Writable,Q.exports.Duplex=Y.Duplex,Q.exports.Transform=Y.Transform,Q.exports.PassThrough=Y.PassThrough,Q.exports.addAbortSignal=Y.addAbortSignal,Q.exports.finished=Y.finished,Q.exports.destroy=Y.destroy,Q.exports.destroy=J,Q.exports.pipeline=Y.pipeline,Q.exports.compose=Y.compose,Object.defineProperty(Y,"promises",{configurable:!0,enumerable:!0,get(){return Z}}),Q.exports.Stream=Y.Stream}Q.exports.default=Q.exports});zm.exports=w40()});var $Y={};r8($Y,{webcrypto:()=>PU0,rng:()=>SK0,randomUUID:()=>MU0,randomFillSync:()=>KU0,randomFill:()=>zU0,randomBytes:()=>EK0,publicEncrypt:()=>ZU0,publicDecrypt:()=>qU0,pseudoRandomBytes:()=>BK0,prng:()=>FK0,privateEncrypt:()=>JU0,privateDecrypt:()=>GU0,pbkdf2Sync:()=>yK0,pbkdf2:()=>gK0,listCiphers:()=>nK0,getRandomValues:()=>OU0,getHashes:()=>vK0,getDiffieHellman:()=>sK0,getCurves:()=>jU0,getCiphers:()=>iK0,default:()=>HU0,createVerify:()=>QU0,createSign:()=>eK0,createHmac:()=>fK0,createHash:()=>kK0,createECDH:()=>YU0,createDiffieHellmanGroup:()=>rK0,createDiffieHellman:()=>aK0,createDecipheriv:()=>dK0,createDecipher:()=>lK0,createCredentials:()=>UU0,createCipheriv:()=>cK0,createCipher:()=>hK0,constants:()=>WU0,Verify:()=>XU0,Sign:()=>$U0,Hmac:()=>xK0,Hash:()=>_K0,DiffieHellmanGroup:()=>oK0,DiffieHellman:()=>tK0,Decipheriv:()=>uK0,Decipher:()=>pK0,DEFAULT_ENCODING:()=>VU0,Cipheriv:()=>mK0,Cipher:()=>bK0});function jU0(){return DU0}var T40,I40,Km,F40,B40,S40=($,Q,X)=>{X=$!=null?T40(I40($)):{};let Y=Q||!$||!$.__esModule?Km(X,"default",{value:$,enumerable:!0}):X;for(let Z of F40($))if(!B40.call(Y,Z))Km(Y,Z,{get:()=>$[Z],enumerable:!0});return Y},o0=($,Q)=>()=>(Q||$((Q={exports:{}}).exports,Q),Q.exports),QH,XH,Wm,E40,vw,gw,_Y,yw,Vm,_40,Om,k40,x40,f40,v40,c5,J7,Mm,eZ,Dm,YH,g40,oY,y40,b40,h40,jm,AJ,EV,Pm,m40,Hm,c40,Nm,p40,l40,u40,d40,bw,i40,hw,n40,o40,r40,s40,a40,t40,e40,$K0,QK0,XK0,YK0,ZK0,JK0,qK0,Um,GK0,SV,zK0,Am,Rm,KK0,UK0,Cm,WK0,VK0,_V,OK0,MK0,DK0,jK0,PK0,HK0,Lm,NK0,wm,Tm,Im,mw,Fm,AK0,Bm,RK0,CK0,fw,LK0,wK0,TK0,IK0,E$,FK0,BK0,SK0,EK0,_K0,kK0,xK0,fK0,vK0,gK0,yK0,bK0,hK0,mK0,cK0,pK0,lK0,uK0,dK0,iK0,nK0,oK0,rK0,sK0,aK0,tK0,eK0,$U0,QU0,XU0,YU0,ZU0,JU0,qU0,GU0,zU0,KU0,UU0,WU0,VU0="buffer",OU0=($)=>{return crypto.getRandomValues($)},MU0=()=>{return crypto.randomUUID()},DU0,PU0,HU0;var QY=y(()=>{T40=Object.create,{getPrototypeOf:I40,defineProperty:Km,getOwnPropertyNames:F40}=Object,B40=Object.prototype.hasOwnProperty,QH=o0(($,Q)=>{Q.exports=(QY(),I$($Y)).randomBytes}),XH=o0(($,Q)=>{Q.exports=(QY(),I$($Y)).createHash}),Wm=o0(($,Q)=>{Q.exports=(QY(),I$($Y)).createHmac}),E40=o0(($,Q)=>{Q.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}}),vw=o0(($,Q)=>{var X=Math.pow(2,30)-1;Q.exports=function(Y,Z){if(typeof Y!=="number")throw new TypeError("Iterations not a number");if(Y<0)throw new TypeError("Bad iterations");if(typeof Z!=="number")throw new TypeError("Key length not a number");if(Z<0||Z>X||Z!==Z)throw new TypeError("Bad key length")}}),gw=o0(($,Q)=>{var X;if(globalThis.process&&globalThis.process.browser)X="utf-8";else if(globalThis.process&&globalThis.process.version)Y=parseInt(process.version.split(".")[0].slice(1),10),X=Y>=6?"utf-8":"binary";else X="utf-8";var Y;Q.exports=X}),_Y=o0(($,Q)=>{/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var X=(h8(),I$(b8)),Y=X.Buffer;function Z(q,G){for(var z in q)G[z]=q[z]}if(Y.from&&Y.alloc&&Y.allocUnsafe&&Y.allocUnsafeSlow)Q.exports=X;else Z(X,$),$.Buffer=J;function J(q,G,z){return Y(q,G,z)}J.prototype=Object.create(Y.prototype),Z(Y,J),J.from=function(q,G,z){if(typeof q==="number")throw new TypeError("Argument must not be a number");return Y(q,G,z)},J.alloc=function(q,G,z){if(typeof q!=="number")throw new TypeError("Argument must be a number");var M=Y(q);if(G!==void 0)if(typeof z==="string")M.fill(G,z);else M.fill(G);else M.fill(0);return M},J.allocUnsafe=function(q){if(typeof q!=="number")throw new TypeError("Argument must be a number");return Y(q)},J.allocUnsafeSlow=function(q){if(typeof q!=="number")throw new TypeError("Argument must be a number");return X.SlowBuffer(q)}}),yw=o0(($,Q)=>{var X=_Y().Buffer;Q.exports=function(Y,Z,J){if(X.isBuffer(Y))return Y;else if(typeof Y==="string")return X.from(Y,Z);else if(ArrayBuffer.isView(Y))return X.from(Y.buffer);else throw new TypeError(J+" must be a string, a Buffer, a typed array or a DataView")}}),Vm=o0(($,Q)=>{var X={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20},Y=Wm(),Z=_Y().Buffer,J=vw(),q=gw(),G=yw();function z(M,j,P,D,A){J(P,D),M=G(M,q,"Password"),j=G(j,q,"Salt"),A=A||"sha1";var I=Z.allocUnsafe(D),H=Z.allocUnsafe(j.length+4);j.copy(H,0,0,j.length);var C=0,B=X[A],S=Math.ceil(D/B);for(var _=1;_<=S;_++){H.writeUInt32BE(_,j.length);var k=Y(A,M).update(H).digest(),f=k;for(var g=1;g<P;g++){f=Y(A,M).update(f).digest();for(var b=0;b<B;b++)k[b]^=f[b]}k.copy(I,C),C+=B}return I}Q.exports=z}),_40=o0(($,Q)=>{var X=_Y().Buffer,Y=vw(),Z=gw(),J=Vm(),q=yw(),G,z=globalThis.crypto&&globalThis.crypto.subtle,M={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},j=[];function P(C){if(globalThis.process&&!globalThis.process.browser)return Promise.resolve(!1);if(!z||!z.importKey||!z.deriveBits)return Promise.resolve(!1);if(j[C]!==void 0)return j[C];G=G||X.alloc(8);var B=I(G,G,10,128,C).then(function(){return!0}).catch(function(){return!1});return j[C]=B,B}var D;function A(){if(D)return D;if(globalThis.process&&globalThis.process.nextTick)D=globalThis.process.nextTick;else if(globalThis.queueMicrotask)D=globalThis.queueMicrotask;else if(globalThis.setImmediate)D=globalThis.setImmediate;else D=globalThis.setTimeout;return D}function I(C,B,S,_,k){return z.importKey("raw",C,{name:"PBKDF2"},!1,["deriveBits"]).then(function(f){return z.deriveBits({name:"PBKDF2",salt:B,iterations:S,hash:{name:k}},f,_<<3)}).then(function(f){return X.from(f)})}function H(C,B){C.then(function(S){A()(function(){B(null,S)})},function(S){A()(function(){B(S)})})}Q.exports=function(C,B,S,_,k,f){if(typeof k==="function")f=k,k=void 0;k=k||"sha1";var g=M[k.toLowerCase()];if(!g||typeof globalThis.Promise!=="function"){A()(function(){var b;try{b=J(C,B,S,_,k)}catch(m){return f(m)}f(null,b)});return}if(Y(S,_),C=q(C,Z,"Password"),B=q(B,Z,"Salt"),typeof f!=="function")throw new Error("No callback provided to pbkdf2");H(P(g).then(function(b){if(b)return I(C,B,S,_,g);return J(C,B,S,_,k)}),f)}}),Om=o0(($)=>{var Q=(QY(),I$($Y)),X=vw(),Y=gw(),Z=yw();function J(G,z,M,j,P,D){if(X(M,j),G=Z(G,Y,"Password"),z=Z(z,Y,"Salt"),typeof P==="function")D=P,P="sha1";if(typeof D!=="function")throw new Error("No callback provided to pbkdf2");return Q.pbkdf2(G,z,M,j,P,D)}function q(G,z,M,j,P){return X(M,j),G=Z(G,Y,"Password"),z=Z(z,Y,"Salt"),P=P||"sha1",Q.pbkdf2Sync(G,z,M,j,P)}if(!Q.pbkdf2Sync||Q.pbkdf2Sync.toString().indexOf("keylen, digest")===-1)$.pbkdf2Sync=Vm(),$.pbkdf2=_40();else $.pbkdf2Sync=q,$.pbkdf2=J}),k40=o0(($)=>{var Q=(QY(),I$($Y));$.createCipher=$.Cipher=Q.createCipher,$.createCipheriv=$.Cipheriv=Q.createCipheriv,$.createDecipher=$.Decipher=Q.createDecipher,$.createDecipheriv=$.Decipheriv=Q.createDecipheriv,$.listCiphers=$.getCiphers=Q.getCiphers}),x40=o0(($)=>{var Q=(QY(),I$($Y));$.DiffieHellmanGroup=Q.DiffieHellmanGroup,$.createDiffieHellmanGroup=Q.createDiffieHellmanGroup,$.getDiffieHellman=Q.getDiffieHellman,$.createDiffieHellman=Q.createDiffieHellman,$.DiffieHellman=Q.DiffieHellman}),f40=o0(($)=>{var Q=(QY(),I$($Y));$.createSign=Q.createSign,$.Sign=Q.Sign,$.createVerify=Q.createVerify,$.Verify=Q.Verify}),v40=o0(($,Q)=>{Q.exports={name:"elliptic",version:"6.6.1",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}}),c5=o0(($,Q)=>{(function(X,Y){function Z(T,K){if(!T)throw new Error(K||"Assertion failed")}function J(T,K){T.super_=K;var U=function(){};U.prototype=K.prototype,T.prototype=new U,T.prototype.constructor=T}function q(T,K,U){if(q.isBN(T))return T;if(this.negative=0,this.words=null,this.length=0,this.red=null,T!==null){if(K==="le"||K==="be")U=K,K=10;this._init(T||0,K||10,U||"be")}}if(typeof X==="object")X.exports=q;else Y.BN=q;q.BN=q,q.wordSize=26;var G;try{if(typeof window!=="undefined"&&typeof window.Buffer!=="undefined")G=window.Buffer;else G=(h8(),I$(b8)).Buffer}catch(T){}q.isBN=function T(K){if(K instanceof q)return!0;return K!==null&&typeof K==="object"&&K.constructor.wordSize===q.wordSize&&Array.isArray(K.words)},q.max=function T(K,U){if(K.cmp(U)>0)return K;return U},q.min=function T(K,U){if(K.cmp(U)<0)return K;return U},q.prototype._init=function T(K,U,W){if(typeof K==="number")return this._initNumber(K,U,W);if(typeof K==="object")return this._initArray(K,U,W);if(U==="hex")U=16;Z(U===(U|0)&&U>=2&&U<=36),K=K.toString().replace(/\s+/g,"");var V=0;if(K[0]==="-")V++,this.negative=1;if(V<K.length){if(U===16)this._parseHex(K,V,W);else if(this._parseBase(K,U,V),W==="le")this._initArray(this.toArray(),U,W)}},q.prototype._initNumber=function T(K,U,W){if(K<0)this.negative=1,K=-K;if(K<67108864)this.words=[K&67108863],this.length=1;else if(K<4503599627370496)this.words=[K&67108863,K/67108864&67108863],this.length=2;else Z(K<9007199254740992),this.words=[K&67108863,K/67108864&67108863,1],this.length=3;if(W!=="le")return;this._initArray(this.toArray(),U,W)},q.prototype._initArray=function T(K,U,W){if(Z(typeof K.length==="number"),K.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(K.length/3),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var N,L,F=0;if(W==="be"){for(V=K.length-1,N=0;V>=0;V-=3)if(L=K[V]|K[V-1]<<8|K[V-2]<<16,this.words[N]|=L<<F&67108863,this.words[N+1]=L>>>26-F&67108863,F+=24,F>=26)F-=26,N++}else if(W==="le"){for(V=0,N=0;V<K.length;V+=3)if(L=K[V]|K[V+1]<<8|K[V+2]<<16,this.words[N]|=L<<F&67108863,this.words[N+1]=L>>>26-F&67108863,F+=24,F>=26)F-=26,N++}return this.strip()};function z(T,K){var U=T.charCodeAt(K);if(U>=65&&U<=70)return U-55;else if(U>=97&&U<=102)return U-87;else return U-48&15}function M(T,K,U){var W=z(T,U);if(U-1>=K)W|=z(T,U-1)<<4;return W}q.prototype._parseHex=function T(K,U,W){this.length=Math.ceil((K.length-U)/6),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var N=0,L=0,F;if(W==="be")for(V=K.length-1;V>=U;V-=2)if(F=M(K,U,V)<<N,this.words[L]|=F&67108863,N>=18)N-=18,L+=1,this.words[L]|=F>>>26;else N+=8;else{var R=K.length-U;for(V=R%2===0?U+1:U;V<K.length;V+=2)if(F=M(K,U,V)<<N,this.words[L]|=F&67108863,N>=18)N-=18,L+=1,this.words[L]|=F>>>26;else N+=8}this.strip()};function j(T,K,U,W){var V=0,N=Math.min(T.length,U);for(var L=K;L<N;L++){var F=T.charCodeAt(L)-48;if(V*=W,F>=49)V+=F-49+10;else if(F>=17)V+=F-17+10;else V+=F}return V}q.prototype._parseBase=function T(K,U,W){this.words=[0],this.length=1;for(var V=0,N=1;N<=67108863;N*=U)V++;V--,N=N/U|0;var L=K.length-W,F=L%V,R=Math.min(L,L-F)+W,O=0;for(var w=W;w<R;w+=V)if(O=j(K,w,w+V,U),this.imuln(N),this.words[0]+O<67108864)this.words[0]+=O;else this._iaddn(O);if(F!==0){var x=1;O=j(K,w,K.length,U);for(w=0;w<F;w++)x*=U;if(this.imuln(x),this.words[0]+O<67108864)this.words[0]+=O;else this._iaddn(O)}this.strip()},q.prototype.copy=function T(K){K.words=new Array(this.length);for(var U=0;U<this.length;U++)K.words[U]=this.words[U];K.length=this.length,K.negative=this.negative,K.red=this.red},q.prototype.clone=function T(){var K=new q(null);return this.copy(K),K},q.prototype._expand=function T(K){while(this.length<K)this.words[this.length++]=0;return this},q.prototype.strip=function T(){while(this.length>1&&this.words[this.length-1]===0)this.length--;return this._normSign()},q.prototype._normSign=function T(){if(this.length===1&&this.words[0]===0)this.negative=0;return this},q.prototype.inspect=function T(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var P=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],D=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];if(q.prototype.toString=function T(K,U){K=K||10,U=U|0||1;var W;if(K===16||K==="hex"){W="";var V=0,N=0;for(var L=0;L<this.length;L++){var F=this.words[L],R=((F<<V|N)&16777215).toString(16);if(N=F>>>24-V&16777215,V+=2,V>=26)V-=26,L--;if(N!==0||L!==this.length-1)W=P[6-R.length]+R+W;else W=R+W}if(N!==0)W=N.toString(16)+W;while(W.length%U!==0)W="0"+W;if(this.negative!==0)W="-"+W;return W}if(K===(K|0)&&K>=2&&K<=36){var O=D[K],w=A[K];W="";var x=this.clone();x.negative=0;while(!x.isZero()){var E=x.modn(w).toString(K);if(x=x.idivn(w),!x.isZero())W=P[O-E.length]+E+W;else W=E+W}if(this.isZero())W="0"+W;while(W.length%U!==0)W="0"+W;if(this.negative!==0)W="-"+W;return W}Z(!1,"Base should be between 2 and 36")},q.prototype.toNumber=function T(){var K=this.words[0];if(this.length===2)K+=this.words[1]*67108864;else if(this.length===3&&this.words[2]===1)K+=4503599627370496+this.words[1]*67108864;else if(this.length>2)Z(!1,"Number can only safely store up to 53 bits");return this.negative!==0?-K:K},q.prototype.toJSON=function T(){return this.toString(16)},q.prototype.toBuffer=function T(K,U){return Z(typeof G!=="undefined"),this.toArrayLike(G,K,U)},q.prototype.toArray=function T(K,U){return this.toArrayLike(Array,K,U)},q.prototype.toArrayLike=function T(K,U,W){var V=this.byteLength(),N=W||Math.max(1,V);Z(V<=N,"byte array longer than desired length"),Z(N>0,"Requested array length <= 0"),this.strip();var L=U==="le",F=new K(N),R,O,w=this.clone();if(!L){for(O=0;O<N-V;O++)F[O]=0;for(O=0;!w.isZero();O++)R=w.andln(255),w.iushrn(8),F[N-O-1]=R}else{for(O=0;!w.isZero();O++)R=w.andln(255),w.iushrn(8),F[O]=R;for(;O<N;O++)F[O]=0}return F},Math.clz32)q.prototype._countBits=function T(K){return 32-Math.clz32(K)};else q.prototype._countBits=function T(K){var U=K,W=0;if(U>=4096)W+=13,U>>>=13;if(U>=64)W+=7,U>>>=7;if(U>=8)W+=4,U>>>=4;if(U>=2)W+=2,U>>>=2;return W+U};q.prototype._zeroBits=function T(K){if(K===0)return 26;var U=K,W=0;if((U&8191)===0)W+=13,U>>>=13;if((U&127)===0)W+=7,U>>>=7;if((U&15)===0)W+=4,U>>>=4;if((U&3)===0)W+=2,U>>>=2;if((U&1)===0)W++;return W},q.prototype.bitLength=function T(){var K=this.words[this.length-1],U=this._countBits(K);return(this.length-1)*26+U};function I(T){var K=new Array(T.bitLength());for(var U=0;U<K.length;U++){var W=U/26|0,V=U%26;K[U]=(T.words[W]&1<<V)>>>V}return K}q.prototype.zeroBits=function T(){if(this.isZero())return 0;var K=0;for(var U=0;U<this.length;U++){var W=this._zeroBits(this.words[U]);if(K+=W,W!==26)break}return K},q.prototype.byteLength=function T(){return Math.ceil(this.bitLength()/8)},q.prototype.toTwos=function T(K){if(this.negative!==0)return this.abs().inotn(K).iaddn(1);return this.clone()},q.prototype.fromTwos=function T(K){if(this.testn(K-1))return this.notn(K).iaddn(1).ineg();return this.clone()},q.prototype.isNeg=function T(){return this.negative!==0},q.prototype.neg=function T(){return this.clone().ineg()},q.prototype.ineg=function T(){if(!this.isZero())this.negative^=1;return this},q.prototype.iuor=function T(K){while(this.length<K.length)this.words[this.length++]=0;for(var U=0;U<K.length;U++)this.words[U]=this.words[U]|K.words[U];return this.strip()},q.prototype.ior=function T(K){return Z((this.negative|K.negative)===0),this.iuor(K)},q.prototype.or=function T(K){if(this.length>K.length)return this.clone().ior(K);return K.clone().ior(this)},q.prototype.uor=function T(K){if(this.length>K.length)return this.clone().iuor(K);return K.clone().iuor(this)},q.prototype.iuand=function T(K){var U;if(this.length>K.length)U=K;else U=this;for(var W=0;W<U.length;W++)this.words[W]=this.words[W]&K.words[W];return this.length=U.length,this.strip()},q.prototype.iand=function T(K){return Z((this.negative|K.negative)===0),this.iuand(K)},q.prototype.and=function T(K){if(this.length>K.length)return this.clone().iand(K);return K.clone().iand(this)},q.prototype.uand=function T(K){if(this.length>K.length)return this.clone().iuand(K);return K.clone().iuand(this)},q.prototype.iuxor=function T(K){var U,W;if(this.length>K.length)U=this,W=K;else U=K,W=this;for(var V=0;V<W.length;V++)this.words[V]=U.words[V]^W.words[V];if(this!==U)for(;V<U.length;V++)this.words[V]=U.words[V];return this.length=U.length,this.strip()},q.prototype.ixor=function T(K){return Z((this.negative|K.negative)===0),this.iuxor(K)},q.prototype.xor=function T(K){if(this.length>K.length)return this.clone().ixor(K);return K.clone().ixor(this)},q.prototype.uxor=function T(K){if(this.length>K.length)return this.clone().iuxor(K);return K.clone().iuxor(this)},q.prototype.inotn=function T(K){Z(typeof K==="number"&&K>=0);var U=Math.ceil(K/26)|0,W=K%26;if(this._expand(U),W>0)U--;for(var V=0;V<U;V++)this.words[V]=~this.words[V]&67108863;if(W>0)this.words[V]=~this.words[V]&67108863>>26-W;return this.strip()},q.prototype.notn=function T(K){return this.clone().inotn(K)},q.prototype.setn=function T(K,U){Z(typeof K==="number"&&K>=0);var W=K/26|0,V=K%26;if(this._expand(W+1),U)this.words[W]=this.words[W]|1<<V;else this.words[W]=this.words[W]&~(1<<V);return this.strip()},q.prototype.iadd=function T(K){var U;if(this.negative!==0&&K.negative===0)return this.negative=0,U=this.isub(K),this.negative^=1,this._normSign();else if(this.negative===0&&K.negative!==0)return K.negative=0,U=this.isub(K),K.negative=1,U._normSign();var W,V;if(this.length>K.length)W=this,V=K;else W=K,V=this;var N=0;for(var L=0;L<V.length;L++)U=(W.words[L]|0)+(V.words[L]|0)+N,this.words[L]=U&67108863,N=U>>>26;for(;N!==0&&L<W.length;L++)U=(W.words[L]|0)+N,this.words[L]=U&67108863,N=U>>>26;if(this.length=W.length,N!==0)this.words[this.length]=N,this.length++;else if(W!==this)for(;L<W.length;L++)this.words[L]=W.words[L];return this},q.prototype.add=function T(K){var U;if(K.negative!==0&&this.negative===0)return K.negative=0,U=this.sub(K),K.negative^=1,U;else if(K.negative===0&&this.negative!==0)return this.negative=0,U=K.sub(this),this.negative=1,U;if(this.length>K.length)return this.clone().iadd(K);return K.clone().iadd(this)},q.prototype.isub=function T(K){if(K.negative!==0){K.negative=0;var U=this.iadd(K);return K.negative=1,U._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(K),this.negative=1,this._normSign();var W=this.cmp(K);if(W===0)return this.negative=0,this.length=1,this.words[0]=0,this;var V,N;if(W>0)V=this,N=K;else V=K,N=this;var L=0;for(var F=0;F<N.length;F++)U=(V.words[F]|0)-(N.words[F]|0)+L,L=U>>26,this.words[F]=U&67108863;for(;L!==0&&F<V.length;F++)U=(V.words[F]|0)+L,L=U>>26,this.words[F]=U&67108863;if(L===0&&F<V.length&&V!==this)for(;F<V.length;F++)this.words[F]=V.words[F];if(this.length=Math.max(this.length,F),V!==this)this.negative=1;return this.strip()},q.prototype.sub=function T(K){return this.clone().isub(K)};function H(T,K,U){U.negative=K.negative^T.negative;var W=T.length+K.length|0;U.length=W,W=W-1|0;var V=T.words[0]|0,N=K.words[0]|0,L=V*N,F=L&67108863,R=L/67108864|0;U.words[0]=F;for(var O=1;O<W;O++){var w=R>>>26,x=R&67108863,E=Math.min(O,K.length-1);for(var v=Math.max(0,O-T.length+1);v<=E;v++){var p=O-v|0;V=T.words[p]|0,N=K.words[v]|0,L=V*N+x,w+=L/67108864|0,x=L&67108863}U.words[O]=x|0,R=w|0}if(R!==0)U.words[O]=R|0;else U.length--;return U.strip()}var C=function T(K,U,W){var V=K.words,N=U.words,L=W.words,F=0,R,O,w,x=V[0]|0,E=x&8191,v=x>>>13,p=V[1]|0,i=p&8191,s=p>>>13,X0=V[2]|0,n=X0&8191,r=X0>>>13,Z0=V[3]|0,e=Z0&8191,Q0=Z0>>>13,t=V[4]|0,a=t&8191,$0=t>>>13,d0=V[5]|0,K0=d0&8191,z0=d0>>>13,J0=V[6]|0,Y0=J0&8191,W0=J0>>>13,T0=V[7]|0,M0=T0&8191,A0=T0>>>13,C$=V[8]|0,P0=C$&8191,I0=C$>>>13,$8=V[9]|0,C0=$8&8191,S0=$8>>>13,o8=N[0]|0,F0=o8&8191,m0=o8>>>13,iQ=N[1]|0,c0=iQ&8191,p0=iQ>>>13,HX=N[2]|0,v0=HX&8191,g0=HX>>>13,NX=N[3]|0,y0=NX&8191,_0=NX>>>13,AX=N[4]|0,l0=AX&8191,k0=AX>>>13,nQ=N[5]|0,u=nQ&8191,d=nQ>>>13,i0=N[6]|0,U0=i0&8191,O0=i0>>>13,Q8=N[7]|0,w0=Q8&8191,B0=Q8>>>13,oQ=N[8]|0,u0=oQ&8191,b0=oQ>>>13,rQ=N[9]|0,x0=rQ&8191,f0=rQ>>>13;W.negative=K.negative^U.negative,W.length=19,R=Math.imul(E,F0),O=Math.imul(E,m0),O=O+Math.imul(v,F0)|0,w=Math.imul(v,m0);var y8=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(y8>>>26)|0,y8&=67108863,R=Math.imul(i,F0),O=Math.imul(i,m0),O=O+Math.imul(s,F0)|0,w=Math.imul(s,m0),R=R+Math.imul(E,c0)|0,O=O+Math.imul(E,p0)|0,O=O+Math.imul(v,c0)|0,w=w+Math.imul(v,p0)|0;var L$=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(L$>>>26)|0,L$&=67108863,R=Math.imul(n,F0),O=Math.imul(n,m0),O=O+Math.imul(r,F0)|0,w=Math.imul(r,m0),R=R+Math.imul(i,c0)|0,O=O+Math.imul(i,p0)|0,O=O+Math.imul(s,c0)|0,w=w+Math.imul(s,p0)|0,R=R+Math.imul(E,v0)|0,O=O+Math.imul(E,g0)|0,O=O+Math.imul(v,v0)|0,w=w+Math.imul(v,g0)|0;var H$=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(H$>>>26)|0,H$&=67108863,R=Math.imul(e,F0),O=Math.imul(e,m0),O=O+Math.imul(Q0,F0)|0,w=Math.imul(Q0,m0),R=R+Math.imul(n,c0)|0,O=O+Math.imul(n,p0)|0,O=O+Math.imul(r,c0)|0,w=w+Math.imul(r,p0)|0,R=R+Math.imul(i,v0)|0,O=O+Math.imul(i,g0)|0,O=O+Math.imul(s,v0)|0,w=w+Math.imul(s,g0)|0,R=R+Math.imul(E,y0)|0,O=O+Math.imul(E,_0)|0,O=O+Math.imul(v,y0)|0,w=w+Math.imul(v,_0)|0;var K8=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(K8>>>26)|0,K8&=67108863,R=Math.imul(a,F0),O=Math.imul(a,m0),O=O+Math.imul($0,F0)|0,w=Math.imul($0,m0),R=R+Math.imul(e,c0)|0,O=O+Math.imul(e,p0)|0,O=O+Math.imul(Q0,c0)|0,w=w+Math.imul(Q0,p0)|0,R=R+Math.imul(n,v0)|0,O=O+Math.imul(n,g0)|0,O=O+Math.imul(r,v0)|0,w=w+Math.imul(r,g0)|0,R=R+Math.imul(i,y0)|0,O=O+Math.imul(i,_0)|0,O=O+Math.imul(s,y0)|0,w=w+Math.imul(s,_0)|0,R=R+Math.imul(E,l0)|0,O=O+Math.imul(E,k0)|0,O=O+Math.imul(v,l0)|0,w=w+Math.imul(v,k0)|0;var JQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(JQ>>>26)|0,JQ&=67108863,R=Math.imul(K0,F0),O=Math.imul(K0,m0),O=O+Math.imul(z0,F0)|0,w=Math.imul(z0,m0),R=R+Math.imul(a,c0)|0,O=O+Math.imul(a,p0)|0,O=O+Math.imul($0,c0)|0,w=w+Math.imul($0,p0)|0,R=R+Math.imul(e,v0)|0,O=O+Math.imul(e,g0)|0,O=O+Math.imul(Q0,v0)|0,w=w+Math.imul(Q0,g0)|0,R=R+Math.imul(n,y0)|0,O=O+Math.imul(n,_0)|0,O=O+Math.imul(r,y0)|0,w=w+Math.imul(r,_0)|0,R=R+Math.imul(i,l0)|0,O=O+Math.imul(i,k0)|0,O=O+Math.imul(s,l0)|0,w=w+Math.imul(s,k0)|0,R=R+Math.imul(E,u)|0,O=O+Math.imul(E,d)|0,O=O+Math.imul(v,u)|0,w=w+Math.imul(v,d)|0;var qQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(qQ>>>26)|0,qQ&=67108863,R=Math.imul(Y0,F0),O=Math.imul(Y0,m0),O=O+Math.imul(W0,F0)|0,w=Math.imul(W0,m0),R=R+Math.imul(K0,c0)|0,O=O+Math.imul(K0,p0)|0,O=O+Math.imul(z0,c0)|0,w=w+Math.imul(z0,p0)|0,R=R+Math.imul(a,v0)|0,O=O+Math.imul(a,g0)|0,O=O+Math.imul($0,v0)|0,w=w+Math.imul($0,g0)|0,R=R+Math.imul(e,y0)|0,O=O+Math.imul(e,_0)|0,O=O+Math.imul(Q0,y0)|0,w=w+Math.imul(Q0,_0)|0,R=R+Math.imul(n,l0)|0,O=O+Math.imul(n,k0)|0,O=O+Math.imul(r,l0)|0,w=w+Math.imul(r,k0)|0,R=R+Math.imul(i,u)|0,O=O+Math.imul(i,d)|0,O=O+Math.imul(s,u)|0,w=w+Math.imul(s,d)|0,R=R+Math.imul(E,U0)|0,O=O+Math.imul(E,O0)|0,O=O+Math.imul(v,U0)|0,w=w+Math.imul(v,O0)|0;var GQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(GQ>>>26)|0,GQ&=67108863,R=Math.imul(M0,F0),O=Math.imul(M0,m0),O=O+Math.imul(A0,F0)|0,w=Math.imul(A0,m0),R=R+Math.imul(Y0,c0)|0,O=O+Math.imul(Y0,p0)|0,O=O+Math.imul(W0,c0)|0,w=w+Math.imul(W0,p0)|0,R=R+Math.imul(K0,v0)|0,O=O+Math.imul(K0,g0)|0,O=O+Math.imul(z0,v0)|0,w=w+Math.imul(z0,g0)|0,R=R+Math.imul(a,y0)|0,O=O+Math.imul(a,_0)|0,O=O+Math.imul($0,y0)|0,w=w+Math.imul($0,_0)|0,R=R+Math.imul(e,l0)|0,O=O+Math.imul(e,k0)|0,O=O+Math.imul(Q0,l0)|0,w=w+Math.imul(Q0,k0)|0,R=R+Math.imul(n,u)|0,O=O+Math.imul(n,d)|0,O=O+Math.imul(r,u)|0,w=w+Math.imul(r,d)|0,R=R+Math.imul(i,U0)|0,O=O+Math.imul(i,O0)|0,O=O+Math.imul(s,U0)|0,w=w+Math.imul(s,O0)|0,R=R+Math.imul(E,w0)|0,O=O+Math.imul(E,B0)|0,O=O+Math.imul(v,w0)|0,w=w+Math.imul(v,B0)|0;var zQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(zQ>>>26)|0,zQ&=67108863,R=Math.imul(P0,F0),O=Math.imul(P0,m0),O=O+Math.imul(I0,F0)|0,w=Math.imul(I0,m0),R=R+Math.imul(M0,c0)|0,O=O+Math.imul(M0,p0)|0,O=O+Math.imul(A0,c0)|0,w=w+Math.imul(A0,p0)|0,R=R+Math.imul(Y0,v0)|0,O=O+Math.imul(Y0,g0)|0,O=O+Math.imul(W0,v0)|0,w=w+Math.imul(W0,g0)|0,R=R+Math.imul(K0,y0)|0,O=O+Math.imul(K0,_0)|0,O=O+Math.imul(z0,y0)|0,w=w+Math.imul(z0,_0)|0,R=R+Math.imul(a,l0)|0,O=O+Math.imul(a,k0)|0,O=O+Math.imul($0,l0)|0,w=w+Math.imul($0,k0)|0,R=R+Math.imul(e,u)|0,O=O+Math.imul(e,d)|0,O=O+Math.imul(Q0,u)|0,w=w+Math.imul(Q0,d)|0,R=R+Math.imul(n,U0)|0,O=O+Math.imul(n,O0)|0,O=O+Math.imul(r,U0)|0,w=w+Math.imul(r,O0)|0,R=R+Math.imul(i,w0)|0,O=O+Math.imul(i,B0)|0,O=O+Math.imul(s,w0)|0,w=w+Math.imul(s,B0)|0,R=R+Math.imul(E,u0)|0,O=O+Math.imul(E,b0)|0,O=O+Math.imul(v,u0)|0,w=w+Math.imul(v,b0)|0;var KQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(KQ>>>26)|0,KQ&=67108863,R=Math.imul(C0,F0),O=Math.imul(C0,m0),O=O+Math.imul(S0,F0)|0,w=Math.imul(S0,m0),R=R+Math.imul(P0,c0)|0,O=O+Math.imul(P0,p0)|0,O=O+Math.imul(I0,c0)|0,w=w+Math.imul(I0,p0)|0,R=R+Math.imul(M0,v0)|0,O=O+Math.imul(M0,g0)|0,O=O+Math.imul(A0,v0)|0,w=w+Math.imul(A0,g0)|0,R=R+Math.imul(Y0,y0)|0,O=O+Math.imul(Y0,_0)|0,O=O+Math.imul(W0,y0)|0,w=w+Math.imul(W0,_0)|0,R=R+Math.imul(K0,l0)|0,O=O+Math.imul(K0,k0)|0,O=O+Math.imul(z0,l0)|0,w=w+Math.imul(z0,k0)|0,R=R+Math.imul(a,u)|0,O=O+Math.imul(a,d)|0,O=O+Math.imul($0,u)|0,w=w+Math.imul($0,d)|0,R=R+Math.imul(e,U0)|0,O=O+Math.imul(e,O0)|0,O=O+Math.imul(Q0,U0)|0,w=w+Math.imul(Q0,O0)|0,R=R+Math.imul(n,w0)|0,O=O+Math.imul(n,B0)|0,O=O+Math.imul(r,w0)|0,w=w+Math.imul(r,B0)|0,R=R+Math.imul(i,u0)|0,O=O+Math.imul(i,b0)|0,O=O+Math.imul(s,u0)|0,w=w+Math.imul(s,b0)|0,R=R+Math.imul(E,x0)|0,O=O+Math.imul(E,f0)|0,O=O+Math.imul(v,x0)|0,w=w+Math.imul(v,f0)|0;var UQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(UQ>>>26)|0,UQ&=67108863,R=Math.imul(C0,c0),O=Math.imul(C0,p0),O=O+Math.imul(S0,c0)|0,w=Math.imul(S0,p0),R=R+Math.imul(P0,v0)|0,O=O+Math.imul(P0,g0)|0,O=O+Math.imul(I0,v0)|0,w=w+Math.imul(I0,g0)|0,R=R+Math.imul(M0,y0)|0,O=O+Math.imul(M0,_0)|0,O=O+Math.imul(A0,y0)|0,w=w+Math.imul(A0,_0)|0,R=R+Math.imul(Y0,l0)|0,O=O+Math.imul(Y0,k0)|0,O=O+Math.imul(W0,l0)|0,w=w+Math.imul(W0,k0)|0,R=R+Math.imul(K0,u)|0,O=O+Math.imul(K0,d)|0,O=O+Math.imul(z0,u)|0,w=w+Math.imul(z0,d)|0,R=R+Math.imul(a,U0)|0,O=O+Math.imul(a,O0)|0,O=O+Math.imul($0,U0)|0,w=w+Math.imul($0,O0)|0,R=R+Math.imul(e,w0)|0,O=O+Math.imul(e,B0)|0,O=O+Math.imul(Q0,w0)|0,w=w+Math.imul(Q0,B0)|0,R=R+Math.imul(n,u0)|0,O=O+Math.imul(n,b0)|0,O=O+Math.imul(r,u0)|0,w=w+Math.imul(r,b0)|0,R=R+Math.imul(i,x0)|0,O=O+Math.imul(i,f0)|0,O=O+Math.imul(s,x0)|0,w=w+Math.imul(s,f0)|0;var WQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(WQ>>>26)|0,WQ&=67108863,R=Math.imul(C0,v0),O=Math.imul(C0,g0),O=O+Math.imul(S0,v0)|0,w=Math.imul(S0,g0),R=R+Math.imul(P0,y0)|0,O=O+Math.imul(P0,_0)|0,O=O+Math.imul(I0,y0)|0,w=w+Math.imul(I0,_0)|0,R=R+Math.imul(M0,l0)|0,O=O+Math.imul(M0,k0)|0,O=O+Math.imul(A0,l0)|0,w=w+Math.imul(A0,k0)|0,R=R+Math.imul(Y0,u)|0,O=O+Math.imul(Y0,d)|0,O=O+Math.imul(W0,u)|0,w=w+Math.imul(W0,d)|0,R=R+Math.imul(K0,U0)|0,O=O+Math.imul(K0,O0)|0,O=O+Math.imul(z0,U0)|0,w=w+Math.imul(z0,O0)|0,R=R+Math.imul(a,w0)|0,O=O+Math.imul(a,B0)|0,O=O+Math.imul($0,w0)|0,w=w+Math.imul($0,B0)|0,R=R+Math.imul(e,u0)|0,O=O+Math.imul(e,b0)|0,O=O+Math.imul(Q0,u0)|0,w=w+Math.imul(Q0,b0)|0,R=R+Math.imul(n,x0)|0,O=O+Math.imul(n,f0)|0,O=O+Math.imul(r,x0)|0,w=w+Math.imul(r,f0)|0;var VQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(VQ>>>26)|0,VQ&=67108863,R=Math.imul(C0,y0),O=Math.imul(C0,_0),O=O+Math.imul(S0,y0)|0,w=Math.imul(S0,_0),R=R+Math.imul(P0,l0)|0,O=O+Math.imul(P0,k0)|0,O=O+Math.imul(I0,l0)|0,w=w+Math.imul(I0,k0)|0,R=R+Math.imul(M0,u)|0,O=O+Math.imul(M0,d)|0,O=O+Math.imul(A0,u)|0,w=w+Math.imul(A0,d)|0,R=R+Math.imul(Y0,U0)|0,O=O+Math.imul(Y0,O0)|0,O=O+Math.imul(W0,U0)|0,w=w+Math.imul(W0,O0)|0,R=R+Math.imul(K0,w0)|0,O=O+Math.imul(K0,B0)|0,O=O+Math.imul(z0,w0)|0,w=w+Math.imul(z0,B0)|0,R=R+Math.imul(a,u0)|0,O=O+Math.imul(a,b0)|0,O=O+Math.imul($0,u0)|0,w=w+Math.imul($0,b0)|0,R=R+Math.imul(e,x0)|0,O=O+Math.imul(e,f0)|0,O=O+Math.imul(Q0,x0)|0,w=w+Math.imul(Q0,f0)|0;var OQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(OQ>>>26)|0,OQ&=67108863,R=Math.imul(C0,l0),O=Math.imul(C0,k0),O=O+Math.imul(S0,l0)|0,w=Math.imul(S0,k0),R=R+Math.imul(P0,u)|0,O=O+Math.imul(P0,d)|0,O=O+Math.imul(I0,u)|0,w=w+Math.imul(I0,d)|0,R=R+Math.imul(M0,U0)|0,O=O+Math.imul(M0,O0)|0,O=O+Math.imul(A0,U0)|0,w=w+Math.imul(A0,O0)|0,R=R+Math.imul(Y0,w0)|0,O=O+Math.imul(Y0,B0)|0,O=O+Math.imul(W0,w0)|0,w=w+Math.imul(W0,B0)|0,R=R+Math.imul(K0,u0)|0,O=O+Math.imul(K0,b0)|0,O=O+Math.imul(z0,u0)|0,w=w+Math.imul(z0,b0)|0,R=R+Math.imul(a,x0)|0,O=O+Math.imul(a,f0)|0,O=O+Math.imul($0,x0)|0,w=w+Math.imul($0,f0)|0;var MQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(MQ>>>26)|0,MQ&=67108863,R=Math.imul(C0,u),O=Math.imul(C0,d),O=O+Math.imul(S0,u)|0,w=Math.imul(S0,d),R=R+Math.imul(P0,U0)|0,O=O+Math.imul(P0,O0)|0,O=O+Math.imul(I0,U0)|0,w=w+Math.imul(I0,O0)|0,R=R+Math.imul(M0,w0)|0,O=O+Math.imul(M0,B0)|0,O=O+Math.imul(A0,w0)|0,w=w+Math.imul(A0,B0)|0,R=R+Math.imul(Y0,u0)|0,O=O+Math.imul(Y0,b0)|0,O=O+Math.imul(W0,u0)|0,w=w+Math.imul(W0,b0)|0,R=R+Math.imul(K0,x0)|0,O=O+Math.imul(K0,f0)|0,O=O+Math.imul(z0,x0)|0,w=w+Math.imul(z0,f0)|0;var DQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(DQ>>>26)|0,DQ&=67108863,R=Math.imul(C0,U0),O=Math.imul(C0,O0),O=O+Math.imul(S0,U0)|0,w=Math.imul(S0,O0),R=R+Math.imul(P0,w0)|0,O=O+Math.imul(P0,B0)|0,O=O+Math.imul(I0,w0)|0,w=w+Math.imul(I0,B0)|0,R=R+Math.imul(M0,u0)|0,O=O+Math.imul(M0,b0)|0,O=O+Math.imul(A0,u0)|0,w=w+Math.imul(A0,b0)|0,R=R+Math.imul(Y0,x0)|0,O=O+Math.imul(Y0,f0)|0,O=O+Math.imul(W0,x0)|0,w=w+Math.imul(W0,f0)|0;var jQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(jQ>>>26)|0,jQ&=67108863,R=Math.imul(C0,w0),O=Math.imul(C0,B0),O=O+Math.imul(S0,w0)|0,w=Math.imul(S0,B0),R=R+Math.imul(P0,u0)|0,O=O+Math.imul(P0,b0)|0,O=O+Math.imul(I0,u0)|0,w=w+Math.imul(I0,b0)|0,R=R+Math.imul(M0,x0)|0,O=O+Math.imul(M0,f0)|0,O=O+Math.imul(A0,x0)|0,w=w+Math.imul(A0,f0)|0;var PQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(PQ>>>26)|0,PQ&=67108863,R=Math.imul(C0,u0),O=Math.imul(C0,b0),O=O+Math.imul(S0,u0)|0,w=Math.imul(S0,b0),R=R+Math.imul(P0,x0)|0,O=O+Math.imul(P0,f0)|0,O=O+Math.imul(I0,x0)|0,w=w+Math.imul(I0,f0)|0;var HQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(HQ>>>26)|0,HQ&=67108863,R=Math.imul(C0,x0),O=Math.imul(C0,f0),O=O+Math.imul(S0,x0)|0,w=Math.imul(S0,f0);var NQ=(F+R|0)+((O&8191)<<13)|0;if(F=(w+(O>>>13)|0)+(NQ>>>26)|0,NQ&=67108863,L[0]=y8,L[1]=L$,L[2]=H$,L[3]=K8,L[4]=JQ,L[5]=qQ,L[6]=GQ,L[7]=zQ,L[8]=KQ,L[9]=UQ,L[10]=WQ,L[11]=VQ,L[12]=OQ,L[13]=MQ,L[14]=DQ,L[15]=jQ,L[16]=PQ,L[17]=HQ,L[18]=NQ,F!==0)L[19]=F,W.length++;return W};if(!Math.imul)C=H;function B(T,K,U){U.negative=K.negative^T.negative,U.length=T.length+K.length;var W=0,V=0;for(var N=0;N<U.length-1;N++){var L=V;V=0;var F=W&67108863,R=Math.min(N,K.length-1);for(var O=Math.max(0,N-T.length+1);O<=R;O++){var w=N-O,x=T.words[w]|0,E=K.words[O]|0,v=x*E,p=v&67108863;L=L+(v/67108864|0)|0,p=p+F|0,F=p&67108863,L=L+(p>>>26)|0,V+=L>>>26,L&=67108863}U.words[N]=F,W=L,L=V}if(W!==0)U.words[N]=W;else U.length--;return U.strip()}function S(T,K,U){var W=new _;return W.mulp(T,K,U)}q.prototype.mulTo=function T(K,U){var W,V=this.length+K.length;if(this.length===10&&K.length===10)W=C(this,K,U);else if(V<63)W=H(this,K,U);else if(V<1024)W=B(this,K,U);else W=S(this,K,U);return W};function _(T,K){this.x=T,this.y=K}_.prototype.makeRBT=function T(K){var U=new Array(K),W=q.prototype._countBits(K)-1;for(var V=0;V<K;V++)U[V]=this.revBin(V,W,K);return U},_.prototype.revBin=function T(K,U,W){if(K===0||K===W-1)return K;var V=0;for(var N=0;N<U;N++)V|=(K&1)<<U-N-1,K>>=1;return V},_.prototype.permute=function T(K,U,W,V,N,L){for(var F=0;F<L;F++)V[F]=U[K[F]],N[F]=W[K[F]]},_.prototype.transform=function T(K,U,W,V,N,L){this.permute(L,K,U,W,V,N);for(var F=1;F<N;F<<=1){var R=F<<1,O=Math.cos(2*Math.PI/R),w=Math.sin(2*Math.PI/R);for(var x=0;x<N;x+=R){var E=O,v=w;for(var p=0;p<F;p++){var i=W[x+p],s=V[x+p],X0=W[x+p+F],n=V[x+p+F],r=E*X0-v*n;if(n=E*n+v*X0,X0=r,W[x+p]=i+X0,V[x+p]=s+n,W[x+p+F]=i-X0,V[x+p+F]=s-n,p!==R)r=O*E-w*v,v=O*v+w*E,E=r}}}},_.prototype.guessLen13b=function T(K,U){var W=Math.max(U,K)|1,V=W&1,N=0;for(W=W/2|0;W;W=W>>>1)N++;return 1<<N+1+V},_.prototype.conjugate=function T(K,U,W){if(W<=1)return;for(var V=0;V<W/2;V++){var N=K[V];K[V]=K[W-V-1],K[W-V-1]=N,N=U[V],U[V]=-U[W-V-1],U[W-V-1]=-N}},_.prototype.normalize13b=function T(K,U){var W=0;for(var V=0;V<U/2;V++){var N=Math.round(K[2*V+1]/U)*8192+Math.round(K[2*V]/U)+W;if(K[V]=N&67108863,N<67108864)W=0;else W=N/67108864|0}return K},_.prototype.convert13b=function T(K,U,W,V){var N=0;for(var L=0;L<U;L++)N=N+(K[L]|0),W[2*L]=N&8191,N=N>>>13,W[2*L+1]=N&8191,N=N>>>13;for(L=2*U;L<V;++L)W[L]=0;Z(N===0),Z((N&-8192)===0)},_.prototype.stub=function T(K){var U=new Array(K);for(var W=0;W<K;W++)U[W]=0;return U},_.prototype.mulp=function T(K,U,W){var V=2*this.guessLen13b(K.length,U.length),N=this.makeRBT(V),L=this.stub(V),F=new Array(V),R=new Array(V),O=new Array(V),w=new Array(V),x=new Array(V),E=new Array(V),v=W.words;v.length=V,this.convert13b(K.words,K.length,F,V),this.convert13b(U.words,U.length,w,V),this.transform(F,L,R,O,V,N),this.transform(w,L,x,E,V,N);for(var p=0;p<V;p++){var i=R[p]*x[p]-O[p]*E[p];O[p]=R[p]*E[p]+O[p]*x[p],R[p]=i}return this.conjugate(R,O,V),this.transform(R,O,v,L,V,N),this.conjugate(v,L,V),this.normalize13b(v,V),W.negative=K.negative^U.negative,W.length=K.length+U.length,W.strip()},q.prototype.mul=function T(K){var U=new q(null);return U.words=new Array(this.length+K.length),this.mulTo(K,U)},q.prototype.mulf=function T(K){var U=new q(null);return U.words=new Array(this.length+K.length),S(this,K,U)},q.prototype.imul=function T(K){return this.clone().mulTo(K,this)},q.prototype.imuln=function T(K){Z(typeof K==="number"),Z(K<67108864);var U=0;for(var W=0;W<this.length;W++){var V=(this.words[W]|0)*K,N=(V&67108863)+(U&67108863);U>>=26,U+=V/67108864|0,U+=N>>>26,this.words[W]=N&67108863}if(U!==0)this.words[W]=U,this.length++;return this.length=K===0?1:this.length,this},q.prototype.muln=function T(K){return this.clone().imuln(K)},q.prototype.sqr=function T(){return this.mul(this)},q.prototype.isqr=function T(){return this.imul(this.clone())},q.prototype.pow=function T(K){var U=I(K);if(U.length===0)return new q(1);var W=this;for(var V=0;V<U.length;V++,W=W.sqr())if(U[V]!==0)break;if(++V<U.length)for(var N=W.sqr();V<U.length;V++,N=N.sqr()){if(U[V]===0)continue;W=W.mul(N)}return W},q.prototype.iushln=function T(K){Z(typeof K==="number"&&K>=0);var U=K%26,W=(K-U)/26,V=67108863>>>26-U<<26-U,N;if(U!==0){var L=0;for(N=0;N<this.length;N++){var F=this.words[N]&V,R=(this.words[N]|0)-F<<U;this.words[N]=R|L,L=F>>>26-U}if(L)this.words[N]=L,this.length++}if(W!==0){for(N=this.length-1;N>=0;N--)this.words[N+W]=this.words[N];for(N=0;N<W;N++)this.words[N]=0;this.length+=W}return this.strip()},q.prototype.ishln=function T(K){return Z(this.negative===0),this.iushln(K)},q.prototype.iushrn=function T(K,U,W){Z(typeof K==="number"&&K>=0);var V;if(U)V=(U-U%26)/26;else V=0;var N=K%26,L=Math.min((K-N)/26,this.length),F=67108863^67108863>>>N<<N,R=W;if(V-=L,V=Math.max(0,V),R){for(var O=0;O<L;O++)R.words[O]=this.words[O];R.length=L}if(L===0);else if(this.length>L){this.length-=L;for(O=0;O<this.length;O++)this.words[O]=this.words[O+L]}else this.words[0]=0,this.length=1;var w=0;for(O=this.length-1;O>=0&&(w!==0||O>=V);O--){var x=this.words[O]|0;this.words[O]=w<<26-N|x>>>N,w=x&F}if(R&&w!==0)R.words[R.length++]=w;if(this.length===0)this.words[0]=0,this.length=1;return this.strip()},q.prototype.ishrn=function T(K,U,W){return Z(this.negative===0),this.iushrn(K,U,W)},q.prototype.shln=function T(K){return this.clone().ishln(K)},q.prototype.ushln=function T(K){return this.clone().iushln(K)},q.prototype.shrn=function T(K){return this.clone().ishrn(K)},q.prototype.ushrn=function T(K){return this.clone().iushrn(K)},q.prototype.testn=function T(K){Z(typeof K==="number"&&K>=0);var U=K%26,W=(K-U)/26,V=1<<U;if(this.length<=W)return!1;var N=this.words[W];return!!(N&V)},q.prototype.imaskn=function T(K){Z(typeof K==="number"&&K>=0);var U=K%26,W=(K-U)/26;if(Z(this.negative===0,"imaskn works only with positive numbers"),this.length<=W)return this;if(U!==0)W++;if(this.length=Math.min(W,this.length),U!==0){var V=67108863^67108863>>>U<<U;this.words[this.length-1]&=V}return this.strip()},q.prototype.maskn=function T(K){return this.clone().imaskn(K)},q.prototype.iaddn=function T(K){if(Z(typeof K==="number"),Z(K<67108864),K<0)return this.isubn(-K);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<K)return this.words[0]=K-(this.words[0]|0),this.negative=0,this;return this.negative=0,this.isubn(K),this.negative=1,this}return this._iaddn(K)},q.prototype._iaddn=function T(K){this.words[0]+=K;for(var U=0;U<this.length&&this.words[U]>=67108864;U++)if(this.words[U]-=67108864,U===this.length-1)this.words[U+1]=1;else this.words[U+1]++;return this.length=Math.max(this.length,U+1),this},q.prototype.isubn=function T(K){if(Z(typeof K==="number"),Z(K<67108864),K<0)return this.iaddn(-K);if(this.negative!==0)return this.negative=0,this.iaddn(K),this.negative=1,this;if(this.words[0]-=K,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var U=0;U<this.length&&this.words[U]<0;U++)this.words[U]+=67108864,this.words[U+1]-=1;return this.strip()},q.prototype.addn=function T(K){return this.clone().iaddn(K)},q.prototype.subn=function T(K){return this.clone().isubn(K)},q.prototype.iabs=function T(){return this.negative=0,this},q.prototype.abs=function T(){return this.clone().iabs()},q.prototype._ishlnsubmul=function T(K,U,W){var V=K.length+W,N;this._expand(V);var L,F=0;for(N=0;N<K.length;N++){L=(this.words[N+W]|0)+F;var R=(K.words[N]|0)*U;L-=R&67108863,F=(L>>26)-(R/67108864|0),this.words[N+W]=L&67108863}for(;N<this.length-W;N++)L=(this.words[N+W]|0)+F,F=L>>26,this.words[N+W]=L&67108863;if(F===0)return this.strip();Z(F===-1),F=0;for(N=0;N<this.length;N++)L=-(this.words[N]|0)+F,F=L>>26,this.words[N]=L&67108863;return this.negative=1,this.strip()},q.prototype._wordDiv=function T(K,U){var W=this.length-K.length,V=this.clone(),N=K,L=N.words[N.length-1]|0,F=this._countBits(L);if(W=26-F,W!==0)N=N.ushln(W),V.iushln(W),L=N.words[N.length-1]|0;var R=V.length-N.length,O;if(U!=="mod"){O=new q(null),O.length=R+1,O.words=new Array(O.length);for(var w=0;w<O.length;w++)O.words[w]=0}var x=V.clone()._ishlnsubmul(N,1,R);if(x.negative===0){if(V=x,O)O.words[R]=1}for(var E=R-1;E>=0;E--){var v=(V.words[N.length+E]|0)*67108864+(V.words[N.length+E-1]|0);v=Math.min(v/L|0,67108863),V._ishlnsubmul(N,v,E);while(V.negative!==0)if(v--,V.negative=0,V._ishlnsubmul(N,1,E),!V.isZero())V.negative^=1;if(O)O.words[E]=v}if(O)O.strip();if(V.strip(),U!=="div"&&W!==0)V.iushrn(W);return{div:O||null,mod:V}},q.prototype.divmod=function T(K,U,W){if(Z(!K.isZero()),this.isZero())return{div:new q(0),mod:new q(0)};var V,N,L;if(this.negative!==0&&K.negative===0){if(L=this.neg().divmod(K,U),U!=="mod")V=L.div.neg();if(U!=="div"){if(N=L.mod.neg(),W&&N.negative!==0)N.iadd(K)}return{div:V,mod:N}}if(this.negative===0&&K.negative!==0){if(L=this.divmod(K.neg(),U),U!=="mod")V=L.div.neg();return{div:V,mod:L.mod}}if((this.negative&K.negative)!==0){if(L=this.neg().divmod(K.neg(),U),U!=="div"){if(N=L.mod.neg(),W&&N.negative!==0)N.isub(K)}return{div:L.div,mod:N}}if(K.length>this.length||this.cmp(K)<0)return{div:new q(0),mod:this};if(K.length===1){if(U==="div")return{div:this.divn(K.words[0]),mod:null};if(U==="mod")return{div:null,mod:new q(this.modn(K.words[0]))};return{div:this.divn(K.words[0]),mod:new q(this.modn(K.words[0]))}}return this._wordDiv(K,U)},q.prototype.div=function T(K){return this.divmod(K,"div",!1).div},q.prototype.mod=function T(K){return this.divmod(K,"mod",!1).mod},q.prototype.umod=function T(K){return this.divmod(K,"mod",!0).mod},q.prototype.divRound=function T(K){var U=this.divmod(K);if(U.mod.isZero())return U.div;var W=U.div.negative!==0?U.mod.isub(K):U.mod,V=K.ushrn(1),N=K.andln(1),L=W.cmp(V);if(L<0||N===1&&L===0)return U.div;return U.div.negative!==0?U.div.isubn(1):U.div.iaddn(1)},q.prototype.modn=function T(K){Z(K<=67108863);var U=67108864%K,W=0;for(var V=this.length-1;V>=0;V--)W=(U*W+(this.words[V]|0))%K;return W},q.prototype.idivn=function T(K){Z(K<=67108863);var U=0;for(var W=this.length-1;W>=0;W--){var V=(this.words[W]|0)+U*67108864;this.words[W]=V/K|0,U=V%K}return this.strip()},q.prototype.divn=function T(K){return this.clone().idivn(K)},q.prototype.egcd=function T(K){Z(K.negative===0),Z(!K.isZero());var U=this,W=K.clone();if(U.negative!==0)U=U.umod(K);else U=U.clone();var V=new q(1),N=new q(0),L=new q(0),F=new q(1),R=0;while(U.isEven()&&W.isEven())U.iushrn(1),W.iushrn(1),++R;var O=W.clone(),w=U.clone();while(!U.isZero()){for(var x=0,E=1;(U.words[0]&E)===0&&x<26;++x,E<<=1);if(x>0){U.iushrn(x);while(x-- >0){if(V.isOdd()||N.isOdd())V.iadd(O),N.isub(w);V.iushrn(1),N.iushrn(1)}}for(var v=0,p=1;(W.words[0]&p)===0&&v<26;++v,p<<=1);if(v>0){W.iushrn(v);while(v-- >0){if(L.isOdd()||F.isOdd())L.iadd(O),F.isub(w);L.iushrn(1),F.iushrn(1)}}if(U.cmp(W)>=0)U.isub(W),V.isub(L),N.isub(F);else W.isub(U),L.isub(V),F.isub(N)}return{a:L,b:F,gcd:W.iushln(R)}},q.prototype._invmp=function T(K){Z(K.negative===0),Z(!K.isZero());var U=this,W=K.clone();if(U.negative!==0)U=U.umod(K);else U=U.clone();var V=new q(1),N=new q(0),L=W.clone();while(U.cmpn(1)>0&&W.cmpn(1)>0){for(var F=0,R=1;(U.words[0]&R)===0&&F<26;++F,R<<=1);if(F>0){U.iushrn(F);while(F-- >0){if(V.isOdd())V.iadd(L);V.iushrn(1)}}for(var O=0,w=1;(W.words[0]&w)===0&&O<26;++O,w<<=1);if(O>0){W.iushrn(O);while(O-- >0){if(N.isOdd())N.iadd(L);N.iushrn(1)}}if(U.cmp(W)>=0)U.isub(W),V.isub(N);else W.isub(U),N.isub(V)}var x;if(U.cmpn(1)===0)x=V;else x=N;if(x.cmpn(0)<0)x.iadd(K);return x},q.prototype.gcd=function T(K){if(this.isZero())return K.abs();if(K.isZero())return this.abs();var U=this.clone(),W=K.clone();U.negative=0,W.negative=0;for(var V=0;U.isEven()&&W.isEven();V++)U.iushrn(1),W.iushrn(1);do{while(U.isEven())U.iushrn(1);while(W.isEven())W.iushrn(1);var N=U.cmp(W);if(N<0){var L=U;U=W,W=L}else if(N===0||W.cmpn(1)===0)break;U.isub(W)}while(!0);return W.iushln(V)},q.prototype.invm=function T(K){return this.egcd(K).a.umod(K)},q.prototype.isEven=function T(){return(this.words[0]&1)===0},q.prototype.isOdd=function T(){return(this.words[0]&1)===1},q.prototype.andln=function T(K){return this.words[0]&K},q.prototype.bincn=function T(K){Z(typeof K==="number");var U=K%26,W=(K-U)/26,V=1<<U;if(this.length<=W)return this._expand(W+1),this.words[W]|=V,this;var N=V;for(var L=W;N!==0&&L<this.length;L++){var F=this.words[L]|0;F+=N,N=F>>>26,F&=67108863,this.words[L]=F}if(N!==0)this.words[L]=N,this.length++;return this},q.prototype.isZero=function T(){return this.length===1&&this.words[0]===0},q.prototype.cmpn=function T(K){var U=K<0;if(this.negative!==0&&!U)return-1;if(this.negative===0&&U)return 1;this.strip();var W;if(this.length>1)W=1;else{if(U)K=-K;Z(K<=67108863,"Number is too big");var V=this.words[0]|0;W=V===K?0:V<K?-1:1}if(this.negative!==0)return-W|0;return W},q.prototype.cmp=function T(K){if(this.negative!==0&&K.negative===0)return-1;if(this.negative===0&&K.negative!==0)return 1;var U=this.ucmp(K);if(this.negative!==0)return-U|0;return U},q.prototype.ucmp=function T(K){if(this.length>K.length)return 1;if(this.length<K.length)return-1;var U=0;for(var W=this.length-1;W>=0;W--){var V=this.words[W]|0,N=K.words[W]|0;if(V===N)continue;if(V<N)U=-1;else if(V>N)U=1;break}return U},q.prototype.gtn=function T(K){return this.cmpn(K)===1},q.prototype.gt=function T(K){return this.cmp(K)===1},q.prototype.gten=function T(K){return this.cmpn(K)>=0},q.prototype.gte=function T(K){return this.cmp(K)>=0},q.prototype.ltn=function T(K){return this.cmpn(K)===-1},q.prototype.lt=function T(K){return this.cmp(K)===-1},q.prototype.lten=function T(K){return this.cmpn(K)<=0},q.prototype.lte=function T(K){return this.cmp(K)<=0},q.prototype.eqn=function T(K){return this.cmpn(K)===0},q.prototype.eq=function T(K){return this.cmp(K)===0},q.red=function T(K){return new h(K)},q.prototype.toRed=function T(K){return Z(!this.red,"Already a number in reduction context"),Z(this.negative===0,"red works only with positives"),K.convertTo(this)._forceRed(K)},q.prototype.fromRed=function T(){return Z(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},q.prototype._forceRed=function T(K){return this.red=K,this},q.prototype.forceRed=function T(K){return Z(!this.red,"Already a number in reduction context"),this._forceRed(K)},q.prototype.redAdd=function T(K){return Z(this.red,"redAdd works only with red numbers"),this.red.add(this,K)},q.prototype.redIAdd=function T(K){return Z(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,K)},q.prototype.redSub=function T(K){return Z(this.red,"redSub works only with red numbers"),this.red.sub(this,K)},q.prototype.redISub=function T(K){return Z(this.red,"redISub works only with red numbers"),this.red.isub(this,K)},q.prototype.redShl=function T(K){return Z(this.red,"redShl works only with red numbers"),this.red.shl(this,K)},q.prototype.redMul=function T(K){return Z(this.red,"redMul works only with red numbers"),this.red._verify2(this,K),this.red.mul(this,K)},q.prototype.redIMul=function T(K){return Z(this.red,"redMul works only with red numbers"),this.red._verify2(this,K),this.red.imul(this,K)},q.prototype.redSqr=function T(){return Z(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},q.prototype.redISqr=function T(){return Z(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},q.prototype.redSqrt=function T(){return Z(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},q.prototype.redInvm=function T(){return Z(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},q.prototype.redNeg=function T(){return Z(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},q.prototype.redPow=function T(K){return Z(this.red&&!K.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,K)};var k={k256:null,p224:null,p192:null,p25519:null};function f(T,K){this.name=T,this.p=new q(K,16),this.n=this.p.bitLength(),this.k=new q(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}f.prototype._tmp=function T(){var K=new q(null);return K.words=new Array(Math.ceil(this.n/13)),K},f.prototype.ireduce=function T(K){var U=K,W;do this.split(U,this.tmp),U=this.imulK(U),U=U.iadd(this.tmp),W=U.bitLength();while(W>this.n);var V=W<this.n?-1:U.ucmp(this.p);if(V===0)U.words[0]=0,U.length=1;else if(V>0)U.isub(this.p);else if(U.strip!==void 0)U.strip();else U._strip();return U},f.prototype.split=function T(K,U){K.iushrn(this.n,0,U)},f.prototype.imulK=function T(K){return K.imul(this.k)};function g(){f.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}J(g,f),g.prototype.split=function T(K,U){var W=4194303,V=Math.min(K.length,9);for(var N=0;N<V;N++)U.words[N]=K.words[N];if(U.length=V,K.length<=9){K.words[0]=0,K.length=1;return}var L=K.words[9];U.words[U.length++]=L&W;for(N=10;N<K.length;N++){var F=K.words[N]|0;K.words[N-10]=(F&W)<<4|L>>>22,L=F}if(L>>>=22,K.words[N-10]=L,L===0&&K.length>10)K.length-=10;else K.length-=9},g.prototype.imulK=function T(K){K.words[K.length]=0,K.words[K.length+1]=0,K.length+=2;var U=0;for(var W=0;W<K.length;W++){var V=K.words[W]|0;U+=V*977,K.words[W]=U&67108863,U=V*64+(U/67108864|0)}if(K.words[K.length-1]===0){if(K.length--,K.words[K.length-1]===0)K.length--}return K};function b(){f.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}J(b,f);function m(){f.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}J(m,f);function l(){f.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}J(l,f),l.prototype.imulK=function T(K){var U=0;for(var W=0;W<K.length;W++){var V=(K.words[W]|0)*19+U,N=V&67108863;V>>>=26,K.words[W]=N,U=V}if(U!==0)K.words[K.length++]=U;return K},q._prime=function T(K){if(k[K])return k[K];var U;if(K==="k256")U=new g;else if(K==="p224")U=new b;else if(K==="p192")U=new m;else if(K==="p25519")U=new l;else throw new Error("Unknown prime "+K);return k[K]=U,U};function h(T){if(typeof T==="string"){var K=q._prime(T);this.m=K.p,this.prime=K}else Z(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}h.prototype._verify1=function T(K){Z(K.negative===0,"red works only with positives"),Z(K.red,"red works only with red numbers")},h.prototype._verify2=function T(K,U){Z((K.negative|U.negative)===0,"red works only with positives"),Z(K.red&&K.red===U.red,"red works only with red numbers")},h.prototype.imod=function T(K){if(this.prime)return this.prime.ireduce(K)._forceRed(this);return K.umod(this.m)._forceRed(this)},h.prototype.neg=function T(K){if(K.isZero())return K.clone();return this.m.sub(K)._forceRed(this)},h.prototype.add=function T(K,U){this._verify2(K,U);var W=K.add(U);if(W.cmp(this.m)>=0)W.isub(this.m);return W._forceRed(this)},h.prototype.iadd=function T(K,U){this._verify2(K,U);var W=K.iadd(U);if(W.cmp(this.m)>=0)W.isub(this.m);return W},h.prototype.sub=function T(K,U){this._verify2(K,U);var W=K.sub(U);if(W.cmpn(0)<0)W.iadd(this.m);return W._forceRed(this)},h.prototype.isub=function T(K,U){this._verify2(K,U);var W=K.isub(U);if(W.cmpn(0)<0)W.iadd(this.m);return W},h.prototype.shl=function T(K,U){return this._verify1(K),this.imod(K.ushln(U))},h.prototype.imul=function T(K,U){return this._verify2(K,U),this.imod(K.imul(U))},h.prototype.mul=function T(K,U){return this._verify2(K,U),this.imod(K.mul(U))},h.prototype.isqr=function T(K){return this.imul(K,K.clone())},h.prototype.sqr=function T(K){return this.mul(K,K)},h.prototype.sqrt=function T(K){if(K.isZero())return K.clone();var U=this.m.andln(3);if(Z(U%2===1),U===3){var W=this.m.add(new q(1)).iushrn(2);return this.pow(K,W)}var V=this.m.subn(1),N=0;while(!V.isZero()&&V.andln(1)===0)N++,V.iushrn(1);Z(!V.isZero());var L=new q(1).toRed(this),F=L.redNeg(),R=this.m.subn(1).iushrn(1),O=this.m.bitLength();O=new q(2*O*O).toRed(this);while(this.pow(O,R).cmp(F)!==0)O.redIAdd(F);var w=this.pow(O,V),x=this.pow(K,V.addn(1).iushrn(1)),E=this.pow(K,V),v=N;while(E.cmp(L)!==0){var p=E;for(var i=0;p.cmp(L)!==0;i++)p=p.redSqr();Z(i<v);var s=this.pow(w,new q(1).iushln(v-i-1));x=x.redMul(s),w=s.redSqr(),E=E.redMul(w),v=i}return x},h.prototype.invm=function T(K){var U=K._invmp(this.m);if(U.negative!==0)return U.negative=0,this.imod(U).redNeg();else return this.imod(U)},h.prototype.pow=function T(K,U){if(U.isZero())return new q(1).toRed(this);if(U.cmpn(1)===0)return K.clone();var W=4,V=new Array(1<<W);V[0]=new q(1).toRed(this),V[1]=K;for(var N=2;N<V.length;N++)V[N]=this.mul(V[N-1],K);var L=V[0],F=0,R=0,O=U.bitLength()%26;if(O===0)O=26;for(N=U.length-1;N>=0;N--){var w=U.words[N];for(var x=O-1;x>=0;x--){var E=w>>x&1;if(L!==V[0])L=this.sqr(L);if(E===0&&F===0){R=0;continue}if(F<<=1,F|=E,R++,R!==W&&(N!==0||x!==0))continue;L=this.mul(L,V[F]),R=0,F=0}O=26}return L},h.prototype.convertTo=function T(K){var U=K.umod(this.m);return U===K?U.clone():U},h.prototype.convertFrom=function T(K){var U=K.clone();return U.red=null,U},q.mont=function T(K){return new c(K)};function c(T){if(h.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0)this.shift+=26-this.shift%26;this.r=new q(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}J(c,h),c.prototype.convertTo=function T(K){return this.imod(K.ushln(this.shift))},c.prototype.convertFrom=function T(K){var U=this.imod(K.mul(this.rinv));return U.red=null,U},c.prototype.imul=function T(K,U){if(K.isZero()||U.isZero())return K.words[0]=0,K.length=1,K;var W=K.imul(U),V=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=W.isub(V).iushrn(this.shift),L=N;if(N.cmp(this.m)>=0)L=N.isub(this.m);else if(N.cmpn(0)<0)L=N.iadd(this.m);return L._forceRed(this)},c.prototype.mul=function T(K,U){if(K.isZero()||U.isZero())return new q(0)._forceRed(this);var W=K.mul(U),V=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=W.isub(V).iushrn(this.shift),L=N;if(N.cmp(this.m)>=0)L=N.isub(this.m);else if(N.cmpn(0)<0)L=N.iadd(this.m);return L._forceRed(this)},c.prototype.invm=function T(K){var U=this.imod(K._invmp(this.m).mul(this.r2));return U._forceRed(this)}})(typeof Q==="undefined"||Q,$)}),J7=o0(($,Q)=>{Q.exports=X;function X(Y,Z){if(!Y)throw new Error(Z||"Assertion failed")}X.equal=function Y(Z,J,q){if(Z!=J)throw new Error(q||"Assertion failed: "+Z+" != "+J)}}),Mm=o0(($)=>{var Q=$;function X(J,q){if(Array.isArray(J))return J.slice();if(!J)return[];var G=[];if(typeof J!=="string"){for(var z=0;z<J.length;z++)G[z]=J[z]|0;return G}if(q==="hex"){if(J=J.replace(/[^a-z0-9]+/ig,""),J.length%2!==0)J="0"+J;for(var z=0;z<J.length;z+=2)G.push(parseInt(J[z]+J[z+1],16))}else for(var z=0;z<J.length;z++){var M=J.charCodeAt(z),j=M>>8,P=M&255;if(j)G.push(j,P);else G.push(P)}return G}Q.toArray=X;function Y(J){if(J.length===1)return"0"+J;else return J}Q.zero2=Y;function Z(J){var q="";for(var G=0;G<J.length;G++)q+=Y(J[G].toString(16));return q}Q.toHex=Z,Q.encode=function J(q,G){if(G==="hex")return Z(q);else return q}}),eZ=o0(($)=>{var Q=$,X=c5(),Y=J7(),Z=Mm();Q.assert=Y,Q.toArray=Z.toArray,Q.zero2=Z.zero2,Q.toHex=Z.toHex,Q.encode=Z.encode;function J(j,P,D){var A=new Array(Math.max(j.bitLength(),D)+1),I;for(I=0;I<A.length;I+=1)A[I]=0;var H=1<<P+1,C=j.clone();for(I=0;I<A.length;I++){var B,S=C.andln(H-1);if(C.isOdd()){if(S>(H>>1)-1)B=(H>>1)-S;else B=S;C.isubn(B)}else B=0;A[I]=B,C.iushrn(1)}return A}Q.getNAF=J;function q(j,P){var D=[[],[]];j=j.clone(),P=P.clone();var A=0,I=0,H;while(j.cmpn(-A)>0||P.cmpn(-I)>0){var C=j.andln(3)+A&3,B=P.andln(3)+I&3;if(C===3)C=-1;if(B===3)B=-1;var S;if((C&1)===0)S=0;else if(H=j.andln(7)+A&7,(H===3||H===5)&&B===2)S=-C;else S=C;D[0].push(S);var _;if((B&1)===0)_=0;else if(H=P.andln(7)+I&7,(H===3||H===5)&&C===2)_=-B;else _=B;if(D[1].push(_),2*A===S+1)A=1-A;if(2*I===_+1)I=1-I;j.iushrn(1),P.iushrn(1)}return D}Q.getJSF=q;function G(j,P,D){var A="_"+P;j.prototype[P]=function I(){return this[A]!==void 0?this[A]:this[A]=D.call(this)}}Q.cachedProperty=G;function z(j){return typeof j==="string"?Q.toArray(j,"hex"):j}Q.parseBytes=z;function M(j){return new X(j,"hex","le")}Q.intFromLE=M}),Dm=o0(($,Q)=>{var X;Q.exports=function J(q){if(!X)X=new Y(null);return X.generate(q)};function Y(J){this.rand=J}if(Q.exports.Rand=Y,Y.prototype.generate=function J(q){return this._rand(q)},Y.prototype._rand=function J(q){if(this.rand.getBytes)return this.rand.getBytes(q);var G=new Uint8Array(q);for(var z=0;z<G.length;z++)G[z]=this.rand.getByte();return G},typeof self==="object"){if(self.crypto&&self.crypto.getRandomValues)Y.prototype._rand=function J(q){var G=new Uint8Array(q);return self.crypto.getRandomValues(G),G};else if(self.msCrypto&&self.msCrypto.getRandomValues)Y.prototype._rand=function J(q){var G=new Uint8Array(q);return self.msCrypto.getRandomValues(G),G};else if(typeof window==="object")Y.prototype._rand=function(){throw new Error("Not implemented yet")}}else try{if(Z=(QY(),I$($Y)),typeof Z.randomBytes!=="function")throw new Error("Not supported");Y.prototype._rand=function J(q){return Z.randomBytes(q)}}catch(J){}var Z}),YH=o0(($,Q)=>{var X=c5(),Y=eZ(),Z=Y.getNAF,J=Y.getJSF,q=Y.assert;function G(M,j){this.type=M,this.p=new X(j.p,16),this.red=j.prime?X.red(j.prime):X.mont(this.p),this.zero=new X(0).toRed(this.red),this.one=new X(1).toRed(this.red),this.two=new X(2).toRed(this.red),this.n=j.n&&new X(j.n,16),this.g=j.g&&this.pointFromJSON(j.g,j.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var P=this.n&&this.p.div(this.n);if(!P||P.cmpn(100)>0)this.redN=null;else this._maxwellTrick=!0,this.redN=this.n.toRed(this.red)}Q.exports=G,G.prototype.point=function M(){throw new Error("Not implemented")},G.prototype.validate=function M(){throw new Error("Not implemented")},G.prototype._fixedNafMul=function M(j,P){q(j.precomputed);var D=j._getDoubles(),A=Z(P,1,this._bitLength),I=(1<<D.step+1)-(D.step%2===0?2:1);I/=3;var H=[],C,B;for(C=0;C<A.length;C+=D.step){B=0;for(var S=C+D.step-1;S>=C;S--)B=(B<<1)+A[S];H.push(B)}var _=this.jpoint(null,null,null),k=this.jpoint(null,null,null);for(var f=I;f>0;f--){for(C=0;C<H.length;C++)if(B=H[C],B===f)k=k.mixedAdd(D.points[C]);else if(B===-f)k=k.mixedAdd(D.points[C].neg());_=_.add(k)}return _.toP()},G.prototype._wnafMul=function M(j,P){var D=4,A=j._getNAFPoints(D);D=A.wnd;var I=A.points,H=Z(P,D,this._bitLength),C=this.jpoint(null,null,null);for(var B=H.length-1;B>=0;B--){for(var S=0;B>=0&&H[B]===0;B--)S++;if(B>=0)S++;if(C=C.dblp(S),B<0)break;var _=H[B];if(q(_!==0),j.type==="affine")if(_>0)C=C.mixedAdd(I[_-1>>1]);else C=C.mixedAdd(I[-_-1>>1].neg());else if(_>0)C=C.add(I[_-1>>1]);else C=C.add(I[-_-1>>1].neg())}return j.type==="affine"?C.toP():C},G.prototype._wnafMulAdd=function M(j,P,D,A,I){var H=this._wnafT1,C=this._wnafT2,B=this._wnafT3,S=0,_,k,f;for(_=0;_<A;_++){f=P[_];var g=f._getNAFPoints(j);H[_]=g.wnd,C[_]=g.points}for(_=A-1;_>=1;_-=2){var b=_-1,m=_;if(H[b]!==1||H[m]!==1){B[b]=Z(D[b],H[b],this._bitLength),B[m]=Z(D[m],H[m],this._bitLength),S=Math.max(B[b].length,S),S=Math.max(B[m].length,S);continue}var l=[P[b],null,null,P[m]];if(P[b].y.cmp(P[m].y)===0)l[1]=P[b].add(P[m]),l[2]=P[b].toJ().mixedAdd(P[m].neg());else if(P[b].y.cmp(P[m].y.redNeg())===0)l[1]=P[b].toJ().mixedAdd(P[m]),l[2]=P[b].add(P[m].neg());else l[1]=P[b].toJ().mixedAdd(P[m]),l[2]=P[b].toJ().mixedAdd(P[m].neg());var h=[-3,-1,-5,-7,0,7,5,1,3],c=J(D[b],D[m]);S=Math.max(c[0].length,S),B[b]=new Array(S),B[m]=new Array(S);for(k=0;k<S;k++){var T=c[0][k]|0,K=c[1][k]|0;B[b][k]=h[(T+1)*3+(K+1)],B[m][k]=0,C[b]=l}}var U=this.jpoint(null,null,null),W=this._wnafT4;for(_=S;_>=0;_--){var V=0;while(_>=0){var N=!0;for(k=0;k<A;k++)if(W[k]=B[k][_]|0,W[k]!==0)N=!1;if(!N)break;V++,_--}if(_>=0)V++;if(U=U.dblp(V),_<0)break;for(k=0;k<A;k++){var L=W[k];if(L===0)continue;else if(L>0)f=C[k][L-1>>1];else if(L<0)f=C[k][-L-1>>1].neg();if(f.type==="affine")U=U.mixedAdd(f);else U=U.add(f)}}for(_=0;_<A;_++)C[_]=null;if(I)return U;else return U.toP()};function z(M,j){this.curve=M,this.type=j,this.precomputed=null}G.BasePoint=z,z.prototype.eq=function M(){throw new Error("Not implemented")},z.prototype.validate=function M(){return this.curve.validate(this)},G.prototype.decodePoint=function M(j,P){j=Y.toArray(j,P);var D=this.p.byteLength();if((j[0]===4||j[0]===6||j[0]===7)&&j.length-1===2*D){if(j[0]===6)q(j[j.length-1]%2===0);else if(j[0]===7)q(j[j.length-1]%2===1);var A=this.point(j.slice(1,1+D),j.slice(1+D,1+2*D));return A}else if((j[0]===2||j[0]===3)&&j.length-1===D)return this.pointFromX(j.slice(1,1+D),j[0]===3);throw new Error("Unknown point format")},z.prototype.encodeCompressed=function M(j){return this.encode(j,!0)},z.prototype._encode=function M(j){var P=this.curve.p.byteLength(),D=this.getX().toArray("be",P);if(j)return[this.getY().isEven()?2:3].concat(D);return[4].concat(D,this.getY().toArray("be",P))},z.prototype.encode=function M(j,P){return Y.encode(this._encode(P),j)},z.prototype.precompute=function M(j){if(this.precomputed)return this;var P={doubles:null,naf:null,beta:null};return P.naf=this._getNAFPoints(8),P.doubles=this._getDoubles(4,j),P.beta=this._getBeta(),this.precomputed=P,this},z.prototype._hasDoubles=function M(j){if(!this.precomputed)return!1;var P=this.precomputed.doubles;if(!P)return!1;return P.points.length>=Math.ceil((j.bitLength()+1)/P.step)},z.prototype._getDoubles=function M(j,P){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;var D=[this],A=this;for(var I=0;I<P;I+=j){for(var H=0;H<j;H++)A=A.dbl();D.push(A)}return{step:j,points:D}},z.prototype._getNAFPoints=function M(j){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;var P=[this],D=(1<<j)-1,A=D===1?null:this.dbl();for(var I=1;I<D;I++)P[I]=P[I-1].add(A);return{wnd:j,points:P}},z.prototype._getBeta=function M(){return null},z.prototype.dblp=function M(j){var P=this;for(var D=0;D<j;D++)P=P.dbl();return P}}),g40=o0(($,Q)=>{if(typeof Object.create==="function")Q.exports=function X(Y,Z){if(Z)Y.super_=Z,Y.prototype=Object.create(Z.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}})};else Q.exports=function X(Y,Z){if(Z){Y.super_=Z;var J=function(){};J.prototype=Z.prototype,Y.prototype=new J,Y.prototype.constructor=Y}}}),oY=o0(($,Q)=>{try{if(X=($m(),I$(eh)),typeof X.inherits!=="function")throw"";Q.exports=X.inherits}catch(Y){Q.exports=g40()}var X}),y40=o0(($,Q)=>{var X=eZ(),Y=c5(),Z=oY(),J=YH(),q=X.assert;function G(j){J.call(this,"short",j),this.a=new Y(j.a,16).toRed(this.red),this.b=new Y(j.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(j),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Z(G,J),Q.exports=G,G.prototype._getEndomorphism=function j(P){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;var D,A;if(P.beta)D=new Y(P.beta,16).toRed(this.red);else{var I=this._getEndoRoots(this.p);D=I[0].cmp(I[1])<0?I[0]:I[1],D=D.toRed(this.red)}if(P.lambda)A=new Y(P.lambda,16);else{var H=this._getEndoRoots(this.n);if(this.g.mul(H[0]).x.cmp(this.g.x.redMul(D))===0)A=H[0];else A=H[1],q(this.g.mul(A).x.cmp(this.g.x.redMul(D))===0)}var C;if(P.basis)C=P.basis.map(function(B){return{a:new Y(B.a,16),b:new Y(B.b,16)}});else C=this._getEndoBasis(A);return{beta:D,lambda:A,basis:C}},G.prototype._getEndoRoots=function j(P){var D=P===this.p?this.red:Y.mont(P),A=new Y(2).toRed(D).redInvm(),I=A.redNeg(),H=new Y(3).toRed(D).redNeg().redSqrt().redMul(A),C=I.redAdd(H).fromRed(),B=I.redSub(H).fromRed();return[C,B]},G.prototype._getEndoBasis=function j(P){var D=this.n.ushrn(Math.floor(this.n.bitLength()/2)),A=P,I=this.n.clone(),H=new Y(1),C=new Y(0),B=new Y(0),S=new Y(1),_,k,f,g,b,m,l,h=0,c,T;while(A.cmpn(0)!==0){var K=I.div(A);c=I.sub(K.mul(A)),T=B.sub(K.mul(H));var U=S.sub(K.mul(C));if(!f&&c.cmp(D)<0)_=l.neg(),k=H,f=c.neg(),g=T;else if(f&&++h===2)break;l=c,I=A,A=c,B=H,H=T,S=C,C=U}b=c.neg(),m=T;var W=f.sqr().add(g.sqr()),V=b.sqr().add(m.sqr());if(V.cmp(W)>=0)b=_,m=k;if(f.negative)f=f.neg(),g=g.neg();if(b.negative)b=b.neg(),m=m.neg();return[{a:f,b:g},{a:b,b:m}]},G.prototype._endoSplit=function j(P){var D=this.endo.basis,A=D[0],I=D[1],H=I.b.mul(P).divRound(this.n),C=A.b.neg().mul(P).divRound(this.n),B=H.mul(A.a),S=C.mul(I.a),_=H.mul(A.b),k=C.mul(I.b),f=P.sub(B).sub(S),g=_.add(k).neg();return{k1:f,k2:g}},G.prototype.pointFromX=function j(P,D){if(P=new Y(P,16),!P.red)P=P.toRed(this.red);var A=P.redSqr().redMul(P).redIAdd(P.redMul(this.a)).redIAdd(this.b),I=A.redSqrt();if(I.redSqr().redSub(A).cmp(this.zero)!==0)throw new Error("invalid point");var H=I.fromRed().isOdd();if(D&&!H||!D&&H)I=I.redNeg();return this.point(P,I)},G.prototype.validate=function j(P){if(P.inf)return!0;var{x:D,y:A}=P,I=this.a.redMul(D),H=D.redSqr().redMul(D).redIAdd(I).redIAdd(this.b);return A.redSqr().redISub(H).cmpn(0)===0},G.prototype._endoWnafMulAdd=function j(P,D,A){var I=this._endoWnafT1,H=this._endoWnafT2;for(var C=0;C<P.length;C++){var B=this._endoSplit(D[C]),S=P[C],_=S._getBeta();if(B.k1.negative)B.k1.ineg(),S=S.neg(!0);if(B.k2.negative)B.k2.ineg(),_=_.neg(!0);I[C*2]=S,I[C*2+1]=_,H[C*2]=B.k1,H[C*2+1]=B.k2}var k=this._wnafMulAdd(1,I,H,C*2,A);for(var f=0;f<C*2;f++)I[f]=null,H[f]=null;return k};function z(j,P,D,A){if(J.BasePoint.call(this,j,"affine"),P===null&&D===null)this.x=null,this.y=null,this.inf=!0;else{if(this.x=new Y(P,16),this.y=new Y(D,16),A)this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);this.inf=!1}}Z(z,J.BasePoint),G.prototype.point=function j(P,D,A){return new z(this,P,D,A)},G.prototype.pointFromJSON=function j(P,D){return z.fromJSON(this,P,D)},z.prototype._getBeta=function j(){if(!this.curve.endo)return;var P=this.precomputed;if(P&&P.beta)return P.beta;var D=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(P){var A=this.curve,I=function(H){return A.point(H.x.redMul(A.endo.beta),H.y)};P.beta=D,D.precomputed={beta:null,naf:P.naf&&{wnd:P.naf.wnd,points:P.naf.points.map(I)},doubles:P.doubles&&{step:P.doubles.step,points:P.doubles.points.map(I)}}}return D},z.prototype.toJSON=function j(){if(!this.precomputed)return[this.x,this.y];return[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]},z.fromJSON=function j(P,D,A){if(typeof D==="string")D=JSON.parse(D);var I=P.point(D[0],D[1],A);if(!D[2])return I;function H(B){return P.point(B[0],B[1],A)}var C=D[2];return I.precomputed={beta:null,doubles:C.doubles&&{step:C.doubles.step,points:[I].concat(C.doubles.points.map(H))},naf:C.naf&&{wnd:C.naf.wnd,points:[I].concat(C.naf.points.map(H))}},I},z.prototype.inspect=function j(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},z.prototype.isInfinity=function j(){return this.inf},z.prototype.add=function j(P){if(this.inf)return P;if(P.inf)return this;if(this.eq(P))return this.dbl();if(this.neg().eq(P))return this.curve.point(null,null);if(this.x.cmp(P.x)===0)return this.curve.point(null,null);var D=this.y.redSub(P.y);if(D.cmpn(0)!==0)D=D.redMul(this.x.redSub(P.x).redInvm());var A=D.redSqr().redISub(this.x).redISub(P.x),I=D.redMul(this.x.redSub(A)).redISub(this.y);return this.curve.point(A,I)},z.prototype.dbl=function j(){if(this.inf)return this;var P=this.y.redAdd(this.y);if(P.cmpn(0)===0)return this.curve.point(null,null);var D=this.curve.a,A=this.x.redSqr(),I=P.redInvm(),H=A.redAdd(A).redIAdd(A).redIAdd(D).redMul(I),C=H.redSqr().redISub(this.x.redAdd(this.x)),B=H.redMul(this.x.redSub(C)).redISub(this.y);return this.curve.point(C,B)},z.prototype.getX=function j(){return this.x.fromRed()},z.prototype.getY=function j(){return this.y.fromRed()},z.prototype.mul=function j(P){if(P=new Y(P,16),this.isInfinity())return this;else if(this._hasDoubles(P))return this.curve._fixedNafMul(this,P);else if(this.curve.endo)return this.curve._endoWnafMulAdd([this],[P]);else return this.curve._wnafMul(this,P)},z.prototype.mulAdd=function j(P,D,A){var I=[this,D],H=[P,A];if(this.curve.endo)return this.curve._endoWnafMulAdd(I,H);else return this.curve._wnafMulAdd(1,I,H,2)},z.prototype.jmulAdd=function j(P,D,A){var I=[this,D],H=[P,A];if(this.curve.endo)return this.curve._endoWnafMulAdd(I,H,!0);else return this.curve._wnafMulAdd(1,I,H,2,!0)},z.prototype.eq=function j(P){return this===P||this.inf===P.inf&&(this.inf||this.x.cmp(P.x)===0&&this.y.cmp(P.y)===0)},z.prototype.neg=function j(P){if(this.inf)return this;var D=this.curve.point(this.x,this.y.redNeg());if(P&&this.precomputed){var A=this.precomputed,I=function(H){return H.neg()};D.precomputed={naf:A.naf&&{wnd:A.naf.wnd,points:A.naf.points.map(I)},doubles:A.doubles&&{step:A.doubles.step,points:A.doubles.points.map(I)}}}return D},z.prototype.toJ=function j(){if(this.inf)return this.curve.jpoint(null,null,null);var P=this.curve.jpoint(this.x,this.y,this.curve.one);return P};function M(j,P,D,A){if(J.BasePoint.call(this,j,"jacobian"),P===null&&D===null&&A===null)this.x=this.curve.one,this.y=this.curve.one,this.z=new Y(0);else this.x=new Y(P,16),this.y=new Y(D,16),this.z=new Y(A,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);this.zOne=this.z===this.curve.one}Z(M,J.BasePoint),G.prototype.jpoint=function j(P,D,A){return new M(this,P,D,A)},M.prototype.toP=function j(){if(this.isInfinity())return this.curve.point(null,null);var P=this.z.redInvm(),D=P.redSqr(),A=this.x.redMul(D),I=this.y.redMul(D).redMul(P);return this.curve.point(A,I)},M.prototype.neg=function j(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},M.prototype.add=function j(P){if(this.isInfinity())return P;if(P.isInfinity())return this;var D=P.z.redSqr(),A=this.z.redSqr(),I=this.x.redMul(D),H=P.x.redMul(A),C=this.y.redMul(D.redMul(P.z)),B=P.y.redMul(A.redMul(this.z)),S=I.redSub(H),_=C.redSub(B);if(S.cmpn(0)===0)if(_.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl();var k=S.redSqr(),f=k.redMul(S),g=I.redMul(k),b=_.redSqr().redIAdd(f).redISub(g).redISub(g),m=_.redMul(g.redISub(b)).redISub(C.redMul(f)),l=this.z.redMul(P.z).redMul(S);return this.curve.jpoint(b,m,l)},M.prototype.mixedAdd=function j(P){if(this.isInfinity())return P.toJ();if(P.isInfinity())return this;var D=this.z.redSqr(),A=this.x,I=P.x.redMul(D),H=this.y,C=P.y.redMul(D).redMul(this.z),B=A.redSub(I),S=H.redSub(C);if(B.cmpn(0)===0)if(S.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl();var _=B.redSqr(),k=_.redMul(B),f=A.redMul(_),g=S.redSqr().redIAdd(k).redISub(f).redISub(f),b=S.redMul(f.redISub(g)).redISub(H.redMul(k)),m=this.z.redMul(B);return this.curve.jpoint(g,b,m)},M.prototype.dblp=function j(P){if(P===0)return this;if(this.isInfinity())return this;if(!P)return this.dbl();var D;if(this.curve.zeroA||this.curve.threeA){var A=this;for(D=0;D<P;D++)A=A.dbl();return A}var I=this.curve.a,H=this.curve.tinv,C=this.x,B=this.y,S=this.z,_=S.redSqr().redSqr(),k=B.redAdd(B);for(D=0;D<P;D++){var f=C.redSqr(),g=k.redSqr(),b=g.redSqr(),m=f.redAdd(f).redIAdd(f).redIAdd(I.redMul(_)),l=C.redMul(g),h=m.redSqr().redISub(l.redAdd(l)),c=l.redISub(h),T=m.redMul(c);T=T.redIAdd(T).redISub(b);var K=k.redMul(S);if(D+1<P)_=_.redMul(b);C=h,S=K,k=T}return this.curve.jpoint(C,k.redMul(H),S)},M.prototype.dbl=function j(){if(this.isInfinity())return this;if(this.curve.zeroA)return this._zeroDbl();else if(this.curve.threeA)return this._threeDbl();else return this._dbl()},M.prototype._zeroDbl=function j(){var P,D,A;if(this.zOne){var I=this.x.redSqr(),H=this.y.redSqr(),C=H.redSqr(),B=this.x.redAdd(H).redSqr().redISub(I).redISub(C);B=B.redIAdd(B);var S=I.redAdd(I).redIAdd(I),_=S.redSqr().redISub(B).redISub(B),k=C.redIAdd(C);k=k.redIAdd(k),k=k.redIAdd(k),P=_,D=S.redMul(B.redISub(_)).redISub(k),A=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),g=this.y.redSqr(),b=g.redSqr(),m=this.x.redAdd(g).redSqr().redISub(f).redISub(b);m=m.redIAdd(m);var l=f.redAdd(f).redIAdd(f),h=l.redSqr(),c=b.redIAdd(b);c=c.redIAdd(c),c=c.redIAdd(c),P=h.redISub(m).redISub(m),D=l.redMul(m.redISub(P)).redISub(c),A=this.y.redMul(this.z),A=A.redIAdd(A)}return this.curve.jpoint(P,D,A)},M.prototype._threeDbl=function j(){var P,D,A;if(this.zOne){var I=this.x.redSqr(),H=this.y.redSqr(),C=H.redSqr(),B=this.x.redAdd(H).redSqr().redISub(I).redISub(C);B=B.redIAdd(B);var S=I.redAdd(I).redIAdd(I).redIAdd(this.curve.a),_=S.redSqr().redISub(B).redISub(B);P=_;var k=C.redIAdd(C);k=k.redIAdd(k),k=k.redIAdd(k),D=S.redMul(B.redISub(_)).redISub(k),A=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),g=this.y.redSqr(),b=this.x.redMul(g),m=this.x.redSub(f).redMul(this.x.redAdd(f));m=m.redAdd(m).redIAdd(m);var l=b.redIAdd(b);l=l.redIAdd(l);var h=l.redAdd(l);P=m.redSqr().redISub(h),A=this.y.redAdd(this.z).redSqr().redISub(g).redISub(f);var c=g.redSqr();c=c.redIAdd(c),c=c.redIAdd(c),c=c.redIAdd(c),D=m.redMul(l.redISub(P)).redISub(c)}return this.curve.jpoint(P,D,A)},M.prototype._dbl=function j(){var P=this.curve.a,D=this.x,A=this.y,I=this.z,H=I.redSqr().redSqr(),C=D.redSqr(),B=A.redSqr(),S=C.redAdd(C).redIAdd(C).redIAdd(P.redMul(H)),_=D.redAdd(D);_=_.redIAdd(_);var k=_.redMul(B),f=S.redSqr().redISub(k.redAdd(k)),g=k.redISub(f),b=B.redSqr();b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var m=S.redMul(g).redISub(b),l=A.redAdd(A).redMul(I);return this.curve.jpoint(f,m,l)},M.prototype.trpl=function j(){if(!this.curve.zeroA)return this.dbl().add(this);var P=this.x.redSqr(),D=this.y.redSqr(),A=this.z.redSqr(),I=D.redSqr(),H=P.redAdd(P).redIAdd(P),C=H.redSqr(),B=this.x.redAdd(D).redSqr().redISub(P).redISub(I);B=B.redIAdd(B),B=B.redAdd(B).redIAdd(B),B=B.redISub(C);var S=B.redSqr(),_=I.redIAdd(I);_=_.redIAdd(_),_=_.redIAdd(_),_=_.redIAdd(_);var k=H.redIAdd(B).redSqr().redISub(C).redISub(S).redISub(_),f=D.redMul(k);f=f.redIAdd(f),f=f.redIAdd(f);var g=this.x.redMul(S).redISub(f);g=g.redIAdd(g),g=g.redIAdd(g);var b=this.y.redMul(k.redMul(_.redISub(k)).redISub(B.redMul(S)));b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var m=this.z.redAdd(B).redSqr().redISub(A).redISub(S);return this.curve.jpoint(g,b,m)},M.prototype.mul=function j(P,D){return P=new Y(P,D),this.curve._wnafMul(this,P)},M.prototype.eq=function j(P){if(P.type==="affine")return this.eq(P.toJ());if(this===P)return!0;var D=this.z.redSqr(),A=P.z.redSqr();if(this.x.redMul(A).redISub(P.x.redMul(D)).cmpn(0)!==0)return!1;var I=D.redMul(this.z),H=A.redMul(P.z);return this.y.redMul(H).redISub(P.y.redMul(I)).cmpn(0)===0},M.prototype.eqXToP=function j(P){var D=this.z.redSqr(),A=P.toRed(this.curve.red).redMul(D);if(this.x.cmp(A)===0)return!0;var I=P.clone(),H=this.curve.redN.redMul(D);for(;;){if(I.iadd(this.curve.n),I.cmp(this.curve.p)>=0)return!1;if(A.redIAdd(H),this.x.cmp(A)===0)return!0}},M.prototype.inspect=function j(){if(this.isInfinity())return"<EC JPoint Infinity>";return"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},M.prototype.isInfinity=function j(){return this.z.cmpn(0)===0}}),b40=o0(($,Q)=>{var X=c5(),Y=oY(),Z=YH(),J=eZ();function q(z){Z.call(this,"mont",z),this.a=new X(z.a,16).toRed(this.red),this.b=new X(z.b,16).toRed(this.red),this.i4=new X(4).toRed(this.red).redInvm(),this.two=new X(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Y(q,Z),Q.exports=q,q.prototype.validate=function z(M){var j=M.normalize().x,P=j.redSqr(),D=P.redMul(j).redAdd(P.redMul(this.a)).redAdd(j),A=D.redSqrt();return A.redSqr().cmp(D)===0};function G(z,M,j){if(Z.BasePoint.call(this,z,"projective"),M===null&&j===null)this.x=this.curve.one,this.z=this.curve.zero;else{if(this.x=new X(M,16),this.z=new X(j,16),!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red)}}Y(G,Z.BasePoint),q.prototype.decodePoint=function z(M,j){return this.point(J.toArray(M,j),1)},q.prototype.point=function z(M,j){return new G(this,M,j)},q.prototype.pointFromJSON=function z(M){return G.fromJSON(this,M)},G.prototype.precompute=function z(){},G.prototype._encode=function z(){return this.getX().toArray("be",this.curve.p.byteLength())},G.fromJSON=function z(M,j){return new G(M,j[0],j[1]||M.one)},G.prototype.inspect=function z(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},G.prototype.isInfinity=function z(){return this.z.cmpn(0)===0},G.prototype.dbl=function z(){var M=this.x.redAdd(this.z),j=M.redSqr(),P=this.x.redSub(this.z),D=P.redSqr(),A=j.redSub(D),I=j.redMul(D),H=A.redMul(D.redAdd(this.curve.a24.redMul(A)));return this.curve.point(I,H)},G.prototype.add=function z(){throw new Error("Not supported on Montgomery curve")},G.prototype.diffAdd=function z(M,j){var P=this.x.redAdd(this.z),D=this.x.redSub(this.z),A=M.x.redAdd(M.z),I=M.x.redSub(M.z),H=I.redMul(P),C=A.redMul(D),B=j.z.redMul(H.redAdd(C).redSqr()),S=j.x.redMul(H.redISub(C).redSqr());return this.curve.point(B,S)},G.prototype.mul=function z(M){var j=M.clone(),P=this,D=this.curve.point(null,null),A=this;for(var I=[];j.cmpn(0)!==0;j.iushrn(1))I.push(j.andln(1));for(var H=I.length-1;H>=0;H--)if(I[H]===0)P=P.diffAdd(D,A),D=D.dbl();else D=P.diffAdd(D,A),P=P.dbl();return D},G.prototype.mulAdd=function z(){throw new Error("Not supported on Montgomery curve")},G.prototype.jumlAdd=function z(){throw new Error("Not supported on Montgomery curve")},G.prototype.eq=function z(M){return this.getX().cmp(M.getX())===0},G.prototype.normalize=function z(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},G.prototype.getX=function z(){return this.normalize(),this.x.fromRed()}}),h40=o0(($,Q)=>{var X=eZ(),Y=c5(),Z=oY(),J=YH(),q=X.assert;function G(M){this.twisted=(M.a|0)!==1,this.mOneA=this.twisted&&(M.a|0)===-1,this.extended=this.mOneA,J.call(this,"edwards",M),this.a=new Y(M.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Y(M.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Y(M.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),q(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(M.c|0)===1}Z(G,J),Q.exports=G,G.prototype._mulA=function M(j){if(this.mOneA)return j.redNeg();else return this.a.redMul(j)},G.prototype._mulC=function M(j){if(this.oneC)return j;else return this.c.redMul(j)},G.prototype.jpoint=function M(j,P,D,A){return this.point(j,P,D,A)},G.prototype.pointFromX=function M(j,P){if(j=new Y(j,16),!j.red)j=j.toRed(this.red);var D=j.redSqr(),A=this.c2.redSub(this.a.redMul(D)),I=this.one.redSub(this.c2.redMul(this.d).redMul(D)),H=A.redMul(I.redInvm()),C=H.redSqrt();if(C.redSqr().redSub(H).cmp(this.zero)!==0)throw new Error("invalid point");var B=C.fromRed().isOdd();if(P&&!B||!P&&B)C=C.redNeg();return this.point(j,C)},G.prototype.pointFromY=function M(j,P){if(j=new Y(j,16),!j.red)j=j.toRed(this.red);var D=j.redSqr(),A=D.redSub(this.c2),I=D.redMul(this.d).redMul(this.c2).redSub(this.a),H=A.redMul(I.redInvm());if(H.cmp(this.zero)===0)if(P)throw new Error("invalid point");else return this.point(this.zero,j);var C=H.redSqrt();if(C.redSqr().redSub(H).cmp(this.zero)!==0)throw new Error("invalid point");if(C.fromRed().isOdd()!==P)C=C.redNeg();return this.point(C,j)},G.prototype.validate=function M(j){if(j.isInfinity())return!0;j.normalize();var P=j.x.redSqr(),D=j.y.redSqr(),A=P.redMul(this.a).redAdd(D),I=this.c2.redMul(this.one.redAdd(this.d.redMul(P).redMul(D)));return A.cmp(I)===0};function z(M,j,P,D,A){if(J.BasePoint.call(this,M,"projective"),j===null&&P===null&&D===null)this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0;else{if(this.x=new Y(j,16),this.y=new Y(P,16),this.z=D?new Y(D,16):this.curve.one,this.t=A&&new Y(A,16),!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);if(this.t&&!this.t.red)this.t=this.t.toRed(this.curve.red);if(this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t){if(this.t=this.x.redMul(this.y),!this.zOne)this.t=this.t.redMul(this.z.redInvm())}}}Z(z,J.BasePoint),G.prototype.pointFromJSON=function M(j){return z.fromJSON(this,j)},G.prototype.point=function M(j,P,D,A){return new z(this,j,P,D,A)},z.fromJSON=function M(j,P){return new z(j,P[0],P[1],P[2])},z.prototype.inspect=function M(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},z.prototype.isInfinity=function M(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},z.prototype._extDbl=function M(){var j=this.x.redSqr(),P=this.y.redSqr(),D=this.z.redSqr();D=D.redIAdd(D);var A=this.curve._mulA(j),I=this.x.redAdd(this.y).redSqr().redISub(j).redISub(P),H=A.redAdd(P),C=H.redSub(D),B=A.redSub(P),S=I.redMul(C),_=H.redMul(B),k=I.redMul(B),f=C.redMul(H);return this.curve.point(S,_,f,k)},z.prototype._projDbl=function M(){var j=this.x.redAdd(this.y).redSqr(),P=this.x.redSqr(),D=this.y.redSqr(),A,I,H,C,B,S;if(this.curve.twisted){C=this.curve._mulA(P);var _=C.redAdd(D);if(this.zOne)A=j.redSub(P).redSub(D).redMul(_.redSub(this.curve.two)),I=_.redMul(C.redSub(D)),H=_.redSqr().redSub(_).redSub(_);else B=this.z.redSqr(),S=_.redSub(B).redISub(B),A=j.redSub(P).redISub(D).redMul(S),I=_.redMul(C.redSub(D)),H=_.redMul(S)}else C=P.redAdd(D),B=this.curve._mulC(this.z).redSqr(),S=C.redSub(B).redSub(B),A=this.curve._mulC(j.redISub(C)).redMul(S),I=this.curve._mulC(C).redMul(P.redISub(D)),H=C.redMul(S);return this.curve.point(A,I,H)},z.prototype.dbl=function M(){if(this.isInfinity())return this;if(this.curve.extended)return this._extDbl();else return this._projDbl()},z.prototype._extAdd=function M(j){var P=this.y.redSub(this.x).redMul(j.y.redSub(j.x)),D=this.y.redAdd(this.x).redMul(j.y.redAdd(j.x)),A=this.t.redMul(this.curve.dd).redMul(j.t),I=this.z.redMul(j.z.redAdd(j.z)),H=D.redSub(P),C=I.redSub(A),B=I.redAdd(A),S=D.redAdd(P),_=H.redMul(C),k=B.redMul(S),f=H.redMul(S),g=C.redMul(B);return this.curve.point(_,k,g,f)},z.prototype._projAdd=function M(j){var P=this.z.redMul(j.z),D=P.redSqr(),A=this.x.redMul(j.x),I=this.y.redMul(j.y),H=this.curve.d.redMul(A).redMul(I),C=D.redSub(H),B=D.redAdd(H),S=this.x.redAdd(this.y).redMul(j.x.redAdd(j.y)).redISub(A).redISub(I),_=P.redMul(C).redMul(S),k,f;if(this.curve.twisted)k=P.redMul(B).redMul(I.redSub(this.curve._mulA(A))),f=C.redMul(B);else k=P.redMul(B).redMul(I.redSub(A)),f=this.curve._mulC(C).redMul(B);return this.curve.point(_,k,f)},z.prototype.add=function M(j){if(this.isInfinity())return j;if(j.isInfinity())return this;if(this.curve.extended)return this._extAdd(j);else return this._projAdd(j)},z.prototype.mul=function M(j){if(this._hasDoubles(j))return this.curve._fixedNafMul(this,j);else return this.curve._wnafMul(this,j)},z.prototype.mulAdd=function M(j,P,D){return this.curve._wnafMulAdd(1,[this,P],[j,D],2,!1)},z.prototype.jmulAdd=function M(j,P,D){return this.curve._wnafMulAdd(1,[this,P],[j,D],2,!0)},z.prototype.normalize=function M(){if(this.zOne)return this;var j=this.z.redInvm();if(this.x=this.x.redMul(j),this.y=this.y.redMul(j),this.t)this.t=this.t.redMul(j);return this.z=this.curve.one,this.zOne=!0,this},z.prototype.neg=function M(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},z.prototype.getX=function M(){return this.normalize(),this.x.fromRed()},z.prototype.getY=function M(){return this.normalize(),this.y.fromRed()},z.prototype.eq=function M(j){return this===j||this.getX().cmp(j.getX())===0&&this.getY().cmp(j.getY())===0},z.prototype.eqXToP=function M(j){var P=j.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(P)===0)return!0;var D=j.clone(),A=this.curve.redN.redMul(this.z);for(;;){if(D.iadd(this.curve.n),D.cmp(this.curve.p)>=0)return!1;if(P.redIAdd(A),this.x.cmp(P)===0)return!0}},z.prototype.toP=z.prototype.normalize,z.prototype.mixedAdd=z.prototype.add}),jm=o0(($)=>{var Q=$;Q.base=YH(),Q.short=y40(),Q.mont=b40(),Q.edwards=h40()}),AJ=o0(($)=>{var Q=J7(),X=oY();$.inherits=X;function Y(K,U){if((K.charCodeAt(U)&64512)!==55296)return!1;if(U<0||U+1>=K.length)return!1;return(K.charCodeAt(U+1)&64512)===56320}function Z(K,U){if(Array.isArray(K))return K.slice();if(!K)return[];var W=[];if(typeof K==="string"){if(!U){var V=0;for(var N=0;N<K.length;N++){var L=K.charCodeAt(N);if(L<128)W[V++]=L;else if(L<2048)W[V++]=L>>6|192,W[V++]=L&63|128;else if(Y(K,N))L=65536+((L&1023)<<10)+(K.charCodeAt(++N)&1023),W[V++]=L>>18|240,W[V++]=L>>12&63|128,W[V++]=L>>6&63|128,W[V++]=L&63|128;else W[V++]=L>>12|224,W[V++]=L>>6&63|128,W[V++]=L&63|128}}else if(U==="hex"){if(K=K.replace(/[^a-z0-9]+/ig,""),K.length%2!==0)K="0"+K;for(N=0;N<K.length;N+=2)W.push(parseInt(K[N]+K[N+1],16))}}else for(N=0;N<K.length;N++)W[N]=K[N]|0;return W}$.toArray=Z;function J(K){var U="";for(var W=0;W<K.length;W++)U+=z(K[W].toString(16));return U}$.toHex=J;function q(K){var U=K>>>24|K>>>8&65280|K<<8&16711680|(K&255)<<24;return U>>>0}$.htonl=q;function G(K,U){var W="";for(var V=0;V<K.length;V++){var N=K[V];if(U==="little")N=q(N);W+=M(N.toString(16))}return W}$.toHex32=G;function z(K){if(K.length===1)return"0"+K;else return K}$.zero2=z;function M(K){if(K.length===7)return"0"+K;else if(K.length===6)return"00"+K;else if(K.length===5)return"000"+K;else if(K.length===4)return"0000"+K;else if(K.length===3)return"00000"+K;else if(K.length===2)return"000000"+K;else if(K.length===1)return"0000000"+K;else return K}$.zero8=M;function j(K,U,W,V){var N=W-U;Q(N%4===0);var L=new Array(N/4);for(var F=0,R=U;F<L.length;F++,R+=4){var O;if(V==="big")O=K[R]<<24|K[R+1]<<16|K[R+2]<<8|K[R+3];else O=K[R+3]<<24|K[R+2]<<16|K[R+1]<<8|K[R];L[F]=O>>>0}return L}$.join32=j;function P(K,U){var W=new Array(K.length*4);for(var V=0,N=0;V<K.length;V++,N+=4){var L=K[V];if(U==="big")W[N]=L>>>24,W[N+1]=L>>>16&255,W[N+2]=L>>>8&255,W[N+3]=L&255;else W[N+3]=L>>>24,W[N+2]=L>>>16&255,W[N+1]=L>>>8&255,W[N]=L&255}return W}$.split32=P;function D(K,U){return K>>>U|K<<32-U}$.rotr32=D;function A(K,U){return K<<U|K>>>32-U}$.rotl32=A;function I(K,U){return K+U>>>0}$.sum32=I;function H(K,U,W){return K+U+W>>>0}$.sum32_3=H;function C(K,U,W,V){return K+U+W+V>>>0}$.sum32_4=C;function B(K,U,W,V,N){return K+U+W+V+N>>>0}$.sum32_5=B;function S(K,U,W,V){var N=K[U],L=K[U+1],F=V+L>>>0,R=(F<V?1:0)+W+N;K[U]=R>>>0,K[U+1]=F}$.sum64=S;function _(K,U,W,V){var N=U+V>>>0,L=(N<U?1:0)+K+W;return L>>>0}$.sum64_hi=_;function k(K,U,W,V){var N=U+V;return N>>>0}$.sum64_lo=k;function f(K,U,W,V,N,L,F,R){var O=0,w=U;w=w+V>>>0,O+=w<U?1:0,w=w+L>>>0,O+=w<L?1:0,w=w+R>>>0,O+=w<R?1:0;var x=K+W+N+F+O;return x>>>0}$.sum64_4_hi=f;function g(K,U,W,V,N,L,F,R){var O=U+V+L+R;return O>>>0}$.sum64_4_lo=g;function b(K,U,W,V,N,L,F,R,O,w){var x=0,E=U;E=E+V>>>0,x+=E<U?1:0,E=E+L>>>0,x+=E<L?1:0,E=E+R>>>0,x+=E<R?1:0,E=E+w>>>0,x+=E<w?1:0;var v=K+W+N+F+O+x;return v>>>0}$.sum64_5_hi=b;function m(K,U,W,V,N,L,F,R,O,w){var x=U+V+L+R+w;return x>>>0}$.sum64_5_lo=m;function l(K,U,W){var V=U<<32-W|K>>>W;return V>>>0}$.rotr64_hi=l;function h(K,U,W){var V=K<<32-W|U>>>W;return V>>>0}$.rotr64_lo=h;function c(K,U,W){return K>>>W}$.shr64_hi=c;function T(K,U,W){var V=K<<32-W|U>>>W;return V>>>0}$.shr64_lo=T}),EV=o0(($)=>{var Q=AJ(),X=J7();function Y(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}$.BlockHash=Y,Y.prototype.update=function Z(J,q){if(J=Q.toArray(J,q),!this.pending)this.pending=J;else this.pending=this.pending.concat(J);if(this.pendingTotal+=J.length,this.pending.length>=this._delta8){J=this.pending;var G=J.length%this._delta8;if(this.pending=J.slice(J.length-G,J.length),this.pending.length===0)this.pending=null;J=Q.join32(J,0,J.length-G,this.endian);for(var z=0;z<J.length;z+=this._delta32)this._update(J,z,z+this._delta32)}return this},Y.prototype.digest=function Z(J){return this.update(this._pad()),X(this.pending===null),this._digest(J)},Y.prototype._pad=function Z(){var J=this.pendingTotal,q=this._delta8,G=q-(J+this.padLength)%q,z=new Array(G+this.padLength);z[0]=128;for(var M=1;M<G;M++)z[M]=0;if(J<<=3,this.endian==="big"){for(var j=8;j<this.padLength;j++)z[M++]=0;z[M++]=0,z[M++]=0,z[M++]=0,z[M++]=0,z[M++]=J>>>24&255,z[M++]=J>>>16&255,z[M++]=J>>>8&255,z[M++]=J&255}else{z[M++]=J&255,z[M++]=J>>>8&255,z[M++]=J>>>16&255,z[M++]=J>>>24&255,z[M++]=0,z[M++]=0,z[M++]=0,z[M++]=0;for(j=8;j<this.padLength;j++)z[M++]=0}return z}}),Pm=o0(($)=>{var Q=AJ(),X=Q.rotr32;function Y(P,D,A,I){if(P===0)return Z(D,A,I);if(P===1||P===3)return q(D,A,I);if(P===2)return J(D,A,I)}$.ft_1=Y;function Z(P,D,A){return P&D^~P&A}$.ch32=Z;function J(P,D,A){return P&D^P&A^D&A}$.maj32=J;function q(P,D,A){return P^D^A}$.p32=q;function G(P){return X(P,2)^X(P,13)^X(P,22)}$.s0_256=G;function z(P){return X(P,6)^X(P,11)^X(P,25)}$.s1_256=z;function M(P){return X(P,7)^X(P,18)^P>>>3}$.g0_256=M;function j(P){return X(P,17)^X(P,19)^P>>>10}$.g1_256=j}),m40=o0(($,Q)=>{var X=AJ(),Y=EV(),Z=Pm(),J=X.rotl32,q=X.sum32,G=X.sum32_5,z=Z.ft_1,M=Y.BlockHash,j=[1518500249,1859775393,2400959708,3395469782];function P(){if(!(this instanceof P))return new P;M.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}X.inherits(P,M),Q.exports=P,P.blockSize=512,P.outSize=160,P.hmacStrength=80,P.padLength=64,P.prototype._update=function D(A,I){var H=this.W;for(var C=0;C<16;C++)H[C]=A[I+C];for(;C<H.length;C++)H[C]=J(H[C-3]^H[C-8]^H[C-14]^H[C-16],1);var B=this.h[0],S=this.h[1],_=this.h[2],k=this.h[3],f=this.h[4];for(C=0;C<H.length;C++){var g=~~(C/20),b=G(J(B,5),z(g,S,_,k),f,H[C],j[g]);f=k,k=_,_=J(S,30),S=B,B=b}this.h[0]=q(this.h[0],B),this.h[1]=q(this.h[1],S),this.h[2]=q(this.h[2],_),this.h[3]=q(this.h[3],k),this.h[4]=q(this.h[4],f)},P.prototype._digest=function D(A){if(A==="hex")return X.toHex32(this.h,"big");else return X.split32(this.h,"big")}}),Hm=o0(($,Q)=>{var X=AJ(),Y=EV(),Z=Pm(),J=J7(),q=X.sum32,G=X.sum32_4,z=X.sum32_5,M=Z.ch32,j=Z.maj32,P=Z.s0_256,D=Z.s1_256,A=Z.g0_256,I=Z.g1_256,H=Y.BlockHash,C=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function B(){if(!(this instanceof B))return new B;H.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=C,this.W=new Array(64)}X.inherits(B,H),Q.exports=B,B.blockSize=512,B.outSize=256,B.hmacStrength=192,B.padLength=64,B.prototype._update=function S(_,k){var f=this.W;for(var g=0;g<16;g++)f[g]=_[k+g];for(;g<f.length;g++)f[g]=G(I(f[g-2]),f[g-7],A(f[g-15]),f[g-16]);var b=this.h[0],m=this.h[1],l=this.h[2],h=this.h[3],c=this.h[4],T=this.h[5],K=this.h[6],U=this.h[7];J(this.k.length===f.length);for(g=0;g<f.length;g++){var W=z(U,D(c),M(c,T,K),this.k[g],f[g]),V=q(P(b),j(b,m,l));U=K,K=T,T=c,c=q(h,W),h=l,l=m,m=b,b=q(W,V)}this.h[0]=q(this.h[0],b),this.h[1]=q(this.h[1],m),this.h[2]=q(this.h[2],l),this.h[3]=q(this.h[3],h),this.h[4]=q(this.h[4],c),this.h[5]=q(this.h[5],T),this.h[6]=q(this.h[6],K),this.h[7]=q(this.h[7],U)},B.prototype._digest=function S(_){if(_==="hex")return X.toHex32(this.h,"big");else return X.split32(this.h,"big")}}),c40=o0(($,Q)=>{var X=AJ(),Y=Hm();function Z(){if(!(this instanceof Z))return new Z;Y.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}X.inherits(Z,Y),Q.exports=Z,Z.blockSize=512,Z.outSize=224,Z.hmacStrength=192,Z.padLength=64,Z.prototype._digest=function J(q){if(q==="hex")return X.toHex32(this.h.slice(0,7),"big");else return X.split32(this.h.slice(0,7),"big")}}),Nm=o0(($,Q)=>{var X=AJ(),Y=EV(),Z=J7(),J=X.rotr64_hi,q=X.rotr64_lo,G=X.shr64_hi,z=X.shr64_lo,M=X.sum64,j=X.sum64_hi,P=X.sum64_lo,D=X.sum64_4_hi,A=X.sum64_4_lo,I=X.sum64_5_hi,H=X.sum64_5_lo,C=Y.BlockHash,B=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function S(){if(!(this instanceof S))return new S;C.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=B,this.W=new Array(160)}X.inherits(S,C),Q.exports=S,S.blockSize=1024,S.outSize=512,S.hmacStrength=192,S.padLength=128,S.prototype._prepareBlock=function W(V,N){var L=this.W;for(var F=0;F<32;F++)L[F]=V[N+F];for(;F<L.length;F+=2){var R=K(L[F-4],L[F-3]),O=U(L[F-4],L[F-3]),w=L[F-14],x=L[F-13],E=c(L[F-30],L[F-29]),v=T(L[F-30],L[F-29]),p=L[F-32],i=L[F-31];L[F]=D(R,O,w,x,E,v,p,i),L[F+1]=A(R,O,w,x,E,v,p,i)}},S.prototype._update=function W(V,N){this._prepareBlock(V,N);var L=this.W,F=this.h[0],R=this.h[1],O=this.h[2],w=this.h[3],x=this.h[4],E=this.h[5],v=this.h[6],p=this.h[7],i=this.h[8],s=this.h[9],X0=this.h[10],n=this.h[11],r=this.h[12],Z0=this.h[13],e=this.h[14],Q0=this.h[15];Z(this.k.length===L.length);for(var t=0;t<L.length;t+=2){var a=e,$0=Q0,d0=l(i,s),K0=h(i,s),z0=_(i,s,X0,n,r,Z0),J0=k(i,s,X0,n,r,Z0),Y0=this.k[t],W0=this.k[t+1],T0=L[t],M0=L[t+1],A0=I(a,$0,d0,K0,z0,J0,Y0,W0,T0,M0),C$=H(a,$0,d0,K0,z0,J0,Y0,W0,T0,M0);a=b(F,R),$0=m(F,R),d0=f(F,R,O,w,x,E),K0=g(F,R,O,w,x,E);var P0=j(a,$0,d0,K0),I0=P(a,$0,d0,K0);e=r,Q0=Z0,r=X0,Z0=n,X0=i,n=s,i=j(v,p,A0,C$),s=P(p,p,A0,C$),v=x,p=E,x=O,E=w,O=F,w=R,F=j(A0,C$,P0,I0),R=P(A0,C$,P0,I0)}M(this.h,0,F,R),M(this.h,2,O,w),M(this.h,4,x,E),M(this.h,6,v,p),M(this.h,8,i,s),M(this.h,10,X0,n),M(this.h,12,r,Z0),M(this.h,14,e,Q0)},S.prototype._digest=function W(V){if(V==="hex")return X.toHex32(this.h,"big");else return X.split32(this.h,"big")};function _(W,V,N,L,F){var R=W&N^~W&F;if(R<0)R+=4294967296;return R}function k(W,V,N,L,F,R){var O=V&L^~V&R;if(O<0)O+=4294967296;return O}function f(W,V,N,L,F){var R=W&N^W&F^N&F;if(R<0)R+=4294967296;return R}function g(W,V,N,L,F,R){var O=V&L^V&R^L&R;if(O<0)O+=4294967296;return O}function b(W,V){var N=J(W,V,28),L=J(V,W,2),F=J(V,W,7),R=N^L^F;if(R<0)R+=4294967296;return R}function m(W,V){var N=q(W,V,28),L=q(V,W,2),F=q(V,W,7),R=N^L^F;if(R<0)R+=4294967296;return R}function l(W,V){var N=J(W,V,14),L=J(W,V,18),F=J(V,W,9),R=N^L^F;if(R<0)R+=4294967296;return R}function h(W,V){var N=q(W,V,14),L=q(W,V,18),F=q(V,W,9),R=N^L^F;if(R<0)R+=4294967296;return R}function c(W,V){var N=J(W,V,1),L=J(W,V,8),F=G(W,V,7),R=N^L^F;if(R<0)R+=4294967296;return R}function T(W,V){var N=q(W,V,1),L=q(W,V,8),F=z(W,V,7),R=N^L^F;if(R<0)R+=4294967296;return R}function K(W,V){var N=J(W,V,19),L=J(V,W,29),F=G(W,V,6),R=N^L^F;if(R<0)R+=4294967296;return R}function U(W,V){var N=q(W,V,19),L=q(V,W,29),F=z(W,V,6),R=N^L^F;if(R<0)R+=4294967296;return R}}),p40=o0(($,Q)=>{var X=AJ(),Y=Nm();function Z(){if(!(this instanceof Z))return new Z;Y.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}X.inherits(Z,Y),Q.exports=Z,Z.blockSize=1024,Z.outSize=384,Z.hmacStrength=192,Z.padLength=128,Z.prototype._digest=function J(q){if(q==="hex")return X.toHex32(this.h.slice(0,12),"big");else return X.split32(this.h.slice(0,12),"big")}}),l40=o0(($)=>{$.sha1=m40(),$.sha224=c40(),$.sha256=Hm(),$.sha384=p40(),$.sha512=Nm()}),u40=o0(($)=>{var Q=AJ(),X=EV(),Y=Q.rotl32,Z=Q.sum32,J=Q.sum32_3,q=Q.sum32_4,G=X.BlockHash;function z(){if(!(this instanceof z))return new z;G.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Q.inherits(z,G),$.ripemd160=z,z.blockSize=512,z.outSize=160,z.hmacStrength=192,z.padLength=64,z.prototype._update=function C(B,S){var _=this.h[0],k=this.h[1],f=this.h[2],g=this.h[3],b=this.h[4],m=_,l=k,h=f,c=g,T=b;for(var K=0;K<80;K++){var U=Z(Y(q(_,M(K,k,f,g),B[D[K]+S],j(K)),I[K]),b);_=b,b=g,g=Y(f,10),f=k,k=U,U=Z(Y(q(m,M(79-K,l,h,c),B[A[K]+S],P(K)),H[K]),T),m=T,T=c,c=Y(h,10),h=l,l=U}U=J(this.h[1],f,c),this.h[1]=J(this.h[2],g,T),this.h[2]=J(this.h[3],b,m),this.h[3]=J(this.h[4],_,l),this.h[4]=J(this.h[0],k,h),this.h[0]=U},z.prototype._digest=function C(B){if(B==="hex")return Q.toHex32(this.h,"little");else return Q.split32(this.h,"little")};function M(C,B,S,_){if(C<=15)return B^S^_;else if(C<=31)return B&S|~B&_;else if(C<=47)return(B|~S)^_;else if(C<=63)return B&_|S&~_;else return B^(S|~_)}function j(C){if(C<=15)return 0;else if(C<=31)return 1518500249;else if(C<=47)return 1859775393;else if(C<=63)return 2400959708;else return 2840853838}function P(C){if(C<=15)return 1352829926;else if(C<=31)return 1548603684;else if(C<=47)return 1836072691;else if(C<=63)return 2053994217;else return 0}var D=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],A=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],I=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],H=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]}),d40=o0(($,Q)=>{var X=AJ(),Y=J7();function Z(J,q,G){if(!(this instanceof Z))return new Z(J,q,G);this.Hash=J,this.blockSize=J.blockSize/8,this.outSize=J.outSize/8,this.inner=null,this.outer=null,this._init(X.toArray(q,G))}Q.exports=Z,Z.prototype._init=function J(q){if(q.length>this.blockSize)q=new this.Hash().update(q).digest();Y(q.length<=this.blockSize);for(var G=q.length;G<this.blockSize;G++)q.push(0);for(G=0;G<q.length;G++)q[G]^=54;this.inner=new this.Hash().update(q);for(G=0;G<q.length;G++)q[G]^=106;this.outer=new this.Hash().update(q)},Z.prototype.update=function J(q,G){return this.inner.update(q,G),this},Z.prototype.digest=function J(q){return this.outer.update(this.inner.digest()),this.outer.digest(q)}}),bw=o0(($)=>{var Q=$;Q.utils=AJ(),Q.common=EV(),Q.sha=l40(),Q.ripemd=u40(),Q.hmac=d40(),Q.sha1=Q.sha.sha1,Q.sha256=Q.sha.sha256,Q.sha224=Q.sha.sha224,Q.sha384=Q.sha.sha384,Q.sha512=Q.sha.sha512,Q.ripemd160=Q.ripemd.ripemd160}),i40=o0(($,Q)=>{Q.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}}),hw=o0(($)=>{var Q=$,X=bw(),Y=jm(),Z=eZ(),J=Z.assert;function q(M){if(M.type==="short")this.curve=new Y.short(M);else if(M.type==="edwards")this.curve=new Y.edwards(M);else this.curve=new Y.mont(M);this.g=this.curve.g,this.n=this.curve.n,this.hash=M.hash,J(this.g.validate(),"Invalid curve"),J(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}Q.PresetCurve=q;function G(M,j){Object.defineProperty(Q,M,{configurable:!0,enumerable:!0,get:function(){var P=new q(j);return Object.defineProperty(Q,M,{configurable:!0,enumerable:!0,value:P}),P}})}G("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:X.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),G("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:X.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),G("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:X.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),G("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:X.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),G("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:X.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),G("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:X.sha256,gRed:!1,g:["9"]}),G("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:X.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var z;try{z=i40()}catch(M){z=void 0}G("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:X.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",z]})}),n40=o0(($,Q)=>{var X=bw(),Y=Mm(),Z=J7();function J(q){if(!(this instanceof J))return new J(q);this.hash=q.hash,this.predResist=!!q.predResist,this.outLen=this.hash.outSize,this.minEntropy=q.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var G=Y.toArray(q.entropy,q.entropyEnc||"hex"),z=Y.toArray(q.nonce,q.nonceEnc||"hex"),M=Y.toArray(q.pers,q.persEnc||"hex");Z(G.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(G,z,M)}Q.exports=J,J.prototype._init=function q(G,z,M){var j=G.concat(z).concat(M);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var P=0;P<this.V.length;P++)this.K[P]=0,this.V[P]=1;this._update(j),this._reseed=1,this.reseedInterval=281474976710656},J.prototype._hmac=function q(){return new X.hmac(this.hash,this.K)},J.prototype._update=function q(G){var z=this._hmac().update(this.V).update([0]);if(G)z=z.update(G);if(this.K=z.digest(),this.V=this._hmac().update(this.V).digest(),!G)return;this.K=this._hmac().update(this.V).update([1]).update(G).digest(),this.V=this._hmac().update(this.V).digest()},J.prototype.reseed=function q(G,z,M,j){if(typeof z!=="string")j=M,M=z,z=null;G=Y.toArray(G,z),M=Y.toArray(M,j),Z(G.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(G.concat(M||[])),this._reseed=1},J.prototype.generate=function q(G,z,M,j){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");if(typeof z!=="string")j=M,M=z,z=null;if(M)M=Y.toArray(M,j||"hex"),this._update(M);var P=[];while(P.length<G)this.V=this._hmac().update(this.V).digest(),P=P.concat(this.V);var D=P.slice(0,G);return this._update(M),this._reseed++,Y.encode(D,z)}}),o40=o0(($,Q)=>{var X=c5(),Y=eZ(),Z=Y.assert;function J(q,G){if(this.ec=q,this.priv=null,this.pub=null,G.priv)this._importPrivate(G.priv,G.privEnc);if(G.pub)this._importPublic(G.pub,G.pubEnc)}Q.exports=J,J.fromPublic=function q(G,z,M){if(z instanceof J)return z;return new J(G,{pub:z,pubEnc:M})},J.fromPrivate=function q(G,z,M){if(z instanceof J)return z;return new J(G,{priv:z,privEnc:M})},J.prototype.validate=function q(){var G=this.getPublic();if(G.isInfinity())return{result:!1,reason:"Invalid public key"};if(!G.validate())return{result:!1,reason:"Public key is not a point"};if(!G.mul(this.ec.curve.n).isInfinity())return{result:!1,reason:"Public key * N != O"};return{result:!0,reason:null}},J.prototype.getPublic=function q(G,z){if(typeof G==="string")z=G,G=null;if(!this.pub)this.pub=this.ec.g.mul(this.priv);if(!z)return this.pub;return this.pub.encode(z,G)},J.prototype.getPrivate=function q(G){if(G==="hex")return this.priv.toString(16,2);else return this.priv},J.prototype._importPrivate=function q(G,z){this.priv=new X(G,z||16),this.priv=this.priv.umod(this.ec.curve.n)},J.prototype._importPublic=function q(G,z){if(G.x||G.y){if(this.ec.curve.type==="mont")Z(G.x,"Need x coordinate");else if(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")Z(G.x&&G.y,"Need both x and y coordinate");this.pub=this.ec.curve.point(G.x,G.y);return}this.pub=this.ec.curve.decodePoint(G,z)},J.prototype.derive=function q(G){if(!G.validate())Z(G.validate(),"public point not validated");return G.mul(this.priv).getX()},J.prototype.sign=function q(G,z,M){return this.ec.sign(G,this,z,M)},J.prototype.verify=function q(G,z,M){return this.ec.verify(G,z,this,void 0,M)},J.prototype.inspect=function q(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}}),r40=o0(($,Q)=>{var X=c5(),Y=eZ(),Z=Y.assert;function J(j,P){if(j instanceof J)return j;if(this._importDER(j,P))return;if(Z(j.r&&j.s,"Signature without r or s"),this.r=new X(j.r,16),this.s=new X(j.s,16),j.recoveryParam===void 0)this.recoveryParam=null;else this.recoveryParam=j.recoveryParam}Q.exports=J;function q(){this.place=0}function G(j,P){var D=j[P.place++];if(!(D&128))return D;var A=D&15;if(A===0||A>4)return!1;if(j[P.place]===0)return!1;var I=0;for(var H=0,C=P.place;H<A;H++,C++)I<<=8,I|=j[C],I>>>=0;if(I<=127)return!1;return P.place=C,I}function z(j){var P=0,D=j.length-1;while(!j[P]&&!(j[P+1]&128)&&P<D)P++;if(P===0)return j;return j.slice(P)}J.prototype._importDER=function j(P,D){P=Y.toArray(P,D);var A=new q;if(P[A.place++]!==48)return!1;var I=G(P,A);if(I===!1)return!1;if(I+A.place!==P.length)return!1;if(P[A.place++]!==2)return!1;var H=G(P,A);if(H===!1)return!1;if((P[A.place]&128)!==0)return!1;var C=P.slice(A.place,H+A.place);if(A.place+=H,P[A.place++]!==2)return!1;var B=G(P,A);if(B===!1)return!1;if(P.length!==B+A.place)return!1;if((P[A.place]&128)!==0)return!1;var S=P.slice(A.place,B+A.place);if(C[0]===0)if(C[1]&128)C=C.slice(1);else return!1;if(S[0]===0)if(S[1]&128)S=S.slice(1);else return!1;return this.r=new X(C),this.s=new X(S),this.recoveryParam=null,!0};function M(j,P){if(P<128){j.push(P);return}var D=1+(Math.log(P)/Math.LN2>>>3);j.push(D|128);while(--D)j.push(P>>>(D<<3)&255);j.push(P)}J.prototype.toDER=function j(P){var D=this.r.toArray(),A=this.s.toArray();if(D[0]&128)D=[0].concat(D);if(A[0]&128)A=[0].concat(A);D=z(D),A=z(A);while(!A[0]&&!(A[1]&128))A=A.slice(1);var I=[2];M(I,D.length),I=I.concat(D),I.push(2),M(I,A.length);var H=I.concat(A),C=[48];return M(C,H.length),C=C.concat(H),Y.encode(C,P)}}),s40=o0(($,Q)=>{var X=c5(),Y=n40(),Z=eZ(),J=hw(),q=Dm(),G=Z.assert,z=o40(),M=r40();function j(P){if(!(this instanceof j))return new j(P);if(typeof P==="string")G(Object.prototype.hasOwnProperty.call(J,P),"Unknown curve "+P),P=J[P];if(P instanceof J.PresetCurve)P={curve:P};this.curve=P.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=P.curve.g,this.g.precompute(P.curve.n.bitLength()+1),this.hash=P.hash||P.curve.hash}Q.exports=j,j.prototype.keyPair=function P(D){return new z(this,D)},j.prototype.keyFromPrivate=function P(D,A){return z.fromPrivate(this,D,A)},j.prototype.keyFromPublic=function P(D,A){return z.fromPublic(this,D,A)},j.prototype.genKeyPair=function P(D){if(!D)D={};var A=new Y({hash:this.hash,pers:D.pers,persEnc:D.persEnc||"utf8",entropy:D.entropy||q(this.hash.hmacStrength),entropyEnc:D.entropy&&D.entropyEnc||"utf8",nonce:this.n.toArray()}),I=this.n.byteLength(),H=this.n.sub(new X(2));for(;;){var C=new X(A.generate(I));if(C.cmp(H)>0)continue;return C.iaddn(1),this.keyFromPrivate(C)}},j.prototype._truncateToN=function P(D,A,I){var H;if(X.isBN(D)||typeof D==="number")D=new X(D,16),H=D.byteLength();else if(typeof D==="object")H=D.length,D=new X(D,16);else{var C=D.toString();H=C.length+1>>>1,D=new X(C,16)}if(typeof I!=="number")I=H*8;var B=I-this.n.bitLength();if(B>0)D=D.ushrn(B);if(!A&&D.cmp(this.n)>=0)return D.sub(this.n);else return D},j.prototype.sign=function P(D,A,I,H){if(typeof I==="object")H=I,I=null;if(!H)H={};if(typeof D!=="string"&&typeof D!=="number"&&!X.isBN(D)){G(typeof D==="object"&&D&&typeof D.length==="number","Expected message to be an array-like, a hex string, or a BN instance"),G(D.length>>>0===D.length);for(var C=0;C<D.length;C++)G((D[C]&255)===D[C])}A=this.keyFromPrivate(A,I),D=this._truncateToN(D,!1,H.msgBitLength),G(!D.isNeg(),"Can not sign a negative message");var B=this.n.byteLength(),S=A.getPrivate().toArray("be",B),_=D.toArray("be",B);G(new X(_).eq(D),"Can not sign message");var k=new Y({hash:this.hash,entropy:S,nonce:_,pers:H.pers,persEnc:H.persEnc||"utf8"}),f=this.n.sub(new X(1));for(var g=0;;g++){var b=H.k?H.k(g):new X(k.generate(this.n.byteLength()));if(b=this._truncateToN(b,!0),b.cmpn(1)<=0||b.cmp(f)>=0)continue;var m=this.g.mul(b);if(m.isInfinity())continue;var l=m.getX(),h=l.umod(this.n);if(h.cmpn(0)===0)continue;var c=b.invm(this.n).mul(h.mul(A.getPrivate()).iadd(D));if(c=c.umod(this.n),c.cmpn(0)===0)continue;var T=(m.getY().isOdd()?1:0)|(l.cmp(h)!==0?2:0);if(H.canonical&&c.cmp(this.nh)>0)c=this.n.sub(c),T^=1;return new M({r:h,s:c,recoveryParam:T})}},j.prototype.verify=function P(D,A,I,H,C){if(!C)C={};D=this._truncateToN(D,!1,C.msgBitLength),I=this.keyFromPublic(I,H),A=new M(A,"hex");var{r:B,s:S}=A;if(B.cmpn(1)<0||B.cmp(this.n)>=0)return!1;if(S.cmpn(1)<0||S.cmp(this.n)>=0)return!1;var _=S.invm(this.n),k=_.mul(D).umod(this.n),f=_.mul(B).umod(this.n),g;if(!this.curve._maxwellTrick){if(g=this.g.mulAdd(k,I.getPublic(),f),g.isInfinity())return!1;return g.getX().umod(this.n).cmp(B)===0}if(g=this.g.jmulAdd(k,I.getPublic(),f),g.isInfinity())return!1;return g.eqXToP(B)},j.prototype.recoverPubKey=function(P,D,A,I){G((3&A)===A,"The recovery param is more than two bits"),D=new M(D,I);var H=this.n,C=new X(P),B=D.r,S=D.s,_=A&1,k=A>>1;if(B.cmp(this.curve.p.umod(this.curve.n))>=0&&k)throw new Error("Unable to find sencond key candinate");if(k)B=this.curve.pointFromX(B.add(this.curve.n),_);else B=this.curve.pointFromX(B,_);var f=D.r.invm(H),g=H.sub(C).mul(f).umod(H),b=S.mul(f).umod(H);return this.g.mulAdd(g,B,b)},j.prototype.getKeyRecoveryParam=function(P,D,A,I){if(D=new M(D,I),D.recoveryParam!==null)return D.recoveryParam;for(var H=0;H<4;H++){var C;try{C=this.recoverPubKey(P,D,H)}catch(B){continue}if(C.eq(A))return H}throw new Error("Unable to find valid recovery factor")}}),a40=o0(($,Q)=>{var X=eZ(),Y=X.assert,Z=X.parseBytes,J=X.cachedProperty;function q(G,z){if(this.eddsa=G,this._secret=Z(z.secret),G.isPoint(z.pub))this._pub=z.pub;else this._pubBytes=Z(z.pub)}q.fromPublic=function G(z,M){if(M instanceof q)return M;return new q(z,{pub:M})},q.fromSecret=function G(z,M){if(M instanceof q)return M;return new q(z,{secret:M})},q.prototype.secret=function G(){return this._secret},J(q,"pubBytes",function G(){return this.eddsa.encodePoint(this.pub())}),J(q,"pub",function G(){if(this._pubBytes)return this.eddsa.decodePoint(this._pubBytes);return this.eddsa.g.mul(this.priv())}),J(q,"privBytes",function G(){var z=this.eddsa,M=this.hash(),j=z.encodingLength-1,P=M.slice(0,z.encodingLength);return P[0]&=248,P[j]&=127,P[j]|=64,P}),J(q,"priv",function G(){return this.eddsa.decodeInt(this.privBytes())}),J(q,"hash",function G(){return this.eddsa.hash().update(this.secret()).digest()}),J(q,"messagePrefix",function G(){return this.hash().slice(this.eddsa.encodingLength)}),q.prototype.sign=function G(z){return Y(this._secret,"KeyPair can only verify"),this.eddsa.sign(z,this)},q.prototype.verify=function G(z,M){return this.eddsa.verify(z,M,this)},q.prototype.getSecret=function G(z){return Y(this._secret,"KeyPair is public only"),X.encode(this.secret(),z)},q.prototype.getPublic=function G(z){return X.encode(this.pubBytes(),z)},Q.exports=q}),t40=o0(($,Q)=>{var X=c5(),Y=eZ(),Z=Y.assert,J=Y.cachedProperty,q=Y.parseBytes;function G(z,M){if(this.eddsa=z,typeof M!=="object")M=q(M);if(Array.isArray(M))Z(M.length===z.encodingLength*2,"Signature has invalid size"),M={R:M.slice(0,z.encodingLength),S:M.slice(z.encodingLength)};if(Z(M.R&&M.S,"Signature without R or S"),z.isPoint(M.R))this._R=M.R;if(M.S instanceof X)this._S=M.S;this._Rencoded=Array.isArray(M.R)?M.R:M.Rencoded,this._Sencoded=Array.isArray(M.S)?M.S:M.Sencoded}J(G,"S",function z(){return this.eddsa.decodeInt(this.Sencoded())}),J(G,"R",function z(){return this.eddsa.decodePoint(this.Rencoded())}),J(G,"Rencoded",function z(){return this.eddsa.encodePoint(this.R())}),J(G,"Sencoded",function z(){return this.eddsa.encodeInt(this.S())}),G.prototype.toBytes=function z(){return this.Rencoded().concat(this.Sencoded())},G.prototype.toHex=function z(){return Y.encode(this.toBytes(),"hex").toUpperCase()},Q.exports=G}),e40=o0(($,Q)=>{var X=bw(),Y=hw(),Z=eZ(),J=Z.assert,q=Z.parseBytes,G=a40(),z=t40();function M(j){if(J(j==="ed25519","only tested with ed25519 so far"),!(this instanceof M))return new M(j);j=Y[j].curve,this.curve=j,this.g=j.g,this.g.precompute(j.n.bitLength()+1),this.pointClass=j.point().constructor,this.encodingLength=Math.ceil(j.n.bitLength()/8),this.hash=X.sha512}Q.exports=M,M.prototype.sign=function j(P,D){P=q(P);var A=this.keyFromSecret(D),I=this.hashInt(A.messagePrefix(),P),H=this.g.mul(I),C=this.encodePoint(H),B=this.hashInt(C,A.pubBytes(),P).mul(A.priv()),S=I.add(B).umod(this.curve.n);return this.makeSignature({R:H,S,Rencoded:C})},M.prototype.verify=function j(P,D,A){if(P=q(P),D=this.makeSignature(D),D.S().gte(D.eddsa.curve.n)||D.S().isNeg())return!1;var I=this.keyFromPublic(A),H=this.hashInt(D.Rencoded(),I.pubBytes(),P),C=this.g.mul(D.S()),B=D.R().add(I.pub().mul(H));return B.eq(C)},M.prototype.hashInt=function j(){var P=this.hash();for(var D=0;D<arguments.length;D++)P.update(arguments[D]);return Z.intFromLE(P.digest()).umod(this.curve.n)},M.prototype.keyFromPublic=function j(P){return G.fromPublic(this,P)},M.prototype.keyFromSecret=function j(P){return G.fromSecret(this,P)},M.prototype.makeSignature=function j(P){if(P instanceof z)return P;return new z(this,P)},M.prototype.encodePoint=function j(P){var D=P.getY().toArray("le",this.encodingLength);return D[this.encodingLength-1]|=P.getX().isOdd()?128:0,D},M.prototype.decodePoint=function j(P){P=Z.parseBytes(P);var D=P.length-1,A=P.slice(0,D).concat(P[D]&-129),I=(P[D]&128)!==0,H=Z.intFromLE(A);return this.curve.pointFromY(H,I)},M.prototype.encodeInt=function j(P){return P.toArray("le",this.encodingLength)},M.prototype.decodeInt=function j(P){return Z.intFromLE(P)},M.prototype.isPoint=function j(P){return P instanceof this.pointClass}}),$K0=o0(($)=>{var Q=$;Q.version=v40().version,Q.utils=eZ(),Q.rand=Dm(),Q.curve=jm(),Q.curves=hw(),Q.ec=s40(),Q.eddsa=e40()}),QK0=o0(($,Q)=>{(function(X,Y){function Z(T,K){if(!T)throw new Error(K||"Assertion failed")}function J(T,K){T.super_=K;var U=function(){};U.prototype=K.prototype,T.prototype=new U,T.prototype.constructor=T}function q(T,K,U){if(q.isBN(T))return T;if(this.negative=0,this.words=null,this.length=0,this.red=null,T!==null){if(K==="le"||K==="be")U=K,K=10;this._init(T||0,K||10,U||"be")}}if(typeof X==="object")X.exports=q;else Y.BN=q;q.BN=q,q.wordSize=26;var G;try{if(typeof window!=="undefined"&&typeof window.Buffer!=="undefined")G=window.Buffer;else G=(h8(),I$(b8)).Buffer}catch(T){}q.isBN=function T(K){if(K instanceof q)return!0;return K!==null&&typeof K==="object"&&K.constructor.wordSize===q.wordSize&&Array.isArray(K.words)},q.max=function T(K,U){if(K.cmp(U)>0)return K;return U},q.min=function T(K,U){if(K.cmp(U)<0)return K;return U},q.prototype._init=function T(K,U,W){if(typeof K==="number")return this._initNumber(K,U,W);if(typeof K==="object")return this._initArray(K,U,W);if(U==="hex")U=16;Z(U===(U|0)&&U>=2&&U<=36),K=K.toString().replace(/\s+/g,"");var V=0;if(K[0]==="-")V++,this.negative=1;if(V<K.length){if(U===16)this._parseHex(K,V,W);else if(this._parseBase(K,U,V),W==="le")this._initArray(this.toArray(),U,W)}},q.prototype._initNumber=function T(K,U,W){if(K<0)this.negative=1,K=-K;if(K<67108864)this.words=[K&67108863],this.length=1;else if(K<4503599627370496)this.words=[K&67108863,K/67108864&67108863],this.length=2;else Z(K<9007199254740992),this.words=[K&67108863,K/67108864&67108863,1],this.length=3;if(W!=="le")return;this._initArray(this.toArray(),U,W)},q.prototype._initArray=function T(K,U,W){if(Z(typeof K.length==="number"),K.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(K.length/3),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var N,L,F=0;if(W==="be"){for(V=K.length-1,N=0;V>=0;V-=3)if(L=K[V]|K[V-1]<<8|K[V-2]<<16,this.words[N]|=L<<F&67108863,this.words[N+1]=L>>>26-F&67108863,F+=24,F>=26)F-=26,N++}else if(W==="le"){for(V=0,N=0;V<K.length;V+=3)if(L=K[V]|K[V+1]<<8|K[V+2]<<16,this.words[N]|=L<<F&67108863,this.words[N+1]=L>>>26-F&67108863,F+=24,F>=26)F-=26,N++}return this.strip()};function z(T,K){var U=T.charCodeAt(K);if(U>=65&&U<=70)return U-55;else if(U>=97&&U<=102)return U-87;else return U-48&15}function M(T,K,U){var W=z(T,U);if(U-1>=K)W|=z(T,U-1)<<4;return W}q.prototype._parseHex=function T(K,U,W){this.length=Math.ceil((K.length-U)/6),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var N=0,L=0,F;if(W==="be")for(V=K.length-1;V>=U;V-=2)if(F=M(K,U,V)<<N,this.words[L]|=F&67108863,N>=18)N-=18,L+=1,this.words[L]|=F>>>26;else N+=8;else{var R=K.length-U;for(V=R%2===0?U+1:U;V<K.length;V+=2)if(F=M(K,U,V)<<N,this.words[L]|=F&67108863,N>=18)N-=18,L+=1,this.words[L]|=F>>>26;else N+=8}this.strip()};function j(T,K,U,W){var V=0,N=Math.min(T.length,U);for(var L=K;L<N;L++){var F=T.charCodeAt(L)-48;if(V*=W,F>=49)V+=F-49+10;else if(F>=17)V+=F-17+10;else V+=F}return V}q.prototype._parseBase=function T(K,U,W){this.words=[0],this.length=1;for(var V=0,N=1;N<=67108863;N*=U)V++;V--,N=N/U|0;var L=K.length-W,F=L%V,R=Math.min(L,L-F)+W,O=0;for(var w=W;w<R;w+=V)if(O=j(K,w,w+V,U),this.imuln(N),this.words[0]+O<67108864)this.words[0]+=O;else this._iaddn(O);if(F!==0){var x=1;O=j(K,w,K.length,U);for(w=0;w<F;w++)x*=U;if(this.imuln(x),this.words[0]+O<67108864)this.words[0]+=O;else this._iaddn(O)}this.strip()},q.prototype.copy=function T(K){K.words=new Array(this.length);for(var U=0;U<this.length;U++)K.words[U]=this.words[U];K.length=this.length,K.negative=this.negative,K.red=this.red},q.prototype.clone=function T(){var K=new q(null);return this.copy(K),K},q.prototype._expand=function T(K){while(this.length<K)this.words[this.length++]=0;return this},q.prototype.strip=function T(){while(this.length>1&&this.words[this.length-1]===0)this.length--;return this._normSign()},q.prototype._normSign=function T(){if(this.length===1&&this.words[0]===0)this.negative=0;return this},q.prototype.inspect=function T(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var P=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],D=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];if(q.prototype.toString=function T(K,U){K=K||10,U=U|0||1;var W;if(K===16||K==="hex"){W="";var V=0,N=0;for(var L=0;L<this.length;L++){var F=this.words[L],R=((F<<V|N)&16777215).toString(16);if(N=F>>>24-V&16777215,V+=2,V>=26)V-=26,L--;if(N!==0||L!==this.length-1)W=P[6-R.length]+R+W;else W=R+W}if(N!==0)W=N.toString(16)+W;while(W.length%U!==0)W="0"+W;if(this.negative!==0)W="-"+W;return W}if(K===(K|0)&&K>=2&&K<=36){var O=D[K],w=A[K];W="";var x=this.clone();x.negative=0;while(!x.isZero()){var E=x.modn(w).toString(K);if(x=x.idivn(w),!x.isZero())W=P[O-E.length]+E+W;else W=E+W}if(this.isZero())W="0"+W;while(W.length%U!==0)W="0"+W;if(this.negative!==0)W="-"+W;return W}Z(!1,"Base should be between 2 and 36")},q.prototype.toNumber=function T(){var K=this.words[0];if(this.length===2)K+=this.words[1]*67108864;else if(this.length===3&&this.words[2]===1)K+=4503599627370496+this.words[1]*67108864;else if(this.length>2)Z(!1,"Number can only safely store up to 53 bits");return this.negative!==0?-K:K},q.prototype.toJSON=function T(){return this.toString(16)},q.prototype.toBuffer=function T(K,U){return Z(typeof G!=="undefined"),this.toArrayLike(G,K,U)},q.prototype.toArray=function T(K,U){return this.toArrayLike(Array,K,U)},q.prototype.toArrayLike=function T(K,U,W){var V=this.byteLength(),N=W||Math.max(1,V);Z(V<=N,"byte array longer than desired length"),Z(N>0,"Requested array length <= 0"),this.strip();var L=U==="le",F=new K(N),R,O,w=this.clone();if(!L){for(O=0;O<N-V;O++)F[O]=0;for(O=0;!w.isZero();O++)R=w.andln(255),w.iushrn(8),F[N-O-1]=R}else{for(O=0;!w.isZero();O++)R=w.andln(255),w.iushrn(8),F[O]=R;for(;O<N;O++)F[O]=0}return F},Math.clz32)q.prototype._countBits=function T(K){return 32-Math.clz32(K)};else q.prototype._countBits=function T(K){var U=K,W=0;if(U>=4096)W+=13,U>>>=13;if(U>=64)W+=7,U>>>=7;if(U>=8)W+=4,U>>>=4;if(U>=2)W+=2,U>>>=2;return W+U};q.prototype._zeroBits=function T(K){if(K===0)return 26;var U=K,W=0;if((U&8191)===0)W+=13,U>>>=13;if((U&127)===0)W+=7,U>>>=7;if((U&15)===0)W+=4,U>>>=4;if((U&3)===0)W+=2,U>>>=2;if((U&1)===0)W++;return W},q.prototype.bitLength=function T(){var K=this.words[this.length-1],U=this._countBits(K);return(this.length-1)*26+U};function I(T){var K=new Array(T.bitLength());for(var U=0;U<K.length;U++){var W=U/26|0,V=U%26;K[U]=(T.words[W]&1<<V)>>>V}return K}q.prototype.zeroBits=function T(){if(this.isZero())return 0;var K=0;for(var U=0;U<this.length;U++){var W=this._zeroBits(this.words[U]);if(K+=W,W!==26)break}return K},q.prototype.byteLength=function T(){return Math.ceil(this.bitLength()/8)},q.prototype.toTwos=function T(K){if(this.negative!==0)return this.abs().inotn(K).iaddn(1);return this.clone()},q.prototype.fromTwos=function T(K){if(this.testn(K-1))return this.notn(K).iaddn(1).ineg();return this.clone()},q.prototype.isNeg=function T(){return this.negative!==0},q.prototype.neg=function T(){return this.clone().ineg()},q.prototype.ineg=function T(){if(!this.isZero())this.negative^=1;return this},q.prototype.iuor=function T(K){while(this.length<K.length)this.words[this.length++]=0;for(var U=0;U<K.length;U++)this.words[U]=this.words[U]|K.words[U];return this.strip()},q.prototype.ior=function T(K){return Z((this.negative|K.negative)===0),this.iuor(K)},q.prototype.or=function T(K){if(this.length>K.length)return this.clone().ior(K);return K.clone().ior(this)},q.prototype.uor=function T(K){if(this.length>K.length)return this.clone().iuor(K);return K.clone().iuor(this)},q.prototype.iuand=function T(K){var U;if(this.length>K.length)U=K;else U=this;for(var W=0;W<U.length;W++)this.words[W]=this.words[W]&K.words[W];return this.length=U.length,this.strip()},q.prototype.iand=function T(K){return Z((this.negative|K.negative)===0),this.iuand(K)},q.prototype.and=function T(K){if(this.length>K.length)return this.clone().iand(K);return K.clone().iand(this)},q.prototype.uand=function T(K){if(this.length>K.length)return this.clone().iuand(K);return K.clone().iuand(this)},q.prototype.iuxor=function T(K){var U,W;if(this.length>K.length)U=this,W=K;else U=K,W=this;for(var V=0;V<W.length;V++)this.words[V]=U.words[V]^W.words[V];if(this!==U)for(;V<U.length;V++)this.words[V]=U.words[V];return this.length=U.length,this.strip()},q.prototype.ixor=function T(K){return Z((this.negative|K.negative)===0),this.iuxor(K)},q.prototype.xor=function T(K){if(this.length>K.length)return this.clone().ixor(K);return K.clone().ixor(this)},q.prototype.uxor=function T(K){if(this.length>K.length)return this.clone().iuxor(K);return K.clone().iuxor(this)},q.prototype.inotn=function T(K){Z(typeof K==="number"&&K>=0);var U=Math.ceil(K/26)|0,W=K%26;if(this._expand(U),W>0)U--;for(var V=0;V<U;V++)this.words[V]=~this.words[V]&67108863;if(W>0)this.words[V]=~this.words[V]&67108863>>26-W;return this.strip()},q.prototype.notn=function T(K){return this.clone().inotn(K)},q.prototype.setn=function T(K,U){Z(typeof K==="number"&&K>=0);var W=K/26|0,V=K%26;if(this._expand(W+1),U)this.words[W]=this.words[W]|1<<V;else this.words[W]=this.words[W]&~(1<<V);return this.strip()},q.prototype.iadd=function T(K){var U;if(this.negative!==0&&K.negative===0)return this.negative=0,U=this.isub(K),this.negative^=1,this._normSign();else if(this.negative===0&&K.negative!==0)return K.negative=0,U=this.isub(K),K.negative=1,U._normSign();var W,V;if(this.length>K.length)W=this,V=K;else W=K,V=this;var N=0;for(var L=0;L<V.length;L++)U=(W.words[L]|0)+(V.words[L]|0)+N,this.words[L]=U&67108863,N=U>>>26;for(;N!==0&&L<W.length;L++)U=(W.words[L]|0)+N,this.words[L]=U&67108863,N=U>>>26;if(this.length=W.length,N!==0)this.words[this.length]=N,this.length++;else if(W!==this)for(;L<W.length;L++)this.words[L]=W.words[L];return this},q.prototype.add=function T(K){var U;if(K.negative!==0&&this.negative===0)return K.negative=0,U=this.sub(K),K.negative^=1,U;else if(K.negative===0&&this.negative!==0)return this.negative=0,U=K.sub(this),this.negative=1,U;if(this.length>K.length)return this.clone().iadd(K);return K.clone().iadd(this)},q.prototype.isub=function T(K){if(K.negative!==0){K.negative=0;var U=this.iadd(K);return K.negative=1,U._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(K),this.negative=1,this._normSign();var W=this.cmp(K);if(W===0)return this.negative=0,this.length=1,this.words[0]=0,this;var V,N;if(W>0)V=this,N=K;else V=K,N=this;var L=0;for(var F=0;F<N.length;F++)U=(V.words[F]|0)-(N.words[F]|0)+L,L=U>>26,this.words[F]=U&67108863;for(;L!==0&&F<V.length;F++)U=(V.words[F]|0)+L,L=U>>26,this.words[F]=U&67108863;if(L===0&&F<V.length&&V!==this)for(;F<V.length;F++)this.words[F]=V.words[F];if(this.length=Math.max(this.length,F),V!==this)this.negative=1;return this.strip()},q.prototype.sub=function T(K){return this.clone().isub(K)};function H(T,K,U){U.negative=K.negative^T.negative;var W=T.length+K.length|0;U.length=W,W=W-1|0;var V=T.words[0]|0,N=K.words[0]|0,L=V*N,F=L&67108863,R=L/67108864|0;U.words[0]=F;for(var O=1;O<W;O++){var w=R>>>26,x=R&67108863,E=Math.min(O,K.length-1);for(var v=Math.max(0,O-T.length+1);v<=E;v++){var p=O-v|0;V=T.words[p]|0,N=K.words[v]|0,L=V*N+x,w+=L/67108864|0,x=L&67108863}U.words[O]=x|0,R=w|0}if(R!==0)U.words[O]=R|0;else U.length--;return U.strip()}var C=function T(K,U,W){var V=K.words,N=U.words,L=W.words,F=0,R,O,w,x=V[0]|0,E=x&8191,v=x>>>13,p=V[1]|0,i=p&8191,s=p>>>13,X0=V[2]|0,n=X0&8191,r=X0>>>13,Z0=V[3]|0,e=Z0&8191,Q0=Z0>>>13,t=V[4]|0,a=t&8191,$0=t>>>13,d0=V[5]|0,K0=d0&8191,z0=d0>>>13,J0=V[6]|0,Y0=J0&8191,W0=J0>>>13,T0=V[7]|0,M0=T0&8191,A0=T0>>>13,C$=V[8]|0,P0=C$&8191,I0=C$>>>13,$8=V[9]|0,C0=$8&8191,S0=$8>>>13,o8=N[0]|0,F0=o8&8191,m0=o8>>>13,iQ=N[1]|0,c0=iQ&8191,p0=iQ>>>13,HX=N[2]|0,v0=HX&8191,g0=HX>>>13,NX=N[3]|0,y0=NX&8191,_0=NX>>>13,AX=N[4]|0,l0=AX&8191,k0=AX>>>13,nQ=N[5]|0,u=nQ&8191,d=nQ>>>13,i0=N[6]|0,U0=i0&8191,O0=i0>>>13,Q8=N[7]|0,w0=Q8&8191,B0=Q8>>>13,oQ=N[8]|0,u0=oQ&8191,b0=oQ>>>13,rQ=N[9]|0,x0=rQ&8191,f0=rQ>>>13;W.negative=K.negative^U.negative,W.length=19,R=Math.imul(E,F0),O=Math.imul(E,m0),O=O+Math.imul(v,F0)|0,w=Math.imul(v,m0);var y8=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(y8>>>26)|0,y8&=67108863,R=Math.imul(i,F0),O=Math.imul(i,m0),O=O+Math.imul(s,F0)|0,w=Math.imul(s,m0),R=R+Math.imul(E,c0)|0,O=O+Math.imul(E,p0)|0,O=O+Math.imul(v,c0)|0,w=w+Math.imul(v,p0)|0;var L$=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(L$>>>26)|0,L$&=67108863,R=Math.imul(n,F0),O=Math.imul(n,m0),O=O+Math.imul(r,F0)|0,w=Math.imul(r,m0),R=R+Math.imul(i,c0)|0,O=O+Math.imul(i,p0)|0,O=O+Math.imul(s,c0)|0,w=w+Math.imul(s,p0)|0,R=R+Math.imul(E,v0)|0,O=O+Math.imul(E,g0)|0,O=O+Math.imul(v,v0)|0,w=w+Math.imul(v,g0)|0;var H$=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(H$>>>26)|0,H$&=67108863,R=Math.imul(e,F0),O=Math.imul(e,m0),O=O+Math.imul(Q0,F0)|0,w=Math.imul(Q0,m0),R=R+Math.imul(n,c0)|0,O=O+Math.imul(n,p0)|0,O=O+Math.imul(r,c0)|0,w=w+Math.imul(r,p0)|0,R=R+Math.imul(i,v0)|0,O=O+Math.imul(i,g0)|0,O=O+Math.imul(s,v0)|0,w=w+Math.imul(s,g0)|0,R=R+Math.imul(E,y0)|0,O=O+Math.imul(E,_0)|0,O=O+Math.imul(v,y0)|0,w=w+Math.imul(v,_0)|0;var K8=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(K8>>>26)|0,K8&=67108863,R=Math.imul(a,F0),O=Math.imul(a,m0),O=O+Math.imul($0,F0)|0,w=Math.imul($0,m0),R=R+Math.imul(e,c0)|0,O=O+Math.imul(e,p0)|0,O=O+Math.imul(Q0,c0)|0,w=w+Math.imul(Q0,p0)|0,R=R+Math.imul(n,v0)|0,O=O+Math.imul(n,g0)|0,O=O+Math.imul(r,v0)|0,w=w+Math.imul(r,g0)|0,R=R+Math.imul(i,y0)|0,O=O+Math.imul(i,_0)|0,O=O+Math.imul(s,y0)|0,w=w+Math.imul(s,_0)|0,R=R+Math.imul(E,l0)|0,O=O+Math.imul(E,k0)|0,O=O+Math.imul(v,l0)|0,w=w+Math.imul(v,k0)|0;var JQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(JQ>>>26)|0,JQ&=67108863,R=Math.imul(K0,F0),O=Math.imul(K0,m0),O=O+Math.imul(z0,F0)|0,w=Math.imul(z0,m0),R=R+Math.imul(a,c0)|0,O=O+Math.imul(a,p0)|0,O=O+Math.imul($0,c0)|0,w=w+Math.imul($0,p0)|0,R=R+Math.imul(e,v0)|0,O=O+Math.imul(e,g0)|0,O=O+Math.imul(Q0,v0)|0,w=w+Math.imul(Q0,g0)|0,R=R+Math.imul(n,y0)|0,O=O+Math.imul(n,_0)|0,O=O+Math.imul(r,y0)|0,w=w+Math.imul(r,_0)|0,R=R+Math.imul(i,l0)|0,O=O+Math.imul(i,k0)|0,O=O+Math.imul(s,l0)|0,w=w+Math.imul(s,k0)|0,R=R+Math.imul(E,u)|0,O=O+Math.imul(E,d)|0,O=O+Math.imul(v,u)|0,w=w+Math.imul(v,d)|0;var qQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(qQ>>>26)|0,qQ&=67108863,R=Math.imul(Y0,F0),O=Math.imul(Y0,m0),O=O+Math.imul(W0,F0)|0,w=Math.imul(W0,m0),R=R+Math.imul(K0,c0)|0,O=O+Math.imul(K0,p0)|0,O=O+Math.imul(z0,c0)|0,w=w+Math.imul(z0,p0)|0,R=R+Math.imul(a,v0)|0,O=O+Math.imul(a,g0)|0,O=O+Math.imul($0,v0)|0,w=w+Math.imul($0,g0)|0,R=R+Math.imul(e,y0)|0,O=O+Math.imul(e,_0)|0,O=O+Math.imul(Q0,y0)|0,w=w+Math.imul(Q0,_0)|0,R=R+Math.imul(n,l0)|0,O=O+Math.imul(n,k0)|0,O=O+Math.imul(r,l0)|0,w=w+Math.imul(r,k0)|0,R=R+Math.imul(i,u)|0,O=O+Math.imul(i,d)|0,O=O+Math.imul(s,u)|0,w=w+Math.imul(s,d)|0,R=R+Math.imul(E,U0)|0,O=O+Math.imul(E,O0)|0,O=O+Math.imul(v,U0)|0,w=w+Math.imul(v,O0)|0;var GQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(GQ>>>26)|0,GQ&=67108863,R=Math.imul(M0,F0),O=Math.imul(M0,m0),O=O+Math.imul(A0,F0)|0,w=Math.imul(A0,m0),R=R+Math.imul(Y0,c0)|0,O=O+Math.imul(Y0,p0)|0,O=O+Math.imul(W0,c0)|0,w=w+Math.imul(W0,p0)|0,R=R+Math.imul(K0,v0)|0,O=O+Math.imul(K0,g0)|0,O=O+Math.imul(z0,v0)|0,w=w+Math.imul(z0,g0)|0,R=R+Math.imul(a,y0)|0,O=O+Math.imul(a,_0)|0,O=O+Math.imul($0,y0)|0,w=w+Math.imul($0,_0)|0,R=R+Math.imul(e,l0)|0,O=O+Math.imul(e,k0)|0,O=O+Math.imul(Q0,l0)|0,w=w+Math.imul(Q0,k0)|0,R=R+Math.imul(n,u)|0,O=O+Math.imul(n,d)|0,O=O+Math.imul(r,u)|0,w=w+Math.imul(r,d)|0,R=R+Math.imul(i,U0)|0,O=O+Math.imul(i,O0)|0,O=O+Math.imul(s,U0)|0,w=w+Math.imul(s,O0)|0,R=R+Math.imul(E,w0)|0,O=O+Math.imul(E,B0)|0,O=O+Math.imul(v,w0)|0,w=w+Math.imul(v,B0)|0;var zQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(zQ>>>26)|0,zQ&=67108863,R=Math.imul(P0,F0),O=Math.imul(P0,m0),O=O+Math.imul(I0,F0)|0,w=Math.imul(I0,m0),R=R+Math.imul(M0,c0)|0,O=O+Math.imul(M0,p0)|0,O=O+Math.imul(A0,c0)|0,w=w+Math.imul(A0,p0)|0,R=R+Math.imul(Y0,v0)|0,O=O+Math.imul(Y0,g0)|0,O=O+Math.imul(W0,v0)|0,w=w+Math.imul(W0,g0)|0,R=R+Math.imul(K0,y0)|0,O=O+Math.imul(K0,_0)|0,O=O+Math.imul(z0,y0)|0,w=w+Math.imul(z0,_0)|0,R=R+Math.imul(a,l0)|0,O=O+Math.imul(a,k0)|0,O=O+Math.imul($0,l0)|0,w=w+Math.imul($0,k0)|0,R=R+Math.imul(e,u)|0,O=O+Math.imul(e,d)|0,O=O+Math.imul(Q0,u)|0,w=w+Math.imul(Q0,d)|0,R=R+Math.imul(n,U0)|0,O=O+Math.imul(n,O0)|0,O=O+Math.imul(r,U0)|0,w=w+Math.imul(r,O0)|0,R=R+Math.imul(i,w0)|0,O=O+Math.imul(i,B0)|0,O=O+Math.imul(s,w0)|0,w=w+Math.imul(s,B0)|0,R=R+Math.imul(E,u0)|0,O=O+Math.imul(E,b0)|0,O=O+Math.imul(v,u0)|0,w=w+Math.imul(v,b0)|0;var KQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(KQ>>>26)|0,KQ&=67108863,R=Math.imul(C0,F0),O=Math.imul(C0,m0),O=O+Math.imul(S0,F0)|0,w=Math.imul(S0,m0),R=R+Math.imul(P0,c0)|0,O=O+Math.imul(P0,p0)|0,O=O+Math.imul(I0,c0)|0,w=w+Math.imul(I0,p0)|0,R=R+Math.imul(M0,v0)|0,O=O+Math.imul(M0,g0)|0,O=O+Math.imul(A0,v0)|0,w=w+Math.imul(A0,g0)|0,R=R+Math.imul(Y0,y0)|0,O=O+Math.imul(Y0,_0)|0,O=O+Math.imul(W0,y0)|0,w=w+Math.imul(W0,_0)|0,R=R+Math.imul(K0,l0)|0,O=O+Math.imul(K0,k0)|0,O=O+Math.imul(z0,l0)|0,w=w+Math.imul(z0,k0)|0,R=R+Math.imul(a,u)|0,O=O+Math.imul(a,d)|0,O=O+Math.imul($0,u)|0,w=w+Math.imul($0,d)|0,R=R+Math.imul(e,U0)|0,O=O+Math.imul(e,O0)|0,O=O+Math.imul(Q0,U0)|0,w=w+Math.imul(Q0,O0)|0,R=R+Math.imul(n,w0)|0,O=O+Math.imul(n,B0)|0,O=O+Math.imul(r,w0)|0,w=w+Math.imul(r,B0)|0,R=R+Math.imul(i,u0)|0,O=O+Math.imul(i,b0)|0,O=O+Math.imul(s,u0)|0,w=w+Math.imul(s,b0)|0,R=R+Math.imul(E,x0)|0,O=O+Math.imul(E,f0)|0,O=O+Math.imul(v,x0)|0,w=w+Math.imul(v,f0)|0;var UQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(UQ>>>26)|0,UQ&=67108863,R=Math.imul(C0,c0),O=Math.imul(C0,p0),O=O+Math.imul(S0,c0)|0,w=Math.imul(S0,p0),R=R+Math.imul(P0,v0)|0,O=O+Math.imul(P0,g0)|0,O=O+Math.imul(I0,v0)|0,w=w+Math.imul(I0,g0)|0,R=R+Math.imul(M0,y0)|0,O=O+Math.imul(M0,_0)|0,O=O+Math.imul(A0,y0)|0,w=w+Math.imul(A0,_0)|0,R=R+Math.imul(Y0,l0)|0,O=O+Math.imul(Y0,k0)|0,O=O+Math.imul(W0,l0)|0,w=w+Math.imul(W0,k0)|0,R=R+Math.imul(K0,u)|0,O=O+Math.imul(K0,d)|0,O=O+Math.imul(z0,u)|0,w=w+Math.imul(z0,d)|0,R=R+Math.imul(a,U0)|0,O=O+Math.imul(a,O0)|0,O=O+Math.imul($0,U0)|0,w=w+Math.imul($0,O0)|0,R=R+Math.imul(e,w0)|0,O=O+Math.imul(e,B0)|0,O=O+Math.imul(Q0,w0)|0,w=w+Math.imul(Q0,B0)|0,R=R+Math.imul(n,u0)|0,O=O+Math.imul(n,b0)|0,O=O+Math.imul(r,u0)|0,w=w+Math.imul(r,b0)|0,R=R+Math.imul(i,x0)|0,O=O+Math.imul(i,f0)|0,O=O+Math.imul(s,x0)|0,w=w+Math.imul(s,f0)|0;var WQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(WQ>>>26)|0,WQ&=67108863,R=Math.imul(C0,v0),O=Math.imul(C0,g0),O=O+Math.imul(S0,v0)|0,w=Math.imul(S0,g0),R=R+Math.imul(P0,y0)|0,O=O+Math.imul(P0,_0)|0,O=O+Math.imul(I0,y0)|0,w=w+Math.imul(I0,_0)|0,R=R+Math.imul(M0,l0)|0,O=O+Math.imul(M0,k0)|0,O=O+Math.imul(A0,l0)|0,w=w+Math.imul(A0,k0)|0,R=R+Math.imul(Y0,u)|0,O=O+Math.imul(Y0,d)|0,O=O+Math.imul(W0,u)|0,w=w+Math.imul(W0,d)|0,R=R+Math.imul(K0,U0)|0,O=O+Math.imul(K0,O0)|0,O=O+Math.imul(z0,U0)|0,w=w+Math.imul(z0,O0)|0,R=R+Math.imul(a,w0)|0,O=O+Math.imul(a,B0)|0,O=O+Math.imul($0,w0)|0,w=w+Math.imul($0,B0)|0,R=R+Math.imul(e,u0)|0,O=O+Math.imul(e,b0)|0,O=O+Math.imul(Q0,u0)|0,w=w+Math.imul(Q0,b0)|0,R=R+Math.imul(n,x0)|0,O=O+Math.imul(n,f0)|0,O=O+Math.imul(r,x0)|0,w=w+Math.imul(r,f0)|0;var VQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(VQ>>>26)|0,VQ&=67108863,R=Math.imul(C0,y0),O=Math.imul(C0,_0),O=O+Math.imul(S0,y0)|0,w=Math.imul(S0,_0),R=R+Math.imul(P0,l0)|0,O=O+Math.imul(P0,k0)|0,O=O+Math.imul(I0,l0)|0,w=w+Math.imul(I0,k0)|0,R=R+Math.imul(M0,u)|0,O=O+Math.imul(M0,d)|0,O=O+Math.imul(A0,u)|0,w=w+Math.imul(A0,d)|0,R=R+Math.imul(Y0,U0)|0,O=O+Math.imul(Y0,O0)|0,O=O+Math.imul(W0,U0)|0,w=w+Math.imul(W0,O0)|0,R=R+Math.imul(K0,w0)|0,O=O+Math.imul(K0,B0)|0,O=O+Math.imul(z0,w0)|0,w=w+Math.imul(z0,B0)|0,R=R+Math.imul(a,u0)|0,O=O+Math.imul(a,b0)|0,O=O+Math.imul($0,u0)|0,w=w+Math.imul($0,b0)|0,R=R+Math.imul(e,x0)|0,O=O+Math.imul(e,f0)|0,O=O+Math.imul(Q0,x0)|0,w=w+Math.imul(Q0,f0)|0;var OQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(OQ>>>26)|0,OQ&=67108863,R=Math.imul(C0,l0),O=Math.imul(C0,k0),O=O+Math.imul(S0,l0)|0,w=Math.imul(S0,k0),R=R+Math.imul(P0,u)|0,O=O+Math.imul(P0,d)|0,O=O+Math.imul(I0,u)|0,w=w+Math.imul(I0,d)|0,R=R+Math.imul(M0,U0)|0,O=O+Math.imul(M0,O0)|0,O=O+Math.imul(A0,U0)|0,w=w+Math.imul(A0,O0)|0,R=R+Math.imul(Y0,w0)|0,O=O+Math.imul(Y0,B0)|0,O=O+Math.imul(W0,w0)|0,w=w+Math.imul(W0,B0)|0,R=R+Math.imul(K0,u0)|0,O=O+Math.imul(K0,b0)|0,O=O+Math.imul(z0,u0)|0,w=w+Math.imul(z0,b0)|0,R=R+Math.imul(a,x0)|0,O=O+Math.imul(a,f0)|0,O=O+Math.imul($0,x0)|0,w=w+Math.imul($0,f0)|0;var MQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(MQ>>>26)|0,MQ&=67108863,R=Math.imul(C0,u),O=Math.imul(C0,d),O=O+Math.imul(S0,u)|0,w=Math.imul(S0,d),R=R+Math.imul(P0,U0)|0,O=O+Math.imul(P0,O0)|0,O=O+Math.imul(I0,U0)|0,w=w+Math.imul(I0,O0)|0,R=R+Math.imul(M0,w0)|0,O=O+Math.imul(M0,B0)|0,O=O+Math.imul(A0,w0)|0,w=w+Math.imul(A0,B0)|0,R=R+Math.imul(Y0,u0)|0,O=O+Math.imul(Y0,b0)|0,O=O+Math.imul(W0,u0)|0,w=w+Math.imul(W0,b0)|0,R=R+Math.imul(K0,x0)|0,O=O+Math.imul(K0,f0)|0,O=O+Math.imul(z0,x0)|0,w=w+Math.imul(z0,f0)|0;var DQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(DQ>>>26)|0,DQ&=67108863,R=Math.imul(C0,U0),O=Math.imul(C0,O0),O=O+Math.imul(S0,U0)|0,w=Math.imul(S0,O0),R=R+Math.imul(P0,w0)|0,O=O+Math.imul(P0,B0)|0,O=O+Math.imul(I0,w0)|0,w=w+Math.imul(I0,B0)|0,R=R+Math.imul(M0,u0)|0,O=O+Math.imul(M0,b0)|0,O=O+Math.imul(A0,u0)|0,w=w+Math.imul(A0,b0)|0,R=R+Math.imul(Y0,x0)|0,O=O+Math.imul(Y0,f0)|0,O=O+Math.imul(W0,x0)|0,w=w+Math.imul(W0,f0)|0;var jQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(jQ>>>26)|0,jQ&=67108863,R=Math.imul(C0,w0),O=Math.imul(C0,B0),O=O+Math.imul(S0,w0)|0,w=Math.imul(S0,B0),R=R+Math.imul(P0,u0)|0,O=O+Math.imul(P0,b0)|0,O=O+Math.imul(I0,u0)|0,w=w+Math.imul(I0,b0)|0,R=R+Math.imul(M0,x0)|0,O=O+Math.imul(M0,f0)|0,O=O+Math.imul(A0,x0)|0,w=w+Math.imul(A0,f0)|0;var PQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(PQ>>>26)|0,PQ&=67108863,R=Math.imul(C0,u0),O=Math.imul(C0,b0),O=O+Math.imul(S0,u0)|0,w=Math.imul(S0,b0),R=R+Math.imul(P0,x0)|0,O=O+Math.imul(P0,f0)|0,O=O+Math.imul(I0,x0)|0,w=w+Math.imul(I0,f0)|0;var HQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(HQ>>>26)|0,HQ&=67108863,R=Math.imul(C0,x0),O=Math.imul(C0,f0),O=O+Math.imul(S0,x0)|0,w=Math.imul(S0,f0);var NQ=(F+R|0)+((O&8191)<<13)|0;if(F=(w+(O>>>13)|0)+(NQ>>>26)|0,NQ&=67108863,L[0]=y8,L[1]=L$,L[2]=H$,L[3]=K8,L[4]=JQ,L[5]=qQ,L[6]=GQ,L[7]=zQ,L[8]=KQ,L[9]=UQ,L[10]=WQ,L[11]=VQ,L[12]=OQ,L[13]=MQ,L[14]=DQ,L[15]=jQ,L[16]=PQ,L[17]=HQ,L[18]=NQ,F!==0)L[19]=F,W.length++;return W};if(!Math.imul)C=H;function B(T,K,U){U.negative=K.negative^T.negative,U.length=T.length+K.length;var W=0,V=0;for(var N=0;N<U.length-1;N++){var L=V;V=0;var F=W&67108863,R=Math.min(N,K.length-1);for(var O=Math.max(0,N-T.length+1);O<=R;O++){var w=N-O,x=T.words[w]|0,E=K.words[O]|0,v=x*E,p=v&67108863;L=L+(v/67108864|0)|0,p=p+F|0,F=p&67108863,L=L+(p>>>26)|0,V+=L>>>26,L&=67108863}U.words[N]=F,W=L,L=V}if(W!==0)U.words[N]=W;else U.length--;return U.strip()}function S(T,K,U){var W=new _;return W.mulp(T,K,U)}q.prototype.mulTo=function T(K,U){var W,V=this.length+K.length;if(this.length===10&&K.length===10)W=C(this,K,U);else if(V<63)W=H(this,K,U);else if(V<1024)W=B(this,K,U);else W=S(this,K,U);return W};function _(T,K){this.x=T,this.y=K}_.prototype.makeRBT=function T(K){var U=new Array(K),W=q.prototype._countBits(K)-1;for(var V=0;V<K;V++)U[V]=this.revBin(V,W,K);return U},_.prototype.revBin=function T(K,U,W){if(K===0||K===W-1)return K;var V=0;for(var N=0;N<U;N++)V|=(K&1)<<U-N-1,K>>=1;return V},_.prototype.permute=function T(K,U,W,V,N,L){for(var F=0;F<L;F++)V[F]=U[K[F]],N[F]=W[K[F]]},_.prototype.transform=function T(K,U,W,V,N,L){this.permute(L,K,U,W,V,N);for(var F=1;F<N;F<<=1){var R=F<<1,O=Math.cos(2*Math.PI/R),w=Math.sin(2*Math.PI/R);for(var x=0;x<N;x+=R){var E=O,v=w;for(var p=0;p<F;p++){var i=W[x+p],s=V[x+p],X0=W[x+p+F],n=V[x+p+F],r=E*X0-v*n;if(n=E*n+v*X0,X0=r,W[x+p]=i+X0,V[x+p]=s+n,W[x+p+F]=i-X0,V[x+p+F]=s-n,p!==R)r=O*E-w*v,v=O*v+w*E,E=r}}}},_.prototype.guessLen13b=function T(K,U){var W=Math.max(U,K)|1,V=W&1,N=0;for(W=W/2|0;W;W=W>>>1)N++;return 1<<N+1+V},_.prototype.conjugate=function T(K,U,W){if(W<=1)return;for(var V=0;V<W/2;V++){var N=K[V];K[V]=K[W-V-1],K[W-V-1]=N,N=U[V],U[V]=-U[W-V-1],U[W-V-1]=-N}},_.prototype.normalize13b=function T(K,U){var W=0;for(var V=0;V<U/2;V++){var N=Math.round(K[2*V+1]/U)*8192+Math.round(K[2*V]/U)+W;if(K[V]=N&67108863,N<67108864)W=0;else W=N/67108864|0}return K},_.prototype.convert13b=function T(K,U,W,V){var N=0;for(var L=0;L<U;L++)N=N+(K[L]|0),W[2*L]=N&8191,N=N>>>13,W[2*L+1]=N&8191,N=N>>>13;for(L=2*U;L<V;++L)W[L]=0;Z(N===0),Z((N&-8192)===0)},_.prototype.stub=function T(K){var U=new Array(K);for(var W=0;W<K;W++)U[W]=0;return U},_.prototype.mulp=function T(K,U,W){var V=2*this.guessLen13b(K.length,U.length),N=this.makeRBT(V),L=this.stub(V),F=new Array(V),R=new Array(V),O=new Array(V),w=new Array(V),x=new Array(V),E=new Array(V),v=W.words;v.length=V,this.convert13b(K.words,K.length,F,V),this.convert13b(U.words,U.length,w,V),this.transform(F,L,R,O,V,N),this.transform(w,L,x,E,V,N);for(var p=0;p<V;p++){var i=R[p]*x[p]-O[p]*E[p];O[p]=R[p]*E[p]+O[p]*x[p],R[p]=i}return this.conjugate(R,O,V),this.transform(R,O,v,L,V,N),this.conjugate(v,L,V),this.normalize13b(v,V),W.negative=K.negative^U.negative,W.length=K.length+U.length,W.strip()},q.prototype.mul=function T(K){var U=new q(null);return U.words=new Array(this.length+K.length),this.mulTo(K,U)},q.prototype.mulf=function T(K){var U=new q(null);return U.words=new Array(this.length+K.length),S(this,K,U)},q.prototype.imul=function T(K){return this.clone().mulTo(K,this)},q.prototype.imuln=function T(K){Z(typeof K==="number"),Z(K<67108864);var U=0;for(var W=0;W<this.length;W++){var V=(this.words[W]|0)*K,N=(V&67108863)+(U&67108863);U>>=26,U+=V/67108864|0,U+=N>>>26,this.words[W]=N&67108863}if(U!==0)this.words[W]=U,this.length++;return this.length=K===0?1:this.length,this},q.prototype.muln=function T(K){return this.clone().imuln(K)},q.prototype.sqr=function T(){return this.mul(this)},q.prototype.isqr=function T(){return this.imul(this.clone())},q.prototype.pow=function T(K){var U=I(K);if(U.length===0)return new q(1);var W=this;for(var V=0;V<U.length;V++,W=W.sqr())if(U[V]!==0)break;if(++V<U.length)for(var N=W.sqr();V<U.length;V++,N=N.sqr()){if(U[V]===0)continue;W=W.mul(N)}return W},q.prototype.iushln=function T(K){Z(typeof K==="number"&&K>=0);var U=K%26,W=(K-U)/26,V=67108863>>>26-U<<26-U,N;if(U!==0){var L=0;for(N=0;N<this.length;N++){var F=this.words[N]&V,R=(this.words[N]|0)-F<<U;this.words[N]=R|L,L=F>>>26-U}if(L)this.words[N]=L,this.length++}if(W!==0){for(N=this.length-1;N>=0;N--)this.words[N+W]=this.words[N];for(N=0;N<W;N++)this.words[N]=0;this.length+=W}return this.strip()},q.prototype.ishln=function T(K){return Z(this.negative===0),this.iushln(K)},q.prototype.iushrn=function T(K,U,W){Z(typeof K==="number"&&K>=0);var V;if(U)V=(U-U%26)/26;else V=0;var N=K%26,L=Math.min((K-N)/26,this.length),F=67108863^67108863>>>N<<N,R=W;if(V-=L,V=Math.max(0,V),R){for(var O=0;O<L;O++)R.words[O]=this.words[O];R.length=L}if(L===0);else if(this.length>L){this.length-=L;for(O=0;O<this.length;O++)this.words[O]=this.words[O+L]}else this.words[0]=0,this.length=1;var w=0;for(O=this.length-1;O>=0&&(w!==0||O>=V);O--){var x=this.words[O]|0;this.words[O]=w<<26-N|x>>>N,w=x&F}if(R&&w!==0)R.words[R.length++]=w;if(this.length===0)this.words[0]=0,this.length=1;return this.strip()},q.prototype.ishrn=function T(K,U,W){return Z(this.negative===0),this.iushrn(K,U,W)},q.prototype.shln=function T(K){return this.clone().ishln(K)},q.prototype.ushln=function T(K){return this.clone().iushln(K)},q.prototype.shrn=function T(K){return this.clone().ishrn(K)},q.prototype.ushrn=function T(K){return this.clone().iushrn(K)},q.prototype.testn=function T(K){Z(typeof K==="number"&&K>=0);var U=K%26,W=(K-U)/26,V=1<<U;if(this.length<=W)return!1;var N=this.words[W];return!!(N&V)},q.prototype.imaskn=function T(K){Z(typeof K==="number"&&K>=0);var U=K%26,W=(K-U)/26;if(Z(this.negative===0,"imaskn works only with positive numbers"),this.length<=W)return this;if(U!==0)W++;if(this.length=Math.min(W,this.length),U!==0){var V=67108863^67108863>>>U<<U;this.words[this.length-1]&=V}return this.strip()},q.prototype.maskn=function T(K){return this.clone().imaskn(K)},q.prototype.iaddn=function T(K){if(Z(typeof K==="number"),Z(K<67108864),K<0)return this.isubn(-K);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<K)return this.words[0]=K-(this.words[0]|0),this.negative=0,this;return this.negative=0,this.isubn(K),this.negative=1,this}return this._iaddn(K)},q.prototype._iaddn=function T(K){this.words[0]+=K;for(var U=0;U<this.length&&this.words[U]>=67108864;U++)if(this.words[U]-=67108864,U===this.length-1)this.words[U+1]=1;else this.words[U+1]++;return this.length=Math.max(this.length,U+1),this},q.prototype.isubn=function T(K){if(Z(typeof K==="number"),Z(K<67108864),K<0)return this.iaddn(-K);if(this.negative!==0)return this.negative=0,this.iaddn(K),this.negative=1,this;if(this.words[0]-=K,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var U=0;U<this.length&&this.words[U]<0;U++)this.words[U]+=67108864,this.words[U+1]-=1;return this.strip()},q.prototype.addn=function T(K){return this.clone().iaddn(K)},q.prototype.subn=function T(K){return this.clone().isubn(K)},q.prototype.iabs=function T(){return this.negative=0,this},q.prototype.abs=function T(){return this.clone().iabs()},q.prototype._ishlnsubmul=function T(K,U,W){var V=K.length+W,N;this._expand(V);var L,F=0;for(N=0;N<K.length;N++){L=(this.words[N+W]|0)+F;var R=(K.words[N]|0)*U;L-=R&67108863,F=(L>>26)-(R/67108864|0),this.words[N+W]=L&67108863}for(;N<this.length-W;N++)L=(this.words[N+W]|0)+F,F=L>>26,this.words[N+W]=L&67108863;if(F===0)return this.strip();Z(F===-1),F=0;for(N=0;N<this.length;N++)L=-(this.words[N]|0)+F,F=L>>26,this.words[N]=L&67108863;return this.negative=1,this.strip()},q.prototype._wordDiv=function T(K,U){var W=this.length-K.length,V=this.clone(),N=K,L=N.words[N.length-1]|0,F=this._countBits(L);if(W=26-F,W!==0)N=N.ushln(W),V.iushln(W),L=N.words[N.length-1]|0;var R=V.length-N.length,O;if(U!=="mod"){O=new q(null),O.length=R+1,O.words=new Array(O.length);for(var w=0;w<O.length;w++)O.words[w]=0}var x=V.clone()._ishlnsubmul(N,1,R);if(x.negative===0){if(V=x,O)O.words[R]=1}for(var E=R-1;E>=0;E--){var v=(V.words[N.length+E]|0)*67108864+(V.words[N.length+E-1]|0);v=Math.min(v/L|0,67108863),V._ishlnsubmul(N,v,E);while(V.negative!==0)if(v--,V.negative=0,V._ishlnsubmul(N,1,E),!V.isZero())V.negative^=1;if(O)O.words[E]=v}if(O)O.strip();if(V.strip(),U!=="div"&&W!==0)V.iushrn(W);return{div:O||null,mod:V}},q.prototype.divmod=function T(K,U,W){if(Z(!K.isZero()),this.isZero())return{div:new q(0),mod:new q(0)};var V,N,L;if(this.negative!==0&&K.negative===0){if(L=this.neg().divmod(K,U),U!=="mod")V=L.div.neg();if(U!=="div"){if(N=L.mod.neg(),W&&N.negative!==0)N.iadd(K)}return{div:V,mod:N}}if(this.negative===0&&K.negative!==0){if(L=this.divmod(K.neg(),U),U!=="mod")V=L.div.neg();return{div:V,mod:L.mod}}if((this.negative&K.negative)!==0){if(L=this.neg().divmod(K.neg(),U),U!=="div"){if(N=L.mod.neg(),W&&N.negative!==0)N.isub(K)}return{div:L.div,mod:N}}if(K.length>this.length||this.cmp(K)<0)return{div:new q(0),mod:this};if(K.length===1){if(U==="div")return{div:this.divn(K.words[0]),mod:null};if(U==="mod")return{div:null,mod:new q(this.modn(K.words[0]))};return{div:this.divn(K.words[0]),mod:new q(this.modn(K.words[0]))}}return this._wordDiv(K,U)},q.prototype.div=function T(K){return this.divmod(K,"div",!1).div},q.prototype.mod=function T(K){return this.divmod(K,"mod",!1).mod},q.prototype.umod=function T(K){return this.divmod(K,"mod",!0).mod},q.prototype.divRound=function T(K){var U=this.divmod(K);if(U.mod.isZero())return U.div;var W=U.div.negative!==0?U.mod.isub(K):U.mod,V=K.ushrn(1),N=K.andln(1),L=W.cmp(V);if(L<0||N===1&&L===0)return U.div;return U.div.negative!==0?U.div.isubn(1):U.div.iaddn(1)},q.prototype.modn=function T(K){Z(K<=67108863);var U=67108864%K,W=0;for(var V=this.length-1;V>=0;V--)W=(U*W+(this.words[V]|0))%K;return W},q.prototype.idivn=function T(K){Z(K<=67108863);var U=0;for(var W=this.length-1;W>=0;W--){var V=(this.words[W]|0)+U*67108864;this.words[W]=V/K|0,U=V%K}return this.strip()},q.prototype.divn=function T(K){return this.clone().idivn(K)},q.prototype.egcd=function T(K){Z(K.negative===0),Z(!K.isZero());var U=this,W=K.clone();if(U.negative!==0)U=U.umod(K);else U=U.clone();var V=new q(1),N=new q(0),L=new q(0),F=new q(1),R=0;while(U.isEven()&&W.isEven())U.iushrn(1),W.iushrn(1),++R;var O=W.clone(),w=U.clone();while(!U.isZero()){for(var x=0,E=1;(U.words[0]&E)===0&&x<26;++x,E<<=1);if(x>0){U.iushrn(x);while(x-- >0){if(V.isOdd()||N.isOdd())V.iadd(O),N.isub(w);V.iushrn(1),N.iushrn(1)}}for(var v=0,p=1;(W.words[0]&p)===0&&v<26;++v,p<<=1);if(v>0){W.iushrn(v);while(v-- >0){if(L.isOdd()||F.isOdd())L.iadd(O),F.isub(w);L.iushrn(1),F.iushrn(1)}}if(U.cmp(W)>=0)U.isub(W),V.isub(L),N.isub(F);else W.isub(U),L.isub(V),F.isub(N)}return{a:L,b:F,gcd:W.iushln(R)}},q.prototype._invmp=function T(K){Z(K.negative===0),Z(!K.isZero());var U=this,W=K.clone();if(U.negative!==0)U=U.umod(K);else U=U.clone();var V=new q(1),N=new q(0),L=W.clone();while(U.cmpn(1)>0&&W.cmpn(1)>0){for(var F=0,R=1;(U.words[0]&R)===0&&F<26;++F,R<<=1);if(F>0){U.iushrn(F);while(F-- >0){if(V.isOdd())V.iadd(L);V.iushrn(1)}}for(var O=0,w=1;(W.words[0]&w)===0&&O<26;++O,w<<=1);if(O>0){W.iushrn(O);while(O-- >0){if(N.isOdd())N.iadd(L);N.iushrn(1)}}if(U.cmp(W)>=0)U.isub(W),V.isub(N);else W.isub(U),N.isub(V)}var x;if(U.cmpn(1)===0)x=V;else x=N;if(x.cmpn(0)<0)x.iadd(K);return x},q.prototype.gcd=function T(K){if(this.isZero())return K.abs();if(K.isZero())return this.abs();var U=this.clone(),W=K.clone();U.negative=0,W.negative=0;for(var V=0;U.isEven()&&W.isEven();V++)U.iushrn(1),W.iushrn(1);do{while(U.isEven())U.iushrn(1);while(W.isEven())W.iushrn(1);var N=U.cmp(W);if(N<0){var L=U;U=W,W=L}else if(N===0||W.cmpn(1)===0)break;U.isub(W)}while(!0);return W.iushln(V)},q.prototype.invm=function T(K){return this.egcd(K).a.umod(K)},q.prototype.isEven=function T(){return(this.words[0]&1)===0},q.prototype.isOdd=function T(){return(this.words[0]&1)===1},q.prototype.andln=function T(K){return this.words[0]&K},q.prototype.bincn=function T(K){Z(typeof K==="number");var U=K%26,W=(K-U)/26,V=1<<U;if(this.length<=W)return this._expand(W+1),this.words[W]|=V,this;var N=V;for(var L=W;N!==0&&L<this.length;L++){var F=this.words[L]|0;F+=N,N=F>>>26,F&=67108863,this.words[L]=F}if(N!==0)this.words[L]=N,this.length++;return this},q.prototype.isZero=function T(){return this.length===1&&this.words[0]===0},q.prototype.cmpn=function T(K){var U=K<0;if(this.negative!==0&&!U)return-1;if(this.negative===0&&U)return 1;this.strip();var W;if(this.length>1)W=1;else{if(U)K=-K;Z(K<=67108863,"Number is too big");var V=this.words[0]|0;W=V===K?0:V<K?-1:1}if(this.negative!==0)return-W|0;return W},q.prototype.cmp=function T(K){if(this.negative!==0&&K.negative===0)return-1;if(this.negative===0&&K.negative!==0)return 1;var U=this.ucmp(K);if(this.negative!==0)return-U|0;return U},q.prototype.ucmp=function T(K){if(this.length>K.length)return 1;if(this.length<K.length)return-1;var U=0;for(var W=this.length-1;W>=0;W--){var V=this.words[W]|0,N=K.words[W]|0;if(V===N)continue;if(V<N)U=-1;else if(V>N)U=1;break}return U},q.prototype.gtn=function T(K){return this.cmpn(K)===1},q.prototype.gt=function T(K){return this.cmp(K)===1},q.prototype.gten=function T(K){return this.cmpn(K)>=0},q.prototype.gte=function T(K){return this.cmp(K)>=0},q.prototype.ltn=function T(K){return this.cmpn(K)===-1},q.prototype.lt=function T(K){return this.cmp(K)===-1},q.prototype.lten=function T(K){return this.cmpn(K)<=0},q.prototype.lte=function T(K){return this.cmp(K)<=0},q.prototype.eqn=function T(K){return this.cmpn(K)===0},q.prototype.eq=function T(K){return this.cmp(K)===0},q.red=function T(K){return new h(K)},q.prototype.toRed=function T(K){return Z(!this.red,"Already a number in reduction context"),Z(this.negative===0,"red works only with positives"),K.convertTo(this)._forceRed(K)},q.prototype.fromRed=function T(){return Z(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},q.prototype._forceRed=function T(K){return this.red=K,this},q.prototype.forceRed=function T(K){return Z(!this.red,"Already a number in reduction context"),this._forceRed(K)},q.prototype.redAdd=function T(K){return Z(this.red,"redAdd works only with red numbers"),this.red.add(this,K)},q.prototype.redIAdd=function T(K){return Z(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,K)},q.prototype.redSub=function T(K){return Z(this.red,"redSub works only with red numbers"),this.red.sub(this,K)},q.prototype.redISub=function T(K){return Z(this.red,"redISub works only with red numbers"),this.red.isub(this,K)},q.prototype.redShl=function T(K){return Z(this.red,"redShl works only with red numbers"),this.red.shl(this,K)},q.prototype.redMul=function T(K){return Z(this.red,"redMul works only with red numbers"),this.red._verify2(this,K),this.red.mul(this,K)},q.prototype.redIMul=function T(K){return Z(this.red,"redMul works only with red numbers"),this.red._verify2(this,K),this.red.imul(this,K)},q.prototype.redSqr=function T(){return Z(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},q.prototype.redISqr=function T(){return Z(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},q.prototype.redSqrt=function T(){return Z(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},q.prototype.redInvm=function T(){return Z(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},q.prototype.redNeg=function T(){return Z(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},q.prototype.redPow=function T(K){return Z(this.red&&!K.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,K)};var k={k256:null,p224:null,p192:null,p25519:null};function f(T,K){this.name=T,this.p=new q(K,16),this.n=this.p.bitLength(),this.k=new q(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}f.prototype._tmp=function T(){var K=new q(null);return K.words=new Array(Math.ceil(this.n/13)),K},f.prototype.ireduce=function T(K){var U=K,W;do this.split(U,this.tmp),U=this.imulK(U),U=U.iadd(this.tmp),W=U.bitLength();while(W>this.n);var V=W<this.n?-1:U.ucmp(this.p);if(V===0)U.words[0]=0,U.length=1;else if(V>0)U.isub(this.p);else if(U.strip!==void 0)U.strip();else U._strip();return U},f.prototype.split=function T(K,U){K.iushrn(this.n,0,U)},f.prototype.imulK=function T(K){return K.imul(this.k)};function g(){f.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}J(g,f),g.prototype.split=function T(K,U){var W=4194303,V=Math.min(K.length,9);for(var N=0;N<V;N++)U.words[N]=K.words[N];if(U.length=V,K.length<=9){K.words[0]=0,K.length=1;return}var L=K.words[9];U.words[U.length++]=L&W;for(N=10;N<K.length;N++){var F=K.words[N]|0;K.words[N-10]=(F&W)<<4|L>>>22,L=F}if(L>>>=22,K.words[N-10]=L,L===0&&K.length>10)K.length-=10;else K.length-=9},g.prototype.imulK=function T(K){K.words[K.length]=0,K.words[K.length+1]=0,K.length+=2;var U=0;for(var W=0;W<K.length;W++){var V=K.words[W]|0;U+=V*977,K.words[W]=U&67108863,U=V*64+(U/67108864|0)}if(K.words[K.length-1]===0){if(K.length--,K.words[K.length-1]===0)K.length--}return K};function b(){f.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}J(b,f);function m(){f.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}J(m,f);function l(){f.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}J(l,f),l.prototype.imulK=function T(K){var U=0;for(var W=0;W<K.length;W++){var V=(K.words[W]|0)*19+U,N=V&67108863;V>>>=26,K.words[W]=N,U=V}if(U!==0)K.words[K.length++]=U;return K},q._prime=function T(K){if(k[K])return k[K];var U;if(K==="k256")U=new g;else if(K==="p224")U=new b;else if(K==="p192")U=new m;else if(K==="p25519")U=new l;else throw new Error("Unknown prime "+K);return k[K]=U,U};function h(T){if(typeof T==="string"){var K=q._prime(T);this.m=K.p,this.prime=K}else Z(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}h.prototype._verify1=function T(K){Z(K.negative===0,"red works only with positives"),Z(K.red,"red works only with red numbers")},h.prototype._verify2=function T(K,U){Z((K.negative|U.negative)===0,"red works only with positives"),Z(K.red&&K.red===U.red,"red works only with red numbers")},h.prototype.imod=function T(K){if(this.prime)return this.prime.ireduce(K)._forceRed(this);return K.umod(this.m)._forceRed(this)},h.prototype.neg=function T(K){if(K.isZero())return K.clone();return this.m.sub(K)._forceRed(this)},h.prototype.add=function T(K,U){this._verify2(K,U);var W=K.add(U);if(W.cmp(this.m)>=0)W.isub(this.m);return W._forceRed(this)},h.prototype.iadd=function T(K,U){this._verify2(K,U);var W=K.iadd(U);if(W.cmp(this.m)>=0)W.isub(this.m);return W},h.prototype.sub=function T(K,U){this._verify2(K,U);var W=K.sub(U);if(W.cmpn(0)<0)W.iadd(this.m);return W._forceRed(this)},h.prototype.isub=function T(K,U){this._verify2(K,U);var W=K.isub(U);if(W.cmpn(0)<0)W.iadd(this.m);return W},h.prototype.shl=function T(K,U){return this._verify1(K),this.imod(K.ushln(U))},h.prototype.imul=function T(K,U){return this._verify2(K,U),this.imod(K.imul(U))},h.prototype.mul=function T(K,U){return this._verify2(K,U),this.imod(K.mul(U))},h.prototype.isqr=function T(K){return this.imul(K,K.clone())},h.prototype.sqr=function T(K){return this.mul(K,K)},h.prototype.sqrt=function T(K){if(K.isZero())return K.clone();var U=this.m.andln(3);if(Z(U%2===1),U===3){var W=this.m.add(new q(1)).iushrn(2);return this.pow(K,W)}var V=this.m.subn(1),N=0;while(!V.isZero()&&V.andln(1)===0)N++,V.iushrn(1);Z(!V.isZero());var L=new q(1).toRed(this),F=L.redNeg(),R=this.m.subn(1).iushrn(1),O=this.m.bitLength();O=new q(2*O*O).toRed(this);while(this.pow(O,R).cmp(F)!==0)O.redIAdd(F);var w=this.pow(O,V),x=this.pow(K,V.addn(1).iushrn(1)),E=this.pow(K,V),v=N;while(E.cmp(L)!==0){var p=E;for(var i=0;p.cmp(L)!==0;i++)p=p.redSqr();Z(i<v);var s=this.pow(w,new q(1).iushln(v-i-1));x=x.redMul(s),w=s.redSqr(),E=E.redMul(w),v=i}return x},h.prototype.invm=function T(K){var U=K._invmp(this.m);if(U.negative!==0)return U.negative=0,this.imod(U).redNeg();else return this.imod(U)},h.prototype.pow=function T(K,U){if(U.isZero())return new q(1).toRed(this);if(U.cmpn(1)===0)return K.clone();var W=4,V=new Array(1<<W);V[0]=new q(1).toRed(this),V[1]=K;for(var N=2;N<V.length;N++)V[N]=this.mul(V[N-1],K);var L=V[0],F=0,R=0,O=U.bitLength()%26;if(O===0)O=26;for(N=U.length-1;N>=0;N--){var w=U.words[N];for(var x=O-1;x>=0;x--){var E=w>>x&1;if(L!==V[0])L=this.sqr(L);if(E===0&&F===0){R=0;continue}if(F<<=1,F|=E,R++,R!==W&&(N!==0||x!==0))continue;L=this.mul(L,V[F]),R=0,F=0}O=26}return L},h.prototype.convertTo=function T(K){var U=K.umod(this.m);return U===K?U.clone():U},h.prototype.convertFrom=function T(K){var U=K.clone();return U.red=null,U},q.mont=function T(K){return new c(K)};function c(T){if(h.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0)this.shift+=26-this.shift%26;this.r=new q(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}J(c,h),c.prototype.convertTo=function T(K){return this.imod(K.ushln(this.shift))},c.prototype.convertFrom=function T(K){var U=this.imod(K.mul(this.rinv));return U.red=null,U},c.prototype.imul=function T(K,U){if(K.isZero()||U.isZero())return K.words[0]=0,K.length=1,K;var W=K.imul(U),V=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=W.isub(V).iushrn(this.shift),L=N;if(N.cmp(this.m)>=0)L=N.isub(this.m);else if(N.cmpn(0)<0)L=N.iadd(this.m);return L._forceRed(this)},c.prototype.mul=function T(K,U){if(K.isZero()||U.isZero())return new q(0)._forceRed(this);var W=K.mul(U),V=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=W.isub(V).iushrn(this.shift),L=N;if(N.cmp(this.m)>=0)L=N.isub(this.m);else if(N.cmpn(0)<0)L=N.iadd(this.m);return L._forceRed(this)},c.prototype.invm=function T(K){var U=this.imod(K._invmp(this.m).mul(this.r2));return U._forceRed(this)}})(typeof Q==="undefined"||Q,$)}),XK0=o0(($,Q)=>{var X=$K0(),Y=QK0();Q.exports=function G(z){return new J(z)};var Z={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};Z.p224=Z.secp224r1,Z.p256=Z.secp256r1=Z.prime256v1,Z.p192=Z.secp192r1=Z.prime192v1,Z.p384=Z.secp384r1,Z.p521=Z.secp521r1;function J(G){if(this.curveType=Z[G],!this.curveType)this.curveType={name:G};this.curve=new X.ec(this.curveType.name),this.keys=void 0}J.prototype.generateKeys=function(G,z){return this.keys=this.curve.genKeyPair(),this.getPublicKey(G,z)},J.prototype.computeSecret=function(G,z,M){if(z=z||"utf8",!Buffer.isBuffer(G))G=new Buffer(G,z);var j=this.curve.keyFromPublic(G).getPublic(),P=j.mul(this.keys.getPrivate()).getX();return q(P,M,this.curveType.byteLength)},J.prototype.getPublicKey=function(G,z){var M=this.keys.getPublic(z==="compressed",!0);if(z==="hybrid")if(M[M.length-1]%2)M[0]=7;else M[0]=6;return q(M,G)},J.prototype.getPrivateKey=function(G){return q(this.keys.getPrivate(),G)},J.prototype.setPublicKey=function(G,z){if(z=z||"utf8",!Buffer.isBuffer(G))G=new Buffer(G,z);return this.keys._importPublic(G),this},J.prototype.setPrivateKey=function(G,z){if(z=z||"utf8",!Buffer.isBuffer(G))G=new Buffer(G,z);var M=new Y(G);return M=M.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(M),this};function q(G,z,M){if(!Array.isArray(G))G=G.toArray();var j=new Buffer(G);if(M&&j.length<M){var P=new Buffer(M-j.length);P.fill(0),j=Buffer.concat([P,j])}if(!z)return j;else return j.toString(z)}}),YK0=o0(($,Q)=>{var X=(QY(),I$($Y)).createECDH;Q.exports=X||XK0()}),ZK0=o0(($,Q)=>{(function(X,Y){function Z(T,K){if(!T)throw new Error(K||"Assertion failed")}function J(T,K){T.super_=K;var U=function(){};U.prototype=K.prototype,T.prototype=new U,T.prototype.constructor=T}function q(T,K,U){if(q.isBN(T))return T;if(this.negative=0,this.words=null,this.length=0,this.red=null,T!==null){if(K==="le"||K==="be")U=K,K=10;this._init(T||0,K||10,U||"be")}}if(typeof X==="object")X.exports=q;else Y.BN=q;q.BN=q,q.wordSize=26;var G;try{if(typeof window!=="undefined"&&typeof window.Buffer!=="undefined")G=window.Buffer;else G=(h8(),I$(b8)).Buffer}catch(T){}q.isBN=function T(K){if(K instanceof q)return!0;return K!==null&&typeof K==="object"&&K.constructor.wordSize===q.wordSize&&Array.isArray(K.words)},q.max=function T(K,U){if(K.cmp(U)>0)return K;return U},q.min=function T(K,U){if(K.cmp(U)<0)return K;return U},q.prototype._init=function T(K,U,W){if(typeof K==="number")return this._initNumber(K,U,W);if(typeof K==="object")return this._initArray(K,U,W);if(U==="hex")U=16;Z(U===(U|0)&&U>=2&&U<=36),K=K.toString().replace(/\s+/g,"");var V=0;if(K[0]==="-")V++,this.negative=1;if(V<K.length){if(U===16)this._parseHex(K,V,W);else if(this._parseBase(K,U,V),W==="le")this._initArray(this.toArray(),U,W)}},q.prototype._initNumber=function T(K,U,W){if(K<0)this.negative=1,K=-K;if(K<67108864)this.words=[K&67108863],this.length=1;else if(K<4503599627370496)this.words=[K&67108863,K/67108864&67108863],this.length=2;else Z(K<9007199254740992),this.words=[K&67108863,K/67108864&67108863,1],this.length=3;if(W!=="le")return;this._initArray(this.toArray(),U,W)},q.prototype._initArray=function T(K,U,W){if(Z(typeof K.length==="number"),K.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(K.length/3),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var N,L,F=0;if(W==="be"){for(V=K.length-1,N=0;V>=0;V-=3)if(L=K[V]|K[V-1]<<8|K[V-2]<<16,this.words[N]|=L<<F&67108863,this.words[N+1]=L>>>26-F&67108863,F+=24,F>=26)F-=26,N++}else if(W==="le"){for(V=0,N=0;V<K.length;V+=3)if(L=K[V]|K[V+1]<<8|K[V+2]<<16,this.words[N]|=L<<F&67108863,this.words[N+1]=L>>>26-F&67108863,F+=24,F>=26)F-=26,N++}return this.strip()};function z(T,K){var U=T.charCodeAt(K);if(U>=65&&U<=70)return U-55;else if(U>=97&&U<=102)return U-87;else return U-48&15}function M(T,K,U){var W=z(T,U);if(U-1>=K)W|=z(T,U-1)<<4;return W}q.prototype._parseHex=function T(K,U,W){this.length=Math.ceil((K.length-U)/6),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var N=0,L=0,F;if(W==="be")for(V=K.length-1;V>=U;V-=2)if(F=M(K,U,V)<<N,this.words[L]|=F&67108863,N>=18)N-=18,L+=1,this.words[L]|=F>>>26;else N+=8;else{var R=K.length-U;for(V=R%2===0?U+1:U;V<K.length;V+=2)if(F=M(K,U,V)<<N,this.words[L]|=F&67108863,N>=18)N-=18,L+=1,this.words[L]|=F>>>26;else N+=8}this.strip()};function j(T,K,U,W){var V=0,N=Math.min(T.length,U);for(var L=K;L<N;L++){var F=T.charCodeAt(L)-48;if(V*=W,F>=49)V+=F-49+10;else if(F>=17)V+=F-17+10;else V+=F}return V}q.prototype._parseBase=function T(K,U,W){this.words=[0],this.length=1;for(var V=0,N=1;N<=67108863;N*=U)V++;V--,N=N/U|0;var L=K.length-W,F=L%V,R=Math.min(L,L-F)+W,O=0;for(var w=W;w<R;w+=V)if(O=j(K,w,w+V,U),this.imuln(N),this.words[0]+O<67108864)this.words[0]+=O;else this._iaddn(O);if(F!==0){var x=1;O=j(K,w,K.length,U);for(w=0;w<F;w++)x*=U;if(this.imuln(x),this.words[0]+O<67108864)this.words[0]+=O;else this._iaddn(O)}this.strip()},q.prototype.copy=function T(K){K.words=new Array(this.length);for(var U=0;U<this.length;U++)K.words[U]=this.words[U];K.length=this.length,K.negative=this.negative,K.red=this.red},q.prototype.clone=function T(){var K=new q(null);return this.copy(K),K},q.prototype._expand=function T(K){while(this.length<K)this.words[this.length++]=0;return this},q.prototype.strip=function T(){while(this.length>1&&this.words[this.length-1]===0)this.length--;return this._normSign()},q.prototype._normSign=function T(){if(this.length===1&&this.words[0]===0)this.negative=0;return this},q.prototype.inspect=function T(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var P=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],D=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];if(q.prototype.toString=function T(K,U){K=K||10,U=U|0||1;var W;if(K===16||K==="hex"){W="";var V=0,N=0;for(var L=0;L<this.length;L++){var F=this.words[L],R=((F<<V|N)&16777215).toString(16);if(N=F>>>24-V&16777215,V+=2,V>=26)V-=26,L--;if(N!==0||L!==this.length-1)W=P[6-R.length]+R+W;else W=R+W}if(N!==0)W=N.toString(16)+W;while(W.length%U!==0)W="0"+W;if(this.negative!==0)W="-"+W;return W}if(K===(K|0)&&K>=2&&K<=36){var O=D[K],w=A[K];W="";var x=this.clone();x.negative=0;while(!x.isZero()){var E=x.modn(w).toString(K);if(x=x.idivn(w),!x.isZero())W=P[O-E.length]+E+W;else W=E+W}if(this.isZero())W="0"+W;while(W.length%U!==0)W="0"+W;if(this.negative!==0)W="-"+W;return W}Z(!1,"Base should be between 2 and 36")},q.prototype.toNumber=function T(){var K=this.words[0];if(this.length===2)K+=this.words[1]*67108864;else if(this.length===3&&this.words[2]===1)K+=4503599627370496+this.words[1]*67108864;else if(this.length>2)Z(!1,"Number can only safely store up to 53 bits");return this.negative!==0?-K:K},q.prototype.toJSON=function T(){return this.toString(16)},q.prototype.toBuffer=function T(K,U){return Z(typeof G!=="undefined"),this.toArrayLike(G,K,U)},q.prototype.toArray=function T(K,U){return this.toArrayLike(Array,K,U)},q.prototype.toArrayLike=function T(K,U,W){var V=this.byteLength(),N=W||Math.max(1,V);Z(V<=N,"byte array longer than desired length"),Z(N>0,"Requested array length <= 0"),this.strip();var L=U==="le",F=new K(N),R,O,w=this.clone();if(!L){for(O=0;O<N-V;O++)F[O]=0;for(O=0;!w.isZero();O++)R=w.andln(255),w.iushrn(8),F[N-O-1]=R}else{for(O=0;!w.isZero();O++)R=w.andln(255),w.iushrn(8),F[O]=R;for(;O<N;O++)F[O]=0}return F},Math.clz32)q.prototype._countBits=function T(K){return 32-Math.clz32(K)};else q.prototype._countBits=function T(K){var U=K,W=0;if(U>=4096)W+=13,U>>>=13;if(U>=64)W+=7,U>>>=7;if(U>=8)W+=4,U>>>=4;if(U>=2)W+=2,U>>>=2;return W+U};q.prototype._zeroBits=function T(K){if(K===0)return 26;var U=K,W=0;if((U&8191)===0)W+=13,U>>>=13;if((U&127)===0)W+=7,U>>>=7;if((U&15)===0)W+=4,U>>>=4;if((U&3)===0)W+=2,U>>>=2;if((U&1)===0)W++;return W},q.prototype.bitLength=function T(){var K=this.words[this.length-1],U=this._countBits(K);return(this.length-1)*26+U};function I(T){var K=new Array(T.bitLength());for(var U=0;U<K.length;U++){var W=U/26|0,V=U%26;K[U]=(T.words[W]&1<<V)>>>V}return K}q.prototype.zeroBits=function T(){if(this.isZero())return 0;var K=0;for(var U=0;U<this.length;U++){var W=this._zeroBits(this.words[U]);if(K+=W,W!==26)break}return K},q.prototype.byteLength=function T(){return Math.ceil(this.bitLength()/8)},q.prototype.toTwos=function T(K){if(this.negative!==0)return this.abs().inotn(K).iaddn(1);return this.clone()},q.prototype.fromTwos=function T(K){if(this.testn(K-1))return this.notn(K).iaddn(1).ineg();return this.clone()},q.prototype.isNeg=function T(){return this.negative!==0},q.prototype.neg=function T(){return this.clone().ineg()},q.prototype.ineg=function T(){if(!this.isZero())this.negative^=1;return this},q.prototype.iuor=function T(K){while(this.length<K.length)this.words[this.length++]=0;for(var U=0;U<K.length;U++)this.words[U]=this.words[U]|K.words[U];return this.strip()},q.prototype.ior=function T(K){return Z((this.negative|K.negative)===0),this.iuor(K)},q.prototype.or=function T(K){if(this.length>K.length)return this.clone().ior(K);return K.clone().ior(this)},q.prototype.uor=function T(K){if(this.length>K.length)return this.clone().iuor(K);return K.clone().iuor(this)},q.prototype.iuand=function T(K){var U;if(this.length>K.length)U=K;else U=this;for(var W=0;W<U.length;W++)this.words[W]=this.words[W]&K.words[W];return this.length=U.length,this.strip()},q.prototype.iand=function T(K){return Z((this.negative|K.negative)===0),this.iuand(K)},q.prototype.and=function T(K){if(this.length>K.length)return this.clone().iand(K);return K.clone().iand(this)},q.prototype.uand=function T(K){if(this.length>K.length)return this.clone().iuand(K);return K.clone().iuand(this)},q.prototype.iuxor=function T(K){var U,W;if(this.length>K.length)U=this,W=K;else U=K,W=this;for(var V=0;V<W.length;V++)this.words[V]=U.words[V]^W.words[V];if(this!==U)for(;V<U.length;V++)this.words[V]=U.words[V];return this.length=U.length,this.strip()},q.prototype.ixor=function T(K){return Z((this.negative|K.negative)===0),this.iuxor(K)},q.prototype.xor=function T(K){if(this.length>K.length)return this.clone().ixor(K);return K.clone().ixor(this)},q.prototype.uxor=function T(K){if(this.length>K.length)return this.clone().iuxor(K);return K.clone().iuxor(this)},q.prototype.inotn=function T(K){Z(typeof K==="number"&&K>=0);var U=Math.ceil(K/26)|0,W=K%26;if(this._expand(U),W>0)U--;for(var V=0;V<U;V++)this.words[V]=~this.words[V]&67108863;if(W>0)this.words[V]=~this.words[V]&67108863>>26-W;return this.strip()},q.prototype.notn=function T(K){return this.clone().inotn(K)},q.prototype.setn=function T(K,U){Z(typeof K==="number"&&K>=0);var W=K/26|0,V=K%26;if(this._expand(W+1),U)this.words[W]=this.words[W]|1<<V;else this.words[W]=this.words[W]&~(1<<V);return this.strip()},q.prototype.iadd=function T(K){var U;if(this.negative!==0&&K.negative===0)return this.negative=0,U=this.isub(K),this.negative^=1,this._normSign();else if(this.negative===0&&K.negative!==0)return K.negative=0,U=this.isub(K),K.negative=1,U._normSign();var W,V;if(this.length>K.length)W=this,V=K;else W=K,V=this;var N=0;for(var L=0;L<V.length;L++)U=(W.words[L]|0)+(V.words[L]|0)+N,this.words[L]=U&67108863,N=U>>>26;for(;N!==0&&L<W.length;L++)U=(W.words[L]|0)+N,this.words[L]=U&67108863,N=U>>>26;if(this.length=W.length,N!==0)this.words[this.length]=N,this.length++;else if(W!==this)for(;L<W.length;L++)this.words[L]=W.words[L];return this},q.prototype.add=function T(K){var U;if(K.negative!==0&&this.negative===0)return K.negative=0,U=this.sub(K),K.negative^=1,U;else if(K.negative===0&&this.negative!==0)return this.negative=0,U=K.sub(this),this.negative=1,U;if(this.length>K.length)return this.clone().iadd(K);return K.clone().iadd(this)},q.prototype.isub=function T(K){if(K.negative!==0){K.negative=0;var U=this.iadd(K);return K.negative=1,U._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(K),this.negative=1,this._normSign();var W=this.cmp(K);if(W===0)return this.negative=0,this.length=1,this.words[0]=0,this;var V,N;if(W>0)V=this,N=K;else V=K,N=this;var L=0;for(var F=0;F<N.length;F++)U=(V.words[F]|0)-(N.words[F]|0)+L,L=U>>26,this.words[F]=U&67108863;for(;L!==0&&F<V.length;F++)U=(V.words[F]|0)+L,L=U>>26,this.words[F]=U&67108863;if(L===0&&F<V.length&&V!==this)for(;F<V.length;F++)this.words[F]=V.words[F];if(this.length=Math.max(this.length,F),V!==this)this.negative=1;return this.strip()},q.prototype.sub=function T(K){return this.clone().isub(K)};function H(T,K,U){U.negative=K.negative^T.negative;var W=T.length+K.length|0;U.length=W,W=W-1|0;var V=T.words[0]|0,N=K.words[0]|0,L=V*N,F=L&67108863,R=L/67108864|0;U.words[0]=F;for(var O=1;O<W;O++){var w=R>>>26,x=R&67108863,E=Math.min(O,K.length-1);for(var v=Math.max(0,O-T.length+1);v<=E;v++){var p=O-v|0;V=T.words[p]|0,N=K.words[v]|0,L=V*N+x,w+=L/67108864|0,x=L&67108863}U.words[O]=x|0,R=w|0}if(R!==0)U.words[O]=R|0;else U.length--;return U.strip()}var C=function T(K,U,W){var V=K.words,N=U.words,L=W.words,F=0,R,O,w,x=V[0]|0,E=x&8191,v=x>>>13,p=V[1]|0,i=p&8191,s=p>>>13,X0=V[2]|0,n=X0&8191,r=X0>>>13,Z0=V[3]|0,e=Z0&8191,Q0=Z0>>>13,t=V[4]|0,a=t&8191,$0=t>>>13,d0=V[5]|0,K0=d0&8191,z0=d0>>>13,J0=V[6]|0,Y0=J0&8191,W0=J0>>>13,T0=V[7]|0,M0=T0&8191,A0=T0>>>13,C$=V[8]|0,P0=C$&8191,I0=C$>>>13,$8=V[9]|0,C0=$8&8191,S0=$8>>>13,o8=N[0]|0,F0=o8&8191,m0=o8>>>13,iQ=N[1]|0,c0=iQ&8191,p0=iQ>>>13,HX=N[2]|0,v0=HX&8191,g0=HX>>>13,NX=N[3]|0,y0=NX&8191,_0=NX>>>13,AX=N[4]|0,l0=AX&8191,k0=AX>>>13,nQ=N[5]|0,u=nQ&8191,d=nQ>>>13,i0=N[6]|0,U0=i0&8191,O0=i0>>>13,Q8=N[7]|0,w0=Q8&8191,B0=Q8>>>13,oQ=N[8]|0,u0=oQ&8191,b0=oQ>>>13,rQ=N[9]|0,x0=rQ&8191,f0=rQ>>>13;W.negative=K.negative^U.negative,W.length=19,R=Math.imul(E,F0),O=Math.imul(E,m0),O=O+Math.imul(v,F0)|0,w=Math.imul(v,m0);var y8=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(y8>>>26)|0,y8&=67108863,R=Math.imul(i,F0),O=Math.imul(i,m0),O=O+Math.imul(s,F0)|0,w=Math.imul(s,m0),R=R+Math.imul(E,c0)|0,O=O+Math.imul(E,p0)|0,O=O+Math.imul(v,c0)|0,w=w+Math.imul(v,p0)|0;var L$=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(L$>>>26)|0,L$&=67108863,R=Math.imul(n,F0),O=Math.imul(n,m0),O=O+Math.imul(r,F0)|0,w=Math.imul(r,m0),R=R+Math.imul(i,c0)|0,O=O+Math.imul(i,p0)|0,O=O+Math.imul(s,c0)|0,w=w+Math.imul(s,p0)|0,R=R+Math.imul(E,v0)|0,O=O+Math.imul(E,g0)|0,O=O+Math.imul(v,v0)|0,w=w+Math.imul(v,g0)|0;var H$=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(H$>>>26)|0,H$&=67108863,R=Math.imul(e,F0),O=Math.imul(e,m0),O=O+Math.imul(Q0,F0)|0,w=Math.imul(Q0,m0),R=R+Math.imul(n,c0)|0,O=O+Math.imul(n,p0)|0,O=O+Math.imul(r,c0)|0,w=w+Math.imul(r,p0)|0,R=R+Math.imul(i,v0)|0,O=O+Math.imul(i,g0)|0,O=O+Math.imul(s,v0)|0,w=w+Math.imul(s,g0)|0,R=R+Math.imul(E,y0)|0,O=O+Math.imul(E,_0)|0,O=O+Math.imul(v,y0)|0,w=w+Math.imul(v,_0)|0;var K8=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(K8>>>26)|0,K8&=67108863,R=Math.imul(a,F0),O=Math.imul(a,m0),O=O+Math.imul($0,F0)|0,w=Math.imul($0,m0),R=R+Math.imul(e,c0)|0,O=O+Math.imul(e,p0)|0,O=O+Math.imul(Q0,c0)|0,w=w+Math.imul(Q0,p0)|0,R=R+Math.imul(n,v0)|0,O=O+Math.imul(n,g0)|0,O=O+Math.imul(r,v0)|0,w=w+Math.imul(r,g0)|0,R=R+Math.imul(i,y0)|0,O=O+Math.imul(i,_0)|0,O=O+Math.imul(s,y0)|0,w=w+Math.imul(s,_0)|0,R=R+Math.imul(E,l0)|0,O=O+Math.imul(E,k0)|0,O=O+Math.imul(v,l0)|0,w=w+Math.imul(v,k0)|0;var JQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(JQ>>>26)|0,JQ&=67108863,R=Math.imul(K0,F0),O=Math.imul(K0,m0),O=O+Math.imul(z0,F0)|0,w=Math.imul(z0,m0),R=R+Math.imul(a,c0)|0,O=O+Math.imul(a,p0)|0,O=O+Math.imul($0,c0)|0,w=w+Math.imul($0,p0)|0,R=R+Math.imul(e,v0)|0,O=O+Math.imul(e,g0)|0,O=O+Math.imul(Q0,v0)|0,w=w+Math.imul(Q0,g0)|0,R=R+Math.imul(n,y0)|0,O=O+Math.imul(n,_0)|0,O=O+Math.imul(r,y0)|0,w=w+Math.imul(r,_0)|0,R=R+Math.imul(i,l0)|0,O=O+Math.imul(i,k0)|0,O=O+Math.imul(s,l0)|0,w=w+Math.imul(s,k0)|0,R=R+Math.imul(E,u)|0,O=O+Math.imul(E,d)|0,O=O+Math.imul(v,u)|0,w=w+Math.imul(v,d)|0;var qQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(qQ>>>26)|0,qQ&=67108863,R=Math.imul(Y0,F0),O=Math.imul(Y0,m0),O=O+Math.imul(W0,F0)|0,w=Math.imul(W0,m0),R=R+Math.imul(K0,c0)|0,O=O+Math.imul(K0,p0)|0,O=O+Math.imul(z0,c0)|0,w=w+Math.imul(z0,p0)|0,R=R+Math.imul(a,v0)|0,O=O+Math.imul(a,g0)|0,O=O+Math.imul($0,v0)|0,w=w+Math.imul($0,g0)|0,R=R+Math.imul(e,y0)|0,O=O+Math.imul(e,_0)|0,O=O+Math.imul(Q0,y0)|0,w=w+Math.imul(Q0,_0)|0,R=R+Math.imul(n,l0)|0,O=O+Math.imul(n,k0)|0,O=O+Math.imul(r,l0)|0,w=w+Math.imul(r,k0)|0,R=R+Math.imul(i,u)|0,O=O+Math.imul(i,d)|0,O=O+Math.imul(s,u)|0,w=w+Math.imul(s,d)|0,R=R+Math.imul(E,U0)|0,O=O+Math.imul(E,O0)|0,O=O+Math.imul(v,U0)|0,w=w+Math.imul(v,O0)|0;var GQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(GQ>>>26)|0,GQ&=67108863,R=Math.imul(M0,F0),O=Math.imul(M0,m0),O=O+Math.imul(A0,F0)|0,w=Math.imul(A0,m0),R=R+Math.imul(Y0,c0)|0,O=O+Math.imul(Y0,p0)|0,O=O+Math.imul(W0,c0)|0,w=w+Math.imul(W0,p0)|0,R=R+Math.imul(K0,v0)|0,O=O+Math.imul(K0,g0)|0,O=O+Math.imul(z0,v0)|0,w=w+Math.imul(z0,g0)|0,R=R+Math.imul(a,y0)|0,O=O+Math.imul(a,_0)|0,O=O+Math.imul($0,y0)|0,w=w+Math.imul($0,_0)|0,R=R+Math.imul(e,l0)|0,O=O+Math.imul(e,k0)|0,O=O+Math.imul(Q0,l0)|0,w=w+Math.imul(Q0,k0)|0,R=R+Math.imul(n,u)|0,O=O+Math.imul(n,d)|0,O=O+Math.imul(r,u)|0,w=w+Math.imul(r,d)|0,R=R+Math.imul(i,U0)|0,O=O+Math.imul(i,O0)|0,O=O+Math.imul(s,U0)|0,w=w+Math.imul(s,O0)|0,R=R+Math.imul(E,w0)|0,O=O+Math.imul(E,B0)|0,O=O+Math.imul(v,w0)|0,w=w+Math.imul(v,B0)|0;var zQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(zQ>>>26)|0,zQ&=67108863,R=Math.imul(P0,F0),O=Math.imul(P0,m0),O=O+Math.imul(I0,F0)|0,w=Math.imul(I0,m0),R=R+Math.imul(M0,c0)|0,O=O+Math.imul(M0,p0)|0,O=O+Math.imul(A0,c0)|0,w=w+Math.imul(A0,p0)|0,R=R+Math.imul(Y0,v0)|0,O=O+Math.imul(Y0,g0)|0,O=O+Math.imul(W0,v0)|0,w=w+Math.imul(W0,g0)|0,R=R+Math.imul(K0,y0)|0,O=O+Math.imul(K0,_0)|0,O=O+Math.imul(z0,y0)|0,w=w+Math.imul(z0,_0)|0,R=R+Math.imul(a,l0)|0,O=O+Math.imul(a,k0)|0,O=O+Math.imul($0,l0)|0,w=w+Math.imul($0,k0)|0,R=R+Math.imul(e,u)|0,O=O+Math.imul(e,d)|0,O=O+Math.imul(Q0,u)|0,w=w+Math.imul(Q0,d)|0,R=R+Math.imul(n,U0)|0,O=O+Math.imul(n,O0)|0,O=O+Math.imul(r,U0)|0,w=w+Math.imul(r,O0)|0,R=R+Math.imul(i,w0)|0,O=O+Math.imul(i,B0)|0,O=O+Math.imul(s,w0)|0,w=w+Math.imul(s,B0)|0,R=R+Math.imul(E,u0)|0,O=O+Math.imul(E,b0)|0,O=O+Math.imul(v,u0)|0,w=w+Math.imul(v,b0)|0;var KQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(KQ>>>26)|0,KQ&=67108863,R=Math.imul(C0,F0),O=Math.imul(C0,m0),O=O+Math.imul(S0,F0)|0,w=Math.imul(S0,m0),R=R+Math.imul(P0,c0)|0,O=O+Math.imul(P0,p0)|0,O=O+Math.imul(I0,c0)|0,w=w+Math.imul(I0,p0)|0,R=R+Math.imul(M0,v0)|0,O=O+Math.imul(M0,g0)|0,O=O+Math.imul(A0,v0)|0,w=w+Math.imul(A0,g0)|0,R=R+Math.imul(Y0,y0)|0,O=O+Math.imul(Y0,_0)|0,O=O+Math.imul(W0,y0)|0,w=w+Math.imul(W0,_0)|0,R=R+Math.imul(K0,l0)|0,O=O+Math.imul(K0,k0)|0,O=O+Math.imul(z0,l0)|0,w=w+Math.imul(z0,k0)|0,R=R+Math.imul(a,u)|0,O=O+Math.imul(a,d)|0,O=O+Math.imul($0,u)|0,w=w+Math.imul($0,d)|0,R=R+Math.imul(e,U0)|0,O=O+Math.imul(e,O0)|0,O=O+Math.imul(Q0,U0)|0,w=w+Math.imul(Q0,O0)|0,R=R+Math.imul(n,w0)|0,O=O+Math.imul(n,B0)|0,O=O+Math.imul(r,w0)|0,w=w+Math.imul(r,B0)|0,R=R+Math.imul(i,u0)|0,O=O+Math.imul(i,b0)|0,O=O+Math.imul(s,u0)|0,w=w+Math.imul(s,b0)|0,R=R+Math.imul(E,x0)|0,O=O+Math.imul(E,f0)|0,O=O+Math.imul(v,x0)|0,w=w+Math.imul(v,f0)|0;var UQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(UQ>>>26)|0,UQ&=67108863,R=Math.imul(C0,c0),O=Math.imul(C0,p0),O=O+Math.imul(S0,c0)|0,w=Math.imul(S0,p0),R=R+Math.imul(P0,v0)|0,O=O+Math.imul(P0,g0)|0,O=O+Math.imul(I0,v0)|0,w=w+Math.imul(I0,g0)|0,R=R+Math.imul(M0,y0)|0,O=O+Math.imul(M0,_0)|0,O=O+Math.imul(A0,y0)|0,w=w+Math.imul(A0,_0)|0,R=R+Math.imul(Y0,l0)|0,O=O+Math.imul(Y0,k0)|0,O=O+Math.imul(W0,l0)|0,w=w+Math.imul(W0,k0)|0,R=R+Math.imul(K0,u)|0,O=O+Math.imul(K0,d)|0,O=O+Math.imul(z0,u)|0,w=w+Math.imul(z0,d)|0,R=R+Math.imul(a,U0)|0,O=O+Math.imul(a,O0)|0,O=O+Math.imul($0,U0)|0,w=w+Math.imul($0,O0)|0,R=R+Math.imul(e,w0)|0,O=O+Math.imul(e,B0)|0,O=O+Math.imul(Q0,w0)|0,w=w+Math.imul(Q0,B0)|0,R=R+Math.imul(n,u0)|0,O=O+Math.imul(n,b0)|0,O=O+Math.imul(r,u0)|0,w=w+Math.imul(r,b0)|0,R=R+Math.imul(i,x0)|0,O=O+Math.imul(i,f0)|0,O=O+Math.imul(s,x0)|0,w=w+Math.imul(s,f0)|0;var WQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(WQ>>>26)|0,WQ&=67108863,R=Math.imul(C0,v0),O=Math.imul(C0,g0),O=O+Math.imul(S0,v0)|0,w=Math.imul(S0,g0),R=R+Math.imul(P0,y0)|0,O=O+Math.imul(P0,_0)|0,O=O+Math.imul(I0,y0)|0,w=w+Math.imul(I0,_0)|0,R=R+Math.imul(M0,l0)|0,O=O+Math.imul(M0,k0)|0,O=O+Math.imul(A0,l0)|0,w=w+Math.imul(A0,k0)|0,R=R+Math.imul(Y0,u)|0,O=O+Math.imul(Y0,d)|0,O=O+Math.imul(W0,u)|0,w=w+Math.imul(W0,d)|0,R=R+Math.imul(K0,U0)|0,O=O+Math.imul(K0,O0)|0,O=O+Math.imul(z0,U0)|0,w=w+Math.imul(z0,O0)|0,R=R+Math.imul(a,w0)|0,O=O+Math.imul(a,B0)|0,O=O+Math.imul($0,w0)|0,w=w+Math.imul($0,B0)|0,R=R+Math.imul(e,u0)|0,O=O+Math.imul(e,b0)|0,O=O+Math.imul(Q0,u0)|0,w=w+Math.imul(Q0,b0)|0,R=R+Math.imul(n,x0)|0,O=O+Math.imul(n,f0)|0,O=O+Math.imul(r,x0)|0,w=w+Math.imul(r,f0)|0;var VQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(VQ>>>26)|0,VQ&=67108863,R=Math.imul(C0,y0),O=Math.imul(C0,_0),O=O+Math.imul(S0,y0)|0,w=Math.imul(S0,_0),R=R+Math.imul(P0,l0)|0,O=O+Math.imul(P0,k0)|0,O=O+Math.imul(I0,l0)|0,w=w+Math.imul(I0,k0)|0,R=R+Math.imul(M0,u)|0,O=O+Math.imul(M0,d)|0,O=O+Math.imul(A0,u)|0,w=w+Math.imul(A0,d)|0,R=R+Math.imul(Y0,U0)|0,O=O+Math.imul(Y0,O0)|0,O=O+Math.imul(W0,U0)|0,w=w+Math.imul(W0,O0)|0,R=R+Math.imul(K0,w0)|0,O=O+Math.imul(K0,B0)|0,O=O+Math.imul(z0,w0)|0,w=w+Math.imul(z0,B0)|0,R=R+Math.imul(a,u0)|0,O=O+Math.imul(a,b0)|0,O=O+Math.imul($0,u0)|0,w=w+Math.imul($0,b0)|0,R=R+Math.imul(e,x0)|0,O=O+Math.imul(e,f0)|0,O=O+Math.imul(Q0,x0)|0,w=w+Math.imul(Q0,f0)|0;var OQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(OQ>>>26)|0,OQ&=67108863,R=Math.imul(C0,l0),O=Math.imul(C0,k0),O=O+Math.imul(S0,l0)|0,w=Math.imul(S0,k0),R=R+Math.imul(P0,u)|0,O=O+Math.imul(P0,d)|0,O=O+Math.imul(I0,u)|0,w=w+Math.imul(I0,d)|0,R=R+Math.imul(M0,U0)|0,O=O+Math.imul(M0,O0)|0,O=O+Math.imul(A0,U0)|0,w=w+Math.imul(A0,O0)|0,R=R+Math.imul(Y0,w0)|0,O=O+Math.imul(Y0,B0)|0,O=O+Math.imul(W0,w0)|0,w=w+Math.imul(W0,B0)|0,R=R+Math.imul(K0,u0)|0,O=O+Math.imul(K0,b0)|0,O=O+Math.imul(z0,u0)|0,w=w+Math.imul(z0,b0)|0,R=R+Math.imul(a,x0)|0,O=O+Math.imul(a,f0)|0,O=O+Math.imul($0,x0)|0,w=w+Math.imul($0,f0)|0;var MQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(MQ>>>26)|0,MQ&=67108863,R=Math.imul(C0,u),O=Math.imul(C0,d),O=O+Math.imul(S0,u)|0,w=Math.imul(S0,d),R=R+Math.imul(P0,U0)|0,O=O+Math.imul(P0,O0)|0,O=O+Math.imul(I0,U0)|0,w=w+Math.imul(I0,O0)|0,R=R+Math.imul(M0,w0)|0,O=O+Math.imul(M0,B0)|0,O=O+Math.imul(A0,w0)|0,w=w+Math.imul(A0,B0)|0,R=R+Math.imul(Y0,u0)|0,O=O+Math.imul(Y0,b0)|0,O=O+Math.imul(W0,u0)|0,w=w+Math.imul(W0,b0)|0,R=R+Math.imul(K0,x0)|0,O=O+Math.imul(K0,f0)|0,O=O+Math.imul(z0,x0)|0,w=w+Math.imul(z0,f0)|0;var DQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(DQ>>>26)|0,DQ&=67108863,R=Math.imul(C0,U0),O=Math.imul(C0,O0),O=O+Math.imul(S0,U0)|0,w=Math.imul(S0,O0),R=R+Math.imul(P0,w0)|0,O=O+Math.imul(P0,B0)|0,O=O+Math.imul(I0,w0)|0,w=w+Math.imul(I0,B0)|0,R=R+Math.imul(M0,u0)|0,O=O+Math.imul(M0,b0)|0,O=O+Math.imul(A0,u0)|0,w=w+Math.imul(A0,b0)|0,R=R+Math.imul(Y0,x0)|0,O=O+Math.imul(Y0,f0)|0,O=O+Math.imul(W0,x0)|0,w=w+Math.imul(W0,f0)|0;var jQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(jQ>>>26)|0,jQ&=67108863,R=Math.imul(C0,w0),O=Math.imul(C0,B0),O=O+Math.imul(S0,w0)|0,w=Math.imul(S0,B0),R=R+Math.imul(P0,u0)|0,O=O+Math.imul(P0,b0)|0,O=O+Math.imul(I0,u0)|0,w=w+Math.imul(I0,b0)|0,R=R+Math.imul(M0,x0)|0,O=O+Math.imul(M0,f0)|0,O=O+Math.imul(A0,x0)|0,w=w+Math.imul(A0,f0)|0;var PQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(PQ>>>26)|0,PQ&=67108863,R=Math.imul(C0,u0),O=Math.imul(C0,b0),O=O+Math.imul(S0,u0)|0,w=Math.imul(S0,b0),R=R+Math.imul(P0,x0)|0,O=O+Math.imul(P0,f0)|0,O=O+Math.imul(I0,x0)|0,w=w+Math.imul(I0,f0)|0;var HQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(HQ>>>26)|0,HQ&=67108863,R=Math.imul(C0,x0),O=Math.imul(C0,f0),O=O+Math.imul(S0,x0)|0,w=Math.imul(S0,f0);var NQ=(F+R|0)+((O&8191)<<13)|0;if(F=(w+(O>>>13)|0)+(NQ>>>26)|0,NQ&=67108863,L[0]=y8,L[1]=L$,L[2]=H$,L[3]=K8,L[4]=JQ,L[5]=qQ,L[6]=GQ,L[7]=zQ,L[8]=KQ,L[9]=UQ,L[10]=WQ,L[11]=VQ,L[12]=OQ,L[13]=MQ,L[14]=DQ,L[15]=jQ,L[16]=PQ,L[17]=HQ,L[18]=NQ,F!==0)L[19]=F,W.length++;return W};if(!Math.imul)C=H;function B(T,K,U){U.negative=K.negative^T.negative,U.length=T.length+K.length;var W=0,V=0;for(var N=0;N<U.length-1;N++){var L=V;V=0;var F=W&67108863,R=Math.min(N,K.length-1);for(var O=Math.max(0,N-T.length+1);O<=R;O++){var w=N-O,x=T.words[w]|0,E=K.words[O]|0,v=x*E,p=v&67108863;L=L+(v/67108864|0)|0,p=p+F|0,F=p&67108863,L=L+(p>>>26)|0,V+=L>>>26,L&=67108863}U.words[N]=F,W=L,L=V}if(W!==0)U.words[N]=W;else U.length--;return U.strip()}function S(T,K,U){var W=new _;return W.mulp(T,K,U)}q.prototype.mulTo=function T(K,U){var W,V=this.length+K.length;if(this.length===10&&K.length===10)W=C(this,K,U);else if(V<63)W=H(this,K,U);else if(V<1024)W=B(this,K,U);else W=S(this,K,U);return W};function _(T,K){this.x=T,this.y=K}_.prototype.makeRBT=function T(K){var U=new Array(K),W=q.prototype._countBits(K)-1;for(var V=0;V<K;V++)U[V]=this.revBin(V,W,K);return U},_.prototype.revBin=function T(K,U,W){if(K===0||K===W-1)return K;var V=0;for(var N=0;N<U;N++)V|=(K&1)<<U-N-1,K>>=1;return V},_.prototype.permute=function T(K,U,W,V,N,L){for(var F=0;F<L;F++)V[F]=U[K[F]],N[F]=W[K[F]]},_.prototype.transform=function T(K,U,W,V,N,L){this.permute(L,K,U,W,V,N);for(var F=1;F<N;F<<=1){var R=F<<1,O=Math.cos(2*Math.PI/R),w=Math.sin(2*Math.PI/R);for(var x=0;x<N;x+=R){var E=O,v=w;for(var p=0;p<F;p++){var i=W[x+p],s=V[x+p],X0=W[x+p+F],n=V[x+p+F],r=E*X0-v*n;if(n=E*n+v*X0,X0=r,W[x+p]=i+X0,V[x+p]=s+n,W[x+p+F]=i-X0,V[x+p+F]=s-n,p!==R)r=O*E-w*v,v=O*v+w*E,E=r}}}},_.prototype.guessLen13b=function T(K,U){var W=Math.max(U,K)|1,V=W&1,N=0;for(W=W/2|0;W;W=W>>>1)N++;return 1<<N+1+V},_.prototype.conjugate=function T(K,U,W){if(W<=1)return;for(var V=0;V<W/2;V++){var N=K[V];K[V]=K[W-V-1],K[W-V-1]=N,N=U[V],U[V]=-U[W-V-1],U[W-V-1]=-N}},_.prototype.normalize13b=function T(K,U){var W=0;for(var V=0;V<U/2;V++){var N=Math.round(K[2*V+1]/U)*8192+Math.round(K[2*V]/U)+W;if(K[V]=N&67108863,N<67108864)W=0;else W=N/67108864|0}return K},_.prototype.convert13b=function T(K,U,W,V){var N=0;for(var L=0;L<U;L++)N=N+(K[L]|0),W[2*L]=N&8191,N=N>>>13,W[2*L+1]=N&8191,N=N>>>13;for(L=2*U;L<V;++L)W[L]=0;Z(N===0),Z((N&-8192)===0)},_.prototype.stub=function T(K){var U=new Array(K);for(var W=0;W<K;W++)U[W]=0;return U},_.prototype.mulp=function T(K,U,W){var V=2*this.guessLen13b(K.length,U.length),N=this.makeRBT(V),L=this.stub(V),F=new Array(V),R=new Array(V),O=new Array(V),w=new Array(V),x=new Array(V),E=new Array(V),v=W.words;v.length=V,this.convert13b(K.words,K.length,F,V),this.convert13b(U.words,U.length,w,V),this.transform(F,L,R,O,V,N),this.transform(w,L,x,E,V,N);for(var p=0;p<V;p++){var i=R[p]*x[p]-O[p]*E[p];O[p]=R[p]*E[p]+O[p]*x[p],R[p]=i}return this.conjugate(R,O,V),this.transform(R,O,v,L,V,N),this.conjugate(v,L,V),this.normalize13b(v,V),W.negative=K.negative^U.negative,W.length=K.length+U.length,W.strip()},q.prototype.mul=function T(K){var U=new q(null);return U.words=new Array(this.length+K.length),this.mulTo(K,U)},q.prototype.mulf=function T(K){var U=new q(null);return U.words=new Array(this.length+K.length),S(this,K,U)},q.prototype.imul=function T(K){return this.clone().mulTo(K,this)},q.prototype.imuln=function T(K){Z(typeof K==="number"),Z(K<67108864);var U=0;for(var W=0;W<this.length;W++){var V=(this.words[W]|0)*K,N=(V&67108863)+(U&67108863);U>>=26,U+=V/67108864|0,U+=N>>>26,this.words[W]=N&67108863}if(U!==0)this.words[W]=U,this.length++;return this.length=K===0?1:this.length,this},q.prototype.muln=function T(K){return this.clone().imuln(K)},q.prototype.sqr=function T(){return this.mul(this)},q.prototype.isqr=function T(){return this.imul(this.clone())},q.prototype.pow=function T(K){var U=I(K);if(U.length===0)return new q(1);var W=this;for(var V=0;V<U.length;V++,W=W.sqr())if(U[V]!==0)break;if(++V<U.length)for(var N=W.sqr();V<U.length;V++,N=N.sqr()){if(U[V]===0)continue;W=W.mul(N)}return W},q.prototype.iushln=function T(K){Z(typeof K==="number"&&K>=0);var U=K%26,W=(K-U)/26,V=67108863>>>26-U<<26-U,N;if(U!==0){var L=0;for(N=0;N<this.length;N++){var F=this.words[N]&V,R=(this.words[N]|0)-F<<U;this.words[N]=R|L,L=F>>>26-U}if(L)this.words[N]=L,this.length++}if(W!==0){for(N=this.length-1;N>=0;N--)this.words[N+W]=this.words[N];for(N=0;N<W;N++)this.words[N]=0;this.length+=W}return this.strip()},q.prototype.ishln=function T(K){return Z(this.negative===0),this.iushln(K)},q.prototype.iushrn=function T(K,U,W){Z(typeof K==="number"&&K>=0);var V;if(U)V=(U-U%26)/26;else V=0;var N=K%26,L=Math.min((K-N)/26,this.length),F=67108863^67108863>>>N<<N,R=W;if(V-=L,V=Math.max(0,V),R){for(var O=0;O<L;O++)R.words[O]=this.words[O];R.length=L}if(L===0);else if(this.length>L){this.length-=L;for(O=0;O<this.length;O++)this.words[O]=this.words[O+L]}else this.words[0]=0,this.length=1;var w=0;for(O=this.length-1;O>=0&&(w!==0||O>=V);O--){var x=this.words[O]|0;this.words[O]=w<<26-N|x>>>N,w=x&F}if(R&&w!==0)R.words[R.length++]=w;if(this.length===0)this.words[0]=0,this.length=1;return this.strip()},q.prototype.ishrn=function T(K,U,W){return Z(this.negative===0),this.iushrn(K,U,W)},q.prototype.shln=function T(K){return this.clone().ishln(K)},q.prototype.ushln=function T(K){return this.clone().iushln(K)},q.prototype.shrn=function T(K){return this.clone().ishrn(K)},q.prototype.ushrn=function T(K){return this.clone().iushrn(K)},q.prototype.testn=function T(K){Z(typeof K==="number"&&K>=0);var U=K%26,W=(K-U)/26,V=1<<U;if(this.length<=W)return!1;var N=this.words[W];return!!(N&V)},q.prototype.imaskn=function T(K){Z(typeof K==="number"&&K>=0);var U=K%26,W=(K-U)/26;if(Z(this.negative===0,"imaskn works only with positive numbers"),this.length<=W)return this;if(U!==0)W++;if(this.length=Math.min(W,this.length),U!==0){var V=67108863^67108863>>>U<<U;this.words[this.length-1]&=V}return this.strip()},q.prototype.maskn=function T(K){return this.clone().imaskn(K)},q.prototype.iaddn=function T(K){if(Z(typeof K==="number"),Z(K<67108864),K<0)return this.isubn(-K);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<K)return this.words[0]=K-(this.words[0]|0),this.negative=0,this;return this.negative=0,this.isubn(K),this.negative=1,this}return this._iaddn(K)},q.prototype._iaddn=function T(K){this.words[0]+=K;for(var U=0;U<this.length&&this.words[U]>=67108864;U++)if(this.words[U]-=67108864,U===this.length-1)this.words[U+1]=1;else this.words[U+1]++;return this.length=Math.max(this.length,U+1),this},q.prototype.isubn=function T(K){if(Z(typeof K==="number"),Z(K<67108864),K<0)return this.iaddn(-K);if(this.negative!==0)return this.negative=0,this.iaddn(K),this.negative=1,this;if(this.words[0]-=K,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var U=0;U<this.length&&this.words[U]<0;U++)this.words[U]+=67108864,this.words[U+1]-=1;return this.strip()},q.prototype.addn=function T(K){return this.clone().iaddn(K)},q.prototype.subn=function T(K){return this.clone().isubn(K)},q.prototype.iabs=function T(){return this.negative=0,this},q.prototype.abs=function T(){return this.clone().iabs()},q.prototype._ishlnsubmul=function T(K,U,W){var V=K.length+W,N;this._expand(V);var L,F=0;for(N=0;N<K.length;N++){L=(this.words[N+W]|0)+F;var R=(K.words[N]|0)*U;L-=R&67108863,F=(L>>26)-(R/67108864|0),this.words[N+W]=L&67108863}for(;N<this.length-W;N++)L=(this.words[N+W]|0)+F,F=L>>26,this.words[N+W]=L&67108863;if(F===0)return this.strip();Z(F===-1),F=0;for(N=0;N<this.length;N++)L=-(this.words[N]|0)+F,F=L>>26,this.words[N]=L&67108863;return this.negative=1,this.strip()},q.prototype._wordDiv=function T(K,U){var W=this.length-K.length,V=this.clone(),N=K,L=N.words[N.length-1]|0,F=this._countBits(L);if(W=26-F,W!==0)N=N.ushln(W),V.iushln(W),L=N.words[N.length-1]|0;var R=V.length-N.length,O;if(U!=="mod"){O=new q(null),O.length=R+1,O.words=new Array(O.length);for(var w=0;w<O.length;w++)O.words[w]=0}var x=V.clone()._ishlnsubmul(N,1,R);if(x.negative===0){if(V=x,O)O.words[R]=1}for(var E=R-1;E>=0;E--){var v=(V.words[N.length+E]|0)*67108864+(V.words[N.length+E-1]|0);v=Math.min(v/L|0,67108863),V._ishlnsubmul(N,v,E);while(V.negative!==0)if(v--,V.negative=0,V._ishlnsubmul(N,1,E),!V.isZero())V.negative^=1;if(O)O.words[E]=v}if(O)O.strip();if(V.strip(),U!=="div"&&W!==0)V.iushrn(W);return{div:O||null,mod:V}},q.prototype.divmod=function T(K,U,W){if(Z(!K.isZero()),this.isZero())return{div:new q(0),mod:new q(0)};var V,N,L;if(this.negative!==0&&K.negative===0){if(L=this.neg().divmod(K,U),U!=="mod")V=L.div.neg();if(U!=="div"){if(N=L.mod.neg(),W&&N.negative!==0)N.iadd(K)}return{div:V,mod:N}}if(this.negative===0&&K.negative!==0){if(L=this.divmod(K.neg(),U),U!=="mod")V=L.div.neg();return{div:V,mod:L.mod}}if((this.negative&K.negative)!==0){if(L=this.neg().divmod(K.neg(),U),U!=="div"){if(N=L.mod.neg(),W&&N.negative!==0)N.isub(K)}return{div:L.div,mod:N}}if(K.length>this.length||this.cmp(K)<0)return{div:new q(0),mod:this};if(K.length===1){if(U==="div")return{div:this.divn(K.words[0]),mod:null};if(U==="mod")return{div:null,mod:new q(this.modn(K.words[0]))};return{div:this.divn(K.words[0]),mod:new q(this.modn(K.words[0]))}}return this._wordDiv(K,U)},q.prototype.div=function T(K){return this.divmod(K,"div",!1).div},q.prototype.mod=function T(K){return this.divmod(K,"mod",!1).mod},q.prototype.umod=function T(K){return this.divmod(K,"mod",!0).mod},q.prototype.divRound=function T(K){var U=this.divmod(K);if(U.mod.isZero())return U.div;var W=U.div.negative!==0?U.mod.isub(K):U.mod,V=K.ushrn(1),N=K.andln(1),L=W.cmp(V);if(L<0||N===1&&L===0)return U.div;return U.div.negative!==0?U.div.isubn(1):U.div.iaddn(1)},q.prototype.modn=function T(K){Z(K<=67108863);var U=67108864%K,W=0;for(var V=this.length-1;V>=0;V--)W=(U*W+(this.words[V]|0))%K;return W},q.prototype.idivn=function T(K){Z(K<=67108863);var U=0;for(var W=this.length-1;W>=0;W--){var V=(this.words[W]|0)+U*67108864;this.words[W]=V/K|0,U=V%K}return this.strip()},q.prototype.divn=function T(K){return this.clone().idivn(K)},q.prototype.egcd=function T(K){Z(K.negative===0),Z(!K.isZero());var U=this,W=K.clone();if(U.negative!==0)U=U.umod(K);else U=U.clone();var V=new q(1),N=new q(0),L=new q(0),F=new q(1),R=0;while(U.isEven()&&W.isEven())U.iushrn(1),W.iushrn(1),++R;var O=W.clone(),w=U.clone();while(!U.isZero()){for(var x=0,E=1;(U.words[0]&E)===0&&x<26;++x,E<<=1);if(x>0){U.iushrn(x);while(x-- >0){if(V.isOdd()||N.isOdd())V.iadd(O),N.isub(w);V.iushrn(1),N.iushrn(1)}}for(var v=0,p=1;(W.words[0]&p)===0&&v<26;++v,p<<=1);if(v>0){W.iushrn(v);while(v-- >0){if(L.isOdd()||F.isOdd())L.iadd(O),F.isub(w);L.iushrn(1),F.iushrn(1)}}if(U.cmp(W)>=0)U.isub(W),V.isub(L),N.isub(F);else W.isub(U),L.isub(V),F.isub(N)}return{a:L,b:F,gcd:W.iushln(R)}},q.prototype._invmp=function T(K){Z(K.negative===0),Z(!K.isZero());var U=this,W=K.clone();if(U.negative!==0)U=U.umod(K);else U=U.clone();var V=new q(1),N=new q(0),L=W.clone();while(U.cmpn(1)>0&&W.cmpn(1)>0){for(var F=0,R=1;(U.words[0]&R)===0&&F<26;++F,R<<=1);if(F>0){U.iushrn(F);while(F-- >0){if(V.isOdd())V.iadd(L);V.iushrn(1)}}for(var O=0,w=1;(W.words[0]&w)===0&&O<26;++O,w<<=1);if(O>0){W.iushrn(O);while(O-- >0){if(N.isOdd())N.iadd(L);N.iushrn(1)}}if(U.cmp(W)>=0)U.isub(W),V.isub(N);else W.isub(U),N.isub(V)}var x;if(U.cmpn(1)===0)x=V;else x=N;if(x.cmpn(0)<0)x.iadd(K);return x},q.prototype.gcd=function T(K){if(this.isZero())return K.abs();if(K.isZero())return this.abs();var U=this.clone(),W=K.clone();U.negative=0,W.negative=0;for(var V=0;U.isEven()&&W.isEven();V++)U.iushrn(1),W.iushrn(1);do{while(U.isEven())U.iushrn(1);while(W.isEven())W.iushrn(1);var N=U.cmp(W);if(N<0){var L=U;U=W,W=L}else if(N===0||W.cmpn(1)===0)break;U.isub(W)}while(!0);return W.iushln(V)},q.prototype.invm=function T(K){return this.egcd(K).a.umod(K)},q.prototype.isEven=function T(){return(this.words[0]&1)===0},q.prototype.isOdd=function T(){return(this.words[0]&1)===1},q.prototype.andln=function T(K){return this.words[0]&K},q.prototype.bincn=function T(K){Z(typeof K==="number");var U=K%26,W=(K-U)/26,V=1<<U;if(this.length<=W)return this._expand(W+1),this.words[W]|=V,this;var N=V;for(var L=W;N!==0&&L<this.length;L++){var F=this.words[L]|0;F+=N,N=F>>>26,F&=67108863,this.words[L]=F}if(N!==0)this.words[L]=N,this.length++;return this},q.prototype.isZero=function T(){return this.length===1&&this.words[0]===0},q.prototype.cmpn=function T(K){var U=K<0;if(this.negative!==0&&!U)return-1;if(this.negative===0&&U)return 1;this.strip();var W;if(this.length>1)W=1;else{if(U)K=-K;Z(K<=67108863,"Number is too big");var V=this.words[0]|0;W=V===K?0:V<K?-1:1}if(this.negative!==0)return-W|0;return W},q.prototype.cmp=function T(K){if(this.negative!==0&&K.negative===0)return-1;if(this.negative===0&&K.negative!==0)return 1;var U=this.ucmp(K);if(this.negative!==0)return-U|0;return U},q.prototype.ucmp=function T(K){if(this.length>K.length)return 1;if(this.length<K.length)return-1;var U=0;for(var W=this.length-1;W>=0;W--){var V=this.words[W]|0,N=K.words[W]|0;if(V===N)continue;if(V<N)U=-1;else if(V>N)U=1;break}return U},q.prototype.gtn=function T(K){return this.cmpn(K)===1},q.prototype.gt=function T(K){return this.cmp(K)===1},q.prototype.gten=function T(K){return this.cmpn(K)>=0},q.prototype.gte=function T(K){return this.cmp(K)>=0},q.prototype.ltn=function T(K){return this.cmpn(K)===-1},q.prototype.lt=function T(K){return this.cmp(K)===-1},q.prototype.lten=function T(K){return this.cmpn(K)<=0},q.prototype.lte=function T(K){return this.cmp(K)<=0},q.prototype.eqn=function T(K){return this.cmpn(K)===0},q.prototype.eq=function T(K){return this.cmp(K)===0},q.red=function T(K){return new h(K)},q.prototype.toRed=function T(K){return Z(!this.red,"Already a number in reduction context"),Z(this.negative===0,"red works only with positives"),K.convertTo(this)._forceRed(K)},q.prototype.fromRed=function T(){return Z(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},q.prototype._forceRed=function T(K){return this.red=K,this},q.prototype.forceRed=function T(K){return Z(!this.red,"Already a number in reduction context"),this._forceRed(K)},q.prototype.redAdd=function T(K){return Z(this.red,"redAdd works only with red numbers"),this.red.add(this,K)},q.prototype.redIAdd=function T(K){return Z(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,K)},q.prototype.redSub=function T(K){return Z(this.red,"redSub works only with red numbers"),this.red.sub(this,K)},q.prototype.redISub=function T(K){return Z(this.red,"redISub works only with red numbers"),this.red.isub(this,K)},q.prototype.redShl=function T(K){return Z(this.red,"redShl works only with red numbers"),this.red.shl(this,K)},q.prototype.redMul=function T(K){return Z(this.red,"redMul works only with red numbers"),this.red._verify2(this,K),this.red.mul(this,K)},q.prototype.redIMul=function T(K){return Z(this.red,"redMul works only with red numbers"),this.red._verify2(this,K),this.red.imul(this,K)},q.prototype.redSqr=function T(){return Z(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},q.prototype.redISqr=function T(){return Z(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},q.prototype.redSqrt=function T(){return Z(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},q.prototype.redInvm=function T(){return Z(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},q.prototype.redNeg=function T(){return Z(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},q.prototype.redPow=function T(K){return Z(this.red&&!K.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,K)};var k={k256:null,p224:null,p192:null,p25519:null};function f(T,K){this.name=T,this.p=new q(K,16),this.n=this.p.bitLength(),this.k=new q(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}f.prototype._tmp=function T(){var K=new q(null);return K.words=new Array(Math.ceil(this.n/13)),K},f.prototype.ireduce=function T(K){var U=K,W;do this.split(U,this.tmp),U=this.imulK(U),U=U.iadd(this.tmp),W=U.bitLength();while(W>this.n);var V=W<this.n?-1:U.ucmp(this.p);if(V===0)U.words[0]=0,U.length=1;else if(V>0)U.isub(this.p);else if(U.strip!==void 0)U.strip();else U._strip();return U},f.prototype.split=function T(K,U){K.iushrn(this.n,0,U)},f.prototype.imulK=function T(K){return K.imul(this.k)};function g(){f.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}J(g,f),g.prototype.split=function T(K,U){var W=4194303,V=Math.min(K.length,9);for(var N=0;N<V;N++)U.words[N]=K.words[N];if(U.length=V,K.length<=9){K.words[0]=0,K.length=1;return}var L=K.words[9];U.words[U.length++]=L&W;for(N=10;N<K.length;N++){var F=K.words[N]|0;K.words[N-10]=(F&W)<<4|L>>>22,L=F}if(L>>>=22,K.words[N-10]=L,L===0&&K.length>10)K.length-=10;else K.length-=9},g.prototype.imulK=function T(K){K.words[K.length]=0,K.words[K.length+1]=0,K.length+=2;var U=0;for(var W=0;W<K.length;W++){var V=K.words[W]|0;U+=V*977,K.words[W]=U&67108863,U=V*64+(U/67108864|0)}if(K.words[K.length-1]===0){if(K.length--,K.words[K.length-1]===0)K.length--}return K};function b(){f.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}J(b,f);function m(){f.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}J(m,f);function l(){f.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}J(l,f),l.prototype.imulK=function T(K){var U=0;for(var W=0;W<K.length;W++){var V=(K.words[W]|0)*19+U,N=V&67108863;V>>>=26,K.words[W]=N,U=V}if(U!==0)K.words[K.length++]=U;return K},q._prime=function T(K){if(k[K])return k[K];var U;if(K==="k256")U=new g;else if(K==="p224")U=new b;else if(K==="p192")U=new m;else if(K==="p25519")U=new l;else throw new Error("Unknown prime "+K);return k[K]=U,U};function h(T){if(typeof T==="string"){var K=q._prime(T);this.m=K.p,this.prime=K}else Z(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}h.prototype._verify1=function T(K){Z(K.negative===0,"red works only with positives"),Z(K.red,"red works only with red numbers")},h.prototype._verify2=function T(K,U){Z((K.negative|U.negative)===0,"red works only with positives"),Z(K.red&&K.red===U.red,"red works only with red numbers")},h.prototype.imod=function T(K){if(this.prime)return this.prime.ireduce(K)._forceRed(this);return K.umod(this.m)._forceRed(this)},h.prototype.neg=function T(K){if(K.isZero())return K.clone();return this.m.sub(K)._forceRed(this)},h.prototype.add=function T(K,U){this._verify2(K,U);var W=K.add(U);if(W.cmp(this.m)>=0)W.isub(this.m);return W._forceRed(this)},h.prototype.iadd=function T(K,U){this._verify2(K,U);var W=K.iadd(U);if(W.cmp(this.m)>=0)W.isub(this.m);return W},h.prototype.sub=function T(K,U){this._verify2(K,U);var W=K.sub(U);if(W.cmpn(0)<0)W.iadd(this.m);return W._forceRed(this)},h.prototype.isub=function T(K,U){this._verify2(K,U);var W=K.isub(U);if(W.cmpn(0)<0)W.iadd(this.m);return W},h.prototype.shl=function T(K,U){return this._verify1(K),this.imod(K.ushln(U))},h.prototype.imul=function T(K,U){return this._verify2(K,U),this.imod(K.imul(U))},h.prototype.mul=function T(K,U){return this._verify2(K,U),this.imod(K.mul(U))},h.prototype.isqr=function T(K){return this.imul(K,K.clone())},h.prototype.sqr=function T(K){return this.mul(K,K)},h.prototype.sqrt=function T(K){if(K.isZero())return K.clone();var U=this.m.andln(3);if(Z(U%2===1),U===3){var W=this.m.add(new q(1)).iushrn(2);return this.pow(K,W)}var V=this.m.subn(1),N=0;while(!V.isZero()&&V.andln(1)===0)N++,V.iushrn(1);Z(!V.isZero());var L=new q(1).toRed(this),F=L.redNeg(),R=this.m.subn(1).iushrn(1),O=this.m.bitLength();O=new q(2*O*O).toRed(this);while(this.pow(O,R).cmp(F)!==0)O.redIAdd(F);var w=this.pow(O,V),x=this.pow(K,V.addn(1).iushrn(1)),E=this.pow(K,V),v=N;while(E.cmp(L)!==0){var p=E;for(var i=0;p.cmp(L)!==0;i++)p=p.redSqr();Z(i<v);var s=this.pow(w,new q(1).iushln(v-i-1));x=x.redMul(s),w=s.redSqr(),E=E.redMul(w),v=i}return x},h.prototype.invm=function T(K){var U=K._invmp(this.m);if(U.negative!==0)return U.negative=0,this.imod(U).redNeg();else return this.imod(U)},h.prototype.pow=function T(K,U){if(U.isZero())return new q(1).toRed(this);if(U.cmpn(1)===0)return K.clone();var W=4,V=new Array(1<<W);V[0]=new q(1).toRed(this),V[1]=K;for(var N=2;N<V.length;N++)V[N]=this.mul(V[N-1],K);var L=V[0],F=0,R=0,O=U.bitLength()%26;if(O===0)O=26;for(N=U.length-1;N>=0;N--){var w=U.words[N];for(var x=O-1;x>=0;x--){var E=w>>x&1;if(L!==V[0])L=this.sqr(L);if(E===0&&F===0){R=0;continue}if(F<<=1,F|=E,R++,R!==W&&(N!==0||x!==0))continue;L=this.mul(L,V[F]),R=0,F=0}O=26}return L},h.prototype.convertTo=function T(K){var U=K.umod(this.m);return U===K?U.clone():U},h.prototype.convertFrom=function T(K){var U=K.clone();return U.red=null,U},q.mont=function T(K){return new c(K)};function c(T){if(h.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0)this.shift+=26-this.shift%26;this.r=new q(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}J(c,h),c.prototype.convertTo=function T(K){return this.imod(K.ushln(this.shift))},c.prototype.convertFrom=function T(K){var U=this.imod(K.mul(this.rinv));return U.red=null,U},c.prototype.imul=function T(K,U){if(K.isZero()||U.isZero())return K.words[0]=0,K.length=1,K;var W=K.imul(U),V=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=W.isub(V).iushrn(this.shift),L=N;if(N.cmp(this.m)>=0)L=N.isub(this.m);else if(N.cmpn(0)<0)L=N.iadd(this.m);return L._forceRed(this)},c.prototype.mul=function T(K,U){if(K.isZero()||U.isZero())return new q(0)._forceRed(this);var W=K.mul(U),V=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=W.isub(V).iushrn(this.shift),L=N;if(N.cmp(this.m)>=0)L=N.isub(this.m);else if(N.cmpn(0)<0)L=N.iadd(this.m);return L._forceRed(this)},c.prototype.invm=function T(K){var U=this.imod(K._invmp(this.m).mul(this.r2));return U._forceRed(this)}})(typeof Q==="undefined"||Q,$)}),JK0=o0(($)=>{var Q=_V(),X=oY(),Y=$;Y.define=function J(q,G){return new Z(q,G)};function Z(J,q){this.name=J,this.body=q,this.decoders={},this.encoders={}}Z.prototype._createNamed=function J(q){var G;try{G=(()=>{throw new Error("Cannot require module "+"vm");})().runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch(z){G=function(M){this._initNamed(M)}}return X(G,q),G.prototype._initNamed=function z(M){q.call(this,M)},new G(this)},Z.prototype._getDecoder=function J(q){if(q=q||"der",!this.decoders.hasOwnProperty(q))this.decoders[q]=this._createNamed(Q.decoders[q]);return this.decoders[q]},Z.prototype.decode=function J(q,G,z){return this._getDecoder(G).decode(q,z)},Z.prototype._getEncoder=function J(q){if(q=q||"der",!this.encoders.hasOwnProperty(q))this.encoders[q]=this._createNamed(Q.encoders[q]);return this.encoders[q]},Z.prototype.encode=function J(q,G,z){return this._getEncoder(G).encode(q,z)}}),qK0=o0(($)=>{var Q=oY();function X(Z){this._reporterState={obj:null,path:[],options:Z||{},errors:[]}}$.Reporter=X,X.prototype.isError=function Z(J){return J instanceof Y},X.prototype.save=function Z(){var J=this._reporterState;return{obj:J.obj,pathLen:J.path.length}},X.prototype.restore=function Z(J){var q=this._reporterState;q.obj=J.obj,q.path=q.path.slice(0,J.pathLen)},X.prototype.enterKey=function Z(J){return this._reporterState.path.push(J)},X.prototype.exitKey=function Z(J){var q=this._reporterState;q.path=q.path.slice(0,J-1)},X.prototype.leaveKey=function Z(J,q,G){var z=this._reporterState;if(this.exitKey(J),z.obj!==null)z.obj[q]=G},X.prototype.path=function Z(){return this._reporterState.path.join("/")},X.prototype.enterObject=function Z(){var J=this._reporterState,q=J.obj;return J.obj={},q},X.prototype.leaveObject=function Z(J){var q=this._reporterState,G=q.obj;return q.obj=J,G},X.prototype.error=function Z(J){var q,G=this._reporterState,z=J instanceof Y;if(z)q=J;else q=new Y(G.path.map(function(M){return"["+JSON.stringify(M)+"]"}).join(""),J.message||J,J.stack);if(!G.options.partial)throw q;if(!z)G.errors.push(q);return q},X.prototype.wrapResult=function Z(J){var q=this._reporterState;if(!q.options.partial)return J;return{result:this.isError(J)?null:J,errors:q.errors}};function Y(Z,J){this.path=Z,this.rethrow(J)}Q(Y,Error),Y.prototype.rethrow=function Z(J){if(this.message=J+" at: "+(this.path||"(shallow)"),Error.captureStackTrace)Error.captureStackTrace(this,Y);if(!this.stack)try{throw new Error(this.message)}catch(q){this.stack=q.stack}return this}}),Um=o0(($)=>{var Q=oY(),X=SV().Reporter,Y=(h8(),I$(b8)).Buffer;function Z(q,G){if(X.call(this,G),!Y.isBuffer(q)){this.error("Input not Buffer");return}this.base=q,this.offset=0,this.length=q.length}Q(Z,X),$.DecoderBuffer=Z,Z.prototype.save=function q(){return{offset:this.offset,reporter:X.prototype.save.call(this)}},Z.prototype.restore=function q(G){var z=new Z(this.base);return z.offset=G.offset,z.length=this.offset,this.offset=G.offset,X.prototype.restore.call(this,G.reporter),z},Z.prototype.isEmpty=function q(){return this.offset===this.length},Z.prototype.readUInt8=function q(G){if(this.offset+1<=this.length)return this.base.readUInt8(this.offset++,!0);else return this.error(G||"DecoderBuffer overrun")},Z.prototype.skip=function q(G,z){if(!(this.offset+G<=this.length))return this.error(z||"DecoderBuffer overrun");var M=new Z(this.base);return M._reporterState=this._reporterState,M.offset=this.offset,M.length=this.offset+G,this.offset+=G,M},Z.prototype.raw=function q(G){return this.base.slice(G?G.offset:this.offset,this.length)};function J(q,G){if(Array.isArray(q))this.length=0,this.value=q.map(function(z){if(!(z instanceof J))z=new J(z,G);return this.length+=z.length,z},this);else if(typeof q==="number"){if(!(0<=q&&q<=255))return G.error("non-byte EncoderBuffer value");this.value=q,this.length=1}else if(typeof q==="string")this.value=q,this.length=Y.byteLength(q);else if(Y.isBuffer(q))this.value=q,this.length=q.length;else return G.error("Unsupported type: "+typeof q)}$.EncoderBuffer=J,J.prototype.join=function q(G,z){if(!G)G=new Y(this.length);if(!z)z=0;if(this.length===0)return G;if(Array.isArray(this.value))this.value.forEach(function(M){M.join(G,z),z+=M.length});else{if(typeof this.value==="number")G[z]=this.value;else if(typeof this.value==="string")G.write(this.value,z);else if(Y.isBuffer(this.value))this.value.copy(G,z);z+=this.length}return G}}),GK0=o0(($,Q)=>{var X=SV().Reporter,Y=SV().EncoderBuffer,Z=SV().DecoderBuffer,J=J7(),q=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],G=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(q),z=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function M(P,D){var A={};if(this._baseState=A,A.enc=P,A.parent=D||null,A.children=null,A.tag=null,A.args=null,A.reverseArgs=null,A.choice=null,A.optional=!1,A.any=!1,A.obj=!1,A.use=null,A.useDecoder=null,A.key=null,A.default=null,A.explicit=null,A.implicit=null,A.contains=null,!A.parent)A.children=[],this._wrap()}Q.exports=M;var j=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];M.prototype.clone=function P(){var D=this._baseState,A={};j.forEach(function(H){A[H]=D[H]});var I=new this.constructor(A.parent);return I._baseState=A,I},M.prototype._wrap=function P(){var D=this._baseState;G.forEach(function(A){this[A]=function I(){var H=new this.constructor(this);return D.children.push(H),H[A].apply(H,arguments)}},this)},M.prototype._init=function P(D){var A=this._baseState;J(A.parent===null),D.call(this),A.children=A.children.filter(function(I){return I._baseState.parent===this},this),J.equal(A.children.length,1,"Root node can have only one child")},M.prototype._useArgs=function P(D){var A=this._baseState,I=D.filter(function(H){return H instanceof this.constructor},this);if(D=D.filter(function(H){return!(H instanceof this.constructor)},this),I.length!==0)J(A.children===null),A.children=I,I.forEach(function(H){H._baseState.parent=this},this);if(D.length!==0)J(A.args===null),A.args=D,A.reverseArgs=D.map(function(H){if(typeof H!=="object"||H.constructor!==Object)return H;var C={};return Object.keys(H).forEach(function(B){if(B==(B|0))B|=0;var S=H[B];C[S]=B}),C})},z.forEach(function(P){M.prototype[P]=function D(){var A=this._baseState;throw new Error(P+" not implemented for encoding: "+A.enc)}}),q.forEach(function(P){M.prototype[P]=function D(){var A=this._baseState,I=Array.prototype.slice.call(arguments);return J(A.tag===null),A.tag=P,this._useArgs(I),this}}),M.prototype.use=function P(D){J(D);var A=this._baseState;return J(A.use===null),A.use=D,this},M.prototype.optional=function P(){var D=this._baseState;return D.optional=!0,this},M.prototype.def=function P(D){var A=this._baseState;return J(A.default===null),A.default=D,A.optional=!0,this},M.prototype.explicit=function P(D){var A=this._baseState;return J(A.explicit===null&&A.implicit===null),A.explicit=D,this},M.prototype.implicit=function P(D){var A=this._baseState;return J(A.explicit===null&&A.implicit===null),A.implicit=D,this},M.prototype.obj=function P(){var D=this._baseState,A=Array.prototype.slice.call(arguments);if(D.obj=!0,A.length!==0)this._useArgs(A);return this},M.prototype.key=function P(D){var A=this._baseState;return J(A.key===null),A.key=D,this},M.prototype.any=function P(){var D=this._baseState;return D.any=!0,this},M.prototype.choice=function P(D){var A=this._baseState;return J(A.choice===null),A.choice=D,this._useArgs(Object.keys(D).map(function(I){return D[I]})),this},M.prototype.contains=function P(D){var A=this._baseState;return J(A.use===null),A.contains=D,this},M.prototype._decode=function P(D,A){var I=this._baseState;if(I.parent===null)return D.wrapResult(I.children[0]._decode(D,A));var H=I.default,C=!0,B=null;if(I.key!==null)B=D.enterKey(I.key);if(I.optional){var S=null;if(I.explicit!==null)S=I.explicit;else if(I.implicit!==null)S=I.implicit;else if(I.tag!==null)S=I.tag;if(S===null&&!I.any){var _=D.save();try{if(I.choice===null)this._decodeGeneric(I.tag,D,A);else this._decodeChoice(D,A);C=!0}catch(l){C=!1}D.restore(_)}else if(C=this._peekTag(D,S,I.any),D.isError(C))return C}var k;if(I.obj&&C)k=D.enterObject();if(C){if(I.explicit!==null){var f=this._decodeTag(D,I.explicit);if(D.isError(f))return f;D=f}var g=D.offset;if(I.use===null&&I.choice===null){if(I.any)var _=D.save();var b=this._decodeTag(D,I.implicit!==null?I.implicit:I.tag,I.any);if(D.isError(b))return b;if(I.any)H=D.raw(_);else D=b}if(A&&A.track&&I.tag!==null)A.track(D.path(),g,D.length,"tagged");if(A&&A.track&&I.tag!==null)A.track(D.path(),D.offset,D.length,"content");if(I.any)H=H;else if(I.choice===null)H=this._decodeGeneric(I.tag,D,A);else H=this._decodeChoice(D,A);if(D.isError(H))return H;if(!I.any&&I.choice===null&&I.children!==null)I.children.forEach(function l(h){h._decode(D,A)});if(I.contains&&(I.tag==="octstr"||I.tag==="bitstr")){var m=new Z(H);H=this._getUse(I.contains,D._reporterState.obj)._decode(m,A)}}if(I.obj&&C)H=D.leaveObject(k);if(I.key!==null&&(H!==null||C===!0))D.leaveKey(B,I.key,H);else if(B!==null)D.exitKey(B);return H},M.prototype._decodeGeneric=function P(D,A,I){var H=this._baseState;if(D==="seq"||D==="set")return null;if(D==="seqof"||D==="setof")return this._decodeList(A,D,H.args[0],I);else if(/str$/.test(D))return this._decodeStr(A,D,I);else if(D==="objid"&&H.args)return this._decodeObjid(A,H.args[0],H.args[1],I);else if(D==="objid")return this._decodeObjid(A,null,null,I);else if(D==="gentime"||D==="utctime")return this._decodeTime(A,D,I);else if(D==="null_")return this._decodeNull(A,I);else if(D==="bool")return this._decodeBool(A,I);else if(D==="objDesc")return this._decodeStr(A,D,I);else if(D==="int"||D==="enum")return this._decodeInt(A,H.args&&H.args[0],I);if(H.use!==null)return this._getUse(H.use,A._reporterState.obj)._decode(A,I);else return A.error("unknown tag: "+D)},M.prototype._getUse=function P(D,A){var I=this._baseState;if(I.useDecoder=this._use(D,A),J(I.useDecoder._baseState.parent===null),I.useDecoder=I.useDecoder._baseState.children[0],I.implicit!==I.useDecoder._baseState.implicit)I.useDecoder=I.useDecoder.clone(),I.useDecoder._baseState.implicit=I.implicit;return I.useDecoder},M.prototype._decodeChoice=function P(D,A){var I=this._baseState,H=null,C=!1;if(Object.keys(I.choice).some(function(B){var S=D.save(),_=I.choice[B];try{var k=_._decode(D,A);if(D.isError(k))return!1;H={type:B,value:k},C=!0}catch(f){return D.restore(S),!1}return!0},this),!C)return D.error("Choice not matched");return H},M.prototype._createEncoderBuffer=function P(D){return new Y(D,this.reporter)},M.prototype._encode=function P(D,A,I){var H=this._baseState;if(H.default!==null&&H.default===D)return;var C=this._encodeValue(D,A,I);if(C===void 0)return;if(this._skipDefault(C,A,I))return;return C},M.prototype._encodeValue=function P(D,A,I){var H=this._baseState;if(H.parent===null)return H.children[0]._encode(D,A||new X);var _=null;if(this.reporter=A,H.optional&&D===void 0)if(H.default!==null)D=H.default;else return;var C=null,B=!1;if(H.any)_=this._createEncoderBuffer(D);else if(H.choice)_=this._encodeChoice(D,A);else if(H.contains)C=this._getUse(H.contains,I)._encode(D,A),B=!0;else if(H.children)C=H.children.map(function(g){if(g._baseState.tag==="null_")return g._encode(null,A,D);if(g._baseState.key===null)return A.error("Child should have a key");var b=A.enterKey(g._baseState.key);if(typeof D!=="object")return A.error("Child expected, but input is not object");var m=g._encode(D[g._baseState.key],A,D);return A.leaveKey(b),m},this).filter(function(g){return g}),C=this._createEncoderBuffer(C);else if(H.tag==="seqof"||H.tag==="setof"){if(!(H.args&&H.args.length===1))return A.error("Too many args for : "+H.tag);if(!Array.isArray(D))return A.error("seqof/setof, but data is not Array");var S=this.clone();S._baseState.implicit=null,C=this._createEncoderBuffer(D.map(function(g){var b=this._baseState;return this._getUse(b.args[0],D)._encode(g,A)},S))}else if(H.use!==null)_=this._getUse(H.use,I)._encode(D,A);else C=this._encodePrimitive(H.tag,D),B=!0;var _;if(!H.any&&H.choice===null){var k=H.implicit!==null?H.implicit:H.tag,f=H.implicit===null?"universal":"context";if(k===null){if(H.use===null)A.error("Tag could be omitted only for .use()")}else if(H.use===null)_=this._encodeComposite(k,B,f,C)}if(H.explicit!==null)_=this._encodeComposite(H.explicit,!1,"context",_);return _},M.prototype._encodeChoice=function P(D,A){var I=this._baseState,H=I.choice[D.type];if(!H)J(!1,D.type+" not found in "+JSON.stringify(Object.keys(I.choice)));return H._encode(D.value,A)},M.prototype._encodePrimitive=function P(D,A){var I=this._baseState;if(/str$/.test(D))return this._encodeStr(A,D);else if(D==="objid"&&I.args)return this._encodeObjid(A,I.reverseArgs[0],I.args[1]);else if(D==="objid")return this._encodeObjid(A,null,null);else if(D==="gentime"||D==="utctime")return this._encodeTime(A,D);else if(D==="null_")return this._encodeNull();else if(D==="int"||D==="enum")return this._encodeInt(A,I.args&&I.reverseArgs[0]);else if(D==="bool")return this._encodeBool(A);else if(D==="objDesc")return this._encodeStr(A,D);else throw new Error("Unsupported tag: "+D)},M.prototype._isNumstr=function P(D){return/^[0-9 ]*$/.test(D)},M.prototype._isPrintstr=function P(D){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(D)}}),SV=o0(($)=>{var Q=$;Q.Reporter=qK0().Reporter,Q.DecoderBuffer=Um().DecoderBuffer,Q.EncoderBuffer=Um().EncoderBuffer,Q.Node=GK0()}),zK0=o0(($)=>{var Q=Am();$.tagClass={0:"universal",1:"application",2:"context",3:"private"},$.tagClassByName=Q._reverse($.tagClass),$.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},$.tagByName=Q._reverse($.tag)}),Am=o0(($)=>{var Q=$;Q._reverse=function X(Y){var Z={};return Object.keys(Y).forEach(function(J){if((J|0)==J)J=J|0;var q=Y[J];Z[q]=J}),Z},Q.der=zK0()}),Rm=o0(($,Q)=>{var X=oY(),Y=_V(),Z=Y.base,J=Y.bignum,q=Y.constants.der;function G(P){this.enc="der",this.name=P.name,this.entity=P,this.tree=new z,this.tree._init(P.body)}Q.exports=G,G.prototype.decode=function P(D,A){if(!(D instanceof Z.DecoderBuffer))D=new Z.DecoderBuffer(D,A);return this.tree._decode(D,A)};function z(P){Z.Node.call(this,"der",P)}X(z,Z.Node),z.prototype._peekTag=function P(D,A,I){if(D.isEmpty())return!1;var H=D.save(),C=M(D,'Failed to peek tag: "'+A+'"');if(D.isError(C))return C;return D.restore(H),C.tag===A||C.tagStr===A||C.tagStr+"of"===A||I},z.prototype._decodeTag=function P(D,A,I){var H=M(D,'Failed to decode tag of "'+A+'"');if(D.isError(H))return H;var C=j(D,H.primitive,'Failed to get length of "'+A+'"');if(D.isError(C))return C;if(!I&&H.tag!==A&&H.tagStr!==A&&H.tagStr+"of"!==A)return D.error('Failed to match tag: "'+A+'"');if(H.primitive||C!==null)return D.skip(C,'Failed to match body of: "'+A+'"');var B=D.save(),S=this._skipUntilEnd(D,'Failed to skip indefinite length body: "'+this.tag+'"');if(D.isError(S))return S;return C=D.offset-B.offset,D.restore(B),D.skip(C,'Failed to match body of: "'+A+'"')},z.prototype._skipUntilEnd=function P(D,A){while(!0){var I=M(D,A);if(D.isError(I))return I;var H=j(D,I.primitive,A);if(D.isError(H))return H;var C;if(I.primitive||H!==null)C=D.skip(H);else C=this._skipUntilEnd(D,A);if(D.isError(C))return C;if(I.tagStr==="end")break}},z.prototype._decodeList=function P(D,A,I,H){var C=[];while(!D.isEmpty()){var B=this._peekTag(D,"end");if(D.isError(B))return B;var S=I.decode(D,"der",H);if(D.isError(S)&&B)break;C.push(S)}return C},z.prototype._decodeStr=function P(D,A){if(A==="bitstr"){var I=D.readUInt8();if(D.isError(I))return I;return{unused:I,data:D.raw()}}else if(A==="bmpstr"){var H=D.raw();if(H.length%2===1)return D.error("Decoding of string type: bmpstr length mismatch");var C="";for(var B=0;B<H.length/2;B++)C+=String.fromCharCode(H.readUInt16BE(B*2));return C}else if(A==="numstr"){var S=D.raw().toString("ascii");if(!this._isNumstr(S))return D.error("Decoding of string type: numstr unsupported characters");return S}else if(A==="octstr")return D.raw();else if(A==="objDesc")return D.raw();else if(A==="printstr"){var _=D.raw().toString("ascii");if(!this._isPrintstr(_))return D.error("Decoding of string type: printstr unsupported characters");return _}else if(/str$/.test(A))return D.raw().toString();else return D.error("Decoding of string type: "+A+" unsupported")},z.prototype._decodeObjid=function P(D,A,I){var H,C=[],B=0;while(!D.isEmpty()){var S=D.readUInt8();if(B<<=7,B|=S&127,(S&128)===0)C.push(B),B=0}if(S&128)C.push(B);var _=C[0]/40|0,k=C[0]%40;if(I)H=C;else H=[_,k].concat(C.slice(1));if(A){var f=A[H.join(" ")];if(f===void 0)f=A[H.join(".")];if(f!==void 0)H=f}return H},z.prototype._decodeTime=function P(D,A){var I=D.raw().toString();if(A==="gentime")var H=I.slice(0,4)|0,C=I.slice(4,6)|0,B=I.slice(6,8)|0,S=I.slice(8,10)|0,_=I.slice(10,12)|0,k=I.slice(12,14)|0;else if(A==="utctime"){var H=I.slice(0,2)|0,C=I.slice(2,4)|0,B=I.slice(4,6)|0,S=I.slice(6,8)|0,_=I.slice(8,10)|0,k=I.slice(10,12)|0;if(H<70)H=2000+H;else H=1900+H}else return D.error("Decoding "+A+" time is not supported yet");return Date.UTC(H,C-1,B,S,_,k,0)},z.prototype._decodeNull=function P(D){return null},z.prototype._decodeBool=function P(D){var A=D.readUInt8();if(D.isError(A))return A;else return A!==0},z.prototype._decodeInt=function P(D,A){var I=D.raw(),H=new J(I);if(A)H=A[H.toString(10)]||H;return H},z.prototype._use=function P(D,A){if(typeof D==="function")D=D(A);return D._getDecoder("der").tree};function M(P,D){var A=P.readUInt8(D);if(P.isError(A))return A;var I=q.tagClass[A>>6],H=(A&32)===0;if((A&31)===31){var C=A;A=0;while((C&128)===128){if(C=P.readUInt8(D),P.isError(C))return C;A<<=7,A|=C&127}}else A&=31;var B=q.tag[A];return{cls:I,primitive:H,tag:A,tagStr:B}}function j(P,D,A){var I=P.readUInt8(A);if(P.isError(I))return I;if(!D&&I===128)return null;if((I&128)===0)return I;var H=I&127;if(H>4)return P.error("length octect is too long");I=0;for(var C=0;C<H;C++){I<<=8;var B=P.readUInt8(A);if(P.isError(B))return B;I|=B}return I}}),KK0=o0(($,Q)=>{var X=oY(),Y=(h8(),I$(b8)).Buffer,Z=Rm();function J(q){Z.call(this,q),this.enc="pem"}X(J,Z),Q.exports=J,J.prototype.decode=function q(G,z){var M=G.toString().split(/[\r\n]+/g),j=z.label.toUpperCase(),P=/^-----(BEGIN|END) ([^-]+)-----$/,D=-1,A=-1;for(var I=0;I<M.length;I++){var H=M[I].match(P);if(H===null)continue;if(H[2]!==j)continue;if(D===-1){if(H[1]!=="BEGIN")break;D=I}else{if(H[1]!=="END")break;A=I;break}}if(D===-1||A===-1)throw new Error("PEM section not found for: "+j);var C=M.slice(D+1,A).join("");C.replace(/[^a-z0-9\+\/=]+/gi,"");var B=new Y(C,"base64");return Z.prototype.decode.call(this,B,z)}}),UK0=o0(($)=>{var Q=$;Q.der=Rm(),Q.pem=KK0()}),Cm=o0(($,Q)=>{var X=oY(),Y=(h8(),I$(b8)).Buffer,Z=_V(),J=Z.base,q=Z.constants.der;function G(P){this.enc="der",this.name=P.name,this.entity=P,this.tree=new z,this.tree._init(P.body)}Q.exports=G,G.prototype.encode=function P(D,A){return this.tree._encode(D,A).join()};function z(P){J.Node.call(this,"der",P)}X(z,J.Node),z.prototype._encodeComposite=function P(D,A,I,H){var C=j(D,A,I,this.reporter);if(H.length<128){var _=new Y(2);return _[0]=C,_[1]=H.length,this._createEncoderBuffer([_,H])}var B=1;for(var S=H.length;S>=256;S>>=8)B++;var _=new Y(2+B);_[0]=C,_[1]=128|B;for(var S=1+B,k=H.length;k>0;S--,k>>=8)_[S]=k&255;return this._createEncoderBuffer([_,H])},z.prototype._encodeStr=function P(D,A){if(A==="bitstr")return this._createEncoderBuffer([D.unused|0,D.data]);else if(A==="bmpstr"){var I=new Y(D.length*2);for(var H=0;H<D.length;H++)I.writeUInt16BE(D.charCodeAt(H),H*2);return this._createEncoderBuffer(I)}else if(A==="numstr"){if(!this._isNumstr(D))return this.reporter.error("Encoding of string type: numstr supports only digits and space");return this._createEncoderBuffer(D)}else if(A==="printstr"){if(!this._isPrintstr(D))return this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark");return this._createEncoderBuffer(D)}else if(/str$/.test(A))return this._createEncoderBuffer(D);else if(A==="objDesc")return this._createEncoderBuffer(D);else return this.reporter.error("Encoding of string type: "+A+" unsupported")},z.prototype._encodeObjid=function P(D,A,I){if(typeof D==="string"){if(!A)return this.reporter.error("string objid given, but no values map found");if(!A.hasOwnProperty(D))return this.reporter.error("objid not found in values map");D=A[D].split(/[\s\.]+/g);for(var H=0;H<D.length;H++)D[H]|=0}else if(Array.isArray(D)){D=D.slice();for(var H=0;H<D.length;H++)D[H]|=0}if(!Array.isArray(D))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(D));if(!I){if(D[1]>=40)return this.reporter.error("Second objid identifier OOB");D.splice(0,2,D[0]*40+D[1])}var C=0;for(var H=0;H<D.length;H++){var B=D[H];for(C++;B>=128;B>>=7)C++}var S=new Y(C),_=S.length-1;for(var H=D.length-1;H>=0;H--){var B=D[H];S[_--]=B&127;while((B>>=7)>0)S[_--]=128|B&127}return this._createEncoderBuffer(S)};function M(P){if(P<10)return"0"+P;else return P}z.prototype._encodeTime=function P(D,A){var I,H=new Date(D);if(A==="gentime")I=[M(H.getFullYear()),M(H.getUTCMonth()+1),M(H.getUTCDate()),M(H.getUTCHours()),M(H.getUTCMinutes()),M(H.getUTCSeconds()),"Z"].join("");else if(A==="utctime")I=[M(H.getFullYear()%100),M(H.getUTCMonth()+1),M(H.getUTCDate()),M(H.getUTCHours()),M(H.getUTCMinutes()),M(H.getUTCSeconds()),"Z"].join("");else this.reporter.error("Encoding "+A+" time is not supported yet");return this._encodeStr(I,"octstr")},z.prototype._encodeNull=function P(){return this._createEncoderBuffer("")},z.prototype._encodeInt=function P(D,A){if(typeof D==="string"){if(!A)return this.reporter.error("String int or enum given, but no values map");if(!A.hasOwnProperty(D))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(D));D=A[D]}if(typeof D!=="number"&&!Y.isBuffer(D)){var I=D.toArray();if(!D.sign&&I[0]&128)I.unshift(0);D=new Y(I)}if(Y.isBuffer(D)){var H=D.length;if(D.length===0)H++;var B=new Y(H);if(D.copy(B),D.length===0)B[0]=0;return this._createEncoderBuffer(B)}if(D<128)return this._createEncoderBuffer(D);if(D<256)return this._createEncoderBuffer([0,D]);var H=1;for(var C=D;C>=256;C>>=8)H++;var B=new Array(H);for(var C=B.length-1;C>=0;C--)B[C]=D&255,D>>=8;if(B[0]&128)B.unshift(0);return this._createEncoderBuffer(new Y(B))},z.prototype._encodeBool=function P(D){return this._createEncoderBuffer(D?255:0)},z.prototype._use=function P(D,A){if(typeof D==="function")D=D(A);return D._getEncoder("der").tree},z.prototype._skipDefault=function P(D,A,I){var H=this._baseState,C;if(H.default===null)return!1;var B=D.join();if(H.defaultBuffer===void 0)H.defaultBuffer=this._encodeValue(H.default,A,I).join();if(B.length!==H.defaultBuffer.length)return!1;for(C=0;C<B.length;C++)if(B[C]!==H.defaultBuffer[C])return!1;return!0};function j(P,D,A,I){var H;if(P==="seqof")P="seq";else if(P==="setof")P="set";if(q.tagByName.hasOwnProperty(P))H=q.tagByName[P];else if(typeof P==="number"&&(P|0)===P)H=P;else return I.error("Unknown tag: "+P);if(H>=31)return I.error("Multi-octet tag encoding unsupported");if(!D)H|=32;return H|=q.tagClassByName[A||"universal"]<<6,H}}),WK0=o0(($,Q)=>{var X=oY(),Y=Cm();function Z(J){Y.call(this,J),this.enc="pem"}X(Z,Y),Q.exports=Z,Z.prototype.encode=function J(q,G){var z=Y.prototype.encode.call(this,q),M=z.toString("base64"),j=["-----BEGIN "+G.label+"-----"];for(var P=0;P<M.length;P+=64)j.push(M.slice(P,P+64));return j.push("-----END "+G.label+"-----"),j.join(`
`)}}),VK0=o0(($)=>{var Q=$;Q.der=Cm(),Q.pem=WK0()}),_V=o0(($)=>{var Q=$;Q.bignum=ZK0(),Q.define=JK0().define,Q.base=SV(),Q.constants=Am(),Q.decoders=UK0(),Q.encoders=VK0()}),OK0=o0(($,Q)=>{var X=_V(),Y=X.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),Z=X.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),J=X.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),q=X.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(J),this.key("subjectPublicKey").bitstr())}),G=X.define("RelativeDistinguishedName",function(){this.setof(Z)}),z=X.define("RDNSequence",function(){this.seqof(G)}),M=X.define("Name",function(){this.choice({rdnSequence:this.use(z)})}),j=X.define("Validity",function(){this.seq().obj(this.key("notBefore").use(Y),this.key("notAfter").use(Y))}),P=X.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),D=X.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(J),this.key("issuer").use(M),this.key("validity").use(j),this.key("subject").use(M),this.key("subjectPublicKeyInfo").use(q),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(P).optional())}),A=X.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(D),this.key("signatureAlgorithm").use(J),this.key("signatureValue").bitstr())});Q.exports=A}),MK0=o0(($)=>{var Q=_V();$.certificate=OK0();var X=Q.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});$.RSAPrivateKey=X;var Y=Q.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});$.RSAPublicKey=Y;var Z=Q.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),J=Q.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(Z),this.key("subjectPublicKey").bitstr())});$.PublicKey=J;var q=Q.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(Z),this.key("subjectPrivateKey").octstr())});$.PrivateKey=q;var G=Q.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});$.EncryptedPrivateKey=G;var z=Q.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});$.DSAPrivateKey=z,$.DSAparam=Q.define("DSAparam",function(){this.int()});var M=Q.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),j=Q.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(M),this.key("publicKey").optional().explicit(1).bitstr())});$.ECPrivateKey=j,$.signature=Q.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})}),DK0=o0(($,Q)=>{Q.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}}),jK0=o0(($,Q)=>{var X=_Y().Buffer,Y=xw().Transform,Z=oY();function J(M){Y.call(this),this._block=X.allocUnsafe(M),this._blockSize=M,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}Z(J,Y),J.prototype._transform=function(M,j,P){var D=null;try{this.update(M,j)}catch(A){D=A}P(D)},J.prototype._flush=function(M){var j=null;try{this.push(this.digest())}catch(P){j=P}M(j)};var q=typeof Uint8Array!=="undefined",G=typeof ArrayBuffer!=="undefined"&&typeof Uint8Array!=="undefined"&&ArrayBuffer.isView&&(X.prototype instanceof Uint8Array||X.TYPED_ARRAY_SUPPORT);function z(M,j){if(M instanceof X)return M;if(typeof M==="string")return X.from(M,j);if(G&&ArrayBuffer.isView(M)){if(M.byteLength===0)return X.alloc(0);var P=X.from(M.buffer,M.byteOffset,M.byteLength);if(P.byteLength===M.byteLength)return P}if(q&&M instanceof Uint8Array)return X.from(M);if(X.isBuffer(M)&&M.constructor&&typeof M.constructor.isBuffer==="function"&&M.constructor.isBuffer(M))return X.from(M);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}J.prototype.update=function(M,j){if(this._finalized)throw new Error("Digest already called");M=z(M,j);var P=this._block,D=0;while(this._blockOffset+M.length-D>=this._blockSize){for(var A=this._blockOffset;A<this._blockSize;)P[A++]=M[D++];this._update(),this._blockOffset=0}while(D<M.length)P[this._blockOffset++]=M[D++];for(var I=0,H=M.length*8;H>0;++I)if(this._length[I]+=H,H=this._length[I]/4294967296|0,H>0)this._length[I]-=4294967296*H;return this},J.prototype._update=function(){throw new Error("_update is not implemented")},J.prototype.digest=function(M){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var j=this._digest();if(M!==void 0)j=j.toString(M);this._block.fill(0),this._blockOffset=0;for(var P=0;P<4;++P)this._length[P]=0;return j},J.prototype._digest=function(){throw new Error("_digest is not implemented")},Q.exports=J}),PK0=o0(($,Q)=>{var X=oY(),Y=jK0(),Z=_Y().Buffer,J=new Array(16);function q(){Y.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}X(q,Y),q.prototype._update=function(){var D=J;for(var A=0;A<16;++A)D[A]=this._block.readInt32LE(A*4);var I=this._a,H=this._b,C=this._c,B=this._d;I=z(I,H,C,B,D[0],3614090360,7),B=z(B,I,H,C,D[1],3905402710,12),C=z(C,B,I,H,D[2],606105819,17),H=z(H,C,B,I,D[3],3250441966,22),I=z(I,H,C,B,D[4],4118548399,7),B=z(B,I,H,C,D[5],1200080426,12),C=z(C,B,I,H,D[6],2821735955,17),H=z(H,C,B,I,D[7],4249261313,22),I=z(I,H,C,B,D[8],1770035416,7),B=z(B,I,H,C,D[9],2336552879,12),C=z(C,B,I,H,D[10],4294925233,17),H=z(H,C,B,I,D[11],2304563134,22),I=z(I,H,C,B,D[12],1804603682,7),B=z(B,I,H,C,D[13],4254626195,12),C=z(C,B,I,H,D[14],2792965006,17),H=z(H,C,B,I,D[15],1236535329,22),I=M(I,H,C,B,D[1],4129170786,5),B=M(B,I,H,C,D[6],3225465664,9),C=M(C,B,I,H,D[11],643717713,14),H=M(H,C,B,I,D[0],3921069994,20),I=M(I,H,C,B,D[5],3593408605,5),B=M(B,I,H,C,D[10],38016083,9),C=M(C,B,I,H,D[15],3634488961,14),H=M(H,C,B,I,D[4],3889429448,20),I=M(I,H,C,B,D[9],568446438,5),B=M(B,I,H,C,D[14],3275163606,9),C=M(C,B,I,H,D[3],4107603335,14),H=M(H,C,B,I,D[8],1163531501,20),I=M(I,H,C,B,D[13],2850285829,5),B=M(B,I,H,C,D[2],4243563512,9),C=M(C,B,I,H,D[7],1735328473,14),H=M(H,C,B,I,D[12],2368359562,20),I=j(I,H,C,B,D[5],4294588738,4),B=j(B,I,H,C,D[8],2272392833,11),C=j(C,B,I,H,D[11],1839030562,16),H=j(H,C,B,I,D[14],4259657740,23),I=j(I,H,C,B,D[1],2763975236,4),B=j(B,I,H,C,D[4],1272893353,11),C=j(C,B,I,H,D[7],4139469664,16),H=j(H,C,B,I,D[10],3200236656,23),I=j(I,H,C,B,D[13],681279174,4),B=j(B,I,H,C,D[0],3936430074,11),C=j(C,B,I,H,D[3],3572445317,16),H=j(H,C,B,I,D[6],76029189,23),I=j(I,H,C,B,D[9],3654602809,4),B=j(B,I,H,C,D[12],3873151461,11),C=j(C,B,I,H,D[15],530742520,16),H=j(H,C,B,I,D[2],3299628645,23),I=P(I,H,C,B,D[0],4096336452,6),B=P(B,I,H,C,D[7],1126891415,10),C=P(C,B,I,H,D[14],2878612391,15),H=P(H,C,B,I,D[5],4237533241,21),I=P(I,H,C,B,D[12],1700485571,6),B=P(B,I,H,C,D[3],2399980690,10),C=P(C,B,I,H,D[10],4293915773,15),H=P(H,C,B,I,D[1],2240044497,21),I=P(I,H,C,B,D[8],1873313359,6),B=P(B,I,H,C,D[15],4264355552,10),C=P(C,B,I,H,D[6],2734768916,15),H=P(H,C,B,I,D[13],1309151649,21),I=P(I,H,C,B,D[4],4149444226,6),B=P(B,I,H,C,D[11],3174756917,10),C=P(C,B,I,H,D[2],718787259,15),H=P(H,C,B,I,D[9],3951481745,21),this._a=this._a+I|0,this._b=this._b+H|0,this._c=this._c+C|0,this._d=this._d+B|0},q.prototype._digest=function(){if(this._block[this._blockOffset++]=128,this._blockOffset>56)this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0;this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var D=Z.allocUnsafe(16);return D.writeInt32LE(this._a,0),D.writeInt32LE(this._b,4),D.writeInt32LE(this._c,8),D.writeInt32LE(this._d,12),D};function G(D,A){return D<<A|D>>>32-A}function z(D,A,I,H,C,B,S){return G(D+(A&I|~A&H)+C+B|0,S)+A|0}function M(D,A,I,H,C,B,S){return G(D+(A&H|I&~H)+C+B|0,S)+A|0}function j(D,A,I,H,C,B,S){return G(D+(A^I^H)+C+B|0,S)+A|0}function P(D,A,I,H,C,B,S){return G(D+(I^(A|~H))+C+B|0,S)+A|0}Q.exports=q}),HK0=o0(($,Q)=>{var X=_Y().Buffer,Y=PK0();function Z(J,q,G,z){if(!X.isBuffer(J))J=X.from(J,"binary");if(q){if(!X.isBuffer(q))q=X.from(q,"binary");if(q.length!==8)throw new RangeError("salt should be Buffer with 8 byte length")}var M=G/8,j=X.alloc(M),P=X.alloc(z||0),D=X.alloc(0);while(M>0||z>0){var A=new Y;if(A.update(D),A.update(J),q)A.update(q);D=A.digest();var I=0;if(M>0){var H=j.length-M;I=Math.min(M,D.length),D.copy(j,H,0,I),M-=I}if(I<D.length&&z>0){var C=P.length-z,B=Math.min(z,D.length-I);D.copy(P,C,I,I+B),z-=B}}return D.fill(0),{key:j,iv:P}}Q.exports=Z}),Lm=o0(($)=>{var Q=(QY(),I$($Y));$.createCipher=$.Cipher=Q.createCipher,$.createCipheriv=$.Cipheriv=Q.createCipheriv,$.createDecipher=$.Decipher=Q.createDecipher,$.createDecipheriv=$.Decipheriv=Q.createDecipheriv,$.listCiphers=$.getCiphers=Q.getCiphers}),NK0=o0(($,Q)=>{var X=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,Y=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,Z=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,J=HK0(),q=Lm(),G=_Y().Buffer;Q.exports=function(z,M){var j=z.toString(),P=j.match(X),D;if(!P){var A=j.match(Z);D=G.from(A[2].replace(/[\r\n]/g,""),"base64")}else{var I="aes"+P[1],H=G.from(P[2],"hex"),C=G.from(P[3].replace(/[\r\n]/g,""),"base64"),B=J(M,H.slice(0,8),parseInt(P[1],10)).key,S=[],_=q.createDecipheriv(I,B,H);S.push(_.update(C)),S.push(_.final()),D=G.concat(S)}var k=j.match(Y)[1];return{tag:k,data:D}}}),wm=o0(($,Q)=>{var X=MK0(),Y=DK0(),Z=NK0(),J=Lm(),q=Om(),G=_Y().Buffer;function z(j,P){var D=j.algorithm.decrypt.kde.kdeparams.salt,A=parseInt(j.algorithm.decrypt.kde.kdeparams.iters.toString(),10),I=Y[j.algorithm.decrypt.cipher.algo.join(".")],H=j.algorithm.decrypt.cipher.iv,C=j.subjectPrivateKey,B=parseInt(I.split("-")[1],10)/8,S=q.pbkdf2Sync(P,D,A,B,"sha1"),_=J.createDecipheriv(I,S,H),k=[];return k.push(_.update(C)),k.push(_.final()),G.concat(k)}function M(j){var P;if(typeof j==="object"&&!G.isBuffer(j))P=j.passphrase,j=j.key;if(typeof j==="string")j=G.from(j);var D=Z(j,P),A=D.tag,I=D.data,H,C;switch(A){case"CERTIFICATE":C=X.certificate.decode(I,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":if(!C)C=X.PublicKey.decode(I,"der");switch(H=C.algorithm.algorithm.join("."),H){case"1.2.840.113549.1.1.1":return X.RSAPublicKey.decode(C.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return C.subjectPrivateKey=C.subjectPublicKey,{type:"ec",data:C};case"1.2.840.10040.4.1":return C.algorithm.params.pub_key=X.DSAparam.decode(C.subjectPublicKey.data,"der"),{type:"dsa",data:C.algorithm.params};default:throw new Error("unknown key id "+H)}case"ENCRYPTED PRIVATE KEY":I=X.EncryptedPrivateKey.decode(I,"der"),I=z(I,P);case"PRIVATE KEY":switch(C=X.PrivateKey.decode(I,"der"),H=C.algorithm.algorithm.join("."),H){case"1.2.840.113549.1.1.1":return X.RSAPrivateKey.decode(C.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:C.algorithm.curve,privateKey:X.ECPrivateKey.decode(C.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return C.algorithm.params.priv_key=X.DSAparam.decode(C.subjectPrivateKey,"der"),{type:"dsa",params:C.algorithm.params};default:throw new Error("unknown key id "+H)}case"RSA PUBLIC KEY":return X.RSAPublicKey.decode(I,"der");case"RSA PRIVATE KEY":return X.RSAPrivateKey.decode(I,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:X.DSAPrivateKey.decode(I,"der")};case"EC PRIVATE KEY":return I=X.ECPrivateKey.decode(I,"der"),{curve:I.parameters.value,privateKey:I.privateKey};default:throw new Error("unknown key type "+A)}}M.signature=X.signature,Q.exports=M}),Tm=o0(($,Q)=>{var X=XH(),Y=_Y().Buffer;Q.exports=function(J,q){var G=Y.alloc(0),z=0,M;while(G.length<q)M=Z(z++),G=Y.concat([G,X("sha1").update(J).update(M).digest()]);return G.slice(0,q)};function Z(J){var q=Y.allocUnsafe(4);return q.writeUInt32BE(J,0),q}}),Im=o0(($,Q)=>{Q.exports=function X(Y,Z){var J=Y.length,q=-1;while(++q<J)Y[q]^=Z[q];return Y}}),mw=o0(($,Q)=>{(function(X,Y){function Z(T,K){if(!T)throw new Error(K||"Assertion failed")}function J(T,K){T.super_=K;var U=function(){};U.prototype=K.prototype,T.prototype=new U,T.prototype.constructor=T}function q(T,K,U){if(q.isBN(T))return T;if(this.negative=0,this.words=null,this.length=0,this.red=null,T!==null){if(K==="le"||K==="be")U=K,K=10;this._init(T||0,K||10,U||"be")}}if(typeof X==="object")X.exports=q;else Y.BN=q;q.BN=q,q.wordSize=26;var G;try{if(typeof window!=="undefined"&&typeof window.Buffer!=="undefined")G=window.Buffer;else G=(h8(),I$(b8)).Buffer}catch(T){}q.isBN=function T(K){if(K instanceof q)return!0;return K!==null&&typeof K==="object"&&K.constructor.wordSize===q.wordSize&&Array.isArray(K.words)},q.max=function T(K,U){if(K.cmp(U)>0)return K;return U},q.min=function T(K,U){if(K.cmp(U)<0)return K;return U},q.prototype._init=function T(K,U,W){if(typeof K==="number")return this._initNumber(K,U,W);if(typeof K==="object")return this._initArray(K,U,W);if(U==="hex")U=16;Z(U===(U|0)&&U>=2&&U<=36),K=K.toString().replace(/\s+/g,"");var V=0;if(K[0]==="-")V++,this.negative=1;if(V<K.length){if(U===16)this._parseHex(K,V,W);else if(this._parseBase(K,U,V),W==="le")this._initArray(this.toArray(),U,W)}},q.prototype._initNumber=function T(K,U,W){if(K<0)this.negative=1,K=-K;if(K<67108864)this.words=[K&67108863],this.length=1;else if(K<4503599627370496)this.words=[K&67108863,K/67108864&67108863],this.length=2;else Z(K<9007199254740992),this.words=[K&67108863,K/67108864&67108863,1],this.length=3;if(W!=="le")return;this._initArray(this.toArray(),U,W)},q.prototype._initArray=function T(K,U,W){if(Z(typeof K.length==="number"),K.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(K.length/3),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var N,L,F=0;if(W==="be"){for(V=K.length-1,N=0;V>=0;V-=3)if(L=K[V]|K[V-1]<<8|K[V-2]<<16,this.words[N]|=L<<F&67108863,this.words[N+1]=L>>>26-F&67108863,F+=24,F>=26)F-=26,N++}else if(W==="le"){for(V=0,N=0;V<K.length;V+=3)if(L=K[V]|K[V+1]<<8|K[V+2]<<16,this.words[N]|=L<<F&67108863,this.words[N+1]=L>>>26-F&67108863,F+=24,F>=26)F-=26,N++}return this.strip()};function z(T,K){var U=T.charCodeAt(K);if(U>=65&&U<=70)return U-55;else if(U>=97&&U<=102)return U-87;else return U-48&15}function M(T,K,U){var W=z(T,U);if(U-1>=K)W|=z(T,U-1)<<4;return W}q.prototype._parseHex=function T(K,U,W){this.length=Math.ceil((K.length-U)/6),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var N=0,L=0,F;if(W==="be")for(V=K.length-1;V>=U;V-=2)if(F=M(K,U,V)<<N,this.words[L]|=F&67108863,N>=18)N-=18,L+=1,this.words[L]|=F>>>26;else N+=8;else{var R=K.length-U;for(V=R%2===0?U+1:U;V<K.length;V+=2)if(F=M(K,U,V)<<N,this.words[L]|=F&67108863,N>=18)N-=18,L+=1,this.words[L]|=F>>>26;else N+=8}this.strip()};function j(T,K,U,W){var V=0,N=Math.min(T.length,U);for(var L=K;L<N;L++){var F=T.charCodeAt(L)-48;if(V*=W,F>=49)V+=F-49+10;else if(F>=17)V+=F-17+10;else V+=F}return V}q.prototype._parseBase=function T(K,U,W){this.words=[0],this.length=1;for(var V=0,N=1;N<=67108863;N*=U)V++;V--,N=N/U|0;var L=K.length-W,F=L%V,R=Math.min(L,L-F)+W,O=0;for(var w=W;w<R;w+=V)if(O=j(K,w,w+V,U),this.imuln(N),this.words[0]+O<67108864)this.words[0]+=O;else this._iaddn(O);if(F!==0){var x=1;O=j(K,w,K.length,U);for(w=0;w<F;w++)x*=U;if(this.imuln(x),this.words[0]+O<67108864)this.words[0]+=O;else this._iaddn(O)}this.strip()},q.prototype.copy=function T(K){K.words=new Array(this.length);for(var U=0;U<this.length;U++)K.words[U]=this.words[U];K.length=this.length,K.negative=this.negative,K.red=this.red},q.prototype.clone=function T(){var K=new q(null);return this.copy(K),K},q.prototype._expand=function T(K){while(this.length<K)this.words[this.length++]=0;return this},q.prototype.strip=function T(){while(this.length>1&&this.words[this.length-1]===0)this.length--;return this._normSign()},q.prototype._normSign=function T(){if(this.length===1&&this.words[0]===0)this.negative=0;return this},q.prototype.inspect=function T(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var P=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],D=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];if(q.prototype.toString=function T(K,U){K=K||10,U=U|0||1;var W;if(K===16||K==="hex"){W="";var V=0,N=0;for(var L=0;L<this.length;L++){var F=this.words[L],R=((F<<V|N)&16777215).toString(16);if(N=F>>>24-V&16777215,V+=2,V>=26)V-=26,L--;if(N!==0||L!==this.length-1)W=P[6-R.length]+R+W;else W=R+W}if(N!==0)W=N.toString(16)+W;while(W.length%U!==0)W="0"+W;if(this.negative!==0)W="-"+W;return W}if(K===(K|0)&&K>=2&&K<=36){var O=D[K],w=A[K];W="";var x=this.clone();x.negative=0;while(!x.isZero()){var E=x.modn(w).toString(K);if(x=x.idivn(w),!x.isZero())W=P[O-E.length]+E+W;else W=E+W}if(this.isZero())W="0"+W;while(W.length%U!==0)W="0"+W;if(this.negative!==0)W="-"+W;return W}Z(!1,"Base should be between 2 and 36")},q.prototype.toNumber=function T(){var K=this.words[0];if(this.length===2)K+=this.words[1]*67108864;else if(this.length===3&&this.words[2]===1)K+=4503599627370496+this.words[1]*67108864;else if(this.length>2)Z(!1,"Number can only safely store up to 53 bits");return this.negative!==0?-K:K},q.prototype.toJSON=function T(){return this.toString(16)},q.prototype.toBuffer=function T(K,U){return Z(typeof G!=="undefined"),this.toArrayLike(G,K,U)},q.prototype.toArray=function T(K,U){return this.toArrayLike(Array,K,U)},q.prototype.toArrayLike=function T(K,U,W){var V=this.byteLength(),N=W||Math.max(1,V);Z(V<=N,"byte array longer than desired length"),Z(N>0,"Requested array length <= 0"),this.strip();var L=U==="le",F=new K(N),R,O,w=this.clone();if(!L){for(O=0;O<N-V;O++)F[O]=0;for(O=0;!w.isZero();O++)R=w.andln(255),w.iushrn(8),F[N-O-1]=R}else{for(O=0;!w.isZero();O++)R=w.andln(255),w.iushrn(8),F[O]=R;for(;O<N;O++)F[O]=0}return F},Math.clz32)q.prototype._countBits=function T(K){return 32-Math.clz32(K)};else q.prototype._countBits=function T(K){var U=K,W=0;if(U>=4096)W+=13,U>>>=13;if(U>=64)W+=7,U>>>=7;if(U>=8)W+=4,U>>>=4;if(U>=2)W+=2,U>>>=2;return W+U};q.prototype._zeroBits=function T(K){if(K===0)return 26;var U=K,W=0;if((U&8191)===0)W+=13,U>>>=13;if((U&127)===0)W+=7,U>>>=7;if((U&15)===0)W+=4,U>>>=4;if((U&3)===0)W+=2,U>>>=2;if((U&1)===0)W++;return W},q.prototype.bitLength=function T(){var K=this.words[this.length-1],U=this._countBits(K);return(this.length-1)*26+U};function I(T){var K=new Array(T.bitLength());for(var U=0;U<K.length;U++){var W=U/26|0,V=U%26;K[U]=(T.words[W]&1<<V)>>>V}return K}q.prototype.zeroBits=function T(){if(this.isZero())return 0;var K=0;for(var U=0;U<this.length;U++){var W=this._zeroBits(this.words[U]);if(K+=W,W!==26)break}return K},q.prototype.byteLength=function T(){return Math.ceil(this.bitLength()/8)},q.prototype.toTwos=function T(K){if(this.negative!==0)return this.abs().inotn(K).iaddn(1);return this.clone()},q.prototype.fromTwos=function T(K){if(this.testn(K-1))return this.notn(K).iaddn(1).ineg();return this.clone()},q.prototype.isNeg=function T(){return this.negative!==0},q.prototype.neg=function T(){return this.clone().ineg()},q.prototype.ineg=function T(){if(!this.isZero())this.negative^=1;return this},q.prototype.iuor=function T(K){while(this.length<K.length)this.words[this.length++]=0;for(var U=0;U<K.length;U++)this.words[U]=this.words[U]|K.words[U];return this.strip()},q.prototype.ior=function T(K){return Z((this.negative|K.negative)===0),this.iuor(K)},q.prototype.or=function T(K){if(this.length>K.length)return this.clone().ior(K);return K.clone().ior(this)},q.prototype.uor=function T(K){if(this.length>K.length)return this.clone().iuor(K);return K.clone().iuor(this)},q.prototype.iuand=function T(K){var U;if(this.length>K.length)U=K;else U=this;for(var W=0;W<U.length;W++)this.words[W]=this.words[W]&K.words[W];return this.length=U.length,this.strip()},q.prototype.iand=function T(K){return Z((this.negative|K.negative)===0),this.iuand(K)},q.prototype.and=function T(K){if(this.length>K.length)return this.clone().iand(K);return K.clone().iand(this)},q.prototype.uand=function T(K){if(this.length>K.length)return this.clone().iuand(K);return K.clone().iuand(this)},q.prototype.iuxor=function T(K){var U,W;if(this.length>K.length)U=this,W=K;else U=K,W=this;for(var V=0;V<W.length;V++)this.words[V]=U.words[V]^W.words[V];if(this!==U)for(;V<U.length;V++)this.words[V]=U.words[V];return this.length=U.length,this.strip()},q.prototype.ixor=function T(K){return Z((this.negative|K.negative)===0),this.iuxor(K)},q.prototype.xor=function T(K){if(this.length>K.length)return this.clone().ixor(K);return K.clone().ixor(this)},q.prototype.uxor=function T(K){if(this.length>K.length)return this.clone().iuxor(K);return K.clone().iuxor(this)},q.prototype.inotn=function T(K){Z(typeof K==="number"&&K>=0);var U=Math.ceil(K/26)|0,W=K%26;if(this._expand(U),W>0)U--;for(var V=0;V<U;V++)this.words[V]=~this.words[V]&67108863;if(W>0)this.words[V]=~this.words[V]&67108863>>26-W;return this.strip()},q.prototype.notn=function T(K){return this.clone().inotn(K)},q.prototype.setn=function T(K,U){Z(typeof K==="number"&&K>=0);var W=K/26|0,V=K%26;if(this._expand(W+1),U)this.words[W]=this.words[W]|1<<V;else this.words[W]=this.words[W]&~(1<<V);return this.strip()},q.prototype.iadd=function T(K){var U;if(this.negative!==0&&K.negative===0)return this.negative=0,U=this.isub(K),this.negative^=1,this._normSign();else if(this.negative===0&&K.negative!==0)return K.negative=0,U=this.isub(K),K.negative=1,U._normSign();var W,V;if(this.length>K.length)W=this,V=K;else W=K,V=this;var N=0;for(var L=0;L<V.length;L++)U=(W.words[L]|0)+(V.words[L]|0)+N,this.words[L]=U&67108863,N=U>>>26;for(;N!==0&&L<W.length;L++)U=(W.words[L]|0)+N,this.words[L]=U&67108863,N=U>>>26;if(this.length=W.length,N!==0)this.words[this.length]=N,this.length++;else if(W!==this)for(;L<W.length;L++)this.words[L]=W.words[L];return this},q.prototype.add=function T(K){var U;if(K.negative!==0&&this.negative===0)return K.negative=0,U=this.sub(K),K.negative^=1,U;else if(K.negative===0&&this.negative!==0)return this.negative=0,U=K.sub(this),this.negative=1,U;if(this.length>K.length)return this.clone().iadd(K);return K.clone().iadd(this)},q.prototype.isub=function T(K){if(K.negative!==0){K.negative=0;var U=this.iadd(K);return K.negative=1,U._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(K),this.negative=1,this._normSign();var W=this.cmp(K);if(W===0)return this.negative=0,this.length=1,this.words[0]=0,this;var V,N;if(W>0)V=this,N=K;else V=K,N=this;var L=0;for(var F=0;F<N.length;F++)U=(V.words[F]|0)-(N.words[F]|0)+L,L=U>>26,this.words[F]=U&67108863;for(;L!==0&&F<V.length;F++)U=(V.words[F]|0)+L,L=U>>26,this.words[F]=U&67108863;if(L===0&&F<V.length&&V!==this)for(;F<V.length;F++)this.words[F]=V.words[F];if(this.length=Math.max(this.length,F),V!==this)this.negative=1;return this.strip()},q.prototype.sub=function T(K){return this.clone().isub(K)};function H(T,K,U){U.negative=K.negative^T.negative;var W=T.length+K.length|0;U.length=W,W=W-1|0;var V=T.words[0]|0,N=K.words[0]|0,L=V*N,F=L&67108863,R=L/67108864|0;U.words[0]=F;for(var O=1;O<W;O++){var w=R>>>26,x=R&67108863,E=Math.min(O,K.length-1);for(var v=Math.max(0,O-T.length+1);v<=E;v++){var p=O-v|0;V=T.words[p]|0,N=K.words[v]|0,L=V*N+x,w+=L/67108864|0,x=L&67108863}U.words[O]=x|0,R=w|0}if(R!==0)U.words[O]=R|0;else U.length--;return U.strip()}var C=function T(K,U,W){var V=K.words,N=U.words,L=W.words,F=0,R,O,w,x=V[0]|0,E=x&8191,v=x>>>13,p=V[1]|0,i=p&8191,s=p>>>13,X0=V[2]|0,n=X0&8191,r=X0>>>13,Z0=V[3]|0,e=Z0&8191,Q0=Z0>>>13,t=V[4]|0,a=t&8191,$0=t>>>13,d0=V[5]|0,K0=d0&8191,z0=d0>>>13,J0=V[6]|0,Y0=J0&8191,W0=J0>>>13,T0=V[7]|0,M0=T0&8191,A0=T0>>>13,C$=V[8]|0,P0=C$&8191,I0=C$>>>13,$8=V[9]|0,C0=$8&8191,S0=$8>>>13,o8=N[0]|0,F0=o8&8191,m0=o8>>>13,iQ=N[1]|0,c0=iQ&8191,p0=iQ>>>13,HX=N[2]|0,v0=HX&8191,g0=HX>>>13,NX=N[3]|0,y0=NX&8191,_0=NX>>>13,AX=N[4]|0,l0=AX&8191,k0=AX>>>13,nQ=N[5]|0,u=nQ&8191,d=nQ>>>13,i0=N[6]|0,U0=i0&8191,O0=i0>>>13,Q8=N[7]|0,w0=Q8&8191,B0=Q8>>>13,oQ=N[8]|0,u0=oQ&8191,b0=oQ>>>13,rQ=N[9]|0,x0=rQ&8191,f0=rQ>>>13;W.negative=K.negative^U.negative,W.length=19,R=Math.imul(E,F0),O=Math.imul(E,m0),O=O+Math.imul(v,F0)|0,w=Math.imul(v,m0);var y8=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(y8>>>26)|0,y8&=67108863,R=Math.imul(i,F0),O=Math.imul(i,m0),O=O+Math.imul(s,F0)|0,w=Math.imul(s,m0),R=R+Math.imul(E,c0)|0,O=O+Math.imul(E,p0)|0,O=O+Math.imul(v,c0)|0,w=w+Math.imul(v,p0)|0;var L$=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(L$>>>26)|0,L$&=67108863,R=Math.imul(n,F0),O=Math.imul(n,m0),O=O+Math.imul(r,F0)|0,w=Math.imul(r,m0),R=R+Math.imul(i,c0)|0,O=O+Math.imul(i,p0)|0,O=O+Math.imul(s,c0)|0,w=w+Math.imul(s,p0)|0,R=R+Math.imul(E,v0)|0,O=O+Math.imul(E,g0)|0,O=O+Math.imul(v,v0)|0,w=w+Math.imul(v,g0)|0;var H$=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(H$>>>26)|0,H$&=67108863,R=Math.imul(e,F0),O=Math.imul(e,m0),O=O+Math.imul(Q0,F0)|0,w=Math.imul(Q0,m0),R=R+Math.imul(n,c0)|0,O=O+Math.imul(n,p0)|0,O=O+Math.imul(r,c0)|0,w=w+Math.imul(r,p0)|0,R=R+Math.imul(i,v0)|0,O=O+Math.imul(i,g0)|0,O=O+Math.imul(s,v0)|0,w=w+Math.imul(s,g0)|0,R=R+Math.imul(E,y0)|0,O=O+Math.imul(E,_0)|0,O=O+Math.imul(v,y0)|0,w=w+Math.imul(v,_0)|0;var K8=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(K8>>>26)|0,K8&=67108863,R=Math.imul(a,F0),O=Math.imul(a,m0),O=O+Math.imul($0,F0)|0,w=Math.imul($0,m0),R=R+Math.imul(e,c0)|0,O=O+Math.imul(e,p0)|0,O=O+Math.imul(Q0,c0)|0,w=w+Math.imul(Q0,p0)|0,R=R+Math.imul(n,v0)|0,O=O+Math.imul(n,g0)|0,O=O+Math.imul(r,v0)|0,w=w+Math.imul(r,g0)|0,R=R+Math.imul(i,y0)|0,O=O+Math.imul(i,_0)|0,O=O+Math.imul(s,y0)|0,w=w+Math.imul(s,_0)|0,R=R+Math.imul(E,l0)|0,O=O+Math.imul(E,k0)|0,O=O+Math.imul(v,l0)|0,w=w+Math.imul(v,k0)|0;var JQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(JQ>>>26)|0,JQ&=67108863,R=Math.imul(K0,F0),O=Math.imul(K0,m0),O=O+Math.imul(z0,F0)|0,w=Math.imul(z0,m0),R=R+Math.imul(a,c0)|0,O=O+Math.imul(a,p0)|0,O=O+Math.imul($0,c0)|0,w=w+Math.imul($0,p0)|0,R=R+Math.imul(e,v0)|0,O=O+Math.imul(e,g0)|0,O=O+Math.imul(Q0,v0)|0,w=w+Math.imul(Q0,g0)|0,R=R+Math.imul(n,y0)|0,O=O+Math.imul(n,_0)|0,O=O+Math.imul(r,y0)|0,w=w+Math.imul(r,_0)|0,R=R+Math.imul(i,l0)|0,O=O+Math.imul(i,k0)|0,O=O+Math.imul(s,l0)|0,w=w+Math.imul(s,k0)|0,R=R+Math.imul(E,u)|0,O=O+Math.imul(E,d)|0,O=O+Math.imul(v,u)|0,w=w+Math.imul(v,d)|0;var qQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(qQ>>>26)|0,qQ&=67108863,R=Math.imul(Y0,F0),O=Math.imul(Y0,m0),O=O+Math.imul(W0,F0)|0,w=Math.imul(W0,m0),R=R+Math.imul(K0,c0)|0,O=O+Math.imul(K0,p0)|0,O=O+Math.imul(z0,c0)|0,w=w+Math.imul(z0,p0)|0,R=R+Math.imul(a,v0)|0,O=O+Math.imul(a,g0)|0,O=O+Math.imul($0,v0)|0,w=w+Math.imul($0,g0)|0,R=R+Math.imul(e,y0)|0,O=O+Math.imul(e,_0)|0,O=O+Math.imul(Q0,y0)|0,w=w+Math.imul(Q0,_0)|0,R=R+Math.imul(n,l0)|0,O=O+Math.imul(n,k0)|0,O=O+Math.imul(r,l0)|0,w=w+Math.imul(r,k0)|0,R=R+Math.imul(i,u)|0,O=O+Math.imul(i,d)|0,O=O+Math.imul(s,u)|0,w=w+Math.imul(s,d)|0,R=R+Math.imul(E,U0)|0,O=O+Math.imul(E,O0)|0,O=O+Math.imul(v,U0)|0,w=w+Math.imul(v,O0)|0;var GQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(GQ>>>26)|0,GQ&=67108863,R=Math.imul(M0,F0),O=Math.imul(M0,m0),O=O+Math.imul(A0,F0)|0,w=Math.imul(A0,m0),R=R+Math.imul(Y0,c0)|0,O=O+Math.imul(Y0,p0)|0,O=O+Math.imul(W0,c0)|0,w=w+Math.imul(W0,p0)|0,R=R+Math.imul(K0,v0)|0,O=O+Math.imul(K0,g0)|0,O=O+Math.imul(z0,v0)|0,w=w+Math.imul(z0,g0)|0,R=R+Math.imul(a,y0)|0,O=O+Math.imul(a,_0)|0,O=O+Math.imul($0,y0)|0,w=w+Math.imul($0,_0)|0,R=R+Math.imul(e,l0)|0,O=O+Math.imul(e,k0)|0,O=O+Math.imul(Q0,l0)|0,w=w+Math.imul(Q0,k0)|0,R=R+Math.imul(n,u)|0,O=O+Math.imul(n,d)|0,O=O+Math.imul(r,u)|0,w=w+Math.imul(r,d)|0,R=R+Math.imul(i,U0)|0,O=O+Math.imul(i,O0)|0,O=O+Math.imul(s,U0)|0,w=w+Math.imul(s,O0)|0,R=R+Math.imul(E,w0)|0,O=O+Math.imul(E,B0)|0,O=O+Math.imul(v,w0)|0,w=w+Math.imul(v,B0)|0;var zQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(zQ>>>26)|0,zQ&=67108863,R=Math.imul(P0,F0),O=Math.imul(P0,m0),O=O+Math.imul(I0,F0)|0,w=Math.imul(I0,m0),R=R+Math.imul(M0,c0)|0,O=O+Math.imul(M0,p0)|0,O=O+Math.imul(A0,c0)|0,w=w+Math.imul(A0,p0)|0,R=R+Math.imul(Y0,v0)|0,O=O+Math.imul(Y0,g0)|0,O=O+Math.imul(W0,v0)|0,w=w+Math.imul(W0,g0)|0,R=R+Math.imul(K0,y0)|0,O=O+Math.imul(K0,_0)|0,O=O+Math.imul(z0,y0)|0,w=w+Math.imul(z0,_0)|0,R=R+Math.imul(a,l0)|0,O=O+Math.imul(a,k0)|0,O=O+Math.imul($0,l0)|0,w=w+Math.imul($0,k0)|0,R=R+Math.imul(e,u)|0,O=O+Math.imul(e,d)|0,O=O+Math.imul(Q0,u)|0,w=w+Math.imul(Q0,d)|0,R=R+Math.imul(n,U0)|0,O=O+Math.imul(n,O0)|0,O=O+Math.imul(r,U0)|0,w=w+Math.imul(r,O0)|0,R=R+Math.imul(i,w0)|0,O=O+Math.imul(i,B0)|0,O=O+Math.imul(s,w0)|0,w=w+Math.imul(s,B0)|0,R=R+Math.imul(E,u0)|0,O=O+Math.imul(E,b0)|0,O=O+Math.imul(v,u0)|0,w=w+Math.imul(v,b0)|0;var KQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(KQ>>>26)|0,KQ&=67108863,R=Math.imul(C0,F0),O=Math.imul(C0,m0),O=O+Math.imul(S0,F0)|0,w=Math.imul(S0,m0),R=R+Math.imul(P0,c0)|0,O=O+Math.imul(P0,p0)|0,O=O+Math.imul(I0,c0)|0,w=w+Math.imul(I0,p0)|0,R=R+Math.imul(M0,v0)|0,O=O+Math.imul(M0,g0)|0,O=O+Math.imul(A0,v0)|0,w=w+Math.imul(A0,g0)|0,R=R+Math.imul(Y0,y0)|0,O=O+Math.imul(Y0,_0)|0,O=O+Math.imul(W0,y0)|0,w=w+Math.imul(W0,_0)|0,R=R+Math.imul(K0,l0)|0,O=O+Math.imul(K0,k0)|0,O=O+Math.imul(z0,l0)|0,w=w+Math.imul(z0,k0)|0,R=R+Math.imul(a,u)|0,O=O+Math.imul(a,d)|0,O=O+Math.imul($0,u)|0,w=w+Math.imul($0,d)|0,R=R+Math.imul(e,U0)|0,O=O+Math.imul(e,O0)|0,O=O+Math.imul(Q0,U0)|0,w=w+Math.imul(Q0,O0)|0,R=R+Math.imul(n,w0)|0,O=O+Math.imul(n,B0)|0,O=O+Math.imul(r,w0)|0,w=w+Math.imul(r,B0)|0,R=R+Math.imul(i,u0)|0,O=O+Math.imul(i,b0)|0,O=O+Math.imul(s,u0)|0,w=w+Math.imul(s,b0)|0,R=R+Math.imul(E,x0)|0,O=O+Math.imul(E,f0)|0,O=O+Math.imul(v,x0)|0,w=w+Math.imul(v,f0)|0;var UQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(UQ>>>26)|0,UQ&=67108863,R=Math.imul(C0,c0),O=Math.imul(C0,p0),O=O+Math.imul(S0,c0)|0,w=Math.imul(S0,p0),R=R+Math.imul(P0,v0)|0,O=O+Math.imul(P0,g0)|0,O=O+Math.imul(I0,v0)|0,w=w+Math.imul(I0,g0)|0,R=R+Math.imul(M0,y0)|0,O=O+Math.imul(M0,_0)|0,O=O+Math.imul(A0,y0)|0,w=w+Math.imul(A0,_0)|0,R=R+Math.imul(Y0,l0)|0,O=O+Math.imul(Y0,k0)|0,O=O+Math.imul(W0,l0)|0,w=w+Math.imul(W0,k0)|0,R=R+Math.imul(K0,u)|0,O=O+Math.imul(K0,d)|0,O=O+Math.imul(z0,u)|0,w=w+Math.imul(z0,d)|0,R=R+Math.imul(a,U0)|0,O=O+Math.imul(a,O0)|0,O=O+Math.imul($0,U0)|0,w=w+Math.imul($0,O0)|0,R=R+Math.imul(e,w0)|0,O=O+Math.imul(e,B0)|0,O=O+Math.imul(Q0,w0)|0,w=w+Math.imul(Q0,B0)|0,R=R+Math.imul(n,u0)|0,O=O+Math.imul(n,b0)|0,O=O+Math.imul(r,u0)|0,w=w+Math.imul(r,b0)|0,R=R+Math.imul(i,x0)|0,O=O+Math.imul(i,f0)|0,O=O+Math.imul(s,x0)|0,w=w+Math.imul(s,f0)|0;var WQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(WQ>>>26)|0,WQ&=67108863,R=Math.imul(C0,v0),O=Math.imul(C0,g0),O=O+Math.imul(S0,v0)|0,w=Math.imul(S0,g0),R=R+Math.imul(P0,y0)|0,O=O+Math.imul(P0,_0)|0,O=O+Math.imul(I0,y0)|0,w=w+Math.imul(I0,_0)|0,R=R+Math.imul(M0,l0)|0,O=O+Math.imul(M0,k0)|0,O=O+Math.imul(A0,l0)|0,w=w+Math.imul(A0,k0)|0,R=R+Math.imul(Y0,u)|0,O=O+Math.imul(Y0,d)|0,O=O+Math.imul(W0,u)|0,w=w+Math.imul(W0,d)|0,R=R+Math.imul(K0,U0)|0,O=O+Math.imul(K0,O0)|0,O=O+Math.imul(z0,U0)|0,w=w+Math.imul(z0,O0)|0,R=R+Math.imul(a,w0)|0,O=O+Math.imul(a,B0)|0,O=O+Math.imul($0,w0)|0,w=w+Math.imul($0,B0)|0,R=R+Math.imul(e,u0)|0,O=O+Math.imul(e,b0)|0,O=O+Math.imul(Q0,u0)|0,w=w+Math.imul(Q0,b0)|0,R=R+Math.imul(n,x0)|0,O=O+Math.imul(n,f0)|0,O=O+Math.imul(r,x0)|0,w=w+Math.imul(r,f0)|0;var VQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(VQ>>>26)|0,VQ&=67108863,R=Math.imul(C0,y0),O=Math.imul(C0,_0),O=O+Math.imul(S0,y0)|0,w=Math.imul(S0,_0),R=R+Math.imul(P0,l0)|0,O=O+Math.imul(P0,k0)|0,O=O+Math.imul(I0,l0)|0,w=w+Math.imul(I0,k0)|0,R=R+Math.imul(M0,u)|0,O=O+Math.imul(M0,d)|0,O=O+Math.imul(A0,u)|0,w=w+Math.imul(A0,d)|0,R=R+Math.imul(Y0,U0)|0,O=O+Math.imul(Y0,O0)|0,O=O+Math.imul(W0,U0)|0,w=w+Math.imul(W0,O0)|0,R=R+Math.imul(K0,w0)|0,O=O+Math.imul(K0,B0)|0,O=O+Math.imul(z0,w0)|0,w=w+Math.imul(z0,B0)|0,R=R+Math.imul(a,u0)|0,O=O+Math.imul(a,b0)|0,O=O+Math.imul($0,u0)|0,w=w+Math.imul($0,b0)|0,R=R+Math.imul(e,x0)|0,O=O+Math.imul(e,f0)|0,O=O+Math.imul(Q0,x0)|0,w=w+Math.imul(Q0,f0)|0;var OQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(OQ>>>26)|0,OQ&=67108863,R=Math.imul(C0,l0),O=Math.imul(C0,k0),O=O+Math.imul(S0,l0)|0,w=Math.imul(S0,k0),R=R+Math.imul(P0,u)|0,O=O+Math.imul(P0,d)|0,O=O+Math.imul(I0,u)|0,w=w+Math.imul(I0,d)|0,R=R+Math.imul(M0,U0)|0,O=O+Math.imul(M0,O0)|0,O=O+Math.imul(A0,U0)|0,w=w+Math.imul(A0,O0)|0,R=R+Math.imul(Y0,w0)|0,O=O+Math.imul(Y0,B0)|0,O=O+Math.imul(W0,w0)|0,w=w+Math.imul(W0,B0)|0,R=R+Math.imul(K0,u0)|0,O=O+Math.imul(K0,b0)|0,O=O+Math.imul(z0,u0)|0,w=w+Math.imul(z0,b0)|0,R=R+Math.imul(a,x0)|0,O=O+Math.imul(a,f0)|0,O=O+Math.imul($0,x0)|0,w=w+Math.imul($0,f0)|0;var MQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(MQ>>>26)|0,MQ&=67108863,R=Math.imul(C0,u),O=Math.imul(C0,d),O=O+Math.imul(S0,u)|0,w=Math.imul(S0,d),R=R+Math.imul(P0,U0)|0,O=O+Math.imul(P0,O0)|0,O=O+Math.imul(I0,U0)|0,w=w+Math.imul(I0,O0)|0,R=R+Math.imul(M0,w0)|0,O=O+Math.imul(M0,B0)|0,O=O+Math.imul(A0,w0)|0,w=w+Math.imul(A0,B0)|0,R=R+Math.imul(Y0,u0)|0,O=O+Math.imul(Y0,b0)|0,O=O+Math.imul(W0,u0)|0,w=w+Math.imul(W0,b0)|0,R=R+Math.imul(K0,x0)|0,O=O+Math.imul(K0,f0)|0,O=O+Math.imul(z0,x0)|0,w=w+Math.imul(z0,f0)|0;var DQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(DQ>>>26)|0,DQ&=67108863,R=Math.imul(C0,U0),O=Math.imul(C0,O0),O=O+Math.imul(S0,U0)|0,w=Math.imul(S0,O0),R=R+Math.imul(P0,w0)|0,O=O+Math.imul(P0,B0)|0,O=O+Math.imul(I0,w0)|0,w=w+Math.imul(I0,B0)|0,R=R+Math.imul(M0,u0)|0,O=O+Math.imul(M0,b0)|0,O=O+Math.imul(A0,u0)|0,w=w+Math.imul(A0,b0)|0,R=R+Math.imul(Y0,x0)|0,O=O+Math.imul(Y0,f0)|0,O=O+Math.imul(W0,x0)|0,w=w+Math.imul(W0,f0)|0;var jQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(jQ>>>26)|0,jQ&=67108863,R=Math.imul(C0,w0),O=Math.imul(C0,B0),O=O+Math.imul(S0,w0)|0,w=Math.imul(S0,B0),R=R+Math.imul(P0,u0)|0,O=O+Math.imul(P0,b0)|0,O=O+Math.imul(I0,u0)|0,w=w+Math.imul(I0,b0)|0,R=R+Math.imul(M0,x0)|0,O=O+Math.imul(M0,f0)|0,O=O+Math.imul(A0,x0)|0,w=w+Math.imul(A0,f0)|0;var PQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(PQ>>>26)|0,PQ&=67108863,R=Math.imul(C0,u0),O=Math.imul(C0,b0),O=O+Math.imul(S0,u0)|0,w=Math.imul(S0,b0),R=R+Math.imul(P0,x0)|0,O=O+Math.imul(P0,f0)|0,O=O+Math.imul(I0,x0)|0,w=w+Math.imul(I0,f0)|0;var HQ=(F+R|0)+((O&8191)<<13)|0;F=(w+(O>>>13)|0)+(HQ>>>26)|0,HQ&=67108863,R=Math.imul(C0,x0),O=Math.imul(C0,f0),O=O+Math.imul(S0,x0)|0,w=Math.imul(S0,f0);var NQ=(F+R|0)+((O&8191)<<13)|0;if(F=(w+(O>>>13)|0)+(NQ>>>26)|0,NQ&=67108863,L[0]=y8,L[1]=L$,L[2]=H$,L[3]=K8,L[4]=JQ,L[5]=qQ,L[6]=GQ,L[7]=zQ,L[8]=KQ,L[9]=UQ,L[10]=WQ,L[11]=VQ,L[12]=OQ,L[13]=MQ,L[14]=DQ,L[15]=jQ,L[16]=PQ,L[17]=HQ,L[18]=NQ,F!==0)L[19]=F,W.length++;return W};if(!Math.imul)C=H;function B(T,K,U){U.negative=K.negative^T.negative,U.length=T.length+K.length;var W=0,V=0;for(var N=0;N<U.length-1;N++){var L=V;V=0;var F=W&67108863,R=Math.min(N,K.length-1);for(var O=Math.max(0,N-T.length+1);O<=R;O++){var w=N-O,x=T.words[w]|0,E=K.words[O]|0,v=x*E,p=v&67108863;L=L+(v/67108864|0)|0,p=p+F|0,F=p&67108863,L=L+(p>>>26)|0,V+=L>>>26,L&=67108863}U.words[N]=F,W=L,L=V}if(W!==0)U.words[N]=W;else U.length--;return U.strip()}function S(T,K,U){var W=new _;return W.mulp(T,K,U)}q.prototype.mulTo=function T(K,U){var W,V=this.length+K.length;if(this.length===10&&K.length===10)W=C(this,K,U);else if(V<63)W=H(this,K,U);else if(V<1024)W=B(this,K,U);else W=S(this,K,U);return W};function _(T,K){this.x=T,this.y=K}_.prototype.makeRBT=function T(K){var U=new Array(K),W=q.prototype._countBits(K)-1;for(var V=0;V<K;V++)U[V]=this.revBin(V,W,K);return U},_.prototype.revBin=function T(K,U,W){if(K===0||K===W-1)return K;var V=0;for(var N=0;N<U;N++)V|=(K&1)<<U-N-1,K>>=1;return V},_.prototype.permute=function T(K,U,W,V,N,L){for(var F=0;F<L;F++)V[F]=U[K[F]],N[F]=W[K[F]]},_.prototype.transform=function T(K,U,W,V,N,L){this.permute(L,K,U,W,V,N);for(var F=1;F<N;F<<=1){var R=F<<1,O=Math.cos(2*Math.PI/R),w=Math.sin(2*Math.PI/R);for(var x=0;x<N;x+=R){var E=O,v=w;for(var p=0;p<F;p++){var i=W[x+p],s=V[x+p],X0=W[x+p+F],n=V[x+p+F],r=E*X0-v*n;if(n=E*n+v*X0,X0=r,W[x+p]=i+X0,V[x+p]=s+n,W[x+p+F]=i-X0,V[x+p+F]=s-n,p!==R)r=O*E-w*v,v=O*v+w*E,E=r}}}},_.prototype.guessLen13b=function T(K,U){var W=Math.max(U,K)|1,V=W&1,N=0;for(W=W/2|0;W;W=W>>>1)N++;return 1<<N+1+V},_.prototype.conjugate=function T(K,U,W){if(W<=1)return;for(var V=0;V<W/2;V++){var N=K[V];K[V]=K[W-V-1],K[W-V-1]=N,N=U[V],U[V]=-U[W-V-1],U[W-V-1]=-N}},_.prototype.normalize13b=function T(K,U){var W=0;for(var V=0;V<U/2;V++){var N=Math.round(K[2*V+1]/U)*8192+Math.round(K[2*V]/U)+W;if(K[V]=N&67108863,N<67108864)W=0;else W=N/67108864|0}return K},_.prototype.convert13b=function T(K,U,W,V){var N=0;for(var L=0;L<U;L++)N=N+(K[L]|0),W[2*L]=N&8191,N=N>>>13,W[2*L+1]=N&8191,N=N>>>13;for(L=2*U;L<V;++L)W[L]=0;Z(N===0),Z((N&-8192)===0)},_.prototype.stub=function T(K){var U=new Array(K);for(var W=0;W<K;W++)U[W]=0;return U},_.prototype.mulp=function T(K,U,W){var V=2*this.guessLen13b(K.length,U.length),N=this.makeRBT(V),L=this.stub(V),F=new Array(V),R=new Array(V),O=new Array(V),w=new Array(V),x=new Array(V),E=new Array(V),v=W.words;v.length=V,this.convert13b(K.words,K.length,F,V),this.convert13b(U.words,U.length,w,V),this.transform(F,L,R,O,V,N),this.transform(w,L,x,E,V,N);for(var p=0;p<V;p++){var i=R[p]*x[p]-O[p]*E[p];O[p]=R[p]*E[p]+O[p]*x[p],R[p]=i}return this.conjugate(R,O,V),this.transform(R,O,v,L,V,N),this.conjugate(v,L,V),this.normalize13b(v,V),W.negative=K.negative^U.negative,W.length=K.length+U.length,W.strip()},q.prototype.mul=function T(K){var U=new q(null);return U.words=new Array(this.length+K.length),this.mulTo(K,U)},q.prototype.mulf=function T(K){var U=new q(null);return U.words=new Array(this.length+K.length),S(this,K,U)},q.prototype.imul=function T(K){return this.clone().mulTo(K,this)},q.prototype.imuln=function T(K){Z(typeof K==="number"),Z(K<67108864);var U=0;for(var W=0;W<this.length;W++){var V=(this.words[W]|0)*K,N=(V&67108863)+(U&67108863);U>>=26,U+=V/67108864|0,U+=N>>>26,this.words[W]=N&67108863}if(U!==0)this.words[W]=U,this.length++;return this.length=K===0?1:this.length,this},q.prototype.muln=function T(K){return this.clone().imuln(K)},q.prototype.sqr=function T(){return this.mul(this)},q.prototype.isqr=function T(){return this.imul(this.clone())},q.prototype.pow=function T(K){var U=I(K);if(U.length===0)return new q(1);var W=this;for(var V=0;V<U.length;V++,W=W.sqr())if(U[V]!==0)break;if(++V<U.length)for(var N=W.sqr();V<U.length;V++,N=N.sqr()){if(U[V]===0)continue;W=W.mul(N)}return W},q.prototype.iushln=function T(K){Z(typeof K==="number"&&K>=0);var U=K%26,W=(K-U)/26,V=67108863>>>26-U<<26-U,N;if(U!==0){var L=0;for(N=0;N<this.length;N++){var F=this.words[N]&V,R=(this.words[N]|0)-F<<U;this.words[N]=R|L,L=F>>>26-U}if(L)this.words[N]=L,this.length++}if(W!==0){for(N=this.length-1;N>=0;N--)this.words[N+W]=this.words[N];for(N=0;N<W;N++)this.words[N]=0;this.length+=W}return this.strip()},q.prototype.ishln=function T(K){return Z(this.negative===0),this.iushln(K)},q.prototype.iushrn=function T(K,U,W){Z(typeof K==="number"&&K>=0);var V;if(U)V=(U-U%26)/26;else V=0;var N=K%26,L=Math.min((K-N)/26,this.length),F=67108863^67108863>>>N<<N,R=W;if(V-=L,V=Math.max(0,V),R){for(var O=0;O<L;O++)R.words[O]=this.words[O];R.length=L}if(L===0);else if(this.length>L){this.length-=L;for(O=0;O<this.length;O++)this.words[O]=this.words[O+L]}else this.words[0]=0,this.length=1;var w=0;for(O=this.length-1;O>=0&&(w!==0||O>=V);O--){var x=this.words[O]|0;this.words[O]=w<<26-N|x>>>N,w=x&F}if(R&&w!==0)R.words[R.length++]=w;if(this.length===0)this.words[0]=0,this.length=1;return this.strip()},q.prototype.ishrn=function T(K,U,W){return Z(this.negative===0),this.iushrn(K,U,W)},q.prototype.shln=function T(K){return this.clone().ishln(K)},q.prototype.ushln=function T(K){return this.clone().iushln(K)},q.prototype.shrn=function T(K){return this.clone().ishrn(K)},q.prototype.ushrn=function T(K){return this.clone().iushrn(K)},q.prototype.testn=function T(K){Z(typeof K==="number"&&K>=0);var U=K%26,W=(K-U)/26,V=1<<U;if(this.length<=W)return!1;var N=this.words[W];return!!(N&V)},q.prototype.imaskn=function T(K){Z(typeof K==="number"&&K>=0);var U=K%26,W=(K-U)/26;if(Z(this.negative===0,"imaskn works only with positive numbers"),this.length<=W)return this;if(U!==0)W++;if(this.length=Math.min(W,this.length),U!==0){var V=67108863^67108863>>>U<<U;this.words[this.length-1]&=V}return this.strip()},q.prototype.maskn=function T(K){return this.clone().imaskn(K)},q.prototype.iaddn=function T(K){if(Z(typeof K==="number"),Z(K<67108864),K<0)return this.isubn(-K);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<K)return this.words[0]=K-(this.words[0]|0),this.negative=0,this;return this.negative=0,this.isubn(K),this.negative=1,this}return this._iaddn(K)},q.prototype._iaddn=function T(K){this.words[0]+=K;for(var U=0;U<this.length&&this.words[U]>=67108864;U++)if(this.words[U]-=67108864,U===this.length-1)this.words[U+1]=1;else this.words[U+1]++;return this.length=Math.max(this.length,U+1),this},q.prototype.isubn=function T(K){if(Z(typeof K==="number"),Z(K<67108864),K<0)return this.iaddn(-K);if(this.negative!==0)return this.negative=0,this.iaddn(K),this.negative=1,this;if(this.words[0]-=K,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var U=0;U<this.length&&this.words[U]<0;U++)this.words[U]+=67108864,this.words[U+1]-=1;return this.strip()},q.prototype.addn=function T(K){return this.clone().iaddn(K)},q.prototype.subn=function T(K){return this.clone().isubn(K)},q.prototype.iabs=function T(){return this.negative=0,this},q.prototype.abs=function T(){return this.clone().iabs()},q.prototype._ishlnsubmul=function T(K,U,W){var V=K.length+W,N;this._expand(V);var L,F=0;for(N=0;N<K.length;N++){L=(this.words[N+W]|0)+F;var R=(K.words[N]|0)*U;L-=R&67108863,F=(L>>26)-(R/67108864|0),this.words[N+W]=L&67108863}for(;N<this.length-W;N++)L=(this.words[N+W]|0)+F,F=L>>26,this.words[N+W]=L&67108863;if(F===0)return this.strip();Z(F===-1),F=0;for(N=0;N<this.length;N++)L=-(this.words[N]|0)+F,F=L>>26,this.words[N]=L&67108863;return this.negative=1,this.strip()},q.prototype._wordDiv=function T(K,U){var W=this.length-K.length,V=this.clone(),N=K,L=N.words[N.length-1]|0,F=this._countBits(L);if(W=26-F,W!==0)N=N.ushln(W),V.iushln(W),L=N.words[N.length-1]|0;var R=V.length-N.length,O;if(U!=="mod"){O=new q(null),O.length=R+1,O.words=new Array(O.length);for(var w=0;w<O.length;w++)O.words[w]=0}var x=V.clone()._ishlnsubmul(N,1,R);if(x.negative===0){if(V=x,O)O.words[R]=1}for(var E=R-1;E>=0;E--){var v=(V.words[N.length+E]|0)*67108864+(V.words[N.length+E-1]|0);v=Math.min(v/L|0,67108863),V._ishlnsubmul(N,v,E);while(V.negative!==0)if(v--,V.negative=0,V._ishlnsubmul(N,1,E),!V.isZero())V.negative^=1;if(O)O.words[E]=v}if(O)O.strip();if(V.strip(),U!=="div"&&W!==0)V.iushrn(W);return{div:O||null,mod:V}},q.prototype.divmod=function T(K,U,W){if(Z(!K.isZero()),this.isZero())return{div:new q(0),mod:new q(0)};var V,N,L;if(this.negative!==0&&K.negative===0){if(L=this.neg().divmod(K,U),U!=="mod")V=L.div.neg();if(U!=="div"){if(N=L.mod.neg(),W&&N.negative!==0)N.iadd(K)}return{div:V,mod:N}}if(this.negative===0&&K.negative!==0){if(L=this.divmod(K.neg(),U),U!=="mod")V=L.div.neg();return{div:V,mod:L.mod}}if((this.negative&K.negative)!==0){if(L=this.neg().divmod(K.neg(),U),U!=="div"){if(N=L.mod.neg(),W&&N.negative!==0)N.isub(K)}return{div:L.div,mod:N}}if(K.length>this.length||this.cmp(K)<0)return{div:new q(0),mod:this};if(K.length===1){if(U==="div")return{div:this.divn(K.words[0]),mod:null};if(U==="mod")return{div:null,mod:new q(this.modn(K.words[0]))};return{div:this.divn(K.words[0]),mod:new q(this.modn(K.words[0]))}}return this._wordDiv(K,U)},q.prototype.div=function T(K){return this.divmod(K,"div",!1).div},q.prototype.mod=function T(K){return this.divmod(K,"mod",!1).mod},q.prototype.umod=function T(K){return this.divmod(K,"mod",!0).mod},q.prototype.divRound=function T(K){var U=this.divmod(K);if(U.mod.isZero())return U.div;var W=U.div.negative!==0?U.mod.isub(K):U.mod,V=K.ushrn(1),N=K.andln(1),L=W.cmp(V);if(L<0||N===1&&L===0)return U.div;return U.div.negative!==0?U.div.isubn(1):U.div.iaddn(1)},q.prototype.modn=function T(K){Z(K<=67108863);var U=67108864%K,W=0;for(var V=this.length-1;V>=0;V--)W=(U*W+(this.words[V]|0))%K;return W},q.prototype.idivn=function T(K){Z(K<=67108863);var U=0;for(var W=this.length-1;W>=0;W--){var V=(this.words[W]|0)+U*67108864;this.words[W]=V/K|0,U=V%K}return this.strip()},q.prototype.divn=function T(K){return this.clone().idivn(K)},q.prototype.egcd=function T(K){Z(K.negative===0),Z(!K.isZero());var U=this,W=K.clone();if(U.negative!==0)U=U.umod(K);else U=U.clone();var V=new q(1),N=new q(0),L=new q(0),F=new q(1),R=0;while(U.isEven()&&W.isEven())U.iushrn(1),W.iushrn(1),++R;var O=W.clone(),w=U.clone();while(!U.isZero()){for(var x=0,E=1;(U.words[0]&E)===0&&x<26;++x,E<<=1);if(x>0){U.iushrn(x);while(x-- >0){if(V.isOdd()||N.isOdd())V.iadd(O),N.isub(w);V.iushrn(1),N.iushrn(1)}}for(var v=0,p=1;(W.words[0]&p)===0&&v<26;++v,p<<=1);if(v>0){W.iushrn(v);while(v-- >0){if(L.isOdd()||F.isOdd())L.iadd(O),F.isub(w);L.iushrn(1),F.iushrn(1)}}if(U.cmp(W)>=0)U.isub(W),V.isub(L),N.isub(F);else W.isub(U),L.isub(V),F.isub(N)}return{a:L,b:F,gcd:W.iushln(R)}},q.prototype._invmp=function T(K){Z(K.negative===0),Z(!K.isZero());var U=this,W=K.clone();if(U.negative!==0)U=U.umod(K);else U=U.clone();var V=new q(1),N=new q(0),L=W.clone();while(U.cmpn(1)>0&&W.cmpn(1)>0){for(var F=0,R=1;(U.words[0]&R)===0&&F<26;++F,R<<=1);if(F>0){U.iushrn(F);while(F-- >0){if(V.isOdd())V.iadd(L);V.iushrn(1)}}for(var O=0,w=1;(W.words[0]&w)===0&&O<26;++O,w<<=1);if(O>0){W.iushrn(O);while(O-- >0){if(N.isOdd())N.iadd(L);N.iushrn(1)}}if(U.cmp(W)>=0)U.isub(W),V.isub(N);else W.isub(U),N.isub(V)}var x;if(U.cmpn(1)===0)x=V;else x=N;if(x.cmpn(0)<0)x.iadd(K);return x},q.prototype.gcd=function T(K){if(this.isZero())return K.abs();if(K.isZero())return this.abs();var U=this.clone(),W=K.clone();U.negative=0,W.negative=0;for(var V=0;U.isEven()&&W.isEven();V++)U.iushrn(1),W.iushrn(1);do{while(U.isEven())U.iushrn(1);while(W.isEven())W.iushrn(1);var N=U.cmp(W);if(N<0){var L=U;U=W,W=L}else if(N===0||W.cmpn(1)===0)break;U.isub(W)}while(!0);return W.iushln(V)},q.prototype.invm=function T(K){return this.egcd(K).a.umod(K)},q.prototype.isEven=function T(){return(this.words[0]&1)===0},q.prototype.isOdd=function T(){return(this.words[0]&1)===1},q.prototype.andln=function T(K){return this.words[0]&K},q.prototype.bincn=function T(K){Z(typeof K==="number");var U=K%26,W=(K-U)/26,V=1<<U;if(this.length<=W)return this._expand(W+1),this.words[W]|=V,this;var N=V;for(var L=W;N!==0&&L<this.length;L++){var F=this.words[L]|0;F+=N,N=F>>>26,F&=67108863,this.words[L]=F}if(N!==0)this.words[L]=N,this.length++;return this},q.prototype.isZero=function T(){return this.length===1&&this.words[0]===0},q.prototype.cmpn=function T(K){var U=K<0;if(this.negative!==0&&!U)return-1;if(this.negative===0&&U)return 1;this.strip();var W;if(this.length>1)W=1;else{if(U)K=-K;Z(K<=67108863,"Number is too big");var V=this.words[0]|0;W=V===K?0:V<K?-1:1}if(this.negative!==0)return-W|0;return W},q.prototype.cmp=function T(K){if(this.negative!==0&&K.negative===0)return-1;if(this.negative===0&&K.negative!==0)return 1;var U=this.ucmp(K);if(this.negative!==0)return-U|0;return U},q.prototype.ucmp=function T(K){if(this.length>K.length)return 1;if(this.length<K.length)return-1;var U=0;for(var W=this.length-1;W>=0;W--){var V=this.words[W]|0,N=K.words[W]|0;if(V===N)continue;if(V<N)U=-1;else if(V>N)U=1;break}return U},q.prototype.gtn=function T(K){return this.cmpn(K)===1},q.prototype.gt=function T(K){return this.cmp(K)===1},q.prototype.gten=function T(K){return this.cmpn(K)>=0},q.prototype.gte=function T(K){return this.cmp(K)>=0},q.prototype.ltn=function T(K){return this.cmpn(K)===-1},q.prototype.lt=function T(K){return this.cmp(K)===-1},q.prototype.lten=function T(K){return this.cmpn(K)<=0},q.prototype.lte=function T(K){return this.cmp(K)<=0},q.prototype.eqn=function T(K){return this.cmpn(K)===0},q.prototype.eq=function T(K){return this.cmp(K)===0},q.red=function T(K){return new h(K)},q.prototype.toRed=function T(K){return Z(!this.red,"Already a number in reduction context"),Z(this.negative===0,"red works only with positives"),K.convertTo(this)._forceRed(K)},q.prototype.fromRed=function T(){return Z(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},q.prototype._forceRed=function T(K){return this.red=K,this},q.prototype.forceRed=function T(K){return Z(!this.red,"Already a number in reduction context"),this._forceRed(K)},q.prototype.redAdd=function T(K){return Z(this.red,"redAdd works only with red numbers"),this.red.add(this,K)},q.prototype.redIAdd=function T(K){return Z(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,K)},q.prototype.redSub=function T(K){return Z(this.red,"redSub works only with red numbers"),this.red.sub(this,K)},q.prototype.redISub=function T(K){return Z(this.red,"redISub works only with red numbers"),this.red.isub(this,K)},q.prototype.redShl=function T(K){return Z(this.red,"redShl works only with red numbers"),this.red.shl(this,K)},q.prototype.redMul=function T(K){return Z(this.red,"redMul works only with red numbers"),this.red._verify2(this,K),this.red.mul(this,K)},q.prototype.redIMul=function T(K){return Z(this.red,"redMul works only with red numbers"),this.red._verify2(this,K),this.red.imul(this,K)},q.prototype.redSqr=function T(){return Z(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},q.prototype.redISqr=function T(){return Z(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},q.prototype.redSqrt=function T(){return Z(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},q.prototype.redInvm=function T(){return Z(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},q.prototype.redNeg=function T(){return Z(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},q.prototype.redPow=function T(K){return Z(this.red&&!K.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,K)};var k={k256:null,p224:null,p192:null,p25519:null};function f(T,K){this.name=T,this.p=new q(K,16),this.n=this.p.bitLength(),this.k=new q(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}f.prototype._tmp=function T(){var K=new q(null);return K.words=new Array(Math.ceil(this.n/13)),K},f.prototype.ireduce=function T(K){var U=K,W;do this.split(U,this.tmp),U=this.imulK(U),U=U.iadd(this.tmp),W=U.bitLength();while(W>this.n);var V=W<this.n?-1:U.ucmp(this.p);if(V===0)U.words[0]=0,U.length=1;else if(V>0)U.isub(this.p);else if(U.strip!==void 0)U.strip();else U._strip();return U},f.prototype.split=function T(K,U){K.iushrn(this.n,0,U)},f.prototype.imulK=function T(K){return K.imul(this.k)};function g(){f.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}J(g,f),g.prototype.split=function T(K,U){var W=4194303,V=Math.min(K.length,9);for(var N=0;N<V;N++)U.words[N]=K.words[N];if(U.length=V,K.length<=9){K.words[0]=0,K.length=1;return}var L=K.words[9];U.words[U.length++]=L&W;for(N=10;N<K.length;N++){var F=K.words[N]|0;K.words[N-10]=(F&W)<<4|L>>>22,L=F}if(L>>>=22,K.words[N-10]=L,L===0&&K.length>10)K.length-=10;else K.length-=9},g.prototype.imulK=function T(K){K.words[K.length]=0,K.words[K.length+1]=0,K.length+=2;var U=0;for(var W=0;W<K.length;W++){var V=K.words[W]|0;U+=V*977,K.words[W]=U&67108863,U=V*64+(U/67108864|0)}if(K.words[K.length-1]===0){if(K.length--,K.words[K.length-1]===0)K.length--}return K};function b(){f.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}J(b,f);function m(){f.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}J(m,f);function l(){f.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}J(l,f),l.prototype.imulK=function T(K){var U=0;for(var W=0;W<K.length;W++){var V=(K.words[W]|0)*19+U,N=V&67108863;V>>>=26,K.words[W]=N,U=V}if(U!==0)K.words[K.length++]=U;return K},q._prime=function T(K){if(k[K])return k[K];var U;if(K==="k256")U=new g;else if(K==="p224")U=new b;else if(K==="p192")U=new m;else if(K==="p25519")U=new l;else throw new Error("Unknown prime "+K);return k[K]=U,U};function h(T){if(typeof T==="string"){var K=q._prime(T);this.m=K.p,this.prime=K}else Z(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}h.prototype._verify1=function T(K){Z(K.negative===0,"red works only with positives"),Z(K.red,"red works only with red numbers")},h.prototype._verify2=function T(K,U){Z((K.negative|U.negative)===0,"red works only with positives"),Z(K.red&&K.red===U.red,"red works only with red numbers")},h.prototype.imod=function T(K){if(this.prime)return this.prime.ireduce(K)._forceRed(this);return K.umod(this.m)._forceRed(this)},h.prototype.neg=function T(K){if(K.isZero())return K.clone();return this.m.sub(K)._forceRed(this)},h.prototype.add=function T(K,U){this._verify2(K,U);var W=K.add(U);if(W.cmp(this.m)>=0)W.isub(this.m);return W._forceRed(this)},h.prototype.iadd=function T(K,U){this._verify2(K,U);var W=K.iadd(U);if(W.cmp(this.m)>=0)W.isub(this.m);return W},h.prototype.sub=function T(K,U){this._verify2(K,U);var W=K.sub(U);if(W.cmpn(0)<0)W.iadd(this.m);return W._forceRed(this)},h.prototype.isub=function T(K,U){this._verify2(K,U);var W=K.isub(U);if(W.cmpn(0)<0)W.iadd(this.m);return W},h.prototype.shl=function T(K,U){return this._verify1(K),this.imod(K.ushln(U))},h.prototype.imul=function T(K,U){return this._verify2(K,U),this.imod(K.imul(U))},h.prototype.mul=function T(K,U){return this._verify2(K,U),this.imod(K.mul(U))},h.prototype.isqr=function T(K){return this.imul(K,K.clone())},h.prototype.sqr=function T(K){return this.mul(K,K)},h.prototype.sqrt=function T(K){if(K.isZero())return K.clone();var U=this.m.andln(3);if(Z(U%2===1),U===3){var W=this.m.add(new q(1)).iushrn(2);return this.pow(K,W)}var V=this.m.subn(1),N=0;while(!V.isZero()&&V.andln(1)===0)N++,V.iushrn(1);Z(!V.isZero());var L=new q(1).toRed(this),F=L.redNeg(),R=this.m.subn(1).iushrn(1),O=this.m.bitLength();O=new q(2*O*O).toRed(this);while(this.pow(O,R).cmp(F)!==0)O.redIAdd(F);var w=this.pow(O,V),x=this.pow(K,V.addn(1).iushrn(1)),E=this.pow(K,V),v=N;while(E.cmp(L)!==0){var p=E;for(var i=0;p.cmp(L)!==0;i++)p=p.redSqr();Z(i<v);var s=this.pow(w,new q(1).iushln(v-i-1));x=x.redMul(s),w=s.redSqr(),E=E.redMul(w),v=i}return x},h.prototype.invm=function T(K){var U=K._invmp(this.m);if(U.negative!==0)return U.negative=0,this.imod(U).redNeg();else return this.imod(U)},h.prototype.pow=function T(K,U){if(U.isZero())return new q(1).toRed(this);if(U.cmpn(1)===0)return K.clone();var W=4,V=new Array(1<<W);V[0]=new q(1).toRed(this),V[1]=K;for(var N=2;N<V.length;N++)V[N]=this.mul(V[N-1],K);var L=V[0],F=0,R=0,O=U.bitLength()%26;if(O===0)O=26;for(N=U.length-1;N>=0;N--){var w=U.words[N];for(var x=O-1;x>=0;x--){var E=w>>x&1;if(L!==V[0])L=this.sqr(L);if(E===0&&F===0){R=0;continue}if(F<<=1,F|=E,R++,R!==W&&(N!==0||x!==0))continue;L=this.mul(L,V[F]),R=0,F=0}O=26}return L},h.prototype.convertTo=function T(K){var U=K.umod(this.m);return U===K?U.clone():U},h.prototype.convertFrom=function T(K){var U=K.clone();return U.red=null,U},q.mont=function T(K){return new c(K)};function c(T){if(h.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0)this.shift+=26-this.shift%26;this.r=new q(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}J(c,h),c.prototype.convertTo=function T(K){return this.imod(K.ushln(this.shift))},c.prototype.convertFrom=function T(K){var U=this.imod(K.mul(this.rinv));return U.red=null,U},c.prototype.imul=function T(K,U){if(K.isZero()||U.isZero())return K.words[0]=0,K.length=1,K;var W=K.imul(U),V=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=W.isub(V).iushrn(this.shift),L=N;if(N.cmp(this.m)>=0)L=N.isub(this.m);else if(N.cmpn(0)<0)L=N.iadd(this.m);return L._forceRed(this)},c.prototype.mul=function T(K,U){if(K.isZero()||U.isZero())return new q(0)._forceRed(this);var W=K.mul(U),V=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=W.isub(V).iushrn(this.shift),L=N;if(N.cmp(this.m)>=0)L=N.isub(this.m);else if(N.cmpn(0)<0)L=N.iadd(this.m);return L._forceRed(this)},c.prototype.invm=function T(K){var U=this.imod(K._invmp(this.m).mul(this.r2));return U._forceRed(this)}})(typeof Q==="undefined"||Q,$)}),Fm=o0(($,Q)=>{var X=mw(),Y=_Y().Buffer;function Z(J,q){return Y.from(J.toRed(X.mont(q.modulus)).redPow(new X(q.publicExponent)).fromRed().toArray())}Q.exports=Z}),AK0=o0(($,Q)=>{(function(X,Y){function Z(W,V){if(!W)throw new Error(V||"Assertion failed")}function J(W,V){W.super_=V;var N=function(){};N.prototype=V.prototype,W.prototype=new N,W.prototype.constructor=W}function q(W,V,N){if(q.isBN(W))return W;if(this.negative=0,this.words=null,this.length=0,this.red=null,W!==null){if(V==="le"||V==="be")N=V,V=10;this._init(W||0,V||10,N||"be")}}if(typeof X==="object")X.exports=q;else Y.BN=q;q.BN=q,q.wordSize=26;var G;try{if(typeof window!=="undefined"&&typeof window.Buffer!=="undefined")G=window.Buffer;else G=(h8(),I$(b8)).Buffer}catch(W){}q.isBN=function W(V){if(V instanceof q)return!0;return V!==null&&typeof V==="object"&&V.constructor.wordSize===q.wordSize&&Array.isArray(V.words)},q.max=function W(V,N){if(V.cmp(N)>0)return V;return N},q.min=function W(V,N){if(V.cmp(N)<0)return V;return N},q.prototype._init=function W(V,N,L){if(typeof V==="number")return this._initNumber(V,N,L);if(typeof V==="object")return this._initArray(V,N,L);if(N==="hex")N=16;Z(N===(N|0)&&N>=2&&N<=36),V=V.toString().replace(/\s+/g,"");var F=0;if(V[0]==="-")F++,this.negative=1;if(F<V.length){if(N===16)this._parseHex(V,F,L);else if(this._parseBase(V,N,F),L==="le")this._initArray(this.toArray(),N,L)}},q.prototype._initNumber=function W(V,N,L){if(V<0)this.negative=1,V=-V;if(V<67108864)this.words=[V&67108863],this.length=1;else if(V<4503599627370496)this.words=[V&67108863,V/67108864&67108863],this.length=2;else Z(V<9007199254740992),this.words=[V&67108863,V/67108864&67108863,1],this.length=3;if(L!=="le")return;this._initArray(this.toArray(),N,L)},q.prototype._initArray=function W(V,N,L){if(Z(typeof V.length==="number"),V.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(V.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var R,O,w=0;if(L==="be"){for(F=V.length-1,R=0;F>=0;F-=3)if(O=V[F]|V[F-1]<<8|V[F-2]<<16,this.words[R]|=O<<w&67108863,this.words[R+1]=O>>>26-w&67108863,w+=24,w>=26)w-=26,R++}else if(L==="le"){for(F=0,R=0;F<V.length;F+=3)if(O=V[F]|V[F+1]<<8|V[F+2]<<16,this.words[R]|=O<<w&67108863,this.words[R+1]=O>>>26-w&67108863,w+=24,w>=26)w-=26,R++}return this._strip()};function z(W,V){var N=W.charCodeAt(V);if(N>=48&&N<=57)return N-48;else if(N>=65&&N<=70)return N-55;else if(N>=97&&N<=102)return N-87;else Z(!1,"Invalid character in "+W)}function M(W,V,N){var L=z(W,N);if(N-1>=V)L|=z(W,N-1)<<4;return L}q.prototype._parseHex=function W(V,N,L){this.length=Math.ceil((V.length-N)/6),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var R=0,O=0,w;if(L==="be")for(F=V.length-1;F>=N;F-=2)if(w=M(V,N,F)<<R,this.words[O]|=w&67108863,R>=18)R-=18,O+=1,this.words[O]|=w>>>26;else R+=8;else{var x=V.length-N;for(F=x%2===0?N+1:N;F<V.length;F+=2)if(w=M(V,N,F)<<R,this.words[O]|=w&67108863,R>=18)R-=18,O+=1,this.words[O]|=w>>>26;else R+=8}this._strip()};function j(W,V,N,L){var F=0,R=0,O=Math.min(W.length,N);for(var w=V;w<O;w++){var x=W.charCodeAt(w)-48;if(F*=L,x>=49)R=x-49+10;else if(x>=17)R=x-17+10;else R=x;Z(x>=0&&R<L,"Invalid character"),F+=R}return F}q.prototype._parseBase=function W(V,N,L){this.words=[0],this.length=1;for(var F=0,R=1;R<=67108863;R*=N)F++;F--,R=R/N|0;var O=V.length-L,w=O%F,x=Math.min(O,O-w)+L,E=0;for(var v=L;v<x;v+=F)if(E=j(V,v,v+F,N),this.imuln(R),this.words[0]+E<67108864)this.words[0]+=E;else this._iaddn(E);if(w!==0){var p=1;E=j(V,v,V.length,N);for(v=0;v<w;v++)p*=N;if(this.imuln(p),this.words[0]+E<67108864)this.words[0]+=E;else this._iaddn(E)}this._strip()},q.prototype.copy=function W(V){V.words=new Array(this.length);for(var N=0;N<this.length;N++)V.words[N]=this.words[N];V.length=this.length,V.negative=this.negative,V.red=this.red};function P(W,V){W.words=V.words,W.length=V.length,W.negative=V.negative,W.red=V.red}if(q.prototype._move=function W(V){P(V,this)},q.prototype.clone=function W(){var V=new q(null);return this.copy(V),V},q.prototype._expand=function W(V){while(this.length<V)this.words[this.length++]=0;return this},q.prototype._strip=function W(){while(this.length>1&&this.words[this.length-1]===0)this.length--;return this._normSign()},q.prototype._normSign=function W(){if(this.length===1&&this.words[0]===0)this.negative=0;return this},typeof Symbol!=="undefined"&&typeof Symbol.for==="function")try{q.prototype[Symbol.for("nodejs.util.inspect.custom")]=D}catch(W){q.prototype.inspect=D}else q.prototype.inspect=D;function D(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var A=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],H=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];if(q.prototype.toString=function W(V,N){V=V||10,N=N|0||1;var L;if(V===16||V==="hex"){L="";var F=0,R=0;for(var O=0;O<this.length;O++){var w=this.words[O],x=((w<<F|R)&16777215).toString(16);if(R=w>>>24-F&16777215,F+=2,F>=26)F-=26,O--;if(R!==0||O!==this.length-1)L=A[6-x.length]+x+L;else L=x+L}if(R!==0)L=R.toString(16)+L;while(L.length%N!==0)L="0"+L;if(this.negative!==0)L="-"+L;return L}if(V===(V|0)&&V>=2&&V<=36){var E=I[V],v=H[V];L="";var p=this.clone();p.negative=0;while(!p.isZero()){var i=p.modrn(v).toString(V);if(p=p.idivn(v),!p.isZero())L=A[E-i.length]+i+L;else L=i+L}if(this.isZero())L="0"+L;while(L.length%N!==0)L="0"+L;if(this.negative!==0)L="-"+L;return L}Z(!1,"Base should be between 2 and 36")},q.prototype.toNumber=function W(){var V=this.words[0];if(this.length===2)V+=this.words[1]*67108864;else if(this.length===3&&this.words[2]===1)V+=4503599627370496+this.words[1]*67108864;else if(this.length>2)Z(!1,"Number can only safely store up to 53 bits");return this.negative!==0?-V:V},q.prototype.toJSON=function W(){return this.toString(16,2)},G)q.prototype.toBuffer=function W(V,N){return this.toArrayLike(G,V,N)};q.prototype.toArray=function W(V,N){return this.toArrayLike(Array,V,N)};var C=function W(V,N){if(V.allocUnsafe)return V.allocUnsafe(N);return new V(N)};if(q.prototype.toArrayLike=function W(V,N,L){this._strip();var F=this.byteLength(),R=L||Math.max(1,F);Z(F<=R,"byte array longer than desired length"),Z(R>0,"Requested array length <= 0");var O=C(V,R),w=N==="le"?"LE":"BE";return this["_toArrayLike"+w](O,F),O},q.prototype._toArrayLikeLE=function W(V,N){var L=0,F=0;for(var R=0,O=0;R<this.length;R++){var w=this.words[R]<<O|F;if(V[L++]=w&255,L<V.length)V[L++]=w>>8&255;if(L<V.length)V[L++]=w>>16&255;if(O===6){if(L<V.length)V[L++]=w>>24&255;F=0,O=0}else F=w>>>24,O+=2}if(L<V.length){V[L++]=F;while(L<V.length)V[L++]=0}},q.prototype._toArrayLikeBE=function W(V,N){var L=V.length-1,F=0;for(var R=0,O=0;R<this.length;R++){var w=this.words[R]<<O|F;if(V[L--]=w&255,L>=0)V[L--]=w>>8&255;if(L>=0)V[L--]=w>>16&255;if(O===6){if(L>=0)V[L--]=w>>24&255;F=0,O=0}else F=w>>>24,O+=2}if(L>=0){V[L--]=F;while(L>=0)V[L--]=0}},Math.clz32)q.prototype._countBits=function W(V){return 32-Math.clz32(V)};else q.prototype._countBits=function W(V){var N=V,L=0;if(N>=4096)L+=13,N>>>=13;if(N>=64)L+=7,N>>>=7;if(N>=8)L+=4,N>>>=4;if(N>=2)L+=2,N>>>=2;return L+N};q.prototype._zeroBits=function W(V){if(V===0)return 26;var N=V,L=0;if((N&8191)===0)L+=13,N>>>=13;if((N&127)===0)L+=7,N>>>=7;if((N&15)===0)L+=4,N>>>=4;if((N&3)===0)L+=2,N>>>=2;if((N&1)===0)L++;return L},q.prototype.bitLength=function W(){var V=this.words[this.length-1],N=this._countBits(V);return(this.length-1)*26+N};function B(W){var V=new Array(W.bitLength());for(var N=0;N<V.length;N++){var L=N/26|0,F=N%26;V[N]=W.words[L]>>>F&1}return V}q.prototype.zeroBits=function W(){if(this.isZero())return 0;var V=0;for(var N=0;N<this.length;N++){var L=this._zeroBits(this.words[N]);if(V+=L,L!==26)break}return V},q.prototype.byteLength=function W(){return Math.ceil(this.bitLength()/8)},q.prototype.toTwos=function W(V){if(this.negative!==0)return this.abs().inotn(V).iaddn(1);return this.clone()},q.prototype.fromTwos=function W(V){if(this.testn(V-1))return this.notn(V).iaddn(1).ineg();return this.clone()},q.prototype.isNeg=function W(){return this.negative!==0},q.prototype.neg=function W(){return this.clone().ineg()},q.prototype.ineg=function W(){if(!this.isZero())this.negative^=1;return this},q.prototype.iuor=function W(V){while(this.length<V.length)this.words[this.length++]=0;for(var N=0;N<V.length;N++)this.words[N]=this.words[N]|V.words[N];return this._strip()},q.prototype.ior=function W(V){return Z((this.negative|V.negative)===0),this.iuor(V)},q.prototype.or=function W(V){if(this.length>V.length)return this.clone().ior(V);return V.clone().ior(this)},q.prototype.uor=function W(V){if(this.length>V.length)return this.clone().iuor(V);return V.clone().iuor(this)},q.prototype.iuand=function W(V){var N;if(this.length>V.length)N=V;else N=this;for(var L=0;L<N.length;L++)this.words[L]=this.words[L]&V.words[L];return this.length=N.length,this._strip()},q.prototype.iand=function W(V){return Z((this.negative|V.negative)===0),this.iuand(V)},q.prototype.and=function W(V){if(this.length>V.length)return this.clone().iand(V);return V.clone().iand(this)},q.prototype.uand=function W(V){if(this.length>V.length)return this.clone().iuand(V);return V.clone().iuand(this)},q.prototype.iuxor=function W(V){var N,L;if(this.length>V.length)N=this,L=V;else N=V,L=this;for(var F=0;F<L.length;F++)this.words[F]=N.words[F]^L.words[F];if(this!==N)for(;F<N.length;F++)this.words[F]=N.words[F];return this.length=N.length,this._strip()},q.prototype.ixor=function W(V){return Z((this.negative|V.negative)===0),this.iuxor(V)},q.prototype.xor=function W(V){if(this.length>V.length)return this.clone().ixor(V);return V.clone().ixor(this)},q.prototype.uxor=function W(V){if(this.length>V.length)return this.clone().iuxor(V);return V.clone().iuxor(this)},q.prototype.inotn=function W(V){Z(typeof V==="number"&&V>=0);var N=Math.ceil(V/26)|0,L=V%26;if(this._expand(N),L>0)N--;for(var F=0;F<N;F++)this.words[F]=~this.words[F]&67108863;if(L>0)this.words[F]=~this.words[F]&67108863>>26-L;return this._strip()},q.prototype.notn=function W(V){return this.clone().inotn(V)},q.prototype.setn=function W(V,N){Z(typeof V==="number"&&V>=0);var L=V/26|0,F=V%26;if(this._expand(L+1),N)this.words[L]=this.words[L]|1<<F;else this.words[L]=this.words[L]&~(1<<F);return this._strip()},q.prototype.iadd=function W(V){var N;if(this.negative!==0&&V.negative===0)return this.negative=0,N=this.isub(V),this.negative^=1,this._normSign();else if(this.negative===0&&V.negative!==0)return V.negative=0,N=this.isub(V),V.negative=1,N._normSign();var L,F;if(this.length>V.length)L=this,F=V;else L=V,F=this;var R=0;for(var O=0;O<F.length;O++)N=(L.words[O]|0)+(F.words[O]|0)+R,this.words[O]=N&67108863,R=N>>>26;for(;R!==0&&O<L.length;O++)N=(L.words[O]|0)+R,this.words[O]=N&67108863,R=N>>>26;if(this.length=L.length,R!==0)this.words[this.length]=R,this.length++;else if(L!==this)for(;O<L.length;O++)this.words[O]=L.words[O];return this},q.prototype.add=function W(V){var N;if(V.negative!==0&&this.negative===0)return V.negative=0,N=this.sub(V),V.negative^=1,N;else if(V.negative===0&&this.negative!==0)return this.negative=0,N=V.sub(this),this.negative=1,N;if(this.length>V.length)return this.clone().iadd(V);return V.clone().iadd(this)},q.prototype.isub=function W(V){if(V.negative!==0){V.negative=0;var N=this.iadd(V);return V.negative=1,N._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(V),this.negative=1,this._normSign();var L=this.cmp(V);if(L===0)return this.negative=0,this.length=1,this.words[0]=0,this;var F,R;if(L>0)F=this,R=V;else F=V,R=this;var O=0;for(var w=0;w<R.length;w++)N=(F.words[w]|0)-(R.words[w]|0)+O,O=N>>26,this.words[w]=N&67108863;for(;O!==0&&w<F.length;w++)N=(F.words[w]|0)+O,O=N>>26,this.words[w]=N&67108863;if(O===0&&w<F.length&&F!==this)for(;w<F.length;w++)this.words[w]=F.words[w];if(this.length=Math.max(this.length,w),F!==this)this.negative=1;return this._strip()},q.prototype.sub=function W(V){return this.clone().isub(V)};function S(W,V,N){N.negative=V.negative^W.negative;var L=W.length+V.length|0;N.length=L,L=L-1|0;var F=W.words[0]|0,R=V.words[0]|0,O=F*R,w=O&67108863,x=O/67108864|0;N.words[0]=w;for(var E=1;E<L;E++){var v=x>>>26,p=x&67108863,i=Math.min(E,V.length-1);for(var s=Math.max(0,E-W.length+1);s<=i;s++){var X0=E-s|0;F=W.words[X0]|0,R=V.words[s]|0,O=F*R+p,v+=O/67108864|0,p=O&67108863}N.words[E]=p|0,x=v|0}if(x!==0)N.words[E]=x|0;else N.length--;return N._strip()}var _=function W(V,N,L){var F=V.words,R=N.words,O=L.words,w=0,x,E,v,p=F[0]|0,i=p&8191,s=p>>>13,X0=F[1]|0,n=X0&8191,r=X0>>>13,Z0=F[2]|0,e=Z0&8191,Q0=Z0>>>13,t=F[3]|0,a=t&8191,$0=t>>>13,d0=F[4]|0,K0=d0&8191,z0=d0>>>13,J0=F[5]|0,Y0=J0&8191,W0=J0>>>13,T0=F[6]|0,M0=T0&8191,A0=T0>>>13,C$=F[7]|0,P0=C$&8191,I0=C$>>>13,$8=F[8]|0,C0=$8&8191,S0=$8>>>13,o8=F[9]|0,F0=o8&8191,m0=o8>>>13,iQ=R[0]|0,c0=iQ&8191,p0=iQ>>>13,HX=R[1]|0,v0=HX&8191,g0=HX>>>13,NX=R[2]|0,y0=NX&8191,_0=NX>>>13,AX=R[3]|0,l0=AX&8191,k0=AX>>>13,nQ=R[4]|0,u=nQ&8191,d=nQ>>>13,i0=R[5]|0,U0=i0&8191,O0=i0>>>13,Q8=R[6]|0,w0=Q8&8191,B0=Q8>>>13,oQ=R[7]|0,u0=oQ&8191,b0=oQ>>>13,rQ=R[8]|0,x0=rQ&8191,f0=rQ>>>13,y8=R[9]|0,L$=y8&8191,H$=y8>>>13;L.negative=V.negative^N.negative,L.length=19,x=Math.imul(i,c0),E=Math.imul(i,p0),E=E+Math.imul(s,c0)|0,v=Math.imul(s,p0);var K8=(w+x|0)+((E&8191)<<13)|0;w=(v+(E>>>13)|0)+(K8>>>26)|0,K8&=67108863,x=Math.imul(n,c0),E=Math.imul(n,p0),E=E+Math.imul(r,c0)|0,v=Math.imul(r,p0),x=x+Math.imul(i,v0)|0,E=E+Math.imul(i,g0)|0,E=E+Math.imul(s,v0)|0,v=v+Math.imul(s,g0)|0;var JQ=(w+x|0)+((E&8191)<<13)|0;w=(v+(E>>>13)|0)+(JQ>>>26)|0,JQ&=67108863,x=Math.imul(e,c0),E=Math.imul(e,p0),E=E+Math.imul(Q0,c0)|0,v=Math.imul(Q0,p0),x=x+Math.imul(n,v0)|0,E=E+Math.imul(n,g0)|0,E=E+Math.imul(r,v0)|0,v=v+Math.imul(r,g0)|0,x=x+Math.imul(i,y0)|0,E=E+Math.imul(i,_0)|0,E=E+Math.imul(s,y0)|0,v=v+Math.imul(s,_0)|0;var qQ=(w+x|0)+((E&8191)<<13)|0;w=(v+(E>>>13)|0)+(qQ>>>26)|0,qQ&=67108863,x=Math.imul(a,c0),E=Math.imul(a,p0),E=E+Math.imul($0,c0)|0,v=Math.imul($0,p0),x=x+Math.imul(e,v0)|0,E=E+Math.imul(e,g0)|0,E=E+Math.imul(Q0,v0)|0,v=v+Math.imul(Q0,g0)|0,x=x+Math.imul(n,y0)|0,E=E+Math.imul(n,_0)|0,E=E+Math.imul(r,y0)|0,v=v+Math.imul(r,_0)|0,x=x+Math.imul(i,l0)|0,E=E+Math.imul(i,k0)|0,E=E+Math.imul(s,l0)|0,v=v+Math.imul(s,k0)|0;var GQ=(w+x|0)+((E&8191)<<13)|0;w=(v+(E>>>13)|0)+(GQ>>>26)|0,GQ&=67108863,x=Math.imul(K0,c0),E=Math.imul(K0,p0),E=E+Math.imul(z0,c0)|0,v=Math.imul(z0,p0),x=x+Math.imul(a,v0)|0,E=E+Math.imul(a,g0)|0,E=E+Math.imul($0,v0)|0,v=v+Math.imul($0,g0)|0,x=x+Math.imul(e,y0)|0,E=E+Math.imul(e,_0)|0,E=E+Math.imul(Q0,y0)|0,v=v+Math.imul(Q0,_0)|0,x=x+Math.imul(n,l0)|0,E=E+Math.imul(n,k0)|0,E=E+Math.imul(r,l0)|0,v=v+Math.imul(r,k0)|0,x=x+Math.imul(i,u)|0,E=E+Math.imul(i,d)|0,E=E+Math.imul(s,u)|0,v=v+Math.imul(s,d)|0;var zQ=(w+x|0)+((E&8191)<<13)|0;w=(v+(E>>>13)|0)+(zQ>>>26)|0,zQ&=67108863,x=Math.imul(Y0,c0),E=Math.imul(Y0,p0),E=E+Math.imul(W0,c0)|0,v=Math.imul(W0,p0),x=x+Math.imul(K0,v0)|0,E=E+Math.imul(K0,g0)|0,E=E+Math.imul(z0,v0)|0,v=v+Math.imul(z0,g0)|0,x=x+Math.imul(a,y0)|0,E=E+Math.imul(a,_0)|0,E=E+Math.imul($0,y0)|0,v=v+Math.imul($0,_0)|0,x=x+Math.imul(e,l0)|0,E=E+Math.imul(e,k0)|0,E=E+Math.imul(Q0,l0)|0,v=v+Math.imul(Q0,k0)|0,x=x+Math.imul(n,u)|0,E=E+Math.imul(n,d)|0,E=E+Math.imul(r,u)|0,v=v+Math.imul(r,d)|0,x=x+Math.imul(i,U0)|0,E=E+Math.imul(i,O0)|0,E=E+Math.imul(s,U0)|0,v=v+Math.imul(s,O0)|0;var KQ=(w+x|0)+((E&8191)<<13)|0;w=(v+(E>>>13)|0)+(KQ>>>26)|0,KQ&=67108863,x=Math.imul(M0,c0),E=Math.imul(M0,p0),E=E+Math.imul(A0,c0)|0,v=Math.imul(A0,p0),x=x+Math.imul(Y0,v0)|0,E=E+Math.imul(Y0,g0)|0,E=E+Math.imul(W0,v0)|0,v=v+Math.imul(W0,g0)|0,x=x+Math.imul(K0,y0)|0,E=E+Math.imul(K0,_0)|0,E=E+Math.imul(z0,y0)|0,v=v+Math.imul(z0,_0)|0,x=x+Math.imul(a,l0)|0,E=E+Math.imul(a,k0)|0,E=E+Math.imul($0,l0)|0,v=v+Math.imul($0,k0)|0,x=x+Math.imul(e,u)|0,E=E+Math.imul(e,d)|0,E=E+Math.imul(Q0,u)|0,v=v+Math.imul(Q0,d)|0,x=x+Math.imul(n,U0)|0,E=E+Math.imul(n,O0)|0,E=E+Math.imul(r,U0)|0,v=v+Math.imul(r,O0)|0,x=x+Math.imul(i,w0)|0,E=E+Math.imul(i,B0)|0,E=E+Math.imul(s,w0)|0,v=v+Math.imul(s,B0)|0;var UQ=(w+x|0)+((E&8191)<<13)|0;w=(v+(E>>>13)|0)+(UQ>>>26)|0,UQ&=67108863,x=Math.imul(P0,c0),E=Math.imul(P0,p0),E=E+Math.imul(I0,c0)|0,v=Math.imul(I0,p0),x=x+Math.imul(M0,v0)|0,E=E+Math.imul(M0,g0)|0,E=E+Math.imul(A0,v0)|0,v=v+Math.imul(A0,g0)|0,x=x+Math.imul(Y0,y0)|0,E=E+Math.imul(Y0,_0)|0,E=E+Math.imul(W0,y0)|0,v=v+Math.imul(W0,_0)|0,x=x+Math.imul(K0,l0)|0,E=E+Math.imul(K0,k0)|0,E=E+Math.imul(z0,l0)|0,v=v+Math.imul(z0,k0)|0,x=x+Math.imul(a,u)|0,E=E+Math.imul(a,d)|0,E=E+Math.imul($0,u)|0,v=v+Math.imul($0,d)|0,x=x+Math.imul(e,U0)|0,E=E+Math.imul(e,O0)|0,E=E+Math.imul(Q0,U0)|0,v=v+Math.imul(Q0,O0)|0,x=x+Math.imul(n,w0)|0,E=E+Math.imul(n,B0)|0,E=E+Math.imul(r,w0)|0,v=v+Math.imul(r,B0)|0,x=x+Math.imul(i,u0)|0,E=E+Math.imul(i,b0)|0,E=E+Math.imul(s,u0)|0,v=v+Math.imul(s,b0)|0;var WQ=(w+x|0)+((E&8191)<<13)|0;w=(v+(E>>>13)|0)+(WQ>>>26)|0,WQ&=67108863,x=Math.imul(C0,c0),E=Math.imul(C0,p0),E=E+Math.imul(S0,c0)|0,v=Math.imul(S0,p0),x=x+Math.imul(P0,v0)|0,E=E+Math.imul(P0,g0)|0,E=E+Math.imul(I0,v0)|0,v=v+Math.imul(I0,g0)|0,x=x+Math.imul(M0,y0)|0,E=E+Math.imul(M0,_0)|0,E=E+Math.imul(A0,y0)|0,v=v+Math.imul(A0,_0)|0,x=x+Math.imul(Y0,l0)|0,E=E+Math.imul(Y0,k0)|0,E=E+Math.imul(W0,l0)|0,v=v+Math.imul(W0,k0)|0,x=x+Math.imul(K0,u)|0,E=E+Math.imul(K0,d)|0,E=E+Math.imul(z0,u)|0,v=v+Math.imul(z0,d)|0,x=x+Math.imul(a,U0)|0,E=E+Math.imul(a,O0)|0,E=E+Math.imul($0,U0)|0,v=v+Math.imul($0,O0)|0,x=x+Math.imul(e,w0)|0,E=E+Math.imul(e,B0)|0,E=E+Math.imul(Q0,w0)|0,v=v+Math.imul(Q0,B0)|0,x=x+Math.imul(n,u0)|0,E=E+Math.imul(n,b0)|0,E=E+Math.imul(r,u0)|0,v=v+Math.imul(r,b0)|0,x=x+Math.imul(i,x0)|0,E=E+Math.imul(i,f0)|0,E=E+Math.imul(s,x0)|0,v=v+Math.imul(s,f0)|0;var VQ=(w+x|0)+((E&8191)<<13)|0;w=(v+(E>>>13)|0)+(VQ>>>26)|0,VQ&=67108863,x=Math.imul(F0,c0),E=Math.imul(F0,p0),E=E+Math.imul(m0,c0)|0,v=Math.imul(m0,p0),x=x+Math.imul(C0,v0)|0,E=E+Math.imul(C0,g0)|0,E=E+Math.imul(S0,v0)|0,v=v+Math.imul(S0,g0)|0,x=x+Math.imul(P0,y0)|0,E=E+Math.imul(P0,_0)|0,E=E+Math.imul(I0,y0)|0,v=v+Math.imul(I0,_0)|0,x=x+Math.imul(M0,l0)|0,E=E+Math.imul(M0,k0)|0,E=E+Math.imul(A0,l0)|0,v=v+Math.imul(A0,k0)|0,x=x+Math.imul(Y0,u)|0,E=E+Math.imul(Y0,d)|0,E=E+Math.imul(W0,u)|0,v=v+Math.imul(W0,d)|0,x=x+Math.imul(K0,U0)|0,E=E+Math.imul(K0,O0)|0,E=E+Math.imul(z0,U0)|0,v=v+Math.imul(z0,O0)|0,x=x+Math.imul(a,w0)|0,E=E+Math.imul(a,B0)|0,E=E+Math.imul($0,w0)|0,v=v+Math.imul($0,B0)|0,x=x+Math.imul(e,u0)|0,E=E+Math.imul(e,b0)|0,E=E+Math.imul(Q0,u0)|0,v=v+Math.imul(Q0,b0)|0,x=x+Math.imul(n,x0)|0,E=E+Math.imul(n,f0)|0,E=E+Math.imul(r,x0)|0,v=v+Math.imul(r,f0)|0,x=x+Math.imul(i,L$)|0,E=E+Math.imul(i,H$)|0,E=E+Math.imul(s,L$)|0,v=v+Math.imul(s,H$)|0;var OQ=(w+x|0)+((E&8191)<<13)|0;w=(v+(E>>>13)|0)+(OQ>>>26)|0,OQ&=67108863,x=Math.imul(F0,v0),E=Math.imul(F0,g0),E=E+Math.imul(m0,v0)|0,v=Math.imul(m0,g0),x=x+Math.imul(C0,y0)|0,E=E+Math.imul(C0,_0)|0,E=E+Math.imul(S0,y0)|0,v=v+Math.imul(S0,_0)|0,x=x+Math.imul(P0,l0)|0,E=E+Math.imul(P0,k0)|0,E=E+Math.imul(I0,l0)|0,v=v+Math.imul(I0,k0)|0,x=x+Math.imul(M0,u)|0,E=E+Math.imul(M0,d)|0,E=E+Math.imul(A0,u)|0,v=v+Math.imul(A0,d)|0,x=x+Math.imul(Y0,U0)|0,E=E+Math.imul(Y0,O0)|0,E=E+Math.imul(W0,U0)|0,v=v+Math.imul(W0,O0)|0,x=x+Math.imul(K0,w0)|0,E=E+Math.imul(K0,B0)|0,E=E+Math.imul(z0,w0)|0,v=v+Math.imul(z0,B0)|0,x=x+Math.imul(a,u0)|0,E=E+Math.imul(a,b0)|0,E=E+Math.imul($0,u0)|0,v=v+Math.imul($0,b0)|0,x=x+Math.imul(e,x0)|0,E=E+Math.imul(e,f0)|0,E=E+Math.imul(Q0,x0)|0,v=v+Math.imul(Q0,f0)|0,x=x+Math.imul(n,L$)|0,E=E+Math.imul(n,H$)|0,E=E+Math.imul(r,L$)|0,v=v+Math.imul(r,H$)|0;var MQ=(w+x|0)+((E&8191)<<13)|0;w=(v+(E>>>13)|0)+(MQ>>>26)|0,MQ&=67108863,x=Math.imul(F0,y0),E=Math.imul(F0,_0),E=E+Math.imul(m0,y0)|0,v=Math.imul(m0,_0),x=x+Math.imul(C0,l0)|0,E=E+Math.imul(C0,k0)|0,E=E+Math.imul(S0,l0)|0,v=v+Math.imul(S0,k0)|0,x=x+Math.imul(P0,u)|0,E=E+Math.imul(P0,d)|0,E=E+Math.imul(I0,u)|0,v=v+Math.imul(I0,d)|0,x=x+Math.imul(M0,U0)|0,E=E+Math.imul(M0,O0)|0,E=E+Math.imul(A0,U0)|0,v=v+Math.imul(A0,O0)|0,x=x+Math.imul(Y0,w0)|0,E=E+Math.imul(Y0,B0)|0,E=E+Math.imul(W0,w0)|0,v=v+Math.imul(W0,B0)|0,x=x+Math.imul(K0,u0)|0,E=E+Math.imul(K0,b0)|0,E=E+Math.imul(z0,u0)|0,v=v+Math.imul(z0,b0)|0,x=x+Math.imul(a,x0)|0,E=E+Math.imul(a,f0)|0,E=E+Math.imul($0,x0)|0,v=v+Math.imul($0,f0)|0,x=x+Math.imul(e,L$)|0,E=E+Math.imul(e,H$)|0,E=E+Math.imul(Q0,L$)|0,v=v+Math.imul(Q0,H$)|0;var DQ=(w+x|0)+((E&8191)<<13)|0;w=(v+(E>>>13)|0)+(DQ>>>26)|0,DQ&=67108863,x=Math.imul(F0,l0),E=Math.imul(F0,k0),E=E+Math.imul(m0,l0)|0,v=Math.imul(m0,k0),x=x+Math.imul(C0,u)|0,E=E+Math.imul(C0,d)|0,E=E+Math.imul(S0,u)|0,v=v+Math.imul(S0,d)|0,x=x+Math.imul(P0,U0)|0,E=E+Math.imul(P0,O0)|0,E=E+Math.imul(I0,U0)|0,v=v+Math.imul(I0,O0)|0,x=x+Math.imul(M0,w0)|0,E=E+Math.imul(M0,B0)|0,E=E+Math.imul(A0,w0)|0,v=v+Math.imul(A0,B0)|0,x=x+Math.imul(Y0,u0)|0,E=E+Math.imul(Y0,b0)|0,E=E+Math.imul(W0,u0)|0,v=v+Math.imul(W0,b0)|0,x=x+Math.imul(K0,x0)|0,E=E+Math.imul(K0,f0)|0,E=E+Math.imul(z0,x0)|0,v=v+Math.imul(z0,f0)|0,x=x+Math.imul(a,L$)|0,E=E+Math.imul(a,H$)|0,E=E+Math.imul($0,L$)|0,v=v+Math.imul($0,H$)|0;var jQ=(w+x|0)+((E&8191)<<13)|0;w=(v+(E>>>13)|0)+(jQ>>>26)|0,jQ&=67108863,x=Math.imul(F0,u),E=Math.imul(F0,d),E=E+Math.imul(m0,u)|0,v=Math.imul(m0,d),x=x+Math.imul(C0,U0)|0,E=E+Math.imul(C0,O0)|0,E=E+Math.imul(S0,U0)|0,v=v+Math.imul(S0,O0)|0,x=x+Math.imul(P0,w0)|0,E=E+Math.imul(P0,B0)|0,E=E+Math.imul(I0,w0)|0,v=v+Math.imul(I0,B0)|0,x=x+Math.imul(M0,u0)|0,E=E+Math.imul(M0,b0)|0,E=E+Math.imul(A0,u0)|0,v=v+Math.imul(A0,b0)|0,x=x+Math.imul(Y0,x0)|0,E=E+Math.imul(Y0,f0)|0,E=E+Math.imul(W0,x0)|0,v=v+Math.imul(W0,f0)|0,x=x+Math.imul(K0,L$)|0,E=E+Math.imul(K0,H$)|0,E=E+Math.imul(z0,L$)|0,v=v+Math.imul(z0,H$)|0;var PQ=(w+x|0)+((E&8191)<<13)|0;w=(v+(E>>>13)|0)+(PQ>>>26)|0,PQ&=67108863,x=Math.imul(F0,U0),E=Math.imul(F0,O0),E=E+Math.imul(m0,U0)|0,v=Math.imul(m0,O0),x=x+Math.imul(C0,w0)|0,E=E+Math.imul(C0,B0)|0,E=E+Math.imul(S0,w0)|0,v=v+Math.imul(S0,B0)|0,x=x+Math.imul(P0,u0)|0,E=E+Math.imul(P0,b0)|0,E=E+Math.imul(I0,u0)|0,v=v+Math.imul(I0,b0)|0,x=x+Math.imul(M0,x0)|0,E=E+Math.imul(M0,f0)|0,E=E+Math.imul(A0,x0)|0,v=v+Math.imul(A0,f0)|0,x=x+Math.imul(Y0,L$)|0,E=E+Math.imul(Y0,H$)|0,E=E+Math.imul(W0,L$)|0,v=v+Math.imul(W0,H$)|0;var HQ=(w+x|0)+((E&8191)<<13)|0;w=(v+(E>>>13)|0)+(HQ>>>26)|0,HQ&=67108863,x=Math.imul(F0,w0),E=Math.imul(F0,B0),E=E+Math.imul(m0,w0)|0,v=Math.imul(m0,B0),x=x+Math.imul(C0,u0)|0,E=E+Math.imul(C0,b0)|0,E=E+Math.imul(S0,u0)|0,v=v+Math.imul(S0,b0)|0,x=x+Math.imul(P0,x0)|0,E=E+Math.imul(P0,f0)|0,E=E+Math.imul(I0,x0)|0,v=v+Math.imul(I0,f0)|0,x=x+Math.imul(M0,L$)|0,E=E+Math.imul(M0,H$)|0,E=E+Math.imul(A0,L$)|0,v=v+Math.imul(A0,H$)|0;var NQ=(w+x|0)+((E&8191)<<13)|0;w=(v+(E>>>13)|0)+(NQ>>>26)|0,NQ&=67108863,x=Math.imul(F0,u0),E=Math.imul(F0,b0),E=E+Math.imul(m0,u0)|0,v=Math.imul(m0,b0),x=x+Math.imul(C0,x0)|0,E=E+Math.imul(C0,f0)|0,E=E+Math.imul(S0,x0)|0,v=v+Math.imul(S0,f0)|0,x=x+Math.imul(P0,L$)|0,E=E+Math.imul(P0,H$)|0,E=E+Math.imul(I0,L$)|0,v=v+Math.imul(I0,H$)|0;var bA=(w+x|0)+((E&8191)<<13)|0;w=(v+(E>>>13)|0)+(bA>>>26)|0,bA&=67108863,x=Math.imul(F0,x0),E=Math.imul(F0,f0),E=E+Math.imul(m0,x0)|0,v=Math.imul(m0,f0),x=x+Math.imul(C0,L$)|0,E=E+Math.imul(C0,H$)|0,E=E+Math.imul(S0,L$)|0,v=v+Math.imul(S0,H$)|0;var hA=(w+x|0)+((E&8191)<<13)|0;w=(v+(E>>>13)|0)+(hA>>>26)|0,hA&=67108863,x=Math.imul(F0,L$),E=Math.imul(F0,H$),E=E+Math.imul(m0,L$)|0,v=Math.imul(m0,H$);var mA=(w+x|0)+((E&8191)<<13)|0;if(w=(v+(E>>>13)|0)+(mA>>>26)|0,mA&=67108863,O[0]=K8,O[1]=JQ,O[2]=qQ,O[3]=GQ,O[4]=zQ,O[5]=KQ,O[6]=UQ,O[7]=WQ,O[8]=VQ,O[9]=OQ,O[10]=MQ,O[11]=DQ,O[12]=jQ,O[13]=PQ,O[14]=HQ,O[15]=NQ,O[16]=bA,O[17]=hA,O[18]=mA,w!==0)O[19]=w,L.length++;return L};if(!Math.imul)_=S;function k(W,V,N){N.negative=V.negative^W.negative,N.length=W.length+V.length;var L=0,F=0;for(var R=0;R<N.length-1;R++){var O=F;F=0;var w=L&67108863,x=Math.min(R,V.length-1);for(var E=Math.max(0,R-W.length+1);E<=x;E++){var v=R-E,p=W.words[v]|0,i=V.words[E]|0,s=p*i,X0=s&67108863;O=O+(s/67108864|0)|0,X0=X0+w|0,w=X0&67108863,O=O+(X0>>>26)|0,F+=O>>>26,O&=67108863}N.words[R]=w,L=O,O=F}if(L!==0)N.words[R]=L;else N.length--;return N._strip()}function f(W,V,N){return k(W,V,N)}q.prototype.mulTo=function W(V,N){var L,F=this.length+V.length;if(this.length===10&&V.length===10)L=_(this,V,N);else if(F<63)L=S(this,V,N);else if(F<1024)L=k(this,V,N);else L=f(this,V,N);return L};function g(W,V){this.x=W,this.y=V}g.prototype.makeRBT=function W(V){var N=new Array(V),L=q.prototype._countBits(V)-1;for(var F=0;F<V;F++)N[F]=this.revBin(F,L,V);return N},g.prototype.revBin=function W(V,N,L){if(V===0||V===L-1)return V;var F=0;for(var R=0;R<N;R++)F|=(V&1)<<N-R-1,V>>=1;return F},g.prototype.permute=function W(V,N,L,F,R,O){for(var w=0;w<O;w++)F[w]=N[V[w]],R[w]=L[V[w]]},g.prototype.transform=function W(V,N,L,F,R,O){this.permute(O,V,N,L,F,R);for(var w=1;w<R;w<<=1){var x=w<<1,E=Math.cos(2*Math.PI/x),v=Math.sin(2*Math.PI/x);for(var p=0;p<R;p+=x){var i=E,s=v;for(var X0=0;X0<w;X0++){var n=L[p+X0],r=F[p+X0],Z0=L[p+X0+w],e=F[p+X0+w],Q0=i*Z0-s*e;if(e=i*e+s*Z0,Z0=Q0,L[p+X0]=n+Z0,F[p+X0]=r+e,L[p+X0+w]=n-Z0,F[p+X0+w]=r-e,X0!==x)Q0=E*i-v*s,s=E*s+v*i,i=Q0}}}},g.prototype.guessLen13b=function W(V,N){var L=Math.max(N,V)|1,F=L&1,R=0;for(L=L/2|0;L;L=L>>>1)R++;return 1<<R+1+F},g.prototype.conjugate=function W(V,N,L){if(L<=1)return;for(var F=0;F<L/2;F++){var R=V[F];V[F]=V[L-F-1],V[L-F-1]=R,R=N[F],N[F]=-N[L-F-1],N[L-F-1]=-R}},g.prototype.normalize13b=function W(V,N){var L=0;for(var F=0;F<N/2;F++){var R=Math.round(V[2*F+1]/N)*8192+Math.round(V[2*F]/N)+L;if(V[F]=R&67108863,R<67108864)L=0;else L=R/67108864|0}return V},g.prototype.convert13b=function W(V,N,L,F){var R=0;for(var O=0;O<N;O++)R=R+(V[O]|0),L[2*O]=R&8191,R=R>>>13,L[2*O+1]=R&8191,R=R>>>13;for(O=2*N;O<F;++O)L[O]=0;Z(R===0),Z((R&-8192)===0)},g.prototype.stub=function W(V){var N=new Array(V);for(var L=0;L<V;L++)N[L]=0;return N},g.prototype.mulp=function W(V,N,L){var F=2*this.guessLen13b(V.length,N.length),R=this.makeRBT(F),O=this.stub(F),w=new Array(F),x=new Array(F),E=new Array(F),v=new Array(F),p=new Array(F),i=new Array(F),s=L.words;s.length=F,this.convert13b(V.words,V.length,w,F),this.convert13b(N.words,N.length,v,F),this.transform(w,O,x,E,F,R),this.transform(v,O,p,i,F,R);for(var X0=0;X0<F;X0++){var n=x[X0]*p[X0]-E[X0]*i[X0];E[X0]=x[X0]*i[X0]+E[X0]*p[X0],x[X0]=n}return this.conjugate(x,E,F),this.transform(x,E,s,O,F,R),this.conjugate(s,O,F),this.normalize13b(s,F),L.negative=V.negative^N.negative,L.length=V.length+N.length,L._strip()},q.prototype.mul=function W(V){var N=new q(null);return N.words=new Array(this.length+V.length),this.mulTo(V,N)},q.prototype.mulf=function W(V){var N=new q(null);return N.words=new Array(this.length+V.length),f(this,V,N)},q.prototype.imul=function W(V){return this.clone().mulTo(V,this)},q.prototype.imuln=function W(V){var N=V<0;if(N)V=-V;Z(typeof V==="number"),Z(V<67108864);var L=0;for(var F=0;F<this.length;F++){var R=(this.words[F]|0)*V,O=(R&67108863)+(L&67108863);L>>=26,L+=R/67108864|0,L+=O>>>26,this.words[F]=O&67108863}if(L!==0)this.words[F]=L,this.length++;return this.length=V===0?1:this.length,N?this.ineg():this},q.prototype.muln=function W(V){return this.clone().imuln(V)},q.prototype.sqr=function W(){return this.mul(this)},q.prototype.isqr=function W(){return this.imul(this.clone())},q.prototype.pow=function W(V){var N=B(V);if(N.length===0)return new q(1);var L=this;for(var F=0;F<N.length;F++,L=L.sqr())if(N[F]!==0)break;if(++F<N.length)for(var R=L.sqr();F<N.length;F++,R=R.sqr()){if(N[F]===0)continue;L=L.mul(R)}return L},q.prototype.iushln=function W(V){Z(typeof V==="number"&&V>=0);var N=V%26,L=(V-N)/26,F=67108863>>>26-N<<26-N,R;if(N!==0){var O=0;for(R=0;R<this.length;R++){var w=this.words[R]&F,x=(this.words[R]|0)-w<<N;this.words[R]=x|O,O=w>>>26-N}if(O)this.words[R]=O,this.length++}if(L!==0){for(R=this.length-1;R>=0;R--)this.words[R+L]=this.words[R];for(R=0;R<L;R++)this.words[R]=0;this.length+=L}return this._strip()},q.prototype.ishln=function W(V){return Z(this.negative===0),this.iushln(V)},q.prototype.iushrn=function W(V,N,L){Z(typeof V==="number"&&V>=0);var F;if(N)F=(N-N%26)/26;else F=0;var R=V%26,O=Math.min((V-R)/26,this.length),w=67108863^67108863>>>R<<R,x=L;if(F-=O,F=Math.max(0,F),x){for(var E=0;E<O;E++)x.words[E]=this.words[E];x.length=O}if(O===0);else if(this.length>O){this.length-=O;for(E=0;E<this.length;E++)this.words[E]=this.words[E+O]}else this.words[0]=0,this.length=1;var v=0;for(E=this.length-1;E>=0&&(v!==0||E>=F);E--){var p=this.words[E]|0;this.words[E]=v<<26-R|p>>>R,v=p&w}if(x&&v!==0)x.words[x.length++]=v;if(this.length===0)this.words[0]=0,this.length=1;return this._strip()},q.prototype.ishrn=function W(V,N,L){return Z(this.negative===0),this.iushrn(V,N,L)},q.prototype.shln=function W(V){return this.clone().ishln(V)},q.prototype.ushln=function W(V){return this.clone().iushln(V)},q.prototype.shrn=function W(V){return this.clone().ishrn(V)},q.prototype.ushrn=function W(V){return this.clone().iushrn(V)},q.prototype.testn=function W(V){Z(typeof V==="number"&&V>=0);var N=V%26,L=(V-N)/26,F=1<<N;if(this.length<=L)return!1;var R=this.words[L];return!!(R&F)},q.prototype.imaskn=function W(V){Z(typeof V==="number"&&V>=0);var N=V%26,L=(V-N)/26;if(Z(this.negative===0,"imaskn works only with positive numbers"),this.length<=L)return this;if(N!==0)L++;if(this.length=Math.min(L,this.length),N!==0){var F=67108863^67108863>>>N<<N;this.words[this.length-1]&=F}return this._strip()},q.prototype.maskn=function W(V){return this.clone().imaskn(V)},q.prototype.iaddn=function W(V){if(Z(typeof V==="number"),Z(V<67108864),V<0)return this.isubn(-V);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<=V)return this.words[0]=V-(this.words[0]|0),this.negative=0,this;return this.negative=0,this.isubn(V),this.negative=1,this}return this._iaddn(V)},q.prototype._iaddn=function W(V){this.words[0]+=V;for(var N=0;N<this.length&&this.words[N]>=67108864;N++)if(this.words[N]-=67108864,N===this.length-1)this.words[N+1]=1;else this.words[N+1]++;return this.length=Math.max(this.length,N+1),this},q.prototype.isubn=function W(V){if(Z(typeof V==="number"),Z(V<67108864),V<0)return this.iaddn(-V);if(this.negative!==0)return this.negative=0,this.iaddn(V),this.negative=1,this;if(this.words[0]-=V,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var N=0;N<this.length&&this.words[N]<0;N++)this.words[N]+=67108864,this.words[N+1]-=1;return this._strip()},q.prototype.addn=function W(V){return this.clone().iaddn(V)},q.prototype.subn=function W(V){return this.clone().isubn(V)},q.prototype.iabs=function W(){return this.negative=0,this},q.prototype.abs=function W(){return this.clone().iabs()},q.prototype._ishlnsubmul=function W(V,N,L){var F=V.length+L,R;this._expand(F);var O,w=0;for(R=0;R<V.length;R++){O=(this.words[R+L]|0)+w;var x=(V.words[R]|0)*N;O-=x&67108863,w=(O>>26)-(x/67108864|0),this.words[R+L]=O&67108863}for(;R<this.length-L;R++)O=(this.words[R+L]|0)+w,w=O>>26,this.words[R+L]=O&67108863;if(w===0)return this._strip();Z(w===-1),w=0;for(R=0;R<this.length;R++)O=-(this.words[R]|0)+w,w=O>>26,this.words[R]=O&67108863;return this.negative=1,this._strip()},q.prototype._wordDiv=function W(V,N){var L=this.length-V.length,F=this.clone(),R=V,O=R.words[R.length-1]|0,w=this._countBits(O);if(L=26-w,L!==0)R=R.ushln(L),F.iushln(L),O=R.words[R.length-1]|0;var x=F.length-R.length,E;if(N!=="mod"){E=new q(null),E.length=x+1,E.words=new Array(E.length);for(var v=0;v<E.length;v++)E.words[v]=0}var p=F.clone()._ishlnsubmul(R,1,x);if(p.negative===0){if(F=p,E)E.words[x]=1}for(var i=x-1;i>=0;i--){var s=(F.words[R.length+i]|0)*67108864+(F.words[R.length+i-1]|0);s=Math.min(s/O|0,67108863),F._ishlnsubmul(R,s,i);while(F.negative!==0)if(s--,F.negative=0,F._ishlnsubmul(R,1,i),!F.isZero())F.negative^=1;if(E)E.words[i]=s}if(E)E._strip();if(F._strip(),N!=="div"&&L!==0)F.iushrn(L);return{div:E||null,mod:F}},q.prototype.divmod=function W(V,N,L){if(Z(!V.isZero()),this.isZero())return{div:new q(0),mod:new q(0)};var F,R,O;if(this.negative!==0&&V.negative===0){if(O=this.neg().divmod(V,N),N!=="mod")F=O.div.neg();if(N!=="div"){if(R=O.mod.neg(),L&&R.negative!==0)R.iadd(V)}return{div:F,mod:R}}if(this.negative===0&&V.negative!==0){if(O=this.divmod(V.neg(),N),N!=="mod")F=O.div.neg();return{div:F,mod:O.mod}}if((this.negative&V.negative)!==0){if(O=this.neg().divmod(V.neg(),N),N!=="div"){if(R=O.mod.neg(),L&&R.negative!==0)R.isub(V)}return{div:O.div,mod:R}}if(V.length>this.length||this.cmp(V)<0)return{div:new q(0),mod:this};if(V.length===1){if(N==="div")return{div:this.divn(V.words[0]),mod:null};if(N==="mod")return{div:null,mod:new q(this.modrn(V.words[0]))};return{div:this.divn(V.words[0]),mod:new q(this.modrn(V.words[0]))}}return this._wordDiv(V,N)},q.prototype.div=function W(V){return this.divmod(V,"div",!1).div},q.prototype.mod=function W(V){return this.divmod(V,"mod",!1).mod},q.prototype.umod=function W(V){return this.divmod(V,"mod",!0).mod},q.prototype.divRound=function W(V){var N=this.divmod(V);if(N.mod.isZero())return N.div;var L=N.div.negative!==0?N.mod.isub(V):N.mod,F=V.ushrn(1),R=V.andln(1),O=L.cmp(F);if(O<0||R===1&&O===0)return N.div;return N.div.negative!==0?N.div.isubn(1):N.div.iaddn(1)},q.prototype.modrn=function W(V){var N=V<0;if(N)V=-V;Z(V<=67108863);var L=67108864%V,F=0;for(var R=this.length-1;R>=0;R--)F=(L*F+(this.words[R]|0))%V;return N?-F:F},q.prototype.modn=function W(V){return this.modrn(V)},q.prototype.idivn=function W(V){var N=V<0;if(N)V=-V;Z(V<=67108863);var L=0;for(var F=this.length-1;F>=0;F--){var R=(this.words[F]|0)+L*67108864;this.words[F]=R/V|0,L=R%V}return this._strip(),N?this.ineg():this},q.prototype.divn=function W(V){return this.clone().idivn(V)},q.prototype.egcd=function W(V){Z(V.negative===0),Z(!V.isZero());var N=this,L=V.clone();if(N.negative!==0)N=N.umod(V);else N=N.clone();var F=new q(1),R=new q(0),O=new q(0),w=new q(1),x=0;while(N.isEven()&&L.isEven())N.iushrn(1),L.iushrn(1),++x;var E=L.clone(),v=N.clone();while(!N.isZero()){for(var p=0,i=1;(N.words[0]&i)===0&&p<26;++p,i<<=1);if(p>0){N.iushrn(p);while(p-- >0){if(F.isOdd()||R.isOdd())F.iadd(E),R.isub(v);F.iushrn(1),R.iushrn(1)}}for(var s=0,X0=1;(L.words[0]&X0)===0&&s<26;++s,X0<<=1);if(s>0){L.iushrn(s);while(s-- >0){if(O.isOdd()||w.isOdd())O.iadd(E),w.isub(v);O.iushrn(1),w.iushrn(1)}}if(N.cmp(L)>=0)N.isub(L),F.isub(O),R.isub(w);else L.isub(N),O.isub(F),w.isub(R)}return{a:O,b:w,gcd:L.iushln(x)}},q.prototype._invmp=function W(V){Z(V.negative===0),Z(!V.isZero());var N=this,L=V.clone();if(N.negative!==0)N=N.umod(V);else N=N.clone();var F=new q(1),R=new q(0),O=L.clone();while(N.cmpn(1)>0&&L.cmpn(1)>0){for(var w=0,x=1;(N.words[0]&x)===0&&w<26;++w,x<<=1);if(w>0){N.iushrn(w);while(w-- >0){if(F.isOdd())F.iadd(O);F.iushrn(1)}}for(var E=0,v=1;(L.words[0]&v)===0&&E<26;++E,v<<=1);if(E>0){L.iushrn(E);while(E-- >0){if(R.isOdd())R.iadd(O);R.iushrn(1)}}if(N.cmp(L)>=0)N.isub(L),F.isub(R);else L.isub(N),R.isub(F)}var p;if(N.cmpn(1)===0)p=F;else p=R;if(p.cmpn(0)<0)p.iadd(V);return p},q.prototype.gcd=function W(V){if(this.isZero())return V.abs();if(V.isZero())return this.abs();var N=this.clone(),L=V.clone();N.negative=0,L.negative=0;for(var F=0;N.isEven()&&L.isEven();F++)N.iushrn(1),L.iushrn(1);do{while(N.isEven())N.iushrn(1);while(L.isEven())L.iushrn(1);var R=N.cmp(L);if(R<0){var O=N;N=L,L=O}else if(R===0||L.cmpn(1)===0)break;N.isub(L)}while(!0);return L.iushln(F)},q.prototype.invm=function W(V){return this.egcd(V).a.umod(V)},q.prototype.isEven=function W(){return(this.words[0]&1)===0},q.prototype.isOdd=function W(){return(this.words[0]&1)===1},q.prototype.andln=function W(V){return this.words[0]&V},q.prototype.bincn=function W(V){Z(typeof V==="number");var N=V%26,L=(V-N)/26,F=1<<N;if(this.length<=L)return this._expand(L+1),this.words[L]|=F,this;var R=F;for(var O=L;R!==0&&O<this.length;O++){var w=this.words[O]|0;w+=R,R=w>>>26,w&=67108863,this.words[O]=w}if(R!==0)this.words[O]=R,this.length++;return this},q.prototype.isZero=function W(){return this.length===1&&this.words[0]===0},q.prototype.cmpn=function W(V){var N=V<0;if(this.negative!==0&&!N)return-1;if(this.negative===0&&N)return 1;this._strip();var L;if(this.length>1)L=1;else{if(N)V=-V;Z(V<=67108863,"Number is too big");var F=this.words[0]|0;L=F===V?0:F<V?-1:1}if(this.negative!==0)return-L|0;return L},q.prototype.cmp=function W(V){if(this.negative!==0&&V.negative===0)return-1;if(this.negative===0&&V.negative!==0)return 1;var N=this.ucmp(V);if(this.negative!==0)return-N|0;return N},q.prototype.ucmp=function W(V){if(this.length>V.length)return 1;if(this.length<V.length)return-1;var N=0;for(var L=this.length-1;L>=0;L--){var F=this.words[L]|0,R=V.words[L]|0;if(F===R)continue;if(F<R)N=-1;else if(F>R)N=1;break}return N},q.prototype.gtn=function W(V){return this.cmpn(V)===1},q.prototype.gt=function W(V){return this.cmp(V)===1},q.prototype.gten=function W(V){return this.cmpn(V)>=0},q.prototype.gte=function W(V){return this.cmp(V)>=0},q.prototype.ltn=function W(V){return this.cmpn(V)===-1},q.prototype.lt=function W(V){return this.cmp(V)===-1},q.prototype.lten=function W(V){return this.cmpn(V)<=0},q.prototype.lte=function W(V){return this.cmp(V)<=0},q.prototype.eqn=function W(V){return this.cmpn(V)===0},q.prototype.eq=function W(V){return this.cmp(V)===0},q.red=function W(V){return new K(V)},q.prototype.toRed=function W(V){return Z(!this.red,"Already a number in reduction context"),Z(this.negative===0,"red works only with positives"),V.convertTo(this)._forceRed(V)},q.prototype.fromRed=function W(){return Z(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},q.prototype._forceRed=function W(V){return this.red=V,this},q.prototype.forceRed=function W(V){return Z(!this.red,"Already a number in reduction context"),this._forceRed(V)},q.prototype.redAdd=function W(V){return Z(this.red,"redAdd works only with red numbers"),this.red.add(this,V)},q.prototype.redIAdd=function W(V){return Z(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,V)},q.prototype.redSub=function W(V){return Z(this.red,"redSub works only with red numbers"),this.red.sub(this,V)},q.prototype.redISub=function W(V){return Z(this.red,"redISub works only with red numbers"),this.red.isub(this,V)},q.prototype.redShl=function W(V){return Z(this.red,"redShl works only with red numbers"),this.red.shl(this,V)},q.prototype.redMul=function W(V){return Z(this.red,"redMul works only with red numbers"),this.red._verify2(this,V),this.red.mul(this,V)},q.prototype.redIMul=function W(V){return Z(this.red,"redMul works only with red numbers"),this.red._verify2(this,V),this.red.imul(this,V)},q.prototype.redSqr=function W(){return Z(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},q.prototype.redISqr=function W(){return Z(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},q.prototype.redSqrt=function W(){return Z(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},q.prototype.redInvm=function W(){return Z(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},q.prototype.redNeg=function W(){return Z(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},q.prototype.redPow=function W(V){return Z(this.red&&!V.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,V)};var b={k256:null,p224:null,p192:null,p25519:null};function m(W,V){this.name=W,this.p=new q(V,16),this.n=this.p.bitLength(),this.k=new q(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}m.prototype._tmp=function W(){var V=new q(null);return V.words=new Array(Math.ceil(this.n/13)),V},m.prototype.ireduce=function W(V){var N=V,L;do this.split(N,this.tmp),N=this.imulK(N),N=N.iadd(this.tmp),L=N.bitLength();while(L>this.n);var F=L<this.n?-1:N.ucmp(this.p);if(F===0)N.words[0]=0,N.length=1;else if(F>0)N.isub(this.p);else if(N.strip!==void 0)N.strip();else N._strip();return N},m.prototype.split=function W(V,N){V.iushrn(this.n,0,N)},m.prototype.imulK=function W(V){return V.imul(this.k)};function l(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}J(l,m),l.prototype.split=function W(V,N){var L=4194303,F=Math.min(V.length,9);for(var R=0;R<F;R++)N.words[R]=V.words[R];if(N.length=F,V.length<=9){V.words[0]=0,V.length=1;return}var O=V.words[9];N.words[N.length++]=O&L;for(R=10;R<V.length;R++){var w=V.words[R]|0;V.words[R-10]=(w&L)<<4|O>>>22,O=w}if(O>>>=22,V.words[R-10]=O,O===0&&V.length>10)V.length-=10;else V.length-=9},l.prototype.imulK=function W(V){V.words[V.length]=0,V.words[V.length+1]=0,V.length+=2;var N=0;for(var L=0;L<V.length;L++){var F=V.words[L]|0;N+=F*977,V.words[L]=N&67108863,N=F*64+(N/67108864|0)}if(V.words[V.length-1]===0){if(V.length--,V.words[V.length-1]===0)V.length--}return V};function h(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}J(h,m);function c(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}J(c,m);function T(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}J(T,m),T.prototype.imulK=function W(V){var N=0;for(var L=0;L<V.length;L++){var F=(V.words[L]|0)*19+N,R=F&67108863;F>>>=26,V.words[L]=R,N=F}if(N!==0)V.words[V.length++]=N;return V},q._prime=function W(V){if(b[V])return b[V];var N;if(V==="k256")N=new l;else if(V==="p224")N=new h;else if(V==="p192")N=new c;else if(V==="p25519")N=new T;else throw new Error("Unknown prime "+V);return b[V]=N,N};function K(W){if(typeof W==="string"){var V=q._prime(W);this.m=V.p,this.prime=V}else Z(W.gtn(1),"modulus must be greater than 1"),this.m=W,this.prime=null}K.prototype._verify1=function W(V){Z(V.negative===0,"red works only with positives"),Z(V.red,"red works only with red numbers")},K.prototype._verify2=function W(V,N){Z((V.negative|N.negative)===0,"red works only with positives"),Z(V.red&&V.red===N.red,"red works only with red numbers")},K.prototype.imod=function W(V){if(this.prime)return this.prime.ireduce(V)._forceRed(this);return P(V,V.umod(this.m)._forceRed(this)),V},K.prototype.neg=function W(V){if(V.isZero())return V.clone();return this.m.sub(V)._forceRed(this)},K.prototype.add=function W(V,N){this._verify2(V,N);var L=V.add(N);if(L.cmp(this.m)>=0)L.isub(this.m);return L._forceRed(this)},K.prototype.iadd=function W(V,N){this._verify2(V,N);var L=V.iadd(N);if(L.cmp(this.m)>=0)L.isub(this.m);return L},K.prototype.sub=function W(V,N){this._verify2(V,N);var L=V.sub(N);if(L.cmpn(0)<0)L.iadd(this.m);return L._forceRed(this)},K.prototype.isub=function W(V,N){this._verify2(V,N);var L=V.isub(N);if(L.cmpn(0)<0)L.iadd(this.m);return L},K.prototype.shl=function W(V,N){return this._verify1(V),this.imod(V.ushln(N))},K.prototype.imul=function W(V,N){return this._verify2(V,N),this.imod(V.imul(N))},K.prototype.mul=function W(V,N){return this._verify2(V,N),this.imod(V.mul(N))},K.prototype.isqr=function W(V){return this.imul(V,V.clone())},K.prototype.sqr=function W(V){return this.mul(V,V)},K.prototype.sqrt=function W(V){if(V.isZero())return V.clone();var N=this.m.andln(3);if(Z(N%2===1),N===3){var L=this.m.add(new q(1)).iushrn(2);return this.pow(V,L)}var F=this.m.subn(1),R=0;while(!F.isZero()&&F.andln(1)===0)R++,F.iushrn(1);Z(!F.isZero());var O=new q(1).toRed(this),w=O.redNeg(),x=this.m.subn(1).iushrn(1),E=this.m.bitLength();E=new q(2*E*E).toRed(this);while(this.pow(E,x).cmp(w)!==0)E.redIAdd(w);var v=this.pow(E,F),p=this.pow(V,F.addn(1).iushrn(1)),i=this.pow(V,F),s=R;while(i.cmp(O)!==0){var X0=i;for(var n=0;X0.cmp(O)!==0;n++)X0=X0.redSqr();Z(n<s);var r=this.pow(v,new q(1).iushln(s-n-1));p=p.redMul(r),v=r.redSqr(),i=i.redMul(v),s=n}return p},K.prototype.invm=function W(V){var N=V._invmp(this.m);if(N.negative!==0)return N.negative=0,this.imod(N).redNeg();else return this.imod(N)},K.prototype.pow=function W(V,N){if(N.isZero())return new q(1).toRed(this);if(N.cmpn(1)===0)return V.clone();var L=4,F=new Array(1<<L);F[0]=new q(1).toRed(this),F[1]=V;for(var R=2;R<F.length;R++)F[R]=this.mul(F[R-1],V);var O=F[0],w=0,x=0,E=N.bitLength()%26;if(E===0)E=26;for(R=N.length-1;R>=0;R--){var v=N.words[R];for(var p=E-1;p>=0;p--){var i=v>>p&1;if(O!==F[0])O=this.sqr(O);if(i===0&&w===0){x=0;continue}if(w<<=1,w|=i,x++,x!==L&&(R!==0||p!==0))continue;O=this.mul(O,F[w]),x=0,w=0}E=26}return O},K.prototype.convertTo=function W(V){var N=V.umod(this.m);return N===V?N.clone():N},K.prototype.convertFrom=function W(V){var N=V.clone();return N.red=null,N},q.mont=function W(V){return new U(V)};function U(W){if(K.call(this,W),this.shift=this.m.bitLength(),this.shift%26!==0)this.shift+=26-this.shift%26;this.r=new q(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}J(U,K),U.prototype.convertTo=function W(V){return this.imod(V.ushln(this.shift))},U.prototype.convertFrom=function W(V){var N=this.imod(V.mul(this.rinv));return N.red=null,N},U.prototype.imul=function W(V,N){if(V.isZero()||N.isZero())return V.words[0]=0,V.length=1,V;var L=V.imul(N),F=L.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=L.isub(F).iushrn(this.shift),O=R;if(R.cmp(this.m)>=0)O=R.isub(this.m);else if(R.cmpn(0)<0)O=R.iadd(this.m);return O._forceRed(this)},U.prototype.mul=function W(V,N){if(V.isZero()||N.isZero())return new q(0)._forceRed(this);var L=V.mul(N),F=L.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=L.isub(F).iushrn(this.shift),O=R;if(R.cmp(this.m)>=0)O=R.isub(this.m);else if(R.cmpn(0)<0)O=R.iadd(this.m);return O._forceRed(this)},U.prototype.invm=function W(V){var N=this.imod(V._invmp(this.m).mul(this.r2));return N._forceRed(this)}})(typeof Q==="undefined"||Q,$)}),Bm=o0(($,Q)=>{var X=AK0(),Y=QH(),Z=_Y().Buffer;function J(z){var M=z.modulus.byteLength(),j;do j=new X(Y(M));while(j.cmp(z.modulus)>=0||!j.umod(z.prime1)||!j.umod(z.prime2));return j}function q(z){var M=J(z),j=M.toRed(X.mont(z.modulus)).redPow(new X(z.publicExponent)).fromRed();return{blinder:j,unblinder:M.invm(z.modulus)}}function G(z,M){var j=q(M),P=M.modulus.byteLength(),D=new X(z).mul(j.blinder).umod(M.modulus),A=D.toRed(X.mont(M.prime1)),I=D.toRed(X.mont(M.prime2)),H=M.coefficient,C=M.prime1,B=M.prime2,S=A.redPow(M.exponent1).fromRed(),_=I.redPow(M.exponent2).fromRed(),k=S.isub(_).imul(H).umod(C).imul(B);return _.iadd(k).imul(j.unblinder).umod(M.modulus).toArrayLike(Z,"be",P)}G.getr=J,Q.exports=G}),RK0=o0(($,Q)=>{var X=wm(),Y=QH(),Z=XH(),J=Tm(),q=Im(),G=mw(),z=Fm(),M=Bm(),j=_Y().Buffer;Q.exports=function I(H,C,B){var S;if(H.padding)S=H.padding;else if(B)S=1;else S=4;var _=X(H),k;if(S===4)k=P(_,C);else if(S===1)k=D(_,C,B);else if(S===3){if(k=new G(C),k.cmp(_.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");if(B)return M(k,_);else return z(k,_)};function P(I,H){var C=I.modulus.byteLength(),B=H.length,S=Z("sha1").update(j.alloc(0)).digest(),_=S.length,k=2*_;if(B>C-k-2)throw new Error("message too long");var f=j.alloc(C-B-k-2),g=C-_-1,b=Y(_),m=q(j.concat([S,f,j.alloc(1,1),H],g),J(b,g)),l=q(b,J(m,_));return new G(j.concat([j.alloc(1),l,m],C))}function D(I,H,C){var B=H.length,S=I.modulus.byteLength();if(B>S-11)throw new Error("message too long");var _;if(C)_=j.alloc(S-B-3,255);else _=A(S-B-3);return new G(j.concat([j.from([0,C?1:2]),_,j.alloc(1),H],S))}function A(I){var H=j.allocUnsafe(I),C=0,B=Y(I*2),S=0,_;while(C<I){if(S===B.length)B=Y(I*2),S=0;if(_=B[S++],_)H[C++]=_}return H}}),CK0=o0(($,Q)=>{var X=wm(),Y=Tm(),Z=Im(),J=mw(),q=Bm(),G=XH(),z=Fm(),M=_Y().Buffer;Q.exports=function A(I,H,C){var B;if(I.padding)B=I.padding;else if(C)B=1;else B=4;var S=X(I),_=S.modulus.byteLength();if(H.length>_||new J(H).cmp(S.modulus)>=0)throw new Error("decryption error");var k;if(C)k=z(new J(H),S);else k=q(H,S);var f=M.alloc(_-k.length);if(k=M.concat([f,k],_),B===4)return j(S,k);else if(B===1)return P(S,k,C);else if(B===3)return k;else throw new Error("unknown padding")};function j(A,I){var H=A.modulus.byteLength(),C=G("sha1").update(M.alloc(0)).digest(),B=C.length;if(I[0]!==0)throw new Error("decryption error");var S=I.slice(1,B+1),_=I.slice(B+1),k=Z(S,Y(_,B)),f=Z(_,Y(k,H-B-1));if(D(C,f.slice(0,B)))throw new Error("decryption error");var g=B;while(f[g]===0)g++;if(f[g++]!==1)throw new Error("decryption error");return f.slice(g)}function P(A,I,H){var C=I.slice(0,2),B=2,S=0;while(I[B++]!==0)if(B>=I.length){S++;break}var _=I.slice(2,B-1);if(C.toString("hex")!=="0002"&&!H||C.toString("hex")!=="0001"&&H)S++;if(_.length<8)S++;if(S)throw new Error("decryption error");return I.slice(B)}function D(A,I){A=M.from(A),I=M.from(I);var H=0,C=A.length;if(A.length!==I.length)H++,C=Math.min(A.length,I.length);var B=-1;while(++B<C)H+=A[B]^I[B];return H}}),fw=o0(($)=>{$.publicEncrypt=RK0(),$.privateDecrypt=CK0(),$.privateEncrypt=function Q(X,Y){return $.publicEncrypt(X,Y,!0)},$.publicDecrypt=function Q(X,Y){return $.privateDecrypt(X,Y,!0)}}),LK0=o0(($)=>{var Q=(QY(),I$($Y));if(typeof Q.publicEncrypt!=="function")Q=fw();if($.publicEncrypt=Q.publicEncrypt,$.privateDecrypt=Q.privateDecrypt,typeof Q.privateEncrypt!=="function")$.privateEncrypt=fw().privateEncrypt;else $.privateEncrypt=Q.privateEncrypt;if(typeof Q.publicDecrypt!=="function")$.publicDecrypt=fw().publicDecrypt;else $.publicDecrypt=Q.publicDecrypt}),wK0=o0(($)=>{var Q=_Y(),X=QH(),Y=Q.Buffer,Z=Q.kMaxLength,J=globalThis.crypto||globalThis.msCrypto,q=Math.pow(2,32)-1;function G(D,A){if(typeof D!=="number"||D!==D)throw new TypeError("offset must be a number");if(D>q||D<0)throw new TypeError("offset must be a uint32");if(D>Z||D>A)throw new RangeError("offset out of range")}function z(D,A,I){if(typeof D!=="number"||D!==D)throw new TypeError("size must be a number");if(D>q||D<0)throw new TypeError("size must be a uint32");if(D+A>I||D>Z)throw new RangeError("buffer too small")}J&&J.getRandomValues,$.randomFill=M,$.randomFillSync=P;function M(D,A,I,H){if(!Y.isBuffer(D)&&!(D instanceof globalThis.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof A==="function")H=A,A=0,I=D.length;else if(typeof I==="function")H=I,I=D.length-A;else if(typeof H!=="function")throw new TypeError('"cb" argument must be a function');return G(A,D.length),z(I,A,D.length),j(D,A,I,H)}function j(D,A,I,H){if(!1)var C,B;if(H){X(I,function(_,k){if(_)return H(_);k.copy(D,A),H(null,D)});return}var S=X(I);return S.copy(D,A),D}function P(D,A,I){if(typeof A==="undefined")A=0;if(!Y.isBuffer(D)&&!(D instanceof globalThis.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(G(A,D.length),I===void 0)I=D.length-A;return z(I,A,D.length),j(D,A,I)}}),TK0=o0(($,Q)=>{var X=(QY(),I$($Y));if(typeof X.randomFill==="function"&&typeof X.randomFillSync==="function")$.randomFill=X.randomFill,$.randomFillSync=X.randomFillSync;else Q.exports=wK0()}),IK0=o0(($)=>{$.randomBytes=$.rng=$.pseudoRandomBytes=$.prng=QH(),$.createHash=$.Hash=XH(),$.createHmac=$.Hmac=Wm();var Q=E40(),X=Object.keys(Q),Y=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(X);$.getHashes=function(){return Y};var Z=Om();$.pbkdf2=Z.pbkdf2,$.pbkdf2Sync=Z.pbkdf2Sync;var J=k40();$.Cipher=J.Cipher,$.createCipher=J.createCipher,$.Cipheriv=J.Cipheriv,$.createCipheriv=J.createCipheriv,$.Decipher=J.Decipher,$.createDecipher=J.createDecipher,$.Decipheriv=J.Decipheriv,$.createDecipheriv=J.createDecipheriv,$.getCiphers=J.getCiphers,$.listCiphers=J.listCiphers;var q=x40();$.DiffieHellmanGroup=q.DiffieHellmanGroup,$.createDiffieHellmanGroup=q.createDiffieHellmanGroup,$.getDiffieHellman=q.getDiffieHellman,$.createDiffieHellman=q.createDiffieHellman,$.DiffieHellman=q.DiffieHellman;var G=f40();$.createSign=G.createSign,$.Sign=G.Sign,$.createVerify=G.createVerify,$.Verify=G.Verify,$.createECDH=YK0();var z=LK0();$.publicEncrypt=z.publicEncrypt,$.privateEncrypt=z.privateEncrypt,$.publicDecrypt=z.publicDecrypt,$.privateDecrypt=z.privateDecrypt;var M=TK0();$.randomFill=M.randomFill,$.randomFillSync=M.randomFillSync,$.createCredentials=function(){throw new Error(`sorry, createCredentials is not implemented yet
we accept pull requests
https://github.com/browserify/crypto-browserify`)},$.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}}),E$=S40(IK0(),1),FK0=E$.prng,BK0=E$.pseudoRandomBytes,SK0=E$.rng,EK0=E$.randomBytes,_K0=E$.Hash,kK0=E$.createHash,xK0=E$.Hmac,fK0=E$.createHmac,vK0=E$.getHashes,gK0=E$.pbkdf2,yK0=E$.pbkdf2Sync,bK0=E$.Cipher,hK0=E$.createCipher,mK0=E$.Cipheriv,cK0=E$.createCipheriv,pK0=E$.Decipher,lK0=E$.createDecipher,uK0=E$.Decipheriv,dK0=E$.createDecipheriv,iK0=E$.getCiphers,nK0=E$.listCiphers,oK0=E$.DiffieHellmanGroup,rK0=E$.createDiffieHellmanGroup,sK0=E$.getDiffieHellman,aK0=E$.createDiffieHellman,tK0=E$.DiffieHellman,eK0=E$.createSign,$U0=E$.Sign,QU0=E$.createVerify,XU0=E$.Verify,YU0=E$.createECDH,ZU0=E$.publicEncrypt,JU0=E$.privateEncrypt,qU0=E$.publicDecrypt,GU0=E$.privateDecrypt,zU0=E$.randomFill,KU0=E$.randomFillSync,UU0=E$.createCredentials,WU0=E$.constants,DU0=["p192","p224","p256","p384","p521","curve25519","ed25519","secp256k1","secp224r1","prime256v1","prime192v1","ed25519","secp384r1","secp521r1"];PU0=crypto,HU0=crypto});var Em=d$((Jk0,Sm)=>{var iU=1000,nU=iU*60,oU=nU*60,Cz=oU*24,NU0=Cz*7,AU0=Cz*365.25;Sm.exports=function($,Q){Q=Q||{};var X=typeof $;if(X==="string"&&$.length>0)return RU0($);else if(X==="number"&&isFinite($))return Q.long?LU0($):CU0($);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify($))};function RU0($){if($=String($),$.length>100)return;var Q=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec($);if(!Q)return;var X=parseFloat(Q[1]),Y=(Q[2]||"ms").toLowerCase();switch(Y){case"years":case"year":case"yrs":case"yr":case"y":return X*AU0;case"weeks":case"week":case"w":return X*NU0;case"days":case"day":case"d":return X*Cz;case"hours":case"hour":case"hrs":case"hr":case"h":return X*oU;case"minutes":case"minute":case"mins":case"min":case"m":return X*nU;case"seconds":case"second":case"secs":case"sec":case"s":return X*iU;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return X;default:return}}function CU0($){var Q=Math.abs($);if(Q>=Cz)return Math.round($/Cz)+"d";if(Q>=oU)return Math.round($/oU)+"h";if(Q>=nU)return Math.round($/nU)+"m";if(Q>=iU)return Math.round($/iU)+"s";return $+"ms"}function LU0($){var Q=Math.abs($);if(Q>=Cz)return ZH($,Q,Cz,"day");if(Q>=oU)return ZH($,Q,oU,"hour");if(Q>=nU)return ZH($,Q,nU,"minute");if(Q>=iU)return ZH($,Q,iU,"second");return $+" ms"}function ZH($,Q,X,Y){var Z=Q>=X*1.5;return Math.round($/X)+" "+Y+(Z?"s":"")}});var km=d$((qk0,_m)=>{function wU0($){X.debug=X,X.default=X,X.coerce=z,X.disable=q,X.enable=Z,X.enabled=G,X.humanize=Em(),X.destroy=M,Object.keys($).forEach((j)=>{X[j]=$[j]}),X.names=[],X.skips=[],X.formatters={};function Q(j){let P=0;for(let D=0;D<j.length;D++)P=(P<<5)-P+j.charCodeAt(D),P|=0;return X.colors[Math.abs(P)%X.colors.length]}X.selectColor=Q;function X(j){let P,D=null,A,I;function H(...C){if(!H.enabled)return;let B=H,S=Number(new Date),_=S-(P||S);if(B.diff=_,B.prev=P,B.curr=S,P=S,C[0]=X.coerce(C[0]),typeof C[0]!=="string")C.unshift("%O");let k=0;C[0]=C[0].replace(/%([a-zA-Z%])/g,(g,b)=>{if(g==="%%")return"%";k++;let m=X.formatters[b];if(typeof m==="function"){let l=C[k];g=m.call(B,l),C.splice(k,1),k--}return g}),X.formatArgs.call(B,C),(B.log||X.log).apply(B,C)}if(H.namespace=j,H.useColors=X.useColors(),H.color=X.selectColor(j),H.extend=Y,H.destroy=X.destroy,Object.defineProperty(H,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(D!==null)return D;if(A!==X.namespaces)A=X.namespaces,I=X.enabled(j);return I},set:(C)=>{D=C}}),typeof X.init==="function")X.init(H);return H}function Y(j,P){let D=X(this.namespace+(typeof P==="undefined"?":":P)+j);return D.log=this.log,D}function Z(j){X.save(j),X.namespaces=j,X.names=[],X.skips=[];let P=(typeof j==="string"?j:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let D of P)if(D[0]==="-")X.skips.push(D.slice(1));else X.names.push(D)}function J(j,P){let D=0,A=0,I=-1,H=0;while(D<j.length)if(A<P.length&&(P[A]===j[D]||P[A]==="*"))if(P[A]==="*")I=A,H=D,A++;else D++,A++;else if(I!==-1)A=I+1,H++,D=H;else return!1;while(A<P.length&&P[A]==="*")A++;return A===P.length}function q(){let j=[...X.names,...X.skips.map((P)=>"-"+P)].join(",");return X.enable(""),j}function G(j){for(let P of X.skips)if(J(j,P))return!1;for(let P of X.names)if(J(j,P))return!0;return!1}function z(j){if(j instanceof Error)return j.stack||j.message;return j}function M(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return X.enable(X.load()),X}_m.exports=wU0});var QX=d$((xm,JH)=>{xm.formatArgs=IU0;xm.save=FU0;xm.load=BU0;xm.useColors=TU0;xm.storage=SU0();xm.destroy=(()=>{let $=!1;return()=>{if(!$)$=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();xm.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function TU0(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let $;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&($=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt($[1],10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function IU0($){if($[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+$[0]+(this.useColors?"%c ":" ")+"+"+JH.exports.humanize(this.diff),!this.useColors)return;let Q="color: "+this.color;$.splice(1,0,Q,"color: inherit");let X=0,Y=0;$[0].replace(/%[a-zA-Z%]/g,(Z)=>{if(Z==="%%")return;if(X++,Z==="%c")Y=X}),$.splice(Y,0,Q)}xm.log=console.debug||console.log||(()=>{});function FU0($){try{if($)xm.storage.setItem("debug",$);else xm.storage.removeItem("debug")}catch(Q){}}function BU0(){let $;try{$=xm.storage.getItem("debug")||xm.storage.getItem("DEBUG")}catch(Q){}if(!$&&typeof process!=="undefined"&&"env"in process)$=process.env.DEBUG;return $}function SU0(){try{return localStorage}catch($){}}JH.exports=km()(xm);var{formatters:EU0}=JH.exports;EU0.j=function($){try{return JSON.stringify($)}catch(Q){return"[UnexpectedJSONParseError]: "+Q.message}}});var bm={};r8(bm,{sha256Hash20:()=>uU0,sha256Hash:()=>lU0,randomBytes:()=>bU0,log:()=>O$,isBrowser:()=>U8,hashObject:()=>pU0,hash20:()=>gm,hash:()=>cU0,getSignerDisplayInfo:()=>pw,getSignerAddress:()=>fm,getEntityDisplayInfo:()=>cw,generateSignerAvatar:()=>xV,generateEntityAvatar:()=>q7,formatSignerDisplay:()=>G7,formatEntityDisplay:()=>o$,extractNumberFromEntityId:()=>Hz,deterministicStringify:()=>ym,cryptoHash:()=>sU,createHash:()=>qH,clearDatabase:()=>GH,DEMO_SIGNERS:()=>zH,DEBUG:()=>s0,Buffer:()=>fV});async function sU($){let X=new TextEncoder().encode($),Y=await crypto.subtle.digest("SHA-256",X),Z=new Uint8Array(Y);return`0x${Array.from(Z).map((q)=>q.toString(16).padStart(2,"0")).join("")}`}async function pU0($){let Q=ym($);return await sU(Q)}async function gm($){return(await sU($)).slice(0,42)}function ym($){return JSON.stringify($,(Q,X)=>{if(typeof X==="bigint")return X.toString();return X})}var U8,qH,bU0,hU0=()=>{if(U8)return{from:($,Q="utf8")=>{if(typeof $==="string")return new TextEncoder().encode($);return new Uint8Array($)}};return(h8(),I$(b8)).Buffer},fV,mU0=($)=>{return $.includes("state")||$.includes("tx")||$.includes("block")||$.includes("error")||$.includes("diff")||$.includes("info")?console.log.bind(console,`[${$}]`):()=>{}},rU,O$,cU0=($)=>{let Q=qH("sha256").update($.toString()).digest();return fV.from(Q)},s0=!0,GH=async($)=>{if(console.log("Clearing database and resetting history..."),$)await $.clear(),console.log(" Database cleared via provided instance");else if(typeof indexedDB!=="undefined"){let Q=["db","level-js-db","level-db"];try{let X=Q.map((Y)=>{return new Promise((Z)=>{let J=indexedDB.deleteDatabase(Y);J.onsuccess=()=>{console.log(` Cleared IndexedDB: ${Y}`),Z()},J.onerror=()=>{console.log(` Could not clear IndexedDB: ${Y} (may not exist)`),Z()},J.onblocked=()=>{console.log(` IndexedDB deletion blocked: ${Y}`),Z()}})});if(await Promise.all(X),console.log(" All databases cleared, re-initializing..."),typeof window!=="undefined"&&window.reinitializeAfterClear)window.reinitializeAfterClear();return}catch(X){if(console.log(" Error clearing IndexedDB:",X),typeof window!=="undefined"&&window.reinitializeAfterClear)window.reinitializeAfterClear();return}}console.log("Database cleared.")},o$=($)=>{if(!$)return"undefined";let Q=Hz($);if(Q!==null)return Q.toString();else return $},cw=($)=>{if(!$)return{name:"Entity (undefined)",avatar:"",type:"numbered"};let Q=Hz($);if(Q!==null)return{name:`Entity #${Q}`,avatar:q7($),type:"numbered"};else return{name:$,avatar:q7($),type:"lazy"}},zH,G7=($)=>{let Q=zH[$];if(Q)return`\uD83D\uDC64 ${Q.name}`;return $},pw=($)=>{let Q=zH[$];if(Q)return{name:Q.name,address:Q.address,avatar:xV($)};return{name:$,address:$,avatar:xV($)}},fm=($)=>{let Q=zH[$];if(Q)return Q.address;return $},q7=($)=>{try{let Q=hR($,40);return`data:image/svg+xml,${encodeURIComponent(Q)}`}catch(Q){return vm($)}},xV=($)=>{try{let Q=fm($),X=hR(Q,32);return`data:image/svg+xml,${encodeURIComponent(X)}`}catch(Q){return vm($)}},vm=($)=>{let Q=0;for(let G=0;G<$.length;G++)Q=(Q<<5)-Q+$.charCodeAt(G)&4294967295;let J=`<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg">
    <circle cx="16" cy="16" r="16" fill="hsl(${Math.abs(Q)%360}, ${70}%, ${50}%)"/>
  </svg>`;return`data:image/svg+xml;base64,${fV.from(J).toString("base64")}`},lU0,uU0;var tX=y(()=>{mf();NJ();if(typeof global==="undefined")globalThis.global=globalThis;U8=typeof window!=="undefined",qH=U8?($)=>({update:(Q)=>({digest:(X)=>{let Y=new TextEncoder,Z=0;for(let G=0;G<Q.length;G++){let z=Q.charCodeAt(G);Z=(Z<<5)-Z+z,Z=Z&Z}let J=Math.abs(Z).toString(16).padStart(8,"0"),q=(J+J+J+J).slice(0,64);if(X==="hex")return q;else{let G=new Uint8Array(32);for(let z=0;z<32;z++)G[z]=parseInt(q.substr(z*2,2),16);return fV.from(G)}}})}):(QY(),I$($Y)).createHash,bU0=U8?($)=>{let Q=new Uint8Array($);return crypto.getRandomValues(Q),Q}:(QY(),I$($Y)).randomBytes,fV=hU0();if(U8)Uint8Array.prototype.toString=function($="utf8"){return new TextDecoder().decode(this)},window.Buffer=fV;rU=U8?mU0:QX(),O$={state:rU("state:\uD83D\uDD35"),tx:rU("tx:\uD83D\uDFE1"),block:rU("block:\uD83D\uDFE2"),error:rU("error:\uD83D\uDD34"),diff:rU("diff:\uD83D\uDFE3"),info:rU("info:")},zH={alice:{name:"alice.eth",address:"0x70997970C51812dc3A010C7d01b50e0d17dc79C8"},bob:{name:"bob.eth",address:"0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC"},carol:{name:"carol.eth",address:"0x90F79bf6EB2c4f870365E785982E1f101E93b906"},david:{name:"david.eth",address:"0x15d34AAf54267DB7D7c367839AAf71A00a2C6A65"},eve:{name:"eve.eth",address:"0x9965507D1a55bcC2695C58ba16FB37d819B0A4dc"}};lU0=sU,uU0=gm});var dU0=async($,Q)=>{if(!$)return;try{await $.put(`profile:${Q.entityId}`,IG(Q)),await iU0($,Q.name,Q.entityId),console.log(`\uD83D\uDCDD Stored profile for ${Q.name} (${o$(Q.entityId)})`)}catch{}},KH=async($,Q)=>{if(!$)return null;try{let X=await $.get(`profile:${Q}`);return FG(X)}catch(X){return null}},iU0=async($,Q,X)=>{try{let Y={};try{let Z=await $.get("name-index");Y=FG(Z)}catch{}Y[Q.toLowerCase()]=X,await $.put("name-index",IG(Y))}catch(Y){console.error("Error updating name index:",Y)}},hm=async($,Q,X=10)=>{if(!$||!Q.trim())return[];try{let Y=await $.get("name-index"),Z=FG(Y),J=Q.toLowerCase(),q=[];for(let[G,z]of Object.entries(Z))if(G.includes(J)){let M=0;if(G.startsWith(J))M=1;else if(G.includes(J))M=0.7;let j=await KH($,z),P=j?.avatar||q7(z);q.push({entityId:z,name:j?.name||o$(z),avatar:P,relevance:M})}return q.sort((G,z)=>{if(G.relevance!==z.relevance)return z.relevance-G.relevance;return G.name.localeCompare(z.name)}),q.slice(0,X)}catch(Y){return console.error("Error searching entity names:",Y),[]}},mm=($)=>{return{type:"profile-update",data:$}},cm=async($,Q,X,Y,Z)=>{console.log(`\uD83C\uDFF7 processProfileUpdate called for ${Q} with updates:`,X);try{let J=await KH($,Q);if(!J)J={entityId:Q,name:o$(Q),lastUpdated:Date.now(),hankoSignature:Y};if(X.name!==void 0)J.name=X.name;if(X.avatar!==void 0)J.avatar=X.avatar;if(X.bio!==void 0)J.bio=X.bio;if(X.website!==void 0)J.website=X.website;if(J.lastUpdated=Date.now(),J.hankoSignature=Y,Z?.gossip?.announce)try{Z.gossip.announce({entityId:Q,capabilities:[],hubs:[],metadata:{name:J.name,avatar:J.avatar,bio:J.bio,website:J.website,lastUpdated:J.lastUpdated,hankoSignature:J.hankoSignature}}),console.log(`\uD83D\uDCE1 Synced profile update to gossip: ${Q}`)}catch(q){console.error(` Failed to sync profile to gossip layer for ${Q}:`,q)}await dU0($,J),console.log(` Updated profile for ${J.name} (${o$(Q)})`)}catch(J){console.error("Error processing profile update:",J)}},pm=async($,Q)=>{return(await KH($,Q))?.name||o$(Q)},lm=async($,Q)=>{let X=await KH($,Q);return{name:X?.name||o$(Q),avatar:X?.avatar||q7(Q)}};var lw=y(()=>{rD();tX()});function z7($,Q="unknown"){if(!$||typeof $!=="object")throw new Error(`Invalid Delta object from ${Q}: ${$}`);let X=$,Y=[];if(typeof X.tokenId!=="number"||!Number.isInteger(X.tokenId)||X.tokenId<0)Y.push(`tokenId must be non-negative integer, got: ${X.tokenId}`);let Z=["collateral","ondelta","offdelta","leftCreditLimit","rightCreditLimit","leftAllowance","rightAllowance"];for(let J of Z){let q=X[J];if(q===null||q===void 0)Y.push(`${J} cannot be null/undefined, got: ${q}`);else if(typeof q!=="bigint")if(typeof q==="string"&&/^-?\d+n?$/.test(q))try{X[J]=BigInt(q.replace(/n$/,""))}catch(G){Y.push(`${J} invalid BigInt string: ${q}`)}else Y.push(`${J} must be BigInt, got: ${typeof q} (${q})`)}if(Y.length>0)throw new Error(`Delta validation failed from ${Q}:
${Y.join(`
`)}`);return{tokenId:X.tokenId,collateral:X.collateral,ondelta:X.ondelta,offdelta:X.offdelta,leftCreditLimit:X.leftCreditLimit,rightCreditLimit:X.rightCreditLimit,leftAllowance:X.leftAllowance,rightAllowance:X.rightAllowance}}function im($,Q="unknown"){if(!$)return console.warn(`No deltas provided from ${Q}, returning empty Map`),new Map;let X=new Map;if($ instanceof Map)for(let[Y,Z]of $.entries())try{let J=z7(Z,`${Q}.Map[${Y}]`);X.set(Y,J)}catch(J){console.error(`Skipping invalid delta for token ${Y}:`,J)}else if(typeof $==="object")for(let[Y,Z]of Object.entries($)){let J=parseInt(Y,10);if(isNaN(J)){console.error(`Invalid tokenId: ${Y}`);continue}try{let q=z7(Z,`${Q}.Object[${J}]`);X.set(J,q)}catch(q){console.error(`Skipping invalid delta for token ${J}:`,q)}}else return console.error(`Invalid deltas format from ${Q}:`,typeof $),new Map;return console.log(` Validated ${X.size} deltas from ${Q}`),X}function nm($){return{tokenId:$,collateral:0n,ondelta:0n,offdelta:0n,leftCreditLimit:1000000000000000000000000n,rightCreditLimit:1000000000000000000000000n,leftAllowance:0n,rightAllowance:0n}}function om($){try{return z7($,"type-guard"),!0}catch{return!1}}function dw($){if(!$||typeof $!=="object")throw new Error("FINANCIAL-SAFETY: EntityInput is null/undefined or not an object");let Q=$;if(!Q.entityId||typeof Q.entityId!=="string")throw new Error("FINANCIAL-SAFETY: entityId is missing or invalid - financial routing corruption detected");if(!Q.signerId||typeof Q.signerId!=="string")throw new Error("FINANCIAL-SAFETY: signerId is missing or invalid - payment routing will fail");if(!Q.entityTxs||!Array.isArray(Q.entityTxs))throw new Error("FINANCIAL-SAFETY: entityTxs is missing or invalid");return Q}function rm($){if(!$||typeof $!=="object")throw new Error("FINANCIAL-SAFETY: EntityOutput is null/undefined or not an object");let Q=$;if(!Q.entityId||typeof Q.entityId!=="string")throw new Error("FINANCIAL-SAFETY: EntityOutput entityId is missing - routing corruption");if(!Q.signerId||typeof Q.signerId!=="string")throw new Error("FINANCIAL-SAFETY: EntityOutput signerId is missing - routing corruption");return Q}function um($,Q){if(typeof $!=="string"||$.length===0)throw new vV(`${Q} must be a non-empty string`,$);return $}function dm($,Q){if(typeof $!=="number"||!Number.isFinite($))throw new vV(`${Q} must be a finite number`,$);return $}function sm($,Q){if(!$||typeof $!=="object"||Array.isArray($))throw new vV(`${Q} must be a non-null object`,$);return $}function uw($,Q){if(!Array.isArray($))throw new vV(`${Q} must be an array`,$);return $}function am($,Q="AccountFrame"){let X=sm($,Q),Y={height:dm(X.height,`${Q}.height`),timestamp:dm(X.timestamp,`${Q}.timestamp`),accountTxs:uw(X.accountTxs,`${Q}.accountTxs`),prevFrameHash:um(X.prevFrameHash,`${Q}.prevFrameHash`),stateHash:um(X.stateHash,`${Q}.stateHash`),tokenIds:uw(X.tokenIds||[],`${Q}.tokenIds`),deltas:uw(X.deltas||[],`${Q}.deltas`)};if(Y.stateHash.length===0)throw new p5("AccountFrame.stateHash cannot be empty");if(Y.timestamp<=0)throw new p5("AccountFrame.timestamp must be positive",{timestamp:Y.timestamp});return Y}function iw($,Q="EntityState"){let X=sm($,Q);if(!X.entityId||typeof X.entityId!=="string")throw new p5(`${Q}.entityId must be a string`);if(typeof X.height!=="number")throw new p5(`${Q}.height must be a number`);if(typeof X.timestamp!=="number")throw new p5(`${Q}.timestamp must be a number`);if(!(X.reserves instanceof Map))throw new p5(`${Q}.reserves must be a Map`);if(!(X.accounts instanceof Map))throw new p5(`${Q}.accounts must be a Map`);for(let[Y,Z]of X.reserves.entries())if(typeof Z!=="bigint")throw new p5(`Reserve amount for token ${Y} must be bigint`,{tokenId:Y,amount:Z});return X}var p5,vV;var gV=y(()=>{p5=class p5 extends Error{constructor($,Q){super(`\uD83D\uDEA8 FINANCIAL-SAFETY VIOLATION: ${$}`);if(this.name="FinancialDataCorruptionError",Q)this.message+=`
Context: ${k$(Q)}`}};vV=class vV extends Error{constructor($,Q){super(`\uD83D\uDEE1 TYPE-SAFETY VIOLATION: ${$}`);if(this.name="TypeSafetyViolationError",Q!==void 0)this.message+=`
Received: ${typeof Q} = ${String(Q)}`}}});function yV($,Q){if(Q===null||Q===void 0)return`0 ${I9($).symbol}`;let X=I9($);return`${v1(Q,X.decimals)} ${X.symbol}`}function tm($,Q){let X=I9($);return EG(Q,X.decimals)}function em($,Q,X){if(Q===X)return $;if(Q>X){let Y=10n**BigInt(Q-X);return $/Y}else{let Y=10n**BigInt(X-Q);return $*Y}}function UH($,Q){if($===null||$===void 0||Q===null||Q===void 0)return 0;if(Q===0n)return 0;return Number($*100n/Q)}function nw($){if($.amount===null||$.amount===void 0)return`0 ${$.symbol}`;return`${v1($.amount,$.decimals)} ${$.symbol}`}var $c,Qc;var bV=y(()=>{Mz();$9();$c={add:($,Q)=>{return($??0n)+(Q??0n)},subtract:($,Q)=>{let X=$??0n,Y=Q??0n;if(Y>X)throw new Error(`Underflow: ${X} - ${Y}`);return X-Y},multiply:($,Q)=>{return($??0n)*(Q??0n)},divide:($,Q)=>{let X=$??0n,Y=Q??1n;if(Y===0n)throw new Error("Division by zero");return{quotient:X/Y,remainder:X%Y}},compare:($,Q)=>{let X=$??0n,Y=Q??0n;if(X<Y)return-1;if(X>Y)return 1;return 0},abs:($)=>{let Q=$??0n;return Q<0n?-Q:Q},min:($,Q)=>{let X=$??0n,Y=Q??0n;return X<Y?X:Y},max:($,Q)=>{let X=$??0n,Y=Q??0n;return X>Y?X:Y}},Qc={ZERO:0n,ONE:1n,WEI_PER_ETH:10n**18n,USDC_DECIMALS:6,ETH_DECIMALS:18,DEFAULT_DECIMALS:18}});var Yc={};r8(Yc,{isLeft:()=>K7,getTokenInfo:()=>I9,getDefaultCreditLimit:()=>BX,formatTokenAmount:()=>yV,deriveDelta:()=>Lz,createDemoDelta:()=>hV,calculatePercentage:()=>UH,TOKEN_REGISTRY:()=>Xc});function K7($,Q){return $<Q}function Lz($,Q){z7($,"deriveDelta");let X=(h)=>h<0n?0n:h,Y=$.ondelta+$.offdelta,Z=X($.collateral),J=$.leftCreditLimit,q=$.rightCreditLimit,G=Y>0n?X(Z-Y):Z,z=Y>0n?Y>Z?Z:Y:0n,M=X(-Y);if(M>J)M=J;let j=X(Y-Z);if(j>q)j=q;let P=X(J-M),D=X(q-j),A=$.rightAllowance,I=$.leftAllowance,H=Z+J+q,C=X(M+G+D-A),B=X(j+z+P-I);if(!Q)[G,A,C,z,I,B]=[z,I,B,G,A,C],[J,q]=[q,J],[P,M,j,D]=[D,j,M,P];let S=Number(H),_=Math.floor(Number(J)/S*50),k=Math.floor(Number(Z)/S*50),f=50-_-k,g=Math.floor((Number(Y)+Number(J))/S*50),b="-".repeat(_)+"=".repeat(k)+"-".repeat(f),m=Math.max(0,Math.min(g,b.length)),l="["+b.substring(0,m)+"|"+b.substring(m)+"]";return{delta:Y,collateral:Z,inCollateral:G,outCollateral:z,inOwnCredit:M,outPeerCredit:j,inAllowence:A,outAllowence:I,totalCapacity:H,ownCreditLimit:J,peerCreditLimit:q,inCapacity:C,outCapacity:B,outOwnCredit:P,inPeerCredit:D,ascii:l}}function hV($,Q=1000n,X=0n){let Y=BX($);return z7({tokenId:$,collateral:Q,ondelta:X,offdelta:0n,leftCreditLimit:Y,rightCreditLimit:Y,leftAllowance:0n,rightAllowance:0n},"createDemoDelta")}function I9($){return Xc[$]||{symbol:`TKN${$}`,name:`Token ${$}`,decimals:18,color:"#999"}}function BX($){let Q=I9($),X=BigInt(Q.decimals??18);return nU0*10n**X}var nU0=1000000n,Xc;var $9=y(()=>{gV();bV();bV();Xc={1:{symbol:"USDC",name:"USD Coin",decimals:18,color:"#2775ca"},2:{symbol:"ETH",name:"Ethereum",decimals:18,color:"#627eea"}}});function mV($){let Q=[];for(let[Y,Z]of $.accounts.entries()){let J=new Map;for(let[q,G]of Z.deltas.entries()){let z=K7(Z.proofHeader.fromEntity,Z.proofHeader.toEntity),M=Lz(G,z);J.set(q,{inCapacity:M.inCapacity,outCapacity:M.outCapacity})}Q.push({counterpartyId:Y,tokenCapacities:J})}return{entityId:$.entityId,capabilities:[],hubs:[],metadata:{lastUpdated:Date.now(),isHub:!1,routingFeePPM:100,baseFee:0n},accounts:Q}}var ow=y(()=>{$9()});function B8($,Q){if($.messages.push(Q),$.messages.length>oU0)$.messages.shift()}function WH($,Q){for(let X of Q)B8($,X)}function XY($){try{let Q=structuredClone($);if(typeof Q.jBlock!=="number")console.error("\uD83D\uDCA5 CLONE-CORRUPTION: structuredClone corrupted jBlock!"),console.error(`\uD83D\uDCA5   Original: ${$.jBlock} (${typeof $.jBlock})`),console.error(`\uD83D\uDCA5   Cloned: ${Q.jBlock} (${typeof Q.jBlock})`),Q.jBlock=$.jBlock??0;return iw(Q,"cloneEntityState.structuredClone")}catch(Q){let X=rU0($);return iw(X,"cloneEntityState.manual")}}function rU0($){return{...$,nonces:aU($.nonces),messages:tU($.messages),proposals:new Map(Array.from($.proposals.entries()).map(([Q,X])=>[Q,{...X,votes:aU(X.votes)}])),reserves:aU($.reserves),accounts:new Map(Array.from($.accounts.entries()).map(([Q,X])=>[Q,{...X,mempool:tU(X.mempool),deltas:aU(X.deltas),proofHeader:{...X.proofHeader},proofBody:{tokenIds:[...X.proofBody.tokenIds],deltas:[...X.proofBody.deltas]}}])),accountInputQueue:tU($.accountInputQueue||[]),jBlock:$.jBlock??0}}function rw($){try{return structuredClone($)}catch(Q){return Jc($)}}function Jc($){let Q={counterpartyEntityId:$.counterpartyEntityId,mempool:[...$.mempool],currentFrame:{...$.currentFrame,tokenIds:[...$.currentFrame.tokenIds],deltas:[...$.currentFrame.deltas]},sentTransitions:$.sentTransitions,ackedTransitions:$.ackedTransitions,deltas:new Map(Array.from($.deltas.entries()).map(([X,Y])=>[X,{...Y}])),globalCreditLimits:{...$.globalCreditLimits},currentHeight:$.currentHeight,pendingSignatures:[...$.pendingSignatures],rollbackCount:$.rollbackCount,sendCounter:$.sendCounter,receiveCounter:$.receiveCounter,frameHistory:[...$.frameHistory],proofHeader:{...$.proofHeader},proofBody:{...$.proofBody,tokenIds:[...$.proofBody.tokenIds],deltas:[...$.proofBody.deltas]},pendingWithdrawals:new Map($.pendingWithdrawals),requestedRebalance:new Map($.requestedRebalance)};if($.pendingFrame)Q.pendingFrame={...$.pendingFrame,accountTxs:[...$.pendingFrame.accountTxs],tokenIds:[...$.pendingFrame.tokenIds],deltas:[...$.pendingFrame.deltas]};if($.clonedForValidation)Q.clonedForValidation=Jc($.clonedForValidation);if($.hankoSignature)Q.hankoSignature=$.hankoSignature;return Q}var oU0=10,aU=($)=>new Map($),tU=($)=>[...$],cV=($)=>{return{entityId:$.entityId,signerId:$.signerId,state:XY($.state),mempool:tU($.mempool),...$.proposal&&{proposal:{height:$.proposal.height,txs:tU($.proposal.txs),hash:$.proposal.hash,newState:$.proposal.newState,signatures:aU($.proposal.signatures)}},...$.lockedFrame&&{lockedFrame:{height:$.lockedFrame.height,txs:tU($.lockedFrame.txs),hash:$.lockedFrame.hash,newState:$.lockedFrame.newState,signatures:aU($.lockedFrame.signatures)}},isProposer:$.isProposer,...$.sentTransitions!==void 0&&{sentTransitions:$.sentTransitions},...$.position&&{position:{...$.position}}}},Zc=($,Q,X,Y,Z,J)=>{let q=$.gossip?.getProfiles?$.gossip.getProfiles().map((P)=>{try{return structuredClone(P)}catch(D){try{return gh(k$(P))}catch{return P}}}):[],G={height:$.height,timestamp:$.timestamp,replicas:new Map(Array.from($.replicas.entries()).map(([P,D])=>[P,cV(D)])),runtimeInput:{runtimeTxs:[...Y.runtimeTxs],entityInputs:Y.entityInputs.map((P)=>({entityId:P.entityId,signerId:P.signerId,...P.entityTxs&&{entityTxs:[...P.entityTxs]},...P.precommits&&{precommits:new Map(P.precommits)},...P.proposedFrame&&{proposedFrame:P.proposedFrame}}))},runtimeOutputs:Z.map((P)=>({entityId:P.entityId,signerId:P.signerId,...P.entityTxs&&{entityTxs:[...P.entityTxs]},...P.precommits&&{precommits:new Map(P.precommits)},...P.proposedFrame&&{proposedFrame:P.proposedFrame}})),description:J,gossip:{profiles:q}};Q.push(G);let z=IG(G),M=z.length,j=(M/1024/1024).toFixed(2);if(M>1e6){console.warn(`\uD83D\uDCE6 LARGE SNAPSHOT: ${j}MB at height ${G.height}`),console.warn(`   Replicas: ${G.replicas.size}`);for(let[P,D]of G.replicas){let A=D.state.messages?.length||0,I=D.state.accounts?.size||0;if(A>20||I>10)console.warn(`   ${P.slice(0,25)}...: ${A} msgs, ${I} accounts`)}}try{let P=X.batch();P.put(Buffer.from(`snapshot:${G.height}`),z),P.put(Buffer.from("latest_height"),Buffer.from(G.height.toString())),P.write()}catch(P){}if(s0){if(console.log(`\uD83D\uDCF8 Snapshot ${G.height}: ${j}MB - "${J}" (total: ${Q.length})`),Y.runtimeTxs.length>0)console.log(`    \uD83D\uDDA5  RuntimeTxs: ${Y.runtimeTxs.length}`),Y.runtimeTxs.forEach((P,D)=>{console.log(`      ${D+1}. ${P.type} ${P.entityId}:${P.signerId} (${P.data.isProposer?"proposer":"validator"})`)});if(Y.entityInputs.length>0)console.log(`    \uD83D\uDCE8 EntityInputs: ${Y.entityInputs.length}`),Y.entityInputs.forEach((P,D)=>{let A=[];if(P.entityTxs?.length)A.push(`${P.entityTxs.length} txs`);if(P.precommits?.size)A.push(`${P.precommits.size} precommits`);if(P.proposedFrame)A.push(`frame: ${P.proposedFrame.hash.slice(0,10)}...`);console.log(`      ${D+1}. ${P.entityId}:${P.signerId} (${A.join(", ")||"empty"})`)})}};var l5=y(()=>{rD();tX();gV()});function pV($,Q,X="mock-private-key"){let Y=`${$}-${Q}-${X}`,Z=`sig_${Buffer.from(Y).toString("base64").slice(0,32)}`;return console.log(` Signed frame ${Q.slice(0,10)} by ${$.slice(-4)}: ${Z.slice(0,20)}...`),Z}function sw($,Q,X,Y="mock-private-key"){let Z=pV($,Q,Y),J=X===Z;if(J)console.log(` Valid signature from ${$.slice(-4)} for frame ${Q.slice(0,10)}`);else console.log(` Invalid signature from ${$.slice(-4)} for frame ${Q.slice(0,10)}`),console.log(`   Expected: ${Z.slice(0,20)}...`),console.log(`   Received: ${X.slice(0,20)}...`);return J}function qc($,Q,X=!0){let{tokenId:Y}=Q.data,Z=[];if($.deltas.has(Y))return console.warn(` Delta for token ${Y} already exists, skipping add_delta`),{success:!0,events:Z};let J={tokenId:Y,collateral:0n,ondelta:0n,offdelta:0n,leftCreditLimit:0n,rightCreditLimit:0n,leftAllowance:0n,rightAllowance:0n};return $.deltas.set(Y,J),console.log(` Added delta for token ${Y} to account with ${$.counterpartyEntityId.slice(-4)}`),Z.push(` Added token ${Y} to account`),{success:!0,events:Z}}function Gc($,Q,X=!0){let{tokenId:Y,amount:Z,side:J}=Q.data,q=[],G=$.deltas.get(Y);if(!G)return console.error(` Delta for token ${Y} not found - cannot set credit limit`),{success:!1,error:`Delta for token ${Y} not found. Use add_delta first.`,events:q};if(J==="left")G.leftCreditLimit=Z,q.push(`\uD83D\uDCB3 Left entity credit limit set to ${Z.toString()} for token ${Y}`);else G.rightCreditLimit=Z,q.push(`\uD83D\uDCB3 Right entity credit limit set to ${Z.toString()} for token ${Y}`);return console.log(` Set credit limit for token ${Y}: left=${G.leftCreditLimit}, right=${G.rightCreditLimit}`),{success:!0,events:q}}function zc($,Q,X=!0){let{tokenId:Y,amount:Z,route:J,description:q}=Q.data,G=[],z=$.deltas.get(Y);if(!z){let k=BX(Y);z={tokenId:Y,collateral:0n,ondelta:0n,offdelta:0n,leftCreditLimit:k,rightCreditLimit:k,leftAllowance:0n,rightAllowance:0n},$.deltas.set(Y,z)}let M=$.proofHeader.fromEntity<$.proofHeader.toEntity?$.proofHeader.fromEntity:$.proofHeader.toEntity,j=M===$.proofHeader.fromEntity?$.proofHeader.toEntity:$.proofHeader.fromEntity,P=Q.data.fromEntityId,D=Q.data.toEntityId;if(!P||!D)return console.error(" CONSENSUS-FAILURE: Missing explicit payment direction"),console.error("  AccountTx:",k$(Q)),{success:!1,error:"FATAL: Payment must have explicit fromEntityId/toEntityId",events:G};let A;if(P===M&&D===j)A=-Z;else if(P===j&&D===M)A=Z;else return console.error(" CONSENSUS-FAILURE: Payment entities don't match account"),console.error(`  Account: ${M.slice(-4)}  ${j.slice(-4)}`),console.error(`  Payment: ${P.slice(-4)}  ${D.slice(-4)}`),{success:!1,error:"FATAL: Payment entities must match account entities (no cross-account routing)",events:G};let H=Lz(z,P===M);if(Z>H.outCapacity)return{success:!1,error:`Insufficient capacity for sender ${P.slice(-4)}: need ${Z.toString()}, available ${H.outCapacity.toString()}`,events:G};let C=z.ondelta+z.offdelta+A;if(Y===1&&C>$.globalCreditLimits.peerLimit)return{success:!1,error:`Exceeds global credit limit: ${C.toString()} > ${$.globalCreditLimits.peerLimit.toString()}`,events:G};if(z.offdelta+=A,X)G.push(`\uD83D\uDCB8 Sent ${Z.toString()} token ${Y} to Entity ${$.counterpartyEntityId.slice(-4)} ${q?"("+q+")":""}`);else G.push(`\uD83D\uDCB0 Received ${Z.toString()} token ${Y} from Entity ${P.slice(-4)} ${q?"("+q+")":""}`);let B=$.currentFrame.tokenIds.indexOf(Y),S=z.ondelta+z.offdelta;if(B>=0)$.currentFrame.deltas[B]=S;else $.currentFrame.tokenIds.push(Y),$.currentFrame.deltas.push(S);let _=P===$.proofHeader.fromEntity;if(console.log(`\uD83D\uDD0D FORWARD-CHECK: route=${J?`[${J.map((k)=>k.slice(-4)).join(",")}]`:"null"}`),console.log(`\uD83D\uDD0D FORWARD-CHECK: isOutgoing=${_}, paymentFrom=${P.slice(-4)}, proofHeader.from=${$.proofHeader.fromEntity.slice(-4)}`),J&&J.length>0&&!_){console.log(`\uD83D\uDD0D FORWARD-CHECK: Passed first check (route.length=${J.length}, isOutgoing=${_})`);let k=J[0],f=J[J.length-1];if(!k||!f)return console.error(" Empty route in payment - invalid payment routing"),{success:!1,error:"Invalid payment route",events:G};if(console.log(`\uD83D\uDD0D FORWARD-CHECK: currentInRoute=${k.slice(-4)}, proofHeader.from=${$.proofHeader.fromEntity.slice(-4)}, final=${f.slice(-4)}`),console.log(`\uD83D\uDD0D FORWARD-CHECK: Check result: ${k===$.proofHeader.fromEntity&&k!==f}`),k===$.proofHeader.fromEntity&&k!==f){let g=J[1];if(!g)return console.error(" No next hop in route for forwarding"),{success:!1,error:"Invalid route: no next hop",events:G};if($.counterpartyEntityId===g)console.error(` Routing error: received from ${g} but should forward to them`);else G.push(` Forwarding payment to ${f.slice(-4)} via ${J.length-1} more hops`),$.pendingForward={tokenId:Y,amount:Z,route:J.slice(1),...q?{description:q}:{}}}}return{success:!0,events:G}}var Kc=y(()=>{$9()});function Uc($,Q){let{tokenId:X,collateral:Y,ondelta:Z,side:J}=Q.data,q=[];console.log(`\uD83D\uDCB0 Processing RC event: token ${X}, collateral=${Y}, ondelta=${Z}, side=${J}`);let G=BigInt(Y),z=BigInt(Z),M=$.deltas.get(X);if(!M){console.log(`\uD83D\uDCB0 Creating new delta for token ${X} (first RC event)`);let C=BX(X);M={tokenId:X,collateral:0n,ondelta:0n,offdelta:0n,leftCreditLimit:C,rightCreditLimit:C,leftAllowance:0n,rightAllowance:0n},$.deltas.set(X,M)}let{collateral:j,ondelta:P}=M;M.collateral=G,M.ondelta=z;let D=G-j,A=z-P;if(console.log("\uD83D\uDCB0 RC state update:"),console.log(`   Collateral: ${j}  ${G} (diff: ${D})`),console.log(`   Ondelta: ${P}  ${z} (diff: ${A})`),J==="receiving")q.push(`\uD83D\uDCB0 Collateral +${D} (now ${G}) - counterparty deposited token ${X}`);else q.push(`\uD83D\uDCE4 Collateral +${D} (now ${G}) - we deposited token ${X}`);let I=M.ondelta+M.offdelta,H=$.currentFrame.tokenIds.indexOf(X);if(H>=0)$.currentFrame.deltas[H]=I;else $.currentFrame.tokenIds.push(X),$.currentFrame.deltas.push(I);return console.log(` RC processed successfully for token ${X}`),{success:!0,events:q}}var Wc=y(()=>{$9()});function Vc($,Q,X=!0){let{tokenId:Y,amount:Z,requestId:J}=Q.data,q=[],G=$.deltas.get(Y);if(!G)return{success:!1,error:`No delta for token ${Y}`,events:q};let z=G.ondelta+G.offdelta,M=z>0n?z:-z,j=G.collateral>M?G.collateral-M:0n;if(Z>j)return{success:!1,error:`Insufficient withdrawable: ${Z} > ${j} (collateral ${G.collateral}, uninsured ${M})`,events:q};if(X)$.pendingWithdrawals.set(J,{requestId:J,tokenId:Y,amount:Z,requestedAt:0,direction:"outgoing",status:"pending"}),q.push(`\uD83D\uDCE4 Withdrawal requested: ${Z} token ${Y} (${J.slice(-4)})`);else return $.pendingWithdrawals.set(J,{requestId:J,tokenId:Y,amount:Z,requestedAt:0,direction:"incoming",status:"pending"}),q.push(`\uD83D\uDCE5 Withdrawal request received: ${Z} token ${Y} (${J.slice(-4)})`),{success:!0,events:q,approvalNeeded:{type:"approve_withdrawal",data:{tokenId:Y,amount:Z,requestId:J,approved:!0}}};return{success:!0,events:q}}function Oc($,Q){let{tokenId:X,amount:Y,requestId:Z,approved:J}=Q.data,q=[],G=$.pendingWithdrawals.get(Z);if(!G)return{success:!1,error:`Withdrawal request ${Z} not found`,events:q};if(G.tokenId!==X||G.amount!==Y)return{success:!1,error:`Approval mismatch: expected ${G.amount} token ${G.tokenId}, got ${Y} token ${X}`,events:q};if(!J)return G.status="rejected",q.push(` Withdrawal ${Z.slice(-4)} rejected`),{success:!0,events:q};if(G.status="approved",q.push(` Withdrawal ${Z.slice(-4)} approved`),G.direction==="outgoing")return{success:!0,events:q,jBatchAction:{type:"collateral_to_reserve",counterpartyId:$.counterpartyEntityId,tokenId:X,amount:Y}};return{success:!0,events:q}}function Mc($,Q){let{tokenId:X,amount:Y}=Q.data;return $.requestedRebalance.set(X,Y),console.log(`\uD83D\uDD04 Rebalance requested: ${Y} token ${X} (hub will coordinate)`),{success:!0,events:[`\uD83D\uDD04 Requested rebalance: ${Y} token ${X} (hub will convert creditcollateral)`]}}function aw($,Q,X=!0){switch(console.log(`\uD83D\uDD04 Processing ${Q.type} for ${$.counterpartyEntityId.slice(-4)} (ourFrame: ${X})`),Q.type){case"add_delta":return qc($,Q,X);case"set_credit_limit":return Gc($,Q,X);case"direct_payment":return zc($,Q,X);case"account_payment":return console.warn(" account_payment type is deprecated"),{success:!0,events:[]};case"account_settle":return console.log("\uD83D\uDCB0 account_settle processed externally"),{success:!0,events:[" Settlement processed"]};case"reserve_to_collateral":return Uc($,Q);case"request_withdrawal":return Vc($,Q,X);case"approve_withdrawal":return Oc($,Q);case"request_rebalance":return Mc($,Q);case"account_frame":return console.error(" FATAL: account_frame should not be in accountTxs array!"),{success:!1,error:"account_frame is not a transaction type",events:[]};default:return{success:!1,error:"Unknown accountTx type",events:[]}}}var Dc=y(()=>{Kc();Wc()});var Rc={};r8(Rc,{validateMessageCounter:()=>Hc,validateAccountFrame:()=>Pc,shouldProposeFrame:()=>Ac,proposeAccountFrame:()=>Nc,handleAccountInput:()=>ew,getAccountsToProposeFrames:()=>eU0,generateAccountProof:()=>$60,addToAccountMempool:()=>tU0});function Pc($,Q){if($.height<0)return!1;if($.accountTxs.length>100)return!1;if($.tokenIds.length!==$.deltas.length)return!1;if(Q!==void 0){if(Math.abs($.timestamp-Q)>sU0)return!1}return!0}function Hc($,Q){if(Q<=0||Q>jc)return console.log(` Counter out of range: ${Q} (must be 1-${jc})`),!1;let X=$.ackedTransitions+1;if(Q!==X)return console.log(` Counter violation: got ${Q}, expected ${X} (ackedTransitions=${$.ackedTransitions})`),!1;return!0}async function aU0($){let{ethers:Q}=await Promise.resolve().then(() => (Mz(),vh)),X={height:$.height,timestamp:$.timestamp,prevFrameHash:$.prevFrameHash,accountTxs:$.accountTxs.map((Z)=>({type:Z.type,data:Z.data})),tokenIds:$.tokenIds,deltas:$.deltas.map((Z)=>Z.toString()),fullDeltaStates:$.fullDeltaStates?.map((Z)=>({tokenId:Z.tokenId,collateral:Z.collateral.toString(),ondelta:Z.ondelta.toString(),offdelta:Z.offdelta.toString(),leftCreditLimit:Z.leftCreditLimit.toString(),rightCreditLimit:Z.rightCreditLimit.toString(),leftAllowance:Z.leftAllowance.toString(),rightAllowance:Z.rightAllowance.toString()}))},Y=k$(X);return Q.keccak256(Q.toUtf8Bytes(Y))}async function Nc($,Q,X=!1){console.log(`\uD83D\uDE80 E-MACHINE: Proposing account frame for ${Q.counterpartyEntityId.slice(-4)}`),console.log(`\uD83D\uDE80 E-MACHINE: Account state - mempool=${Q.mempool.length}, pendingFrame=${!!Q.pendingFrame}, currentHeight=${Q.currentHeight}`);let Y=[];if(Q.mempool.length>eU)return console.log(` E-MACHINE: Mempool overflow ${Q.mempool.length} > ${eU}`),{success:!1,error:`Mempool overflow: ${Q.mempool.length} > ${eU}`,events:Y};if(Q.mempool.length===0)return console.log(" E-MACHINE: No transactions in mempool to propose"),{success:!1,error:"No transactions to propose",events:Y};if(Q.pendingFrame)return console.log(` E-MACHINE: Still waiting for ACK on pending frame #${Q.pendingFrame.height}`),{success:!1,error:"Waiting for ACK on pending frame",events:Y};console.log(` E-MACHINE: Creating frame with ${Q.mempool.length} transactions...`);let Z=rw(Q),J=[];for(let H of Q.mempool){let C=aw(Z,H,!0);if(!C.success)return{success:!1,error:`Tx validation failed: ${C.error}`,events:J};J.push(...C.events)}let q=[],G=[],z=[],M=Array.from(Z.deltas.entries()).sort((H,C)=>H[0]-C[0]);for(let[H,C]of M){let B=C.ondelta+C.offdelta;if(B===0n&&C.leftCreditLimit===0n&&C.rightCreditLimit===0n){console.log(`  Skipping unused token ${H} from frame (zero delta, zero limits)`);continue}q.push(H),G.push(B),z.push({...C})}console.log(`\uD83D\uDCCA Frame state after processing: ${q.length} tokens`),console.log(`\uD83D\uDCCA TokenIds: [${q.join(", ")}]`),console.log(`\uD83D\uDCCA Deltas: [${G.map((H)=>H.toString()).join(", ")}]`);let j={height:Q.currentHeight+1,timestamp:$.timestamp,accountTxs:[...Q.mempool],prevFrameHash:Q.currentHeight===0?"genesis":Q.currentFrame.stateHash||"",stateHash:"",tokenIds:q,deltas:G,fullDeltaStates:z};j.stateHash=await aU0(j);let P;try{P=am(j,"proposeAccountFrame")}catch(H){return t0("FRAME_CONSENSUS"," Frame validation failed:",H),t0("FRAME_CONSENSUS"," Frame data:",k$(j,2)),{success:!1,error:`Frame validation failed: ${H.message}`,events:Y}}let D=k$(P).length;if(D>tw)return t0("FRAME_CONSENSUS",` Frame too large: ${D} bytes > ${tw} bytes (1MB)`),{success:!1,error:`Frame exceeds 1MB limit: ${D} bytes`,events:Y};console.log(` Frame size: ${D} bytes (${(D/tw*100).toFixed(2)}% of 1MB limit)`);let A=pV(Q.proofHeader.fromEntity,P.stateHash);return Q.pendingFrame=P,Q.sentTransitions=Q.mempool.length,Q.clonedForValidation=Z,Q.mempool=[],Y.push(`\uD83D\uDE80 Proposed frame ${P.height} with ${P.accountTxs.length} transactions`),{success:!0,accountInput:{fromEntityId:Q.proofHeader.fromEntity,toEntityId:Q.proofHeader.toEntity,height:P.height,newAccountFrame:P,newSignatures:[A],counter:X?Q.proofHeader.cooperativeNonce:++Q.proofHeader.cooperativeNonce},events:Y}}async function ew($,Q,X){console.log(`\uD83D\uDCE8 A-MACHINE: Received AccountInput from ${X.fromEntityId.slice(-4)}`);let Y=[];if(X.counter!==void 0){let Z=Hc(Q,X.counter);if(console.log(`\uD83D\uDD0D Counter validation: ${X.counter} vs acked=${Q.ackedTransitions}, height=${Q.currentHeight}, valid=${Z}`),!Z)return{success:!1,error:`Replay attack detected: counter ${X.counter} invalid (expected ${Q.ackedTransitions+1})`,events:Y};Q.ackedTransitions=X.counter}else return{success:!1,error:"Missing counter - replay protection requires sequential counter",events:Y};if(Q.pendingFrame&&X.height===Q.pendingFrame.height&&X.prevSignatures){console.log(` Received confirmation for pending frame ${X.height}`);let Z=Q.pendingFrame.stateHash,J=Q.proofHeader.toEntity,q=X.prevSignatures[0];if(X.prevSignatures.length>0&&q&&sw(J,Z,q)){if(console.log(`\uD83D\uDD12 COMMIT: Frame ${Q.pendingFrame.height}`),console.log(`  Transactions: ${Q.pendingFrame.accountTxs.length}`),console.log(`  TokenIds: ${Q.pendingFrame.tokenIds.join(",")}`),console.log(`  Deltas: ${Q.pendingFrame.deltas.map((G)=>`${G}`).join(",")}`),console.log(`  StateHash: ${Z.slice(0,16)}...`),Q.clonedForValidation){if(Q.deltas=Q.clonedForValidation.deltas,Q.currentFrame={height:Q.pendingFrame.height,timestamp:Q.pendingFrame.timestamp,accountTxs:Q.pendingFrame.accountTxs,prevFrameHash:Q.pendingFrame.prevFrameHash,tokenIds:Q.pendingFrame.tokenIds,deltas:Q.pendingFrame.deltas,stateHash:Q.pendingFrame.stateHash},Q.currentHeight=Q.pendingFrame.height,Q.frameHistory.push({...Q.pendingFrame}),Q.frameHistory.length>10)Q.frameHistory.shift();console.log(`\uD83D\uDCDA Frame ${Q.pendingFrame.height} added to history (total: ${Q.frameHistory.length})`)}if(delete Q.pendingFrame,Q.sentTransitions=0,delete Q.clonedForValidation,Q.rollbackCount=Math.max(0,Q.rollbackCount-1),Y.push(` Frame ${X.height} confirmed and committed`),!X.newAccountFrame)return{success:!0,events:Y};console.log("\uD83D\uDCE6 BATCHED-MESSAGE: ACK processed, now processing bundled new frame...")}else return{success:!1,error:"Invalid confirmation signature",events:Y}}if(X.newAccountFrame){let Z=X.newAccountFrame;if(!Pc(Z))return{success:!1,error:"Invalid frame structure",events:Y};let J=Q.currentHeight===0?"genesis":Q.currentFrame.stateHash||"";if(Z.prevFrameHash!==J)return t0("FRAME_CONSENSUS"," FRAME-CHAIN-BROKEN: prevFrameHash mismatch"),t0("FRAME_CONSENSUS",`  Expected: ${J.slice(0,16)}...`),t0("FRAME_CONSENSUS",`  Received: ${Z.prevFrameHash.slice(0,16)}...`),t0("FRAME_CONSENSUS",`  Current height: ${Q.currentHeight}`),{success:!1,error:`Frame chain broken: prevFrameHash mismatch (expected ${J.slice(0,16)}...)`,events:Y};if(console.log(` Frame chain verified: prevFrameHash matches frame ${Q.currentHeight}`),Q.pendingFrame&&Z.height===Q.pendingFrame.height)if(console.log(`\uD83D\uDD04 SIMULTANEOUS-PROPOSALS: Both proposed frame ${Z.height}`),K7(Q.proofHeader.fromEntity,Q.proofHeader.toEntity))return console.log(`\uD83D\uDCE4 LEFT-WINS: Ignoring right's frame ${Z.height}, waiting for them to accept ours`),{success:!0,events:Y};else if(Q.rollbackCount===0){if(Q.pendingFrame)console.log(`\uD83D\uDCE5 RIGHT-ROLLBACK: Restoring ${Q.pendingFrame.accountTxs.length} txs to mempool`),Q.mempool.unshift(...Q.pendingFrame.accountTxs),console.log(`\uD83D\uDCE5 Mempool now has ${Q.mempool.length} txs after rollback restore`);Q.sentTransitions=0,delete Q.pendingFrame,delete Q.clonedForValidation,Q.rollbackCount++,console.log(`\uD83D\uDCE5 RIGHT-ROLLBACK: Accepting left's frame (rollbacks: ${Q.rollbackCount})`)}else return t0("FRAME_CONSENSUS",` FATAL: Right side rolled back ${Q.rollbackCount} times - consensus broken`),{success:!1,error:"Multiple rollbacks detected - consensus failure",events:Y};if(Q.pendingFrame&&Z.height===Q.currentHeight+1&&Q.rollbackCount>0)Q.rollbackCount--,console.log(` ROLLBACK-RESOLVED: They accepted our frame (rollbacks: ${Q.rollbackCount})`);if(Z.height!==Q.currentHeight+1)return console.log(` Frame sequence mismatch: expected ${Q.currentHeight+1}, got ${Z.height}`),{success:!1,error:`Frame sequence mismatch: expected ${Q.currentHeight+1}, got ${Z.height}`,events:Y};if(X.newSignatures&&X.newSignatures.length>0){let C=X.newSignatures[0];if(!C)return{success:!1,error:"Missing signature in newSignatures array",events:Y};if(!sw(X.fromEntityId,Z.stateHash,C))return{success:!1,error:"Invalid frame signature",events:Y}}let q=rw(Q),G=[];for(let C of Z.accountTxs){let B=aw(q,C,!1);if(!B.success)return{success:!1,error:`Frame application failed: ${B.error}`,events:Y};G.push(...B.events)}let z=[],M=[],j=Array.from(q.deltas.entries()).sort((C,B)=>C[0]-B[0]);for(let[C,B]of j){let S=B.ondelta+B.offdelta;if(S===0n&&B.leftCreditLimit===0n&&B.rightCreditLimit===0n){console.log(`  RECEIVER: Skipping unused token ${C} from validation (zero delta, zero limits)`);continue}z.push(C),M.push(S)}console.log(`\uD83D\uDD0D RECEIVER: Computed ${z.length} tokens after filtering: [${z.join(", ")}]`);let P=Buffer.from(M.map((C)=>C.toString()).join(",")).toString("hex"),D=Buffer.from(Z.deltas.map((C)=>C.toString()).join(",")).toString("hex");if(console.log(`\uD83D\uDD0D STATE-VERIFY Frame ${Z.height}:`),console.log(`  Our computed:  ${P.slice(0,32)}...`),console.log(`  Their claimed: ${D.slice(0,32)}...`),P!==D){t0("FRAME_CONSENSUS"," CONSENSUS-FAILURE: Both sides computed different final states!"),t0("FRAME_CONSENSUS"," FULL CONSENSUS FAILURE DUMP:"),t0("FRAME_CONSENSUS"," AccountMachine BEFORE:",k$(Q)),t0("FRAME_CONSENSUS"," ClonedMachine AFTER:",k$(q)),t0("FRAME_CONSENSUS"," ReceivedFrame COMPLETE:",k$(Z)),t0("FRAME_CONSENSUS"," OurComputedState:",P),t0("FRAME_CONSENSUS"," TheirClaimedState:",D),t0("FRAME_CONSENSUS"," OurFinalDeltas:",M.map((B)=>B.toString())),t0("FRAME_CONSENSUS"," TheirFrameDeltas:",Z.deltas.map((B)=>B.toString()));let C=K7(Q.proofHeader.fromEntity,Q.proofHeader.toEntity);return t0("FRAME_CONSENSUS",` isLeft=${C}, fromEntity=${Q.proofHeader.fromEntity}, toEntity=${Q.proofHeader.toEntity}`),{success:!1,error:"Bilateral consensus failure - states don't match",events:Y}}if(console.log(` CONSENSUS-SUCCESS: Both sides computed identical state for frame ${Z.height}`),Q.deltas=q.deltas,q.pendingForward)Q.pendingForward=q.pendingForward,console.log(`\uD83D\uDD00 Copied pendingForward for multi-hop: route=[${q.pendingForward.route.map((C)=>C.slice(-4)).join(",")}]`);if(Q.currentFrame={height:Z.height,timestamp:Z.timestamp,accountTxs:Z.accountTxs,prevFrameHash:Z.prevFrameHash,tokenIds:Z.tokenIds,deltas:Z.deltas,stateHash:Z.stateHash},Q.currentHeight=Z.height,Q.frameHistory.push({...Z}),Q.frameHistory.length>10)Q.frameHistory.shift();console.log(`\uD83D\uDCDA Frame ${Z.height} accepted and added to history (total: ${Q.frameHistory.length})`),Y.push(...G),Y.push(`\uD83E\uDD1D Accepted frame ${Z.height} from Entity ${X.fromEntityId.slice(-4)}`);let A=pV(Q.proofHeader.fromEntity,Z.stateHash),I=!1,H={fromEntityId:Q.proofHeader.fromEntity,toEntityId:X.fromEntityId,height:Z.height,prevSignatures:[A],counter:0};if(Q.mempool.length>0&&!Q.pendingFrame){console.log("\uD83D\uDCE6 BATCH-OPTIMIZATION: Sending ACK + new frame in single message (Channel.ts pattern)");let C=await Nc($,Q,!0);if(C.success&&C.accountInput){if(I=!0,C.accountInput.newAccountFrame)H.newAccountFrame=C.accountInput.newAccountFrame;if(C.accountInput.newSignatures)H.newSignatures=C.accountInput.newSignatures;let B=C.accountInput.newAccountFrame?.height||0;console.log(` Batched ACK for frame ${Z.height} + proposal for frame ${B}`),Y.push(`\uD83D\uDCE4 Batched ACK + frame ${B}`)}}return H.counter=++Q.proofHeader.cooperativeNonce,console.log(`\uD83D\uDD22 Message counter: ${H.counter} (batched=${I})`),{success:!0,response:H,events:Y}}return{success:!0,events:Y}}function tU0($,Q){if($.mempool.length>=eU)return console.log(` Mempool full: ${$.mempool.length} >= ${eU}`),!1;return $.mempool.push(Q),console.log(`\uD83D\uDCE5 Added ${Q.type} to mempool (${$.mempool.length}/${eU})`),!0}function Ac($){return $.mempool.length>0&&!$.pendingFrame}function eU0($){let Q=[];if(!$.accounts||!($.accounts instanceof Map))return console.log(` No accounts or accounts not a Map: ${typeof $.accounts}`),Q;for(let[X,Y]of $.accounts)if(Ac(Y))Q.push(X);return Q}async function $60($){$.proofBody={tokenIds:Array.from($.deltas.keys()).sort((q,G)=>q-G),deltas:Array.from($.deltas.keys()).sort((q,G)=>q-G).map((q)=>{let G=$.deltas.get(q);if(!G)throw t0("FRAME_CONSENSUS",` Missing delta for tokenId ${q} in account ${$.counterpartyEntityId}`),new Error(`Critical financial data missing: delta for token ${q}`);return G.ondelta+G.offdelta})};let Q={fromEntity:$.proofHeader.fromEntity,toEntity:$.proofHeader.toEntity,cooperativeNonce:$.proofHeader.cooperativeNonce,disputeNonce:$.proofHeader.disputeNonce,tokenIds:$.proofBody.tokenIds,deltas:$.proofBody.deltas.map((q)=>q.toString())},X=k$(Q),Z=(await sU(X)).slice(2),J=pV($.proofHeader.fromEntity,`0x${Z}`);return $.hankoSignature=J,console.log(`\uD83D\uDD10 Generated account proof: ${$.proofBody.tokenIds.length} tokens, hash: 0x${Z.slice(0,20)}...`),console.log(`\uD83D\uDD10 ProofBody tokens: [${$.proofBody.tokenIds.join(",")}]`),console.log(`\uD83D\uDD10 ProofBody deltas: [${$.proofBody.deltas.map((q)=>q.toString()).join(",")}]`),{proofHash:`0x${Z}`,signature:J}}var eU=1000,jc=1e6,sU0=300000,tw=1048576;var $T=y(()=>{l5();$9();tX();cU();gV();Dc()});async function Cc($,Q,X){console.log(`\uD83D\uDE80 APPLY accountInput: ${Q.fromEntityId.slice(-4)}  ${Q.toEntityId.slice(-4)}`);let Y=XY($),Z=[],J=Y.accounts.get(Q.fromEntityId),q=!1;if(!J){q=!0,console.log(`\uD83D\uDCB3 Creating new account machine for ${Q.fromEntityId.slice(-4)}`);let G=new Map;J={counterpartyEntityId:Q.fromEntityId,mempool:[],currentFrame:{height:0,timestamp:X.timestamp,accountTxs:[],prevFrameHash:"",tokenIds:[],deltas:[],stateHash:""},sentTransitions:0,ackedTransitions:0,deltas:G,globalCreditLimits:{ownLimit:BX(1),peerLimit:BX(1)},currentHeight:0,pendingSignatures:[],rollbackCount:0,sendCounter:0,receiveCounter:0,proofHeader:{fromEntity:$.entityId,toEntity:Q.fromEntityId,cooperativeNonce:0,disputeNonce:0},proofBody:{tokenIds:[],deltas:[]},frameHistory:[],pendingWithdrawals:new Map,requestedRebalance:new Map},Y.accounts.set(Q.fromEntityId,J)}if(!J)throw new Error(`CRITICAL: AccountMachine creation failed for ${Q.fromEntityId}`);if(q&&Q.newAccountFrame){if(Q.newAccountFrame.accountTxs.some((z)=>z.type==="add_delta")){let M=BX(1);console.log("\uD83D\uDCB3 NEW-ACCOUNT: Received opening frame, queueing our credit limit");let P=$.entityId<Q.fromEntityId?"left":"right";J.mempool.push({type:"set_credit_limit",data:{tokenId:1,amount:M,side:P}}),console.log(`\uD83D\uDCDD Queued set_credit_limit(side=${P}, 1M) - will batch with ACK`)}}if(Q.height||Q.newAccountFrame){console.log(`\uD83E\uDD1D Processing frame from ${Q.fromEntityId.slice(-4)}`);let G=await ew(X,J,Q);if(G.success){if(WH(Y,G.events),console.log(`\uD83D\uDD0D PENDING-FORWARD-CHECK: Has pendingForward=${!!J.pendingForward}`),J.pendingForward)console.log(`\uD83D\uDD0D PENDING-FORWARD: route=[${J.pendingForward.route.map((z)=>z.slice(-4)).join(",")}], amount=${J.pendingForward.amount}`);if(J.pendingForward){let z=J.pendingForward;console.log(`\uD83D\uDD00 MULTI-HOP: Payment needs forwarding to ${z.route[z.route.length-1]?.slice(-4)}`);let M=z.route[0];if(M){let j=1000n,P=z.amount/j>1n?z.amount/j:1n,D=z.amount-P;console.log(`\uD83D\uDCB0 Forwarding fee: ${P}, forward amount: ${D}`);let A=Y.accounts.get(M);if(A){let I={type:"direct_payment",data:{tokenId:z.tokenId,amount:D,route:z.route,...z.description?{description:z.description}:{},fromEntityId:$.entityId,toEntityId:M}};A.mempool.push(I),console.log(` Forwarded payment added to account ${M.slice(-4)} mempool`),B8(Y,` Relayed payment to Entity ${M.slice(-4)}`)}else console.error(` No account with next hop ${M.slice(-4)} for forwarding`),B8(Y," Payment routing failed: no account with next hop")}delete J.pendingForward}if(G.response){console.log(`\uD83D\uDCE4 Sending response to ${G.response.toEntityId.slice(-4)}`);let z="alice",M=Array.from(X.replicas.keys()).filter((j)=>j.startsWith(G.response.toEntityId+":"));if(M.length>0){let j=X.replicas.get(M[0]);if(j?.state.config.validators[0])z=j.state.config.validators[0]}Z.push({entityId:G.response.toEntityId,signerId:z,entityTxs:[{type:"accountInput",data:G.response}]}),console.log(" Response queued")}}else console.error(` Frame consensus failed: ${G.error}`),B8(Y,` ${G.error}`)}else console.error(" Received AccountInput without frames - invalid!"),B8(Y,` Invalid AccountInput from ${Q.fromEntityId.slice(-4)}`);return{newState:Y,outputs:Z}}var QT=y(()=>{$T();l5();$9()});var XT=($)=>{return I9($).symbol},YT=($)=>{return I9($).decimals},Lc=($,Q)=>{let{from:X,event:Y,observedAt:Z,blockNumber:J,transactionHash:q}=Q,G=$.jBlock||0;if(console.log(`\uD83D\uDD0D J-EVENT-CHECK: ${Y.type} block=${J} vs entity.jBlock=${G} (raw=${$.jBlock}), from=${X}`),J<=G)return console.log(`\uD83D\uDD04 IGNORING OLD J-EVENT: ${Y.type} from block ${J} (entity already at j-block ${$.jBlock})`),$;console.log(` J-EVENT-ACCEPTED: ${Y.type} block=${J} > entity.jBlock=${$.jBlock}, will process`);let z=XY($);z.jBlock=J??($.jBlock??0);let M=new Date(Z).toLocaleTimeString(),j=q?q.slice(0,10)+"...":"unknown",P="";if(Y.type==="reserve_transferred"){let{from:D,to:A,tokenId:I,amount:H,direction:C}=Y.data,B=XT(I),S=YT(I),_=(Number(H)/10**S).toFixed(4);if(C==="sent")P=`\uD83D\uDCB8 ${X} observed RESERVE TRANSFER: Sent ${_} ${B} to Entity ${A.slice(-1)}
\uD83D\uDCCD Block: ${J} |  ${M} | \uD83D\uDD17 Tx: ${j}
\uD83C\uDFAF Event: ReserveTransferred | \uD83D\uDD22 TokenID: ${I} | \uD83D\uDCB0 Amount: ${H} (raw)`;else P=`\uD83D\uDCB0 ${X} observed RESERVE TRANSFER: Received ${_} ${B} from Entity ${D.slice(-1)}
\uD83D\uDCCD Block: ${J} |  ${M} | \uD83D\uDD17 Tx: ${j}
\uD83C\uDFAF Event: ReserveTransferred | \uD83D\uDD22 TokenID: ${I} | \uD83D\uDCB0 Amount: ${H} (raw)`}else if(Y.type==="ReserveUpdated"){let{tokenId:D,newBalance:A}=Y.data,I=XT(D),H=YT(D),C=(Number(A)/10**H).toFixed(4);P=`\uD83D\uDCCA ${X} observed RESERVE UPDATE: ${I} balance now ${C} (accepted: event.block=${J} > entity.jBlock=${G})
\uD83D\uDCCD Block: ${J} |  ${M} | \uD83D\uDD17 Tx: ${j}
\uD83C\uDFAF Event: ReserveUpdated | \uD83D\uDD22 TokenID: ${D} | \uD83D\uDCB0 New Balance: ${A} (raw)
\uD83C\uDFE6 Decimals: ${H} | \uD83D\uDD24 Symbol: ${I}`}else if(Y.type==="SettlementProcessed"){let{counterpartyEntityId:D,tokenId:A,ownReserve:I,counterpartyReserve:H,collateral:C,ondelta:B,side:S}=Y.data,_=XT(A),k=YT(A),f=(Number(I)/10**k).toFixed(4),g=(Number(H)/10**k).toFixed(4),b=(Number(C)/10**k).toFixed(4);P=` ${X} observed SETTLEMENT: ${_} settled with Entity ${D.slice(-4)}
\uD83D\uDCCD Block: ${J} |  ${M} | \uD83D\uDD17 Tx: ${j}
\uD83C\uDFAF Event: SettlementProcessed | \uD83D\uDD22 TokenID: ${A} | \uD83D\uDC64 Side: ${S}
\uD83D\uDCB0 Own Reserve: ${f} | \uD83E\uDD1D Counterparty: ${g}
\uD83D\uDD12 Collateral: ${b} | \uD83D\uDCCA OnDelta: ${B}`}else P=`\uD83D\uDD0D ${X} observed J-EVENT: ${Y.type}
\uD83D\uDCCD Block: ${J} |  ${M} | \uD83D\uDD17 Tx: ${j}
\uD83D\uDCCB Data: ${k$(Y.data,2)}`;if(B8(z,P),Y.type==="ReserveUpdated"){let{entity:D,tokenId:A,newBalance:I}=Y.data;if(D===$.entityId){if(z.reserves.set(String(A),BigInt(I)),s0)console.log(` Reserve updated for ${D.slice(0,10)}...: Token ${A} new balance is ${I}`)}}else if(Y.type==="reserve_transferred"){let{tokenId:D,amount:A,direction:I}=Y.data;if(I==="sent"){if(z.reserves.get(String(D))===void 0)z.reserves.set(String(D),0n),console.warn(`\uD83D\uDD0D RESERVE-INIT: Initialized new token ${D} reserve to 0n`);let B=z.reserves.get(String(D))-BigInt(A);z.reserves.set(String(D),B>=0n?B:0n)}else if(I==="received"){if(z.reserves.get(String(D))===void 0)z.reserves.set(String(D),0n),console.warn(`\uD83D\uDD0D RESERVE-INIT: Initialized new token ${D} reserve to 0n`);let C=z.reserves.get(String(D));z.reserves.set(String(D),C+BigInt(A))}if(s0)console.log(` Reserve transfer processed: ${I} ${A} token ${D}`)}else if(Y.type==="SettlementProcessed"){let{counterpartyEntityId:D,tokenId:A,ownReserve:I,counterpartyReserve:H,collateral:C,ondelta:B,side:S}=Y.data;z.reserves.set(String(A),BigInt(I));let _={fromEntityId:$.entityId,toEntityId:D,accountTx:{type:"account_settle",data:{tokenId:Number(A),ownReserve:I,counterpartyReserve:H,collateral:C,ondelta:B,side:S,blockNumber:J,transactionHash:q}},metadata:{purpose:"settlement_consensus",description:`Settlement event from j-machine for token ${A}`}};if(!z.accountInputQueue)z.accountInputQueue=[];if(z.accountInputQueue.push(_),s0)console.log(` SettlementProcessed: Created accountInput for token ${A} with counterparty ${D.slice(0,10)}...`)}else if(Y.type==="TransferReserveToCollateral"){let{receivingEntity:D,counterentity:A,collateral:I,ondelta:H,tokenId:C,side:B}=Y.data,S=B==="receiving"?A:D,_={fromEntityId:$.entityId,toEntityId:S,accountTx:{type:"reserve_to_collateral",data:{tokenId:Number(C),collateral:I,ondelta:H,side:B,blockNumber:J,transactionHash:q}},metadata:{purpose:"r2c_consensus",description:`RC event from j-machine for token ${C}`}};if(!z.accountInputQueue)z.accountInputQueue=[];if(z.accountInputQueue.push(_),s0)console.log(` TransferReserveToCollateral: Created accountInput for token ${C} with counterparty ${S.slice(0,10)}...`)}else B8(z,` Unhandled j-event type: ${Y.type}`);return z};var ZT=y(()=>{tX();l5();$9()});var wc=($,Q,X)=>{let Y=k$({type:$.type,data:$.data,proposer:Q,timestamp:X.timestamp});return`prop_${qH("sha256").update(Y).digest("hex").slice(0,12)}`},JT=($,Q)=>{if(Q.action.type==="collective_message"){let X=`[COLLECTIVE] ${Q.action.data.message}`;if(s0)console.log(`    \uD83C\uDFDB  Executing collective proposal: "${X}"`);let Y=[...$.messages,X];if(Y.length>10)Y.shift();return{...$,messages:Y}}return $};var qT=y(()=>{tX()});var Tc=($)=>{try{if(typeof $!=="string")return O$.error(` Message must be string, got: ${typeof $}`),!1;if($.length>1000)return O$.error(` Message too long: ${$.length} > 1000 chars`),!1;if($.length===0)return O$.error(" Empty message not allowed"),!1;return!0}catch(Q){return O$.error(` Message validation error: ${Q}`),!1}};var GT=y(()=>{tX()});var $6={};r8($6,{shouldBroadcastBatch:()=>q60,isBatchEmpty:()=>KT,initJBatch:()=>Q60,getBatchSize:()=>UT,createEmptyBatch:()=>zT,broadcastBatch:()=>J60,batchAddSettlement:()=>Y60,batchAddReserveToReserve:()=>Z60,batchAddReserveToCollateral:()=>X60});function zT(){return{reserveToExternalToken:[],externalTokenToReserve:[],reserveToReserve:[],reserveToCollateral:[],settlements:[],cooperativeUpdate:[],cooperativeDisputeProof:[],initialDisputeProof:[],finalDisputeProof:[],flashloans:[],hub_id:0}}function Q60(){return{batch:zT(),jurisdiction:null,lastBroadcast:0,broadcastCount:0,failedAttempts:0}}function KT($){return $.reserveToExternalToken.length===0&&$.externalTokenToReserve.length===0&&$.reserveToReserve.length===0&&$.reserveToCollateral.length===0&&$.settlements.length===0&&$.cooperativeUpdate.length===0&&$.cooperativeDisputeProof.length===0&&$.initialDisputeProof.length===0&&$.finalDisputeProof.length===0&&$.flashloans.length===0}function X60($,Q,X,Y,Z){let J=$.batch.reserveToCollateral.find((q)=>q.receivingEntity===Q&&q.tokenId===Y);if(J){let q=J.pairs.find((G)=>G.entity===X);if(q)q.amount+=Z;else J.pairs.push({entity:X,amount:Z})}else $.batch.reserveToCollateral.push({tokenId:Y,receivingEntity:Q,pairs:[{entity:X,amount:Z}]});console.log(`\uD83D\uDCE6 jBatch: Added RC ${Z} token ${Y} for ${Q.slice(-4)}${X.slice(-4)}`)}function Y60($,Q,X,Y){if(Q>=X)throw new Error(`Settlement entities must be ordered: ${Q} >= ${X}`);let Z=$.batch.settlements.find((J)=>J.leftEntity===Q&&J.rightEntity===X);if(Z)for(let J of Y){let q=Z.diffs.find((G)=>G.tokenId===J.tokenId);if(q)q.leftDiff+=J.leftDiff,q.rightDiff+=J.rightDiff,q.collateralDiff+=J.collateralDiff,q.ondeltaDiff+=J.ondeltaDiff;else Z.diffs.push(J)}else $.batch.settlements.push({leftEntity:Q,rightEntity:X,diffs:Y});console.log(`\uD83D\uDCE6 jBatch: Added settlement ${Q.slice(-4)}${X.slice(-4)}, ${Y.length} tokens`)}function Z60($,Q,X,Y){$.batch.reserveToReserve.push({receivingEntity:Q,tokenId:X,amount:Y}),console.log(`\uD83D\uDCE6 jBatch: Added RR ${Y} token ${X} to ${Q.slice(-4)}`)}function UT($){return $.reserveToExternalToken.length+$.externalTokenToReserve.length+$.reserveToReserve.length+$.reserveToCollateral.length+$.settlements.length+$.cooperativeUpdate.length+$.cooperativeDisputeProof.length+$.initialDisputeProof.length+$.finalDisputeProof.length+$.flashloans.length}async function J60($,Q,X){if(KT(Q.batch))return console.log("\uD83D\uDCE6 jBatch: Empty batch, skipping broadcast"),{success:!0};let Y=UT(Q.batch);console.log(`\uD83D\uDCE4 Broadcasting batch for ${$.slice(-4)}: ${Y} operations`),console.log("\uD83D\uDCE4 Batch contents:",k$(Q.batch,2));try{let{connectToEthereum:Z}=await Promise.resolve().then(() => (HJ(),IV)),{depository:J}=await Z(X);console.log("\uD83D\uDCE4 Submitting batch to Depository contract..."),console.log(`   Entity: ${$.slice(-4)}`),console.log(`   Operations: RC=${Q.batch.reserveToCollateral.length}, Settlements=${Q.batch.settlements.length}, RR=${Q.batch.reserveToReserve.length}`);let q=await J.processBatch($,Q.batch,{gasLimit:5000000});console.log(` Waiting for batch transaction to mine: ${q.hash}`);let G=await q.wait();return console.log(" Batch broadcasted successfully!"),console.log(`   Tx Hash: ${G.transactionHash}`),console.log(`   Block: ${G.blockNumber}`),console.log(`   Gas Used: ${G.gasUsed.toString()}`),Q.batch=zT(),Q.lastBroadcast=G.blockNumber,Q.broadcastCount++,Q.failedAttempts=0,{success:!0,txHash:G.transactionHash}}catch(Z){let J=Z instanceof Error?Z.message:String(Z);return console.error(` Batch broadcast failed for ${$.slice(-4)}:`,Z),Q.failedAttempts++,{success:!1,error:J}}}function q60($,Q){if(KT($.batch))return!1;let X=UT($.batch),Y=50,Z=5000;if(X>=Y)return console.log(`\uD83D\uDCE6 jBatch: Full (${X}/${Y}) - triggering broadcast`),!0;let J=Q-$.lastBroadcast;if(J>=Z)return console.log(`\uD83D\uDCE6 jBatch: Timeout (${J}ms) - triggering broadcast`),!0;return!1}var Q6=()=>{};var Ic={};r8(Ic,{handleDepositCollateral:()=>G60});async function G60($,Q){let{counterpartyId:X,tokenId:Y,amount:Z}=Q.data,J=XY($),q=[],G=$.reserves.get(String(Y))||0n;if(G<Z)return B8(J,` Insufficient reserve for collateral deposit: have ${G}, need ${Z} token ${Y}`),{newState:J,outputs:q};if(!$.accounts.has(X))return B8(J,` Cannot deposit collateral: no account with ${X.slice(-4)}`),{newState:J,outputs:q};if(!J.jBatchState){let{initJBatch:M}=await Promise.resolve().then(() => (Q6(),$6));J.jBatchState=M()}let{batchAddReserveToCollateral:z}=await Promise.resolve().then(() => (Q6(),$6));return z(J.jBatchState,$.entityId,X,Y,Z),B8(J,`\uD83D\uDCE6 Queued RC: ${Z} token ${Y} to account with ${X.slice(-4)} (will broadcast in next batch)`),console.log(` deposit_collateral: Added to jBatch for ${$.entityId.slice(-4)}`),console.log(`   Counterparty: ${X.slice(-4)}`),console.log(`   Token: ${Y}, Amount: ${Z}`),{newState:J,outputs:q}}var Fc=y(()=>{l5()});var Bc={};r8(Bc,{handleRequestWithdrawal:()=>z60});function z60($,Q){let{counterpartyEntityId:X,tokenId:Y,amount:Z}=Q.data,J=$.accounts.get(X);if(!J)throw new Error(`No account exists with ${X.slice(-8)}`);let q=`${$.entityId.slice(0,4)}${X.slice(0,4)}${Y}${Date.now()}`.slice(0,16),G={type:"request_withdrawal",data:{tokenId:Y,amount:Z,requestId:q}};return J.mempool.push(G),console.log(`\uD83D\uDCB8 Queued withdrawal request: ${Z} (token ${Y}) from ${X.slice(-8)}`),console.log(`   Request ID: ${q}`),console.log(`   Account mempool now has ${J.mempool.length} pending transactions`),$}var Sc=async($,Q,X)=>{if(!X)return t0("ENTITY_TX"," EntityTx is undefined!"),{newState:Q,outputs:[]};try{if(X.type==="chat"){let{from:Y,message:Z}=X.data;if(!Tc(Z))return O$.error(` Invalid chat message from ${Y}`),{newState:Q,outputs:[]};let q=(Q.nonces.get(Y)||0)+1,G=XY(Q);return G.nonces.set(Y,q),B8(G,`${Y}: ${Z}`),{newState:G,outputs:[]}}if(X.type==="chatMessage"){let{message:Y}=X.data,Z=XY(Q);return B8(Z,Y),{newState:Z,outputs:[]}}if(X.type==="propose"){let{action:Y,proposer:Z}=X.data,J=wc(Y,Z,Q);if(s0)console.log(`    \uD83D\uDCDD Creating proposal ${J} by ${Z}: ${Y.data.message}`);let q={id:J,proposer:Z,action:Y,votes:new Map([[Z,"yes"]]),status:"pending",created:Q.timestamp},G=Q.config.shares[Z]||BigInt(0),z=G>=Q.config.threshold,M=XY(Q);if(z){if(q.status="executed",M=JT(M,q),s0)console.log(`     Proposal executed immediately - proposer has ${G} >= ${Q.config.threshold} threshold`)}else if(s0)console.log(`     Proposal pending votes - proposer has ${G} < ${Q.config.threshold} threshold`);return M.proposals.set(J,q),{newState:M,outputs:[]}}if(X.type==="vote"){console.log("\uD83D\uDDF3 PROCESSING VOTE: entityTx.data=",X.data);let{proposalId:Y,voter:Z,choice:J,comment:q}=X.data,G=Q.proposals.get(Y);if(console.log(`\uD83D\uDDF3 Vote lookup: proposalId=${Y}, found=${!!G}, status=${G?.status}`),console.log("\uD83D\uDDF3 Available proposals:",Array.from(Q.proposals.keys())),!G||G.status!=="pending")return console.log(`     Vote ignored - proposal ${Y.slice(0,12)}... not found or not pending`),{newState:Q,outputs:[]};console.log(`    \uD83D\uDDF3  Vote by ${Z}: ${J} on proposal ${Y.slice(0,12)}...`);let z=XY(Q),M={...G,votes:new Map(G.votes)},j=q!==void 0?{choice:J,comment:q}:J;M.votes.set(Z,j);let P=Array.from(M.votes.entries()).filter(([A,I])=>{return(typeof I==="object"?I.choice:I)==="yes"}).map(([A,I])=>A),D=VH(Q.config,P);if(s0){let A=Object.values(Q.config.shares).reduce((H,C)=>H+C,BigInt(0)),I=(Number(D)/Number(Q.config.threshold)*100).toFixed(1);console.log(`    \uD83D\uDD0D Proposal votes: ${D} / ${A} [${I}% threshold${Number(D)>=Number(Q.config.threshold)?"+":""}]`)}if(D>=Q.config.threshold){M.status="executed";let A=JT(z,M);return A.proposals.set(Y,M),{newState:A,outputs:[]}}return z.proposals.set(Y,M),{newState:z,outputs:[]}}if(X.type==="profile-update"){console.log("\uD83C\uDFF7 Profile update transaction processing - data:",X.data);let Y=X.data.profile;if(console.log("\uD83C\uDFF7 Extracted profileData:",Y),Y&&Y.entityId){console.log(`\uD83C\uDFF7 Calling processProfileUpdate for entity ${Y.entityId}`);try{await cm(XX,Y.entityId,Y,Y.hankoSignature||"",$)}catch(Z){t0("ENTITY_TX",` Failed to process profile update for ${Y.entityId}:`,Z)}}else console.warn(" Invalid profile-update transaction data:",X.data),console.warn(" ProfileData missing or invalid:",Y);return{newState:Q,outputs:[]}}if(X.type==="j_event")return{newState:Lc(Q,X.data),outputs:[]};if(X.type==="accountInput")return await Cc(Q,X.data,$);if(X.type==="openAccount"){console.log(`\uD83D\uDCB3 OPEN-ACCOUNT: Opening account with ${X.data.targetEntityId}`);let Y=XY(Q),Z=[];if(B8(Y,`\uD83D\uDCB3 Opening account with Entity ${AQ(X.data.targetEntityId)}...`),!Y.accounts.has(X.data.targetEntityId)){console.log(`\uD83D\uDCB3 LOCAL-ACCOUNT: Creating local account with Entity ${AQ(X.data.targetEntityId)}...`);let j=new Map;Y.accounts.set(X.data.targetEntityId,{counterpartyEntityId:X.data.targetEntityId,mempool:[],currentFrame:{height:0,timestamp:$.timestamp,accountTxs:[],prevFrameHash:"",tokenIds:[],deltas:[],stateHash:""},sentTransitions:0,ackedTransitions:0,deltas:j,globalCreditLimits:{ownLimit:BX(1),peerLimit:BX(1)},currentHeight:0,pendingSignatures:[],rollbackCount:0,sendCounter:0,receiveCounter:0,proofHeader:{fromEntity:Q.entityId,toEntity:X.data.targetEntityId,cooperativeNonce:0,disputeNonce:0},proofBody:{tokenIds:[],deltas:[]},frameHistory:[],pendingWithdrawals:new Map,requestedRebalance:new Map})}console.log(`\uD83D\uDCB3 Adding account setup transactions to local mempool for ${AQ(X.data.targetEntityId)}`);let J=Y.accounts.get(X.data.targetEntityId);if(!J)throw new Error("CRITICAL: Account machine not found after creation");let q=1,G=BX(1),M=Q.entityId<X.data.targetEntityId?"left":"right";if(J.mempool.push({type:"add_delta",data:{tokenId:q}}),J.mempool.push({type:"set_credit_limit",data:{tokenId:q,amount:G,side:M}}),console.log(`\uD83D\uDCDD Queued 2 transactions to mempool (total: ${J.mempool.length})`),console.log(" Frame #1 will be auto-proposed on next tick (100ms) via AUTO-PROPOSE"),console.log(`   Transactions: [add_delta, set_credit_limit(side=${M}, amount=1M)]`),B8(Y,` Account opening request sent to Entity ${AQ(X.data.targetEntityId)}`),$.gossip){let j=mV(Y);$.gossip.announce(j),console.log(`\uD83D\uDCE1 Broadcast profile for ${Q.entityId} with ${Y.accounts.size} accounts`)}return{newState:Y,outputs:Z}}if(X.type==="directPayment"){console.log(`\uD83D\uDCB8 DIRECT-PAYMENT: Initiating payment to ${X.data.targetEntityId}`);let Y=XY(Q),Z=[],{targetEntityId:J,tokenId:q,amount:G,route:z,description:M}=X.data;if(!z||z.length===0)if(Y.accounts.has(J))console.log(`\uD83D\uDCB8 Direct account exists with ${AQ(J)}`),z=[Q.entityId,J];else if(console.log(`\uD83D\uDCB8 No direct account, finding route to ${AQ(J)}`),$.gossip){let I=$.gossip.getNetworkGraph().findPaths(Q.entityId,J);if(I.length>0)z=I[0].path,console.log(`\uD83D\uDCB8 Found route: ${z.map((H)=>AQ(H)).join("  ")}`);else return t0("ENTITY_TX",` No route found to ${AQ(J)}`),B8(Y,` Payment failed: No route to ${AQ(J)}`),{newState:Y,outputs:[]}}else return t0("ENTITY_TX"," Cannot find route: Gossip layer not available"),B8(Y," Payment failed: Network routing unavailable"),{newState:Y,outputs:[]};if(z.length<2||z[0]!==Q.entityId)return t0("ENTITY_TX"," Invalid route: doesn't start with current entity"),{newState:Q,outputs:[]};let j=z[1];if(!j)return t0("ENTITY_TX"," Invalid route: no next hop specified in route"),{newState:Q,outputs:[]};if(!Y.accounts.has(j))return t0("ENTITY_TX",` No account with next hop: ${j}`),B8(Y,` Payment failed: No account with ${AQ(j)}`),{newState:Y,outputs:[]};let P={type:"direct_payment",data:{tokenId:q,amount:G,route:z.slice(1),description:M||`Payment to ${AQ(J)}`,fromEntityId:Q.entityId,toEntityId:j}},D=Y.accounts.get(j);if(D){D.mempool.push(P),console.log(`\uD83D\uDCB8 Added payment to mempool for account with ${AQ(j)}`),console.log(`\uD83D\uDCB8 Account mempool now has ${D.mempool.length} pending transactions`);let A=D.proofHeader.fromEntity<D.proofHeader.toEntity;console.log(`\uD83D\uDCB8 Is left entity: ${A}, Has pending frame: ${!!D.pendingFrame}`),B8(Y,`\uD83D\uDCB8 Sending ${G} (token ${q}) to ${AQ(J)} via ${z.length-1} hops`),console.log(`\uD83D\uDCB8 Payment queued for bilateral consensus with ${AQ(j)}`),console.log(`\uD83D\uDCB8 Account ${AQ(j)} should be added to proposableAccounts`);let I=Q.config.validators[0];if(I)Z.push({entityId:Q.entityId,signerId:I,entityTxs:[]});console.log("\uD83D\uDCB8 Added processing trigger to ensure bilateral consensus runs")}return{newState:Y,outputs:Z}}if(X.type==="deposit_collateral"){let{handleDepositCollateral:Y}=await Promise.resolve().then(() => (Fc(),Ic));return await Y(Q,X)}if(X.type==="requestWithdrawal"){let{handleRequestWithdrawal:Y}=await Promise.resolve().then(() => Bc);return{newState:Y(Q,X),outputs:[]}}if(X.type==="settleDiffs"){console.log(`\uD83C\uDFE6 SETTLE-DIFFS: Processing settlement with ${X.data.counterpartyEntityId}`);let Y=XY(Q),{counterpartyEntityId:Z,diffs:J,description:q}=X.data;for(let D of J){let A=D.leftDiff+D.rightDiff+D.collateralDiff;if(A!==0n)throw t0("ENTITY_TX",` INVARIANT-VIOLATION: leftDiff + rightDiff + collateralDiff = ${A} (must be 0)`),new Error(`Settlement invariant violation: ${A} !== 0`)}if(!Y.accounts.has(Z))throw t0("ENTITY_TX",` No account exists with ${AQ(Z)}`),new Error(`No account with ${Z}`);let G=Q.entityId<Z,z=G?Q.entityId:Z,M=G?Z:Q.entityId;console.log(`\uD83C\uDFE6 Canonical order: left=${z.slice(0,10)}..., right=${M.slice(0,10)}...`),console.log(`\uD83C\uDFE6 We are: ${G?"LEFT":"RIGHT"}`);let j=Q.config.jurisdiction;if(!j)throw new Error("No jurisdiction configured for this entity");let P=J.map((D)=>({tokenId:D.tokenId,leftDiff:D.leftDiff,rightDiff:D.rightDiff,collateralDiff:D.collateralDiff,ondeltaDiff:D.ondeltaDiff||0n}));console.log("\uD83C\uDFE6 Calling submitSettle with diffs:",k$(P,2));try{let D=await TV(j,z,M,P);console.log(` Settlement transaction sent: ${D.txHash}`),B8(Y,`\uD83C\uDFE6 ${q||"Settlement"} tx: ${D.txHash.slice(0,10)}... (block ${D.blockNumber})`)}catch(D){throw t0("ENTITY_TX"," Settlement transaction failed:",D),B8(Y,` Settlement failed: ${D.message}`),D}return{newState:Y,outputs:[]}}return{newState:Q,outputs:[]}}catch(Y){return O$.error(` Transaction execution error: ${Y}`),{newState:Q,outputs:[]}}};var Ec=y(()=>{WT();lw();rY();tX();ow();$9();QT();ZT();qT();GT();l5();HJ();cU()});var _c=y(()=>{bV()});var kc=y(()=>{Ec();_c();QT();ZT();qT();GT()});var xc={};r8(xc,{initCrontab:()=>W60,getAccountTimeoutStats:()=>D60,executeCrontab:()=>V60,ACCOUNT_TIMEOUT_MS:()=>K60,ACCOUNT_TIMEOUT_CHECK_INTERVAL_MS:()=>U60});function W60(){let $=new Map;return $.set("checkAccountTimeouts",{name:"checkAccountTimeouts",intervalMs:1e4,lastRun:0,handler:O60}),$.set("broadcastBatch",{name:"broadcastBatch",intervalMs:5000,lastRun:0,handler:j60}),$.set("hubRebalance",{name:"hubRebalance",intervalMs:30000,lastRun:0,handler:P60}),{tasks:$}}async function V60($,Q){let X=$.state.timestamp,Y=[];for(let Z of Q.tasks.values())if(X-Z.lastRun>=Z.intervalMs)try{let q=await Z.handler($);if(Y.push(...q),Z.lastRun=X,q.length>0)console.log(` CRONTAB: Task "${Z.name}" generated ${q.length} outputs`)}catch(q){console.error(` CRONTAB: Task "${Z.name}" failed:`,q)}return Y}async function O60($){let Q=[],X=$.state.timestamp;for(let[Y,Z]of $.state.accounts.entries())if(Z.pendingFrame){let J=X-Z.pendingFrame.timestamp;if(J>30000){console.warn(` TIMEOUT DETECTED: Account with ${Y.slice(-4)} has pending frame ${Z.pendingFrame.height} for ${J}ms`),console.warn(`   Frame timestamp: ${Z.pendingFrame.timestamp}`),console.warn(`   Current time: ${X}`),console.warn(`   Age: ${J}ms (threshold: 30000ms)`);let q=M60($,Y,Z,J);Q.push(q),console.warn(`\uD83D\uDCAC DISPUTE-SUGGESTION: Generated event for entity ${$.entityId.slice(-4)}`),console.warn(`   Counterparty: ${Y.slice(-4)}`),console.warn(`   Frame: ${Z.pendingFrame.height}`),console.warn(`   Age: ${Math.floor(J/1000)}s`)}}return Q}function M60($,Q,X,Y){let Z=`\uD83D\uDEA8 DISPUTE SUGGESTION: Account with ${Q.slice(-4)} has not acknowledged frame #${X.pendingFrame.height} for ${Math.floor(Y/1000)}s (threshold: ${Math.floor(30)}s). Consider initiating dispute or investigating network issues.`;return{entityId:$.entityId,signerId:"system",entityTxs:[{type:"chatMessage",data:{message:Z,timestamp:$.state.timestamp,metadata:{type:"DISPUTE_SUGGESTION",counterpartyId:Q,height:X.pendingFrame.height,frameAge:Y}}}]}}function D60($){let Q=$.state.timestamp,X=0,Y=0,Z=0;for(let J of $.state.accounts.values())if(J.pendingFrame){X++;let q=Q-J.pendingFrame.timestamp;if(q>30000)Y++;if(q>Z)Z=q}return{totalAccounts:$.state.accounts.size,pendingFrames:X,timedOutFrames:Y,oldestPendingFrameAge:Z}}async function j60($){let Q=[];if(!$.state.jBatchState){let{initJBatch:G}=await Promise.resolve().then(() => (Q6(),$6));$.state.jBatchState=G()}let{shouldBroadcastBatch:X,isBatchEmpty:Y}=await Promise.resolve().then(() => (Q6(),$6));if(!X($.state.jBatchState,$.state.timestamp))return Q;if(Y($.state.jBatchState.batch))return Q;console.log(`\uD83D\uDCE4 CRONTAB: jBatch ready for broadcast (entity ${$.entityId.slice(-4)})`);let Z=$.state.config.jurisdiction;if(!Z)return console.warn(` No jurisdiction configured for entity ${$.entityId.slice(-4)} - skipping batch broadcast`),Q;let{broadcastBatch:J}=await Promise.resolve().then(() => (Q6(),$6)),q=await J($.entityId,$.state.jBatchState,Z);if(q.success)console.log(` jBatch broadcasted successfully: ${q.txHash}`),Q.push({entityId:$.entityId,signerId:"system",entityTxs:[{type:"chatMessage",data:{message:`\uD83D\uDCE4 Batch broadcasted: ${q.txHash?.slice(0,16)}...`,timestamp:$.state.timestamp,metadata:{type:"BATCH_BROADCAST",txHash:q.txHash}}}]});else console.error(` jBatch broadcast failed: ${q.error}`);return Q}async function P60($){let Q=[],{deriveDelta:X}=await Promise.resolve().then(() => ($9(),Yc)),Y=new Map;for(let[Z,J]of $.state.accounts.entries())for(let[q,G]of J.deltas.entries()){let z=$.entityId<Z,M=X(G,z);if(M.delta<0n){let P=-M.delta;if(P>0n){if(!Y.has(q))Y.set(q,{netSpenders:[],netReceivers:[]});Y.get(q).netSpenders.push({entityId:Z,debt:P,collateral:G.collateral})}}let j=J.requestedRebalance.get(q);if(j&&j>0n){if(!Y.has(q))Y.set(q,{netSpenders:[],netReceivers:[]});Y.get(q).netReceivers.push({entityId:Z,requested:j})}}for(let[Z,{netSpenders:J,netReceivers:q}]of Y.entries()){if(J.length===0||q.length===0)continue;let G=J.reduce((P,D)=>P+D.debt,0n),z=q.reduce((P,D)=>P+D.requested,0n),M=G<z?G:z;if(M===0n)continue;console.log(`\uD83D\uDD04 REBALANCE OPPORTUNITY token ${Z}: ${M}`);let j=`\uD83D\uDD04 REBALANCE OPPORTUNITY (Token ${Z}):
Spenders: ${J.length} (debt: ${G})
Receivers: ${q.length} (requested: ${z})
Match: ${M} (${Number(M*100n)/Number(G||1n)}%)`;Q.push({entityId:$.entityId,signerId:"system",entityTxs:[{type:"chatMessage",data:{message:j,timestamp:$.state.timestamp,metadata:{type:"REBALANCE_OPPORTUNITY",tokenId:Z,rebalanceAmount:M.toString()}}}]})}return Q}var K60=30000,U60=1e4;var H60=($)=>{try{if(!$.entityId||typeof $.entityId!=="string")return O$.error(` Invalid entityId: ${$.entityId}`),!1;if(!$.signerId||typeof $.signerId!=="string")return O$.error(` Invalid signerId: ${$.signerId}`),!1;if($.entityTxs){if(!Array.isArray($.entityTxs))return O$.error(` EntityTxs must be array, got: ${typeof $.entityTxs}`),!1;if($.entityTxs.length>1000)return O$.error(` Too many transactions: ${$.entityTxs.length} > 1000`),!1;for(let Q of $.entityTxs){if(!Q.type||!Q.data)return O$.error(` Invalid transaction: ${k$(Q)}`),!1;if(typeof Q.type!=="string"||!["chat","propose","vote","profile-update","j_event","accountInput","openAccount","directPayment"].includes(Q.type))return O$.error(` Invalid transaction type: ${Q.type}`),!1}}if($.precommits){if(!($.precommits instanceof Map))return O$.error(` Precommits must be Map, got: ${typeof $.precommits}`),!1;if($.precommits.size>100)return O$.error(` Too many precommits: ${$.precommits.size} > 100`),!1;for(let[Q,X]of $.precommits)if(typeof Q!=="string"||typeof X!=="string")return O$.error(` Invalid precommit format: ${Q} -> ${X}`),!1}if($.proposedFrame){let Q=$.proposedFrame;if(typeof Q.height!=="number"||Q.height<0)return O$.error(` Invalid frame height: ${Q.height}`),!1;if(!Array.isArray(Q.txs))return O$.error(" Frame txs must be array"),!1;if(!Q.hash||typeof Q.hash!=="string")return O$.error(` Invalid frame hash: ${Q.hash}`),!1}return!0}catch(Q){return O$.error(` Input validation error: ${Q}`),!1}},N60=($)=>{try{if(!$.entityId||!$.signerId)return O$.error(` Invalid replica IDs: ${$.entityId}:${$.signerId}`),!1;if($.state.height<0)return O$.error(` Invalid state height: ${$.state.height}`),!1;if($.mempool.length>1e4)return O$.error(` Mempool overflow: ${$.mempool.length} > 10000`),!1;return!0}catch(Q){return O$.error(` Replica validation error: ${Q}`),!1}},A60=($,Q,X)=>{try{let Y=$.get(Q);if(Y&&Y!==X)return O$.error(` BYZANTINE FAULT: Double-sign detected from ${Q}`),O$.error(` Existing: ${Y}`),O$.error(` New: ${X}`),!0;return!1}catch(Y){return O$.error(` Byzantine detection error: ${Y}`),!1}},R60=($,Q)=>{try{let Y=Math.abs($-Q);if(Y>30000)return O$.error(` Timestamp drift too large: ${Y}ms > ${30000}ms`),O$.error(` Proposed: ${new Date($).toISOString()}`),O$.error(` Current: ${new Date(Q).toISOString()}`),!1;return!0}catch(X){return O$.error(` Timestamp validation error: ${X}`),!1}},C60=($)=>{try{if($<0n)return O$.error(` Negative voting power: ${$}`),!1;if($>BigInt(Number.MAX_SAFE_INTEGER))return O$.error(` Voting power overflow: ${$} > ${Number.MAX_SAFE_INTEGER}`),!1;return!0}catch(Q){return O$.error(` Voting power validation error: ${Q}`),!1}},vc=async($,Q,X)=>{let Y=o$(X.entityId),Z=Date.now(),J=Q.proposal?.hash?.slice(0,10)||"none",q=X.proposedFrame?.hash?.slice(0,10)||"none";if(console.log(`\uD83D\uDD0D INPUT-RECEIVED: [${Z}] Processing input for Entity #${Y}:${G7(X.signerId)}`),console.log(`\uD83D\uDD0D INPUT-STATE: Current proposal: ${J}, Mempool: ${Q.mempool.length}, isProposer: ${Q.isProposer}`),console.log(`\uD83D\uDD0D INPUT-DETAILS: txs=${X.entityTxs?.length||0}, precommits=${X.precommits?.size||0}, frame=${q}`),X.precommits?.size){let P=Array.from(X.precommits.keys());console.log(`\uD83D\uDD0D INPUT-PRECOMMITS: Received precommits from: ${P.join(", ")}`);let D=X.precommits.values().next().value,A=D?D.split("_")[2]?.slice(0,10):"unknown";console.log(`\uD83D\uDD0D PRECOMMIT-PROPOSAL: These precommits are for proposal: ${A}`)}if(!H60(X))return O$.error(` Invalid input for ${X.entityId}:${X.signerId}`),{newState:Q.state,outputs:[]};if(!N60(Q))return O$.error(` Invalid replica state for ${Q.entityId}:${Q.signerId}`),{newState:Q.state,outputs:[]};let G=[],{executeCrontab:z,initCrontab:M}=await Promise.resolve().then(() => xc);if(!Q.state.crontabState)Q.state.crontabState=M();let j=await z(Q,Q.state.crontabState);if(j.length>0)console.log(` CRONTAB: Generated ${j.length} outputs from periodic tasks`),G.push(...j);if(X.entityTxs?.length){let P=X.entityTxs.filter((D)=>D.type==="vote");if(P.length>0)console.log(`\uD83D\uDDF3 VOTE-MEMPOOL: ${Q.signerId} receiving ${P.length} vote transactions`),P.forEach((D)=>{console.log("\uD83D\uDDF3 VOTE-TX:",D)});if(Q.signerId==="alice")console.log(`\uD83D\uDD25 ALICE-RECEIVES: Alice receiving ${X.entityTxs.length} txs from input`),console.log("\uD83D\uDD25 ALICE-RECEIVES: Transaction types:",X.entityTxs.map((D)=>D.type)),console.log(`\uD83D\uDD25 ALICE-RECEIVES: Alice isProposer=${Q.isProposer}, current mempool=${Q.mempool.length}`);for(let D of X.entityTxs)console.log(`\uD83C\uDFDB E-MACHINE: - EntityTx type="${D.type}", data=`,k$(D.data,2));if(Q.mempool.push(...X.entityTxs),s0)console.log(`     Added ${X.entityTxs.length} txs to mempool (total: ${Q.mempool.length})`);if(s0&&X.entityTxs.length>3)console.log(`      CORNER CASE: Large batch of ${X.entityTxs.length} transactions`)}else if(X.entityTxs&&X.entityTxs.length===0);if(!Q.isProposer&&Q.mempool.length>0){let P=Q.state.config.validators[0];if(!P)return t0("FRAME_CONSENSUS",` No proposer found in validators: ${Q.state.config.validators}`),{newState:Q.state,outputs:G};let D=Q.mempool.length;console.log(`\uD83D\uDD25 BOB-TO-ALICE: Bob sending ${D} txs to proposer ${P}`),console.log("\uD83D\uDD25 BOB-TO-ALICE: Transaction types:",Q.mempool.map((A)=>A.type)),G.push({entityId:X.entityId,signerId:P,entityTxs:[...Q.mempool]}),Q.sentTransitions=D,console.log(`\uD83D\uDCCA Tracked ${D} sent transitions (will clear on commit)`)}if(X.precommits?.size&&X.proposedFrame&&!Q.proposal){let P=Array.from(X.precommits.keys());if(VH(Q.state.config,P)>=Q.state.config.threshold){if(Q.lockedFrame){if(Q.lockedFrame.hash!==X.proposedFrame.hash)return t0("FRAME_CONSENSUS"," BYZANTINE: Commit frame doesn't match locked frame!"),t0("FRAME_CONSENSUS",`   Locked: ${Q.lockedFrame.hash}`),t0("FRAME_CONSENSUS",`   Commit: ${X.proposedFrame.hash}`),{newState:Q.state,outputs:G};console.log(` Commit validation: matches locked frame ${Q.lockedFrame.hash.slice(0,10)}`)}for(let[A,I]of X.precommits){let H=`sig_${A}_${X.proposedFrame.hash}`;if(I!==H)return t0("FRAME_CONSENSUS",` BYZANTINE: Invalid signature format from ${A}`),t0("FRAME_CONSENSUS",`   Expected: ${H.slice(0,30)}...`),t0("FRAME_CONSENSUS",`   Received: ${I.slice(0,30)}...`),{newState:Q.state,outputs:G}}if(console.log(` All ${X.precommits.size} signatures validated for frame ${X.proposedFrame.hash.slice(0,10)}`),Q.state={...X.proposedFrame.newState,height:Q.state.height+1},Q.sentTransitions&&Q.sentTransitions>0)console.log(`\uD83D\uDCCA Clearing ${Q.sentTransitions} committed txs from mempool (${Q.mempool.length} total)`),Q.mempool.splice(0,Q.sentTransitions),Q.sentTransitions=0,console.log(`\uD83D\uDCCA Mempool after commit: ${Q.mempool.length} txs remaining`);else Q.mempool.length=0;if(delete Q.lockedFrame,s0)console.log(`     Applied commit, new state: ${Q.state.messages.length} messages, height: ${Q.state.height}`);return{newState:Q.state,outputs:G}}}if(X.proposedFrame&&(!Q.proposal||Q.state.config.mode==="gossip-based"&&Q.isProposer)){let P=`sig_${Q.signerId}_${X.proposedFrame.hash}`,D=Q.state.config;if(Q.lockedFrame=X.proposedFrame,D.mode==="gossip-based")D.validators.forEach((A)=>{console.log(`\uD83D\uDD0D GOSSIP: [${Z}] ${Q.signerId} sending precommit to ${A} for entity ${X.entityId.slice(0,10)}, proposal ${q}, sig: ${P.slice(0,20)}...`),G.push({entityId:X.entityId,signerId:A,precommits:new Map([[Q.signerId,P]])})});else{let A=D.validators[0];if(!A)return t0("FRAME_CONSENSUS",` No proposer found in validators: ${D.validators}`),{newState:Q.state,outputs:G};console.log(`\uD83D\uDD0D PROPOSER: [${Z}] ${Q.signerId} sending precommit to ${A} for entity ${X.entityId.slice(0,10)}, proposal ${q}, sig: ${P.slice(0,20)}...`),console.log(`\uD83D\uDD0D PROPOSER-REASON: Signed new proposal, current state: proposal=${J}, locked=${Q.lockedFrame?.hash?.slice(0,10)||"none"}`),G.push({entityId:X.entityId,signerId:A,precommits:new Map([[Q.signerId,P]])})}}if(X.precommits?.size&&Q.proposal){for(let[A,I]of X.precommits){if(A60(Q.proposal.signatures,A,I))return O$.error(` Rejecting Byzantine input from ${A}`),{newState:Q.state,outputs:G};Q.proposal.signatures.set(A,I)}if(s0)console.log(`     Collected ${X.precommits.size} signatures (total: ${Q.proposal.signatures.size})`);let P=Array.from(Q.proposal.signatures.keys()),D=VH(Q.state.config,P);if(!C60(D))return O$.error(` Invalid voting power calculation: ${D}`),{newState:Q.state,outputs:G};if(s0){let A=Object.values(Q.state.config.shares).reduce((H,C)=>H+C,BigInt(0)),I=(Number(D)/Number(Q.state.config.threshold)*100).toFixed(1);if(O$.info(`    \uD83D\uDD0D Threshold check: ${D} / ${A} [${I}% threshold${Number(D)>=Number(Q.state.config.threshold)?"+":""}]`),Q.state.config.mode==="gossip-based")console.log("      CORNER CASE: Gossip mode - all validators receive precommits")}if(D>=Q.state.config.threshold){Q.state={...Q.proposal.newState,height:Q.state.height+1};let A=L60(Q.proposal.signatures,Q.state.config),I=Q.proposal;if(Q.mempool.length=0,delete Q.proposal,delete Q.lockedFrame,Q.state.config.mode==="proposer-based"){let H=I.hash.slice(0,10);console.log(`\uD83D\uDD0D COMMIT-START: [${Z}] ${Q.signerId} reached threshold for proposal ${H}, sending commit notifications...`),Q.state.config.validators.forEach((C)=>{if(C!==Q.signerId){let B=Array.from(A.keys());console.log(`\uD83D\uDD0D COMMIT: [${Z}] ${Q.signerId} sending commit notification to ${C} for entity ${X.entityId.slice(0,10)}, proposal ${H} (${A.size} precommits from: ${B.join(", ")})`),G.push({entityId:X.entityId,signerId:C,precommits:A,proposedFrame:I})}})}else if(console.log(`\uD83D\uDD0D GOSSIP-COMMIT: [${Z}] ${Q.signerId} NOT sending commit notifications (gossip mode) for entity ${X.entityId.slice(0,10)}...`),s0)console.log("     Gossip mode: No commit notifications needed (everyone has precommits via gossip)")}}if(console.log(`\uD83C\uDFAF CONSENSUS-CHECK: Entity ${Q.entityId}:${Q.signerId}`),console.log(`\uD83C\uDFAF   isProposer: ${Q.isProposer}`),console.log(`\uD83C\uDFAF   mempool.length: ${Q.mempool.length}`),console.log(`\uD83C\uDFAF   hasProposal: ${!!Q.proposal}`),Q.mempool.length>0)console.log("\uD83C\uDFAF   mempoolTypes:",Q.mempool.map((P)=>P.type));if(Q.isProposer&&Q.mempool.length>0&&!Q.proposal){if(console.log("\uD83D\uDD25 ALICE-PROPOSES: Alice auto-propose triggered!"),console.log(`\uD83D\uDD25 ALICE-PROPOSES: mempool=${Q.mempool.length}, isProposer=${Q.isProposer}, hasProposal=${!!Q.proposal}`),console.log("\uD83D\uDD25 ALICE-PROPOSES: Mempool transaction types:",Q.mempool.map((B)=>B.type)),Q.state.config.validators.length===1&&Q.state.config.threshold===BigInt(1)){console.log("\uD83D\uDE80 SINGLE-SIGNER: Direct execution without consensus for single signer entity");let{newState:B,outputs:S}=await fc($,Q.state,Q.mempool);if(Q.state={...B,height:Q.state.height+1},G.push(...S),Q.mempool.length=0,s0)console.log(`     Single signer entity: transactions applied directly, height: ${Q.state.height}`);return{newState:Q.state,outputs:G}}if(s0)console.log(`    \uD83D\uDE80 Auto-propose triggered: mempool=${Q.mempool.length}, isProposer=${Q.isProposer}, hasProposal=${!!Q.proposal}`);let{newState:D,outputs:A}=await fc($,Q.state,Q.mempool);G.push(...A);let I=$.timestamp;if(!R60(I,$.timestamp))return O$.error(` Invalid proposal timestamp: ${I}`),{newState:Q.state,outputs:G};let H=`frame_${Q.state.height+1}_${I}`,C=`sig_${Q.signerId}_${H}`;if(Q.proposal={height:Q.state.height+1,txs:[...Q.mempool],hash:H,newState:{...D,height:Q.state.height+1,timestamp:I},signatures:new Map([[Q.signerId,C]])},s0)console.log(`     Auto-proposing frame ${Q.proposal.hash} with ${Q.proposal.txs.length} txs and self-signature.`);Q.state.config.validators.forEach((B)=>{if(B!==Q.signerId)G.push({entityId:X.entityId,signerId:B,proposedFrame:Q.proposal})})}else if(Q.isProposer&&Q.mempool.length===0&&!Q.proposal);else if(!Q.isProposer&&Q.mempool.length>0){let P=Q.state.config.validators[0];if(!P)return t0("FRAME_CONSENSUS",` No proposer found in validators: ${Q.state.config.validators}`),{newState:Q.state,outputs:G};console.log(`\uD83D\uDD25 BOB-TO-ALICE: Bob sending ${Q.mempool.length} txs to proposer ${P}`),console.log("\uD83D\uDD25 BOB-TO-ALICE: Transaction types:",Q.mempool.map((D)=>D.type)),G.push({entityId:X.entityId,signerId:P,entityTxs:[...Q.mempool]}),Q.mempool.length=0}else if(Q.isProposer&&Q.proposal);return console.log(`\uD83D\uDD0D OUTPUT-GENERATED: [${Z}] Entity #${Y}:${G7(Q.signerId)} generating ${G.length} outputs`),console.log(`\uD83D\uDD0D OUTPUT-FINAL-STATE: proposal=${Q.proposal?.hash?.slice(0,10)||"none"}, mempool=${Q.mempool.length}, locked=${Q.lockedFrame?.hash?.slice(0,10)||"none"}`),G.forEach((P,D)=>{let A=o$(P.entityId),I=P.proposedFrame?.hash?.slice(0,10)||"none";if(console.log(`\uD83D\uDD0D OUTPUT-${D+1}: [${Z}] To Entity #${A}:${G7(P.signerId)} - txs=${P.entityTxs?.length||0}, precommits=${P.precommits?.size||0}, frame=${I}`),P.precommits?.size){let H=Array.from(P.precommits.keys());console.log(`\uD83D\uDD0D OUTPUT-${D+1}-PRECOMMITS: Sending precommits from: ${H.join(", ")}`),P.precommits.forEach((C,B)=>{let S=C.slice(0,20),_=C.split("_")[2]?.slice(0,10)||"unknown";console.log(`\uD83D\uDD0D OUTPUT-${D+1}-SIG-DETAIL: ${B} -> ${S}... (proposal: ${_})`)})}if(P.proposedFrame&&P.precommits?.size)console.log(`\uD83D\uDD0D OUTPUT-${D+1}-TYPE: COMMIT_NOTIFICATION (frame + precommits)`);else if(P.precommits?.size)console.log(`\uD83D\uDD0D OUTPUT-${D+1}-TYPE: PRECOMMIT_VOTE (precommits only)`);else if(P.proposedFrame)console.log(`\uD83D\uDD0D OUTPUT-${D+1}-TYPE: PROPOSAL (frame only)`);else if(P.entityTxs?.length)console.log(`\uD83D\uDD0D OUTPUT-${D+1}-TYPE: TRANSACTION_FORWARD (txs only)`);else console.log(`\uD83D\uDD0D OUTPUT-${D+1}-TYPE: UNKNOWN (empty output)`)}),{newState:Q.state,outputs:G}},fc=async($,Q,X)=>{console.log(`\uD83C\uDFAF APPLY-ENTITY-FRAME: Processing ${X.length} transactions`),X.forEach((j,P)=>{console.log(`\uD83C\uDFAF Transaction ${P}: type="${j.type}", data=`,j.data)});let Y=Q,Z=[],J=new Set;for(let j of X){let{newState:P,outputs:D}=await Sc($,Y,j);if(Y=P,Z.push(...D),j.type==="accountInput"&&j.data){let A=j.data.fromEntityId,I=Y.accounts.get(A);if(I){let H=j.data.newAccountFrame,C=j.data.height&&j.data.prevSignatures,B=I.mempool.length>0;if(H||B&&!I.pendingFrame)J.add(A),console.log(`\uD83D\uDD04 Added ${A.slice(0,10)} to proposable - NewFrame:${H}, Pending:${B}`);else if(C)console.log(` Received ACK from ${A.slice(0,10)}, no action needed (mempool empty)`)}}else if(j.type==="directPayment"&&j.data){console.log("\uD83D\uDD0D DIRECT-PAYMENT detected in applyEntityFrame"),console.log("\uD83D\uDD0D Payment data:",{targetEntityId:j.data.targetEntityId,route:j.data.route,amount:j.data.amount}),console.log(`\uD83D\uDD0D Current entity has ${Y.accounts.size} accounts`);for(let[A,I]of Y.accounts){let H=I.proofHeader.fromEntity<I.proofHeader.toEntity;if(console.log(`\uD83D\uDD0D Checking account ${A.slice(0,10)}: mempool=${I.mempool.length}, isLeft=${H}, pendingFrame=${!!I.pendingFrame}`),I.mempool.length>0)J.add(A),console.log(`\uD83D\uDD04  Added ${A.slice(0,10)} to proposableAccounts (has ${I.mempool.length} mempool items)`)}}else if(j.type==="openAccount"&&j.data){let A=j.data.targetEntityId,I=Y.accounts.get(A);if(I){if(I.proofHeader.fromEntity<I.proofHeader.toEntity)J.add(A),console.log(`\uD83D\uDD04 Added ${A.slice(0,10)} to proposable (new account opened)`)}}}console.log("\uD83D\uDE80 AUTO-PROPOSE: Starting bilateral consensus check"),console.log(`\uD83D\uDE80 Proposable accounts so far: ${Array.from(J).join(", ")||"none"}`);let{getAccountsToProposeFrames:q,proposeAccountFrame:G}=await Promise.resolve().then(() => ($T(),Rc)),z=q(Y);console.log(`\uD83D\uDE80 Additional accounts from getAccountsToProposeFrames: ${z.join(", ")||"none"}`),z.forEach((j)=>J.add(j));let M=Array.from(J).sort();if(M.length>0){console.log(`\uD83D\uDD04 AUTO-PROPOSE: ${M.length} accounts need frame proposals`),console.log(`\uD83D\uDD04 AUTO-PROPOSE: Accounts to propose: ${M.map((j)=>j.slice(0,10)).join(", ")}`);for(let j of M){console.log(`\uD83D\uDD04 AUTO-PROPOSE: Processing account ${j.slice(0,10)}...`);let P=Y.accounts.get(j);if(P){console.log(`\uD83D\uDD04 AUTO-PROPOSE: Account details - mempool=${P.mempool.length}, pendingFrame=${!!P.pendingFrame}`);let D=await G($,P);if(console.log(`\uD83D\uDD04 AUTO-PROPOSE: Proposal result - success=${D.success}, hasInput=${!!D.accountInput}, error=${D.error||"none"}`),D.success&&D.accountInput){let A="alice",I=Array.from($.replicas.keys()).filter((C)=>C.startsWith(D.accountInput.toEntityId+":"));if(I.length>0){let B=$.replicas.get(I[0])?.state.config.validators[0];if(B)A=B}let H={entityId:D.accountInput.toEntityId,signerId:A,entityTxs:[{type:"accountInput",data:D.accountInput}]};Z.push(H),WH(Y,D.events)}}}}return{newState:Y,outputs:Z}},VH=($,Q)=>{return Q.reduce((X,Y)=>{let Z=$.shares[Y];if(Z===void 0)throw new Error(`CONSENSUS-SAFETY: Unknown validator ${Y} - cannot calculate quorum power`);return X+Z},0n)},L60=($,Q)=>{let X=Array.from($.entries()).sort(([Y],[Z])=>{let J=Q.validators.indexOf(Y),q=Q.validators.indexOf(Z);return J-q});return new Map(X)},gc=($)=>{let Q=new Map,X=0,Y=$.filter((Z)=>Z.signerId.includes("carol"));if(Y.length>1)console.log(`\uD83D\uDD0D MERGE-CAROL-ALERT: Found ${Y.length} inputs from Carol - potential duplicate source!`),Y.forEach((Z,J)=>{let q=Z.entityId.slice(0,10),G=Z.precommits?Array.from(Z.precommits.keys()).join(","):"none";console.log(`\uD83D\uDD0D MERGE-CAROL-${J+1}: ${q}:${Z.signerId} - precommits: ${G}`)});for(let Z of $){let J=`${Z.entityId}:${Z.signerId}`,q=Z.entityId.slice(0,10);if(Q.has(J)){let G=Q.get(J);if(X++,console.log(`\uD83D\uDD0D DUPLICATE-FOUND: Merging duplicate input ${X} for ${q}:${Z.signerId}`),Z.entityTxs)G.entityTxs=[...G.entityTxs||[],...Z.entityTxs],console.log(`\uD83D\uDD0D MERGE-TXS: Added ${Z.entityTxs.length} transactions`);if(Z.precommits){let z=G.precommits||new Map;console.log(`\uD83D\uDD0D MERGE-PRECOMMITS: Merging ${Z.precommits.size} precommits into existing ${z.size} for ${q}:${Z.signerId}`),Z.precommits.forEach((M,j)=>{console.log(`\uD83D\uDD0D MERGE-DETAIL: Adding precommit from ${j} (sig: ${M.slice(0,20)}...)`),z.set(j,M)}),G.precommits=z,console.log(`\uD83D\uDD0D MERGE-RESULT: Total ${z.size} precommits after merge`)}if(Z.proposedFrame)G.proposedFrame=Z.proposedFrame;console.log(`    \uD83D\uDD04 Merging inputs for ${J}: txs=${Z.entityTxs?.length||0}, precommits=${Z.precommits?.size||0}, frame=${!!Z.proposedFrame}`)}else Q.set(J,{...Z})}if(X>0)console.log(`      CORNER CASE: Merged ${X} duplicate inputs (${$.length}  ${Q.size})`);return Array.from(Q.values())};var WT=y(()=>{kc();tX();cU();l5()});function X6(){let $=new Map,Q=(Z)=>{let J=$.get(Z.entityId),q=Z.metadata?.lastUpdated||0,G=J?.metadata?.lastUpdated||0;if(!J||q>G)$.set(Z.entityId,Z),console.log(`\uD83D\uDCE1 Gossip updated for ${Z.entityId} (timestamp: ${q})`);else console.log(`\uD83D\uDCE1 Gossip ignored older update for ${Z.entityId} (${q} <= ${G})`)},X=()=>{return Array.from($.values())},Y=()=>{return new Map};return{profiles:$,announce:Q,getProfiles:X}}async function yc($,Q){try{let X=0,Y=$.iterator({gte:"profile:",lt:"profile:"});for await(let[Z,J]of Y)try{let q=JSON.parse(J);Q.announce({entityId:q.entityId,capabilities:q.capabilities||[],hubs:q.hubs||[],metadata:{name:q.name,avatar:q.avatar,bio:q.bio,website:q.website,lastUpdated:q.lastUpdated,hankoSignature:q.hankoSignature}}),X++}catch(q){console.warn(` Failed to parse profile from key ${Z}:`,q)}return console.log(`\uD83D\uDCE1 Restored ${X} profiles from DB into gossip`),X}catch(X){return console.error(" Failed to load persisted profiles:",X),0}}class bc{provider;entityProviderContract;depositoryContract;signers=new Map;isWatching=!1;entityProviderABI=["event EntityRegistered(bytes32 indexed entityId, uint256 indexed entityNumber, bytes32 boardHash)","event ControlSharesReleased(bytes32 indexed entityId, address indexed depository, uint256 controlAmount, uint256 dividendAmount, string purpose)","event NameAssigned(string indexed name, uint256 indexed entityNumber)"];depositoryABI=["event ControlSharesReceived(address indexed entityProvider, address indexed fromEntity, uint256 indexed tokenId, uint256 amount, bytes data)","event ReserveUpdated(bytes32 indexed entity, uint256 indexed tokenId, uint256 newBalance)","event ReserveTransferred(bytes32 indexed from, bytes32 indexed to, uint256 indexed tokenId, uint256 amount)","event SettlementProcessed(bytes32 indexed leftEntity, bytes32 indexed rightEntity, uint256 indexed tokenId, uint256 leftReserve, uint256 rightReserve, uint256 collateral, int256 ondelta)","event TransferReserveToCollateral(bytes32 indexed receivingEntity, bytes32 indexed counterentity, uint256 collateral, int256 ondelta, uint256 indexed tokenId)"];constructor($){let Q=$.rpcUrl;if(typeof window!=="undefined"&&$.rpcUrl.startsWith("/"))Q=new URL($.rpcUrl,window.location.origin).href,console.log(`\uD83D\uDD27 J-WATCHER: Resolved ${$.rpcUrl}  ${Q}`);if(this.provider=new O8.JsonRpcProvider(Q),this.entityProviderContract=new O8.Contract($.entityProviderAddress,this.entityProviderABI,this.provider),this.depositoryContract=new O8.Contract($.depositoryAddress,this.depositoryABI,this.provider),kY)console.log(`\uD83D\uDD2D J-WATCHER: Initialized with RPC: ${$.rpcUrl}`),console.log(`\uD83D\uDD2D J-WATCHER: EntityProvider: ${$.entityProviderAddress}`),console.log(`\uD83D\uDD2D J-WATCHER: Depository: ${$.depositoryAddress}`)}addSigner($,Q,X){if(this.signers.set($,{signerId:$,privateKey:Q,entityIds:X}),kY)console.log(`\uD83D\uDD2D J-WATCHER: Added signer ${$} monitoring entities: ${X.join(", ")}`)}async startWatching($){if(this.isWatching){console.log("\uD83D\uDD2D J-WATCHER: Already watching");return}this.isWatching=!0,console.log("\uD83D\uDD2D J-WATCHER: Starting simple first-principles watcher...");try{let Q=await this.provider.getBlockNumber();console.log(`\uD83D\uDD2D J-WATCHER: Connected to blockchain at block ${Q}`)}catch(Q){console.log(`\uD83D\uDD2D  J-WATCHER: Blockchain not ready, will retry: ${Q instanceof Error?Q.message:String(Q)}`)}setInterval(async()=>{if(!this.isWatching)return;try{await this.syncAllProposerReplicas($)}catch(Q){if(kY&&!(Q instanceof Error&&Q.message.includes("ECONNREFUSED")))console.error("\uD83D\uDD2D J-WATCHER: Sync error:",Q instanceof Error?Q.message:String(Q))}},1000),console.log("\uD83D\uDD2D J-WATCHER: Started with simple 1s polling")}stopWatching(){this.isWatching=!1,this.entityProviderContract.removeAllListeners(),this.depositoryContract.removeAllListeners(),console.log("\uD83D\uDD2D J-WATCHER: Stopped watching")}async syncAllProposerReplicas($){try{let Q=await this.provider.getBlockNumber();if(kY){console.log(`\uD83D\uDD2D\uD83D\uDD0D SYNC-START: Current blockchain block=${Q}, total replicas=${$.replicas.size}`),console.log(`\uD83D\uDD2D\uD83D\uDD0D SYNC-ENV-TIMESTAMP: env.timestamp=${$.timestamp}`);for(let[Y,Z]of $.replicas.entries())console.log(`\uD83D\uDD2D\uD83D\uDD0D REPLICA-STATE: ${Y}  jBlock=${Z.state.jBlock}, height=${Z.state.height}, isProposer=${Z.isProposer}`)}let X=[];for(let[Y,Z]of $.replicas.entries())if(Z.isProposer){let[J,q]=Y.split(":");if(!J||!q)continue;let G=Z.state.jBlock||0;if(kY)console.log(`\uD83D\uDD2D\uD83D\uDD0D REPLICA-CHECK: ${q}  Entity ${J.slice(0,10)}... jBlock=${G}, currentBlock=${Q}, isProposer=${Z.isProposer}`);if(G<Q){if(X.push({entityId:J,signerId:q,lastJBlock:G}),lV)console.log(`\uD83D\uDD2D\uD83D\uDD0D PROPOSER-SYNC: Found proposer ${q} for entity ${J.slice(0,10)}... at jBlock ${G}, needs sync to ${Q}`)}else if(kY)console.log(`\uD83D\uDD2D REPLICA-SYNCED: ${q}  Entity ${J.slice(0,10)}... already synced (jBlock=${G} >= currentBlock=${Q})`)}if(X.length===0)return;if(kY){console.log(`\uD83D\uDD2D SYNC: ${X.length} proposer replicas need sync to block ${Q}`);for(let{entityId:Y,signerId:Z,lastJBlock:J}of X)console.log(`\uD83D\uDD2D\uD83D\uDCCB SYNC-QUEUE: ${Z}  Entity ${Y.slice(0,10)}... from j-block ${J+1} to ${Q}`)}for(let{entityId:Y,signerId:Z,lastJBlock:J}of X)await this.syncEntityFromJBlock(Y,Z,J+1,Q,$)}catch(Q){if(!(Q instanceof Error)||!Q.message.includes("ECONNREFUSED"))throw Q}}async syncEntityFromJBlock($,Q,X,Y,Z){if(X>Y)return;if(kY)console.log(`\uD83D\uDD2D\uD83D\uDCE1 ENTITY-SYNC: Entity ${$.slice(0,10)}... (${Q}) from j-block ${X} to ${Y}`);try{let J=await this.getEntityEventsInRange($,X,Y);if(J.length===0){if(lV)console.log(`\uD83D\uDD2D ENTITY-SYNC: No events found for entity ${$.slice(0,10)}... in blocks ${X}-${Y}`);return}console.log(`\uD83D\uDD2D\uD83D\uDCE6 ENTITY-SYNC: Found ${J.length} new events for entity ${$.slice(0,10)}... in blocks ${X}-${Y}`);for(let q of J)this.feedEventToProposer($,Q,q,Z);console.log(`\uD83D\uDD2D ENTITY-SYNC: Queued ${J.length} events for entity ${$.slice(0,10)}... (${Q})`)}catch(J){console.error(`\uD83D\uDD2D ENTITY-SYNC: Error syncing entity ${$.slice(0,10)}...`,J instanceof Error?J.message:String(J))}}async getEntityEventsInRange($,Q,X){if(lV)console.log(`\uD83D\uDD2D\uD83D\uDD0D EVENT-QUERY: Fetching events for entity ${$.slice(0,10)}... blocks ${Q}-${X}`);let Y=this.depositoryContract.filters.ReserveUpdated,Z=this.depositoryContract.filters.SettlementProcessed,J=this.depositoryContract.filters.TransferReserveToCollateral;if(!Y||!Z||!J)throw new Error("Contract filters not available");let[q,G,z,M,j]=await Promise.all([this.depositoryContract.queryFilter(Y($),Q,X),this.depositoryContract.queryFilter(Z($,null,null),Q,X),this.depositoryContract.queryFilter(Z(null,$,null),Q,X),this.depositoryContract.queryFilter(J($,null,null),Q,X),this.depositoryContract.queryFilter(J(null,$,null),Q,X)]);if(lV)console.log(`\uD83D\uDD2D\uD83D\uDD0D EVENT-QUERY: Entity ${$.slice(0,10)}... - Reserve: ${q.length}, SettlementLeft: ${G.length}, SettlementRight: ${z.length}, R2C: ${M.length+j.length}`);let P=[...q.map((D)=>({...D,eventType:"ReserveUpdated"})),...G.map((D)=>({...D,eventType:"SettlementProcessed",side:"left"})),...z.map((D)=>({...D,eventType:"SettlementProcessed",side:"right"})),...M.map((D)=>({...D,eventType:"TransferReserveToCollateral",side:"receiving"})),...j.map((D)=>({...D,eventType:"TransferReserveToCollateral",side:"counterparty"}))].sort((D,A)=>{if(D.blockNumber!==A.blockNumber)return D.blockNumber-A.blockNumber;return(D.transactionIndex||0)-(A.transactionIndex||0)});if(lV&&P.length>0)console.log(`\uD83D\uDD2D\uD83D\uDD0D EVENT-QUERY: Entity ${$.slice(0,10)}... total events: ${P.length}`),P.forEach((D,A)=>{console.log(`\uD83D\uDD2D\uD83D\uDD0D EVENT-${A}: ${D.eventType} at block ${D.blockNumber} tx ${D.transactionIndex}`)});return P}feedEventToProposer($,Q,X,Y){let Z;if(X.eventType==="ReserveUpdated"){if(Z={type:"j_event",data:{from:Q,event:{type:"ReserveUpdated",data:{entity:$,tokenId:Number(X.args.tokenId),newBalance:X.args.newBalance.toString(),symbol:`TKN${X.args.tokenId}`,decimals:18}},observedAt:Date.now(),blockNumber:X.blockNumber,transactionHash:X.transactionHash}},kY)console.log(`\uD83D\uDD2D\uD83D\uDCB0 R2R-EVENT: Entity ${$.slice(0,10)}... Token ${X.args.tokenId} Balance ${(Number(X.args.newBalance)/1000000000000000000).toFixed(4)} (block ${X.blockNumber})`)}else if(X.eventType==="SettlementProcessed"){let J=X.side==="left",q=J?X.args.rightEntity.toString():X.args.leftEntity.toString(),G=J?X.args.leftReserve:X.args.rightReserve,z=J?X.args.rightReserve:X.args.leftReserve,M=J?X.args.ondelta:-X.args.ondelta;if(Z={type:"j_event",data:{from:Q,event:{type:"SettlementProcessed",data:{leftEntity:X.args.leftEntity.toString(),rightEntity:X.args.rightEntity.toString(),counterpartyEntityId:q,tokenId:Number(X.args.tokenId),ownReserve:G.toString(),counterpartyReserve:z.toString(),collateral:X.args.collateral.toString(),ondelta:M.toString(),side:X.side}},observedAt:Date.now(),blockNumber:X.blockNumber,transactionHash:X.transactionHash}},kY)console.log(`\uD83D\uDD2D\uD83D\uDCB1 SETTLE-EVENT: Entity ${$.slice(0,10)}... vs ${q.slice(0,10)}... (${X.side} side, block ${X.blockNumber})`)}else if(X.eventType==="TransferReserveToCollateral"){if(Z={type:"j_event",data:{from:Q,event:{type:"TransferReserveToCollateral",data:{receivingEntity:X.args.receivingEntity.toString(),counterentity:X.args.counterentity.toString(),collateral:X.args.collateral.toString(),ondelta:X.args.ondelta.toString(),tokenId:Number(X.args.tokenId),side:X.side}},observedAt:Date.now(),blockNumber:X.blockNumber,transactionHash:X.transactionHash}},kY)console.log(`\uD83D\uDD2D\uD83D\uDCB0 R2C-EVENT: Entity ${$.slice(0,10)}... (${X.side} side) collateral=${X.args.collateral.toString()}, block ${X.blockNumber}`)}if(Z)console.log(`\uD83D\uDEA8 J-WATCHER-CREATING-EVENT: ${Q} creating j-event ${X.eventType} block=${X.blockNumber} for entity ${$.slice(0,10)}...`),Y.runtimeInput.entityInputs.push({entityId:$,signerId:Q,entityTxs:[Z]}),console.log(`\uD83D\uDD2D J-WATCHER-QUEUED: ${Q}  Entity ${$.slice(0,10)}... (${X.eventType}) block=${X.blockNumber} - Queue length now: ${Y.runtimeInput.entityInputs.length}`)}async syncNewlyCreatedEntities($){if(kY)console.log("\uD83D\uDD2D  J-WATCHER: syncNewlyCreatedEntities called (legacy) - first-principles design handles this automatically");return!1}async getCurrentBlockNumber(){try{return await this.provider.getBlockNumber()}catch($){if(kY)console.log("\uD83D\uDD2D  J-WATCHER: Could not get current block, using 0:",$ instanceof Error?$.message:String($));return 0}}getStatus(){return{isWatching:this.isWatching,signerCount:this.signers.size}}}function w60($){return new bc($)}async function hc($,Q,X,Y){let Z=w60({rpcUrl:Q,entityProviderAddress:X,depositoryAddress:Y,startBlock:0});if(Z.addSigner("s1","s1-private-key",["1","2","3","4","5"]),Z.addSigner("s2","s2-private-key",["1","2","3","4","5"]),Z.addSigner("s3","s3-private-key",["1","2","3","4","5"]),await Z.startWatching($),kY)console.log("\uD83D\uDD2D J-WATCHER: Setup complete with first-principles design");return Z}var kY=!1,lV=!1;var mc=y(()=>{Mz()});var VT=($,Q,X,Y="DEPOSIT")=>{let Z={entityId:$,signerId:Q,entityTxs:[{type:"j_event",data:{from:Q,event:{type:"ReserveUpdated",data:{entity:$,tokenId:X.tokenId,newBalance:X.amount,name:X.asset,symbol:X.asset,decimals:X.decimals}},observedAt:Date.now(),blockNumber:1,transactionHash:`0xDEMO_${Y}_${X.asset}_${$.slice(0,10)}`}}]};if(s0)console.log(`\uD83C\uDFAD Mock j_event created: ${Y} ${X.amount} ${X.asset} for entity ${$.slice(0,10)}...`);return Z},OH=async($)=>{if(s0)console.log("\uD83D\uDE80 Starting XLN Demo: First Principles");let Q=await pU("arrakis");if(!Q)throw new Error(" Arrakis jurisdiction not found");let X="s1",Y="s2";console.log(`
\uD83D\uDCCB Forming entities e1=[${X}] and e2=[${Y}]...`);let Z={mode:"proposer-based",threshold:BigInt(1),validators:[X],shares:{[X]:BigInt(1)},jurisdiction:Q},J=tZ(1),q={mode:"proposer-based",threshold:BigInt(1),validators:[Y],shares:{[Y]:BigInt(1)},jurisdiction:Q},G=tZ(2);await F9($,{runtimeTxs:[{type:"importReplica",entityId:J,signerId:X,data:{config:Z,isProposer:!0}},{type:"importReplica",entityId:G,signerId:Y,data:{config:q,isProposer:!0}}],entityInputs:[]}),await wz($,[]);let z=$.replicas.get(`${J}:${X}`),M=$.replicas.get(`${G}:${Y}`);if(z)console.log(`\uD83E\uDDF9 Cleared ${z.mempool.length} leftover transactions from e1 mempool`),z.mempool.length=0;if(M)console.log(`\uD83E\uDDF9 Cleared ${M.mempool.length} leftover transactions from e2 mempool`),M.mempool.length=0;console.log(` Entity ${o$(J)} and ${o$(G)} created.`),console.log(`
\uD83D\uDCB0 Prefunding entity ${o$(J)}...`);let P=[{asset:"USDC",amount:"100000000000000000000",decimals:18,tokenId:1},{asset:"ETH",amount:"100000000000000000000",decimals:18,tokenId:2}].map((R)=>VT(J,X,R));await F9($,{runtimeTxs:[],entityInputs:P}),await wz($,[]);let D=$.replicas.get(`${J}:${X}`);if(s0)if(console.log("\uD83D\uDCCA Debug - Reserves after funding:"),D?.state.reserves)for(let[R,O]of D.state.reserves.entries())console.log(`  Token ${R}: ${O.toString()}`);else console.log("  No reserves found");let A=D?.state.reserves.get("1"),I=100000000000000000000n;if(!D)throw new Error(" Verification failed: e1 replica not found after funding.");if(A===void 0)throw new Error(" Verification failed: e1 ETH reserve not found. Available reserves: "+Array.from(D.state.reserves.keys()).join(", "));if(A!==I)throw new Error(` Verification failed: e1 ETH amount mismatch. Expected: ${I}, Got: ${A}`);console.log(` ${o$(J)} funded successfully with ${A/10n**18n} ETH.`),console.log(`
\uD83D\uDCB8 Performing reserve transfer from ${o$(J)} to ${o$(G)}...`);let H=1000000000000000000n,C=1,B=$.replicas.get(`${J}:${X}`),S=$.replicas.get(`${G}:${Y}`);if(!B)throw new Error(" Entity 1 replica not found before transfer");let _=B.state.reserves.get("1")??0n,k=S?.state.reserves.get("1")??0n;console.log(`\uD83D\uDCCA Pre-transfer: e1=${_}, e2=${k}`);let f=_-H,g=k+H;console.log(`\uD83D\uDCCA Post-transfer: e1=${f}, e2=${g}`);let b=[VT(J,X,{asset:"ETH",amount:f.toString(),decimals:18,tokenId:C},"TRANSFER_OUT"),VT(G,Y,{asset:"ETH",amount:g.toString(),decimals:18,tokenId:C},"TRANSFER_IN")];console.log("\uD83D\uDCB8 Simulating jurisdiction events for reserve transfer..."),await F9($,{runtimeTxs:[],entityInputs:b}),await wz($,[]),console.log(" Transfer transaction submitted.");let m=$.replicas.get(`${J}:${X}`),l=$.replicas.get(`${G}:${Y}`);if(s0){if(console.log("\uD83D\uDCCA Debug - Final reserves after transfer:"),console.log("Entity 1 reserves:"),m?.state.reserves)for(let[R,O]of m.state.reserves.entries())console.log(`  Token ${R}: ${O.toString()}`);if(console.log("Entity 2 reserves:"),l?.state.reserves)for(let[R,O]of l.state.reserves.entries())console.log(`  Token ${R}: ${O.toString()}`)}let h=m?.state.reserves.get("1"),c=l?.state.reserves.get("1"),T=99000000000000000000n,K=1000000000000000000n;if(h!==T)throw new Error(` Verification failed: e1 has incorrect final ETH balance. Expected: ${T}, Got: ${h}`);if(c!==K)throw new Error(` Verification failed: e2 did not receive ETH. Expected: ${K}, Got: ${c}`);console.log(` State verified: e1 has ${h/10n**18n} ETH, e2 has ${c/10n**18n} ETH.`),console.log(`
\uD83D\uDCB3 Opening account between ${o$(J)} and ${o$(G)}...`),await F9($,{runtimeTxs:[],entityInputs:[{entityId:J,signerId:X,entityTxs:[{type:"openAccount",data:{targetEntityId:G}}]}]}),await wz($,[]),console.log(` Account opened between ${o$(J)} and ${o$(G)}`),console.log(`
\uD83D\uDCB8 ${o$(J)} sending direct payment to ${o$(G)}...`),await F9($,{runtimeTxs:[],entityInputs:[{entityId:J,signerId:X,entityTxs:[{type:"accountInput",data:{fromEntityId:J,toEntityId:G,accountTx:{type:"direct_payment",data:{tokenId:1,amount:50000n,description:"Demo direct payment from e1 to e2"}},metadata:{purpose:"account_direct_payment",description:"Testing direct payment with global credit limits"}}}]}]}),await wz($,[]),console.log(` Direct payment sent: $500 USD from ${o$(J)} to ${o$(G)}`);let V=$.replicas.get(`${J}:${X}`),N=$.replicas.get(`${G}:${Y}`);if(console.log(`
\uD83D\uDD0D BILATERAL BALANCE VERIFICATION:`),V?.state.accounts.has(G)&&N?.state.accounts.has(J)){let R=V.state.accounts.get(G),O=N.state.accounts.get(J),w=R.deltas.get(1),x=O.deltas.get(1);if(w&&x){let E=w.ondelta+w.offdelta,v=x.ondelta+x.offdelta,p=E+v;if(console.log(`\uD83D\uDCB0 E1 owes E2: ${E.toString()} cents ($${(Number(E)/100).toFixed(2)})`),console.log(`\uD83D\uDCB0 E2 owes E1: ${v.toString()} cents ($${(Number(v)/100).toFixed(2)})`),console.log(`\uD83D\uDCB0 Sum: ${p.toString()} cents (should be 0)`),p===0n)console.log(" CONSERVATION LAW VERIFIED: Bilateral balance maintained in rundemo!");else console.log(" CONSERVATION VIOLATED: Bilateral imbalance detected!");if(E===50000n&&v===-50000n)console.log(" PAYMENT VERIFIED: $500 correctly transferred from E1 to E2");else console.log(` PAYMENT MISMATCH: Expected E1:+500, E2:-500, got E1:${E}, E2:${v}`)}else console.log(" Missing deltas for verification")}else console.log(" Account machines not found for verification");let L=$.replicas.get(`${J}:${X}`),F=$.replicas.get(`${G}:${Y}`);if(L?.state.accounts.has(G)){let R=L.state.accounts.get(G);console.log(`\uD83D\uDCB3 ${o$(J)} account with ${o$(G)}:`),console.log(`   Credit limits: own=${R.globalCreditLimits.ownLimit.toString()} USD, peer=${R.globalCreditLimits.peerLimit.toString()} USD`),console.log(`   Frame ${R.currentFrame.height}: tokens=[${R.currentFrame.tokenIds.join(",")}], deltas=[${R.currentFrame.deltas.map((O)=>O.toString()).join(",")}]`),console.log(`   Sent transitions: ${R.sentTransitions}, mempool: ${R.mempool.length}`)}if(F?.state.accounts.has(J)){let R=F.state.accounts.get(J);console.log(`\uD83D\uDCB3 ${o$(G)} account with ${o$(J)}:`),console.log(`   Credit limits: own=${R.globalCreditLimits.ownLimit.toString()} USD, peer=${R.globalCreditLimits.peerLimit.toString()} USD`),console.log(`   Frame ${R.currentFrame.height}: tokens=[${R.currentFrame.tokenIds.join(",")}], deltas=[${R.currentFrame.deltas.map((O)=>O.toString()).join(",")}]`),console.log(`   Sent transitions: ${R.sentTransitions}, mempool: ${R.mempool.length}`)}return console.log(`
\uD83C\uDFAF J-MOCKED Demo completed with Account System!`),console.log("\uD83D\uDCCA Check the dashboard to verify final reserve states and account states."),console.log("\uD83D\uDCB3 Account system: 1M USD credit limits, direct payment processed"),console.log('\uD83C\uDF10 For REAL blockchain integration, use the "Run Demo" button in the UI!'),$};var cc=y(()=>{NJ();HJ();rY();tX()});function pc($,Q){let X=Array.from($.replicas.entries()).find(([Y])=>Y.startsWith(Q+":"));if(!X)throw new Error(`PREPOPULATE: Replica for entity ${Q} not found`);return X}function F60($){if(!$.gossip||typeof $.gossip.getProfiles!=="function")return;return{profiles:$.gossip.getProfiles().map((X)=>{let Y=void 0;if(X.metadata){if(Y={...X.metadata},Y.lastUpdated=Y.lastUpdated??Date.now(),Y.baseFee!==void 0)Y.baseFee=BigInt(Y.baseFee.toString())}let Z=X.accounts?X.accounts.map((q)=>{let G=new Map;if(q.tokenCapacities)for(let[z,M]of q.tokenCapacities.entries())G.set(z,{inCapacity:M.inCapacity,outCapacity:M.outCapacity});return{counterpartyId:q.counterpartyId,tokenCapacities:G}}):[],J={entityId:X.entityId,capabilities:[...X.capabilities],hubs:[...X.hubs],accounts:Z};if(Y)J.metadata=Y;return J})}}function lc($,Q,X,Y,Z,J){let q={counterpartyEntityId:Q,mempool:[],currentFrame:{height:0,timestamp:0,accountTxs:[],prevFrameHash:"",tokenIds:[uV],deltas:[J],stateHash:""},sentTransitions:0,ackedTransitions:0,deltas:new Map([[uV,(()=>{let G=hV(uV,Z,J);return G.leftCreditLimit=X,G.rightCreditLimit=Y,G})()]]),globalCreditLimits:{ownLimit:X,peerLimit:Y},currentHeight:0,pendingSignatures:[],rollbackCount:0,sendCounter:0,receiveCounter:0,proofHeader:{fromEntity:$.state.entityId,toEntity:Q,cooperativeNonce:0,disputeNonce:0},proofBody:{tokenIds:[uV],deltas:[J]},frameHistory:[],pendingWithdrawals:new Map,requestedRebalance:new Map};$.state.accounts.set(Q,q)}function uc($,Q){if(!$.state.reserves)$.state.reserves=new Map;$.state.reserves.set(String(uV),Q)}function dc($,Q,X,Y){let[Z,J]=pc($,Q),[q,G]=pc($,X),z=Y.delta??0n;if(lc(J,X,Y.leftCredit,Y.rightCredit,Y.leftCollateral,z),lc(G,Q,Y.rightCredit,Y.leftCredit,Y.rightCollateral,-z),uc(J,Y.leftReserve),uc(G,Y.rightReserve),$.gossip)$.gossip.announce(mV(J.state)),$.gossip.announce(mV(G.state));console.log(`\uD83E\uDD1D Ensured mutual credit: ${Z.slice(0,10)}  ${q.slice(0,10)}`)}function B60($,Q){let X=F60($),Y={height:$.height,timestamp:Date.now(),replicas:new Map(Array.from($.replicas.entries()).map(([Z,J])=>[Z,cV(J)])),runtimeInput:{runtimeTxs:[],entityInputs:[]},runtimeOutputs:[],description:Q,...X?{gossip:X}:{}};if(!$.history)$.history=[];$.history.push(Y)}async function ic($,Q){console.log("\uD83C\uDF10 Starting XLN Prepopulation"),console.log("================================"),console.log("Creating H-shaped network topology:"),console.log("   2 Hubs (E1, E2) - connected crossbar"),console.log("   4 Users (E3-E6) - split between hubs"),console.log("    - E3, E4  Hub E1"),console.log("    - E5, E6  Hub E2"),console.log("  Visual: Clean H-shape with 6 entities total"),console.log(`================================
`);let Y=(await y5()).find((B)=>B.name.toLowerCase()==="arrakis");if(!Y)throw new Error("Arrakis jurisdiction not found in available jurisdictions");console.log(`\uD83D\uDCCB Using jurisdiction: ${Y.name}`),console.log(`   EntityProvider: ${Y.entityProviderAddress}`),console.log(`   Depository: ${Y.depositoryAddress}`),console.log("\uD83D\uDCE6 Step 1: Creating 6 entities with blockchain-assigned IDs..."),console.log("  Each entity will get sequential ID from the blockchain");let Z=[],J=[];for(let B=1;B<=6;B++){let S=`s${B}`,_=B<=2,k=_?`Hub ${B}`:`User ${B}`;try{let{config:f,entityNumber:g,entityId:b}=await Nz(k,[S],1n,Y);Z.push({id:b,signer:S,isHub:_}),console.log(`   Created ${k}: Entity #${g} (${b.slice(0,10)}...)`),J.push({type:"importReplica",entityId:b,signerId:S,data:{isProposer:!0,config:f}})}catch(f){console.error(`   Failed to create ${k}:`,f);let g=B,b="0x"+g.toString(16).padStart(64,"0");Z.push({id:b,signer:S,isHub:_}),J.push({type:"importReplica",entityId:b,signerId:S,data:{isProposer:!0,config:{mode:"proposer-based",threshold:1n,validators:[S],shares:{[S]:1n},jurisdiction:Y}}}),console.log(`   Using fallback ID for ${k}: Entity #${g}`)}}await F9($,{runtimeTxs:J,entityInputs:[]}),console.log(`
   Imported ${Z.length} entities`),Z.forEach((B)=>{let S=parseInt(B.id.slice(2),16);console.log(`     Entity #${S}: ${B.isHub?"HUB":"User"} (signer: ${B.signer})`)}),console.log(`
\uD83D\uDCE1 Step 2: Connecting the two hubs (H crossbar)...`);let q=Z[0],G=Z[1];if(!q||!G)throw new Error("Failed to create hubs");await Q($,[{entityId:q.id,signerId:q.signer,entityTxs:[{type:"openAccount",data:{targetEntityId:G.id}}]}]);let z=parseInt(q.id.slice(2),16),M=parseInt(G.id.slice(2),16);console.log(`  \uD83D\uDD17 Hub E${z}  Hub E${M} connected (H crossbar)`),console.log(`
\uD83D\uDC65 Step 3: Connecting users to hubs (H vertical bars)...`);let j=Z.slice(2);for(let[B,S]of j.entries()){let _=B%2===0?q:G;await Q($,[{entityId:S.id,signerId:S.signer,entityTxs:[{type:"openAccount",data:{targetEntityId:_.id}}]}]);let k=parseInt(S.id.slice(2),16),f=parseInt(_.id.slice(2),16);console.log(`  \uD83D\uDC64 User E${k}  Hub E${f} connected (vertical bar)`)}console.log(`
\uD83C\uDFAF Step 4: Setting hub profiles with lower fees...`);for(let B of[q,G]){let S=parseInt(B.id.slice(2),16);await Q($,[{entityId:B.id,signerId:B.signer,entityTxs:[{type:"profile-update",data:{profile:{entityId:B.id,name:`Hub ${S}`,bio:"Professional routing hub with high capacity and low fees",isHub:!0,routingFeePPM:50,baseFee:0n}}}]}]),console.log(`  \uD83D\uDCB0 Hub E${S} - routing fee: 50 PPM (0.005%)`)}console.log(`
\uD83C\uDFE6 Step 5: Seeding mutual credit, collateral, and reserves...`);let P=U7(250000),D=U7(120000),A=U7(420000),I=U7(90000),H=U7(25000),C=U7(80000);dc($,q.id,G.id,{leftCredit:P,rightCredit:P,leftCollateral:D,rightCollateral:D,leftReserve:A,rightReserve:A,delta:0n}),j.forEach((B,S)=>{let _=S%2===0?q:G,k=S%2===0?-U7(5000):U7(7500);dc($,_.id,B.id,{leftCredit:P,rightCredit:I,leftCollateral:D,rightCollateral:H,leftReserve:A,rightReserve:C,delta:k})}),console.log("\uD83D\uDDC2 Capturing final snapshot for time machine playback..."),B60($,"Prepopulate seeded H-topology"),console.log(`
================================`),console.log(" Prepopulation Complete!"),console.log(`
H-shaped network topology created:`),console.log("   2 Hubs connected (H crossbar)"),console.log("   4 Users: 2 per hub (H vertical bars)"),console.log("   Total accounts: 5 (1 hub-to-hub + 4 user-to-hub)"),console.log("   Topology: Clean 6-entity visualization (perfect number)"),console.log(`
You can now:`),console.log("  1. View clean H-shaped topology in bird view"),console.log("  2. Send payments between any entities"),console.log("  3. Payments will route through hubs automatically"),console.log(`================================
`)}var uV=1,T60=18n,I60,U7=($)=>BigInt($)*I60;var nc=y(()=>{rY();NJ();HJ();$9();ow();l5();I60=10n**T60});function MH($){let Q=$.match(/^(\d+)\.\.(\d+)$/);if(!Q||!Q[1]||!Q[2])return null;let X=parseInt(Q[1],10),Y=parseInt(Q[2],10);if(X>Y)return null;return{start:X,end:Y}}function DH($){let Q=[];for(let X=$.start;X<=$.end;X++)Q.push(X);return Q}function Y6($){let Q=$.match(/^([a-zA-Z_][a-zA-Z0-9_]*)=(.+)$/);if(!Q||!Q[1]||!Q[2])return null;return{key:Q[1],value:Q[2]}}function OT($){let Q={};for(let X of $)if(typeof X==="object"&&!("start"in X))Object.assign(Q,X);return Q}function oc($){return $.filter((Q)=>typeof Q!=="object"||("start"in Q))}function dV($){let Q=$.split(`
`),X=[],Y=[],Z={currentTimestamp:0,currentDescription:[],currentActions:[],lineNumber:0,inRepeatBlock:!1,repeatBlockActions:[]},J=[],q=[],G=[],z="";for(let j=0;j<Q.length;j++){Z.lineNumber=j+1;let P=Q[j];if(!P)continue;let D=P.trim();if(D==="")continue;if(D.startsWith("#"))continue;if(D==="==="){MT(Z,J);continue}if(D.startsWith("SEED ")){z=D.substring(5).trim();continue}if(D.startsWith("INCLUDE ")){let H=D.substring(8).trim();G.push(H),Y.push({lineNumber:Z.lineNumber,message:"INCLUDE directive parsed but not yet implemented",suggestion:"Included scenarios will be merged in future implementation"});continue}if(D.startsWith("REPEAT ")){let H=D.substring(7).trim(),C=parseFloat(H);if(isNaN(C)||C<=0){X.push({lineNumber:Z.lineNumber,message:`Invalid REPEAT interval: ${H}`});continue}Z.inRepeatBlock=!0,Z.repeatInterval=C,Z.repeatStartTimestamp=Z.currentTimestamp,Z.repeatBlockActions=[];continue}if(D==="END_REPEAT"){if(!Z.inRepeatBlock){X.push({lineNumber:Z.lineNumber,message:"END_REPEAT without matching REPEAT"});continue}if(Z.repeatInterval!==void 0&&Z.repeatStartTimestamp!==void 0)q.push({interval:Z.repeatInterval,actions:Z.repeatBlockActions,startTimestamp:Z.repeatStartTimestamp,sourceLineNumber:Z.lineNumber});Z.inRepeatBlock=!1,delete Z.repeatInterval,delete Z.repeatStartTimestamp,Z.repeatBlockActions=[];continue}let A=D.match(/^(\d+(?:\.\d+)?):(.*)$/);if(A){MT(Z,J);let H=A[1],C=A[2];if(!H)continue;Z.currentTimestamp=parseFloat(H);let B=C?.trim();if(B&&B.length>0)Z.currentTitle=B;else delete Z.currentTitle;Z.currentDescription=[],Z.currentActions=[],delete Z.currentViewState;continue}let I=S60(D,Z.lineNumber);if(I.isAction){let H=I.actions||[I.action];if(Z.inRepeatBlock)Z.repeatBlockActions.push(...H);else Z.currentActions.push(...H)}else if(I.error)X.push(I.error);else if(Z.currentActions.length===0&&!Z.inRepeatBlock)Z.currentDescription.push(D);else Y.push({lineNumber:Z.lineNumber,message:"Text after actions is ignored",suggestion:"Place descriptions before actions in the same timestamp block"})}if(MT(Z,J),Z.inRepeatBlock)X.push({lineNumber:Z.lineNumber,message:"Unclosed REPEAT block (missing END_REPEAT)"});return{scenario:{seed:z,events:J,repeatBlocks:q,includes:G},errors:X,warnings:Y}}function MT($,Q){if($.currentActions.length>0){let X=$.currentDescription.join(`
`).trim(),Y={timestamp:$.currentTimestamp,actions:$.currentActions};if($.currentTitle!==void 0)Y.title=$.currentTitle;if(X.length>0)Y.description=X;if($.currentViewState!==void 0)Y.viewState=$.currentViewState;Q.push(Y),delete $.currentTitle,$.currentDescription=[],$.currentActions=[],delete $.currentViewState}}function S60($,Q){let X=$.split(/\s+/);if(X.length===0)return{isAction:!1};let Y=X[0];if(!Y)return{isAction:!1};let J=["VIEW","import","PAUSE","ASSERT","grid","payRandom","r2r"].includes(Y),q=/^\d+$/.test(Y)||/^\d+\.\.\d+$/.test(Y);if(!J&&!q)return{isAction:!1};if(Y==="VIEW"){let I={};for(let H=1;H<X.length;H++){let C=X[H];if(!C)continue;let B=Y6(C);if(!B)return{isAction:!1,error:{lineNumber:Q,message:`Invalid VIEW parameter: ${C}`}};let{key:S,value:_}=B;if(S==="camera"){if(!["orbital","overview","follow","free"].includes(_))return{isAction:!1,error:{lineNumber:Q,message:`Invalid camera mode: ${_}`}};I.camera=_}else if(S==="zoom")I.zoom=parseFloat(_);else if(S==="focus")I.focus=_;else if(S==="panel")I.panel=_;else if(S==="speed")I.speed=parseFloat(_)}return{isAction:!0,action:{type:"VIEW",params:[I],sourceLineNumber:Q}}}if(Y==="import"){let I=X[1];if(!I)return{isAction:!1,error:{lineNumber:Q,message:"import requires entity ID or range"}};let H=MH(I),C=H?DH(H).map(String):[I],B=X.slice(2),S={};for(let k of B){let f=Y6(k);if(f)S[f.key]=f.value}let _=[...C];if(Object.keys(S).length>0)_.push(S);return{isAction:!0,action:{type:"import",params:_,sourceLineNumber:Q}}}if(Y==="grid"){let I=X.slice(1),H=[];for(let C of I){let B=Y6(C);if(B)H.push({[B.key]:B.value});else H.push(C)}return{isAction:!0,action:{type:"grid",params:H,sourceLineNumber:Q}}}if(Y==="payRandom"){let I=X.slice(1),H=[];for(let C of I){let B=Y6(C);if(B)H.push({[B.key]:B.value});else H.push(C)}return{isAction:!0,action:{type:"payRandom",params:H,sourceLineNumber:Q}}}if(Y==="r2r"){let I=X[1],H=X[2],C=X[3];if(!I||!H||!C)return{isAction:!1,error:{lineNumber:Q,message:"r2r requires 3 parameters: fromEntity toEntity amount"}};return{isAction:!0,action:{type:"r2r",params:[I,H,C],sourceLineNumber:Q}}}if(Y==="fund"){let I=X[1],H=X[2];if(!I||!H)return{isAction:!1,error:{lineNumber:Q,message:"fund requires 2 parameters: entityIndex amount"}};return{isAction:!0,action:{type:"fund",params:[I,H],sourceLineNumber:Q}}}let G=Y,z=X[1];if(!z||!G)return{isAction:!1};let M=MH(G),j=M?DH(M).map(String):[G],P=X.slice(2),D=[];for(let I of j){let H=E60(P);for(let C of H)D.push({type:z,entityId:I,params:C,sourceLineNumber:Q})}if(D.length===0)return{isAction:!1};let A=D[0];if(!A)return{isAction:!1};if(D.length===1)return{isAction:!0,action:A};return{isAction:!0,actions:D}}function E60($){let Q=[];for(let X of $){let Y=Y6(X);if(Y)Q.push([{[Y.key]:Y.value}]);else{let Z=MH(X);if(Z)Q.push(DH(Z).map(String));else Q.push([X])}}return rc(Q)}function rc($){if($.length===0)return[[]];let Q=$[0];if(!Q)return[[]];if($.length===1)return Q.map((q)=>[q]);let[X,...Y]=$;if(!X)return[[]];let Z=rc(Y),J=[];for(let q of X)for(let G of Z)J.push([q,...G]);return J}function _60($,Q){let X=[];for(let Y of $.repeatBlocks){let Z=Y.startTimestamp;while(Z<=Q)X.push({timestamp:Z,actions:Y.actions,title:`[REPEAT every ${Y.interval}s]`}),Z+=Y.interval}return X}function jH($,Q){let X=_60($,Q);return[...$.events,...X].sort((Z,J)=>Z.timestamp-J.timestamp)}var PH=()=>{};async function sc($,Q,X={}){let{maxTimestamp:Y=1000,tickInterval:Z=1000}=X,J=jH(Q,Y),q={scenario:Q,currentFrameIndex:0,totalFrames:0,elapsedTime:0,entityMapping:new Map,viewStateHistory:new Map,tickInterval:Z},G=[];console.log(`\uD83C\uDFAC SCENARIO: Starting execution with seed="${Q.seed}"`),console.log(`\uD83D\uDCCB SCENARIO: ${J.length} events to execute`);let z=new Map;for(let j of J){if(!z.has(j.timestamp))z.set(j.timestamp,[]);z.get(j.timestamp).push(j)}let M=Array.from(z.keys()).sort((j,P)=>j-P);for(let j of M){let P=z.get(j);console.log(`
  t=${j}s: ${P.length} event(s)`);for(let D of P){if(D.title)console.log(`  \uD83D\uDCCC ${D.title}`);if(D.description)console.log(`     ${D.description}`);try{await k60($,D,q)}catch(A){console.error(` Error executing event at t=${j}:`,A),G.push({timestamp:j,event:D,error:A.message})}}q.elapsedTime=j,q.totalFrames++}return{success:G.length===0,framesGenerated:q.totalFrames,finalTimestamp:q.elapsedTime,errors:G,context:q}}async function k60($,Q,X){for(let Y of Q.actions)await x60($,Y,X);if($.history&&$.history.length>0){let Y=$.history[$.history.length-1];if(Y){if(Q.title)Y.title=Q.title;if(Q.description)Y.narrative=Q.description}}if(Q.viewState)d60($,Q.viewState,X)}async function x60($,Q,X){let{type:Y,entityId:Z,params:J}=Q;switch(Y){case"import":await f60(J,X,$);break;case"grid":await v60(J,X,$);break;case"payRandom":await y60(J,X,$);break;case"r2r":await b60(J,X,$);break;case"fund":await h60(J,X,$);break;case"openAccount":await m60(Z,J,X,$);break;case"deposit":await c60(Z,J,X);break;case"withdraw":await p60(Z,J,X);break;case"transfer":await l60(Z,J,X);break;case"chat":await u60(Z,J,X);break;case"VIEW":break;default:throw new Error(` SCENARIO ERROR: Unknown action type "${Y}" - check scenario syntax`)}}async function f60($,Q,X){let Y=await y5();if(!Y||Y.length===0)throw new Error("No jurisdictions available");let Z=Y.find((A)=>A.name.toLowerCase()==="arrakis");if(!Z)throw new Error("Arrakis jurisdiction not found");let{getNextEntityNumber:J}=await Promise.resolve().then(() => (HJ(),IV)),q=await J(Z);console.log(`  \uD83D\uDD22 Current max entity number: ${q-1}, next will be: ${q}`);let G=[],z=null;for(let A of $)if(typeof A==="object"&&!Array.isArray(A))z=A;else G.push(String(A));let M=[],j=new Map;for(let A=0;A<G.length;A++){let I=G[A];if(!I)continue;let H=q+A;j.set(I,H)}let P=G.filter((A)=>A&&!Q.entityMapping.has(A));if(P.length===0){console.log("    All entities already imported");return}let D;if(P.length>=10){console.log(`  \uD83D\uDE80 Batch registering ${P.length} entities in ONE transaction...`);let{createNumberedEntitiesBatch:A}=await Promise.resolve().then(() => (NJ(),dP));D=await A(P.map((I)=>({name:`Entity-${I}`,validators:[`s${I}`],threshold:1n})),Z),console.log(`   Batch registered ${D.length} entities in single block!`)}else{console.log(`  \uD83D\uDE80 Registering ${P.length} entities (parallel)...`);let A=P.map((I)=>Nz(`Entity-${I}`,[`s${I}`],1n,Z));D=await Promise.all(A),console.log(`   All ${D.length} entities registered`)}for(let A=0;A<D.length;A++){let I=D[A],H=P[A];if(!I||!H)continue;if(Q.entityMapping.set(H,I.entityId),console.log(`   import scenario=${H}  entity#${I.entityNumber} (${I.entityId.slice(0,10)}...)`),z&&(("x"in z)||("y"in z)||("z"in z))){let C={x:parseFloat(z.x||"0"),y:parseFloat(z.y||"0"),z:parseFloat(z.z||"0")};X.gossip?.announce({entityId:I.entityId,capabilities:[],hubs:[],metadata:{name:`Entity-${H}`,avatar:"",position:C}}),console.log(`  \uD83D\uDCCD Positioned at (${C.x}, ${C.y}, ${C.z})`)}M.push({type:"importReplica",entityId:I.entityId,signerId:`s${H}`,data:{config:I.config,isProposer:!0}})}if(M.length>0){let{applyRuntimeInput:A}=await Promise.resolve().then(() => (rY(),RJ));await A(X,{runtimeTxs:M,entityInputs:[]}),console.log(`  \uD83D\uDCE6 Added ${M.length} entities to existing runtime state`),console.log(`  \uD83C\uDF10 Total entities now: ${X.replicas.size}`)}}async function v60($,Q,X){let Y=oc($),Z=OT($),J=40,q=Y[0]!==void 0?parseInt(String(Y[0])):2,G=q,z=Y[1]!==void 0?parseInt(String(Y[1])):q,M=Y[2]!==void 0?parseInt(String(Y[2])):q,j=parseFloat(String(Z.spacing||40)),P=String(Z.type||"").toLowerCase()==="lazy",D=G*z*M;if(D>1000)throw new Error(`Grid too large: ${G}x${z}x${M} = ${D} entities (max 1000)`);if(P)return g60(G,z,M,j,Q,X);let I=(await y5()).find((h)=>h.name.toLowerCase()==="arrakis");if(!I)throw new Error("Arrakis jurisdiction not found");let H=(h,c,T)=>`${h}_${c}_${T}`,C=0;for(let h of Q.entityMapping.keys()){if(!h.includes("_"))continue;let c=h.split("_");if(c.length===3){let T=Math.max(parseInt(c[0]||"0"),parseInt(c[1]||"0"),parseInt(c[2]||"0"));C=Math.max(C,T+1)}}if(C>0)console.log(`  \uD83D\uDCE6 Existing grid: ${C}x${C}x${C}, growing to ${G}x${G}x${G}`);else console.log(`  \uD83C\uDFB2 Creating ${G}x${z}x${M} grid (${D} entities, ${j}px spacing)`);let B=[],S=new Map;for(let h=0;h<M;h++)for(let c=0;c<z;c++)for(let T=0;T<G;T++){let K=H(T,c,h);if(T<C&&c<C&&h<C)continue;B.push({name:`Grid-${K}`,validators:[`g${K}`],threshold:1n});let U={x:T*j,y:c*j,z:h*j};S.set(K,U),console.log(`\uD83D\uDCCD GRID-POS-A: Entity ${K} generated at (${U.x}, ${U.y}, ${U.z})`)}if(B.length===0){console.log(`   Grid ${G}x${G}x${G} already complete, no new entities needed`);return}console.log(`   Creating ${B.length} new entities (shell growth)`);let{createNumberedEntitiesBatch:_}=await Promise.resolve().then(() => (NJ(),dP)),k=await _(B,I),f=[];k.forEach((h,c)=>{let T=B[c];if(!T)return;let K=T.name.replace("Grid-","");Q.entityMapping.set(K,h.entityId);let U=S.get(K);if(U)X.gossip?.announce({entityId:h.entityId,capabilities:[],hubs:[],metadata:{name:T.name,avatar:"",position:U}});let W={config:h.config,isProposer:!0};if(U)W.position=U,console.log(`\uD83D\uDCCD GRID-POS-B: RuntimeTx for ${h.entityId.slice(0,10)} has position:`,U);f.push({type:"importReplica",entityId:h.entityId,signerId:T.validators[0],data:W})});let{applyRuntimeInput:g}=await Promise.resolve().then(() => (rY(),RJ));await g(X,{runtimeTxs:f,entityInputs:[]}),console.log(`   Created ${k.length} entities in grid formation`);let{process:b}=await Promise.resolve().then(() => (rY(),RJ)),m=[],l=(h,c)=>{for(let T of X.replicas.values())if(T.entityId===h&&T.state?.accounts?.has(c))return!0;return!1};for(let h=0;h<M;h++)for(let c=0;c<z;c++)for(let T=0;T<G-1;T++){let K=H(T,c,h),U=H(T+1,c,h),W=Q.entityMapping.get(K),V=Q.entityMapping.get(U);if(W&&V&&!l(W,V))m.push({entityId:W,signerId:`g${K}`,entityTxs:[{type:"openAccount",data:{targetEntityId:V}}]})}for(let h=0;h<M;h++)for(let c=0;c<z-1;c++)for(let T=0;T<G;T++){let K=H(T,c,h),U=H(T,c+1,h),W=Q.entityMapping.get(K),V=Q.entityMapping.get(U);if(W&&V&&!l(W,V))m.push({entityId:W,signerId:`g${K}`,entityTxs:[{type:"openAccount",data:{targetEntityId:V}}]})}for(let h=0;h<M-1;h++)for(let c=0;c<z;c++)for(let T=0;T<G;T++){let K=H(T,c,h),U=H(T,c,h+1),W=Q.entityMapping.get(K),V=Q.entityMapping.get(U);if(W&&V&&!l(W,V))m.push({entityId:W,signerId:`g${K}`,entityTxs:[{type:"openAccount",data:{targetEntityId:V}}]})}if(console.log(`  \uD83D\uDD17 Creating ${m.length} new grid connections...`),m.length>0)await b(X,m);console.log(`   Grid complete: ${D} total entities, ${m.length} new connections`)}async function g60($,Q,X,Y,Z,J){let{cryptoHash:q}=await Promise.resolve().then(() => (tX(),bm)),G=$*Q*X;console.log(`   LAZY MODE: Creating ${G} in-browser entities (no blockchain)`);let z=[];for(let A=0;A<X;A++)for(let I=0;I<Q;I++)for(let H=0;H<$;H++){let C=`${H}_${I}_${A}`,B=await q(`lazy-grid-${C}-${Date.now()}`),S=`lazy_${C}`;Z.entityMapping.set(C,B);let _={x:H*Y,y:I*Y,z:A*Y};J.gossip?.announce({entityId:B,capabilities:[],hubs:[],metadata:{name:C.slice(0,4),avatar:"",position:_}}),z.push({type:"importReplica",entityId:B,signerId:S,data:{config:{validators:[S],threshold:1n,mode:"proposer-based"},isProposer:!0,position:_}})}let{applyRuntimeInput:M}=await Promise.resolve().then(() => (rY(),RJ));await M(J,{runtimeTxs:z,entityInputs:[]}),console.log(`   LAZY: Created ${G} in-browser entities`);let{process:j}=await Promise.resolve().then(() => (rY(),RJ)),P=[],D=(A,I,H)=>`${A}_${I}_${H}`;for(let A=0;A<X;A++)for(let I=0;I<Q;I++)for(let H=0;H<$-1;H++){let C=D(H,I,A),B=D(H+1,I,A),S=Z.entityMapping.get(C),_=Z.entityMapping.get(B);if(S&&_)P.push({entityId:S,signerId:`lazy_${C}`,entityTxs:[{type:"openAccount",data:{targetEntityId:_}}]}),P.push({entityId:_,signerId:`lazy_${B}`,entityTxs:[{type:"openAccount",data:{targetEntityId:S}}]})}for(let A=0;A<X;A++)for(let I=0;I<Q-1;I++)for(let H=0;H<$;H++){let C=D(H,I,A),B=D(H,I+1,A),S=Z.entityMapping.get(C),_=Z.entityMapping.get(B);if(S&&_)P.push({entityId:S,signerId:`lazy_${C}`,entityTxs:[{type:"openAccount",data:{targetEntityId:_}}]}),P.push({entityId:_,signerId:`lazy_${B}`,entityTxs:[{type:"openAccount",data:{targetEntityId:S}}]})}for(let A=0;A<X-1;A++)for(let I=0;I<Q;I++)for(let H=0;H<$;H++){let C=D(H,I,A),B=D(H,I,A+1),S=Z.entityMapping.get(C),_=Z.entityMapping.get(B);if(S&&_)P.push({entityId:S,signerId:`lazy_${C}`,entityTxs:[{type:"openAccount",data:{targetEntityId:_}}]}),P.push({entityId:_,signerId:`lazy_${B}`,entityTxs:[{type:"openAccount",data:{targetEntityId:S}}]})}console.log(`  \uD83D\uDD17 Creating ${P.length} lazy connections...`),await j(J,P),console.log(`   LAZY grid complete: ${G} entities, ${P.length} connections`)}async function y60($,Q,X){let Y=OT($),Z=parseInt(String(Y.count||"1")),J=parseInt(String(Y.minHops||"0")),q=parseInt(String(Y.maxHops||"99")),G=BigInt(Y.minAmount||"1000"),z=BigInt(Y.maxAmount||"100000"),M=parseInt(String(Y.token||"1"));console.log(`  \uD83C\uDFB2 Executing ${Z} random payments (${J}-${q} hops, ${G}-${z} amount)`);let j=Array.from(X.replicas.keys()).map((D)=>D.split(":")[0]).filter((D,A,I)=>I.indexOf(D)===A);if(j.length<2){console.warn(`    Need at least 2 entities for random payments (found ${j.length})`);return}console.log(`  \uD83D\uDCB8 Found ${j.length} entities in network`);let{process:P}=await Promise.resolve().then(() => (rY(),RJ));for(let D=0;D<Z;D++){let A=Math.floor(Math.random()*j.length),I=Math.floor(Math.random()*j.length);while(I===A&&j.length>1)I=Math.floor(Math.random()*j.length);let H=j[A],C=j[I];if(!H||!C)continue;let B=Array.from(X.replicas.keys()).find((b)=>b.startsWith(H+":")),S=B?X.replicas.get(B):null;if(!S){console.warn(`    No replica found for ${H.slice(0,10)}`);continue}let _=S.signerId,k=z-G,f=BigInt(Math.floor(Math.random()*Number(k))),g=G+f;if(console.log(`  \uD83D\uDCB8 Payment ${D+1}/${Z}: ${H.slice(0,8)}  ${C.slice(0,8)} (${g} tokens)`),await P(X,[{entityId:H,signerId:_,entityTxs:[{type:"directPayment",data:{targetEntityId:C,tokenId:M,amount:g,route:[],description:`Random payment #${D+1}`}}]}]),D<Z-1&&Q.tickInterval>0)await new Promise((b)=>setTimeout(b,Q.tickInterval))}console.log(`   ${Z} random payments complete`)}async function b60($,Q,X){let Y=String($[0]),Z=String($[1]),J=BigInt($[2]||"0"),q=Q.entityMapping.get(Y),G=Q.entityMapping.get(Z);if(!q||!G)throw new Error(`R2R: Entity mapping not found for ${Y} or ${Z}`);let M=Array.from(X.replicas.keys()).find((D)=>D.startsWith(q+":")),j=M?X.replicas.get(M):null;if(!j)throw new Error(`R2R: No replica found for entity ${q.slice(0,10)}`);console.log(`  \uD83D\uDCB8 R2R: ${Y}  ${Z} (${J} tokens)`);let{process:P}=await Promise.resolve().then(() => (rY(),RJ));await P(X,[{entityId:q,signerId:j.signerId,entityTxs:[{type:"payFromReserve",data:{targetEntityId:G,tokenId:0,amount:J}}]}]),console.log(`   R2R complete: ${Y}  ${Z}`)}async function h60($,Q,X){let Y=String($[0]),Z=BigInt($[1]||"0"),J=Q.entityMapping.get(Y);if(!J)throw new Error(`Fund: Entity mapping not found for ${Y}`);let G=Array.from(X.replicas.keys()).find((j)=>j.startsWith(J+":")),z=G?X.replicas.get(G):null;if(!z)throw new Error(`Fund: No replica found for entity ${J.slice(0,10)}`);console.log(`  \uD83D\uDCB8 Fund: ${Y} receives ${Z} tokens`);let{process:M}=await Promise.resolve().then(() => (rY(),RJ));await M(X,[{entityId:J,signerId:z.signerId,entityTxs:[{type:"payToReserve",data:{tokenId:0,amount:Z}}]}]),console.log(`   Fund complete: ${Y} +${Z}`)}async function m60($,Q,X,Y){let Z=String(Q[0]),J=X.entityMapping.get($),q=X.entityMapping.get(Z);if(!J||!q)throw new Error(`Entity mapping not found: ${$}${J}, ${Z}${q}`);console.log(`  \uD83D\uDD17 ${$} openAccount ${Z}`);let{process:G}=await Promise.resolve().then(() => (rY(),RJ));await G(Y,[{entityId:J,signerId:`s${$}`,entityTxs:[{type:"openAccount",data:{targetEntityId:q}}]}])}async function c60($,Q,X){let Y=String(Q[0]),Z=BigInt(Q[1]),J=X.entityMapping.get($),q=X.entityMapping.get(Y);if(!J||!q)throw new Error(`Entity mapping not found: ${$}, ${Y}`);console.log(`  \uD83D\uDCB0 ${$} deposit ${Y} ${Z}`)}async function p60($,Q,X){let Y=String(Q[0]),Z=BigInt(Q[1]),J=X.entityMapping.get($),q=X.entityMapping.get(Y);if(!J||!q)throw new Error(`Entity mapping not found: ${$}, ${Y}`);console.log(`  \uD83D\uDCB8 ${$} withdraw ${Y} ${Z}`)}async function l60($,Q,X){let Y=String(Q[0]),Z=BigInt(Q[1]),J=X.entityMapping.get($),q=X.entityMapping.get(Y);if(!J||!q)throw new Error(`Entity mapping not found: ${$}, ${Y}`);console.log(`  \uD83D\uDD04 ${$} transfer ${Y} ${Z}`)}async function u60($,Q,X){let Y=String(Q[0]);if(!X.entityMapping.get($))throw new Error(`Entity mapping not found: ${$}`);console.log(`  \uD83D\uDCAC ${$}: "${Y}"`)}function d60($,Q,X){if(X.viewStateHistory.set(X.currentFrameIndex,Q),$.history&&$.history.length>0){let Y=$.history[$.history.length-1];if(Y){let Z={...Q};if(Q.focus&&X.entityMapping.has(Q.focus)){let J=X.entityMapping.get(Q.focus);if(J)Z.focus=J}Y.viewState=Z,console.log(`  \uD83C\uDFA5 VIEW: ${k$(Z)}`)}}}var ac=y(()=>{PH();NJ();HJ()});var{readFile:i60}=(()=>({}));async function tc($){let Q=await i60($,"utf-8");return dV(Q)}function ec($){return dV($)}var $p=y(()=>{PH()});var Tz;var Qp=y(()=>{Tz=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function n60($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function W7($){if(!Number.isSafeInteger($)||$<0)throw new Error("positive integer expected, got "+$)}function sY($,...Q){if(!n60($))throw new Error("Uint8Array expected");if(Q.length>0&&!Q.includes($.length))throw new Error("Uint8Array expected of length "+Q+", got length="+$.length)}function Yp($){if(typeof $!=="function"||typeof $.create!=="function")throw new Error("Hash should be wrapped by utils.createHasher");W7($.outputLen),W7($.blockLen)}function CJ($,Q=!0){if($.destroyed)throw new Error("Hash instance has been destroyed");if(Q&&$.finished)throw new Error("Hash#digest() has already been called")}function iV($,Q){sY($);let X=Q.outputLen;if($.length<X)throw new Error("digestInto() expects output buffer of length at least "+X)}function Zp($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function LJ(...$){for(let Q=0;Q<$.length;Q++)$[Q].fill(0)}function nV($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function B9($,Q){return $<<32-Q|$>>>Q}function r60($){return $<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255}function s60($){for(let Q=0;Q<$.length;Q++)$[Q]=r60($[Q]);return $}function HH($){if(sY($),Jp)return $.toHex();let Q="";for(let X=0;X<$.length;X++)Q+=a60[$[X]];return Q}function Xp($){if($>=u5._0&&$<=u5._9)return $-u5._0;if($>=u5.A&&$<=u5.F)return $-(u5.A-10);if($>=u5.a&&$<=u5.f)return $-(u5.a-10);return}function qp($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(Jp)return Uint8Array.fromHex($);let Q=$.length,X=Q/2;if(Q%2)throw new Error("hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=Xp($.charCodeAt(J)),G=Xp($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw new Error('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function oV($){if(typeof $!=="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function Iz($){if(typeof $==="string")$=oV($);return sY($),$}function jT(...$){let Q=0;for(let Y=0;Y<$.length;Y++){let Z=$[Y];sY(Z),Q+=Z.length}let X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}class Fz{}function NH($){let Q=(Y)=>$().update(Iz(Y)).digest(),X=$();return Q.outputLen=X.outputLen,Q.blockLen=X.blockLen,Q.create=()=>$(),Q}function Gp($=32){if(Tz&&typeof Tz.getRandomValues==="function")return Tz.getRandomValues(new Uint8Array($));if(Tz&&typeof Tz.randomBytes==="function")return Uint8Array.from(Tz.randomBytes($));throw new Error("crypto.getRandomValues must be defined")}var o60,DT,Jp,a60,u5;var wJ=y(()=>{Qp();/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */o60=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();DT=o60?($)=>$:s60,Jp=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")(),a60=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));u5={_0:48,_9:57,A:65,F:70,a:97,f:102}});function t60($,Q,X,Y){if(typeof $.setBigUint64==="function")return $.setBigUint64(Q,X,Y);let Z=BigInt(32),J=BigInt(4294967295),q=Number(X>>Z&J),G=Number(X&J),z=Y?4:0,M=Y?0:4;$.setUint32(Q+z,q,Y),$.setUint32(Q+M,G,Y)}function zp($,Q,X){return $&Q^~$&X}function Kp($,Q,X){return $&Q^$&X^Q&X}var PT,d5;var Up=y(()=>{wJ();PT=class PT extends Fz{constructor($,Q,X,Y){super();this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=$,this.outputLen=Q,this.padOffset=X,this.isLE=Y,this.buffer=new Uint8Array($),this.view=nV(this.buffer)}update($){CJ(this),$=Iz($),sY($);let{view:Q,buffer:X,blockLen:Y}=this,Z=$.length;for(let J=0;J<Z;){let q=Math.min(Y-this.pos,Z-J);if(q===Y){let G=nV($);for(;Y<=Z-J;J+=Y)this.process(G,J);continue}if(X.set($.subarray(J,J+q),this.pos),this.pos+=q,J+=q,this.pos===Y)this.process(Q,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){CJ(this),iV($,this),this.finished=!0;let{buffer:Q,view:X,blockLen:Y,isLE:Z}=this,{pos:J}=this;if(Q[J++]=128,LJ(this.buffer.subarray(J)),this.padOffset>Y-J)this.process(X,0),J=0;for(let j=J;j<Y;j++)Q[j]=0;t60(X,Y-8,BigInt(this.length*8),Z),this.process(X,0);let q=nV($),G=this.outputLen;if(G%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let z=G/4,M=this.get();if(z>M.length)throw new Error("_sha2: outputLen bigger than state");for(let j=0;j<z;j++)q.setUint32(4*j,M[j],Z)}digest(){let{buffer:$,outputLen:Q}=this;this.digestInto($);let X=$.slice(0,Q);return this.destroy(),X}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:Q,buffer:X,length:Y,finished:Z,destroyed:J,pos:q}=this;if($.destroyed=J,$.finished=Z,$.length=Y,$.pos=q,Y%Q)$.buffer.set(X);return $}clone(){return this._cloneInto()}};d5=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225])});function e60($,Q=!1){if(Q)return{h:Number($&AH),l:Number($>>Wp&AH)};return{h:Number($>>Wp&AH)|0,l:Number($&AH)|0}}function Vp($,Q=!1){let X=$.length,Y=new Uint32Array(X),Z=new Uint32Array(X);for(let J=0;J<X;J++){let{h:q,l:G}=e60($[J],Q);[Y[J],Z[J]]=[q,G]}return[Y,Z]}var AH,Wp,Op=($,Q,X)=>$<<X|Q>>>32-X,Mp=($,Q,X)=>Q<<X|$>>>32-X,Dp=($,Q,X)=>Q<<X-32|$>>>64-X,jp=($,Q,X)=>$<<X-32|Q>>>64-X;var Pp=y(()=>{AH=BigInt(4294967295),Wp=BigInt(32)});var $W0,V7,Hp,RH;var HT=y(()=>{Up();wJ();$W0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),V7=new Uint32Array(64);Hp=class Hp extends PT{constructor($=32){super(64,$,8,!1);this.A=d5[0]|0,this.B=d5[1]|0,this.C=d5[2]|0,this.D=d5[3]|0,this.E=d5[4]|0,this.F=d5[5]|0,this.G=d5[6]|0,this.H=d5[7]|0}get(){let{A:$,B:Q,C:X,D:Y,E:Z,F:J,G:q,H:G}=this;return[$,Q,X,Y,Z,J,q,G]}set($,Q,X,Y,Z,J,q,G){this.A=$|0,this.B=Q|0,this.C=X|0,this.D=Y|0,this.E=Z|0,this.F=J|0,this.G=q|0,this.H=G|0}process($,Q){for(let j=0;j<16;j++,Q+=4)V7[j]=$.getUint32(Q,!1);for(let j=16;j<64;j++){let P=V7[j-15],D=V7[j-2],A=B9(P,7)^B9(P,18)^P>>>3,I=B9(D,17)^B9(D,19)^D>>>10;V7[j]=I+V7[j-7]+A+V7[j-16]|0}let{A:X,B:Y,C:Z,D:J,E:q,F:G,G:z,H:M}=this;for(let j=0;j<64;j++){let P=B9(q,6)^B9(q,11)^B9(q,25),D=M+P+zp(q,G,z)+$W0[j]+V7[j]|0,I=(B9(X,2)^B9(X,13)^B9(X,22))+Kp(X,Y,Z)|0;M=z,z=G,G=q,q=J+D|0,J=Z,Z=Y,Y=X,X=D+I|0}X=X+this.A|0,Y=Y+this.B|0,Z=Z+this.C|0,J=J+this.D|0,q=q+this.E|0,G=G+this.F|0,z=z+this.G|0,M=M+this.H|0,this.set(X,Y,Z,J,q,G,z,M)}roundClean(){LJ(V7)}destroy(){this.set(0,0,0,0,0,0,0,0),LJ(this.buffer)}};RH=NH(()=>new Hp)});var NT,AT=($,Q,X)=>new NT($,Q).update(X).digest();var Np=y(()=>{wJ();NT=class NT extends Fz{constructor($,Q){super();this.finished=!1,this.destroyed=!1,Yp($);let X=Iz(Q);if(this.iHash=$.create(),typeof this.iHash.update!=="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let Y=this.blockLen,Z=new Uint8Array(Y);Z.set(X.length>Y?$.create().update(X).digest():X);for(let J=0;J<Z.length;J++)Z[J]^=54;this.iHash.update(Z),this.oHash=$.create();for(let J=0;J<Z.length;J++)Z[J]^=106;this.oHash.update(Z),LJ(Z)}update($){return CJ(this),this.iHash.update($),this}digestInto($){CJ(this),sY($,this.outputLen),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||($=Object.create(Object.getPrototypeOf(this),{}));let{oHash:Q,iHash:X,finished:Y,destroyed:Z,blockLen:J,outputLen:q}=this;return $=$,$.finished=Y,$.destroyed=Z,$.blockLen=J,$.outputLen=q,$.oHash=Q._cloneInto($.oHash),$.iHash=X._cloneInto($.iHash),$}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};AT.create=($,Q)=>new NT($,Q)});function Bz($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function TT($){if(!Bz($))throw new Error("Uint8Array expected")}function Z6($,Q){if(typeof Q!=="boolean")throw new Error($+" boolean expected, got "+Q)}function rV($){let Q=$.toString(16);return Q.length&1?"0"+Q:Q}function Cp($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);return $===""?wT:BigInt("0x"+$)}function J6($){if(TT($),Lp)return $.toHex();let Q="";for(let X=0;X<$.length;X++)Q+=QW0[$[X]];return Q}function Ap($){if($>=i5._0&&$<=i5._9)return $-i5._0;if($>=i5.A&&$<=i5.F)return $-(i5.A-10);if($>=i5.a&&$<=i5.f)return $-(i5.a-10);return}function sV($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(Lp)return Uint8Array.fromHex($);let Q=$.length,X=Q/2;if(Q%2)throw new Error("hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=Ap($.charCodeAt(J)),G=Ap($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw new Error('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function n5($){return Cp(J6($))}function IT($){return TT($),Cp(J6(Uint8Array.from($).reverse()))}function Sz($,Q){return sV($.toString(16).padStart(Q*2,"0"))}function FT($,Q){return Sz($,Q).reverse()}function aY($,Q,X){let Y;if(typeof Q==="string")try{Y=sV(Q)}catch(J){throw new Error($+" must be hex string or Uint8Array, cause: "+J)}else if(Bz(Q))Y=Uint8Array.from(Q);else throw new Error($+" must be hex string or Uint8Array");let Z=Y.length;if(typeof X==="number"&&Z!==X)throw new Error($+" of length "+X+" expected, got "+Z);return Y}function aV(...$){let Q=0;for(let Y=0;Y<$.length;Y++){let Z=$[Y];TT(Z),Q+=Z.length}let X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}function CH($,Q,X){return RT($)&&RT(Q)&&RT(X)&&Q<=$&&$<X}function Ez($,Q,X,Y){if(!CH(Q,X,Y))throw new Error("expected valid "+$+": "+X+" <= n < "+Y+", got "+Q)}function wp($){let Q;for(Q=0;$>wT;$>>=LT,Q+=1);return Q}function Tp($,Q,X){if(typeof $!=="number"||$<2)throw new Error("hashLen must be a number");if(typeof Q!=="number"||Q<2)throw new Error("qByteLen must be a number");if(typeof X!=="function")throw new Error("hmacFn must be a function");let Y=CT($),Z=CT($),J=0,q=()=>{Y.fill(1),Z.fill(0),J=0},G=(...P)=>X(Z,Y,...P),z=(P=CT(0))=>{if(Z=G(Rp([0]),P),Y=G(),P.length===0)return;Z=G(Rp([1]),P),Y=G()},M=()=>{if(J++>=1000)throw new Error("drbg: tried 1000 values");let P=0,D=[];while(P<Q){Y=G();let A=Y.slice();D.push(A),P+=Y.length}return aV(...D)};return(P,D)=>{q(),z(P);let A=void 0;while(!(A=D(M())))z();return q(),A}}function kz($,Q,X={}){let Y=(Z,J,q)=>{let G=XW0[J];if(typeof G!=="function")throw new Error("invalid validator function");let z=$[Z];if(q&&z===void 0)return;if(!G(z,$))throw new Error("param "+String(Z)+" is invalid. Expected "+J+", got "+z)};for(let[Z,J]of Object.entries(Q))Y(Z,J,!1);for(let[Z,J]of Object.entries(X))Y(Z,J,!0);return $}function BT($){let Q=new WeakMap;return(X,...Y)=>{let Z=Q.get(X);if(Z!==void 0)return Z;let J=$(X,...Y);return Q.set(X,J),J}}var wT,LT,Lp,QW0,i5,RT=($)=>typeof $==="bigint"&&wT<=$,_z=($)=>(LT<<BigInt($))-LT,CT=($)=>new Uint8Array($),Rp=($)=>Uint8Array.from($),XW0;var LH=y(()=>{/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */wT=BigInt(0),LT=BigInt(1);Lp=typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function",QW0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));i5={_0:48,_9:57,A:65,F:70,a:97,f:102};XW0={bigint:($)=>typeof $==="bigint",function:($)=>typeof $==="function",boolean:($)=>typeof $==="boolean",string:($)=>typeof $==="string",stringOrUint8Array:($)=>typeof $==="string"||Bz($),isSafeInteger:($)=>Number.isSafeInteger($),array:($)=>Array.isArray($),field:($,Q)=>Q.Fp.isValid($),hash:($)=>typeof $==="function"&&Number.isSafeInteger($.outputLen)}});function SX($,Q){let X=$%Q;return X>=YY?X:Q+X}function tY($,Q,X){let Y=$;while(Q-- >YY)Y*=Y,Y%=X;return Y}function wH($,Q){if($===YY)throw new Error("invert: expected non-zero number");if(Q<=YY)throw new Error("invert: expected positive modulus, got "+Q);let X=SX($,Q),Y=Q,Z=YY,J=YX,q=YX,G=YY;while(X!==YY){let M=Y/X,j=Y%X,P=Z-q*M,D=J-G*M;Y=X,X=j,Z=q,J=G,q=P,G=D}if(Y!==YX)throw new Error("invert: does not exist");return SX(Z,Q)}function qW0($){let Q=$-YX,X=0;while(Q%xz===YY)Q/=xz,X++;let Y=xz,Z=tV($);while(Y<$&&Bp(Z,Y))if(Y++>1000)throw new Error("Cannot find square root: probably non-prime P");if(X===1){let q=($+YX)/ST;return function G(z,M){let j=z.pow(M,q);if(!z.eql(z.sqr(j),M))throw new Error("Cannot find square root");return j}}let J=(Q+YX)/xz;return function q(G,z){if(!Bp(G,z))throw new Error("Cannot find square root");let M=X,j=G.pow(G.mul(G.ONE,Y),Q),P=G.pow(z,J),D=G.pow(z,Q);while(!G.eql(D,G.ONE)){if(G.eql(D,G.ZERO))return G.ZERO;let A=1;for(let H=G.sqr(D);A<M;A++){if(G.eql(H,G.ONE))break;H=G.sqr(H)}let I=G.pow(j,YX<<BigInt(M-A-1));j=G.sqr(I),P=G.mul(P,I),D=G.mul(D,j),M=A}return P}}function GW0($){if($%ST===YW0)return function Q(X,Y){let Z=($+YX)/ST,J=X.pow(Y,Z);if(!X.eql(X.sqr(J),Y))throw new Error("Cannot find square root");return J};if($%Fp===Ip)return function Q(X,Y){let Z=X.mul(Y,xz),J=($-Ip)/Fp,q=X.pow(Z,J),G=X.mul(Y,q),z=X.mul(X.mul(G,xz),q),M=X.mul(G,X.sub(z,X.ONE));if(!X.eql(X.sqr(M),Y))throw new Error("Cannot find square root");return M};if($%JW0===ZW0);return qW0($)}function ET($){let Q={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},X=zW0.reduce((Y,Z)=>{return Y[Z]="function",Y},Q);return kz($,X)}function KW0($,Q,X){if(X<YY)throw new Error("invalid exponent, negatives unsupported");if(X===YY)return $.ONE;if(X===YX)return Q;let Y=$.ONE,Z=Q;while(X>YY){if(X&YX)Y=$.mul(Y,Z);Z=$.sqr(Z),X>>=YX}return Y}function _T($,Q,X=!1){let Y=new Array(Q.length).fill(X?$.ZERO:void 0),Z=Q.reduce((q,G,z)=>{if($.is0(G))return q;return Y[z]=q,$.mul(q,G)},$.ONE),J=$.inv(Z);return Q.reduceRight((q,G,z)=>{if($.is0(G))return q;return Y[z]=$.mul(q,Y[z]),$.mul(q,G)},J),Y}function UW0($,Q){let X=($.ORDER-YX)/xz,Y=$.pow(Q,X),Z=$.eql(Y,$.ONE),J=$.eql(Y,$.ZERO),q=$.eql(Y,$.neg($.ONE));if(!Z&&!J&&!q)throw new Error("Cannot find square root: probably non-prime P");return Z?1:J?0:-1}function Bp($,Q){let X=UW0($,Q);return X===0||X===1}function kT($,Q){if(Q!==void 0)W7(Q);let X=Q!==void 0?Q:$.toString(2).length,Y=Math.ceil(X/8);return{nBitLength:X,nByteLength:Y}}function tV($,Q,X=!1,Y={}){if($<=YY)throw new Error("invalid field: expected ORDER > 0, got "+$);let{nBitLength:Z,nByteLength:J}=kT($,Q);if(J>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let q,G=Object.freeze({ORDER:$,isLE:X,BITS:Z,BYTES:J,MASK:_z(Z),ZERO:YY,ONE:YX,create:(z)=>SX(z,$),isValid:(z)=>{if(typeof z!=="bigint")throw new Error("invalid field element: expected bigint, got "+typeof z);return YY<=z&&z<$},is0:(z)=>z===YY,isOdd:(z)=>(z&YX)===YX,neg:(z)=>SX(-z,$),eql:(z,M)=>z===M,sqr:(z)=>SX(z*z,$),add:(z,M)=>SX(z+M,$),sub:(z,M)=>SX(z-M,$),mul:(z,M)=>SX(z*M,$),pow:(z,M)=>KW0(G,z,M),div:(z,M)=>SX(z*wH(M,$),$),sqrN:(z)=>z*z,addN:(z,M)=>z+M,subN:(z,M)=>z-M,mulN:(z,M)=>z*M,inv:(z)=>wH(z,$),sqrt:Y.sqrt||((z)=>{if(!q)q=GW0($);return q(G,z)}),toBytes:(z)=>X?FT(z,J):Sz(z,J),fromBytes:(z)=>{if(z.length!==J)throw new Error("Field.fromBytes: expected "+J+" bytes, got "+z.length);return X?IT(z):n5(z)},invertBatch:(z)=>_T(G,z),cmov:(z,M,j)=>j?M:z});return Object.freeze(G)}function Sp($){if(typeof $!=="bigint")throw new Error("field order must be bigint");let Q=$.toString(2).length;return Math.ceil(Q/8)}function xT($){let Q=Sp($);return Q+Math.ceil(Q/2)}function Ep($,Q,X=!1){let Y=$.length,Z=Sp(Q),J=xT(Q);if(Y<16||Y<J||Y>1024)throw new Error("expected "+J+"-1024 bytes of input, got "+Y);let q=X?IT($):n5($),G=SX(q,Q-YX)+YX;return X?FT(G,Z):Sz(G,Z)}var YY,YX,xz,YW0,ST,Ip,Fp,ZW0,JW0,zW0;var TH=y(()=>{wJ();LH();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */YY=BigInt(0),YX=BigInt(1),xz=BigInt(2),YW0=BigInt(3),ST=BigInt(4),Ip=BigInt(5),Fp=BigInt(8),ZW0=BigInt(9),JW0=BigInt(16);zW0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function fT($,Q){let X=Q.negate();return $?X:Q}function xp($,Q){if(!Number.isSafeInteger($)||$<=0||$>Q)throw new Error("invalid window size, expected [1.."+Q+"], got W="+$)}function vT($,Q){xp($,Q);let X=Math.ceil(Q/$)+1,Y=2**($-1),Z=2**$,J=_z($),q=BigInt($);return{windows:X,windowSize:Y,mask:J,maxNumber:Z,shiftBy:q}}function kp($,Q,X){let{windowSize:Y,mask:Z,maxNumber:J,shiftBy:q}=X,G=Number($&Z),z=$>>q;if(G>Y)G-=J,z+=bT;let M=Q*Y,j=M+Math.abs(G)-1,P=G===0,D=G<0,A=Q%2!==0;return{nextN:z,offset:j,isZero:P,isNeg:D,isNegF:A,offsetF:M}}function WW0($,Q){if(!Array.isArray($))throw new Error("array expected");$.forEach((X,Y)=>{if(!(X instanceof Q))throw new Error("invalid point at index "+Y)})}function VW0($,Q){if(!Array.isArray($))throw new Error("array of scalars expected");$.forEach((X,Y)=>{if(!Q.isValid(X))throw new Error("invalid scalar at index "+Y)})}function yT($){return fp.get($)||1}function vp($,Q){return{constTimeNegate:fT,hasPrecomputes(X){return yT(X)!==1},unsafeLadder(X,Y,Z=$.ZERO){let J=X;while(Y>_p){if(Y&bT)Z=Z.add(J);J=J.double(),Y>>=bT}return Z},precomputeWindow(X,Y){let{windows:Z,windowSize:J}=vT(Y,Q),q=[],G=X,z=G;for(let M=0;M<Z;M++){z=G,q.push(z);for(let j=1;j<J;j++)z=z.add(G),q.push(z);G=z.double()}return q},wNAF(X,Y,Z){let{ZERO:J,BASE:q}=$,G=vT(X,Q);for(let z=0;z<G.windows;z++){let{nextN:M,offset:j,isZero:P,isNeg:D,isNegF:A,offsetF:I}=kp(Z,z,G);if(Z=M,P)q=q.add(fT(A,Y[I]));else J=J.add(fT(D,Y[j]))}return{p:J,f:q}},wNAFUnsafe(X,Y,Z,J=$.ZERO){let q=vT(X,Q);for(let G=0;G<q.windows;G++){if(Z===_p)break;let{nextN:z,offset:M,isZero:j,isNeg:P}=kp(Z,G,q);if(Z=z,j)continue;else{let D=Y[M];J=J.add(P?D.negate():D)}}return J},getPrecomputes(X,Y,Z){let J=gT.get(Y);if(!J){if(J=this.precomputeWindow(Y,X),X!==1)gT.set(Y,Z(J))}return J},wNAFCached(X,Y,Z){let J=yT(X);return this.wNAF(J,this.getPrecomputes(J,X,Z),Y)},wNAFCachedUnsafe(X,Y,Z,J){let q=yT(X);if(q===1)return this.unsafeLadder(X,Y,J);return this.wNAFUnsafe(q,this.getPrecomputes(q,X,Z),Y,J)},setWindowSize(X,Y){xp(Y,Q),fp.set(X,Y),gT.delete(X)}}}function gp($,Q,X,Y){if(WW0(X,$),VW0(Y,Q),X.length!==Y.length)throw new Error("arrays of points and scalars must have equal length");let Z=$.ZERO,J=wp(BigInt(X.length)),q=J>12?J-3:J>4?J-2:J?2:1,G=_z(q),z=new Array(Number(G)+1).fill(Z),M=Math.floor((Q.BITS-1)/q)*q,j=Z;for(let P=M;P>=0;P-=q){z.fill(Z);for(let A=0;A<Y.length;A++){let I=Y[A],H=Number(I>>BigInt(P)&G);z[H]=z[H].add(X[A])}let D=Z;for(let A=z.length-1,I=Z;A>0;A--)I=I.add(z[A]),D=D.add(I);if(j=j.add(D),P!==0)for(let A=0;A<q;A++)j=j.double()}return j}function hT($){return ET($.Fp),kz($,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...kT($.n,$.nBitLength),...$,...{p:$.Fp.ORDER}})}var _p,bT,gT,fp;var yp=y(()=>{TH();LH();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */_p=BigInt(0),bT=BigInt(1);gT=new WeakMap,fp=new WeakMap});function bp($){if($.lowS!==void 0)Z6("lowS",$.lowS);if($.prehash!==void 0)Z6("prehash",$.prehash)}function OW0($){let Q=hT($);kz(Q,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:X,Fp:Y,a:Z}=Q;if(X){if(!Y.eql(Z,Y.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof X!=="object"||typeof X.beta!=="bigint"||typeof X.splitScalar!=="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...Q})}function MW0($){let Q=OW0($),{Fp:X}=Q,Y=tV(Q.n,Q.nBitLength),Z=Q.toBytes||((H,C,B)=>{let S=C.toAffine();return aV(Uint8Array.from([4]),X.toBytes(S.x),X.toBytes(S.y))}),J=Q.fromBytes||((H)=>{let C=H.subarray(1),B=X.fromBytes(C.subarray(0,X.BYTES)),S=X.fromBytes(C.subarray(X.BYTES,2*X.BYTES));return{x:B,y:S}});function q(H){let{a:C,b:B}=Q,S=X.sqr(H),_=X.mul(S,H);return X.add(X.add(_,X.mul(H,C)),B)}if(!X.eql(X.sqr(Q.Gy),q(Q.Gx)))throw new Error("bad generator point: equation left != right");function G(H){return CH(H,vQ,Q.n)}function z(H){let{allowedPrivateKeyLengths:C,nByteLength:B,wrapPrivateKey:S,n:_}=Q;if(C&&typeof H!=="bigint"){if(Bz(H))H=J6(H);if(typeof H!=="string"||!C.includes(H.length))throw new Error("invalid private key");H=H.padStart(B*2,"0")}let k;try{k=typeof H==="bigint"?H:n5(aY("private key",H,B))}catch(f){throw new Error("invalid private key, expected hex or "+B+" bytes, got "+typeof H)}if(S)k=SX(k,_);return Ez("private key",k,vQ,_),k}function M(H){if(!(H instanceof D))throw new Error("ProjectivePoint expected")}let j=BT((H,C)=>{let{px:B,py:S,pz:_}=H;if(X.eql(_,X.ONE))return{x:B,y:S};let k=H.is0();if(C==null)C=k?X.ONE:X.inv(_);let f=X.mul(B,C),g=X.mul(S,C),b=X.mul(_,C);if(k)return{x:X.ZERO,y:X.ZERO};if(!X.eql(b,X.ONE))throw new Error("invZ was invalid");return{x:f,y:g}}),P=BT((H)=>{if(H.is0()){if(Q.allowInfinityPoint&&!X.is0(H.py))return;throw new Error("bad point: ZERO")}let{x:C,y:B}=H.toAffine();if(!X.isValid(C)||!X.isValid(B))throw new Error("bad point: x or y not FE");let S=X.sqr(B),_=q(C);if(!X.eql(S,_))throw new Error("bad point: equation left != right");if(!H.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class D{constructor(H,C,B){if(H==null||!X.isValid(H))throw new Error("x required");if(C==null||!X.isValid(C)||X.is0(C))throw new Error("y required");if(B==null||!X.isValid(B))throw new Error("z required");this.px=H,this.py=C,this.pz=B,Object.freeze(this)}static fromAffine(H){let{x:C,y:B}=H||{};if(!H||!X.isValid(C)||!X.isValid(B))throw new Error("invalid affine point");if(H instanceof D)throw new Error("projective point not allowed");let S=(_)=>X.eql(_,X.ZERO);if(S(C)&&S(B))return D.ZERO;return new D(C,B,X.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(H){let C=_T(X,H.map((B)=>B.pz));return H.map((B,S)=>B.toAffine(C[S])).map(D.fromAffine)}static fromHex(H){let C=D.fromAffine(J(aY("pointHex",H)));return C.assertValidity(),C}static fromPrivateKey(H){return D.BASE.multiply(z(H))}static msm(H,C){return gp(D,Y,H,C)}_setWindowSize(H){I.setWindowSize(this,H)}assertValidity(){P(this)}hasEvenY(){let{y:H}=this.toAffine();if(X.isOdd)return!X.isOdd(H);throw new Error("Field doesn't support isOdd")}equals(H){M(H);let{px:C,py:B,pz:S}=this,{px:_,py:k,pz:f}=H,g=X.eql(X.mul(C,f),X.mul(_,S)),b=X.eql(X.mul(B,f),X.mul(k,S));return g&&b}negate(){return new D(this.px,X.neg(this.py),this.pz)}double(){let{a:H,b:C}=Q,B=X.mul(C,hp),{px:S,py:_,pz:k}=this,f=X.ZERO,g=X.ZERO,b=X.ZERO,m=X.mul(S,S),l=X.mul(_,_),h=X.mul(k,k),c=X.mul(S,_);return c=X.add(c,c),b=X.mul(S,k),b=X.add(b,b),f=X.mul(H,b),g=X.mul(B,h),g=X.add(f,g),f=X.sub(l,g),g=X.add(l,g),g=X.mul(f,g),f=X.mul(c,f),b=X.mul(B,b),h=X.mul(H,h),c=X.sub(m,h),c=X.mul(H,c),c=X.add(c,b),b=X.add(m,m),m=X.add(b,m),m=X.add(m,h),m=X.mul(m,c),g=X.add(g,m),h=X.mul(_,k),h=X.add(h,h),m=X.mul(h,c),f=X.sub(f,m),b=X.mul(h,l),b=X.add(b,b),b=X.add(b,b),new D(f,g,b)}add(H){M(H);let{px:C,py:B,pz:S}=this,{px:_,py:k,pz:f}=H,g=X.ZERO,b=X.ZERO,m=X.ZERO,l=Q.a,h=X.mul(Q.b,hp),c=X.mul(C,_),T=X.mul(B,k),K=X.mul(S,f),U=X.add(C,B),W=X.add(_,k);U=X.mul(U,W),W=X.add(c,T),U=X.sub(U,W),W=X.add(C,S);let V=X.add(_,f);return W=X.mul(W,V),V=X.add(c,K),W=X.sub(W,V),V=X.add(B,S),g=X.add(k,f),V=X.mul(V,g),g=X.add(T,K),V=X.sub(V,g),m=X.mul(l,W),g=X.mul(h,K),m=X.add(g,m),g=X.sub(T,m),m=X.add(T,m),b=X.mul(g,m),T=X.add(c,c),T=X.add(T,c),K=X.mul(l,K),W=X.mul(h,W),T=X.add(T,K),K=X.sub(c,K),K=X.mul(l,K),W=X.add(W,K),c=X.mul(T,W),b=X.add(b,c),c=X.mul(V,W),g=X.mul(U,g),g=X.sub(g,c),c=X.mul(U,T),m=X.mul(V,m),m=X.add(m,c),new D(g,b,m)}subtract(H){return this.add(H.negate())}is0(){return this.equals(D.ZERO)}wNAF(H){return I.wNAFCached(this,H,D.normalizeZ)}multiplyUnsafe(H){let{endo:C,n:B}=Q;Ez("scalar",H,r5,B);let S=D.ZERO;if(H===r5)return S;if(this.is0()||H===vQ)return this;if(!C||I.hasPrecomputes(this))return I.wNAFCachedUnsafe(this,H,D.normalizeZ);let{k1neg:_,k1:k,k2neg:f,k2:g}=C.splitScalar(H),b=S,m=S,l=this;while(k>r5||g>r5){if(k&vQ)b=b.add(l);if(g&vQ)m=m.add(l);l=l.double(),k>>=vQ,g>>=vQ}if(_)b=b.negate();if(f)m=m.negate();return m=new D(X.mul(m.px,C.beta),m.py,m.pz),b.add(m)}multiply(H){let{endo:C,n:B}=Q;Ez("scalar",H,vQ,B);let S,_;if(C){let{k1neg:k,k1:f,k2neg:g,k2:b}=C.splitScalar(H),{p:m,f:l}=this.wNAF(f),{p:h,f:c}=this.wNAF(b);m=I.constTimeNegate(k,m),h=I.constTimeNegate(g,h),h=new D(X.mul(h.px,C.beta),h.py,h.pz),S=m.add(h),_=l.add(c)}else{let{p:k,f}=this.wNAF(H);S=k,_=f}return D.normalizeZ([S,_])[0]}multiplyAndAddUnsafe(H,C,B){let S=D.BASE,_=(f,g)=>g===r5||g===vQ||!f.equals(S)?f.multiplyUnsafe(g):f.multiply(g),k=_(this,C).add(_(H,B));return k.is0()?void 0:k}toAffine(H){return j(this,H)}isTorsionFree(){let{h:H,isTorsionFree:C}=Q;if(H===vQ)return!0;if(C)return C(D,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:H,clearCofactor:C}=Q;if(H===vQ)return this;if(C)return C(D,this);return this.multiplyUnsafe(Q.h)}toRawBytes(H=!0){return Z6("isCompressed",H),this.assertValidity(),Z(D,this,H)}toHex(H=!0){return Z6("isCompressed",H),J6(this.toRawBytes(H))}}D.BASE=new D(Q.Gx,Q.Gy,X.ONE),D.ZERO=new D(X.ZERO,X.ONE,X.ZERO);let A=Q.nBitLength,I=vp(D,Q.endo?Math.ceil(A/2):A);return{CURVE:Q,ProjectivePoint:D,normPrivateKeyToScalar:z,weierstrassEquation:q,isWithinCurveOrder:G}}function DW0($){let Q=hT($);return kz(Q,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...Q})}function cp($){let Q=DW0($),{Fp:X,n:Y}=Q,Z=X.BYTES+1,J=2*X.BYTES+1;function q(U){return SX(U,Y)}function G(U){return wH(U,Y)}let{ProjectivePoint:z,normPrivateKeyToScalar:M,weierstrassEquation:j,isWithinCurveOrder:P}=MW0({...Q,toBytes(U,W,V){let N=W.toAffine(),L=X.toBytes(N.x),F=aV;if(Z6("isCompressed",V),V)return F(Uint8Array.from([W.hasEvenY()?2:3]),L);else return F(Uint8Array.from([4]),L,X.toBytes(N.y))},fromBytes(U){let W=U.length,V=U[0],N=U.subarray(1);if(W===Z&&(V===2||V===3)){let L=n5(N);if(!CH(L,vQ,X.ORDER))throw new Error("Point is not on curve");let F=j(L),R;try{R=X.sqrt(F)}catch(x){let E=x instanceof Error?": "+x.message:"";throw new Error("Point is not on curve"+E)}let O=(R&vQ)===vQ;if((V&1)===1!==O)R=X.neg(R);return{x:L,y:R}}else if(W===J&&V===4){let L=X.fromBytes(N.subarray(0,X.BYTES)),F=X.fromBytes(N.subarray(X.BYTES,2*X.BYTES));return{x:L,y:F}}else{let L=Z,F=J;throw new Error("invalid Point, expected length of "+L+", or uncompressed "+F+", got "+W)}}}),D=(U)=>J6(Sz(U,Q.nByteLength));function A(U){let W=Y>>vQ;return U>W}function I(U){return A(U)?q(-U):U}let H=(U,W,V)=>n5(U.slice(W,V));class C{constructor(U,W,V){if(Ez("r",U,vQ,Y),Ez("s",W,vQ,Y),this.r=U,this.s=W,V!=null)this.recovery=V;Object.freeze(this)}static fromCompact(U){let W=Q.nByteLength;return U=aY("compactSignature",U,W*2),new C(H(U,0,W),H(U,W,2*W))}static fromDER(U){let{r:W,s:V}=o5.toSig(aY("DER",U));return new C(W,V)}assertValidity(){}addRecoveryBit(U){return new C(this.r,this.s,U)}recoverPublicKey(U){let{r:W,s:V,recovery:N}=this,L=g(aY("msgHash",U));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");let F=N===2||N===3?W+Q.n:W;if(F>=X.ORDER)throw new Error("recovery id 2 or 3 invalid");let R=(N&1)===0?"02":"03",O=z.fromHex(R+D(F)),w=G(F),x=q(-L*w),E=q(V*w),v=z.BASE.multiplyAndAddUnsafe(O,x,E);if(!v)throw new Error("point at infinify");return v.assertValidity(),v}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new C(this.r,q(-this.s),this.recovery):this}toDERRawBytes(){return sV(this.toDERHex())}toDERHex(){return o5.hexFromSig(this)}toCompactRawBytes(){return sV(this.toCompactHex())}toCompactHex(){return D(this.r)+D(this.s)}}let B={isValidPrivateKey(U){try{return M(U),!0}catch(W){return!1}},normPrivateKeyToScalar:M,randomPrivateKey:()=>{let U=xT(Q.n);return Ep(Q.randomBytes(U),Q.n)},precompute(U=8,W=z.BASE){return W._setWindowSize(U),W.multiply(BigInt(3)),W}};function S(U,W=!0){return z.fromPrivateKey(U).toRawBytes(W)}function _(U){let W=Bz(U),V=typeof U==="string",N=(W||V)&&U.length;if(W)return N===Z||N===J;if(V)return N===2*Z||N===2*J;if(U instanceof z)return!0;return!1}function k(U,W,V=!0){if(_(U))throw new Error("first arg must be private key");if(!_(W))throw new Error("second arg must be public key");return z.fromHex(W).multiply(M(U)).toRawBytes(V)}let f=Q.bits2int||function(U){if(U.length>8192)throw new Error("input is too large");let W=n5(U),V=U.length*8-Q.nBitLength;return V>0?W>>BigInt(V):W},g=Q.bits2int_modN||function(U){return q(f(U))},b=_z(Q.nBitLength);function m(U){return Ez("num < 2^"+Q.nBitLength,U,r5,b),Sz(U,Q.nByteLength)}function l(U,W,V=h){if(["recovered","canonical"].some((s)=>(s in V)))throw new Error("sign() legacy options not supported");let{hash:N,randomBytes:L}=Q,{lowS:F,prehash:R,extraEntropy:O}=V;if(F==null)F=!0;if(U=aY("msgHash",U),bp(V),R)U=aY("prehashed msgHash",N(U));let w=g(U),x=M(W),E=[m(x),m(w)];if(O!=null&&O!==!1){let s=O===!0?L(X.BYTES):O;E.push(aY("extraEntropy",s))}let v=aV(...E),p=w;function i(s){let X0=f(s);if(!P(X0))return;let n=G(X0),r=z.BASE.multiply(X0).toAffine(),Z0=q(r.x);if(Z0===r5)return;let e=q(n*q(p+Z0*x));if(e===r5)return;let Q0=(r.x===Z0?0:2)|Number(r.y&vQ),t=e;if(F&&A(e))t=I(e),Q0^=1;return new C(Z0,t,Q0)}return{seed:v,k2sig:i}}let h={lowS:Q.lowS,prehash:!1},c={lowS:Q.lowS,prehash:!1};function T(U,W,V=h){let{seed:N,k2sig:L}=l(U,W,V),F=Q;return Tp(F.hash.outputLen,F.nByteLength,F.hmac)(N,L)}z.BASE._setWindowSize(8);function K(U,W,V,N=c){let L=U;W=aY("msgHash",W),V=aY("publicKey",V);let{lowS:F,prehash:R,format:O}=N;if(bp(N),"strict"in N)throw new Error("options.strict was renamed to lowS");if(O!==void 0&&O!=="compact"&&O!=="der")throw new Error("format must be compact or der");let w=typeof L==="string"||Bz(L),x=!w&&!O&&typeof L==="object"&&L!==null&&typeof L.r==="bigint"&&typeof L.s==="bigint";if(!w&&!x)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let E=void 0,v;try{if(x)E=new C(L.r,L.s);if(w){try{if(O!=="compact")E=C.fromDER(L)}catch(Q0){if(!(Q0 instanceof o5.Err))throw Q0}if(!E&&O!=="der")E=C.fromCompact(L)}v=z.fromHex(V)}catch(Q0){return!1}if(!E)return!1;if(F&&E.hasHighS())return!1;if(R)W=Q.hash(W);let{r:p,s:i}=E,s=g(W),X0=G(i),n=q(s*X0),r=q(p*X0),Z0=z.BASE.multiplyAndAddUnsafe(v,n,r)?.toAffine();if(!Z0)return!1;return q(Z0.x)===p}return{CURVE:Q,getPublicKey:S,getSharedSecret:k,sign:T,verify:K,ProjectivePoint:z,Signature:C,utils:B}}var mp,o5,r5,vQ,Xv0,hp,Yv0;var pp=y(()=>{yp();TH();LH();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */mp=class mp extends Error{constructor($=""){super($)}};o5={Err:mp,_tlv:{encode:($,Q)=>{let{Err:X}=o5;if($<0||$>256)throw new X("tlv.encode: wrong tag");if(Q.length&1)throw new X("tlv.encode: unpadded data");let Y=Q.length/2,Z=rV(Y);if(Z.length/2&128)throw new X("tlv.encode: long form length too big");let J=Y>127?rV(Z.length/2|128):"";return rV($)+J+Z+Q},decode($,Q){let{Err:X}=o5,Y=0;if($<0||$>256)throw new X("tlv.encode: wrong tag");if(Q.length<2||Q[Y++]!==$)throw new X("tlv.decode: wrong tlv");let Z=Q[Y++],J=!!(Z&128),q=0;if(!J)q=Z;else{let z=Z&127;if(!z)throw new X("tlv.decode(long): indefinite length not supported");if(z>4)throw new X("tlv.decode(long): byte length is too big");let M=Q.subarray(Y,Y+z);if(M.length!==z)throw new X("tlv.decode: length bytes not complete");if(M[0]===0)throw new X("tlv.decode(long): zero leftmost byte");for(let j of M)q=q<<8|j;if(Y+=z,q<128)throw new X("tlv.decode(long): not minimal encoding")}let G=Q.subarray(Y,Y+q);if(G.length!==q)throw new X("tlv.decode: wrong value length");return{v:G,l:Q.subarray(Y+q)}}},_int:{encode($){let{Err:Q}=o5;if($<r5)throw new Q("integer: negative integers are not allowed");let X=rV($);if(Number.parseInt(X[0],16)&8)X="00"+X;if(X.length&1)throw new Q("unexpected DER parsing assertion: unpadded hex");return X},decode($){let{Err:Q}=o5;if($[0]&128)throw new Q("invalid signature integer: negative");if($[0]===0&&!($[1]&128))throw new Q("invalid signature integer: unnecessary leading zero");return n5($)}},toSig($){let{Err:Q,_int:X,_tlv:Y}=o5,Z=aY("signature",$),{v:J,l:q}=Y.decode(48,Z);if(q.length)throw new Q("invalid signature: left bytes after parsing");let{v:G,l:z}=Y.decode(2,J),{v:M,l:j}=Y.decode(2,z);if(j.length)throw new Q("invalid signature: left bytes after parsing");return{r:X.decode(G),s:X.decode(M)}},hexFromSig($){let{_tlv:Q,_int:X}=o5,Y=Q.encode(2,X.encode($.r)),Z=Q.encode(2,X.encode($.s)),J=Y+Z;return Q.encode(48,J)}},r5=BigInt(0),vQ=BigInt(1),Xv0=BigInt(2),hp=BigInt(3),Yv0=BigInt(4)});function jW0($){return{hash:$,hmac:(Q,...X)=>AT($,Q,jT(...X)),randomBytes:Gp}}function lp($,Q){let X=(Y)=>cp({...$,...jW0(Y)});return{...X(Q),create:X}}var up=y(()=>{Np();wJ();pp();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */});function HW0($){let Q=np,X=BigInt(3),Y=BigInt(6),Z=BigInt(11),J=BigInt(22),q=BigInt(23),G=BigInt(44),z=BigInt(88),M=$*$*$%Q,j=M*M*$%Q,P=tY(j,X,Q)*j%Q,D=tY(P,X,Q)*j%Q,A=tY(D,mT,Q)*M%Q,I=tY(A,Z,Q)*A%Q,H=tY(I,J,Q)*I%Q,C=tY(H,G,Q)*H%Q,B=tY(C,z,Q)*C%Q,S=tY(B,G,Q)*H%Q,_=tY(S,X,Q)*j%Q,k=tY(_,q,Q)*I%Q,f=tY(k,Y,Q)*M%Q,g=tY(f,mT,Q);if(!cT.eql(cT.sqr(g),$))throw new Error("Cannot find square root");return g}var np,dp,PW0,mT,ip=($,Q)=>($+Q/mT)/Q,cT,s5,Vv0,Ov0;var op=y(()=>{HT();up();TH();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */np=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),dp=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),PW0=BigInt(1),mT=BigInt(2);cT=tV(np,void 0,void 0,{sqrt:HW0}),s5=lp({a:BigInt(0),b:BigInt(7),Fp:cT,n:dp,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:($)=>{let Q=dp,X=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),Y=-PW0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),Z=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),J=X,q=BigInt("0x100000000000000000000000000000000"),G=ip(J*$,Q),z=ip(-Y*$,Q),M=SX($-G*X-z*Z,Q),j=SX(-G*Y-z*J,Q),P=M>q,D=j>q;if(P)M=Q-M;if(D)j=Q-j;if(M>q||j>q)throw new Error("splitScalar: Endomorphism failed, k="+$);return{k1neg:P,k1:M,k2neg:D,k2:j}}}},RH),Vv0=BigInt(0),Ov0=s5.ProjectivePoint});var IH=y(()=>{op()});var rp;var sp=y(()=>{wJ();rp=sY});function pT($){let Q=$.startsWith("0x")?$.substring(2):$;return qp(Q)}function Q9($,Q){if($.length!==Q.length)return!1;for(let X=0;X<$.length;X++)if($[X]!==Q[X])return!1;return!0}function fz($){return(Q)=>{return rp(Q),$(Q)}}var eV=y(()=>{sp();wJ();wJ()});var ap;var tp=y(()=>{HT();eV();ap=fz(RH)});function q$($,Q){return new lT({code:"ETHEREUMJS_DEFAULT_ERROR_CODE"},$,Q)}var lT;var uT=y(()=>{lT=class lT extends Error{constructor($,Q,X){super(Q??$.code);if(this.type=$,X!==void 0)this.stack=X}getMetadata(){return this.type}toObject(){return{type:this.getMetadata(),message:this.message??"",stack:this.stack??"",className:this.constructor.name}}}});function ep($){if($[0]===0)throw q$("invalid RLP: extra zeros");return RW0(AW0($))}function $l($,Q){if($<56)return Uint8Array.from([$+Q]);let X=nT($),Y=X.length/2,Z=nT(Q+55+Y);return Uint8Array.from(iT(Z+X))}function q6($,Q,X){if(X>$.length)throw q$("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return $.slice(Q,X)}function dT($){let Q,X,Y,Z,J,q=[],G=$[0];if(G<=127)return{data:$.slice(0,1),remainder:$.subarray(1)};else if(G<=183){if(Q=G-127,G===128)Y=Uint8Array.from([]);else Y=q6($,1,Q);if(Q===2&&Y[0]<128)throw q$("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:Y,remainder:$.subarray(Q)}}else if(G<=191){if(X=G-182,$.length-1<X)throw q$("invalid RLP: not enough bytes for string length");if(Q=ep(q6($,1,X)),Q<=55)throw q$("invalid RLP: expected string length to be greater than 55");return Y=q6($,X,Q+X),{data:Y,remainder:$.subarray(Q+X)}}else if(G<=247){Q=G-191,Z=q6($,1,Q);while(Z.length)J=dT(Z),q.push(J.data),Z=J.remainder;return{data:q,remainder:$.subarray(Q)}}else{if(X=G-246,Q=ep(q6($,1,X)),Q<56)throw q$("invalid RLP: encoded list too short");let z=X+Q;if(z>$.length)throw q$("invalid RLP: total length is larger than the data");Z=q6($,X,z);while(Z.length)J=dT(Z),q.push(J.data),Z=J.remainder;return{data:q,remainder:$.subarray(z)}}}function AW0($){let Q="";for(let X=0;X<$.length;X++)Q+=NW0[$[X]];return Q}function RW0($){let Q=Number.parseInt($,16);if(Number.isNaN(Q))throw q$("Invalid byte sequence");return Q}function Ql($){if($>=a5._0&&$<=a5._9)return $-a5._0;if($>=a5._A&&$<=a5._F)return $-(a5._A-10);if($>=a5._a&&$<=a5._f)return $-(a5._a-10);return}function iT($){if($.slice(0,2)==="0x")$=$.slice(0,2);if(typeof $!=="string")throw q$("hex string expected, got "+typeof $);let Q=$.length,X=Q/2;if(Q%2)throw q$("padded hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=Ql($.charCodeAt(J)),G=Ql($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw q$('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function Xl(...$){if($.length===1)return $[0];let Q=$.reduce((Y,Z)=>Y+Z.length,0),X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}function CW0($){return new TextEncoder().encode($)}function nT($){if($<0)throw q$("Invalid integer as argument, must be unsigned!");let Q=$.toString(16);return Q.length%2?`0${Q}`:Q}function LW0($){return $.length%2?`0${$}`:$}function Yl($){return $.length>=2&&$[0]==="0"&&$[1]==="x"}function wW0($){if(typeof $!=="string")return $;return Yl($)?$.slice(2):$}function Zl($){if($ instanceof Uint8Array)return $;if(typeof $==="string"){if(Yl($))return iT(LW0(wW0($)));return CW0($)}if(typeof $==="number"||typeof $==="bigint"){if(!$)return Uint8Array.from([]);return iT(nT($))}if($===null||$===void 0)return Uint8Array.from([]);throw q$("toBytes: received unsupported type "+typeof $)}function Jl($){if(Array.isArray($)){let X=[],Y=0;for(let Z=0;Z<$.length;Z++){let J=Jl($[Z]);X.push(J),Y+=J.length}return Xl($l(Y,192),...X)}let Q=Zl($);if(Q.length===1&&Q[0]<128)return Q;return Xl($l(Q.length,128),Q)}function TW0($,Q=!1){if(typeof $==="undefined"||$===null||$.length===0)return Uint8Array.from([]);let X=Zl($),Y=dT(X);if(Q)return{data:Y.data,remainder:Y.remainder.slice()};if(Y.remainder.length!==0)throw q$("invalid RLP: remainder must be zero");return Y.data}var NW0,a5,G6;var FH=y(()=>{uT();uT();NW0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));a5={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};G6={encode:Jl,decode:TW0}});var O7=y(()=>{FH()});function oT($,Q){if(typeof $!=="string"||!$.match(/^0x[0-9A-Fa-f]*$/))return!1;if(typeof Q!=="undefined"&&Q>0&&$.length!==2+2*Q)return!1;return!0}function BH($){let Q=$;if(typeof Q!=="string")throw q$(`[padToEven] value must be type 'string', received ${typeof Q}`);if(Q.length%2)Q=`0${Q}`;return Q}var ql=($)=>{if(typeof $!=="string")throw q$(`[stripHexPrefix] input must be type 'string', received ${typeof $}`);return oT($)?$.slice(2):$};var Gl=y(()=>{O7()});var $O=function($){if(!($ instanceof Uint8Array)){let Q=`This method only supports Uint8Array but input was: ${$}`;throw q$(Q)}};var rT=y(()=>{O7()});var zl,z6,f8=($)=>{if(!$.startsWith("0x"))throw q$("input string must be 0x prefixed");return pT(BH(ql($)))},aT=($)=>{if($.startsWith("0x"))throw q$("input string cannot be 0x prefixed");return pT(BH($))},X9=($)=>{return`0x${z6($)}`},sT,ZX=($,Q=!1)=>{if(Q)$.reverse();let X=X9($);if(X==="0x")return zl;if(X.length===4)return sT[$[0]];if(X.length===6)return sT[$[0]*256+$[1]];return BigInt(X)},FW0=($)=>{if(!Number.isSafeInteger($)||$<0)throw q$(`Received an invalid integer type: ${$}`);return`0x${$.toString(16)}`},M7=($)=>{let Q=FW0($);return f8(Q)},QO=($,Q=!1)=>{let X=f8(`0x${BH($.toString(16))}`);return Q?X.reverse():X},BW0=($,Q,X)=>{if(X){if($.length<Q)return new Uint8Array([...$,...new Uint8Array(Q-$.length)]);return $.subarray(0,Q)}else{if($.length<Q)return new Uint8Array([...new Uint8Array(Q-$.length),...$]);return $.subarray(-Q)}},D7=($,Q)=>{return $O($),BW0($,Q,!1)},SW0=($)=>{let Q=$[0];while($.length>0&&Q.toString()==="0")$=$.slice(1),Q=$[0];return $},XO=($)=>{return $O($),SW0($)},YO=($)=>{if($===null||$===void 0)return new Uint8Array;if(Array.isArray($)||$ instanceof Uint8Array)return Uint8Array.from($);if(typeof $==="string"){if(!oT($))throw q$(`Cannot convert string to Uint8Array. toBytes only supports 0x-prefixed hex strings and this string was given: ${$}`);return f8($)}if(typeof $==="number")return M7($);if(typeof $==="bigint"){if($<zl)throw q$(`Cannot convert negative bigint to Uint8Array. Given: ${$}`);let Q=$.toString(16);if(Q.length%2)Q="0"+Q;return aT(Q)}if($.toBytes!==void 0)return $.toBytes();throw q$("invalid type")},SH=($,Q=50)=>{let X=$ instanceof Uint8Array?X9($):$,Y=X.slice(0,2)==="0x"?Q+2:Q;if(X.length<=Y)return X;return X.slice(0,Y)+""},Kl=(...$)=>$.reduce((Q,X)=>X>Q?X:Q),K6=($)=>{return XO(QO($))},ZO=($)=>{return XO(M7($))},TJ=(...$)=>{if($.length===1)return $[0];let Q=$.reduce((Y,Z)=>Y+Z.length,0),X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X};var t5=y(()=>{eV();O7();rT();Gl();eV();zl=BigInt(0),z6=HH,sT=[];for(let $=0;$<=65535;$++)sT[$]=BigInt($)});var Ul,ov0,rv0,EW0,tT,sv0,_W0="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",vz,kW0="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",av0,xW0="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",Wl,tv0,ev0,$g0,N8,U6,eT,Qg0,Xg0,Yg0,Vl,Zg0,Jg0,qg0,Gg0,zg0,Kg0,fW0,Ug0,Wg0,Vg0,Og0,Mg0,Dg0,jg0,Pg0;var JO=y(()=>{IH();tp();t5();Ul=BigInt("0xffffffffffffffff"),ov0=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),rv0=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),EW0=s5.CURVE.n,tT=s5.CURVE.n/BigInt(2),sv0=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),vz=f8(_W0),av0=f8(kW0),Wl=f8(xW0),tv0=ap(new Uint8Array),ev0=Uint8Array.from([128]),$g0=BigInt(-1),N8=BigInt(0),U6=BigInt(1),eT=BigInt(2),Qg0=BigInt(3),Xg0=BigInt(7),Yg0=BigInt(8),Vl=BigInt(27),Zg0=BigInt(28),Jg0=BigInt(31),qg0=BigInt(32),Gg0=BigInt(64),zg0=BigInt(128),Kg0=BigInt(255),fW0=BigInt(256),Ug0=BigInt(96),Wg0=BigInt(100),Vg0=BigInt(160),Og0=BigInt(224),Mg0=BigInt(79228162514264340000000000000),Dg0=BigInt(1461501637330903000000000000000000000000000000000),jg0=BigInt(26959946667150640000000000000000000000000000000000000000000000000000),Pg0=eT**fW0});var Ng0,Ag0;var Ol=y(()=>{Ng0=BigInt(1e9),Ag0=BigInt(1000000000000000000)});function pW0($,Q=24){let X=new Uint32Array(10);for(let Y=24-Q;Y<24;Y++){for(let q=0;q<10;q++)X[q]=$[q]^$[q+10]^$[q+20]^$[q+30]^$[q+40];for(let q=0;q<10;q+=2){let G=(q+8)%10,z=(q+2)%10,M=X[z],j=X[z+1],P=Ml(M,j,1)^X[G],D=Dl(M,j,1)^X[G+1];for(let A=0;A<50;A+=10)$[q+A]^=P,$[q+A+1]^=D}let Z=$[2],J=$[3];for(let q=0;q<24;q++){let G=Pl[q],z=Ml(Z,J,G),M=Dl(Z,J,G),j=jl[q];Z=$[j],J=$[j+1],$[j]=z,$[j+1]=M}for(let q=0;q<50;q+=10){for(let G=0;G<10;G++)X[G]=$[q+G];for(let G=0;G<10;G++)$[q+G]^=~X[(G+2)%10]&X[(G+4)%10]}$[0]^=mW0[Y],$[1]^=cW0[Y]}LJ(X)}var vW0,qO,gW0,yW0,bW0,hW0,jl,Pl,Hl,Nl,mW0,cW0,Ml=($,Q,X)=>X>32?Dp($,Q,X):Op($,Q,X),Dl=($,Q,X)=>X>32?jp($,Q,X):Mp($,Q,X),$I,EH=($,Q,X)=>NH(()=>new $I(Q,$,X)),Al,QI,Rl,Cl;var Ll=y(()=>{Pp();wJ();vW0=BigInt(0),qO=BigInt(1),gW0=BigInt(2),yW0=BigInt(7),bW0=BigInt(256),hW0=BigInt(113),jl=[],Pl=[],Hl=[];for(let $=0,Q=qO,X=1,Y=0;$<24;$++){[X,Y]=[Y,(2*X+3*Y)%5],jl.push(2*(5*Y+X)),Pl.push(($+1)*($+2)/2%64);let Z=vW0;for(let J=0;J<7;J++)if(Q=(Q<<qO^(Q>>yW0)*hW0)%bW0,Q&gW0)Z^=qO<<(qO<<BigInt(J))-qO;Hl.push(Z)}Nl=Vp(Hl,!0),mW0=Nl[0],cW0=Nl[1];$I=class $I extends Fz{constructor($,Q,X,Y=!1,Z=24){super();if(this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=$,this.suffix=Q,this.outputLen=X,this.enableXOF=Y,this.rounds=Z,W7(X),!(0<$&&$<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Zp(this.state)}clone(){return this._cloneInto()}keccak(){DT(this.state32),pW0(this.state32,this.rounds),DT(this.state32),this.posOut=0,this.pos=0}update($){CJ(this),$=Iz($),sY($);let{blockLen:Q,state:X}=this,Y=$.length;for(let Z=0;Z<Y;){let J=Math.min(Q-this.pos,Y-Z);for(let q=0;q<J;q++)X[this.pos++]^=$[Z++];if(this.pos===Q)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:$,suffix:Q,pos:X,blockLen:Y}=this;if($[X]^=Q,(Q&128)!==0&&X===Y-1)this.keccak();$[Y-1]^=128,this.keccak()}writeInto($){CJ(this,!1),sY($),this.finish();let Q=this.state,{blockLen:X}=this;for(let Y=0,Z=$.length;Y<Z;){if(this.posOut>=X)this.keccak();let J=Math.min(X-this.posOut,Z-Y);$.set(Q.subarray(this.posOut,this.posOut+J),Y),this.posOut+=J,Y+=J}return $}xofInto($){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto($)}xof($){return W7($),this.xofInto(new Uint8Array($))}digestInto($){if(iV($,this),this.finished)throw new Error("digest() was already called");return this.writeInto($),this.destroy(),$}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,LJ(this.state)}_cloneInto($){let{blockLen:Q,suffix:X,outputLen:Y,rounds:Z,enableXOF:J}=this;return $||($=new $I(Q,X,Y,J,Z)),$.state32.set(this.state32),$.pos=this.pos,$.posOut=this.posOut,$.finished=this.finished,$.rounds=Z,$.suffix=X,$.outputLen=Y,$.enableXOF=J,$.destroyed=this.destroyed,$}};Al=(()=>EH(1,144,28))(),QI=(()=>EH(1,136,32))(),Rl=(()=>EH(1,104,48))(),Cl=(()=>EH(1,72,64))()});var Bg0,W6,Sg0,Eg0;var _H=y(()=>{Ll();eV();Bg0=fz(Al),W6=(()=>{let $=fz(QI);return $.create=QI.create,$})(),Sg0=fz(Rl),Eg0=fz(Cl)});class e5{get version(){if(this._version!==null)return this._version;else throw Error(`version=${this._version} not loaded`)}set version($){this._version=$}get nonce(){if(this._nonce!==null)return this._nonce;else throw Error(`nonce=${this._nonce} not loaded`)}set nonce($){this._nonce=$}get balance(){if(this._balance!==null)return this._balance;else throw Error(`balance=${this._balance} not loaded`)}set balance($){this._balance=$}get storageRoot(){if(this._storageRoot!==null)return this._storageRoot;else throw Error(`storageRoot=${this._storageRoot} not loaded`)}set storageRoot($){this._storageRoot=$}get codeHash(){if(this._codeHash!==null)return this._codeHash;else throw Error(`codeHash=${this._codeHash} not loaded`)}set codeHash($){this._codeHash=$}get codeSize(){if(this._codeSize!==null)return this._codeSize;else throw Error(`codeSize=${this._codeSize} not loaded`)}set codeSize($){this._codeSize=$}constructor($=N8,Q=N8,X=Wl,Y=vz,Z=0,J=0){if(this._nonce=null,this._balance=null,this._storageRoot=null,this._codeHash=null,this._codeSize=null,this._version=null,this._nonce=$,this._balance=Q,this._storageRoot=X,this._codeHash=Y,Z===null&&Y!==null&&!this.isContract())Z=0;this._codeSize=Z,this._version=J,this._validate()}_validate(){if(this._nonce!==null&&this._nonce<N8)throw q$("nonce must be greater than zero");if(this._balance!==null&&this._balance<N8)throw q$("balance must be greater than zero");if(this._storageRoot!==null&&this._storageRoot.length!==32)throw q$("storageRoot must have a length of 32");if(this._codeHash!==null&&this._codeHash.length!==32)throw q$("codeHash must have a length of 32");if(this._codeSize!==null&&this._codeSize<N8)throw q$("codeSize must be greater than zero")}raw(){return[K6(this.nonce),K6(this.balance),this.storageRoot,this.codeHash]}serialize(){return G6.encode(this.raw())}serializeWithPartialInfo(){let $=[],Q=ZO(0),X=ZO(1);if(this._nonce!==null)$.push([X,K6(this._nonce)]);else $.push([Q]);if(this._balance!==null)$.push([X,K6(this._balance)]);else $.push([Q]);if(this._storageRoot!==null)$.push([X,this._storageRoot]);else $.push([Q]);if(this._codeHash!==null)$.push([X,this._codeHash]);else $.push([Q]);if(this._codeSize!==null)$.push([X,ZO(this._codeSize)]);else $.push([Q]);if(this._version!==null)$.push([X,ZO(this._version)]);else $.push([Q]);return G6.encode($)}isContract(){if(this._codeHash===null&&this._codeSize===null)throw Error("Insufficient data as codeHash=null and codeSize=null");return this._codeHash!==null&&!Q9(this._codeHash,vz)||this._codeSize!==null&&this._codeSize!==0}isEmpty(){if(this._balance!==null&&this.balance!==N8||this._nonce===null&&this.nonce!==N8||this._codeHash!==null&&!Q9(this.codeHash,vz))return!1;return this.balance===N8&&this.nonce===N8&&Q9(this.codeHash,vz)}}function wl($){let{nonce:Q,balance:X,storageRoot:Y,codeHash:Z}=$;if(Q===null||X===null||Y===null||Z===null)throw Error("Partial fields not supported in fromAccountData");return new e5(Q!==void 0?ZX(YO(Q)):void 0,X!==void 0?ZX(YO(X)):void 0,Y!==void 0?YO(Y):void 0,Z!==void 0?YO(Z):void 0)}var uW0=function($,Q=!1){if($O($),Q&&$.length!==64)$=s5.ProjectivePoint.fromHex($).toRawBytes(!1).slice(1);if($.length!==64)throw q$("Expected pubKey to be of length 64");return W6($).subarray(-20)},Tl,mg0;var XI=y(()=>{FH();_H();IH();t5();JO();O7();rT();Tl=uW0,mg0=new Uint8Array(0)});class j7{constructor($){if($.length!==20)throw q$("Invalid address length");this.bytes=$}equals($){return Q9(this.bytes,$.bytes)}isZero(){return this.equals(new j7(new Uint8Array(20)))}isPrecompileOrSystemAddress(){let $=ZX(this.bytes),Q=N8,X=BigInt("0xffff");return $>=Q&&$<=X}toString(){return X9(this.bytes)}toBytes(){return new Uint8Array(this.bytes)}}var YI=y(()=>{t5();JO();O7()});var Il=()=>{};var Fl=()=>{};var Bl=()=>{};function dW0($,Q){if($===N8||$===U6)return $;if(Q===void 0)return $-Vl;return $-(Q*eT+BigInt(35))}function iW0($){return $===N8||$===U6}var Sl=function($,Q,X,Y,Z){let J=TJ(D7(X,32),D7(Y,32)),q=dW0(Q,Z);if(!iW0(q))throw q$("Invalid signature v value");return s5.Signature.fromCompact(J).addRecoveryBit(Number(q)).recoverPublicKey($).toRawBytes(!1).slice(1)};var ZI=y(()=>{IH();t5();JO();O7()});function nW0($){let Q=["chainId","address","nonce","yParity","r","s"];for(let X of Q)if($[X]===void 0)throw q$(`EIP-7702 authorization list invalid: ${X} is not defined`);return[f8($.chainId),f8($.address),f8($.nonce),f8($.yParity),f8($.r),f8($.s)]}function oW0($){let{chainId:Q,address:X,nonce:Y}=$,Z=f8(Q),J=D7(f8(X),20),q=f8(Y);return[Z,J,q]}function rW0($){if(Array.isArray($)){let[Q,X,Y]=$;if(X.length!==20)throw q$("Cannot sign authority: address length should be 20 bytes");return TJ(El,G6.encode([XO(Q),X,XO(Y)]))}else{let[Q,X,Y]=oW0($);return TJ(El,G6.encode([Q,X,Y]))}}function sW0($){return W6(rW0($))}function _l($){let Q=Array.isArray($)?$:nW0($),[X,Y,Z,J,q,G]=Q,z=sW0([X,Y,Z]),M=Sl(z,ZX(J),q,G);return new j7(Tl(M))}var El;var kl=y(()=>{FH();_H();XI();YI();t5();ZI();El=f8("0x05")});var xl,zy0,Ky0,$V0=31,Uy0;var fl=y(()=>{t5();xl={BasicData:0,CodeHash:1},zy0=M7(xl.BasicData),Ky0=M7(xl.CodeHash),Uy0=BigInt(256)**BigInt($V0)});var QV0=32,vl=4096,XV0,YV0=2,Vy0,Oy0;var gl=y(()=>{XV0=32*vl,Vy0=XV0*YV0-1,Oy0=QV0*vl});var yl=()=>{};var bl=()=>{};var hl=()=>{};var ml=()=>{};var cl,Ny0,Ay0,ZV0=31,Ry0;var pl=y(()=>{t5();cl={BasicData:0,CodeHash:1},Ny0=M7(cl.BasicData),Ay0=M7(cl.CodeHash),Ry0=BigInt(256)**BigInt(ZV0)});var kH=y(()=>{JO();O7();Ol();XI();YI();Il();Bl();ZI();t5();Fl();kl();fl();gl();yl();bl();hl();ml();pl()});class JI{constructor($,Q){if(Q?.customCrypto.keccak256!==void 0)this.keccakFunction=Q.customCrypto.keccak256;else this.keccakFunction=W6;if(!$)this.bitvector=new Uint8Array(GO);else{if($.length!==GO)throw q$("bitvectors must be 2048 bits long");this.bitvector=$}}add($){$=this.keccakFunction($);let Q=2047;for(let X=0;X<3;X++){let Y=new DataView($.buffer).getUint16(X*2),Z=Q&Y,J=Z>>3,q=1<<Z%8;this.bitvector[GO-J-1]|=q}}check($){$=this.keccakFunction($);let Q=2047,X=!0;for(let Y=0;Y<3&&X;Y++){let Z=new DataView($.buffer).getUint16(Y*2),J=Q&Z,q=J>>3,G=1<<J%8;X=(this.bitvector[GO-q-1]&G)!==0}return Boolean(X)}multiCheck($){return $.every((Q)=>this.check(Q))}or($){for(let Q=0;Q<=GO;Q++)this.bitvector[Q]=this.bitvector[Q]|$.bitvector[Q]}}var GO=256;var ll=y(()=>{kH();_H()});var IJ;var ul=y(()=>{IJ={name:"mainnet",chainId:1,defaultHardfork:"prague",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"The Ethereum main chain",url:"https://ethstats.net/",genesis:{gasLimit:5000,difficulty:17179869184,nonce:"0x0000000000000042",extraData:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"},depositContractAddress:"0x00000000219ab540356cBB839Cbe05303d7705Fa",hardforks:[{name:"chainstart",block:0,forkHash:"0xfc64ec04"},{name:"homestead",block:1150000,forkHash:"0x97c2c34c"},{name:"dao",block:1920000,forkHash:"0x91d1f948"},{name:"tangerineWhistle",block:2463000,forkHash:"0x7a64da13"},{name:"spuriousDragon",block:2675000,forkHash:"0x3edd5b10"},{name:"byzantium",block:4370000,forkHash:"0xa00bc324"},{name:"constantinople",block:7280000,forkHash:"0x668db0af"},{name:"petersburg",block:7280000,forkHash:"0x668db0af"},{name:"istanbul",block:9069000,forkHash:"0x879d6e30"},{name:"muirGlacier",block:9200000,forkHash:"0xe029e991"},{name:"berlin",block:12244000,forkHash:"0x0eb440f6"},{name:"london",block:12965000,forkHash:"0xb715077d"},{name:"arrowGlacier",block:13773000,forkHash:"0x20c327fc"},{name:"grayGlacier",block:15050000,forkHash:"0xf0afd0e3"},{name:"paris",block:15537394,forkHash:"0xf0afd0e3"},{name:"mergeNetsplitBlock",block:null,forkHash:null},{name:"shanghai",block:null,timestamp:"1681338455",forkHash:"0xdce96c2d"},{name:"cancun",block:null,timestamp:"1710338135",forkHash:"0x9f3d2254"},{name:"prague",block:null,timestamp:"1746612311",forkHash:"0xc376cf8b"},{name:"osaka",block:null},{name:"verkle",block:null}],bootstrapNodes:[{ip:"18.138.108.67",port:30303,id:"d860a01f9722d78051619d1e2351aba3f43f943f6f00718d1b9baa4101932a1f5011f16bb2b1bb35db20d6fe28fa0bf09636d26a87d31de9ec6203eeedb1f666",location:"ap-southeast-1-001",comment:"bootnode-aws-ap-southeast-1-001"},{ip:"3.209.45.79",port:30303,id:"22a8232c3abc76a16ae9d6c3b164f98775fe226f0917b0ca871128a74a8e9630b458460865bab457221f1d448dd9791d24c4e5d88786180ac185df813a68d4de",location:"us-east-1-001",comment:"bootnode-aws-us-east-1-001"},{ip:"65.108.70.101",port:30303,id:"2b252ab6a1d0f971d9722cb839a42cb81db019ba44c08754628ab4a823487071b5695317c8ccd085219c3a03af063495b2f1da8d18218da2d6a82981b45e6ffc",location:"eu-west-1-001",comment:"bootnode-hetzner-hel"},{ip:"157.90.35.166",port:30303,id:"4aeb4ab6c14b23e2c4cfdce879c04b0748a20d8e9b59e25ded2a08143e265c6c25936e74cbc8e641e3312ca288673d91f2f93f8e277de3cfa444ecdaaf982052",location:"eu-central-1-001",comment:"bootnode-hetzner-fsn"}],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net"]}});var gz;var dl=y(()=>{gz=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function JV0($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function zO($){if(!Number.isSafeInteger($)||$<0)throw new Error("positive integer expected, got "+$)}function FJ($,...Q){if(!JV0($))throw new Error("Uint8Array expected");if(Q.length>0&&!Q.includes($.length))throw new Error("Uint8Array expected of length "+Q+", got length="+$.length)}function nl($){if(typeof $!=="function"||typeof $.create!=="function")throw new Error("Hash should be wrapped by utils.createHasher");zO($.outputLen),zO($.blockLen)}function yz($,Q=!0){if($.destroyed)throw new Error("Hash instance has been destroyed");if(Q&&$.finished)throw new Error("Hash#digest() has already been called")}function qI($,Q){FJ($);let X=Q.outputLen;if($.length<X)throw new Error("digestInto() expects output buffer of length at least "+X)}function bz(...$){for(let Q=0;Q<$.length;Q++)$[Q].fill(0)}function KO($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function S9($,Q){return $<<32-Q|$>>>Q}function xH($){if(FJ($),ol)return $.toHex();let Q="";for(let X=0;X<$.length;X++)Q+=qV0[$[X]];return Q}function il($){if($>=$q._0&&$<=$q._9)return $-$q._0;if($>=$q.A&&$<=$q.F)return $-($q.A-10);if($>=$q.a&&$<=$q.f)return $-($q.a-10);return}function rl($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(ol)return Uint8Array.fromHex($);let Q=$.length,X=Q/2;if(Q%2)throw new Error("hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=il($.charCodeAt(J)),G=il($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw new Error('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function sl($){if(typeof $!=="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function UO($){if(typeof $==="string")$=sl($);return FJ($),$}function GI(...$){let Q=0;for(let Y=0;Y<$.length;Y++){let Z=$[Y];FJ(Z),Q+=Z.length}let X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}class WO{}function al($){let Q=(Y)=>$().update(UO(Y)).digest(),X=$();return Q.outputLen=X.outputLen,Q.blockLen=X.blockLen,Q.create=()=>$(),Q}function tl($=32){if(gz&&typeof gz.getRandomValues==="function")return gz.getRandomValues(new Uint8Array($));if(gz&&typeof gz.randomBytes==="function")return Uint8Array.from(gz.randomBytes($));throw new Error("crypto.getRandomValues must be defined")}var ol,qV0,$q;var Qq=y(()=>{dl();/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */ol=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")(),qV0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));$q={_0:48,_9:57,A:65,F:70,a:97,f:102}});function GV0($,Q,X,Y){if(typeof $.setBigUint64==="function")return $.setBigUint64(Q,X,Y);let Z=BigInt(32),J=BigInt(4294967295),q=Number(X>>Z&J),G=Number(X&J),z=Y?4:0,M=Y?0:4;$.setUint32(Q+z,q,Y),$.setUint32(Q+M,G,Y)}function el($,Q,X){return $&Q^~$&X}function $u($,Q,X){return $&Q^$&X^Q&X}var zI,Xq;var Qu=y(()=>{Qq();zI=class zI extends WO{constructor($,Q,X,Y){super();this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=$,this.outputLen=Q,this.padOffset=X,this.isLE=Y,this.buffer=new Uint8Array($),this.view=KO(this.buffer)}update($){yz(this),$=UO($),FJ($);let{view:Q,buffer:X,blockLen:Y}=this,Z=$.length;for(let J=0;J<Z;){let q=Math.min(Y-this.pos,Z-J);if(q===Y){let G=KO($);for(;Y<=Z-J;J+=Y)this.process(G,J);continue}if(X.set($.subarray(J,J+q),this.pos),this.pos+=q,J+=q,this.pos===Y)this.process(Q,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){yz(this),qI($,this),this.finished=!0;let{buffer:Q,view:X,blockLen:Y,isLE:Z}=this,{pos:J}=this;if(Q[J++]=128,bz(this.buffer.subarray(J)),this.padOffset>Y-J)this.process(X,0),J=0;for(let j=J;j<Y;j++)Q[j]=0;GV0(X,Y-8,BigInt(this.length*8),Z),this.process(X,0);let q=KO($),G=this.outputLen;if(G%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let z=G/4,M=this.get();if(z>M.length)throw new Error("_sha2: outputLen bigger than state");for(let j=0;j<z;j++)q.setUint32(4*j,M[j],Z)}digest(){let{buffer:$,outputLen:Q}=this;this.digestInto($);let X=$.slice(0,Q);return this.destroy(),X}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:Q,buffer:X,length:Y,finished:Z,destroyed:J,pos:q}=this;if($.destroyed=J,$.finished=Z,$.length=Y,$.pos=q,Y%Q)$.buffer.set(X);return $}clone(){return this._cloneInto()}};Xq=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225])});var zV0,P7,Xu,fH;var KI=y(()=>{Qu();Qq();zV0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),P7=new Uint32Array(64);Xu=class Xu extends zI{constructor($=32){super(64,$,8,!1);this.A=Xq[0]|0,this.B=Xq[1]|0,this.C=Xq[2]|0,this.D=Xq[3]|0,this.E=Xq[4]|0,this.F=Xq[5]|0,this.G=Xq[6]|0,this.H=Xq[7]|0}get(){let{A:$,B:Q,C:X,D:Y,E:Z,F:J,G:q,H:G}=this;return[$,Q,X,Y,Z,J,q,G]}set($,Q,X,Y,Z,J,q,G){this.A=$|0,this.B=Q|0,this.C=X|0,this.D=Y|0,this.E=Z|0,this.F=J|0,this.G=q|0,this.H=G|0}process($,Q){for(let j=0;j<16;j++,Q+=4)P7[j]=$.getUint32(Q,!1);for(let j=16;j<64;j++){let P=P7[j-15],D=P7[j-2],A=S9(P,7)^S9(P,18)^P>>>3,I=S9(D,17)^S9(D,19)^D>>>10;P7[j]=I+P7[j-7]+A+P7[j-16]|0}let{A:X,B:Y,C:Z,D:J,E:q,F:G,G:z,H:M}=this;for(let j=0;j<64;j++){let P=S9(q,6)^S9(q,11)^S9(q,25),D=M+P+el(q,G,z)+zV0[j]+P7[j]|0,I=(S9(X,2)^S9(X,13)^S9(X,22))+$u(X,Y,Z)|0;M=z,z=G,G=q,q=J+D|0,J=Z,Z=Y,Y=X,X=D+I|0}X=X+this.A|0,Y=Y+this.B|0,Z=Z+this.C|0,J=J+this.D|0,q=q+this.E|0,G=G+this.F|0,z=z+this.G|0,M=M+this.H|0,this.set(X,Y,Z,J,q,G,z,M)}roundClean(){bz(P7)}destroy(){this.set(0,0,0,0,0,0,0,0),bz(this.buffer)}};fH=al(()=>new Xu)});var UI,WI=($,Q,X)=>new UI($,Q).update(X).digest();var Yu=y(()=>{Qq();UI=class UI extends WO{constructor($,Q){super();this.finished=!1,this.destroyed=!1,nl($);let X=UO(Q);if(this.iHash=$.create(),typeof this.iHash.update!=="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let Y=this.blockLen,Z=new Uint8Array(Y);Z.set(X.length>Y?$.create().update(X).digest():X);for(let J=0;J<Z.length;J++)Z[J]^=54;this.iHash.update(Z),this.oHash=$.create();for(let J=0;J<Z.length;J++)Z[J]^=106;this.oHash.update(Z),bz(Z)}update($){return yz(this),this.iHash.update($),this}digestInto($){yz(this),FJ($,this.outputLen),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||($=Object.create(Object.getPrototypeOf(this),{}));let{oHash:Q,iHash:X,finished:Y,destroyed:Z,blockLen:J,outputLen:q}=this;return $=$,$.finished=Y,$.destroyed=Z,$.blockLen=J,$.outputLen=q,$.oHash=Q._cloneInto($.oHash),$.iHash=X._cloneInto($.iHash),$}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};WI.create=($,Q)=>new UI($,Q)});function hz($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function jI($){if(!hz($))throw new Error("Uint8Array expected")}function V6($,Q){if(typeof Q!=="boolean")throw new Error($+" boolean expected, got "+Q)}function VO($){let Q=$.toString(16);return Q.length&1?"0"+Q:Q}function qu($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);return $===""?DI:BigInt("0x"+$)}function O6($){if(jI($),Gu)return $.toHex();let Q="";for(let X=0;X<$.length;X++)Q+=KV0[$[X]];return Q}function Zu($){if($>=Yq._0&&$<=Yq._9)return $-Yq._0;if($>=Yq.A&&$<=Yq.F)return $-(Yq.A-10);if($>=Yq.a&&$<=Yq.f)return $-(Yq.a-10);return}function OO($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(Gu)return Uint8Array.fromHex($);let Q=$.length,X=Q/2;if(Q%2)throw new Error("hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=Zu($.charCodeAt(J)),G=Zu($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw new Error('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function Zq($){return qu(O6($))}function PI($){return jI($),qu(O6(Uint8Array.from($).reverse()))}function mz($,Q){return OO($.toString(16).padStart(Q*2,"0"))}function HI($,Q){return mz($,Q).reverse()}function eY($,Q,X){let Y;if(typeof Q==="string")try{Y=OO(Q)}catch(J){throw new Error($+" must be hex string or Uint8Array, cause: "+J)}else if(hz(Q))Y=Uint8Array.from(Q);else throw new Error($+" must be hex string or Uint8Array");let Z=Y.length;if(typeof X==="number"&&Z!==X)throw new Error($+" of length "+X+" expected, got "+Z);return Y}function MO(...$){let Q=0;for(let Y=0;Y<$.length;Y++){let Z=$[Y];jI(Z),Q+=Z.length}let X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}function vH($,Q,X){return VI($)&&VI(Q)&&VI(X)&&Q<=$&&$<X}function cz($,Q,X,Y){if(!vH(Q,X,Y))throw new Error("expected valid "+$+": "+X+" <= n < "+Y+", got "+Q)}function zu($){let Q;for(Q=0;$>DI;$>>=MI,Q+=1);return Q}function Ku($,Q,X){if(typeof $!=="number"||$<2)throw new Error("hashLen must be a number");if(typeof Q!=="number"||Q<2)throw new Error("qByteLen must be a number");if(typeof X!=="function")throw new Error("hmacFn must be a function");let Y=OI($),Z=OI($),J=0,q=()=>{Y.fill(1),Z.fill(0),J=0},G=(...P)=>X(Z,Y,...P),z=(P=OI(0))=>{if(Z=G(Ju([0]),P),Y=G(),P.length===0)return;Z=G(Ju([1]),P),Y=G()},M=()=>{if(J++>=1000)throw new Error("drbg: tried 1000 values");let P=0,D=[];while(P<Q){Y=G();let A=Y.slice();D.push(A),P+=Y.length}return MO(...D)};return(P,D)=>{q(),z(P);let A=void 0;while(!(A=D(M())))z();return q(),A}}function lz($,Q,X={}){let Y=(Z,J,q)=>{let G=UV0[J];if(typeof G!=="function")throw new Error("invalid validator function");let z=$[Z];if(q&&z===void 0)return;if(!G(z,$))throw new Error("param "+String(Z)+" is invalid. Expected "+J+", got "+z)};for(let[Z,J]of Object.entries(Q))Y(Z,J,!1);for(let[Z,J]of Object.entries(X))Y(Z,J,!0);return $}function NI($){let Q=new WeakMap;return(X,...Y)=>{let Z=Q.get(X);if(Z!==void 0)return Z;let J=$(X,...Y);return Q.set(X,J),J}}var DI,MI,Gu,KV0,Yq,VI=($)=>typeof $==="bigint"&&DI<=$,pz=($)=>(MI<<BigInt($))-MI,OI=($)=>new Uint8Array($),Ju=($)=>Uint8Array.from($),UV0;var gH=y(()=>{/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */DI=BigInt(0),MI=BigInt(1);Gu=typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function",KV0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));Yq={_0:48,_9:57,A:65,F:70,a:97,f:102};UV0={bigint:($)=>typeof $==="bigint",function:($)=>typeof $==="function",boolean:($)=>typeof $==="boolean",string:($)=>typeof $==="string",stringOrUint8Array:($)=>typeof $==="string"||hz($),isSafeInteger:($)=>Number.isSafeInteger($),array:($)=>Array.isArray($),field:($,Q)=>Q.Fp.isValid($),hash:($)=>typeof $==="function"&&Number.isSafeInteger($.outputLen)}});function EX($,Q){let X=$%Q;return X>=ZY?X:Q+X}function $Z($,Q,X){let Y=$;while(Q-- >ZY)Y*=Y,Y%=X;return Y}function yH($,Q){if($===ZY)throw new Error("invert: expected non-zero number");if(Q<=ZY)throw new Error("invert: expected positive modulus, got "+Q);let X=EX($,Q),Y=Q,Z=ZY,J=JX,q=JX,G=ZY;while(X!==ZY){let M=Y/X,j=Y%X,P=Z-q*M,D=J-G*M;Y=X,X=j,Z=q,J=G,q=P,G=D}if(Y!==JX)throw new Error("invert: does not exist");return EX(Z,Q)}function MV0($){let Q=$-JX,X=0;while(Q%uz===ZY)Q/=uz,X++;let Y=uz,Z=DO($);while(Y<$&&Vu(Z,Y))if(Y++>1000)throw new Error("Cannot find square root: probably non-prime P");if(X===1){let q=($+JX)/AI;return function G(z,M){let j=z.pow(M,q);if(!z.eql(z.sqr(j),M))throw new Error("Cannot find square root");return j}}let J=(Q+JX)/uz;return function q(G,z){if(!Vu(G,z))throw new Error("Cannot find square root");let M=X,j=G.pow(G.mul(G.ONE,Y),Q),P=G.pow(z,J),D=G.pow(z,Q);while(!G.eql(D,G.ONE)){if(G.eql(D,G.ZERO))return G.ZERO;let A=1;for(let H=G.sqr(D);A<M;A++){if(G.eql(H,G.ONE))break;H=G.sqr(H)}let I=G.pow(j,JX<<BigInt(M-A-1));j=G.sqr(I),P=G.mul(P,I),D=G.mul(D,j),M=A}return P}}function DV0($){if($%AI===WV0)return function Q(X,Y){let Z=($+JX)/AI,J=X.pow(Y,Z);if(!X.eql(X.sqr(J),Y))throw new Error("Cannot find square root");return J};if($%Wu===Uu)return function Q(X,Y){let Z=X.mul(Y,uz),J=($-Uu)/Wu,q=X.pow(Z,J),G=X.mul(Y,q),z=X.mul(X.mul(G,uz),q),M=X.mul(G,X.sub(z,X.ONE));if(!X.eql(X.sqr(M),Y))throw new Error("Cannot find square root");return M};if($%OV0===VV0);return MV0($)}function RI($){let Q={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},X=jV0.reduce((Y,Z)=>{return Y[Z]="function",Y},Q);return lz($,X)}function PV0($,Q,X){if(X<ZY)throw new Error("invalid exponent, negatives unsupported");if(X===ZY)return $.ONE;if(X===JX)return Q;let Y=$.ONE,Z=Q;while(X>ZY){if(X&JX)Y=$.mul(Y,Z);Z=$.sqr(Z),X>>=JX}return Y}function CI($,Q,X=!1){let Y=new Array(Q.length).fill(X?$.ZERO:void 0),Z=Q.reduce((q,G,z)=>{if($.is0(G))return q;return Y[z]=q,$.mul(q,G)},$.ONE),J=$.inv(Z);return Q.reduceRight((q,G,z)=>{if($.is0(G))return q;return Y[z]=$.mul(q,Y[z]),$.mul(q,G)},J),Y}function HV0($,Q){let X=($.ORDER-JX)/uz,Y=$.pow(Q,X),Z=$.eql(Y,$.ONE),J=$.eql(Y,$.ZERO),q=$.eql(Y,$.neg($.ONE));if(!Z&&!J&&!q)throw new Error("Cannot find square root: probably non-prime P");return Z?1:J?0:-1}function Vu($,Q){let X=HV0($,Q);return X===0||X===1}function LI($,Q){if(Q!==void 0)zO(Q);let X=Q!==void 0?Q:$.toString(2).length,Y=Math.ceil(X/8);return{nBitLength:X,nByteLength:Y}}function DO($,Q,X=!1,Y={}){if($<=ZY)throw new Error("invalid field: expected ORDER > 0, got "+$);let{nBitLength:Z,nByteLength:J}=LI($,Q);if(J>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let q,G=Object.freeze({ORDER:$,isLE:X,BITS:Z,BYTES:J,MASK:pz(Z),ZERO:ZY,ONE:JX,create:(z)=>EX(z,$),isValid:(z)=>{if(typeof z!=="bigint")throw new Error("invalid field element: expected bigint, got "+typeof z);return ZY<=z&&z<$},is0:(z)=>z===ZY,isOdd:(z)=>(z&JX)===JX,neg:(z)=>EX(-z,$),eql:(z,M)=>z===M,sqr:(z)=>EX(z*z,$),add:(z,M)=>EX(z+M,$),sub:(z,M)=>EX(z-M,$),mul:(z,M)=>EX(z*M,$),pow:(z,M)=>PV0(G,z,M),div:(z,M)=>EX(z*yH(M,$),$),sqrN:(z)=>z*z,addN:(z,M)=>z+M,subN:(z,M)=>z-M,mulN:(z,M)=>z*M,inv:(z)=>yH(z,$),sqrt:Y.sqrt||((z)=>{if(!q)q=DV0($);return q(G,z)}),toBytes:(z)=>X?HI(z,J):mz(z,J),fromBytes:(z)=>{if(z.length!==J)throw new Error("Field.fromBytes: expected "+J+" bytes, got "+z.length);return X?PI(z):Zq(z)},invertBatch:(z)=>CI(G,z),cmov:(z,M,j)=>j?M:z});return Object.freeze(G)}function Ou($){if(typeof $!=="bigint")throw new Error("field order must be bigint");let Q=$.toString(2).length;return Math.ceil(Q/8)}function wI($){let Q=Ou($);return Q+Math.ceil(Q/2)}function Mu($,Q,X=!1){let Y=$.length,Z=Ou(Q),J=wI(Q);if(Y<16||Y<J||Y>1024)throw new Error("expected "+J+"-1024 bytes of input, got "+Y);let q=X?PI($):Zq($),G=EX(q,Q-JX)+JX;return X?HI(G,Z):mz(G,Z)}var ZY,JX,uz,WV0,AI,Uu,Wu,VV0,OV0,jV0;var bH=y(()=>{Qq();gH();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */ZY=BigInt(0),JX=BigInt(1),uz=BigInt(2),WV0=BigInt(3),AI=BigInt(4),Uu=BigInt(5),Wu=BigInt(8),VV0=BigInt(9),OV0=BigInt(16);jV0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function TI($,Q){let X=Q.negate();return $?X:Q}function Pu($,Q){if(!Number.isSafeInteger($)||$<=0||$>Q)throw new Error("invalid window size, expected [1.."+Q+"], got W="+$)}function II($,Q){Pu($,Q);let X=Math.ceil(Q/$)+1,Y=2**($-1),Z=2**$,J=pz($),q=BigInt($);return{windows:X,windowSize:Y,mask:J,maxNumber:Z,shiftBy:q}}function ju($,Q,X){let{windowSize:Y,mask:Z,maxNumber:J,shiftBy:q}=X,G=Number($&Z),z=$>>q;if(G>Y)G-=J,z+=SI;let M=Q*Y,j=M+Math.abs(G)-1,P=G===0,D=G<0,A=Q%2!==0;return{nextN:z,offset:j,isZero:P,isNeg:D,isNegF:A,offsetF:M}}function NV0($,Q){if(!Array.isArray($))throw new Error("array expected");$.forEach((X,Y)=>{if(!(X instanceof Q))throw new Error("invalid point at index "+Y)})}function AV0($,Q){if(!Array.isArray($))throw new Error("array of scalars expected");$.forEach((X,Y)=>{if(!Q.isValid(X))throw new Error("invalid scalar at index "+Y)})}function BI($){return Hu.get($)||1}function Nu($,Q){return{constTimeNegate:TI,hasPrecomputes(X){return BI(X)!==1},unsafeLadder(X,Y,Z=$.ZERO){let J=X;while(Y>Du){if(Y&SI)Z=Z.add(J);J=J.double(),Y>>=SI}return Z},precomputeWindow(X,Y){let{windows:Z,windowSize:J}=II(Y,Q),q=[],G=X,z=G;for(let M=0;M<Z;M++){z=G,q.push(z);for(let j=1;j<J;j++)z=z.add(G),q.push(z);G=z.double()}return q},wNAF(X,Y,Z){let{ZERO:J,BASE:q}=$,G=II(X,Q);for(let z=0;z<G.windows;z++){let{nextN:M,offset:j,isZero:P,isNeg:D,isNegF:A,offsetF:I}=ju(Z,z,G);if(Z=M,P)q=q.add(TI(A,Y[I]));else J=J.add(TI(D,Y[j]))}return{p:J,f:q}},wNAFUnsafe(X,Y,Z,J=$.ZERO){let q=II(X,Q);for(let G=0;G<q.windows;G++){if(Z===Du)break;let{nextN:z,offset:M,isZero:j,isNeg:P}=ju(Z,G,q);if(Z=z,j)continue;else{let D=Y[M];J=J.add(P?D.negate():D)}}return J},getPrecomputes(X,Y,Z){let J=FI.get(Y);if(!J){if(J=this.precomputeWindow(Y,X),X!==1)FI.set(Y,Z(J))}return J},wNAFCached(X,Y,Z){let J=BI(X);return this.wNAF(J,this.getPrecomputes(J,X,Z),Y)},wNAFCachedUnsafe(X,Y,Z,J){let q=BI(X);if(q===1)return this.unsafeLadder(X,Y,J);return this.wNAFUnsafe(q,this.getPrecomputes(q,X,Z),Y,J)},setWindowSize(X,Y){Pu(Y,Q),Hu.set(X,Y),FI.delete(X)}}}function Au($,Q,X,Y){if(NV0(X,$),AV0(Y,Q),X.length!==Y.length)throw new Error("arrays of points and scalars must have equal length");let Z=$.ZERO,J=zu(BigInt(X.length)),q=J>12?J-3:J>4?J-2:J?2:1,G=pz(q),z=new Array(Number(G)+1).fill(Z),M=Math.floor((Q.BITS-1)/q)*q,j=Z;for(let P=M;P>=0;P-=q){z.fill(Z);for(let A=0;A<Y.length;A++){let I=Y[A],H=Number(I>>BigInt(P)&G);z[H]=z[H].add(X[A])}let D=Z;for(let A=z.length-1,I=Z;A>0;A--)I=I.add(z[A]),D=D.add(I);if(j=j.add(D),P!==0)for(let A=0;A<q;A++)j=j.double()}return j}function EI($){return RI($.Fp),lz($,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...LI($.n,$.nBitLength),...$,...{p:$.Fp.ORDER}})}var Du,SI,FI,Hu;var Ru=y(()=>{bH();gH();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Du=BigInt(0),SI=BigInt(1);FI=new WeakMap,Hu=new WeakMap});function Cu($){if($.lowS!==void 0)V6("lowS",$.lowS);if($.prehash!==void 0)V6("prehash",$.prehash)}function RV0($){let Q=EI($);lz(Q,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:X,Fp:Y,a:Z}=Q;if(X){if(!Y.eql(Z,Y.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof X!=="object"||typeof X.beta!=="bigint"||typeof X.splitScalar!=="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...Q})}function CV0($){let Q=RV0($),{Fp:X}=Q,Y=DO(Q.n,Q.nBitLength),Z=Q.toBytes||((H,C,B)=>{let S=C.toAffine();return MO(Uint8Array.from([4]),X.toBytes(S.x),X.toBytes(S.y))}),J=Q.fromBytes||((H)=>{let C=H.subarray(1),B=X.fromBytes(C.subarray(0,X.BYTES)),S=X.fromBytes(C.subarray(X.BYTES,2*X.BYTES));return{x:B,y:S}});function q(H){let{a:C,b:B}=Q,S=X.sqr(H),_=X.mul(S,H);return X.add(X.add(_,X.mul(H,C)),B)}if(!X.eql(X.sqr(Q.Gy),q(Q.Gx)))throw new Error("bad generator point: equation left != right");function G(H){return vH(H,gQ,Q.n)}function z(H){let{allowedPrivateKeyLengths:C,nByteLength:B,wrapPrivateKey:S,n:_}=Q;if(C&&typeof H!=="bigint"){if(hz(H))H=O6(H);if(typeof H!=="string"||!C.includes(H.length))throw new Error("invalid private key");H=H.padStart(B*2,"0")}let k;try{k=typeof H==="bigint"?H:Zq(eY("private key",H,B))}catch(f){throw new Error("invalid private key, expected hex or "+B+" bytes, got "+typeof H)}if(S)k=EX(k,_);return cz("private key",k,gQ,_),k}function M(H){if(!(H instanceof D))throw new Error("ProjectivePoint expected")}let j=NI((H,C)=>{let{px:B,py:S,pz:_}=H;if(X.eql(_,X.ONE))return{x:B,y:S};let k=H.is0();if(C==null)C=k?X.ONE:X.inv(_);let f=X.mul(B,C),g=X.mul(S,C),b=X.mul(_,C);if(k)return{x:X.ZERO,y:X.ZERO};if(!X.eql(b,X.ONE))throw new Error("invZ was invalid");return{x:f,y:g}}),P=NI((H)=>{if(H.is0()){if(Q.allowInfinityPoint&&!X.is0(H.py))return;throw new Error("bad point: ZERO")}let{x:C,y:B}=H.toAffine();if(!X.isValid(C)||!X.isValid(B))throw new Error("bad point: x or y not FE");let S=X.sqr(B),_=q(C);if(!X.eql(S,_))throw new Error("bad point: equation left != right");if(!H.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class D{constructor(H,C,B){if(H==null||!X.isValid(H))throw new Error("x required");if(C==null||!X.isValid(C)||X.is0(C))throw new Error("y required");if(B==null||!X.isValid(B))throw new Error("z required");this.px=H,this.py=C,this.pz=B,Object.freeze(this)}static fromAffine(H){let{x:C,y:B}=H||{};if(!H||!X.isValid(C)||!X.isValid(B))throw new Error("invalid affine point");if(H instanceof D)throw new Error("projective point not allowed");let S=(_)=>X.eql(_,X.ZERO);if(S(C)&&S(B))return D.ZERO;return new D(C,B,X.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(H){let C=CI(X,H.map((B)=>B.pz));return H.map((B,S)=>B.toAffine(C[S])).map(D.fromAffine)}static fromHex(H){let C=D.fromAffine(J(eY("pointHex",H)));return C.assertValidity(),C}static fromPrivateKey(H){return D.BASE.multiply(z(H))}static msm(H,C){return Au(D,Y,H,C)}_setWindowSize(H){I.setWindowSize(this,H)}assertValidity(){P(this)}hasEvenY(){let{y:H}=this.toAffine();if(X.isOdd)return!X.isOdd(H);throw new Error("Field doesn't support isOdd")}equals(H){M(H);let{px:C,py:B,pz:S}=this,{px:_,py:k,pz:f}=H,g=X.eql(X.mul(C,f),X.mul(_,S)),b=X.eql(X.mul(B,f),X.mul(k,S));return g&&b}negate(){return new D(this.px,X.neg(this.py),this.pz)}double(){let{a:H,b:C}=Q,B=X.mul(C,Lu),{px:S,py:_,pz:k}=this,f=X.ZERO,g=X.ZERO,b=X.ZERO,m=X.mul(S,S),l=X.mul(_,_),h=X.mul(k,k),c=X.mul(S,_);return c=X.add(c,c),b=X.mul(S,k),b=X.add(b,b),f=X.mul(H,b),g=X.mul(B,h),g=X.add(f,g),f=X.sub(l,g),g=X.add(l,g),g=X.mul(f,g),f=X.mul(c,f),b=X.mul(B,b),h=X.mul(H,h),c=X.sub(m,h),c=X.mul(H,c),c=X.add(c,b),b=X.add(m,m),m=X.add(b,m),m=X.add(m,h),m=X.mul(m,c),g=X.add(g,m),h=X.mul(_,k),h=X.add(h,h),m=X.mul(h,c),f=X.sub(f,m),b=X.mul(h,l),b=X.add(b,b),b=X.add(b,b),new D(f,g,b)}add(H){M(H);let{px:C,py:B,pz:S}=this,{px:_,py:k,pz:f}=H,g=X.ZERO,b=X.ZERO,m=X.ZERO,l=Q.a,h=X.mul(Q.b,Lu),c=X.mul(C,_),T=X.mul(B,k),K=X.mul(S,f),U=X.add(C,B),W=X.add(_,k);U=X.mul(U,W),W=X.add(c,T),U=X.sub(U,W),W=X.add(C,S);let V=X.add(_,f);return W=X.mul(W,V),V=X.add(c,K),W=X.sub(W,V),V=X.add(B,S),g=X.add(k,f),V=X.mul(V,g),g=X.add(T,K),V=X.sub(V,g),m=X.mul(l,W),g=X.mul(h,K),m=X.add(g,m),g=X.sub(T,m),m=X.add(T,m),b=X.mul(g,m),T=X.add(c,c),T=X.add(T,c),K=X.mul(l,K),W=X.mul(h,W),T=X.add(T,K),K=X.sub(c,K),K=X.mul(l,K),W=X.add(W,K),c=X.mul(T,W),b=X.add(b,c),c=X.mul(V,W),g=X.mul(U,g),g=X.sub(g,c),c=X.mul(U,T),m=X.mul(V,m),m=X.add(m,c),new D(g,b,m)}subtract(H){return this.add(H.negate())}is0(){return this.equals(D.ZERO)}wNAF(H){return I.wNAFCached(this,H,D.normalizeZ)}multiplyUnsafe(H){let{endo:C,n:B}=Q;cz("scalar",H,qq,B);let S=D.ZERO;if(H===qq)return S;if(this.is0()||H===gQ)return this;if(!C||I.hasPrecomputes(this))return I.wNAFCachedUnsafe(this,H,D.normalizeZ);let{k1neg:_,k1:k,k2neg:f,k2:g}=C.splitScalar(H),b=S,m=S,l=this;while(k>qq||g>qq){if(k&gQ)b=b.add(l);if(g&gQ)m=m.add(l);l=l.double(),k>>=gQ,g>>=gQ}if(_)b=b.negate();if(f)m=m.negate();return m=new D(X.mul(m.px,C.beta),m.py,m.pz),b.add(m)}multiply(H){let{endo:C,n:B}=Q;cz("scalar",H,gQ,B);let S,_;if(C){let{k1neg:k,k1:f,k2neg:g,k2:b}=C.splitScalar(H),{p:m,f:l}=this.wNAF(f),{p:h,f:c}=this.wNAF(b);m=I.constTimeNegate(k,m),h=I.constTimeNegate(g,h),h=new D(X.mul(h.px,C.beta),h.py,h.pz),S=m.add(h),_=l.add(c)}else{let{p:k,f}=this.wNAF(H);S=k,_=f}return D.normalizeZ([S,_])[0]}multiplyAndAddUnsafe(H,C,B){let S=D.BASE,_=(f,g)=>g===qq||g===gQ||!f.equals(S)?f.multiplyUnsafe(g):f.multiply(g),k=_(this,C).add(_(H,B));return k.is0()?void 0:k}toAffine(H){return j(this,H)}isTorsionFree(){let{h:H,isTorsionFree:C}=Q;if(H===gQ)return!0;if(C)return C(D,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:H,clearCofactor:C}=Q;if(H===gQ)return this;if(C)return C(D,this);return this.multiplyUnsafe(Q.h)}toRawBytes(H=!0){return V6("isCompressed",H),this.assertValidity(),Z(D,this,H)}toHex(H=!0){return V6("isCompressed",H),O6(this.toRawBytes(H))}}D.BASE=new D(Q.Gx,Q.Gy,X.ONE),D.ZERO=new D(X.ZERO,X.ONE,X.ZERO);let A=Q.nBitLength,I=Nu(D,Q.endo?Math.ceil(A/2):A);return{CURVE:Q,ProjectivePoint:D,normPrivateKeyToScalar:z,weierstrassEquation:q,isWithinCurveOrder:G}}function LV0($){let Q=EI($);return lz(Q,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...Q})}function Tu($){let Q=LV0($),{Fp:X,n:Y}=Q,Z=X.BYTES+1,J=2*X.BYTES+1;function q(U){return EX(U,Y)}function G(U){return yH(U,Y)}let{ProjectivePoint:z,normPrivateKeyToScalar:M,weierstrassEquation:j,isWithinCurveOrder:P}=CV0({...Q,toBytes(U,W,V){let N=W.toAffine(),L=X.toBytes(N.x),F=MO;if(V6("isCompressed",V),V)return F(Uint8Array.from([W.hasEvenY()?2:3]),L);else return F(Uint8Array.from([4]),L,X.toBytes(N.y))},fromBytes(U){let W=U.length,V=U[0],N=U.subarray(1);if(W===Z&&(V===2||V===3)){let L=Zq(N);if(!vH(L,gQ,X.ORDER))throw new Error("Point is not on curve");let F=j(L),R;try{R=X.sqrt(F)}catch(x){let E=x instanceof Error?": "+x.message:"";throw new Error("Point is not on curve"+E)}let O=(R&gQ)===gQ;if((V&1)===1!==O)R=X.neg(R);return{x:L,y:R}}else if(W===J&&V===4){let L=X.fromBytes(N.subarray(0,X.BYTES)),F=X.fromBytes(N.subarray(X.BYTES,2*X.BYTES));return{x:L,y:F}}else{let L=Z,F=J;throw new Error("invalid Point, expected length of "+L+", or uncompressed "+F+", got "+W)}}}),D=(U)=>O6(mz(U,Q.nByteLength));function A(U){let W=Y>>gQ;return U>W}function I(U){return A(U)?q(-U):U}let H=(U,W,V)=>Zq(U.slice(W,V));class C{constructor(U,W,V){if(cz("r",U,gQ,Y),cz("s",W,gQ,Y),this.r=U,this.s=W,V!=null)this.recovery=V;Object.freeze(this)}static fromCompact(U){let W=Q.nByteLength;return U=eY("compactSignature",U,W*2),new C(H(U,0,W),H(U,W,2*W))}static fromDER(U){let{r:W,s:V}=Jq.toSig(eY("DER",U));return new C(W,V)}assertValidity(){}addRecoveryBit(U){return new C(this.r,this.s,U)}recoverPublicKey(U){let{r:W,s:V,recovery:N}=this,L=g(eY("msgHash",U));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");let F=N===2||N===3?W+Q.n:W;if(F>=X.ORDER)throw new Error("recovery id 2 or 3 invalid");let R=(N&1)===0?"02":"03",O=z.fromHex(R+D(F)),w=G(F),x=q(-L*w),E=q(V*w),v=z.BASE.multiplyAndAddUnsafe(O,x,E);if(!v)throw new Error("point at infinify");return v.assertValidity(),v}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new C(this.r,q(-this.s),this.recovery):this}toDERRawBytes(){return OO(this.toDERHex())}toDERHex(){return Jq.hexFromSig(this)}toCompactRawBytes(){return OO(this.toCompactHex())}toCompactHex(){return D(this.r)+D(this.s)}}let B={isValidPrivateKey(U){try{return M(U),!0}catch(W){return!1}},normPrivateKeyToScalar:M,randomPrivateKey:()=>{let U=wI(Q.n);return Mu(Q.randomBytes(U),Q.n)},precompute(U=8,W=z.BASE){return W._setWindowSize(U),W.multiply(BigInt(3)),W}};function S(U,W=!0){return z.fromPrivateKey(U).toRawBytes(W)}function _(U){let W=hz(U),V=typeof U==="string",N=(W||V)&&U.length;if(W)return N===Z||N===J;if(V)return N===2*Z||N===2*J;if(U instanceof z)return!0;return!1}function k(U,W,V=!0){if(_(U))throw new Error("first arg must be private key");if(!_(W))throw new Error("second arg must be public key");return z.fromHex(W).multiply(M(U)).toRawBytes(V)}let f=Q.bits2int||function(U){if(U.length>8192)throw new Error("input is too large");let W=Zq(U),V=U.length*8-Q.nBitLength;return V>0?W>>BigInt(V):W},g=Q.bits2int_modN||function(U){return q(f(U))},b=pz(Q.nBitLength);function m(U){return cz("num < 2^"+Q.nBitLength,U,qq,b),mz(U,Q.nByteLength)}function l(U,W,V=h){if(["recovered","canonical"].some((s)=>(s in V)))throw new Error("sign() legacy options not supported");let{hash:N,randomBytes:L}=Q,{lowS:F,prehash:R,extraEntropy:O}=V;if(F==null)F=!0;if(U=eY("msgHash",U),Cu(V),R)U=eY("prehashed msgHash",N(U));let w=g(U),x=M(W),E=[m(x),m(w)];if(O!=null&&O!==!1){let s=O===!0?L(X.BYTES):O;E.push(eY("extraEntropy",s))}let v=MO(...E),p=w;function i(s){let X0=f(s);if(!P(X0))return;let n=G(X0),r=z.BASE.multiply(X0).toAffine(),Z0=q(r.x);if(Z0===qq)return;let e=q(n*q(p+Z0*x));if(e===qq)return;let Q0=(r.x===Z0?0:2)|Number(r.y&gQ),t=e;if(F&&A(e))t=I(e),Q0^=1;return new C(Z0,t,Q0)}return{seed:v,k2sig:i}}let h={lowS:Q.lowS,prehash:!1},c={lowS:Q.lowS,prehash:!1};function T(U,W,V=h){let{seed:N,k2sig:L}=l(U,W,V),F=Q;return Ku(F.hash.outputLen,F.nByteLength,F.hmac)(N,L)}z.BASE._setWindowSize(8);function K(U,W,V,N=c){let L=U;W=eY("msgHash",W),V=eY("publicKey",V);let{lowS:F,prehash:R,format:O}=N;if(Cu(N),"strict"in N)throw new Error("options.strict was renamed to lowS");if(O!==void 0&&O!=="compact"&&O!=="der")throw new Error("format must be compact or der");let w=typeof L==="string"||hz(L),x=!w&&!O&&typeof L==="object"&&L!==null&&typeof L.r==="bigint"&&typeof L.s==="bigint";if(!w&&!x)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let E=void 0,v;try{if(x)E=new C(L.r,L.s);if(w){try{if(O!=="compact")E=C.fromDER(L)}catch(Q0){if(!(Q0 instanceof Jq.Err))throw Q0}if(!E&&O!=="der")E=C.fromCompact(L)}v=z.fromHex(V)}catch(Q0){return!1}if(!E)return!1;if(F&&E.hasHighS())return!1;if(R)W=Q.hash(W);let{r:p,s:i}=E,s=g(W),X0=G(i),n=q(s*X0),r=q(p*X0),Z0=z.BASE.multiplyAndAddUnsafe(v,n,r)?.toAffine();if(!Z0)return!1;return q(Z0.x)===p}return{CURVE:Q,getPublicKey:S,getSharedSecret:k,sign:T,verify:K,ProjectivePoint:z,Signature:C,utils:B}}var wu,Jq,qq,gQ,Pb0,Lu,Hb0;var Iu=y(()=>{Ru();bH();gH();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */wu=class wu extends Error{constructor($=""){super($)}};Jq={Err:wu,_tlv:{encode:($,Q)=>{let{Err:X}=Jq;if($<0||$>256)throw new X("tlv.encode: wrong tag");if(Q.length&1)throw new X("tlv.encode: unpadded data");let Y=Q.length/2,Z=VO(Y);if(Z.length/2&128)throw new X("tlv.encode: long form length too big");let J=Y>127?VO(Z.length/2|128):"";return VO($)+J+Z+Q},decode($,Q){let{Err:X}=Jq,Y=0;if($<0||$>256)throw new X("tlv.encode: wrong tag");if(Q.length<2||Q[Y++]!==$)throw new X("tlv.decode: wrong tlv");let Z=Q[Y++],J=!!(Z&128),q=0;if(!J)q=Z;else{let z=Z&127;if(!z)throw new X("tlv.decode(long): indefinite length not supported");if(z>4)throw new X("tlv.decode(long): byte length is too big");let M=Q.subarray(Y,Y+z);if(M.length!==z)throw new X("tlv.decode: length bytes not complete");if(M[0]===0)throw new X("tlv.decode(long): zero leftmost byte");for(let j of M)q=q<<8|j;if(Y+=z,q<128)throw new X("tlv.decode(long): not minimal encoding")}let G=Q.subarray(Y,Y+q);if(G.length!==q)throw new X("tlv.decode: wrong value length");return{v:G,l:Q.subarray(Y+q)}}},_int:{encode($){let{Err:Q}=Jq;if($<qq)throw new Q("integer: negative integers are not allowed");let X=VO($);if(Number.parseInt(X[0],16)&8)X="00"+X;if(X.length&1)throw new Q("unexpected DER parsing assertion: unpadded hex");return X},decode($){let{Err:Q}=Jq;if($[0]&128)throw new Q("invalid signature integer: negative");if($[0]===0&&!($[1]&128))throw new Q("invalid signature integer: unnecessary leading zero");return Zq($)}},toSig($){let{Err:Q,_int:X,_tlv:Y}=Jq,Z=eY("signature",$),{v:J,l:q}=Y.decode(48,Z);if(q.length)throw new Q("invalid signature: left bytes after parsing");let{v:G,l:z}=Y.decode(2,J),{v:M,l:j}=Y.decode(2,z);if(j.length)throw new Q("invalid signature: left bytes after parsing");return{r:X.decode(G),s:X.decode(M)}},hexFromSig($){let{_tlv:Q,_int:X}=Jq,Y=Q.encode(2,X.encode($.r)),Z=Q.encode(2,X.encode($.s)),J=Y+Z;return Q.encode(48,J)}},qq=BigInt(0),gQ=BigInt(1),Pb0=BigInt(2),Lu=BigInt(3),Hb0=BigInt(4)});function wV0($){return{hash:$,hmac:(Q,...X)=>WI($,Q,GI(...X)),randomBytes:tl}}function Fu($,Q){let X=(Y)=>Tu({...$,...wV0(Y)});return{...X(Q),create:X}}var Bu=y(()=>{Yu();Qq();Iu();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */});function IV0($){let Q=_u,X=BigInt(3),Y=BigInt(6),Z=BigInt(11),J=BigInt(22),q=BigInt(23),G=BigInt(44),z=BigInt(88),M=$*$*$%Q,j=M*M*$%Q,P=$Z(j,X,Q)*j%Q,D=$Z(P,X,Q)*j%Q,A=$Z(D,_I,Q)*M%Q,I=$Z(A,Z,Q)*A%Q,H=$Z(I,J,Q)*I%Q,C=$Z(H,G,Q)*H%Q,B=$Z(C,z,Q)*C%Q,S=$Z(B,G,Q)*H%Q,_=$Z(S,X,Q)*j%Q,k=$Z(_,q,Q)*I%Q,f=$Z(k,Y,Q)*M%Q,g=$Z(f,_I,Q);if(!kI.eql(kI.sqr(g),$))throw new Error("Cannot find square root");return g}var _u,Su,TV0,_I,Eu=($,Q)=>($+Q/_I)/Q,kI,jO,Fb0,Bb0;var ku=y(()=>{KI();Bu();bH();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */_u=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Su=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),TV0=BigInt(1),_I=BigInt(2);kI=DO(_u,void 0,void 0,{sqrt:IV0}),jO=Fu({a:BigInt(0),b:BigInt(7),Fp:kI,n:Su,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:($)=>{let Q=Su,X=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),Y=-TV0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),Z=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),J=X,q=BigInt("0x100000000000000000000000000000000"),G=Eu(J*$,Q),z=Eu(-Y*$,Q),M=EX($-G*X-z*Z,Q),j=EX(-G*Y-z*J,Q),P=M>q,D=j>q;if(P)M=Q-M;if(D)j=Q-j;if(M>q||j>q)throw new Error("splitScalar: Endomorphism failed, k="+$);return{k1neg:P,k1:M,k2neg:D,k2:j}}}},fH),Fb0=BigInt(0),Bb0=jO.ProjectivePoint});var xu=y(()=>{ku()});var fu;var vu=y(()=>{Qq();fu=FJ});function xI($){let Q=$.startsWith("0x")?$.substring(2):$;return rl(Q)}function gu($){return(Q)=>{return fu(Q),$(Q)}}var fI=y(()=>{vu();Qq();Qq()});var yu;var bu=y(()=>{KI();fI();yu=gu(fH)});function A8($,Q){return new vI({code:"ETHEREUMJS_DEFAULT_ERROR_CODE"},$,Q)}var vI;var hu=y(()=>{vI=class vI extends Error{constructor($,Q,X){super(Q??$.code);if(this.type=$,X!==void 0)this.stack=X}getMetadata(){return this.type}toObject(){return{type:this.getMetadata(),message:this.message??"",stack:this.stack??"",className:this.constructor.name}}}});var pb0;var mu=y(()=>{hu();pb0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"))});var PO=y(()=>{mu()});function HO($,Q){if(typeof $!=="string"||!$.match(/^0x[0-9A-Fa-f]*$/))return!1;if(typeof Q!=="undefined"&&Q>0&&$.length!==2+2*Q)return!1;return!0}function gI($){let Q=$;if(typeof Q!=="string")throw A8(`[padToEven] value must be type 'string', received ${typeof Q}`);if(Q.length%2)Q=`0${Q}`;return Q}var cu=($)=>{if(typeof $!=="string")throw A8(`[stripHexPrefix] input must be type 'string', received ${typeof $}`);return HO($)?$.slice(2):$};var yI=y(()=>{PO()});var pu,FV0,_X=($)=>{if(!$.startsWith("0x"))throw A8("input string must be 0x prefixed");return xI(gI(cu($)))},BV0=($)=>{if($.startsWith("0x"))throw A8("input string cannot be 0x prefixed");return xI(gI($))},M6=($)=>{return`0x${FV0($)}`},bI,D6=($,Q=!1)=>{if(Q)$.reverse();let X=M6($);if(X==="0x")return pu;if(X.length===4)return bI[$[0]];if(X.length===6)return bI[$[0]*256+$[1]];return BigInt(X)},SV0=($)=>{if(!Number.isSafeInteger($)||$<0)throw A8(`Received an invalid integer type: ${$}`);return`0x${$.toString(16)}`},Gq=($)=>{let Q=SV0($);return _X(Q)},lu=($)=>{if($===null||$===void 0)return new Uint8Array;if(Array.isArray($)||$ instanceof Uint8Array)return Uint8Array.from($);if(typeof $==="string"){if(!HO($))throw A8(`Cannot convert string to Uint8Array. toBytes only supports 0x-prefixed hex strings and this string was given: ${$}`);return _X($)}if(typeof $==="number")return Gq($);if(typeof $==="bigint"){if($<pu)throw A8(`Cannot convert negative bigint to Uint8Array. Given: ${$}`);let Q=$.toString(16);if(Q.length%2)Q="0"+Q;return BV0(Q)}if($.toBytes!==void 0)return $.toBytes();throw A8("invalid type")},j6=(...$)=>{if($.length===1)return $[0];let Q=$.reduce((Y,Z)=>Y+Z.length,0),X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X};var dz=y(()=>{fI();PO();yI();pu=BigInt(0),FV0=xH,bI=[];for(let $=0;$<=65535;$++)bI[$]=BigInt($)});var Yh0,Zh0,Jh0,qh0,Gh0,zh0,EV0="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",Kh0,_V0="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",Uh0,kV0="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",Wh0,Vh0,Oh0,Mh0,H7,Dh0,xV0,jh0,Ph0,Hh0,Nh0,Ah0,Rh0,Ch0,Lh0,wh0,Th0,fV0,Ih0,Fh0,Bh0,Sh0,Eh0,_h0,kh0,xh0;var uu=y(()=>{xu();bu();dz();Yh0=BigInt("0xffffffffffffffff"),Zh0=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Jh0=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),qh0=jO.CURVE.n,Gh0=jO.CURVE.n/BigInt(2),zh0=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),Kh0=_X(EV0),Uh0=_X(_V0),Wh0=_X(kV0),Vh0=yu(new Uint8Array),Oh0=Uint8Array.from([128]),Mh0=BigInt(-1),H7=BigInt(0),Dh0=BigInt(1),xV0=BigInt(2),jh0=BigInt(3),Ph0=BigInt(7),Hh0=BigInt(8),Nh0=BigInt(27),Ah0=BigInt(28),Rh0=BigInt(31),Ch0=BigInt(32),Lh0=BigInt(64),wh0=BigInt(128),Th0=BigInt(255),fV0=BigInt(256),Ih0=BigInt(96),Fh0=BigInt(100),Bh0=BigInt(160),Sh0=BigInt(224),Eh0=BigInt(79228162514264340000000000000),_h0=BigInt(1461501637330903000000000000000000000000000000000),kh0=BigInt(26959946667150640000000000000000000000000000000000000000000000000000),xh0=xV0**fV0});var vh0,gh0;var du=y(()=>{vh0=BigInt(1e9),gh0=BigInt(1000000000000000000)});var bh0;var iu=y(()=>{bh0=new Uint8Array(0)});var nu=()=>{};var ou=()=>{};function hH($,Q){if($===null)return null;if($===void 0)return;if(typeof $==="string"&&!HO($))throw A8(`A string must be provided with a 0x-prefix, given: ${$}`);else if(typeof $==="number"&&!Number.isSafeInteger($))throw A8("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");let X=lu($);switch(Q){case N7.Uint8Array:return X;case N7.BigInt:return D6(X);case N7.Number:{let Y=D6(X);if(Y>BigInt(Number.MAX_SAFE_INTEGER))throw A8("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(Y)}case N7.PrefixedHexString:return M6(X);default:throw A8("unknown outputType")}}var N7;var ru=y(()=>{dz();PO();yI();N7={Number:0,BigInt:1,Uint8Array:2,PrefixedHexString:3}});var su=()=>{};var au=()=>{};var ah0;var eu=y(()=>{dz();ah0=_X("0x05")});var $d,$m0,Qm0,hV0=31,Xm0;var Qd=y(()=>{dz();$d={BasicData:0,CodeHash:1},$m0=Gq($d.BasicData),Qm0=Gq($d.CodeHash),Xm0=BigInt(256)**BigInt(hV0)});var mV0=32,Xd=4096,cV0,pV0=2,Zm0,Jm0;var Yd=y(()=>{cV0=32*Xd,Zm0=cV0*pV0-1,Jm0=mV0*Xd});var Zd=()=>{};var Jd=()=>{};var qd=()=>{};var Gd=()=>{};var zd,Wm0,Vm0,lV0=31,Om0;var Kd=y(()=>{dz();zd={BasicData:0,CodeHash:1},Wm0=Gq(zd.BasicData),Vm0=Gq(zd.CodeHash),Om0=BigInt(256)**BigInt(lV0)});var hI=y(()=>{uu();PO();du();iu();nu();ou();su();au();dz();ru();eu();Qd();Yd();Zd();Jd();qd();Gd();Kd()});var Wd=d$((gm0,mI)=>{var uV0=Object.prototype.hasOwnProperty,JY="~";function NO(){}if(Object.create){if(NO.prototype=Object.create(null),!new NO().__proto__)JY=!1}function dV0($,Q,X){this.fn=$,this.context=Q,this.once=X||!1}function Ud($,Q,X,Y,Z){if(typeof X!=="function")throw new TypeError("The listener must be a function");var J=new dV0(X,Y||$,Z),q=JY?JY+Q:Q;if(!$._events[q])$._events[q]=J,$._eventsCount++;else if(!$._events[q].fn)$._events[q].push(J);else $._events[q]=[$._events[q],J];return $}function mH($,Q){if(--$._eventsCount===0)$._events=new NO;else delete $._events[Q]}function kX(){this._events=new NO,this._eventsCount=0}kX.prototype.eventNames=function $(){var Q=[],X,Y;if(this._eventsCount===0)return Q;for(Y in X=this._events)if(uV0.call(X,Y))Q.push(JY?Y.slice(1):Y);if(Object.getOwnPropertySymbols)return Q.concat(Object.getOwnPropertySymbols(X));return Q};kX.prototype.listeners=function $(Q){var X=JY?JY+Q:Q,Y=this._events[X];if(!Y)return[];if(Y.fn)return[Y.fn];for(var Z=0,J=Y.length,q=new Array(J);Z<J;Z++)q[Z]=Y[Z].fn;return q};kX.prototype.listenerCount=function $(Q){var X=JY?JY+Q:Q,Y=this._events[X];if(!Y)return 0;if(Y.fn)return 1;return Y.length};kX.prototype.emit=function $(Q,X,Y,Z,J,q){var G=JY?JY+Q:Q;if(!this._events[G])return!1;var z=this._events[G],M=arguments.length,j,P;if(z.fn){if(z.once)this.removeListener(Q,z.fn,void 0,!0);switch(M){case 1:return z.fn.call(z.context),!0;case 2:return z.fn.call(z.context,X),!0;case 3:return z.fn.call(z.context,X,Y),!0;case 4:return z.fn.call(z.context,X,Y,Z),!0;case 5:return z.fn.call(z.context,X,Y,Z,J),!0;case 6:return z.fn.call(z.context,X,Y,Z,J,q),!0}for(P=1,j=new Array(M-1);P<M;P++)j[P-1]=arguments[P];z.fn.apply(z.context,j)}else{var D=z.length,A;for(P=0;P<D;P++){if(z[P].once)this.removeListener(Q,z[P].fn,void 0,!0);switch(M){case 1:z[P].fn.call(z[P].context);break;case 2:z[P].fn.call(z[P].context,X);break;case 3:z[P].fn.call(z[P].context,X,Y);break;case 4:z[P].fn.call(z[P].context,X,Y,Z);break;default:if(!j)for(A=1,j=new Array(M-1);A<M;A++)j[A-1]=arguments[A];z[P].fn.apply(z[P].context,j)}}}return!0};kX.prototype.on=function $(Q,X,Y){return Ud(this,Q,X,Y,!1)};kX.prototype.once=function $(Q,X,Y){return Ud(this,Q,X,Y,!0)};kX.prototype.removeListener=function $(Q,X,Y,Z){var J=JY?JY+Q:Q;if(!this._events[J])return this;if(!X)return mH(this,J),this;var q=this._events[J];if(q.fn){if(q.fn===X&&(!Z||q.once)&&(!Y||q.context===Y))mH(this,J)}else{for(var G=0,z=[],M=q.length;G<M;G++)if(q[G].fn!==X||Z&&!q[G].once||Y&&q[G].context!==Y)z.push(q[G]);if(z.length)this._events[J]=z.length===1?z[0]:z;else mH(this,J)}return this};kX.prototype.removeAllListeners=function $(Q){var X;if(Q){if(X=JY?JY+Q:Q,this._events[X])mH(this,X)}else this._events=new NO,this._eventsCount=0;return this};kX.prototype.off=kX.prototype.removeListener;kX.prototype.addListener=kX.prototype.on;kX.prefixed=JY;kX.EventEmitter=kX;if(typeof mI!=="undefined")mI.exports=kX});var A7;var cH=y(()=>{A7=RX(Wd(),1)});var cI,iV0=($,Q)=>{let X=Q===0?0:~~Q^-1;for(let Y=0;Y<$.length;Y++)X=cI[(X^$[Y])&255]^X>>>8;return X^-1},Vd=($,Q)=>{return iV0($,Q)>>>0};var Od=y(()=>{cI=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918000,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];if(typeof Int32Array!=="undefined")cI=new Int32Array(cI)});var P6,mm0,cm0,j0,AO,zq;var pH=y(()=>{hI();P6={Mainnet:1,Sepolia:11155111,Holesky:17000,Hoodi:560048,Kaustinen6:69420},mm0=Object.entries(P6).reduce(($,[Q,X])=>{return $[X]=Q,$},{}),cm0={[P6.Mainnet]:{name:"mainnet",blockNumber:H7,stateRoot:_X("0xd7f8974fb5ac78d9ac099b9ad5018bedc2ce0a72dad1827a1709da30580f0544")},[P6.Sepolia]:{name:"sepolia",blockNumber:H7,stateRoot:_X("0x5eb6e371a698b8d68f665192350ffcecbbbf322916f4b51bd79bb6887da3f494")},[P6.Holesky]:{name:"holesky",blockNumber:H7,stateRoot:_X("0x69d8c9d72f6fa4ad42d4702b433707212f90db395eb54dc20bc85de253788783")},[P6.Hoodi]:{name:"hoodi",blockNumber:H7,stateRoot:_X("0xda87d7f5f91c51508791bbcbd4aa5baf04917830b86985eeb9ad3d5bfb657576")},[P6.Kaustinen6]:{name:"kaustinen6",blockNumber:H7,stateRoot:_X("0x1fbf85345a3cbba9a6d44f991b721e55620a22397c2a93ee8d5011136ac300ee")}},j0={Chainstart:"chainstart",Homestead:"homestead",Dao:"dao",TangerineWhistle:"tangerineWhistle",SpuriousDragon:"spuriousDragon",Byzantium:"byzantium",Constantinople:"constantinople",Petersburg:"petersburg",Istanbul:"istanbul",MuirGlacier:"muirGlacier",Berlin:"berlin",London:"london",ArrowGlacier:"arrowGlacier",GrayGlacier:"grayGlacier",MergeNetsplitBlock:"mergeNetsplitBlock",Paris:"paris",Shanghai:"shanghai",Cancun:"cancun",Prague:"prague",Osaka:"osaka",Verkle:"verkle"},AO={ProofOfStake:"pos",ProofOfWork:"pow",ProofOfAuthority:"poa"},zq={Ethash:"ethash",Clique:"clique",Casper:"casper"}});var H6;var Md=y(()=>{pH();H6={1:{minimumHardfork:j0.Chainstart},606:{minimumHardfork:j0.Chainstart},608:{minimumHardfork:j0.Homestead},607:{minimumHardfork:j0.TangerineWhistle},609:{minimumHardfork:j0.SpuriousDragon},1013:{minimumHardfork:j0.Constantinople},1716:{minimumHardfork:j0.Constantinople},1679:{minimumHardfork:j0.Constantinople},2384:{minimumHardfork:j0.Istanbul},663:{minimumHardfork:j0.Chainstart,requiredEIPs:[3540,5450]},1153:{minimumHardfork:j0.Chainstart},1559:{minimumHardfork:j0.Berlin,requiredEIPs:[2930]},2565:{minimumHardfork:j0.Byzantium},2537:{minimumHardfork:j0.Chainstart},2718:{minimumHardfork:j0.Chainstart},2929:{minimumHardfork:j0.Chainstart},2930:{minimumHardfork:j0.Istanbul,requiredEIPs:[2718,2929]},2935:{minimumHardfork:j0.Chainstart},3198:{minimumHardfork:j0.London},3529:{minimumHardfork:j0.Berlin,requiredEIPs:[2929]},3540:{minimumHardfork:j0.London,requiredEIPs:[3541,3860]},3541:{minimumHardfork:j0.Berlin},3554:{minimumHardfork:j0.MuirGlacier},3607:{minimumHardfork:j0.Chainstart},3651:{minimumHardfork:j0.London,requiredEIPs:[2929]},3670:{minimumHardfork:j0.London,requiredEIPs:[3540]},3675:{minimumHardfork:j0.London},3855:{minimumHardfork:j0.Chainstart},3860:{minimumHardfork:j0.SpuriousDragon},4200:{minimumHardfork:j0.London,requiredEIPs:[3540,3670]},4345:{minimumHardfork:j0.London},4399:{minimumHardfork:j0.London},4750:{minimumHardfork:j0.London,requiredEIPs:[3540,3670,5450]},4788:{minimumHardfork:j0.Cancun},4844:{minimumHardfork:j0.Paris,requiredEIPs:[1559,2718,2930,4895]},4895:{minimumHardfork:j0.Paris},5133:{minimumHardfork:j0.GrayGlacier},5450:{minimumHardfork:j0.London,requiredEIPs:[3540,3670,4200,4750]},5656:{minimumHardfork:j0.Shanghai},6110:{minimumHardfork:j0.Cancun,requiredEIPs:[7685]},6206:{minimumHardfork:j0.London,requiredEIPs:[4750,5450]},6780:{minimumHardfork:j0.London},6800:{minimumHardfork:j0.London},7002:{minimumHardfork:j0.Paris,requiredEIPs:[7685]},7069:{minimumHardfork:j0.Berlin,requiredEIPs:[2929]},7251:{minimumHardfork:j0.Paris,requiredEIPs:[7685]},7480:{minimumHardfork:j0.London,requiredEIPs:[3540,3670]},7516:{minimumHardfork:j0.Paris,requiredEIPs:[4844]},7620:{minimumHardfork:j0.London,requiredEIPs:[3540,3541,3670]},7623:{minimumHardfork:j0.Chainstart,requiredEIPs:[]},7685:{minimumHardfork:j0.Cancun,requiredEIPs:[3675]},7691:{minimumHardfork:j0.Paris,requiredEIPs:[4844]},7692:{minimumHardfork:j0.Cancun,requiredEIPs:[663,3540,3670,4200,4750,5450,6206,7069,7480,7620,7698]},7698:{minimumHardfork:j0.London,requiredEIPs:[3540,7620]},7702:{minimumHardfork:j0.Cancun,requiredEIPs:[2718,2929,2930]},7709:{minimumHardfork:j0.Chainstart,requiredEIPs:[2935]},7864:{minimumHardfork:j0.London}}});var Dd;var jd=y(()=>{Dd={chainstart:{eips:[1]},homestead:{eips:[606]},dao:{eips:[]},tangerineWhistle:{eips:[608]},spuriousDragon:{eips:[607]},byzantium:{eips:[609]},constantinople:{eips:[1013]},petersburg:{eips:[1716]},istanbul:{eips:[1679]},muirGlacier:{eips:[2384]},berlin:{eips:[2565,2929,2718,2930]},london:{eips:[1559,3198,3529,3541]},arrowGlacier:{eips:[4345]},grayGlacier:{eips:[5133]},paris:{consensus:{type:"pos",algorithm:"casper",casper:{}},eips:[3675,4399]},mergeNetsplitBlock:{eips:[]},shanghai:{eips:[3651,3855,3860,4895]},cancun:{eips:[1153,4844,4788,5656,6780,7516]},prague:{eips:[2537,2935,6110,7002,7251,7623,7685,7691,7702]},osaka:{eips:[663,3540,3670,4200,4750,5450,6206,7069,7480,7620,7692,7698]},verkle:{eips:[7709,4762,6800]}}});class E9{constructor($){if(this._eips=[],this._paramsCache={},this._activatedEIPsCache=[],this.events=new A7.default,this._chainParams=JSON.parse(JSON.stringify($.chain)),this.DEFAULT_HARDFORK=this._chainParams.defaultHardfork??j0.Prague,this.HARDFORK_CHANGES=this.hardforks().map((Q)=>[Q.name,(this._chainParams.customHardforks&&this._chainParams.customHardforks[Q.name])??Dd[Q.name]]),this._hardfork=this.DEFAULT_HARDFORK,this._params=$.params?JSON.parse(JSON.stringify($.params)):{},$.hardfork!==void 0)this.setHardfork($.hardfork);if($.eips)this.setEIPs($.eips);if(this.customCrypto=$.customCrypto??{},Object.keys(this._paramsCache).length===0)this._buildParamsCache(),this._buildActivatedEIPsCache()}updateParams($){for(let[Q,X]of Object.entries($))if(!(Q in this._params))this._params[Q]=JSON.parse(JSON.stringify(X));else this._params[Q]=JSON.parse(JSON.stringify({...this._params[Q],...$[Q]}));this._buildParamsCache()}resetParams($){this._params=JSON.parse(JSON.stringify($)),this._buildParamsCache()}setHardfork($){let Q=!1;for(let X of this.HARDFORK_CHANGES)if(X[0]===$){if(this._hardfork!==$)this._hardfork=$,this._buildParamsCache(),this._buildActivatedEIPsCache(),this.events.emit("hardforkChanged",$);Q=!0}if(!Q)throw A8(`Hardfork with name ${$} not supported`)}getHardforkBy($){let Q=hH($.blockNumber,N7.BigInt),X=hH($.timestamp,N7.BigInt),Y=this.hardforks().filter((G)=>G.block!==null||G.timestamp!==void 0),Z=Y.findIndex((G)=>Q!==void 0&&G.block!==null&&BigInt(G.block)>Q||X!==void 0&&G.timestamp!==void 0&&BigInt(G.timestamp)>X);if(Z===-1)Z=Y.length;else if(Z===0)throw Error("Must have at least one hardfork at block 0");if(X===void 0){let G=Y.slice(0,Z).reverse().findIndex((z)=>z.block!==null);Z=Z-G}Z=Z-1;let J=Z;for(;Z<Y.length-1;Z++)if(Y[Z].block!==Y[Z+1].block||Y[Z].timestamp!==Y[Z+1].timestamp)break;if(X!==void 0){if(Y.slice(0,J).reduce((M,j)=>Math.max(Number(j.timestamp??"0"),M),0)>X)throw Error("Maximum HF determined by timestamp is lower than the block number HF");if(Y.slice(Z+1).reduce((M,j)=>Math.min(Number(j.timestamp??X),M),Number(X))<X)throw Error("Maximum HF determined by block number is lower than timestamp HF")}return Y[Z].name}setHardforkBy($){let Q=this.getHardforkBy($);return this.setHardfork(Q),Q}_getHardfork($){let Q=this.hardforks();for(let X of Q)if(X.name===$)return X;return null}setEIPs($=[]){for(let Q of $){if(!(Q in H6))throw A8(`${Q} not supported`);let X=this.gteHardfork(H6[Q].minimumHardfork);if(!X)throw A8(`${Q} cannot be activated on hardfork ${this.hardfork()}, minimumHardfork: ${X}`)}this._eips=$,this._buildParamsCache(),this._buildActivatedEIPsCache();for(let Q of $)if(H6[Q].requiredEIPs!==void 0){for(let X of H6[Q].requiredEIPs)if(!($.includes(X)||this.isActivatedEIP(X)))throw A8(`${Q} requires EIP ${X}, but is not included in the EIP list`)}}_mergeWithParamsCache($){this._paramsCache={...this._paramsCache,...$}}_buildParamsCache(){this._paramsCache={};let $=this.hardfork();for(let Q of this.HARDFORK_CHANGES){if("eips"in Q[1]){let X=Q[1].eips??[];for(let Y of X)this._mergeWithParamsCache(this._params[Y]??{})}if(this._mergeWithParamsCache(Q[1].params??{}),Q[0]===$)break}for(let Q of this._eips)this._mergeWithParamsCache(this._params[Q]??{})}_buildActivatedEIPsCache(){this._activatedEIPsCache=[];for(let[$,Q]of this.HARDFORK_CHANGES)if(this.gteHardfork($)&&"eips"in Q)this._activatedEIPsCache=this._activatedEIPsCache.concat(Q.eips??[]);this._activatedEIPsCache=this._activatedEIPsCache.concat(this._eips)}param($){if(!($ in this._paramsCache))throw A8(`Missing parameter value for ${$}`);let Q=this._paramsCache[$];return BigInt(Q??0)}paramByHardfork($,Q){let X;for(let Y of this.HARDFORK_CHANGES){if("eips"in Y[1]){let Z=Y[1].eips;for(let J of Z){let G=this._params[J]?.[$];if(G!==void 0)X=G}}else{let Z=Y[1].params?.[$];if(Z!==void 0)X=Z}if(Y[0]===Q)break}if(X===void 0)throw A8(`Missing parameter value for ${$}`);return BigInt(X??0)}paramByEIP($,Q){if(!(Q in H6))throw A8(`${Q} not supported`);let X=this._params[Q];if(X?.[$]===void 0)throw A8(`Missing parameter value for ${$}`);let Y=X[$];return BigInt(Y??0)}paramByBlock($,Q,X){let Y=this.getHardforkBy({blockNumber:Q,timestamp:X});return this.paramByHardfork($,Y)}isActivatedEIP($){if(this._activatedEIPsCache.includes($))return!0;return!1}hardforkIsActiveOnBlock($,Q){Q=hH(Q,N7.BigInt),$=$??this._hardfork;let X=this.hardforkBlock($);if(typeof X==="bigint"&&X!==H7&&Q>=X)return!0;return!1}activeOnBlock($){return this.hardforkIsActiveOnBlock(null,$)}hardforkGteHardfork($,Q){$=$??this._hardfork;let X=this.hardforks(),Y=-1,Z=-1,J=0;for(let q of X){if(q.name===$)Y=J;if(q.name===Q)Z=J;J+=1}return Y>=Z&&Z!==-1}gteHardfork($){return this.hardforkGteHardfork(null,$)}hardforkBlock($){$=$??this._hardfork;let Q=this._getHardfork($)?.block;if(Q===void 0||Q===null)return null;return BigInt(Q)}hardforkTimestamp($){$=$??this._hardfork;let Q=this._getHardfork($)?.timestamp;if(Q===void 0||Q===null)return null;return BigInt(Q)}eipBlock($){for(let Q of this.HARDFORK_CHANGES){let X=Q[1];if("eips"in X){if(X.eips.includes($))return this.hardforkBlock(Q[0])}}return null}eipTimestamp($){for(let Q of this.HARDFORK_CHANGES){let X=Q[1];if("eips"in X){if(X.eips.includes($))return this.hardforkTimestamp(Q[0])}}return null}nextHardforkBlockOrTimestamp($){$=$??this._hardfork;let Q=this.hardforks(),X=Q.findIndex((q)=>q.name===$);if($===j0.Paris)X-=1;if(X<0)return null;let Y=Q[X].timestamp??Q[X].block;Y=Y!==null&&Y!==void 0?Number(Y):null;let Z=Q.slice(X+1).find((q)=>{let G=q.timestamp??q.block;return G=G!==null&&G!==void 0?Number(G):null,q.name!==j0.Paris&&G!==null&&G!==void 0&&G!==Y});if(Z===void 0)return null;let J=Z.timestamp??Z.block;if(J===null||J===void 0)return null;return BigInt(J)}_calcForkHash($,Q){let X=new Uint8Array(0),Y=0;for(let q of this.hardforks()){let{block:G,timestamp:z,name:M}=q,j=z??G;if(j=j!==null?Number(j):null,typeof j==="number"&&j!==0&&j!==Y&&M!==j0.Paris){let P=_X(`0x${j.toString(16).padStart(16,"0")}`);X=j6(X,P),Y=j}if(q.name===$)break}let Z=j6(Q,X);return M6(Gq(Vd(Z)>>>0))}forkHash($,Q){$=$??this._hardfork;let X=this._getHardfork($);if(X===null||X?.block===null&&X?.timestamp===void 0)throw A8("No fork hash calculation possible for future hardfork");if(X?.forkHash!==null&&X?.forkHash!==void 0)return X.forkHash;if(!Q)throw A8("genesisHash required for forkHash calculation");return this._calcForkHash($,Q)}hardforkForForkHash($){let Q=this.hardforks().filter((X)=>{return X.forkHash===$});return Q.length>=1?Q[Q.length-1]:null}setForkHashes($){for(let Q of this.hardforks()){let X=Q.timestamp??Q.block;if((Q.forkHash===null||Q.forkHash===void 0)&&X!==null&&X!==void 0)Q.forkHash=this.forkHash(Q.name,$)}}genesis(){return this._chainParams.genesis}hardforks(){let $=this._chainParams.hardforks;if(this._chainParams.customHardforks!==void 0)this._chainParams.customHardforks;return $}bootstrapNodes(){return this._chainParams.bootstrapNodes}dnsNetworks(){return this._chainParams.dnsNetworks}hardfork(){return this._hardfork}chainId(){return BigInt(this._chainParams.chainId)}chainName(){return this._chainParams.name}eips(){return this._eips}consensusType(){let $=this.hardfork(),Q;for(let X of this.HARDFORK_CHANGES){if("consensus"in X[1])Q=X[1].consensus.type;if(X[0]===$)break}return Q??this._chainParams.consensus.type}consensusAlgorithm(){let $=this.hardfork(),Q;for(let X of this.HARDFORK_CHANGES){if("consensus"in X[1])Q=X[1].consensus.algorithm;if(X[0]===$)break}return Q??this._chainParams.consensus.algorithm}consensusConfig(){let $=this.hardfork(),Q;for(let X of this.HARDFORK_CHANGES){if("consensus"in X[1]){let Y=X[1],Z=Y.consensus.algorithm;Q=Y.consensus[Z]}if(X[0]===$)break}return Q??this._chainParams.consensus[this.consensusAlgorithm()]??{}}copy(){let $=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return $.events=new A7.default,$}}var Pd=y(()=>{hI();cH();Od();Md();pH();jd()});var Hd=()=>{};var Nd=()=>{};var N6,A6;var Ad=y(()=>{N6={BasicData:"basicData",CodeHash:"codeHash",Code:"code",Storage:"storage"},A6={BasicData:"basicData",CodeHash:"codeHash",Code:"code",Storage:"storage"}});var Rd=()=>{};var Cd=()=>{};var qX=y(()=>{ul();Pd();Hd();pH();Nd();Ad();Rd();Cd()});var iz;var Ld=y(()=>{iz=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function nV0($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function R7($){if(!Number.isSafeInteger($)||$<0)throw new Error("positive integer expected, got "+$)}function QZ($,...Q){if(!nV0($))throw new Error("Uint8Array expected");if(Q.length>0&&!Q.includes($.length))throw new Error("Uint8Array expected of length "+Q+", got length="+$.length)}function Td($){if(typeof $!=="function"||typeof $.create!=="function")throw new Error("Hash should be wrapped by utils.createHasher");R7($.outputLen),R7($.blockLen)}function BJ($,Q=!0){if($.destroyed)throw new Error("Hash instance has been destroyed");if(Q&&$.finished)throw new Error("Hash#digest() has already been called")}function RO($,Q){QZ($);let X=Q.outputLen;if($.length<X)throw new Error("digestInto() expects output buffer of length at least "+X)}function Id($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function SJ(...$){for(let Q=0;Q<$.length;Q++)$[Q].fill(0)}function CO($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function _9($,Q){return $<<32-Q|$>>>Q}function rV0($){return $<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255}function sV0($){for(let Q=0;Q<$.length;Q++)$[Q]=rV0($[Q]);return $}function lH($){if(QZ($),Fd)return $.toHex();let Q="";for(let X=0;X<$.length;X++)Q+=aV0[$[X]];return Q}function wd($){if($>=Kq._0&&$<=Kq._9)return $-Kq._0;if($>=Kq.A&&$<=Kq.F)return $-(Kq.A-10);if($>=Kq.a&&$<=Kq.f)return $-(Kq.a-10);return}function Bd($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(Fd)return Uint8Array.fromHex($);let Q=$.length,X=Q/2;if(Q%2)throw new Error("hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=wd($.charCodeAt(J)),G=wd($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw new Error('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function LO($){if(typeof $!=="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function nz($){if(typeof $==="string")$=LO($);return QZ($),$}function lI(...$){let Q=0;for(let Y=0;Y<$.length;Y++){let Z=$[Y];QZ(Z),Q+=Z.length}let X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}class oz{}function uH($){let Q=(Y)=>$().update(nz(Y)).digest(),X=$();return Q.outputLen=X.outputLen,Q.blockLen=X.blockLen,Q.create=()=>$(),Q}function Sd($=32){if(iz&&typeof iz.getRandomValues==="function")return iz.getRandomValues(new Uint8Array($));if(iz&&typeof iz.randomBytes==="function")return Uint8Array.from(iz.randomBytes($));throw new Error("crypto.getRandomValues must be defined")}var oV0,pI,Fd,aV0,Kq;var EJ=y(()=>{Ld();/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */oV0=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();pI=oV0?($)=>$:sV0,Fd=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")(),aV0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));Kq={_0:48,_9:57,A:65,F:70,a:97,f:102}});function tV0($,Q,X,Y){if(typeof $.setBigUint64==="function")return $.setBigUint64(Q,X,Y);let Z=BigInt(32),J=BigInt(4294967295),q=Number(X>>Z&J),G=Number(X&J),z=Y?4:0,M=Y?0:4;$.setUint32(Q+z,q,Y),$.setUint32(Q+M,G,Y)}function Ed($,Q,X){return $&Q^~$&X}function _d($,Q,X){return $&Q^$&X^Q&X}var uI,Uq;var kd=y(()=>{EJ();uI=class uI extends oz{constructor($,Q,X,Y){super();this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=$,this.outputLen=Q,this.padOffset=X,this.isLE=Y,this.buffer=new Uint8Array($),this.view=CO(this.buffer)}update($){BJ(this),$=nz($),QZ($);let{view:Q,buffer:X,blockLen:Y}=this,Z=$.length;for(let J=0;J<Z;){let q=Math.min(Y-this.pos,Z-J);if(q===Y){let G=CO($);for(;Y<=Z-J;J+=Y)this.process(G,J);continue}if(X.set($.subarray(J,J+q),this.pos),this.pos+=q,J+=q,this.pos===Y)this.process(Q,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){BJ(this),RO($,this),this.finished=!0;let{buffer:Q,view:X,blockLen:Y,isLE:Z}=this,{pos:J}=this;if(Q[J++]=128,SJ(this.buffer.subarray(J)),this.padOffset>Y-J)this.process(X,0),J=0;for(let j=J;j<Y;j++)Q[j]=0;tV0(X,Y-8,BigInt(this.length*8),Z),this.process(X,0);let q=CO($),G=this.outputLen;if(G%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let z=G/4,M=this.get();if(z>M.length)throw new Error("_sha2: outputLen bigger than state");for(let j=0;j<z;j++)q.setUint32(4*j,M[j],Z)}digest(){let{buffer:$,outputLen:Q}=this;this.digestInto($);let X=$.slice(0,Q);return this.destroy(),X}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:Q,buffer:X,length:Y,finished:Z,destroyed:J,pos:q}=this;if($.destroyed=J,$.finished=Z,$.length=Y,$.pos=q,Y%Q)$.buffer.set(X);return $}clone(){return this._cloneInto()}};Uq=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225])});function eV0($,Q=!1){if(Q)return{h:Number($&dH),l:Number($>>xd&dH)};return{h:Number($>>xd&dH)|0,l:Number($&dH)|0}}function fd($,Q=!1){let X=$.length,Y=new Uint32Array(X),Z=new Uint32Array(X);for(let J=0;J<X;J++){let{h:q,l:G}=eV0($[J],Q);[Y[J],Z[J]]=[q,G]}return[Y,Z]}var dH,xd,vd=($,Q,X)=>$<<X|Q>>>32-X,gd=($,Q,X)=>Q<<X|$>>>32-X,yd=($,Q,X)=>Q<<X-32|$>>>64-X,bd=($,Q,X)=>$<<X-32|Q>>>64-X;var hd=y(()=>{dH=BigInt(4294967295),xd=BigInt(32)});var $O0,C7,md,iH;var dI=y(()=>{kd();EJ();$O0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),C7=new Uint32Array(64);md=class md extends uI{constructor($=32){super(64,$,8,!1);this.A=Uq[0]|0,this.B=Uq[1]|0,this.C=Uq[2]|0,this.D=Uq[3]|0,this.E=Uq[4]|0,this.F=Uq[5]|0,this.G=Uq[6]|0,this.H=Uq[7]|0}get(){let{A:$,B:Q,C:X,D:Y,E:Z,F:J,G:q,H:G}=this;return[$,Q,X,Y,Z,J,q,G]}set($,Q,X,Y,Z,J,q,G){this.A=$|0,this.B=Q|0,this.C=X|0,this.D=Y|0,this.E=Z|0,this.F=J|0,this.G=q|0,this.H=G|0}process($,Q){for(let j=0;j<16;j++,Q+=4)C7[j]=$.getUint32(Q,!1);for(let j=16;j<64;j++){let P=C7[j-15],D=C7[j-2],A=_9(P,7)^_9(P,18)^P>>>3,I=_9(D,17)^_9(D,19)^D>>>10;C7[j]=I+C7[j-7]+A+C7[j-16]|0}let{A:X,B:Y,C:Z,D:J,E:q,F:G,G:z,H:M}=this;for(let j=0;j<64;j++){let P=_9(q,6)^_9(q,11)^_9(q,25),D=M+P+Ed(q,G,z)+$O0[j]+C7[j]|0,I=(_9(X,2)^_9(X,13)^_9(X,22))+_d(X,Y,Z)|0;M=z,z=G,G=q,q=J+D|0,J=Z,Z=Y,Y=X,X=D+I|0}X=X+this.A|0,Y=Y+this.B|0,Z=Z+this.C|0,J=J+this.D|0,q=q+this.E|0,G=G+this.F|0,z=z+this.G|0,M=M+this.H|0,this.set(X,Y,Z,J,q,G,z,M)}roundClean(){SJ(C7)}destroy(){this.set(0,0,0,0,0,0,0,0),SJ(this.buffer)}};iH=uH(()=>new md)});var iI,nI=($,Q,X)=>new iI($,Q).update(X).digest();var cd=y(()=>{EJ();iI=class iI extends oz{constructor($,Q){super();this.finished=!1,this.destroyed=!1,Td($);let X=nz(Q);if(this.iHash=$.create(),typeof this.iHash.update!=="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let Y=this.blockLen,Z=new Uint8Array(Y);Z.set(X.length>Y?$.create().update(X).digest():X);for(let J=0;J<Z.length;J++)Z[J]^=54;this.iHash.update(Z),this.oHash=$.create();for(let J=0;J<Z.length;J++)Z[J]^=106;this.oHash.update(Z),SJ(Z)}update($){return BJ(this),this.iHash.update($),this}digestInto($){BJ(this),QZ($,this.outputLen),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||($=Object.create(Object.getPrototypeOf(this),{}));let{oHash:Q,iHash:X,finished:Y,destroyed:Z,blockLen:J,outputLen:q}=this;return $=$,$.finished=Y,$.destroyed=Z,$.blockLen=J,$.outputLen=q,$.oHash=Q._cloneInto($.oHash),$.iHash=X._cloneInto($.iHash),$}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};nI.create=($,Q)=>new iI($,Q)});function rz($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function tI($){if(!rz($))throw new Error("Uint8Array expected")}function R6($,Q){if(typeof Q!=="boolean")throw new Error($+" boolean expected, got "+Q)}function wO($){let Q=$.toString(16);return Q.length&1?"0"+Q:Q}function ud($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);return $===""?aI:BigInt("0x"+$)}function C6($){if(tI($),dd)return $.toHex();let Q="";for(let X=0;X<$.length;X++)Q+=QO0[$[X]];return Q}function pd($){if($>=Wq._0&&$<=Wq._9)return $-Wq._0;if($>=Wq.A&&$<=Wq.F)return $-(Wq.A-10);if($>=Wq.a&&$<=Wq.f)return $-(Wq.a-10);return}function TO($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(dd)return Uint8Array.fromHex($);let Q=$.length,X=Q/2;if(Q%2)throw new Error("hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=pd($.charCodeAt(J)),G=pd($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw new Error('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function Vq($){return ud(C6($))}function eI($){return tI($),ud(C6(Uint8Array.from($).reverse()))}function sz($,Q){return TO($.toString(16).padStart(Q*2,"0"))}function $3($,Q){return sz($,Q).reverse()}function XZ($,Q,X){let Y;if(typeof Q==="string")try{Y=TO(Q)}catch(J){throw new Error($+" must be hex string or Uint8Array, cause: "+J)}else if(rz(Q))Y=Uint8Array.from(Q);else throw new Error($+" must be hex string or Uint8Array");let Z=Y.length;if(typeof X==="number"&&Z!==X)throw new Error($+" of length "+X+" expected, got "+Z);return Y}function IO(...$){let Q=0;for(let Y=0;Y<$.length;Y++){let Z=$[Y];tI(Z),Q+=Z.length}let X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}function nH($,Q,X){return oI($)&&oI(Q)&&oI(X)&&Q<=$&&$<X}function az($,Q,X,Y){if(!nH(Q,X,Y))throw new Error("expected valid "+$+": "+X+" <= n < "+Y+", got "+Q)}function id($){let Q;for(Q=0;$>aI;$>>=sI,Q+=1);return Q}function nd($,Q,X){if(typeof $!=="number"||$<2)throw new Error("hashLen must be a number");if(typeof Q!=="number"||Q<2)throw new Error("qByteLen must be a number");if(typeof X!=="function")throw new Error("hmacFn must be a function");let Y=rI($),Z=rI($),J=0,q=()=>{Y.fill(1),Z.fill(0),J=0},G=(...P)=>X(Z,Y,...P),z=(P=rI(0))=>{if(Z=G(ld([0]),P),Y=G(),P.length===0)return;Z=G(ld([1]),P),Y=G()},M=()=>{if(J++>=1000)throw new Error("drbg: tried 1000 values");let P=0,D=[];while(P<Q){Y=G();let A=Y.slice();D.push(A),P+=Y.length}return IO(...D)};return(P,D)=>{q(),z(P);let A=void 0;while(!(A=D(M())))z();return q(),A}}function ez($,Q,X={}){let Y=(Z,J,q)=>{let G=XO0[J];if(typeof G!=="function")throw new Error("invalid validator function");let z=$[Z];if(q&&z===void 0)return;if(!G(z,$))throw new Error("param "+String(Z)+" is invalid. Expected "+J+", got "+z)};for(let[Z,J]of Object.entries(Q))Y(Z,J,!1);for(let[Z,J]of Object.entries(X))Y(Z,J,!0);return $}function Q3($){let Q=new WeakMap;return(X,...Y)=>{let Z=Q.get(X);if(Z!==void 0)return Z;let J=$(X,...Y);return Q.set(X,J),J}}var aI,sI,dd,QO0,Wq,oI=($)=>typeof $==="bigint"&&aI<=$,tz=($)=>(sI<<BigInt($))-sI,rI=($)=>new Uint8Array($),ld=($)=>Uint8Array.from($),XO0;var oH=y(()=>{/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */aI=BigInt(0),sI=BigInt(1);dd=typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function",QO0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));Wq={_0:48,_9:57,A:65,F:70,a:97,f:102};XO0={bigint:($)=>typeof $==="bigint",function:($)=>typeof $==="function",boolean:($)=>typeof $==="boolean",string:($)=>typeof $==="string",stringOrUint8Array:($)=>typeof $==="string"||rz($),isSafeInteger:($)=>Number.isSafeInteger($),array:($)=>Array.isArray($),field:($,Q)=>Q.Fp.isValid($),hash:($)=>typeof $==="function"&&Number.isSafeInteger($.outputLen)}});function xX($,Q){let X=$%Q;return X>=qY?X:Q+X}function YZ($,Q,X){let Y=$;while(Q-- >qY)Y*=Y,Y%=X;return Y}function rH($,Q){if($===qY)throw new Error("invert: expected non-zero number");if(Q<=qY)throw new Error("invert: expected positive modulus, got "+Q);let X=xX($,Q),Y=Q,Z=qY,J=GX,q=GX,G=qY;while(X!==qY){let M=Y/X,j=Y%X,P=Z-q*M,D=J-G*M;Y=X,X=j,Z=q,J=G,q=P,G=D}if(Y!==GX)throw new Error("invert: does not exist");return xX(Z,Q)}function qO0($){let Q=$-GX,X=0;while(Q%$4===qY)Q/=$4,X++;let Y=$4,Z=FO($);while(Y<$&&sd(Z,Y))if(Y++>1000)throw new Error("Cannot find square root: probably non-prime P");if(X===1){let q=($+GX)/X3;return function G(z,M){let j=z.pow(M,q);if(!z.eql(z.sqr(j),M))throw new Error("Cannot find square root");return j}}let J=(Q+GX)/$4;return function q(G,z){if(!sd(G,z))throw new Error("Cannot find square root");let M=X,j=G.pow(G.mul(G.ONE,Y),Q),P=G.pow(z,J),D=G.pow(z,Q);while(!G.eql(D,G.ONE)){if(G.eql(D,G.ZERO))return G.ZERO;let A=1;for(let H=G.sqr(D);A<M;A++){if(G.eql(H,G.ONE))break;H=G.sqr(H)}let I=G.pow(j,GX<<BigInt(M-A-1));j=G.sqr(I),P=G.mul(P,I),D=G.mul(D,j),M=A}return P}}function GO0($){if($%X3===YO0)return function Q(X,Y){let Z=($+GX)/X3,J=X.pow(Y,Z);if(!X.eql(X.sqr(J),Y))throw new Error("Cannot find square root");return J};if($%rd===od)return function Q(X,Y){let Z=X.mul(Y,$4),J=($-od)/rd,q=X.pow(Z,J),G=X.mul(Y,q),z=X.mul(X.mul(G,$4),q),M=X.mul(G,X.sub(z,X.ONE));if(!X.eql(X.sqr(M),Y))throw new Error("Cannot find square root");return M};if($%JO0===ZO0);return qO0($)}function Y3($){let Q={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},X=zO0.reduce((Y,Z)=>{return Y[Z]="function",Y},Q);return ez($,X)}function KO0($,Q,X){if(X<qY)throw new Error("invalid exponent, negatives unsupported");if(X===qY)return $.ONE;if(X===GX)return Q;let Y=$.ONE,Z=Q;while(X>qY){if(X&GX)Y=$.mul(Y,Z);Z=$.sqr(Z),X>>=GX}return Y}function Z3($,Q,X=!1){let Y=new Array(Q.length).fill(X?$.ZERO:void 0),Z=Q.reduce((q,G,z)=>{if($.is0(G))return q;return Y[z]=q,$.mul(q,G)},$.ONE),J=$.inv(Z);return Q.reduceRight((q,G,z)=>{if($.is0(G))return q;return Y[z]=$.mul(q,Y[z]),$.mul(q,G)},J),Y}function UO0($,Q){let X=($.ORDER-GX)/$4,Y=$.pow(Q,X),Z=$.eql(Y,$.ONE),J=$.eql(Y,$.ZERO),q=$.eql(Y,$.neg($.ONE));if(!Z&&!J&&!q)throw new Error("Cannot find square root: probably non-prime P");return Z?1:J?0:-1}function sd($,Q){let X=UO0($,Q);return X===0||X===1}function J3($,Q){if(Q!==void 0)R7(Q);let X=Q!==void 0?Q:$.toString(2).length,Y=Math.ceil(X/8);return{nBitLength:X,nByteLength:Y}}function FO($,Q,X=!1,Y={}){if($<=qY)throw new Error("invalid field: expected ORDER > 0, got "+$);let{nBitLength:Z,nByteLength:J}=J3($,Q);if(J>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let q,G=Object.freeze({ORDER:$,isLE:X,BITS:Z,BYTES:J,MASK:tz(Z),ZERO:qY,ONE:GX,create:(z)=>xX(z,$),isValid:(z)=>{if(typeof z!=="bigint")throw new Error("invalid field element: expected bigint, got "+typeof z);return qY<=z&&z<$},is0:(z)=>z===qY,isOdd:(z)=>(z&GX)===GX,neg:(z)=>xX(-z,$),eql:(z,M)=>z===M,sqr:(z)=>xX(z*z,$),add:(z,M)=>xX(z+M,$),sub:(z,M)=>xX(z-M,$),mul:(z,M)=>xX(z*M,$),pow:(z,M)=>KO0(G,z,M),div:(z,M)=>xX(z*rH(M,$),$),sqrN:(z)=>z*z,addN:(z,M)=>z+M,subN:(z,M)=>z-M,mulN:(z,M)=>z*M,inv:(z)=>rH(z,$),sqrt:Y.sqrt||((z)=>{if(!q)q=GO0($);return q(G,z)}),toBytes:(z)=>X?$3(z,J):sz(z,J),fromBytes:(z)=>{if(z.length!==J)throw new Error("Field.fromBytes: expected "+J+" bytes, got "+z.length);return X?eI(z):Vq(z)},invertBatch:(z)=>Z3(G,z),cmov:(z,M,j)=>j?M:z});return Object.freeze(G)}function ad($){if(typeof $!=="bigint")throw new Error("field order must be bigint");let Q=$.toString(2).length;return Math.ceil(Q/8)}function q3($){let Q=ad($);return Q+Math.ceil(Q/2)}function td($,Q,X=!1){let Y=$.length,Z=ad(Q),J=q3(Q);if(Y<16||Y<J||Y>1024)throw new Error("expected "+J+"-1024 bytes of input, got "+Y);let q=X?eI($):Vq($),G=xX(q,Q-GX)+GX;return X?$3(G,Z):sz(G,Z)}var qY,GX,$4,YO0,X3,od,rd,ZO0,JO0,zO0;var sH=y(()=>{EJ();oH();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */qY=BigInt(0),GX=BigInt(1),$4=BigInt(2),YO0=BigInt(3),X3=BigInt(4),od=BigInt(5),rd=BigInt(8),ZO0=BigInt(9),JO0=BigInt(16);zO0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function G3($,Q){let X=Q.negate();return $?X:Q}function Qi($,Q){if(!Number.isSafeInteger($)||$<=0||$>Q)throw new Error("invalid window size, expected [1.."+Q+"], got W="+$)}function z3($,Q){Qi($,Q);let X=Math.ceil(Q/$)+1,Y=2**($-1),Z=2**$,J=tz($),q=BigInt($);return{windows:X,windowSize:Y,mask:J,maxNumber:Z,shiftBy:q}}function $i($,Q,X){let{windowSize:Y,mask:Z,maxNumber:J,shiftBy:q}=X,G=Number($&Z),z=$>>q;if(G>Y)G-=J,z+=W3;let M=Q*Y,j=M+Math.abs(G)-1,P=G===0,D=G<0,A=Q%2!==0;return{nextN:z,offset:j,isZero:P,isNeg:D,isNegF:A,offsetF:M}}function WO0($,Q){if(!Array.isArray($))throw new Error("array expected");$.forEach((X,Y)=>{if(!(X instanceof Q))throw new Error("invalid point at index "+Y)})}function VO0($,Q){if(!Array.isArray($))throw new Error("array of scalars expected");$.forEach((X,Y)=>{if(!Q.isValid(X))throw new Error("invalid scalar at index "+Y)})}function U3($){return Xi.get($)||1}function Yi($,Q){return{constTimeNegate:G3,hasPrecomputes(X){return U3(X)!==1},unsafeLadder(X,Y,Z=$.ZERO){let J=X;while(Y>ed){if(Y&W3)Z=Z.add(J);J=J.double(),Y>>=W3}return Z},precomputeWindow(X,Y){let{windows:Z,windowSize:J}=z3(Y,Q),q=[],G=X,z=G;for(let M=0;M<Z;M++){z=G,q.push(z);for(let j=1;j<J;j++)z=z.add(G),q.push(z);G=z.double()}return q},wNAF(X,Y,Z){let{ZERO:J,BASE:q}=$,G=z3(X,Q);for(let z=0;z<G.windows;z++){let{nextN:M,offset:j,isZero:P,isNeg:D,isNegF:A,offsetF:I}=$i(Z,z,G);if(Z=M,P)q=q.add(G3(A,Y[I]));else J=J.add(G3(D,Y[j]))}return{p:J,f:q}},wNAFUnsafe(X,Y,Z,J=$.ZERO){let q=z3(X,Q);for(let G=0;G<q.windows;G++){if(Z===ed)break;let{nextN:z,offset:M,isZero:j,isNeg:P}=$i(Z,G,q);if(Z=z,j)continue;else{let D=Y[M];J=J.add(P?D.negate():D)}}return J},getPrecomputes(X,Y,Z){let J=K3.get(Y);if(!J){if(J=this.precomputeWindow(Y,X),X!==1)K3.set(Y,Z(J))}return J},wNAFCached(X,Y,Z){let J=U3(X);return this.wNAF(J,this.getPrecomputes(J,X,Z),Y)},wNAFCachedUnsafe(X,Y,Z,J){let q=U3(X);if(q===1)return this.unsafeLadder(X,Y,J);return this.wNAFUnsafe(q,this.getPrecomputes(q,X,Z),Y,J)},setWindowSize(X,Y){Qi(Y,Q),Xi.set(X,Y),K3.delete(X)}}}function Zi($,Q,X,Y){if(WO0(X,$),VO0(Y,Q),X.length!==Y.length)throw new Error("arrays of points and scalars must have equal length");let Z=$.ZERO,J=id(BigInt(X.length)),q=J>12?J-3:J>4?J-2:J?2:1,G=tz(q),z=new Array(Number(G)+1).fill(Z),M=Math.floor((Q.BITS-1)/q)*q,j=Z;for(let P=M;P>=0;P-=q){z.fill(Z);for(let A=0;A<Y.length;A++){let I=Y[A],H=Number(I>>BigInt(P)&G);z[H]=z[H].add(X[A])}let D=Z;for(let A=z.length-1,I=Z;A>0;A--)I=I.add(z[A]),D=D.add(I);if(j=j.add(D),P!==0)for(let A=0;A<q;A++)j=j.double()}return j}function V3($){return Y3($.Fp),ez($,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...J3($.n,$.nBitLength),...$,...{p:$.Fp.ORDER}})}var ed,W3,K3,Xi;var Ji=y(()=>{sH();oH();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */ed=BigInt(0),W3=BigInt(1);K3=new WeakMap,Xi=new WeakMap});function qi($){if($.lowS!==void 0)R6("lowS",$.lowS);if($.prehash!==void 0)R6("prehash",$.prehash)}function OO0($){let Q=V3($);ez(Q,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:X,Fp:Y,a:Z}=Q;if(X){if(!Y.eql(Z,Y.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof X!=="object"||typeof X.beta!=="bigint"||typeof X.splitScalar!=="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...Q})}function MO0($){let Q=OO0($),{Fp:X}=Q,Y=FO(Q.n,Q.nBitLength),Z=Q.toBytes||((H,C,B)=>{let S=C.toAffine();return IO(Uint8Array.from([4]),X.toBytes(S.x),X.toBytes(S.y))}),J=Q.fromBytes||((H)=>{let C=H.subarray(1),B=X.fromBytes(C.subarray(0,X.BYTES)),S=X.fromBytes(C.subarray(X.BYTES,2*X.BYTES));return{x:B,y:S}});function q(H){let{a:C,b:B}=Q,S=X.sqr(H),_=X.mul(S,H);return X.add(X.add(_,X.mul(H,C)),B)}if(!X.eql(X.sqr(Q.Gy),q(Q.Gx)))throw new Error("bad generator point: equation left != right");function G(H){return nH(H,yQ,Q.n)}function z(H){let{allowedPrivateKeyLengths:C,nByteLength:B,wrapPrivateKey:S,n:_}=Q;if(C&&typeof H!=="bigint"){if(rz(H))H=C6(H);if(typeof H!=="string"||!C.includes(H.length))throw new Error("invalid private key");H=H.padStart(B*2,"0")}let k;try{k=typeof H==="bigint"?H:Vq(XZ("private key",H,B))}catch(f){throw new Error("invalid private key, expected hex or "+B+" bytes, got "+typeof H)}if(S)k=xX(k,_);return az("private key",k,yQ,_),k}function M(H){if(!(H instanceof D))throw new Error("ProjectivePoint expected")}let j=Q3((H,C)=>{let{px:B,py:S,pz:_}=H;if(X.eql(_,X.ONE))return{x:B,y:S};let k=H.is0();if(C==null)C=k?X.ONE:X.inv(_);let f=X.mul(B,C),g=X.mul(S,C),b=X.mul(_,C);if(k)return{x:X.ZERO,y:X.ZERO};if(!X.eql(b,X.ONE))throw new Error("invZ was invalid");return{x:f,y:g}}),P=Q3((H)=>{if(H.is0()){if(Q.allowInfinityPoint&&!X.is0(H.py))return;throw new Error("bad point: ZERO")}let{x:C,y:B}=H.toAffine();if(!X.isValid(C)||!X.isValid(B))throw new Error("bad point: x or y not FE");let S=X.sqr(B),_=q(C);if(!X.eql(S,_))throw new Error("bad point: equation left != right");if(!H.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class D{constructor(H,C,B){if(H==null||!X.isValid(H))throw new Error("x required");if(C==null||!X.isValid(C)||X.is0(C))throw new Error("y required");if(B==null||!X.isValid(B))throw new Error("z required");this.px=H,this.py=C,this.pz=B,Object.freeze(this)}static fromAffine(H){let{x:C,y:B}=H||{};if(!H||!X.isValid(C)||!X.isValid(B))throw new Error("invalid affine point");if(H instanceof D)throw new Error("projective point not allowed");let S=(_)=>X.eql(_,X.ZERO);if(S(C)&&S(B))return D.ZERO;return new D(C,B,X.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(H){let C=Z3(X,H.map((B)=>B.pz));return H.map((B,S)=>B.toAffine(C[S])).map(D.fromAffine)}static fromHex(H){let C=D.fromAffine(J(XZ("pointHex",H)));return C.assertValidity(),C}static fromPrivateKey(H){return D.BASE.multiply(z(H))}static msm(H,C){return Zi(D,Y,H,C)}_setWindowSize(H){I.setWindowSize(this,H)}assertValidity(){P(this)}hasEvenY(){let{y:H}=this.toAffine();if(X.isOdd)return!X.isOdd(H);throw new Error("Field doesn't support isOdd")}equals(H){M(H);let{px:C,py:B,pz:S}=this,{px:_,py:k,pz:f}=H,g=X.eql(X.mul(C,f),X.mul(_,S)),b=X.eql(X.mul(B,f),X.mul(k,S));return g&&b}negate(){return new D(this.px,X.neg(this.py),this.pz)}double(){let{a:H,b:C}=Q,B=X.mul(C,Gi),{px:S,py:_,pz:k}=this,f=X.ZERO,g=X.ZERO,b=X.ZERO,m=X.mul(S,S),l=X.mul(_,_),h=X.mul(k,k),c=X.mul(S,_);return c=X.add(c,c),b=X.mul(S,k),b=X.add(b,b),f=X.mul(H,b),g=X.mul(B,h),g=X.add(f,g),f=X.sub(l,g),g=X.add(l,g),g=X.mul(f,g),f=X.mul(c,f),b=X.mul(B,b),h=X.mul(H,h),c=X.sub(m,h),c=X.mul(H,c),c=X.add(c,b),b=X.add(m,m),m=X.add(b,m),m=X.add(m,h),m=X.mul(m,c),g=X.add(g,m),h=X.mul(_,k),h=X.add(h,h),m=X.mul(h,c),f=X.sub(f,m),b=X.mul(h,l),b=X.add(b,b),b=X.add(b,b),new D(f,g,b)}add(H){M(H);let{px:C,py:B,pz:S}=this,{px:_,py:k,pz:f}=H,g=X.ZERO,b=X.ZERO,m=X.ZERO,l=Q.a,h=X.mul(Q.b,Gi),c=X.mul(C,_),T=X.mul(B,k),K=X.mul(S,f),U=X.add(C,B),W=X.add(_,k);U=X.mul(U,W),W=X.add(c,T),U=X.sub(U,W),W=X.add(C,S);let V=X.add(_,f);return W=X.mul(W,V),V=X.add(c,K),W=X.sub(W,V),V=X.add(B,S),g=X.add(k,f),V=X.mul(V,g),g=X.add(T,K),V=X.sub(V,g),m=X.mul(l,W),g=X.mul(h,K),m=X.add(g,m),g=X.sub(T,m),m=X.add(T,m),b=X.mul(g,m),T=X.add(c,c),T=X.add(T,c),K=X.mul(l,K),W=X.mul(h,W),T=X.add(T,K),K=X.sub(c,K),K=X.mul(l,K),W=X.add(W,K),c=X.mul(T,W),b=X.add(b,c),c=X.mul(V,W),g=X.mul(U,g),g=X.sub(g,c),c=X.mul(U,T),m=X.mul(V,m),m=X.add(m,c),new D(g,b,m)}subtract(H){return this.add(H.negate())}is0(){return this.equals(D.ZERO)}wNAF(H){return I.wNAFCached(this,H,D.normalizeZ)}multiplyUnsafe(H){let{endo:C,n:B}=Q;az("scalar",H,Mq,B);let S=D.ZERO;if(H===Mq)return S;if(this.is0()||H===yQ)return this;if(!C||I.hasPrecomputes(this))return I.wNAFCachedUnsafe(this,H,D.normalizeZ);let{k1neg:_,k1:k,k2neg:f,k2:g}=C.splitScalar(H),b=S,m=S,l=this;while(k>Mq||g>Mq){if(k&yQ)b=b.add(l);if(g&yQ)m=m.add(l);l=l.double(),k>>=yQ,g>>=yQ}if(_)b=b.negate();if(f)m=m.negate();return m=new D(X.mul(m.px,C.beta),m.py,m.pz),b.add(m)}multiply(H){let{endo:C,n:B}=Q;az("scalar",H,yQ,B);let S,_;if(C){let{k1neg:k,k1:f,k2neg:g,k2:b}=C.splitScalar(H),{p:m,f:l}=this.wNAF(f),{p:h,f:c}=this.wNAF(b);m=I.constTimeNegate(k,m),h=I.constTimeNegate(g,h),h=new D(X.mul(h.px,C.beta),h.py,h.pz),S=m.add(h),_=l.add(c)}else{let{p:k,f}=this.wNAF(H);S=k,_=f}return D.normalizeZ([S,_])[0]}multiplyAndAddUnsafe(H,C,B){let S=D.BASE,_=(f,g)=>g===Mq||g===yQ||!f.equals(S)?f.multiplyUnsafe(g):f.multiply(g),k=_(this,C).add(_(H,B));return k.is0()?void 0:k}toAffine(H){return j(this,H)}isTorsionFree(){let{h:H,isTorsionFree:C}=Q;if(H===yQ)return!0;if(C)return C(D,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:H,clearCofactor:C}=Q;if(H===yQ)return this;if(C)return C(D,this);return this.multiplyUnsafe(Q.h)}toRawBytes(H=!0){return R6("isCompressed",H),this.assertValidity(),Z(D,this,H)}toHex(H=!0){return R6("isCompressed",H),C6(this.toRawBytes(H))}}D.BASE=new D(Q.Gx,Q.Gy,X.ONE),D.ZERO=new D(X.ZERO,X.ONE,X.ZERO);let A=Q.nBitLength,I=Yi(D,Q.endo?Math.ceil(A/2):A);return{CURVE:Q,ProjectivePoint:D,normPrivateKeyToScalar:z,weierstrassEquation:q,isWithinCurveOrder:G}}function DO0($){let Q=V3($);return ez(Q,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...Q})}function Ki($){let Q=DO0($),{Fp:X,n:Y}=Q,Z=X.BYTES+1,J=2*X.BYTES+1;function q(U){return xX(U,Y)}function G(U){return rH(U,Y)}let{ProjectivePoint:z,normPrivateKeyToScalar:M,weierstrassEquation:j,isWithinCurveOrder:P}=MO0({...Q,toBytes(U,W,V){let N=W.toAffine(),L=X.toBytes(N.x),F=IO;if(R6("isCompressed",V),V)return F(Uint8Array.from([W.hasEvenY()?2:3]),L);else return F(Uint8Array.from([4]),L,X.toBytes(N.y))},fromBytes(U){let W=U.length,V=U[0],N=U.subarray(1);if(W===Z&&(V===2||V===3)){let L=Vq(N);if(!nH(L,yQ,X.ORDER))throw new Error("Point is not on curve");let F=j(L),R;try{R=X.sqrt(F)}catch(x){let E=x instanceof Error?": "+x.message:"";throw new Error("Point is not on curve"+E)}let O=(R&yQ)===yQ;if((V&1)===1!==O)R=X.neg(R);return{x:L,y:R}}else if(W===J&&V===4){let L=X.fromBytes(N.subarray(0,X.BYTES)),F=X.fromBytes(N.subarray(X.BYTES,2*X.BYTES));return{x:L,y:F}}else{let L=Z,F=J;throw new Error("invalid Point, expected length of "+L+", or uncompressed "+F+", got "+W)}}}),D=(U)=>C6(sz(U,Q.nByteLength));function A(U){let W=Y>>yQ;return U>W}function I(U){return A(U)?q(-U):U}let H=(U,W,V)=>Vq(U.slice(W,V));class C{constructor(U,W,V){if(az("r",U,yQ,Y),az("s",W,yQ,Y),this.r=U,this.s=W,V!=null)this.recovery=V;Object.freeze(this)}static fromCompact(U){let W=Q.nByteLength;return U=XZ("compactSignature",U,W*2),new C(H(U,0,W),H(U,W,2*W))}static fromDER(U){let{r:W,s:V}=Oq.toSig(XZ("DER",U));return new C(W,V)}assertValidity(){}addRecoveryBit(U){return new C(this.r,this.s,U)}recoverPublicKey(U){let{r:W,s:V,recovery:N}=this,L=g(XZ("msgHash",U));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");let F=N===2||N===3?W+Q.n:W;if(F>=X.ORDER)throw new Error("recovery id 2 or 3 invalid");let R=(N&1)===0?"02":"03",O=z.fromHex(R+D(F)),w=G(F),x=q(-L*w),E=q(V*w),v=z.BASE.multiplyAndAddUnsafe(O,x,E);if(!v)throw new Error("point at infinify");return v.assertValidity(),v}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new C(this.r,q(-this.s),this.recovery):this}toDERRawBytes(){return TO(this.toDERHex())}toDERHex(){return Oq.hexFromSig(this)}toCompactRawBytes(){return TO(this.toCompactHex())}toCompactHex(){return D(this.r)+D(this.s)}}let B={isValidPrivateKey(U){try{return M(U),!0}catch(W){return!1}},normPrivateKeyToScalar:M,randomPrivateKey:()=>{let U=q3(Q.n);return td(Q.randomBytes(U),Q.n)},precompute(U=8,W=z.BASE){return W._setWindowSize(U),W.multiply(BigInt(3)),W}};function S(U,W=!0){return z.fromPrivateKey(U).toRawBytes(W)}function _(U){let W=rz(U),V=typeof U==="string",N=(W||V)&&U.length;if(W)return N===Z||N===J;if(V)return N===2*Z||N===2*J;if(U instanceof z)return!0;return!1}function k(U,W,V=!0){if(_(U))throw new Error("first arg must be private key");if(!_(W))throw new Error("second arg must be public key");return z.fromHex(W).multiply(M(U)).toRawBytes(V)}let f=Q.bits2int||function(U){if(U.length>8192)throw new Error("input is too large");let W=Vq(U),V=U.length*8-Q.nBitLength;return V>0?W>>BigInt(V):W},g=Q.bits2int_modN||function(U){return q(f(U))},b=tz(Q.nBitLength);function m(U){return az("num < 2^"+Q.nBitLength,U,Mq,b),sz(U,Q.nByteLength)}function l(U,W,V=h){if(["recovered","canonical"].some((s)=>(s in V)))throw new Error("sign() legacy options not supported");let{hash:N,randomBytes:L}=Q,{lowS:F,prehash:R,extraEntropy:O}=V;if(F==null)F=!0;if(U=XZ("msgHash",U),qi(V),R)U=XZ("prehashed msgHash",N(U));let w=g(U),x=M(W),E=[m(x),m(w)];if(O!=null&&O!==!1){let s=O===!0?L(X.BYTES):O;E.push(XZ("extraEntropy",s))}let v=IO(...E),p=w;function i(s){let X0=f(s);if(!P(X0))return;let n=G(X0),r=z.BASE.multiply(X0).toAffine(),Z0=q(r.x);if(Z0===Mq)return;let e=q(n*q(p+Z0*x));if(e===Mq)return;let Q0=(r.x===Z0?0:2)|Number(r.y&yQ),t=e;if(F&&A(e))t=I(e),Q0^=1;return new C(Z0,t,Q0)}return{seed:v,k2sig:i}}let h={lowS:Q.lowS,prehash:!1},c={lowS:Q.lowS,prehash:!1};function T(U,W,V=h){let{seed:N,k2sig:L}=l(U,W,V),F=Q;return nd(F.hash.outputLen,F.nByteLength,F.hmac)(N,L)}z.BASE._setWindowSize(8);function K(U,W,V,N=c){let L=U;W=XZ("msgHash",W),V=XZ("publicKey",V);let{lowS:F,prehash:R,format:O}=N;if(qi(N),"strict"in N)throw new Error("options.strict was renamed to lowS");if(O!==void 0&&O!=="compact"&&O!=="der")throw new Error("format must be compact or der");let w=typeof L==="string"||rz(L),x=!w&&!O&&typeof L==="object"&&L!==null&&typeof L.r==="bigint"&&typeof L.s==="bigint";if(!w&&!x)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let E=void 0,v;try{if(x)E=new C(L.r,L.s);if(w){try{if(O!=="compact")E=C.fromDER(L)}catch(Q0){if(!(Q0 instanceof Oq.Err))throw Q0}if(!E&&O!=="der")E=C.fromCompact(L)}v=z.fromHex(V)}catch(Q0){return!1}if(!E)return!1;if(F&&E.hasHighS())return!1;if(R)W=Q.hash(W);let{r:p,s:i}=E,s=g(W),X0=G(i),n=q(s*X0),r=q(p*X0),Z0=z.BASE.multiplyAndAddUnsafe(v,n,r)?.toAffine();if(!Z0)return!1;return q(Z0.x)===p}return{CURVE:Q,getPublicKey:S,getSharedSecret:k,sign:T,verify:K,ProjectivePoint:z,Signature:C,utils:B}}var zi,Oq,Mq,yQ,gc0,Gi,yc0;var Ui=y(()=>{Ji();sH();oH();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */zi=class zi extends Error{constructor($=""){super($)}};Oq={Err:zi,_tlv:{encode:($,Q)=>{let{Err:X}=Oq;if($<0||$>256)throw new X("tlv.encode: wrong tag");if(Q.length&1)throw new X("tlv.encode: unpadded data");let Y=Q.length/2,Z=wO(Y);if(Z.length/2&128)throw new X("tlv.encode: long form length too big");let J=Y>127?wO(Z.length/2|128):"";return wO($)+J+Z+Q},decode($,Q){let{Err:X}=Oq,Y=0;if($<0||$>256)throw new X("tlv.encode: wrong tag");if(Q.length<2||Q[Y++]!==$)throw new X("tlv.decode: wrong tlv");let Z=Q[Y++],J=!!(Z&128),q=0;if(!J)q=Z;else{let z=Z&127;if(!z)throw new X("tlv.decode(long): indefinite length not supported");if(z>4)throw new X("tlv.decode(long): byte length is too big");let M=Q.subarray(Y,Y+z);if(M.length!==z)throw new X("tlv.decode: length bytes not complete");if(M[0]===0)throw new X("tlv.decode(long): zero leftmost byte");for(let j of M)q=q<<8|j;if(Y+=z,q<128)throw new X("tlv.decode(long): not minimal encoding")}let G=Q.subarray(Y,Y+q);if(G.length!==q)throw new X("tlv.decode: wrong value length");return{v:G,l:Q.subarray(Y+q)}}},_int:{encode($){let{Err:Q}=Oq;if($<Mq)throw new Q("integer: negative integers are not allowed");let X=wO($);if(Number.parseInt(X[0],16)&8)X="00"+X;if(X.length&1)throw new Q("unexpected DER parsing assertion: unpadded hex");return X},decode($){let{Err:Q}=Oq;if($[0]&128)throw new Q("invalid signature integer: negative");if($[0]===0&&!($[1]&128))throw new Q("invalid signature integer: unnecessary leading zero");return Vq($)}},toSig($){let{Err:Q,_int:X,_tlv:Y}=Oq,Z=XZ("signature",$),{v:J,l:q}=Y.decode(48,Z);if(q.length)throw new Q("invalid signature: left bytes after parsing");let{v:G,l:z}=Y.decode(2,J),{v:M,l:j}=Y.decode(2,z);if(j.length)throw new Q("invalid signature: left bytes after parsing");return{r:X.decode(G),s:X.decode(M)}},hexFromSig($){let{_tlv:Q,_int:X}=Oq,Y=Q.encode(2,X.encode($.r)),Z=Q.encode(2,X.encode($.s)),J=Y+Z;return Q.encode(48,J)}},Mq=BigInt(0),yQ=BigInt(1),gc0=BigInt(2),Gi=BigInt(3),yc0=BigInt(4)});function jO0($){return{hash:$,hmac:(Q,...X)=>nI($,Q,lI(...X)),randomBytes:Sd}}function Wi($,Q){let X=(Y)=>Ki({...$,...jO0(Y)});return{...X(Q),create:X}}var Vi=y(()=>{cd();EJ();Ui();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */});function HO0($){let Q=Di,X=BigInt(3),Y=BigInt(6),Z=BigInt(11),J=BigInt(22),q=BigInt(23),G=BigInt(44),z=BigInt(88),M=$*$*$%Q,j=M*M*$%Q,P=YZ(j,X,Q)*j%Q,D=YZ(P,X,Q)*j%Q,A=YZ(D,O3,Q)*M%Q,I=YZ(A,Z,Q)*A%Q,H=YZ(I,J,Q)*I%Q,C=YZ(H,G,Q)*H%Q,B=YZ(C,z,Q)*C%Q,S=YZ(B,G,Q)*H%Q,_=YZ(S,X,Q)*j%Q,k=YZ(_,q,Q)*I%Q,f=YZ(k,Y,Q)*M%Q,g=YZ(f,O3,Q);if(!M3.eql(M3.sqr(g),$))throw new Error("Cannot find square root");return g}var Di,Oi,PO0,O3,Mi=($,Q)=>($+Q/O3)/Q,M3,BO,ic0,nc0;var ji=y(()=>{dI();Vi();sH();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Di=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Oi=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),PO0=BigInt(1),O3=BigInt(2);M3=FO(Di,void 0,void 0,{sqrt:HO0}),BO=Wi({a:BigInt(0),b:BigInt(7),Fp:M3,n:Oi,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:($)=>{let Q=Oi,X=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),Y=-PO0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),Z=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),J=X,q=BigInt("0x100000000000000000000000000000000"),G=Mi(J*$,Q),z=Mi(-Y*$,Q),M=xX($-G*X-z*Z,Q),j=xX(-G*Y-z*J,Q),P=M>q,D=j>q;if(P)M=Q-M;if(D)j=Q-j;if(M>q||j>q)throw new Error("splitScalar: Endomorphism failed, k="+$);return{k1neg:P,k1:M,k2neg:D,k2:j}}}},iH),ic0=BigInt(0),nc0=BO.ProjectivePoint});var Pi=y(()=>{ji()});var Hi;var Ni=y(()=>{EJ();Hi=QZ});function D3($){if(!($ instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof $}`);return new TextDecoder().decode($)}function j3($){let Q=$.startsWith("0x")?$.substring(2):$;return Bd(Q)}function L7($,Q){if($.length!==Q.length)return!1;for(let X=0;X<$.length;X++)if($[X]!==Q[X])return!1;return!0}function Q4($){return(Q)=>{return Hi(Q),$(Q)}}var SO=y(()=>{Ni();EJ();EJ()});var Ai;var Ri=y(()=>{dI();SO();Ai=Q4(iH)});function T$($,Q){return new P3({code:"ETHEREUMJS_DEFAULT_ERROR_CODE"},$,Q)}var P3;var H3=y(()=>{P3=class P3 extends Error{constructor($,Q,X){super(Q??$.code);if(this.type=$,X!==void 0)this.stack=X}getMetadata(){return this.type}toObject(){return{type:this.getMetadata(),message:this.message??"",stack:this.stack??"",className:this.constructor.name}}}});function Ci($){if($[0]===0)throw T$("invalid RLP: extra zeros");return RO0(AO0($))}function Li($,Q){if($<56)return Uint8Array.from([$+Q]);let X=R3($),Y=X.length/2,Z=R3(Q+55+Y);return Uint8Array.from(A3(Z+X))}function L6($,Q,X){if(X>$.length)throw T$("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return $.slice(Q,X)}function N3($){let Q,X,Y,Z,J,q=[],G=$[0];if(G<=127)return{data:$.slice(0,1),remainder:$.subarray(1)};else if(G<=183){if(Q=G-127,G===128)Y=Uint8Array.from([]);else Y=L6($,1,Q);if(Q===2&&Y[0]<128)throw T$("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:Y,remainder:$.subarray(Q)}}else if(G<=191){if(X=G-182,$.length-1<X)throw T$("invalid RLP: not enough bytes for string length");if(Q=Ci(L6($,1,X)),Q<=55)throw T$("invalid RLP: expected string length to be greater than 55");return Y=L6($,X,Q+X),{data:Y,remainder:$.subarray(Q+X)}}else if(G<=247){Q=G-191,Z=L6($,1,Q);while(Z.length)J=N3(Z),q.push(J.data),Z=J.remainder;return{data:q,remainder:$.subarray(Q)}}else{if(X=G-246,Q=Ci(L6($,1,X)),Q<56)throw T$("invalid RLP: encoded list too short");let z=X+Q;if(z>$.length)throw T$("invalid RLP: total length is larger than the data");Z=L6($,X,z);while(Z.length)J=N3(Z),q.push(J.data),Z=J.remainder;return{data:q,remainder:$.subarray(z)}}}function AO0($){let Q="";for(let X=0;X<$.length;X++)Q+=NO0[$[X]];return Q}function RO0($){let Q=Number.parseInt($,16);if(Number.isNaN(Q))throw T$("Invalid byte sequence");return Q}function wi($){if($>=Dq._0&&$<=Dq._9)return $-Dq._0;if($>=Dq._A&&$<=Dq._F)return $-(Dq._A-10);if($>=Dq._a&&$<=Dq._f)return $-(Dq._a-10);return}function A3($){if($.slice(0,2)==="0x")$=$.slice(0,2);if(typeof $!=="string")throw T$("hex string expected, got "+typeof $);let Q=$.length,X=Q/2;if(Q%2)throw T$("padded hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=wi($.charCodeAt(J)),G=wi($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw T$('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function Ti(...$){if($.length===1)return $[0];let Q=$.reduce((Y,Z)=>Y+Z.length,0),X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}function CO0($){return new TextEncoder().encode($)}function R3($){if($<0)throw T$("Invalid integer as argument, must be unsigned!");let Q=$.toString(16);return Q.length%2?`0${Q}`:Q}function LO0($){return $.length%2?`0${$}`:$}function Ii($){return $.length>=2&&$[0]==="0"&&$[1]==="x"}function wO0($){if(typeof $!=="string")return $;return Ii($)?$.slice(2):$}function Fi($){if($ instanceof Uint8Array)return $;if(typeof $==="string"){if(Ii($))return A3(LO0(wO0($)));return CO0($)}if(typeof $==="number"||typeof $==="bigint"){if(!$)return Uint8Array.from([]);return A3(R3($))}if($===null||$===void 0)return Uint8Array.from([]);throw T$("toBytes: received unsupported type "+typeof $)}function Bi($){if(Array.isArray($)){let X=[],Y=0;for(let Z=0;Z<$.length;Z++){let J=Bi($[Z]);X.push(J),Y+=J.length}return Ti(Li(Y,192),...X)}let Q=Fi($);if(Q.length===1&&Q[0]<128)return Q;return Ti(Li(Q.length,128),Q)}function TO0($,Q=!1){if(typeof $==="undefined"||$===null||$.length===0)return Uint8Array.from([]);let X=Fi($),Y=N3(X);if(Q)return{data:Y.data,remainder:Y.remainder.slice()};if(Y.remainder.length!==0)throw T$("invalid RLP: remainder must be zero");return Y.data}var NO0,Dq,k9;var X4=y(()=>{H3();H3();NO0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));Dq={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};k9={encode:Bi,decode:TO0}});var aH=y(()=>{X4()});function Si($,Q){if(typeof $!=="string"||!$.match(/^0x[0-9A-Fa-f]*$/))return!1;if(typeof Q!=="undefined"&&Q>0&&$.length!==2+2*Q)return!1;return!0}function C3($){let Q=$;if(typeof Q!=="string")throw T$(`[padToEven] value must be type 'string', received ${typeof Q}`);if(Q.length%2)Q=`0${Q}`;return Q}var Ei=($)=>{if(typeof $!=="string")throw T$(`[stripHexPrefix] input must be type 'string', received ${typeof $}`);return Si($)?$.slice(2):$};var _i=y(()=>{aH()});var IO0,zX,Y4=($)=>{if(!$.startsWith("0x"))throw T$("input string must be 0x prefixed");return j3(C3(Ei($)))},tH=($)=>{if($.startsWith("0x"))throw T$("input string cannot be 0x prefixed");return j3(C3($))},T8=($)=>{return`0x${zX($)}`},L3,EO=($,Q=!1)=>{if(Q)$.reverse();let X=T8($);if(X==="0x")return IO0;if(X.length===4)return L3[$[0]];if(X.length===6)return L3[$[0]*256+$[1]];return BigInt(X)},FO0=($)=>{if(!Number.isSafeInteger($)||$<0)throw T$(`Received an invalid integer type: ${$}`);return`0x${$.toString(16)}`},w6=($)=>{let Q=FO0($);return Y4(Q)},_J=(...$)=>{if($.length===1)return $[0];let Q=$.reduce((Y,Z)=>Y+Z.length,0),X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X};var Z4=y(()=>{SO();aH();_i();SO();IO0=BigInt(0),zX=lH,L3=[];for(let $=0;$<=65535;$++)L3[$]=BigInt($)});var Lp0,wp0,Tp0,Ip0,Fp0,Bp0,BO0="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",Sp0,SO0="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",Ep0,EO0="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",_p0,kp0,ki,xp0,xi,fp0,_O0,vp0,gp0,yp0,bp0,hp0,mp0,cp0,pp0,lp0,up0,kO0,dp0,ip0,np0,op0,rp0,sp0,ap0,tp0;var fi=y(()=>{Pi();Ri();Z4();Lp0=BigInt("0xffffffffffffffff"),wp0=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Tp0=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),Ip0=BO.CURVE.n,Fp0=BO.CURVE.n/BigInt(2),Bp0=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),Sp0=Y4(BO0),Ep0=Y4(SO0),_p0=Y4(EO0),kp0=Ai(new Uint8Array),ki=Uint8Array.from([128]),xp0=BigInt(-1),xi=BigInt(0),fp0=BigInt(1),_O0=BigInt(2),vp0=BigInt(3),gp0=BigInt(7),yp0=BigInt(8),bp0=BigInt(27),hp0=BigInt(28),mp0=BigInt(31),cp0=BigInt(32),pp0=BigInt(64),lp0=BigInt(128),up0=BigInt(255),kO0=BigInt(256),dp0=BigInt(96),ip0=BigInt(100),np0=BigInt(160),op0=BigInt(224),rp0=BigInt(79228162514264340000000000000),sp0=BigInt(1461501637330903000000000000000000000000000000000),ap0=BigInt(26959946667150640000000000000000000000000000000000000000000000000000),tp0=_O0**kO0});var $l0,Ql0;var vi=y(()=>{$l0=BigInt(1e9),Ql0=BigInt(1000000000000000000)});function mO0($,Q=24){let X=new Uint32Array(10);for(let Y=24-Q;Y<24;Y++){for(let q=0;q<10;q++)X[q]=$[q]^$[q+10]^$[q+20]^$[q+30]^$[q+40];for(let q=0;q<10;q+=2){let G=(q+8)%10,z=(q+2)%10,M=X[z],j=X[z+1],P=gi(M,j,1)^X[G],D=yi(M,j,1)^X[G+1];for(let A=0;A<50;A+=10)$[q+A]^=P,$[q+A+1]^=D}let Z=$[2],J=$[3];for(let q=0;q<24;q++){let G=hi[q],z=gi(Z,J,G),M=yi(Z,J,G),j=bi[q];Z=$[j],J=$[j+1],$[j]=z,$[j+1]=M}for(let q=0;q<50;q+=10){for(let G=0;G<10;G++)X[G]=$[q+G];for(let G=0;G<10;G++)$[q+G]^=~X[(G+2)%10]&X[(G+4)%10]}$[0]^=bO0[Y],$[1]^=hO0[Y]}SJ(X)}var xO0,_O,fO0,vO0,gO0,yO0,bi,hi,mi,ci,bO0,hO0,gi=($,Q,X)=>X>32?yd($,Q,X):vd($,Q,X),yi=($,Q,X)=>X>32?bd($,Q,X):gd($,Q,X),w3,eH=($,Q,X)=>uH(()=>new w3(Q,$,X)),pi,T3,li,ui;var di=y(()=>{hd();EJ();xO0=BigInt(0),_O=BigInt(1),fO0=BigInt(2),vO0=BigInt(7),gO0=BigInt(256),yO0=BigInt(113),bi=[],hi=[],mi=[];for(let $=0,Q=_O,X=1,Y=0;$<24;$++){[X,Y]=[Y,(2*X+3*Y)%5],bi.push(2*(5*Y+X)),hi.push(($+1)*($+2)/2%64);let Z=xO0;for(let J=0;J<7;J++)if(Q=(Q<<_O^(Q>>vO0)*yO0)%gO0,Q&fO0)Z^=_O<<(_O<<BigInt(J))-_O;mi.push(Z)}ci=fd(mi,!0),bO0=ci[0],hO0=ci[1];w3=class w3 extends oz{constructor($,Q,X,Y=!1,Z=24){super();if(this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=$,this.suffix=Q,this.outputLen=X,this.enableXOF=Y,this.rounds=Z,R7(X),!(0<$&&$<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Id(this.state)}clone(){return this._cloneInto()}keccak(){pI(this.state32),mO0(this.state32,this.rounds),pI(this.state32),this.posOut=0,this.pos=0}update($){BJ(this),$=nz($),QZ($);let{blockLen:Q,state:X}=this,Y=$.length;for(let Z=0;Z<Y;){let J=Math.min(Q-this.pos,Y-Z);for(let q=0;q<J;q++)X[this.pos++]^=$[Z++];if(this.pos===Q)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:$,suffix:Q,pos:X,blockLen:Y}=this;if($[X]^=Q,(Q&128)!==0&&X===Y-1)this.keccak();$[Y-1]^=128,this.keccak()}writeInto($){BJ(this,!1),QZ($),this.finish();let Q=this.state,{blockLen:X}=this;for(let Y=0,Z=$.length;Y<Z;){if(this.posOut>=X)this.keccak();let J=Math.min(X-this.posOut,Z-Y);$.set(Q.subarray(this.posOut,this.posOut+J),Y),this.posOut+=J,Y+=J}return $}xofInto($){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto($)}xof($){return R7($),this.xofInto(new Uint8Array($))}digestInto($){if(RO($,this),this.finished)throw new Error("digest() was already called");return this.writeInto($),this.destroy(),$}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,SJ(this.state)}_cloneInto($){let{blockLen:Q,suffix:X,outputLen:Y,rounds:Z,enableXOF:J}=this;return $||($=new w3(Q,X,Y,J,Z)),$.state32.set(this.state32),$.pos=this.pos,$.posOut=this.posOut,$.finished=this.finished,$.rounds=Z,$.suffix=X,$.outputLen=Y,$.enableXOF=J,$.destroyed=this.destroyed,$}};pi=(()=>eH(1,144,28))(),T3=(()=>eH(1,136,32))(),li=(()=>eH(1,104,48))(),ui=(()=>eH(1,72,64))()});var Kl0,I3,Ul0,Wl0;var ii=y(()=>{di();SO();Kl0=Q4(pi),I3=(()=>{let $=Q4(T3);return $.create=T3.create,$})(),Ul0=Q4(li),Wl0=Q4(ui)});var Ol0;var ni=y(()=>{Ol0=new Uint8Array(0)});var oi=()=>{};var J4,jq;var ri=y(()=>{J4={String:"string",Bytes:"view",Number:"number"},jq={String:"string",Bytes:"view",JSON:"json"}});var si=()=>{};var ai=()=>{};var ti=()=>{};var Ll0;var $n=y(()=>{Z4();Ll0=Y4("0x05")});var Qn,Il0,Fl0,dO0=31,Bl0;var Xn=y(()=>{Z4();Qn={BasicData:0,CodeHash:1},Il0=w6(Qn.BasicData),Fl0=w6(Qn.CodeHash),Bl0=BigInt(256)**BigInt(dO0)});var iO0=32,Yn=4096,nO0,oO0=2,El0,_l0;var Zn=y(()=>{nO0=32*Yn,El0=nO0*oO0-1,_l0=iO0*Yn});var Jn=()=>{};class F3{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){if(this.permits>0)return this.permits-=1,Promise.resolve(!0);return new Promise(($)=>this.promiseResolverQueue.push($))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(this.permits===1&&this.promiseResolverQueue.length>0){this.permits-=1;let $=this.promiseResolverQueue.shift();if($)$(!0)}}}class $N{constructor($){this._database=$??new Map}async get($){let Q=$ instanceof Uint8Array?zX($):$.toString();return this._database.get(Q)}async put($,Q){let X=$ instanceof Uint8Array?zX($):$.toString();this._database.set(X,Q)}async del($){let Q=$ instanceof Uint8Array?zX($):$.toString();this._database.delete(Q)}async batch($){for(let Q of $){if(Q.type==="del")await this.del(Q.key);if(Q.type==="put")await this.put(Q.key,Q.value)}}shallowCopy(){return new $N(this._database)}open(){return Promise.resolve()}}var qn=y(()=>{Z4()});var Gn=()=>{};var zn=()=>{};class B3{constructor($){this.maxPoolSize=$,this.currentPoolSize=0,this.queue=[]}executeOrQueue($,Q){if(this.currentPoolSize<this.maxPoolSize)this.currentPoolSize++,Q(()=>{if(this.currentPoolSize--,this.queue.length>0){this.queue.sort((Y,Z)=>Z.priority-Y.priority);let X=this.queue.shift();this.executeOrQueue(X.priority,X.fn)}});else this.queue.push({priority:$,fn:Q})}finished(){return this.currentPoolSize===0}}var Kn,ml0,cl0,rO0=31,pl0;var Un=y(()=>{Z4();Kn={BasicData:0,CodeHash:1},ml0=w6(Kn.BasicData),cl0=w6(Kn.CodeHash),pl0=BigInt(256)**BigInt(rO0)});var q4=y(()=>{fi();aH();vi();ni();oi();ri();ai();ti();Z4();si();$n();Xn();Zn();Jn();qn();Gn();zn();Un()});var Wn=()=>{};class I6{heap;length;static#$=!1;static create($){let Q=Dn($);if(!Q)return[];I6.#$=!0;let X=new I6($,Q);return I6.#$=!1,X}constructor($,Q){if(!I6.#$)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new Q($),this.length=0}push($){this.heap[this.length++]=$}pop(){return this.heap[--this.length]}}var T6,On,S3,Mn=($,Q,X,Y)=>{typeof S3.emitWarning==="function"?S3.emitWarning($,Q,X,Y):console.error(`[${X}] ${Q}: ${$}`)},QN,Vn,sO0=($)=>!On.has($),Vu0,w7=($)=>$&&$===Math.floor($)&&$>0&&isFinite($),Dn=($)=>!w7($)?null:$<=Math.pow(2,8)?Uint8Array:$<=Math.pow(2,16)?Uint16Array:$<=Math.pow(2,32)?Uint32Array:$<=Number.MAX_SAFE_INTEGER?kO:null,kO,XN;var jn=y(()=>{T6=typeof performance==="object"&&performance&&typeof performance.now==="function"?performance:Date,On=new Set,S3=typeof process==="object"&&!!process?process:{},QN=globalThis.AbortController,Vn=globalThis.AbortSignal;if(typeof QN==="undefined"){Vn=class X{onabort;_onabort=[];reason;aborted=!1;addEventListener(Y,Z){this._onabort.push(Z)}},QN=class X{constructor(){Q()}signal=new Vn;abort(Y){if(this.signal.aborted)return;this.signal.reason=Y,this.signal.aborted=!0;for(let Z of this.signal._onabort)Z(Y);this.signal.onabort?.(Y)}};let $=S3.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",Q=()=>{if(!$)return;$=!1,Mn("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",Q)}}Vu0=Symbol("type");kO=class kO extends Array{constructor($){super($);this.fill(0)}};XN=class XN{#$;#Q;#X;#Y;#Z;#G;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#J;#z;#W;#K;#q;#M;#U;#O;#V;#D;#P;#H;#N;#R;#L;#B;#A;static unsafeExposeInternals($){return{starts:$.#N,ttls:$.#R,sizes:$.#H,keyMap:$.#W,keyList:$.#K,valList:$.#q,next:$.#M,prev:$.#U,get head(){return $.#O},get tail(){return $.#V},free:$.#D,isBackgroundFetch:(Q)=>$.#j(Q),backgroundFetch:(Q,X,Y,Z)=>$.#f(Q,X,Y,Z),moveToTail:(Q)=>$.#_(Q),indexes:(Q)=>$.#w(Q),rindexes:(Q)=>$.#T(Q),isStale:(Q)=>$.#C(Q)}}get max(){return this.#$}get maxSize(){return this.#Q}get calculatedSize(){return this.#z}get size(){return this.#J}get fetchMethod(){return this.#Z}get memoMethod(){return this.#G}get dispose(){return this.#X}get disposeAfter(){return this.#Y}constructor($){let{max:Q=0,ttl:X,ttlResolution:Y=1,ttlAutopurge:Z,updateAgeOnGet:J,updateAgeOnHas:q,allowStale:G,dispose:z,disposeAfter:M,noDisposeOnSet:j,noUpdateTTL:P,maxSize:D=0,maxEntrySize:A=0,sizeCalculation:I,fetchMethod:H,memoMethod:C,noDeleteOnFetchRejection:B,noDeleteOnStaleGet:S,allowStaleOnFetchRejection:_,allowStaleOnFetchAbort:k,ignoreFetchAbort:f}=$;if(Q!==0&&!w7(Q))throw new TypeError("max option must be a nonnegative integer");let g=Q?Dn(Q):Array;if(!g)throw new Error("invalid max value: "+Q);if(this.#$=Q,this.#Q=D,this.maxEntrySize=A||this.#Q,this.sizeCalculation=I,this.sizeCalculation){if(!this.#Q&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!=="function")throw new TypeError("sizeCalculation set to non-function")}if(C!==void 0&&typeof C!=="function")throw new TypeError("memoMethod must be a function if defined");if(this.#G=C,H!==void 0&&typeof H!=="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#Z=H,this.#B=!!H,this.#W=new Map,this.#K=new Array(Q).fill(void 0),this.#q=new Array(Q).fill(void 0),this.#M=new g(Q),this.#U=new g(Q),this.#O=0,this.#V=0,this.#D=I6.create(Q),this.#J=0,this.#z=0,typeof z==="function")this.#X=z;if(typeof M==="function")this.#Y=M,this.#P=[];else this.#Y=void 0,this.#P=void 0;if(this.#L=!!this.#X,this.#A=!!this.#Y,this.noDisposeOnSet=!!j,this.noUpdateTTL=!!P,this.noDeleteOnFetchRejection=!!B,this.allowStaleOnFetchRejection=!!_,this.allowStaleOnFetchAbort=!!k,this.ignoreFetchAbort=!!f,this.maxEntrySize!==0){if(this.#Q!==0){if(!w7(this.#Q))throw new TypeError("maxSize must be a positive integer if specified")}if(!w7(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#c()}if(this.allowStale=!!G,this.noDeleteOnStaleGet=!!S,this.updateAgeOnGet=!!J,this.updateAgeOnHas=!!q,this.ttlResolution=w7(Y)||Y===0?Y:1,this.ttlAutopurge=!!Z,this.ttl=X||0,this.ttl){if(!w7(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#v()}if(this.#$===0&&this.ttl===0&&this.#Q===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#$&&!this.#Q){if(sO0("LRU_CACHE_UNBOUNDED"))On.add("LRU_CACHE_UNBOUNDED"),Mn("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning","LRU_CACHE_UNBOUNDED",XN)}}getRemainingTTL($){return this.#W.has($)?1/0:0}#v(){let $=new kO(this.#$),Q=new kO(this.#$);this.#R=$,this.#N=Q,this.#g=(Z,J,q=T6.now())=>{if(Q[Z]=J!==0?q:0,$[Z]=J,J!==0&&this.ttlAutopurge){let G=setTimeout(()=>{if(this.#C(Z))this.#I(this.#K[Z],"expire")},J+1);if(G.unref)G.unref()}},this.#S=(Z)=>{Q[Z]=$[Z]!==0?T6.now():0},this.#F=(Z,J)=>{if($[J]){let q=$[J],G=Q[J];if(!q||!G)return;Z.ttl=q,Z.start=G,Z.now=X||Y();let z=Z.now-G;Z.remainingTTL=q-z}};let X=0,Y=()=>{let Z=T6.now();if(this.ttlResolution>0){X=Z;let J=setTimeout(()=>X=0,this.ttlResolution);if(J.unref)J.unref()}return Z};this.getRemainingTTL=(Z)=>{let J=this.#W.get(Z);if(J===void 0)return 0;let q=$[J],G=Q[J];if(!q||!G)return 1/0;let z=(X||Y())-G;return q-z},this.#C=(Z)=>{let J=Q[Z],q=$[Z];return!!q&&!!J&&(X||Y())-J>q}}#S=()=>{};#F=()=>{};#g=()=>{};#C=()=>!1;#c(){let $=new kO(this.#$);this.#z=0,this.#H=$,this.#E=(Q)=>{this.#z-=$[Q],$[Q]=0},this.#y=(Q,X,Y,Z)=>{if(this.#j(X))return 0;if(!w7(Y))if(Z){if(typeof Z!=="function")throw new TypeError("sizeCalculation must be a function");if(Y=Z(X,Q),!w7(Y))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return Y},this.#k=(Q,X,Y)=>{if($[Q]=X,this.#Q){let Z=this.#Q-$[Q];while(this.#z>Z)this.#x(!0)}if(this.#z+=$[Q],Y)Y.entrySize=X,Y.totalCalculatedSize=this.#z}}#E=($)=>{};#k=($,Q,X)=>{};#y=($,Q,X,Y)=>{if(X||Y)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#w({allowStale:$=this.allowStale}={}){if(this.#J)for(let Q=this.#V;;){if(!this.#b(Q))break;if($||!this.#C(Q))yield Q;if(Q===this.#O)break;else Q=this.#U[Q]}}*#T({allowStale:$=this.allowStale}={}){if(this.#J)for(let Q=this.#O;;){if(!this.#b(Q))break;if($||!this.#C(Q))yield Q;if(Q===this.#V)break;else Q=this.#M[Q]}}#b($){return $!==void 0&&this.#W.get(this.#K[$])===$}*entries(){for(let $ of this.#w())if(this.#q[$]!==void 0&&this.#K[$]!==void 0&&!this.#j(this.#q[$]))yield[this.#K[$],this.#q[$]]}*rentries(){for(let $ of this.#T())if(this.#q[$]!==void 0&&this.#K[$]!==void 0&&!this.#j(this.#q[$]))yield[this.#K[$],this.#q[$]]}*keys(){for(let $ of this.#w()){let Q=this.#K[$];if(Q!==void 0&&!this.#j(this.#q[$]))yield Q}}*rkeys(){for(let $ of this.#T()){let Q=this.#K[$];if(Q!==void 0&&!this.#j(this.#q[$]))yield Q}}*values(){for(let $ of this.#w())if(this.#q[$]!==void 0&&!this.#j(this.#q[$]))yield this.#q[$]}*rvalues(){for(let $ of this.#T())if(this.#q[$]!==void 0&&!this.#j(this.#q[$]))yield this.#q[$]}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find($,Q={}){for(let X of this.#w()){let Y=this.#q[X],Z=this.#j(Y)?Y.__staleWhileFetching:Y;if(Z===void 0)continue;if($(Z,this.#K[X],this))return this.get(this.#K[X],Q)}}forEach($,Q=this){for(let X of this.#w()){let Y=this.#q[X],Z=this.#j(Y)?Y.__staleWhileFetching:Y;if(Z===void 0)continue;$.call(Q,Z,this.#K[X],this)}}rforEach($,Q=this){for(let X of this.#T()){let Y=this.#q[X],Z=this.#j(Y)?Y.__staleWhileFetching:Y;if(Z===void 0)continue;$.call(Q,Z,this.#K[X],this)}}purgeStale(){let $=!1;for(let Q of this.#T({allowStale:!0}))if(this.#C(Q))this.#I(this.#K[Q],"expire"),$=!0;return $}info($){let Q=this.#W.get($);if(Q===void 0)return;let X=this.#q[Q],Y=this.#j(X)?X.__staleWhileFetching:X;if(Y===void 0)return;let Z={value:Y};if(this.#R&&this.#N){let J=this.#R[Q],q=this.#N[Q];if(J&&q){let G=J-(T6.now()-q);Z.ttl=G,Z.start=Date.now()}}if(this.#H)Z.size=this.#H[Q];return Z}dump(){let $=[];for(let Q of this.#w({allowStale:!0})){let X=this.#K[Q],Y=this.#q[Q],Z=this.#j(Y)?Y.__staleWhileFetching:Y;if(Z===void 0||X===void 0)continue;let J={value:Z};if(this.#R&&this.#N){J.ttl=this.#R[Q];let q=T6.now()-this.#N[Q];J.start=Math.floor(Date.now()-q)}if(this.#H)J.size=this.#H[Q];$.unshift([X,J])}return $}load($){this.clear();for(let[Q,X]of $){if(X.start){let Y=Date.now()-X.start;X.start=T6.now()-Y}this.set(Q,X.value,X)}}set($,Q,X={}){if(Q===void 0)return this.delete($),this;let{ttl:Y=this.ttl,start:Z,noDisposeOnSet:J=this.noDisposeOnSet,sizeCalculation:q=this.sizeCalculation,status:G}=X,{noUpdateTTL:z=this.noUpdateTTL}=X,M=this.#y($,Q,X.size||0,q);if(this.maxEntrySize&&M>this.maxEntrySize){if(G)G.set="miss",G.maxEntrySizeExceeded=!0;return this.#I($,"set"),this}let j=this.#J===0?void 0:this.#W.get($);if(j===void 0){if(j=this.#J===0?this.#V:this.#D.length!==0?this.#D.pop():this.#J===this.#$?this.#x(!1):this.#J,this.#K[j]=$,this.#q[j]=Q,this.#W.set($,j),this.#M[this.#V]=j,this.#U[j]=this.#V,this.#V=j,this.#J++,this.#k(j,M,G),G)G.set="add";z=!1}else{this.#_(j);let P=this.#q[j];if(Q!==P){if(this.#B&&this.#j(P)){P.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:D}=P;if(D!==void 0&&!J){if(this.#L)this.#X?.(D,$,"set");if(this.#A)this.#P?.push([D,$,"set"])}}else if(!J){if(this.#L)this.#X?.(P,$,"set");if(this.#A)this.#P?.push([P,$,"set"])}if(this.#E(j),this.#k(j,M,G),this.#q[j]=Q,G){G.set="replace";let D=P&&this.#j(P)?P.__staleWhileFetching:P;if(D!==void 0)G.oldValue=D}}else if(G)G.set="update"}if(Y!==0&&!this.#R)this.#v();if(this.#R){if(!z)this.#g(j,Y,Z);if(G)this.#F(G,j)}if(!J&&this.#A&&this.#P){let P=this.#P,D;while(D=P?.shift())this.#Y?.(...D)}return this}pop(){try{while(this.#J){let $=this.#q[this.#O];if(this.#x(!0),this.#j($)){if($.__staleWhileFetching)return $.__staleWhileFetching}else if($!==void 0)return $}}finally{if(this.#A&&this.#P){let $=this.#P,Q;while(Q=$?.shift())this.#Y?.(...Q)}}}#x($){let Q=this.#O,X=this.#K[Q],Y=this.#q[Q];if(this.#B&&this.#j(Y))Y.__abortController.abort(new Error("evicted"));else if(this.#L||this.#A){if(this.#L)this.#X?.(Y,X,"evict");if(this.#A)this.#P?.push([Y,X,"evict"])}if(this.#E(Q),$)this.#K[Q]=void 0,this.#q[Q]=void 0,this.#D.push(Q);if(this.#J===1)this.#O=this.#V=0,this.#D.length=0;else this.#O=this.#M[Q];return this.#W.delete(X),this.#J--,Q}has($,Q={}){let{updateAgeOnHas:X=this.updateAgeOnHas,status:Y}=Q,Z=this.#W.get($);if(Z!==void 0){let J=this.#q[Z];if(this.#j(J)&&J.__staleWhileFetching===void 0)return!1;if(!this.#C(Z)){if(X)this.#S(Z);if(Y)Y.has="hit",this.#F(Y,Z);return!0}else if(Y)Y.has="stale",this.#F(Y,Z)}else if(Y)Y.has="miss";return!1}peek($,Q={}){let{allowStale:X=this.allowStale}=Q,Y=this.#W.get($);if(Y===void 0||!X&&this.#C(Y))return;let Z=this.#q[Y];return this.#j(Z)?Z.__staleWhileFetching:Z}#f($,Q,X,Y){let Z=Q===void 0?void 0:this.#q[Q];if(this.#j(Z))return Z;let J=new QN,{signal:q}=X;q?.addEventListener("abort",()=>J.abort(q.reason),{signal:J.signal});let G={signal:J.signal,options:X,context:Y},z=(I,H=!1)=>{let{aborted:C}=J.signal,B=X.ignoreFetchAbort&&I!==void 0;if(X.status)if(C&&!H){if(X.status.fetchAborted=!0,X.status.fetchError=J.signal.reason,B)X.status.fetchAbortIgnored=!0}else X.status.fetchResolved=!0;if(C&&!B&&!H)return j(J.signal.reason);let S=D;if(this.#q[Q]===D)if(I===void 0)if(S.__staleWhileFetching)this.#q[Q]=S.__staleWhileFetching;else this.#I($,"fetch");else{if(X.status)X.status.fetchUpdated=!0;this.set($,I,G.options)}return I},M=(I)=>{if(X.status)X.status.fetchRejected=!0,X.status.fetchError=I;return j(I)},j=(I)=>{let{aborted:H}=J.signal,C=H&&X.allowStaleOnFetchAbort,B=C||X.allowStaleOnFetchRejection,S=B||X.noDeleteOnFetchRejection,_=D;if(this.#q[Q]===D){if(!S||_.__staleWhileFetching===void 0)this.#I($,"fetch");else if(!C)this.#q[Q]=_.__staleWhileFetching}if(B){if(X.status&&_.__staleWhileFetching!==void 0)X.status.returnedStale=!0;return _.__staleWhileFetching}else if(_.__returned===_)throw I},P=(I,H)=>{let C=this.#Z?.($,Z,G);if(C&&C instanceof Promise)C.then((B)=>I(B===void 0?void 0:B),H);J.signal.addEventListener("abort",()=>{if(!X.ignoreFetchAbort||X.allowStaleOnFetchAbort){if(I(void 0),X.allowStaleOnFetchAbort)I=(B)=>z(B,!0)}})};if(X.status)X.status.fetchDispatched=!0;let D=new Promise(P).then(z,M),A=Object.assign(D,{__abortController:J,__staleWhileFetching:Z,__returned:void 0});if(Q===void 0)this.set($,A,{...G.options,status:void 0}),Q=this.#W.get($);else this.#q[Q]=A;return A}#j($){if(!this.#B)return!1;let Q=$;return!!Q&&Q instanceof Promise&&Q.hasOwnProperty("__staleWhileFetching")&&Q.__abortController instanceof QN}async fetch($,Q={}){let{allowStale:X=this.allowStale,updateAgeOnGet:Y=this.updateAgeOnGet,noDeleteOnStaleGet:Z=this.noDeleteOnStaleGet,ttl:J=this.ttl,noDisposeOnSet:q=this.noDisposeOnSet,size:G=0,sizeCalculation:z=this.sizeCalculation,noUpdateTTL:M=this.noUpdateTTL,noDeleteOnFetchRejection:j=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:P=this.allowStaleOnFetchRejection,ignoreFetchAbort:D=this.ignoreFetchAbort,allowStaleOnFetchAbort:A=this.allowStaleOnFetchAbort,context:I,forceRefresh:H=!1,status:C,signal:B}=Q;if(!this.#B){if(C)C.fetch="get";return this.get($,{allowStale:X,updateAgeOnGet:Y,noDeleteOnStaleGet:Z,status:C})}let S={allowStale:X,updateAgeOnGet:Y,noDeleteOnStaleGet:Z,ttl:J,noDisposeOnSet:q,size:G,sizeCalculation:z,noUpdateTTL:M,noDeleteOnFetchRejection:j,allowStaleOnFetchRejection:P,allowStaleOnFetchAbort:A,ignoreFetchAbort:D,status:C,signal:B},_=this.#W.get($);if(_===void 0){if(C)C.fetch="miss";let k=this.#f($,_,S,I);return k.__returned=k}else{let k=this.#q[_];if(this.#j(k)){let l=X&&k.__staleWhileFetching!==void 0;if(C){if(C.fetch="inflight",l)C.returnedStale=!0}return l?k.__staleWhileFetching:k.__returned=k}let f=this.#C(_);if(!H&&!f){if(C)C.fetch="hit";if(this.#_(_),Y)this.#S(_);if(C)this.#F(C,_);return k}let g=this.#f($,_,S,I),m=g.__staleWhileFetching!==void 0&&X;if(C){if(C.fetch=f?"stale":"refresh",m&&f)C.returnedStale=!0}return m?g.__staleWhileFetching:g.__returned=g}}async forceFetch($,Q={}){let X=await this.fetch($,Q);if(X===void 0)throw new Error("fetch() returned undefined");return X}memo($,Q={}){let X=this.#G;if(!X)throw new Error("no memoMethod provided to constructor");let{context:Y,forceRefresh:Z,...J}=Q,q=this.get($,J);if(!Z&&q!==void 0)return q;let G=X($,q,{options:J,context:Y});return this.set($,G,J),G}get($,Q={}){let{allowStale:X=this.allowStale,updateAgeOnGet:Y=this.updateAgeOnGet,noDeleteOnStaleGet:Z=this.noDeleteOnStaleGet,status:J}=Q,q=this.#W.get($);if(q!==void 0){let G=this.#q[q],z=this.#j(G);if(J)this.#F(J,q);if(this.#C(q)){if(J)J.get="stale";if(!z){if(!Z)this.#I($,"expire");if(J&&X)J.returnedStale=!0;return X?G:void 0}else{if(J&&X&&G.__staleWhileFetching!==void 0)J.returnedStale=!0;return X?G.__staleWhileFetching:void 0}}else{if(J)J.get="hit";if(z)return G.__staleWhileFetching;if(this.#_(q),Y)this.#S(q);return G}}else if(J)J.get="miss"}#h($,Q){this.#U[Q]=$,this.#M[$]=Q}#_($){if($!==this.#V){if($===this.#O)this.#O=this.#M[$];else this.#h(this.#U[$],this.#M[$]);this.#h(this.#V,$),this.#V=$}}delete($){return this.#I($,"delete")}#I($,Q){let X=!1;if(this.#J!==0){let Y=this.#W.get($);if(Y!==void 0)if(X=!0,this.#J===1)this.#m(Q);else{this.#E(Y);let Z=this.#q[Y];if(this.#j(Z))Z.__abortController.abort(new Error("deleted"));else if(this.#L||this.#A){if(this.#L)this.#X?.(Z,$,Q);if(this.#A)this.#P?.push([Z,$,Q])}if(this.#W.delete($),this.#K[Y]=void 0,this.#q[Y]=void 0,Y===this.#V)this.#V=this.#U[Y];else if(Y===this.#O)this.#O=this.#M[Y];else{let J=this.#U[Y];this.#M[J]=this.#M[Y];let q=this.#M[Y];this.#U[q]=this.#U[Y]}this.#J--,this.#D.push(Y)}}if(this.#A&&this.#P?.length){let Y=this.#P,Z;while(Z=Y?.shift())this.#Y?.(...Z)}return X}clear(){return this.#m("delete")}#m($){for(let Q of this.#T({allowStale:!0})){let X=this.#q[Q];if(this.#j(X))X.__abortController.abort(new Error("deleted"));else{let Y=this.#K[Q];if(this.#L)this.#X?.(X,Y,$);if(this.#A)this.#P?.push([X,Y,$])}}if(this.#W.clear(),this.#q.fill(void 0),this.#K.fill(void 0),this.#R&&this.#N)this.#R.fill(0),this.#N.fill(0);if(this.#H)this.#H.fill(0);if(this.#O=0,this.#V=0,this.#D.length=0,this.#z=0,this.#J=0,this.#A&&this.#P){let Q=this.#P,X;while(X=Q?.shift())this.#Y?.(...X)}}}});class xO{constructor($){if(this._stats={cache:{reads:0,hits:0,writes:0},db:{reads:0,hits:0,writes:0}},this.db=$.db,this.cacheSize=$.cacheSize??0,this.valueEncoding=$.valueEncoding??jq.String,this.checkpoints=[],this.cacheSize>0)this._cache=new XN({max:this.cacheSize,updateAgeOnGet:!0})}setCheckpoints($){this.checkpoints=[];for(let Q=0;Q<$.length;Q++)this.checkpoints.push({root:$[Q].root,keyValueMap:new Map($[Q].keyValueMap)})}hasCheckpoints(){return this.checkpoints.length>0}checkpoint($){this.checkpoints.push({keyValueMap:new Map,root:$})}async commit(){let{keyValueMap:$}=this.checkpoints.pop();if(!this.hasCheckpoints()){let Q=[];for(let[X,Y]of $.entries())if(Y===void 0)Q.push({type:"del",key:tH(X)});else Q.push({type:"put",key:tH(X),value:Y});await this.batch(Q)}else{let Q=this.checkpoints[this.checkpoints.length-1].keyValueMap;for(let[X,Y]of $.entries())Q.set(X,Y)}}async revert(){let{root:$}=this.checkpoints.pop();return $}async get($){let Q=zX($);if(this._cache!==void 0){let Z=this._cache.get(Q);if(this._stats.cache.reads+=1,Z!==void 0)return this._stats.cache.hits+=1,Z}for(let Z=this.checkpoints.length-1;Z>=0;Z--)if(this.checkpoints[Z].keyValueMap.has(Q))return this.checkpoints[Z].keyValueMap.get(Q);let X=await this.db.get(Q,{keyEncoding:J4.String,valueEncoding:this.valueEncoding});if(this._stats.db.reads+=1,X!==void 0)this._stats.db.hits+=1;let Y=X!==void 0?X instanceof Uint8Array?X:tH(X):void 0;if(this._cache?.set(Q,Y),this.hasCheckpoints())this.checkpoints[this.checkpoints.length-1].keyValueMap.set(Q,Y);return Y}async put($,Q){let X=zX($);if(this.hasCheckpoints())this.checkpoints[this.checkpoints.length-1].keyValueMap.set(X,Q);else{let Y=this.valueEncoding===jq.Bytes?Q:zX(Q);if(await this.db.put(X,Y,{keyEncoding:J4.String,valueEncoding:this.valueEncoding}),this._stats.db.writes+=1,this._cache!==void 0)this._cache.set(X,Q),this._stats.cache.writes+=1}}async del($){let Q=zX($);if(this.hasCheckpoints())this.checkpoints[this.checkpoints.length-1].keyValueMap.set(Q,void 0);else if(await this.db.del(Q,{keyEncoding:J4.String}),this._stats.db.writes+=1,this._cache!==void 0)this._cache.set(Q,void 0),this._stats.cache.writes+=1}async batch($){if(this.hasCheckpoints()){for(let Q of $)if(Q.type==="put")await this.put(Q.key,Q.value);else if(Q.type==="del")await this.del(Q.key)}else{let Q=$.map((X)=>{let Y={key:zX(X.key),value:X.type==="put"?X.value:void 0,type:X.type,opts:{...X.opts,...{valueEncoding:this.valueEncoding}}};if(this._stats.db.writes+=1,X.type==="put"&&this.valueEncoding===jq.String)Y.value=zX(Y.value);return Y});await this.db.batch(Q)}}stats($=!0){let Q={...this._stats,size:this._cache?.size??0};if($)this._stats={cache:{reads:0,hits:0,writes:0},db:{reads:0,hits:0,writes:0}};return Q}shallowCopy(){return new xO({db:this.db,cacheSize:this.cacheSize,valueEncoding:this.valueEncoding})}open(){return Promise.resolve()}}var E3=y(()=>{q4();jn()});var Pn=y(()=>{E3()});class v8{constructor(){this._branches=new Array(16).fill(null),this._value=null}static fromArray($){let Q=new v8;return Q._branches=$.slice(0,16),Q._value=$[16],Q}value($){if($!==null&&$!==void 0)this._value=$;return this._value&&this._value.length>0?this._value:null}setBranch($,Q){this._branches[$]=Q}raw(){return[...this._branches,this._value]}serialize(){return k9.encode(this.raw())}getBranch($){let Q=this._branches[$];if(Q!==null&&Q.length>0)return Q;else return null}getChildren(){let $=[];for(let Q=0;Q<16;Q++){let X=this._branches[Q];if(X!==null&&X.length>0)$.push([Q,X])}return $}}var YN=y(()=>{X4()});function Hn($,Q){if($.length%2)$.unshift(1);else $.unshift(0),$.unshift(0);if(Q)$[0]+=2;return $}function Nn($){if($[0]%2)$=$.slice(1);else $=$.slice(2);return $}function An($){return $[0]>1}function T7($){let Q=[];for(let X=0;X<$.length;X++){let Y=X*2;Q[Y]=$[X]>>4,++Y,Q[Y]=$[X]%16}return Q}function ZN($){let Q=new Uint8Array($.length/2);for(let X=0;X<Q.length;X++){let Y=X*2;Q[X]=($[Y]<<4)+$[++Y]}return Q}function _3($,Q){let X=0;while($[X]===Q[X]&&$.length>X)X++;return X}class fO{constructor($,Q,X){this._nibbles=$,this._value=Q,this._isLeaf=X}static decodeKey($){return Nn($)}encodedKey(){return Hn(this._nibbles.slice(0),this._isLeaf)}key($){if($!==void 0)this._nibbles=$;return this._nibbles.slice(0)}keyLength(){return this._nibbles.length}value($){if($!==void 0)this._value=$;return this._value}raw(){return[ZN(this.encodedKey()),this._value]}serialize(){return k9.encode(this.raw())}}var k3=y(()=>{X4()});var GY;var JN=y(()=>{k3();GY=class GY extends fO{constructor($,Q){super($,Q,!1)}raw(){return super.raw()}}});var fX;var x3=y(()=>{k3();fX=class fX extends fO{constructor($,Q){super($,Q,!0)}raw(){return super.raw()}}});function f3($){if($.length===17)return v8.fromArray($);else if($.length===2){let Q=T7($[0]);if(An(Q))return new fX(fX.decodeKey(Q),$[1]);return new GY(GY.decodeKey(Q),$[1])}else throw T$("Invalid node")}function F6($){return Array.isArray($)&&!($ instanceof Uint8Array)}function Rn($){let Q=k9.decode(Uint8Array.from($));if(!F6(Q))throw T$("Invalid node");return f3(Q)}var Cn=y(()=>{X4();q4();YN();JN();x3()});var qN=y(()=>{YN();JN();x3();Cn()});var B6;var v3=y(()=>{q4();B6=LO("__root__")});async function*GN($,Q=[],X=async(J,q)=>{},Y=async(J,q)=>!0,Z=new Set){if(L7($,this.EMPTY_TRIE_ROOT))return;try{let J=await this.lookupNode($);if(J===void 0||Z.has(T8(this.hash(J.serialize()))))return;if(Z.add(T8(this.hash(J.serialize()))),await X(J,Q),await Y(J,Q))yield{node:J,currentKey:Q};if(J instanceof v8)for(let[q,G]of J._branches.entries()){let z=[...Q,q],M=G instanceof Uint8Array?G:this.hash(k9.encode(G));yield*GN.bind(this)(M,z,X,Y,Z)}else if(J instanceof GY){let q=J.value(),G=[...Q,...J._nibbles];yield*GN.bind(this)(q,G,X,Y,Z)}}catch{return}}var Ln=y(()=>{X4();q4();YN();JN()});class zN{constructor($,Q,X){this.onNode=$,this.taskExecutor=new B3(X),this.trie=Q,this.resolve=()=>{},this.reject=()=>{}}static async newWalk($,Q,X,Y){await new zN($,Q,Y??500).startWalk(X)}async startWalk($){return new Promise(async(Q,X)=>{this.resolve=Q,this.reject=X;let Y;try{Y=await this.trie.lookupNode($)}catch(Z){return this.reject(Z)}this.processNode($,Y,[])})}allChildren($,Q=[]){if($ instanceof fX)return;let X;if($ instanceof GY)X=[[$.key(),$.value()]];else if($ instanceof v8)X=$.getChildren().map((Y)=>[[Y[0]],Y[1]]);if(!X)return;for(let Y of X){let Z=Y[0],J=Y[1],q=Q.concat(Z),G=q.length;this.pushNodeToQueue(J,q,G)}}pushNodeToQueue($,Q=[],X){this.taskExecutor.executeOrQueue(X??Q.length,async(Y)=>{let Z;try{Z=await this.trie.lookupNode($)}catch(J){return this.reject(J)}Y(),this.processNode($,Z,Q)})}onlyBranchIndex($,Q=[],X,Y){if(!($ instanceof v8))throw T$("Expected branch node");let Z=$.getBranch(X);if(!Z)throw T$("Could not get branch of childIndex");let J=Q.slice();J.push(X);let q=Y??J.length;this.pushNodeToQueue(Z,J,q)}processNode($,Q,X=[]){if(this.onNode($,Q,X,this),this.taskExecutor.finished())this.resolve()}}var g3=y(()=>{q4();qN()});class KN{constructor($){this._opts={useKeyHashing:!1,useKeyHashingFunction:I3,keyPrefix:void 0,useRootPersistence:!1,useNodePruning:!1,cacheSize:0,valueEncoding:jq.String},this._lock=new F3,this._debug=wn.default("mpt:#"),this.walkTrieIterable=GN.bind(this);let Q;if($!==void 0){if($?.valueEncoding!==void 0&&$.db===void 0)throw T$("`valueEncoding` can only be set if a `db` is provided");this._opts={...this._opts,...$},this._opts.useKeyHashingFunction=$.common?.customCrypto.keccak256??$.useKeyHashingFunction??I3,Q=$.db!==void 0?$.valueEncoding??jq.String:jq.Bytes}else Q=jq.Bytes;if(this.DEBUG=typeof window==="undefined"?process?.env?.DEBUG?.includes("ethjs")??!1:!1,this.debug=this.DEBUG?(X,Y=[])=>{let Z=this._debug;for(let J of Y)Z=Z.extend(J);Z(X)}:(...X)=>{},this.database($?.db??new $N,Q),this.EMPTY_TRIE_ROOT=this.hash(ki),this._hashLen=this.EMPTY_TRIE_ROOT.length,this._root=this.EMPTY_TRIE_ROOT,$?.root)this.root($.root);this.DEBUG&&this.debug(`Trie created:
    || Root: ${T8(this.root())}
    || Secure: ${this._opts.useKeyHashing}
    || Persistent: ${this._opts.useRootPersistence}
    || Pruning: ${this._opts.useNodePruning}
    || CacheSize: ${this._opts.cacheSize}
    || ----------------`)}database($,Q){if($!==void 0){if($ instanceof xO)throw T$("Cannot pass in an instance of CheckpointDB");this._db=new xO({db:$,cacheSize:this._opts.cacheSize,valueEncoding:Q})}return this._db}root($){if($!==void 0){if($===null)$=this.EMPTY_TRIE_ROOT;if(this.DEBUG&&this.debug(`Setting root to ${T8($)}`),$.length!==this._hashLen)throw T$(`Invalid root length. Roots are ${this._hashLen} bytes, got ${$.length} bytes`);this._root=$}return this._root}async checkRoot($){try{return await this.lookupNode($)!==null}catch(Q){if(Q.message==="Missing node in DB")return L7($,this.EMPTY_TRIE_ROOT);else throw Q}}async get($,Q=!1){this.DEBUG&&this.debug(`Key: ${T8($)}`,["get"]);let{node:X,remaining:Y}=await this.findPath(this.appliedKey($),Q),Z=null;if(X&&Y.length===0)Z=X.value();return this.DEBUG&&this.debug(`Value: ${Z===null?"null":T8(Z)}`,["get"]),Z}async put($,Q,X=!1){if(this.DEBUG&&this.debug(`Key: ${T8($)}`,["put"]),this.DEBUG&&this.debug(`Value: ${Q===null?"null":T8($)}`,["put"]),this._opts.useRootPersistence&&L7($,B6)===!0)throw T$(`Attempted to set '${D3(B6)}' key but it is not allowed.`);if(Q===null||Q.length===0)return this.del($);await this._lock.acquire();let Y=X?$:this.appliedKey($);if(L7(this.root(),this.EMPTY_TRIE_ROOT)===!0)await this._createInitialNode(Y,Q);else{let{remaining:Z,stack:J}=await this.findPath(Y),q=[];if(this._opts.useNodePruning){let G=await this.get($);if(G===null||L7(G,Q)===!1)q=J.map((M)=>this.hash(M.serialize())).map((M)=>{return{type:"del",key:this._opts.keyPrefix?_J(this._opts.keyPrefix,M):M,opts:{keyEncoding:J4.Bytes}}})}if(await this._updateNode(Y,Q,Z,J),this._opts.useNodePruning)await this._db.batch(q)}await this.persistRoot(),this._lock.release()}async del($,Q=!1){this.DEBUG&&this.debug(`Key: ${T8($)}`,["del"]),await this._lock.acquire();let X=Q?$:this.appliedKey($),{node:Y,stack:Z}=await this.findPath(X),J=[];if(this._opts.useNodePruning&&Y!==null)J=Z.map((G)=>this.hash(G.serialize())).map((G)=>{return{type:"del",key:this._opts.keyPrefix?_J(this._opts.keyPrefix,G):G,opts:{keyEncoding:J4.Bytes}}});if(Y)await this._deleteNode(X,Z);if(this._opts.useNodePruning)await this._db.batch(J);await this.persistRoot(),this._lock.release()}async findPath($,Q=!1,X={stack:[]}){let Y=T7($),Z=Y.length,J=Array.from({length:Z}),q=0;for(let P=0;P<X.stack.length-1;P++)J[P]=X.stack[P],q+=J[P]instanceof v8?1:J[P].keyLength();this.DEBUG&&this.debug(`Target (${Y.length}): [${Y}]`,["find_path"]);let G=null,z=async(P,D,A,I)=>{if(J[q]=D,D instanceof v8)if(q===Z)G={node:D,remaining:[],stack:J};else{let H=Y[q];this.DEBUG&&this.debug(`Looking for node on branch index: [${H}]`,["find_path","branch_node"]);let C=D.getBranch(H);if(this.DEBUG){let B;if(C===null)B="NULL";else B=`Branch index: ${H.toString()} - `,B+=C instanceof Uint8Array?`NodeHash: ${T8(C)}`:`Raw_Node: ${C.toString()}`;this.debug(B,["find_path","branch_node"])}if(!C)G={node:null,remaining:Y.slice(q),stack:J};else q++,I.onlyBranchIndex(D,A,H)}else if(D instanceof fX){let H=q;if(Z-q>D.key().length){G={node:null,remaining:Y.slice(H),stack:J};return}for(let C of D.key()){if(C!==Y[q]){G={node:null,remaining:Y.slice(H),stack:J};return}q++}G={node:D,remaining:[],stack:J}}else if(D instanceof GY){this.DEBUG&&this.debug(`Comparing node key to expected
|| Node_Key: [${D.key()}]
|| Expected: [${Y.slice(q,q+D.key().length)}]
|| Matching: [${Y.slice(q,q+D.key().length).toString()===D.key().toString()}]
            `,["find_path","extension_node"]);let H=q;for(let C of D.key()){if(this.DEBUG&&this.debug(`NextNode: ${D.value()}`,["find_path","extension_node"]),C!==Y[q]){G={node:null,remaining:Y.slice(H),stack:J};return}q++}I.allChildren(D,A)}},M=X.stack[X.stack.length-1],j=M!==void 0?this.hash(M.serialize()):this.root();try{this.DEBUG&&this.debug(`Walking trie from ${M===void 0?"ROOT":"NODE"}: ${T8(j)}`,["find_path"]),await this.walkTrie(j,z)}catch(P){if(P.message!=="Missing node in DB"||Q)throw P}if(G===null)G={node:null,remaining:[],stack:J};return this.DEBUG&&this.debug(G.node!==null?`Target Node FOUND for ${T7($)}`:"Target Node NOT FOUND",["find_path"]),G.stack=G.stack.filter((P)=>P!==void 0),this.DEBUG&&this.debug(`Result:
        || Node: ${G.node===null?"null":G.node.constructor.name}
        || Remaining: [${G.remaining}]
|| Stack: ${G.stack.map((P)=>P.constructor.name).join(", ")}`,["find_path"]),G}async walkTrie($,Q){await zN.newWalk(Q,this,$)}async walkAllNodes($){for await(let{node:Q,currentKey:X}of this.walkTrieIterable(this.root()))await $(Q,X)}async walkAllValueNodes($){for await(let{node:Q,currentKey:X}of this.walkTrieIterable(this.root(),[],void 0,async(Y)=>{return Y instanceof fX||Y instanceof v8&&Y.value()!==null}))await $(Q,X)}async _createInitialNode($,Q){let Y=new fX(T7($),Q).serialize();this.root(this.hash(Y));let Z=this.root();Z=this._opts.keyPrefix?_J(this._opts.keyPrefix,Z):Z,await this._db.put(Z,Y),await this.persistRoot()}async lookupNode($){if(F6($)){let Z=f3($);return this.DEBUG&&this.debug(`${Z.constructor.name}`,["lookup_node","raw_node"]),Z}this.DEBUG&&this.debug(`${`${T8($)}`}`,["lookup_node","by_hash"]);let Q=this._opts.keyPrefix?_J(this._opts.keyPrefix,$):$,X=await this._db.get(Q)??null;if(X===null)throw T$("Missing node in DB");let Y=Rn(X);return this.DEBUG&&this.debug(`${Y.constructor.name} found in DB`,["lookup_node","by_hash"]),Y}async _updateNode($,Q,X,Y){let Z=[],J=Y.pop();if(!J)throw T$("Stack underflow");let q=T7($),G=!1;if(J instanceof fX){let z=0;for(let M=0;M<Y.length;M++){let j=Y[M];if(j instanceof v8)z++;else z+=j.key().length}if(X.length===0&&_3(J.key(),q.slice(z))===J.key().length)G=!0}if(G)J.value(Q),Y.push(J);else if(J instanceof v8)if(Y.push(J),X.length!==0){X.shift();let z=new fX(X,Q);Y.push(z)}else J.value(Q);else{let z=J.key(),M=_3(z,X),j=new v8;if(M!==0){let P=J.key().slice(0,M),D=new GY(P,Q);Y.push(D),z.splice(0,M),X.splice(0,M)}if(Y.push(j),z.length!==0){let P=z.shift();if(z.length!==0||J instanceof fX){J.key(z);let D=this._formatNode(J,!1,Z);j.setBranch(P,D)}else this._formatNode(J,!1,Z,!0),j.setBranch(P,J.value())}else j.value(J.value());if(X.length!==0){X.shift();let P=new fX(X,Q);Y.push(P)}else j.value(Q)}await this.saveStack(q,Y,Z)}async _deleteNode($,Q){let X=(z,M,j,P,D)=>{if(P===null||P===void 0||P instanceof v8){if(P!==null&&P!==void 0)D.push(P);if(j instanceof v8){let A=new GY([M],new Uint8Array);D.push(A),z.push(M)}else{let A=j.key();A.unshift(M),j.key(A.slice(0)),z=z.concat(A)}D.push(j)}else{let A=P.key();if(j instanceof v8)A.push(M),z.push(M),P.key(A),D.push(P);else{let I=j.key();I.unshift(M),z=z.concat(I),A=A.concat(I),j.key(A)}D.push(j)}return z},Y=Q.pop();if(Y===void 0)throw T$("missing last node");let Z=Q.pop(),J=[],q=T7($);if(Z===void 0){this.root(this.EMPTY_TRIE_ROOT);return}if(Y instanceof v8)Y.value(null);else{if(!(Z instanceof v8))throw T$("Expected branch node");let z=Y.key();q.splice(q.length-z.length),this._formatNode(Y,!1,J,!0),Z.setBranch(q.pop(),null),Y=Z,Z=Q.pop()}let G=Y.getChildren();if(G.length===1){let z=G[0][1],M=G[0][0];if(this._opts.useNodePruning)J.push({type:"del",key:F6(z)?this.appliedKey(k9.encode(z)):z});let j=await this.lookupNode(z);q=X(q,M,j,Z,Q),await this.saveStack(q,Q,J)}else{if(Z)Q.push(Z);Q.push(Y),await this.saveStack(q,Q,J)}}async saveStack($,Q,X){let Y;while(Q.length){let Z=Q.pop();if(Z===void 0)throw T$("saveStack: missing node");if(Z instanceof fX||Z instanceof GY)$.splice($.length-Z.key().length);if(Z instanceof GY&&Y!==void 0)Z.value(Y);if(Z instanceof v8&&Y!==void 0){let J=$.pop();Z.setBranch(J,Y)}Y=this._formatNode(Z,Q.length===0,X)}if(Y!==void 0)this.root(Y);await this._db.batch(X),await this.persistRoot()}_formatNode($,Q,X,Y=!1){let Z=$.serialize();if(Z.length>=32||Q){let J=this.hash(Z),q=this._opts.keyPrefix?_J(this._opts.keyPrefix,J):J;if(Y){if(this._opts.useNodePruning)X.push({type:"del",key:q})}else X.push({type:"put",key:q,value:Z});return J}return $.raw()}async batch($,Q){for(let X of $)if(X.type==="put"){if(X.value===null||X.value===void 0)throw T$("Invalid batch db operation");await this.put(X.key,X.value,Q)}else if(X.type==="del")await this.del(X.key,Q);await this.persistRoot()}async verifyPrunedIntegrity(){let $=[zX(this.root()),zX(this.appliedKey(B6))];for(let Q of this._db.db._database.keys()){if($.includes(Q))continue;let X=!1;try{await this.walkTrie(this.root(),async function(Y,Z,J,q){if(X)return;if(Z instanceof v8){for(let G of Z._branches)if(G!==null&&zX(F6(G)?q.trie.appliedKey(k9.encode(G)):G)===Q){X=!0;return}q.allChildren(Z,J)}if(Z instanceof GY){if(zX(Z.value())===Q){X=!0;return}q.allChildren(Z,J)}})}catch{return!1}if(!X)return!1}return!0}shallowCopy($=!0,Q){let X=new KN({...this._opts,db:this._db.db.shallowCopy(),root:this.root(),cacheSize:0,...Q??{}});if($&&this.hasCheckpoints())X._db.setCheckpoints(this._db.checkpoints);return X}async persistRoot(){if(this._opts.useRootPersistence){this.DEBUG&&this.debug(`Persisting root: 
|| RootHash: ${T8(this.root())}
|| RootKey: ${T8(this.appliedKey(B6))}`,["persist_root"]);let $=this.appliedKey(B6);$=this._opts.keyPrefix?_J(this._opts.keyPrefix,$):$,await this._db.put($,this.root())}}async _findDbNodes($){let Q=async(X,Y,Z,J)=>{if(F6(X)){if(Y!==null)J.allChildren(Y,Z)}else $(X,Y,Z,J)};await this.walkTrie(this.root(),Q)}appliedKey($){if(this._opts.useKeyHashing)return this.hash($);return $}hash($){return Uint8Array.from(this._opts.useKeyHashingFunction.call(void 0,$))}hasCheckpoints(){return this._db.hasCheckpoints()}checkpoint(){this.DEBUG&&this.debug(`${T8(this.root())}`,["checkpoint"]),this._db.checkpoint(this.root())}async commit(){if(!this.hasCheckpoints())throw T$("trying to commit when not checkpointed");this.DEBUG&&this.debug(`${T8(this.root())}`,["commit"]),await this._lock.acquire(),await this._db.commit(),await this.persistRoot(),this._lock.release()}async revert(){if(!this.hasCheckpoints())throw T$("trying to revert when not checkpointed");this.DEBUG&&this.debug(`${T8(this.root())}`,["revert","before"]),await this._lock.acquire(),this.root(await this._db.revert()),await this.persistRoot(),this._lock.release(),this.DEBUG&&this.debug(`${T8(this.root())}`,["revert","after"])}flushCheckpoints(){this.DEBUG&&this.debug(`Deleting ${this._db.checkpoints.length} checkpoints.`,["flush_checkpoints"]),this._db.checkpoints=[]}async getValueMap($=xi,Q){let X=Q!==void 0?!1:!0,Y=0,Z={},J=null;return await this.walkAllValueNodes(async(q,G)=>{if(q instanceof fX){let z=ZN(G.concat(q.key()));if(!X)if(EO(z)>=$)X=!0;else return;if(Q===void 0||Y<Q)Z[T8(z)]=T8(q._value),Y++;else if(Y===Q)J=T8(z)}}),{values:Z,nextKey:J}}}var wn;var Tn=y(()=>{X4();q4();wn=RX(QX(),1);ii();E3();qN();v3();Ln();g3()});var In=()=>{};var Fn=()=>{};var Bn=y(()=>{In();Fn()});var Sn=()=>{};var En=()=>{};var _n=y(()=>{Sn();En();g3()});var kn=y(()=>{Wn();Pn();Tn();qN();Bn();v3();_n()});function r0($,Q){return new y3({code:"ETHEREUMJS_DEFAULT_ERROR_CODE"},$,Q)}var y3;var b3=y(()=>{y3=class y3 extends Error{constructor($,Q,X){super(Q??$.code);if(this.type=$,X!==void 0)this.stack=X}getMetadata(){return this.type}toObject(){return{type:this.getMetadata(),message:this.message??"",stack:this.stack??"",className:this.constructor.name}}}});function xn($){if($[0]===0)throw r0("invalid RLP: extra zeros");return eO0(tO0($))}function fn($,Q){if($<56)return Uint8Array.from([$+Q]);let X=c3($),Y=X.length/2,Z=c3(Q+55+Y);return Uint8Array.from(m3(Z+X))}function S6($,Q,X){if(X>$.length)throw r0("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return $.slice(Q,X)}function h3($){let Q,X,Y,Z,J,q=[],G=$[0];if(G<=127)return{data:$.slice(0,1),remainder:$.subarray(1)};else if(G<=183){if(Q=G-127,G===128)Y=Uint8Array.from([]);else Y=S6($,1,Q);if(Q===2&&Y[0]<128)throw r0("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:Y,remainder:$.subarray(Q)}}else if(G<=191){if(X=G-182,$.length-1<X)throw r0("invalid RLP: not enough bytes for string length");if(Q=xn(S6($,1,X)),Q<=55)throw r0("invalid RLP: expected string length to be greater than 55");return Y=S6($,X,Q+X),{data:Y,remainder:$.subarray(Q+X)}}else if(G<=247){Q=G-191,Z=S6($,1,Q);while(Z.length)J=h3(Z),q.push(J.data),Z=J.remainder;return{data:q,remainder:$.subarray(Q)}}else{if(X=G-246,Q=xn(S6($,1,X)),Q<56)throw r0("invalid RLP: encoded list too short");let z=X+Q;if(z>$.length)throw r0("invalid RLP: total length is larger than the data");Z=S6($,X,z);while(Z.length)J=h3(Z),q.push(J.data),Z=J.remainder;return{data:q,remainder:$.subarray(z)}}}function tO0($){let Q="";for(let X=0;X<$.length;X++)Q+=aO0[$[X]];return Q}function eO0($){let Q=Number.parseInt($,16);if(Number.isNaN(Q))throw r0("Invalid byte sequence");return Q}function vn($){if($>=Pq._0&&$<=Pq._9)return $-Pq._0;if($>=Pq._A&&$<=Pq._F)return $-(Pq._A-10);if($>=Pq._a&&$<=Pq._f)return $-(Pq._a-10);return}function m3($){if($.slice(0,2)==="0x")$=$.slice(0,2);if(typeof $!=="string")throw r0("hex string expected, got "+typeof $);let Q=$.length,X=Q/2;if(Q%2)throw r0("padded hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=vn($.charCodeAt(J)),G=vn($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw r0('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function gn(...$){if($.length===1)return $[0];let Q=$.reduce((Y,Z)=>Y+Z.length,0),X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}function $M0($){return new TextEncoder().encode($)}function c3($){if($<0)throw r0("Invalid integer as argument, must be unsigned!");let Q=$.toString(16);return Q.length%2?`0${Q}`:Q}function QM0($){return $.length%2?`0${$}`:$}function yn($){return $.length>=2&&$[0]==="0"&&$[1]==="x"}function XM0($){if(typeof $!=="string")return $;return yn($)?$.slice(2):$}function bn($){if($ instanceof Uint8Array)return $;if(typeof $==="string"){if(yn($))return m3(QM0(XM0($)));return $M0($)}if(typeof $==="number"||typeof $==="bigint"){if(!$)return Uint8Array.from([]);return m3(c3($))}if($===null||$===void 0)return Uint8Array.from([]);throw r0("toBytes: received unsupported type "+typeof $)}function hn($){if(Array.isArray($)){let X=[],Y=0;for(let Z=0;Z<$.length;Z++){let J=hn($[Z]);X.push(J),Y+=J.length}return gn(fn(Y,192),...X)}let Q=bn($);if(Q.length===1&&Q[0]<128)return Q;return gn(fn(Q.length,128),Q)}function YM0($,Q=!1){if(typeof $==="undefined"||$===null||$.length===0)return Uint8Array.from([]);let X=bn($),Y=h3(X);if(Q)return{data:Y.data,remainder:Y.remainder.slice()};if(Y.remainder.length!==0)throw r0("invalid RLP: remainder must be zero");return Y.data}var aO0,Pq,E6;var UN=y(()=>{b3();b3();aO0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));Pq={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};E6={encode:hn,decode:YM0}});function U$($,Q){return new p3({code:"ETHEREUMJS_DEFAULT_ERROR_CODE"},$,Q)}var p3;var l3=y(()=>{p3=class p3 extends Error{constructor($,Q,X){super(Q??$.code);if(this.type=$,X!==void 0)this.stack=X}getMetadata(){return this.type}toObject(){return{type:this.getMetadata(),message:this.message??"",stack:this.stack??"",className:this.constructor.name}}}});function mn($){if($[0]===0)throw U$("invalid RLP: extra zeros");return qM0(JM0($))}function cn($,Q){if($<56)return Uint8Array.from([$+Q]);let X=i3($),Y=X.length/2,Z=i3(Q+55+Y);return Uint8Array.from(d3(Z+X))}function _6($,Q,X){if(X>$.length)throw U$("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return $.slice(Q,X)}function u3($){let Q,X,Y,Z,J,q=[],G=$[0];if(G<=127)return{data:$.slice(0,1),remainder:$.subarray(1)};else if(G<=183){if(Q=G-127,G===128)Y=Uint8Array.from([]);else Y=_6($,1,Q);if(Q===2&&Y[0]<128)throw U$("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:Y,remainder:$.subarray(Q)}}else if(G<=191){if(X=G-182,$.length-1<X)throw U$("invalid RLP: not enough bytes for string length");if(Q=mn(_6($,1,X)),Q<=55)throw U$("invalid RLP: expected string length to be greater than 55");return Y=_6($,X,Q+X),{data:Y,remainder:$.subarray(Q+X)}}else if(G<=247){Q=G-191,Z=_6($,1,Q);while(Z.length)J=u3(Z),q.push(J.data),Z=J.remainder;return{data:q,remainder:$.subarray(Q)}}else{if(X=G-246,Q=mn(_6($,1,X)),Q<56)throw U$("invalid RLP: encoded list too short");let z=X+Q;if(z>$.length)throw U$("invalid RLP: total length is larger than the data");Z=_6($,X,z);while(Z.length)J=u3(Z),q.push(J.data),Z=J.remainder;return{data:q,remainder:$.subarray(z)}}}function JM0($){let Q="";for(let X=0;X<$.length;X++)Q+=ZM0[$[X]];return Q}function qM0($){let Q=Number.parseInt($,16);if(Number.isNaN(Q))throw U$("Invalid byte sequence");return Q}function pn($){if($>=Hq._0&&$<=Hq._9)return $-Hq._0;if($>=Hq._A&&$<=Hq._F)return $-(Hq._A-10);if($>=Hq._a&&$<=Hq._f)return $-(Hq._a-10);return}function d3($){if($.slice(0,2)==="0x")$=$.slice(0,2);if(typeof $!=="string")throw U$("hex string expected, got "+typeof $);let Q=$.length,X=Q/2;if(Q%2)throw U$("padded hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=pn($.charCodeAt(J)),G=pn($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw U$('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function ln(...$){if($.length===1)return $[0];let Q=$.reduce((Y,Z)=>Y+Z.length,0),X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}function GM0($){return new TextEncoder().encode($)}function i3($){if($<0)throw U$("Invalid integer as argument, must be unsigned!");let Q=$.toString(16);return Q.length%2?`0${Q}`:Q}function zM0($){return $.length%2?`0${$}`:$}function un($){return $.length>=2&&$[0]==="0"&&$[1]==="x"}function KM0($){if(typeof $!=="string")return $;return un($)?$.slice(2):$}function dn($){if($ instanceof Uint8Array)return $;if(typeof $==="string"){if(un($))return d3(zM0(KM0($)));return GM0($)}if(typeof $==="number"||typeof $==="bigint"){if(!$)return Uint8Array.from([]);return d3(i3($))}if($===null||$===void 0)return Uint8Array.from([]);throw U$("toBytes: received unsupported type "+typeof $)}function nn($){if(Array.isArray($)){let X=[],Y=0;for(let Z=0;Z<$.length;Z++){let J=nn($[Z]);X.push(J),Y+=J.length}return ln(cn(Y,192),...X)}let Q=dn($);if(Q.length===1&&Q[0]<128)return Q;return ln(cn(Q.length,128),Q)}function UM0($,Q=!1){if(typeof $==="undefined"||$===null||$.length===0)return Uint8Array.from([]);let X=dn($),Y=u3(X);if(Q)return{data:Y.data,remainder:Y.remainder.slice()};if(Y.remainder.length!==0)throw U$("invalid RLP: remainder must be zero");return Y.data}var ZM0,Hq,n3;var o3=y(()=>{l3();l3();ZM0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));Hq={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};n3={encode:nn,decode:UM0}});var G4;var on=y(()=>{G4=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function WM0($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function I7($){if(!Number.isSafeInteger($)||$<0)throw new Error("positive integer expected, got "+$)}function ZZ($,...Q){if(!WM0($))throw new Error("Uint8Array expected");if(Q.length>0&&!Q.includes($.length))throw new Error("Uint8Array expected of length "+Q+", got length="+$.length)}function sn($){if(typeof $!=="function"||typeof $.create!=="function")throw new Error("Hash should be wrapped by utils.createHasher");I7($.outputLen),I7($.blockLen)}function kJ($,Q=!0){if($.destroyed)throw new Error("Hash instance has been destroyed");if(Q&&$.finished)throw new Error("Hash#digest() has already been called")}function vO($,Q){ZZ($);let X=Q.outputLen;if($.length<X)throw new Error("digestInto() expects output buffer of length at least "+X)}function an($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function xJ(...$){for(let Q=0;Q<$.length;Q++)$[Q].fill(0)}function gO($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function x9($,Q){return $<<32-Q|$>>>Q}function OM0($){return $<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255}function MM0($){for(let Q=0;Q<$.length;Q++)$[Q]=OM0($[Q]);return $}function WN($){if(ZZ($),tn)return $.toHex();let Q="";for(let X=0;X<$.length;X++)Q+=DM0[$[X]];return Q}function rn($){if($>=Nq._0&&$<=Nq._9)return $-Nq._0;if($>=Nq.A&&$<=Nq.F)return $-(Nq.A-10);if($>=Nq.a&&$<=Nq.f)return $-(Nq.a-10);return}function en($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(tn)return Uint8Array.fromHex($);let Q=$.length,X=Q/2;if(Q%2)throw new Error("hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=rn($.charCodeAt(J)),G=rn($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw new Error('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function VN($){if(typeof $!=="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function z4($){if(typeof $==="string")$=VN($);return ZZ($),$}function s3(...$){let Q=0;for(let Y=0;Y<$.length;Y++){let Z=$[Y];ZZ(Z),Q+=Z.length}let X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}class K4{}function ON($){let Q=(Y)=>$().update(z4(Y)).digest(),X=$();return Q.outputLen=X.outputLen,Q.blockLen=X.blockLen,Q.create=()=>$(),Q}function $o($=32){if(G4&&typeof G4.getRandomValues==="function")return G4.getRandomValues(new Uint8Array($));if(G4&&typeof G4.randomBytes==="function")return Uint8Array.from(G4.randomBytes($));throw new Error("crypto.getRandomValues must be defined")}var VM0,r3,tn,DM0,Nq;var fJ=y(()=>{on();/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */VM0=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();r3=VM0?($)=>$:MM0,tn=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")(),DM0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));Nq={_0:48,_9:57,A:65,F:70,a:97,f:102}});function jM0($,Q,X,Y){if(typeof $.setBigUint64==="function")return $.setBigUint64(Q,X,Y);let Z=BigInt(32),J=BigInt(4294967295),q=Number(X>>Z&J),G=Number(X&J),z=Y?4:0,M=Y?0:4;$.setUint32(Q+z,q,Y),$.setUint32(Q+M,G,Y)}function Qo($,Q,X){return $&Q^~$&X}function Xo($,Q,X){return $&Q^$&X^Q&X}var a3,Aq;var Yo=y(()=>{fJ();a3=class a3 extends K4{constructor($,Q,X,Y){super();this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=$,this.outputLen=Q,this.padOffset=X,this.isLE=Y,this.buffer=new Uint8Array($),this.view=gO(this.buffer)}update($){kJ(this),$=z4($),ZZ($);let{view:Q,buffer:X,blockLen:Y}=this,Z=$.length;for(let J=0;J<Z;){let q=Math.min(Y-this.pos,Z-J);if(q===Y){let G=gO($);for(;Y<=Z-J;J+=Y)this.process(G,J);continue}if(X.set($.subarray(J,J+q),this.pos),this.pos+=q,J+=q,this.pos===Y)this.process(Q,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){kJ(this),vO($,this),this.finished=!0;let{buffer:Q,view:X,blockLen:Y,isLE:Z}=this,{pos:J}=this;if(Q[J++]=128,xJ(this.buffer.subarray(J)),this.padOffset>Y-J)this.process(X,0),J=0;for(let j=J;j<Y;j++)Q[j]=0;jM0(X,Y-8,BigInt(this.length*8),Z),this.process(X,0);let q=gO($),G=this.outputLen;if(G%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let z=G/4,M=this.get();if(z>M.length)throw new Error("_sha2: outputLen bigger than state");for(let j=0;j<z;j++)q.setUint32(4*j,M[j],Z)}digest(){let{buffer:$,outputLen:Q}=this;this.digestInto($);let X=$.slice(0,Q);return this.destroy(),X}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:Q,buffer:X,length:Y,finished:Z,destroyed:J,pos:q}=this;if($.destroyed=J,$.finished=Z,$.length=Y,$.pos=q,Y%Q)$.buffer.set(X);return $}clone(){return this._cloneInto()}};Aq=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225])});function PM0($,Q=!1){if(Q)return{h:Number($&MN),l:Number($>>Zo&MN)};return{h:Number($>>Zo&MN)|0,l:Number($&MN)|0}}function Jo($,Q=!1){let X=$.length,Y=new Uint32Array(X),Z=new Uint32Array(X);for(let J=0;J<X;J++){let{h:q,l:G}=PM0($[J],Q);[Y[J],Z[J]]=[q,G]}return[Y,Z]}var MN,Zo,qo=($,Q,X)=>$<<X|Q>>>32-X,Go=($,Q,X)=>Q<<X|$>>>32-X,zo=($,Q,X)=>Q<<X-32|$>>>64-X,Ko=($,Q,X)=>$<<X-32|Q>>>64-X;var Uo=y(()=>{MN=BigInt(4294967295),Zo=BigInt(32)});var HM0,F7,Wo,DN;var t3=y(()=>{Yo();fJ();HM0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),F7=new Uint32Array(64);Wo=class Wo extends a3{constructor($=32){super(64,$,8,!1);this.A=Aq[0]|0,this.B=Aq[1]|0,this.C=Aq[2]|0,this.D=Aq[3]|0,this.E=Aq[4]|0,this.F=Aq[5]|0,this.G=Aq[6]|0,this.H=Aq[7]|0}get(){let{A:$,B:Q,C:X,D:Y,E:Z,F:J,G:q,H:G}=this;return[$,Q,X,Y,Z,J,q,G]}set($,Q,X,Y,Z,J,q,G){this.A=$|0,this.B=Q|0,this.C=X|0,this.D=Y|0,this.E=Z|0,this.F=J|0,this.G=q|0,this.H=G|0}process($,Q){for(let j=0;j<16;j++,Q+=4)F7[j]=$.getUint32(Q,!1);for(let j=16;j<64;j++){let P=F7[j-15],D=F7[j-2],A=x9(P,7)^x9(P,18)^P>>>3,I=x9(D,17)^x9(D,19)^D>>>10;F7[j]=I+F7[j-7]+A+F7[j-16]|0}let{A:X,B:Y,C:Z,D:J,E:q,F:G,G:z,H:M}=this;for(let j=0;j<64;j++){let P=x9(q,6)^x9(q,11)^x9(q,25),D=M+P+Qo(q,G,z)+HM0[j]+F7[j]|0,I=(x9(X,2)^x9(X,13)^x9(X,22))+Xo(X,Y,Z)|0;M=z,z=G,G=q,q=J+D|0,J=Z,Z=Y,Y=X,X=D+I|0}X=X+this.A|0,Y=Y+this.B|0,Z=Z+this.C|0,J=J+this.D|0,q=q+this.E|0,G=G+this.F|0,z=z+this.G|0,M=M+this.H|0,this.set(X,Y,Z,J,q,G,z,M)}roundClean(){xJ(F7)}destroy(){this.set(0,0,0,0,0,0,0,0),xJ(this.buffer)}};DN=ON(()=>new Wo)});var e3,$F=($,Q,X)=>new e3($,Q).update(X).digest();var Vo=y(()=>{fJ();e3=class e3 extends K4{constructor($,Q){super();this.finished=!1,this.destroyed=!1,sn($);let X=z4(Q);if(this.iHash=$.create(),typeof this.iHash.update!=="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let Y=this.blockLen,Z=new Uint8Array(Y);Z.set(X.length>Y?$.create().update(X).digest():X);for(let J=0;J<Z.length;J++)Z[J]^=54;this.iHash.update(Z),this.oHash=$.create();for(let J=0;J<Z.length;J++)Z[J]^=106;this.oHash.update(Z),xJ(Z)}update($){return kJ(this),this.iHash.update($),this}digestInto($){kJ(this),ZZ($,this.outputLen),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||($=Object.create(Object.getPrototypeOf(this),{}));let{oHash:Q,iHash:X,finished:Y,destroyed:Z,blockLen:J,outputLen:q}=this;return $=$,$.finished=Y,$.destroyed=Z,$.blockLen=J,$.outputLen=q,$.oHash=Q._cloneInto($.oHash),$.iHash=X._cloneInto($.iHash),$}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};$F.create=($,Q)=>new e3($,Q)});function U4($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function JF($){if(!U4($))throw new Error("Uint8Array expected")}function k6($,Q){if(typeof Q!=="boolean")throw new Error($+" boolean expected, got "+Q)}function yO($){let Q=$.toString(16);return Q.length&1?"0"+Q:Q}function Do($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);return $===""?ZF:BigInt("0x"+$)}function x6($){if(JF($),jo)return $.toHex();let Q="";for(let X=0;X<$.length;X++)Q+=NM0[$[X]];return Q}function Oo($){if($>=Rq._0&&$<=Rq._9)return $-Rq._0;if($>=Rq.A&&$<=Rq.F)return $-(Rq.A-10);if($>=Rq.a&&$<=Rq.f)return $-(Rq.a-10);return}function bO($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(jo)return Uint8Array.fromHex($);let Q=$.length,X=Q/2;if(Q%2)throw new Error("hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=Oo($.charCodeAt(J)),G=Oo($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw new Error('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function Cq($){return Do(x6($))}function qF($){return JF($),Do(x6(Uint8Array.from($).reverse()))}function W4($,Q){return bO($.toString(16).padStart(Q*2,"0"))}function GF($,Q){return W4($,Q).reverse()}function JZ($,Q,X){let Y;if(typeof Q==="string")try{Y=bO(Q)}catch(J){throw new Error($+" must be hex string or Uint8Array, cause: "+J)}else if(U4(Q))Y=Uint8Array.from(Q);else throw new Error($+" must be hex string or Uint8Array");let Z=Y.length;if(typeof X==="number"&&Z!==X)throw new Error($+" of length "+X+" expected, got "+Z);return Y}function hO(...$){let Q=0;for(let Y=0;Y<$.length;Y++){let Z=$[Y];JF(Z),Q+=Z.length}let X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}function jN($,Q,X){return QF($)&&QF(Q)&&QF(X)&&Q<=$&&$<X}function V4($,Q,X,Y){if(!jN(Q,X,Y))throw new Error("expected valid "+$+": "+X+" <= n < "+Y+", got "+Q)}function Po($){let Q;for(Q=0;$>ZF;$>>=YF,Q+=1);return Q}function Ho($,Q,X){if(typeof $!=="number"||$<2)throw new Error("hashLen must be a number");if(typeof Q!=="number"||Q<2)throw new Error("qByteLen must be a number");if(typeof X!=="function")throw new Error("hmacFn must be a function");let Y=XF($),Z=XF($),J=0,q=()=>{Y.fill(1),Z.fill(0),J=0},G=(...P)=>X(Z,Y,...P),z=(P=XF(0))=>{if(Z=G(Mo([0]),P),Y=G(),P.length===0)return;Z=G(Mo([1]),P),Y=G()},M=()=>{if(J++>=1000)throw new Error("drbg: tried 1000 values");let P=0,D=[];while(P<Q){Y=G();let A=Y.slice();D.push(A),P+=Y.length}return hO(...D)};return(P,D)=>{q(),z(P);let A=void 0;while(!(A=D(M())))z();return q(),A}}function M4($,Q,X={}){let Y=(Z,J,q)=>{let G=AM0[J];if(typeof G!=="function")throw new Error("invalid validator function");let z=$[Z];if(q&&z===void 0)return;if(!G(z,$))throw new Error("param "+String(Z)+" is invalid. Expected "+J+", got "+z)};for(let[Z,J]of Object.entries(Q))Y(Z,J,!1);for(let[Z,J]of Object.entries(X))Y(Z,J,!0);return $}function zF($){let Q=new WeakMap;return(X,...Y)=>{let Z=Q.get(X);if(Z!==void 0)return Z;let J=$(X,...Y);return Q.set(X,J),J}}var ZF,YF,jo,NM0,Rq,QF=($)=>typeof $==="bigint"&&ZF<=$,O4=($)=>(YF<<BigInt($))-YF,XF=($)=>new Uint8Array($),Mo=($)=>Uint8Array.from($),AM0;var PN=y(()=>{/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */ZF=BigInt(0),YF=BigInt(1);jo=typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function",NM0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));Rq={_0:48,_9:57,A:65,F:70,a:97,f:102};AM0={bigint:($)=>typeof $==="bigint",function:($)=>typeof $==="function",boolean:($)=>typeof $==="boolean",string:($)=>typeof $==="string",stringOrUint8Array:($)=>typeof $==="string"||U4($),isSafeInteger:($)=>Number.isSafeInteger($),array:($)=>Array.isArray($),field:($,Q)=>Q.Fp.isValid($),hash:($)=>typeof $==="function"&&Number.isSafeInteger($.outputLen)}});function vX($,Q){let X=$%Q;return X>=zY?X:Q+X}function qZ($,Q,X){let Y=$;while(Q-- >zY)Y*=Y,Y%=X;return Y}function HN($,Q){if($===zY)throw new Error("invert: expected non-zero number");if(Q<=zY)throw new Error("invert: expected positive modulus, got "+Q);let X=vX($,Q),Y=Q,Z=zY,J=KX,q=KX,G=zY;while(X!==zY){let M=Y/X,j=Y%X,P=Z-q*M,D=J-G*M;Y=X,X=j,Z=q,J=G,q=P,G=D}if(Y!==KX)throw new Error("invert: does not exist");return vX(Z,Q)}function wM0($){let Q=$-KX,X=0;while(Q%D4===zY)Q/=D4,X++;let Y=D4,Z=mO($);while(Y<$&&Ro(Z,Y))if(Y++>1000)throw new Error("Cannot find square root: probably non-prime P");if(X===1){let q=($+KX)/KF;return function G(z,M){let j=z.pow(M,q);if(!z.eql(z.sqr(j),M))throw new Error("Cannot find square root");return j}}let J=(Q+KX)/D4;return function q(G,z){if(!Ro(G,z))throw new Error("Cannot find square root");let M=X,j=G.pow(G.mul(G.ONE,Y),Q),P=G.pow(z,J),D=G.pow(z,Q);while(!G.eql(D,G.ONE)){if(G.eql(D,G.ZERO))return G.ZERO;let A=1;for(let H=G.sqr(D);A<M;A++){if(G.eql(H,G.ONE))break;H=G.sqr(H)}let I=G.pow(j,KX<<BigInt(M-A-1));j=G.sqr(I),P=G.mul(P,I),D=G.mul(D,j),M=A}return P}}function TM0($){if($%KF===RM0)return function Q(X,Y){let Z=($+KX)/KF,J=X.pow(Y,Z);if(!X.eql(X.sqr(J),Y))throw new Error("Cannot find square root");return J};if($%Ao===No)return function Q(X,Y){let Z=X.mul(Y,D4),J=($-No)/Ao,q=X.pow(Z,J),G=X.mul(Y,q),z=X.mul(X.mul(G,D4),q),M=X.mul(G,X.sub(z,X.ONE));if(!X.eql(X.sqr(M),Y))throw new Error("Cannot find square root");return M};if($%LM0===CM0);return wM0($)}function UF($){let Q={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},X=IM0.reduce((Y,Z)=>{return Y[Z]="function",Y},Q);return M4($,X)}function FM0($,Q,X){if(X<zY)throw new Error("invalid exponent, negatives unsupported");if(X===zY)return $.ONE;if(X===KX)return Q;let Y=$.ONE,Z=Q;while(X>zY){if(X&KX)Y=$.mul(Y,Z);Z=$.sqr(Z),X>>=KX}return Y}function WF($,Q,X=!1){let Y=new Array(Q.length).fill(X?$.ZERO:void 0),Z=Q.reduce((q,G,z)=>{if($.is0(G))return q;return Y[z]=q,$.mul(q,G)},$.ONE),J=$.inv(Z);return Q.reduceRight((q,G,z)=>{if($.is0(G))return q;return Y[z]=$.mul(q,Y[z]),$.mul(q,G)},J),Y}function BM0($,Q){let X=($.ORDER-KX)/D4,Y=$.pow(Q,X),Z=$.eql(Y,$.ONE),J=$.eql(Y,$.ZERO),q=$.eql(Y,$.neg($.ONE));if(!Z&&!J&&!q)throw new Error("Cannot find square root: probably non-prime P");return Z?1:J?0:-1}function Ro($,Q){let X=BM0($,Q);return X===0||X===1}function VF($,Q){if(Q!==void 0)I7(Q);let X=Q!==void 0?Q:$.toString(2).length,Y=Math.ceil(X/8);return{nBitLength:X,nByteLength:Y}}function mO($,Q,X=!1,Y={}){if($<=zY)throw new Error("invalid field: expected ORDER > 0, got "+$);let{nBitLength:Z,nByteLength:J}=VF($,Q);if(J>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let q,G=Object.freeze({ORDER:$,isLE:X,BITS:Z,BYTES:J,MASK:O4(Z),ZERO:zY,ONE:KX,create:(z)=>vX(z,$),isValid:(z)=>{if(typeof z!=="bigint")throw new Error("invalid field element: expected bigint, got "+typeof z);return zY<=z&&z<$},is0:(z)=>z===zY,isOdd:(z)=>(z&KX)===KX,neg:(z)=>vX(-z,$),eql:(z,M)=>z===M,sqr:(z)=>vX(z*z,$),add:(z,M)=>vX(z+M,$),sub:(z,M)=>vX(z-M,$),mul:(z,M)=>vX(z*M,$),pow:(z,M)=>FM0(G,z,M),div:(z,M)=>vX(z*HN(M,$),$),sqrN:(z)=>z*z,addN:(z,M)=>z+M,subN:(z,M)=>z-M,mulN:(z,M)=>z*M,inv:(z)=>HN(z,$),sqrt:Y.sqrt||((z)=>{if(!q)q=TM0($);return q(G,z)}),toBytes:(z)=>X?GF(z,J):W4(z,J),fromBytes:(z)=>{if(z.length!==J)throw new Error("Field.fromBytes: expected "+J+" bytes, got "+z.length);return X?qF(z):Cq(z)},invertBatch:(z)=>WF(G,z),cmov:(z,M,j)=>j?M:z});return Object.freeze(G)}function Co($){if(typeof $!=="bigint")throw new Error("field order must be bigint");let Q=$.toString(2).length;return Math.ceil(Q/8)}function OF($){let Q=Co($);return Q+Math.ceil(Q/2)}function Lo($,Q,X=!1){let Y=$.length,Z=Co(Q),J=OF(Q);if(Y<16||Y<J||Y>1024)throw new Error("expected "+J+"-1024 bytes of input, got "+Y);let q=X?qF($):Cq($),G=vX(q,Q-KX)+KX;return X?GF(G,Z):W4(G,Z)}var zY,KX,D4,RM0,KF,No,Ao,CM0,LM0,IM0;var NN=y(()=>{fJ();PN();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */zY=BigInt(0),KX=BigInt(1),D4=BigInt(2),RM0=BigInt(3),KF=BigInt(4),No=BigInt(5),Ao=BigInt(8),CM0=BigInt(9),LM0=BigInt(16);IM0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function MF($,Q){let X=Q.negate();return $?X:Q}function Io($,Q){if(!Number.isSafeInteger($)||$<=0||$>Q)throw new Error("invalid window size, expected [1.."+Q+"], got W="+$)}function DF($,Q){Io($,Q);let X=Math.ceil(Q/$)+1,Y=2**($-1),Z=2**$,J=O4($),q=BigInt($);return{windows:X,windowSize:Y,mask:J,maxNumber:Z,shiftBy:q}}function To($,Q,X){let{windowSize:Y,mask:Z,maxNumber:J,shiftBy:q}=X,G=Number($&Z),z=$>>q;if(G>Y)G-=J,z+=HF;let M=Q*Y,j=M+Math.abs(G)-1,P=G===0,D=G<0,A=Q%2!==0;return{nextN:z,offset:j,isZero:P,isNeg:D,isNegF:A,offsetF:M}}function SM0($,Q){if(!Array.isArray($))throw new Error("array expected");$.forEach((X,Y)=>{if(!(X instanceof Q))throw new Error("invalid point at index "+Y)})}function EM0($,Q){if(!Array.isArray($))throw new Error("array of scalars expected");$.forEach((X,Y)=>{if(!Q.isValid(X))throw new Error("invalid scalar at index "+Y)})}function PF($){return Fo.get($)||1}function Bo($,Q){return{constTimeNegate:MF,hasPrecomputes(X){return PF(X)!==1},unsafeLadder(X,Y,Z=$.ZERO){let J=X;while(Y>wo){if(Y&HF)Z=Z.add(J);J=J.double(),Y>>=HF}return Z},precomputeWindow(X,Y){let{windows:Z,windowSize:J}=DF(Y,Q),q=[],G=X,z=G;for(let M=0;M<Z;M++){z=G,q.push(z);for(let j=1;j<J;j++)z=z.add(G),q.push(z);G=z.double()}return q},wNAF(X,Y,Z){let{ZERO:J,BASE:q}=$,G=DF(X,Q);for(let z=0;z<G.windows;z++){let{nextN:M,offset:j,isZero:P,isNeg:D,isNegF:A,offsetF:I}=To(Z,z,G);if(Z=M,P)q=q.add(MF(A,Y[I]));else J=J.add(MF(D,Y[j]))}return{p:J,f:q}},wNAFUnsafe(X,Y,Z,J=$.ZERO){let q=DF(X,Q);for(let G=0;G<q.windows;G++){if(Z===wo)break;let{nextN:z,offset:M,isZero:j,isNeg:P}=To(Z,G,q);if(Z=z,j)continue;else{let D=Y[M];J=J.add(P?D.negate():D)}}return J},getPrecomputes(X,Y,Z){let J=jF.get(Y);if(!J){if(J=this.precomputeWindow(Y,X),X!==1)jF.set(Y,Z(J))}return J},wNAFCached(X,Y,Z){let J=PF(X);return this.wNAF(J,this.getPrecomputes(J,X,Z),Y)},wNAFCachedUnsafe(X,Y,Z,J){let q=PF(X);if(q===1)return this.unsafeLadder(X,Y,J);return this.wNAFUnsafe(q,this.getPrecomputes(q,X,Z),Y,J)},setWindowSize(X,Y){Io(Y,Q),Fo.set(X,Y),jF.delete(X)}}}function So($,Q,X,Y){if(SM0(X,$),EM0(Y,Q),X.length!==Y.length)throw new Error("arrays of points and scalars must have equal length");let Z=$.ZERO,J=Po(BigInt(X.length)),q=J>12?J-3:J>4?J-2:J?2:1,G=O4(q),z=new Array(Number(G)+1).fill(Z),M=Math.floor((Q.BITS-1)/q)*q,j=Z;for(let P=M;P>=0;P-=q){z.fill(Z);for(let A=0;A<Y.length;A++){let I=Y[A],H=Number(I>>BigInt(P)&G);z[H]=z[H].add(X[A])}let D=Z;for(let A=z.length-1,I=Z;A>0;A--)I=I.add(z[A]),D=D.add(I);if(j=j.add(D),P!==0)for(let A=0;A<q;A++)j=j.double()}return j}function NF($){return UF($.Fp),M4($,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...VF($.n,$.nBitLength),...$,...{p:$.Fp.ORDER}})}var wo,HF,jF,Fo;var Eo=y(()=>{NN();PN();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */wo=BigInt(0),HF=BigInt(1);jF=new WeakMap,Fo=new WeakMap});function _o($){if($.lowS!==void 0)k6("lowS",$.lowS);if($.prehash!==void 0)k6("prehash",$.prehash)}function _M0($){let Q=NF($);M4(Q,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:X,Fp:Y,a:Z}=Q;if(X){if(!Y.eql(Z,Y.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof X!=="object"||typeof X.beta!=="bigint"||typeof X.splitScalar!=="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...Q})}function kM0($){let Q=_M0($),{Fp:X}=Q,Y=mO(Q.n,Q.nBitLength),Z=Q.toBytes||((H,C,B)=>{let S=C.toAffine();return hO(Uint8Array.from([4]),X.toBytes(S.x),X.toBytes(S.y))}),J=Q.fromBytes||((H)=>{let C=H.subarray(1),B=X.fromBytes(C.subarray(0,X.BYTES)),S=X.fromBytes(C.subarray(X.BYTES,2*X.BYTES));return{x:B,y:S}});function q(H){let{a:C,b:B}=Q,S=X.sqr(H),_=X.mul(S,H);return X.add(X.add(_,X.mul(H,C)),B)}if(!X.eql(X.sqr(Q.Gy),q(Q.Gx)))throw new Error("bad generator point: equation left != right");function G(H){return jN(H,bQ,Q.n)}function z(H){let{allowedPrivateKeyLengths:C,nByteLength:B,wrapPrivateKey:S,n:_}=Q;if(C&&typeof H!=="bigint"){if(U4(H))H=x6(H);if(typeof H!=="string"||!C.includes(H.length))throw new Error("invalid private key");H=H.padStart(B*2,"0")}let k;try{k=typeof H==="bigint"?H:Cq(JZ("private key",H,B))}catch(f){throw new Error("invalid private key, expected hex or "+B+" bytes, got "+typeof H)}if(S)k=vX(k,_);return V4("private key",k,bQ,_),k}function M(H){if(!(H instanceof D))throw new Error("ProjectivePoint expected")}let j=zF((H,C)=>{let{px:B,py:S,pz:_}=H;if(X.eql(_,X.ONE))return{x:B,y:S};let k=H.is0();if(C==null)C=k?X.ONE:X.inv(_);let f=X.mul(B,C),g=X.mul(S,C),b=X.mul(_,C);if(k)return{x:X.ZERO,y:X.ZERO};if(!X.eql(b,X.ONE))throw new Error("invZ was invalid");return{x:f,y:g}}),P=zF((H)=>{if(H.is0()){if(Q.allowInfinityPoint&&!X.is0(H.py))return;throw new Error("bad point: ZERO")}let{x:C,y:B}=H.toAffine();if(!X.isValid(C)||!X.isValid(B))throw new Error("bad point: x or y not FE");let S=X.sqr(B),_=q(C);if(!X.eql(S,_))throw new Error("bad point: equation left != right");if(!H.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class D{constructor(H,C,B){if(H==null||!X.isValid(H))throw new Error("x required");if(C==null||!X.isValid(C)||X.is0(C))throw new Error("y required");if(B==null||!X.isValid(B))throw new Error("z required");this.px=H,this.py=C,this.pz=B,Object.freeze(this)}static fromAffine(H){let{x:C,y:B}=H||{};if(!H||!X.isValid(C)||!X.isValid(B))throw new Error("invalid affine point");if(H instanceof D)throw new Error("projective point not allowed");let S=(_)=>X.eql(_,X.ZERO);if(S(C)&&S(B))return D.ZERO;return new D(C,B,X.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(H){let C=WF(X,H.map((B)=>B.pz));return H.map((B,S)=>B.toAffine(C[S])).map(D.fromAffine)}static fromHex(H){let C=D.fromAffine(J(JZ("pointHex",H)));return C.assertValidity(),C}static fromPrivateKey(H){return D.BASE.multiply(z(H))}static msm(H,C){return So(D,Y,H,C)}_setWindowSize(H){I.setWindowSize(this,H)}assertValidity(){P(this)}hasEvenY(){let{y:H}=this.toAffine();if(X.isOdd)return!X.isOdd(H);throw new Error("Field doesn't support isOdd")}equals(H){M(H);let{px:C,py:B,pz:S}=this,{px:_,py:k,pz:f}=H,g=X.eql(X.mul(C,f),X.mul(_,S)),b=X.eql(X.mul(B,f),X.mul(k,S));return g&&b}negate(){return new D(this.px,X.neg(this.py),this.pz)}double(){let{a:H,b:C}=Q,B=X.mul(C,ko),{px:S,py:_,pz:k}=this,f=X.ZERO,g=X.ZERO,b=X.ZERO,m=X.mul(S,S),l=X.mul(_,_),h=X.mul(k,k),c=X.mul(S,_);return c=X.add(c,c),b=X.mul(S,k),b=X.add(b,b),f=X.mul(H,b),g=X.mul(B,h),g=X.add(f,g),f=X.sub(l,g),g=X.add(l,g),g=X.mul(f,g),f=X.mul(c,f),b=X.mul(B,b),h=X.mul(H,h),c=X.sub(m,h),c=X.mul(H,c),c=X.add(c,b),b=X.add(m,m),m=X.add(b,m),m=X.add(m,h),m=X.mul(m,c),g=X.add(g,m),h=X.mul(_,k),h=X.add(h,h),m=X.mul(h,c),f=X.sub(f,m),b=X.mul(h,l),b=X.add(b,b),b=X.add(b,b),new D(f,g,b)}add(H){M(H);let{px:C,py:B,pz:S}=this,{px:_,py:k,pz:f}=H,g=X.ZERO,b=X.ZERO,m=X.ZERO,l=Q.a,h=X.mul(Q.b,ko),c=X.mul(C,_),T=X.mul(B,k),K=X.mul(S,f),U=X.add(C,B),W=X.add(_,k);U=X.mul(U,W),W=X.add(c,T),U=X.sub(U,W),W=X.add(C,S);let V=X.add(_,f);return W=X.mul(W,V),V=X.add(c,K),W=X.sub(W,V),V=X.add(B,S),g=X.add(k,f),V=X.mul(V,g),g=X.add(T,K),V=X.sub(V,g),m=X.mul(l,W),g=X.mul(h,K),m=X.add(g,m),g=X.sub(T,m),m=X.add(T,m),b=X.mul(g,m),T=X.add(c,c),T=X.add(T,c),K=X.mul(l,K),W=X.mul(h,W),T=X.add(T,K),K=X.sub(c,K),K=X.mul(l,K),W=X.add(W,K),c=X.mul(T,W),b=X.add(b,c),c=X.mul(V,W),g=X.mul(U,g),g=X.sub(g,c),c=X.mul(U,T),m=X.mul(V,m),m=X.add(m,c),new D(g,b,m)}subtract(H){return this.add(H.negate())}is0(){return this.equals(D.ZERO)}wNAF(H){return I.wNAFCached(this,H,D.normalizeZ)}multiplyUnsafe(H){let{endo:C,n:B}=Q;V4("scalar",H,wq,B);let S=D.ZERO;if(H===wq)return S;if(this.is0()||H===bQ)return this;if(!C||I.hasPrecomputes(this))return I.wNAFCachedUnsafe(this,H,D.normalizeZ);let{k1neg:_,k1:k,k2neg:f,k2:g}=C.splitScalar(H),b=S,m=S,l=this;while(k>wq||g>wq){if(k&bQ)b=b.add(l);if(g&bQ)m=m.add(l);l=l.double(),k>>=bQ,g>>=bQ}if(_)b=b.negate();if(f)m=m.negate();return m=new D(X.mul(m.px,C.beta),m.py,m.pz),b.add(m)}multiply(H){let{endo:C,n:B}=Q;V4("scalar",H,bQ,B);let S,_;if(C){let{k1neg:k,k1:f,k2neg:g,k2:b}=C.splitScalar(H),{p:m,f:l}=this.wNAF(f),{p:h,f:c}=this.wNAF(b);m=I.constTimeNegate(k,m),h=I.constTimeNegate(g,h),h=new D(X.mul(h.px,C.beta),h.py,h.pz),S=m.add(h),_=l.add(c)}else{let{p:k,f}=this.wNAF(H);S=k,_=f}return D.normalizeZ([S,_])[0]}multiplyAndAddUnsafe(H,C,B){let S=D.BASE,_=(f,g)=>g===wq||g===bQ||!f.equals(S)?f.multiplyUnsafe(g):f.multiply(g),k=_(this,C).add(_(H,B));return k.is0()?void 0:k}toAffine(H){return j(this,H)}isTorsionFree(){let{h:H,isTorsionFree:C}=Q;if(H===bQ)return!0;if(C)return C(D,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:H,clearCofactor:C}=Q;if(H===bQ)return this;if(C)return C(D,this);return this.multiplyUnsafe(Q.h)}toRawBytes(H=!0){return k6("isCompressed",H),this.assertValidity(),Z(D,this,H)}toHex(H=!0){return k6("isCompressed",H),x6(this.toRawBytes(H))}}D.BASE=new D(Q.Gx,Q.Gy,X.ONE),D.ZERO=new D(X.ZERO,X.ONE,X.ZERO);let A=Q.nBitLength,I=Bo(D,Q.endo?Math.ceil(A/2):A);return{CURVE:Q,ProjectivePoint:D,normPrivateKeyToScalar:z,weierstrassEquation:q,isWithinCurveOrder:G}}function xM0($){let Q=NF($);return M4(Q,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...Q})}function fo($){let Q=xM0($),{Fp:X,n:Y}=Q,Z=X.BYTES+1,J=2*X.BYTES+1;function q(U){return vX(U,Y)}function G(U){return HN(U,Y)}let{ProjectivePoint:z,normPrivateKeyToScalar:M,weierstrassEquation:j,isWithinCurveOrder:P}=kM0({...Q,toBytes(U,W,V){let N=W.toAffine(),L=X.toBytes(N.x),F=hO;if(k6("isCompressed",V),V)return F(Uint8Array.from([W.hasEvenY()?2:3]),L);else return F(Uint8Array.from([4]),L,X.toBytes(N.y))},fromBytes(U){let W=U.length,V=U[0],N=U.subarray(1);if(W===Z&&(V===2||V===3)){let L=Cq(N);if(!jN(L,bQ,X.ORDER))throw new Error("Point is not on curve");let F=j(L),R;try{R=X.sqrt(F)}catch(x){let E=x instanceof Error?": "+x.message:"";throw new Error("Point is not on curve"+E)}let O=(R&bQ)===bQ;if((V&1)===1!==O)R=X.neg(R);return{x:L,y:R}}else if(W===J&&V===4){let L=X.fromBytes(N.subarray(0,X.BYTES)),F=X.fromBytes(N.subarray(X.BYTES,2*X.BYTES));return{x:L,y:F}}else{let L=Z,F=J;throw new Error("invalid Point, expected length of "+L+", or uncompressed "+F+", got "+W)}}}),D=(U)=>x6(W4(U,Q.nByteLength));function A(U){let W=Y>>bQ;return U>W}function I(U){return A(U)?q(-U):U}let H=(U,W,V)=>Cq(U.slice(W,V));class C{constructor(U,W,V){if(V4("r",U,bQ,Y),V4("s",W,bQ,Y),this.r=U,this.s=W,V!=null)this.recovery=V;Object.freeze(this)}static fromCompact(U){let W=Q.nByteLength;return U=JZ("compactSignature",U,W*2),new C(H(U,0,W),H(U,W,2*W))}static fromDER(U){let{r:W,s:V}=Lq.toSig(JZ("DER",U));return new C(W,V)}assertValidity(){}addRecoveryBit(U){return new C(this.r,this.s,U)}recoverPublicKey(U){let{r:W,s:V,recovery:N}=this,L=g(JZ("msgHash",U));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");let F=N===2||N===3?W+Q.n:W;if(F>=X.ORDER)throw new Error("recovery id 2 or 3 invalid");let R=(N&1)===0?"02":"03",O=z.fromHex(R+D(F)),w=G(F),x=q(-L*w),E=q(V*w),v=z.BASE.multiplyAndAddUnsafe(O,x,E);if(!v)throw new Error("point at infinify");return v.assertValidity(),v}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new C(this.r,q(-this.s),this.recovery):this}toDERRawBytes(){return bO(this.toDERHex())}toDERHex(){return Lq.hexFromSig(this)}toCompactRawBytes(){return bO(this.toCompactHex())}toCompactHex(){return D(this.r)+D(this.s)}}let B={isValidPrivateKey(U){try{return M(U),!0}catch(W){return!1}},normPrivateKeyToScalar:M,randomPrivateKey:()=>{let U=OF(Q.n);return Lo(Q.randomBytes(U),Q.n)},precompute(U=8,W=z.BASE){return W._setWindowSize(U),W.multiply(BigInt(3)),W}};function S(U,W=!0){return z.fromPrivateKey(U).toRawBytes(W)}function _(U){let W=U4(U),V=typeof U==="string",N=(W||V)&&U.length;if(W)return N===Z||N===J;if(V)return N===2*Z||N===2*J;if(U instanceof z)return!0;return!1}function k(U,W,V=!0){if(_(U))throw new Error("first arg must be private key");if(!_(W))throw new Error("second arg must be public key");return z.fromHex(W).multiply(M(U)).toRawBytes(V)}let f=Q.bits2int||function(U){if(U.length>8192)throw new Error("input is too large");let W=Cq(U),V=U.length*8-Q.nBitLength;return V>0?W>>BigInt(V):W},g=Q.bits2int_modN||function(U){return q(f(U))},b=O4(Q.nBitLength);function m(U){return V4("num < 2^"+Q.nBitLength,U,wq,b),W4(U,Q.nByteLength)}function l(U,W,V=h){if(["recovered","canonical"].some((s)=>(s in V)))throw new Error("sign() legacy options not supported");let{hash:N,randomBytes:L}=Q,{lowS:F,prehash:R,extraEntropy:O}=V;if(F==null)F=!0;if(U=JZ("msgHash",U),_o(V),R)U=JZ("prehashed msgHash",N(U));let w=g(U),x=M(W),E=[m(x),m(w)];if(O!=null&&O!==!1){let s=O===!0?L(X.BYTES):O;E.push(JZ("extraEntropy",s))}let v=hO(...E),p=w;function i(s){let X0=f(s);if(!P(X0))return;let n=G(X0),r=z.BASE.multiply(X0).toAffine(),Z0=q(r.x);if(Z0===wq)return;let e=q(n*q(p+Z0*x));if(e===wq)return;let Q0=(r.x===Z0?0:2)|Number(r.y&bQ),t=e;if(F&&A(e))t=I(e),Q0^=1;return new C(Z0,t,Q0)}return{seed:v,k2sig:i}}let h={lowS:Q.lowS,prehash:!1},c={lowS:Q.lowS,prehash:!1};function T(U,W,V=h){let{seed:N,k2sig:L}=l(U,W,V),F=Q;return Ho(F.hash.outputLen,F.nByteLength,F.hmac)(N,L)}z.BASE._setWindowSize(8);function K(U,W,V,N=c){let L=U;W=JZ("msgHash",W),V=JZ("publicKey",V);let{lowS:F,prehash:R,format:O}=N;if(_o(N),"strict"in N)throw new Error("options.strict was renamed to lowS");if(O!==void 0&&O!=="compact"&&O!=="der")throw new Error("format must be compact or der");let w=typeof L==="string"||U4(L),x=!w&&!O&&typeof L==="object"&&L!==null&&typeof L.r==="bigint"&&typeof L.s==="bigint";if(!w&&!x)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let E=void 0,v;try{if(x)E=new C(L.r,L.s);if(w){try{if(O!=="compact")E=C.fromDER(L)}catch(Q0){if(!(Q0 instanceof Lq.Err))throw Q0}if(!E&&O!=="der")E=C.fromCompact(L)}v=z.fromHex(V)}catch(Q0){return!1}if(!E)return!1;if(F&&E.hasHighS())return!1;if(R)W=Q.hash(W);let{r:p,s:i}=E,s=g(W),X0=G(i),n=q(s*X0),r=q(p*X0),Z0=z.BASE.multiplyAndAddUnsafe(v,n,r)?.toAffine();if(!Z0)return!1;return q(Z0.x)===p}return{CURVE:Q,getPublicKey:S,getSharedSecret:k,sign:T,verify:K,ProjectivePoint:z,Signature:C,utils:B}}var xo,Lq,wq,bQ,Gi0,ko,zi0;var vo=y(()=>{Eo();NN();PN();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */xo=class xo extends Error{constructor($=""){super($)}};Lq={Err:xo,_tlv:{encode:($,Q)=>{let{Err:X}=Lq;if($<0||$>256)throw new X("tlv.encode: wrong tag");if(Q.length&1)throw new X("tlv.encode: unpadded data");let Y=Q.length/2,Z=yO(Y);if(Z.length/2&128)throw new X("tlv.encode: long form length too big");let J=Y>127?yO(Z.length/2|128):"";return yO($)+J+Z+Q},decode($,Q){let{Err:X}=Lq,Y=0;if($<0||$>256)throw new X("tlv.encode: wrong tag");if(Q.length<2||Q[Y++]!==$)throw new X("tlv.decode: wrong tlv");let Z=Q[Y++],J=!!(Z&128),q=0;if(!J)q=Z;else{let z=Z&127;if(!z)throw new X("tlv.decode(long): indefinite length not supported");if(z>4)throw new X("tlv.decode(long): byte length is too big");let M=Q.subarray(Y,Y+z);if(M.length!==z)throw new X("tlv.decode: length bytes not complete");if(M[0]===0)throw new X("tlv.decode(long): zero leftmost byte");for(let j of M)q=q<<8|j;if(Y+=z,q<128)throw new X("tlv.decode(long): not minimal encoding")}let G=Q.subarray(Y,Y+q);if(G.length!==q)throw new X("tlv.decode: wrong value length");return{v:G,l:Q.subarray(Y+q)}}},_int:{encode($){let{Err:Q}=Lq;if($<wq)throw new Q("integer: negative integers are not allowed");let X=yO($);if(Number.parseInt(X[0],16)&8)X="00"+X;if(X.length&1)throw new Q("unexpected DER parsing assertion: unpadded hex");return X},decode($){let{Err:Q}=Lq;if($[0]&128)throw new Q("invalid signature integer: negative");if($[0]===0&&!($[1]&128))throw new Q("invalid signature integer: unnecessary leading zero");return Cq($)}},toSig($){let{Err:Q,_int:X,_tlv:Y}=Lq,Z=JZ("signature",$),{v:J,l:q}=Y.decode(48,Z);if(q.length)throw new Q("invalid signature: left bytes after parsing");let{v:G,l:z}=Y.decode(2,J),{v:M,l:j}=Y.decode(2,z);if(j.length)throw new Q("invalid signature: left bytes after parsing");return{r:X.decode(G),s:X.decode(M)}},hexFromSig($){let{_tlv:Q,_int:X}=Lq,Y=Q.encode(2,X.encode($.r)),Z=Q.encode(2,X.encode($.s)),J=Y+Z;return Q.encode(48,J)}},wq=BigInt(0),bQ=BigInt(1),Gi0=BigInt(2),ko=BigInt(3),zi0=BigInt(4)});function fM0($){return{hash:$,hmac:(Q,...X)=>$F($,Q,s3(...X)),randomBytes:$o}}function go($,Q){let X=(Y)=>fo({...$,...fM0(Y)});return{...X(Q),create:X}}var yo=y(()=>{Vo();fJ();vo();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */});function gM0($){let Q=mo,X=BigInt(3),Y=BigInt(6),Z=BigInt(11),J=BigInt(22),q=BigInt(23),G=BigInt(44),z=BigInt(88),M=$*$*$%Q,j=M*M*$%Q,P=qZ(j,X,Q)*j%Q,D=qZ(P,X,Q)*j%Q,A=qZ(D,AF,Q)*M%Q,I=qZ(A,Z,Q)*A%Q,H=qZ(I,J,Q)*I%Q,C=qZ(H,G,Q)*H%Q,B=qZ(C,z,Q)*C%Q,S=qZ(B,G,Q)*H%Q,_=qZ(S,X,Q)*j%Q,k=qZ(_,q,Q)*I%Q,f=qZ(k,Y,Q)*M%Q,g=qZ(f,AF,Q);if(!RF.eql(RF.sqr(g),$))throw new Error("Cannot find square root");return g}var mo,bo,vM0,AF,ho=($,Q)=>($+Q/AF)/Q,RF,f9,Pi0,Hi0;var co=y(()=>{t3();yo();NN();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */mo=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),bo=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),vM0=BigInt(1),AF=BigInt(2);RF=mO(mo,void 0,void 0,{sqrt:gM0}),f9=go({a:BigInt(0),b:BigInt(7),Fp:RF,n:bo,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:($)=>{let Q=bo,X=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),Y=-vM0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),Z=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),J=X,q=BigInt("0x100000000000000000000000000000000"),G=ho(J*$,Q),z=ho(-Y*$,Q),M=vX($-G*X-z*Z,Q),j=vX(-G*Y-z*J,Q),P=M>q,D=j>q;if(P)M=Q-M;if(D)j=Q-j;if(M>q||j>q)throw new Error("splitScalar: Endomorphism failed, k="+$);return{k1neg:P,k1:M,k2neg:D,k2:j}}}},DN),Pi0=BigInt(0),Hi0=f9.ProjectivePoint});var cO=y(()=>{co()});var po;var lo=y(()=>{fJ();po=ZZ});function CF($){let Q=$.startsWith("0x")?$.substring(2):$;return en(Q)}function LF($,Q){if($.length!==Q.length)return!1;for(let X=0;X<$.length;X++)if($[X]!==Q[X])return!1;return!0}function j4($){return(Q)=>{return po(Q),$(Q)}}var pO=y(()=>{lo();fJ();fJ()});var uo;var io=y(()=>{t3();pO();uo=j4(DN)});var B7=y(()=>{o3()});function wF($,Q){if(typeof $!=="string"||!$.match(/^0x[0-9A-Fa-f]*$/))return!1;if(typeof Q!=="undefined"&&Q>0&&$.length!==2+2*Q)return!1;return!0}function AN($){let Q=$;if(typeof Q!=="string")throw U$(`[padToEven] value must be type 'string', received ${typeof Q}`);if(Q.length%2)Q=`0${Q}`;return Q}var no=($)=>{if(typeof $!=="string")throw U$(`[stripHexPrefix] input must be type 'string', received ${typeof $}`);return wF($)?$.slice(2):$};var oo=y(()=>{B7()});var lO=function($){if(!($ instanceof Uint8Array)){let Q=`This method only supports Uint8Array but input was: ${$}`;throw U$(Q)}};var TF=y(()=>{B7()});var ro,bM0,Y9=($)=>{if(!$.startsWith("0x"))throw U$("input string must be 0x prefixed");return CF(AN(no($)))},hM0=($)=>{if($.startsWith("0x"))throw U$("input string cannot be 0x prefixed");return CF(AN($))},Tq=($)=>{return`0x${bM0($)}`},IF,UX=($,Q=!1)=>{if(Q)$.reverse();let X=Tq($);if(X==="0x")return ro;if(X.length===4)return IF[$[0]];if(X.length===6)return IF[$[0]*256+$[1]];return BigInt(X)},mM0=($)=>{if(!Number.isSafeInteger($)||$<0)throw U$(`Received an invalid integer type: ${$}`);return`0x${$.toString(16)}`},vJ=($)=>{let Q=mM0($);return Y9(Q)},uO=($,Q=!1)=>{let X=Y9(`0x${AN($.toString(16))}`);return Q?X.reverse():X},cM0=($,Q,X)=>{if(X){if($.length<Q)return new Uint8Array([...$,...new Uint8Array(Q-$.length)]);return $.subarray(0,Q)}else{if($.length<Q)return new Uint8Array([...new Uint8Array(Q-$.length),...$]);return $.subarray(-Q)}},P4=($,Q)=>{return lO($),cM0($,Q,!1)},pM0=($)=>{let Q=$[0];while($.length>0&&Q.toString()==="0")$=$.slice(1),Q=$[0];return $},H4=($)=>{return lO($),pM0($)},GZ=($)=>{if($===null||$===void 0)return new Uint8Array;if(Array.isArray($)||$ instanceof Uint8Array)return Uint8Array.from($);if(typeof $==="string"){if(!wF($))throw U$(`Cannot convert string to Uint8Array. toBytes only supports 0x-prefixed hex strings and this string was given: ${$}`);return Y9($)}if(typeof $==="number")return vJ($);if(typeof $==="bigint"){if($<ro)throw U$(`Cannot convert negative bigint to Uint8Array. Given: ${$}`);let Q=$.toString(16);if(Q.length%2)Q="0"+Q;return hM0(Q)}if($.toBytes!==void 0)return $.toBytes();throw U$("invalid type")},Z9=($)=>{return`0x${$.toString(16)}`},so=(...$)=>$.reduce((Q,X)=>X>Q?X:Q),WX=($)=>{return H4(uO($))},dO=(...$)=>{if($.length===1)return $[0];let Q=$.reduce((Y,Z)=>Y+Z.length,0),X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X};var S7=y(()=>{pO();B7();TF();oo();pO();ro=BigInt(0),bM0=WN,IF=[];for(let $=0;$<=65535;$++)IF[$]=BigInt($)});var FF,iO,ri0,lM0,BF,si0,uM0="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",ai0,dM0="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",ti0,iM0="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",ei0,$n0,Qn0,Xn0,N4,SF,f6,Yn0,Zn0,Jn0,ao,qn0,Gn0,zn0,Kn0,Un0,Wn0,nM0,Vn0,On0,Mn0,Dn0,jn0,Pn0,Hn0,Nn0;var RN=y(()=>{cO();io();S7();FF=BigInt("0xffffffffffffffff"),iO=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),ri0=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),lM0=f9.CURVE.n,BF=f9.CURVE.n/BigInt(2),si0=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),ai0=Y9(uM0),ti0=Y9(dM0),ei0=Y9(iM0),$n0=uo(new Uint8Array),Qn0=Uint8Array.from([128]),Xn0=BigInt(-1),N4=BigInt(0),SF=BigInt(1),f6=BigInt(2),Yn0=BigInt(3),Zn0=BigInt(7),Jn0=BigInt(8),ao=BigInt(27),qn0=BigInt(28),Gn0=BigInt(31),zn0=BigInt(32),Kn0=BigInt(64),Un0=BigInt(128),Wn0=BigInt(255),nM0=BigInt(256),Vn0=BigInt(96),On0=BigInt(100),Mn0=BigInt(160),Dn0=BigInt(224),jn0=BigInt(79228162514264340000000000000),Pn0=BigInt(1461501637330903000000000000000000000000000000000),Hn0=BigInt(26959946667150640000000000000000000000000000000000000000000000000000),Nn0=f6**nM0});var Rn0,Cn0;var to=y(()=>{Rn0=BigInt(1e9),Cn0=BigInt(1000000000000000000)});function QD0($,Q=24){let X=new Uint32Array(10);for(let Y=24-Q;Y<24;Y++){for(let q=0;q<10;q++)X[q]=$[q]^$[q+10]^$[q+20]^$[q+30]^$[q+40];for(let q=0;q<10;q+=2){let G=(q+8)%10,z=(q+2)%10,M=X[z],j=X[z+1],P=eo(M,j,1)^X[G],D=$r(M,j,1)^X[G+1];for(let A=0;A<50;A+=10)$[q+A]^=P,$[q+A+1]^=D}let Z=$[2],J=$[3];for(let q=0;q<24;q++){let G=Xr[q],z=eo(Z,J,G),M=$r(Z,J,G),j=Qr[q];Z=$[j],J=$[j+1],$[j]=z,$[j+1]=M}for(let q=0;q<50;q+=10){for(let G=0;G<10;G++)X[G]=$[q+G];for(let G=0;G<10;G++)$[q+G]^=~X[(G+2)%10]&X[(G+4)%10]}$[0]^=eM0[Y],$[1]^=$D0[Y]}xJ(X)}var oM0,nO,rM0,sM0,aM0,tM0,Qr,Xr,Yr,Zr,eM0,$D0,eo=($,Q,X)=>X>32?zo($,Q,X):qo($,Q,X),$r=($,Q,X)=>X>32?Ko($,Q,X):Go($,Q,X),EF,CN=($,Q,X)=>ON(()=>new EF(Q,$,X)),Jr,_F,qr,Gr;var zr=y(()=>{Uo();fJ();oM0=BigInt(0),nO=BigInt(1),rM0=BigInt(2),sM0=BigInt(7),aM0=BigInt(256),tM0=BigInt(113),Qr=[],Xr=[],Yr=[];for(let $=0,Q=nO,X=1,Y=0;$<24;$++){[X,Y]=[Y,(2*X+3*Y)%5],Qr.push(2*(5*Y+X)),Xr.push(($+1)*($+2)/2%64);let Z=oM0;for(let J=0;J<7;J++)if(Q=(Q<<nO^(Q>>sM0)*tM0)%aM0,Q&rM0)Z^=nO<<(nO<<BigInt(J))-nO;Yr.push(Z)}Zr=Jo(Yr,!0),eM0=Zr[0],$D0=Zr[1];EF=class EF extends K4{constructor($,Q,X,Y=!1,Z=24){super();if(this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=$,this.suffix=Q,this.outputLen=X,this.enableXOF=Y,this.rounds=Z,I7(X),!(0<$&&$<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=an(this.state)}clone(){return this._cloneInto()}keccak(){r3(this.state32),QD0(this.state32,this.rounds),r3(this.state32),this.posOut=0,this.pos=0}update($){kJ(this),$=z4($),ZZ($);let{blockLen:Q,state:X}=this,Y=$.length;for(let Z=0;Z<Y;){let J=Math.min(Q-this.pos,Y-Z);for(let q=0;q<J;q++)X[this.pos++]^=$[Z++];if(this.pos===Q)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:$,suffix:Q,pos:X,blockLen:Y}=this;if($[X]^=Q,(Q&128)!==0&&X===Y-1)this.keccak();$[Y-1]^=128,this.keccak()}writeInto($){kJ(this,!1),ZZ($),this.finish();let Q=this.state,{blockLen:X}=this;for(let Y=0,Z=$.length;Y<Z;){if(this.posOut>=X)this.keccak();let J=Math.min(X-this.posOut,Z-Y);$.set(Q.subarray(this.posOut,this.posOut+J),Y),this.posOut+=J,Y+=J}return $}xofInto($){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto($)}xof($){return I7($),this.xofInto(new Uint8Array($))}digestInto($){if(vO($,this),this.finished)throw new Error("digest() was already called");return this.writeInto($),this.destroy(),$}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,xJ(this.state)}_cloneInto($){let{blockLen:Q,suffix:X,outputLen:Y,rounds:Z,enableXOF:J}=this;return $||($=new EF(Q,X,Y,J,Z)),$.state32.set(this.state32),$.pos=this.pos,$.posOut=this.posOut,$.finished=this.finished,$.rounds=Z,$.suffix=X,$.outputLen=Y,$.enableXOF=J,$.destroyed=this.destroyed,$}};Jr=(()=>CN(1,144,28))(),_F=(()=>CN(1,136,32))(),qr=(()=>CN(1,104,48))(),Gr=(()=>CN(1,72,64))()});var En0,v6,_n0,kn0;var LN=y(()=>{zr();pO();En0=j4(Jr),v6=(()=>{let $=j4(_F);return $.create=_F.create,$})(),_n0=j4(qr),kn0=j4(Gr)});var XD0=function($,Q=!1){if(lO($),Q&&$.length!==64)$=f9.ProjectivePoint.fromHex($).toRawBytes(!1).slice(1);if($.length!==64)throw U$("Expected pubKey to be of length 64");return v6($).subarray(-20)},Kr,hn0;var Ur=y(()=>{LN();cO();B7();TF();Kr=XD0,hn0=new Uint8Array(0)});class A4{constructor($){if($.length!==20)throw U$("Invalid address length");this.bytes=$}equals($){return LF(this.bytes,$.bytes)}isZero(){return this.equals(new A4(new Uint8Array(20)))}isPrecompileOrSystemAddress(){let $=UX(this.bytes),Q=N4,X=BigInt("0xffff");return $>=Q&&$<=X}toString(){return Tq(this.bytes)}toBytes(){return new Uint8Array(this.bytes)}}var Wr=y(()=>{S7();RN();B7()});var Vr=()=>{};var Or=()=>{};var Mr=()=>{};function YD0($,Q){if($===N4||$===SF)return $;if(Q===void 0)return $-ao;return $-(Q*f6+BigInt(35))}function ZD0($){return $===N4||$===SF}var Dr=function($,Q,X,Y,Z){let J=dO(P4(X,32),P4(Y,32)),q=YD0(Q,Z);if(!ZD0(q))throw U$("Invalid signature v value");return f9.Signature.fromCompact(J).addRecoveryBit(Number(q)).recoverPublicKey($).toRawBytes(!1).slice(1)};var jr=y(()=>{cO();S7();RN();B7()});var Qo0;var Pr=y(()=>{S7();Qo0=Y9("0x05")});var Hr,Zo0,Jo0,zD0=31,qo0;var Nr=y(()=>{S7();Hr={BasicData:0,CodeHash:1},Zo0=vJ(Hr.BasicData),Jo0=vJ(Hr.CodeHash),qo0=BigInt(256)**BigInt(zD0)});var KD0=32,Ar=4096,UD0,WD0=2,zo0,Ko0;var Rr=y(()=>{UD0=32*Ar,zo0=UD0*WD0-1,Ko0=KD0*Ar});var Cr=()=>{};var Lr=()=>{};var wr=()=>{};var Tr=()=>{};var Ir,Do0,jo0,VD0=31,Po0;var Fr=y(()=>{S7();Ir={BasicData:0,CodeHash:1},Do0=vJ(Ir.BasicData),jo0=vJ(Ir.CodeHash),Po0=BigInt(256)**BigInt(VD0)});var wN=y(()=>{RN();B7();to();Ur();Wr();Vr();Mr();jr();S7();Or();Pr();Nr();Rr();Cr();Lr();wr();Tr();Fr()});function rO($){return $.type===oO.BlobEIP4844}var hQ,oO;var TN=y(()=>{hQ={EIP155ReplayProtection:155,EIP1559FeeMarket:1559,EIP2718TypedTransaction:2718,EIP2930AccessLists:2930,EIP7702EOACode:7702},oO={Legacy:0,AccessListEIP2930:1,FeeMarketEIP1559:2,BlobEIP4844:3,EOACodeEIP7702:4}});var IN;var kF=y(()=>{IN={1:{txGas:21000,txCreationGas:32000,txDataZeroGas:4,txDataNonZeroGas:68,accessListStorageKeyGas:0,accessListAddressGas:0},1679:{txDataNonZeroGas:16},2930:{accessListStorageKeyGas:1900,accessListAddressGas:2400},3860:{initCodeWordGas:2,maxInitCodeSize:49152},4844:{blobCommitmentVersionKzg:1,blobGasPerBlob:131072,maxBlobGasPerBlock:786432},7623:{totalCostFloorPerToken:10},7702:{perAuthBaseGas:12500,perEmptyAccountCost:25000},7691:{maxBlobGasPerBlock:1179648}}});function OD0($){return $?.copy()??new E9({chain:IJ})}function MD0($){let Q=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(let[X,Y]of Object.entries($))if(Q.includes(X)){if(Array.isArray(Y))throw U$(`${X} cannot be an array`)}}function DD0($,Q){let X=$.param("maxInitCodeSize");if(X&&BigInt(Q)>X)throw U$(`the initcode size of this transaction is too large: it is ${Q} while the max is ${$.param("maxInitCodeSize")}`)}function sO($,Q=256,X=!1){for(let[Y,Z]of Object.entries($))switch(Q){case 64:if(X){if(Z!==void 0&&Z>=FF)throw U$(`${Y} cannot equal or exceed MAX_UINT64 (2^64-1), given ${Z}`)}else if(Z!==void 0&&Z>FF)throw U$(`${Y} cannot exceed MAX_UINT64 (2^64-1), given ${Z}`);break;case 256:if(X){if(Z!==void 0&&Z>=iO)throw U$(`${Y} cannot equal or exceed MAX_INTEGER (2^256-1), given ${Z}`)}else if(Z!==void 0&&Z>iO)throw U$(`${Y} cannot exceed MAX_INTEGER (2^256-1), given ${Z}`);break;default:throw U$("unimplemented bits value")}}function Br($,Q,X={}){$.common=OD0(X.common),$.common.updateParams(X.params??IN),MD0(Q);let{nonce:Y,gasLimit:Z,to:J,value:q,data:G,v:z,r:M,s:j}=Q;$.txOptions=X;let P=GZ(J===""?"0x":J);$.to=P.length>0?new A4(P):void 0;let D=GZ(z),A=GZ(M),I=GZ(j);$.nonce=UX(GZ(Y)),$.gasLimit=UX(GZ(Z)),$.to=P.length>0?new A4(P):void 0,$.value=UX(GZ(q)),$.data=GZ(G===""?"0x":G),$.v=D.length>0?UX(D):void 0,$.r=A.length>0?UX(A):void 0,$.s=I.length>0?UX(I):void 0,sO({value:$.value,r:$.r,s:$.s}),sO({gasLimit:$.gasLimit},64),sO({nonce:$.nonce},64,!0);let H=$.to===void 0||$.to===null,C=X.allowUnlimitedInitCodeSize??!1;if(H&&$.common.isActivatedEIP(3860)&&C===!1)DD0($.common,$.data.length)}function Sr($){return{type:Z9(BigInt($.type)),nonce:Z9($.nonce),gasLimit:Z9($.gasLimit),to:$.to!==void 0?$.to.toString():void 0,value:Z9($.value),data:Tq($.data),v:$.v!==void 0?Z9($.v):void 0,r:$.r!==void 0?Z9($.r):void 0,s:$.s!==void 0?Z9($.s):void 0,chainId:Z9($.common.chainId()),yParity:$.v===0n||$.v===1n?Z9($.v):void 0}}var Er=y(()=>{qX();wN();kF()});function g6($,Q){return`${Q} (${$.errorStr()})`}function _r($){let{v:Q,r:X,s:Y}=$;if(Q===void 0||X===void 0||Y===void 0)return!1;else return!0}function kr($){if($.cache.dataFee&&$.cache.dataFee.hardfork===$.common.hardfork())return $.cache.dataFee.value;let Q=$.common.param("txDataZeroGas"),X=$.common.param("txDataNonZeroGas"),Y=N4;for(let Z=0;Z<$.data.length;Z++)$.data[Z]===0?Y+=Q:Y+=X;if(($.to===void 0||$.to===null)&&$.common.isActivatedEIP(3860)){let Z=BigInt(Math.ceil($.data.length/32)),J=$.common.param("initCodeWordGas")*Z;Y+=J}if(Object.isFrozen($))$.cache.dataFee={value:Y,hardfork:$.common.hardfork()};return Y}function xr($){let Q=$.common.param("txGas"),X=$.getDataGas();if(Q)X+=Q;if($.common.gteHardfork("homestead")&&$.toCreationAddress()){let Y=$.common.param("txCreationGas");if(Y)X+=Y}return X}function fr($){return $.to===void 0||$.to.bytes.length===0}function vr($){if(!$.isSigned()){let X=g6($,"Cannot call hash method if transaction is not signed");throw U$(X)}let Q=$.common.customCrypto.keccak256??v6;if(Object.isFrozen($)){if(!$.cache.hash)$.cache.hash=Q($.serialize());return $.cache.hash}return Q($.serialize())}function jD0($){let{s:Q}=$;if($.common.gteHardfork("homestead")&&Q!==void 0&&Q>BF){let X=g6($,"Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw U$(X)}}function gr($){if($.cache.senderPubKey!==void 0)return $.cache.senderPubKey;let Q=$.getMessageToVerifySignature(),{v:X,r:Y,s:Z}=$;jD0($);try{let q=($.common.customCrypto.ecrecover??Dr)(Q,X,WX(Y),WX(Z),$.supports(hQ.EIP155ReplayProtection)?$.common.chainId():void 0);if(Object.isFrozen($))$.cache.senderPubKey=q;return q}catch{let J=g6($,"Invalid Signature");throw U$(J)}}function yr($,Q){if(Q!==void 0&&Q>$)throw U$("Tx cannot pay baseFee");if(Q===void 0)return $;return $-Q}function br($){let Q=[];if($.isSigned()&&!$.verifySignature())Q.push("Invalid Signature");let X=$.getIntrinsicGas();if($.common.isActivatedEIP(7623)){let Y=0;for(let J=0;J<$.data.length;J++)Y+=$.data[J]===0?1:4;let Z=$.common.param("txGas")+$.common.param("totalCostFloorPerToken")*BigInt(Y);X=so(X,Z)}if(X>$.gasLimit)Q.push(`gasLimit is too low. The gasLimit is lower than the minimum gas limit of ${$.getIntrinsicGas()}, the gas limit is: ${$.gasLimit}`);return Q}function hr($){return $.getValidationErrors().length===0}function mr($){try{let Q=$.getSenderPublicKey();return H4(Q).length!==0}catch{return!1}}function cr($){return new A4(Kr($.getSenderPublicKey()))}function pr($,Q,X=!0){if(Q.length!==32){let j=g6($,"Private key must be 32 bytes in length.");throw U$(j)}let Y=!1;if($.type===oO.Legacy&&$.common.gteHardfork("spuriousDragon")&&!$.supports(hQ.EIP155ReplayProtection))$.activeCapabilities.push(hQ.EIP155ReplayProtection),Y=!0;let Z=$.getHashedMessageToSign(),J=$.common.customCrypto?.ecsign??f9.sign,{recovery:q,r:G,s:z}=J(Z,Q,{extraEntropy:X}),M=$.addSignature(BigInt(q),G,z,!0);if(Y){let j=$.activeCapabilities.indexOf(hQ.EIP155ReplayProtection);if(j>-1)$.activeCapabilities.splice(j,1)}return M}function lr($){let Q="";try{Q=$.isSigned()?Tq($.hash()):"not available (unsigned)"}catch{Q="error"}let X="";try{X=$.isSigned().toString()}catch{Q="error"}let Y="";try{Y=$.common.hardfork()}catch{Y="error"}let Z=`tx type=${$.type} hash=${Q} nonce=${$.nonce} value=${$.value} `;return Z+=`signed=${X} hf=${Y}`,Z}var ur=y(()=>{wN();LN();TN();cO()});var dr=()=>{};var ir=()=>{};var nr=y(()=>{ir()});var or=()=>{};var rr=y(()=>{or()});var sr=()=>{};var ar=y(()=>{sr()});var tr=()=>{};var er=y(()=>{tr()});function $s($,Q){let X=Number($),Y=Number(Q)*2;return X===Y+35||X===Y+36}function HD0($,Q){let X,Y=Q!==void 0?Number(Q):void 0;if(Y!==void 0){if(Y<37&&Y!==27&&Y!==28)throw U$(`Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ${Y}`)}if(Y!==void 0&&Y!==0&&$.gteHardfork("spuriousDragon")&&Y!==27&&Y!==28){if(!$s(BigInt(Y),$.chainId()))throw U$(`Incompatible EIP155-based V ${Y} and chain id ${$.chainId()}. See the Common parameter of the Transaction constructor to set the chain id.`);let Z;if((Y-35)%2===0)Z=35;else Z=36;X=BigInt(Y-Z)/f6}return X}class xF{constructor($,Q={}){this.type=oO.Legacy,this.cache={},this.activeCapabilities=[],Br(this,$,Q),this.gasPrice=UX(GZ($.gasPrice)),sO({gasPrice:this.gasPrice}),this.common.updateParams(Q.params??IN);let X=HD0(this.common,this.v);if(X!==void 0&&X!==this.common.chainId())throw U$(`Common chain ID ${this.common.chainId} not matching the derived chain ID ${X}`);if(this.keccakFunction=this.common.customCrypto.keccak256??v6,this.gasPrice*this.gasLimit>iO)throw U$("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");if(this.common.gteHardfork("spuriousDragon")){if(!this.isSigned())this.activeCapabilities.push(hQ.EIP155ReplayProtection);else if($s(this.v,this.common.chainId()))this.activeCapabilities.push(hQ.EIP155ReplayProtection)}if(Q?.freeze??!0)Object.freeze(this)}supports($){return this.activeCapabilities.includes($)}isSigned(){return _r(this)}getEffectivePriorityFee($){return yr(this.gasPrice,$)}raw(){return[WX(this.nonce),WX(this.gasPrice),WX(this.gasLimit),this.to!==void 0?this.to.bytes:new Uint8Array(0),WX(this.value),this.data,this.v!==void 0?WX(this.v):new Uint8Array(0),this.r!==void 0?WX(this.r):new Uint8Array(0),this.s!==void 0?WX(this.s):new Uint8Array(0)]}serialize(){return n3.encode(this.raw())}getMessageToSign(){let $=[WX(this.nonce),WX(this.gasPrice),WX(this.gasLimit),this.to!==void 0?this.to.bytes:new Uint8Array(0),WX(this.value),this.data];if(this.supports(hQ.EIP155ReplayProtection))$.push(WX(this.common.chainId())),$.push(H4(vJ(0))),$.push(H4(vJ(0)));return $}getHashedMessageToSign(){let $=this.getMessageToSign();return this.keccakFunction(n3.encode($))}getDataGas(){return kr(this)}toCreationAddress(){return fr(this)}getIntrinsicGas(){return xr(this)}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){return vr(this)}getMessageToVerifySignature(){if(!this.isSigned()){let $=g6(this,"This transaction is not signed");throw U$($)}return this.getHashedMessageToSign()}getSenderPublicKey(){return gr(this)}addSignature($,Q,X,Y=!1){if(Q=GZ(Q),X=GZ(X),Y&&this.supports(hQ.EIP155ReplayProtection))$+=BigInt(35)+this.common.chainId()*f6;else if(Y)$+=BigInt(27);let Z={...this.txOptions,common:this.common};return y6({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:$,r:UX(Q),s:UX(X)},Z)}toJSON(){let $=Sr(this);return $.gasPrice=Z9(this.gasPrice),$}getValidationErrors(){return br(this)}isValid(){return hr(this)}verifySignature(){return mr(this)}getSenderAddress(){return cr(this)}sign($,Q=!1){return pr(this,$,Q)}errorStr(){let $=lr(this);return $+=` gasPrice=${this.gasPrice}`,$}}var Qs=y(()=>{o3();wN();LN();ur();FN();TN();Er();fF()});function y6($,Q={}){return new xF($,Q)}var fF=y(()=>{Qs()});var Xs=y(()=>{fF()});var Ys=()=>{};var Zs=y(()=>{Ys();dr()});var FN=y(()=>{nr();rr();ar();er();Xs();kF();TN();Zs()});var R4;var Js=y(()=>{R4=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function ND0($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function E7($){if(!Number.isSafeInteger($)||$<0)throw new Error("positive integer expected, got "+$)}function zZ($,...Q){if(!ND0($))throw new Error("Uint8Array expected");if(Q.length>0&&!Q.includes($.length))throw new Error("Uint8Array expected of length "+Q+", got length="+$.length)}function Gs($){if(typeof $!=="function"||typeof $.create!=="function")throw new Error("Hash should be wrapped by utils.createHasher");E7($.outputLen),E7($.blockLen)}function gJ($,Q=!0){if($.destroyed)throw new Error("Hash instance has been destroyed");if(Q&&$.finished)throw new Error("Hash#digest() has already been called")}function aO($,Q){zZ($);let X=Q.outputLen;if($.length<X)throw new Error("digestInto() expects output buffer of length at least "+X)}function zs($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function yJ(...$){for(let Q=0;Q<$.length;Q++)$[Q].fill(0)}function tO($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function v9($,Q){return $<<32-Q|$>>>Q}function RD0($){return $<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255}function CD0($){for(let Q=0;Q<$.length;Q++)$[Q]=RD0($[Q]);return $}function BN($){if(zZ($),Ks)return $.toHex();let Q="";for(let X=0;X<$.length;X++)Q+=LD0[$[X]];return Q}function qs($){if($>=Iq._0&&$<=Iq._9)return $-Iq._0;if($>=Iq.A&&$<=Iq.F)return $-(Iq.A-10);if($>=Iq.a&&$<=Iq.f)return $-(Iq.a-10);return}function Us($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(Ks)return Uint8Array.fromHex($);let Q=$.length,X=Q/2;if(Q%2)throw new Error("hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=qs($.charCodeAt(J)),G=qs($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw new Error('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function SN($){if(typeof $!=="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function C4($){if(typeof $==="string")$=SN($);return zZ($),$}function gF(...$){let Q=0;for(let Y=0;Y<$.length;Y++){let Z=$[Y];zZ(Z),Q+=Z.length}let X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}class L4{}function EN($){let Q=(Y)=>$().update(C4(Y)).digest(),X=$();return Q.outputLen=X.outputLen,Q.blockLen=X.blockLen,Q.create=()=>$(),Q}function Ws($=32){if(R4&&typeof R4.getRandomValues==="function")return R4.getRandomValues(new Uint8Array($));if(R4&&typeof R4.randomBytes==="function")return Uint8Array.from(R4.randomBytes($));throw new Error("crypto.getRandomValues must be defined")}var AD0,vF,Ks,LD0,Iq;var bJ=y(()=>{Js();/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */AD0=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();vF=AD0?($)=>$:CD0,Ks=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")(),LD0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));Iq={_0:48,_9:57,A:65,F:70,a:97,f:102}});function wD0($,Q,X,Y){if(typeof $.setBigUint64==="function")return $.setBigUint64(Q,X,Y);let Z=BigInt(32),J=BigInt(4294967295),q=Number(X>>Z&J),G=Number(X&J),z=Y?4:0,M=Y?0:4;$.setUint32(Q+z,q,Y),$.setUint32(Q+M,G,Y)}function Vs($,Q,X){return $&Q^~$&X}function Os($,Q,X){return $&Q^$&X^Q&X}var yF,Fq;var Ms=y(()=>{bJ();yF=class yF extends L4{constructor($,Q,X,Y){super();this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=$,this.outputLen=Q,this.padOffset=X,this.isLE=Y,this.buffer=new Uint8Array($),this.view=tO(this.buffer)}update($){gJ(this),$=C4($),zZ($);let{view:Q,buffer:X,blockLen:Y}=this,Z=$.length;for(let J=0;J<Z;){let q=Math.min(Y-this.pos,Z-J);if(q===Y){let G=tO($);for(;Y<=Z-J;J+=Y)this.process(G,J);continue}if(X.set($.subarray(J,J+q),this.pos),this.pos+=q,J+=q,this.pos===Y)this.process(Q,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){gJ(this),aO($,this),this.finished=!0;let{buffer:Q,view:X,blockLen:Y,isLE:Z}=this,{pos:J}=this;if(Q[J++]=128,yJ(this.buffer.subarray(J)),this.padOffset>Y-J)this.process(X,0),J=0;for(let j=J;j<Y;j++)Q[j]=0;wD0(X,Y-8,BigInt(this.length*8),Z),this.process(X,0);let q=tO($),G=this.outputLen;if(G%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let z=G/4,M=this.get();if(z>M.length)throw new Error("_sha2: outputLen bigger than state");for(let j=0;j<z;j++)q.setUint32(4*j,M[j],Z)}digest(){let{buffer:$,outputLen:Q}=this;this.digestInto($);let X=$.slice(0,Q);return this.destroy(),X}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:Q,buffer:X,length:Y,finished:Z,destroyed:J,pos:q}=this;if($.destroyed=J,$.finished=Z,$.length=Y,$.pos=q,Y%Q)$.buffer.set(X);return $}clone(){return this._cloneInto()}};Fq=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225])});function TD0($,Q=!1){if(Q)return{h:Number($&_N),l:Number($>>Ds&_N)};return{h:Number($>>Ds&_N)|0,l:Number($&_N)|0}}function js($,Q=!1){let X=$.length,Y=new Uint32Array(X),Z=new Uint32Array(X);for(let J=0;J<X;J++){let{h:q,l:G}=TD0($[J],Q);[Y[J],Z[J]]=[q,G]}return[Y,Z]}var _N,Ds,Ps=($,Q,X)=>$<<X|Q>>>32-X,Hs=($,Q,X)=>Q<<X|$>>>32-X,Ns=($,Q,X)=>Q<<X-32|$>>>64-X,As=($,Q,X)=>$<<X-32|Q>>>64-X;var Rs=y(()=>{_N=BigInt(4294967295),Ds=BigInt(32)});var ID0,_7,Cs,kN;var bF=y(()=>{Ms();bJ();ID0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),_7=new Uint32Array(64);Cs=class Cs extends yF{constructor($=32){super(64,$,8,!1);this.A=Fq[0]|0,this.B=Fq[1]|0,this.C=Fq[2]|0,this.D=Fq[3]|0,this.E=Fq[4]|0,this.F=Fq[5]|0,this.G=Fq[6]|0,this.H=Fq[7]|0}get(){let{A:$,B:Q,C:X,D:Y,E:Z,F:J,G:q,H:G}=this;return[$,Q,X,Y,Z,J,q,G]}set($,Q,X,Y,Z,J,q,G){this.A=$|0,this.B=Q|0,this.C=X|0,this.D=Y|0,this.E=Z|0,this.F=J|0,this.G=q|0,this.H=G|0}process($,Q){for(let j=0;j<16;j++,Q+=4)_7[j]=$.getUint32(Q,!1);for(let j=16;j<64;j++){let P=_7[j-15],D=_7[j-2],A=v9(P,7)^v9(P,18)^P>>>3,I=v9(D,17)^v9(D,19)^D>>>10;_7[j]=I+_7[j-7]+A+_7[j-16]|0}let{A:X,B:Y,C:Z,D:J,E:q,F:G,G:z,H:M}=this;for(let j=0;j<64;j++){let P=v9(q,6)^v9(q,11)^v9(q,25),D=M+P+Vs(q,G,z)+ID0[j]+_7[j]|0,I=(v9(X,2)^v9(X,13)^v9(X,22))+Os(X,Y,Z)|0;M=z,z=G,G=q,q=J+D|0,J=Z,Z=Y,Y=X,X=D+I|0}X=X+this.A|0,Y=Y+this.B|0,Z=Z+this.C|0,J=J+this.D|0,q=q+this.E|0,G=G+this.F|0,z=z+this.G|0,M=M+this.H|0,this.set(X,Y,Z,J,q,G,z,M)}roundClean(){yJ(_7)}destroy(){this.set(0,0,0,0,0,0,0,0),yJ(this.buffer)}};kN=EN(()=>new Cs)});var hF,mF=($,Q,X)=>new hF($,Q).update(X).digest();var Ls=y(()=>{bJ();hF=class hF extends L4{constructor($,Q){super();this.finished=!1,this.destroyed=!1,Gs($);let X=C4(Q);if(this.iHash=$.create(),typeof this.iHash.update!=="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let Y=this.blockLen,Z=new Uint8Array(Y);Z.set(X.length>Y?$.create().update(X).digest():X);for(let J=0;J<Z.length;J++)Z[J]^=54;this.iHash.update(Z),this.oHash=$.create();for(let J=0;J<Z.length;J++)Z[J]^=106;this.oHash.update(Z),yJ(Z)}update($){return gJ(this),this.iHash.update($),this}digestInto($){gJ(this),zZ($,this.outputLen),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||($=Object.create(Object.getPrototypeOf(this),{}));let{oHash:Q,iHash:X,finished:Y,destroyed:Z,blockLen:J,outputLen:q}=this;return $=$,$.finished=Y,$.destroyed=Z,$.blockLen=J,$.outputLen=q,$.oHash=Q._cloneInto($.oHash),$.iHash=X._cloneInto($.iHash),$}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};mF.create=($,Q)=>new hF($,Q)});function w4($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function dF($){if(!w4($))throw new Error("Uint8Array expected")}function b6($,Q){if(typeof Q!=="boolean")throw new Error($+" boolean expected, got "+Q)}function eO($){let Q=$.toString(16);return Q.length&1?"0"+Q:Q}function Is($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);return $===""?uF:BigInt("0x"+$)}function h6($){if(dF($),Fs)return $.toHex();let Q="";for(let X=0;X<$.length;X++)Q+=FD0[$[X]];return Q}function ws($){if($>=Bq._0&&$<=Bq._9)return $-Bq._0;if($>=Bq.A&&$<=Bq.F)return $-(Bq.A-10);if($>=Bq.a&&$<=Bq.f)return $-(Bq.a-10);return}function $M($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(Fs)return Uint8Array.fromHex($);let Q=$.length,X=Q/2;if(Q%2)throw new Error("hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=ws($.charCodeAt(J)),G=ws($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw new Error('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function Sq($){return Is(h6($))}function iF($){return dF($),Is(h6(Uint8Array.from($).reverse()))}function T4($,Q){return $M($.toString(16).padStart(Q*2,"0"))}function nF($,Q){return T4($,Q).reverse()}function KZ($,Q,X){let Y;if(typeof Q==="string")try{Y=$M(Q)}catch(J){throw new Error($+" must be hex string or Uint8Array, cause: "+J)}else if(w4(Q))Y=Uint8Array.from(Q);else throw new Error($+" must be hex string or Uint8Array");let Z=Y.length;if(typeof X==="number"&&Z!==X)throw new Error($+" of length "+X+" expected, got "+Z);return Y}function QM(...$){let Q=0;for(let Y=0;Y<$.length;Y++){let Z=$[Y];dF(Z),Q+=Z.length}let X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}function xN($,Q,X){return cF($)&&cF(Q)&&cF(X)&&Q<=$&&$<X}function I4($,Q,X,Y){if(!xN(Q,X,Y))throw new Error("expected valid "+$+": "+X+" <= n < "+Y+", got "+Q)}function Bs($){let Q;for(Q=0;$>uF;$>>=lF,Q+=1);return Q}function Ss($,Q,X){if(typeof $!=="number"||$<2)throw new Error("hashLen must be a number");if(typeof Q!=="number"||Q<2)throw new Error("qByteLen must be a number");if(typeof X!=="function")throw new Error("hmacFn must be a function");let Y=pF($),Z=pF($),J=0,q=()=>{Y.fill(1),Z.fill(0),J=0},G=(...P)=>X(Z,Y,...P),z=(P=pF(0))=>{if(Z=G(Ts([0]),P),Y=G(),P.length===0)return;Z=G(Ts([1]),P),Y=G()},M=()=>{if(J++>=1000)throw new Error("drbg: tried 1000 values");let P=0,D=[];while(P<Q){Y=G();let A=Y.slice();D.push(A),P+=Y.length}return QM(...D)};return(P,D)=>{q(),z(P);let A=void 0;while(!(A=D(M())))z();return q(),A}}function B4($,Q,X={}){let Y=(Z,J,q)=>{let G=BD0[J];if(typeof G!=="function")throw new Error("invalid validator function");let z=$[Z];if(q&&z===void 0)return;if(!G(z,$))throw new Error("param "+String(Z)+" is invalid. Expected "+J+", got "+z)};for(let[Z,J]of Object.entries(Q))Y(Z,J,!1);for(let[Z,J]of Object.entries(X))Y(Z,J,!0);return $}function oF($){let Q=new WeakMap;return(X,...Y)=>{let Z=Q.get(X);if(Z!==void 0)return Z;let J=$(X,...Y);return Q.set(X,J),J}}var uF,lF,Fs,FD0,Bq,cF=($)=>typeof $==="bigint"&&uF<=$,F4=($)=>(lF<<BigInt($))-lF,pF=($)=>new Uint8Array($),Ts=($)=>Uint8Array.from($),BD0;var fN=y(()=>{/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */uF=BigInt(0),lF=BigInt(1);Fs=typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function",FD0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));Bq={_0:48,_9:57,A:65,F:70,a:97,f:102};BD0={bigint:($)=>typeof $==="bigint",function:($)=>typeof $==="function",boolean:($)=>typeof $==="boolean",string:($)=>typeof $==="string",stringOrUint8Array:($)=>typeof $==="string"||w4($),isSafeInteger:($)=>Number.isSafeInteger($),array:($)=>Array.isArray($),field:($,Q)=>Q.Fp.isValid($),hash:($)=>typeof $==="function"&&Number.isSafeInteger($.outputLen)}});function gX($,Q){let X=$%Q;return X>=KY?X:Q+X}function UZ($,Q,X){let Y=$;while(Q-- >KY)Y*=Y,Y%=X;return Y}function vN($,Q){if($===KY)throw new Error("invert: expected non-zero number");if(Q<=KY)throw new Error("invert: expected positive modulus, got "+Q);let X=gX($,Q),Y=Q,Z=KY,J=VX,q=VX,G=KY;while(X!==KY){let M=Y/X,j=Y%X,P=Z-q*M,D=J-G*M;Y=X,X=j,Z=q,J=G,q=P,G=D}if(Y!==VX)throw new Error("invert: does not exist");return gX(Z,Q)}function kD0($){let Q=$-VX,X=0;while(Q%S4===KY)Q/=S4,X++;let Y=S4,Z=XM($);while(Y<$&&ks(Z,Y))if(Y++>1000)throw new Error("Cannot find square root: probably non-prime P");if(X===1){let q=($+VX)/rF;return function G(z,M){let j=z.pow(M,q);if(!z.eql(z.sqr(j),M))throw new Error("Cannot find square root");return j}}let J=(Q+VX)/S4;return function q(G,z){if(!ks(G,z))throw new Error("Cannot find square root");let M=X,j=G.pow(G.mul(G.ONE,Y),Q),P=G.pow(z,J),D=G.pow(z,Q);while(!G.eql(D,G.ONE)){if(G.eql(D,G.ZERO))return G.ZERO;let A=1;for(let H=G.sqr(D);A<M;A++){if(G.eql(H,G.ONE))break;H=G.sqr(H)}let I=G.pow(j,VX<<BigInt(M-A-1));j=G.sqr(I),P=G.mul(P,I),D=G.mul(D,j),M=A}return P}}function xD0($){if($%rF===SD0)return function Q(X,Y){let Z=($+VX)/rF,J=X.pow(Y,Z);if(!X.eql(X.sqr(J),Y))throw new Error("Cannot find square root");return J};if($%_s===Es)return function Q(X,Y){let Z=X.mul(Y,S4),J=($-Es)/_s,q=X.pow(Z,J),G=X.mul(Y,q),z=X.mul(X.mul(G,S4),q),M=X.mul(G,X.sub(z,X.ONE));if(!X.eql(X.sqr(M),Y))throw new Error("Cannot find square root");return M};if($%_D0===ED0);return kD0($)}function sF($){let Q={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},X=fD0.reduce((Y,Z)=>{return Y[Z]="function",Y},Q);return B4($,X)}function vD0($,Q,X){if(X<KY)throw new Error("invalid exponent, negatives unsupported");if(X===KY)return $.ONE;if(X===VX)return Q;let Y=$.ONE,Z=Q;while(X>KY){if(X&VX)Y=$.mul(Y,Z);Z=$.sqr(Z),X>>=VX}return Y}function aF($,Q,X=!1){let Y=new Array(Q.length).fill(X?$.ZERO:void 0),Z=Q.reduce((q,G,z)=>{if($.is0(G))return q;return Y[z]=q,$.mul(q,G)},$.ONE),J=$.inv(Z);return Q.reduceRight((q,G,z)=>{if($.is0(G))return q;return Y[z]=$.mul(q,Y[z]),$.mul(q,G)},J),Y}function gD0($,Q){let X=($.ORDER-VX)/S4,Y=$.pow(Q,X),Z=$.eql(Y,$.ONE),J=$.eql(Y,$.ZERO),q=$.eql(Y,$.neg($.ONE));if(!Z&&!J&&!q)throw new Error("Cannot find square root: probably non-prime P");return Z?1:J?0:-1}function ks($,Q){let X=gD0($,Q);return X===0||X===1}function tF($,Q){if(Q!==void 0)E7(Q);let X=Q!==void 0?Q:$.toString(2).length,Y=Math.ceil(X/8);return{nBitLength:X,nByteLength:Y}}function XM($,Q,X=!1,Y={}){if($<=KY)throw new Error("invalid field: expected ORDER > 0, got "+$);let{nBitLength:Z,nByteLength:J}=tF($,Q);if(J>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let q,G=Object.freeze({ORDER:$,isLE:X,BITS:Z,BYTES:J,MASK:F4(Z),ZERO:KY,ONE:VX,create:(z)=>gX(z,$),isValid:(z)=>{if(typeof z!=="bigint")throw new Error("invalid field element: expected bigint, got "+typeof z);return KY<=z&&z<$},is0:(z)=>z===KY,isOdd:(z)=>(z&VX)===VX,neg:(z)=>gX(-z,$),eql:(z,M)=>z===M,sqr:(z)=>gX(z*z,$),add:(z,M)=>gX(z+M,$),sub:(z,M)=>gX(z-M,$),mul:(z,M)=>gX(z*M,$),pow:(z,M)=>vD0(G,z,M),div:(z,M)=>gX(z*vN(M,$),$),sqrN:(z)=>z*z,addN:(z,M)=>z+M,subN:(z,M)=>z-M,mulN:(z,M)=>z*M,inv:(z)=>vN(z,$),sqrt:Y.sqrt||((z)=>{if(!q)q=xD0($);return q(G,z)}),toBytes:(z)=>X?nF(z,J):T4(z,J),fromBytes:(z)=>{if(z.length!==J)throw new Error("Field.fromBytes: expected "+J+" bytes, got "+z.length);return X?iF(z):Sq(z)},invertBatch:(z)=>aF(G,z),cmov:(z,M,j)=>j?M:z});return Object.freeze(G)}function xs($){if(typeof $!=="bigint")throw new Error("field order must be bigint");let Q=$.toString(2).length;return Math.ceil(Q/8)}function eF($){let Q=xs($);return Q+Math.ceil(Q/2)}function fs($,Q,X=!1){let Y=$.length,Z=xs(Q),J=eF(Q);if(Y<16||Y<J||Y>1024)throw new Error("expected "+J+"-1024 bytes of input, got "+Y);let q=X?iF($):Sq($),G=gX(q,Q-VX)+VX;return X?nF(G,Z):T4(G,Z)}var KY,VX,S4,SD0,rF,Es,_s,ED0,_D0,fD0;var gN=y(()=>{bJ();fN();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */KY=BigInt(0),VX=BigInt(1),S4=BigInt(2),SD0=BigInt(3),rF=BigInt(4),Es=BigInt(5),_s=BigInt(8),ED0=BigInt(9),_D0=BigInt(16);fD0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function $B($,Q){let X=Q.negate();return $?X:Q}function ys($,Q){if(!Number.isSafeInteger($)||$<=0||$>Q)throw new Error("invalid window size, expected [1.."+Q+"], got W="+$)}function QB($,Q){ys($,Q);let X=Math.ceil(Q/$)+1,Y=2**($-1),Z=2**$,J=F4($),q=BigInt($);return{windows:X,windowSize:Y,mask:J,maxNumber:Z,shiftBy:q}}function gs($,Q,X){let{windowSize:Y,mask:Z,maxNumber:J,shiftBy:q}=X,G=Number($&Z),z=$>>q;if(G>Y)G-=J,z+=ZB;let M=Q*Y,j=M+Math.abs(G)-1,P=G===0,D=G<0,A=Q%2!==0;return{nextN:z,offset:j,isZero:P,isNeg:D,isNegF:A,offsetF:M}}function yD0($,Q){if(!Array.isArray($))throw new Error("array expected");$.forEach((X,Y)=>{if(!(X instanceof Q))throw new Error("invalid point at index "+Y)})}function bD0($,Q){if(!Array.isArray($))throw new Error("array of scalars expected");$.forEach((X,Y)=>{if(!Q.isValid(X))throw new Error("invalid scalar at index "+Y)})}function YB($){return bs.get($)||1}function hs($,Q){return{constTimeNegate:$B,hasPrecomputes(X){return YB(X)!==1},unsafeLadder(X,Y,Z=$.ZERO){let J=X;while(Y>vs){if(Y&ZB)Z=Z.add(J);J=J.double(),Y>>=ZB}return Z},precomputeWindow(X,Y){let{windows:Z,windowSize:J}=QB(Y,Q),q=[],G=X,z=G;for(let M=0;M<Z;M++){z=G,q.push(z);for(let j=1;j<J;j++)z=z.add(G),q.push(z);G=z.double()}return q},wNAF(X,Y,Z){let{ZERO:J,BASE:q}=$,G=QB(X,Q);for(let z=0;z<G.windows;z++){let{nextN:M,offset:j,isZero:P,isNeg:D,isNegF:A,offsetF:I}=gs(Z,z,G);if(Z=M,P)q=q.add($B(A,Y[I]));else J=J.add($B(D,Y[j]))}return{p:J,f:q}},wNAFUnsafe(X,Y,Z,J=$.ZERO){let q=QB(X,Q);for(let G=0;G<q.windows;G++){if(Z===vs)break;let{nextN:z,offset:M,isZero:j,isNeg:P}=gs(Z,G,q);if(Z=z,j)continue;else{let D=Y[M];J=J.add(P?D.negate():D)}}return J},getPrecomputes(X,Y,Z){let J=XB.get(Y);if(!J){if(J=this.precomputeWindow(Y,X),X!==1)XB.set(Y,Z(J))}return J},wNAFCached(X,Y,Z){let J=YB(X);return this.wNAF(J,this.getPrecomputes(J,X,Z),Y)},wNAFCachedUnsafe(X,Y,Z,J){let q=YB(X);if(q===1)return this.unsafeLadder(X,Y,J);return this.wNAFUnsafe(q,this.getPrecomputes(q,X,Z),Y,J)},setWindowSize(X,Y){ys(Y,Q),bs.set(X,Y),XB.delete(X)}}}function ms($,Q,X,Y){if(yD0(X,$),bD0(Y,Q),X.length!==Y.length)throw new Error("arrays of points and scalars must have equal length");let Z=$.ZERO,J=Bs(BigInt(X.length)),q=J>12?J-3:J>4?J-2:J?2:1,G=F4(q),z=new Array(Number(G)+1).fill(Z),M=Math.floor((Q.BITS-1)/q)*q,j=Z;for(let P=M;P>=0;P-=q){z.fill(Z);for(let A=0;A<Y.length;A++){let I=Y[A],H=Number(I>>BigInt(P)&G);z[H]=z[H].add(X[A])}let D=Z;for(let A=z.length-1,I=Z;A>0;A--)I=I.add(z[A]),D=D.add(I);if(j=j.add(D),P!==0)for(let A=0;A<q;A++)j=j.double()}return j}function JB($){return sF($.Fp),B4($,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...tF($.n,$.nBitLength),...$,...{p:$.Fp.ORDER}})}var vs,ZB,XB,bs;var cs=y(()=>{gN();fN();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */vs=BigInt(0),ZB=BigInt(1);XB=new WeakMap,bs=new WeakMap});function ps($){if($.lowS!==void 0)b6("lowS",$.lowS);if($.prehash!==void 0)b6("prehash",$.prehash)}function hD0($){let Q=JB($);B4(Q,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:X,Fp:Y,a:Z}=Q;if(X){if(!Y.eql(Z,Y.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof X!=="object"||typeof X.beta!=="bigint"||typeof X.splitScalar!=="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...Q})}function mD0($){let Q=hD0($),{Fp:X}=Q,Y=XM(Q.n,Q.nBitLength),Z=Q.toBytes||((H,C,B)=>{let S=C.toAffine();return QM(Uint8Array.from([4]),X.toBytes(S.x),X.toBytes(S.y))}),J=Q.fromBytes||((H)=>{let C=H.subarray(1),B=X.fromBytes(C.subarray(0,X.BYTES)),S=X.fromBytes(C.subarray(X.BYTES,2*X.BYTES));return{x:B,y:S}});function q(H){let{a:C,b:B}=Q,S=X.sqr(H),_=X.mul(S,H);return X.add(X.add(_,X.mul(H,C)),B)}if(!X.eql(X.sqr(Q.Gy),q(Q.Gx)))throw new Error("bad generator point: equation left != right");function G(H){return xN(H,mQ,Q.n)}function z(H){let{allowedPrivateKeyLengths:C,nByteLength:B,wrapPrivateKey:S,n:_}=Q;if(C&&typeof H!=="bigint"){if(w4(H))H=h6(H);if(typeof H!=="string"||!C.includes(H.length))throw new Error("invalid private key");H=H.padStart(B*2,"0")}let k;try{k=typeof H==="bigint"?H:Sq(KZ("private key",H,B))}catch(f){throw new Error("invalid private key, expected hex or "+B+" bytes, got "+typeof H)}if(S)k=gX(k,_);return I4("private key",k,mQ,_),k}function M(H){if(!(H instanceof D))throw new Error("ProjectivePoint expected")}let j=oF((H,C)=>{let{px:B,py:S,pz:_}=H;if(X.eql(_,X.ONE))return{x:B,y:S};let k=H.is0();if(C==null)C=k?X.ONE:X.inv(_);let f=X.mul(B,C),g=X.mul(S,C),b=X.mul(_,C);if(k)return{x:X.ZERO,y:X.ZERO};if(!X.eql(b,X.ONE))throw new Error("invZ was invalid");return{x:f,y:g}}),P=oF((H)=>{if(H.is0()){if(Q.allowInfinityPoint&&!X.is0(H.py))return;throw new Error("bad point: ZERO")}let{x:C,y:B}=H.toAffine();if(!X.isValid(C)||!X.isValid(B))throw new Error("bad point: x or y not FE");let S=X.sqr(B),_=q(C);if(!X.eql(S,_))throw new Error("bad point: equation left != right");if(!H.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class D{constructor(H,C,B){if(H==null||!X.isValid(H))throw new Error("x required");if(C==null||!X.isValid(C)||X.is0(C))throw new Error("y required");if(B==null||!X.isValid(B))throw new Error("z required");this.px=H,this.py=C,this.pz=B,Object.freeze(this)}static fromAffine(H){let{x:C,y:B}=H||{};if(!H||!X.isValid(C)||!X.isValid(B))throw new Error("invalid affine point");if(H instanceof D)throw new Error("projective point not allowed");let S=(_)=>X.eql(_,X.ZERO);if(S(C)&&S(B))return D.ZERO;return new D(C,B,X.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(H){let C=aF(X,H.map((B)=>B.pz));return H.map((B,S)=>B.toAffine(C[S])).map(D.fromAffine)}static fromHex(H){let C=D.fromAffine(J(KZ("pointHex",H)));return C.assertValidity(),C}static fromPrivateKey(H){return D.BASE.multiply(z(H))}static msm(H,C){return ms(D,Y,H,C)}_setWindowSize(H){I.setWindowSize(this,H)}assertValidity(){P(this)}hasEvenY(){let{y:H}=this.toAffine();if(X.isOdd)return!X.isOdd(H);throw new Error("Field doesn't support isOdd")}equals(H){M(H);let{px:C,py:B,pz:S}=this,{px:_,py:k,pz:f}=H,g=X.eql(X.mul(C,f),X.mul(_,S)),b=X.eql(X.mul(B,f),X.mul(k,S));return g&&b}negate(){return new D(this.px,X.neg(this.py),this.pz)}double(){let{a:H,b:C}=Q,B=X.mul(C,ls),{px:S,py:_,pz:k}=this,f=X.ZERO,g=X.ZERO,b=X.ZERO,m=X.mul(S,S),l=X.mul(_,_),h=X.mul(k,k),c=X.mul(S,_);return c=X.add(c,c),b=X.mul(S,k),b=X.add(b,b),f=X.mul(H,b),g=X.mul(B,h),g=X.add(f,g),f=X.sub(l,g),g=X.add(l,g),g=X.mul(f,g),f=X.mul(c,f),b=X.mul(B,b),h=X.mul(H,h),c=X.sub(m,h),c=X.mul(H,c),c=X.add(c,b),b=X.add(m,m),m=X.add(b,m),m=X.add(m,h),m=X.mul(m,c),g=X.add(g,m),h=X.mul(_,k),h=X.add(h,h),m=X.mul(h,c),f=X.sub(f,m),b=X.mul(h,l),b=X.add(b,b),b=X.add(b,b),new D(f,g,b)}add(H){M(H);let{px:C,py:B,pz:S}=this,{px:_,py:k,pz:f}=H,g=X.ZERO,b=X.ZERO,m=X.ZERO,l=Q.a,h=X.mul(Q.b,ls),c=X.mul(C,_),T=X.mul(B,k),K=X.mul(S,f),U=X.add(C,B),W=X.add(_,k);U=X.mul(U,W),W=X.add(c,T),U=X.sub(U,W),W=X.add(C,S);let V=X.add(_,f);return W=X.mul(W,V),V=X.add(c,K),W=X.sub(W,V),V=X.add(B,S),g=X.add(k,f),V=X.mul(V,g),g=X.add(T,K),V=X.sub(V,g),m=X.mul(l,W),g=X.mul(h,K),m=X.add(g,m),g=X.sub(T,m),m=X.add(T,m),b=X.mul(g,m),T=X.add(c,c),T=X.add(T,c),K=X.mul(l,K),W=X.mul(h,W),T=X.add(T,K),K=X.sub(c,K),K=X.mul(l,K),W=X.add(W,K),c=X.mul(T,W),b=X.add(b,c),c=X.mul(V,W),g=X.mul(U,g),g=X.sub(g,c),c=X.mul(U,T),m=X.mul(V,m),m=X.add(m,c),new D(g,b,m)}subtract(H){return this.add(H.negate())}is0(){return this.equals(D.ZERO)}wNAF(H){return I.wNAFCached(this,H,D.normalizeZ)}multiplyUnsafe(H){let{endo:C,n:B}=Q;I4("scalar",H,_q,B);let S=D.ZERO;if(H===_q)return S;if(this.is0()||H===mQ)return this;if(!C||I.hasPrecomputes(this))return I.wNAFCachedUnsafe(this,H,D.normalizeZ);let{k1neg:_,k1:k,k2neg:f,k2:g}=C.splitScalar(H),b=S,m=S,l=this;while(k>_q||g>_q){if(k&mQ)b=b.add(l);if(g&mQ)m=m.add(l);l=l.double(),k>>=mQ,g>>=mQ}if(_)b=b.negate();if(f)m=m.negate();return m=new D(X.mul(m.px,C.beta),m.py,m.pz),b.add(m)}multiply(H){let{endo:C,n:B}=Q;I4("scalar",H,mQ,B);let S,_;if(C){let{k1neg:k,k1:f,k2neg:g,k2:b}=C.splitScalar(H),{p:m,f:l}=this.wNAF(f),{p:h,f:c}=this.wNAF(b);m=I.constTimeNegate(k,m),h=I.constTimeNegate(g,h),h=new D(X.mul(h.px,C.beta),h.py,h.pz),S=m.add(h),_=l.add(c)}else{let{p:k,f}=this.wNAF(H);S=k,_=f}return D.normalizeZ([S,_])[0]}multiplyAndAddUnsafe(H,C,B){let S=D.BASE,_=(f,g)=>g===_q||g===mQ||!f.equals(S)?f.multiplyUnsafe(g):f.multiply(g),k=_(this,C).add(_(H,B));return k.is0()?void 0:k}toAffine(H){return j(this,H)}isTorsionFree(){let{h:H,isTorsionFree:C}=Q;if(H===mQ)return!0;if(C)return C(D,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:H,clearCofactor:C}=Q;if(H===mQ)return this;if(C)return C(D,this);return this.multiplyUnsafe(Q.h)}toRawBytes(H=!0){return b6("isCompressed",H),this.assertValidity(),Z(D,this,H)}toHex(H=!0){return b6("isCompressed",H),h6(this.toRawBytes(H))}}D.BASE=new D(Q.Gx,Q.Gy,X.ONE),D.ZERO=new D(X.ZERO,X.ONE,X.ZERO);let A=Q.nBitLength,I=hs(D,Q.endo?Math.ceil(A/2):A);return{CURVE:Q,ProjectivePoint:D,normPrivateKeyToScalar:z,weierstrassEquation:q,isWithinCurveOrder:G}}function cD0($){let Q=JB($);return B4(Q,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...Q})}function ds($){let Q=cD0($),{Fp:X,n:Y}=Q,Z=X.BYTES+1,J=2*X.BYTES+1;function q(U){return gX(U,Y)}function G(U){return vN(U,Y)}let{ProjectivePoint:z,normPrivateKeyToScalar:M,weierstrassEquation:j,isWithinCurveOrder:P}=mD0({...Q,toBytes(U,W,V){let N=W.toAffine(),L=X.toBytes(N.x),F=QM;if(b6("isCompressed",V),V)return F(Uint8Array.from([W.hasEvenY()?2:3]),L);else return F(Uint8Array.from([4]),L,X.toBytes(N.y))},fromBytes(U){let W=U.length,V=U[0],N=U.subarray(1);if(W===Z&&(V===2||V===3)){let L=Sq(N);if(!xN(L,mQ,X.ORDER))throw new Error("Point is not on curve");let F=j(L),R;try{R=X.sqrt(F)}catch(x){let E=x instanceof Error?": "+x.message:"";throw new Error("Point is not on curve"+E)}let O=(R&mQ)===mQ;if((V&1)===1!==O)R=X.neg(R);return{x:L,y:R}}else if(W===J&&V===4){let L=X.fromBytes(N.subarray(0,X.BYTES)),F=X.fromBytes(N.subarray(X.BYTES,2*X.BYTES));return{x:L,y:F}}else{let L=Z,F=J;throw new Error("invalid Point, expected length of "+L+", or uncompressed "+F+", got "+W)}}}),D=(U)=>h6(T4(U,Q.nByteLength));function A(U){let W=Y>>mQ;return U>W}function I(U){return A(U)?q(-U):U}let H=(U,W,V)=>Sq(U.slice(W,V));class C{constructor(U,W,V){if(I4("r",U,mQ,Y),I4("s",W,mQ,Y),this.r=U,this.s=W,V!=null)this.recovery=V;Object.freeze(this)}static fromCompact(U){let W=Q.nByteLength;return U=KZ("compactSignature",U,W*2),new C(H(U,0,W),H(U,W,2*W))}static fromDER(U){let{r:W,s:V}=Eq.toSig(KZ("DER",U));return new C(W,V)}assertValidity(){}addRecoveryBit(U){return new C(this.r,this.s,U)}recoverPublicKey(U){let{r:W,s:V,recovery:N}=this,L=g(KZ("msgHash",U));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");let F=N===2||N===3?W+Q.n:W;if(F>=X.ORDER)throw new Error("recovery id 2 or 3 invalid");let R=(N&1)===0?"02":"03",O=z.fromHex(R+D(F)),w=G(F),x=q(-L*w),E=q(V*w),v=z.BASE.multiplyAndAddUnsafe(O,x,E);if(!v)throw new Error("point at infinify");return v.assertValidity(),v}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new C(this.r,q(-this.s),this.recovery):this}toDERRawBytes(){return $M(this.toDERHex())}toDERHex(){return Eq.hexFromSig(this)}toCompactRawBytes(){return $M(this.toCompactHex())}toCompactHex(){return D(this.r)+D(this.s)}}let B={isValidPrivateKey(U){try{return M(U),!0}catch(W){return!1}},normPrivateKeyToScalar:M,randomPrivateKey:()=>{let U=eF(Q.n);return fs(Q.randomBytes(U),Q.n)},precompute(U=8,W=z.BASE){return W._setWindowSize(U),W.multiply(BigInt(3)),W}};function S(U,W=!0){return z.fromPrivateKey(U).toRawBytes(W)}function _(U){let W=w4(U),V=typeof U==="string",N=(W||V)&&U.length;if(W)return N===Z||N===J;if(V)return N===2*Z||N===2*J;if(U instanceof z)return!0;return!1}function k(U,W,V=!0){if(_(U))throw new Error("first arg must be private key");if(!_(W))throw new Error("second arg must be public key");return z.fromHex(W).multiply(M(U)).toRawBytes(V)}let f=Q.bits2int||function(U){if(U.length>8192)throw new Error("input is too large");let W=Sq(U),V=U.length*8-Q.nBitLength;return V>0?W>>BigInt(V):W},g=Q.bits2int_modN||function(U){return q(f(U))},b=F4(Q.nBitLength);function m(U){return I4("num < 2^"+Q.nBitLength,U,_q,b),T4(U,Q.nByteLength)}function l(U,W,V=h){if(["recovered","canonical"].some((s)=>(s in V)))throw new Error("sign() legacy options not supported");let{hash:N,randomBytes:L}=Q,{lowS:F,prehash:R,extraEntropy:O}=V;if(F==null)F=!0;if(U=KZ("msgHash",U),ps(V),R)U=KZ("prehashed msgHash",N(U));let w=g(U),x=M(W),E=[m(x),m(w)];if(O!=null&&O!==!1){let s=O===!0?L(X.BYTES):O;E.push(KZ("extraEntropy",s))}let v=QM(...E),p=w;function i(s){let X0=f(s);if(!P(X0))return;let n=G(X0),r=z.BASE.multiply(X0).toAffine(),Z0=q(r.x);if(Z0===_q)return;let e=q(n*q(p+Z0*x));if(e===_q)return;let Q0=(r.x===Z0?0:2)|Number(r.y&mQ),t=e;if(F&&A(e))t=I(e),Q0^=1;return new C(Z0,t,Q0)}return{seed:v,k2sig:i}}let h={lowS:Q.lowS,prehash:!1},c={lowS:Q.lowS,prehash:!1};function T(U,W,V=h){let{seed:N,k2sig:L}=l(U,W,V),F=Q;return Ss(F.hash.outputLen,F.nByteLength,F.hmac)(N,L)}z.BASE._setWindowSize(8);function K(U,W,V,N=c){let L=U;W=KZ("msgHash",W),V=KZ("publicKey",V);let{lowS:F,prehash:R,format:O}=N;if(ps(N),"strict"in N)throw new Error("options.strict was renamed to lowS");if(O!==void 0&&O!=="compact"&&O!=="der")throw new Error("format must be compact or der");let w=typeof L==="string"||w4(L),x=!w&&!O&&typeof L==="object"&&L!==null&&typeof L.r==="bigint"&&typeof L.s==="bigint";if(!w&&!x)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let E=void 0,v;try{if(x)E=new C(L.r,L.s);if(w){try{if(O!=="compact")E=C.fromDER(L)}catch(Q0){if(!(Q0 instanceof Eq.Err))throw Q0}if(!E&&O!=="der")E=C.fromCompact(L)}v=z.fromHex(V)}catch(Q0){return!1}if(!E)return!1;if(F&&E.hasHighS())return!1;if(R)W=Q.hash(W);let{r:p,s:i}=E,s=g(W),X0=G(i),n=q(s*X0),r=q(p*X0),Z0=z.BASE.multiplyAndAddUnsafe(v,n,r)?.toAffine();if(!Z0)return!1;return q(Z0.x)===p}return{CURVE:Q,getPublicKey:S,getSharedSecret:k,sign:T,verify:K,ProjectivePoint:z,Signature:C,utils:B}}var us,Eq,_q,mQ,Zs0,ls,Js0;var is=y(()=>{cs();gN();fN();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */us=class us extends Error{constructor($=""){super($)}};Eq={Err:us,_tlv:{encode:($,Q)=>{let{Err:X}=Eq;if($<0||$>256)throw new X("tlv.encode: wrong tag");if(Q.length&1)throw new X("tlv.encode: unpadded data");let Y=Q.length/2,Z=eO(Y);if(Z.length/2&128)throw new X("tlv.encode: long form length too big");let J=Y>127?eO(Z.length/2|128):"";return eO($)+J+Z+Q},decode($,Q){let{Err:X}=Eq,Y=0;if($<0||$>256)throw new X("tlv.encode: wrong tag");if(Q.length<2||Q[Y++]!==$)throw new X("tlv.decode: wrong tlv");let Z=Q[Y++],J=!!(Z&128),q=0;if(!J)q=Z;else{let z=Z&127;if(!z)throw new X("tlv.decode(long): indefinite length not supported");if(z>4)throw new X("tlv.decode(long): byte length is too big");let M=Q.subarray(Y,Y+z);if(M.length!==z)throw new X("tlv.decode: length bytes not complete");if(M[0]===0)throw new X("tlv.decode(long): zero leftmost byte");for(let j of M)q=q<<8|j;if(Y+=z,q<128)throw new X("tlv.decode(long): not minimal encoding")}let G=Q.subarray(Y,Y+q);if(G.length!==q)throw new X("tlv.decode: wrong value length");return{v:G,l:Q.subarray(Y+q)}}},_int:{encode($){let{Err:Q}=Eq;if($<_q)throw new Q("integer: negative integers are not allowed");let X=eO($);if(Number.parseInt(X[0],16)&8)X="00"+X;if(X.length&1)throw new Q("unexpected DER parsing assertion: unpadded hex");return X},decode($){let{Err:Q}=Eq;if($[0]&128)throw new Q("invalid signature integer: negative");if($[0]===0&&!($[1]&128))throw new Q("invalid signature integer: unnecessary leading zero");return Sq($)}},toSig($){let{Err:Q,_int:X,_tlv:Y}=Eq,Z=KZ("signature",$),{v:J,l:q}=Y.decode(48,Z);if(q.length)throw new Q("invalid signature: left bytes after parsing");let{v:G,l:z}=Y.decode(2,J),{v:M,l:j}=Y.decode(2,z);if(j.length)throw new Q("invalid signature: left bytes after parsing");return{r:X.decode(G),s:X.decode(M)}},hexFromSig($){let{_tlv:Q,_int:X}=Eq,Y=Q.encode(2,X.encode($.r)),Z=Q.encode(2,X.encode($.s)),J=Y+Z;return Q.encode(48,J)}},_q=BigInt(0),mQ=BigInt(1),Zs0=BigInt(2),ls=BigInt(3),Js0=BigInt(4)});function pD0($){return{hash:$,hmac:(Q,...X)=>mF($,Q,gF(...X)),randomBytes:Ws}}function ns($,Q){let X=(Y)=>ds({...$,...pD0(Y)});return{...X(Q),create:X}}var os=y(()=>{Ls();bJ();is();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */});function uD0($){let Q=as,X=BigInt(3),Y=BigInt(6),Z=BigInt(11),J=BigInt(22),q=BigInt(23),G=BigInt(44),z=BigInt(88),M=$*$*$%Q,j=M*M*$%Q,P=UZ(j,X,Q)*j%Q,D=UZ(P,X,Q)*j%Q,A=UZ(D,qB,Q)*M%Q,I=UZ(A,Z,Q)*A%Q,H=UZ(I,J,Q)*I%Q,C=UZ(H,G,Q)*H%Q,B=UZ(C,z,Q)*C%Q,S=UZ(B,G,Q)*H%Q,_=UZ(S,X,Q)*j%Q,k=UZ(_,q,Q)*I%Q,f=UZ(k,Y,Q)*M%Q,g=UZ(f,qB,Q);if(!GB.eql(GB.sqr(g),$))throw new Error("Cannot find square root");return g}var as,rs,lD0,qB,ss=($,Q)=>($+Q/qB)/Q,GB,kq,Ms0,Ds0;var ts=y(()=>{bF();os();gN();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */as=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),rs=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),lD0=BigInt(1),qB=BigInt(2);GB=XM(as,void 0,void 0,{sqrt:uD0}),kq=ns({a:BigInt(0),b:BigInt(7),Fp:GB,n:rs,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:($)=>{let Q=rs,X=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),Y=-lD0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),Z=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),J=X,q=BigInt("0x100000000000000000000000000000000"),G=ss(J*$,Q),z=ss(-Y*$,Q),M=gX($-G*X-z*Z,Q),j=gX(-G*Y-z*J,Q),P=M>q,D=j>q;if(P)M=Q-M;if(D)j=Q-j;if(M>q||j>q)throw new Error("splitScalar: Endomorphism failed, k="+$);return{k1neg:P,k1:M,k2neg:D,k2:j}}}},kN),Ms0=BigInt(0),Ds0=kq.ProjectivePoint});var yN=y(()=>{ts()});var es;var $a=y(()=>{bJ();es=zZ});function zB($){if(!($ instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof $}`);return new TextDecoder().decode($)}function KB($){let Q=$.startsWith("0x")?$.substring(2):$;return Us(Q)}function g9($,Q){if($.length!==Q.length)return!1;for(let X=0;X<$.length;X++)if($[X]!==Q[X])return!1;return!0}function E4($){return(Q)=>{return es(Q),$(Q)}}var YM=y(()=>{$a();bJ();bJ()});var Qa;var Xa=y(()=>{bF();YM();Qa=E4(kN)});var xq=y(()=>{UN()});function m6($,Q){if(typeof $!=="string"||!$.match(/^0x[0-9A-Fa-f]*$/))return!1;if(typeof Q!=="undefined"&&Q>0&&$.length!==2+2*Q)return!1;return!0}function bN($){let Q=$;if(typeof Q!=="string")throw r0(`[padToEven] value must be type 'string', received ${typeof Q}`);if(Q.length%2)Q=`0${Q}`;return Q}var Ya=($)=>{if(typeof $!=="string")throw r0(`[stripHexPrefix] input must be type 'string', received ${typeof $}`);return m6($)?$.slice(2):$};var UB=y(()=>{xq()});var ZM=function($){if(!($ instanceof Uint8Array)){let Q=`This method only supports Uint8Array but input was: ${$}`;throw r0(Q)}};var WB=y(()=>{xq()});var Za,iD0,WZ=($)=>{if(!$.startsWith("0x"))throw r0("input string must be 0x prefixed");return KB(bN(Ya($)))},nD0=($)=>{if($.startsWith("0x"))throw r0("input string cannot be 0x prefixed");return KB(bN($))},R8=($)=>{return`0x${iD0($)}`},VB,y9=($,Q=!1)=>{if(Q)$.reverse();let X=R8($);if(X==="0x")return Za;if(X.length===4)return VB[$[0]];if(X.length===6)return VB[$[0]*256+$[1]];return BigInt(X)},oD0=($)=>{if(!Number.isSafeInteger($)||$<0)throw r0(`Received an invalid integer type: ${$}`);return`0x${$.toString(16)}`},_4=($)=>{let Q=oD0($);return WZ(Q)},c6=($,Q=!1)=>{let X=WZ(`0x${bN($.toString(16))}`);return Q?X.reverse():X},rD0=($,Q,X)=>{if(X){if($.length<Q)return new Uint8Array([...$,...new Uint8Array(Q-$.length)]);return $.subarray(0,Q)}else{if($.length<Q)return new Uint8Array([...new Uint8Array(Q-$.length),...$]);return $.subarray(-Q)}},k7=($,Q)=>{return ZM($),rD0($,Q,!1)},sD0=($)=>{let Q=$[0];while($.length>0&&Q.toString()==="0")$=$.slice(1),Q=$[0];return $},Ja=($)=>{return ZM($),sD0($)},qa=($)=>{if($===null||$===void 0)return new Uint8Array;if(Array.isArray($)||$ instanceof Uint8Array)return Uint8Array.from($);if(typeof $==="string"){if(!m6($))throw r0(`Cannot convert string to Uint8Array. toBytes only supports 0x-prefixed hex strings and this string was given: ${$}`);return WZ($)}if(typeof $==="number")return _4($);if(typeof $==="bigint"){if($<Za)throw r0(`Cannot convert negative bigint to Uint8Array. Given: ${$}`);let Q=$.toString(16);if(Q.length%2)Q="0"+Q;return nD0(Q)}if($.toBytes!==void 0)return $.toBytes();throw r0("invalid type")},fq=($)=>{return`0x${$.toString(16)}`},b9=($)=>{return Ja(c6($))},k4=(...$)=>{if($.length===1)return $[0];let Q=$.reduce((Y,Z)=>Y+Z.length,0),X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X};var vq=y(()=>{YM();xq();WB();UB();YM();Za=BigInt(0),iD0=BN,VB=[];for(let $=0;$<=65535;$++)VB[$]=BigInt($)});var ds0,is0,ns0,aD0,tD0,os0,eD0="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",rs0,$j0="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",JM,Qj0="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",hN,Ga,ss0,as0,X8,gq,p6,ts0,za,es0,mN,$a0,Qa0,Xa0,Ya0,Za0,Ja0,Xj0,qa0,Ga0,za0,Ka0,Ua0,Wa0,Va0,Oa0;var cN=y(()=>{yN();Xa();vq();ds0=BigInt("0xffffffffffffffff"),is0=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),ns0=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),aD0=kq.CURVE.n,tD0=kq.CURVE.n/BigInt(2),os0=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),rs0=WZ(eD0),JM=WZ($j0),hN=WZ(Qj0),Ga=Qa(new Uint8Array),ss0=Uint8Array.from([128]),as0=BigInt(-1),X8=BigInt(0),gq=BigInt(1),p6=BigInt(2),ts0=BigInt(3),za=BigInt(7),es0=BigInt(8),mN=BigInt(27),$a0=BigInt(28),Qa0=BigInt(31),Xa0=BigInt(32),Ya0=BigInt(64),Za0=BigInt(128),Ja0=BigInt(255),Xj0=BigInt(256),qa0=BigInt(96),Ga0=BigInt(100),za0=BigInt(160),Ka0=BigInt(224),Ua0=BigInt(79228162514264340000000000000),Wa0=BigInt(1461501637330903000000000000000000000000000000000),Va0=BigInt(26959946667150640000000000000000000000000000000000000000000000000000),Oa0=p6**Xj0});var Da0,ja0;var Ka=y(()=>{Da0=BigInt(1e9),ja0=BigInt(1000000000000000000)});function Uj0($,Q=24){let X=new Uint32Array(10);for(let Y=24-Q;Y<24;Y++){for(let q=0;q<10;q++)X[q]=$[q]^$[q+10]^$[q+20]^$[q+30]^$[q+40];for(let q=0;q<10;q+=2){let G=(q+8)%10,z=(q+2)%10,M=X[z],j=X[z+1],P=Ua(M,j,1)^X[G],D=Wa(M,j,1)^X[G+1];for(let A=0;A<50;A+=10)$[q+A]^=P,$[q+A+1]^=D}let Z=$[2],J=$[3];for(let q=0;q<24;q++){let G=Oa[q],z=Ua(Z,J,G),M=Wa(Z,J,G),j=Va[q];Z=$[j],J=$[j+1],$[j]=z,$[j+1]=M}for(let q=0;q<50;q+=10){for(let G=0;G<10;G++)X[G]=$[q+G];for(let G=0;G<10;G++)$[q+G]^=~X[(G+2)%10]&X[(G+4)%10]}$[0]^=zj0[Y],$[1]^=Kj0[Y]}yJ(X)}var Yj0,qM,Zj0,Jj0,qj0,Gj0,Va,Oa,Ma,Da,zj0,Kj0,Ua=($,Q,X)=>X>32?Ns($,Q,X):Ps($,Q,X),Wa=($,Q,X)=>X>32?As($,Q,X):Hs($,Q,X),OB,pN=($,Q,X)=>EN(()=>new OB(Q,$,X)),ja,MB,Pa,Ha;var Na=y(()=>{Rs();bJ();Yj0=BigInt(0),qM=BigInt(1),Zj0=BigInt(2),Jj0=BigInt(7),qj0=BigInt(256),Gj0=BigInt(113),Va=[],Oa=[],Ma=[];for(let $=0,Q=qM,X=1,Y=0;$<24;$++){[X,Y]=[Y,(2*X+3*Y)%5],Va.push(2*(5*Y+X)),Oa.push(($+1)*($+2)/2%64);let Z=Yj0;for(let J=0;J<7;J++)if(Q=(Q<<qM^(Q>>Jj0)*Gj0)%qj0,Q&Zj0)Z^=qM<<(qM<<BigInt(J))-qM;Ma.push(Z)}Da=js(Ma,!0),zj0=Da[0],Kj0=Da[1];OB=class OB extends L4{constructor($,Q,X,Y=!1,Z=24){super();if(this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=$,this.suffix=Q,this.outputLen=X,this.enableXOF=Y,this.rounds=Z,E7(X),!(0<$&&$<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=zs(this.state)}clone(){return this._cloneInto()}keccak(){vF(this.state32),Uj0(this.state32,this.rounds),vF(this.state32),this.posOut=0,this.pos=0}update($){gJ(this),$=C4($),zZ($);let{blockLen:Q,state:X}=this,Y=$.length;for(let Z=0;Z<Y;){let J=Math.min(Q-this.pos,Y-Z);for(let q=0;q<J;q++)X[this.pos++]^=$[Z++];if(this.pos===Q)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:$,suffix:Q,pos:X,blockLen:Y}=this;if($[X]^=Q,(Q&128)!==0&&X===Y-1)this.keccak();$[Y-1]^=128,this.keccak()}writeInto($){gJ(this,!1),zZ($),this.finish();let Q=this.state,{blockLen:X}=this;for(let Y=0,Z=$.length;Y<Z;){if(this.posOut>=X)this.keccak();let J=Math.min(X-this.posOut,Z-Y);$.set(Q.subarray(this.posOut,this.posOut+J),Y),this.posOut+=J,Y+=J}return $}xofInto($){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto($)}xof($){return E7($),this.xofInto(new Uint8Array($))}digestInto($){if(aO($,this),this.finished)throw new Error("digest() was already called");return this.writeInto($),this.destroy(),$}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,yJ(this.state)}_cloneInto($){let{blockLen:Q,suffix:X,outputLen:Y,rounds:Z,enableXOF:J}=this;return $||($=new OB(Q,X,Y,J,Z)),$.state32.set(this.state32),$.pos=this.pos,$.posOut=this.posOut,$.finished=this.finished,$.rounds=Z,$.suffix=X,$.outputLen=Y,$.enableXOF=J,$.destroyed=this.destroyed,$}};ja=(()=>pN(1,144,28))(),MB=(()=>pN(1,136,32))(),Pa=(()=>pN(1,104,48))(),Ha=(()=>pN(1,72,64))()});var wa0,lN,Ta0,Ia0;var DB=y(()=>{Na();YM();wa0=E4(ja),lN=(()=>{let $=E4(MB);return $.create=MB.create,$})(),Ta0=E4(Pa),Ia0=E4(Ha)});var Aa=function($,Q=!1){if(ZM($),Q&&$.length!==64)$=kq.ProjectivePoint.fromHex($).toRawBytes(!1).slice(1);if($.length!==64)throw r0("Expected pubKey to be of length 64");return lN($).subarray(-20)},xa0;var jB=y(()=>{DB();yN();xq();WB();xa0=new Uint8Array(0)});class x4{constructor($){if($.length!==20)throw r0("Invalid address length");this.bytes=$}equals($){return g9(this.bytes,$.bytes)}isZero(){return this.equals(new x4(new Uint8Array(20)))}isPrecompileOrSystemAddress(){let $=y9(this.bytes),Q=X8,X=BigInt("0xffff");return $>=Q&&$<=X}toString(){return R8(this.bytes)}toBytes(){return new Uint8Array(this.bytes)}}function uN(){return new x4(new Uint8Array(20))}function Ra($){if(!($ instanceof Uint8Array))throw r0("Public key should be Uint8Array");let Q=Aa($);return new x4(Q)}var Ca=y(()=>{jB();vq();cN();xq()});var La=()=>{};function g8($,Q){if($===null)return null;if($===void 0)return;if(typeof $==="string"&&!m6($))throw r0(`A string must be provided with a 0x-prefix, given: ${$}`);else if(typeof $==="number"&&!Number.isSafeInteger($))throw r0("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");let X=qa($);switch(Q){case C8.Uint8Array:return X;case C8.BigInt:return y9(X);case C8.Number:{let Y=y9(X);if(Y>BigInt(Number.MAX_SAFE_INTEGER))throw r0("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(Y)}case C8.PrefixedHexString:return R8(X);default:throw r0("unknown outputType")}}var C8;var wa=y(()=>{vq();xq();UB();C8={Number:0,BigInt:1,Uint8Array:2,PrefixedHexString:3}});var Ta=()=>{};function Wj0($,Q){if($===X8||$===gq)return $;if(Q===void 0)return $-mN;return $-(Q*p6+BigInt(35))}function Vj0($){return $===X8||$===gq}var Ia=function($,Q,X,Y,Z){let J=k4(k7(X,32),k7(Y,32)),q=Wj0(Q,Z);if(!Vj0(q))throw r0("Invalid signature v value");return kq.Signature.fromCompact(J).addRecoveryBit(Number(q)).recoverPublicKey($).toRawBytes(!1).slice(1)};var Fa=y(()=>{yN();vq();cN();xq()});var Yt0;var Ba=y(()=>{vq();Yt0=WZ("0x05")});var Sa,qt0,Gt0,jj0=31,zt0;var Ea=y(()=>{vq();Sa={BasicData:0,CodeHash:1},qt0=_4(Sa.BasicData),Gt0=_4(Sa.CodeHash),zt0=BigInt(256)**BigInt(jj0)});var Pj0=32,_a=4096,Hj0,Nj0=2,Ut0,Wt0;var ka=y(()=>{Hj0=32*_a,Ut0=Hj0*Nj0-1,Wt0=Pj0*_a});var xa=()=>{};var fa=()=>{};var va=()=>{};var ga=()=>{};var ya,Pt0,Ht0,Aj0=31,Nt0;var ba=y(()=>{vq();ya={BasicData:0,CodeHash:1},Pt0=_4(ya.BasicData),Ht0=_4(ya.CodeHash),Nt0=BigInt(256)**BigInt(Aj0)});var dN=y(()=>{cN();xq();Ka();jB();Ca();La();Ta();Fa();vq();wa();Ba();Ea();ka();xa();fa();va();ga();ba()});var ha=()=>{};function iN($,Q){if($.common.consensusAlgorithm()!==zq.Clique){let X=$._errorMsg(`BlockHeader.${Q}() call only supported for clique PoA networks`);throw r0(X)}}function ma($){iN($,"cliqueSigHash");let Q=$.raw();return Q[12]=$.extraData.subarray(0,$.extraData.length-GM),$.keccakFunction(E6.encode(Q))}function HB($){iN($,"cliqueIsEpochTransition");let Q=BigInt($.common.consensusConfig().epoch);return $.number%Q===X8}function ca($){return iN($,"cliqueExtraSeal"),$.extraData.subarray(-GM)}function NB($){iN($,"cliqueSigner");let Q=ca($);if(Q.length===0||g9(Q,new Uint8Array(65)))return uN();let X=Q.subarray(0,32),Y=Q.subarray(32,64),Z=y9(Q.subarray(64,65))+mN,J=Ia(ma($),Z,X,Y);return Ra(J)}var PB=32,GM=65;var AB=y(()=>{qX();UN();dN()});var Rj0=($,Q,X)=>{let Y=gq,Z=X8,J=$*X;while(J>X8)Z+=J,J=J*Q/(X*Y),Y++;return Z/X},RB=($,Q)=>{return Rj0(Q.param("minBlobGas"),$,Q.param("blobGasPriceUpdateFraction"))};var pa=y(()=>{dN()});var la=()=>{};var ua=y(()=>{ha();la()});var da=y(()=>{AB()});function ia($={},Q={}){return new CB($,Q)}var na=y(()=>{LB()});var oa;var wB=y(()=>{oa={1:{minGasLimit:5000,gasLimitBoundDivisor:1024,targetBlobGasPerBlock:0,blobGasPerBlob:0,maxBlobGasPerBlock:0,maxExtraDataSize:32,minimumDifficulty:131072,difficultyBoundDivisor:2048,durationLimit:13,difficultyBombDelay:0},609:{difficultyBombDelay:3000000},1013:{difficultyBombDelay:5000000},2384:{difficultyBombDelay:9000000},1559:{baseFeeMaxChangeDenominator:8,elasticityMultiplier:2,initialBaseFee:1e9},3554:{difficultyBombDelay:9500000},4345:{difficultyBombDelay:10700000},4844:{targetBlobGasPerBlock:393216,blobGasPerBlob:131072,maxBlobGasPerBlock:786432,blobGasPriceUpdateFraction:3338477,minBlobGas:1},5133:{difficultyBombDelay:11400000},7691:{targetBlobGasPerBlock:786432,maxBlobGasPerBlock:1179648,blobGasPriceUpdateFraction:5007716}}});class CB{get prevRandao(){if(!this.common.isActivatedEIP(4399)){let $=this._errorMsg("The prevRandao parameter can only be accessed when EIP-4399 is activated");throw r0($)}return this.mixHash}constructor($,Q={}){if(this.cache={hash:void 0},Q.common)this.common=Q.common.copy();else this.common=new E9({chain:IJ});this.common.updateParams(Q.params??oa),this.keccakFunction=this.common.customCrypto.keccak256??lN;let X=Q.skipConsensusFormatValidation??!1,Y={parentHash:new Uint8Array(32),uncleHash:JM,coinbase:uN(),stateRoot:new Uint8Array(32),transactionsTrie:hN,receiptTrie:hN,logsBloom:new Uint8Array(256),difficulty:X8,number:X8,gasLimit:Cj0,gasUsed:X8,timestamp:X8,extraData:new Uint8Array(0),mixHash:new Uint8Array(32),nonce:new Uint8Array(8)},Z=g8($.parentHash,C8.Uint8Array)??Y.parentHash,J=g8($.uncleHash,C8.Uint8Array)??Y.uncleHash,q=new x4(g8($.coinbase??Y.coinbase,C8.Uint8Array)),G=g8($.stateRoot,C8.Uint8Array)??Y.stateRoot,z=g8($.transactionsTrie,C8.Uint8Array)??Y.transactionsTrie,M=g8($.receiptTrie,C8.Uint8Array)??Y.receiptTrie,j=g8($.logsBloom,C8.Uint8Array)??Y.logsBloom,P=g8($.difficulty,C8.BigInt)??Y.difficulty,D=g8($.number,C8.BigInt)??Y.number,A=g8($.gasLimit,C8.BigInt)??Y.gasLimit,I=g8($.gasUsed,C8.BigInt)??Y.gasUsed,H=g8($.timestamp,C8.BigInt)??Y.timestamp,C=g8($.extraData,C8.Uint8Array)??Y.extraData,B=g8($.mixHash,C8.Uint8Array)??Y.mixHash,S=g8($.nonce,C8.Uint8Array)??Y.nonce;if((Q.setHardfork??!1)===!0)this.common.setHardforkBy({blockNumber:D,timestamp:H});let k={baseFeePerGas:this.common.isActivatedEIP(1559)?D===this.common.hardforkBlock(j0.London)?this.common.param("initialBaseFee"):za:void 0,withdrawalsRoot:this.common.isActivatedEIP(4895)?hN:void 0,blobGasUsed:this.common.isActivatedEIP(4844)?X8:void 0,excessBlobGas:this.common.isActivatedEIP(4844)?X8:void 0,parentBeaconBlockRoot:this.common.isActivatedEIP(4788)?new Uint8Array(32):void 0,requestsHash:this.common.isActivatedEIP(7685)?Ga:void 0},f=g8($.baseFeePerGas,C8.BigInt)??k.baseFeePerGas,g=g8($.withdrawalsRoot,C8.Uint8Array)??k.withdrawalsRoot,b=g8($.blobGasUsed,C8.BigInt)??k.blobGasUsed,m=g8($.excessBlobGas,C8.BigInt)??k.excessBlobGas,l=g8($.parentBeaconBlockRoot,C8.Uint8Array)??k.parentBeaconBlockRoot,h=g8($.requestsHash,C8.Uint8Array)??k.requestsHash;if(!this.common.isActivatedEIP(1559)&&f!==void 0)throw r0("A base fee for a block can only be set with EIP1559 being activated");if(!this.common.isActivatedEIP(4895)&&g!==void 0)throw r0("A withdrawalsRoot for a header can only be provided with EIP4895 being activated");if(!this.common.isActivatedEIP(4844)){if(b!==void 0)throw r0("blob gas used can only be provided with EIP4844 activated");if(m!==void 0)throw r0("excess blob gas can only be provided with EIP4844 activated")}if(!this.common.isActivatedEIP(4788)&&l!==void 0)throw r0("A parentBeaconBlockRoot for a header can only be provided with EIP4788 being activated");if(!this.common.isActivatedEIP(7685)&&h!==void 0)throw r0("requestsHash can only be provided with EIP 7685 activated");if(this.parentHash=Z,this.uncleHash=J,this.coinbase=q,this.stateRoot=G,this.transactionsTrie=z,this.receiptTrie=M,this.logsBloom=j,this.difficulty=P,this.number=D,this.gasLimit=A,this.gasUsed=I,this.timestamp=H,this.extraData=C,this.mixHash=B,this.nonce=S,this.baseFeePerGas=f,this.withdrawalsRoot=g,this.blobGasUsed=b,this.excessBlobGas=m,this.parentBeaconBlockRoot=l,this.requestsHash=h,this._genericFormatValidation(),this._validateDAOExtraData(),Q.calcDifficultyFromHeader&&this.common.consensusAlgorithm()===zq.Ethash)this.difficulty=this.ethashCanonicalDifficulty(Q.calcDifficultyFromHeader);if(X===!1)this._consensusFormatValidation();if(Q?.freeze??!0)Object.freeze(this)}_genericFormatValidation(){let{parentHash:$,stateRoot:Q,transactionsTrie:X,receiptTrie:Y,mixHash:Z,nonce:J}=this;if($.length!==32){let q=this._errorMsg(`parentHash must be 32 bytes, received ${$.length} bytes`);throw r0(q)}if(Q.length!==32){let q=this._errorMsg(`stateRoot must be 32 bytes, received ${Q.length} bytes`);throw r0(q)}if(X.length!==32){let q=this._errorMsg(`transactionsTrie must be 32 bytes, received ${X.length} bytes`);throw r0(q)}if(Y.length!==32){let q=this._errorMsg(`receiptTrie must be 32 bytes, received ${Y.length} bytes`);throw r0(q)}if(Z.length!==32){let q=this._errorMsg(`mixHash must be 32 bytes, received ${Z.length} bytes`);throw r0(q)}if(J.length!==8){let q=this._errorMsg(`nonce must be 8 bytes, received ${J.length} bytes`);throw r0(q)}if(this.gasUsed>this.gasLimit){let q=this._errorMsg(`Invalid block: too much gas used. Used: ${this.gasUsed}, gas limit: ${this.gasLimit}`);throw r0(q)}if(this.common.isActivatedEIP(1559)){if(typeof this.baseFeePerGas!=="bigint"){let G=this._errorMsg("EIP1559 block has no base fee field");throw r0(G)}let q=this.common.hardforkBlock(j0.London);if(typeof q==="bigint"&&q!==X8&&this.number===q){let G=this.common.param("initialBaseFee");if(this.baseFeePerGas!==G){let z=this._errorMsg("Initial EIP1559 block does not have initial base fee");throw r0(z)}}}if(this.common.isActivatedEIP(4895)){if(this.withdrawalsRoot===void 0){let q=this._errorMsg("EIP4895 block has no withdrawalsRoot field");throw r0(q)}if(this.withdrawalsRoot?.length!==32){let q=this._errorMsg(`withdrawalsRoot must be 32 bytes, received ${this.withdrawalsRoot.length} bytes`);throw r0(q)}}if(this.common.isActivatedEIP(4788)){if(this.parentBeaconBlockRoot===void 0){let q=this._errorMsg("EIP4788 block has no parentBeaconBlockRoot field");throw r0(q)}if(this.parentBeaconBlockRoot?.length!==32){let q=this._errorMsg(`parentBeaconBlockRoot must be 32 bytes, received ${this.parentBeaconBlockRoot.length} bytes`);throw r0(q)}}if(this.common.isActivatedEIP(7685)){if(this.requestsHash===void 0){let q=this._errorMsg("EIP7685 block has no requestsHash field");throw r0(q)}}}_consensusFormatValidation(){let{nonce:$,uncleHash:Q,difficulty:X,extraData:Y,number:Z}=this;if(this.common.consensusAlgorithm()===zq.Ethash){if(Z>X8&&this.extraData.length>this.common.param("maxExtraDataSize")){let J=this._errorMsg("invalid amount of extra data");throw r0(J)}}if(this.common.consensusAlgorithm()===zq.Clique){let J=PB+GM;if(!HB(this)){if(this.extraData.length!==J){let q=this._errorMsg(`extraData must be ${J} bytes on non-epoch transition blocks, received ${this.extraData.length} bytes`);throw r0(q)}}else{let q=this.extraData.length-J;if(q%20!==0){let G=this._errorMsg(`invalid signer list length in extraData, received signer length of ${q} (not divisible by 20)`);throw r0(G)}if(!this.coinbase.isZero()){let G=this._errorMsg(`coinbase must be filled with zeros on epoch transition blocks, received ${this.coinbase}`);throw r0(G)}}if(!g9(this.mixHash,new Uint8Array(32))){let q=this._errorMsg(`mixHash must be filled with zeros, received ${this.mixHash}`);throw r0(q)}}if(this.common.consensusType()===AO.ProofOfStake){let J=!1,q="";if(!g9(Q,JM))q+=`, uncleHash: ${R8(Q)} (expected: ${R8(JM)})`,J=!0;if(Z!==X8){if(X!==X8)q+=`, difficulty: ${X} (expected: 0)`,J=!0;if(Y.length>32)q+=`, extraData: ${R8(Y)} (cannot exceed 32 bytes length, received ${Y.length} bytes)`,J=!0;if(!g9($,new Uint8Array(8)))q+=`, nonce: ${R8($)} (expected: ${R8(new Uint8Array(8))})`,J=!0}if(J){let G=this._errorMsg(`Invalid PoS block: ${q}`);throw r0(G)}}}validateGasLimit($){let Q=$.gasLimit,X=this.common.hardforkBlock(j0.London);if(typeof X==="bigint"&&X!==X8&&this.number===X){let G=this.common.param("elasticityMultiplier");Q=Q*G}let Y=this.gasLimit,Z=Q/this.common.param("gasLimitBoundDivisor"),J=Q+Z,q=Q-Z;if(Y>=J){let G=this._errorMsg(`gas limit increased too much. Gas limit: ${Y}, max gas limit: ${J}`);throw r0(G)}if(Y<=q){let G=this._errorMsg(`gas limit decreased too much. Gas limit: ${Y}, min gas limit: ${q}`);throw r0(G)}if(Y<this.common.param("minGasLimit")){let G=this._errorMsg(`gas limit decreased below minimum gas limit. Gas limit: ${Y}, minimum gas limit: ${this.common.param("minGasLimit")}`);throw r0(G)}}calcNextBaseFee(){if(!this.common.isActivatedEIP(1559)){let Y=this._errorMsg("calcNextBaseFee() can only be called with EIP1559 being activated");throw r0(Y)}let $,Q=this.common.param("elasticityMultiplier"),X=this.gasLimit/Q;if(X===this.gasUsed)$=this.baseFeePerGas;else if(this.gasUsed>X){let Y=this.gasUsed-X,Z=this.common.param("baseFeeMaxChangeDenominator"),J=this.baseFeePerGas*Y/X/Z;$=(J>gq?J:gq)+this.baseFeePerGas}else{let Y=X-this.gasUsed,Z=this.common.param("baseFeeMaxChangeDenominator"),J=this.baseFeePerGas*Y/X/Z;$=this.baseFeePerGas-J>X8?this.baseFeePerGas-J:X8}return $}getBlobGasPrice(){if(this.excessBlobGas===void 0)throw r0("header must have excessBlobGas field populated");return RB(this.excessBlobGas,this.common)}calcDataFee($){let X=this.common.param("blobGasPerBlob")*BigInt($),Y=this.getBlobGasPrice();return X*Y}calcNextExcessBlobGas($){let Q=(this.excessBlobGas??X8)+(this.blobGasUsed??X8),X=$.param("targetBlobGasPerBlock");if(Q<=X)return X8;else return Q-X}calcNextBlobGasPrice($){return RB(this.calcNextExcessBlobGas($),$)}raw(){let $=[this.parentHash,this.uncleHash,this.coinbase.bytes,this.stateRoot,this.transactionsTrie,this.receiptTrie,this.logsBloom,b9(this.difficulty),b9(this.number),b9(this.gasLimit),b9(this.gasUsed),b9(this.timestamp??X8),this.extraData,this.mixHash,this.nonce];if(this.common.isActivatedEIP(1559))$.push(b9(this.baseFeePerGas));if(this.common.isActivatedEIP(4895))$.push(this.withdrawalsRoot);if(this.common.isActivatedEIP(6800));if(this.common.isActivatedEIP(4844))$.push(b9(this.blobGasUsed)),$.push(b9(this.excessBlobGas));if(this.common.isActivatedEIP(4788))$.push(this.parentBeaconBlockRoot);if(this.common.isActivatedEIP(7685))$.push(this.requestsHash);return $}hash(){if(Object.isFrozen(this)){if(!this.cache.hash)this.cache.hash=this.keccakFunction(E6.encode(this.raw()));return this.cache.hash}return this.keccakFunction(E6.encode(this.raw()))}isGenesis(){return this.number===X8}ethashCanonicalDifficulty($){if(this.common.consensusType()!==AO.ProofOfWork){let M=this._errorMsg("difficulty calculation is only supported on PoW chains");throw r0(M)}if(this.common.consensusAlgorithm()!==zq.Ethash){let M=this._errorMsg("difficulty calculation currently only supports the ethash algorithm");throw r0(M)}let Q=this.timestamp,{timestamp:X,difficulty:Y}=$,Z=this.common.param("minimumDifficulty"),J=Y/this.common.param("difficultyBoundDivisor"),q=this.number,G;if(this.common.gteHardfork(j0.Byzantium)){let M=g9($.uncleHash,JM)?1:2,j=BigInt(M)-(Q-X)/BigInt(9),P=BigInt(-99);if(P>j)j=P;G=Y+J*j}if(this.common.gteHardfork(j0.Byzantium)){if(q=q-this.common.param("difficultyBombDelay"),q<X8)q=X8}else if(this.common.gteHardfork(j0.Homestead)){let M=gq-(Q-X)/BigInt(10),j=BigInt(-99);if(j>M)M=j;G=Y+J*M}else if(X+this.common.param("durationLimit")>Q)G=J+Y;else G=Y-J;let z=q/BigInt(1e5)-p6;if(z>=0)G=G+p6**z;if(G<Z)G=Z;return G}serialize(){return E6.encode(this.raw())}toJSON(){let $=this.withdrawalsRoot?{withdrawalsRoot:R8(this.withdrawalsRoot)}:{},Q={parentHash:R8(this.parentHash),uncleHash:R8(this.uncleHash),coinbase:this.coinbase.toString(),stateRoot:R8(this.stateRoot),transactionsTrie:R8(this.transactionsTrie),...$,receiptTrie:R8(this.receiptTrie),logsBloom:R8(this.logsBloom),difficulty:fq(this.difficulty),number:fq(this.number),gasLimit:fq(this.gasLimit),gasUsed:fq(this.gasUsed),timestamp:fq(this.timestamp),extraData:R8(this.extraData),mixHash:R8(this.mixHash),nonce:R8(this.nonce)};if(this.common.isActivatedEIP(1559))Q.baseFeePerGas=fq(this.baseFeePerGas);if(this.common.isActivatedEIP(4844))Q.blobGasUsed=fq(this.blobGasUsed),Q.excessBlobGas=fq(this.excessBlobGas);if(this.common.isActivatedEIP(4788))Q.parentBeaconBlockRoot=R8(this.parentBeaconBlockRoot);if(this.common.isActivatedEIP(7685))Q.requestsHash=R8(this.requestsHash);return Q}_validateDAOExtraData(){if(!this.common.hardforkIsActiveOnBlock(j0.Dao,this.number))return;let $=this.common.hardforkBlock(j0.Dao);if($===null||this.number<$)return;let Q=WZ("0x64616f2d686172642d666f726b"),X=BigInt(9);if(this.number-$<=X&&!g9(this.extraData,Q)){let Z=this._errorMsg(`extraData should be 'dao-hard-fork', got ${zB(this.extraData)} (hex: ${R8(this.extraData)})`);throw r0(Z)}}errorStr(){let $="";try{$=R8(this.hash())}catch{$="error"}let Q="";try{Q=this.common.hardfork()}catch{Q="error"}let X=`block header number=${this.number} hash=${$} `;return X+=`hf=${Q} baseFeePerGas=${this.baseFeePerGas??"none"}`,X}_errorMsg($){return`${$} (${this.errorStr()})`}}var Cj0;var ra=y(()=>{qX();UN();dN();DB();AB();pa();wB();Cj0=BigInt("0xffffffffffffff")});var sa=y(()=>{na();ra()});var aa=()=>{};var LB=y(()=>{ua();da();sa();wB();aa()});var f4;var ta=y(()=>{f4=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function Lj0($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function x7($){if(!Number.isSafeInteger($)||$<0)throw new Error("positive integer expected, got "+$)}function VZ($,...Q){if(!Lj0($))throw new Error("Uint8Array expected");if(Q.length>0&&!Q.includes($.length))throw new Error("Uint8Array expected of length "+Q+", got length="+$.length)}function $t($){if(typeof $!=="function"||typeof $.create!=="function")throw new Error("Hash should be wrapped by utils.createHasher");x7($.outputLen),x7($.blockLen)}function hJ($,Q=!0){if($.destroyed)throw new Error("Hash instance has been destroyed");if(Q&&$.finished)throw new Error("Hash#digest() has already been called")}function zM($,Q){VZ($);let X=Q.outputLen;if($.length<X)throw new Error("digestInto() expects output buffer of length at least "+X)}function Qt($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function OZ(...$){for(let Q=0;Q<$.length;Q++)$[Q].fill(0)}function KM($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function h9($,Q){return $<<32-Q|$>>>Q}function UM($,Q){return $<<Q|$>>>32-Q>>>0}function Tj0($){return $<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255}function Ij0($){for(let Q=0;Q<$.length;Q++)$[Q]=Tj0($[Q]);return $}function nN($){if(VZ($),Xt)return $.toHex();let Q="";for(let X=0;X<$.length;X++)Q+=Fj0[$[X]];return Q}function ea($){if($>=yq._0&&$<=yq._9)return $-yq._0;if($>=yq.A&&$<=yq.F)return $-(yq.A-10);if($>=yq.a&&$<=yq.f)return $-(yq.a-10);return}function Yt($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(Xt)return Uint8Array.fromHex($);let Q=$.length,X=Q/2;if(Q%2)throw new Error("hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=ea($.charCodeAt(J)),G=ea($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw new Error('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function l6($){if(typeof $!=="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function v4($){if(typeof $==="string")$=l6($);return VZ($),$}function IB(...$){let Q=0;for(let Y=0;Y<$.length;Y++){let Z=$[Y];VZ(Z),Q+=Z.length}let X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}class g4{}function u6($){let Q=(Y)=>$().update(v4(Y)).digest(),X=$();return Q.outputLen=X.outputLen,Q.blockLen=X.blockLen,Q.create=()=>$(),Q}function Zt($=32){if(f4&&typeof f4.getRandomValues==="function")return f4.getRandomValues(new Uint8Array($));if(f4&&typeof f4.randomBytes==="function")return Uint8Array.from(f4.randomBytes($));throw new Error("crypto.getRandomValues must be defined")}var wj0,TB,Xt,Fj0,yq;var m9=y(()=>{ta();/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */wj0=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();TB=wj0?($)=>$:Ij0,Xt=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")(),Fj0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));yq={_0:48,_9:57,A:65,F:70,a:97,f:102}});function Bj0($,Q,X,Y){if(typeof $.setBigUint64==="function")return $.setBigUint64(Q,X,Y);let Z=BigInt(32),J=BigInt(4294967295),q=Number(X>>Z&J),G=Number(X&J),z=Y?4:0,M=Y?0:4;$.setUint32(Q+z,q,Y),$.setUint32(Q+M,G,Y)}function FB($,Q,X){return $&Q^~$&X}function BB($,Q,X){return $&Q^$&X^Q&X}var WM,bq;var SB=y(()=>{m9();WM=class WM extends g4{constructor($,Q,X,Y){super();this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=$,this.outputLen=Q,this.padOffset=X,this.isLE=Y,this.buffer=new Uint8Array($),this.view=KM(this.buffer)}update($){hJ(this),$=v4($),VZ($);let{view:Q,buffer:X,blockLen:Y}=this,Z=$.length;for(let J=0;J<Z;){let q=Math.min(Y-this.pos,Z-J);if(q===Y){let G=KM($);for(;Y<=Z-J;J+=Y)this.process(G,J);continue}if(X.set($.subarray(J,J+q),this.pos),this.pos+=q,J+=q,this.pos===Y)this.process(Q,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){hJ(this),zM($,this),this.finished=!0;let{buffer:Q,view:X,blockLen:Y,isLE:Z}=this,{pos:J}=this;if(Q[J++]=128,OZ(this.buffer.subarray(J)),this.padOffset>Y-J)this.process(X,0),J=0;for(let j=J;j<Y;j++)Q[j]=0;Bj0(X,Y-8,BigInt(this.length*8),Z),this.process(X,0);let q=KM($),G=this.outputLen;if(G%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let z=G/4,M=this.get();if(z>M.length)throw new Error("_sha2: outputLen bigger than state");for(let j=0;j<z;j++)q.setUint32(4*j,M[j],Z)}digest(){let{buffer:$,outputLen:Q}=this;this.digestInto($);let X=$.slice(0,Q);return this.destroy(),X}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:Q,buffer:X,length:Y,finished:Z,destroyed:J,pos:q}=this;if($.destroyed=J,$.finished=Z,$.length=Y,$.pos=q,Y%Q)$.buffer.set(X);return $}clone(){return this._cloneInto()}};bq=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225])});function Sj0($,Q=!1){if(Q)return{h:Number($&oN),l:Number($>>Jt&oN)};return{h:Number($>>Jt&oN)|0,l:Number($&oN)|0}}function qt($,Q=!1){let X=$.length,Y=new Uint32Array(X),Z=new Uint32Array(X);for(let J=0;J<X;J++){let{h:q,l:G}=Sj0($[J],Q);[Y[J],Z[J]]=[q,G]}return[Y,Z]}var oN,Jt,Gt=($,Q,X)=>$<<X|Q>>>32-X,zt=($,Q,X)=>Q<<X|$>>>32-X,Kt=($,Q,X)=>Q<<X-32|$>>>64-X,Ut=($,Q,X)=>$<<X-32|Q>>>64-X;var Wt=y(()=>{oN=BigInt(4294967295),Jt=BigInt(32)});var Ej0,f7,Vt,rN;var EB=y(()=>{SB();m9();Ej0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),f7=new Uint32Array(64);Vt=class Vt extends WM{constructor($=32){super(64,$,8,!1);this.A=bq[0]|0,this.B=bq[1]|0,this.C=bq[2]|0,this.D=bq[3]|0,this.E=bq[4]|0,this.F=bq[5]|0,this.G=bq[6]|0,this.H=bq[7]|0}get(){let{A:$,B:Q,C:X,D:Y,E:Z,F:J,G:q,H:G}=this;return[$,Q,X,Y,Z,J,q,G]}set($,Q,X,Y,Z,J,q,G){this.A=$|0,this.B=Q|0,this.C=X|0,this.D=Y|0,this.E=Z|0,this.F=J|0,this.G=q|0,this.H=G|0}process($,Q){for(let j=0;j<16;j++,Q+=4)f7[j]=$.getUint32(Q,!1);for(let j=16;j<64;j++){let P=f7[j-15],D=f7[j-2],A=h9(P,7)^h9(P,18)^P>>>3,I=h9(D,17)^h9(D,19)^D>>>10;f7[j]=I+f7[j-7]+A+f7[j-16]|0}let{A:X,B:Y,C:Z,D:J,E:q,F:G,G:z,H:M}=this;for(let j=0;j<64;j++){let P=h9(q,6)^h9(q,11)^h9(q,25),D=M+P+FB(q,G,z)+Ej0[j]+f7[j]|0,I=(h9(X,2)^h9(X,13)^h9(X,22))+BB(X,Y,Z)|0;M=z,z=G,G=q,q=J+D|0,J=Z,Z=Y,Y=X,X=D+I|0}X=X+this.A|0,Y=Y+this.B|0,Z=Z+this.C|0,J=J+this.D|0,q=q+this.E|0,G=G+this.F|0,z=z+this.G|0,M=M+this.H|0,this.set(X,Y,Z,J,q,G,z,M)}roundClean(){OZ(f7)}destroy(){this.set(0,0,0,0,0,0,0,0),OZ(this.buffer)}};rN=u6(()=>new Vt)});var _B,kB=($,Q,X)=>new _B($,Q).update(X).digest();var Ot=y(()=>{m9();_B=class _B extends g4{constructor($,Q){super();this.finished=!1,this.destroyed=!1,$t($);let X=v4(Q);if(this.iHash=$.create(),typeof this.iHash.update!=="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let Y=this.blockLen,Z=new Uint8Array(Y);Z.set(X.length>Y?$.create().update(X).digest():X);for(let J=0;J<Z.length;J++)Z[J]^=54;this.iHash.update(Z),this.oHash=$.create();for(let J=0;J<Z.length;J++)Z[J]^=106;this.oHash.update(Z),OZ(Z)}update($){return hJ(this),this.iHash.update($),this}digestInto($){hJ(this),VZ($,this.outputLen),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||($=Object.create(Object.getPrototypeOf(this),{}));let{oHash:Q,iHash:X,finished:Y,destroyed:Z,blockLen:J,outputLen:q}=this;return $=$,$.finished=Y,$.destroyed=Z,$.blockLen=J,$.outputLen=q,$.oHash=Q._cloneInto($.oHash),$.iHash=X._cloneInto($.iHash),$}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};kB.create=($,Q)=>new _B($,Q)});function y4($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function yB($){if(!y4($))throw new Error("Uint8Array expected")}function d6($,Q){if(typeof Q!=="boolean")throw new Error($+" boolean expected, got "+Q)}function VM($){let Q=$.toString(16);return Q.length&1?"0"+Q:Q}function jt($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);return $===""?gB:BigInt("0x"+$)}function i6($){if(yB($),Pt)return $.toHex();let Q="";for(let X=0;X<$.length;X++)Q+=_j0[$[X]];return Q}function Mt($){if($>=hq._0&&$<=hq._9)return $-hq._0;if($>=hq.A&&$<=hq.F)return $-(hq.A-10);if($>=hq.a&&$<=hq.f)return $-(hq.a-10);return}function OM($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(Pt)return Uint8Array.fromHex($);let Q=$.length,X=Q/2;if(Q%2)throw new Error("hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=Mt($.charCodeAt(J)),G=Mt($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw new Error('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function mq($){return jt(i6($))}function bB($){return yB($),jt(i6(Uint8Array.from($).reverse()))}function b4($,Q){return OM($.toString(16).padStart(Q*2,"0"))}function hB($,Q){return b4($,Q).reverse()}function MZ($,Q,X){let Y;if(typeof Q==="string")try{Y=OM(Q)}catch(J){throw new Error($+" must be hex string or Uint8Array, cause: "+J)}else if(y4(Q))Y=Uint8Array.from(Q);else throw new Error($+" must be hex string or Uint8Array");let Z=Y.length;if(typeof X==="number"&&Z!==X)throw new Error($+" of length "+X+" expected, got "+Z);return Y}function MM(...$){let Q=0;for(let Y=0;Y<$.length;Y++){let Z=$[Y];yB(Z),Q+=Z.length}let X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}function sN($,Q,X){return xB($)&&xB(Q)&&xB(X)&&Q<=$&&$<X}function h4($,Q,X,Y){if(!sN(Q,X,Y))throw new Error("expected valid "+$+": "+X+" <= n < "+Y+", got "+Q)}function Ht($){let Q;for(Q=0;$>gB;$>>=vB,Q+=1);return Q}function Nt($,Q,X){if(typeof $!=="number"||$<2)throw new Error("hashLen must be a number");if(typeof Q!=="number"||Q<2)throw new Error("qByteLen must be a number");if(typeof X!=="function")throw new Error("hmacFn must be a function");let Y=fB($),Z=fB($),J=0,q=()=>{Y.fill(1),Z.fill(0),J=0},G=(...P)=>X(Z,Y,...P),z=(P=fB(0))=>{if(Z=G(Dt([0]),P),Y=G(),P.length===0)return;Z=G(Dt([1]),P),Y=G()},M=()=>{if(J++>=1000)throw new Error("drbg: tried 1000 values");let P=0,D=[];while(P<Q){Y=G();let A=Y.slice();D.push(A),P+=Y.length}return MM(...D)};return(P,D)=>{q(),z(P);let A=void 0;while(!(A=D(M())))z();return q(),A}}function c4($,Q,X={}){let Y=(Z,J,q)=>{let G=kj0[J];if(typeof G!=="function")throw new Error("invalid validator function");let z=$[Z];if(q&&z===void 0)return;if(!G(z,$))throw new Error("param "+String(Z)+" is invalid. Expected "+J+", got "+z)};for(let[Z,J]of Object.entries(Q))Y(Z,J,!1);for(let[Z,J]of Object.entries(X))Y(Z,J,!0);return $}function mB($){let Q=new WeakMap;return(X,...Y)=>{let Z=Q.get(X);if(Z!==void 0)return Z;let J=$(X,...Y);return Q.set(X,J),J}}var gB,vB,Pt,_j0,hq,xB=($)=>typeof $==="bigint"&&gB<=$,m4=($)=>(vB<<BigInt($))-vB,fB=($)=>new Uint8Array($),Dt=($)=>Uint8Array.from($),kj0;var aN=y(()=>{/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */gB=BigInt(0),vB=BigInt(1);Pt=typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function",_j0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));hq={_0:48,_9:57,A:65,F:70,a:97,f:102};kj0={bigint:($)=>typeof $==="bigint",function:($)=>typeof $==="function",boolean:($)=>typeof $==="boolean",string:($)=>typeof $==="string",stringOrUint8Array:($)=>typeof $==="string"||y4($),isSafeInteger:($)=>Number.isSafeInteger($),array:($)=>Array.isArray($),field:($,Q)=>Q.Fp.isValid($),hash:($)=>typeof $==="function"&&Number.isSafeInteger($.outputLen)}});function yX($,Q){let X=$%Q;return X>=UY?X:Q+X}function DZ($,Q,X){let Y=$;while(Q-- >UY)Y*=Y,Y%=X;return Y}function tN($,Q){if($===UY)throw new Error("invert: expected non-zero number");if(Q<=UY)throw new Error("invert: expected positive modulus, got "+Q);let X=yX($,Q),Y=Q,Z=UY,J=OX,q=OX,G=UY;while(X!==UY){let M=Y/X,j=Y%X,P=Z-q*M,D=J-G*M;Y=X,X=j,Z=q,J=G,q=P,G=D}if(Y!==OX)throw new Error("invert: does not exist");return yX(Z,Q)}function gj0($){let Q=$-OX,X=0;while(Q%p4===UY)Q/=p4,X++;let Y=p4,Z=DM($);while(Y<$&&Ct(Z,Y))if(Y++>1000)throw new Error("Cannot find square root: probably non-prime P");if(X===1){let q=($+OX)/cB;return function G(z,M){let j=z.pow(M,q);if(!z.eql(z.sqr(j),M))throw new Error("Cannot find square root");return j}}let J=(Q+OX)/p4;return function q(G,z){if(!Ct(G,z))throw new Error("Cannot find square root");let M=X,j=G.pow(G.mul(G.ONE,Y),Q),P=G.pow(z,J),D=G.pow(z,Q);while(!G.eql(D,G.ONE)){if(G.eql(D,G.ZERO))return G.ZERO;let A=1;for(let H=G.sqr(D);A<M;A++){if(G.eql(H,G.ONE))break;H=G.sqr(H)}let I=G.pow(j,OX<<BigInt(M-A-1));j=G.sqr(I),P=G.mul(P,I),D=G.mul(D,j),M=A}return P}}function yj0($){if($%cB===xj0)return function Q(X,Y){let Z=($+OX)/cB,J=X.pow(Y,Z);if(!X.eql(X.sqr(J),Y))throw new Error("Cannot find square root");return J};if($%Rt===At)return function Q(X,Y){let Z=X.mul(Y,p4),J=($-At)/Rt,q=X.pow(Z,J),G=X.mul(Y,q),z=X.mul(X.mul(G,p4),q),M=X.mul(G,X.sub(z,X.ONE));if(!X.eql(X.sqr(M),Y))throw new Error("Cannot find square root");return M};if($%vj0===fj0);return gj0($)}function pB($){let Q={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},X=bj0.reduce((Y,Z)=>{return Y[Z]="function",Y},Q);return c4($,X)}function hj0($,Q,X){if(X<UY)throw new Error("invalid exponent, negatives unsupported");if(X===UY)return $.ONE;if(X===OX)return Q;let Y=$.ONE,Z=Q;while(X>UY){if(X&OX)Y=$.mul(Y,Z);Z=$.sqr(Z),X>>=OX}return Y}function lB($,Q,X=!1){let Y=new Array(Q.length).fill(X?$.ZERO:void 0),Z=Q.reduce((q,G,z)=>{if($.is0(G))return q;return Y[z]=q,$.mul(q,G)},$.ONE),J=$.inv(Z);return Q.reduceRight((q,G,z)=>{if($.is0(G))return q;return Y[z]=$.mul(q,Y[z]),$.mul(q,G)},J),Y}function mj0($,Q){let X=($.ORDER-OX)/p4,Y=$.pow(Q,X),Z=$.eql(Y,$.ONE),J=$.eql(Y,$.ZERO),q=$.eql(Y,$.neg($.ONE));if(!Z&&!J&&!q)throw new Error("Cannot find square root: probably non-prime P");return Z?1:J?0:-1}function Ct($,Q){let X=mj0($,Q);return X===0||X===1}function uB($,Q){if(Q!==void 0)x7(Q);let X=Q!==void 0?Q:$.toString(2).length,Y=Math.ceil(X/8);return{nBitLength:X,nByteLength:Y}}function DM($,Q,X=!1,Y={}){if($<=UY)throw new Error("invalid field: expected ORDER > 0, got "+$);let{nBitLength:Z,nByteLength:J}=uB($,Q);if(J>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let q,G=Object.freeze({ORDER:$,isLE:X,BITS:Z,BYTES:J,MASK:m4(Z),ZERO:UY,ONE:OX,create:(z)=>yX(z,$),isValid:(z)=>{if(typeof z!=="bigint")throw new Error("invalid field element: expected bigint, got "+typeof z);return UY<=z&&z<$},is0:(z)=>z===UY,isOdd:(z)=>(z&OX)===OX,neg:(z)=>yX(-z,$),eql:(z,M)=>z===M,sqr:(z)=>yX(z*z,$),add:(z,M)=>yX(z+M,$),sub:(z,M)=>yX(z-M,$),mul:(z,M)=>yX(z*M,$),pow:(z,M)=>hj0(G,z,M),div:(z,M)=>yX(z*tN(M,$),$),sqrN:(z)=>z*z,addN:(z,M)=>z+M,subN:(z,M)=>z-M,mulN:(z,M)=>z*M,inv:(z)=>tN(z,$),sqrt:Y.sqrt||((z)=>{if(!q)q=yj0($);return q(G,z)}),toBytes:(z)=>X?hB(z,J):b4(z,J),fromBytes:(z)=>{if(z.length!==J)throw new Error("Field.fromBytes: expected "+J+" bytes, got "+z.length);return X?bB(z):mq(z)},invertBatch:(z)=>lB(G,z),cmov:(z,M,j)=>j?M:z});return Object.freeze(G)}function Lt($){if(typeof $!=="bigint")throw new Error("field order must be bigint");let Q=$.toString(2).length;return Math.ceil(Q/8)}function dB($){let Q=Lt($);return Q+Math.ceil(Q/2)}function wt($,Q,X=!1){let Y=$.length,Z=Lt(Q),J=dB(Q);if(Y<16||Y<J||Y>1024)throw new Error("expected "+J+"-1024 bytes of input, got "+Y);let q=X?bB($):mq($),G=yX(q,Q-OX)+OX;return X?hB(G,Z):b4(G,Z)}var UY,OX,p4,xj0,cB,At,Rt,fj0,vj0,bj0;var eN=y(()=>{m9();aN();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */UY=BigInt(0),OX=BigInt(1),p4=BigInt(2),xj0=BigInt(3),cB=BigInt(4),At=BigInt(5),Rt=BigInt(8),fj0=BigInt(9),vj0=BigInt(16);bj0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function iB($,Q){let X=Q.negate();return $?X:Q}function Ft($,Q){if(!Number.isSafeInteger($)||$<=0||$>Q)throw new Error("invalid window size, expected [1.."+Q+"], got W="+$)}function nB($,Q){Ft($,Q);let X=Math.ceil(Q/$)+1,Y=2**($-1),Z=2**$,J=m4($),q=BigInt($);return{windows:X,windowSize:Y,mask:J,maxNumber:Z,shiftBy:q}}function It($,Q,X){let{windowSize:Y,mask:Z,maxNumber:J,shiftBy:q}=X,G=Number($&Z),z=$>>q;if(G>Y)G-=J,z+=sB;let M=Q*Y,j=M+Math.abs(G)-1,P=G===0,D=G<0,A=Q%2!==0;return{nextN:z,offset:j,isZero:P,isNeg:D,isNegF:A,offsetF:M}}function cj0($,Q){if(!Array.isArray($))throw new Error("array expected");$.forEach((X,Y)=>{if(!(X instanceof Q))throw new Error("invalid point at index "+Y)})}function pj0($,Q){if(!Array.isArray($))throw new Error("array of scalars expected");$.forEach((X,Y)=>{if(!Q.isValid(X))throw new Error("invalid scalar at index "+Y)})}function rB($){return Bt.get($)||1}function St($,Q){return{constTimeNegate:iB,hasPrecomputes(X){return rB(X)!==1},unsafeLadder(X,Y,Z=$.ZERO){let J=X;while(Y>Tt){if(Y&sB)Z=Z.add(J);J=J.double(),Y>>=sB}return Z},precomputeWindow(X,Y){let{windows:Z,windowSize:J}=nB(Y,Q),q=[],G=X,z=G;for(let M=0;M<Z;M++){z=G,q.push(z);for(let j=1;j<J;j++)z=z.add(G),q.push(z);G=z.double()}return q},wNAF(X,Y,Z){let{ZERO:J,BASE:q}=$,G=nB(X,Q);for(let z=0;z<G.windows;z++){let{nextN:M,offset:j,isZero:P,isNeg:D,isNegF:A,offsetF:I}=It(Z,z,G);if(Z=M,P)q=q.add(iB(A,Y[I]));else J=J.add(iB(D,Y[j]))}return{p:J,f:q}},wNAFUnsafe(X,Y,Z,J=$.ZERO){let q=nB(X,Q);for(let G=0;G<q.windows;G++){if(Z===Tt)break;let{nextN:z,offset:M,isZero:j,isNeg:P}=It(Z,G,q);if(Z=z,j)continue;else{let D=Y[M];J=J.add(P?D.negate():D)}}return J},getPrecomputes(X,Y,Z){let J=oB.get(Y);if(!J){if(J=this.precomputeWindow(Y,X),X!==1)oB.set(Y,Z(J))}return J},wNAFCached(X,Y,Z){let J=rB(X);return this.wNAF(J,this.getPrecomputes(J,X,Z),Y)},wNAFCachedUnsafe(X,Y,Z,J){let q=rB(X);if(q===1)return this.unsafeLadder(X,Y,J);return this.wNAFUnsafe(q,this.getPrecomputes(q,X,Z),Y,J)},setWindowSize(X,Y){Ft(Y,Q),Bt.set(X,Y),oB.delete(X)}}}function Et($,Q,X,Y){if(cj0(X,$),pj0(Y,Q),X.length!==Y.length)throw new Error("arrays of points and scalars must have equal length");let Z=$.ZERO,J=Ht(BigInt(X.length)),q=J>12?J-3:J>4?J-2:J?2:1,G=m4(q),z=new Array(Number(G)+1).fill(Z),M=Math.floor((Q.BITS-1)/q)*q,j=Z;for(let P=M;P>=0;P-=q){z.fill(Z);for(let A=0;A<Y.length;A++){let I=Y[A],H=Number(I>>BigInt(P)&G);z[H]=z[H].add(X[A])}let D=Z;for(let A=z.length-1,I=Z;A>0;A--)I=I.add(z[A]),D=D.add(I);if(j=j.add(D),P!==0)for(let A=0;A<q;A++)j=j.double()}return j}function aB($){return pB($.Fp),c4($,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...uB($.n,$.nBitLength),...$,...{p:$.Fp.ORDER}})}var Tt,sB,oB,Bt;var _t=y(()=>{eN();aN();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Tt=BigInt(0),sB=BigInt(1);oB=new WeakMap,Bt=new WeakMap});function kt($){if($.lowS!==void 0)d6("lowS",$.lowS);if($.prehash!==void 0)d6("prehash",$.prehash)}function lj0($){let Q=aB($);c4(Q,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:X,Fp:Y,a:Z}=Q;if(X){if(!Y.eql(Z,Y.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof X!=="object"||typeof X.beta!=="bigint"||typeof X.splitScalar!=="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...Q})}function uj0($){let Q=lj0($),{Fp:X}=Q,Y=DM(Q.n,Q.nBitLength),Z=Q.toBytes||((H,C,B)=>{let S=C.toAffine();return MM(Uint8Array.from([4]),X.toBytes(S.x),X.toBytes(S.y))}),J=Q.fromBytes||((H)=>{let C=H.subarray(1),B=X.fromBytes(C.subarray(0,X.BYTES)),S=X.fromBytes(C.subarray(X.BYTES,2*X.BYTES));return{x:B,y:S}});function q(H){let{a:C,b:B}=Q,S=X.sqr(H),_=X.mul(S,H);return X.add(X.add(_,X.mul(H,C)),B)}if(!X.eql(X.sqr(Q.Gy),q(Q.Gx)))throw new Error("bad generator point: equation left != right");function G(H){return sN(H,cQ,Q.n)}function z(H){let{allowedPrivateKeyLengths:C,nByteLength:B,wrapPrivateKey:S,n:_}=Q;if(C&&typeof H!=="bigint"){if(y4(H))H=i6(H);if(typeof H!=="string"||!C.includes(H.length))throw new Error("invalid private key");H=H.padStart(B*2,"0")}let k;try{k=typeof H==="bigint"?H:mq(MZ("private key",H,B))}catch(f){throw new Error("invalid private key, expected hex or "+B+" bytes, got "+typeof H)}if(S)k=yX(k,_);return h4("private key",k,cQ,_),k}function M(H){if(!(H instanceof D))throw new Error("ProjectivePoint expected")}let j=mB((H,C)=>{let{px:B,py:S,pz:_}=H;if(X.eql(_,X.ONE))return{x:B,y:S};let k=H.is0();if(C==null)C=k?X.ONE:X.inv(_);let f=X.mul(B,C),g=X.mul(S,C),b=X.mul(_,C);if(k)return{x:X.ZERO,y:X.ZERO};if(!X.eql(b,X.ONE))throw new Error("invZ was invalid");return{x:f,y:g}}),P=mB((H)=>{if(H.is0()){if(Q.allowInfinityPoint&&!X.is0(H.py))return;throw new Error("bad point: ZERO")}let{x:C,y:B}=H.toAffine();if(!X.isValid(C)||!X.isValid(B))throw new Error("bad point: x or y not FE");let S=X.sqr(B),_=q(C);if(!X.eql(S,_))throw new Error("bad point: equation left != right");if(!H.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class D{constructor(H,C,B){if(H==null||!X.isValid(H))throw new Error("x required");if(C==null||!X.isValid(C)||X.is0(C))throw new Error("y required");if(B==null||!X.isValid(B))throw new Error("z required");this.px=H,this.py=C,this.pz=B,Object.freeze(this)}static fromAffine(H){let{x:C,y:B}=H||{};if(!H||!X.isValid(C)||!X.isValid(B))throw new Error("invalid affine point");if(H instanceof D)throw new Error("projective point not allowed");let S=(_)=>X.eql(_,X.ZERO);if(S(C)&&S(B))return D.ZERO;return new D(C,B,X.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(H){let C=lB(X,H.map((B)=>B.pz));return H.map((B,S)=>B.toAffine(C[S])).map(D.fromAffine)}static fromHex(H){let C=D.fromAffine(J(MZ("pointHex",H)));return C.assertValidity(),C}static fromPrivateKey(H){return D.BASE.multiply(z(H))}static msm(H,C){return Et(D,Y,H,C)}_setWindowSize(H){I.setWindowSize(this,H)}assertValidity(){P(this)}hasEvenY(){let{y:H}=this.toAffine();if(X.isOdd)return!X.isOdd(H);throw new Error("Field doesn't support isOdd")}equals(H){M(H);let{px:C,py:B,pz:S}=this,{px:_,py:k,pz:f}=H,g=X.eql(X.mul(C,f),X.mul(_,S)),b=X.eql(X.mul(B,f),X.mul(k,S));return g&&b}negate(){return new D(this.px,X.neg(this.py),this.pz)}double(){let{a:H,b:C}=Q,B=X.mul(C,xt),{px:S,py:_,pz:k}=this,f=X.ZERO,g=X.ZERO,b=X.ZERO,m=X.mul(S,S),l=X.mul(_,_),h=X.mul(k,k),c=X.mul(S,_);return c=X.add(c,c),b=X.mul(S,k),b=X.add(b,b),f=X.mul(H,b),g=X.mul(B,h),g=X.add(f,g),f=X.sub(l,g),g=X.add(l,g),g=X.mul(f,g),f=X.mul(c,f),b=X.mul(B,b),h=X.mul(H,h),c=X.sub(m,h),c=X.mul(H,c),c=X.add(c,b),b=X.add(m,m),m=X.add(b,m),m=X.add(m,h),m=X.mul(m,c),g=X.add(g,m),h=X.mul(_,k),h=X.add(h,h),m=X.mul(h,c),f=X.sub(f,m),b=X.mul(h,l),b=X.add(b,b),b=X.add(b,b),new D(f,g,b)}add(H){M(H);let{px:C,py:B,pz:S}=this,{px:_,py:k,pz:f}=H,g=X.ZERO,b=X.ZERO,m=X.ZERO,l=Q.a,h=X.mul(Q.b,xt),c=X.mul(C,_),T=X.mul(B,k),K=X.mul(S,f),U=X.add(C,B),W=X.add(_,k);U=X.mul(U,W),W=X.add(c,T),U=X.sub(U,W),W=X.add(C,S);let V=X.add(_,f);return W=X.mul(W,V),V=X.add(c,K),W=X.sub(W,V),V=X.add(B,S),g=X.add(k,f),V=X.mul(V,g),g=X.add(T,K),V=X.sub(V,g),m=X.mul(l,W),g=X.mul(h,K),m=X.add(g,m),g=X.sub(T,m),m=X.add(T,m),b=X.mul(g,m),T=X.add(c,c),T=X.add(T,c),K=X.mul(l,K),W=X.mul(h,W),T=X.add(T,K),K=X.sub(c,K),K=X.mul(l,K),W=X.add(W,K),c=X.mul(T,W),b=X.add(b,c),c=X.mul(V,W),g=X.mul(U,g),g=X.sub(g,c),c=X.mul(U,T),m=X.mul(V,m),m=X.add(m,c),new D(g,b,m)}subtract(H){return this.add(H.negate())}is0(){return this.equals(D.ZERO)}wNAF(H){return I.wNAFCached(this,H,D.normalizeZ)}multiplyUnsafe(H){let{endo:C,n:B}=Q;h4("scalar",H,pq,B);let S=D.ZERO;if(H===pq)return S;if(this.is0()||H===cQ)return this;if(!C||I.hasPrecomputes(this))return I.wNAFCachedUnsafe(this,H,D.normalizeZ);let{k1neg:_,k1:k,k2neg:f,k2:g}=C.splitScalar(H),b=S,m=S,l=this;while(k>pq||g>pq){if(k&cQ)b=b.add(l);if(g&cQ)m=m.add(l);l=l.double(),k>>=cQ,g>>=cQ}if(_)b=b.negate();if(f)m=m.negate();return m=new D(X.mul(m.px,C.beta),m.py,m.pz),b.add(m)}multiply(H){let{endo:C,n:B}=Q;h4("scalar",H,cQ,B);let S,_;if(C){let{k1neg:k,k1:f,k2neg:g,k2:b}=C.splitScalar(H),{p:m,f:l}=this.wNAF(f),{p:h,f:c}=this.wNAF(b);m=I.constTimeNegate(k,m),h=I.constTimeNegate(g,h),h=new D(X.mul(h.px,C.beta),h.py,h.pz),S=m.add(h),_=l.add(c)}else{let{p:k,f}=this.wNAF(H);S=k,_=f}return D.normalizeZ([S,_])[0]}multiplyAndAddUnsafe(H,C,B){let S=D.BASE,_=(f,g)=>g===pq||g===cQ||!f.equals(S)?f.multiplyUnsafe(g):f.multiply(g),k=_(this,C).add(_(H,B));return k.is0()?void 0:k}toAffine(H){return j(this,H)}isTorsionFree(){let{h:H,isTorsionFree:C}=Q;if(H===cQ)return!0;if(C)return C(D,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:H,clearCofactor:C}=Q;if(H===cQ)return this;if(C)return C(D,this);return this.multiplyUnsafe(Q.h)}toRawBytes(H=!0){return d6("isCompressed",H),this.assertValidity(),Z(D,this,H)}toHex(H=!0){return d6("isCompressed",H),i6(this.toRawBytes(H))}}D.BASE=new D(Q.Gx,Q.Gy,X.ONE),D.ZERO=new D(X.ZERO,X.ONE,X.ZERO);let A=Q.nBitLength,I=St(D,Q.endo?Math.ceil(A/2):A);return{CURVE:Q,ProjectivePoint:D,normPrivateKeyToScalar:z,weierstrassEquation:q,isWithinCurveOrder:G}}function dj0($){let Q=aB($);return c4(Q,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...Q})}function vt($){let Q=dj0($),{Fp:X,n:Y}=Q,Z=X.BYTES+1,J=2*X.BYTES+1;function q(U){return yX(U,Y)}function G(U){return tN(U,Y)}let{ProjectivePoint:z,normPrivateKeyToScalar:M,weierstrassEquation:j,isWithinCurveOrder:P}=uj0({...Q,toBytes(U,W,V){let N=W.toAffine(),L=X.toBytes(N.x),F=MM;if(d6("isCompressed",V),V)return F(Uint8Array.from([W.hasEvenY()?2:3]),L);else return F(Uint8Array.from([4]),L,X.toBytes(N.y))},fromBytes(U){let W=U.length,V=U[0],N=U.subarray(1);if(W===Z&&(V===2||V===3)){let L=mq(N);if(!sN(L,cQ,X.ORDER))throw new Error("Point is not on curve");let F=j(L),R;try{R=X.sqrt(F)}catch(x){let E=x instanceof Error?": "+x.message:"";throw new Error("Point is not on curve"+E)}let O=(R&cQ)===cQ;if((V&1)===1!==O)R=X.neg(R);return{x:L,y:R}}else if(W===J&&V===4){let L=X.fromBytes(N.subarray(0,X.BYTES)),F=X.fromBytes(N.subarray(X.BYTES,2*X.BYTES));return{x:L,y:F}}else{let L=Z,F=J;throw new Error("invalid Point, expected length of "+L+", or uncompressed "+F+", got "+W)}}}),D=(U)=>i6(b4(U,Q.nByteLength));function A(U){let W=Y>>cQ;return U>W}function I(U){return A(U)?q(-U):U}let H=(U,W,V)=>mq(U.slice(W,V));class C{constructor(U,W,V){if(h4("r",U,cQ,Y),h4("s",W,cQ,Y),this.r=U,this.s=W,V!=null)this.recovery=V;Object.freeze(this)}static fromCompact(U){let W=Q.nByteLength;return U=MZ("compactSignature",U,W*2),new C(H(U,0,W),H(U,W,2*W))}static fromDER(U){let{r:W,s:V}=cq.toSig(MZ("DER",U));return new C(W,V)}assertValidity(){}addRecoveryBit(U){return new C(this.r,this.s,U)}recoverPublicKey(U){let{r:W,s:V,recovery:N}=this,L=g(MZ("msgHash",U));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");let F=N===2||N===3?W+Q.n:W;if(F>=X.ORDER)throw new Error("recovery id 2 or 3 invalid");let R=(N&1)===0?"02":"03",O=z.fromHex(R+D(F)),w=G(F),x=q(-L*w),E=q(V*w),v=z.BASE.multiplyAndAddUnsafe(O,x,E);if(!v)throw new Error("point at infinify");return v.assertValidity(),v}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new C(this.r,q(-this.s),this.recovery):this}toDERRawBytes(){return OM(this.toDERHex())}toDERHex(){return cq.hexFromSig(this)}toCompactRawBytes(){return OM(this.toCompactHex())}toCompactHex(){return D(this.r)+D(this.s)}}let B={isValidPrivateKey(U){try{return M(U),!0}catch(W){return!1}},normPrivateKeyToScalar:M,randomPrivateKey:()=>{let U=dB(Q.n);return wt(Q.randomBytes(U),Q.n)},precompute(U=8,W=z.BASE){return W._setWindowSize(U),W.multiply(BigInt(3)),W}};function S(U,W=!0){return z.fromPrivateKey(U).toRawBytes(W)}function _(U){let W=y4(U),V=typeof U==="string",N=(W||V)&&U.length;if(W)return N===Z||N===J;if(V)return N===2*Z||N===2*J;if(U instanceof z)return!0;return!1}function k(U,W,V=!0){if(_(U))throw new Error("first arg must be private key");if(!_(W))throw new Error("second arg must be public key");return z.fromHex(W).multiply(M(U)).toRawBytes(V)}let f=Q.bits2int||function(U){if(U.length>8192)throw new Error("input is too large");let W=mq(U),V=U.length*8-Q.nBitLength;return V>0?W>>BigInt(V):W},g=Q.bits2int_modN||function(U){return q(f(U))},b=m4(Q.nBitLength);function m(U){return h4("num < 2^"+Q.nBitLength,U,pq,b),b4(U,Q.nByteLength)}function l(U,W,V=h){if(["recovered","canonical"].some((s)=>(s in V)))throw new Error("sign() legacy options not supported");let{hash:N,randomBytes:L}=Q,{lowS:F,prehash:R,extraEntropy:O}=V;if(F==null)F=!0;if(U=MZ("msgHash",U),kt(V),R)U=MZ("prehashed msgHash",N(U));let w=g(U),x=M(W),E=[m(x),m(w)];if(O!=null&&O!==!1){let s=O===!0?L(X.BYTES):O;E.push(MZ("extraEntropy",s))}let v=MM(...E),p=w;function i(s){let X0=f(s);if(!P(X0))return;let n=G(X0),r=z.BASE.multiply(X0).toAffine(),Z0=q(r.x);if(Z0===pq)return;let e=q(n*q(p+Z0*x));if(e===pq)return;let Q0=(r.x===Z0?0:2)|Number(r.y&cQ),t=e;if(F&&A(e))t=I(e),Q0^=1;return new C(Z0,t,Q0)}return{seed:v,k2sig:i}}let h={lowS:Q.lowS,prehash:!1},c={lowS:Q.lowS,prehash:!1};function T(U,W,V=h){let{seed:N,k2sig:L}=l(U,W,V),F=Q;return Nt(F.hash.outputLen,F.nByteLength,F.hmac)(N,L)}z.BASE._setWindowSize(8);function K(U,W,V,N=c){let L=U;W=MZ("msgHash",W),V=MZ("publicKey",V);let{lowS:F,prehash:R,format:O}=N;if(kt(N),"strict"in N)throw new Error("options.strict was renamed to lowS");if(O!==void 0&&O!=="compact"&&O!=="der")throw new Error("format must be compact or der");let w=typeof L==="string"||y4(L),x=!w&&!O&&typeof L==="object"&&L!==null&&typeof L.r==="bigint"&&typeof L.s==="bigint";if(!w&&!x)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let E=void 0,v;try{if(x)E=new C(L.r,L.s);if(w){try{if(O!=="compact")E=C.fromDER(L)}catch(Q0){if(!(Q0 instanceof cq.Err))throw Q0}if(!E&&O!=="der")E=C.fromCompact(L)}v=z.fromHex(V)}catch(Q0){return!1}if(!E)return!1;if(F&&E.hasHighS())return!1;if(R)W=Q.hash(W);let{r:p,s:i}=E,s=g(W),X0=G(i),n=q(s*X0),r=q(p*X0),Z0=z.BASE.multiplyAndAddUnsafe(v,n,r)?.toAffine();if(!Z0)return!1;return q(Z0.x)===p}return{CURVE:Q,getPublicKey:S,getSharedSecret:k,sign:T,verify:K,ProjectivePoint:z,Signature:C,utils:B}}var ft,cq,pq,cQ,re0,xt,se0;var gt=y(()=>{_t();eN();aN();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */ft=class ft extends Error{constructor($=""){super($)}};cq={Err:ft,_tlv:{encode:($,Q)=>{let{Err:X}=cq;if($<0||$>256)throw new X("tlv.encode: wrong tag");if(Q.length&1)throw new X("tlv.encode: unpadded data");let Y=Q.length/2,Z=VM(Y);if(Z.length/2&128)throw new X("tlv.encode: long form length too big");let J=Y>127?VM(Z.length/2|128):"";return VM($)+J+Z+Q},decode($,Q){let{Err:X}=cq,Y=0;if($<0||$>256)throw new X("tlv.encode: wrong tag");if(Q.length<2||Q[Y++]!==$)throw new X("tlv.decode: wrong tlv");let Z=Q[Y++],J=!!(Z&128),q=0;if(!J)q=Z;else{let z=Z&127;if(!z)throw new X("tlv.decode(long): indefinite length not supported");if(z>4)throw new X("tlv.decode(long): byte length is too big");let M=Q.subarray(Y,Y+z);if(M.length!==z)throw new X("tlv.decode: length bytes not complete");if(M[0]===0)throw new X("tlv.decode(long): zero leftmost byte");for(let j of M)q=q<<8|j;if(Y+=z,q<128)throw new X("tlv.decode(long): not minimal encoding")}let G=Q.subarray(Y,Y+q);if(G.length!==q)throw new X("tlv.decode: wrong value length");return{v:G,l:Q.subarray(Y+q)}}},_int:{encode($){let{Err:Q}=cq;if($<pq)throw new Q("integer: negative integers are not allowed");let X=VM($);if(Number.parseInt(X[0],16)&8)X="00"+X;if(X.length&1)throw new Q("unexpected DER parsing assertion: unpadded hex");return X},decode($){let{Err:Q}=cq;if($[0]&128)throw new Q("invalid signature integer: negative");if($[0]===0&&!($[1]&128))throw new Q("invalid signature integer: unnecessary leading zero");return mq($)}},toSig($){let{Err:Q,_int:X,_tlv:Y}=cq,Z=MZ("signature",$),{v:J,l:q}=Y.decode(48,Z);if(q.length)throw new Q("invalid signature: left bytes after parsing");let{v:G,l:z}=Y.decode(2,J),{v:M,l:j}=Y.decode(2,z);if(j.length)throw new Q("invalid signature: left bytes after parsing");return{r:X.decode(G),s:X.decode(M)}},hexFromSig($){let{_tlv:Q,_int:X}=cq,Y=Q.encode(2,X.encode($.r)),Z=Q.encode(2,X.encode($.s)),J=Y+Z;return Q.encode(48,J)}},pq=BigInt(0),cQ=BigInt(1),re0=BigInt(2),xt=BigInt(3),se0=BigInt(4)});function ij0($){return{hash:$,hmac:(Q,...X)=>kB($,Q,IB(...X)),randomBytes:Zt}}function yt($,Q){let X=(Y)=>vt({...$,...ij0(Y)});return{...X(Q),create:X}}var bt=y(()=>{Ot();m9();gt();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */});function oj0($){let Q=ct,X=BigInt(3),Y=BigInt(6),Z=BigInt(11),J=BigInt(22),q=BigInt(23),G=BigInt(44),z=BigInt(88),M=$*$*$%Q,j=M*M*$%Q,P=DZ(j,X,Q)*j%Q,D=DZ(P,X,Q)*j%Q,A=DZ(D,tB,Q)*M%Q,I=DZ(A,Z,Q)*A%Q,H=DZ(I,J,Q)*I%Q,C=DZ(H,G,Q)*H%Q,B=DZ(C,z,Q)*C%Q,S=DZ(B,G,Q)*H%Q,_=DZ(S,X,Q)*j%Q,k=DZ(_,q,Q)*I%Q,f=DZ(k,Y,Q)*M%Q,g=DZ(f,tB,Q);if(!eB.eql(eB.sqr(g),$))throw new Error("Cannot find square root");return g}var ct,ht,nj0,tB,mt=($,Q)=>($+Q/tB)/Q,eB,lq,J0$,q0$;var pt=y(()=>{EB();bt();eN();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */ct=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ht=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),nj0=BigInt(1),tB=BigInt(2);eB=DM(ct,void 0,void 0,{sqrt:oj0}),lq=yt({a:BigInt(0),b:BigInt(7),Fp:eB,n:ht,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:($)=>{let Q=ht,X=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),Y=-nj0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),Z=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),J=X,q=BigInt("0x100000000000000000000000000000000"),G=mt(J*$,Q),z=mt(-Y*$,Q),M=yX($-G*X-z*Z,Q),j=yX(-G*Y-z*J,Q),P=M>q,D=j>q;if(P)M=Q-M;if(D)j=Q-j;if(M>q||j>q)throw new Error("splitScalar: Endomorphism failed, k="+$);return{k1neg:P,k1:M,k2neg:D,k2:j}}}},rN),J0$=BigInt(0),q0$=lq.ProjectivePoint});var $2=y(()=>{pt()});var lt;var ut=y(()=>{m9();lt=VZ});function $S($){let Q=$.startsWith("0x")?$.substring(2):$;return Yt(Q)}function g$($,Q){if($.length!==Q.length)return!1;for(let X=0;X<$.length;X++)if($[X]!==Q[X])return!1;return!0}function uq($){return(Q)=>{return lt(Q),$(Q)}}var n6=y(()=>{ut();m9();m9()});var o6;var Q2=y(()=>{EB();n6();o6=uq(rN)});function h0($,Q){return new QS({code:"ETHEREUMJS_DEFAULT_ERROR_CODE"},$,Q)}var QS;var XS=y(()=>{QS=class QS extends Error{constructor($,Q,X){super(Q??$.code);if(this.type=$,X!==void 0)this.stack=X}getMetadata(){return this.type}toObject(){return{type:this.getMetadata(),message:this.message??"",stack:this.stack??"",className:this.constructor.name}}}});function dt($){if($[0]===0)throw h0("invalid RLP: extra zeros");return aj0(sj0($))}function it($,Q){if($<56)return Uint8Array.from([$+Q]);let X=JS($),Y=X.length/2,Z=JS(Q+55+Y);return Uint8Array.from(ZS(Z+X))}function r6($,Q,X){if(X>$.length)throw h0("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return $.slice(Q,X)}function YS($){let Q,X,Y,Z,J,q=[],G=$[0];if(G<=127)return{data:$.slice(0,1),remainder:$.subarray(1)};else if(G<=183){if(Q=G-127,G===128)Y=Uint8Array.from([]);else Y=r6($,1,Q);if(Q===2&&Y[0]<128)throw h0("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:Y,remainder:$.subarray(Q)}}else if(G<=191){if(X=G-182,$.length-1<X)throw h0("invalid RLP: not enough bytes for string length");if(Q=dt(r6($,1,X)),Q<=55)throw h0("invalid RLP: expected string length to be greater than 55");return Y=r6($,X,Q+X),{data:Y,remainder:$.subarray(Q+X)}}else if(G<=247){Q=G-191,Z=r6($,1,Q);while(Z.length)J=YS(Z),q.push(J.data),Z=J.remainder;return{data:q,remainder:$.subarray(Q)}}else{if(X=G-246,Q=dt(r6($,1,X)),Q<56)throw h0("invalid RLP: encoded list too short");let z=X+Q;if(z>$.length)throw h0("invalid RLP: total length is larger than the data");Z=r6($,X,z);while(Z.length)J=YS(Z),q.push(J.data),Z=J.remainder;return{data:q,remainder:$.subarray(z)}}}function sj0($){let Q="";for(let X=0;X<$.length;X++)Q+=rj0[$[X]];return Q}function aj0($){let Q=Number.parseInt($,16);if(Number.isNaN(Q))throw h0("Invalid byte sequence");return Q}function nt($){if($>=dq._0&&$<=dq._9)return $-dq._0;if($>=dq._A&&$<=dq._F)return $-(dq._A-10);if($>=dq._a&&$<=dq._f)return $-(dq._a-10);return}function ZS($){if($.slice(0,2)==="0x")$=$.slice(0,2);if(typeof $!=="string")throw h0("hex string expected, got "+typeof $);let Q=$.length,X=Q/2;if(Q%2)throw h0("padded hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=nt($.charCodeAt(J)),G=nt($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw h0('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function ot(...$){if($.length===1)return $[0];let Q=$.reduce((Y,Z)=>Y+Z.length,0),X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}function tj0($){return new TextEncoder().encode($)}function JS($){if($<0)throw h0("Invalid integer as argument, must be unsigned!");let Q=$.toString(16);return Q.length%2?`0${Q}`:Q}function ej0($){return $.length%2?`0${$}`:$}function rt($){return $.length>=2&&$[0]==="0"&&$[1]==="x"}function $P0($){if(typeof $!=="string")return $;return rt($)?$.slice(2):$}function st($){if($ instanceof Uint8Array)return $;if(typeof $==="string"){if(rt($))return ZS(ej0($P0($)));return tj0($)}if(typeof $==="number"||typeof $==="bigint"){if(!$)return Uint8Array.from([]);return ZS(JS($))}if($===null||$===void 0)return Uint8Array.from([]);throw h0("toBytes: received unsupported type "+typeof $)}function at($){if(Array.isArray($)){let X=[],Y=0;for(let Z=0;Z<$.length;Z++){let J=at($[Z]);X.push(J),Y+=J.length}return ot(it(Y,192),...X)}let Q=st($);if(Q.length===1&&Q[0]<128)return Q;return ot(it(Q.length,128),Q)}function QP0($,Q=!1){if(typeof $==="undefined"||$===null||$.length===0)return Uint8Array.from([]);let X=st($),Y=YS(X);if(Q)return{data:Y.data,remainder:Y.remainder.slice()};if(Y.remainder.length!==0)throw h0("invalid RLP: remainder must be zero");return Y.data}var rj0,dq,jM;var qS=y(()=>{XS();XS();rj0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));dq={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};jM={encode:at,decode:QP0}});var v7=y(()=>{qS()});function GS($,Q){if(typeof $!=="string"||!$.match(/^0x[0-9A-Fa-f]*$/))return!1;if(typeof Q!=="undefined"&&Q>0&&$.length!==2+2*Q)return!1;return!0}function PM($){let Q=$;if(typeof Q!=="string")throw h0(`[padToEven] value must be type 'string', received ${typeof Q}`);if(Q.length%2)Q=`0${Q}`;return Q}var l4=($)=>{if(typeof $!=="string")throw h0(`[stripHexPrefix] input must be type 'string', received ${typeof $}`);return GS($)?$.slice(2):$};var zS=y(()=>{v7()});var c9=function($){if(!($ instanceof Uint8Array)){let Q=`This method only supports Uint8Array but input was: ${$}`;throw h0(Q)}};var KS=y(()=>{v7()});function Y2($,Q=!1){let X=new ArrayBuffer(4);return new DataView(X).setUint32(0,$,Q),new Uint8Array(X)}var YP0,WY,d8=($)=>{if(!$.startsWith("0x"))throw h0("input string must be 0x prefixed");return $S(PM(l4($)))},tt=($)=>{if($.startsWith("0x"))throw h0("input string cannot be 0x prefixed");return $S(PM($))},e0=($)=>{return`0x${WY($)}`},US,z$=($,Q=!1)=>{if(Q)$.reverse();let X=e0($);if(X==="0x")return YP0;if(X.length===4)return US[$[0]];if(X.length===6)return US[$[0]*256+$[1]];return BigInt(X)},HM=($)=>{let Q=Number(z$($));if(!Number.isSafeInteger(Q))throw h0("Number exceeds 53 bits");return Q},ZP0=($)=>{if(!Number.isSafeInteger($)||$<0)throw h0(`Received an invalid integer type: ${$}`);return`0x${$.toString(16)}`},p9=($)=>{let Q=ZP0($);return d8(Q)},N$=($,Q=!1)=>{let X=d8(`0x${PM($.toString(16))}`);return Q?X.reverse():X},et=($,Q,X)=>{if(X){if($.length<Q)return new Uint8Array([...$,...new Uint8Array(Q-$.length)]);return $.subarray(0,Q)}else{if($.length<Q)return new Uint8Array([...new Uint8Array(Q-$.length),...$]);return $.subarray(-Q)}},M$=($,Q)=>{return c9($),et($,Q,!1)},S8=($,Q)=>{return c9($),et($,Q,!0)},JP0=($)=>{let Q=$[0];while($.length>0&&Q.toString()==="0")$=$.slice(1),Q=$[0];return $},WS=($)=>{return c9($),JP0($)},s6=($,Q=50)=>{let X=$ instanceof Uint8Array?e0($):$,Y=X.slice(0,2)==="0x"?Q+2:Q;if(X.length<=Y)return X;return X.slice(0,Y)+""},X2=($)=>{return`0x${$.toString(16)}`},a6=($)=>{return WS(N$($))},$e=($,Q=!0)=>{let X=N$($);if(Q&&X.length>20)throw Error(`Invalid address bytes length=${X.length} strict=${Q}`);return M$(X,20)},NM=($)=>{return WS(p9($))},J8=(...$)=>{if($.length===1)return $[0];let Q=$.reduce((Y,Z)=>Y+Z.length,0),X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X};var mJ=y(()=>{n6();v7();KS();zS();n6();YP0=BigInt(0),WY=nN,US=[];for(let $=0;$<=65535;$++)US[$]=BigInt($)});var Qe,Xe,Z2,qP0,GP0,AM,zP0="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",u4,KP0="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",c0$,UP0="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",J2,p0$,l0$,Ye="0000000000000000000000000000000000000003",WP0,q0,D$,xY,Ze,q2,cJ,G2,Je,d4,i8,g7,u0$,z2,RM,CM,d0$,K2,qe,Ge,ze,Ke,i0$;var LM=y(()=>{$2();Q2();mJ();Qe=BigInt("0xffffffffffffffff"),Xe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Z2=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),qP0=lq.CURVE.n,GP0=lq.CURVE.n/BigInt(2),AM=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),u4=d8(zP0),c0$=d8(KP0),J2=d8(UP0),p0$=o6(new Uint8Array),l0$=Uint8Array.from([128]),WP0=BigInt(-1),q0=BigInt(0),D$=BigInt(1),xY=BigInt(2),Ze=BigInt(3),q2=BigInt(7),cJ=BigInt(8),G2=BigInt(27),Je=BigInt(28),d4=BigInt(31),i8=BigInt(32),g7=BigInt(64),u0$=BigInt(128),z2=BigInt(255),RM=BigInt(256),CM=BigInt(96),d0$=BigInt(100),K2=BigInt(160),qe=BigInt(224),Ge=BigInt(79228162514264340000000000000),ze=BigInt(1461501637330903000000000000000000000000000000000),Ke=BigInt(26959946667150640000000000000000000000000000000000000000000000000000),i0$=xY**RM});var o0$,r0$;var Ue=y(()=>{o0$=BigInt(1e9),r0$=BigInt(1000000000000000000)});function NP0($,Q=24){let X=new Uint32Array(10);for(let Y=24-Q;Y<24;Y++){for(let q=0;q<10;q++)X[q]=$[q]^$[q+10]^$[q+20]^$[q+30]^$[q+40];for(let q=0;q<10;q+=2){let G=(q+8)%10,z=(q+2)%10,M=X[z],j=X[z+1],P=We(M,j,1)^X[G],D=Ve(M,j,1)^X[G+1];for(let A=0;A<50;A+=10)$[q+A]^=P,$[q+A+1]^=D}let Z=$[2],J=$[3];for(let q=0;q<24;q++){let G=Me[q],z=We(Z,J,G),M=Ve(Z,J,G),j=Oe[q];Z=$[j],J=$[j+1],$[j]=z,$[j+1]=M}for(let q=0;q<50;q+=10){for(let G=0;G<10;G++)X[G]=$[q+G];for(let G=0;G<10;G++)$[q+G]^=~X[(G+2)%10]&X[(G+4)%10]}$[0]^=PP0[Y],$[1]^=HP0[Y]}OZ(X)}var VP0,wM,OP0,MP0,DP0,jP0,Oe,Me,De,je,PP0,HP0,We=($,Q,X)=>X>32?Kt($,Q,X):Gt($,Q,X),Ve=($,Q,X)=>X>32?Ut($,Q,X):zt($,Q,X),VS,U2=($,Q,X)=>u6(()=>new VS(Q,$,X)),Pe,OS,He,Ne;var Ae=y(()=>{Wt();m9();VP0=BigInt(0),wM=BigInt(1),OP0=BigInt(2),MP0=BigInt(7),DP0=BigInt(256),jP0=BigInt(113),Oe=[],Me=[],De=[];for(let $=0,Q=wM,X=1,Y=0;$<24;$++){[X,Y]=[Y,(2*X+3*Y)%5],Oe.push(2*(5*Y+X)),Me.push(($+1)*($+2)/2%64);let Z=VP0;for(let J=0;J<7;J++)if(Q=(Q<<wM^(Q>>MP0)*jP0)%DP0,Q&OP0)Z^=wM<<(wM<<BigInt(J))-wM;De.push(Z)}je=qt(De,!0),PP0=je[0],HP0=je[1];VS=class VS extends g4{constructor($,Q,X,Y=!1,Z=24){super();if(this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=$,this.suffix=Q,this.outputLen=X,this.enableXOF=Y,this.rounds=Z,x7(X),!(0<$&&$<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Qt(this.state)}clone(){return this._cloneInto()}keccak(){TB(this.state32),NP0(this.state32,this.rounds),TB(this.state32),this.posOut=0,this.pos=0}update($){hJ(this),$=v4($),VZ($);let{blockLen:Q,state:X}=this,Y=$.length;for(let Z=0;Z<Y;){let J=Math.min(Q-this.pos,Y-Z);for(let q=0;q<J;q++)X[this.pos++]^=$[Z++];if(this.pos===Q)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:$,suffix:Q,pos:X,blockLen:Y}=this;if($[X]^=Q,(Q&128)!==0&&X===Y-1)this.keccak();$[Y-1]^=128,this.keccak()}writeInto($){hJ(this,!1),VZ($),this.finish();let Q=this.state,{blockLen:X}=this;for(let Y=0,Z=$.length;Y<Z;){if(this.posOut>=X)this.keccak();let J=Math.min(X-this.posOut,Z-Y);$.set(Q.subarray(this.posOut,this.posOut+J),Y),this.posOut+=J,Y+=J}return $}xofInto($){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto($)}xof($){return x7($),this.xofInto(new Uint8Array($))}digestInto($){if(zM($,this),this.finished)throw new Error("digest() was already called");return this.writeInto($),this.destroy(),$}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,OZ(this.state)}_cloneInto($){let{blockLen:Q,suffix:X,outputLen:Y,rounds:Z,enableXOF:J}=this;return $||($=new VS(Q,X,Y,J,Z)),$.state32.set(this.state32),$.pos=this.pos,$.posOut=this.posOut,$.finished=this.finished,$.rounds=Z,$.suffix=X,$.outputLen=Y,$.enableXOF=J,$.destroyed=this.destroyed,$}};Pe=(()=>U2(1,144,28))(),OS=(()=>U2(1,136,32))(),He=(()=>U2(1,104,48))(),Ne=(()=>U2(1,72,64))()});var Y$$,J9,Z$$,J$$;var TM=y(()=>{Ae();n6();Y$$=uq(Pe),J9=(()=>{let $=uq(OS);return $.create=OS.create,$})(),Z$$=uq(He),J$$=uq(Ne)});class VY{get version(){if(this._version!==null)return this._version;else throw Error(`version=${this._version} not loaded`)}set version($){this._version=$}get nonce(){if(this._nonce!==null)return this._nonce;else throw Error(`nonce=${this._nonce} not loaded`)}set nonce($){this._nonce=$}get balance(){if(this._balance!==null)return this._balance;else throw Error(`balance=${this._balance} not loaded`)}set balance($){this._balance=$}get storageRoot(){if(this._storageRoot!==null)return this._storageRoot;else throw Error(`storageRoot=${this._storageRoot} not loaded`)}set storageRoot($){this._storageRoot=$}get codeHash(){if(this._codeHash!==null)return this._codeHash;else throw Error(`codeHash=${this._codeHash} not loaded`)}set codeHash($){this._codeHash=$}get codeSize(){if(this._codeSize!==null)return this._codeSize;else throw Error(`codeSize=${this._codeSize} not loaded`)}set codeSize($){this._codeSize=$}constructor($=q0,Q=q0,X=J2,Y=u4,Z=0,J=0){if(this._nonce=null,this._balance=null,this._storageRoot=null,this._codeHash=null,this._codeSize=null,this._version=null,this._nonce=$,this._balance=Q,this._storageRoot=X,this._codeHash=Y,Z===null&&Y!==null&&!this.isContract())Z=0;this._codeSize=Z,this._version=J,this._validate()}_validate(){if(this._nonce!==null&&this._nonce<q0)throw h0("nonce must be greater than zero");if(this._balance!==null&&this._balance<q0)throw h0("balance must be greater than zero");if(this._storageRoot!==null&&this._storageRoot.length!==32)throw h0("storageRoot must have a length of 32");if(this._codeHash!==null&&this._codeHash.length!==32)throw h0("codeHash must have a length of 32");if(this._codeSize!==null&&this._codeSize<q0)throw h0("codeSize must be greater than zero")}raw(){return[a6(this.nonce),a6(this.balance),this.storageRoot,this.codeHash]}serialize(){return jM.encode(this.raw())}serializeWithPartialInfo(){let $=[],Q=NM(0),X=NM(1);if(this._nonce!==null)$.push([X,a6(this._nonce)]);else $.push([Q]);if(this._balance!==null)$.push([X,a6(this._balance)]);else $.push([Q]);if(this._storageRoot!==null)$.push([X,this._storageRoot]);else $.push([Q]);if(this._codeHash!==null)$.push([X,this._codeHash]);else $.push([Q]);if(this._codeSize!==null)$.push([X,NM(this._codeSize)]);else $.push([Q]);if(this._version!==null)$.push([X,NM(this._version)]);else $.push([Q]);return jM.encode($)}isContract(){if(this._codeHash===null&&this._codeSize===null)throw Error("Insufficient data as codeHash=null and codeSize=null");return this._codeHash!==null&&!g$(this._codeHash,u4)||this._codeSize!==null&&this._codeSize!==0}isEmpty(){if(this._balance!==null&&this.balance!==q0||this._nonce===null&&this.nonce!==q0||this._codeHash!==null&&!g$(this.codeHash,u4))return!1;return this.balance===q0&&this.nonce===q0&&g$(this.codeHash,u4)}}var Re=function($,Q){if(c9($),c9(Q),z$(Q)===q0)return J9(jM.encode([$,Uint8Array.from([])])).subarray(-20);return J9(jM.encode([$,Q])).subarray(-20)},Ce=function($,Q,X){if(c9($),c9(Q),c9(X),$.length!==20)throw h0("Expected from to be of length 20");if(Q.length!==32)throw h0("Expected salt to be of length 32");return J9(J8(d8("0xff"),$,Q,J9(X))).subarray(-20)},AP0=function($,Q=!1){if(c9($),Q&&$.length!==64)$=lq.ProjectivePoint.fromHex($).toRawBytes(!1).slice(1);if($.length!==64)throw h0("Expected pubKey to be of length 64");return J9($).subarray(-20)},Le,j$$;var we=y(()=>{qS();TM();$2();mJ();LM();v7();KS();Le=AP0,j$$=new Uint8Array(0)});class l9{constructor($){if($.length!==20)throw h0("Invalid address length");this.bytes=$}equals($){return g$(this.bytes,$.bytes)}isZero(){return this.equals(new l9(new Uint8Array(20)))}isPrecompileOrSystemAddress(){let $=z$(this.bytes),Q=q0,X=BigInt("0xffff");return $>=Q&&$<=X}toString(){return e0(this.bytes)}toBytes(){return new Uint8Array(this.bytes)}}function u9(){return new l9(new Uint8Array(20))}function Te($){let Q=N$($);if(Q.length>20)throw h0(`Invalid address, too long: ${Q.length}`);return new l9(M$(Q,20))}var Ie=y(()=>{mJ();LM();v7()});var Fe=()=>{};var Be=()=>{};var Se=()=>{};function RP0($,Q){if($===q0||$===D$)return $;if(Q===void 0)return $-G2;return $-(Q*xY+BigInt(35))}function CP0($){return $===q0||$===D$}var Ee=function($,Q,X,Y,Z){let J=J8(M$(X,32),M$(Y,32)),q=RP0(Q,Z);if(!CP0(q))throw h0("Invalid signature v value");return lq.Signature.fromCompact(J).addRecoveryBit(Number(q)).recoverPublicKey($).toRawBytes(!1).slice(1)};var _e=y(()=>{$2();mJ();LM();v7()});var _$$;var ke=y(()=>{mJ();_$$=d8("0x05")});function xe($,Q,X=0){let Y=M$(Q.toBytes(),32),Z;if(typeof X==="number")Z=S8(Y2(Number(X),!0),32);else Z=S8(N$(BigInt(X),!0).slice(0,32),32);return $(J8(Y,Z)).slice(0,31)}function MS($){let Q;if($<n4-i4)Q=BigInt(i4)+$;else Q=IM+$;let X=Q/BigInt(t6),Y=Number(Q%BigInt(t6));return{treeIndex:X,subIndex:Y}}function DS($){let Q=Math.floor((n4+$)/t6),X=(n4+$)%t6;return{treeIndex:Q,subIndex:X}}var W2,V2,O2,wP0=31,i4=64,n4=128,t6=256,IM,fe=($,Q)=>{switch(Q){case W2.BasicData:return J8($,V2);case W2.CodeHash:return J8($,O2);default:return J8($,Q)}};var ve=y(()=>{mJ();W2={BasicData:0,CodeHash:1},V2=p9(W2.BasicData),O2=p9(W2.CodeHash),IM=BigInt(256)**BigInt(wP0)});var TP0=32,ge=4096,IP0,FP0=2,y$$,b$$,ye=($,Q)=>{let X=new Uint8Array(32);return X.set([Q],0),X.set(o6(d8($)).subarray(1),1),e0(X)};var be=y(()=>{Q2();mJ();IP0=32*ge,y$$=IP0*FP0-1,b$$=TP0*ge});var he=()=>{};var me=()=>{};var ce=()=>{};var pe=()=>{};function le($,Q,X=0){let Y=M$(Q.toBytes(),32),Z;if(typeof X==="number")Z=S8(Y2(Number(X),!0),32);else Z=S8(N$(BigInt(X),!0).slice(0,32),32);return $.getTreeKey(Y,Z,0).slice(0,31)}function jS($){let Q;if($<r4-o4)Q=BigInt(o4)+$;else Q=FM+$;let X=Q/BigInt(e6),Y=Number(Q%BigInt(e6));return{treeIndex:X,subIndex:Y}}function PS($){let Q=Math.floor((r4+$)/e6),X=(r4+$)%e6;return{treeIndex:Q,subIndex:X}}var M2,D2,j2,BP0=31,o4=64,r4=128,e6=256,FM,ue=($,Q)=>{switch(Q){case M2.BasicData:return J8($,D2);case M2.CodeHash:return J8($,j2);default:return J8($,Q)}};var de=y(()=>{mJ();M2={BasicData:0,CodeHash:1},D2=p9(M2.BasicData),j2=p9(M2.CodeHash),FM=BigInt(256)**BigInt(BP0)});var R$=y(()=>{LM();v7();Ue();we();Ie();Fe();Se();_e();mJ();Be();ke();ve();be();zS();he();me();ce();pe();de()});var y7=239,$W=0,P2=1,ie=49152,ne=1,oe=2,re=3,se=4,ae=0,te=4,ee=4096,H2=4,$00=1,Q00=1,X00=1,Y00=256,Z00=1,J00=127,q00=128,G00=1023;function X$($,...Q){switch($){case N0.OUT_OF_BOUNDS:{let X=Q[0];if(X===0||X===2||X===3||X===6)throw h0(Q[1]);throw h0(N0.OUT_OF_BOUNDS+" ")}case N0.VERIFY_BYTES:{let X=Q[0];if(X===0||X===2||X===3||X===6)throw h0(Q[1]);throw h0(N0.VERIFY_BYTES+` at pos: ${Q[0]}: ${Q[1]}`)}case N0.VERIFY_UINT:{let X=Q[0];if(X===0||X===2||X===3||X===6||X===18)throw h0(Q[1]);throw h0(N0.VERIFY_UINT+`at pos: ${Q[0]}: ${Q[1]}`)}case N0.TYPE_SIZE:throw h0(N0.TYPE_SIZE+Q[0]);case N0.TYPE_SECTIONS:throw h0(`${N0.TYPE_SECTIONS} (types ${Q[0]} code ${Q[1]})`);case N0.INVALID_TYPE_SIZE:throw h0(N0.INVALID_TYPE_SIZE);case N0.INVALID_CODE_SIZE:throw h0(N0.INVALID_CODE_SIZE+Q[0]);case N0.INPUTS:throw h0(`${N0.INPUTS} - typeSection ${Q[0]}`);case N0.OUTPUTS:throw h0(`${N0.OUTPUTS} - typeSection ${Q[0]}`);case N0.CODE0_INPUTS:throw h0("first code section should have 0 inputs");case N0.CODE0_OUTPUTS:throw h0("first code section should have 0 outputs");case N0.MAX_INPUTS:throw h0(N0.MAX_INPUTS+`${Q[1]} - code section ${Q[0]}`);case N0.MAX_OUTPUTS:throw h0(N0.MAX_OUTPUTS+`${Q[1]} - code section ${Q[0]}`);case N0.CODE_SECTION:throw h0(`expected code: codeSection ${Q[0]}: `);case N0.DATA_SECTION:throw h0(N0.DATA_SECTION);case N0.MAX_STACK_HEIGHT:throw h0(`${N0.MAX_STACK_HEIGHT} - typeSection ${Q[0]}: `);case N0.MAX_STACK_HEIGHT_LIMIT:throw h0(`${N0.MAX_STACK_HEIGHT_LIMIT}, got: ${Q[1]} - typeSection ${Q[0]}`);case N0.DANGLING_BYTES:throw h0(N0.DANGLING_BYTES);default:throw h0($)}}var N0;var BM=y(()=>{R$();N0={OUT_OF_BOUNDS:"Trying to read out of bounds",VERIFY_UINT:"Uint does not match expected value ",VERIFY_BYTES:"Bytes do not match expected value",FORMAT:"err: invalid format",MAGIC:"err: invalid magic",VERSION:"err: invalid eof version",KIND_TYPE:"err: expected kind types",KIND_CODE:"err: expected kind code",KIND_DATA:"err: expected kind data",TERMINATOR:"err: expected terminator",TYPE_SIZE:"missing type size",INVALID_TYPE_SIZE:"err: type section size invalid",CODE_SIZE:"missing code size",CODE_SECTION_SIZE:"code section should be at least one byte",INVALID_CODE_SIZE:"code size does not match type size",DATA_SIZE:"missing data size",CONTAINER_SIZE:"missing container size",CONTAINER_SECTION_SIZE:"container section should at least contain one section and at most 255 sections",TYPE_SECTIONS:"err: mismatch of code sections count and type signatures",INPUTS:"expected inputs",OUTPUTS:"expected outputs",MAX_INPUTS:"inputs exceeds 127, the maximum, got: ",MAX_OUTPUTS:"outputs exceeds 127, the maximum, got: ",CODE0_INPUTS:"first code section should have 0 inputs",CODE0_OUTPUTS:"first code section should have 0x80 (terminating section) outputs",MAX_STACK_HEIGHT:"expected maxStackHeight",MAX_STACK_HEIGHT_LIMIT:"stack height limit of 1024 exceeded: ",MIN_CODE_SECTIONS:"should have at least 1 code section",CODE_SECTION:"expected a code section",DATA_SECTION:"Expected data section",CONTAINER_SECTION:"expected a container section",CONTAINER_SECTION_MIN:"container section should be at least 1 byte",INVALID_EOF_CREATE_TARGET:"EOFCREATE targets an undefined container",INVALID_RETURN_CONTRACT_TARGET:"RETURNCONTRACT targets an undefined container",CONTAINER_DOUBLE_TYPE:"Container is targeted by both EOFCREATE and RETURNCONTRACT",UNREACHABLE_CONTAINER_SECTIONS:"Unreachable containers (by both EOFCREATE and RETURNCONTRACT)",CONTAINER_TYPE_ERROR:"Container contains opcodes which this mode (deployment mode / init code / runtime mode) cannot have",DANGLING_BYTES:"got dangling bytes in body",INVALID_OPCODE:"invalid opcode",INVALID_TERMINATOR:"invalid terminating opcode",OPCODE_INTERMEDIATES_OOB:"invalid opcode: intermediates out-of-bounds",INVALID_RJUMP:"invalid rjump* target",INVALID_CALL_TARGET:"invalid callf/jumpf target",INVALID_CALLF_RETURNING:"invalid callf: calls to non-returning function",INVALID_STACK_HEIGHT:"invalid stack height",INVALID_JUMPF:"invalid jumpf target (output count)",INVALID_RETURNING_SECTION:"invalid returning code section: section is not returning",RETURNING_NO_RETURN:"invalid section: section should return but has no RETF/JUMP to return",RJUMPV_TABLE_SIZE0:"invalid RJUMPV: table size 0",UNREACHABLE_CODE_SECTIONS:"unreachable code sections",UNREACHABLE_CODE:"unreachable code (by forward jumps)",DATALOADN_OOB:"DATALOADN reading out of bounds",MAX_STACK_HEIGHT_VIOLATION:"Max stack height does not match the reported max stack height",STACK_UNDERFLOW:"Stack underflow",STACK_OVERFLOW:"Stack overflow",UNSTABLE_STACK:"Unstable stack (can reach stack under/overflow by jumps)",RETF_NO_RETURN:"Trying to return to undefined function",RETURN_STACK_OVERFLOW:"Return stack overflow",INVALID_EXTCALL_TARGET:"invalid extcall target: address > 20 bytes",INVALID_RETURN_CONTRACT_DATA_SIZE:"invalid RETURNCONTRACT: data size lower than expected"}});var iq;var HS=y(()=>{iq={0:{inputs:0,outputs:0,name:"STOP",intermediates:0,terminating:!0},1:{inputs:2,outputs:1,name:"ADD",intermediates:0},2:{inputs:2,outputs:1,name:"MUL",intermediates:0},3:{inputs:2,outputs:1,name:"SUB",intermediates:0},4:{inputs:2,outputs:1,name:"DIV",intermediates:0},5:{inputs:2,outputs:1,name:"SDIV",intermediates:0},6:{inputs:2,outputs:1,name:"MOD",intermediates:0},7:{inputs:2,outputs:1,name:"SMOD",intermediates:0},8:{inputs:3,outputs:1,name:"ADDMOD",intermediates:0},9:{inputs:3,outputs:1,name:"MULMOD",intermediates:0},10:{inputs:2,outputs:1,name:"EXP",intermediates:0},11:{inputs:2,outputs:1,name:"SIGNEXTEND",intermediates:0},16:{inputs:2,outputs:1,name:"LT",intermediates:0},17:{inputs:2,outputs:1,name:"GT",intermediates:0},18:{inputs:2,outputs:1,name:"SLT",intermediates:0},19:{inputs:2,outputs:1,name:"SGT",intermediates:0},20:{inputs:2,outputs:1,name:"EQ",intermediates:0},21:{inputs:1,outputs:1,name:"ISZERO",intermediates:0},22:{inputs:2,outputs:1,name:"AND",intermediates:0},23:{inputs:2,outputs:1,name:"OR",intermediates:0},24:{inputs:2,outputs:1,name:"XOR",intermediates:0},25:{inputs:1,outputs:1,name:"NOT",intermediates:0},26:{inputs:2,outputs:1,name:"BYTE",intermediates:0},27:{inputs:2,outputs:1,name:"SHL",intermediates:0},28:{inputs:2,outputs:1,name:"SHR",intermediates:0},29:{inputs:2,outputs:1,name:"SAR",intermediates:0},32:{inputs:2,outputs:1,name:"SHA3",intermediates:0},48:{inputs:0,outputs:1,name:"ADDRESS",intermediates:0},49:{inputs:1,outputs:1,name:"BALANCE",intermediates:0},50:{inputs:0,outputs:1,name:"ORIGIN",intermediates:0},51:{inputs:0,outputs:1,name:"CALLER",intermediates:0},52:{inputs:0,outputs:1,name:"CALLVALUE",intermediates:0},53:{inputs:1,outputs:1,name:"CALLDATALOAD",intermediates:0},54:{inputs:0,outputs:1,name:"CALLDATASIZE",intermediates:0},55:{inputs:3,outputs:0,name:"CALLDATACOPY",intermediates:0},58:{inputs:0,outputs:1,name:"GASPRICE",intermediates:0},61:{inputs:0,outputs:1,name:"RETURNDATASIZE",intermediates:0},62:{inputs:3,outputs:0,name:"RETURNDATACOPY",intermediates:0},64:{inputs:1,outputs:1,name:"BLOCKHASH",intermediates:0},65:{inputs:0,outputs:1,name:"COINBASE",intermediates:0},66:{inputs:0,outputs:1,name:"TIMESTAMP",intermediates:0},67:{inputs:0,outputs:1,name:"NUMBER",intermediates:0},68:{inputs:0,outputs:1,name:"PREVRANDAO",intermediates:0},69:{inputs:0,outputs:1,name:"GASLIMIT",intermediates:0},70:{inputs:0,outputs:1,name:"CHAINID",intermediates:0},71:{inputs:0,outputs:1,name:"SELFBALANCE",intermediates:0},72:{inputs:0,outputs:1,name:"BASEFEE",intermediates:0},73:{inputs:1,outputs:1,name:"BLOBAHASH",intermediates:0},74:{inputs:0,outputs:1,name:"BLOBBASEFEE",intermediates:0},80:{inputs:1,outputs:0,name:"POP",intermediates:0},81:{inputs:1,outputs:1,name:"MLOAD",intermediates:0},82:{inputs:2,outputs:0,name:"MSTORE",intermediates:0},83:{inputs:2,outputs:0,name:"MSTORE8",intermediates:0},84:{inputs:1,outputs:1,name:"SLOAD",intermediates:0},85:{inputs:2,outputs:0,name:"SSTORE",intermediates:0},89:{inputs:0,outputs:1,name:"MSIZE",intermediates:0},91:{inputs:0,outputs:0,name:"NOOP",intermediates:0},92:{inputs:1,outputs:1,name:"TLOAD",intermediates:0},93:{inputs:2,outputs:0,name:"TSTORE",intermediates:0},94:{inputs:3,outputs:0,name:"MCOPY",intermediates:0},95:{inputs:0,outputs:1,name:"PUSH0",intermediates:0},96:{inputs:0,outputs:1,name:"PUSH1",intermediates:1},97:{inputs:0,outputs:1,name:"PUSH2",intermediates:2},98:{inputs:0,outputs:1,name:"PUSH3",intermediates:3},99:{inputs:0,outputs:1,name:"PUSH4",intermediates:4},100:{inputs:0,outputs:1,name:"PUSH5",intermediates:5},101:{inputs:0,outputs:1,name:"PUSH6",intermediates:6},102:{inputs:0,outputs:1,name:"PUSH7",intermediates:7},103:{inputs:0,outputs:1,name:"PUSH8",intermediates:8},104:{inputs:0,outputs:1,name:"PUSH9",intermediates:9},105:{inputs:0,outputs:1,name:"PUSH10",intermediates:10},106:{inputs:0,outputs:1,name:"PUSH11",intermediates:11},107:{inputs:0,outputs:1,name:"PUSH12",intermediates:12},108:{inputs:0,outputs:1,name:"PUSH13",intermediates:13},109:{inputs:0,outputs:1,name:"PUSH14",intermediates:14},110:{inputs:0,outputs:1,name:"PUSH15",intermediates:15},111:{inputs:0,outputs:1,name:"PUSH16",intermediates:16},112:{inputs:0,outputs:1,name:"PUSH17",intermediates:17},113:{inputs:0,outputs:1,name:"PUSH18",intermediates:18},114:{inputs:0,outputs:1,name:"PUSH19",intermediates:19},115:{inputs:0,outputs:1,name:"PUSH20",intermediates:20},116:{inputs:0,outputs:1,name:"PUSH21",intermediates:21},117:{inputs:0,outputs:1,name:"PUSH22",intermediates:22},118:{inputs:0,outputs:1,name:"PUSH23",intermediates:23},119:{inputs:0,outputs:1,name:"PUSH24",intermediates:24},120:{inputs:0,outputs:1,name:"PUSH25",intermediates:25},121:{inputs:0,outputs:1,name:"PUSH26",intermediates:26},122:{inputs:0,outputs:1,name:"PUSH27",intermediates:27},123:{inputs:0,outputs:1,name:"PUSH28",intermediates:28},124:{inputs:0,outputs:1,name:"PUSH29",intermediates:29},125:{inputs:0,outputs:1,name:"PUSH30",intermediates:30},126:{inputs:0,outputs:1,name:"PUSH31",intermediates:31},127:{inputs:0,outputs:1,name:"PUSH32",intermediates:32},128:{inputs:1,outputs:2,name:"DUP1",intermediates:0},129:{inputs:2,outputs:3,name:"DUP2",intermediates:0},130:{inputs:3,outputs:4,name:"DUP3",intermediates:0},131:{inputs:4,outputs:5,name:"DUP4",intermediates:0},132:{inputs:5,outputs:6,name:"DUP5",intermediates:0},133:{inputs:6,outputs:7,name:"DUP6",intermediates:0},134:{inputs:7,outputs:8,name:"DUP7",intermediates:0},135:{inputs:8,outputs:9,name:"DUP8",intermediates:0},136:{inputs:9,outputs:10,name:"DUP9",intermediates:0},137:{inputs:10,outputs:11,name:"DUP10",intermediates:0},138:{inputs:11,outputs:12,name:"DUP11",intermediates:0},139:{inputs:12,outputs:13,name:"DUP12",intermediates:0},140:{inputs:13,outputs:14,name:"DUP13",intermediates:0},141:{inputs:14,outputs:15,name:"DUP14",intermediates:0},142:{inputs:15,outputs:16,name:"DUP15",intermediates:0},143:{inputs:16,outputs:17,name:"DUP16",intermediates:0},144:{inputs:2,outputs:2,name:"SWAP1",intermediates:0},145:{inputs:3,outputs:3,name:"SWAP2",intermediates:0},146:{inputs:4,outputs:4,name:"SWAP3",intermediates:0},147:{inputs:5,outputs:5,name:"SWAP4",intermediates:0},148:{inputs:6,outputs:6,name:"SWAP5",intermediates:0},149:{inputs:7,outputs:7,name:"SWAP6",intermediates:0},150:{inputs:8,outputs:8,name:"SWAP7",intermediates:0},151:{inputs:9,outputs:9,name:"SWAP8",intermediates:0},152:{inputs:10,outputs:10,name:"SWAP9",intermediates:0},153:{inputs:11,outputs:11,name:"SWAP10",intermediates:0},154:{inputs:12,outputs:12,name:"SWAP11",intermediates:0},155:{inputs:13,outputs:13,name:"SWAP12",intermediates:0},156:{inputs:14,outputs:14,name:"SWAP13",intermediates:0},157:{inputs:15,outputs:15,name:"SWAP14",intermediates:0},158:{inputs:16,outputs:16,name:"SWAP15",intermediates:0},159:{inputs:17,outputs:17,name:"SWAP16",intermediates:0},160:{inputs:2,outputs:0,name:"LOG0",intermediates:0},161:{inputs:3,outputs:0,name:"LOG1",intermediates:0},162:{inputs:4,outputs:0,name:"LOG2",intermediates:0},163:{inputs:5,outputs:0,name:"LOG3",intermediates:0},164:{inputs:6,outputs:0,name:"LOG4",intermediates:0},208:{inputs:1,outputs:1,name:"DATALOAD",intermediates:0},209:{inputs:0,outputs:1,name:"DATALOADN",intermediates:2},210:{inputs:0,outputs:1,name:"DATASIZE",intermediates:0},211:{inputs:3,outputs:0,name:"DATACOPY",intermediates:0},224:{inputs:0,outputs:0,name:"RJUMP",intermediates:2},225:{inputs:1,outputs:0,name:"RJUMPI",intermediates:2},226:{inputs:1,outputs:0,name:"RJUMPV",intermediates:0},227:{inputs:0,outputs:0,name:"CALLF",intermediates:2},228:{inputs:0,outputs:0,name:"RETF",intermediates:0,terminating:!0},229:{inputs:0,outputs:0,name:"JUMPF",intermediates:2,terminating:!0},230:{inputs:0,outputs:1,name:"DUPN",intermediates:1},231:{inputs:0,outputs:0,name:"SWAPN",intermediates:1},232:{inputs:0,outputs:0,name:"EXCHANGE",intermediates:1},236:{inputs:4,outputs:1,name:"EOFCREATE",intermediates:1},238:{inputs:2,outputs:0,name:"RETURNCONTRACT",intermediates:1,terminating:!0},243:{inputs:2,outputs:0,name:"RETURN",intermediates:0,terminating:!0},247:{inputs:1,outputs:1,name:"RETURNDATALOAD",intermediates:0},248:{inputs:4,outputs:1,name:"EXTCALL",intermediates:0},249:{inputs:3,outputs:1,name:"EXTDELEGATECALL",intermediates:0},251:{inputs:3,outputs:1,name:"EXTSTATICCALL",intermediates:0},253:{inputs:2,outputs:0,name:"REVERT",intermediates:0,terminating:!0},254:{inputs:0,outputs:0,name:"INVALID",intermediates:0,terminating:!0}}});function U00($,Q,X=jZ.RuntimeCode){return SP0($,Q,X)}function z00($,Q){return new DataView($.buffer).getInt16(Q)}function K00($,Q){return new DataView($.buffer).getUint16(Q)}function SP0($,Q,X=jZ.RuntimeCode){let Y=new Map,Z=Q.getActiveOpcodes(),J=new Set;for(let[D]of Z)J.add(D);J.add(254),J.delete(56),J.delete(57),J.delete(90),J.delete(59),J.delete(60),J.delete(63),J.delete(242),J.delete(255),J.delete(86),J.delete(87),J.delete(88),J.delete(240),J.delete(245);let q=new Set;q.add(0),q.add(243),q.add(253),q.add(254),q.add(238),q.add(228),q.add(229),q.add(224);for(let D of q)if(!J.has(D))q.delete(D);let G=new Set,z={},M=-1;for(let D of $.body.codeSections){let H=function(h){if(A.has(h))X$(N0.INVALID_RJUMP);I.add(h)},C=function(h){if(I.has(h))X$(N0.INVALID_RJUMP);A.add(h)},A=new Set,I=new Set;M++,z[M]=new Set;let B=$.body.typeSections[M].outputs===128,S=!1,_=new Set;_.add(0);let k=0,f=0,g=$.body.typeSections[M].inputs,b=g,m=[g],l=[g];while(k<D.length){let h=new Set;if(!_.has(k))X$(N0.UNREACHABLE_CODE);if(m[k]===void 0||l[k]===void 0)X$(N0.UNREACHABLE_CODE);G.add(k);let c=D[k],T=m[k],K=l[k],U=iq[c].inputs,W=iq[c].outputs;if(T-U<0)X$(N0.STACK_UNDERFLOW);let V=W-U,N=T+V,L=K+V;if(L>1024)X$(N0.STACK_OVERFLOW);if(B&&c===228)X$(N0.INVALID_RETURNING_SECTION);if(f=c,!J.has(c))X$(N0.INVALID_OPCODE);if(c===224||c===225){let R=z00(D,k+1)+k+3;if(R<0||R>=D.length)X$(N0.INVALID_RJUMP);if(h.add(R),H(R),_.add(R),c===224){if(!_.has(k+3)&&k+3<D.length)X$(N0.UNREACHABLE_CODE)}}else if(c===226){let R=D[k+1]+1;if(R===void 0)X$(N0.OPCODE_INTERMEDIATES_OOB);else if(R===0)X$(N0.RJUMPV_TABLE_SIZE0);if(k+R*2+2>=D.length)X$(N0.OPCODE_INTERMEDIATES_OOB);let O=k+2+R*2;for(let w=0;w<R;w++){let x=k+2+w*2;C(x),C(x+1);let E=z00(D,x)+O;if(E<0||E>=D.length)X$(N0.OPCODE_INTERMEDIATES_OOB);h.add(E),H(E),_.add(E)}C(k+1),k+=2*R+1}else if(c===227||c===229){let R=K00(D,k+1);if(z[M].add(R),R>=$.header.codeSizes.length)X$(N0.INVALID_CALL_TARGET);if(c===227){let O=$.body.typeSections[R].outputs,w=$.body.typeSections[R].inputs;if(O===128)X$(N0.INVALID_CALLF_RETURNING);if(T<w)X$(N0.STACK_UNDERFLOW);if(K+$.body.typeSections[R].maxStackHeight-w>1024)X$(N0.STACK_OVERFLOW);N+=O-w,L+=O-w}else{let O=$.body.typeSections[M].outputs,w=$.body.typeSections[R].outputs,x=$.body.typeSections[R].inputs,E=w===128;if(w>O&&!E)X$(N0.INVALID_JUMPF);if(B&&w<=127)X$(N0.INVALID_RETURNING_SECTION);if(E){if(T<x)X$(N0.STACK_UNDERFLOW)}else{let v=O+x-w;if(!(T===K&&K===v))X$(N0.INVALID_STACK_HEIGHT);S=!0}if(K+$.body.typeSections[R].maxStackHeight-x>1024)X$(N0.STACK_OVERFLOW)}}else if(c===228){let R=$.body.typeSections[M].outputs;if(!(T===K&&K===R))X$(N0.INVALID_STACK_HEIGHT);S=!0}else if(c===230){if(D[k+1]+1>T)X$(N0.STACK_UNDERFLOW)}else if(c===231){if(D[k+1]+2>T)X$(N0.STACK_UNDERFLOW)}else if(c===232){let R=D[k+1],O=(R>>4)+1,w=(R&15)+1;if(O+w+1>T)X$(N0.STACK_UNDERFLOW)}else if(c===236){let R=D[k+1];if(R>=$.header.containerSizes.length)X$(N0.INVALID_EOF_CREATE_TARGET);if(Y.has(R)){if(Y.get(R)!==jZ.InitCode)X$(N0.CONTAINER_DOUBLE_TYPE)}Y.set(R,jZ.InitCode)}else if(c===238){if(X!==jZ.InitCode)X$(N0.CONTAINER_TYPE_ERROR);let R=D[k+1];if(R>=$.header.containerSizes.length)X$(N0.INVALID_RETURN_CONTRACT_TARGET);if(Y.has(R)){if(Y.get(R)!==jZ.DeploymentCode)X$(N0.CONTAINER_DOUBLE_TYPE)}Y.set(R,jZ.DeploymentCode)}else if(c===209){let O=K00(D,k+1)+32;if($.header.dataSize<O)X$(N0.DATALOADN_OOB)}else if(c===0||c===243){if(X===jZ.InitCode)X$(N0.CONTAINER_TYPE_ERROR)}let F=iq[c].intermediates;if(F>0){for(let R=1;R<=F;R++)C(k+R);k+=F}if(k>=D.length)X$(N0.OPCODE_INTERMEDIATES_OOB);if(k++,iq[c].terminating===void 0){if(_.add(k),c!==224)h.add(k)}for(let R of h){if(R<k){if(m[R]!==N||l[R]!==L)X$(N0.UNSTABLE_STACK)}if(l[R]===void 0)m[R]=N,l[R]=L;else m[R]=Math.min(m[R],N),l[R]=Math.max(l[R],L)}b=Math.max(L,b)}if(!q.has(f))X$(N0.INVALID_TERMINATOR);if($.body.typeSections[M].maxStackHeight!==b)X$(N0.MAX_STACK_HEIGHT_VIOLATION);if(b>1024)X$(N0.MAX_STACK_HEIGHT_LIMIT);if(!S&&!B)X$(N0.RETURNING_NO_RETURN)}let j=new Set;j.add(0);let P=[0];while(P.length>0){let D=z[P.pop()];for(let A of D)if(!j.has(A))j.add(A),P.push(A)}if(j.size!==$.header.codeSizes.length)X$(N0.UNREACHABLE_CODE_SECTIONS);if(Y.size!==$.header.containerSizes.length)X$(N0.UNREACHABLE_CONTAINER_SECTIONS);return Y}var jZ;var NS=y(()=>{BM();HS();jZ={InitCode:"initCode",DeploymentCode:"deploymentCode",RuntimeCode:"runtimeCode"}});class AS{constructor($){this.data=$,this.ptr=0}readBytes($,Q){let X=this.ptr+$;if(X>this.data.length)X$(N0.OUT_OF_BOUNDS,this.ptr,Q);let Y=this.ptr;return this.ptr+=$,this.data.slice(Y,X)}readUint($){if(this.ptr>=this.data.length)X$(N0.OUT_OF_BOUNDS,this.ptr,$);return this.data[this.ptr++]}verifyUint($,Q){if(this.readUint()!==$)X$(N0.VERIFY_UINT,this.ptr-1,Q)}readUint16($){if(this.ptr+2>this.data.length)X$(N0.OUT_OF_BOUNDS,this.ptr,$);let X=this.ptr;return this.ptr+=2,new DataView(this.data.buffer).getUint16(X)}getPtr(){return this.ptr}readRemainder(){return this.data.slice(this.ptr)}isAtEnd(){return this.ptr===this.data.length}}class W00{constructor($){if($.length>ie)throw h0("err: container size more than maximum valid size");let Q=new AS($);if(Q.verifyUint(y7,N0.FORMAT),Q.verifyUint($W,N0.MAGIC),Q.verifyUint(P2,N0.VERSION),$.length<15)throw h0("err: container size less than minimum valid size");Q.verifyUint(ne,N0.KIND_TYPE);let X=Q.readUint16(N0.TYPE_SIZE);if(X<te)X$(N0.INVALID_TYPE_SIZE,X);if(X%H2!==0)X$(N0.INVALID_TYPE_SIZE,X);if(X>ee)throw h0(`err: number of code sections must not exceed 1024 (got ${X})`);Q.verifyUint(oe,N0.KIND_CODE);let Y=Q.readUint16(N0.CODE_SIZE);if(Y<$00)X$(N0.MIN_CODE_SECTIONS);if(Y!==X/H2)X$(N0.TYPE_SECTIONS,X/H2,Y);let Z=[];for(let M=0;M<Y;M++){let j=Q.readUint16(N0.CODE_SECTION);if(j<Q00)X$(N0.CODE_SECTION_SIZE);Z.push(j)}let J=Q.readUint(),q=[];if(J===re){let M=Q.readUint16(N0.CONTAINER_SIZE);if(M<X00)X$(N0.CONTAINER_SECTION_SIZE);if(M>Y00)X$(N0.CONTAINER_SECTION_SIZE);for(let j=0;j<M;j++){let P=Q.readUint16(N0.CONTAINER_SECTION);if(P<Z00)X$(N0.CONTAINER_SECTION_MIN);q.push(P)}J=Q.readUint()}if(J!==se)X$(N0.KIND_DATA);this.dataSizePtr=Q.getPtr();let G=Q.readUint16(N0.DATA_SIZE);Q.verifyUint(ae,N0.TERMINATOR),this.typeSize=X,this.codeSizes=Z,this.containerSizes=q,this.dataSize=G,this.buffer=$.slice(0,Q.getPtr());let z=this.buffer.length+this.typeSize;this.codeStartPos=[z]}sections(){return[this.typeSize,this.codeSizes,this.containerSizes,this.dataSize]}sectionSizes(){return[1,this.codeSizes.length,this.containerSizes.length,1]}getCodePosition($){if(this.codeStartPos[$])return this.codeStartPos[$];let Q=this.codeStartPos.length,X=this.codeStartPos[Q-1];for(let Y=Q;Y<=$;Y++)X+=this.codeSizes[Y-1],this.codeStartPos[Y]=X;return X}getSectionFromProgramCounter($){if($<0||$>this.codeStartPos[this.codeStartPos.lastIndex]+this.codeSizes[this.codeSizes.lastIndex])throw h0("program counter out of bounds");if(this.codeStartPos.length<this.codeSizes.length)this.getCodePosition(this.codeSizes.length-1);for(let Q=0;Q<this.codeSizes.length;Q++)if($<this.codeStartPos[Q]+this.codeSizes[Q])return Q;throw h0(`Invalid program counter value: ${$}`)}}class V00{constructor($,Q,X=PZ.Default,Y=!1){let Z=new AS($),J=[];for(let P=0;P<Q.typeSize/4;P++){let D=Z.readUint(N0.INPUTS),A=Z.readUint(N0.OUTPUTS),I=Z.readUint16(N0.MAX_STACK_HEIGHT);if(P===0){if(D!==0)X$(N0.CODE0_INPUTS);if(A!==128)X$(N0.CODE0_OUTPUTS)}if(D>J00)X$(N0.MAX_INPUTS,P,D);if(A>q00)X$(N0.MAX_OUTPUTS,P,A);if(I>G00)X$(N0.MAX_STACK_HEIGHT_LIMIT,P,I);J.push({inputs:D,outputs:A,maxStackHeight:I})}let q=Z.getPtr(),G=[];for(let[P,D]of Q.codeSizes.entries())try{let A=Z.readBytes(D);G.push(A)}catch{X$(N0.CODE_SECTION,P)}let z=$.slice(q,Z.getPtr()),M=[];for(let[P,D]of Q.containerSizes.entries())try{let A=Z.readBytes(D);M.push(A)}catch{X$(N0.CONTAINER_SECTION,P)}let j;if(X!==PZ.Initmode&&!Y)if(j=Z.readBytes(Q.dataSize,N0.DATA_SECTION),X===PZ.Default){if(!Z.isAtEnd())X$(N0.DANGLING_BYTES)}else this.txCallData=Z.readRemainder();else if(j=Z.readRemainder(),j.length>Q.dataSize)X$(N0.DANGLING_BYTES);this.typeSections=J,this.codeSections=G,this.containerSections=M,this.entireCode=z,this.dataSection=j,this.buffer=$}sections(){return[this.typeSections,this.codeSections,this.dataSection]}size(){return{typeSize:this.typeSections.length,codeSize:this.codeSections.length,dataSize:this.dataSection.length}}sectionSizes(){return[this.typeSections.map(()=>4),this.codeSections.map(($)=>$.length),this.dataSection.length]}}class QW{constructor($,Q=PZ.Default,X=!1){this.eofMode=Q,this.header=new W00($),this.body=new V00($.slice(this.header.buffer.length),this.header,Q,X),this.buffer=$}}function RS($,Q,X=jZ.RuntimeCode,Y=PZ.Default){let Z=new QW($,Y,X===jZ.DeploymentCode),J=U00(Z,Q,X);for(let q=0;q<Z.body.containerSections.length;q++){let G=Z.body.containerSections[q],z=J.get(q);RS(G,Q,z)}return Z}var PZ;var N2=y(()=>{R$();BM();NS();PZ={Default:"default",Initmode:"initMode",TxInitmode:"txInitMode"}});class G0{constructor($){this.error=$,this.errorType="EVMError"}}var O00="EVMError",EP0;var YQ=y(()=>{EP0={OUT_OF_GAS:"out of gas",CODESTORE_OUT_OF_GAS:"code store out of gas",CODESIZE_EXCEEDS_MAXIMUM:"code size to deposit exceeds maximum code size",STACK_UNDERFLOW:"stack underflow",STACK_OVERFLOW:"stack overflow",INVALID_JUMP:"invalid JUMP",INVALID_OPCODE:"invalid opcode",OUT_OF_RANGE:"value out of range",REVERT:"revert",STATIC_STATE_CHANGE:"static state change",INTERNAL_ERROR:"internal error",CREATE_COLLISION:"create collision",STOP:"stop",REFUND_EXHAUSTED:"refund exhausted",VALUE_OVERFLOW:"value overflow",INSUFFICIENT_BALANCE:"insufficient balance",INVALID_BYTECODE_RESULT:"invalid bytecode deployed",INITCODE_SIZE_VIOLATION:"initcode exceeds max initcode size",INVALID_INPUT_LENGTH:"invalid input length",INVALID_EOF_FORMAT:"invalid EOF format",BLS_12_381_INVALID_INPUT_LENGTH:"invalid input length",BLS_12_381_POINT_NOT_ON_CURVE:"point not on curve",BLS_12_381_INPUT_EMPTY:"input is empty",BLS_12_381_FP_NOT_IN_FIELD:"fp point not in field",BN254_FP_NOT_IN_FIELD:"fp point not in field",INVALID_COMMITMENT:"kzg commitment does not match versioned hash",INVALID_INPUTS:"kzg inputs invalid",INVALID_PROOF:"kzg proof invalid"};G0.errorMessages=EP0});function nq($){let Q=$.subarray(0,XW.length);return g$(XW,Q)}var XW,M00;var CS=y(()=>{R$();TM();XW=new Uint8Array([y7,$W]),M00=J9(XW)});function D00($,Q=PZ.Default){if($.env.eof={container:new QW($.code,Q),eofRunState:{returnStack:[]}},$.env.eof.container.body.txCallData!==void 0)$.env.callData=$.env.eof.container.body.txCallData;let X=$.env.eof.container.header.getCodePosition(0);$.programCounter=X}var j00=y(()=>{N2()});class P00{constructor($){this.runTime=0,this.tag=$,this.startTime=performance.now()}pause(){this.runTime=this.runTime+performance.now()-this.startTime}unpause(){this.startTime=performance.now()}time(){return(performance.now()-this.startTime+this.runTime)/1000}}class LS{constructor(){this.clear()}clear(){this.opcodes={},this.precompiles={}}getLogs(){function $(Q){let X=[];for(let Y in Q){let Z=Q[Y],J=Z.gasUsed/Z.time,q={calls:Z.calls,totalTime:Math.round(Z.time*1e6)/1000,avgTimePerCall:Math.round(Z.time/Z.calls*1e6)/1000,gasUsed:Z.gasUsed,millionGasPerSecond:Math.round(J/1000)/1000,blocksPerSlot:Math.round(J/xP0*1000)/1000,tag:Y};if(Z.dynamicGasUsed!==void 0)q.staticGas=Z.staticGas,q.staticGasUsed=Z.staticGas*Z.calls,q.dynamicGasUsed=Z.dynamicGasUsed;X.push(q)}return X.sort((Y,Z)=>{return Z.millionGasPerSecond-Y.millionGasPerSecond}),X}return{opcodes:$(this.opcodes),precompiles:$(this.precompiles)}}hasTimer(){return this.currentTimer!==void 0}startTimer($){if(this.currentTimer!==void 0)throw h0("Cannot have two timers running at the same time");return this.currentTimer=new P00($),this.currentTimer}pauseTimer(){let $=this.currentTimer;if($===void 0)throw h0("No timer to pause");return $.pause(),this.currentTimer=void 0,$}unpauseTimer($){if(this.currentTimer!==void 0)throw h0("Cannot unpause timer: another timer is already running");$.unpause(),this.currentTimer=$}stopTimer($,Q,X="opcodes",Y,Z){if(this.currentTimer===void 0||this.currentTimer!==$)throw h0("Cannot stop timer: another timer is already running");let J=$.time(),q=$.tag;this.currentTimer=void 0;let G=this[X];if(G[q]===void 0)G[q]={calls:0,time:0,gasUsed:0};let z=G[q];if(z.calls++,z.time+=J,z.gasUsed+=Q,X==="opcodes")z.staticGas=Y,z.dynamicGasUsed=(z.dynamicGasUsed??0)+Z}}var _P0=30000000,kP0=12,xP0;var wS=y(()=>{R$();xP0=_P0/kP0});class IS{constructor(){this._store=new Uint8Array(TS)}extend($,Q){if(Q===0)return;let Y=fP0($+Q,32)-this._store.length;if(Y>0){let Z=Math.ceil(Y/TS)*TS;this._store=J8(this._store,new Uint8Array(Z))}}write($,Q,X){if(Q===0)return;if(this.extend($,Q),X.length!==Q)throw h0("Invalid value size");if($+Q>this._store.length)throw h0("Value exceeds memory capacity");this._store.set(X,$)}read($,Q,X){this.extend($,Q);let Y=this._store.subarray($,$+Q);if(X===!0)return Y;let Z=new Uint8Array(Q);return Z.set(Y),Z}}var fP0=($,Q)=>{let X=$%Q;if(X===0)return $;else return $+Q-X},TS=8192;var H00=y(()=>{R$()});class pJ{constructor($){if(this.to=$.to,this.value=$.value??b7.value,this.caller=$.caller??b7.caller,this.gasLimit=$.gasLimit,this.data=$.data??b7.data,this.eofCallData=$.eofCallData,this.depth=$.depth??b7.depth,this.code=$.code,this._codeAddress=$.codeAddress,this.isStatic=$.isStatic??b7.isStatic,this.isCompiled=$.isCompiled??b7.isCompiled,this.salt=$.salt,this.selfdestruct=$.selfdestruct,this.createdAddresses=$.createdAddresses,this.delegatecall=$.delegatecall??b7.delegatecall,this.gasRefund=$.gasRefund??b7.gasRefund,this.blobVersionedHashes=$.blobVersionedHashes,this.accessWitness=$.accessWitness,this.value<0)throw h0(`value field cannot be negative, received ${this.value}`)}get codeAddress(){let $=this._codeAddress??this.to;if(!$)throw h0("Missing codeAddress");return $}}var b7;var FS=y(()=>{R$();b7={value:q0,caller:u9(),data:new Uint8Array(0),depth:0,isStatic:!1,isCompiled:!1,delegatecall:!1,gasRefund:q0}});function oq($,Q){let X=$%Q;if(X<q0)X=Q+X;return X}function rq($){return BigInt.asIntN(256,$)}function BS($){return BigInt.asUintN(256,$)}function A00($,Q){let X=D$;while(Q>q0){if(Q%xY!==q0)X=X*$%N00;$=$*$%N00,Q=Q/xY}return X}function r$($){let Q=$&vP0;return Te(Q)}function YW($){if(g$($,new Uint8Array($.length)))return new Uint8Array(0);else return M$($,32)}function $$($){throw new G0($)}function SM($){let Q=$.interpreter._evm.common.customCrypto.keccak256??J9,X=e0(Q($.interpreter.getCode())),Y=$.interpreter.getAddress().toString(),Z=$.programCounter-1;return`${X}/${Y}:${Z}`}function lJ($,Q){let X=$/Q;if(oq($,Q)===q0)return X;return X<q0?X-D$:X+D$}function s4($,Q,X){let Y=BigInt($.length);if(Q>Y)Q=Y;let Z=Q+X;if(Z>Y)Z=Y;return $=$.subarray(Number(Q),Number(Z)),$=S8($,Number(X)),$}function R00($,Q){switch(Q){case"LOG":Q+=$-160;break;case"PUSH":Q+=$-95;break;case"DUP":Q+=$-127;break;case"SWAP":Q+=$-143;break}return Q}function SS($,Q){return $.validJumps[Q]===1}function h7($,Q,X,Y){if(Y.gteHardfork(j0.TangerineWhistle)){let Z=Q-Q/g7;return $>Z?Z:$}else return $}function q8($,Q,X,Y){if(X===q0)return q0;let Z=lJ(Q+X,i8);if(Z<=$.memoryWordCount)return q0;let J=Z,q=Y.param("memoryGas"),G=Y.param("quadCoefficientDivGas"),z=J*q+J*J/G;if(z>$.highestMemCost){let M=$.highestMemCost;$.highestMemCost=z,z-=M}return $.memoryWordCount=Z,z}function EM($,Q,X){let Y=$.interpreter.getReturnData();if(Y.length>0){let Z=Number(Q),J=Number(X);if(BigInt(Y.length)<J)J=Y.length;let q=s4(Y,q0,BigInt(J));$.memory.extend(Z,J),$.memory.write(Z,J,q)}}function C00($,Q,X,Y){if(X.length===0&&Q.length===0||X.length>0&&Q.length>0)return Y.param("sstoreResetGas");else if(X.length===0&&Q.length>0){let Z=Y.param("sstoreResetGas");return $.interpreter.refundGas(Y.param("sstoreRefundGas"),"updateSstoreGas"),Z}else return Y.param("sstoreSetGas")}var vP0,N00;var ZW=y(()=>{qX();R$();TM();YQ();vP0=(D$<<K2)-D$;N00=BigInt(115792089237316200000000000000000000000000000000000000000000000000000000000000)});var uJ,gP0,yP0,bP0,hP0;var ES=y(()=>{R$();TM();N2();BM();CS();YQ();ZW();uJ=new Map([[0,function(){$$(G0.errorMessages.STOP)}],[1,function($){let[Q,X]=$.stack.popN(2),Y=oq(Q+X,AM);$.stack.push(Y)}],[2,function($){let[Q,X]=$.stack.popN(2),Y=oq(Q*X,AM);$.stack.push(Y)}],[3,function($){let[Q,X]=$.stack.popN(2),Y=oq(Q-X,AM);$.stack.push(Y)}],[4,function($){let[Q,X]=$.stack.popN(2),Y;if(X===q0)Y=q0;else Y=oq(Q/X,AM);$.stack.push(Y)}],[5,function($){let[Q,X]=$.stack.popN(2),Y;if(X===q0)Y=q0;else Y=BS(rq(Q)/rq(X));$.stack.push(Y)}],[6,function($){let[Q,X]=$.stack.popN(2),Y;if(X===q0)Y=X;else Y=oq(Q,X);$.stack.push(Y)}],[7,function($){let[Q,X]=$.stack.popN(2),Y;if(X===q0)Y=X;else Y=rq(Q)%rq(X);$.stack.push(BS(Y))}],[8,function($){let[Q,X,Y]=$.stack.popN(3),Z;if(Y===q0)Z=q0;else Z=oq(Q+X,Y);$.stack.push(Z)}],[9,function($){let[Q,X,Y]=$.stack.popN(3),Z;if(Y===q0)Z=q0;else Z=oq(Q*X,Y);$.stack.push(Z)}],[10,function($){let[Q,X]=$.stack.popN(2);if(Q===xY)switch(X){case CM:$.stack.push(Ge);return;case K2:$.stack.push(ze);return;case qe:$.stack.push(Ke);return}if(X===q0){$.stack.push(D$);return}if(Q===q0){$.stack.push(Q);return}let Y=A00(Q,X);$.stack.push(Y)}],[11,function($){let[Q,X]=$.stack.popN(2);if(Q<d4){let Y=Q*cJ+q2,Z=(D$<<Y)-D$;if(X>>Y&D$)X=X|BigInt.asUintN(256,~Z);else X=X&Z}$.stack.push(X)}],[16,function($){let[Q,X]=$.stack.popN(2),Y=Q<X?D$:q0;$.stack.push(Y)}],[17,function($){let[Q,X]=$.stack.popN(2),Y=Q>X?D$:q0;$.stack.push(Y)}],[18,function($){let[Q,X]=$.stack.popN(2),Y=rq(Q)<rq(X)?D$:q0;$.stack.push(Y)}],[19,function($){let[Q,X]=$.stack.popN(2),Y=rq(Q)>rq(X)?D$:q0;$.stack.push(Y)}],[20,function($){let[Q,X]=$.stack.popN(2),Y=Q===X?D$:q0;$.stack.push(Y)}],[21,function($){let X=$.stack.pop()===q0?D$:q0;$.stack.push(X)}],[22,function($){let[Q,X]=$.stack.popN(2),Y=Q&X;$.stack.push(Y)}],[23,function($){let[Q,X]=$.stack.popN(2),Y=Q|X;$.stack.push(Y)}],[24,function($){let[Q,X]=$.stack.popN(2),Y=Q^X;$.stack.push(Y)}],[25,function($){let Q=$.stack.pop(),X=BigInt.asUintN(256,~Q);$.stack.push(X)}],[26,function($){let[Q,X]=$.stack.popN(2);if(Q>i8){$.stack.push(q0);return}let Y=X>>(d4-Q)*cJ&z2;$.stack.push(Y)}],[27,function($){let[Q,X]=$.stack.popN(2);if(Q>RM){$.stack.push(q0);return}let Y=X<<Q&Z2;$.stack.push(Y)}],[28,function($){let[Q,X]=$.stack.popN(2);if(Q>256){$.stack.push(q0);return}let Y=X>>Q;$.stack.push(Y)}],[29,function($){let[Q,X]=$.stack.popN(2),Y,J=BigInt.asIntN(256,X)<0;if(Q>256){if(J)Y=Z2;else Y=q0;$.stack.push(Y);return}let q=X>>Q;if(J){let G=z2-Q,z=Z2>>G<<G;Y=q|z}else Y=q;$.stack.push(Y)}],[32,function($,Q){let[X,Y]=$.stack.popN(2),Z=new Uint8Array(0);if(Y!==q0)Z=$.memory.read(Number(X),Number(Y));let J=BigInt(e0((Q.customCrypto.keccak256??J9)(Z)));$.stack.push(J)}],[48,function($){let Q=z$($.interpreter.getAddress().bytes);$.stack.push(Q)}],[49,async function($){let Q=$.stack.pop(),X=r$(Q),Y=await $.interpreter.getExternalBalance(X);$.stack.push(Y)}],[50,function($){$.stack.push($.interpreter.getTxOrigin())}],[51,function($){$.stack.push($.interpreter.getCaller())}],[52,function($){$.stack.push($.interpreter.getCallValue())}],[53,function($){let Q=$.stack.pop();if(Q>$.interpreter.getCallDataSize()){$.stack.push(q0);return}let X=Number(Q),Y=$.interpreter.getCallData().subarray(X,X+32);Y=Y.length?Y:Uint8Array.from([0]);let Z=z$(Y);if(Y.length<32)Z=Z<<cJ*BigInt(32-Y.length);$.stack.push(Z)}],[54,function($){let Q=$.interpreter.getCallDataSize();$.stack.push(Q)}],[55,function($){let[Q,X,Y]=$.stack.popN(3);if(Y!==q0){let Z=s4($.interpreter.getCallData(),X,Y),J=Number(Q),q=Number(Y);$.memory.write(J,q,Z)}}],[56,function($){$.stack.push($.interpreter.getCodeSize())}],[57,function($){let[Q,X,Y]=$.stack.popN(3);if(Y!==q0){let Z=s4($.interpreter.getCode(),X,Y),J=Number(Q),q=Number(Y);$.memory.write(J,q,Z)}}],[59,async function($){let Q=$.stack.pop(),X=r$(Q),Y=await $.stateManager.getCode(X);if(nq(Y)){$.stack.push(BigInt(XW.length));return}let Z=BigInt(Y.length);$.stack.push(Z)}],[60,async function($){let[Q,X,Y,Z]=$.stack.popN(4);if(Z!==q0){let J=r$(Q),q=await $.stateManager.getCode(J);if(nq(q))q=XW;let G=s4(q,Y,Z),z=Number(X),M=Number(Z);$.memory.write(z,M,G)}}],[63,async function($){let Q=$.stack.pop(),X=r$(Q),Y=await $.stateManager.getCode(X);if(nq(Y)){$.stack.push(z$(M00));return}let Z=await $.stateManager.getAccount(X);if(!Z||Z.isEmpty()){$.stack.push(q0);return}$.stack.push(BigInt(e0(Z.codeHash)))}],[61,function($){$.stack.push($.interpreter.getReturnDataSize())}],[62,function($){let[Q,X,Y]=$.stack.popN(3);if(Y!==q0){let Z=s4($.interpreter.getReturnData(),X,Y),J=Number(Q),q=Number(Y);$.memory.write(J,q,Z)}}],[58,function($){$.stack.push($.interpreter.getTxGasPrice())}],[64,async function($,Q){let X=$.stack.pop();if(Q.isActivatedEIP(7709)){if(X>=$.interpreter.getBlockNumber()){$.stack.push(q0);return}let Y=$.interpreter.getBlockNumber()-X;if(Y>RM||Y<=q0){$.stack.push(q0);return}let Z=new l9($e(Q.param("historyStorageAddress"))),J=Q.param("historyServeWindow"),q=M$(N$(X%J),32);if(Q.isActivatedEIP(6800)||Q.isActivatedEIP(7864)){let z=$.env.accessWitness.readAccountStorage(Z,X);$.interpreter.useGas(z,"BLOCKHASH")}let G=await $.stateManager.getStorage(Z,q);$.stack.push(z$(G))}else{let Y=$.interpreter.getBlockNumber()-X;if(Y>RM||Y<=q0){$.stack.push(q0);return}let Z=await $.blockchain.getBlock(Number(X));$.stack.push(z$(Z.hash()))}}],[65,function($){$.stack.push($.interpreter.getBlockCoinbase())}],[66,function($){$.stack.push($.interpreter.getBlockTimestamp())}],[67,function($){$.stack.push($.interpreter.getBlockNumber())}],[68,function($,Q){if(Q.isActivatedEIP(4399))$.stack.push($.interpreter.getBlockPrevRandao());else $.stack.push($.interpreter.getBlockDifficulty())}],[69,function($){$.stack.push($.interpreter.getBlockGasLimit())}],[70,function($){$.stack.push($.interpreter.getChainId())}],[71,function($){$.stack.push($.interpreter.getSelfBalance())}],[72,function($){$.stack.push($.interpreter.getBlockBaseFee())}],[73,function($){let Q=$.stack.pop();if($.env.blobVersionedHashes.length>Number(Q))$.stack.push(BigInt($.env.blobVersionedHashes[Number(Q)]));else $.stack.push(q0)}],[74,function($){$.stack.push($.interpreter.getBlobBaseFee())}],[80,function($){$.stack.pop()}],[81,function($){let Q=$.stack.pop(),X=$.memory.read(Number(Q),32,!0);$.stack.push(z$(X))}],[82,function($){let[Q,X]=$.stack.popN(2),Y=M$(N$(X),32),Z=Number(Q);$.memory.write(Z,32,Y)}],[83,function($){let[Q,X]=$.stack.popN(2),Y=N$(X&z2),Z=Number(Q);$.memory.write(Z,1,Y)}],[84,async function($){let Q=$.stack.pop(),X=M$(N$(Q),32),Y=await $.interpreter.storageLoad(X),Z=Y.length?z$(Y):q0;$.stack.push(Z)}],[85,async function($){let[Q,X]=$.stack.popN(2),Y=M$(N$(Q),32),Z;if(X===q0)Z=Uint8Array.from([]);else Z=N$(X);await $.interpreter.storageStore(Y,Z)}],[86,function($){let Q=$.stack.pop();if(Q>$.interpreter.getCodeSize())$$(G0.errorMessages.INVALID_JUMP+" at "+SM($));let X=Number(Q);if(!SS($,X))$$(G0.errorMessages.INVALID_JUMP+" at "+SM($));$.programCounter=X}],[87,function($){let[Q,X]=$.stack.popN(2);if(X!==q0){if(Q>$.interpreter.getCodeSize())$$(G0.errorMessages.INVALID_JUMP+" at "+SM($));let Y=Number(Q);if(!SS($,Y))$$(G0.errorMessages.INVALID_JUMP+" at "+SM($));$.programCounter=Y}}],[88,function($){$.stack.push(BigInt($.programCounter-1))}],[89,function($){$.stack.push($.memoryWordCount*i8)}],[90,function($){$.stack.push($.interpreter.getGasLeft())}],[91,function(){}],[92,function($){let Q=$.stack.pop(),X=M$(N$(Q),32),Y=$.interpreter.transientStorageLoad(X),Z=Y.length?z$(Y):q0;$.stack.push(Z)}],[93,function($){if($.interpreter.isStatic())$$(G0.errorMessages.STATIC_STATE_CHANGE);let[Q,X]=$.stack.popN(2),Y=M$(N$(Q),32),Z;if(X===q0)Z=Uint8Array.from([]);else Z=N$(X);$.interpreter.transientStorageStore(Y,Z)}],[94,function($){let[Q,X,Y]=$.stack.popN(3),Z=$.memory.read(Number(X),Number(Y),!0);$.memory.write(Number(Q),Number(Y),Z)}],[95,function($){$.stack.push(q0)}],[96,function($,Q){let X=$.opCode-95;if((Q.isActivatedEIP(6800)||Q.isActivatedEIP(7864))&&$.env.chargeCodeAccesses===!0){let Y=$.interpreter.getAddress(),Z=Math.min($.code.length,$.programCounter+1),J=Math.min($.code.length,Z+X-1),q=$.env.accessWitness.readAccountCodeChunks(Y,Z,J);$.interpreter.useGas(q,"PUSH")}if(!$.shouldDoJumpAnalysis)$.stack.push($.cachedPushes[$.programCounter]),$.programCounter+=X;else{let Y=$.code.subarray($.programCounter,$.programCounter+X);if(Y.length<X)Y=S8(Y,X);$.programCounter+=X,$.stack.push(z$(Y))}}],[128,function($){let Q=$.opCode-127;$.stack.dup(Q)}],[144,function($){let Q=$.opCode-143;$.stack.swap(Q)}],[160,function($){let[Q,X]=$.stack.popN(2),Y=$.opCode-160,J=$.stack.popN(Y).map(function(G){return M$(N$(G),32)}),q=new Uint8Array(0);if(X!==q0)q=$.memory.read(Number(Q),Number(X));$.interpreter.log(q,Y,J)}],[208,function($){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);let Q=$.stack.pop();if(Q>$.env.eof.container.body.dataSection.length){$.stack.push(q0);return}let X=Number(Q),Y=$.env.eof.container.body.dataSection.subarray(X,X+32);Y=Y.length?Y:Uint8Array.from([0]);let Z=z$(Y);if(Y.length<32)Z=Z<<cJ*BigInt(32-Y.length);$.stack.push(Z)}],[209,function($){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);let Q=Number(z$($.code.subarray($.programCounter,$.programCounter+2))),X=z$($.env.eof.container.body.dataSection.subarray(Q,Q+32));$.stack.push(X),$.programCounter+=2}],[210,function($){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);$.stack.push(BigInt($.env.eof.container.body.dataSection.length))}],[211,function($){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);let[Q,X,Y]=$.stack.popN(3);if(Y!==q0){let Z=s4($.env.eof.container.body.dataSection,X,Y),J=Number(Q),q=Number(Y);$.memory.write(J,q,Z)}}],[224,function($){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);else{let Q=$.env.code,X=new DataView(Q.buffer).getInt16($.programCounter);$.programCounter+=2+X}}],[225,function($){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);else{if($.stack.pop()>0){let X=$.env.code,Y=new DataView(X.buffer).getInt16($.programCounter);$.programCounter+=Y}$.programCounter+=2}}],[226,function($){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);else{let Q=$.env.code,X=Q[$.programCounter],Y=(X+1)*2;$.programCounter+=1;let Z=$.stack.pop();if(Z<=X){let J=new DataView(Q.buffer).getInt16($.programCounter+Number(Z)*2);$.programCounter+=Y+J}else $.programCounter+=Y}}],[227,function($){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);let Q=HM($.code.slice($.programCounter,$.programCounter+2)),X=$.stack.length,Y=$.env.eof.container.body.typeSections[Q];if(X>1024-Y.maxStackHeight+Y.inputs)$$(N0.STACK_OVERFLOW);if($.env.eof.eofRunState.returnStack.length>=1024)$$(N0.RETURN_STACK_OVERFLOW);$.env.eof?.eofRunState.returnStack.push($.programCounter+2),$.programCounter=$.env.eof.container.header.getCodePosition(Q)}],[228,function($){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);let Q=$.env.eof.eofRunState.returnStack.pop();if(Q===void 0)$$(N0.RETF_NO_RETURN);$.programCounter=Q}],[229,function($){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);let Q=HM($.code.slice($.programCounter,$.programCounter+2)),X=$.stack.length,Y=$.env.eof.container.body.typeSections[Q];if(X>1024-Y.maxStackHeight+Y.inputs)$$(N0.STACK_OVERFLOW);$.programCounter=$.env.eof.container.header.getCodePosition(Q)}],[230,function($){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);let Q=Number(z$($.code.subarray($.programCounter,$.programCounter+1)))+1;$.stack.dup(Q),$.programCounter++}],[231,function($){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);let Q=Number(z$($.code.subarray($.programCounter,$.programCounter+1)))+1;$.stack.swap(Q),$.programCounter++}],[232,function($){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);let Q=Number(z$($.code.subarray($.programCounter,$.programCounter+1))),X=(Q>>4)+1,Y=(Q&15)+1;$.stack.exchange(X,X+Y),$.programCounter++}],[236,async function($){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);else{if($.interpreter.isStatic())$$(G0.errorMessages.STATIC_STATE_CHANGE);let Q=$.env.code[$.programCounter],X=$.env.eof.container.body.containerSections[Q],[Y,Z,J,q]=$.stack.popN(4),G=$.messageGasLimit;$.messageGasLimit=void 0;let z=new Uint8Array(0);if(q!==q0)z=$.memory.read(Number(J),Number(q),!0);$.programCounter++;let M=await $.interpreter.eofcreate(G,Y,X,M$(N$(Z),32),z);$.stack.push(M)}}],[238,async function($){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);else{let Q=$.env.code[$.programCounter],X=$.env.eof.container.body.containerSections[Q],Y=new QW(X,PZ.Initmode),[Z,J]=$.stack.popN(2),q=new Uint8Array(0);if(J!==q0)q=$.memory.read(Number(Z),Number(J));let G=Y.header.dataSize,M=Y.body.dataSection.length+Number(J);if(M<G)$$(N0.INVALID_RETURN_CONTRACT_DATA_SIZE);if(M>65535)$$(G0.errorMessages.OUT_OF_GAS);let j=M$(N$(BigInt(M)),2),P=Y.header.dataSizePtr;X[P]=j[0],X[P+1]=j[1];let D=J8(X,q);$.interpreter.finish(D)}}],[240,async function($,Q){let[X,Y,Z]=$.stack.popN(3);if(Q.isActivatedEIP(3860)&&Z>Number(Q.param("maxInitCodeSize"))&&!$.interpreter._evm.allowUnlimitedInitCodeSize)$$(G0.errorMessages.INITCODE_SIZE_VIOLATION);let J=$.messageGasLimit;$.messageGasLimit=void 0;let q=new Uint8Array(0);if(Z!==q0)q=$.memory.read(Number(Y),Number(Z),!0);if(nq(q)){$.stack.push(q0);return}let G=await $.interpreter.create(J,X,q);$.stack.push(G)}],[245,async function($,Q){if($.interpreter.isStatic())$$(G0.errorMessages.STATIC_STATE_CHANGE);let[X,Y,Z,J]=$.stack.popN(4);if(Q.isActivatedEIP(3860)&&Z>Number(Q.param("maxInitCodeSize"))&&!$.interpreter._evm.allowUnlimitedInitCodeSize)$$(G0.errorMessages.INITCODE_SIZE_VIOLATION);let q=$.messageGasLimit;$.messageGasLimit=void 0;let G=new Uint8Array(0);if(Z!==q0)G=$.memory.read(Number(Y),Number(Z),!0);if(nq(G)){$.stack.push(q0);return}let z=await $.interpreter.create2(q,X,G,M$(N$(J),32));$.stack.push(z)}],[241,async function($,Q){let[X,Y,Z,J,q,G,z]=$.stack.popN(7),M=r$(Y),j=new Uint8Array(0);if(q!==q0)j=$.memory.read(Number(J),Number(q),!0);let P=$.messageGasLimit;if(Z!==q0){let A=Q.param("callStipendGas");$.interpreter.addStipend(A),P+=A}$.messageGasLimit=void 0;let D=await $.interpreter.call(P,M,Z,j);EM($,G,z),$.stack.push(D)}],[242,async function($,Q){let[X,Y,Z,J,q,G,z]=$.stack.popN(7),M=r$(Y),j=$.messageGasLimit;if(Z!==q0){let A=Q.param("callStipendGas");$.interpreter.addStipend(A),j+=A}$.messageGasLimit=void 0;let P=new Uint8Array(0);if(q!==q0)P=$.memory.read(Number(J),Number(q),!0);let D=await $.interpreter.callCode(j,M,Z,P);EM($,G,z),$.stack.push(D)}],[244,async function($){let Q=$.interpreter.getCallValue(),[X,Y,Z,J,q,G]=$.stack.popN(6),z=r$(Y),M=new Uint8Array(0);if(J!==q0)M=$.memory.read(Number(Z),Number(J),!0);let j=$.messageGasLimit;$.messageGasLimit=void 0;let P=await $.interpreter.callDelegate(j,z,Q,M);EM($,q,G),$.stack.push(P)}],[247,function($){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);let Q=$.stack.pop();if(Q>$.interpreter.getReturnDataSize()){$.stack.push(q0);return}let X=Number(Q),Y=$.interpreter.getReturnData().subarray(X,X+32);Y=Y.length?Y:Uint8Array.from([0]);let Z=z$(Y);if(Y.length<32)Z=Z<<cJ*BigInt(32-Y.length);$.stack.push(Z)}],[248,async function($){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);else{let[Q,X,Y,Z]=$.stack.popN(4),J=$.messageGasLimit;if($.messageGasLimit=void 0,J===-D$){$.stack.push(D$),$.returnBytes=new Uint8Array(0);return}let q=r$(Q),G=new Uint8Array(0);if(Y!==q0)G=$.memory.read(Number(X),Number(Y),!0);let z=await $.interpreter.call(J,q,Z,G);$.stack.push(z)}}],[249,async function($){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);else{let Q=$.interpreter.getCallValue(),[X,Y,Z]=$.stack.popN(3),J=$.messageGasLimit;if($.messageGasLimit=void 0,J===-D$){$.stack.push(D$),$.returnBytes=new Uint8Array(0);return}let q=r$(X),G=await $.stateManager.getCode(q);if(!nq(G)){$.stack.push(D$),$.returnBytes=new Uint8Array(0);return}let z=new Uint8Array(0);if(Z!==q0)z=$.memory.read(Number(Y),Number(Z),!0);let M=await $.interpreter.callDelegate(J,q,Q,z);$.stack.push(M)}}],[250,async function($){let Q=q0,[X,Y,Z,J,q,G]=$.stack.popN(6),z=r$(Y),M=$.messageGasLimit;$.messageGasLimit=void 0;let j=new Uint8Array(0);if(J!==q0)j=$.memory.read(Number(Z),Number(J),!0);let P=await $.interpreter.callStatic(M,z,Q,j);EM($,q,G),$.stack.push(P)}],[251,async function($){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);else{let Q=q0,[X,Y,Z]=$.stack.popN(3),J=$.messageGasLimit;if($.messageGasLimit=void 0,J===-D$){$.stack.push(D$),$.returnBytes=new Uint8Array(0);return}let q=r$(X),G=new Uint8Array(0);if(Z!==q0)G=$.memory.read(Number(Y),Number(Z),!0);let z=await $.interpreter.callStatic(J,q,Q,G);$.stack.push(z)}}],[243,function($){let[Q,X]=$.stack.popN(2),Y=new Uint8Array(0);if(X!==q0)Y=$.memory.read(Number(Q),Number(X));$.interpreter.finish(Y)}],[253,function($){let[Q,X]=$.stack.popN(2),Y=new Uint8Array(0);if(X!==q0)Y=$.memory.read(Number(Q),Number(X));$.interpreter.revert(Y)}],[255,async function($){let Q=$.stack.pop(),X=r$(Q);return $.interpreter.selfDestruct(X)}]]),gP0=uJ.get(96);for(let $=97;$<=127;$++)uJ.set($,gP0);yP0=uJ.get(128);for(let $=129;$<=143;$++)uJ.set($,yP0);bP0=uJ.get(144);for(let $=145;$<=159;$++)uJ.set($,bP0);hP0=uJ.get(160);for(let $=161;$<=164;$++)uJ.set($,hP0)});function L00($){return"opcode"in $&&"opcodeName"in $&&"baseFee"in $&&"logicFunction"in $}class JW{async getBlock(){return{hash(){return new Uint8Array(32)}}}async putBlock(){}shallowCopy(){return this}}var A2;var qW=y(()=>{A2=new Uint8Array([239,1,0])});function w00($,Q,X,Y,Z){if(g$(Q,Y))return Z.param("netSstoreNoopGas");if(g$(X,Q)){if(X.length===0)return Z.param("netSstoreInitGas");if(Y.length===0)$.interpreter.refundGas(Z.param("netSstoreClearRefundGas"),"EIP-1283 -> netSstoreClearRefund");return Z.param("netSstoreCleanGas")}if(X.length!==0){if(Q.length===0)$.interpreter.subRefund(Z.param("netSstoreClearRefundGas"),"EIP-1283 -> netSstoreClearRefund");else if(Y.length===0)$.interpreter.refundGas(Z.param("netSstoreClearRefundGas"),"EIP-1283 -> netSstoreClearRefund")}if(g$(X,Y))if(X.length===0)$.interpreter.refundGas(Z.param("netSstoreResetClearRefundGas"),"EIP-1283 -> netSstoreResetClearRefund");else $.interpreter.refundGas(Z.param("netSstoreResetRefundGas"),"EIP-1283 -> netSstoreResetRefund");return Z.param("netSstoreDirtyGas")}var T00=y(()=>{R$()});function bX($,Q,X,Y=!0,Z=!1){if(!X.isActivatedEIP(2929))return q0;if(!$.interpreter.journal.isWarmedAddress(Q)){if($.interpreter.journal.addWarmedAddress(Q),Y&&!(X.isActivatedEIP(6800)||X.isActivatedEIP(7864)))return X.param("coldaccountaccessGas");else if(Y&&(X.isActivatedEIP(6800)||X.isActivatedEIP(7864)))return X.param("warmstoragereadGas")}else if(Y&&!Z)return X.param("warmstoragereadGas");return q0}function _S($,Q,X,Y,Z=!0){if(!Y.isActivatedEIP(2929))return q0;let J=$.interpreter.getAddress().bytes;if(!$.interpreter.journal.isWarmedStorage(J,Q)){if($.interpreter.journal.addWarmedStorage(J,Q),Z&&!(Y.isActivatedEIP(6800)||Y.isActivatedEIP(7864)))return Y.param("coldsloadGas")}else if(Z&&(!X||Y.isActivatedEIP(6800)||Y.isActivatedEIP(7864)))return Y.param("warmstoragereadGas");return q0}function R2($,Q,X,Y,Z){if(!Z.isActivatedEIP(2929))return X;let J=$.interpreter.getAddress().bytes,q=Z.param("warmstoragereadGas"),G=Z.param("coldsloadGas");if($.interpreter.journal.isWarmedStorage(J,Q))switch(Y){case"noop":return q;case"initRefund":return Z.param("sstoreInitEIP2200Gas")-q;case"cleanRefund":return Z.param("sstoreResetGas")-G-q}return X}var kS=y(()=>{R$()});function I00($,Q,X,Y,Z,J){if($.interpreter.getGasLeft()<=J.param("sstoreSentryEIP2200Gas"))$$(G0.errorMessages.OUT_OF_GAS);if(g$(Q,Y)){let q=J.param("sstoreNoopEIP2200Gas");return R2($,Z,q,"noop",J)}if(g$(X,Q)){if(X.length===0)return J.param("sstoreInitEIP2200Gas");if(Y.length===0)$.interpreter.refundGas(J.param("sstoreClearRefundEIP2200Gas"),"EIP-2200 -> sstoreClearRefundEIP2200");return J.param("sstoreCleanEIP2200Gas")}if(X.length>0){if(Q.length===0)$.interpreter.subRefund(J.param("sstoreClearRefundEIP2200Gas"),"EIP-2200 -> sstoreClearRefundEIP2200");else if(Y.length===0)$.interpreter.refundGas(J.param("sstoreClearRefundEIP2200Gas"),"EIP-2200 -> sstoreClearRefundEIP2200")}if(g$(X,Y))if(X.length===0){let q=J.param("sstoreInitRefundEIP2200Gas");$.interpreter.refundGas(R2($,Z,q,"initRefund",J),"EIP-2200 -> initRefund")}else{let q=J.param("sstoreCleanRefundEIP2200Gas");$.interpreter.refundGas(BigInt(R2($,Z,q,"cleanRefund",J)),"EIP-2200 -> cleanRefund")}return J.param("sstoreDirtyEIP2200Gas")}var F00=y(()=>{R$();YQ();kS();ZW()});async function C2($,Q,X,Y){let Z=await $.stateManager.getCode(X);if(g$(Z.slice(0,3),A2))return bX($,Z.slice(3,24),Q,Y);return q0}var xS,L2,mP0;var B00=y(()=>{qX();R$();BM();YQ();qW();T00();F00();kS();ZW();xS=BigInt(2)**BigInt(160)-BigInt(1);L2=new Map([[10,async function($,Q,X){let[Y,Z]=$.stack.peek(2);if(Z===q0)return Q;let J=Z.toString(2).length/8;if(J>Math.trunc(J))J=Math.trunc(J)+1;if(J<1||J>32)$$(G0.errorMessages.OUT_OF_RANGE);let q=X.param("expByteGas");return Q+=BigInt(J)*q,Q}],[32,async function($,Q,X){let[Y,Z]=$.stack.peek(2);return Q+=q8($,Y,Z,X),Q+=X.param("keccak256WordGas")*lJ(Z,i8),Q}],[49,async function($,Q,X){let Y=r$($.stack.peek()[0]),Z=!0;if(X.isActivatedEIP(6800)||X.isActivatedEIP(7864)){let J=$.env.accessWitness.readAccountBasicData(Y);Q+=J,Z=J===q0}if(X.isActivatedEIP(2929))Q+=bX($,Y.bytes,X,Z);return Q}],[55,async function($,Q,X){let[Y,Z,J]=$.stack.peek(3);if(Q+=q8($,Y,J,X),J!==q0)Q+=X.param("copyGas")*lJ(J,i8);return Q}],[57,async function($,Q,X){let[Y,Z,J]=$.stack.peek(3);if(Q+=q8($,Y,J,X),J!==q0){if(Q+=X.param("copyGas")*lJ(J,i8),(X.isActivatedEIP(6800)||X.isActivatedEIP(7864))&&$.env.chargeCodeAccesses===!0){let q=$.interpreter.getAddress(),G=Z+J,z=$.interpreter.getCodeSize();if(G>z)G=z;Q+=$.env.accessWitness.readAccountCodeChunks(q,Number(Z),Number(G))}}return Q}],[59,async function($,Q,X){let Y=r$($.stack.peek()[0]),Z=!0;if((X.isActivatedEIP(6800)||X.isActivatedEIP(7864))&&$.interpreter._evm.getPrecompile(Y)===void 0&&!Y.equals(r$(X.param("systemAddress")))){let J=q0;J+=$.env.accessWitness.readAccountBasicData(Y),Q+=J,Z=J===q0}if(X.isActivatedEIP(2929))Q+=bX($,Y.bytes,X,Z);return Q}],[60,async function($,Q,X){let[Y,Z,J,q]=$.stack.peek(4),G=r$(Y);Q+=q8($,Z,q,X);let z=!0;if((X.isActivatedEIP(6800)||X.isActivatedEIP(7864))&&$.interpreter._evm.getPrecompile(G)===void 0&&!G.equals(r$(X.param("systemAddress")))){let M=q0;M+=$.env.accessWitness.readAccountBasicData(G),Q+=M,z=M===q0}if(X.isActivatedEIP(2929))Q+=bX($,G.bytes,X,z);if(q!==q0){if(Q+=X.param("copyGas")*lJ(q,i8),X.isActivatedEIP(6800)||X.isActivatedEIP(7864)){let M=J+q,j=BigInt((await $.stateManager.getCode(G)).length);if(M>j)M=j;Q+=$.env.accessWitness.readAccountCodeChunks(G,Number(J),Number(M))}}return Q}],[62,async function($,Q,X){let[Y,Z,J]=$.stack.peek(3);if(Z+J>$.interpreter.getReturnDataSize()){if($.env.eof===void 0)$$(G0.errorMessages.OUT_OF_GAS)}if(Q+=q8($,Y,J,X),J!==q0)Q+=X.param("copyGas")*lJ(J,i8);return Q}],[63,async function($,Q,X){let Y=r$($.stack.peek()[0]),Z=!0;if((X.isActivatedEIP(6800)||X.isActivatedEIP(7864))&&$.interpreter._evm.getPrecompile(Y)===void 0&&!Y.equals(r$(X.param("systemAddress")))){let J=q0;J+=$.env.accessWitness.readAccountCodeHash(Y),Q+=J,Z=J===q0}if(X.isActivatedEIP(2929))Q+=bX($,Y.bytes,X,Z);return Q}],[81,async function($,Q,X){let Y=$.stack.peek()[0];return Q+=q8($,Y,i8,X),Q}],[82,async function($,Q,X){let Y=$.stack.peek()[0];return Q+=q8($,Y,i8,X),Q}],[83,async function($,Q,X){let Y=$.stack.peek()[0];return Q+=q8($,Y,D$,X),Q}],[84,async function($,Q,X){let Y=$.stack.peek()[0],Z=M$(N$(Y),32),J=!0;if(X.isActivatedEIP(6800)||X.isActivatedEIP(7864)){let q=$.interpreter.getAddress(),G=$.env.accessWitness.readAccountStorage(q,Y);Q+=G,J=G===q0}if(X.isActivatedEIP(2929))Q+=_S($,Z,!1,X,J);return Q}],[85,async function($,Q,X){if($.interpreter.isStatic())$$(G0.errorMessages.STATIC_STATE_CHANGE);let[Y,Z]=$.stack.peek(2),J=M$(N$(Y),32),q;if(Z===q0)q=Uint8Array.from([]);else q=N$(Z);let G=YW(await $.interpreter.storageLoad(J)),z=YW(await $.interpreter.storageLoad(J,!0));if(X.hardfork()===j0.Constantinople)Q+=w00($,G,z,YW(q),X);else if(X.gteHardfork(j0.Istanbul)){if(!X.isActivatedEIP(6800)&&!X.isActivatedEIP(7864))Q+=I00($,G,z,YW(q),J,X)}else Q+=C00($,G,YW(q),X);let M=!0;if(X.isActivatedEIP(6800)||X.isActivatedEIP(7864)){let j=$.interpreter.getAddress(),P=$.env.accessWitness.writeAccountStorage(j,Y);Q+=P,M=P===q0}if(X.isActivatedEIP(2929))Q+=_S($,J,!0,X,M);return Q}],[94,async function($,Q,X){let[Y,Z,J]=$.stack.peek(3),q=(J+d4)/i8;return Q+=Ze*q,Q+=q8($,Z,J,X),Q+=q8($,Y,J,X),Q}],[160,async function($,Q,X){if($.interpreter.isStatic())$$(G0.errorMessages.STATIC_STATE_CHANGE);let[Y,Z]=$.stack.peek(2),J=$.opCode-160;if(J<0||J>4)$$(G0.errorMessages.OUT_OF_RANGE);return Q+=q8($,Y,Z,X),Q+=X.param("logTopicGas")*BigInt(J)+Z*X.param("logDataGas"),Q}],[211,async function($,Q,X){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);let[Y,Z,J]=$.stack.peek(3);if(Q+=q8($,Y,J,X),J!==q0)Q+=X.param("copyGas")*lJ(J,i8);return Q}],[236,async function($,Q,X){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);let Y=$.env.code[$.programCounter+1],[Z,J,q,G]=$.stack.peek(4);Q+=q8($,q,G,X);let z=$.env.eof.container.body.containerSections[Y];Q+=X.param("keccak256WordGas")*lJ(BigInt(z.length),i8);let M=$.interpreter.getGasLeft()-Q;return $.messageGasLimit=h7(M,M,$,X),Q}],[238,async function($,Q,X){let[Y,Z]=$.stack.peek(2);return Q+=q8($,Y,Z,X),Q}],[240,async function($,Q,X){if($.interpreter.isStatic())$$(G0.errorMessages.STATIC_STATE_CHANGE);let[Y,Z,J]=$.stack.peek(3);if(X.isActivatedEIP(2929))Q+=bX($,$.interpreter.getAddress().bytes,X,!1);if(X.isActivatedEIP(3860))Q+=(J+d4)/i8*X.param("initCodeWordGas");Q+=q8($,Z,J,X);let q=BigInt($.interpreter.getGasLeft())-Q;return q=h7(q,q,$,X),$.messageGasLimit=q,Q}],[241,async function($,Q,X){let[Y,Z,J,q,G,z,M]=$.stack.peek(7),j=r$(Z);if($.interpreter.isStatic()&&J!==q0)$$(G0.errorMessages.STATIC_STATE_CHANGE);Q+=q8($,q,G,X),Q+=q8($,z,M,X);let P=!0;if((X.isActivatedEIP(6800)||X.isActivatedEIP(7864))&&$.interpreter._evm.getPrecompile(j)===void 0){let A=$.env.accessWitness.readAccountBasicData(j);if(J!==q0){let I=$.interpreter.getAddress();Q+=$.env.accessWitness.writeAccountBasicData(I),Q+=$.env.accessWitness.writeAccountBasicData(j)}Q+=A,P=A===q0}if(X.isActivatedEIP(2929))Q+=bX($,j.bytes,X,P);if(X.isActivatedEIP(7702))Q+=await C2($,X,j,P);if(J!==q0&&!X.isActivatedEIP(6800)&&!X.isActivatedEIP(7864))Q+=X.param("callValueTransferGas");if(X.gteHardfork(j0.SpuriousDragon)){let A=await $.stateManager.getAccount(j),I=!1;if(A===void 0||A.isEmpty())I=!0;if(I&&J!==q0)Q+=X.param("callNewAccountGas")}else if(await $.stateManager.getAccount(j)===void 0)Q+=X.param("callNewAccountGas");let D=h7(Y,$.interpreter.getGasLeft()-Q,$,X);if(D>$.interpreter.getGasLeft()-Q)$$(G0.errorMessages.OUT_OF_GAS);if(Q>$.interpreter.getGasLeft())$$(G0.errorMessages.OUT_OF_GAS);return $.messageGasLimit=D,Q}],[242,async function($,Q,X){let[Y,Z,J,q,G,z,M]=$.stack.peek(7),j=r$(Z);Q+=q8($,q,G,X),Q+=q8($,z,M,X);let P=!0;if((X.isActivatedEIP(6800)||X.isActivatedEIP(7864))&&$.interpreter._evm.getPrecompile(j)===void 0){let A=$.env.accessWitness.readAccountBasicData(j);Q+=A,P=A===q0}if(X.isActivatedEIP(2929))Q+=bX($,r$(Z).bytes,X,P);if(X.isActivatedEIP(7702))Q+=await C2($,X,j,P);if(J!==q0)Q+=X.param("callValueTransferGas");let D=h7(Y,$.interpreter.getGasLeft()-Q,$,X);if(D>$.interpreter.getGasLeft()-Q)$$(G0.errorMessages.OUT_OF_GAS);return $.messageGasLimit=D,Q}],[243,async function($,Q,X){let[Y,Z]=$.stack.peek(2);return Q+=q8($,Y,Z,X),Q}],[244,async function($,Q,X){let[Y,Z,J,q,G,z]=$.stack.peek(6),M=r$(Z);Q+=q8($,J,q,X),Q+=q8($,G,z,X);let j=!0;if((X.isActivatedEIP(6800)||X.isActivatedEIP(7864))&&$.interpreter._evm.getPrecompile(M)===void 0){let D=$.env.accessWitness.readAccountBasicData(M);Q+=D,j=D===q0}if(X.isActivatedEIP(2929))Q+=bX($,r$(Z).bytes,X,j);if(X.isActivatedEIP(7702))Q+=await C2($,X,M,j);let P=h7(Y,$.interpreter.getGasLeft()-Q,$,X);if(P>$.interpreter.getGasLeft()-Q)$$(G0.errorMessages.OUT_OF_GAS);return $.messageGasLimit=P,Q}],[245,async function($,Q,X){if($.interpreter.isStatic())$$(G0.errorMessages.STATIC_STATE_CHANGE);let[Y,Z,J,q]=$.stack.peek(4);if(Q+=q8($,Z,J,X),X.isActivatedEIP(2929))Q+=bX($,$.interpreter.getAddress().bytes,X,!1);if(X.isActivatedEIP(3860))Q+=(J+d4)/i8*X.param("initCodeWordGas");Q+=X.param("keccak256WordGas")*lJ(J,i8);let G=$.interpreter.getGasLeft()-Q;return G=h7(G,G,$,X),$.messageGasLimit=G,Q}],[248,async function($,Q,X){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);let[Y,Z,J,q]=$.stack.peek(4);if($.interpreter.isStatic()&&q!==q0)$$(G0.errorMessages.STATIC_STATE_CHANGE);if(q>q0)Q+=X.param("callValueTransferGas");if(Y>xS)$$(N0.INVALID_EXTCALL_TARGET);Q+=q8($,Z,J,X);let G=r$(Y);if(Q+=bX($,G.bytes,X),q>q0){let A=await $.stateManager.getAccount(G);if(A===void 0||A.isEmpty())Q+=X.param("callNewAccountGas")}let z=X.param("minRetainedGas"),M=X.param("minCalleeGas"),j=$.interpreter.getGasLeft()-Q,P=j/g7,D;if(P<z)D=j-z;else D=j-P;if($.env.depth>=Number(X.param("stackLimit"))||$.env.contract.balance<q||D<M)D=-D$;return $.messageGasLimit=D,Q}],[249,async function($,Q,X){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);let[Y,Z,J]=$.stack.peek(3);if(Y>xS)$$(N0.INVALID_EXTCALL_TARGET);Q+=q8($,Z,J,X);let q=r$(Y);Q+=bX($,q.bytes,X);let G=X.param("minRetainedGas"),z=X.param("minCalleeGas"),M=$.interpreter.getGasLeft()-Q,j=M/g7,P;if(j<G)P=M-G;else P=M-j;if($.env.depth>=Number(X.param("stackLimit"))||P<z)P=-D$;return $.messageGasLimit=P,Q}],[250,async function($,Q,X){let[Y,Z,J,q,G,z]=$.stack.peek(6);Q+=q8($,J,q,X),Q+=q8($,G,z,X);let M=!0,j=r$(Z);if((X.isActivatedEIP(6800)||X.isActivatedEIP(7864))&&$.interpreter._evm.getPrecompile(j)===void 0){let D=$.env.accessWitness.readAccountBasicData(j);Q+=D,M=D===q0}if(X.isActivatedEIP(2929))Q+=bX($,r$(Z).bytes,X,M);if(X.isActivatedEIP(7702))Q+=await C2($,X,r$(Z),M);let P=h7(Y,$.interpreter.getGasLeft()-Q,$,X);return $.messageGasLimit=P,Q}],[251,async function($,Q,X){if($.env.eof===void 0)$$(G0.errorMessages.INVALID_OPCODE);let[Y,Z,J]=$.stack.peek(3);if(Y>xS)$$(N0.INVALID_EXTCALL_TARGET);Q+=q8($,Z,J,X);let q=r$(Y);Q+=bX($,q.bytes,X);let G=X.param("minRetainedGas"),z=X.param("minCalleeGas"),M=$.interpreter.getGasLeft()-Q,j=M/g7,P;if(j<G)P=M-G;else P=M-j;if($.env.depth>=Number(X.param("stackLimit"))||P<z)P=-D$;return $.messageGasLimit=P,Q}],[253,async function($,Q,X){let[Y,Z]=$.stack.peek(2);return Q+=q8($,Y,Z,X),Q}],[255,async function($,Q,X){if($.interpreter.isStatic())$$(G0.errorMessages.STATIC_STATE_CHANGE);let Y=$.stack.peek()[0],Z=r$(Y),J=$.interpreter.getAddress(),q=!1,G=await $.interpreter.getExternalBalance(J);if(X.gteHardfork(j0.SpuriousDragon)){if(G>q0){let M=await $.stateManager.getAccount(Z);if(M===void 0||M.isEmpty())q=!0}}else if(X.gteHardfork(j0.TangerineWhistle)){if(await $.stateManager.getAccount(Z)===void 0)q=!0}if(q)Q+=X.param("callNewAccountGas");let z=!0;if((X.isActivatedEIP(6800)||X.isActivatedEIP(7864))&&$.env.chargeCodeAccesses===!0){if(Q+=$.env.accessWitness.readAccountBasicData(J),G>q0)Q+=$.env.accessWitness.writeAccountBasicData(J);let M=$.env.accessWitness.readAccountBasicData(Z);if(G>q0)M+=$.env.accessWitness.writeAccountBasicData(Z);Q+=M,z=M===q0}if(X.isActivatedEIP(2929))Q+=bX($,Z.bytes,X,z,!0);return Q}]]),mP0=L2.get(160);for(let $=161;$<=164;$++)L2.set($,mP0)});class S00{constructor({code:$,name:Q,fullName:X,fee:Y,isAsync:Z,dynamicGas:J}){this.code=$,this.name=Q,this.fullName=X,this.fee=Y,this.feeBigInt=BigInt(Y),this.isAsync=Z,this.dynamicGas=J,this.isInvalid=this.name==="INVALID",Object.freeze(this)}}function lP0($){let Q=new Map;for(let[X,Y]of Object.entries($)){let Z=parseInt(X,10);if(isNaN(Y.fee))Y.fee=0;Q.set(Z,new S00({code:Z,fullName:R00(Z,Y.name),...Y}))}return Q}function E00($,Q){let X={...cP0},Y=new Map(uJ),Z=new Map(L2);for(let z=0;z<fS.length;z++)if($.gteHardfork(fS[z].hardfork))X={...X,...fS[z].opcodes};for(let z of pP0)if($.isActivatedEIP(z.eip))X={...X,...z.opcodes};for(let z in X){let M=Number($.param(`${X[z].name.toLowerCase()}Gas`));if(M===void 0)throw h0(`base fee not defined for: ${X[z].name}`);X[z].fee=M}if(Q)for(let z of Q){let M=z;if(!L00(M)){delete X[M.opcode];continue}let j={[M.opcode]:{name:M.opcodeName,isAsync:!0,dynamicGas:M.gasFunction!==void 0,fee:M.baseFee,feeBigInt:BigInt(M.baseFee)}};if(X={...X,...j},M.gasFunction!==void 0)Z.set(M.opcode,M.gasFunction);Y.set(M.opcode,M.logicFunction)}let J=lP0(X),q=[];for(let[z,M]of J){let j=Z.get(z),P=Y.get(z);q[z]={opcodeInfo:M,opHandler:P,gasHandler:j}}let G=q[254];for(let z=0;z<=255;z++)if(q[z]===void 0)q[z]=G;return{dynamicGasHandlers:Z,handlers:Y,opcodes:J,opcodeMap:q}}var R0=($)=>{return{name:$,isAsync:!1,dynamicGas:!1}},OY=($)=>{return{name:$,isAsync:!1,dynamicGas:!0}},fY=($)=>{return{name:$,isAsync:!0,dynamicGas:!1}},M8=($)=>{return{name:$,isAsync:!0,dynamicGas:!0}},cP0,fS,pP0;var _00=y(()=>{qX();R$();ES();B00();ZW();qW();cP0={0:R0("STOP"),1:R0("ADD"),2:R0("MUL"),3:R0("SUB"),4:R0("DIV"),5:R0("SDIV"),6:R0("MOD"),7:R0("SMOD"),8:R0("ADDMOD"),9:R0("MULMOD"),10:OY("EXP"),11:R0("SIGNEXTEND"),16:R0("LT"),17:R0("GT"),18:R0("SLT"),19:R0("SGT"),20:R0("EQ"),21:R0("ISZERO"),22:R0("AND"),23:R0("OR"),24:R0("XOR"),25:R0("NOT"),26:R0("BYTE"),32:OY("KECCAK256"),48:fY("ADDRESS"),49:M8("BALANCE"),50:fY("ORIGIN"),51:fY("CALLER"),52:fY("CALLVALUE"),53:fY("CALLDATALOAD"),54:fY("CALLDATASIZE"),55:M8("CALLDATACOPY"),56:R0("CODESIZE"),57:OY("CODECOPY"),58:R0("GASPRICE"),59:M8("EXTCODESIZE"),60:M8("EXTCODECOPY"),64:fY("BLOCKHASH"),65:fY("COINBASE"),66:fY("TIMESTAMP"),67:fY("NUMBER"),68:fY("DIFFICULTY"),69:fY("GASLIMIT"),80:R0("POP"),81:OY("MLOAD"),82:OY("MSTORE"),83:OY("MSTORE8"),84:M8("SLOAD"),85:M8("SSTORE"),86:R0("JUMP"),87:R0("JUMPI"),88:R0("PC"),89:R0("MSIZE"),90:R0("GAS"),91:R0("JUMPDEST"),96:R0("PUSH"),97:R0("PUSH"),98:R0("PUSH"),99:R0("PUSH"),100:R0("PUSH"),101:R0("PUSH"),102:R0("PUSH"),103:R0("PUSH"),104:R0("PUSH"),105:R0("PUSH"),106:R0("PUSH"),107:R0("PUSH"),108:R0("PUSH"),109:R0("PUSH"),110:R0("PUSH"),111:R0("PUSH"),112:R0("PUSH"),113:R0("PUSH"),114:R0("PUSH"),115:R0("PUSH"),116:R0("PUSH"),117:R0("PUSH"),118:R0("PUSH"),119:R0("PUSH"),120:R0("PUSH"),121:R0("PUSH"),122:R0("PUSH"),123:R0("PUSH"),124:R0("PUSH"),125:R0("PUSH"),126:R0("PUSH"),127:R0("PUSH"),128:R0("DUP"),129:R0("DUP"),130:R0("DUP"),131:R0("DUP"),132:R0("DUP"),133:R0("DUP"),134:R0("DUP"),135:R0("DUP"),136:R0("DUP"),137:R0("DUP"),138:R0("DUP"),139:R0("DUP"),140:R0("DUP"),141:R0("DUP"),142:R0("DUP"),143:R0("DUP"),144:R0("SWAP"),145:R0("SWAP"),146:R0("SWAP"),147:R0("SWAP"),148:R0("SWAP"),149:R0("SWAP"),150:R0("SWAP"),151:R0("SWAP"),152:R0("SWAP"),153:R0("SWAP"),154:R0("SWAP"),155:R0("SWAP"),156:R0("SWAP"),157:R0("SWAP"),158:R0("SWAP"),159:R0("SWAP"),160:OY("LOG"),161:OY("LOG"),162:OY("LOG"),163:OY("LOG"),164:OY("LOG"),240:M8("CREATE"),241:M8("CALL"),242:M8("CALLCODE"),243:OY("RETURN"),254:R0("INVALID"),255:M8("SELFDESTRUCT")},fS=[{hardfork:j0.Homestead,opcodes:{244:M8("DELEGATECALL")}},{hardfork:j0.TangerineWhistle,opcodes:{84:M8("SLOAD"),241:M8("CALL"),242:M8("CALLCODE"),59:M8("EXTCODESIZE"),60:M8("EXTCODECOPY"),244:M8("DELEGATECALL"),255:M8("SELFDESTRUCT"),49:M8("BALANCE")}},{hardfork:j0.Byzantium,opcodes:{253:OY("REVERT"),250:M8("STATICCALL"),61:fY("RETURNDATASIZE"),62:M8("RETURNDATACOPY")}},{hardfork:j0.Constantinople,opcodes:{27:R0("SHL"),28:R0("SHR"),29:R0("SAR"),63:M8("EXTCODEHASH"),245:M8("CREATE2")}},{hardfork:j0.Istanbul,opcodes:{70:R0("CHAINID"),71:R0("SELFBALANCE")}},{hardfork:j0.Paris,opcodes:{68:fY("PREVRANDAO")}}],pP0=[{eip:663,opcodes:{230:R0("DUPN"),231:R0("SWAPN"),232:R0("EXCHANGE")}},{eip:1153,opcodes:{92:R0("TLOAD"),93:R0("TSTORE")}},{eip:3198,opcodes:{72:R0("BASEFEE")}},{eip:3855,opcodes:{95:R0("PUSH0")}},{eip:4200,opcodes:{224:R0("RJUMP"),225:R0("RJUMPI"),226:R0("RJUMPV")}},{eip:4750,opcodes:{227:R0("CALLF"),228:R0("RETF")}},{eip:4844,opcodes:{73:R0("BLOBHASH")}},{eip:5656,opcodes:{94:OY("MCOPY")}},{eip:6206,opcodes:{229:R0("JUMPF")}},{eip:7069,opcodes:{247:R0("RETURNDATALOAD"),248:M8("EXTCALL"),249:M8("EXTDELEGATECALL"),251:M8("EXTSTATICCALL")}},{eip:7480,opcodes:{208:R0("DATALOAD"),209:R0("DATALOADN"),210:R0("DATASIZE"),211:OY("DATACOPY")}},{eip:7516,opcodes:{74:R0("BLOBBASEFEE")}},{eip:7620,opcodes:{236:M8("EOFCREATE"),238:M8("RETURNCONTRACT")}}]});var vS=y(()=>{_00();ES();ZW()});class gS{constructor($){this._len=0,this._store=[],this._maxHeight=$??1024}get length(){return this._len}push($){if(this._len>=this._maxHeight)throw new G0(G0.errorMessages.STACK_OVERFLOW);this._store[this._len++]=$}pop(){if(this._len<1)throw new G0(G0.errorMessages.STACK_UNDERFLOW);return this._store[--this._len]}popN($=1){if(this._len<$)throw new G0(G0.errorMessages.STACK_UNDERFLOW);if($===0)return[];let Q=Array($),X=this._store;for(let Y=0;Y<$;Y++)Q[Y]=X[--this._len];return Q}peek($=1){let Q=Array($),X=this._len;for(let Y=0;Y<$;Y++){let Z=--X;if(Z<0)throw new G0(G0.errorMessages.STACK_UNDERFLOW);Q[Y]=this._store[Z]}return Q}swap($){if(this._len<=$)throw new G0(G0.errorMessages.STACK_UNDERFLOW);let Q=this._len-1,X=Q-$,Y=this._store,Z=Y[Q];Y[Q]=Y[X],Y[X]=Z}dup($){let Q=this._len;if(Q<$)throw new G0(G0.errorMessages.STACK_UNDERFLOW);if(Q>=this._maxHeight)throw new G0(G0.errorMessages.STACK_OVERFLOW);let X=Q-$;this._store[this._len++]=this._store[X]}exchange($,Q){let X=this._len-1,Y=X-$,Z=X-Q;if(Y<0||Z<0)throw new G0(G0.errorMessages.STACK_UNDERFLOW);let J=this._store[Z];this._store[Z]=this._store[Y],this._store[Y]=J}getStack(){return this._store.slice(0,this._len)}}var k00=y(()=>{YQ()});class bS{constructor($,Q,X,Y,Z,J,q,G){if(this.opDebuggers={},this._evm=$,this._stateManager=Q,this.common=this._evm.common,this.common.consensusType()==="poa"&&this._evm._optsCached.cliqueSigner===void 0)throw h0("Must include cliqueSigner function if clique/poa is being used for consensus type");this._runState={programCounter:0,opCode:254,memory:new IS,memoryWordCount:q0,highestMemCost:q0,stack:new gS,code:new Uint8Array(0),validJumps:Uint8Array.from([]),cachedPushes:{},stateManager:this._stateManager,blockchain:X,env:Y,shouldDoJumpAnalysis:!0,interpreter:this,gasRefund:Y.gasRefund,gasLeft:Z,returnBytes:new Uint8Array(0)},this.journal=J,this._env=Y,this._result={logs:[],returnValue:void 0,selfdestruct:new Set},this.profilerOpts=G,this.performanceLogger=q}async run($,Q={}){if(!this.common.isActivatedEIP(3540)||$[0]!==y7)this._runState.code=$;else if(this.common.isActivatedEIP(3540)){if($[1]!==$W)return{runState:this._runState,exceptionError:new G0(G0.errorMessages.INVALID_BYTECODE_RESULT)};if($[2]!==P2)return{runState:this._runState,exceptionError:new G0(G0.errorMessages.INVALID_EOF_FORMAT)};this._runState.code=$;let z=this._env.isCreate&&this._env.depth===0,M=z?PZ.TxInitmode:PZ.Default;try{D00(this._runState,M)}catch{return{runState:this._runState,exceptionError:new G0(G0.errorMessages.INVALID_EOF_FORMAT)}}if(z)try{RS(this._runState.code,this._evm,jZ.InitCode,PZ.TxInitmode)}catch{return{runState:this._runState,exceptionError:new G0(G0.errorMessages.INVALID_EOF_FORMAT)}}}this._runState.programCounter=Q.pc??this._runState.programCounter;let X=this._runState.programCounter;if(X!==0&&(X<0||X>=this._runState.code.length))throw h0("Internal error: program counter not in range");let Y,Z,J=!0,q,G;if(this.profilerOpts?.enabled===!0&&this.performanceLogger.hasTimer())q=this.performanceLogger.pauseTimer(),G=this.performanceLogger.startTimer("Overhead");while(this._runState.programCounter<this._runState.code.length){let z=this._runState.programCounter,M,j;if(J){if(M=this._runState.code[z],M===86||M===87||M===94){let{jumps:P,pushes:D,opcodesCached:A}=this._getValidJumpDestinations(this._runState.code);this._runState.validJumps=P,this._runState.cachedPushes=D,this._runState.shouldDoJumpAnalysis=!1,Z=A,J=!1}}else j=Z[z],M=j.opcodeInfo.code;if(M===254&&(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864))&&this._runState.env.chargeCodeAccesses===!0){let P=this._runState.interpreter.getAddress();if(!await this._runState.stateManager.checkChunkWitnessPresent(P,z))throw Error(`Invalid witness with missing codeChunk for pc=${z}`)}this._runState.opCode=M;try{if(G!==void 0)this.performanceLogger.pauseTimer();if(await this.runStep(j),G!==void 0)this.performanceLogger.unpauseTimer(G)}catch(P){if(this._runState.env.accessWitness?.revert(),G!==void 0)this.performanceLogger.unpauseTimer(G);if(!(("errorType"in P)&&P.errorType===O00))throw P;if(P.error!==G0.errorMessages.STOP)Y=P;break}}if(q!==void 0)this.performanceLogger.stopTimer(G,0),this.performanceLogger.unpauseTimer(q);return{runState:this._runState,exceptionError:Y}}async runStep($){let Q=$??this.lookupOpInfo(this._runState.opCode),X=Q.opcodeInfo,Y;if(this.profilerOpts?.enabled===!0)Y=this.performanceLogger.startTimer(X.name);let Z=X.feeBigInt,J=this._runState.memoryWordCount;try{if(X.dynamicGas)Z=await Q.gasHandler(this._runState,Z,this.common);if(this._evm.events.listenerCount("step")>0||this._evm.DEBUG)await this._runStepHook(Z,this.getGasLeft(),J);if((this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864))&&this._env.chargeCodeAccesses===!0){let G=this._runState.interpreter.getAddress(),z=this._runState.env.accessWitness.readAccountCodeChunks(G,this._runState.programCounter,this._runState.programCounter);Z+=z,_M(`codechunk accessed statelessGas=${z} (-> ${Z})`)}if(X.isInvalid)throw new G0(G0.errorMessages.INVALID_OPCODE);this.useGas(Z,X),this._runState.programCounter++;let q=Q.opHandler;if(X.isAsync)await q.apply(null,[this._runState,this.common]);else q.apply(null,[this._runState,this.common]);this._runState.env.accessWitness?.commit()}finally{if(this.profilerOpts?.enabled===!0)this.performanceLogger.stopTimer(Y,Number(Z),"opcodes",X.fee,Number(Z)-X.fee)}}lookupOpInfo($){return this._evm._opcodeMap[$]}async _runStepHook($,Q,X){let Y=this.lookupOpInfo(this._runState.opCode).opcodeInfo,Z=this._env.eof?.container.header.getSectionFromProgramCounter(this._runState.programCounter),J=void 0,q=void 0;if(Y.code===253){let[z,M]=this._runState.stack.peek(2);if(J=new Uint8Array(0),M!==q0)J=this._runState.memory.read(Number(z),Number(M))}if(iq[Y.code]!==void 0&&iq[Y.code].intermediates>0)q=this._runState.code.slice(this._runState.programCounter+1,this._runState.programCounter+1+iq[Y.code].intermediates);let G={pc:this._runState.programCounter,gasLeft:Q,gasRefund:this._runState.gasRefund,opcode:{name:Y.fullName,fee:Y.fee,dynamicFee:$,isAsync:Y.isAsync,code:Y.code},stack:this._runState.stack.getStack(),depth:this._env.depth,address:this._env.address,account:this._env.contract,memory:this._runState.memory._store.subarray(0,Number(X)*32),memoryWordCount:X,codeAddress:this._env.codeAddress,stateManager:this._runState.stateManager,eofSection:Z,immediate:q,error:J,eofFunctionDepth:this._env.eof!==void 0?this._env.eof?.eofRunState.returnStack.length+1:void 0};if(this._evm.DEBUG){let z=[];z=G.stack.map((P)=>{return X2(BigInt(P))});let M=G.opcode.name,j={pc:G.pc,op:M,gas:X2(G.gasLeft),gasCost:X2($),stack:z,depth:G.depth};if(!(M in this.opDebuggers))this.opDebuggers[M]=yS.default(`evm:ops:${M}`);this.opDebuggers[M](JSON.stringify(j))}await this._evm._emit("step",G)}_getValidJumpDestinations($){let Q=new Uint8Array($.length),X={},Y=Array($.length);for(let Z=0;Z<$.length;Z++){let J=$[Z];if(Y[Z]=this.lookupOpInfo(J),J<=127){if(J>=96){let q=J-95,G=$.subarray(Z+1,Z+J-94);if(G.length<q)G=S8(G,q);let z=z$(G);X[Z+1]=z,Z+=q}else if(J===91)Q[Z]=1}}return{jumps:Q,pushes:X,opcodesCached:Y}}useGas($,Q){if(this._runState.gasLeft-=$,this._evm.DEBUG){let X="";if(typeof Q==="string")X=Q+": ";else if(Q!==void 0)X=`${Q.name} fee: `;_M(`${X}used ${$} gas (-> ${this._runState.gasLeft})`)}if(this._runState.gasLeft<q0)this._runState.gasLeft=q0,$$(G0.errorMessages.OUT_OF_GAS)}refundGas($,Q){if(this._evm.DEBUG)_M(`${typeof Q==="string"?Q+": ":""}refund ${$} gas (-> ${this._runState.gasRefund})`);this._runState.gasRefund+=$}subRefund($,Q){if(this._evm.DEBUG)_M(`${typeof Q==="string"?Q+": ":""}sub gas refund ${$} (-> ${this._runState.gasRefund})`);if(this._runState.gasRefund-=$,this._runState.gasRefund<q0)this._runState.gasRefund=q0,$$(G0.errorMessages.REFUND_EXHAUSTED)}addStipend($){if(this._evm.DEBUG)_M(`add stipend ${$} (-> ${this._runState.gasLeft})`);this._runState.gasLeft+=$}async getExternalBalance($){if($.equals(this._env.address))return this._env.contract.balance;let Q=await this._stateManager.getAccount($);if(!Q)Q=new VY;return Q.balance}async storageStore($,Q){await this._stateManager.putStorage(this._env.address,$,Q);let X=await this._stateManager.getAccount(this._env.address);if(!X)throw h0("could not read account while persisting memory");this._env.contract=X}async storageLoad($,Q=!1){if(Q)return this._stateManager.originalStorageCache.get(this._env.address,$);else return this._stateManager.getStorage(this._env.address,$)}transientStorageStore($,Q){return this._evm.transientStorage.put(this._env.address,$,Q)}transientStorageLoad($){return this._evm.transientStorage.get(this._env.address,$)}finish($){this._result.returnValue=$,$$(G0.errorMessages.STOP)}revert($){this._result.returnValue=$,$$(G0.errorMessages.REVERT)}getAddress(){return this._env.address}getSelfBalance(){return this._env.contract.balance}getCallValue(){return this._env.callValue}getCallData(){return this._env.callData}getCallDataSize(){return BigInt(this._env.callData.length)}getCaller(){return z$(this._env.caller.bytes)}getCodeSize(){return BigInt(this._env.code.length)}getCode(){return this._env.code}getGasLeft(){return this._runState.gasLeft}getReturnDataSize(){return BigInt(this._runState.returnBytes.length)}getReturnData(){return this._runState.returnBytes}isStatic(){return this._env.isStatic}getTxGasPrice(){return this._env.gasPrice}getTxOrigin(){return z$(this._env.origin.bytes)}getBlockNumber(){return this._env.block.header.number}getBlockCoinbase(){let $;if(this.common.consensusAlgorithm()===zq.Clique)$=this._evm._optsCached.cliqueSigner(this._env.block.header);else $=this._env.block.header.coinbase;return z$($.toBytes())}getBlockTimestamp(){return this._env.block.header.timestamp}getBlockDifficulty(){return this._env.block.header.difficulty}getBlockPrevRandao(){return z$(this._env.block.header.prevRandao)}getBlockGasLimit(){return this._env.block.header.gasLimit}getBlockBaseFee(){let $=this._env.block.header.baseFeePerGas;if($===void 0)throw h0("Block has no Base Fee");return $}getBlobBaseFee(){let $=this._env.block.header.getBlobGasPrice();if($===void 0)throw h0("Block has no Blob Base Fee");return $}getChainId(){return this.common.chainId()}async call($,Q,X,Y){let Z=new pJ({caller:this._env.address,gasLimit:$,to:Q,value:X,data:Y,isStatic:this._env.isStatic,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(Z)}async callCode($,Q,X,Y){let Z=new pJ({caller:this._env.address,gasLimit:$,to:this._env.address,codeAddress:Q,value:X,data:Y,isStatic:this._env.isStatic,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(Z)}async callStatic($,Q,X,Y){let Z=new pJ({caller:this._env.address,gasLimit:$,to:Q,value:X,data:Y,isStatic:!0,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(Z)}async callDelegate($,Q,X,Y){let Z=new pJ({caller:this._env.caller,gasLimit:$,to:this._env.address,codeAddress:Q,value:X,data:Y,isStatic:this._env.isStatic,delegatecall:!0,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(Z)}async _baseCall($){let Q=new Set(this._result.selfdestruct);$.selfdestruct=Q,$.gasRefund=this._runState.gasRefund,this._runState.returnBytes=new Uint8Array(0);let X;if(this.common.isActivatedEIP(6780))X=new Set(this._result.createdAddresses),$.createdAddresses=X;if(this._runState.returnBytes=new Uint8Array(0),this._env.depth>=Number(this.common.param("stackLimit"))||$.delegatecall!==!0&&this._env.contract.balance<$.value)return q0;let Y=await this._evm.runCall({message:$});if(Y.execResult.logs)this._result.logs=this._result.logs.concat(Y.execResult.logs);if(this.useGas(Y.execResult.executionGasUsed,"CALL, STATICCALL, DELEGATECALL, CALLCODE"),Y.execResult.returnValue!==void 0&&(!Y.execResult.exceptionError||Y.execResult.exceptionError.error===G0.errorMessages.REVERT))this._runState.returnBytes=Y.execResult.returnValue;if(!Y.execResult.exceptionError){for(let J of Q)this._result.selfdestruct.add(J);if(this.common.isActivatedEIP(6780))for(let J of X)this._result.createdAddresses.add(J);let Z=await this._stateManager.getAccount(this._env.address);if(!Z)throw h0("could not read contract account");this._env.contract=Z,this._runState.gasRefund=Y.execResult.gasRefund??q0}return this._getReturnCode(Y)}async create($,Q,X,Y,Z){let J=new Set(this._result.selfdestruct),q=this._env.address,G=this._env.depth+1;if(this._runState.returnBytes=new Uint8Array(0),this._env.depth>=Number(this.common.param("stackLimit"))||this._env.contract.balance<Q)return q0;if(this._env.contract.nonce>=Qe)return q0;if(this._env.contract.nonce+=D$,await this.journal.putAccount(this._env.address,this._env.contract),this.common.isActivatedEIP(3860)){if(X.length>Number(this.common.param("maxInitCodeSize"))&&this._evm.allowUnlimitedInitCodeSize===!1)return q0}let z=new pJ({caller:q,gasLimit:$,value:Q,data:X,eofCallData:Z,salt:Y,depth:G,selfdestruct:J,gasRefund:this._runState.gasRefund,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness}),M;if(this.common.isActivatedEIP(6780))M=new Set(this._result.createdAddresses),z.createdAddresses=M;let j=await this._evm.runCall({message:z});if(j.execResult.logs)this._result.logs=this._result.logs.concat(j.execResult.logs);if(this.useGas(j.execResult.executionGasUsed,"CREATE"),j.execResult.exceptionError&&j.execResult.exceptionError.error===G0.errorMessages.REVERT)this._runState.returnBytes=j.execResult.returnValue;if(!j.execResult.exceptionError||j.execResult.exceptionError.error===G0.errorMessages.CODESTORE_OUT_OF_GAS){for(let D of J)this._result.selfdestruct.add(D);if(this.common.isActivatedEIP(6780))for(let D of M)this._result.createdAddresses.add(D);let P=await this._stateManager.getAccount(this._env.address);if(!P)throw h0("could not read contract account");if(this._env.contract=P,this._runState.gasRefund=j.execResult.gasRefund??q0,j.createdAddress)return z$(j.createdAddress.bytes)}return this._getReturnCode(j,!0)}async create2($,Q,X,Y){return this.create($,Q,X,Y)}async eofcreate($,Q,X,Y,Z){return this.create($,Q,X,Y,Z)}async selfDestruct($){return this._selfDestruct($)}async _selfDestruct($){if(!this._result.selfdestruct.has(e0(this._env.address.bytes)))this.refundGas(this.common.param("selfdestructRefundGas"));this._result.selfdestruct.add(e0(this._env.address.bytes));let Q=g$($.bytes,this._env.address.bytes);if(!Q){let Y=await this._stateManager.getAccount($);if(!Y)Y=new VY;Y.balance+=this._env.contract.balance,await this.journal.putAccount($,Y)}let X=!this.common.isActivatedEIP(6780);if(!X){if(X=this._env.createdAddresses.has(this._env.address.toString()),!X)X=!Q}if(X)await this._stateManager.modifyAccountFields(this._env.address,{balance:q0});$$(G0.errorMessages.STOP)}log($,Q,X){if(Q<0||Q>4)$$(G0.errorMessages.OUT_OF_RANGE);if(X.length!==Q)$$(G0.errorMessages.INTERNAL_ERROR);let Y=[this._env.address.bytes,X,$];this._result.logs.push(Y)}_getReturnCode($,Q=!1){if(this._runState.env.eof===void 0||Q)if($.execResult.exceptionError)return q0;else return D$;else{if($.execResult.exceptionError!==void 0)if($.execResult.exceptionError.error===G0.errorMessages.REVERT)return D$;else return xY;return q0}}}var yS,_M;var x00=y(()=>{qX();R$();yS=RX(QX(),1);N2();j00();NS();YQ();H00();FS();vS();k00();HS();_M=yS.default("evm:gas")});class hS{constructor($,Q){this.DEBUG=typeof window==="undefined"?process?.env?.DEBUG?.includes("ethjs")??!1:!1,this._debug=f00.default("evm:journal"),this.cleanJournal(),this.journalHeight=0,this.stateManager=$,this.common=Q}startReportingAccessList(){this.accessList=new Map}startReportingPreimages(){this.preimages=new Map}async putAccount($,Q){return this.touchAddress($),this.stateManager.putAccount($,Q)}async deleteAccount($){this.touchAddress($),await this.stateManager.deleteAccount($)}touchAddress($){let Q=$.toString().slice(2);this.touchAccount(Q)}touchAccount($){if(this.preimages!==void 0){let Q=tt($);if(this.stateManager.getAppliedKey===void 0)throw h0("touchAccount: stateManager.getAppliedKey can not be undefined if preimage storing is enabled");let X=this.stateManager.getAppliedKey(Q);this.preimages.set(e0(X),Q)}if(!this.touched.has($))this.touched.add($),this.journalDiff[this.journalDiff.length-1][1][2].add($)}async commit(){this.journalHeight--,this.journalDiff.push([this.journalHeight,[new Set,new Map,new Set]]),await this.stateManager.commit()}async checkpoint(){this.journalHeight++,this.journalDiff.push([this.journalHeight,[new Set,new Map,new Set]]),await this.stateManager.checkpoint()}async revert(){let $;for(let Q=this.journalDiff.length-1;Q>=0;Q--){$=Q;let[X,Y]=this.journalDiff[Q];if(X<this.journalHeight)break;let Z=Y[0],J=Y[1],q=Y[2];for(let G of Z)if(this.journal.has(G))this.journal.delete(G);for(let[G,z]of J)if(this.journal.has(G)){let M=this.journal.get(G);for(let j of z)M.delete(j)}for(let G of q)if(G!==Ye)this.touched.delete(G)}this.journalDiff=this.journalDiff.slice(0,$+1),this.journalHeight--,await this.stateManager.revert()}cleanJournal(){this.journalHeight=0,this.journal=new Map,this.alwaysWarmJournal=new Map,this.touched=new Set,this.journalDiff=[[0,[new Set,new Map,new Set]]]}async cleanup(){if(this.common.gteHardfork(j0.SpuriousDragon))for(let $ of this.touched){let Q=new l9(d8(`0x${$}`)),X=await this.stateManager.getAccount(Q);if(X===void 0||X.isEmpty()){if(await this.deleteAccount(Q),this.DEBUG)this._debug(`Cleanup touched account address=${Q} (>= SpuriousDragon)`)}}this.cleanJournal(),delete this.accessList,delete this.preimages}addAlwaysWarmAddress($,Q=!1){let X=l4($);if(!this.alwaysWarmJournal.has(X))this.alwaysWarmJournal.set(X,new Set);if(Q&&this.accessList!==void 0){if(!this.accessList.has(X))this.accessList.set(X,new Set)}}addAlwaysWarmSlot($,Q,X=!1){let Y=l4($);this.addAlwaysWarmAddress(Y,X);let Z=this.alwaysWarmJournal.get(Y),J=l4(Q);if(Z.add(J),X&&this.accessList!==void 0)this.accessList.get(Y).add(J)}isWarmedAddress($){let Q=WY($);return this.journal.has(Q)||this.alwaysWarmJournal.has(Q)}addWarmedAddress($){let Q=WY($);if(!this.journal.has(Q))this.journal.set(Q,new Set),this.journalDiff[this.journalDiff.length-1][1][0].add(Q);if(this.accessList!==void 0){if(!this.accessList.has(Q))this.accessList.set(Q,new Set)}}isWarmedStorage($,Q){let X=WY($),Y=this.journal.get(X);if(Y===void 0){if(this.alwaysWarmJournal.has(X))return this.alwaysWarmJournal.get(X).has(WY(Q));return!1}if(Y.has(WY(Q)))return!0;else if(this.alwaysWarmJournal.has(X))return this.alwaysWarmJournal.get(X).has(WY(Q));return!1}addWarmedStorage($,Q){let X=WY($),Y=this.journal.get(X);if(Y===void 0)this.addWarmedAddress($),Y=this.journal.get(X);let Z=WY(Q);if(!Y.has(Z)){Y.add(Z);let q=this.journalDiff[this.journalDiff.length-1][1][1];if(!q.has(X))q.set(X,new Set);q.get(X).add(Z)}if(this.accessList!==void 0)this.accessList.get(X).add(Z)}}var f00;var v00=y(()=>{qX();R$();f00=RX(QX(),1)});var g00;var mS=y(()=>{g00={1:{maxRefundQuotient:2,basefeeGas:2,expGas:10,expByteGas:10,keccak256Gas:30,keccak256WordGas:6,sloadGas:50,sstoreSetGas:20000,sstoreResetGas:5000,sstoreRefundGas:15000,jumpdestGas:1,logGas:375,logDataGas:8,logTopicGas:375,createGas:32000,callGas:40,callStipendGas:2300,callValueTransferGas:9000,callNewAccountGas:25000,selfdestructRefundGas:24000,memoryGas:3,quadCoefficientDivGas:512,createDataGas:200,copyGas:3,ecRecoverGas:3000,sha256Gas:60,sha256WordGas:12,ripemd160Gas:600,ripemd160WordGas:120,identityGas:15,identityWordGas:3,stopGas:0,addGas:3,mulGas:5,subGas:3,divGas:5,sdivGas:5,modGas:5,smodGas:5,addmodGas:8,mulmodGas:8,signextendGas:5,ltGas:3,gtGas:3,sltGas:3,sgtGas:3,eqGas:3,iszeroGas:3,andGas:3,orGas:3,xorGas:3,notGas:3,byteGas:3,addressGas:2,balanceGas:20,originGas:2,callerGas:2,callvalueGas:2,calldataloadGas:3,calldatasizeGas:2,calldatacopyGas:3,codesizeGas:2,codecopyGas:3,gaspriceGas:2,extcodesizeGas:20,extcodecopyGas:20,blockhashGas:20,coinbaseGas:2,timestampGas:2,numberGas:2,difficultyGas:2,gaslimitGas:2,popGas:2,mloadGas:3,mstoreGas:3,mstore8Gas:3,sstoreGas:0,jumpGas:8,jumpiGas:10,pcGas:2,msizeGas:2,gasGas:2,pushGas:3,dupGas:3,swapGas:3,callcodeGas:40,returnGas:0,invalidGas:0,selfdestructGas:0,prevrandaoGas:0,stackLimit:1024},606:{delegatecallGas:40},608:{sloadGas:200,callGas:700,extcodesizeGas:700,extcodecopyGas:700,balanceGas:400,delegatecallGas:700,callcodeGas:700,selfdestructGas:5000},607:{expByteGas:50,maxCodeSize:24576},609:{modexpGquaddivisorGas:20,bn254AddGas:500,bn254MulGas:40000,bn254PairingGas:1e5,bn254PairingWordGas:80000,revertGas:0,staticcallGas:700,returndatasizeGas:2,returndatacopyGas:3},1013:{netSstoreNoopGas:200,netSstoreInitGas:20000,netSstoreCleanGas:5000,netSstoreDirtyGas:200,netSstoreClearRefundGas:15000,netSstoreResetRefundGas:4800,netSstoreResetClearRefundGas:19800,shlGas:3,shrGas:3,sarGas:3,extcodehashGas:400,create2Gas:32000},1716:{netSstoreNoopGas:null,netSstoreInitGas:null,netSstoreCleanGas:null,netSstoreDirtyGas:null,netSstoreClearRefundGas:null,netSstoreResetRefundGas:null,netSstoreResetClearRefundGas:null},1679:{blake2RoundGas:1,bn254AddGas:150,bn254MulGas:6000,bn254PairingGas:45000,bn254PairingWordGas:34000,sstoreSentryEIP2200Gas:2300,sstoreNoopEIP2200Gas:800,sstoreDirtyEIP2200Gas:800,sstoreInitEIP2200Gas:20000,sstoreInitRefundEIP2200Gas:19200,sstoreCleanEIP2200Gas:5000,sstoreCleanRefundEIP2200Gas:4200,sstoreClearRefundEIP2200Gas:15000,balanceGas:700,extcodehashGas:700,chainidGas:2,selfbalanceGas:5,sloadGas:800},663:{dupnGas:3,swapnGas:3,exchangeGas:3},1153:{tstoreGas:100,tloadGas:100},1559:{elasticityMultiplier:2},2565:{modexpGquaddivisorGas:3},2537:{bls12381G1AddGas:375,bls12381G1MulGas:12000,bls12381G2AddGas:600,bls12381G2MulGas:22500,bls12381PairingBaseGas:37700,bls12381PairingPerPairGas:32600,bls12381MapG1Gas:5500,bls12381MapG2Gas:23800},2929:{coldsloadGas:2100,coldaccountaccessGas:2600,warmstoragereadGas:100,sstoreCleanEIP2200Gas:2900,sstoreNoopEIP2200Gas:100,sstoreDirtyEIP2200Gas:100,sstoreInitRefundEIP2200Gas:19900,sstoreCleanRefundEIP2200Gas:4900,callGas:0,callcodeGas:0,delegatecallGas:0,staticcallGas:0,balanceGas:0,extcodesizeGas:0,extcodecopyGas:0,extcodehashGas:0,sloadGas:0,sstoreGas:0},2935:{historyStorageAddress:"0x0000F90827F1C53A10CB7A02335B175320002935",historyServeWindow:8192,systemAddress:"0xfffffffffffffffffffffffffffffffffffffffe"},3198:{basefeeGas:2},3529:{maxRefundQuotient:5,selfdestructRefundGas:0,sstoreClearRefundEIP2200Gas:4800},3855:{push0Gas:2},3860:{initCodeWordGas:2,maxInitCodeSize:49152},4200:{rjumpGas:2,rjumpiGas:4,rjumpvGas:4},4399:{prevrandaoGas:2},4750:{callfGas:5,retfGas:3},4844:{kzgPointEvaluationPrecompileGas:50000,blobhashGas:3,blobCommitmentVersionKzg:1,fieldElementsPerBlob:4096},5656:{mcopyGas:3},6206:{jumpfGas:5},6800:{createGas:1000,coldsloadGas:0},7069:{extcallGas:0,extdelegatecallGas:0,extstaticcallGas:0,returndataloadGas:3,minRetainedGas:5000,minCalleeGas:2300},7480:{dataloadGas:4,dataloadnGas:3,datasizeGas:2,datacopyGas:3},7516:{blobbasefeeGas:2},7620:{eofcreateGas:32000,returncontractGas:0}}});var l$=($,Q,X)=>{if($._debug!==void 0)$._debug(`Run ${X} precompile data=${s6($.data)} length=${$.data.length} gasLimit=${$.gasLimit} gasUsed=${Q}`);if($.gasLimit<Q){if($._debug!==void 0)$._debug(`${X} failed: OOG`);return!1}return!0},m7=($,Q,X)=>{if($.data.length!==Q){if($._debug!==void 0)$._debug(`${X} failed: Invalid input length length=${$.data.length} (expected: ${Q})`);return!1}return!0},c7=($,Q,X)=>{if($.data.length%Q!==0){if($._debug!==void 0)$._debug(`${X} failed: Invalid input length length=${$.data.length} (expected: ${Q}*k bytes)`);return!1}return!0};var pQ=y(()=>{R$()});async function cS($){let Q=y$("0a");if($.common.customCrypto?.kzg===void 0)throw h0("kzg not initialized");let X=$.common.param("kzgPointEvaluationPrecompileGas");if(!l$($,X,Q))return j$($.gasLimit);if($.data.length!==192)return P$(new G0(G0.errorMessages.INVALID_INPUT_LENGTH),$.gasLimit);let Y=Number($.common.param("blobCommitmentVersionKzg")),Z=$.common.param("fieldElementsPerBlob"),J=e0($.data.subarray(0,32)),q=e0($.data.subarray(32,64)),G=e0($.data.subarray(64,96)),z=e0($.data.subarray(96,144)),M=e0($.data.subarray(144,192));if(ye(z,Y)!==J){if($._debug!==void 0)$._debug(`${Q} failed: INVALID_COMMITMENT`);return P$(new G0(G0.errorMessages.INVALID_COMMITMENT),$.gasLimit)}if($._debug!==void 0)$._debug(`${Q}: proof verification with commitment=${z} z=${q} y=${G} kzgProof=${M}`);try{if($.common.customCrypto?.kzg?.verifyProof(z,q,G,M)===!1)return P$(new G0(G0.errorMessages.INVALID_PROOF),$.gasLimit)}catch(P){if(P.message.includes("C_KZG_BADARGS")===!0===!0===!0){if($._debug!==void 0)$._debug(`${Q} failed: INVALID_INPUTS`);return P$(new G0(G0.errorMessages.INVALID_INPUTS),$.gasLimit)}if($._debug!==void 0)$._debug(`${Q} failed: Unknown error - ${P.message}`);return P$(new G0(G0.errorMessages.REVERT),$.gasLimit)}let j=M$(N$(Z),32);if($._debug!==void 0)$._debug(`${Q} return fieldElements=${e0(j)} modulus=${e0(y00)}`);return{executionGasUsed:X,returnValue:J8(j,y00)}}var uP0,y00;var b00=y(()=>{R$();YQ();TQ();e8();pQ();uP0=BigInt("52435875175126190479447740508185965837690552500527637822603658699938581184513"),y00=M$(N$(uP0),32)});var w2,HZ=128,q9=256,pS,lS,h00,m00,c00,p00;var uS=y(()=>{R$();w2=BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),pS=new Uint8Array(HZ),lS=new Uint8Array(q9),h00=new Uint8Array(32),m00=J8(new Uint8Array(31),d8("0x01")),c00=[[1,1000],[2,949],[3,848],[4,797],[5,764],[6,750],[7,738],[8,728],[9,719],[10,712],[11,705],[12,698],[13,692],[14,687],[15,682],[16,677],[17,673],[18,669],[19,665],[20,661],[21,658],[22,654],[23,651],[24,648],[25,645],[26,642],[27,640],[28,637],[29,635],[30,632],[31,630],[32,627],[33,625],[34,623],[35,621],[36,619],[37,617],[38,615],[39,613],[40,611],[41,609],[42,608],[43,606],[44,604],[45,603],[46,601],[47,599],[48,598],[49,596],[50,595],[51,593],[52,592],[53,591],[54,589],[55,588],[56,586],[57,585],[58,584],[59,582],[60,581],[61,580],[62,579],[63,577],[64,576],[65,575],[66,574],[67,573],[68,572],[69,570],[70,569],[71,568],[72,567],[73,566],[74,565],[75,564],[76,563],[77,562],[78,561],[79,560],[80,559],[81,558],[82,557],[83,556],[84,555],[85,554],[86,553],[87,552],[88,551],[89,550],[90,549],[91,548],[92,547],[93,547],[94,546],[95,545],[96,544],[97,543],[98,542],[99,541],[100,540],[101,540],[102,539],[103,538],[104,537],[105,536],[106,536],[107,535],[108,534],[109,533],[110,532],[111,532],[112,531],[113,530],[114,529],[115,528],[116,528],[117,527],[118,526],[119,525],[120,525],[121,524],[122,523],[123,522],[124,522],[125,521],[126,520],[127,520],[128,519]],p00=[[1,1000],[2,1000],[3,923],[4,884],[5,855],[6,832],[7,812],[8,796],[9,782],[10,770],[11,759],[12,749],[13,740],[14,732],[15,724],[16,717],[17,711],[18,704],[19,699],[20,693],[21,688],[22,683],[23,679],[24,674],[25,670],[26,666],[27,663],[28,659],[29,655],[30,652],[31,649],[32,646],[33,643],[34,640],[35,637],[36,634],[37,632],[38,629],[39,627],[40,624],[41,622],[42,620],[43,618],[44,615],[45,613],[46,611],[47,609],[48,607],[49,606],[50,604],[51,602],[52,600],[53,598],[54,597],[55,595],[56,593],[57,592],[58,590],[59,589],[60,587],[61,586],[62,584],[63,583],[64,582],[65,580],[66,579],[67,578],[68,576],[69,575],[70,574],[71,573],[72,571],[73,570],[74,569],[75,568],[76,567],[77,566],[78,565],[79,563],[80,562],[81,561],[82,560],[83,559],[84,558],[85,557],[86,556],[87,555],[88,554],[89,553],[90,552],[91,552],[92,551],[93,550],[94,549],[95,548],[96,547],[97,546],[98,545],[99,545],[100,544],[101,543],[102,542],[103,541],[104,541],[105,540],[106,539],[107,538],[108,537],[109,537],[110,536],[111,535],[112,535],[113,534],[114,533],[115,532],[116,532],[117,531],[118,530],[119,530],[120,529],[121,528],[122,528],[123,527],[124,526],[125,526],[126,525],[127,524],[128,524]]});var a4;var l00=y(()=>{a4=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function dP0($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function T2($){if(!Number.isSafeInteger($)||$<0)throw new Error("positive integer expected, got "+$)}function t4($,...Q){if(!dP0($))throw new Error("Uint8Array expected");if(Q.length>0&&!Q.includes($.length))throw new Error("Uint8Array expected of length "+Q+", got length="+$.length)}function u00($){if(typeof $!=="function"||typeof $.create!=="function")throw new Error("Hash should be wrapped by utils.createHasher");T2($.outputLen),T2($.blockLen)}function GW($,Q=!0){if($.destroyed)throw new Error("Hash instance has been destroyed");if(Q&&$.finished)throw new Error("Hash#digest() has already been called")}function d00($,Q){t4($);let X=Q.outputLen;if($.length<X)throw new Error("digestInto() expects output buffer of length at least "+X)}function e4(...$){for(let Q=0;Q<$.length;Q++)$[Q].fill(0)}function I2($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function d9($,Q){return $<<32-Q|$>>>Q}function iP0($){if(typeof $!=="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function kM($){if(typeof $==="string")$=iP0($);return t4($),$}function i00(...$){let Q=0;for(let Y=0;Y<$.length;Y++){let Z=$[Y];t4(Z),Q+=Z.length}let X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}class xM{}function n00($){let Q=(Y)=>$().update(kM(Y)).digest(),X=$();return Q.outputLen=X.outputLen,Q.blockLen=X.blockLen,Q.create=()=>$(),Q}function zW($=32){if(a4&&typeof a4.getRandomValues==="function")return a4.getRandomValues(new Uint8Array($));if(a4&&typeof a4.randomBytes==="function")return Uint8Array.from(a4.randomBytes($));throw new Error("crypto.getRandomValues must be defined")}var p7=y(()=>{l00();/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */});function nP0($,Q,X,Y){if(typeof $.setBigUint64==="function")return $.setBigUint64(Q,X,Y);let Z=BigInt(32),J=BigInt(4294967295),q=Number(X>>Z&J),G=Number(X&J),z=Y?4:0,M=Y?0:4;$.setUint32(Q+z,q,Y),$.setUint32(Q+M,G,Y)}function o00($,Q,X){return $&Q^~$&X}function r00($,Q,X){return $&Q^$&X^Q&X}var dS,sq;var s00=y(()=>{p7();dS=class dS extends xM{constructor($,Q,X,Y){super();this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=$,this.outputLen=Q,this.padOffset=X,this.isLE=Y,this.buffer=new Uint8Array($),this.view=I2(this.buffer)}update($){GW(this),$=kM($),t4($);let{view:Q,buffer:X,blockLen:Y}=this,Z=$.length;for(let J=0;J<Z;){let q=Math.min(Y-this.pos,Z-J);if(q===Y){let G=I2($);for(;Y<=Z-J;J+=Y)this.process(G,J);continue}if(X.set($.subarray(J,J+q),this.pos),this.pos+=q,J+=q,this.pos===Y)this.process(Q,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){GW(this),d00($,this),this.finished=!0;let{buffer:Q,view:X,blockLen:Y,isLE:Z}=this,{pos:J}=this;if(Q[J++]=128,e4(this.buffer.subarray(J)),this.padOffset>Y-J)this.process(X,0),J=0;for(let j=J;j<Y;j++)Q[j]=0;nP0(X,Y-8,BigInt(this.length*8),Z),this.process(X,0);let q=I2($),G=this.outputLen;if(G%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let z=G/4,M=this.get();if(z>M.length)throw new Error("_sha2: outputLen bigger than state");for(let j=0;j<z;j++)q.setUint32(4*j,M[j],Z)}digest(){let{buffer:$,outputLen:Q}=this;this.digestInto($);let X=$.slice(0,Q);return this.destroy(),X}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:Q,buffer:X,length:Y,finished:Z,destroyed:J,pos:q}=this;if($.destroyed=J,$.finished=Z,$.length=Y,$.pos=q,Y%Q)$.buffer.set(X);return $}clone(){return this._cloneInto()}};sq=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225])});var oP0,l7,a00,$K;var iS=y(()=>{s00();p7();oP0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l7=new Uint32Array(64);a00=class a00 extends dS{constructor($=32){super(64,$,8,!1);this.A=sq[0]|0,this.B=sq[1]|0,this.C=sq[2]|0,this.D=sq[3]|0,this.E=sq[4]|0,this.F=sq[5]|0,this.G=sq[6]|0,this.H=sq[7]|0}get(){let{A:$,B:Q,C:X,D:Y,E:Z,F:J,G:q,H:G}=this;return[$,Q,X,Y,Z,J,q,G]}set($,Q,X,Y,Z,J,q,G){this.A=$|0,this.B=Q|0,this.C=X|0,this.D=Y|0,this.E=Z|0,this.F=J|0,this.G=q|0,this.H=G|0}process($,Q){for(let j=0;j<16;j++,Q+=4)l7[j]=$.getUint32(Q,!1);for(let j=16;j<64;j++){let P=l7[j-15],D=l7[j-2],A=d9(P,7)^d9(P,18)^P>>>3,I=d9(D,17)^d9(D,19)^D>>>10;l7[j]=I+l7[j-7]+A+l7[j-16]|0}let{A:X,B:Y,C:Z,D:J,E:q,F:G,G:z,H:M}=this;for(let j=0;j<64;j++){let P=d9(q,6)^d9(q,11)^d9(q,25),D=M+P+o00(q,G,z)+oP0[j]+l7[j]|0,I=(d9(X,2)^d9(X,13)^d9(X,22))+r00(X,Y,Z)|0;M=z,z=G,G=q,q=J+D|0,J=Z,Z=Y,Y=X,X=D+I|0}X=X+this.A|0,Y=Y+this.B|0,Z=Z+this.C|0,J=J+this.D|0,q=q+this.E|0,G=G+this.F|0,z=z+this.G|0,M=M+this.H|0,this.set(X,Y,Z,J,q,G,z,M)}roundClean(){e4(l7)}destroy(){this.set(0,0,0,0,0,0,0,0),e4(this.buffer)}};$K=n00(()=>new a00)});function KW($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function tq($){if(!KW($))throw new Error("Uint8Array expected")}function UW($,Q){if(typeof Q!=="boolean")throw new Error($+" boolean expected, got "+Q)}function fM($){let Q=$.toString(16);return Q.length&1?"0"+Q:Q}function $$0($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);return $===""?rS:BigInt("0x"+$)}function eq($){if(tq($),Q$0)return $.toHex();let Q="";for(let X=0;X<$.length;X++)Q+=rP0[$[X]];return Q}function t00($){if($>=aq._0&&$<=aq._9)return $-aq._0;if($>=aq.A&&$<=aq.F)return $-(aq.A-10);if($>=aq.a&&$<=aq.f)return $-(aq.a-10);return}function vM($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(Q$0)return Uint8Array.fromHex($);let Q=$.length,X=Q/2;if(Q%2)throw new Error("hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=t00($.charCodeAt(J)),G=t00($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw new Error('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function IQ($){return $$0(eq($))}function sS($){return tq($),$$0(eq(Uint8Array.from($).reverse()))}function n8($,Q){return vM($.toString(16).padStart(Q*2,"0"))}function aS($,Q){return n8($,Q).reverse()}function ZQ($,Q,X){let Y;if(typeof Q==="string")try{Y=vM(Q)}catch(J){throw new Error($+" must be hex string or Uint8Array, cause: "+J)}else if(KW(Q))Y=Uint8Array.from(Q);else throw new Error($+" must be hex string or Uint8Array");let Z=Y.length;if(typeof X==="number"&&Z!==X)throw new Error($+" of length "+X+" expected, got "+Z);return Y}function I8(...$){let Q=0;for(let Y=0;Y<$.length;Y++){let Z=$[Y];tq(Z),Q+=Z.length}let X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}function B2($){if(typeof $!=="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function S2($,Q,X){return nS($)&&nS(Q)&&nS(X)&&Q<=$&&$<X}function QK($,Q,X,Y){if(!S2(Q,X,Y))throw new Error("expected valid "+$+": "+X+" <= n < "+Y+", got "+Q)}function dJ($){let Q;for(Q=0;$>rS;$>>=F2,Q+=1);return Q}function E2($,Q){return $>>BigInt(Q)&F2}function X$0($,Q,X){if(typeof $!=="number"||$<2)throw new Error("hashLen must be a number");if(typeof Q!=="number"||Q<2)throw new Error("qByteLen must be a number");if(typeof X!=="function")throw new Error("hmacFn must be a function");let Y=oS($),Z=oS($),J=0,q=()=>{Y.fill(1),Z.fill(0),J=0},G=(...P)=>X(Z,Y,...P),z=(P=oS(0))=>{if(Z=G(e00([0]),P),Y=G(),P.length===0)return;Z=G(e00([1]),P),Y=G()},M=()=>{if(J++>=1000)throw new Error("drbg: tried 1000 values");let P=0,D=[];while(P<Q){Y=G();let A=Y.slice();D.push(A),P+=Y.length}return I8(...D)};return(P,D)=>{q(),z(P);let A=void 0;while(!(A=D(M())))z();return q(),A}}function $1($,Q,X={}){let Y=(Z,J,q)=>{let G=sP0[J];if(typeof G!=="function")throw new Error("invalid validator function");let z=$[Z];if(q&&z===void 0)return;if(!G(z,$))throw new Error("param "+String(Z)+" is invalid. Expected "+J+", got "+z)};for(let[Z,J]of Object.entries(Q))Y(Z,J,!1);for(let[Z,J]of Object.entries(X))Y(Z,J,!0);return $}function gM($){let Q=new WeakMap;return(X,...Y)=>{let Z=Q.get(X);if(Z!==void 0)return Z;let J=$(X,...Y);return Q.set(X,J),J}}var rS,F2,Q$0,rP0,aq,nS=($)=>typeof $==="bigint"&&rS<=$,i9=($)=>(F2<<BigInt($))-F2,oS=($)=>new Uint8Array($),e00=($)=>Uint8Array.from($),sP0,hX=()=>{throw new Error("not implemented")};var Q1=y(()=>{/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */rS=BigInt(0),F2=BigInt(1);Q$0=typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function",rP0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));aq={_0:48,_9:57,A:65,F:70,a:97,f:102};sP0={bigint:($)=>typeof $==="bigint",function:($)=>typeof $==="function",boolean:($)=>typeof $==="boolean",string:($)=>typeof $==="string",stringOrUint8Array:($)=>typeof $==="string"||KW($),isSafeInteger:($)=>Number.isSafeInteger($),array:($)=>Array.isArray($),field:($,Q)=>Q.Fp.isValid($),hash:($)=>typeof $==="function"&&Number.isSafeInteger($.outputLen)}});function MY($,Q){let X=$%Q;return X>=vY?X:Q+X}function _2($,Q){if($===vY)throw new Error("invert: expected non-zero number");if(Q<=vY)throw new Error("invert: expected positive modulus, got "+Q);let X=MY($,Q),Y=Q,Z=vY,J=mX,q=mX,G=vY;while(X!==vY){let M=Y/X,j=Y%X,P=Z-q*M,D=J-G*M;Y=X,X=j,Z=q,J=G,q=P,G=D}if(Y!==mX)throw new Error("invert: does not exist");return MY(Z,Q)}function q$0($,Q){let X=($.ORDER+mX)/Y$0,Y=$.pow(Q,X);if(!$.eql($.sqr(Y),Q))throw new Error("Cannot find square root");return Y}function tP0($,Q){let X=($.ORDER-Z$0)/J$0,Y=$.mul(Q,XK),Z=$.pow(Y,X),J=$.mul(Q,Z),q=$.mul($.mul(J,XK),Z),G=$.mul(J,$.sub(q,$.ONE));if(!$.eql($.sqr(G),Q))throw new Error("Cannot find square root");return G}function eP0($){if($<BigInt(3))throw new Error("sqrt is not defined for small field");let Q=$-mX,X=0;while(Q%XK===vY)Q/=XK,X++;let Y=XK,Z=X1($);while(yM(Z,Y)===1)if(Y++>1000)throw new Error("Cannot find square root: probably non-prime P");if(X===1)return q$0;let J=Z.pow(Y,Q),q=(Q+mX)/XK;return function G(z,M){if(z.is0(M))return M;if(yM(z,M)!==1)throw new Error("Cannot find square root");let j=X,P=z.mul(z.ONE,J),D=z.pow(M,Q),A=z.pow(M,q);while(!z.eql(D,z.ONE)){if(z.is0(D))return z.ZERO;let I=1,H=z.sqr(D);while(!z.eql(H,z.ONE))if(I++,H=z.sqr(H),I===j)throw new Error("Cannot find square root");let C=mX<<BigInt(j-I-1),B=z.pow(P,C);j=I,P=z.sqr(B),D=z.mul(D,P),A=z.mul(A,B)}return A}}function $H0($){if($%Y$0===aP0)return q$0;if($%J$0===Z$0)return tP0;return eP0($)}function k2($){let Q={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},X=QH0.reduce((Y,Z)=>{return Y[Z]="function",Y},Q);return $1($,X)}function bM($,Q,X){if(X<vY)throw new Error("invalid exponent, negatives unsupported");if(X===vY)return $.ONE;if(X===mX)return Q;let Y=$.ONE,Z=Q;while(X>vY){if(X&mX)Y=$.mul(Y,Z);Z=$.sqr(Z),X>>=mX}return Y}function iJ($,Q,X=!1){let Y=new Array(Q.length).fill(X?$.ZERO:void 0),Z=Q.reduce((q,G,z)=>{if($.is0(G))return q;return Y[z]=q,$.mul(q,G)},$.ONE),J=$.inv(Z);return Q.reduceRight((q,G,z)=>{if($.is0(G))return q;return Y[z]=$.mul(q,Y[z]),$.mul(q,G)},J),Y}function yM($,Q){let X=($.ORDER-mX)/XK,Y=$.pow(Q,X),Z=$.eql(Y,$.ONE),J=$.eql(Y,$.ZERO),q=$.eql(Y,$.neg($.ONE));if(!Z&&!J&&!q)throw new Error("invalid Legendre symbol result");return Z?1:J?0:-1}function tS($,Q){if(Q!==void 0)T2(Q);let X=Q!==void 0?Q:$.toString(2).length,Y=Math.ceil(X/8);return{nBitLength:X,nByteLength:Y}}function X1($,Q,X=!1,Y={}){if($<=vY)throw new Error("invalid field: expected ORDER > 0, got "+$);let{nBitLength:Z,nByteLength:J}=tS($,Q);if(J>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let q,G=Object.freeze({ORDER:$,isLE:X,BITS:Z,BYTES:J,MASK:i9(Z),ZERO:vY,ONE:mX,create:(z)=>MY(z,$),isValid:(z)=>{if(typeof z!=="bigint")throw new Error("invalid field element: expected bigint, got "+typeof z);return vY<=z&&z<$},is0:(z)=>z===vY,isOdd:(z)=>(z&mX)===mX,neg:(z)=>MY(-z,$),eql:(z,M)=>z===M,sqr:(z)=>MY(z*z,$),add:(z,M)=>MY(z+M,$),sub:(z,M)=>MY(z-M,$),mul:(z,M)=>MY(z*M,$),pow:(z,M)=>bM(G,z,M),div:(z,M)=>MY(z*_2(M,$),$),sqrN:(z)=>z*z,addN:(z,M)=>z+M,subN:(z,M)=>z-M,mulN:(z,M)=>z*M,inv:(z)=>_2(z,$),sqrt:Y.sqrt||((z)=>{if(!q)q=$H0($);return q(G,z)}),toBytes:(z)=>X?aS(z,J):n8(z,J),fromBytes:(z)=>{if(z.length!==J)throw new Error("Field.fromBytes: expected "+J+" bytes, got "+z.length);return X?sS(z):IQ(z)},invertBatch:(z)=>iJ(G,z),cmov:(z,M,j)=>j?M:z});return Object.freeze(G)}function G$0($){if(typeof $!=="bigint")throw new Error("field order must be bigint");let Q=$.toString(2).length;return Math.ceil(Q/8)}function hM($){let Q=G$0($);return Q+Math.ceil(Q/2)}function x2($,Q,X=!1){let Y=$.length,Z=G$0(Q),J=hM(Q);if(Y<16||Y<J||Y>1024)throw new Error("expected "+J+"-1024 bytes of input, got "+Y);let q=X?sS($):IQ($),G=MY(q,Q-mX)+mX;return X?aS(G,Z):n8(G,Z)}var vY,mX,XK,aP0,Y$0,Z$0,J$0,QH0;var u7=y(()=>{p7();Q1();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */vY=BigInt(0),mX=BigInt(1),XK=BigInt(2),aP0=BigInt(3),Y$0=BigInt(4),Z$0=BigInt(5),J$0=BigInt(8);QH0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function d7($,Q){if(mM($),mM(Q),$<0||$>=1<<8*Q)throw new Error("invalid I2OSP input: "+$);let X=Array.from({length:Q}).fill(0);for(let Y=Q-1;Y>=0;Y--)X[Y]=$&255,$>>>=8;return new Uint8Array(X)}function ZH0($,Q){let X=new Uint8Array($.length);for(let Y=0;Y<$.length;Y++)X[Y]=$[Y]^Q[Y];return X}function mM($){if(!Number.isSafeInteger($))throw new Error("number expected")}function JH0($,Q,X,Y){if(tq($),tq(Q),mM(X),Q.length>255)Q=Y(I8(B2("H2C-OVERSIZE-DST-"),Q));let{outputLen:Z,blockLen:J}=Y,q=Math.ceil(X/Z);if(X>65535||q>255)throw new Error("expand_message_xmd: invalid lenInBytes");let G=I8(Q,d7(Q.length,1)),z=d7(0,J),M=d7(X,2),j=new Array(q),P=Y(I8(z,$,M,d7(0,1),G));j[0]=Y(I8(P,d7(1,1),G));for(let A=1;A<=q;A++){let I=[ZH0(P,j[A-1]),d7(A+1,1),G];j[A]=Y(I8(...I))}return I8(...j).slice(0,X)}function qH0($,Q,X,Y,Z){if(tq($),tq(Q),mM(X),Q.length>255){let J=Math.ceil(2*Y/8);Q=Z.create({dkLen:J}).update(B2("H2C-OVERSIZE-DST-")).update(Q).digest()}if(X>65535||Q.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return Z.create({dkLen:X}).update($).update(d7(X,2)).update(Q).update(d7(Q.length,1)).digest()}function z$0($,Q,X){$1(X,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:Y,k:Z,m:J,hash:q,expand:G,DST:z}=X;tq($),mM(Q);let M=typeof z==="string"?B2(z):z,j=Y.toString(2).length,P=Math.ceil((j+Z)/8),D=Q*J*P,A;if(G==="xmd")A=JH0($,M,D,q);else if(G==="xof")A=qH0($,M,D,Z,q);else if(G==="_internal_pass")A=$;else throw new Error('expand must be "xmd" or "xof"');let I=new Array(Q);for(let H=0;H<Q;H++){let C=new Array(J);for(let B=0;B<J;B++){let S=P*(B+H*J),_=A.subarray(S,S+P);C[B]=MY(YH0(_),Y)}I[H]=C}return I}function eS($,Q){let X=Q.map((Y)=>Array.from(Y).reverse());return(Y,Z)=>{let[J,q,G,z]=X.map((P)=>P.reduce((D,A)=>$.add($.mul(D,Y),A))),[M,j]=iJ($,[q,z],!0);return Y=$.mul(J,M),Z=$.mul(Z,$.mul(G,j)),{x:Y,y:Z}}}function $E($,Q,X){if(typeof Q!=="function")throw new Error("mapToCurve() must be defined");function Y(J){return $.fromAffine(Q(J))}function Z(J){let q=J.clearCofactor();if(q.equals($.ZERO))return $.ZERO;return q.assertValidity(),q}return{defaults:X,hashToCurve(J,q){let G=z$0(J,2,{...X,DST:X.DST,...q}),z=Y(G[0]),M=Y(G[1]);return Z(z.add(M))},encodeToCurve(J,q){let G=z$0(J,1,{...X,DST:X.encodeDST,...q});return Z(Y(G[0]))},mapToCurve(J){if(!Array.isArray(J))throw new Error("expected array of bigints");for(let q of J)if(typeof q!=="bigint")throw new Error("expected array of bigints");return Z(Y(J))}}}var YH0;var QE=y(()=>{u7();Q1();YH0=IQ});function XE($,Q){let X=Q.negate();return $?X:Q}function W$0($,Q){if(!Number.isSafeInteger($)||$<=0||$>Q)throw new Error("invalid window size, expected [1.."+Q+"], got W="+$)}function YE($,Q){W$0($,Q);let X=Math.ceil(Q/$)+1,Y=2**($-1),Z=2**$,J=i9($),q=BigInt($);return{windows:X,windowSize:Y,mask:J,maxNumber:Z,shiftBy:q}}function U$0($,Q,X){let{windowSize:Y,mask:Z,maxNumber:J,shiftBy:q}=X,G=Number($&Z),z=$>>q;if(G>Y)G-=J,z+=qE;let M=Q*Y,j=M+Math.abs(G)-1,P=G===0,D=G<0,A=Q%2!==0;return{nextN:z,offset:j,isZero:P,isNeg:D,isNegF:A,offsetF:M}}function GH0($,Q){if(!Array.isArray($))throw new Error("array expected");$.forEach((X,Y)=>{if(!(X instanceof Q))throw new Error("invalid point at index "+Y)})}function zH0($,Q){if(!Array.isArray($))throw new Error("array of scalars expected");$.forEach((X,Y)=>{if(!Q.isValid(X))throw new Error("invalid scalar at index "+Y)})}function JE($){return V$0.get($)||1}function O$0($,Q){return{constTimeNegate:XE,hasPrecomputes(X){return JE(X)!==1},unsafeLadder(X,Y,Z=$.ZERO){let J=X;while(Y>K$0){if(Y&qE)Z=Z.add(J);J=J.double(),Y>>=qE}return Z},precomputeWindow(X,Y){let{windows:Z,windowSize:J}=YE(Y,Q),q=[],G=X,z=G;for(let M=0;M<Z;M++){z=G,q.push(z);for(let j=1;j<J;j++)z=z.add(G),q.push(z);G=z.double()}return q},wNAF(X,Y,Z){let{ZERO:J,BASE:q}=$,G=YE(X,Q);for(let z=0;z<G.windows;z++){let{nextN:M,offset:j,isZero:P,isNeg:D,isNegF:A,offsetF:I}=U$0(Z,z,G);if(Z=M,P)q=q.add(XE(A,Y[I]));else J=J.add(XE(D,Y[j]))}return{p:J,f:q}},wNAFUnsafe(X,Y,Z,J=$.ZERO){let q=YE(X,Q);for(let G=0;G<q.windows;G++){if(Z===K$0)break;let{nextN:z,offset:M,isZero:j,isNeg:P}=U$0(Z,G,q);if(Z=z,j)continue;else{let D=Y[M];J=J.add(P?D.negate():D)}}return J},getPrecomputes(X,Y,Z){let J=ZE.get(Y);if(!J){if(J=this.precomputeWindow(Y,X),X!==1)ZE.set(Y,Z(J))}return J},wNAFCached(X,Y,Z){let J=JE(X);return this.wNAF(J,this.getPrecomputes(J,X,Z),Y)},wNAFCachedUnsafe(X,Y,Z,J){let q=JE(X);if(q===1)return this.unsafeLadder(X,Y,J);return this.wNAFUnsafe(q,this.getPrecomputes(q,X,Z),Y,J)},setWindowSize(X,Y){W$0(Y,Q),V$0.set(X,Y),ZE.delete(X)}}}function M$0($,Q,X,Y){GH0(X,$),zH0(Y,Q);let Z=X.length,J=Y.length;if(Z!==J)throw new Error("arrays of points and scalars must have equal length");let q=$.ZERO,G=dJ(BigInt(Z)),z=1;if(G>12)z=G-3;else if(G>4)z=G-2;else if(G>0)z=2;let M=i9(z),j=new Array(Number(M)+1).fill(q),P=Math.floor((Q.BITS-1)/z)*z,D=q;for(let A=P;A>=0;A-=z){j.fill(q);for(let H=0;H<J;H++){let C=Y[H],B=Number(C>>BigInt(A)&M);j[B]=j[B].add(X[H])}let I=q;for(let H=j.length-1,C=q;H>0;H--)C=C.add(j[H]),I=I.add(C);if(D=D.add(I),A!==0)for(let H=0;H<z;H++)D=D.double()}return D}function GE($){return k2($.Fp),$1($,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...tS($.n,$.nBitLength),...$,...{p:$.Fp.ORDER}})}var K$0,qE,ZE,V$0;var D$0=y(()=>{u7();Q1();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */K$0=BigInt(0),qE=BigInt(1);ZE=new WeakMap,V$0=new WeakMap});function j$0($){if($.lowS!==void 0)UW("lowS",$.lowS);if($.prehash!==void 0)UW("prehash",$.prehash)}function KH0($){let Q=GE($);$1(Q,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});let{endo:X,Fp:Y,a:Z}=Q;if(X){if(!Y.eql(Z,Y.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof X!=="object"||typeof X.beta!=="bigint"||typeof X.splitScalar!=="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...Q})}function zE($,Q){return eq(n8($,Q))}function f2($){let Q=KH0($),{Fp:X}=Q,Y=X1(Q.n,Q.nBitLength),Z=Q.toBytes||((_,k,f)=>{let g=k.toAffine();return I8(Uint8Array.from([4]),X.toBytes(g.x),X.toBytes(g.y))}),J=Q.fromBytes||((_)=>{let k=_.subarray(1),f=X.fromBytes(k.subarray(0,X.BYTES)),g=X.fromBytes(k.subarray(X.BYTES,2*X.BYTES));return{x:f,y:g}});function q(_){let{a:k,b:f}=Q,g=X.sqr(_),b=X.mul(g,_);return X.add(X.add(b,X.mul(_,k)),f)}function G(_,k){let f=X.sqr(k),g=q(_);return X.eql(f,g)}if(!G(Q.Gx,Q.Gy))throw new Error("bad curve params: generator point");let z=X.mul(X.pow(Q.a,cM),KE),M=X.mul(X.sqr(Q.b),BigInt(27));if(X.is0(X.add(z,M)))throw new Error("bad curve params: a or b");function j(_){return S2(_,D8,Q.n)}function P(_){let{allowedPrivateKeyLengths:k,nByteLength:f,wrapPrivateKey:g,n:b}=Q;if(k&&typeof _!=="bigint"){if(KW(_))_=eq(_);if(typeof _!=="string"||!k.includes(_.length))throw new Error("invalid private key");_=_.padStart(f*2,"0")}let m;try{m=typeof _==="bigint"?_:IQ(ZQ("private key",_,f))}catch(l){throw new Error("invalid private key, expected hex or "+f+" bytes, got "+typeof _)}if(g)m=MY(m,b);return QK("private key",m,D8,b),m}function D(_){if(!(_ instanceof H))throw new Error("ProjectivePoint expected")}let A=gM((_,k)=>{let{px:f,py:g,pz:b}=_;if(X.eql(b,X.ONE))return{x:f,y:g};let m=_.is0();if(k==null)k=m?X.ONE:X.inv(b);let l=X.mul(f,k),h=X.mul(g,k),c=X.mul(b,k);if(m)return{x:X.ZERO,y:X.ZERO};if(!X.eql(c,X.ONE))throw new Error("invZ was invalid");return{x:l,y:h}}),I=gM((_)=>{if(_.is0()){if(Q.allowInfinityPoint&&!X.is0(_.py))return;throw new Error("bad point: ZERO")}let{x:k,y:f}=_.toAffine();if(!X.isValid(k)||!X.isValid(f))throw new Error("bad point: x or y not FE");if(!G(k,f))throw new Error("bad point: equation left != right");if(!_.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class H{constructor(_,k,f){if(_==null||!X.isValid(_))throw new Error("x required");if(k==null||!X.isValid(k)||X.is0(k))throw new Error("y required");if(f==null||!X.isValid(f))throw new Error("z required");this.px=_,this.py=k,this.pz=f,Object.freeze(this)}static fromAffine(_){let{x:k,y:f}=_||{};if(!_||!X.isValid(k)||!X.isValid(f))throw new Error("invalid affine point");if(_ instanceof H)throw new Error("projective point not allowed");let g=(b)=>X.eql(b,X.ZERO);if(g(k)&&g(f))return H.ZERO;return new H(k,f,X.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(_){let k=iJ(X,_.map((f)=>f.pz));return _.map((f,g)=>f.toAffine(k[g])).map(H.fromAffine)}static fromHex(_){let k=H.fromAffine(J(ZQ("pointHex",_)));return k.assertValidity(),k}static fromPrivateKey(_){return H.BASE.multiply(P(_))}static msm(_,k){return M$0(H,Y,_,k)}_setWindowSize(_){S.setWindowSize(this,_)}assertValidity(){I(this)}hasEvenY(){let{y:_}=this.toAffine();if(X.isOdd)return!X.isOdd(_);throw new Error("Field doesn't support isOdd")}equals(_){D(_);let{px:k,py:f,pz:g}=this,{px:b,py:m,pz:l}=_,h=X.eql(X.mul(k,l),X.mul(b,g)),c=X.eql(X.mul(f,l),X.mul(m,g));return h&&c}negate(){return new H(this.px,X.neg(this.py),this.pz)}double(){let{a:_,b:k}=Q,f=X.mul(k,cM),{px:g,py:b,pz:m}=this,l=X.ZERO,h=X.ZERO,c=X.ZERO,T=X.mul(g,g),K=X.mul(b,b),U=X.mul(m,m),W=X.mul(g,b);return W=X.add(W,W),c=X.mul(g,m),c=X.add(c,c),l=X.mul(_,c),h=X.mul(f,U),h=X.add(l,h),l=X.sub(K,h),h=X.add(K,h),h=X.mul(l,h),l=X.mul(W,l),c=X.mul(f,c),U=X.mul(_,U),W=X.sub(T,U),W=X.mul(_,W),W=X.add(W,c),c=X.add(T,T),T=X.add(c,T),T=X.add(T,U),T=X.mul(T,W),h=X.add(h,T),U=X.mul(b,m),U=X.add(U,U),T=X.mul(U,W),l=X.sub(l,T),c=X.mul(U,K),c=X.add(c,c),c=X.add(c,c),new H(l,h,c)}add(_){D(_);let{px:k,py:f,pz:g}=this,{px:b,py:m,pz:l}=_,h=X.ZERO,c=X.ZERO,T=X.ZERO,K=Q.a,U=X.mul(Q.b,cM),W=X.mul(k,b),V=X.mul(f,m),N=X.mul(g,l),L=X.add(k,f),F=X.add(b,m);L=X.mul(L,F),F=X.add(W,V),L=X.sub(L,F),F=X.add(k,g);let R=X.add(b,l);return F=X.mul(F,R),R=X.add(W,N),F=X.sub(F,R),R=X.add(f,g),h=X.add(m,l),R=X.mul(R,h),h=X.add(V,N),R=X.sub(R,h),T=X.mul(K,F),h=X.mul(U,N),T=X.add(h,T),h=X.sub(V,T),T=X.add(V,T),c=X.mul(h,T),V=X.add(W,W),V=X.add(V,W),N=X.mul(K,N),F=X.mul(U,F),V=X.add(V,N),N=X.sub(W,N),N=X.mul(K,N),F=X.add(F,N),W=X.mul(V,F),c=X.add(c,W),W=X.mul(R,F),h=X.mul(L,h),h=X.sub(h,W),W=X.mul(L,V),T=X.mul(R,T),T=X.add(T,W),new H(h,c,T)}subtract(_){return this.add(_.negate())}is0(){return this.equals(H.ZERO)}wNAF(_){return S.wNAFCached(this,_,H.normalizeZ)}multiplyUnsafe(_){let{endo:k,n:f}=Q;QK("scalar",_,n9,f);let g=H.ZERO;if(_===n9)return g;if(this.is0()||_===D8)return this;if(!k||S.hasPrecomputes(this))return S.wNAFCachedUnsafe(this,_,H.normalizeZ);let{k1neg:b,k1:m,k2neg:l,k2:h}=k.splitScalar(_),c=g,T=g,K=this;while(m>n9||h>n9){if(m&D8)c=c.add(K);if(h&D8)T=T.add(K);K=K.double(),m>>=D8,h>>=D8}if(b)c=c.negate();if(l)T=T.negate();return T=new H(X.mul(T.px,k.beta),T.py,T.pz),c.add(T)}multiply(_){let{endo:k,n:f}=Q;QK("scalar",_,D8,f);let g,b;if(k){let{k1neg:m,k1:l,k2neg:h,k2:c}=k.splitScalar(_),{p:T,f:K}=this.wNAF(l),{p:U,f:W}=this.wNAF(c);T=S.constTimeNegate(m,T),U=S.constTimeNegate(h,U),U=new H(X.mul(U.px,k.beta),U.py,U.pz),g=T.add(U),b=K.add(W)}else{let{p:m,f:l}=this.wNAF(_);g=m,b=l}return H.normalizeZ([g,b])[0]}multiplyAndAddUnsafe(_,k,f){let g=H.BASE,b=(l,h)=>h===n9||h===D8||!l.equals(g)?l.multiplyUnsafe(h):l.multiply(h),m=b(this,k).add(b(_,f));return m.is0()?void 0:m}toAffine(_){return A(this,_)}isTorsionFree(){let{h:_,isTorsionFree:k}=Q;if(_===D8)return!0;if(k)return k(H,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:_,clearCofactor:k}=Q;if(_===D8)return this;if(k)return k(H,this);return this.multiplyUnsafe(Q.h)}toRawBytes(_=!0){return UW("isCompressed",_),this.assertValidity(),Z(H,this,_)}toHex(_=!0){return UW("isCompressed",_),eq(this.toRawBytes(_))}}H.BASE=new H(Q.Gx,Q.Gy,X.ONE),H.ZERO=new H(X.ZERO,X.ONE,X.ZERO);let{endo:C,nBitLength:B}=Q,S=O$0(H,C?Math.ceil(B/2):B);return{CURVE:Q,ProjectivePoint:H,normPrivateKeyToScalar:P,weierstrassEquation:q,isWithinCurveOrder:j}}function UH0($){let Q=GE($);return $1(Q,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...Q})}function H$0($){let Q=UH0($),{Fp:X,n:Y,nByteLength:Z,nBitLength:J}=Q,q=X.BYTES+1,G=2*X.BYTES+1;function z(W){return MY(W,Y)}function M(W){return _2(W,Y)}let{ProjectivePoint:j,normPrivateKeyToScalar:P,weierstrassEquation:D,isWithinCurveOrder:A}=f2({...Q,toBytes(W,V,N){let L=V.toAffine(),F=X.toBytes(L.x),R=I8;if(UW("isCompressed",N),N)return R(Uint8Array.from([V.hasEvenY()?2:3]),F);else return R(Uint8Array.from([4]),F,X.toBytes(L.y))},fromBytes(W){let V=W.length,N=W[0],L=W.subarray(1);if(V===q&&(N===2||N===3)){let F=IQ(L);if(!S2(F,D8,X.ORDER))throw new Error("Point is not on curve");let R=D(F),O;try{O=X.sqrt(R)}catch(E){let v=E instanceof Error?": "+E.message:"";throw new Error("Point is not on curve"+v)}let w=(O&D8)===D8;if((N&1)===1!==w)O=X.neg(O);return{x:F,y:O}}else if(V===G&&N===4){let F=X.fromBytes(L.subarray(0,X.BYTES)),R=X.fromBytes(L.subarray(X.BYTES,2*X.BYTES));return{x:F,y:R}}else{let F=q,R=G;throw new Error("invalid Point, expected length of "+F+", or uncompressed "+R+", got "+V)}}});function I(W){let V=Y>>D8;return W>V}function H(W){return I(W)?z(-W):W}let C=(W,V,N)=>IQ(W.slice(V,N));class B{constructor(W,V,N){if(QK("r",W,D8,Y),QK("s",V,D8,Y),this.r=W,this.s=V,N!=null)this.recovery=N;Object.freeze(this)}static fromCompact(W){let V=Z;return W=ZQ("compactSignature",W,V*2),new B(C(W,0,V),C(W,V,2*V))}static fromDER(W){let{r:V,s:N}=Y1.toSig(ZQ("DER",W));return new B(V,N)}assertValidity(){}addRecoveryBit(W){return new B(this.r,this.s,W)}recoverPublicKey(W){let{r:V,s:N,recovery:L}=this,F=b(ZQ("msgHash",W));if(L==null||![0,1,2,3].includes(L))throw new Error("recovery id invalid");let R=L===2||L===3?V+Q.n:V;if(R>=X.ORDER)throw new Error("recovery id 2 or 3 invalid");let O=(L&1)===0?"02":"03",w=j.fromHex(O+zE(R,X.BYTES)),x=M(R),E=z(-F*x),v=z(N*x),p=j.BASE.multiplyAndAddUnsafe(w,E,v);if(!p)throw new Error("point at infinify");return p.assertValidity(),p}hasHighS(){return I(this.s)}normalizeS(){return this.hasHighS()?new B(this.r,z(-this.s),this.recovery):this}toDERRawBytes(){return vM(this.toDERHex())}toDERHex(){return Y1.hexFromSig(this)}toCompactRawBytes(){return vM(this.toCompactHex())}toCompactHex(){let W=Z;return zE(this.r,W)+zE(this.s,W)}}let S={isValidPrivateKey(W){try{return P(W),!0}catch(V){return!1}},normPrivateKeyToScalar:P,randomPrivateKey:()=>{let W=hM(Q.n);return x2(Q.randomBytes(W),Q.n)},precompute(W=8,V=j.BASE){return V._setWindowSize(W),V.multiply(BigInt(3)),V}};function _(W,V=!0){return j.fromPrivateKey(W).toRawBytes(V)}function k(W){if(typeof W==="bigint")return!1;if(W instanceof j)return!0;let N=ZQ("key",W).length,L=X.BYTES,F=L+1,R=2*L+1;if(Q.allowedPrivateKeyLengths||Z===F)return;else return N===F||N===R}function f(W,V,N=!0){if(k(W)===!0)throw new Error("first arg must be private key");if(k(V)===!1)throw new Error("second arg must be public key");return j.fromHex(V).multiply(P(W)).toRawBytes(N)}let g=Q.bits2int||function(W){if(W.length>8192)throw new Error("input is too large");let V=IQ(W),N=W.length*8-J;return N>0?V>>BigInt(N):V},b=Q.bits2int_modN||function(W){return z(g(W))},m=i9(J);function l(W){return QK("num < 2^"+J,W,n9,m),n8(W,Z)}function h(W,V,N=c){if(["recovered","canonical"].some((X0)=>(X0 in N)))throw new Error("sign() legacy options not supported");let{hash:L,randomBytes:F}=Q,{lowS:R,prehash:O,extraEntropy:w}=N;if(R==null)R=!0;if(W=ZQ("msgHash",W),j$0(N),O)W=ZQ("prehashed msgHash",L(W));let x=b(W),E=P(V),v=[l(E),l(x)];if(w!=null&&w!==!1){let X0=w===!0?F(X.BYTES):w;v.push(ZQ("extraEntropy",X0))}let p=I8(...v),i=x;function s(X0){let n=g(X0);if(!A(n))return;let r=M(n),Z0=j.BASE.multiply(n).toAffine(),e=z(Z0.x);if(e===n9)return;let Q0=z(r*z(i+e*E));if(Q0===n9)return;let t=(Z0.x===e?0:2)|Number(Z0.y&D8),a=Q0;if(R&&I(Q0))a=H(Q0),t^=1;return new B(e,a,t)}return{seed:p,k2sig:s}}let c={lowS:Q.lowS,prehash:!1},T={lowS:Q.lowS,prehash:!1};function K(W,V,N=c){let{seed:L,k2sig:F}=h(W,V,N),R=Q;return X$0(R.hash.outputLen,R.nByteLength,R.hmac)(L,F)}j.BASE._setWindowSize(8);function U(W,V,N,L=T){let F=W;V=ZQ("msgHash",V),N=ZQ("publicKey",N);let{lowS:R,prehash:O,format:w}=L;if(j$0(L),"strict"in L)throw new Error("options.strict was renamed to lowS");if(w!==void 0&&w!=="compact"&&w!=="der")throw new Error("format must be compact or der");let x=typeof F==="string"||KW(F),E=!x&&!w&&typeof F==="object"&&F!==null&&typeof F.r==="bigint"&&typeof F.s==="bigint";if(!x&&!E)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let v=void 0,p;try{if(E)v=new B(F.r,F.s);if(x){try{if(w!=="compact")v=B.fromDER(F)}catch(t){if(!(t instanceof Y1.Err))throw t}if(!v&&w!=="der")v=B.fromCompact(F)}p=j.fromHex(N)}catch(t){return!1}if(!v)return!1;if(R&&v.hasHighS())return!1;if(O)V=Q.hash(V);let{r:i,s}=v,X0=b(V),n=M(s),r=z(X0*n),Z0=z(i*n),e=j.BASE.multiplyAndAddUnsafe(p,r,Z0)?.toAffine();if(!e)return!1;return z(e.x)===i}return{CURVE:Q,getPublicKey:_,getSharedSecret:f,sign:K,verify:U,ProjectivePoint:j,Signature:B,utils:S}}function WH0($,Q){let X=$.ORDER,Y=n9;for(let I=X-D8;I%i7===n9;I/=i7)Y+=D8;let Z=Y,J=i7<<Z-D8-D8,q=J*i7,G=(X-D8)/q,z=(G-D8)/i7,M=q-D8,j=J,P=$.pow(Q,G),D=$.pow(Q,(G+D8)/i7),A=(I,H)=>{let C=P,B=$.pow(H,M),S=$.sqr(B);S=$.mul(S,H);let _=$.mul(I,S);_=$.pow(_,z),_=$.mul(_,B),B=$.mul(_,H),S=$.mul(_,I);let k=$.mul(S,B);_=$.pow(k,j);let f=$.eql(_,$.ONE);B=$.mul(S,D),_=$.mul(k,C),S=$.cmov(B,S,f),k=$.cmov(_,k,f);for(let g=Z;g>D8;g--){let b=g-i7;b=i7<<b-D8;let m=$.pow(k,b),l=$.eql(m,$.ONE);B=$.mul(S,C),C=$.mul(C,C),m=$.mul(k,C),S=$.cmov(B,S,l),k=$.cmov(m,k,l)}return{isValid:f,value:S}};if($.ORDER%KE===cM){let I=($.ORDER-cM)/KE,H=$.sqrt($.neg(Q));A=(C,B)=>{let S=$.sqr(B),_=$.mul(C,B);S=$.mul(S,_);let k=$.pow(S,I);k=$.mul(k,_);let f=$.mul(k,H),g=$.mul($.sqr(k),B),b=$.eql(g,C),m=$.cmov(f,k,b);return{isValid:b,value:m}}}return A}function UE($,Q){if(k2($),!$.isValid(Q.A)||!$.isValid(Q.B)||!$.isValid(Q.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let X=WH0($,Q.Z);if(!$.isOdd)throw new Error("Fp.isOdd is not implemented!");return(Y)=>{let Z,J,q,G,z,M,j,P;Z=$.sqr(Y),Z=$.mul(Z,Q.Z),J=$.sqr(Z),J=$.add(J,Z),q=$.add(J,$.ONE),q=$.mul(q,Q.B),G=$.cmov(Q.Z,$.neg(J),!$.eql(J,$.ZERO)),G=$.mul(G,Q.A),J=$.sqr(q),M=$.sqr(G),z=$.mul(M,Q.A),J=$.add(J,z),J=$.mul(J,q),M=$.mul(M,G),z=$.mul(M,Q.B),J=$.add(J,z),j=$.mul(Z,q);let{isValid:D,value:A}=X(J,M);P=$.mul(Z,Y),P=$.mul(P,A),j=$.cmov(j,q,D),P=$.cmov(P,A,D);let I=$.isOdd(Y)===$.isOdd(P);P=$.cmov($.neg(P),P,I);let H=iJ($,[G],!0)[0];return j=$.mul(j,H),{x:j,y:P}}}var P$0,Y1,n9,D8,i7,cM,KE;var v2=y(()=>{D$0();u7();Q1();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */P$0=class P$0 extends Error{constructor($=""){super($)}};Y1={Err:P$0,_tlv:{encode:($,Q)=>{let{Err:X}=Y1;if($<0||$>256)throw new X("tlv.encode: wrong tag");if(Q.length&1)throw new X("tlv.encode: unpadded data");let Y=Q.length/2,Z=fM(Y);if(Z.length/2&128)throw new X("tlv.encode: long form length too big");let J=Y>127?fM(Z.length/2|128):"";return fM($)+J+Z+Q},decode($,Q){let{Err:X}=Y1,Y=0;if($<0||$>256)throw new X("tlv.encode: wrong tag");if(Q.length<2||Q[Y++]!==$)throw new X("tlv.decode: wrong tlv");let Z=Q[Y++],J=!!(Z&128),q=0;if(!J)q=Z;else{let z=Z&127;if(!z)throw new X("tlv.decode(long): indefinite length not supported");if(z>4)throw new X("tlv.decode(long): byte length is too big");let M=Q.subarray(Y,Y+z);if(M.length!==z)throw new X("tlv.decode: length bytes not complete");if(M[0]===0)throw new X("tlv.decode(long): zero leftmost byte");for(let j of M)q=q<<8|j;if(Y+=z,q<128)throw new X("tlv.decode(long): not minimal encoding")}let G=Q.subarray(Y,Y+q);if(G.length!==q)throw new X("tlv.decode: wrong value length");return{v:G,l:Q.subarray(Y+q)}}},_int:{encode($){let{Err:Q}=Y1;if($<n9)throw new Q("integer: negative integers are not allowed");let X=fM($);if(Number.parseInt(X[0],16)&8)X="00"+X;if(X.length&1)throw new Q("unexpected DER parsing assertion: unpadded hex");return X},decode($){let{Err:Q}=Y1;if($[0]&128)throw new Q("invalid signature integer: negative");if($[0]===0&&!($[1]&128))throw new Q("invalid signature integer: unnecessary leading zero");return IQ($)}},toSig($){let{Err:Q,_int:X,_tlv:Y}=Y1,Z=ZQ("signature",$),{v:J,l:q}=Y.decode(48,Z);if(q.length)throw new Q("invalid signature: left bytes after parsing");let{v:G,l:z}=Y.decode(2,J),{v:M,l:j}=Y.decode(2,z);if(j.length)throw new Q("invalid signature: left bytes after parsing");return{r:X.decode(G),s:X.decode(M)}},hexFromSig($){let{_tlv:Q,_int:X}=Y1,Y=Q.encode(2,X.encode($.r)),Z=Q.encode(2,X.encode($.s)),J=Y+Z;return Q.encode(48,J)}};n9=BigInt(0),D8=BigInt(1),i7=BigInt(2),cM=BigInt(3),KE=BigInt(4)});function OH0($){let Q=[];for(;$>g2;$>>=g2)if(($&g2)===VH0)Q.unshift(0);else if(($&WW)===WW)Q.unshift(-1),$+=g2;else Q.unshift(1);return Q}function y2($){let{Fp:Q,Fr:X,Fp2:Y,Fp6:Z,Fp12:J}=$.fields,q=$.params.xNegative,G=$.params.twistType,z=f2({n:X.ORDER,...$.G1}),M=Object.assign(z,$E(z.ProjectivePoint,$.G1.mapToCurve,{...$.htfDefaults,...$.G1.htfDefaults})),j=f2({n:X.ORDER,...$.G2}),P=Object.assign(j,$E(j.ProjectivePoint,$.G2.mapToCurve,{...$.htfDefaults,...$.G2.htfDefaults})),D;if(G==="multiplicative")D=(x,E,v,p,i,s)=>J.mul014(p,x,Y.mul(E,i),Y.mul(v,s));else if(G==="divisive")D=(x,E,v,p,i,s)=>J.mul034(p,Y.mul(v,s),Y.mul(E,i),x);else throw new Error("bls: unknown twist type");let A=Y.div(Y.ONE,Y.mul(Y.ONE,N$0));function I(x,E,v,p){let i=Y.sqr(v),s=Y.sqr(p),X0=Y.mulByB(Y.mul(s,WW)),n=Y.mul(X0,WW),r=Y.sub(Y.sub(Y.sqr(Y.add(v,p)),s),i),Z0=Y.sub(X0,i),e=Y.mul(Y.sqr(E),WW),Q0=Y.neg(r);return x.push([Z0,e,Q0]),E=Y.mul(Y.mul(Y.mul(Y.sub(i,n),E),v),A),v=Y.sub(Y.sqr(Y.mul(Y.add(i,n),A)),Y.mul(Y.sqr(X0),WW)),p=Y.mul(i,r),{Rx:E,Ry:v,Rz:p}}function H(x,E,v,p,i,s){let X0=Y.sub(v,Y.mul(s,p)),n=Y.sub(E,Y.mul(i,p)),r=Y.sub(Y.mul(X0,i),Y.mul(n,s)),Z0=Y.neg(X0),e=n;x.push([r,Z0,e]);let Q0=Y.sqr(n),t=Y.mul(Q0,n),a=Y.mul(Q0,E),$0=Y.add(Y.sub(t,Y.mul(a,N$0)),Y.mul(Y.sqr(X0),p));return E=Y.mul(n,$0),v=Y.sub(Y.mul(Y.sub(a,$0),X0),Y.mul(t,v)),p=Y.mul(p,t),{Rx:E,Ry:v,Rz:p}}let C=OH0($.params.ateLoopSize),B=gM((x)=>{let E=x,{x:v,y:p}=E.toAffine(),i=v,s=p,X0=Y.neg(p),n=i,r=s,Z0=Y.ONE,e=[];for(let Q0 of C){let t=[];if({Rx:n,Ry:r,Rz:Z0}=I(t,n,r,Z0),Q0)({Rx:n,Ry:r,Rz:Z0}=H(t,n,r,Z0,i,Q0===-1?X0:s));e.push(t)}if($.postPrecompute){let Q0=e[e.length-1];$.postPrecompute(n,r,Z0,i,s,H.bind(null,Q0))}return e});function S(x,E=!1){let v=J.ONE;if(x.length){let p=x[0][0].length;for(let i=0;i<p;i++){v=J.sqr(v);for(let[s,X0,n]of x)for(let[r,Z0,e]of s[i])v=D(r,Z0,e,v,X0,n)}}if(q)v=J.conjugate(v);return E?J.finalExponentiate(v):v}function _(x,E=!0){let v=[];M.ProjectivePoint.normalizeZ(x.map(({g1:p})=>p)),P.ProjectivePoint.normalizeZ(x.map(({g2:p})=>p));for(let{g1:p,g2:i}of x){if(p.equals(M.ProjectivePoint.ZERO)||i.equals(P.ProjectivePoint.ZERO))throw new Error("pairing is not available for ZERO point");p.assertValidity(),i.assertValidity();let s=p.toAffine();v.push([B(i),s.x,s.y])}return S(v,E)}function k(x,E,v=!0){return _([{g1:x,g2:E}],v)}let f={randomPrivateKey:()=>{let x=hM(X.ORDER);return x2($.randomBytes(x),X.ORDER)},calcPairingPrecomputes:B},{ShortSignature:g}=$.G1,{Signature:b}=$.G2;function m(x){return x instanceof M.ProjectivePoint?x:M.ProjectivePoint.fromHex(x)}function l(x,E){return x instanceof M.ProjectivePoint?x:M.hashToCurve(ZQ("point",x),E)}function h(x){return x instanceof P.ProjectivePoint?x:b.fromHex(x)}function c(x,E){return x instanceof P.ProjectivePoint?x:P.hashToCurve(ZQ("point",x),E)}function T(x){return M.ProjectivePoint.fromPrivateKey(x).toRawBytes(!0)}function K(x){return P.ProjectivePoint.fromPrivateKey(x).toRawBytes(!0)}function U(x,E,v){let p=c(x,v);p.assertValidity();let i=p.multiply(M.normPrivateKeyToScalar(E));if(x instanceof P.ProjectivePoint)return i;return b.toRawBytes(i)}function W(x,E,v){let p=l(x,v);p.assertValidity();let i=p.multiply(M.normPrivateKeyToScalar(E));if(x instanceof M.ProjectivePoint)return i;return g.toRawBytes(i)}function V(x,E,v,p){let i=m(v),s=c(E,p),X0=M.ProjectivePoint.BASE,n=h(x),r=_([{g1:i.negate(),g2:s},{g1:X0,g2:n}]);return J.eql(r,J.ONE)}function N(x,E,v,p){let i=h(v),s=l(E,p),X0=P.ProjectivePoint.BASE,n=m(x),r=_([{g1:s,g2:i},{g1:n,g2:X0.negate()}]);return J.eql(r,J.ONE)}function L(x){if(!Array.isArray(x)||x.length===0)throw new Error("expected non-empty array")}function F(x){L(x);let v=x.map(m).reduce((p,i)=>p.add(i),M.ProjectivePoint.ZERO);if(x[0]instanceof M.ProjectivePoint)return v.assertValidity(),v;return v.toRawBytes(!0)}function R(x){L(x);let v=x.map(h).reduce((p,i)=>p.add(i),P.ProjectivePoint.ZERO);if(x[0]instanceof P.ProjectivePoint)return v.assertValidity(),v;return b.toRawBytes(v)}function O(x){L(x);let v=x.map(m).reduce((p,i)=>p.add(i),M.ProjectivePoint.ZERO);if(x[0]instanceof M.ProjectivePoint)return v.assertValidity(),v;return g.toRawBytes(v)}function w(x,E,v,p){if(L(E),v.length!==E.length)throw new Error("amount of public keys and messages should be equal");let i=h(x),s=E.map((Z0)=>c(Z0,p)),X0=v.map(m),n=new Map;for(let Z0=0;Z0<X0.length;Z0++){let e=X0[Z0],Q0=s[Z0],t=n.get(Q0);if(t===void 0)t=[],n.set(Q0,t);t.push(e)}let r=[];try{for(let[Z0,e]of n){let Q0=e.reduce((t,a)=>t.add(a));r.push({g1:Q0,g2:Z0})}return r.push({g1:M.ProjectivePoint.BASE.negate(),g2:i}),J.eql(_(r),J.ONE)}catch{return!1}}return M.ProjectivePoint.BASE._setWindowSize(4),{getPublicKey:T,getPublicKeyForShortSignatures:K,sign:U,signShortSignature:W,verify:V,verifyBatch:w,verifyShortSignature:N,aggregatePublicKeys:F,aggregateSignatures:R,aggregateShortSignatures:O,millerLoopBatch:S,pairing:k,pairingBatch:_,G1:M,G2:P,Signature:b,ShortSignature:g,fields:{Fr:X,Fp:Q,Fp2:Y,Fp6:Z,Fp12:J},params:{ateLoopSize:$.params.ateLoopSize,r:$.params.r,G1b:$.G1.b,G2b:$.G2.b},utils:f}}var VH0,g2,N$0,WW;var WE=y(()=>{QE();u7();Q1();v2();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */VH0=BigInt(0),g2=BigInt(1),N$0=BigInt(2),WW=BigInt(3)});function VE($,Q,X,Y,Z=1,J){let q=BigInt(J===void 0?Y:J),G=X**BigInt(Y),z=[];for(let M=0;M<Z;M++){let j=BigInt(M+1),P=[];for(let D=0,A=VW;D<Y;D++){let I=(j*A-j)/q%G;P.push($.pow(Q,I)),A*=X}z.push(P)}return z}function b2($,Q,X){let Y=Q.pow(X,($.ORDER-VW)/A$0),Z=Q.pow(X,($.ORDER-VW)/Z1);function J(D,A){let I=Q.mul(Q.frobeniusMap(D,1),Y),H=Q.mul(Q.frobeniusMap(A,1),Z);return[I,H]}let q=Q.pow(X,($.ORDER**Z1-VW)/A$0),G=Q.pow(X,($.ORDER**Z1-VW)/Z1);if(!Q.eql(G,Q.neg(Q.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function z(D,A){return[Q.mul(D,q),Q.neg(A)]}let M=(D)=>(A,I)=>{let H=I.toAffine(),C=D(H.x,H.y);return A.fromAffine({x:C[0],y:C[1]})},j=M(J),P=M(z);return{psi:J,psi2:z,G2psi:j,G2psi2:P,PSI_X:Y,PSI_Y:Z,PSI2_X:q,PSI2_Y:G}}function h2($){let{ORDER:Q}=$,X=X1(Q),Y=X.create($.NONRESIDUE||BigInt(-1)),Z=X.div(X.ONE,Z1),J=VE(X,Y,X.ORDER,2)[0],q=({c0:T,c1:K},{c0:U,c1:W})=>({c0:X.add(T,U),c1:X.add(K,W)}),G=({c0:T,c1:K},{c0:U,c1:W})=>({c0:X.sub(T,U),c1:X.sub(K,W)}),z=({c0:T,c1:K},U)=>{if(typeof U==="bigint")return{c0:X.mul(T,U),c1:X.mul(K,U)};let{c0:W,c1:V}=U,N=X.mul(T,W),L=X.mul(K,V),F=X.sub(N,L),R=X.sub(X.mul(X.add(T,K),X.add(W,V)),X.add(N,L));return{c0:F,c1:R}},M=({c0:T,c1:K})=>{let U=X.add(T,K),W=X.sub(T,K),V=X.add(T,T);return{c0:X.mul(U,W),c1:X.mul(V,K)}},j=(T)=>{if(T.length!==2)throw new Error("invalid tuple");let K=T.map((U)=>X.create(U));return{c0:K[0],c1:K[1]}},P=Q*Q,D=j($.FP2_NONRESIDUE),A={ORDER:P,isLE:X.isLE,NONRESIDUE:D,BITS:dJ(P),BYTES:Math.ceil(dJ(P)/8),MASK:i9(dJ(P)),ZERO:{c0:X.ZERO,c1:X.ZERO},ONE:{c0:X.ONE,c1:X.ZERO},create:(T)=>T,isValid:({c0:T,c1:K})=>typeof T==="bigint"&&typeof K==="bigint",is0:({c0:T,c1:K})=>X.is0(T)&&X.is0(K),eql:({c0:T,c1:K},{c0:U,c1:W})=>X.eql(T,U)&&X.eql(K,W),neg:({c0:T,c1:K})=>({c0:X.neg(T),c1:X.neg(K)}),pow:(T,K)=>bM(A,T,K),invertBatch:(T)=>iJ(A,T),add:q,sub:G,mul:z,sqr:M,addN:q,subN:G,mulN:z,sqrN:M,div:(T,K)=>A.mul(T,typeof K==="bigint"?X.inv(X.create(K)):A.inv(K)),inv:({c0:T,c1:K})=>{let U=X.inv(X.create(T*T+K*K));return{c0:X.mul(U,X.create(T)),c1:X.mul(U,X.create(-K))}},sqrt:(T)=>{if($.Fp2sqrt)return $.Fp2sqrt(T);let{c0:K,c1:U}=T;if(X.is0(U))if(yM(X,K)===1)return A.create({c0:X.sqrt(K),c1:X.ZERO});else return A.create({c0:X.ZERO,c1:X.sqrt(X.div(K,Y))});let W=X.sqrt(X.sub(X.sqr(K),X.mul(X.sqr(U),Y))),V=X.mul(X.add(W,K),Z);if(yM(X,V)===-1)V=X.sub(V,W);let L=X.sqrt(V),F=A.create({c0:L,c1:X.div(X.mul(U,Z),L)});if(!A.eql(A.sqr(F),T))throw new Error("Cannot find square root");let R=F,O=A.neg(R),{re:w,im:x}=A.reim(R),{re:E,im:v}=A.reim(O);if(x>v||x===v&&w>E)return R;return O},isOdd:(T)=>{let{re:K,im:U}=A.reim(T),W=K%Z1,V=K===MH0,N=U%Z1;return BigInt(W||V&&N)==VW},fromBytes(T){if(T.length!==A.BYTES)throw new Error("fromBytes invalid length="+T.length);return{c0:X.fromBytes(T.subarray(0,X.BYTES)),c1:X.fromBytes(T.subarray(X.BYTES))}},toBytes:({c0:T,c1:K})=>I8(X.toBytes(T),X.toBytes(K)),cmov:({c0:T,c1:K},{c0:U,c1:W},V)=>({c0:X.cmov(T,U,V),c1:X.cmov(K,W,V)}),reim:({c0:T,c1:K})=>({re:T,im:K}),mulByNonresidue:({c0:T,c1:K})=>A.mul({c0:T,c1:K},D),mulByB:$.Fp2mulByB,fromBigTuple:j,frobeniusMap:({c0:T,c1:K},U)=>({c0:T,c1:X.mul(K,J[U%2])})},I=({c0:T,c1:K,c2:U},{c0:W,c1:V,c2:N})=>({c0:A.add(T,W),c1:A.add(K,V),c2:A.add(U,N)}),H=({c0:T,c1:K,c2:U},{c0:W,c1:V,c2:N})=>({c0:A.sub(T,W),c1:A.sub(K,V),c2:A.sub(U,N)}),C=({c0:T,c1:K,c2:U},W)=>{if(typeof W==="bigint")return{c0:A.mul(T,W),c1:A.mul(K,W),c2:A.mul(U,W)};let{c0:V,c1:N,c2:L}=W,F=A.mul(T,V),R=A.mul(K,N),O=A.mul(U,L);return{c0:A.add(F,A.mulByNonresidue(A.sub(A.mul(A.add(K,U),A.add(N,L)),A.add(R,O)))),c1:A.add(A.sub(A.mul(A.add(T,K),A.add(V,N)),A.add(F,R)),A.mulByNonresidue(O)),c2:A.sub(A.add(R,A.mul(A.add(T,U),A.add(V,L))),A.add(F,O))}},B=({c0:T,c1:K,c2:U})=>{let W=A.sqr(T),V=A.mul(A.mul(T,K),Z1),N=A.mul(A.mul(K,U),Z1),L=A.sqr(U);return{c0:A.add(A.mulByNonresidue(N),W),c1:A.add(A.mulByNonresidue(L),V),c2:A.sub(A.sub(A.add(A.add(V,A.sqr(A.add(A.sub(T,K),U))),N),W),L)}},[S,_]=VE(A,D,X.ORDER,6,2,3),k={ORDER:A.ORDER,isLE:A.isLE,BITS:3*A.BITS,BYTES:3*A.BYTES,MASK:i9(3*A.BITS),ZERO:{c0:A.ZERO,c1:A.ZERO,c2:A.ZERO},ONE:{c0:A.ONE,c1:A.ZERO,c2:A.ZERO},create:(T)=>T,isValid:({c0:T,c1:K,c2:U})=>A.isValid(T)&&A.isValid(K)&&A.isValid(U),is0:({c0:T,c1:K,c2:U})=>A.is0(T)&&A.is0(K)&&A.is0(U),neg:({c0:T,c1:K,c2:U})=>({c0:A.neg(T),c1:A.neg(K),c2:A.neg(U)}),eql:({c0:T,c1:K,c2:U},{c0:W,c1:V,c2:N})=>A.eql(T,W)&&A.eql(K,V)&&A.eql(U,N),sqrt:hX,div:(T,K)=>k.mul(T,typeof K==="bigint"?X.inv(X.create(K)):k.inv(K)),pow:(T,K)=>bM(k,T,K),invertBatch:(T)=>iJ(k,T),add:I,sub:H,mul:C,sqr:B,addN:I,subN:H,mulN:C,sqrN:B,inv:({c0:T,c1:K,c2:U})=>{let W=A.sub(A.sqr(T),A.mulByNonresidue(A.mul(U,K))),V=A.sub(A.mulByNonresidue(A.sqr(U)),A.mul(T,K)),N=A.sub(A.sqr(K),A.mul(T,U)),L=A.inv(A.add(A.mulByNonresidue(A.add(A.mul(U,V),A.mul(K,N))),A.mul(T,W)));return{c0:A.mul(L,W),c1:A.mul(L,V),c2:A.mul(L,N)}},fromBytes:(T)=>{if(T.length!==k.BYTES)throw new Error("fromBytes invalid length="+T.length);return{c0:A.fromBytes(T.subarray(0,A.BYTES)),c1:A.fromBytes(T.subarray(A.BYTES,2*A.BYTES)),c2:A.fromBytes(T.subarray(2*A.BYTES))}},toBytes:({c0:T,c1:K,c2:U})=>I8(A.toBytes(T),A.toBytes(K),A.toBytes(U)),cmov:({c0:T,c1:K,c2:U},{c0:W,c1:V,c2:N},L)=>({c0:A.cmov(T,W,L),c1:A.cmov(K,V,L),c2:A.cmov(U,N,L)}),fromBigSix:(T)=>{if(!Array.isArray(T)||T.length!==6)throw new Error("invalid Fp6 usage");return{c0:A.fromBigTuple(T.slice(0,2)),c1:A.fromBigTuple(T.slice(2,4)),c2:A.fromBigTuple(T.slice(4,6))}},frobeniusMap:({c0:T,c1:K,c2:U},W)=>({c0:A.frobeniusMap(T,W),c1:A.mul(A.frobeniusMap(K,W),S[W%6]),c2:A.mul(A.frobeniusMap(U,W),_[W%6])}),mulByFp2:({c0:T,c1:K,c2:U},W)=>({c0:A.mul(T,W),c1:A.mul(K,W),c2:A.mul(U,W)}),mulByNonresidue:({c0:T,c1:K,c2:U})=>({c0:A.mulByNonresidue(U),c1:T,c2:K}),mul1:({c0:T,c1:K,c2:U},W)=>({c0:A.mulByNonresidue(A.mul(U,W)),c1:A.mul(T,W),c2:A.mul(K,W)}),mul01({c0:T,c1:K,c2:U},W,V){let N=A.mul(T,W),L=A.mul(K,V);return{c0:A.add(A.mulByNonresidue(A.sub(A.mul(A.add(K,U),V),L)),N),c1:A.sub(A.sub(A.mul(A.add(W,V),A.add(T,K)),N),L),c2:A.add(A.sub(A.mul(A.add(T,U),W),N),L)}}},f=VE(A,D,X.ORDER,12,1,6)[0],g=({c0:T,c1:K},{c0:U,c1:W})=>({c0:k.add(T,U),c1:k.add(K,W)}),b=({c0:T,c1:K},{c0:U,c1:W})=>({c0:k.sub(T,U),c1:k.sub(K,W)}),m=({c0:T,c1:K},U)=>{if(typeof U==="bigint")return{c0:k.mul(T,U),c1:k.mul(K,U)};let{c0:W,c1:V}=U,N=k.mul(T,W),L=k.mul(K,V);return{c0:k.add(N,k.mulByNonresidue(L)),c1:k.sub(k.mul(k.add(T,K),k.add(W,V)),k.add(N,L))}},l=({c0:T,c1:K})=>{let U=k.mul(T,K);return{c0:k.sub(k.sub(k.mul(k.add(k.mulByNonresidue(K),T),k.add(T,K)),U),k.mulByNonresidue(U)),c1:k.add(U,U)}};function h(T,K){let U=A.sqr(T),W=A.sqr(K);return{first:A.add(A.mulByNonresidue(W),U),second:A.sub(A.sub(A.sqr(A.add(T,K)),U),W)}}let c={ORDER:A.ORDER,isLE:k.isLE,BITS:2*k.BITS,BYTES:2*k.BYTES,MASK:i9(2*k.BITS),ZERO:{c0:k.ZERO,c1:k.ZERO},ONE:{c0:k.ONE,c1:k.ZERO},create:(T)=>T,isValid:({c0:T,c1:K})=>k.isValid(T)&&k.isValid(K),is0:({c0:T,c1:K})=>k.is0(T)&&k.is0(K),neg:({c0:T,c1:K})=>({c0:k.neg(T),c1:k.neg(K)}),eql:({c0:T,c1:K},{c0:U,c1:W})=>k.eql(T,U)&&k.eql(K,W),sqrt:hX,inv:({c0:T,c1:K})=>{let U=k.inv(k.sub(k.sqr(T),k.mulByNonresidue(k.sqr(K))));return{c0:k.mul(T,U),c1:k.neg(k.mul(K,U))}},div:(T,K)=>c.mul(T,typeof K==="bigint"?X.inv(X.create(K)):c.inv(K)),pow:(T,K)=>bM(c,T,K),invertBatch:(T)=>iJ(c,T),add:g,sub:b,mul:m,sqr:l,addN:g,subN:b,mulN:m,sqrN:l,fromBytes:(T)=>{if(T.length!==c.BYTES)throw new Error("fromBytes invalid length="+T.length);return{c0:k.fromBytes(T.subarray(0,k.BYTES)),c1:k.fromBytes(T.subarray(k.BYTES))}},toBytes:({c0:T,c1:K})=>I8(k.toBytes(T),k.toBytes(K)),cmov:({c0:T,c1:K},{c0:U,c1:W},V)=>({c0:k.cmov(T,U,V),c1:k.cmov(K,W,V)}),fromBigTwelve:(T)=>({c0:k.fromBigSix(T.slice(0,6)),c1:k.fromBigSix(T.slice(6,12))}),frobeniusMap(T,K){let{c0:U,c1:W,c2:V}=k.frobeniusMap(T.c1,K),N=f[K%12];return{c0:k.frobeniusMap(T.c0,K),c1:k.create({c0:A.mul(U,N),c1:A.mul(W,N),c2:A.mul(V,N)})}},mulByFp2:({c0:T,c1:K},U)=>({c0:k.mulByFp2(T,U),c1:k.mulByFp2(K,U)}),conjugate:({c0:T,c1:K})=>({c0:T,c1:k.neg(K)}),mul014:({c0:T,c1:K},U,W,V)=>{let N=k.mul01(T,U,W),L=k.mul1(K,V);return{c0:k.add(k.mulByNonresidue(L),N),c1:k.sub(k.sub(k.mul01(k.add(K,T),U,A.add(W,V)),N),L)}},mul034:({c0:T,c1:K},U,W,V)=>{let N=k.create({c0:A.mul(T.c0,U),c1:A.mul(T.c1,U),c2:A.mul(T.c2,U)}),L=k.mul01(K,W,V),F=k.mul01(k.add(T,K),A.add(U,W),V);return{c0:k.add(k.mulByNonresidue(L),N),c1:k.sub(F,k.add(N,L))}},_cyclotomicSquare:$.Fp12cyclotomicSquare,_cyclotomicExp:$.Fp12cyclotomicExp,finalExponentiate:$.Fp12finalExponentiate};return{Fp:X,Fp2:A,Fp6:k,Fp4Square:h,Fp12:c}}var MH0,VW,Z1,A$0;var OE=y(()=>{u7();Q1();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */MH0=BigInt(0),VW=BigInt(1),Z1=BigInt(2),A$0=BigInt(3)});function c2($){$=$.slice();let Q=$[0]&224,X=!!(Q>>7&1),Y=!!(Q>>6&1),Z=!!(Q>>5&1);return $[0]&=31,{compressed:X,infinity:Y,sort:Z,value:$}}function lM($,Q){if($[0]&224)throw new Error("setMask: non-empty mask");if(Q.compressed)$[0]|=128;if(Q.infinity)$[0]|=64;if(Q.sort)$[0]|=32;return $}function L$0($){$.assertValidity();let Q=$.equals(F8.G1.ProjectivePoint.ZERO),{x:X,y:Y}=$.toAffine();if(Q)return l2.slice();let Z=Z$.ORDER,J=Boolean(Y*lQ/Z);return lM(n8(X,Z$.BYTES),{compressed:!0,sort:J})}function w$0($){$.assertValidity();let Q=Z$.BYTES;if($.equals(F8.G2.ProjectivePoint.ZERO))return I8(l2,n8(DY,Q));let{x:X,y:Y}=$.toAffine(),{re:Z,im:J}=K$.reim(X),{re:q,im:G}=K$.reim(Y),z=G>DY?G*lQ:q*lQ,M=Boolean(z/Z$.ORDER&p2),j=Z;return I8(lM(n8(J,Q),{sort:M,compressed:!0}),n8(j,Q))}var DY,p2,lQ,m2,pM,n7,DH0,Z$,K$,jE,ME,b$,R$0,jH0,PH0,HH0,NH0,C$0,AH0,DE,l2,F8;var T$0=y(()=>{iS();p7();WE();u7();Q1();QE();OE();v2();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */DY=BigInt(0),p2=BigInt(1),lQ=BigInt(2),m2=BigInt(3),pM=BigInt(4),n7=BigInt("0xd201000000010000"),DH0=dJ(n7),{Fp:Z$,Fp2:K$,Fp6:jE,Fp4Square:ME,Fp12:b$}=h2({ORDER:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),FP2_NONRESIDUE:[p2,p2],Fp2mulByB:({c0:$,c1:Q})=>{let X=Z$.mul($,pM),Y=Z$.mul(Q,pM);return{c0:Z$.sub(X,Y),c1:Z$.add(X,Y)}},Fp12cyclotomicSquare:({c0:$,c1:Q})=>{let{c0:X,c1:Y,c2:Z}=$,{c0:J,c1:q,c2:G}=Q,{first:z,second:M}=ME(X,q),{first:j,second:P}=ME(J,Z),{first:D,second:A}=ME(Y,G),I=K$.mulByNonresidue(A);return{c0:jE.create({c0:K$.add(K$.mul(K$.sub(z,X),lQ),z),c1:K$.add(K$.mul(K$.sub(j,Y),lQ),j),c2:K$.add(K$.mul(K$.sub(D,Z),lQ),D)}),c1:jE.create({c0:K$.add(K$.mul(K$.add(I,J),lQ),I),c1:K$.add(K$.mul(K$.add(M,q),lQ),M),c2:K$.add(K$.mul(K$.add(P,G),lQ),P)})}},Fp12cyclotomicExp($,Q){let X=b$.ONE;for(let Y=DH0-1;Y>=0;Y--)if(X=b$._cyclotomicSquare(X),E2(Q,Y))X=b$.mul(X,$);return X},Fp12finalExponentiate:($)=>{let Q=n7,X=b$.div(b$.frobeniusMap($,6),$),Y=b$.mul(b$.frobeniusMap(X,2),X),Z=b$.conjugate(b$._cyclotomicExp(Y,Q)),J=b$.mul(b$.conjugate(b$._cyclotomicSquare(Y)),Z),q=b$.conjugate(b$._cyclotomicExp(J,Q)),G=b$.conjugate(b$._cyclotomicExp(q,Q)),z=b$.mul(b$.conjugate(b$._cyclotomicExp(G,Q)),b$._cyclotomicSquare(Z)),M=b$.conjugate(b$._cyclotomicExp(z,Q)),j=b$.frobeniusMap(b$.mul(Z,G),2),P=b$.frobeniusMap(b$.mul(q,Y),3),D=b$.frobeniusMap(b$.mul(z,b$.conjugate(Y)),1),A=b$.mul(b$.mul(M,b$.conjugate(J)),Y);return b$.mul(b$.mul(b$.mul(j,P),D),A)}}),R$0=X1(BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001")),jH0=eS(K$,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(($)=>$.map((Q)=>K$.fromBigTuple(Q.map(BigInt))))),PH0=eS(Z$,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(($)=>$.map((Q)=>BigInt(Q)))),HH0=UE(K$,{A:K$.create({c0:Z$.create(DY),c1:Z$.create(BigInt(240))}),B:K$.create({c0:Z$.create(BigInt(1012)),c1:Z$.create(BigInt(1012))}),Z:K$.create({c0:Z$.create(BigInt(-2)),c1:Z$.create(BigInt(-1))})}),NH0=UE(Z$,{A:Z$.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:Z$.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:Z$.create(BigInt(11))}),{G2psi:C$0,G2psi2:AH0}=b2(Z$,K$,K$.div(K$.ONE,K$.NONRESIDUE)),DE=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:Z$.ORDER,m:2,k:128,expand:"xmd",hash:$K}),l2=lM(Z$.toBytes(DY),{infinity:!0,compressed:!0});F8=y2({fields:{Fp:Z$,Fp2:K$,Fp6:jE,Fp12:b$,Fr:R$0},G1:{Fp:Z$,h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1"),a:Z$.ZERO,b:pM,htfDefaults:{...DE,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:($,Q)=>{let X=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),Y=new $(Z$.mul(Q.px,X),Q.py,Q.pz);return Q.multiplyUnsafe(n7).negate().multiplyUnsafe(n7).equals(Y)},clearCofactor:($,Q)=>{return Q.multiplyUnsafe(n7).add(Q)},mapToCurve:($)=>{let{x:Q,y:X}=NH0(Z$.create($[0]));return PH0(Q,X)},fromBytes:($)=>{let{compressed:Q,infinity:X,sort:Y,value:Z}=c2($);if(Z.length===48&&Q){let J=Z$.ORDER,q=IQ(Z),G=Z$.create(q&Z$.MASK);if(X){if(G!==DY)throw new Error("G1: non-empty compressed point at infinity");return{x:DY,y:DY}}let z=Z$.add(Z$.pow(G,m2),Z$.create(F8.params.G1b)),M=Z$.sqrt(z);if(!M)throw new Error("invalid compressed G1 point");if(M*lQ/J!==BigInt(Y))M=Z$.neg(M);return{x:Z$.create(G),y:Z$.create(M)}}else if(Z.length===96&&!Q){let J=IQ(Z.subarray(0,Z$.BYTES)),q=IQ(Z.subarray(Z$.BYTES));if(X){if(J!==DY||q!==DY)throw new Error("G1: non-empty point at infinity");return F8.G1.ProjectivePoint.ZERO.toAffine()}return{x:Z$.create(J),y:Z$.create(q)}}else throw new Error("invalid point G1, expected 48/96 bytes")},toBytes:($,Q,X)=>{let Y=Q.equals($.ZERO),{x:Z,y:J}=Q.toAffine();if(X){if(Y)return l2.slice();let q=Z$.ORDER,G=Boolean(J*lQ/q);return lM(n8(Z,Z$.BYTES),{compressed:!0,sort:G})}else if(Y)return I8(new Uint8Array([64]),new Uint8Array(2*Z$.BYTES-1));else return I8(n8(Z,Z$.BYTES),n8(J,Z$.BYTES))},ShortSignature:{fromHex($){let{infinity:Q,sort:X,value:Y}=c2(ZQ("signatureHex",$,48)),Z=Z$.ORDER,J=IQ(Y);if(Q)return F8.G1.ProjectivePoint.ZERO;let q=Z$.create(J&Z$.MASK),G=Z$.add(Z$.pow(q,m2),Z$.create(F8.params.G1b)),z=Z$.sqrt(G);if(!z)throw new Error("invalid compressed G1 point");let M=BigInt(X);if(z*lQ/Z!==M)z=Z$.neg(z);let j=F8.G1.ProjectivePoint.fromAffine({x:q,y:z});return j.assertValidity(),j},toRawBytes($){return L$0($)},toHex($){return eq(L$0($))}}},G2:{Fp:K$,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),Gx:K$.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:K$.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")]),a:K$.ZERO,b:K$.fromBigTuple([pM,pM]),hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...DE},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:($)=>{let{x:Q,y:X}=HH0(K$.fromBigTuple($));return jH0(Q,X)},isTorsionFree:($,Q)=>{return Q.multiplyUnsafe(n7).negate().equals(C$0($,Q))},clearCofactor:($,Q)=>{let X=n7,Y=Q.multiplyUnsafe(X).negate(),Z=C$0($,Q),J=Q.double();return J=AH0($,J),J=J.subtract(Z),Z=Y.add(Z),Z=Z.multiplyUnsafe(X).negate(),J=J.add(Z),J=J.subtract(Y),J.subtract(Q)},fromBytes:($)=>{let{compressed:Q,infinity:X,sort:Y,value:Z}=c2($);if(!Q&&!X&&Y||!Q&&X&&Y||Y&&X&&Q)throw new Error("invalid encoding flag: "+($[0]&224));let J=Z$.BYTES,q=(G,z,M)=>IQ(G.slice(z,M));if(Z.length===96&&Q){let G=F8.params.G2b,z=Z$.ORDER;if(X){if(Z.reduce((H,C)=>H!==0?C+1:C,0)>0)throw new Error("invalid compressed G2 point");return{x:K$.ZERO,y:K$.ZERO}}let M=q(Z,0,J),j=q(Z,J,2*J),P=K$.create({c0:Z$.create(j),c1:Z$.create(M)}),D=K$.add(K$.pow(P,m2),G),A=K$.sqrt(D),I=A.c1===DY?A.c0*lQ/z:A.c1*lQ/z?p2:DY;return A=Y&&I>0?A:K$.neg(A),{x:P,y:A}}else if(Z.length===192&&!Q){if(X){if(Z.reduce((P,D)=>P!==0?D+1:D,0)>0)throw new Error("invalid uncompressed G2 point");return{x:K$.ZERO,y:K$.ZERO}}let G=q(Z,0,J),z=q(Z,J,2*J),M=q(Z,2*J,3*J),j=q(Z,3*J,4*J);return{x:K$.fromBigTuple([z,G]),y:K$.fromBigTuple([j,M])}}else throw new Error("invalid point G2, expected 96/192 bytes")},toBytes:($,Q,X)=>{let{BYTES:Y,ORDER:Z}=Z$,J=Q.equals($.ZERO),{x:q,y:G}=Q.toAffine();if(X){if(J)return I8(l2,n8(DY,Y));let z=Boolean(G.c1===DY?G.c0*lQ/Z:G.c1*lQ/Z);return I8(lM(n8(q.c1,Y),{compressed:!0,sort:z}),n8(q.c0,Y))}else{if(J)return I8(new Uint8Array([64]),new Uint8Array(4*Y-1));let{re:z,im:M}=K$.reim(q),{re:j,im:P}=K$.reim(G);return I8(n8(M,Y),n8(z,Y),n8(P,Y),n8(j,Y))}},Signature:{fromHex($){let{infinity:Q,sort:X,value:Y}=c2(ZQ("signatureHex",$)),Z=Z$.ORDER,J=Y.length/2;if(J!==48&&J!==96)throw new Error("invalid compressed signature length, must be 96 or 192");let q=IQ(Y.slice(0,J)),G=IQ(Y.slice(J));if(Q)return F8.G2.ProjectivePoint.ZERO;let z=Z$.create(q&Z$.MASK),M=Z$.create(G),j=K$.create({c0:M,c1:z}),P=K$.add(K$.pow(j,m2),F8.params.G2b),D=K$.sqrt(P);if(!D)throw new Error("Failed to find a square root");let{re:A,im:I}=K$.reim(D),H=BigInt(X),C=I>DY&&I*lQ/Z!==H,B=I===DY&&A*lQ/Z!==H;if(C||B)D=K$.neg(D);let S=F8.G2.ProjectivePoint.fromAffine({x:j,y:D});return S.assertValidity(),S},toRawBytes($){return w$0($)},toHex($){return eq(w$0($))}}},params:{ateLoopSize:n7,r:R$0.ORDER,xNegative:!0,twistType:"multiplicative"},htfDefaults:DE,hash:$K,randomBytes:zW})});function PE($,Q){if(z$($)>=w2)throw new G0(G0.errorMessages.BLS_12_381_FP_NOT_IN_FIELD);if(z$(Q)>=w2)throw new G0(G0.errorMessages.BLS_12_381_FP_NOT_IN_FIELD);let X=J8($.subarray(16),Q.subarray(16));return F8.fields.Fp2.fromBytes(X)}function uM($,Q=!0){if(g$($,pS)===!0)return n2;let X=z$($.subarray(16,HZ/2)),Y=z$($.subarray(80,HZ)),Z=F8.G1.ProjectivePoint.fromAffine({x:X,y:Y});try{Z.assertValidity()}catch(J){if(Q||J.message!=="bad point: not in prime-order subgroup")throw new G0(G0.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE)}return Z}function u2($){let Q=M$(N$($.x),64),X=M$(N$($.y),64);return J8(Q,X)}function dM($,Q=!0){if(g$($,lS)===!0)return o2;let X=$.subarray(0,64),Y=$.subarray(64,q9/2),Z=$.subarray(128,192),J=$.subarray(192,q9),q=PE(X,Y),G=PE(Z,J),z=F8.G2.ProjectivePoint.fromAffine({x:q,y:G});try{z.assertValidity()}catch(M){if(Q||M.message!=="bad point: not in prime-order subgroup")throw new G0(G0.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE)}return z}function d2($){let Q=M$(N$($.x.c0),64),X=M$(N$($.x.c1),64),Y=M$(N$($.y.c0),64),Z=M$(N$($.y.c1),64);return J8(Q,X,Y,Z)}function i2($){let Q=F8.fields.Fr.fromBytes($);return F8.fields.Fr.create(Q)}function RH0($){if(z$($)>=w2)throw new G0(G0.errorMessages.BLS_12_381_FP_NOT_IN_FIELD);return F8.fields.Fp.fromBytes($.slice(16))}class OW{addG1($){let Q=uM($.subarray(0,HZ),!1),X=uM($.subarray(HZ,HZ*2),!1),Y=Q.add(X);return u2(Y)}mulG1($){let Q=uM($.subarray(0,HZ)),X=i2($.subarray(HZ,160));if(X===q0)return pS;let Y=Q.multiplyUnsafe(X);return u2(Y)}addG2($){let Q=dM($.subarray(0,q9),!1),X=dM($.subarray(q9,q9*2),!1),Y=Q.add(X);return d2(Y)}mulG2($){let Q=dM($.subarray(0,q9)),X=i2($.subarray(q9,288));if(X===q0)return lS;let Y=Q.multiplyUnsafe(X);return d2(Y)}mapFPtoG1($){let Q=RH0($.subarray(0,64)),X=F8.G1.mapToCurve([Q]).toAffine();return u2(X)}mapFP2toG2($){let Q=PE($.subarray(0,64),$.subarray(64,128)),X=F8.G2.mapToCurve([Q.c0,Q.c1]).toAffine();return d2(X)}msmG1($){let X=$.length/160,Y=n2;for(let Z=0;Z<X;Z++){let J=160*Z,q=uM($.subarray(J,J+HZ)),G=i2($.subarray(J+HZ,J+160)),z;if(G===q0)z=n2;else z=q.multiplyUnsafe(G);Y=Y.add(z)}return u2(Y)}msmG2($){let X=$.length/288,Y=o2;for(let Z=0;Z<X;Z++){let J=288*Z,q=dM($.subarray(J,J+q9)),G=i2($.subarray(J+q9,J+288)),z;if(G===q0)z=o2;else z=q.multiplyUnsafe(G);Y=Y.add(z)}return d2(Y)}pairingCheck($){let X=[];for(let J=0;J<$.length/384;J++){let q=384*J,G=uM($.subarray(q,q+HZ)),z=q+HZ,M=dM($.subarray(z,z+q9));X.push({g1:G,g2:M})}let Y=X.filter((J)=>!J.g1.equals(n2)&&!J.g2.equals(o2)),Z=F8.pairingBatch(Y,!0);if(F8.fields.Fp12.eql(Z,F8.fields.Fp12.ONE))return m00;else return h00}}var n2,o2;var I$0=y(()=>{R$();T$0();YQ();uS();n2=F8.G1.ProjectivePoint.ZERO,o2=F8.G2.ProjectivePoint.ZERO});var CH0,r2=($,Q,X)=>{let Y=X[X.length-1][1],Z;if($<=X.length)if($===0)Z=0;else Z=X[$-1][1];else Z=Y;return BigInt($)*Q*BigInt(Z)/BigInt(1000)},gY=($,Q,X,Y=0)=>{for(let Z in Q){let J=$.data.subarray(Q[Z][0]+Y,Q[Z][1]+Y);if(g$(J,CH0)!==!0){if($._debug!==void 0)$._debug(`${X} failed: Point not on curve`);return!1}}return!0};var F$0=y(()=>{R$();CH0=new Uint8Array(16)});var J1=y(()=>{uS();I$0();F$0()});async function HE($){let Q=y$("0b"),X=$._EVM._bls,Y=$.common.param("bls12381G1AddGas")??BigInt(0);if(!l$($,Y,Q))return j$($.gasLimit);if(!m7($,256,Q))return P$(new G0(G0.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),$.gasLimit);if(!gY($,[[0,16],[64,80],[128,144],[192,208]],Q))return P$(new G0(G0.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),$.gasLimit);let J;try{J=X.addG1($.data)}catch(q){if($._debug!==void 0)$._debug(`${Q} failed: ${q.message}`);return P$(q,$.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${e0(J)}`);return{executionGasUsed:Y,returnValue:J}}var B$0=y(()=>{R$();YQ();TQ();J1();e8();pQ()});async function NE($){let Q=y$("0d"),X=$._EVM._bls,Y=$.data;if(Y.length===0){if($._debug!==void 0)$._debug(`${Q} failed: Empty input`);return P$(new G0(G0.errorMessages.BLS_12_381_INPUT_EMPTY),$.gasLimit)}let Z=Math.floor(Y.length/160),J=$.common.param("bls12381G1MulGas")??BigInt(0),q=r2(Z,J,c00);if(!l$($,q,Q))return j$($.gasLimit);if(Y.length%160!==0){if($._debug!==void 0)$._debug(`${Q} failed: Invalid input length length=${Y.length}`);return P$(new G0(G0.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),$.gasLimit)}if(!c7($,160,Q))return P$(new G0(G0.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),$.gasLimit);let G=[[0,16],[64,80]];for(let M=0;M<Z;M++){let j=160*M;if(!gY($,G,Q,j))return P$(new G0(G0.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),$.gasLimit)}let z;try{z=X.msmG1($.data)}catch(M){if($._debug!==void 0)$._debug(`${Q} failed: ${M.message}`);return P$(M,$.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${e0(z)}`);return{executionGasUsed:q,returnValue:z}}var S$0=y(()=>{R$();YQ();TQ();J1();e8();pQ()});async function AE($){let Q=y$("0e"),X=$._EVM._bls,Y=$.common.param("bls12381G2AddGas")??BigInt(0);if(!l$($,Y,Q))return j$($.gasLimit);if(!m7($,512,Q))return P$(new G0(G0.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),$.gasLimit);if(!gY($,[[0,16],[64,80],[128,144],[192,208],[256,272],[320,336],[384,400],[448,464]],Q))return P$(new G0(G0.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),$.gasLimit);let J;try{J=X.addG2($.data)}catch(q){return P$(q,$.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${e0(J)}`);return{executionGasUsed:Y,returnValue:J}}var E$0=y(()=>{R$();YQ();TQ();J1();e8();pQ()});async function RE($){let Q=y$("10"),X=$._EVM._bls;if($.data.length===0){if($._debug!==void 0)$._debug(`${Q} failed: Empty input`);return P$(new G0(G0.errorMessages.BLS_12_381_INPUT_EMPTY),$.gasLimit)}let Y=Math.floor($.data.length/288),Z=$.common.param("bls12381G2MulGas")??BigInt(0),J=r2(Y,Z,p00);if(!l$($,J,Q))return j$($.gasLimit);if(!c7($,288,Q))return P$(new G0(G0.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),$.gasLimit);let q=[[0,16],[64,80],[128,144],[192,208]];for(let z=0;z<Y;z++){let M=288*z;if(!gY($,q,Q,M))return P$(new G0(G0.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),$.gasLimit)}let G;try{G=X.msmG2($.data)}catch(z){if($._debug!==void 0)$._debug(`${Q} failed: ${z.message}`);return P$(z,$.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${e0(G)}`);return{executionGasUsed:J,returnValue:G}}var _$0=y(()=>{R$();YQ();TQ();J1();e8();pQ()});async function CE($){let Q=y$("11"),X=$._EVM._bls,Y=$.common.param("bls12381PairingBaseGas")??BigInt(0);if($.data.length===0){if($._debug!==void 0)$._debug(`${Q} failed: Empty input`);return P$(new G0(G0.errorMessages.BLS_12_381_INPUT_EMPTY),$.gasLimit)}let Z=$.common.param("bls12381PairingPerPairGas")??BigInt(0);if(!c7($,384,Q))return P$(new G0(G0.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),$.gasLimit);let J=Y+Z*BigInt(Math.floor($.data.length/384));if(!l$($,J,Q))return j$($.gasLimit);let q=[[0,16],[64,80],[128,144],[192,208],[256,272],[320,336]];for(let z=0;z<$.data.length/384;z++){let M=384*z;if(!gY($,q,Q,M))return P$(new G0(G0.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),$.gasLimit)}let G;try{G=X.pairingCheck($.data)}catch(z){if($._debug!==void 0)$._debug(`${Q} failed: ${z.message}`);return P$(z,$.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${e0(G)}`);return{executionGasUsed:J,returnValue:G}}var k$0=y(()=>{R$();YQ();TQ();J1();e8();pQ()});function LE($){let Q=y$("01"),X=$.common.customCrypto.ecrecover??Ee,Y=$.common.param("ecRecoverGas");if(!l$($,Y,Q))return j$($.gasLimit);let Z=S8($.data,128),J=Z.subarray(0,32),q=Z.subarray(32,64),G=z$(q);if(G!==G2&&G!==Je){if($._debug!==void 0)$._debug(`${Q} failed: v neither 27 nor 28`);return{executionGasUsed:Y,returnValue:new Uint8Array}}let z=Z.subarray(64,96),M=Z.subarray(96,128),j;try{if($._debug!==void 0)$._debug(`${Q}: PK recovery with msgHash=${e0(J)} v=${e0(q)} r=${e0(z)}s=${e0(M)}}`);j=X(J,z$(q),z,M)}catch{if($._debug!==void 0)$._debug(`${Q} failed: PK recovery failed`);return{executionGasUsed:Y,returnValue:new Uint8Array(0)}}let P=M$(Le(j),32);if($._debug!==void 0)$._debug(`${Q} return address=${e0(P)}`);return{executionGasUsed:Y,returnValue:P}}var x$0=y(()=>{R$();TQ();e8();pQ()});function wE($){let Q=y$("02"),X=$.data,Y=$.common.customCrypto.sha256??o6,Z=$.common.param("sha256Gas");if(Z+=$.common.param("sha256WordGas")*BigInt(Math.ceil(X.length/32)),!l$($,Z,Q))return j$($.gasLimit);let J=Y(X);if($._debug!==void 0)$._debug(`${Q} return hash=${e0(J)}`);return{executionGasUsed:Z,returnValue:J}}var f$0=y(()=>{R$();Q2();TQ();e8();pQ()});function v$0($,Q,X,Y){if($===0)return Q^X^Y;if($===1)return Q&X|~Q&Y;if($===2)return(Q|~X)^Y;if($===3)return Q&Y|X&~Y;return Q^(X|~Y)}var LH0,g$0,wH0,y$0,b$0,h$0,m$0,TH0,IH0,FH0,BH0,s2,c$0,p$0;var l$0=y(()=>{SB();m9();LH0=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),g$0=(()=>Uint8Array.from(new Array(16).fill(0).map(($,Q)=>Q)))(),wH0=(()=>g$0.map(($)=>(9*$+5)%16))(),y$0=(()=>{let X=[[g$0],[wH0]];for(let Y=0;Y<4;Y++)for(let Z of X)Z.push(Z[Y].map((J)=>LH0[J]));return X})(),b$0=(()=>y$0[0])(),h$0=(()=>y$0[1])(),m$0=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(($)=>Uint8Array.from($)),TH0=b$0.map(($,Q)=>$.map((X)=>m$0[Q][X])),IH0=h$0.map(($,Q)=>$.map((X)=>m$0[Q][X])),FH0=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),BH0=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);s2=new Uint32Array(16);c$0=class c$0 extends WM{constructor(){super(64,20,8,!0);this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:$,h1:Q,h2:X,h3:Y,h4:Z}=this;return[$,Q,X,Y,Z]}set($,Q,X,Y,Z){this.h0=$|0,this.h1=Q|0,this.h2=X|0,this.h3=Y|0,this.h4=Z|0}process($,Q){for(let D=0;D<16;D++,Q+=4)s2[D]=$.getUint32(Q,!0);let X=this.h0|0,Y=X,Z=this.h1|0,J=Z,q=this.h2|0,G=q,z=this.h3|0,M=z,j=this.h4|0,P=j;for(let D=0;D<5;D++){let A=4-D,I=FH0[D],H=BH0[D],C=b$0[D],B=h$0[D],S=TH0[D],_=IH0[D];for(let k=0;k<16;k++){let f=UM(X+v$0(D,Z,q,z)+s2[C[k]]+I,S[k])+j|0;X=j,j=z,z=UM(q,10)|0,q=Z,Z=f}for(let k=0;k<16;k++){let f=UM(Y+v$0(A,J,G,M)+s2[B[k]]+H,_[k])+P|0;Y=P,P=M,M=UM(G,10)|0,G=J,J=f}}this.set(this.h1+q+M|0,this.h2+z+P|0,this.h3+j+Y|0,this.h4+X+J|0,this.h0+Z+G|0)}roundClean(){OZ(s2)}destroy(){this.destroyed=!0,OZ(this.buffer),this.set(0,0,0,0,0)}};p$0=u6(()=>new c$0)});var TE;var u$0=y(()=>{l$0();n6();TE=uq(p$0)});function IE($){let Q=y$("03"),X=$.data,Y=$.common.param("ripemd160Gas");if(Y+=$.common.param("ripemd160WordGas")*BigInt(Math.ceil(X.length/32)),!l$($,Y,Q))return j$($.gasLimit);let Z=M$(TE(X),32);if($._debug!==void 0)$._debug(`${Q} return hash=${e0(Z)}`);return{executionGasUsed:Y,returnValue:M$(TE(X),32)}}var d$0=y(()=>{R$();u$0();TQ();e8();pQ()});function FE($){let Q=y$("04"),X=$.data,Y=$.common.param("identityGas");if(Y+=$.common.param("identityWordGas")*BigInt(Math.ceil(X.length/32)),!l$($,Y,Q))return j$($.gasLimit);if($._debug!==void 0)$._debug(`${Q} return data=${s6($.data)}`);return{executionGasUsed:Y,returnValue:Uint8Array.from(X)}}var i$0=y(()=>{R$();TQ();e8();pQ()});function gH0($){let Q,X;if($<=g7)return $**xY;else if($<=kH0)return Q=$**xY/SH0,X=$*CM,Q+X-xH0;else return Q=$**xY/EH0,X=$*_H0,Q+X-fH0}function yH0($){let Q=($+q2)/cJ;return Q*Q}function bH0($){let Q;try{let j=z$($.subarray(0,32));Q=96+Number(j)}catch{Q=Number.MAX_SAFE_INTEGER-32}let X=z$($.subarray(32,64)),Y=$.subarray(Q,Q+32);Y=S8(Y,32);let Z=z$(Y),J=0;if(X<i8)J=32-Number(X);Z=Z>>cJ*BigInt(Math.max(J,0));let q=-1;while(Z>q0)q=q+1,Z=Z>>D$;let G=X-i8;if(G<q0)G=q0;let M=G*cJ;if(q>0)M+=BigInt(q);return M}function hH0($,Q,X){if(Q===q0)return D$%X;let Y=D$;while(Q>q0){if(Q&D$)Y=Y*$%X;$=$*$%X,Q>>=D$}return Y}function SE($){let Q=y$("05"),X=$.data.length<96?S8($.data,96):$.data,Y=bH0(X);if(Y<D$)Y=D$;let Z=z$(X.subarray(0,32)),J=z$(X.subarray(32,64)),q=z$(X.subarray(64,96)),G=Z;if(G<q)G=q;let z=$.common.param("modexpGquaddivisorGas"),M,j=CM,P=j+Z,D=P,A=D+J,I=A,H=I+q;if(!$.common.isActivatedEIP(2565))M=Y*gH0(G)/z;else if(M=Y*yH0(G)/z,M<n$0)M=n$0;if(!l$($,M,Q))return j$($.gasLimit);if(Z===q0&&q===q0)return{executionGasUsed:M,returnValue:new Uint8Array};if(Z>BE||J>BE||q>BE){if($._debug!==void 0)$._debug(`${Q} failed: OOG`);return j$($.gasLimit)}if(H>vH0){if($._debug!==void 0)$._debug(`${Q} failed: OOG`);return j$($.gasLimit)}let C=z$(S8(X.subarray(Number(j),Number(P)),Number(Z))),B=z$(S8(X.subarray(Number(D),Number(A)),Number(J))),S=z$(S8(X.subarray(Number(I),Number(H)),Number(q))),_;if(S===q0)_=new Uint8Array;else if(_=hH0(C,B,S),_===q0)_=new Uint8Array;else _=N$(_);let k=M$(_,Number(q));if($._debug!==void 0)$._debug(`${Q} return value=${e0(k)}`);return{executionGasUsed:M,returnValue:k}}var SH0,EH0,n$0,_H0,kH0,xH0,fH0,vH0,BE;var o$0=y(()=>{R$();TQ();e8();pQ();SH0=BigInt(4),EH0=BigInt(16),n$0=BigInt(200),_H0=BigInt(480),kH0=BigInt(1024),xH0=BigInt(3072),fH0=BigInt(199680),vH0=BigInt(Number.MAX_SAFE_INTEGER),BE=BigInt(2147483647)});function EE($){let Q=y$("06"),X=$.common.param("bn254AddGas");if(!l$($,X,Q))return j$($.gasLimit);let Y=S8($.data.subarray(0,128),128),Z;try{Z=$._EVM._bn254.add(Y)}catch(J){if($._debug!==void 0)$._debug(`${Q} failed: ${J.message}`);return P$(J,$.gasLimit)}if(Z.length!==64){if($._debug!==void 0)$._debug(`${Q} failed: OOG`);return j$($.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${e0(Z)}`);return{executionGasUsed:X,returnValue:Z}}var r$0=y(()=>{R$();TQ();e8();pQ()});function _E($){let Q=y$("07"),X=$.common.param("bn254MulGas");if(!l$($,X,Q))return j$($.gasLimit);let Y=S8($.data.subarray(0,128),128),Z;try{Z=$._EVM._bn254.mul(Y)}catch(J){if($._debug!==void 0)$._debug(`${Q} failed: ${J.message}`);return P$(J,$.gasLimit)}if(Z.length!==64){if($._debug!==void 0)$._debug(`${Q} failed: OOG`);return j$($.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${e0(Z)}`);return{executionGasUsed:X,returnValue:Z}}var s$0=y(()=>{R$();TQ();e8();pQ()});function kE($){let Q=y$("08");if(!c7($,192,Q))return P$(new G0(G0.errorMessages.INVALID_INPUT_LENGTH),$.gasLimit);let X=BigInt(Math.floor($.data.length/192)),Y=$.common.param("bn254PairingGas")+X*$.common.param("bn254PairingWordGas");if(!l$($,Y,Q))return j$($.gasLimit);let Z;try{Z=$._EVM._bn254.pairing($.data)}catch(J){if($._debug!==void 0)$._debug(`${Q} failed: ${J.message}`);return P$(J,$.gasLimit)}if(Z.length!==32){if($._debug!==void 0)$._debug(`${Q} failed: OOG`);return j$($.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${e0(Z)}`);return{executionGasUsed:Y,returnValue:Z}}var a$0=y(()=>{R$();YQ();TQ();e8();pQ()});function a2($,Q,X){let Y=$[Q]+$[X],Z=$[Q+1]+$[X+1];if(Y>=4294967296)Z++;$[Q]=Y,$[Q+1]=Z}function t$0($,Q,X,Y){let Z=$[Q]+X;if(X<0)Z+=4294967296;let J=$[Q+1]+Y;if(Z>=4294967296)J++;$[Q]=Z,$[Q+1]=J}function o7($,Q,X,Y,Z,J,q,G){let z=Q[q],M=Q[q+1],j=Q[G],P=Q[G+1];a2($,X,Y),t$0($,X,z,M);let D=$[J]^$[X],A=$[J+1]^$[X+1];$[J]=A,$[J+1]=D,a2($,Z,J),D=$[Y]^$[Z],A=$[Y+1]^$[Z+1],$[Y]=D>>>24^A<<8,$[Y+1]=A>>>24^D<<8,a2($,X,Y),t$0($,X,j,P),D=$[J]^$[X],A=$[J+1]^$[X+1],$[J]=D>>>16^A<<16,$[J+1]=A>>>16^D<<16,a2($,Z,J),D=$[Y]^$[Z],A=$[Y+1]^$[Z+1],$[Y]=A>>>31^D<<1,$[Y+1]=D>>>31^A<<1}function pH0($,Q,X,Y,Z){let J=new Uint32Array(32),q=0;for(q=0;q<16;q++)J[q]=$[q],J[q+16]=mH0[q];if(J[24]=J[24]^X[0],J[25]=J[25]^X[1],J[26]=J[26]^X[2],J[27]=J[27]^X[3],Y)J[28]=~J[28],J[29]=~J[29];for(q=0;q<Z;q++){let G=q%10*16;o7(J,Q,0,8,16,24,cX[G+0],cX[G+1]),o7(J,Q,2,10,18,26,cX[G+2],cX[G+3]),o7(J,Q,4,12,20,28,cX[G+4],cX[G+5]),o7(J,Q,6,14,22,30,cX[G+6],cX[G+7]),o7(J,Q,0,10,20,30,cX[G+8],cX[G+9]),o7(J,Q,2,12,22,24,cX[G+10],cX[G+11]),o7(J,Q,4,14,16,26,cX[G+12],cX[G+13]),o7(J,Q,6,8,18,28,cX[G+14],cX[G+15])}for(q=0;q<16;q++)$[q]=$[q]^J[q]^J[q+16]}function xE($){let Q=y$("09"),X=$.data;if(X.length!==213){if($._debug!==void 0)$._debug(`${Q} failed: OUT_OF_RANGE dataLength=${X.length}`);return{returnValue:new Uint8Array(0),executionGasUsed:$.gasLimit,exceptionError:new G0(G0.errorMessages.OUT_OF_RANGE)}}let Y=X.subarray(212,213)[0];if(Y!==1&&Y!==0){if($._debug!==void 0)$._debug(`${Q} failed: OUT_OF_RANGE lastByte=${Y}`);return{returnValue:new Uint8Array(0),executionGasUsed:$.gasLimit,exceptionError:new G0(G0.errorMessages.OUT_OF_RANGE)}}let Z=new DataView(X.buffer,X.byteOffset).getUint32(0),J=new DataView(X.buffer,X.byteOffset+4,64),q=new DataView(X.buffer,X.byteOffset+68,128),G=new DataView(X.buffer,X.byteOffset+196,16),z=Y===1,M=$.common.param("blake2RoundGas");if(M*=BigInt(Z),!l$($,M,Q))return j$($.gasLimit);let j=new Uint32Array(16);for(let H=0;H<16;H++)j[H]=J.getUint32(H*4,!0);let P=new Uint32Array(32);for(let H=0;H<32;H++)P[H]=q.getUint32(H*4,!0);let D=new Uint32Array(4);for(let H=0;H<4;H++)D[H]=G.getUint32(H*4,!0);pH0(j,P,D,z,Z);let A=new Uint8Array(64),I=new DataView(A.buffer);for(let H=0;H<16;H++)I.setUint32(H*4,j[H],!0);if($._debug!==void 0)$._debug(`${Q} return hash=${e0(A)}`);return{executionGasUsed:M,returnValue:A}}var mH0,cH0,cX;var e$0=y(()=>{R$();YQ();TQ();e8();pQ();mH0=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),cH0=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],cX=new Uint8Array(cH0.map(function($){return $*2}))});async function fE($){let Q=y$("12"),X=$._EVM._bls,Y=$.common.param("bls12381MapG1Gas")??BigInt(0);if(!l$($,Y,Q))return j$($.gasLimit);if(!m7($,64,Q))return P$(new G0(G0.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),$.gasLimit);if(!gY($,[[0,16]],Q))return P$(new G0(G0.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),$.gasLimit);let J;try{J=X.mapFPtoG1($.data)}catch(q){if($._debug!==void 0)$._debug(`${Q} failed: ${q.message}`);return P$(q,$.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${e0(J)}`);return{executionGasUsed:Y,returnValue:J}}var $80=y(()=>{R$();YQ();TQ();J1();e8();pQ()});async function vE($){let Q=y$("13"),X=$._EVM._bls,Y=$.common.param("bls12381MapG2Gas")??BigInt(0);if(!l$($,Y,Q))return j$($.gasLimit);if(!m7($,128,Q))return P$(new G0(G0.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),$.gasLimit);if(!gY($,[[0,16],[64,80]],Q))return P$(new G0(G0.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),$.gasLimit);let J;try{J=X.mapFP2toG2($.data)}catch(q){if($._debug!==void 0)$._debug(`${Q} failed: ${q.message}`);return P$(q,$.gasLimit)}if($._debug!==void 0)$._debug(`${Q} return value=${e0(J)}`);return{executionGasUsed:Y,returnValue:J}}var Q80=y(()=>{R$();YQ();TQ();J1();e8();pQ()});var gE,yE=($,Q,X)=>new gE($,Q).update(X).digest();var X80=y(()=>{p7();gE=class gE extends xM{constructor($,Q){super();this.finished=!1,this.destroyed=!1,u00($);let X=kM(Q);if(this.iHash=$.create(),typeof this.iHash.update!=="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let Y=this.blockLen,Z=new Uint8Array(Y);Z.set(X.length>Y?$.create().update(X).digest():X);for(let J=0;J<Z.length;J++)Z[J]^=54;this.iHash.update(Z),this.oHash=$.create();for(let J=0;J<Z.length;J++)Z[J]^=106;this.oHash.update(Z),e4(Z)}update($){return GW(this),this.iHash.update($),this}digestInto($){GW(this),t4($,this.outputLen),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||($=Object.create(Object.getPrototypeOf(this),{}));let{oHash:Q,iHash:X,finished:Y,destroyed:Z,blockLen:J,outputLen:q}=this;return $=$,$.finished=Y,$.destroyed=Z,$.blockLen=J,$.outputLen=q,$.oHash=Q._cloneInto($.oHash),$.iHash=X._cloneInto($.iHash),$}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};yE.create=($,Q)=>new gE($,Q)});function Y80($){return{hash:$,hmac:(Q,...X)=>yE($,Q,i00(...X)),randomBytes:zW}}var Z80=y(()=>{X80();p7();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */});var lH0,r7,uH0,G80,t2,dH0,iH0,J80,z80,MW,j8,mE,bE,G8,nH0,q80,hE,oH0=($,Q,X,Y,Z,J)=>{let q=q80(Y,Z);({Rx:$,Ry:Q,Rz:X}=J($,Q,X,q[0],q[1]));let G=q80(q[0],q[1]);J($,Q,X,G[0],j8.neg(G[1]))},MX,D9$;var K80=y(()=>{iS();p7();Z80();WE();u7();OE();Q1();v2();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */lH0=BigInt(1),r7=BigInt(2),uH0=BigInt(3),G80=BigInt(6),t2=BigInt("4965661367192848881"),dH0=dJ(t2),iH0=G80*t2**r7,J80=X1(BigInt("21888242871839275222246405745257275088548364400416034343698204186575808495617")),z80={c0:BigInt("19485874751759354771024239261021720505790618469301721065564631296452457478373"),c1:BigInt("266929791119991161246907387137283842545076965332900288569378510910307636690")},{Fp:MW,Fp2:j8,Fp6:mE,Fp4Square:bE,Fp12:G8}=h2({ORDER:BigInt("21888242871839275222246405745257275088696311157297823662689037894645226208583"),FP2_NONRESIDUE:[BigInt(9),lH0],Fp2mulByB:($)=>j8.mul($,z80),Fp12cyclotomicSquare:({c0:$,c1:Q})=>{let{c0:X,c1:Y,c2:Z}=$,{c0:J,c1:q,c2:G}=Q,{first:z,second:M}=bE(X,q),{first:j,second:P}=bE(J,Z),{first:D,second:A}=bE(Y,G),I=j8.mulByNonresidue(A);return{c0:mE.create({c0:j8.add(j8.mul(j8.sub(z,X),r7),z),c1:j8.add(j8.mul(j8.sub(j,Y),r7),j),c2:j8.add(j8.mul(j8.sub(D,Z),r7),D)}),c1:mE.create({c0:j8.add(j8.mul(j8.add(I,J),r7),I),c1:j8.add(j8.mul(j8.add(M,q),r7),M),c2:j8.add(j8.mul(j8.add(P,G),r7),P)})}},Fp12cyclotomicExp($,Q){let X=G8.ONE;for(let Y=dH0-1;Y>=0;Y--)if(X=G8._cyclotomicSquare(X),E2(Q,Y))X=G8.mul(X,$);return X},Fp12finalExponentiate:($)=>{let Q=(j)=>G8.conjugate(G8._cyclotomicExp(j,t2)),X=G8.mul(G8.conjugate($),G8.inv($)),Y=G8.mul(G8.frobeniusMap(X,2),X),Z=G8._cyclotomicSquare(Q(Y)),J=G8.mul(G8._cyclotomicSquare(Z),Z),q=Q(J),G=Q(G8._cyclotomicSquare(q)),z=G8.mul(G8.mul(G8.conjugate(G),q),G8.conjugate(J)),M=G8.mul(z,Z);return G8.mul(G8.frobeniusMap(G8.mul(G8.conjugate(Y),M),3),G8.mul(G8.frobeniusMap(z,2),G8.mul(G8.frobeniusMap(M,1),G8.mul(G8.mul(z,q),Y))))}}),{G2psi:nH0,psi:q80}=b2(MW,j8,j8.NONRESIDUE),hE=Object.freeze({DST:"BN254G2_XMD:SHA-256_SVDW_RO_",encodeDST:"BN254G2_XMD:SHA-256_SVDW_RO_",p:MW.ORDER,m:2,k:128,expand:"xmd",hash:$K}),MX=y2({fields:{Fp:MW,Fp2:j8,Fp6:mE,Fp12:G8,Fr:J80},G1:{Fp:MW,h:BigInt(1),Gx:BigInt(1),Gy:BigInt(2),a:MW.ZERO,b:uH0,htfDefaults:{...hE,m:1,DST:"BN254G2_XMD:SHA-256_SVDW_RO_"},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:hX,fromBytes:hX,toBytes:hX,ShortSignature:{fromHex:hX,toRawBytes:hX,toHex:hX}},G2:{Fp:j8,h:BigInt("21888242871839275222246405745257275088844257914179612981679871602714643921549"),Gx:j8.fromBigTuple([BigInt("10857046999023057135944570762232829481370756359578518086990519993285655852781"),BigInt("11559732032986387107991004021392285783925812861821192530917403151452391805634")]),Gy:j8.fromBigTuple([BigInt("8495653923123431417604973247489272438418190587263600148770280649306958101930"),BigInt("4082367875863433681332203403145435568316851327593401208105741076214120093531")]),a:j8.ZERO,b:z80,hEff:BigInt("21888242871839275222246405745257275088844257914179612981679871602714643921549"),htfDefaults:{...hE},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:($,Q)=>Q.multiplyUnsafe(iH0).equals(nH0($,Q)),mapToCurve:hX,fromBytes:hX,toBytes:hX,Signature:{fromHex:hX,toRawBytes:hX,toHex:hX}},params:{ateLoopSize:t2*G80+r7,r:J80.ORDER,xNegative:!1,twistType:"divisive"},htfDefaults:hE,hash:$K,randomBytes:zW,postPrecompute:oH0}),D9$=H$0({a:BigInt(0),b:BigInt(3),Fp:MW,n:BigInt("21888242871839275222246405745257275088548364400416034343698204186575808495617"),Gx:BigInt(1),Gy:BigInt(2),h:BigInt(1),...Y80($K)})});function e2($){if(g$($,V80)===!0)return MX.G1.ProjectivePoint.ZERO;let Q=z$($.subarray(0,o9)),X=z$($.subarray(o9,s7)),Y=MX.G1.ProjectivePoint.fromAffine({x:Q,y:X});return Y.assertValidity(),Y}function U80($){let Q=M$(N$($.x),o9),X=M$(N$($.y),o9);return J8(Q,X)}function eH0($){let Q=MX.fields.Fr.fromBytes($);if(Q>=MX.fields.Fr.ORDER)return Q%MX.fields.Fr.ORDER;return Q}function W80($,Q){if(z$($)>=MX.fields.Fp2.ORDER)throw new G0(G0.errorMessages.BN254_FP_NOT_IN_FIELD);if(z$(Q)>=MX.fields.Fp2.ORDER)throw new G0(G0.errorMessages.BN254_FP_NOT_IN_FIELD);let X=J8($,Q);return MX.fields.Fp2.fromBytes(X)}function $N0($){if(g$($,rH0)===!0)return MX.G2.ProjectivePoint.ZERO;let Q=$.subarray(0,o9),X=$.subarray(o9,o9*2),Y=o9*2,Z=$.subarray(Y,Y+o9),J=$.subarray(Y+o9,Y+o9*2);for(let M of[X,Q,J,Z]){let j=z$(M);if(MX.fields.Fp.create(j)!==j)throw new G0(G0.errorMessages.BN254_FP_NOT_IN_FIELD)}let q=W80(X,Q),G=W80(J,Z),z=MX.G2.ProjectivePoint.fromAffine({x:q,y:G});return z.assertValidity(),z}class DW{add($){let Q=e2($.slice(0,s7)),X=e2($.slice(s7,s7*2));return U80(Q.add(X))}mul($){let Q=e2($.slice(0,s7)),X=eH0($.slice(s7,96));if(X===q0)return V80;return U80(Q.multiply(X))}pairing($){let X=[];for(let Z=0;Z<$.length/192;Z++){let J=192*Z,q=e2($.subarray(J,J+s7)),G=J+s7,z=$N0($.subarray(G,G+sH0));if(q===MX.G1.ProjectivePoint.ZERO||z===MX.G2.ProjectivePoint.ZERO)continue;X.push({g1:q,g2:z})}let Y=MX.pairingBatch(X);if(MX.fields.Fp12.eql(Y,MX.fields.Fp12.ONE)===!0)return tH0;else return aH0}}var V80,rH0,s7=64,o9=32,sH0=128,aH0,tH0;var O80=y(()=>{R$();K80();YQ();V80=new Uint8Array(64),rH0=new Uint8Array(128),aH0=new Uint8Array(32),tH0=J8(new Uint8Array(31),d8("0x01"))});var M80=y(()=>{O80()});function jW($,Q){let X=new Map;if(Q)for(let Y of Q)X.set(WY(Y.address.bytes),"function"in Y?Y.function:void 0);for(let Y of D80){if(X.has(Y.address))continue;if(Y.check.type===FQ.Hardfork&&$.gteHardfork(Y.check.param)||Y.check.type===FQ.EIP&&$.isActivatedEIP(Y.check.param))X.set(Y.address,Y.precompile)}return X}function y$($){if($.length<40)$=$.padStart(40,"0");for(let Q of D80)if(Q.address===$)return Q.name;return""}var FQ,u$="00000000000000000000000000000000000000",YN0,D80,u9$;var e8=y(()=>{qX();R$();b00();B$0();S$0();E$0();_$0();k$0();x$0();f$0();d$0();i$0();o$0();r$0();s$0();a$0();e$0();$80();Q80();J1();M80();FQ={EIP:"eip",Hardfork:"hardfork"},YN0=u$+"03",D80=[{address:u$+"01",check:{type:FQ.Hardfork,param:j0.Chainstart},precompile:LE,name:"ECRECOVER (0x01)"},{address:u$+"02",check:{type:FQ.Hardfork,param:j0.Chainstart},precompile:wE,name:"SHA256 (0x02)"},{address:u$+"03",check:{type:FQ.Hardfork,param:j0.Chainstart},precompile:IE,name:"RIPEMD160 (0x03)"},{address:u$+"04",check:{type:FQ.Hardfork,param:j0.Chainstart},precompile:FE,name:"IDENTITY (0x04)"},{address:u$+"05",check:{type:FQ.Hardfork,param:j0.Byzantium},precompile:SE,name:"MODEXP (0x05)"},{address:u$+"06",check:{type:FQ.Hardfork,param:j0.Byzantium},precompile:EE,name:"BN254_ADD (0x06)"},{address:u$+"07",check:{type:FQ.Hardfork,param:j0.Byzantium},precompile:_E,name:"BN254_MUL (0x07)"},{address:u$+"08",check:{type:FQ.Hardfork,param:j0.Byzantium},precompile:kE,name:"BN254_PAIRING (0x08)"},{address:u$+"09",check:{type:FQ.Hardfork,param:j0.Istanbul},precompile:xE,name:"BLAKE2f (0x09)"},{address:u$+"0a",check:{type:FQ.EIP,param:4844},precompile:cS,name:"KZG_POINT_EVALUATION (0x0a)"},{address:u$+"0b",check:{type:FQ.EIP,param:2537},precompile:HE,name:"BLS12_G1ADD (0x0b)"},{address:u$+"0c",check:{type:FQ.EIP,param:2537},precompile:NE,name:"BLS12_G1MSM (0x0c)"},{address:u$+"0d",check:{type:FQ.EIP,param:2537},precompile:AE,name:"BLS12_G2ADD (0x0d)"},{address:u$+"0e",check:{type:FQ.EIP,param:2537},precompile:RE,name:"BLS12_G2MSM (0x0e)"},{address:u$+"0f",check:{type:FQ.EIP,param:2537},precompile:CE,name:"BLS12_PAIRING (0x0f)"},{address:u$+"10",check:{type:FQ.EIP,param:2537},precompile:fE,name:"BLS12_MAP_FP_TO_G1 (0x10)"},{address:u$+"11",check:{type:FQ.EIP,param:2537},precompile:vE,name:"BLS12_MAP_FP_TO_G2 (0x11)"}],u9$={[u$+"01"]:LE,[u$+"02"]:wE,[YN0]:IE,[u$+"04"]:FE,[u$+"05"]:SE,[u$+"06"]:EE,[u$+"07"]:_E,[u$+"08"]:kE,[u$+"09"]:xE,[u$+"0a"]:cS,[u$+"0b"]:HE,[u$+"0c"]:NE,[u$+"0d"]:AE,[u$+"0e"]:RE,[u$+"0f"]:CE,[u$+"10"]:fE,[u$+"11"]:vE}});class cE{constructor(){this._storage=new Map,this._changeJournal=[],this._indices=[0]}get($,Q){let X=this._storage.get($.toString());if(!X)return new Uint8Array(32);let Y=X.get(e0(Q));if(!Y)return new Uint8Array(32);return Y}put($,Q,X){if(Q.length!==32)throw h0("Transient storage key must be 32 bytes long");if(X.length>32)throw h0("Transient storage value cannot be longer than 32 bytes");let Y=$.toString();if(!this._storage.has(Y))this._storage.set(Y,new Map);let Z=this._storage.get(Y),J=e0(Q),q=Z.get(J)??new Uint8Array(32);this._changeJournal.push({addr:Y,key:J,prevValue:q}),Z.set(J,X)}commit(){if(this._indices.length===0)throw h0("Nothing to commit");this._indices.pop()}checkpoint(){this._indices.push(this._changeJournal.length)}revert(){let $=this._indices.pop();if(typeof $==="undefined")throw h0("Nothing to revert");for(let Q=this._changeJournal.length-1;Q>=$;Q--){let{key:X,prevValue:Y,addr:Z}=this._changeJournal[Q];this._storage.get(Z).set(X,Y)}this._changeJournal.splice($,this._changeJournal.length-$)}toJSON(){let $={};for(let[Q,X]of this._storage.entries()){$[Q]={};for(let[Y,Z]of X.entries())$[Q][Y]=e0(Z)}return $}clear(){this._storage=new Map,this._changeJournal=[]}}var j80=y(()=>{R$()});function j$($){return{returnValue:new Uint8Array(0),executionGasUsed:$,exceptionError:new G0(G0.errorMessages.OUT_OF_GAS)}}function JN0($){return{returnValue:new Uint8Array(0),executionGasUsed:$,exceptionError:new G0(G0.errorMessages.CODESTORE_OUT_OF_GAS)}}function P80($){return{returnValue:new Uint8Array(0),executionGasUsed:$,exceptionError:new G0(G0.errorMessages.INVALID_BYTECODE_RESULT)}}function qN0($){return{returnValue:new Uint8Array(0),executionGasUsed:$,exceptionError:new G0(G0.errorMessages.CODESIZE_EXCEEDS_MAXIMUM)}}function P$($,Q){return{returnValue:new Uint8Array(0),executionGasUsed:Q,exceptionError:$}}function pE(){return{header:{number:q0,coinbase:u9(),timestamp:q0,difficulty:q0,prevRandao:new Uint8Array(32),gasLimit:q0,baseFeePerGas:void 0,getBlobGasPrice:()=>{return}}}}class YK{get precompiles(){return this._precompiles}get opcodes(){return this._opcodes}constructor($){if(this.DEBUG=!1,this.common=$.common,this.blockchain=$.blockchain,this.stateManager=$.stateManager,this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){let X=["checkChunkWitnessPresent"];for(let Y of X)if(!(Y in this.stateManager))throw h0(`State manager used must implement ${Y} if Verkle (EIP-6800) is activated`)}this.events=new A7.default,this._optsCached=$;let Q=[663,1153,1559,2537,2565,2718,2929,2930,2935,3198,3529,3540,3541,3607,3651,3670,3855,3860,4200,4399,4750,4788,4844,4895,5133,5450,5656,6110,6206,6780,6800,7002,7069,7251,7480,7516,7620,7685,7691,7692,7698,7702,7709];for(let X of this.common.eips())if(!Q.includes(X))throw h0(`EIP-${X} is not supported by the EVM`);if(!YK.supportedHardforks.includes(this.common.hardfork()))throw h0(`Hardfork ${this.common.hardfork()} not set as supported in supportedHardforks`);if(this.common.updateParams($.params??g00),this.allowUnlimitedContractSize=$.allowUnlimitedContractSize??!1,this.allowUnlimitedInitCodeSize=$.allowUnlimitedInitCodeSize??!1,this._customOpcodes=$.customOpcodes,this._customPrecompiles=$.customPrecompiles,this.journal=new hS(this.stateManager,this.common),this.transientStorage=new cE,this.common.events.on("hardforkChanged",()=>{this.getActiveOpcodes(),this._precompiles=jW(this.common,this._customPrecompiles)}),this.getActiveOpcodes(),this._precompiles=jW(this.common,this._customPrecompiles),this.common.isActivatedEIP(2537))this._bls=$.bls??new OW,this._bls.init?.();this._bn254=$.bn254,this._emit=async(X,Y)=>{let Z=this.events.listeners(X);for(let J of Z)if(J.length===2)await new Promise((q)=>{J(Y,q)});else J(Y)},this.performanceLogger=new LS,this.DEBUG=typeof window==="undefined"?process?.env?.DEBUG?.includes("ethjs")??!1:!1}getActiveOpcodes(){let $=E00(this.common,this._customOpcodes);return this._opcodes=$.opcodes,this._dynamicGasHandlers=$.dynamicGasHandlers,this._handlers=$.handlers,this._opcodeMap=$.opcodeMap,$.opcodes}async _executeCall($){let{gasLimit:Q,caller:X}=$;if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){if($.accessWitness===void 0)throw h0("accessWitness is required for EIP-6800 & EIP-7864");let z=$.value!==q0;if($.depth===0){let j=$.accessWitness.readAccountHeader(X);nJ(`originAccessGas=${j} waived off for origin at depth=0`);let P=$.accessWitness.readAccountCodeHash($.to);if(z)P+=$.accessWitness.writeAccountBasicData($.to);else P+=$.accessWitness.readAccountBasicData($.to);nJ(`destAccessGas=${P} waived off for target at depth=0`)}let M=$.accessWitness.readAccountBasicData($.to);if(z)M+=$.accessWitness.writeAccountBasicData($.to);if(Q-=M,Q<q0){if(this.DEBUG)nJ(`callAccessGas charged(${M}) caused OOG (-> ${Q})`);return $.accessWitness.revert(),{execResult:j$($.gasLimit)}}else{if(this.DEBUG)nJ(`callAccessGas used (${M} gas (-> ${Q}))`);$.accessWitness.commit()}}let Y=await this.stateManager.getAccount(X);if(!Y)Y=new VY;let Z;if(!$.delegatecall)try{await this._reduceSenderBalance(Y,$)}catch(z){Z=z}let J=await this.stateManager.getAccount($.to);if(!J){if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){let z=$.accessWitness.readAccountHeader($.to);if(Q-=z,Q<q0){if(this.DEBUG)nJ(`Proof of absence access charged(${z}) caused OOG (-> ${Q})`);return $.accessWitness?.revert(),{execResult:j$($.gasLimit)}}else{if(this.DEBUG)nJ(`Proof of absence access used (${z} gas (-> ${Q}))`);$.accessWitness?.commit()}}J=new VY}if(!$.delegatecall)try{await this._addToBalance(J,$)}catch(z){Z=z}await this._loadCode($);let q=!1;if(!$.code||typeof $.code!=="function"&&$.code.length===0){if(q=!0,this.DEBUG)z8("Exit early on no code (CALL)")}if(Z!==void 0){if(q=!0,this.DEBUG)z8("Exit early on value transfer overflowed (CALL)")}if(q)return{execResult:{gasRefund:$.gasRefund,executionGasUsed:$.gasLimit-Q,exceptionError:Z,returnValue:new Uint8Array(0)}};let G;if($.isCompiled){let z,M,j;if(this._optsCached.profiler?.enabled===!0){if(j=WY($.codeAddress.bytes),j=y$(j)??j.slice(20),this.performanceLogger.hasTimer())M=this.performanceLogger.pauseTimer();z=this.performanceLogger.startTimer(j)}if(G=await this.runPrecompile($.code,$.data,Q),this._optsCached.profiler?.enabled===!0){if(this.performanceLogger.stopTimer(z,Number(G.executionGasUsed),"precompiles"),M!==void 0)this.performanceLogger.unpauseTimer(M)}G.gasRefund=$.gasRefund}else{if(this.DEBUG)z8("Start bytecode processing...");G=await this.runInterpreter({...$,gasLimit:Q})}if($.depth===0)this.postMessageCleanup();return G.executionGasUsed+=$.gasLimit-Q,{execResult:G}}async _executeCreate($){let{gasLimit:Q,caller:X}=$;if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){if($.depth===0){let A=$.accessWitness.readAccountHeader(X);nJ(`originAccessGas=${A} waived off for origin at depth=0`)}}let Y=await this.stateManager.getAccount($.caller);if(!Y)Y=new VY;if(await this._reduceSenderBalance(Y,$),this.common.isActivatedEIP(3860)){if($.data.length>Number(this.common.param("maxInitCodeSize"))&&!this.allowUnlimitedInitCodeSize)return{createdAddress:$.to,execResult:{returnValue:new Uint8Array(0),exceptionError:new G0(G0.errorMessages.INITCODE_SIZE_VIOLATION),executionGasUsed:$.gasLimit}}}if($.code=$.data,$.data=$.eofCallData??new Uint8Array,$.to=await this._generateAddress($),this.common.isActivatedEIP(6780))$.createdAddresses.add($.to.toString());if(this.DEBUG)z8(`Generated CREATE contract address ${$.to}`);let Z=await this.stateManager.getAccount($.to);if(!Z)Z=new VY;if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){let A=$.accessWitness.writeAccountBasicData($.to)+$.accessWitness.readAccountCodeHash($.to);if(Q-=A,Q<q0){if(this.DEBUG)nJ(`ContractCreateInit charge(${A}) caused OOG (-> ${Q})`),$.accessWitness?.revert();return{execResult:j$($.gasLimit)}}else{if(this.DEBUG)nJ(`ContractCreateInit charged (${A} gas (-> ${Q}))`);$.accessWitness?.commit()}}if(Z.nonce&&Z.nonce>q0||g$(Z.codeHash,u4)!==!0||g$(Z.storageRoot,J2)!==!0){if(this.DEBUG)z8("Returning on address collision");return{createdAddress:$.to,execResult:{returnValue:new Uint8Array(0),exceptionError:new G0(G0.errorMessages.CREATE_COLLISION),executionGasUsed:$.gasLimit}}}await this.journal.putAccount($.to,Z),await this.stateManager.clearStorage($.to);let J={address:$.to,code:$.code};if(await this._emit("newContract",J),Z=await this.stateManager.getAccount($.to),!Z)Z=new VY;if(this.common.gteHardfork(j0.SpuriousDragon))Z.nonce+=D$;let q;try{await this._addToBalance(Z,$)}catch(A){q=A}let G=!1;if($.code===void 0||typeof $.code!=="function"&&$.code.length===0){if(G=!0,this.DEBUG)z8("Exit early on no code (CREATE)")}if(q!==void 0){if(G=!0,this.DEBUG)z8("Exit early on value transfer overflowed (CREATE)")}if(G){if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){let A=$.accessWitness.writeAccountHeader($.to);if(Q-=A,Q<q0){if(this.DEBUG)z8(`ContractCreateComplete access gas (${A}) caused OOG (-> ${Q})`);return $.accessWitness?.revert(),{execResult:j$($.gasLimit)}}else{if(this.DEBUG)z8(`ContractCreateComplete access used (${A}) gas (-> ${Q})`);$.accessWitness?.commit()}}return{createdAddress:$.to,execResult:{executionGasUsed:$.gasLimit-Q,gasRefund:$.gasRefund,exceptionError:q,returnValue:new Uint8Array(0)}}}if(this.DEBUG)z8("Start bytecode processing...");let z=await this.runInterpreter({...$,gasLimit:Q,isCreate:!0});z.executionGasUsed+=$.gasLimit-Q;let M=z.executionGasUsed,j=q0;if(!z.exceptionError&&!this.common.isActivatedEIP(6800)){if(j=BigInt(z.returnValue.length)*BigInt(this.common.param("createDataGas")),M=M+j,this.DEBUG)nJ(`Add return value size fee (${j} to gas used (-> ${M}))`)}let P=!0;if(!z.exceptionError&&this.common.gteHardfork(j0.SpuriousDragon)&&z.returnValue.length>Number(this.common.param("maxCodeSize")))P=!1;let D=!1;if(M<=$.gasLimit&&(this.allowUnlimitedContractSize||P))if(this.common.isActivatedEIP(3541)&&z.returnValue[0]===y7)if(!this.common.isActivatedEIP(3540))z={...z,...P80($.gasLimit)};else if(!nq($.code))z={...z,...P80($.gasLimit)};else z.executionGasUsed=M;else z.executionGasUsed=M;else if(this.common.gteHardfork(j0.Homestead))if(!P){if(this.DEBUG)z8("Code size exceeds maximum code size (>= SpuriousDragon)");z={...z,...qN0($.gasLimit)}}else{if(this.DEBUG)z8("Contract creation: out of gas");$.accessWitness?.revert(),z={...z,...j$($.gasLimit)}}else if(M-j<=$.gasLimit){if(this.DEBUG)z8("Not enough gas to pay the code deposit fee (Frontier)");$.accessWitness?.revert(),z={...z,...JN0(M-j)},D=!0}else{if(this.DEBUG)z8("Contract creation: out of gas");$.accessWitness?.revert(),z={...z,...j$($.gasLimit)}}if(Q=$.gasLimit-z.executionGasUsed,!z.exceptionError&&(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864))){let A=$.accessWitness.writeAccountHeader($.to);if(Q-=A,Q<q0){if(this.DEBUG)z8(`ContractCreateComplete access gas (${A}) caused OOG (-> ${Q})`);$.accessWitness?.revert(),z={...z,...j$($.gasLimit)}}else z8(`ContractCreateComplete access used (${A}) gas (-> ${Q})`),z.executionGasUsed+=A}if(!z.exceptionError&&z.returnValue!==void 0&&z.returnValue.length!==0){if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){let A=$.accessWitness.writeAccountCodeChunks($.to,0,z.returnValue.length-1);if(Q-=A,Q<q0){if(this.DEBUG)z8(`byteCodeWrite access gas (${A}) caused OOG (-> ${Q})`);$.accessWitness?.revert(),z={...z,...j$($.gasLimit)}}else z8(`byteCodeWrite access used (${A}) gas (-> ${Q})`),$.accessWitness?.commit(),z.executionGasUsed+=A}if(await this.stateManager.putCode($.to,z.returnValue),this.DEBUG)z8("Code saved on new contract creation")}else if(D){if(!this.common.gteHardfork(j0.Homestead)){let A=await this.stateManager.getAccount($.to);await this.journal.putAccount($.to,A??new VY)}}if($.depth===0)this.postMessageCleanup();return{createdAddress:$.to,execResult:z}}async runInterpreter($,Q={}){let X=await this.stateManager.getAccount($.to??u9());if(!X)X=new VY;let Y={address:$.to??u9(),caller:$.caller??u9(),callData:$.data??Uint8Array.from([0]),callValue:$.value??q0,code:$.code,isStatic:$.isStatic??!1,isCreate:$.isCreate??!1,depth:$.depth??0,gasPrice:this._tx.gasPrice,origin:this._tx.origin??$.caller??u9(),block:this._block??pE(),contract:X,codeAddress:$.codeAddress,gasRefund:$.gasRefund,chargeCodeAccesses:$.chargeCodeAccesses,blobVersionedHashes:$.blobVersionedHashes??[],accessWitness:$.accessWitness,createdAddresses:$.createdAddresses},Z=new bS(this,this.stateManager,this.blockchain,Y,$.gasLimit,this.journal,this.performanceLogger,this._optsCached.profiler);if($.selfdestruct)Z._result.selfdestruct=$.selfdestruct;if($.createdAddresses)Z._result.createdAddresses=$.createdAddresses;let J=await Z.run($.code,Q),q=Z._result,G=$.gasLimit-J.runState.gasLeft;if(J.exceptionError){if(J.exceptionError.error!==G0.errorMessages.REVERT&&J.exceptionError.error!==G0.errorMessages.INVALID_EOF_FORMAT)G=$.gasLimit;q={...q,logs:[],selfdestruct:new Set,createdAddresses:new Set}}return $.accessWitness?.commit(),{...q,runState:{...J.runState,...q,...Z._env},exceptionError:J.exceptionError,gas:J.runState?.gasLeft,executionGasUsed:G,gasRefund:J.runState.gasRefund,returnValue:q.returnValue??new Uint8Array(0)}}async runCall($){let Q;if(($.depth===0||$.message===void 0)&&this._optsCached.profiler?.enabled===!0)Q=this.performanceLogger.startTimer("Initialization");let X=$.message,Y;if(!X){this._block=$.block??pE();let q=$.caller??u9();this._tx={gasPrice:$.gasPrice??q0,origin:$.origin??q};let G=$.value??q0;if($.skipBalance===!0){if(Y=await this.stateManager.getAccount(q),!Y)Y=new VY;if(Y.balance<G)Y.balance=G,await this.journal.putAccount(q,Y)}X=new pJ({caller:q,gasLimit:$.gasLimit??BigInt(16777215),to:$.to,value:G,data:$.data,code:$.code,depth:$.depth,isCompiled:$.isCompiled,isStatic:$.isStatic,salt:$.salt,selfdestruct:$.selfdestruct??new Set,createdAddresses:$.createdAddresses??new Set,delegatecall:$.delegatecall,blobVersionedHashes:$.blobVersionedHashes,accessWitness:this.verkleAccessWitness})}if(X.depth===0){if(!Y)Y=await this.stateManager.getAccount(X.caller);if(!Y)Y=new VY;if(Y.nonce++,await this.journal.putAccount(X.caller,Y),this.DEBUG)z8(`Update fromAccount (caller) nonce (-> ${Y.nonce}))`)}if(await this._emit("beforeMessage",X),!X.to&&this.common.isActivatedEIP(2929))X.code=X.data,this.journal.addWarmedAddress((await this._generateAddress(X)).bytes);if(await this.journal.checkpoint(),this.common.isActivatedEIP(1153))this.transientStorage.checkpoint();if(this.DEBUG)z8("-".repeat(100)),z8("message checkpoint");let Z;if(this.DEBUG){let{caller:q,gasLimit:G,to:z,value:M,delegatecall:j}=X;z8(`New message caller=${q} gasLimit=${G} to=${z?.toString()??"none"} value=${M} delegatecall=${j?"yes":"no"}`)}if(X.to){if(this.DEBUG)z8(`Message CALL execution (to: ${X.to})`);Z=await this._executeCall(X)}else{if(this.DEBUG)z8("Message CREATE execution (to: undefined)");Z=await this._executeCreate(X)}if(this.DEBUG){let{executionGasUsed:q,exceptionError:G,returnValue:z}=Z.execResult;z8(`Received message execResult: [ gasUsed=${q} exceptionError=${G?`'${G.error}'`:"none"} returnValue=${s6(z)} gasRefund=${Z.execResult.gasRefund??0} ]`)}let J=Z.execResult.exceptionError;if(J&&J.error!==G0.errorMessages.CODESTORE_OUT_OF_GAS)Z.execResult.selfdestruct=new Set,Z.execResult.createdAddresses=new Set,Z.execResult.gasRefund=q0;if(J&&!(this.common.hardfork()===j0.Chainstart&&J.error===G0.errorMessages.CODESTORE_OUT_OF_GAS)){if(Z.execResult.logs=[],await this.journal.revert(),this.common.isActivatedEIP(1153))this.transientStorage.revert();if(this.DEBUG)z8("message checkpoint reverted")}else{if(await this.journal.commit(),this.common.isActivatedEIP(1153))this.transientStorage.commit();if(this.DEBUG)z8("message checkpoint committed")}if(await this._emit("afterMessage",Z),X.depth===0&&this._optsCached.profiler?.enabled===!0)this.performanceLogger.stopTimer(Q,0);return X.accessWitness?.commit(),Z}async runCode($){this._block=$.block??pE(),this._tx={gasPrice:$.gasPrice??q0,origin:$.origin??$.caller??u9()};let Q=new pJ({code:$.code,data:$.data,gasLimit:$.gasLimit??BigInt(16777215),to:$.to??u9(),caller:$.caller,value:$.value,depth:$.depth,selfdestruct:$.selfdestruct??new Set,isStatic:$.isStatic,blobVersionedHashes:$.blobVersionedHashes});return this.runInterpreter(Q,{pc:$.pc})}getPrecompile($){return this.precompiles.get(WY($.bytes))}runPrecompile($,Q,X){if(typeof $!=="function")throw h0("Invalid precompile");let Y={data:Q,gasLimit:X,common:this.common,_EVM:this,_debug:this.DEBUG?ZN0:void 0,stateManager:this.stateManager};return $(Y)}async _loadCode($){if(!$.code){let Q=this.getPrecompile($.codeAddress);if(Q)$.code=Q,$.isCompiled=!0;else{if($.code=await this.stateManager.getCode($.codeAddress),this.common.isActivatedEIP(7702)&&g$($.code.slice(0,3),A2)){let X=new l9($.code.slice(3,24));if($.code=await this.stateManager.getCode(X),$.depth===0)this.journal.addAlwaysWarmAddress(X.toString())}$.isCompiled=!1,$.chargeCodeAccesses=!0}}}async _generateAddress($){let Q;if($.salt)Q=Ce($.caller.bytes,$.salt,$.code);else{let X=await this.stateManager.getAccount($.caller);if(!X)X=new VY;let Y=X.nonce-D$;Q=Re($.caller.bytes,N$(Y))}return new l9(Q)}async _reduceSenderBalance($,Q){if($.balance-=Q.value,$.balance<q0)throw new G0(G0.errorMessages.INSUFFICIENT_BALANCE);let X=this.journal.putAccount(Q.caller,$);if(this.DEBUG)z8(`Reduced sender (${Q.caller}) balance (-> ${$.balance})`);return X}async _addToBalance($,Q){let X=$.balance+Q.value;if(X>Xe)throw new G0(G0.errorMessages.VALUE_OVERFLOW);if($.balance=X,await this.journal.putAccount(Q.to,$),this.DEBUG)z8(`Added toAccount (${Q.to}) balance (-> ${$.balance})`)}postMessageCleanup(){if(this.common.isActivatedEIP(1153))this.transientStorage.clear()}shallowCopy(){let $=this.common.copy();$.setHardfork(this.common.hardfork());let Q={...this._optsCached,common:$,stateManager:this.stateManager.shallowCopy()};return Q.stateManager.common=$,new YK(Q)}getPerformanceLogs(){return this.performanceLogger.getLogs()}clearPerformanceLogs(){this.performanceLogger.clear()}}var $A,z8,nJ,ZN0;var TQ=y(()=>{qX();R$();$A=RX(QX(),1);cH();CS();YQ();x00();v00();wS();FS();vS();mS();e8();j80();qW();z8=$A.default("evm:evm"),nJ=$A.default("evm:gas"),ZN0=$A.default("evm:precompiles");YK.supportedHardforks=[j0.Chainstart,j0.Homestead,j0.Dao,j0.TangerineWhistle,j0.SpuriousDragon,j0.Byzantium,j0.Constantinople,j0.Petersburg,j0.Istanbul,j0.MuirGlacier,j0.Berlin,j0.London,j0.ArrowGlacier,j0.GrayGlacier,j0.MergeNetsplitBlock,j0.Paris,j0.Shanghai,j0.Cancun,j0.Prague,j0.Osaka,j0.Verkle]});class iM{constructor(){this.cache=new Map}set($,Q){this.cache.set($,Q)}get($){return this.cache.get($)}del($){this.cache.delete($)}commit(){let $=Array.from(this.cache.entries());return this.clear(),$}clear(){this.cache.clear()}size(){return this.cache.size}}class nM{constructor(){this.cache=new Map}set($,Q){this.cache.set($,Q)}get($){return this.cache.get($)}del($){this.cache.delete($)}commit(){let $=Array.from(this.cache.entries());return this.clear(),$}clear(){this.cache.clear()}size(){return this.cache.size}}function zN0($,Q){let X=BigInt($)*BigInt(t6)+BigInt(Q);switch(X){case BigInt(0):return{type:N6.BasicData};case BigInt(1):return{type:N6.CodeHash};default:if(X<i4)throw Error(`No attribute yet stored >=2 and <${i4}`);if(X>=i4&&X<n4){let Y=X-BigInt(i4);return{type:N6.Storage,slot:Y}}else if(X>=n4&&X<IM){let Y=Number(X)-n4;return{type:N6.Code,codeOffset:Y*31}}else if(X>=IM){let Y=BigInt(X-IM);return{type:N6.Storage,slot:Y}}else throw Error(`Invalid treeIndex=${$} chunkIndex=${Q} for binary tree access`)}}class lE{constructor($){this.stemCache=new nM,this.chunkCache=new iM,this.hashFunction=$.hashFunction,this.stems=$.stems??new Map,this.chunks=$.chunks??new Map}readAccountBasicData($){return this.touchAddressOnReadAndComputeGas($,0,V2)}writeAccountBasicData($){return this.touchAddressOnWriteAndComputeGas($,0,V2)}readAccountCodeHash($){return this.touchAddressOnReadAndComputeGas($,0,O2)}writeAccountCodeHash($){return this.touchAddressOnWriteAndComputeGas($,0,O2)}readAccountHeader($){let Q=q0;return Q+=this.readAccountBasicData($),Q+=this.readAccountCodeHash($),Q}writeAccountHeader($){let Q=q0;return Q+=this.writeAccountBasicData($),Q+=this.writeAccountCodeHash($),Q}readAccountCodeChunks($,Q,X){let Y=q0;for(let Z=Math.floor(Q/31);Z<=Math.floor(X/31);Z++){let{treeIndex:J,subIndex:q}=DS(Z);Y+=this.touchAddressOnReadAndComputeGas($,J,q)}return Y}writeAccountCodeChunks($,Q,X){let Y=q0;for(let Z=Math.floor(Q/31);Z<=Math.floor(X/31);Z++){let{treeIndex:J,subIndex:q}=DS(Z);Y+=this.touchAddressOnWriteAndComputeGas($,J,q)}return Y}readAccountStorage($,Q){let{treeIndex:X,subIndex:Y}=MS(Q);return this.touchAddressOnReadAndComputeGas($,X,Y)}writeAccountStorage($,Q){let{treeIndex:X,subIndex:Y}=MS(Q);return this.touchAddressOnWriteAndComputeGas($,X,Y)}touchAddressOnWriteAndComputeGas($,Q,X){return this.touchAddressAndComputeGas($,Q,X,{isWrite:!0})}touchAddressOnReadAndComputeGas($,Q,X){return this.touchAddressAndComputeGas($,Q,X,{isWrite:!1})}touchAddressAndComputeGas($,Q,X,{isWrite:Y}){let Z=q0,{stemRead:J,stemWrite:q,chunkRead:G,chunkWrite:z,chunkFill:M}=this.touchAddress($,Q,X,{isWrite:Y});if(J===!0)Z+=H80;if(q===!0)Z+=A80;if(G===!0)Z+=N80;if(z===!0)Z+=R80;if(M===!0)Z+=GN0;return PW(`touchAddressAndComputeGas=${Z} address=${$} treeIndex=${Q} subIndex=${X}`),Z}touchAddress($,Q,X,{isWrite:Y}={}){let Z=!1,J=!1,q=!1,G=!1,z=!1,M=xe(this.hashFunction,$,Q),j=e0(M),P=this.stemCache.get(j)??this.stems.get(j);if(P===void 0)Z=!0,P={address:$,treeIndex:Q},this.stemCache.set(j,P);let D=fe(M,typeof X==="number"?p9(X):X),A=e0(D),I=this.chunkCache.get(A)??this.chunks.get(A);if(I===void 0)q=!0,I={},this.chunkCache.set(A,I);if(Y===!0){if(P.write!==!0)J=!0,P.write=!0;if(I.write!==!0)G=!0,I.write=!0}return PW(`${A}: isWrite=${Y} for stemRead=${Z} stemWrite=${J} chunkRead=${q} chunkWrite=${G} chunkFill=${z}`),{stemRead:Z,stemWrite:J,chunkRead:q,chunkWrite:G,chunkFill:z}}merge($){for(let[Q,X]of $.chunks.entries()){let Y=Q.slice(0,Q.length-2),Z=$.stems.get(Y);if(Z===void 0)throw Error(`Internal error: missing stem for the chunkKey=${Q}`);let J=this.stems.get(Y);if(J===void 0)this.stems.set(Y,Z);else J.write=J.write!==!0?Z.write:!0;let q=this.chunks.get(Q);if(q===void 0)this.chunks.set(Q,X);else q.write=q.write!==!0?X.write:!0,q.fill=q.fill!==!0?q.fill:!0}}commit(){let $=this.stemCache.commit();for(let[X,Y]of $)this.stems.set(X,Y);let Q=this.chunkCache.commit();for(let[X,Y]of Q)this.chunks.set(X,Y)}revert(){this.stemCache.clear(),this.chunkCache.clear()}debugWitnessCost(){let $=0,Q=0,X=0,Y=0;for(let[Z,{write:J}]of this.stems.entries())if($++,J===!0)Q++;for(let[Z,{write:J}]of this.chunks.entries())if(X++,J===!0)Y++;PW(`${$} stem reads, totalling ${BigInt($)*H80} gas units`),PW(`${Q} stem writes, totalling ${BigInt(Q)*A80} gas units`),PW(`${X} chunk reads, totalling ${BigInt(X)*N80} gas units`),PW(`${Y} chunk writes, totalling ${BigInt(Y)*R80} gas units`)}*rawAccesses(){for(let $ of this.chunks.keys()){let Q=$.slice(0,$.length-2),X=this.stems.get(Q);if(X===void 0)throw Error(`Internal error: missing stem for the chunkKey=${$}`);let{address:Y,treeIndex:Z}=X,J=Number(`0x${$.slice($.length-2)}`);yield{address:Y,treeIndex:Z,chunkIndex:J,chunkKey:$}}}*accesses(){for(let $ of this.rawAccesses()){let{address:Q,treeIndex:X,chunkIndex:Y,chunkKey:Z}=$;yield{...zN0(X,Y),address:Q,chunkKey:Z}}}}var C80,PW,H80,N80,A80,R80,GN0;var L80=y(()=>{qX();R$();C80=RX(QX(),1),PW=C80.default("evm:binaryTree:aw"),H80=BigInt(1900),N80=BigInt(200),A80=BigInt(3000),R80=BigInt(500),GN0=BigInt(6200)});var ZK;var w80=y(()=>{ZK=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function KN0($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function a7($){if(!Number.isSafeInteger($)||$<0)throw new Error("positive integer expected, got "+$)}function NZ($,...Q){if(!KN0($))throw new Error("Uint8Array expected");if(Q.length>0&&!Q.includes($.length))throw new Error("Uint8Array expected of length "+Q+", got length="+$.length)}function I80($){if(typeof $!=="function"||typeof $.create!=="function")throw new Error("Hash should be wrapped by utils.createHasher");a7($.outputLen),a7($.blockLen)}function oJ($,Q=!0){if($.destroyed)throw new Error("Hash instance has been destroyed");if(Q&&$.finished)throw new Error("Hash#digest() has already been called")}function oM($,Q){NZ($);let X=Q.outputLen;if($.length<X)throw new Error("digestInto() expects output buffer of length at least "+X)}function F80($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function rJ(...$){for(let Q=0;Q<$.length;Q++)$[Q].fill(0)}function rM($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function r9($,Q){return $<<32-Q|$>>>Q}function WN0($){return $<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255}function VN0($){for(let Q=0;Q<$.length;Q++)$[Q]=WN0($[Q]);return $}function QA($){if(NZ($),B80)return $.toHex();let Q="";for(let X=0;X<$.length;X++)Q+=ON0[$[X]];return Q}function T80($){if($>=q1._0&&$<=q1._9)return $-q1._0;if($>=q1.A&&$<=q1.F)return $-(q1.A-10);if($>=q1.a&&$<=q1.f)return $-(q1.a-10);return}function S80($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(B80)return Uint8Array.fromHex($);let Q=$.length,X=Q/2;if(Q%2)throw new Error("hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=T80($.charCodeAt(J)),G=T80($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw new Error('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function HW($){if(typeof $!=="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function JK($){if(typeof $==="string")$=HW($);return NZ($),$}function dE(...$){let Q=0;for(let Y=0;Y<$.length;Y++){let Z=$[Y];NZ(Z),Q+=Z.length}let X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}class qK{}function XA($){let Q=(Y)=>$().update(JK(Y)).digest(),X=$();return Q.outputLen=X.outputLen,Q.blockLen=X.blockLen,Q.create=()=>$(),Q}function E80($=32){if(ZK&&typeof ZK.getRandomValues==="function")return ZK.getRandomValues(new Uint8Array($));if(ZK&&typeof ZK.randomBytes==="function")return Uint8Array.from(ZK.randomBytes($));throw new Error("crypto.getRandomValues must be defined")}var UN0,uE,B80,ON0,q1;var sJ=y(()=>{w80();/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */UN0=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();uE=UN0?($)=>$:VN0,B80=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")(),ON0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));q1={_0:48,_9:57,A:65,F:70,a:97,f:102}});function MN0($,Q,X,Y){if(typeof $.setBigUint64==="function")return $.setBigUint64(Q,X,Y);let Z=BigInt(32),J=BigInt(4294967295),q=Number(X>>Z&J),G=Number(X&J),z=Y?4:0,M=Y?0:4;$.setUint32(Q+z,q,Y),$.setUint32(Q+M,G,Y)}function _80($,Q,X){return $&Q^~$&X}function k80($,Q,X){return $&Q^$&X^Q&X}var iE,G1;var x80=y(()=>{sJ();iE=class iE extends qK{constructor($,Q,X,Y){super();this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=$,this.outputLen=Q,this.padOffset=X,this.isLE=Y,this.buffer=new Uint8Array($),this.view=rM(this.buffer)}update($){oJ(this),$=JK($),NZ($);let{view:Q,buffer:X,blockLen:Y}=this,Z=$.length;for(let J=0;J<Z;){let q=Math.min(Y-this.pos,Z-J);if(q===Y){let G=rM($);for(;Y<=Z-J;J+=Y)this.process(G,J);continue}if(X.set($.subarray(J,J+q),this.pos),this.pos+=q,J+=q,this.pos===Y)this.process(Q,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){oJ(this),oM($,this),this.finished=!0;let{buffer:Q,view:X,blockLen:Y,isLE:Z}=this,{pos:J}=this;if(Q[J++]=128,rJ(this.buffer.subarray(J)),this.padOffset>Y-J)this.process(X,0),J=0;for(let j=J;j<Y;j++)Q[j]=0;MN0(X,Y-8,BigInt(this.length*8),Z),this.process(X,0);let q=rM($),G=this.outputLen;if(G%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let z=G/4,M=this.get();if(z>M.length)throw new Error("_sha2: outputLen bigger than state");for(let j=0;j<z;j++)q.setUint32(4*j,M[j],Z)}digest(){let{buffer:$,outputLen:Q}=this;this.digestInto($);let X=$.slice(0,Q);return this.destroy(),X}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:Q,buffer:X,length:Y,finished:Z,destroyed:J,pos:q}=this;if($.destroyed=J,$.finished=Z,$.length=Y,$.pos=q,Y%Q)$.buffer.set(X);return $}clone(){return this._cloneInto()}};G1=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225])});function DN0($,Q=!1){if(Q)return{h:Number($&YA),l:Number($>>f80&YA)};return{h:Number($>>f80&YA)|0,l:Number($&YA)|0}}function v80($,Q=!1){let X=$.length,Y=new Uint32Array(X),Z=new Uint32Array(X);for(let J=0;J<X;J++){let{h:q,l:G}=DN0($[J],Q);[Y[J],Z[J]]=[q,G]}return[Y,Z]}var YA,f80,g80=($,Q,X)=>$<<X|Q>>>32-X,y80=($,Q,X)=>Q<<X|$>>>32-X,b80=($,Q,X)=>Q<<X-32|$>>>64-X,h80=($,Q,X)=>$<<X-32|Q>>>64-X;var m80=y(()=>{YA=BigInt(4294967295),f80=BigInt(32)});var jN0,t7,c80,ZA;var nE=y(()=>{x80();sJ();jN0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t7=new Uint32Array(64);c80=class c80 extends iE{constructor($=32){super(64,$,8,!1);this.A=G1[0]|0,this.B=G1[1]|0,this.C=G1[2]|0,this.D=G1[3]|0,this.E=G1[4]|0,this.F=G1[5]|0,this.G=G1[6]|0,this.H=G1[7]|0}get(){let{A:$,B:Q,C:X,D:Y,E:Z,F:J,G:q,H:G}=this;return[$,Q,X,Y,Z,J,q,G]}set($,Q,X,Y,Z,J,q,G){this.A=$|0,this.B=Q|0,this.C=X|0,this.D=Y|0,this.E=Z|0,this.F=J|0,this.G=q|0,this.H=G|0}process($,Q){for(let j=0;j<16;j++,Q+=4)t7[j]=$.getUint32(Q,!1);for(let j=16;j<64;j++){let P=t7[j-15],D=t7[j-2],A=r9(P,7)^r9(P,18)^P>>>3,I=r9(D,17)^r9(D,19)^D>>>10;t7[j]=I+t7[j-7]+A+t7[j-16]|0}let{A:X,B:Y,C:Z,D:J,E:q,F:G,G:z,H:M}=this;for(let j=0;j<64;j++){let P=r9(q,6)^r9(q,11)^r9(q,25),D=M+P+_80(q,G,z)+jN0[j]+t7[j]|0,I=(r9(X,2)^r9(X,13)^r9(X,22))+k80(X,Y,Z)|0;M=z,z=G,G=q,q=J+D|0,J=Z,Z=Y,Y=X,X=D+I|0}X=X+this.A|0,Y=Y+this.B|0,Z=Z+this.C|0,J=J+this.D|0,q=q+this.E|0,G=G+this.F|0,z=z+this.G|0,M=M+this.H|0,this.set(X,Y,Z,J,q,G,z,M)}roundClean(){rJ(t7)}destroy(){this.set(0,0,0,0,0,0,0,0),rJ(this.buffer)}};ZA=XA(()=>new c80)});var oE,rE=($,Q,X)=>new oE($,Q).update(X).digest();var p80=y(()=>{sJ();oE=class oE extends qK{constructor($,Q){super();this.finished=!1,this.destroyed=!1,I80($);let X=JK(Q);if(this.iHash=$.create(),typeof this.iHash.update!=="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let Y=this.blockLen,Z=new Uint8Array(Y);Z.set(X.length>Y?$.create().update(X).digest():X);for(let J=0;J<Z.length;J++)Z[J]^=54;this.iHash.update(Z),this.oHash=$.create();for(let J=0;J<Z.length;J++)Z[J]^=106;this.oHash.update(Z),rJ(Z)}update($){return oJ(this),this.iHash.update($),this}digestInto($){oJ(this),NZ($,this.outputLen),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||($=Object.create(Object.getPrototypeOf(this),{}));let{oHash:Q,iHash:X,finished:Y,destroyed:Z,blockLen:J,outputLen:q}=this;return $=$,$.finished=Y,$.destroyed=Z,$.blockLen=J,$.outputLen=q,$.oHash=Q._cloneInto($.oHash),$.iHash=X._cloneInto($.iHash),$}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};rE.create=($,Q)=>new oE($,Q)});function GK($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function $_($){if(!GK($))throw new Error("Uint8Array expected")}function NW($,Q){if(typeof Q!=="boolean")throw new Error($+" boolean expected, got "+Q)}function sM($){let Q=$.toString(16);return Q.length&1?"0"+Q:Q}function d80($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);return $===""?eE:BigInt("0x"+$)}function AW($){if($_($),i80)return $.toHex();let Q="";for(let X=0;X<$.length;X++)Q+=PN0[$[X]];return Q}function l80($){if($>=z1._0&&$<=z1._9)return $-z1._0;if($>=z1.A&&$<=z1.F)return $-(z1.A-10);if($>=z1.a&&$<=z1.f)return $-(z1.a-10);return}function aM($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(i80)return Uint8Array.fromHex($);let Q=$.length,X=Q/2;if(Q%2)throw new Error("hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=l80($.charCodeAt(J)),G=l80($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw new Error('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function K1($){return d80(AW($))}function Q_($){return $_($),d80(AW(Uint8Array.from($).reverse()))}function zK($,Q){return aM($.toString(16).padStart(Q*2,"0"))}function X_($,Q){return zK($,Q).reverse()}function AZ($,Q,X){let Y;if(typeof Q==="string")try{Y=aM(Q)}catch(J){throw new Error($+" must be hex string or Uint8Array, cause: "+J)}else if(GK(Q))Y=Uint8Array.from(Q);else throw new Error($+" must be hex string or Uint8Array");let Z=Y.length;if(typeof X==="number"&&Z!==X)throw new Error($+" of length "+X+" expected, got "+Z);return Y}function tM(...$){let Q=0;for(let Y=0;Y<$.length;Y++){let Z=$[Y];$_(Z),Q+=Z.length}let X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}function JA($,Q,X){return sE($)&&sE(Q)&&sE(X)&&Q<=$&&$<X}function KK($,Q,X,Y){if(!JA(Q,X,Y))throw new Error("expected valid "+$+": "+X+" <= n < "+Y+", got "+Q)}function n80($){let Q;for(Q=0;$>eE;$>>=tE,Q+=1);return Q}function o80($,Q,X){if(typeof $!=="number"||$<2)throw new Error("hashLen must be a number");if(typeof Q!=="number"||Q<2)throw new Error("qByteLen must be a number");if(typeof X!=="function")throw new Error("hmacFn must be a function");let Y=aE($),Z=aE($),J=0,q=()=>{Y.fill(1),Z.fill(0),J=0},G=(...P)=>X(Z,Y,...P),z=(P=aE(0))=>{if(Z=G(u80([0]),P),Y=G(),P.length===0)return;Z=G(u80([1]),P),Y=G()},M=()=>{if(J++>=1000)throw new Error("drbg: tried 1000 values");let P=0,D=[];while(P<Q){Y=G();let A=Y.slice();D.push(A),P+=Y.length}return tM(...D)};return(P,D)=>{q(),z(P);let A=void 0;while(!(A=D(M())))z();return q(),A}}function WK($,Q,X={}){let Y=(Z,J,q)=>{let G=HN0[J];if(typeof G!=="function")throw new Error("invalid validator function");let z=$[Z];if(q&&z===void 0)return;if(!G(z,$))throw new Error("param "+String(Z)+" is invalid. Expected "+J+", got "+z)};for(let[Z,J]of Object.entries(Q))Y(Z,J,!1);for(let[Z,J]of Object.entries(X))Y(Z,J,!0);return $}function Y_($){let Q=new WeakMap;return(X,...Y)=>{let Z=Q.get(X);if(Z!==void 0)return Z;let J=$(X,...Y);return Q.set(X,J),J}}var eE,tE,i80,PN0,z1,sE=($)=>typeof $==="bigint"&&eE<=$,UK=($)=>(tE<<BigInt($))-tE,aE=($)=>new Uint8Array($),u80=($)=>Uint8Array.from($),HN0;var qA=y(()=>{/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */eE=BigInt(0),tE=BigInt(1);i80=typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function",PN0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));z1={_0:48,_9:57,A:65,F:70,a:97,f:102};HN0={bigint:($)=>typeof $==="bigint",function:($)=>typeof $==="function",boolean:($)=>typeof $==="boolean",string:($)=>typeof $==="string",stringOrUint8Array:($)=>typeof $==="string"||GK($),isSafeInteger:($)=>Number.isSafeInteger($),array:($)=>Array.isArray($),field:($,Q)=>Q.Fp.isValid($),hash:($)=>typeof $==="function"&&Number.isSafeInteger($.outputLen)}});function pX($,Q){let X=$%Q;return X>=jY?X:Q+X}function RZ($,Q,X){let Y=$;while(Q-- >jY)Y*=Y,Y%=X;return Y}function GA($,Q){if($===jY)throw new Error("invert: expected non-zero number");if(Q<=jY)throw new Error("invert: expected positive modulus, got "+Q);let X=pX($,Q),Y=Q,Z=jY,J=DX,q=DX,G=jY;while(X!==jY){let M=Y/X,j=Y%X,P=Z-q*M,D=J-G*M;Y=X,X=j,Z=q,J=G,q=P,G=D}if(Y!==DX)throw new Error("invert: does not exist");return pX(Z,Q)}function CN0($){let Q=$-DX,X=0;while(Q%VK===jY)Q/=VK,X++;let Y=VK,Z=eM($);while(Y<$&&a80(Z,Y))if(Y++>1000)throw new Error("Cannot find square root: probably non-prime P");if(X===1){let q=($+DX)/Z_;return function G(z,M){let j=z.pow(M,q);if(!z.eql(z.sqr(j),M))throw new Error("Cannot find square root");return j}}let J=(Q+DX)/VK;return function q(G,z){if(!a80(G,z))throw new Error("Cannot find square root");let M=X,j=G.pow(G.mul(G.ONE,Y),Q),P=G.pow(z,J),D=G.pow(z,Q);while(!G.eql(D,G.ONE)){if(G.eql(D,G.ZERO))return G.ZERO;let A=1;for(let H=G.sqr(D);A<M;A++){if(G.eql(H,G.ONE))break;H=G.sqr(H)}let I=G.pow(j,DX<<BigInt(M-A-1));j=G.sqr(I),P=G.mul(P,I),D=G.mul(D,j),M=A}return P}}function LN0($){if($%Z_===NN0)return function Q(X,Y){let Z=($+DX)/Z_,J=X.pow(Y,Z);if(!X.eql(X.sqr(J),Y))throw new Error("Cannot find square root");return J};if($%s80===r80)return function Q(X,Y){let Z=X.mul(Y,VK),J=($-r80)/s80,q=X.pow(Z,J),G=X.mul(Y,q),z=X.mul(X.mul(G,VK),q),M=X.mul(G,X.sub(z,X.ONE));if(!X.eql(X.sqr(M),Y))throw new Error("Cannot find square root");return M};if($%RN0===AN0);return CN0($)}function J_($){let Q={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},X=wN0.reduce((Y,Z)=>{return Y[Z]="function",Y},Q);return WK($,X)}function TN0($,Q,X){if(X<jY)throw new Error("invalid exponent, negatives unsupported");if(X===jY)return $.ONE;if(X===DX)return Q;let Y=$.ONE,Z=Q;while(X>jY){if(X&DX)Y=$.mul(Y,Z);Z=$.sqr(Z),X>>=DX}return Y}function q_($,Q,X=!1){let Y=new Array(Q.length).fill(X?$.ZERO:void 0),Z=Q.reduce((q,G,z)=>{if($.is0(G))return q;return Y[z]=q,$.mul(q,G)},$.ONE),J=$.inv(Z);return Q.reduceRight((q,G,z)=>{if($.is0(G))return q;return Y[z]=$.mul(q,Y[z]),$.mul(q,G)},J),Y}function IN0($,Q){let X=($.ORDER-DX)/VK,Y=$.pow(Q,X),Z=$.eql(Y,$.ONE),J=$.eql(Y,$.ZERO),q=$.eql(Y,$.neg($.ONE));if(!Z&&!J&&!q)throw new Error("Cannot find square root: probably non-prime P");return Z?1:J?0:-1}function a80($,Q){let X=IN0($,Q);return X===0||X===1}function G_($,Q){if(Q!==void 0)a7(Q);let X=Q!==void 0?Q:$.toString(2).length,Y=Math.ceil(X/8);return{nBitLength:X,nByteLength:Y}}function eM($,Q,X=!1,Y={}){if($<=jY)throw new Error("invalid field: expected ORDER > 0, got "+$);let{nBitLength:Z,nByteLength:J}=G_($,Q);if(J>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let q,G=Object.freeze({ORDER:$,isLE:X,BITS:Z,BYTES:J,MASK:UK(Z),ZERO:jY,ONE:DX,create:(z)=>pX(z,$),isValid:(z)=>{if(typeof z!=="bigint")throw new Error("invalid field element: expected bigint, got "+typeof z);return jY<=z&&z<$},is0:(z)=>z===jY,isOdd:(z)=>(z&DX)===DX,neg:(z)=>pX(-z,$),eql:(z,M)=>z===M,sqr:(z)=>pX(z*z,$),add:(z,M)=>pX(z+M,$),sub:(z,M)=>pX(z-M,$),mul:(z,M)=>pX(z*M,$),pow:(z,M)=>TN0(G,z,M),div:(z,M)=>pX(z*GA(M,$),$),sqrN:(z)=>z*z,addN:(z,M)=>z+M,subN:(z,M)=>z-M,mulN:(z,M)=>z*M,inv:(z)=>GA(z,$),sqrt:Y.sqrt||((z)=>{if(!q)q=LN0($);return q(G,z)}),toBytes:(z)=>X?X_(z,J):zK(z,J),fromBytes:(z)=>{if(z.length!==J)throw new Error("Field.fromBytes: expected "+J+" bytes, got "+z.length);return X?Q_(z):K1(z)},invertBatch:(z)=>q_(G,z),cmov:(z,M,j)=>j?M:z});return Object.freeze(G)}function t80($){if(typeof $!=="bigint")throw new Error("field order must be bigint");let Q=$.toString(2).length;return Math.ceil(Q/8)}function z_($){let Q=t80($);return Q+Math.ceil(Q/2)}function e80($,Q,X=!1){let Y=$.length,Z=t80(Q),J=z_(Q);if(Y<16||Y<J||Y>1024)throw new Error("expected "+J+"-1024 bytes of input, got "+Y);let q=X?Q_($):K1($),G=pX(q,Q-DX)+DX;return X?X_(G,Z):zK(G,Z)}var jY,DX,VK,NN0,Z_,r80,s80,AN0,RN0,wN0;var zA=y(()=>{sJ();qA();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */jY=BigInt(0),DX=BigInt(1),VK=BigInt(2),NN0=BigInt(3),Z_=BigInt(4),r80=BigInt(5),s80=BigInt(8),AN0=BigInt(9),RN0=BigInt(16);wN0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function K_($,Q){let X=Q.negate();return $?X:Q}function XQ0($,Q){if(!Number.isSafeInteger($)||$<=0||$>Q)throw new Error("invalid window size, expected [1.."+Q+"], got W="+$)}function U_($,Q){XQ0($,Q);let X=Math.ceil(Q/$)+1,Y=2**($-1),Z=2**$,J=UK($),q=BigInt($);return{windows:X,windowSize:Y,mask:J,maxNumber:Z,shiftBy:q}}function QQ0($,Q,X){let{windowSize:Y,mask:Z,maxNumber:J,shiftBy:q}=X,G=Number($&Z),z=$>>q;if(G>Y)G-=J,z+=O_;let M=Q*Y,j=M+Math.abs(G)-1,P=G===0,D=G<0,A=Q%2!==0;return{nextN:z,offset:j,isZero:P,isNeg:D,isNegF:A,offsetF:M}}function FN0($,Q){if(!Array.isArray($))throw new Error("array expected");$.forEach((X,Y)=>{if(!(X instanceof Q))throw new Error("invalid point at index "+Y)})}function BN0($,Q){if(!Array.isArray($))throw new Error("array of scalars expected");$.forEach((X,Y)=>{if(!Q.isValid(X))throw new Error("invalid scalar at index "+Y)})}function V_($){return YQ0.get($)||1}function ZQ0($,Q){return{constTimeNegate:K_,hasPrecomputes(X){return V_(X)!==1},unsafeLadder(X,Y,Z=$.ZERO){let J=X;while(Y>$Q0){if(Y&O_)Z=Z.add(J);J=J.double(),Y>>=O_}return Z},precomputeWindow(X,Y){let{windows:Z,windowSize:J}=U_(Y,Q),q=[],G=X,z=G;for(let M=0;M<Z;M++){z=G,q.push(z);for(let j=1;j<J;j++)z=z.add(G),q.push(z);G=z.double()}return q},wNAF(X,Y,Z){let{ZERO:J,BASE:q}=$,G=U_(X,Q);for(let z=0;z<G.windows;z++){let{nextN:M,offset:j,isZero:P,isNeg:D,isNegF:A,offsetF:I}=QQ0(Z,z,G);if(Z=M,P)q=q.add(K_(A,Y[I]));else J=J.add(K_(D,Y[j]))}return{p:J,f:q}},wNAFUnsafe(X,Y,Z,J=$.ZERO){let q=U_(X,Q);for(let G=0;G<q.windows;G++){if(Z===$Q0)break;let{nextN:z,offset:M,isZero:j,isNeg:P}=QQ0(Z,G,q);if(Z=z,j)continue;else{let D=Y[M];J=J.add(P?D.negate():D)}}return J},getPrecomputes(X,Y,Z){let J=W_.get(Y);if(!J){if(J=this.precomputeWindow(Y,X),X!==1)W_.set(Y,Z(J))}return J},wNAFCached(X,Y,Z){let J=V_(X);return this.wNAF(J,this.getPrecomputes(J,X,Z),Y)},wNAFCachedUnsafe(X,Y,Z,J){let q=V_(X);if(q===1)return this.unsafeLadder(X,Y,J);return this.wNAFUnsafe(q,this.getPrecomputes(q,X,Z),Y,J)},setWindowSize(X,Y){XQ0(Y,Q),YQ0.set(X,Y),W_.delete(X)}}}function JQ0($,Q,X,Y){if(FN0(X,$),BN0(Y,Q),X.length!==Y.length)throw new Error("arrays of points and scalars must have equal length");let Z=$.ZERO,J=n80(BigInt(X.length)),q=J>12?J-3:J>4?J-2:J?2:1,G=UK(q),z=new Array(Number(G)+1).fill(Z),M=Math.floor((Q.BITS-1)/q)*q,j=Z;for(let P=M;P>=0;P-=q){z.fill(Z);for(let A=0;A<Y.length;A++){let I=Y[A],H=Number(I>>BigInt(P)&G);z[H]=z[H].add(X[A])}let D=Z;for(let A=z.length-1,I=Z;A>0;A--)I=I.add(z[A]),D=D.add(I);if(j=j.add(D),P!==0)for(let A=0;A<q;A++)j=j.double()}return j}function M_($){return J_($.Fp),WK($,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...G_($.n,$.nBitLength),...$,...{p:$.Fp.ORDER}})}var $Q0,O_,W_,YQ0;var qQ0=y(()=>{zA();qA();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */$Q0=BigInt(0),O_=BigInt(1);W_=new WeakMap,YQ0=new WeakMap});function GQ0($){if($.lowS!==void 0)NW("lowS",$.lowS);if($.prehash!==void 0)NW("prehash",$.prehash)}function SN0($){let Q=M_($);WK(Q,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:X,Fp:Y,a:Z}=Q;if(X){if(!Y.eql(Z,Y.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof X!=="object"||typeof X.beta!=="bigint"||typeof X.splitScalar!=="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...Q})}function EN0($){let Q=SN0($),{Fp:X}=Q,Y=eM(Q.n,Q.nBitLength),Z=Q.toBytes||((H,C,B)=>{let S=C.toAffine();return tM(Uint8Array.from([4]),X.toBytes(S.x),X.toBytes(S.y))}),J=Q.fromBytes||((H)=>{let C=H.subarray(1),B=X.fromBytes(C.subarray(0,X.BYTES)),S=X.fromBytes(C.subarray(X.BYTES,2*X.BYTES));return{x:B,y:S}});function q(H){let{a:C,b:B}=Q,S=X.sqr(H),_=X.mul(S,H);return X.add(X.add(_,X.mul(H,C)),B)}if(!X.eql(X.sqr(Q.Gy),q(Q.Gx)))throw new Error("bad generator point: equation left != right");function G(H){return JA(H,uQ,Q.n)}function z(H){let{allowedPrivateKeyLengths:C,nByteLength:B,wrapPrivateKey:S,n:_}=Q;if(C&&typeof H!=="bigint"){if(GK(H))H=AW(H);if(typeof H!=="string"||!C.includes(H.length))throw new Error("invalid private key");H=H.padStart(B*2,"0")}let k;try{k=typeof H==="bigint"?H:K1(AZ("private key",H,B))}catch(f){throw new Error("invalid private key, expected hex or "+B+" bytes, got "+typeof H)}if(S)k=pX(k,_);return KK("private key",k,uQ,_),k}function M(H){if(!(H instanceof D))throw new Error("ProjectivePoint expected")}let j=Y_((H,C)=>{let{px:B,py:S,pz:_}=H;if(X.eql(_,X.ONE))return{x:B,y:S};let k=H.is0();if(C==null)C=k?X.ONE:X.inv(_);let f=X.mul(B,C),g=X.mul(S,C),b=X.mul(_,C);if(k)return{x:X.ZERO,y:X.ZERO};if(!X.eql(b,X.ONE))throw new Error("invZ was invalid");return{x:f,y:g}}),P=Y_((H)=>{if(H.is0()){if(Q.allowInfinityPoint&&!X.is0(H.py))return;throw new Error("bad point: ZERO")}let{x:C,y:B}=H.toAffine();if(!X.isValid(C)||!X.isValid(B))throw new Error("bad point: x or y not FE");let S=X.sqr(B),_=q(C);if(!X.eql(S,_))throw new Error("bad point: equation left != right");if(!H.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class D{constructor(H,C,B){if(H==null||!X.isValid(H))throw new Error("x required");if(C==null||!X.isValid(C)||X.is0(C))throw new Error("y required");if(B==null||!X.isValid(B))throw new Error("z required");this.px=H,this.py=C,this.pz=B,Object.freeze(this)}static fromAffine(H){let{x:C,y:B}=H||{};if(!H||!X.isValid(C)||!X.isValid(B))throw new Error("invalid affine point");if(H instanceof D)throw new Error("projective point not allowed");let S=(_)=>X.eql(_,X.ZERO);if(S(C)&&S(B))return D.ZERO;return new D(C,B,X.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(H){let C=q_(X,H.map((B)=>B.pz));return H.map((B,S)=>B.toAffine(C[S])).map(D.fromAffine)}static fromHex(H){let C=D.fromAffine(J(AZ("pointHex",H)));return C.assertValidity(),C}static fromPrivateKey(H){return D.BASE.multiply(z(H))}static msm(H,C){return JQ0(D,Y,H,C)}_setWindowSize(H){I.setWindowSize(this,H)}assertValidity(){P(this)}hasEvenY(){let{y:H}=this.toAffine();if(X.isOdd)return!X.isOdd(H);throw new Error("Field doesn't support isOdd")}equals(H){M(H);let{px:C,py:B,pz:S}=this,{px:_,py:k,pz:f}=H,g=X.eql(X.mul(C,f),X.mul(_,S)),b=X.eql(X.mul(B,f),X.mul(k,S));return g&&b}negate(){return new D(this.px,X.neg(this.py),this.pz)}double(){let{a:H,b:C}=Q,B=X.mul(C,zQ0),{px:S,py:_,pz:k}=this,f=X.ZERO,g=X.ZERO,b=X.ZERO,m=X.mul(S,S),l=X.mul(_,_),h=X.mul(k,k),c=X.mul(S,_);return c=X.add(c,c),b=X.mul(S,k),b=X.add(b,b),f=X.mul(H,b),g=X.mul(B,h),g=X.add(f,g),f=X.sub(l,g),g=X.add(l,g),g=X.mul(f,g),f=X.mul(c,f),b=X.mul(B,b),h=X.mul(H,h),c=X.sub(m,h),c=X.mul(H,c),c=X.add(c,b),b=X.add(m,m),m=X.add(b,m),m=X.add(m,h),m=X.mul(m,c),g=X.add(g,m),h=X.mul(_,k),h=X.add(h,h),m=X.mul(h,c),f=X.sub(f,m),b=X.mul(h,l),b=X.add(b,b),b=X.add(b,b),new D(f,g,b)}add(H){M(H);let{px:C,py:B,pz:S}=this,{px:_,py:k,pz:f}=H,g=X.ZERO,b=X.ZERO,m=X.ZERO,l=Q.a,h=X.mul(Q.b,zQ0),c=X.mul(C,_),T=X.mul(B,k),K=X.mul(S,f),U=X.add(C,B),W=X.add(_,k);U=X.mul(U,W),W=X.add(c,T),U=X.sub(U,W),W=X.add(C,S);let V=X.add(_,f);return W=X.mul(W,V),V=X.add(c,K),W=X.sub(W,V),V=X.add(B,S),g=X.add(k,f),V=X.mul(V,g),g=X.add(T,K),V=X.sub(V,g),m=X.mul(l,W),g=X.mul(h,K),m=X.add(g,m),g=X.sub(T,m),m=X.add(T,m),b=X.mul(g,m),T=X.add(c,c),T=X.add(T,c),K=X.mul(l,K),W=X.mul(h,W),T=X.add(T,K),K=X.sub(c,K),K=X.mul(l,K),W=X.add(W,K),c=X.mul(T,W),b=X.add(b,c),c=X.mul(V,W),g=X.mul(U,g),g=X.sub(g,c),c=X.mul(U,T),m=X.mul(V,m),m=X.add(m,c),new D(g,b,m)}subtract(H){return this.add(H.negate())}is0(){return this.equals(D.ZERO)}wNAF(H){return I.wNAFCached(this,H,D.normalizeZ)}multiplyUnsafe(H){let{endo:C,n:B}=Q;KK("scalar",H,W1,B);let S=D.ZERO;if(H===W1)return S;if(this.is0()||H===uQ)return this;if(!C||I.hasPrecomputes(this))return I.wNAFCachedUnsafe(this,H,D.normalizeZ);let{k1neg:_,k1:k,k2neg:f,k2:g}=C.splitScalar(H),b=S,m=S,l=this;while(k>W1||g>W1){if(k&uQ)b=b.add(l);if(g&uQ)m=m.add(l);l=l.double(),k>>=uQ,g>>=uQ}if(_)b=b.negate();if(f)m=m.negate();return m=new D(X.mul(m.px,C.beta),m.py,m.pz),b.add(m)}multiply(H){let{endo:C,n:B}=Q;KK("scalar",H,uQ,B);let S,_;if(C){let{k1neg:k,k1:f,k2neg:g,k2:b}=C.splitScalar(H),{p:m,f:l}=this.wNAF(f),{p:h,f:c}=this.wNAF(b);m=I.constTimeNegate(k,m),h=I.constTimeNegate(g,h),h=new D(X.mul(h.px,C.beta),h.py,h.pz),S=m.add(h),_=l.add(c)}else{let{p:k,f}=this.wNAF(H);S=k,_=f}return D.normalizeZ([S,_])[0]}multiplyAndAddUnsafe(H,C,B){let S=D.BASE,_=(f,g)=>g===W1||g===uQ||!f.equals(S)?f.multiplyUnsafe(g):f.multiply(g),k=_(this,C).add(_(H,B));return k.is0()?void 0:k}toAffine(H){return j(this,H)}isTorsionFree(){let{h:H,isTorsionFree:C}=Q;if(H===uQ)return!0;if(C)return C(D,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:H,clearCofactor:C}=Q;if(H===uQ)return this;if(C)return C(D,this);return this.multiplyUnsafe(Q.h)}toRawBytes(H=!0){return NW("isCompressed",H),this.assertValidity(),Z(D,this,H)}toHex(H=!0){return NW("isCompressed",H),AW(this.toRawBytes(H))}}D.BASE=new D(Q.Gx,Q.Gy,X.ONE),D.ZERO=new D(X.ZERO,X.ONE,X.ZERO);let A=Q.nBitLength,I=ZQ0(D,Q.endo?Math.ceil(A/2):A);return{CURVE:Q,ProjectivePoint:D,normPrivateKeyToScalar:z,weierstrassEquation:q,isWithinCurveOrder:G}}function _N0($){let Q=M_($);return WK(Q,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...Q})}function UQ0($){let Q=_N0($),{Fp:X,n:Y}=Q,Z=X.BYTES+1,J=2*X.BYTES+1;function q(U){return pX(U,Y)}function G(U){return GA(U,Y)}let{ProjectivePoint:z,normPrivateKeyToScalar:M,weierstrassEquation:j,isWithinCurveOrder:P}=EN0({...Q,toBytes(U,W,V){let N=W.toAffine(),L=X.toBytes(N.x),F=tM;if(NW("isCompressed",V),V)return F(Uint8Array.from([W.hasEvenY()?2:3]),L);else return F(Uint8Array.from([4]),L,X.toBytes(N.y))},fromBytes(U){let W=U.length,V=U[0],N=U.subarray(1);if(W===Z&&(V===2||V===3)){let L=K1(N);if(!JA(L,uQ,X.ORDER))throw new Error("Point is not on curve");let F=j(L),R;try{R=X.sqrt(F)}catch(x){let E=x instanceof Error?": "+x.message:"";throw new Error("Point is not on curve"+E)}let O=(R&uQ)===uQ;if((V&1)===1!==O)R=X.neg(R);return{x:L,y:R}}else if(W===J&&V===4){let L=X.fromBytes(N.subarray(0,X.BYTES)),F=X.fromBytes(N.subarray(X.BYTES,2*X.BYTES));return{x:L,y:F}}else{let L=Z,F=J;throw new Error("invalid Point, expected length of "+L+", or uncompressed "+F+", got "+W)}}}),D=(U)=>AW(zK(U,Q.nByteLength));function A(U){let W=Y>>uQ;return U>W}function I(U){return A(U)?q(-U):U}let H=(U,W,V)=>K1(U.slice(W,V));class C{constructor(U,W,V){if(KK("r",U,uQ,Y),KK("s",W,uQ,Y),this.r=U,this.s=W,V!=null)this.recovery=V;Object.freeze(this)}static fromCompact(U){let W=Q.nByteLength;return U=AZ("compactSignature",U,W*2),new C(H(U,0,W),H(U,W,2*W))}static fromDER(U){let{r:W,s:V}=U1.toSig(AZ("DER",U));return new C(W,V)}assertValidity(){}addRecoveryBit(U){return new C(this.r,this.s,U)}recoverPublicKey(U){let{r:W,s:V,recovery:N}=this,L=g(AZ("msgHash",U));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");let F=N===2||N===3?W+Q.n:W;if(F>=X.ORDER)throw new Error("recovery id 2 or 3 invalid");let R=(N&1)===0?"02":"03",O=z.fromHex(R+D(F)),w=G(F),x=q(-L*w),E=q(V*w),v=z.BASE.multiplyAndAddUnsafe(O,x,E);if(!v)throw new Error("point at infinify");return v.assertValidity(),v}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new C(this.r,q(-this.s),this.recovery):this}toDERRawBytes(){return aM(this.toDERHex())}toDERHex(){return U1.hexFromSig(this)}toCompactRawBytes(){return aM(this.toCompactHex())}toCompactHex(){return D(this.r)+D(this.s)}}let B={isValidPrivateKey(U){try{return M(U),!0}catch(W){return!1}},normPrivateKeyToScalar:M,randomPrivateKey:()=>{let U=z_(Q.n);return e80(Q.randomBytes(U),Q.n)},precompute(U=8,W=z.BASE){return W._setWindowSize(U),W.multiply(BigInt(3)),W}};function S(U,W=!0){return z.fromPrivateKey(U).toRawBytes(W)}function _(U){let W=GK(U),V=typeof U==="string",N=(W||V)&&U.length;if(W)return N===Z||N===J;if(V)return N===2*Z||N===2*J;if(U instanceof z)return!0;return!1}function k(U,W,V=!0){if(_(U))throw new Error("first arg must be private key");if(!_(W))throw new Error("second arg must be public key");return z.fromHex(W).multiply(M(U)).toRawBytes(V)}let f=Q.bits2int||function(U){if(U.length>8192)throw new Error("input is too large");let W=K1(U),V=U.length*8-Q.nBitLength;return V>0?W>>BigInt(V):W},g=Q.bits2int_modN||function(U){return q(f(U))},b=UK(Q.nBitLength);function m(U){return KK("num < 2^"+Q.nBitLength,U,W1,b),zK(U,Q.nByteLength)}function l(U,W,V=h){if(["recovered","canonical"].some((s)=>(s in V)))throw new Error("sign() legacy options not supported");let{hash:N,randomBytes:L}=Q,{lowS:F,prehash:R,extraEntropy:O}=V;if(F==null)F=!0;if(U=AZ("msgHash",U),GQ0(V),R)U=AZ("prehashed msgHash",N(U));let w=g(U),x=M(W),E=[m(x),m(w)];if(O!=null&&O!==!1){let s=O===!0?L(X.BYTES):O;E.push(AZ("extraEntropy",s))}let v=tM(...E),p=w;function i(s){let X0=f(s);if(!P(X0))return;let n=G(X0),r=z.BASE.multiply(X0).toAffine(),Z0=q(r.x);if(Z0===W1)return;let e=q(n*q(p+Z0*x));if(e===W1)return;let Q0=(r.x===Z0?0:2)|Number(r.y&uQ),t=e;if(F&&A(e))t=I(e),Q0^=1;return new C(Z0,t,Q0)}return{seed:v,k2sig:i}}let h={lowS:Q.lowS,prehash:!1},c={lowS:Q.lowS,prehash:!1};function T(U,W,V=h){let{seed:N,k2sig:L}=l(U,W,V),F=Q;return o80(F.hash.outputLen,F.nByteLength,F.hmac)(N,L)}z.BASE._setWindowSize(8);function K(U,W,V,N=c){let L=U;W=AZ("msgHash",W),V=AZ("publicKey",V);let{lowS:F,prehash:R,format:O}=N;if(GQ0(N),"strict"in N)throw new Error("options.strict was renamed to lowS");if(O!==void 0&&O!=="compact"&&O!=="der")throw new Error("format must be compact or der");let w=typeof L==="string"||GK(L),x=!w&&!O&&typeof L==="object"&&L!==null&&typeof L.r==="bigint"&&typeof L.s==="bigint";if(!w&&!x)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let E=void 0,v;try{if(x)E=new C(L.r,L.s);if(w){try{if(O!=="compact")E=C.fromDER(L)}catch(Q0){if(!(Q0 instanceof U1.Err))throw Q0}if(!E&&O!=="der")E=C.fromCompact(L)}v=z.fromHex(V)}catch(Q0){return!1}if(!E)return!1;if(F&&E.hasHighS())return!1;if(R)W=Q.hash(W);let{r:p,s:i}=E,s=g(W),X0=G(i),n=q(s*X0),r=q(p*X0),Z0=z.BASE.multiplyAndAddUnsafe(v,n,r)?.toAffine();if(!Z0)return!1;return q(Z0.x)===p}return{CURVE:Q,getPublicKey:S,getSharedSecret:k,sign:T,verify:K,ProjectivePoint:z,Signature:C,utils:B}}var KQ0,U1,W1,uQ,cJ$,zQ0,pJ$;var WQ0=y(()=>{qQ0();zA();qA();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */KQ0=class KQ0 extends Error{constructor($=""){super($)}};U1={Err:KQ0,_tlv:{encode:($,Q)=>{let{Err:X}=U1;if($<0||$>256)throw new X("tlv.encode: wrong tag");if(Q.length&1)throw new X("tlv.encode: unpadded data");let Y=Q.length/2,Z=sM(Y);if(Z.length/2&128)throw new X("tlv.encode: long form length too big");let J=Y>127?sM(Z.length/2|128):"";return sM($)+J+Z+Q},decode($,Q){let{Err:X}=U1,Y=0;if($<0||$>256)throw new X("tlv.encode: wrong tag");if(Q.length<2||Q[Y++]!==$)throw new X("tlv.decode: wrong tlv");let Z=Q[Y++],J=!!(Z&128),q=0;if(!J)q=Z;else{let z=Z&127;if(!z)throw new X("tlv.decode(long): indefinite length not supported");if(z>4)throw new X("tlv.decode(long): byte length is too big");let M=Q.subarray(Y,Y+z);if(M.length!==z)throw new X("tlv.decode: length bytes not complete");if(M[0]===0)throw new X("tlv.decode(long): zero leftmost byte");for(let j of M)q=q<<8|j;if(Y+=z,q<128)throw new X("tlv.decode(long): not minimal encoding")}let G=Q.subarray(Y,Y+q);if(G.length!==q)throw new X("tlv.decode: wrong value length");return{v:G,l:Q.subarray(Y+q)}}},_int:{encode($){let{Err:Q}=U1;if($<W1)throw new Q("integer: negative integers are not allowed");let X=sM($);if(Number.parseInt(X[0],16)&8)X="00"+X;if(X.length&1)throw new Q("unexpected DER parsing assertion: unpadded hex");return X},decode($){let{Err:Q}=U1;if($[0]&128)throw new Q("invalid signature integer: negative");if($[0]===0&&!($[1]&128))throw new Q("invalid signature integer: unnecessary leading zero");return K1($)}},toSig($){let{Err:Q,_int:X,_tlv:Y}=U1,Z=AZ("signature",$),{v:J,l:q}=Y.decode(48,Z);if(q.length)throw new Q("invalid signature: left bytes after parsing");let{v:G,l:z}=Y.decode(2,J),{v:M,l:j}=Y.decode(2,z);if(j.length)throw new Q("invalid signature: left bytes after parsing");return{r:X.decode(G),s:X.decode(M)}},hexFromSig($){let{_tlv:Q,_int:X}=U1,Y=Q.encode(2,X.encode($.r)),Z=Q.encode(2,X.encode($.s)),J=Y+Z;return Q.encode(48,J)}},W1=BigInt(0),uQ=BigInt(1),cJ$=BigInt(2),zQ0=BigInt(3),pJ$=BigInt(4)});function kN0($){return{hash:$,hmac:(Q,...X)=>rE($,Q,dE(...X)),randomBytes:E80}}function VQ0($,Q){let X=(Y)=>UQ0({...$,...kN0(Y)});return{...X(Q),create:X}}var OQ0=y(()=>{p80();sJ();WQ0();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */});function fN0($){let Q=jQ0,X=BigInt(3),Y=BigInt(6),Z=BigInt(11),J=BigInt(22),q=BigInt(23),G=BigInt(44),z=BigInt(88),M=$*$*$%Q,j=M*M*$%Q,P=RZ(j,X,Q)*j%Q,D=RZ(P,X,Q)*j%Q,A=RZ(D,D_,Q)*M%Q,I=RZ(A,Z,Q)*A%Q,H=RZ(I,J,Q)*I%Q,C=RZ(H,G,Q)*H%Q,B=RZ(C,z,Q)*C%Q,S=RZ(B,G,Q)*H%Q,_=RZ(S,X,Q)*j%Q,k=RZ(_,q,Q)*I%Q,f=RZ(k,Y,Q)*M%Q,g=RZ(f,D_,Q);if(!j_.eql(j_.sqr(g),$))throw new Error("Cannot find square root");return g}var jQ0,MQ0,xN0,D_,DQ0=($,Q)=>($+Q/D_)/Q,j_,$D,aJ$,tJ$;var PQ0=y(()=>{nE();OQ0();zA();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */jQ0=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),MQ0=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),xN0=BigInt(1),D_=BigInt(2);j_=eM(jQ0,void 0,void 0,{sqrt:fN0}),$D=VQ0({a:BigInt(0),b:BigInt(7),Fp:j_,n:MQ0,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:($)=>{let Q=MQ0,X=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),Y=-xN0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),Z=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),J=X,q=BigInt("0x100000000000000000000000000000000"),G=DQ0(J*$,Q),z=DQ0(-Y*$,Q),M=pX($-G*X-z*Z,Q),j=pX(-G*Y-z*J,Q),P=M>q,D=j>q;if(P)M=Q-M;if(D)j=Q-j;if(M>q||j>q)throw new Error("splitScalar: Endomorphism failed, k="+$);return{k1neg:P,k1:M,k2neg:D,k2:j}}}},ZA),aJ$=BigInt(0),tJ$=$D.ProjectivePoint});var HQ0=y(()=>{PQ0()});var NQ0;var AQ0=y(()=>{sJ();NQ0=NZ});function P_($){let Q=$.startsWith("0x")?$.substring(2):$;return S80(Q)}function aJ($,Q){if($.length!==Q.length)return!1;for(let X=0;X<$.length;X++)if($[X]!==Q[X])return!1;return!0}function OK($){return(Q)=>{return NQ0(Q),$(Q)}}var QD=y(()=>{AQ0();sJ();sJ()});var RQ0;var CQ0=y(()=>{nE();QD();RQ0=OK(ZA)});function W$($,Q){return new H_({code:"ETHEREUMJS_DEFAULT_ERROR_CODE"},$,Q)}var H_;var N_=y(()=>{H_=class H_ extends Error{constructor($,Q,X){super(Q??$.code);if(this.type=$,X!==void 0)this.stack=X}getMetadata(){return this.type}toObject(){return{type:this.getMetadata(),message:this.message??"",stack:this.stack??"",className:this.constructor.name}}}});function LQ0($){if($[0]===0)throw W$("invalid RLP: extra zeros");return yN0(gN0($))}function wQ0($,Q){if($<56)return Uint8Array.from([$+Q]);let X=C_($),Y=X.length/2,Z=C_(Q+55+Y);return Uint8Array.from(R_(Z+X))}function RW($,Q,X){if(X>$.length)throw W$("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return $.slice(Q,X)}function A_($){let Q,X,Y,Z,J,q=[],G=$[0];if(G<=127)return{data:$.slice(0,1),remainder:$.subarray(1)};else if(G<=183){if(Q=G-127,G===128)Y=Uint8Array.from([]);else Y=RW($,1,Q);if(Q===2&&Y[0]<128)throw W$("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:Y,remainder:$.subarray(Q)}}else if(G<=191){if(X=G-182,$.length-1<X)throw W$("invalid RLP: not enough bytes for string length");if(Q=LQ0(RW($,1,X)),Q<=55)throw W$("invalid RLP: expected string length to be greater than 55");return Y=RW($,X,Q+X),{data:Y,remainder:$.subarray(Q+X)}}else if(G<=247){Q=G-191,Z=RW($,1,Q);while(Z.length)J=A_(Z),q.push(J.data),Z=J.remainder;return{data:q,remainder:$.subarray(Q)}}else{if(X=G-246,Q=LQ0(RW($,1,X)),Q<56)throw W$("invalid RLP: encoded list too short");let z=X+Q;if(z>$.length)throw W$("invalid RLP: total length is larger than the data");Z=RW($,X,z);while(Z.length)J=A_(Z),q.push(J.data),Z=J.remainder;return{data:q,remainder:$.subarray(z)}}}function gN0($){let Q="";for(let X=0;X<$.length;X++)Q+=vN0[$[X]];return Q}function yN0($){let Q=Number.parseInt($,16);if(Number.isNaN(Q))throw W$("Invalid byte sequence");return Q}function TQ0($){if($>=V1._0&&$<=V1._9)return $-V1._0;if($>=V1._A&&$<=V1._F)return $-(V1._A-10);if($>=V1._a&&$<=V1._f)return $-(V1._a-10);return}function R_($){if($.slice(0,2)==="0x")$=$.slice(0,2);if(typeof $!=="string")throw W$("hex string expected, got "+typeof $);let Q=$.length,X=Q/2;if(Q%2)throw W$("padded hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=TQ0($.charCodeAt(J)),G=TQ0($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw W$('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function IQ0(...$){if($.length===1)return $[0];let Q=$.reduce((Y,Z)=>Y+Z.length,0),X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}function bN0($){return new TextEncoder().encode($)}function C_($){if($<0)throw W$("Invalid integer as argument, must be unsigned!");let Q=$.toString(16);return Q.length%2?`0${Q}`:Q}function hN0($){return $.length%2?`0${$}`:$}function FQ0($){return $.length>=2&&$[0]==="0"&&$[1]==="x"}function mN0($){if(typeof $!=="string")return $;return FQ0($)?$.slice(2):$}function BQ0($){if($ instanceof Uint8Array)return $;if(typeof $==="string"){if(FQ0($))return R_(hN0(mN0($)));return bN0($)}if(typeof $==="number"||typeof $==="bigint"){if(!$)return Uint8Array.from([]);return R_(C_($))}if($===null||$===void 0)return Uint8Array.from([]);throw W$("toBytes: received unsupported type "+typeof $)}function SQ0($){if(Array.isArray($)){let X=[],Y=0;for(let Z=0;Z<$.length;Z++){let J=SQ0($[Z]);X.push(J),Y+=J.length}return IQ0(wQ0(Y,192),...X)}let Q=BQ0($);if(Q.length===1&&Q[0]<128)return Q;return IQ0(wQ0(Q.length,128),Q)}function cN0($,Q=!1){if(typeof $==="undefined"||$===null||$.length===0)return Uint8Array.from([]);let X=BQ0($),Y=A_(X);if(Q)return{data:Y.data,remainder:Y.remainder.slice()};if(Y.remainder.length!==0)throw W$("invalid RLP: remainder must be zero");return Y.data}var vN0,V1,G9;var XD=y(()=>{N_();N_();vN0=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));V1={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};G9={encode:SQ0,decode:cN0}});var MK=y(()=>{XD()});function L_($,Q){if(typeof $!=="string"||!$.match(/^0x[0-9A-Fa-f]*$/))return!1;if(typeof Q!=="undefined"&&Q>0&&$.length!==2+2*Q)return!1;return!0}function KA($){let Q=$;if(typeof Q!=="string")throw W$(`[padToEven] value must be type 'string', received ${typeof Q}`);if(Q.length%2)Q=`0${Q}`;return Q}var EQ0=($)=>{if(typeof $!=="string")throw W$(`[stripHexPrefix] input must be type 'string', received ${typeof $}`);return L_($)?$.slice(2):$};var _Q0=y(()=>{MK()});var w_=function($){if(!($ instanceof Uint8Array)){let Q=`This method only supports Uint8Array but input was: ${$}`;throw W$(Q)}},kQ0=function($){if(typeof $!=="string"){let Q=`This method only supports strings but input was: ${$}`;throw W$(Q)}};var T_=y(()=>{MK()});var xQ0,O1,PY=($)=>{if(!$.startsWith("0x"))throw W$("input string must be 0x prefixed");return P_(KA(EQ0($)))},UA=($)=>{if($.startsWith("0x"))throw W$("input string cannot be 0x prefixed");return P_(KA($))},z9=($)=>{return`0x${O1($)}`},I_,tJ=($,Q=!1)=>{if(Q)$.reverse();let X=z9($);if(X==="0x")return xQ0;if(X.length===4)return I_[$[0]];if(X.length===6)return I_[$[0]*256+$[1]];return BigInt(X)},fQ0=($)=>{if(!Number.isSafeInteger($)||$<0)throw W$(`Received an invalid integer type: ${$}`);return`0x${$.toString(16)}`},e7=($)=>{let Q=fQ0($);return PY(Q)},WA=($,Q=!1)=>{let X=PY(`0x${KA($.toString(16))}`);return Q?X.reverse():X},lN0=($)=>{let Q=$[0];while($.length>0&&Q.toString()==="0")$=$.slice(1),Q=$[0];return $},YD=($)=>{return w_($),lN0($)},eJ=($)=>{if($===null||$===void 0)return new Uint8Array;if(Array.isArray($)||$ instanceof Uint8Array)return Uint8Array.from($);if(typeof $==="string"){if(!L_($))throw W$(`Cannot convert string to Uint8Array. toBytes only supports 0x-prefixed hex strings and this string was given: ${$}`);return PY($)}if(typeof $==="number")return e7($);if(typeof $==="bigint"){if($<xQ0)throw W$(`Cannot convert negative bigint to Uint8Array. Given: ${$}`);let Q=$.toString(16);if(Q.length%2)Q="0"+Q;return UA(Q)}if($.toBytes!==void 0)return $.toBytes();throw W$("invalid type")},F_=($,Q=50)=>{let X=$ instanceof Uint8Array?z9($):$,Y=X.slice(0,2)==="0x"?Q+2:Q;if(X.length<=Y)return X;return X.slice(0,Y)+""},CW=($)=>{return YD(WA($))},ZD=($)=>{return YD(e7($))},$G=(...$)=>{if($.length===1)return $[0];let Q=$.reduce((Y,Z)=>Y+Z.length,0),X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X};var QG=y(()=>{QD();MK();T_();_Q0();QD();xQ0=BigInt(0),O1=QA,I_=[];for(let $=0;$<=65535;$++)I_[$]=BigInt($)});var x5$,f5$,v5$,g5$,y5$,b5$,uN0="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",JD,dN0="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",h5$,iN0="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",vQ0,m5$,c5$,p5$,K9,l5$,nN0,u5$,d5$,i5$,n5$,o5$,r5$,s5$,a5$,t5$,e5$,oN0,$q$,Qq$,Xq$,Yq$,Zq$,Jq$,qq$,Gq$;var VA=y(()=>{HQ0();CQ0();QG();x5$=BigInt("0xffffffffffffffff"),f5$=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),v5$=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),g5$=$D.CURVE.n,y5$=$D.CURVE.n/BigInt(2),b5$=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),JD=PY(uN0),h5$=PY(dN0),vQ0=PY(iN0),m5$=RQ0(new Uint8Array),c5$=Uint8Array.from([128]),p5$=BigInt(-1),K9=BigInt(0),l5$=BigInt(1),nN0=BigInt(2),u5$=BigInt(3),d5$=BigInt(7),i5$=BigInt(8),n5$=BigInt(27),o5$=BigInt(28),r5$=BigInt(31),s5$=BigInt(32),a5$=BigInt(64),t5$=BigInt(128),e5$=BigInt(255),oN0=BigInt(256),$q$=BigInt(96),Qq$=BigInt(100),Xq$=BigInt(160),Yq$=BigInt(224),Zq$=BigInt(79228162514264340000000000000),Jq$=BigInt(1461501637330903000000000000000000000000000000000),qq$=BigInt(26959946667150640000000000000000000000000000000000000000000000000000),Gq$=nN0**oN0});var Kq$,Uq$;var gQ0=y(()=>{Kq$=BigInt(1e9),Uq$=BigInt(1000000000000000000)});function X20($,Q=24){let X=new Uint32Array(10);for(let Y=24-Q;Y<24;Y++){for(let q=0;q<10;q++)X[q]=$[q]^$[q+10]^$[q+20]^$[q+30]^$[q+40];for(let q=0;q<10;q+=2){let G=(q+8)%10,z=(q+2)%10,M=X[z],j=X[z+1],P=yQ0(M,j,1)^X[G],D=bQ0(M,j,1)^X[G+1];for(let A=0;A<50;A+=10)$[q+A]^=P,$[q+A+1]^=D}let Z=$[2],J=$[3];for(let q=0;q<24;q++){let G=mQ0[q],z=yQ0(Z,J,G),M=bQ0(Z,J,G),j=hQ0[q];Z=$[j],J=$[j+1],$[j]=z,$[j+1]=M}for(let q=0;q<50;q+=10){for(let G=0;G<10;G++)X[G]=$[q+G];for(let G=0;G<10;G++)$[q+G]^=~X[(G+2)%10]&X[(G+4)%10]}$[0]^=$20[Y],$[1]^=Q20[Y]}rJ(X)}var rN0,qD,sN0,aN0,tN0,eN0,hQ0,mQ0,cQ0,pQ0,$20,Q20,yQ0=($,Q,X)=>X>32?b80($,Q,X):g80($,Q,X),bQ0=($,Q,X)=>X>32?h80($,Q,X):y80($,Q,X),B_,OA=($,Q,X)=>XA(()=>new B_(Q,$,X)),lQ0,S_,uQ0,dQ0;var iQ0=y(()=>{m80();sJ();rN0=BigInt(0),qD=BigInt(1),sN0=BigInt(2),aN0=BigInt(7),tN0=BigInt(256),eN0=BigInt(113),hQ0=[],mQ0=[],cQ0=[];for(let $=0,Q=qD,X=1,Y=0;$<24;$++){[X,Y]=[Y,(2*X+3*Y)%5],hQ0.push(2*(5*Y+X)),mQ0.push(($+1)*($+2)/2%64);let Z=rN0;for(let J=0;J<7;J++)if(Q=(Q<<qD^(Q>>aN0)*eN0)%tN0,Q&sN0)Z^=qD<<(qD<<BigInt(J))-qD;cQ0.push(Z)}pQ0=v80(cQ0,!0),$20=pQ0[0],Q20=pQ0[1];B_=class B_ extends qK{constructor($,Q,X,Y=!1,Z=24){super();if(this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=$,this.suffix=Q,this.outputLen=X,this.enableXOF=Y,this.rounds=Z,a7(X),!(0<$&&$<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=F80(this.state)}clone(){return this._cloneInto()}keccak(){uE(this.state32),X20(this.state32,this.rounds),uE(this.state32),this.posOut=0,this.pos=0}update($){oJ(this),$=JK($),NZ($);let{blockLen:Q,state:X}=this,Y=$.length;for(let Z=0;Z<Y;){let J=Math.min(Q-this.pos,Y-Z);for(let q=0;q<J;q++)X[this.pos++]^=$[Z++];if(this.pos===Q)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:$,suffix:Q,pos:X,blockLen:Y}=this;if($[X]^=Q,(Q&128)!==0&&X===Y-1)this.keccak();$[Y-1]^=128,this.keccak()}writeInto($){oJ(this,!1),NZ($),this.finish();let Q=this.state,{blockLen:X}=this;for(let Y=0,Z=$.length;Y<Z;){if(this.posOut>=X)this.keccak();let J=Math.min(X-this.posOut,Z-Y);$.set(Q.subarray(this.posOut,this.posOut+J),Y),this.posOut+=J,Y+=J}return $}xofInto($){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto($)}xof($){return a7($),this.xofInto(new Uint8Array($))}digestInto($){if(oM($,this),this.finished)throw new Error("digest() was already called");return this.writeInto($),this.destroy(),$}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,rJ(this.state)}_cloneInto($){let{blockLen:Q,suffix:X,outputLen:Y,rounds:Z,enableXOF:J}=this;return $||($=new B_(Q,X,Y,J,Z)),$.state32.set(this.state32),$.pos=this.pos,$.posOut=this.posOut,$.finished=this.finished,$.rounds=Z,$.suffix=X,$.outputLen=Y,$.enableXOF=J,$.destroyed=this.destroyed,$}};lQ0=(()=>OA(1,144,28))(),S_=(()=>OA(1,136,32))(),uQ0=(()=>OA(1,104,48))(),dQ0=(()=>OA(1,72,64))()});var Hq$,MA,Nq$,Aq$;var E_=y(()=>{iQ0();QD();Hq$=OK(lQ0),MA=(()=>{let $=OK(S_);return $.create=S_.create,$})(),Nq$=OK(uQ0),Aq$=OK(dQ0)});class CZ{get version(){if(this._version!==null)return this._version;else throw Error(`version=${this._version} not loaded`)}set version($){this._version=$}get nonce(){if(this._nonce!==null)return this._nonce;else throw Error(`nonce=${this._nonce} not loaded`)}set nonce($){this._nonce=$}get balance(){if(this._balance!==null)return this._balance;else throw Error(`balance=${this._balance} not loaded`)}set balance($){this._balance=$}get storageRoot(){if(this._storageRoot!==null)return this._storageRoot;else throw Error(`storageRoot=${this._storageRoot} not loaded`)}set storageRoot($){this._storageRoot=$}get codeHash(){if(this._codeHash!==null)return this._codeHash;else throw Error(`codeHash=${this._codeHash} not loaded`)}set codeHash($){this._codeHash=$}get codeSize(){if(this._codeSize!==null)return this._codeSize;else throw Error(`codeSize=${this._codeSize} not loaded`)}set codeSize($){this._codeSize=$}constructor($=K9,Q=K9,X=vQ0,Y=JD,Z=0,J=0){if(this._nonce=null,this._balance=null,this._storageRoot=null,this._codeHash=null,this._codeSize=null,this._version=null,this._nonce=$,this._balance=Q,this._storageRoot=X,this._codeHash=Y,Z===null&&Y!==null&&!this.isContract())Z=0;this._codeSize=Z,this._version=J,this._validate()}_validate(){if(this._nonce!==null&&this._nonce<K9)throw W$("nonce must be greater than zero");if(this._balance!==null&&this._balance<K9)throw W$("balance must be greater than zero");if(this._storageRoot!==null&&this._storageRoot.length!==32)throw W$("storageRoot must have a length of 32");if(this._codeHash!==null&&this._codeHash.length!==32)throw W$("codeHash must have a length of 32");if(this._codeSize!==null&&this._codeSize<K9)throw W$("codeSize must be greater than zero")}raw(){return[CW(this.nonce),CW(this.balance),this.storageRoot,this.codeHash]}serialize(){return G9.encode(this.raw())}serializeWithPartialInfo(){let $=[],Q=ZD(0),X=ZD(1);if(this._nonce!==null)$.push([X,CW(this._nonce)]);else $.push([Q]);if(this._balance!==null)$.push([X,CW(this._balance)]);else $.push([Q]);if(this._storageRoot!==null)$.push([X,this._storageRoot]);else $.push([Q]);if(this._codeHash!==null)$.push([X,this._codeHash]);else $.push([Q]);if(this._codeSize!==null)$.push([X,ZD(this._codeSize)]);else $.push([Q]);if(this._version!==null)$.push([X,ZD(this._version)]);else $.push([Q]);return G9.encode($)}isContract(){if(this._codeHash===null&&this._codeSize===null)throw Error("Insufficient data as codeHash=null and codeSize=null");return this._codeHash!==null&&!aJ(this._codeHash,JD)||this._codeSize!==null&&this._codeSize!==0}isEmpty(){if(this._balance!==null&&this.balance!==K9||this._nonce===null&&this.nonce!==K9||this._codeHash!==null&&!aJ(this.codeHash,JD))return!1;return this.balance===K9&&this.nonce===K9&&aJ(this.codeHash,JD)}}function DA($){let{nonce:Q,balance:X,storageRoot:Y,codeHash:Z}=$;if(Q===null||X===null||Y===null||Z===null)throw Error("Partial fields not supported in fromAccountData");return new CZ(Q!==void 0?tJ(eJ(Q)):void 0,X!==void 0?tJ(eJ(X)):void 0,Y!==void 0?eJ(Y):void 0,Z!==void 0?eJ(Z):void 0)}function Y20($){let[Q,X,Y,Z]=$;return new CZ(tJ(Q),tJ(X),Y,Z)}function jA($){let Q=G9.decode($);if(!Array.isArray(Q))throw W$("Invalid serialized account input. Must be array");return Y20(Q)}var nQ0=function($){try{kQ0($)}catch{return!1}return/^0x[0-9a-fA-F]{40}$/.test($)},Bq$;var __=y(()=>{XD();QG();VA();MK();T_();Bq$=new Uint8Array(0)});class x_{constructor($){if($.length!==20)throw W$("Invalid address length");this.bytes=$}equals($){return aJ(this.bytes,$.bytes)}isZero(){return this.equals(new x_(new Uint8Array(20)))}isPrecompileOrSystemAddress(){let $=tJ(this.bytes),Q=K9,X=BigInt("0xffff");return $>=Q&&$<=X}toString(){return z9(this.bytes)}toBytes(){return new Uint8Array(this.bytes)}}function PA($){if(!nQ0($))throw W$(`Invalid address input=${$}`);return new x_(PY($))}var oQ0=y(()=>{__();QG();VA();MK()});var rQ0=()=>{};var sQ0=()=>{};var aQ0=()=>{};var tQ0=()=>{};var uq$;var eQ0=y(()=>{QG();uq$=PY("0x05")});var $X0,nq$,oq$,G20=31,rq$;var QX0=y(()=>{QG();$X0={BasicData:0,CodeHash:1},nq$=e7($X0.BasicData),oq$=e7($X0.CodeHash),rq$=BigInt(256)**BigInt(G20)});var z20=32,XX0=4096,K20,U20=2,aq$,tq$;var YX0=y(()=>{K20=32*XX0,aq$=K20*U20-1,tq$=z20*XX0});var ZX0=()=>{};var JX0=()=>{};var qX0=()=>{};var GX0=()=>{};var zX0,Z1$,J1$,W20=31,q1$;var KX0=y(()=>{QG();zX0={BasicData:0,CodeHash:1},Z1$=e7(zX0.BasicData),J1$=e7(zX0.CodeHash),q1$=BigInt(256)**BigInt(W20)});var LW=y(()=>{VA();MK();gQ0();__();oQ0();rQ0();aQ0();tQ0();QG();sQ0();eQ0();QX0();YX0();ZX0();JX0();qX0();GX0();KX0()});var UX0=()=>{};var V20;var WX0=y(()=>{V20=RX(QX(),1)});var O20;var VX0=y(()=>{O20=RX(QX(),1)});var M20;var OX0=y(()=>{M20=RX(QX(),1)});var MX0=()=>{};class GD{constructor($){this.map=new Map,this.getStorage=$}async get($,Q){let X=O1($.bytes),Y=this.map.get(X);if(Y!==void 0){let J=O1(Q),q=Y.get(J);if(q!==void 0)return q}let Z=await this.getStorage($,Q);return this.put($,Q,Z),Z}put($,Q,X){let Y=O1($.bytes),Z=this.map.get(Y);if(Z===void 0)Z=new Map,this.map.set(Y,Z);let J=O1(Q);if(Z.has(J)===!1)Z.set(J,X)}clear(){this.map=new Map}}var f_=y(()=>{LW()});var v_=y(()=>{WX0();MX0();VX0();f_();OX0();UX0()});async function HA($,Q,X){let Y=await $.getAccount(Q)??new CZ;if(Y.nonce=X.nonce??Y.nonce,Y.balance=X.balance??Y.balance,Y.storageRoot=X.storageRoot??Y.storageRoot,Y.codeHash=X.codeHash??Y.codeHash,Y.codeSize=X.codeSize??Y.codeSize,$._debug!==void 0)for(let[Z,J]of Object.entries(X))$._debug(`modifyAccountFields address=${Q.toString()} ${Z}=${J instanceof Uint8Array?z9(J):J} `);await $.putAccount(Q,Y)}var g_=y(()=>{LW()});class NA{constructor($={}){this.DEBUG=!1,this.DEBUG=typeof window==="undefined"?process?.env?.DEBUG?.includes("ethjs")??!1:!1,this._debug=DX0.default("statemanager:merkle"),this.common=$.common??new E9({chain:IJ}),this._checkpointCount=0,this._trie=$.trie??new KN({useKeyHashing:!0,common:this.common}),this._storageTries={},this.keccakFunction=$.common?.customCrypto.keccak256??MA,this.originalStorageCache=new GD(this.getStorage.bind(this)),this._prefixCodeHashes=$.prefixCodeHashes??!0,this._prefixStorageTrieKeys=$.prefixStorageTrieKeys??!1,this._caches=$.caches}async getAccount($){let Q=this._caches?.account?.get($);if(Q!==void 0)return Q.accountRLP!==void 0?jA(Q.accountRLP):void 0;let X=await this._trie.get($.bytes),Y=X!==null?jA(X):void 0;if(this.DEBUG)this._debug(`Get account ${$} from DB (${Y?"exists":"non-existent"})`);return this._caches?.account?.put($,Y),Y}async putAccount($,Q){if(this.DEBUG)this._debug(`Save account address=${$} nonce=${Q?.nonce} balance=${Q?.balance} contract=${Q&&Q.isContract()?"yes":"no"} empty=${Q&&Q.isEmpty()?"yes":"no"}`);if(this._caches?.account===void 0){let X=this._trie;if(Q!==void 0)await X.put($.bytes,Q.serialize());else await X.del($.bytes)}else if(Q!==void 0)this._caches.account?.put($,Q);else this._caches.account?.del($)}async modifyAccountFields($,Q){await HA(this,$,Q)}async deleteAccount($){if(this.DEBUG)this._debug(`Delete account ${$}`);if(this._caches?.deleteAccount($),this._caches?.account===void 0)await this._trie.del($.bytes)}async putCode($,Q){let X=this.keccakFunction(Q);if(this._caches?.code!==void 0)this._caches.code.put($,Q);else{let Y=this._prefixCodeHashes?$G(y_,X):X;await this._getCodeDB().put(Y,Q)}if(this.DEBUG)this._debug(`Update codeHash (-> ${F_(X)}) for account ${$}`);if(await this.getAccount($)===void 0)await this.putAccount($,new CZ);await this.modifyAccountFields($,{codeHash:X})}async getCode($){let Q=this._caches?.code?.get($);if(Q!==void 0)return Q.code??new Uint8Array(0);let X=await this.getAccount($);if(!X)return new Uint8Array(0);if(!X.isContract())return new Uint8Array(0);let Y=this._prefixCodeHashes?$G(y_,X.codeHash):X.codeHash,Z=await this._trie.database().get(Y)??new Uint8Array(0);return this._caches?.code?.put($,Z),Z}async getCodeSize($){return(await this.getCode($)).length}_getStorageTrie($,Q){let X=$ instanceof Uint8Array?$:this.keccakFunction($.bytes),Y=O1(X),Z=this._storageTries[Y];if(Z===void 0){let J=this._prefixStorageTrieKeys?X.slice(0,7):void 0;if(Z=this._trie.shallowCopy(!1,{keyPrefix:J}),Q!==void 0)Z.root(Q.storageRoot);else Z.root(Z.EMPTY_TRIE_ROOT);Z.flushCheckpoints(),this._storageTries[Y]=Z}return Z}_getAccountTrie(){return this._trie}_getCodeDB(){return this._trie.database()}async getStorage($,Q){if(Q.length!==32)throw W$("Storage key must be 32 bytes long");let X=this._caches?.storage?.get($,Q);if(X!==void 0)return G9.decode(X??new Uint8Array(0));let Y=await this.getAccount($);if(!Y)return new Uint8Array;let J=await this._getStorageTrie($,Y).get(Q);return this._caches?.storage?.put($,Q,J??PY("0x80")),G9.decode(J??new Uint8Array(0))}async _modifyContractStorage($,Q,X){return new Promise(async(Y)=>{let Z=this._getStorageTrie($,Q);X(Z,async()=>{let J=O1($.bytes);this._storageTries[J]=Z,Q.storageRoot=Z.root(),await this.putAccount($,Q),Y()})})}async _writeContractStorage($,Q,X,Y){await this._modifyContractStorage($,Q,async(Z,J)=>{if(Y instanceof Uint8Array&&Y.length){let q=G9.encode(Y);if(this.DEBUG)this._debug(`Update contract storage for account ${$} to ${F_(Y)}`);await Z.put(X,q)}else{if(this.DEBUG)this._debug("Delete contract storage for account");await Z.del(X)}J()})}async putStorage($,Q,X){if(Q.length!==32)throw W$("Storage key must be 32 bytes long");if(X.length>32)throw W$("Storage value cannot be longer than 32 bytes");let Y=await this.getAccount($);if(!Y)throw W$("putStorage() called on non-existing account");X=YD(X),this._caches?.storage?.put($,Q,G9.encode(X))??await this._writeContractStorage($,Y,Q,X)}async clearStorage($){let Q=await this.getAccount($);if(!Q)Q=new CZ;this._caches?.storage?.clearStorage($),await this._modifyContractStorage($,Q,(X,Y)=>{X.root(X.EMPTY_TRIE_ROOT),Y()})}async checkpoint(){this._trie.checkpoint(),this._caches?.checkpoint(),this._checkpointCount++}async commit(){if(await this._trie.commit(),this._caches?.commit(),this._checkpointCount--,this._checkpointCount===0)await this.flush(),this.originalStorageCache.clear();if(this.DEBUG)this._debug("state checkpoint committed")}async revert(){if(await this._trie.revert(),this._caches?.revert(),this._storageTries={},this._checkpointCount--,this._checkpointCount===0)await this.flush(),this.originalStorageCache.clear()}async flush(){let $=this._caches?.code?.flush()??[];for(let Y of $){let Z=PA(`0x${Y[0]}`),J=Y[1].code;if(J===void 0)continue;let q=this.keccakFunction(J),G=this._prefixCodeHashes?$G(y_,q):q;if(await this._getCodeDB().put(G,J),await this.getAccount(Z)===void 0)await this.putAccount(Z,new CZ);await this.modifyAccountFields(Z,{codeHash:q})}let Q=this._caches?.storage?.flush()??[];for(let Y of Q){let Z=PA(`0x${Y[0]}`),J=Y[1],q=UA(J),G=Y[2],z=G9.decode(G??new Uint8Array(0)),M=await this.getAccount(Z);if(M)await this._writeContractStorage(Z,M,q,z)}let X=this._caches?.account?.flush()??[];for(let Y of X){let Z=Y[0],J=UA(Z),q=Y[1];if(q.accountRLP===void 0)await this._trie.del(J);else await this._trie.put(J,q.accountRLP)}}async getStateRoot(){return await this.flush(),this._trie.root()}async setStateRoot($,Q=!0){if(await this.flush(),!aJ($,this._trie.EMPTY_TRIE_ROOT)){if(!await this._trie.checkRoot($))throw W$("State trie does not contain state root")}if(this._trie.root($),Q)this._caches?.clear();this._storageTries={}}async dumpStorage($){await this.flush();let Q=await this.getAccount($);if(!Q)throw W$("dumpStorage f() can only be called for an existing account");return this._getStorageTrie($,Q).getValueMap().then((Y)=>{return Y.values})}async dumpStorageRange($,Q,X){if(!Number.isSafeInteger(X)||X<0)throw W$("Limit is not a proper uint.");await this.flush();let Y=await this.getAccount($);if(!Y)throw W$("Account does not exist.");return this._getStorageTrie($,Y).getValueMap(Q,X).then((J)=>{let q=J.values,G=Object.create(null);for(let z of Object.keys(q)){let M=q[z];G[z]={key:null,value:M}}return{storage:G,nextKey:J.nextKey}})}async generateCanonicalGenesis($){if(this._checkpointCount!==0)throw W$("Cannot create genesis state with uncommitted checkpoints");if(this.DEBUG)this._debug("Save genesis state into the state trie");let Q=Object.keys($);for(let X of Q){let Y=PA(X),Z=$[X];if(!Array.isArray(Z)){let J=DA({balance:Z});await this.putAccount(Y,J)}else{let[J,q,G,z]=Z,M=DA({balance:J,nonce:z});if(await this.putAccount(Y,M),q!==void 0)await this.putCode(Y,eJ(q));if(G!==void 0)for(let[j,P]of G)await this.putStorage(Y,eJ(j),eJ(P))}}await this.flush()}async hasStateRoot($){return this._trie.checkRoot($)}shallowCopy($=!0){let Q=this.common.copy();Q.setHardfork(this.common.hardfork());let X=!$?this._trie._opts.cacheSize:0,Y=this._trie.shallowCopy(!1,{cacheSize:X}),Z=this._prefixCodeHashes,J=this._prefixStorageTrieKeys;return new NA({common:Q,trie:Y,prefixStorageTrieKeys:J,prefixCodeHashes:Z,caches:this._caches?.shallowCopy($)})}clearCaches(){this._caches?.clear()}getAppliedKey($){return this._trie.appliedKey($)}}var DX0,y_;var jX0=y(()=>{qX();kn();XD();LW();DX0=RX(QX(),1);E_();v_();g_();y_=HW("c")});var PX0=()=>{};var HX0=()=>{};var NX0=()=>{};var AX0=y(()=>{PX0();HX0();NX0()});var D20,U7$;var RX0=y(()=>{XD();LW();D20=RX(QX(),1),U7$=G9.encode(new CZ().serialize()).slice(2)});class AA{constructor($={}){this.accountStack=[],this.codeStack=[],this.storageStack=[],this.checkpointSync(),this.originalStorageCache=new GD(this.getStorage.bind(this)),this.common=$.common}topAccountStack(){return this.accountStack[this.accountStack.length-1]}topCodeStack(){return this.codeStack[this.codeStack.length-1]}topStorageStack(){return this.storageStack[this.storageStack.length-1]}checkpointSync(){let $=new Map(this.topAccountStack());for(let[Q,X]of $){let Y=X!==void 0?Object.assign(Object.create(Object.getPrototypeOf(X)),X):void 0;$.set(Q,Y)}this.accountStack.push($),this.codeStack.push(new Map(this.topCodeStack())),this.storageStack.push(new Map(this.topStorageStack()))}async getAccount($){return this.topAccountStack().get($.toString())}async putAccount($,Q){this.topAccountStack().set($.toString(),Q)}async deleteAccount($){this.topAccountStack().set($.toString(),void 0)}async modifyAccountFields($,Q){await HA(this,$,Q)}async getCode($){return this.topCodeStack().get($.toString())??new Uint8Array(0)}async putCode($,Q){if(this.topCodeStack().set($.toString(),Q),await this.getAccount($)===void 0)await this.putAccount($,new CZ);await this.modifyAccountFields($,{codeHash:(this.common?.customCrypto.keccak256??MA)(Q)})}async getCodeSize($){return(await this.getCode($)).length}async getStorage($,Q){return this.topStorageStack().get(`${$.toString()}_${z9(Q)}`)??new Uint8Array(0)}async putStorage($,Q,X){this.topStorageStack().set(`${$.toString()}_${z9(Q)}`,X)}async clearStorage(){}async checkpoint(){this.checkpointSync()}async commit(){this.accountStack.splice(-2,1),this.codeStack.splice(-2,1),this.storageStack.splice(-2,1)}async revert(){this.accountStack.pop(),this.codeStack.pop(),this.storageStack.pop()}async flush(){}clearCaches(){}shallowCopy(){let $=new AA({common:this.common});for(let Q=0;Q<this.accountStack.length;Q++)$.accountStack.push(new Map(this.accountStack[Q])),$.codeStack.push(new Map(this.codeStack[Q])),$.storageStack.push(new Map(this.storageStack[Q]));return $}getStateRoot(){throw W$("Method not implemented.")}setStateRoot(){throw W$("Method not implemented.")}hasStateRoot(){throw W$("Method not implemented.")}}var CX0=y(()=>{LW();E_();f_();g_()});var j20;var LX0=y(()=>{j20=RX(QX(),1)});var P20;var wX0=y(()=>{P20=RX(QX(),1)});var H20,TX0=95,N7$,A7$;var IX0=y(()=>{H20=RX(QX(),1),N7$=TX0+1,A7$=TX0+32});var FX0=()=>{};var b_=y(()=>{v_();jX0();AX0();RX0();CX0();LX0();wX0();IX0();FX0()});async function RA($){let Q=$??{};if(Q.bn254=new DW,Q.common===void 0)Q.common=new E9({chain:IJ});if(Q.blockchain===void 0)Q.blockchain=new JW;if(Q.stateManager===void 0)Q.stateManager=new AA;return new YK(Q)}var BX0=y(()=>{qX();b_();zD();e8();qW()});function A20($,Q){let X=BigInt($)*BigInt(e6)+BigInt(Q);switch(X){case BigInt(0):return{type:A6.BasicData};case BigInt(1):return{type:A6.CodeHash};default:if(X<o4)throw Error(`No attribute yet stored >=2 and <${o4}`);if(X>=o4&&X<r4){let Y=X-BigInt(o4);return{type:A6.Storage,slot:Y}}else if(X>=r4&&X<FM){let Y=Number(X)-r4;return{type:A6.Code,codeOffset:Y*31}}else if(X>=FM){let Y=BigInt(X-FM);return{type:A6.Storage,slot:Y}}else throw Error(`Invalid treeIndex=${$} chunkIndex=${Q} for verkle tree access`)}}class h_{constructor($){if(this.stemCache=new nM,this.chunkCache=new iM,$.verkleCrypto===void 0)throw h0("verkle crypto required");this.verkleCrypto=$.verkleCrypto,this.stems=$.stems??new Map,this.chunks=$.chunks??new Map}readAccountBasicData($){return this.touchAddressOnReadAndComputeGas($,0,D2)}writeAccountBasicData($){return this.touchAddressOnWriteAndComputeGas($,0,D2)}readAccountCodeHash($){return this.touchAddressOnReadAndComputeGas($,0,j2)}writeAccountCodeHash($){return this.touchAddressOnWriteAndComputeGas($,0,j2)}readAccountHeader($){let Q=q0;return Q+=this.readAccountBasicData($),Q+=this.readAccountCodeHash($),Q}writeAccountHeader($){let Q=q0;return Q+=this.writeAccountBasicData($),Q+=this.writeAccountCodeHash($),Q}readAccountCodeChunks($,Q,X){let Y=q0;for(let Z=Math.floor(Q/31);Z<=Math.floor(X/31);Z++){let{treeIndex:J,subIndex:q}=PS(Z);Y+=this.touchAddressOnReadAndComputeGas($,J,q)}return Y}writeAccountCodeChunks($,Q,X){let Y=q0;for(let Z=Math.floor(Q/31);Z<=Math.floor(X/31);Z++){let{treeIndex:J,subIndex:q}=PS(Z);Y+=this.touchAddressOnWriteAndComputeGas($,J,q)}return Y}readAccountStorage($,Q){let{treeIndex:X,subIndex:Y}=jS(Q);return this.touchAddressOnReadAndComputeGas($,X,Y)}writeAccountStorage($,Q){let{treeIndex:X,subIndex:Y}=jS(Q);return this.touchAddressOnWriteAndComputeGas($,X,Y)}touchAddressOnWriteAndComputeGas($,Q,X){return this.touchAddressAndComputeGas($,Q,X,{isWrite:!0})}touchAddressOnReadAndComputeGas($,Q,X){return this.touchAddressAndComputeGas($,Q,X,{isWrite:!1})}touchAddressAndComputeGas($,Q,X,{isWrite:Y}){let Z=q0,{stemRead:J,stemWrite:q,chunkRead:G,chunkWrite:z,chunkFill:M}=this.touchAddress($,Q,X,{isWrite:Y});if(J===!0)Z+=SX0;if(q===!0)Z+=_X0;if(G===!0)Z+=EX0;if(z===!0)Z+=kX0;if(M===!0)Z+=N20;return wW(`touchAddressAndComputeGas=${Z} address=${$} treeIndex=${Q} subIndex=${X}`),Z}touchAddress($,Q,X,{isWrite:Y}={}){let Z=!1,J=!1,q=!1,G=!1,z=!1,M=le(this.verkleCrypto,$,Q),j=e0(M),P=this.stemCache.get(j)??this.stems.get(j);if(P===void 0)Z=!0,P={address:$,treeIndex:Q},this.stemCache.set(j,P);let D=ue(M,typeof X==="number"?p9(X):X),A=e0(D),I=this.chunkCache.get(A)??this.chunks.get(A);if(I===void 0)q=!0,I={},this.chunkCache.set(A,I);if(Y===!0){if(P.write!==!0)J=!0,P.write=!0;if(I.write!==!0)G=!0,I.write=!0}return wW(`${A}: isWrite=${Y} for stemRead=${Z} stemWrite=${J} chunkRead=${q} chunkWrite=${G} chunkFill=${z}`),{stemRead:Z,stemWrite:J,chunkRead:q,chunkWrite:G,chunkFill:z}}merge($){for(let[Q,X]of $.chunks.entries()){let Y=Q.slice(0,Q.length-2),Z=$.stems.get(Y);if(Z===void 0)throw Error(`Internal error: missing stem for the chunkKey=${Q}`);let J=this.stems.get(Y);if(J===void 0)this.stems.set(Y,Z);else J.write=J.write!==!0?Z.write:!0;let q=this.chunks.get(Q);if(q===void 0)this.chunks.set(Q,X);else q.write=q.write!==!0?X.write:!0,q.fill=q.fill!==!0?q.fill:!0}}commit(){let $=this.stemCache.commit();for(let[X,Y]of $)this.stems.set(X,Y);let Q=this.chunkCache.commit();for(let[X,Y]of Q)this.chunks.set(X,Y)}revert(){this.stemCache.clear(),this.chunkCache.clear()}debugWitnessCost(){let $=0,Q=0,X=0,Y=0;for(let[Z,{write:J}]of this.stems.entries())if($++,J===!0)Q++;for(let[Z,{write:J}]of this.chunks.entries())if(X++,J===!0)Y++;wW(`${$} stem reads, totalling ${BigInt($)*SX0} gas units`),wW(`${Q} stem writes, totalling ${BigInt(Q)*_X0} gas units`),wW(`${X} chunk reads, totalling ${BigInt(X)*EX0} gas units`),wW(`${Y} chunk writes, totalling ${BigInt(Y)*kX0} gas units`)}*rawAccesses(){for(let $ of this.chunks.keys()){let Q=$.slice(0,$.length-2),X=this.stems.get(Q);if(X===void 0)throw Error(`Internal error: missing stem for the chunkKey=${$}`);let{address:Y,treeIndex:Z}=X,J=Number(`0x${$.slice($.length-2)}`);yield{address:Y,treeIndex:Z,chunkIndex:J,chunkKey:$}}}*accesses(){for(let $ of this.rawAccesses()){let{address:Q,treeIndex:X,chunkIndex:Y,chunkKey:Z}=$;yield{...A20(X,Y),address:Q,chunkKey:Z}}}}var xX0,wW,SX0,EX0,_X0,kX0,N20;var fX0=y(()=>{qX();R$();xX0=RX(QX(),1),wW=xX0.default("evm:verkle:aw"),SX0=BigInt(1900),EX0=BigInt(200),_X0=BigInt(3000),kX0=BigInt(500),N20=BigInt(6200)});var zD=y(()=>{TQ();e8();qW();wS();L80();BX0();mS();fX0()});function m_($,Q){if($.length===0)return;let X=0,Y=0,Z=0,J=["tag","calls","avgTimePerCall","totalTime","staticGasUsed","dynamicGasUsed","gasUsed","staticGas","millionGasPerSecond","blocksPerSlot"],q=["tag","calls","ms/call","total (ms)","sgas","dgas","total (s+d)","static fee","Mgas/s","BpS"];function G(k,f){return" "+k.toString().padStart(f," ")+" "}function z(k){return G(k,0).length-2}let M=[];for(let k of $){let f=0;M[f]=Math.max(M[f]??0,z(q[f]));for(let g of J)if(k[g]!==void 0)switch(M[f]=Math.max(M[f]??0,z(k[g])),f++,g){case"calls":X+=k[g];break;case"totalTime":Y+=k[g];break;case"gasUsed":Z+=k[g];break}}for(let k in M)M[k]=Math.max(M[k]??0,z(q[k]));let j=M.reduce((k,f)=>k+f,0)+M.length*3-1,A=2500,I=Z/Y,H=Math.round(I)/1000,C=Math.round(I/A*1000)/1000;console.log("+== "+Q+" ==+"),console.log(`+== Calls: ${X}, Total time: ${Math.round(Y*1000)/1000}ms, Total gas: ${Z}, MGas/s: ${H}, Blocks per Slot (BpS): ${C} ==+`);let B="|"+"-".repeat(j)+"|";console.log(B);let S="";for(let k in M)S+="|"+G(q[k],M[k]);S+="|",console.log(S);for(let k of $){let f="",g=0;for(let b of J)if(k[b]!==void 0)f+="|"+G(k[b],M[g]),g++;f+="|",console.log(f)}let _="+"+"-".repeat(j)+"+";console.log(_)}var vX0;var c_=y(()=>{vX0={1:{maxRefundQuotient:2,blobGasPerBlob:0,maxBlobGasPerBlock:0,targetBlobGasPerBlock:0,minerReward:"5000000000000000000"},609:{minerReward:"3000000000000000000"},1013:{minerReward:"2000000000000000000"},1559:{elasticityMultiplier:2,initialBaseFee:1e9},2935:{historyStorageAddress:"0x0000F90827F1C53A10CB7A02335B175320002935",historyServeWindow:8191,systemAddress:"0xfffffffffffffffffffffffffffffffffffffffe"},3529:{maxRefundQuotient:5},4844:{targetBlobGasPerBlock:393216,blobGasPerBlob:131072,maxBlobGasPerBlock:786432,blobGasPriceUpdateFraction:3338477,minBlobGas:1},4788:{historicalRootsLength:8191},7002:{systemAddress:"0xfffffffffffffffffffffffffffffffffffffffe",withdrawalRequestPredeployAddress:"0x00000961EF480EB55E80D19AD83579A64C007002"},7251:{systemAddress:"0xfffffffffffffffffffffffffffffffffffffffe",consolidationRequestPredeployAddress:"0x0000BBDDC7CE488642FB579F8B00F3A590007251"},7691:{targetBlobGasPerBlock:786432,maxBlobGasPerBlock:1179648,blobGasPriceUpdateFraction:5007716}}});class p_{constructor($={}){this._isInitialized=!1,this.DEBUG=!1,this.common=$.common,this.common.updateParams($.params??vX0),this.stateManager=$.stateManager,this.blockchain=$.blockchain,this.evm=$.evm,this.events=new A7.default,this._emit=async(Q,X)=>{let Y=this.events.listeners(Q);for(let Z of Y)if(Z.length===2)await new Promise((J)=>{Z(X,J)});else Z(X)},this._opts=$,this._setHardfork=$.setHardfork??!1,this.DEBUG=typeof window==="undefined"?process?.env?.DEBUG?.includes("ethjs")??!1:!1}async shallowCopy($=!0){let Q=this.common.copy();Q.setHardfork(this.common.hardfork());let X=this.blockchain.shallowCopy(),Y=this.stateManager.shallowCopy($),Z={...this.evm._optsCached,common:this._opts.evmOpts?.common?.copy()??Q,blockchain:this._opts.evmOpts?.blockchain?.shallowCopy()??X,stateManager:this._opts.evmOpts?.stateManager?.shallowCopy($)??Y},J=await RA(Z);return CA({stateManager:Y,blockchain:this.blockchain,common:Q,evm:J,setHardfork:this._setHardfork,profilerOpts:this._opts.profilerOpts})}errorStr(){let $="";try{$=this.common.hardfork()}catch{$="error"}return`vm hf=${$}`}}var gX0=y(()=>{zD();cH();l_();c_()});async function CA($={}){let Q=$.stateManager!==void 0;if($.common===void 0)$.common=new E9({chain:IJ});if($.stateManager===void 0)$.stateManager=new NA({common:$.common});if($.blockchain===void 0)$.blockchain=new JW;if($.profilerOpts!==void 0){let X=$.profilerOpts;if(X.reportAfterBlock===!0&&X.reportAfterTx===!0)throw q$("Cannot have `reportProfilerAfterBlock` and `reportProfilerAfterTx` set to `true` at the same time")}if($.evm!==void 0&&$.evmOpts!==void 0)throw q$("the evm and evmOpts options cannot be used in conjunction");if($.evm===void 0){let X=!1;if($.profilerOpts?.reportAfterBlock===!0||$.profilerOpts?.reportAfterTx===!0)X=!0;let Y=$.evmOpts??{};$.evm=await RA({common:$.common,stateManager:$.stateManager,blockchain:$.blockchain,profiler:{enabled:X},...Y})}if($.activatePrecompiles===!0&&!Q){await $.evm.journal.checkpoint();for(let[X]of jW($.common)){let Y=new j7(aT(X)),Z=await $.evm.stateManager.getAccount(Y);if(Z===void 0){Z=new e5;let J=wl({balance:1,storageRoot:Z.storageRoot});await $.evm.stateManager.putAccount(Y,J)}}await $.evm.journal.commit()}return new p_($)}var l_=y(()=>{qX();zD();b_();kH();gX0()});async function KD($,Q){if($._opts.profilerOpts?.reportAfterTx===!0)a9=!0;if(a9){let Y=`Profiler run - Tx ${X9(Q.tx.hash())}`;console.log(Y),console.time(uX0),console.time(lX0)}if(Q.skipHardForkValidation!==!0&&Q.block!==void 0){if(Q.tx.common.hardfork()!==Q.block.common.hardfork())Q.tx.common.setHardfork(Q.block.common.hardfork());if(Q.block.common.hardfork()!==$.common.hardfork()){let Y=U9("block has a different hardfork than the vm",$,Q.block,Q.tx);throw q$(Y)}}let X=Q.block?.header.gasLimit??s9.gasLimit;if(Q.skipBlockGasLimitValidation!==!0&&X<Q.tx.gasLimit){let Y=U9("tx has a higher gas limit than the block",$,Q.block,Q.tx);throw q$(Y)}if(await $.evm.journal.cleanup(),Q.reportAccessList===!0)$.evm.journal.startReportingAccessList();if(Q.reportPreimages===!0)$.evm.journal.startReportingPreimages();if(await $.evm.journal.checkpoint(),$.DEBUG)BQ("-".repeat(100)),BQ("tx checkpoint");if(Q.tx.supports(hQ.EIP2718TypedTransaction)&&$.common.isActivatedEIP(2718)){if(!$.common.isActivatedEIP(2930)){await $.evm.journal.revert();let Z=U9("Cannot run transaction: EIP 2930 is not activated.",$,Q.block,Q.tx);throw q$(Z)}if(Q.tx.supports(hQ.EIP1559FeeMarket)&&!$.common.isActivatedEIP(1559)){await $.evm.journal.revert();let Z=U9("Cannot run transaction: EIP 1559 is not activated.",$,Q.block,Q.tx);throw q$(Z)}let Y=Q.tx;for(let Z of Y.accessList){let[J,q]=Z,G=z6(J);$.evm.journal.addAlwaysWarmAddress(G,!0);for(let z of q)$.evm.journal.addAlwaysWarmSlot(G,z6(z),!0)}}try{let Y=await C20($,Q);if(await $.evm.journal.commit(),$.DEBUG)BQ("tx checkpoint committed");return Y}catch(Y){if(await $.evm.journal.revert(),$.DEBUG)BQ("tx checkpoint reverted");throw Y}finally{if($.common.isActivatedEIP(2929))$.evm.journal.cleanJournal();if($.evm.stateManager.originalStorageCache.clear(),a9){console.timeEnd(lX0);let Y=$.evm.getPerformanceLogs();if(Y.precompiles.length===0&&Y.opcodes.length===0)console.log("No precompile or opcode execution.");m_(Y.precompiles,"Precompile performance"),m_(Y.opcodes,"Opcodes performance"),$.evm.clearPerformanceLogs()}}}async function C20($,Q){let X=$.stateManager,Y,Z;if($.common.isActivatedEIP(6800)){if($.evm.verkleAccessWitness===void 0)throw Error("Verkle access witness needed for execution of verkle blocks");if(!("verifyVerklePostState"in $.stateManager))throw q$("Verkle State Manager needed for execution of verkle blocks");Y=$.evm.verkleAccessWitness,Z=new h_({verkleCrypto:$.stateManager.verkleCrypto})}else if($.common.isActivatedEIP(7864)){if($.evm.binaryTreeAccessWitness===void 0)throw Error("Binary tree access witness needed for execution of binary tree blocks");if(!("verifyBinaryPostState"in $.stateManager))throw q$("Binary tree State Manager needed for execution of binary tree blocks");Y=$.evm.binaryTreeAccessWitness,Z=new lE({hashFunction:$.evm.binaryTreeAccessWitness.hashFunction})}let{tx:J,block:q}=Q;await $._emit("beforeTx",J);let G=J.getSenderAddress();if($.DEBUG)BQ(`New tx run hash=${Q.tx.isSigned()?X9(Q.tx.hash()):"unsigned"} sender=${G}`);if($.common.isActivatedEIP(2929)){let E=$.evm.precompiles;for(let[v]of E.entries())$.evm.journal.addAlwaysWarmAddress(v);if($.evm.journal.addAlwaysWarmAddress(G.toString()),J.to!==void 0)$.evm.journal.addAlwaysWarmAddress(z6(J.to.bytes));if($.common.isActivatedEIP(3651)){let v=q?.header.coinbase.bytes??s9.coinbase.bytes;$.evm.journal.addAlwaysWarmAddress(z6(v))}}let z=J.getIntrinsicGas(),M=N8;if($.common.isActivatedEIP(7623)){let E=0;for(let v=0;v<J.data.length;v++)E+=J.data[v]===0?1:4;M=J.common.param("txGas")+J.common.param("totalCostFloorPerToken")*BigInt(E)}let j=J.gasLimit,P=Kl(z,M);if(j<P){let E=U9(`tx gas limit ${Number(j)} is lower than the minimum gas limit of ${Number(P)}`,$,q,J);throw q$(E)}if(j-=z,$.DEBUG)u_(`Subtracting base fee (${z}) from gasLimit (-> ${j})`);if($.common.isActivatedEIP(1559)){let E="maxFeePerGas"in J?J.maxFeePerGas:J.gasPrice,v=q?.header.baseFeePerGas??s9.baseFeePerGas;if(E<v){let p=U9(`Transaction's ${"maxFeePerGas"in J?"maxFeePerGas":"gasPrice"} (${E}) is less than the block's baseFeePerGas (${v})`,$,q,J);throw q$(p)}}if(a9)console.timeEnd(uX0),console.time(yX0);let D=await X.getAccount(G);if(D===void 0)D=new e5;let{nonce:A,balance:I}=D;if($.DEBUG)BQ(`Sender's pre-tx balance is ${I}`);if($.common.isActivatedEIP(3607)&&!Q9(D.codeHash,vz))switch($.common.isActivatedEIP(7702)){case!0:{let v=await X.getCode(G);if(Q9(v.slice(0,3),d_))break}default:{let v=U9("invalid sender address, address is not EOA (EIP-3607)",$,q,J);throw q$(v)}}let H=q?.header.baseFeePerGas??s9.baseFeePerGas,C=J.getUpfrontCost(H);if(I<C)if(Q.skipBalance===!0&&D.balance<C){if(J.supports(hQ.EIP1559FeeMarket)===!1)D.balance=C,await $.evm.journal.putAccount(G,D)}else{let E=U9(`sender doesn't have enough funds to send tx. The upfront cost is: ${C} and the sender's account (${G}) only has: ${I}`,$,q,J);throw q$(E)}let B=J.value,S=N8,_=N8;if(J.supports(hQ.EIP1559FeeMarket))B+=J.gasLimit*J.maxFeePerGas;if(rO(J)){if(!$.common.isActivatedEIP(4844)){let E=U9("blob transactions are only valid with EIP4844 active",$,q,J);throw q$(E)}if(_=$.common.param("blobGasPerBlob")*BigInt(J.numBlobs()),B+=_*J.maxFeePerBlobGas,S=Q.block?.header.getBlobGasPrice()??s9.getBlobGasPrice(),J.maxFeePerBlobGas<S){let E=U9(`Transaction's maxFeePerBlobGas ${J.maxFeePerBlobGas}) is less than block blobGasPrice (${S}).`,$,q,J);throw q$(E)}}if(D.balance<B)if(Q.skipBalance===!0&&D.balance<B)D.balance=B,await $.evm.journal.putAccount(G,D);else{let E=U9(`sender doesn't have enough funds to send tx. The max cost is: ${B} and the sender's account (${G}) only has: ${I}`,$,q,J);throw q$(E)}if(Q.skipNonce!==!0){if(A!==J.nonce){let E=U9(`the tx doesn't have the correct nonce. account has nonce of: ${A} tx has nonce of: ${J.nonce}`,$,q,J);throw q$(E)}}let k,f;if(J.supports(hQ.EIP1559FeeMarket)){let E=q?.header.baseFeePerGas??s9.baseFeePerGas;f=J.getEffectivePriorityFee(E),k=f+E}else if(k=J.gasPrice,$.common.isActivatedEIP(1559)){let E=q?.header.baseFeePerGas??s9.baseFeePerGas;f=J.gasPrice-E}let g;if(rO(J))g=J.blobVersionedHashes;let b=J.gasLimit*k,m=_*S;if(D.balance-=b,D.balance-=m,Q.skipBalance===!0&&D.balance<N8)D.balance=N8;await $.evm.journal.putAccount(G,D);let l=N8;if(J.supports(hQ.EIP7702EOACode)){let E=J.authorizationList;for(let v=0;v<E.length;v++){let p=E[v],i=p[0],s=ZX(i);if(s!==N8&&s!==$.common.chainId())continue;let X0=p[1],n=p[2];if(ZX(n)>=Ul)continue;let r=p[5];if(ZX(r)>tT)continue;if(ZX(p[3])>U6)continue;let e;try{e=_l(p)}catch{continue}let Q0=await $.stateManager.getAccount(e),t=Q0!==void 0,a=Q0??new e5;if($.evm.journal.addAlwaysWarmAddress(e.toString()),a.isContract()){let $0=await $.stateManager.getCode(e);if(!Q9($0.slice(0,3),d_))continue}if(G.toString()===e.toString()){if(a.nonce+U6!==ZX(n))continue}else if(a.nonce!==ZX(n))continue;if(t){let $0=J.common.param("perEmptyAccountCost")-J.common.param("perAuthBaseGas");l+=$0}if(a.nonce++,await $.evm.journal.putAccount(e,a),Q9(X0,new Uint8Array(20)))await $.stateManager.putCode(e,new Uint8Array);else{let $0=TJ(d_,X0);await $.stateManager.putCode(e,$0)}}}if($.DEBUG)BQ(`Update fromAccount (caller) balance (-> ${D.balance}))`);let h;if(a9)console.timeEnd(yX0),h=performance.now();let{value:c,data:T,to:K}=J;if($.DEBUG)BQ(`Running tx=${J.isSigned()?X9(J.hash()):"unsigned"} with caller=${G} gasLimit=${j} to=${K?.toString()??"none"} value=${c} data=${SH(T)}`);let U=await $.evm.runCall({block:q,gasPrice:k,caller:G,gasLimit:j,to:K,value:c,data:T,blobVersionedHashes:g,accessWitness:Z});if($.common.isActivatedEIP(6800))Y?.merge(Z);else if($.common.isActivatedEIP(7864))Y?.merge(Z);if(a9)console.log(`${R20}: ${performance.now()-h}ms`),console.log("[ For execution details see table output ]"),console.time(bX0);if($.DEBUG)BQ(`Update fromAccount (caller) nonce (-> ${D.nonce})`);if($.DEBUG){let{executionGasUsed:E,exceptionError:v,returnValue:p}=U.execResult;BQ("-".repeat(100)),BQ(`Received tx execResult: [ executionGasUsed=${E} exceptionError=${v!==void 0?`'${v.error}'`:"none"} returnValue=${SH(p)} gasRefund=${U.gasRefund??0} ]`)}if(U.bloom=L20(U.execResult.logs,$.common),$.DEBUG)BQ(`Generated tx bloom with logs=${U.execResult.logs?.length}`);if(U.totalGasSpent=U.execResult.executionGasUsed+z,$.DEBUG)u_(`tx add baseFee ${z} to totalGasSpent (-> ${U.totalGasSpent})`);if(rO(J))U.blobGasUsed=_;l+=U.execResult.gasRefund??N8,U.gasRefund=l;let W=$.common.param("maxRefundQuotient");if(l!==N8){let E=U.totalGasSpent/W;if(l=l<E?l:E,U.totalGasSpent-=l,$.DEBUG)BQ(`Subtract tx gasRefund (${l}) from totalGasSpent (-> ${U.totalGasSpent})`)}else if($.DEBUG)BQ("No tx gasRefund");if($.common.isActivatedEIP(7623)){if(U.totalGasSpent<M){if($.DEBUG)u_(`tx floorCost ${M} is higher than to total execution gas spent (-> ${U.totalGasSpent}), setting floor as gas paid`);U.gasRefund=N8,U.totalGasSpent=M}}if(U.amountSpent=U.totalGasSpent*k,D=await X.getAccount(G),D===void 0)D=new e5;let V=U.totalGasSpent*k,N=b-V;if(D.balance+=N,await $.evm.journal.putAccount(G,D),$.DEBUG)BQ(`Refunded txCostDiff (${N}) to fromAccount (caller) balance (-> ${D.balance})`);let L;if($.common.consensusType()===AO.ProofOfAuthority)L=NB(q?.header??s9);else L=q?.header.coinbase??s9.coinbase;let F=await X.getAccount(L),R=F!==void 0;if(F===void 0){if($.common.isActivatedEIP(6800)){if($.evm.verkleAccessWitness===void 0)throw Error("verkleAccessWitness required if verkle (EIP-6800) is activated")}F=new e5,$.evm.systemVerkleAccessWitness?.writeAccountHeader(L)}if(U.minerValue=$.common.isActivatedEIP(1559)?U.totalGasSpent*f:U.amountSpent,F.balance+=U.minerValue,$.common.isActivatedEIP(6800)&&U.minerValue!==N8){if($.evm.verkleAccessWitness===void 0)throw Error("verkleAccessWitness required if verkle (EIP-6800) is activated");if(R)$.evm.verkleAccessWitness.writeAccountBasicData(L),$.evm.verkleAccessWitness.readAccountCodeHash(L);else $.evm.verkleAccessWitness.writeAccountHeader(L)}if(await $.evm.journal.putAccount(L,F),$.DEBUG)BQ(`tx update miner account (${L}) balance (-> ${F.balance})`);if(a9)console.timeEnd(bX0),console.time(hX0);if(U.execResult.selfdestruct!==void 0)for(let E of U.execResult.selfdestruct){let v=new j7(f8(E));if($.common.isActivatedEIP(6780)){if(!U.execResult.createdAddresses.has(v.toString()))continue}if(await $.evm.journal.deleteAccount(v),$.DEBUG)BQ(`tx selfdestruct on address=${v}`)}if(a9)console.timeEnd(hX0),console.time(mX0);if(Q.reportAccessList===!0&&$.common.isActivatedEIP(2930)){let E=[];for(let[v,p]of $.evm.journal.accessList){let i={address:`0x${v}`,storageKeys:[]};for(let s of p)i.storageKeys.push(`0x${s}`);E.push(i)}U.accessList=E}if(a9)console.timeEnd(mX0),console.time(cX0);if(Q.reportPreimages===!0&&$.evm.journal.preimages!==void 0)U.preimages=$.evm.journal.preimages;if(await $.evm.journal.cleanup(),X.originalStorageCache.clear(),a9)console.timeEnd(cX0),console.time(pX0);let w=(Q.blockGasUsed??q?.header.gasUsed??s9.gasUsed)+U.totalGasSpent;if(U.receipt=await w20($,J,U,w,_,S),a9)console.timeEnd(pX0);let x={transaction:J,...U};if(await $._emit("afterTx",x),$.DEBUG)BQ(`tx run finished hash=${Q.tx.isSigned()?X9(Q.tx.hash()):"unsigned"} sender=${G}`);if($.common.isActivatedEIP(6800))$.evm.verkleAccessWitness?.commit();return U}function L20($,Q){let X=new JI(void 0,Q);if($)for(let Y=0;Y<$.length;Y++){let Z=$[Y];X.add(Z[0]);let J=Z[1];for(let q=0;q<J.length;q++)X.add(J[q])}return X}async function w20($,Q,X,Y,Z,J){let q={cumulativeBlockGasUsed:Y,bitvector:X.bloom.bitvector,logs:X.execResult.logs??[]},G;if($.DEBUG)BQ(`Generate tx receipt transactionType=${Q.type} cumulativeBlockGasUsed=${Y} bitvector=${SH(q.bitvector)} (${q.bitvector.length} bytes) logs=${q.logs.length}`);if(!Q.supports(hQ.EIP2718TypedTransaction))if($.common.gteHardfork(j0.Byzantium))G={status:X.execResult.exceptionError!==void 0?0:1,...q};else G={stateRoot:await $.stateManager.getStateRoot(),...q};else if(rO(Q))G={blobGasUsed:Z,blobGasPrice:J,status:X.execResult.exceptionError?0:1,...q};else G={status:X.execResult.exceptionError?0:1,...q};return G}function U9($,Q,X,Y){let Z=X??s9,J="errorStr"in Z?Z.errorStr():"block",q="errorStr"in Y?Y.errorStr():"tx";return`${$} (${Q.errorStr()} -> ${J} -> ${q})`}var i_,BQ,u_,s9,a9=!1,uX0="EVM journal init, address/slot warming, fee validation",yX0="Balance/Nonce checks and update",R20="Execution",bX0="Logs, gas usage, account/miner balances",hX0="Accounts clean up",mX0="Access list label",cX0="Journal/cache cleanup",pX0="Receipts",lX0="Entire tx",d_;var dX0=y(()=>{LB();qX();zD();FN();kH();i_=RX(QX(),1);ll();BQ=i_.default("vm:tx"),u_=i_.default("vm:tx:gas"),s9=ia(),d_=new Uint8Array([239,1,0])});var iX0=()=>{};var nX0=y(()=>{l_();c_();dX0();iX0()});var DK;var oX0=y(()=>{DK=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function T20($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function XG($){if(!Number.isSafeInteger($)||$<0)throw new Error("positive integer expected, got "+$)}function LZ($,...Q){if(!T20($))throw new Error("Uint8Array expected");if(Q.length>0&&!Q.includes($.length))throw new Error("Uint8Array expected of length "+Q+", got length="+$.length)}function sX0($){if(typeof $!=="function"||typeof $.create!=="function")throw new Error("Hash should be wrapped by utils.createHasher");XG($.outputLen),XG($.blockLen)}function $5($,Q=!0){if($.destroyed)throw new Error("Hash instance has been destroyed");if(Q&&$.finished)throw new Error("Hash#digest() has already been called")}function UD($,Q){LZ($);let X=Q.outputLen;if($.length<X)throw new Error("digestInto() expects output buffer of length at least "+X)}function aX0($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function Q5(...$){for(let Q=0;Q<$.length;Q++)$[Q].fill(0)}function WD($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function t9($,Q){return $<<32-Q|$>>>Q}function F20($){return $<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255}function B20($){for(let Q=0;Q<$.length;Q++)$[Q]=F20($[Q]);return $}function LA($){if(LZ($),tX0)return $.toHex();let Q="";for(let X=0;X<$.length;X++)Q+=S20[$[X]];return Q}function rX0($){if($>=M1._0&&$<=M1._9)return $-M1._0;if($>=M1.A&&$<=M1.F)return $-(M1.A-10);if($>=M1.a&&$<=M1.f)return $-(M1.a-10);return}function eX0($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(tX0)return Uint8Array.fromHex($);let Q=$.length,X=Q/2;if(Q%2)throw new Error("hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=rX0($.charCodeAt(J)),G=rX0($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw new Error('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function wA($){if(typeof $!=="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function jK($){if(typeof $==="string")$=wA($);return LZ($),$}function o_(...$){let Q=0;for(let Y=0;Y<$.length;Y++){let Z=$[Y];LZ(Z),Q+=Z.length}let X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}class PK{}function TA($){let Q=(Y)=>$().update(jK(Y)).digest(),X=$();return Q.outputLen=X.outputLen,Q.blockLen=X.blockLen,Q.create=()=>$(),Q}function $Y0($=32){if(DK&&typeof DK.getRandomValues==="function")return DK.getRandomValues(new Uint8Array($));if(DK&&typeof DK.randomBytes==="function")return Uint8Array.from(DK.randomBytes($));throw new Error("crypto.getRandomValues must be defined")}var I20,n_,tX0,S20,M1;var X5=y(()=>{oX0();/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */I20=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();n_=I20?($)=>$:B20,tX0=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")(),S20=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));M1={_0:48,_9:57,A:65,F:70,a:97,f:102}});function E20($,Q,X,Y){if(typeof $.setBigUint64==="function")return $.setBigUint64(Q,X,Y);let Z=BigInt(32),J=BigInt(4294967295),q=Number(X>>Z&J),G=Number(X&J),z=Y?4:0,M=Y?0:4;$.setUint32(Q+z,q,Y),$.setUint32(Q+M,G,Y)}function QY0($,Q,X){return $&Q^~$&X}function XY0($,Q,X){return $&Q^$&X^Q&X}var r_,D1;var YY0=y(()=>{X5();r_=class r_ extends PK{constructor($,Q,X,Y){super();this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=$,this.outputLen=Q,this.padOffset=X,this.isLE=Y,this.buffer=new Uint8Array($),this.view=WD(this.buffer)}update($){$5(this),$=jK($),LZ($);let{view:Q,buffer:X,blockLen:Y}=this,Z=$.length;for(let J=0;J<Z;){let q=Math.min(Y-this.pos,Z-J);if(q===Y){let G=WD($);for(;Y<=Z-J;J+=Y)this.process(G,J);continue}if(X.set($.subarray(J,J+q),this.pos),this.pos+=q,J+=q,this.pos===Y)this.process(Q,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){$5(this),UD($,this),this.finished=!0;let{buffer:Q,view:X,blockLen:Y,isLE:Z}=this,{pos:J}=this;if(Q[J++]=128,Q5(this.buffer.subarray(J)),this.padOffset>Y-J)this.process(X,0),J=0;for(let j=J;j<Y;j++)Q[j]=0;E20(X,Y-8,BigInt(this.length*8),Z),this.process(X,0);let q=WD($),G=this.outputLen;if(G%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let z=G/4,M=this.get();if(z>M.length)throw new Error("_sha2: outputLen bigger than state");for(let j=0;j<z;j++)q.setUint32(4*j,M[j],Z)}digest(){let{buffer:$,outputLen:Q}=this;this.digestInto($);let X=$.slice(0,Q);return this.destroy(),X}_cloneInto($){$||($=new this.constructor),$.set(...this.get());let{blockLen:Q,buffer:X,length:Y,finished:Z,destroyed:J,pos:q}=this;if($.destroyed=J,$.finished=Z,$.length=Y,$.pos=q,Y%Q)$.buffer.set(X);return $}clone(){return this._cloneInto()}};D1=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225])});function _20($,Q=!1){if(Q)return{h:Number($&IA),l:Number($>>ZY0&IA)};return{h:Number($>>ZY0&IA)|0,l:Number($&IA)|0}}function JY0($,Q=!1){let X=$.length,Y=new Uint32Array(X),Z=new Uint32Array(X);for(let J=0;J<X;J++){let{h:q,l:G}=_20($[J],Q);[Y[J],Z[J]]=[q,G]}return[Y,Z]}var IA,ZY0,qY0=($,Q,X)=>$<<X|Q>>>32-X,GY0=($,Q,X)=>Q<<X|$>>>32-X,zY0=($,Q,X)=>Q<<X-32|$>>>64-X,KY0=($,Q,X)=>$<<X-32|Q>>>64-X;var UY0=y(()=>{IA=BigInt(4294967295),ZY0=BigInt(32)});var k20,YG,WY0,FA;var s_=y(()=>{YY0();X5();k20=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),YG=new Uint32Array(64);WY0=class WY0 extends r_{constructor($=32){super(64,$,8,!1);this.A=D1[0]|0,this.B=D1[1]|0,this.C=D1[2]|0,this.D=D1[3]|0,this.E=D1[4]|0,this.F=D1[5]|0,this.G=D1[6]|0,this.H=D1[7]|0}get(){let{A:$,B:Q,C:X,D:Y,E:Z,F:J,G:q,H:G}=this;return[$,Q,X,Y,Z,J,q,G]}set($,Q,X,Y,Z,J,q,G){this.A=$|0,this.B=Q|0,this.C=X|0,this.D=Y|0,this.E=Z|0,this.F=J|0,this.G=q|0,this.H=G|0}process($,Q){for(let j=0;j<16;j++,Q+=4)YG[j]=$.getUint32(Q,!1);for(let j=16;j<64;j++){let P=YG[j-15],D=YG[j-2],A=t9(P,7)^t9(P,18)^P>>>3,I=t9(D,17)^t9(D,19)^D>>>10;YG[j]=I+YG[j-7]+A+YG[j-16]|0}let{A:X,B:Y,C:Z,D:J,E:q,F:G,G:z,H:M}=this;for(let j=0;j<64;j++){let P=t9(q,6)^t9(q,11)^t9(q,25),D=M+P+QY0(q,G,z)+k20[j]+YG[j]|0,I=(t9(X,2)^t9(X,13)^t9(X,22))+XY0(X,Y,Z)|0;M=z,z=G,G=q,q=J+D|0,J=Z,Z=Y,Y=X,X=D+I|0}X=X+this.A|0,Y=Y+this.B|0,Z=Z+this.C|0,J=J+this.D|0,q=q+this.E|0,G=G+this.F|0,z=z+this.G|0,M=M+this.H|0,this.set(X,Y,Z,J,q,G,z,M)}roundClean(){Q5(YG)}destroy(){this.set(0,0,0,0,0,0,0,0),Q5(this.buffer)}};FA=TA(()=>new WY0)});var a_,t_=($,Q,X)=>new a_($,Q).update(X).digest();var VY0=y(()=>{X5();a_=class a_ extends PK{constructor($,Q){super();this.finished=!1,this.destroyed=!1,sX0($);let X=jK(Q);if(this.iHash=$.create(),typeof this.iHash.update!=="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let Y=this.blockLen,Z=new Uint8Array(Y);Z.set(X.length>Y?$.create().update(X).digest():X);for(let J=0;J<Z.length;J++)Z[J]^=54;this.iHash.update(Z),this.oHash=$.create();for(let J=0;J<Z.length;J++)Z[J]^=106;this.oHash.update(Z),Q5(Z)}update($){return $5(this),this.iHash.update($),this}digestInto($){$5(this),LZ($,this.outputLen),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||($=Object.create(Object.getPrototypeOf(this),{}));let{oHash:Q,iHash:X,finished:Y,destroyed:Z,blockLen:J,outputLen:q}=this;return $=$,$.finished=Y,$.destroyed=Z,$.blockLen=J,$.outputLen=q,$.oHash=Q._cloneInto($.oHash),$.iHash=X._cloneInto($.iHash),$}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};t_.create=($,Q)=>new a_($,Q)});function HK($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function Yk($){if(!HK($))throw new Error("Uint8Array expected")}function TW($,Q){if(typeof Q!=="boolean")throw new Error($+" boolean expected, got "+Q)}function VD($){let Q=$.toString(16);return Q.length&1?"0"+Q:Q}function DY0($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);return $===""?Xk:BigInt("0x"+$)}function IW($){if(Yk($),jY0)return $.toHex();let Q="";for(let X=0;X<$.length;X++)Q+=x20[$[X]];return Q}function OY0($){if($>=j1._0&&$<=j1._9)return $-j1._0;if($>=j1.A&&$<=j1.F)return $-(j1.A-10);if($>=j1.a&&$<=j1.f)return $-(j1.a-10);return}function OD($){if(typeof $!=="string")throw new Error("hex string expected, got "+typeof $);if(jY0)return Uint8Array.fromHex($);let Q=$.length,X=Q/2;if(Q%2)throw new Error("hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=OY0($.charCodeAt(J)),G=OY0($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw new Error('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function P1($){return DY0(IW($))}function Zk($){return Yk($),DY0(IW(Uint8Array.from($).reverse()))}function NK($,Q){return OD($.toString(16).padStart(Q*2,"0"))}function Jk($,Q){return NK($,Q).reverse()}function wZ($,Q,X){let Y;if(typeof Q==="string")try{Y=OD(Q)}catch(J){throw new Error($+" must be hex string or Uint8Array, cause: "+J)}else if(HK(Q))Y=Uint8Array.from(Q);else throw new Error($+" must be hex string or Uint8Array");let Z=Y.length;if(typeof X==="number"&&Z!==X)throw new Error($+" of length "+X+" expected, got "+Z);return Y}function MD(...$){let Q=0;for(let Y=0;Y<$.length;Y++){let Z=$[Y];Yk(Z),Q+=Z.length}let X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}function BA($,Q,X){return e_($)&&e_(Q)&&e_(X)&&Q<=$&&$<X}function AK($,Q,X,Y){if(!BA(Q,X,Y))throw new Error("expected valid "+$+": "+X+" <= n < "+Y+", got "+Q)}function PY0($){let Q;for(Q=0;$>Xk;$>>=Qk,Q+=1);return Q}function HY0($,Q,X){if(typeof $!=="number"||$<2)throw new Error("hashLen must be a number");if(typeof Q!=="number"||Q<2)throw new Error("qByteLen must be a number");if(typeof X!=="function")throw new Error("hmacFn must be a function");let Y=$k($),Z=$k($),J=0,q=()=>{Y.fill(1),Z.fill(0),J=0},G=(...P)=>X(Z,Y,...P),z=(P=$k(0))=>{if(Z=G(MY0([0]),P),Y=G(),P.length===0)return;Z=G(MY0([1]),P),Y=G()},M=()=>{if(J++>=1000)throw new Error("drbg: tried 1000 values");let P=0,D=[];while(P<Q){Y=G();let A=Y.slice();D.push(A),P+=Y.length}return MD(...D)};return(P,D)=>{q(),z(P);let A=void 0;while(!(A=D(M())))z();return q(),A}}function CK($,Q,X={}){let Y=(Z,J,q)=>{let G=f20[J];if(typeof G!=="function")throw new Error("invalid validator function");let z=$[Z];if(q&&z===void 0)return;if(!G(z,$))throw new Error("param "+String(Z)+" is invalid. Expected "+J+", got "+z)};for(let[Z,J]of Object.entries(Q))Y(Z,J,!1);for(let[Z,J]of Object.entries(X))Y(Z,J,!0);return $}function qk($){let Q=new WeakMap;return(X,...Y)=>{let Z=Q.get(X);if(Z!==void 0)return Z;let J=$(X,...Y);return Q.set(X,J),J}}var Xk,Qk,jY0,x20,j1,e_=($)=>typeof $==="bigint"&&Xk<=$,RK=($)=>(Qk<<BigInt($))-Qk,$k=($)=>new Uint8Array($),MY0=($)=>Uint8Array.from($),f20;var SA=y(()=>{/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Xk=BigInt(0),Qk=BigInt(1);jY0=typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function",x20=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));j1={_0:48,_9:57,A:65,F:70,a:97,f:102};f20={bigint:($)=>typeof $==="bigint",function:($)=>typeof $==="function",boolean:($)=>typeof $==="boolean",string:($)=>typeof $==="string",stringOrUint8Array:($)=>typeof $==="string"||HK($),isSafeInteger:($)=>Number.isSafeInteger($),array:($)=>Array.isArray($),field:($,Q)=>Q.Fp.isValid($),hash:($)=>typeof $==="function"&&Number.isSafeInteger($.outputLen)}});function lX($,Q){let X=$%Q;return X>=HY?X:Q+X}function TZ($,Q,X){let Y=$;while(Q-- >HY)Y*=Y,Y%=X;return Y}function EA($,Q){if($===HY)throw new Error("invert: expected non-zero number");if(Q<=HY)throw new Error("invert: expected positive modulus, got "+Q);let X=lX($,Q),Y=Q,Z=HY,J=jX,q=jX,G=HY;while(X!==HY){let M=Y/X,j=Y%X,P=Z-q*M,D=J-G*M;Y=X,X=j,Z=q,J=G,q=P,G=D}if(Y!==jX)throw new Error("invert: does not exist");return lX(Z,Q)}function b20($){let Q=$-jX,X=0;while(Q%LK===HY)Q/=LK,X++;let Y=LK,Z=DD($);while(Y<$&&RY0(Z,Y))if(Y++>1000)throw new Error("Cannot find square root: probably non-prime P");if(X===1){let q=($+jX)/Gk;return function G(z,M){let j=z.pow(M,q);if(!z.eql(z.sqr(j),M))throw new Error("Cannot find square root");return j}}let J=(Q+jX)/LK;return function q(G,z){if(!RY0(G,z))throw new Error("Cannot find square root");let M=X,j=G.pow(G.mul(G.ONE,Y),Q),P=G.pow(z,J),D=G.pow(z,Q);while(!G.eql(D,G.ONE)){if(G.eql(D,G.ZERO))return G.ZERO;let A=1;for(let H=G.sqr(D);A<M;A++){if(G.eql(H,G.ONE))break;H=G.sqr(H)}let I=G.pow(j,jX<<BigInt(M-A-1));j=G.sqr(I),P=G.mul(P,I),D=G.mul(D,j),M=A}return P}}function h20($){if($%Gk===v20)return function Q(X,Y){let Z=($+jX)/Gk,J=X.pow(Y,Z);if(!X.eql(X.sqr(J),Y))throw new Error("Cannot find square root");return J};if($%AY0===NY0)return function Q(X,Y){let Z=X.mul(Y,LK),J=($-NY0)/AY0,q=X.pow(Z,J),G=X.mul(Y,q),z=X.mul(X.mul(G,LK),q),M=X.mul(G,X.sub(z,X.ONE));if(!X.eql(X.sqr(M),Y))throw new Error("Cannot find square root");return M};if($%y20===g20);return b20($)}function zk($){let Q={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},X=m20.reduce((Y,Z)=>{return Y[Z]="function",Y},Q);return CK($,X)}function c20($,Q,X){if(X<HY)throw new Error("invalid exponent, negatives unsupported");if(X===HY)return $.ONE;if(X===jX)return Q;let Y=$.ONE,Z=Q;while(X>HY){if(X&jX)Y=$.mul(Y,Z);Z=$.sqr(Z),X>>=jX}return Y}function Kk($,Q,X=!1){let Y=new Array(Q.length).fill(X?$.ZERO:void 0),Z=Q.reduce((q,G,z)=>{if($.is0(G))return q;return Y[z]=q,$.mul(q,G)},$.ONE),J=$.inv(Z);return Q.reduceRight((q,G,z)=>{if($.is0(G))return q;return Y[z]=$.mul(q,Y[z]),$.mul(q,G)},J),Y}function p20($,Q){let X=($.ORDER-jX)/LK,Y=$.pow(Q,X),Z=$.eql(Y,$.ONE),J=$.eql(Y,$.ZERO),q=$.eql(Y,$.neg($.ONE));if(!Z&&!J&&!q)throw new Error("Cannot find square root: probably non-prime P");return Z?1:J?0:-1}function RY0($,Q){let X=p20($,Q);return X===0||X===1}function Uk($,Q){if(Q!==void 0)XG(Q);let X=Q!==void 0?Q:$.toString(2).length,Y=Math.ceil(X/8);return{nBitLength:X,nByteLength:Y}}function DD($,Q,X=!1,Y={}){if($<=HY)throw new Error("invalid field: expected ORDER > 0, got "+$);let{nBitLength:Z,nByteLength:J}=Uk($,Q);if(J>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let q,G=Object.freeze({ORDER:$,isLE:X,BITS:Z,BYTES:J,MASK:RK(Z),ZERO:HY,ONE:jX,create:(z)=>lX(z,$),isValid:(z)=>{if(typeof z!=="bigint")throw new Error("invalid field element: expected bigint, got "+typeof z);return HY<=z&&z<$},is0:(z)=>z===HY,isOdd:(z)=>(z&jX)===jX,neg:(z)=>lX(-z,$),eql:(z,M)=>z===M,sqr:(z)=>lX(z*z,$),add:(z,M)=>lX(z+M,$),sub:(z,M)=>lX(z-M,$),mul:(z,M)=>lX(z*M,$),pow:(z,M)=>c20(G,z,M),div:(z,M)=>lX(z*EA(M,$),$),sqrN:(z)=>z*z,addN:(z,M)=>z+M,subN:(z,M)=>z-M,mulN:(z,M)=>z*M,inv:(z)=>EA(z,$),sqrt:Y.sqrt||((z)=>{if(!q)q=h20($);return q(G,z)}),toBytes:(z)=>X?Jk(z,J):NK(z,J),fromBytes:(z)=>{if(z.length!==J)throw new Error("Field.fromBytes: expected "+J+" bytes, got "+z.length);return X?Zk(z):P1(z)},invertBatch:(z)=>Kk(G,z),cmov:(z,M,j)=>j?M:z});return Object.freeze(G)}function CY0($){if(typeof $!=="bigint")throw new Error("field order must be bigint");let Q=$.toString(2).length;return Math.ceil(Q/8)}function Wk($){let Q=CY0($);return Q+Math.ceil(Q/2)}function LY0($,Q,X=!1){let Y=$.length,Z=CY0(Q),J=Wk(Q);if(Y<16||Y<J||Y>1024)throw new Error("expected "+J+"-1024 bytes of input, got "+Y);let q=X?Zk($):P1($),G=lX(q,Q-jX)+jX;return X?Jk(G,Z):NK(G,Z)}var HY,jX,LK,v20,Gk,NY0,AY0,g20,y20,m20;var _A=y(()=>{X5();SA();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */HY=BigInt(0),jX=BigInt(1),LK=BigInt(2),v20=BigInt(3),Gk=BigInt(4),NY0=BigInt(5),AY0=BigInt(8),g20=BigInt(9),y20=BigInt(16);m20=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function Vk($,Q){let X=Q.negate();return $?X:Q}function IY0($,Q){if(!Number.isSafeInteger($)||$<=0||$>Q)throw new Error("invalid window size, expected [1.."+Q+"], got W="+$)}function Ok($,Q){IY0($,Q);let X=Math.ceil(Q/$)+1,Y=2**($-1),Z=2**$,J=RK($),q=BigInt($);return{windows:X,windowSize:Y,mask:J,maxNumber:Z,shiftBy:q}}function TY0($,Q,X){let{windowSize:Y,mask:Z,maxNumber:J,shiftBy:q}=X,G=Number($&Z),z=$>>q;if(G>Y)G-=J,z+=jk;let M=Q*Y,j=M+Math.abs(G)-1,P=G===0,D=G<0,A=Q%2!==0;return{nextN:z,offset:j,isZero:P,isNeg:D,isNegF:A,offsetF:M}}function l20($,Q){if(!Array.isArray($))throw new Error("array expected");$.forEach((X,Y)=>{if(!(X instanceof Q))throw new Error("invalid point at index "+Y)})}function u20($,Q){if(!Array.isArray($))throw new Error("array of scalars expected");$.forEach((X,Y)=>{if(!Q.isValid(X))throw new Error("invalid scalar at index "+Y)})}function Dk($){return FY0.get($)||1}function BY0($,Q){return{constTimeNegate:Vk,hasPrecomputes(X){return Dk(X)!==1},unsafeLadder(X,Y,Z=$.ZERO){let J=X;while(Y>wY0){if(Y&jk)Z=Z.add(J);J=J.double(),Y>>=jk}return Z},precomputeWindow(X,Y){let{windows:Z,windowSize:J}=Ok(Y,Q),q=[],G=X,z=G;for(let M=0;M<Z;M++){z=G,q.push(z);for(let j=1;j<J;j++)z=z.add(G),q.push(z);G=z.double()}return q},wNAF(X,Y,Z){let{ZERO:J,BASE:q}=$,G=Ok(X,Q);for(let z=0;z<G.windows;z++){let{nextN:M,offset:j,isZero:P,isNeg:D,isNegF:A,offsetF:I}=TY0(Z,z,G);if(Z=M,P)q=q.add(Vk(A,Y[I]));else J=J.add(Vk(D,Y[j]))}return{p:J,f:q}},wNAFUnsafe(X,Y,Z,J=$.ZERO){let q=Ok(X,Q);for(let G=0;G<q.windows;G++){if(Z===wY0)break;let{nextN:z,offset:M,isZero:j,isNeg:P}=TY0(Z,G,q);if(Z=z,j)continue;else{let D=Y[M];J=J.add(P?D.negate():D)}}return J},getPrecomputes(X,Y,Z){let J=Mk.get(Y);if(!J){if(J=this.precomputeWindow(Y,X),X!==1)Mk.set(Y,Z(J))}return J},wNAFCached(X,Y,Z){let J=Dk(X);return this.wNAF(J,this.getPrecomputes(J,X,Z),Y)},wNAFCachedUnsafe(X,Y,Z,J){let q=Dk(X);if(q===1)return this.unsafeLadder(X,Y,J);return this.wNAFUnsafe(q,this.getPrecomputes(q,X,Z),Y,J)},setWindowSize(X,Y){IY0(Y,Q),FY0.set(X,Y),Mk.delete(X)}}}function SY0($,Q,X,Y){if(l20(X,$),u20(Y,Q),X.length!==Y.length)throw new Error("arrays of points and scalars must have equal length");let Z=$.ZERO,J=PY0(BigInt(X.length)),q=J>12?J-3:J>4?J-2:J?2:1,G=RK(q),z=new Array(Number(G)+1).fill(Z),M=Math.floor((Q.BITS-1)/q)*q,j=Z;for(let P=M;P>=0;P-=q){z.fill(Z);for(let A=0;A<Y.length;A++){let I=Y[A],H=Number(I>>BigInt(P)&G);z[H]=z[H].add(X[A])}let D=Z;for(let A=z.length-1,I=Z;A>0;A--)I=I.add(z[A]),D=D.add(I);if(j=j.add(D),P!==0)for(let A=0;A<q;A++)j=j.double()}return j}function Pk($){return zk($.Fp),CK($,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Uk($.n,$.nBitLength),...$,...{p:$.Fp.ORDER}})}var wY0,jk,Mk,FY0;var EY0=y(()=>{_A();SA();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */wY0=BigInt(0),jk=BigInt(1);Mk=new WeakMap,FY0=new WeakMap});function _Y0($){if($.lowS!==void 0)TW("lowS",$.lowS);if($.prehash!==void 0)TW("prehash",$.prehash)}function d20($){let Q=Pk($);CK(Q,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:X,Fp:Y,a:Z}=Q;if(X){if(!Y.eql(Z,Y.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof X!=="object"||typeof X.beta!=="bigint"||typeof X.splitScalar!=="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...Q})}function i20($){let Q=d20($),{Fp:X}=Q,Y=DD(Q.n,Q.nBitLength),Z=Q.toBytes||((H,C,B)=>{let S=C.toAffine();return MD(Uint8Array.from([4]),X.toBytes(S.x),X.toBytes(S.y))}),J=Q.fromBytes||((H)=>{let C=H.subarray(1),B=X.fromBytes(C.subarray(0,X.BYTES)),S=X.fromBytes(C.subarray(X.BYTES,2*X.BYTES));return{x:B,y:S}});function q(H){let{a:C,b:B}=Q,S=X.sqr(H),_=X.mul(S,H);return X.add(X.add(_,X.mul(H,C)),B)}if(!X.eql(X.sqr(Q.Gy),q(Q.Gx)))throw new Error("bad generator point: equation left != right");function G(H){return BA(H,dQ,Q.n)}function z(H){let{allowedPrivateKeyLengths:C,nByteLength:B,wrapPrivateKey:S,n:_}=Q;if(C&&typeof H!=="bigint"){if(HK(H))H=IW(H);if(typeof H!=="string"||!C.includes(H.length))throw new Error("invalid private key");H=H.padStart(B*2,"0")}let k;try{k=typeof H==="bigint"?H:P1(wZ("private key",H,B))}catch(f){throw new Error("invalid private key, expected hex or "+B+" bytes, got "+typeof H)}if(S)k=lX(k,_);return AK("private key",k,dQ,_),k}function M(H){if(!(H instanceof D))throw new Error("ProjectivePoint expected")}let j=qk((H,C)=>{let{px:B,py:S,pz:_}=H;if(X.eql(_,X.ONE))return{x:B,y:S};let k=H.is0();if(C==null)C=k?X.ONE:X.inv(_);let f=X.mul(B,C),g=X.mul(S,C),b=X.mul(_,C);if(k)return{x:X.ZERO,y:X.ZERO};if(!X.eql(b,X.ONE))throw new Error("invZ was invalid");return{x:f,y:g}}),P=qk((H)=>{if(H.is0()){if(Q.allowInfinityPoint&&!X.is0(H.py))return;throw new Error("bad point: ZERO")}let{x:C,y:B}=H.toAffine();if(!X.isValid(C)||!X.isValid(B))throw new Error("bad point: x or y not FE");let S=X.sqr(B),_=q(C);if(!X.eql(S,_))throw new Error("bad point: equation left != right");if(!H.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class D{constructor(H,C,B){if(H==null||!X.isValid(H))throw new Error("x required");if(C==null||!X.isValid(C)||X.is0(C))throw new Error("y required");if(B==null||!X.isValid(B))throw new Error("z required");this.px=H,this.py=C,this.pz=B,Object.freeze(this)}static fromAffine(H){let{x:C,y:B}=H||{};if(!H||!X.isValid(C)||!X.isValid(B))throw new Error("invalid affine point");if(H instanceof D)throw new Error("projective point not allowed");let S=(_)=>X.eql(_,X.ZERO);if(S(C)&&S(B))return D.ZERO;return new D(C,B,X.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(H){let C=Kk(X,H.map((B)=>B.pz));return H.map((B,S)=>B.toAffine(C[S])).map(D.fromAffine)}static fromHex(H){let C=D.fromAffine(J(wZ("pointHex",H)));return C.assertValidity(),C}static fromPrivateKey(H){return D.BASE.multiply(z(H))}static msm(H,C){return SY0(D,Y,H,C)}_setWindowSize(H){I.setWindowSize(this,H)}assertValidity(){P(this)}hasEvenY(){let{y:H}=this.toAffine();if(X.isOdd)return!X.isOdd(H);throw new Error("Field doesn't support isOdd")}equals(H){M(H);let{px:C,py:B,pz:S}=this,{px:_,py:k,pz:f}=H,g=X.eql(X.mul(C,f),X.mul(_,S)),b=X.eql(X.mul(B,f),X.mul(k,S));return g&&b}negate(){return new D(this.px,X.neg(this.py),this.pz)}double(){let{a:H,b:C}=Q,B=X.mul(C,kY0),{px:S,py:_,pz:k}=this,f=X.ZERO,g=X.ZERO,b=X.ZERO,m=X.mul(S,S),l=X.mul(_,_),h=X.mul(k,k),c=X.mul(S,_);return c=X.add(c,c),b=X.mul(S,k),b=X.add(b,b),f=X.mul(H,b),g=X.mul(B,h),g=X.add(f,g),f=X.sub(l,g),g=X.add(l,g),g=X.mul(f,g),f=X.mul(c,f),b=X.mul(B,b),h=X.mul(H,h),c=X.sub(m,h),c=X.mul(H,c),c=X.add(c,b),b=X.add(m,m),m=X.add(b,m),m=X.add(m,h),m=X.mul(m,c),g=X.add(g,m),h=X.mul(_,k),h=X.add(h,h),m=X.mul(h,c),f=X.sub(f,m),b=X.mul(h,l),b=X.add(b,b),b=X.add(b,b),new D(f,g,b)}add(H){M(H);let{px:C,py:B,pz:S}=this,{px:_,py:k,pz:f}=H,g=X.ZERO,b=X.ZERO,m=X.ZERO,l=Q.a,h=X.mul(Q.b,kY0),c=X.mul(C,_),T=X.mul(B,k),K=X.mul(S,f),U=X.add(C,B),W=X.add(_,k);U=X.mul(U,W),W=X.add(c,T),U=X.sub(U,W),W=X.add(C,S);let V=X.add(_,f);return W=X.mul(W,V),V=X.add(c,K),W=X.sub(W,V),V=X.add(B,S),g=X.add(k,f),V=X.mul(V,g),g=X.add(T,K),V=X.sub(V,g),m=X.mul(l,W),g=X.mul(h,K),m=X.add(g,m),g=X.sub(T,m),m=X.add(T,m),b=X.mul(g,m),T=X.add(c,c),T=X.add(T,c),K=X.mul(l,K),W=X.mul(h,W),T=X.add(T,K),K=X.sub(c,K),K=X.mul(l,K),W=X.add(W,K),c=X.mul(T,W),b=X.add(b,c),c=X.mul(V,W),g=X.mul(U,g),g=X.sub(g,c),c=X.mul(U,T),m=X.mul(V,m),m=X.add(m,c),new D(g,b,m)}subtract(H){return this.add(H.negate())}is0(){return this.equals(D.ZERO)}wNAF(H){return I.wNAFCached(this,H,D.normalizeZ)}multiplyUnsafe(H){let{endo:C,n:B}=Q;AK("scalar",H,N1,B);let S=D.ZERO;if(H===N1)return S;if(this.is0()||H===dQ)return this;if(!C||I.hasPrecomputes(this))return I.wNAFCachedUnsafe(this,H,D.normalizeZ);let{k1neg:_,k1:k,k2neg:f,k2:g}=C.splitScalar(H),b=S,m=S,l=this;while(k>N1||g>N1){if(k&dQ)b=b.add(l);if(g&dQ)m=m.add(l);l=l.double(),k>>=dQ,g>>=dQ}if(_)b=b.negate();if(f)m=m.negate();return m=new D(X.mul(m.px,C.beta),m.py,m.pz),b.add(m)}multiply(H){let{endo:C,n:B}=Q;AK("scalar",H,dQ,B);let S,_;if(C){let{k1neg:k,k1:f,k2neg:g,k2:b}=C.splitScalar(H),{p:m,f:l}=this.wNAF(f),{p:h,f:c}=this.wNAF(b);m=I.constTimeNegate(k,m),h=I.constTimeNegate(g,h),h=new D(X.mul(h.px,C.beta),h.py,h.pz),S=m.add(h),_=l.add(c)}else{let{p:k,f}=this.wNAF(H);S=k,_=f}return D.normalizeZ([S,_])[0]}multiplyAndAddUnsafe(H,C,B){let S=D.BASE,_=(f,g)=>g===N1||g===dQ||!f.equals(S)?f.multiplyUnsafe(g):f.multiply(g),k=_(this,C).add(_(H,B));return k.is0()?void 0:k}toAffine(H){return j(this,H)}isTorsionFree(){let{h:H,isTorsionFree:C}=Q;if(H===dQ)return!0;if(C)return C(D,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:H,clearCofactor:C}=Q;if(H===dQ)return this;if(C)return C(D,this);return this.multiplyUnsafe(Q.h)}toRawBytes(H=!0){return TW("isCompressed",H),this.assertValidity(),Z(D,this,H)}toHex(H=!0){return TW("isCompressed",H),IW(this.toRawBytes(H))}}D.BASE=new D(Q.Gx,Q.Gy,X.ONE),D.ZERO=new D(X.ZERO,X.ONE,X.ZERO);let A=Q.nBitLength,I=BY0(D,Q.endo?Math.ceil(A/2):A);return{CURVE:Q,ProjectivePoint:D,normPrivateKeyToScalar:z,weierstrassEquation:q,isWithinCurveOrder:G}}function n20($){let Q=Pk($);return CK(Q,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...Q})}function fY0($){let Q=n20($),{Fp:X,n:Y}=Q,Z=X.BYTES+1,J=2*X.BYTES+1;function q(U){return lX(U,Y)}function G(U){return EA(U,Y)}let{ProjectivePoint:z,normPrivateKeyToScalar:M,weierstrassEquation:j,isWithinCurveOrder:P}=i20({...Q,toBytes(U,W,V){let N=W.toAffine(),L=X.toBytes(N.x),F=MD;if(TW("isCompressed",V),V)return F(Uint8Array.from([W.hasEvenY()?2:3]),L);else return F(Uint8Array.from([4]),L,X.toBytes(N.y))},fromBytes(U){let W=U.length,V=U[0],N=U.subarray(1);if(W===Z&&(V===2||V===3)){let L=P1(N);if(!BA(L,dQ,X.ORDER))throw new Error("Point is not on curve");let F=j(L),R;try{R=X.sqrt(F)}catch(x){let E=x instanceof Error?": "+x.message:"";throw new Error("Point is not on curve"+E)}let O=(R&dQ)===dQ;if((V&1)===1!==O)R=X.neg(R);return{x:L,y:R}}else if(W===J&&V===4){let L=X.fromBytes(N.subarray(0,X.BYTES)),F=X.fromBytes(N.subarray(X.BYTES,2*X.BYTES));return{x:L,y:F}}else{let L=Z,F=J;throw new Error("invalid Point, expected length of "+L+", or uncompressed "+F+", got "+W)}}}),D=(U)=>IW(NK(U,Q.nByteLength));function A(U){let W=Y>>dQ;return U>W}function I(U){return A(U)?q(-U):U}let H=(U,W,V)=>P1(U.slice(W,V));class C{constructor(U,W,V){if(AK("r",U,dQ,Y),AK("s",W,dQ,Y),this.r=U,this.s=W,V!=null)this.recovery=V;Object.freeze(this)}static fromCompact(U){let W=Q.nByteLength;return U=wZ("compactSignature",U,W*2),new C(H(U,0,W),H(U,W,2*W))}static fromDER(U){let{r:W,s:V}=H1.toSig(wZ("DER",U));return new C(W,V)}assertValidity(){}addRecoveryBit(U){return new C(this.r,this.s,U)}recoverPublicKey(U){let{r:W,s:V,recovery:N}=this,L=g(wZ("msgHash",U));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");let F=N===2||N===3?W+Q.n:W;if(F>=X.ORDER)throw new Error("recovery id 2 or 3 invalid");let R=(N&1)===0?"02":"03",O=z.fromHex(R+D(F)),w=G(F),x=q(-L*w),E=q(V*w),v=z.BASE.multiplyAndAddUnsafe(O,x,E);if(!v)throw new Error("point at infinify");return v.assertValidity(),v}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new C(this.r,q(-this.s),this.recovery):this}toDERRawBytes(){return OD(this.toDERHex())}toDERHex(){return H1.hexFromSig(this)}toCompactRawBytes(){return OD(this.toCompactHex())}toCompactHex(){return D(this.r)+D(this.s)}}let B={isValidPrivateKey(U){try{return M(U),!0}catch(W){return!1}},normPrivateKeyToScalar:M,randomPrivateKey:()=>{let U=Wk(Q.n);return LY0(Q.randomBytes(U),Q.n)},precompute(U=8,W=z.BASE){return W._setWindowSize(U),W.multiply(BigInt(3)),W}};function S(U,W=!0){return z.fromPrivateKey(U).toRawBytes(W)}function _(U){let W=HK(U),V=typeof U==="string",N=(W||V)&&U.length;if(W)return N===Z||N===J;if(V)return N===2*Z||N===2*J;if(U instanceof z)return!0;return!1}function k(U,W,V=!0){if(_(U))throw new Error("first arg must be private key");if(!_(W))throw new Error("second arg must be public key");return z.fromHex(W).multiply(M(U)).toRawBytes(V)}let f=Q.bits2int||function(U){if(U.length>8192)throw new Error("input is too large");let W=P1(U),V=U.length*8-Q.nBitLength;return V>0?W>>BigInt(V):W},g=Q.bits2int_modN||function(U){return q(f(U))},b=RK(Q.nBitLength);function m(U){return AK("num < 2^"+Q.nBitLength,U,N1,b),NK(U,Q.nByteLength)}function l(U,W,V=h){if(["recovered","canonical"].some((s)=>(s in V)))throw new Error("sign() legacy options not supported");let{hash:N,randomBytes:L}=Q,{lowS:F,prehash:R,extraEntropy:O}=V;if(F==null)F=!0;if(U=wZ("msgHash",U),_Y0(V),R)U=wZ("prehashed msgHash",N(U));let w=g(U),x=M(W),E=[m(x),m(w)];if(O!=null&&O!==!1){let s=O===!0?L(X.BYTES):O;E.push(wZ("extraEntropy",s))}let v=MD(...E),p=w;function i(s){let X0=f(s);if(!P(X0))return;let n=G(X0),r=z.BASE.multiply(X0).toAffine(),Z0=q(r.x);if(Z0===N1)return;let e=q(n*q(p+Z0*x));if(e===N1)return;let Q0=(r.x===Z0?0:2)|Number(r.y&dQ),t=e;if(F&&A(e))t=I(e),Q0^=1;return new C(Z0,t,Q0)}return{seed:v,k2sig:i}}let h={lowS:Q.lowS,prehash:!1},c={lowS:Q.lowS,prehash:!1};function T(U,W,V=h){let{seed:N,k2sig:L}=l(U,W,V),F=Q;return HY0(F.hash.outputLen,F.nByteLength,F.hmac)(N,L)}z.BASE._setWindowSize(8);function K(U,W,V,N=c){let L=U;W=wZ("msgHash",W),V=wZ("publicKey",V);let{lowS:F,prehash:R,format:O}=N;if(_Y0(N),"strict"in N)throw new Error("options.strict was renamed to lowS");if(O!==void 0&&O!=="compact"&&O!=="der")throw new Error("format must be compact or der");let w=typeof L==="string"||HK(L),x=!w&&!O&&typeof L==="object"&&L!==null&&typeof L.r==="bigint"&&typeof L.s==="bigint";if(!w&&!x)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let E=void 0,v;try{if(x)E=new C(L.r,L.s);if(w){try{if(O!=="compact")E=C.fromDER(L)}catch(Q0){if(!(Q0 instanceof H1.Err))throw Q0}if(!E&&O!=="der")E=C.fromCompact(L)}v=z.fromHex(V)}catch(Q0){return!1}if(!E)return!1;if(F&&E.hasHighS())return!1;if(R)W=Q.hash(W);let{r:p,s:i}=E,s=g(W),X0=G(i),n=q(s*X0),r=q(p*X0),Z0=z.BASE.multiplyAndAddUnsafe(v,n,r)?.toAffine();if(!Z0)return!1;return q(Z0.x)===p}return{CURVE:Q,getPublicKey:S,getSharedSecret:k,sign:T,verify:K,ProjectivePoint:z,Signature:C,utils:B}}var xY0,H1,N1,dQ,oG$,kY0,rG$;var vY0=y(()=>{EY0();_A();SA();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */xY0=class xY0 extends Error{constructor($=""){super($)}};H1={Err:xY0,_tlv:{encode:($,Q)=>{let{Err:X}=H1;if($<0||$>256)throw new X("tlv.encode: wrong tag");if(Q.length&1)throw new X("tlv.encode: unpadded data");let Y=Q.length/2,Z=VD(Y);if(Z.length/2&128)throw new X("tlv.encode: long form length too big");let J=Y>127?VD(Z.length/2|128):"";return VD($)+J+Z+Q},decode($,Q){let{Err:X}=H1,Y=0;if($<0||$>256)throw new X("tlv.encode: wrong tag");if(Q.length<2||Q[Y++]!==$)throw new X("tlv.decode: wrong tlv");let Z=Q[Y++],J=!!(Z&128),q=0;if(!J)q=Z;else{let z=Z&127;if(!z)throw new X("tlv.decode(long): indefinite length not supported");if(z>4)throw new X("tlv.decode(long): byte length is too big");let M=Q.subarray(Y,Y+z);if(M.length!==z)throw new X("tlv.decode: length bytes not complete");if(M[0]===0)throw new X("tlv.decode(long): zero leftmost byte");for(let j of M)q=q<<8|j;if(Y+=z,q<128)throw new X("tlv.decode(long): not minimal encoding")}let G=Q.subarray(Y,Y+q);if(G.length!==q)throw new X("tlv.decode: wrong value length");return{v:G,l:Q.subarray(Y+q)}}},_int:{encode($){let{Err:Q}=H1;if($<N1)throw new Q("integer: negative integers are not allowed");let X=VD($);if(Number.parseInt(X[0],16)&8)X="00"+X;if(X.length&1)throw new Q("unexpected DER parsing assertion: unpadded hex");return X},decode($){let{Err:Q}=H1;if($[0]&128)throw new Q("invalid signature integer: negative");if($[0]===0&&!($[1]&128))throw new Q("invalid signature integer: unnecessary leading zero");return P1($)}},toSig($){let{Err:Q,_int:X,_tlv:Y}=H1,Z=wZ("signature",$),{v:J,l:q}=Y.decode(48,Z);if(q.length)throw new Q("invalid signature: left bytes after parsing");let{v:G,l:z}=Y.decode(2,J),{v:M,l:j}=Y.decode(2,z);if(j.length)throw new Q("invalid signature: left bytes after parsing");return{r:X.decode(G),s:X.decode(M)}},hexFromSig($){let{_tlv:Q,_int:X}=H1,Y=Q.encode(2,X.encode($.r)),Z=Q.encode(2,X.encode($.s)),J=Y+Z;return Q.encode(48,J)}},N1=BigInt(0),dQ=BigInt(1),oG$=BigInt(2),kY0=BigInt(3),rG$=BigInt(4)});function o20($){return{hash:$,hmac:(Q,...X)=>t_($,Q,o_(...X)),randomBytes:$Y0}}function gY0($,Q){let X=(Y)=>fY0({...$,...o20(Y)});return{...X(Q),create:X}}var yY0=y(()=>{VY0();X5();vY0();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */});function s20($){let Q=mY0,X=BigInt(3),Y=BigInt(6),Z=BigInt(11),J=BigInt(22),q=BigInt(23),G=BigInt(44),z=BigInt(88),M=$*$*$%Q,j=M*M*$%Q,P=TZ(j,X,Q)*j%Q,D=TZ(P,X,Q)*j%Q,A=TZ(D,Hk,Q)*M%Q,I=TZ(A,Z,Q)*A%Q,H=TZ(I,J,Q)*I%Q,C=TZ(H,G,Q)*H%Q,B=TZ(C,z,Q)*C%Q,S=TZ(B,G,Q)*H%Q,_=TZ(S,X,Q)*j%Q,k=TZ(_,q,Q)*I%Q,f=TZ(k,Y,Q)*M%Q,g=TZ(f,Hk,Q);if(!Nk.eql(Nk.sqr(g),$))throw new Error("Cannot find square root");return g}var mY0,bY0,r20,Hk,hY0=($,Q)=>($+Q/Hk)/Q,Nk,ZG,Zz$,Jz$;var cY0=y(()=>{s_();yY0();_A();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */mY0=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),bY0=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),r20=BigInt(1),Hk=BigInt(2);Nk=DD(mY0,void 0,void 0,{sqrt:s20}),ZG=gY0({a:BigInt(0),b:BigInt(7),Fp:Nk,n:bY0,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:($)=>{let Q=bY0,X=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),Y=-r20*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),Z=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),J=X,q=BigInt("0x100000000000000000000000000000000"),G=hY0(J*$,Q),z=hY0(-Y*$,Q),M=lX($-G*X-z*Z,Q),j=lX(-G*Y-z*J,Q),P=M>q,D=j>q;if(P)M=Q-M;if(D)j=Q-j;if(M>q||j>q)throw new Error("splitScalar: Endomorphism failed, k="+$);return{k1neg:P,k1:M,k2neg:D,k2:j}}}},FA),Zz$=BigInt(0),Jz$=ZG.ProjectivePoint});var Ak=y(()=>{cY0()});var pY0;var lY0=y(()=>{X5();pY0=LZ});function Rk($){let Q=$.startsWith("0x")?$.substring(2):$;return eX0(Q)}function wK($,Q){if($.length!==Q.length)return!1;for(let X=0;X<$.length;X++)if($[X]!==Q[X])return!1;return!0}function TK($){return(Q)=>{return pY0(Q),$(Q)}}var jD=y(()=>{lY0();X5();X5()});var uY0;var dY0=y(()=>{s_();jD();uY0=TK(FA)});function x$($,Q){return new Ck({code:"ETHEREUMJS_DEFAULT_ERROR_CODE"},$,Q)}var Ck;var Lk=y(()=>{Ck=class Ck extends Error{constructor($,Q,X){super(Q??$.code);if(this.type=$,X!==void 0)this.stack=X}getMetadata(){return this.type}toObject(){return{type:this.getMetadata(),message:this.message??"",stack:this.stack??"",className:this.constructor.name}}}});function iY0($){if($[0]===0)throw x$("invalid RLP: extra zeros");return e20(t20($))}function nY0($,Q){if($<56)return Uint8Array.from([$+Q]);let X=Ik($),Y=X.length/2,Z=Ik(Q+55+Y);return Uint8Array.from(Tk(Z+X))}function FW($,Q,X){if(X>$.length)throw x$("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return $.slice(Q,X)}function wk($){let Q,X,Y,Z,J,q=[],G=$[0];if(G<=127)return{data:$.slice(0,1),remainder:$.subarray(1)};else if(G<=183){if(Q=G-127,G===128)Y=Uint8Array.from([]);else Y=FW($,1,Q);if(Q===2&&Y[0]<128)throw x$("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:Y,remainder:$.subarray(Q)}}else if(G<=191){if(X=G-182,$.length-1<X)throw x$("invalid RLP: not enough bytes for string length");if(Q=iY0(FW($,1,X)),Q<=55)throw x$("invalid RLP: expected string length to be greater than 55");return Y=FW($,X,Q+X),{data:Y,remainder:$.subarray(Q+X)}}else if(G<=247){Q=G-191,Z=FW($,1,Q);while(Z.length)J=wk(Z),q.push(J.data),Z=J.remainder;return{data:q,remainder:$.subarray(Q)}}else{if(X=G-246,Q=iY0(FW($,1,X)),Q<56)throw x$("invalid RLP: encoded list too short");let z=X+Q;if(z>$.length)throw x$("invalid RLP: total length is larger than the data");Z=FW($,X,z);while(Z.length)J=wk(Z),q.push(J.data),Z=J.remainder;return{data:q,remainder:$.subarray(z)}}}function t20($){let Q="";for(let X=0;X<$.length;X++)Q+=a20[$[X]];return Q}function e20($){let Q=Number.parseInt($,16);if(Number.isNaN(Q))throw x$("Invalid byte sequence");return Q}function oY0($){if($>=A1._0&&$<=A1._9)return $-A1._0;if($>=A1._A&&$<=A1._F)return $-(A1._A-10);if($>=A1._a&&$<=A1._f)return $-(A1._a-10);return}function Tk($){if($.slice(0,2)==="0x")$=$.slice(0,2);if(typeof $!=="string")throw x$("hex string expected, got "+typeof $);let Q=$.length,X=Q/2;if(Q%2)throw x$("padded hex string expected, got unpadded hex of length "+Q);let Y=new Uint8Array(X);for(let Z=0,J=0;Z<X;Z++,J+=2){let q=oY0($.charCodeAt(J)),G=oY0($.charCodeAt(J+1));if(q===void 0||G===void 0){let z=$[J]+$[J+1];throw x$('hex string expected, got non-hex character "'+z+'" at index '+J)}Y[Z]=q*16+G}return Y}function rY0(...$){if($.length===1)return $[0];let Q=$.reduce((Y,Z)=>Y+Z.length,0),X=new Uint8Array(Q);for(let Y=0,Z=0;Y<$.length;Y++){let J=$[Y];X.set(J,Z),Z+=J.length}return X}function $A0($){return new TextEncoder().encode($)}function Ik($){if($<0)throw x$("Invalid integer as argument, must be unsigned!");let Q=$.toString(16);return Q.length%2?`0${Q}`:Q}function QA0($){return $.length%2?`0${$}`:$}function sY0($){return $.length>=2&&$[0]==="0"&&$[1]==="x"}function XA0($){if(typeof $!=="string")return $;return sY0($)?$.slice(2):$}function aY0($){if($ instanceof Uint8Array)return $;if(typeof $==="string"){if(sY0($))return Tk(QA0(XA0($)));return $A0($)}if(typeof $==="number"||typeof $==="bigint"){if(!$)return Uint8Array.from([]);return Tk(Ik($))}if($===null||$===void 0)return Uint8Array.from([]);throw x$("toBytes: received unsupported type "+typeof $)}function tY0($){if(Array.isArray($)){let X=[],Y=0;for(let Z=0;Z<$.length;Z++){let J=tY0($[Z]);X.push(J),Y+=J.length}return rY0(nY0(Y,192),...X)}let Q=aY0($);if(Q.length===1&&Q[0]<128)return Q;return rY0(nY0(Q.length,128),Q)}function YA0($,Q=!1){if(typeof $==="undefined"||$===null||$.length===0)return Uint8Array.from([]);let X=aY0($),Y=wk(X);if(Q)return{data:Y.data,remainder:Y.remainder.slice()};if(Y.remainder.length!==0)throw x$("invalid RLP: remainder must be zero");return Y.data}var a20,A1,Fk;var Bk=y(()=>{Lk();Lk();a20=Array.from({length:256},($,Q)=>Q.toString(16).padStart(2,"0"));A1={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};Fk={encode:tY0,decode:YA0}});var IK=y(()=>{Bk()});function Sk($,Q){if(typeof $!=="string"||!$.match(/^0x[0-9A-Fa-f]*$/))return!1;if(typeof Q!=="undefined"&&Q>0&&$.length!==2+2*Q)return!1;return!0}function kA($){let Q=$;if(typeof Q!=="string")throw x$(`[padToEven] value must be type 'string', received ${typeof Q}`);if(Q.length%2)Q=`0${Q}`;return Q}var eY0=($)=>{if(typeof $!=="string")throw x$(`[stripHexPrefix] input must be type 'string', received ${typeof $}`);return Sk($)?$.slice(2):$};var $Z0=y(()=>{IK()});var PD=function($){if(!($ instanceof Uint8Array)){let Q=`This method only supports Uint8Array but input was: ${$}`;throw x$(Q)}};var Ek=y(()=>{IK()});var QZ0,JA0,PX=($)=>{if(!$.startsWith("0x"))throw x$("input string must be 0x prefixed");return Rk(kA(eY0($)))},qA0=($)=>{if($.startsWith("0x"))throw x$("input string cannot be 0x prefixed");return Rk(kA($))},JG=($)=>{return`0x${JA0($)}`},_k,qG=($,Q=!1)=>{if(Q)$.reverse();let X=JG($);if(X==="0x")return QZ0;if(X.length===4)return _k[$[0]];if(X.length===6)return _k[$[0]*256+$[1]];return BigInt(X)},GA0=($)=>{if(!Number.isSafeInteger($)||$<0)throw x$(`Received an invalid integer type: ${$}`);return`0x${$.toString(16)}`},GG=($)=>{let Q=GA0($);return PX(Q)},xA=($,Q=!1)=>{let X=PX(`0x${kA($.toString(16))}`);return Q?X.reverse():X},zA0=($)=>{let Q=$[0];while($.length>0&&Q.toString()==="0")$=$.slice(1),Q=$[0];return $},kk=($)=>{return PD($),zA0($)},HD=($)=>{if($===null||$===void 0)return new Uint8Array;if(Array.isArray($)||$ instanceof Uint8Array)return Uint8Array.from($);if(typeof $==="string"){if(!Sk($))throw x$(`Cannot convert string to Uint8Array. toBytes only supports 0x-prefixed hex strings and this string was given: ${$}`);return PX($)}if(typeof $==="number")return GG($);if(typeof $==="bigint"){if($<QZ0)throw x$(`Cannot convert negative bigint to Uint8Array. Given: ${$}`);let Q=$.toString(16);if(Q.length%2)Q="0"+Q;return qA0(Q)}if($.toBytes!==void 0)return $.toBytes();throw x$("invalid type")},BW=($)=>{return kk(xA($))},ND=($)=>{return kk(GG($))};var zG=y(()=>{jD();IK();Ek();$Z0();jD();QZ0=BigInt(0),JA0=LA,_k=[];for(let $=0;$<=65535;$++)_k[$]=BigInt($)});var mz$,cz$,pz$,lz$,uz$,dz$,KA0="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",AD,UA0="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",iz$,WA0="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",XZ0,nz$,oz$,rz$,W9,sz$,VA0,az$,tz$,ez$,$4$,Q4$,X4$,Y4$,Z4$,J4$,q4$,OA0,G4$,z4$,K4$,U4$,W4$,V4$,O4$,M4$;var fA=y(()=>{Ak();dY0();zG();mz$=BigInt("0xffffffffffffffff"),cz$=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),pz$=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),lz$=ZG.CURVE.n,uz$=ZG.CURVE.n/BigInt(2),dz$=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),AD=PX(KA0),iz$=PX(UA0),XZ0=PX(WA0),nz$=uY0(new Uint8Array),oz$=Uint8Array.from([128]),rz$=BigInt(-1),W9=BigInt(0),sz$=BigInt(1),VA0=BigInt(2),az$=BigInt(3),tz$=BigInt(7),ez$=BigInt(8),$4$=BigInt(27),Q4$=BigInt(28),X4$=BigInt(31),Y4$=BigInt(32),Z4$=BigInt(64),J4$=BigInt(128),q4$=BigInt(255),OA0=BigInt(256),G4$=BigInt(96),z4$=BigInt(100),K4$=BigInt(160),U4$=BigInt(224),W4$=BigInt(79228162514264340000000000000),V4$=BigInt(1461501637330903000000000000000000000000000000000),O4$=BigInt(26959946667150640000000000000000000000000000000000000000000000000000),M4$=VA0**OA0});var j4$,P4$;var YZ0=y(()=>{j4$=BigInt(1e9),P4$=BigInt(1000000000000000000)});function RA0($,Q=24){let X=new Uint32Array(10);for(let Y=24-Q;Y<24;Y++){for(let q=0;q<10;q++)X[q]=$[q]^$[q+10]^$[q+20]^$[q+30]^$[q+40];for(let q=0;q<10;q+=2){let G=(q+8)%10,z=(q+2)%10,M=X[z],j=X[z+1],P=ZZ0(M,j,1)^X[G],D=JZ0(M,j,1)^X[G+1];for(let A=0;A<50;A+=10)$[q+A]^=P,$[q+A+1]^=D}let Z=$[2],J=$[3];for(let q=0;q<24;q++){let G=GZ0[q],z=ZZ0(Z,J,G),M=JZ0(Z,J,G),j=qZ0[q];Z=$[j],J=$[j+1],$[j]=z,$[j+1]=M}for(let q=0;q<50;q+=10){for(let G=0;G<10;G++)X[G]=$[q+G];for(let G=0;G<10;G++)$[q+G]^=~X[(G+2)%10]&X[(G+4)%10]}$[0]^=NA0[Y],$[1]^=AA0[Y]}Q5(X)}var MA0,RD,DA0,jA0,PA0,HA0,qZ0,GZ0,zZ0,KZ0,NA0,AA0,ZZ0=($,Q,X)=>X>32?zY0($,Q,X):qY0($,Q,X),JZ0=($,Q,X)=>X>32?KY0($,Q,X):GY0($,Q,X),xk,vA=($,Q,X)=>TA(()=>new xk(Q,$,X)),UZ0,fk,WZ0,VZ0;var OZ0=y(()=>{UY0();X5();MA0=BigInt(0),RD=BigInt(1),DA0=BigInt(2),jA0=BigInt(7),PA0=BigInt(256),HA0=BigInt(113),qZ0=[],GZ0=[],zZ0=[];for(let $=0,Q=RD,X=1,Y=0;$<24;$++){[X,Y]=[Y,(2*X+3*Y)%5],qZ0.push(2*(5*Y+X)),GZ0.push(($+1)*($+2)/2%64);let Z=MA0;for(let J=0;J<7;J++)if(Q=(Q<<RD^(Q>>jA0)*HA0)%PA0,Q&DA0)Z^=RD<<(RD<<BigInt(J))-RD;zZ0.push(Z)}KZ0=JY0(zZ0,!0),NA0=KZ0[0],AA0=KZ0[1];xk=class xk extends PK{constructor($,Q,X,Y=!1,Z=24){super();if(this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=$,this.suffix=Q,this.outputLen=X,this.enableXOF=Y,this.rounds=Z,XG(X),!(0<$&&$<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=aX0(this.state)}clone(){return this._cloneInto()}keccak(){n_(this.state32),RA0(this.state32,this.rounds),n_(this.state32),this.posOut=0,this.pos=0}update($){$5(this),$=jK($),LZ($);let{blockLen:Q,state:X}=this,Y=$.length;for(let Z=0;Z<Y;){let J=Math.min(Q-this.pos,Y-Z);for(let q=0;q<J;q++)X[this.pos++]^=$[Z++];if(this.pos===Q)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:$,suffix:Q,pos:X,blockLen:Y}=this;if($[X]^=Q,(Q&128)!==0&&X===Y-1)this.keccak();$[Y-1]^=128,this.keccak()}writeInto($){$5(this,!1),LZ($),this.finish();let Q=this.state,{blockLen:X}=this;for(let Y=0,Z=$.length;Y<Z;){if(this.posOut>=X)this.keccak();let J=Math.min(X-this.posOut,Z-Y);$.set(Q.subarray(this.posOut,this.posOut+J),Y),this.posOut+=J,Y+=J}return $}xofInto($){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto($)}xof($){return XG($),this.xofInto(new Uint8Array($))}digestInto($){if(UD($,this),this.finished)throw new Error("digest() was already called");return this.writeInto($),this.destroy(),$}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Q5(this.state)}_cloneInto($){let{blockLen:Q,suffix:X,outputLen:Y,rounds:Z,enableXOF:J}=this;return $||($=new xk(Q,X,Y,J,Z)),$.state32.set(this.state32),$.pos=this.pos,$.posOut=this.posOut,$.finished=this.finished,$.rounds=Z,$.suffix=X,$.outputLen=Y,$.enableXOF=J,$.destroyed=this.destroyed,$}};UZ0=(()=>vA(1,144,28))(),fk=(()=>vA(1,136,32))(),WZ0=(()=>vA(1,104,48))(),VZ0=(()=>vA(1,72,64))()});var T4$,MZ0,I4$,F4$;var DZ0=y(()=>{OZ0();jD();T4$=TK(UZ0),MZ0=(()=>{let $=TK(fk);return $.create=fk.create,$})(),I4$=TK(WZ0),F4$=TK(VZ0)});class jZ0{get version(){if(this._version!==null)return this._version;else throw Error(`version=${this._version} not loaded`)}set version($){this._version=$}get nonce(){if(this._nonce!==null)return this._nonce;else throw Error(`nonce=${this._nonce} not loaded`)}set nonce($){this._nonce=$}get balance(){if(this._balance!==null)return this._balance;else throw Error(`balance=${this._balance} not loaded`)}set balance($){this._balance=$}get storageRoot(){if(this._storageRoot!==null)return this._storageRoot;else throw Error(`storageRoot=${this._storageRoot} not loaded`)}set storageRoot($){this._storageRoot=$}get codeHash(){if(this._codeHash!==null)return this._codeHash;else throw Error(`codeHash=${this._codeHash} not loaded`)}set codeHash($){this._codeHash=$}get codeSize(){if(this._codeSize!==null)return this._codeSize;else throw Error(`codeSize=${this._codeSize} not loaded`)}set codeSize($){this._codeSize=$}constructor($=W9,Q=W9,X=XZ0,Y=AD,Z=0,J=0){if(this._nonce=null,this._balance=null,this._storageRoot=null,this._codeHash=null,this._codeSize=null,this._version=null,this._nonce=$,this._balance=Q,this._storageRoot=X,this._codeHash=Y,Z===null&&Y!==null&&!this.isContract())Z=0;this._codeSize=Z,this._version=J,this._validate()}_validate(){if(this._nonce!==null&&this._nonce<W9)throw x$("nonce must be greater than zero");if(this._balance!==null&&this._balance<W9)throw x$("balance must be greater than zero");if(this._storageRoot!==null&&this._storageRoot.length!==32)throw x$("storageRoot must have a length of 32");if(this._codeHash!==null&&this._codeHash.length!==32)throw x$("codeHash must have a length of 32");if(this._codeSize!==null&&this._codeSize<W9)throw x$("codeSize must be greater than zero")}raw(){return[BW(this.nonce),BW(this.balance),this.storageRoot,this.codeHash]}serialize(){return Fk.encode(this.raw())}serializeWithPartialInfo(){let $=[],Q=ND(0),X=ND(1);if(this._nonce!==null)$.push([X,BW(this._nonce)]);else $.push([Q]);if(this._balance!==null)$.push([X,BW(this._balance)]);else $.push([Q]);if(this._storageRoot!==null)$.push([X,this._storageRoot]);else $.push([Q]);if(this._codeHash!==null)$.push([X,this._codeHash]);else $.push([Q]);if(this._codeSize!==null)$.push([X,ND(this._codeSize)]);else $.push([Q]);if(this._version!==null)$.push([X,ND(this._version)]);else $.push([Q]);return Fk.encode($)}isContract(){if(this._codeHash===null&&this._codeSize===null)throw Error("Insufficient data as codeHash=null and codeSize=null");return this._codeHash!==null&&!wK(this._codeHash,AD)||this._codeSize!==null&&this._codeSize!==0}isEmpty(){if(this._balance!==null&&this.balance!==W9||this._nonce===null&&this.nonce!==W9||this._codeHash!==null&&!wK(this.codeHash,AD))return!1;return this.balance===W9&&this.nonce===W9&&wK(this.codeHash,AD)}}function PZ0($){let{nonce:Q,balance:X,storageRoot:Y,codeHash:Z}=$;if(Q===null||X===null||Y===null||Z===null)throw Error("Partial fields not supported in fromAccountData");return new jZ0(Q!==void 0?qG(HD(Q)):void 0,X!==void 0?qG(HD(X)):void 0,Y!==void 0?HD(Y):void 0,Z!==void 0?HD(Z):void 0)}var HZ0=function($,Q=!1){if(PD($),Q&&$.length!==64)$=ZG.ProjectivePoint.fromHex($).toRawBytes(!1).slice(1);if($.length!==64)throw x$("Expected pubKey to be of length 64");return MZ0($).subarray(-20)},CA0,LA0=function($){return PD($),ZG.ProjectivePoint.fromPrivateKey($).toRawBytes(!1).slice(1)},NZ0=function($){return CA0(LA0($))},b4$;var gk=y(()=>{Bk();DZ0();Ak();zG();fA();IK();Ek();CA0=HZ0,b4$=new Uint8Array(0)});class bk{constructor($){if($.length!==20)throw x$("Invalid address length");this.bytes=$}equals($){return wK(this.bytes,$.bytes)}isZero(){return this.equals(new bk(new Uint8Array(20)))}isPrecompileOrSystemAddress(){let $=qG(this.bytes),Q=W9,X=BigInt("0xffff");return $>=Q&&$<=X}toString(){return JG(this.bytes)}toBytes(){return new Uint8Array(this.bytes)}}function AZ0($){if(!($ instanceof Uint8Array))throw x$("Private key should be Uint8Array");let Q=NZ0($);return new bk(Q)}var RZ0=y(()=>{gk();zG();fA();IK()});var CZ0=()=>{};var LZ0=()=>{};var wZ0=()=>{};var TZ0=()=>{};var e4$;var IZ0=y(()=>{zG();e4$=PX("0x05")});var FZ0,XK$,YK$,FA0=31,ZK$;var BZ0=y(()=>{zG();FZ0={BasicData:0,CodeHash:1},XK$=GG(FZ0.BasicData),YK$=GG(FZ0.CodeHash),ZK$=BigInt(256)**BigInt(FA0)});var BA0=32,SZ0=4096,SA0,EA0=2,qK$,GK$;var EZ0=y(()=>{SA0=32*SZ0,qK$=SA0*EA0-1,GK$=BA0*SZ0});var _Z0=()=>{};var kZ0=()=>{};var xZ0=()=>{};var fZ0=()=>{};var vZ0,OK$,MK$,_A0=31,DK$;var gZ0=y(()=>{zG();vZ0={BasicData:0,CodeHash:1},OK$=GG(vZ0.BasicData),MK$=GG(vZ0.CodeHash),DK$=BigInt(256)**BigInt(_A0)});var yZ0=y(()=>{fA();IK();YZ0();gk();RZ0();CZ0();wZ0();TZ0();zG();LZ0();IZ0();BZ0();EZ0();_Z0();kZ0();xZ0();fZ0();gZ0()});class gA{vm;common;depositoryAddress=null;deployerPrivKey;deployerAddress;nonce=0n;depositoryArtifact=null;initialized=!1;constructor(){this.deployerPrivKey=PX("0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80"),this.deployerAddress=AZ0(this.deployerPrivKey)}async init(){if(this.initialized){console.log("[BrowserVM] Already initialized, skipping");return}let $=await fetch("/contracts/Depository.json");if(!$.ok)throw new Error(`Failed to load Depository artifact: ${$.status}`);this.depositoryArtifact=await $.json(),console.log("[BrowserVM] Initializing..."),this.vm=await CA({evmOpts:{allowUnlimitedContractSize:!0}}),this.common=this.vm.common,console.log("[BrowserVM] Unlimited contract size enabled for simnet");let Q=PZ0({nonce:0n,balance:10000000000000000000000n});await this.vm.stateManager.putAccount(this.deployerAddress,Q),console.log(`[BrowserVM] Deployer funded: ${this.deployerAddress.toString()}`),await this.deployDepository(),this.initialized=!0,console.log("[BrowserVM] Initialization complete")}async deployDepository(){console.log("[BrowserVM] Deploying Depository..."),console.log("[BrowserVM] Bytecode length:",this.depositoryArtifact.bytecode?.length||0);let $=await this.getCurrentNonce(),Q=y6({gasLimit:100000000n,gasPrice:10n,data:this.depositoryArtifact.bytecode,nonce:$},{common:this.common}).sign(this.deployerPrivKey),X=await KD(this.vm,{tx:Q});if(X.execResult.exceptionError)throw console.error("[BrowserVM] Deployment exception:",X.execResult.exceptionError),console.error("[BrowserVM] Result:",JSON.stringify({gasUsed:X.totalGasSpent?.toString(),returnValue:X.execResult.returnValue?.length,logs:X.execResult.logs?.length})),new Error(`Deployment failed: ${X.execResult.exceptionError}`);if(this.depositoryAddress=X.createdAddress,console.log(`[BrowserVM] Deployed at: ${this.depositoryAddress.toString()}`),console.log(`[BrowserVM] Gas used: ${X.totalGasSpent}`),(await this.vm.stateManager.getCode(this.depositoryAddress)).length===0)throw new Error("Contract deployment failed - no code at address")}async getReserves($,Q){if(!this.depositoryAddress)throw new Error("Depository not deployed");let X="0xacd6f208",Y=$.startsWith("0x")?$.slice(2).padStart(64,"0"):$.padStart(64,"0"),Z=Q.toString(16).padStart(64,"0"),J=X+Y+Z,q=await this.vm.evm.runCall({to:this.depositoryAddress,caller:this.deployerAddress,data:PX(J),gasLimit:100000n});if(q.execResult.exceptionError)return console.error("[BrowserVM] getReserves failed:",q.execResult.exceptionError),0n;let G=q.execResult.returnValue;if(!G||G.length===0)return 0n;return BigInt(JG(G))}async getTokensLength(){if(!this.depositoryAddress)throw new Error("Depository not deployed");let $="0xb0c26ecf",Q=await this.vm.evm.runCall({to:this.depositoryAddress,caller:this.deployerAddress,data:PX($),gasLimit:100000n});if(Q.execResult.exceptionError)return console.error("[BrowserVM] getTokensLength failed:",Q.execResult.exceptionError),0;let X=Q.execResult.returnValue;if(X.length===0)return 0;return Number(BigInt(JG(X)))}async getCurrentNonce(){return(await this.vm.stateManager.getAccount(this.deployerAddress))?.nonce||0n}async debugFundReserves($,Q,X){if(!this.depositoryAddress)throw new Error("Depository not deployed");let Y="0x5ffefe5b",Z=$.startsWith("0x")?$.slice(2).padStart(64,"0"):$.padStart(64,"0"),J=Q.toString(16).padStart(64,"0"),q=X.toString(16).padStart(64,"0"),G=Y+Z+J+q,z=await this.getCurrentNonce(),M=y6({to:this.depositoryAddress,gasLimit:1000000n,gasPrice:10n,data:PX(G),nonce:z},{common:this.common}).sign(this.deployerPrivKey),j=await KD(this.vm,{tx:M});if(j.execResult.exceptionError)throw new Error(`debugFundReserves failed: ${j.execResult.exceptionError}`);console.log(`[BrowserVM] Funded ${$.slice(0,10)}... with ${X} of token ${Q}`)}async reserveToReserve($,Q,X,Y){if(!this.depositoryAddress)throw new Error("Depository not deployed");let Z="0x3925cd44",J=$.startsWith("0x")?$.slice(2).padStart(64,"0"):$.padStart(64,"0"),q=Q.startsWith("0x")?Q.slice(2).padStart(64,"0"):Q.padStart(64,"0"),G=X.toString(16).padStart(64,"0"),z=Y.toString(16).padStart(64,"0"),M=Z+J+q+G+z,j=await this.getCurrentNonce(),P=y6({to:this.depositoryAddress,gasLimit:1000000n,gasPrice:10n,data:PX(M),nonce:j},{common:this.common}).sign(this.deployerPrivKey),D=await KD(this.vm,{tx:P});if(D.execResult.exceptionError)throw new Error(`reserveToReserve failed: ${D.execResult.exceptionError}`);console.log(`[BrowserVM] Transferred ${Y} from ${$.slice(0,10)}... to ${Q.slice(0,10)}...`)}getDepositoryAddress(){return this.depositoryAddress?.toString()||"0x0"}}var cK$;var bZ0=y(()=>{nX0();FN();yZ0();cK$=new gA});var mZ0={};r8(mZ0,{BrowserVMEVM:()=>hZ0});class hZ0{type="browservm";provider;constructor(){this.provider=new gA}async init(){await this.provider.init()}async deployContract($,Q){throw new Error("Custom contract deployment not yet implemented")}async call($,Q,X){throw new Error("call() not yet implemented")}async send($,Q,X){return await this.provider.executeTx({to:$,data:Q,gasLimit:1000000n})}async getBlock(){return 0}async getBalance($){throw new Error("getBalance() not yet implemented")}async serialize(){return{name:"unknown",version:"1.0.0",created:Date.now(),evmType:"browservm",blockTimeMs:1000,jMachine:{position:{x:0,y:100,z:0},capacity:3,jHeight:0},contracts:{entityProviderAddress:"0x0000000000000000000000000000000000000000",depositoryAddress:this.provider.getDepositoryAddress()},evmState:{vmState:null},entities:[]}}getEntityProviderAddress(){return"0x0000000000000000000000000000000000000000"}getDepositoryAddress(){return this.provider.getDepositoryAddress()}}var cZ0=y(()=>{bZ0()});var lZ0={};r8(lZ0,{RPCEVM:()=>pZ0});class pZ0{type="rpc";rpcUrl;constructor($){this.rpcUrl=$}async deployContract($,Q){throw new Error("RPC backend not yet implemented")}async call($,Q,X){throw new Error("RPC backend not yet implemented")}async send($,Q,X){throw new Error("RPC backend not yet implemented")}async getBlock(){throw new Error("RPC backend not yet implemented")}async getBalance($){throw new Error("RPC backend not yet implemented")}async serialize(){return{name:"unknown",version:"1.0.0",created:Date.now(),evmType:"reth",blockTimeMs:1000,jMachine:{position:{x:0,y:100,z:0},capacity:3,jHeight:0},contracts:{entityProviderAddress:"0x0",depositoryAddress:"0x0"},evmState:{rpcUrl:this.rpcUrl},entities:[]}}getEntityProviderAddress(){throw new Error("RPC backend not yet initialized")}getDepositoryAddress(){throw new Error("RPC backend not yet initialized")}}var dZ0={};r8(dZ0,{saveXlnomy:()=>yA0,loadXlnomy:()=>bA0,importXlnomy:()=>gA0,exportXlnomy:()=>vA0,createXlnomy:()=>kA0});async function kA0($){let{name:Q,evmType:X,rpcUrl:Y,blockTimeMs:Z=1000,autoGrid:J=!1,env:q}=$;console.log(`[Xlnomy] Creating "${Q}" (${X}, ${Z}ms blocks)...`);let G=await uZ0(X,Y),z=await xA0(G),M=q?.xlnomies?q.xlnomies.size:0,j=8,P=200,D=M*2*Math.PI/j,A={x:Math.round(P*Math.cos(D)),y:100,z:Math.round(P*Math.sin(D))};console.log(`[Xlnomy] "${Q}" J-Machine position (slot ${M}/${j}):`,A);let H={name:Q,evmType:X,blockTimeMs:Z,jMachine:{position:A,capacity:3,jHeight:0,mempool:[]},contracts:z,evm:G,entities:[],created:Date.now(),version:"1.0.0"};if(J&&q)await fA0(H,q);return console.log(`[Xlnomy]  "${Q}" created with ${H.entities.length} entities queued`),H}async function uZ0($,Q){if($==="browservm"){let{BrowserVMEVM:X}=await Promise.resolve().then(() => (cZ0(),mZ0)),Y=new X;return await Y.init(),Y}else{let{RPCEVM:X}=await Promise.resolve().then(() => lZ0);if(!Q)throw new Error("RPC EVM requires rpcUrl");return new X(Q)}}async function xA0($){console.log("[Xlnomy] Getting deployed contracts...");let Q=$.getEntityProviderAddress(),X=$.getDepositoryAddress();return console.log(`[Xlnomy] EntityProvider: ${Q}`),console.log(`[Xlnomy] Depository: ${X}`),{entityProviderAddress:Q,depositoryAddress:X}}async function fA0($,Q){console.log("[Xlnomy] Creating 2x2x2 grid with $1M reserves...");let{generateNumberedEntityId:X}=await Promise.resolve().then(() => (NJ(),dP)),Y=$.jMachine.position,Z=[],J=[],q=Q?.xlnomies?Q.xlnomies.size:0,G=q*8+1;console.log(`[Xlnomy] "${$.name}" (index ${q})  Entity IDs ${G}-${G+7}`);for(let z=0;z<8;z++){let M=G+z,j=X(M);Z.push(j);let P=z%2*50-25,D=Math.floor(z/2)%2*50-25,A=Math.floor(z/4)*50-25,I=Y.x+P,H=Y.y+D-100,C=Y.z+A,B=`${$.name.toLowerCase()}_e${z}`,S={type:"importReplica",entityId:j,signerId:B,data:{config:{mode:"proposer-based",threshold:1n,validators:[B],shares:{[B]:1n}},isProposer:!0,position:{x:I,y:H,z:C}}};J.push(S)}if($.entities=Z,Q)Q.runtimeInput.runtimeTxs.push(...J);console.log(`[Xlnomy]  Grid queued: ${Z.length} entities at positions`)}async function vA0($){let Q=await $.evm.serialize();return JSON.stringify(Q,(X,Y)=>typeof Y==="bigint"?`BigInt(${Y.toString()})`:Y,2)}async function gA0($){let Q=JSON.parse($,(Y,Z)=>{if(typeof Z==="string"&&Z.startsWith("BigInt("))return BigInt(Z.slice(7,-1));return Z}),X=await uZ0(Q.evmType,Q.evmState.rpcUrl);return{name:Q.name,evmType:Q.evmType,blockTimeMs:Q.blockTimeMs,jMachine:Q.jMachine,contracts:Q.contracts,evm:X,entities:Q.entities,created:Q.created,version:Q.version}}async function yA0($){let Q=await $.evm.serialize();console.log(`[Xlnomy] Saved "${$.name}" to storage`)}async function bA0($){return console.log(`[Xlnomy] Loaded "${$}" from storage`),null}var RJ={};r8(RJ,{validateDelta:()=>z7,validateAccountDeltas:()=>im,transferNameBetweenEntities:()=>Ww,submitSettle:()=>TV,submitReserveToReserve:()=>Mw,submitProcessBatch:()=>qw,submitPrefundAccount:()=>Jw,setBrowserVMJurisdiction:()=>Ow,searchEntityNames:()=>tA0,saveEnvToDB:()=>rZ0,safeStringify:()=>k$,runDemoWrapper:()=>rA0,runDemo:()=>OH,resolveEntityName:()=>eA0,resolveEntityIdentifier:()=>Nw,requestNamedEntity:()=>Hw,registerNumberedEntityOnChain:()=>Gw,registerEnvChangeCallback:()=>mA0,process:()=>wz,prepopulate:()=>ic,parseTokenAmount:()=>tm,parseScenario:()=>dV,mergeAndSortEvents:()=>jH,main:()=>nZ0,loadScenarioFromText:()=>ec,loadScenarioFromFile:()=>tc,loadEnvFromDB:()=>sA0,isLeft:()=>K7,isEntityRegistered:()=>Aw,isDelta:()=>om,hashBoard:()=>b5,getTokenInfo:()=>I9,getSnapshot:()=>lA0,getSignerDisplayInfo:()=>pw,getNextEntityNumber:()=>Uw,getJurisdictionByAddress:()=>pU,getJWatcherStatus:()=>iA0,getHistory:()=>pA0,getEntityShortId:()=>oD,getEntityNumber:()=>kf,getEntityInfoFromChain:()=>Kw,getEntityDisplayInfoFromProfile:()=>$R0,getEntityDisplayInfo:()=>cw,getDefaultCreditLimit:()=>BX,getCurrentHistoryIndex:()=>uA0,getAvailableJurisdictions:()=>y5,generateSignerAvatar:()=>xV,generateNumberedEntityId:()=>tZ,generateNamedEntityId:()=>Dw,generateLazyEntityId:()=>uP,generateEntityAvatar:()=>q7,formatTokenAmountEthers:()=>yV,formatTokenAmount:()=>yV,formatSignerDisplay:()=>G7,formatEntityId:()=>AQ,formatEntityDisplay:()=>o$,formatAssetAmountEthers:()=>nw,executeScenario:()=>sc,encodeBoard:()=>jz,encode:()=>IG,detectEntityType:()=>Pz,deriveDelta:()=>Lz,demoCompleteHanko:()=>oA0,decode:()=>FG,debugFundReserves:()=>Zw,db:()=>XX,createProfileUpdateTx:()=>mm,createNumberedEntity:()=>Nz,createNumberedEntitiesBatch:()=>Pw,createLazyEntity:()=>jw,createEmptyEnv:()=>oZ0,createDemoDelta:()=>hV,createDefaultDelta:()=>nm,convertTokenPrecision:()=>em,connectToEthereum:()=>SY,clearDatabaseAndHistory:()=>dA0,clearDatabase:()=>GH,clearDB:()=>aA0,calculatePercentageEthers:()=>UH,assignNameOnChain:()=>zw,applyRuntimeInput:()=>F9,FINANCIAL_CONSTANTS:()=>Qc,BigIntMath:()=>$c});async function hA0($,Q){return Promise.race([$,new Promise((X,Y)=>setTimeout(()=>Y(new Error("TIMEOUT")),Q))])}async function yA(){if(!hk)hk=(async()=>{try{return await XX.open(),console.log(" Database opened"),!0}catch($){if($ instanceof Error&&($.message?.includes("blocked")||$.name==="SecurityError"||$.name==="InvalidStateError"))return console.log(" IndexedDB blocked (incognito/private mode) - running in-memory"),!1;return console.warn(" DB open warning:",$ instanceof Error?$.message:$),!0}})();return hk}var XX,hk=null,ck=null,$Q,pk=null,mA0=($)=>{ck=$},iZ0=($)=>{if(ck)ck($)},cA0=async($)=>{try{let Q=await pU("arrakis");if(!Q){console.warn(" Arrakis jurisdiction not found, skipping j-watcher");return}pk=await hc($,Q.address,Q.entityProviderAddress,Q.depositoryAddress),console.log(" J-Event Watcher started successfully"),console.log(`\uD83D\uDD2D Monitoring: ${Q.address}`),console.log(`\uD83D\uDCCD EntityProvider: ${Q.entityProviderAddress}`),console.log(`\uD83D\uDCCD Depository: ${Q.depositoryAddress}`),setInterval(async()=>{if($.runtimeInput.entityInputs.length>0)await F9($,{runtimeTxs:[],entityInputs:[...$.runtimeInput.entityInputs]}),$.runtimeInput.entityInputs.length=0},100)}catch(Q){t0("RUNTIME_TICK"," Failed to start J-Event Watcher:",Q)}},F9=async($,Q)=>{let X=Date.now();try{if(!Q)return O$.error(" Null runtime input provided"),{entityOutbox:[],mergedInputs:[]};if(!Array.isArray(Q.runtimeTxs))return O$.error(` Invalid runtimeTxs: expected array, got ${typeof Q.runtimeTxs}`),{entityOutbox:[],mergedInputs:[]};if(!Array.isArray(Q.entityInputs))return O$.error(` Invalid entityInputs: expected array, got ${typeof Q.entityInputs}`),{entityOutbox:[],mergedInputs:[]};if(Q.runtimeTxs.length>1000)return O$.error(` Too many runtime transactions: ${Q.runtimeTxs.length} > 1000`),{entityOutbox:[],mergedInputs:[]};if(Q.entityInputs.length>1e4)return O$.error(` Too many entity inputs: ${Q.entityInputs.length} > 10000`),{entityOutbox:[],mergedInputs:[]};$.runtimeInput.runtimeTxs.push(...Q.runtimeTxs),$.runtimeInput.entityInputs.push(...Q.entityInputs);let Y=gc($.runtimeInput.entityInputs);Y.forEach((P,D)=>{try{dw(P)}catch(A){throw t0("RUNTIME_TICK",`\uD83D\uDEA8 CRITICAL FINANCIAL ERROR: Invalid merged EntityInput[${D}]!`,{error:A.message,input:P}),A}});let Z=[];for(let P of $.runtimeInput.runtimeTxs)if(P.type==="createXlnomy"){console.log(`[Runtime] Creating Xlnomy "${P.data.name}"...`);try{let{createXlnomy:D}=await Promise.resolve().then(() => dZ0),A=await D({name:P.data.name,evmType:P.data.evmType,rpcUrl:P.data.rpcUrl,blockTimeMs:P.data.blockTimeMs,autoGrid:P.data.autoGrid,env:$});if(!$.xlnomies)$.xlnomies=new Map;if($.xlnomies.set(A.name,A),!$.activeXlnomy)$.activeXlnomy=A.name;console.log(`[Runtime]  Xlnomy "${A.name}" created`),console.log(`[Runtime] Grid entities queued in runtimeInput: ${$.runtimeInput.runtimeTxs.length} txs`),console.log(`[Runtime] Active Xlnomy: ${$.activeXlnomy}`)}catch(D){console.error("[Runtime]  Failed to create Xlnomy:",D)}}else if(P.type==="importReplica"){if(s0)console.log(`Importing replica Entity #${o$(P.entityId)}:${G7(P.signerId)} (proposer: ${P.data.isProposer})`);let D=`${P.entityId}:${P.signerId}`,A={entityId:P.entityId,signerId:P.signerId,mempool:[],isProposer:P.data.isProposer,state:{entityId:P.entityId,height:0,timestamp:$.timestamp,nonces:new Map,messages:[],proposals:new Map,config:P.data.config,reserves:new Map,accounts:new Map,jBlock:0,crontabState:void 0,jBatchState:void 0}};if(P.data.position)A.position=P.data.position;$.replicas.set(D,A);let I=$.replicas.get(D),H=I?.state.jBlock;if($.gossip&&I){let C={entityId:P.entityId,capabilities:[],hubs:[],metadata:{lastUpdated:Date.now(),routingFeePPM:100,baseFee:0n},accounts:[]};$.gossip.announce(C)}if(typeof H!=="number"){if(t0("RUNTIME_TICK","\uD83D\uDCA5 ENTITY-CREATION-BUG: Just created entity with invalid jBlock!"),t0("RUNTIME_TICK",`\uD83D\uDCA5   Expected: 0 (number), Got: ${typeof H}, Value: ${H}`),I)I.state.jBlock=0,console.log(`\uD83D\uDCA5   FIXED: Set jBlock to 0 for replica ${D}`)}}for(let P of Y){let D=P.signerId;if(!D||D===""){if(P.entityTxs.some((C)=>C.type==="accountInput")){let C=Array.from($.replicas.keys()).filter((B)=>B.startsWith(P.entityId+":"));if(C.length>0){let B=C[0];if(!B){t0("RUNTIME_TICK",` Invalid replica key for entity ${P.entityId}`);continue}let S=$.replicas.get(B);if(S?.state.config.validators[0])D=S.state.config.validators[0]}}if(!D||D===""){console.warn(` No signerId and unable to determine proposer for entity ${P.entityId.slice(0,10)}...`);continue}}let A=`${P.entityId}:${D}`,I=$.replicas.get(A);if(I){if(s0){if(console.log(`Processing input for ${A}:`),P.entityTxs.length)console.log(`   ${P.entityTxs.length} transactions`);if(P.proposedFrame)console.log(`   Proposed frame: ${P.proposedFrame.hash}`);if(P.precommits?.size)console.log(`   ${P.precommits.size} precommits`)}let{newState:H,outputs:C}=await vc($,I,P);$.replicas.set(A,{...I,state:H}),C.forEach((B,S)=>{try{rm(B)}catch(_){throw t0("RUNTIME_TICK",`\uD83D\uDEA8 CRITICAL FINANCIAL ERROR: Invalid EntityOutput[${S}] from ${A}!`,{error:_.message,output:B}),_}}),Z.push(...C)}}let J=$.runtimeInput.runtimeTxs.length>0,q=Y.length>0,G=Z.length>0;if(J||q||G){$.height++,$.timestamp=Date.now();let P=`Tick ${$.height-1}: ${$.runtimeInput.runtimeTxs.length} runtimeTxs, ${Y.length} merged entityInputs  ${Z.length} outputs`,D={runtimeTxs:[...$.runtimeInput.runtimeTxs],entityInputs:[...Y]};$.runtimeInput.runtimeTxs.length=0,$.runtimeInput.entityInputs.length=0,await Zc($,$.history,XX,D,Z,P)}else console.log(" SKIP-FRAME: No runtimeTxs, entityInputs, or outputs - not creating empty frame");if(!$.gossip)console.log("\uD83D\uDEA8 CRITICAL: gossip layer missing from environment, creating new one"),$.gossip=X6(),console.log(" Gossip layer created and added to environment");let z=Array.from($.replicas.keys()).filter((P)=>P.startsWith("0x0000000000000000000000000000000000000000000000000000000000000001:")||P.startsWith("0x0000000000000000000000000000000000000000000000000000000000000002:")),M=Array.from($.replicas.keys()).filter((P)=>!P.startsWith("0x0000000000000000000000000000000000000000000000000000000000000001:")&&!P.startsWith("0x0000000000000000000000000000000000000000000000000000000000000002:")&&!P.startsWith("0x57e360b00f393ea6d898d6119f71db49241be80aec0fbdecf6358b0103d43a31:"));if(z.length>0&&M.length>0){let P=z[0],D=M[0];if(!P||!D)t0("RUNTIME_TICK",` Invalid replica keys: old=${P}, new=${D}`)}if(iZ0($),s0&&Z.length>0)console.log(`\uD83D\uDCE4 Outputs: ${Z.length} messages`),Z.forEach((P,D)=>{console.log(`  ${D+1}.  ${P.signerId} (${P.entityTxs?`${P.entityTxs.length} txs`:""}${P.proposedFrame?` proposal: ${P.proposedFrame.hash.slice(0,10)}...`:""}${P.precommits?` ${P.precommits.size} precommits`:""})`)});else if(s0&&Z.length===0)console.log("\uD83D\uDCE4 No outputs generated");iZ0($);let j=Date.now();if(s0)console.log(`  Tick ${$.height-1} completed in ${j-X}ms`);return{entityOutbox:Z,mergedInputs:Y}}catch(Y){return O$.error(" Error processing runtime input:",Y),{entityOutbox:[],mergedInputs:[]}}},nZ0=async()=>{console.log("\uD83D\uDE80 RUNTIME.JS VERSION: 2025-10-05-16:45 - GRID POSITIONS + ACTIVITY HIGHLIGHTS");let $=await yA();if(!U8)try{let{loadJurisdictions:X}=await Promise.resolve().then(() => (Xw(),yh)),Y=X();console.log("\uD83D\uDD0D STARTUP: Current jurisdictions content (from centralized loader):"),console.log("\uD83D\uDCCD Arrakis Depository:",Y.jurisdictions.arrakis?.contracts?.depository),console.log("\uD83D\uDCCD Arrakis EntityProvider:",Y.jurisdictions.arrakis?.contracts?.entityProvider),console.log("\uD83D\uDCCD Last updated:",Y.lastUpdated),console.log("\uD83D\uDCCD Full Arrakis config:",k$(Y.jurisdictions.arrakis))}catch(X){console.log(" Failed to load jurisdictions:",X.message)}console.log("\uD83D\uDD78 Initializing gossip layer...");let Q=X6();console.log(" Gossip layer initialized"),console.log("\uD83D\uDCE1 Loading persisted profiles from database..."),await yc(XX,Q),$Q={replicas:new Map,height:0,timestamp:Date.now(),runtimeInput:{runtimeTxs:[],entityInputs:[]},history:[],gossip:Q};try{if(!$)throw console.log("\uD83D\uDCBE Database unavailable - starting fresh"),new Error("DB_UNAVAILABLE");console.log("\uD83D\uDCE5 Loading state from database...");let X=await hA0(XX.get(Buffer.from("latest_height")),2000),Y=parseInt(X.toString(),10);console.log(`\uD83D\uDCCA BROWSER-DEBUG: Found latest height in DB: ${Y}`),console.log(`\uD83D\uDCCA Found latest height: ${Y}, loading ${Y+1} snapshots...`),console.log(`\uD83D\uDCE5 Loading snapshots: 1 to ${Y}...`);let Z=[];for(let J=1;J<=Y;J++)try{let q=await XX.get(Buffer.from(`snapshot:${J}`)),G=FG(q);Z.push(G),console.log(`\uD83D\uDCE6 Snapshot ${J}: loaded ${q.length} bytes`)}catch(q){t0("RUNTIME_TICK",` Failed to load snapshot ${J}:`,q),console.warn(` Snapshot ${J} missing, continuing with available data...`)}if(Z.length===0)throw console.log(`\uD83D\uDCE6 No snapshots found (latestHeight: ${Y}), using fresh environment`),new Error("LEVEL_NOT_FOUND");if(console.log(`\uD83D\uDCCA Successfully loaded ${Z.length}/${Y} snapshots (starting from height 1)`),$Q.history=Z,Z.length>0){let J=Z[Z.length-1];if(!J.replicas)throw console.warn(" Latest snapshot missing replicas data, using fresh environment"),new Error("LEVEL_NOT_FOUND");let q=X6();if(J.gossip?.profiles){for(let[z,M]of Object.entries(J.gossip.profiles))q.profiles.set(z,M);console.log(`\uD83D\uDCE1 Restored gossip profiles: ${Object.keys(J.gossip.profiles).length} entries`)}let G;try{if(J.replicas instanceof Map)G=J.replicas;else if(J.replicas&&typeof J.replicas==="object")G=new Map(Object.entries(J.replicas));else throw console.warn(" Invalid replicas format in snapshot, using fresh environment"),new Error("LEVEL_NOT_FOUND")}catch(z){throw t0("RUNTIME_TICK"," Failed to convert replicas to Map:",z),console.warn(" Falling back to fresh environment"),new Error("LEVEL_NOT_FOUND")}$Q={replicas:new Map(Array.from(G).map(([z,M])=>{return[z,cV(M)]})),height:J.height,timestamp:J.timestamp,runtimeInput:{runtimeTxs:[],entityInputs:[]},history:Z,gossip:q},console.log(` History restored. Runtime is at height ${$Q.height} with ${$Q.history.length} snapshots.`),console.log("\uD83D\uDCC8 Snapshot details:",{height:$Q.height,replicaCount:$Q.replicas.size,timestamp:new Date($Q.timestamp).toISOString(),runtimeInputs:$Q.runtimeInput.entityInputs.length})}}catch(X){let Y=X instanceof Error&&X.message==="TIMEOUT",Z=X instanceof Error&&(X.name==="NotFoundError"||X.message?.includes("NotFoundError")||X.message?.includes("Entry not found"));if(Y||Z)console.log("\uD83D\uDCE6 No saved state found - starting fresh");else if(X instanceof Error&&X.message==="DB_UNAVAILABLE");else console.warn(" Error loading state:",X instanceof Error?X.message:X),console.log("\uD83D\uDCE6 Starting fresh")}if(!U8)console.log(`
\uD83D\uDE80 Hanko tests disabled during development - focusing on core functionality`);else console.log("\uD83C\uDF10 Browser environment: Demos available via UI buttons, not auto-running");if(O$.info(`\uD83C\uDFAF Runtime startup complete. Height: ${$Q.height}, Entities: ${$Q.replicas.size}`),U8){console.log("\uD83D\uDD0D BROWSER-DEBUG: Final state before j-watcher start:"),console.log(`\uD83D\uDD0D   Environment height: ${$Q.height}`),console.log(`\uD83D\uDD0D   Total replicas: ${$Q.replicas.size}`);for(let[X,Y]of $Q.replicas.entries()){let[Z,J]=X.split(":");if(Z&&J)console.log(`\uD83D\uDD0D   Entity ${Z.slice(0,10)}... (${J}): jBlock=${Y.state.jBlock}, isProposer=${Y.isProposer}`)}}return console.log("\uD83D\uDD2D J-WATCHER: Disabled (external RPC not needed for simnet demo)"),$Q},pA0=()=>$Q.history||[],lA0=($)=>{let Q=$Q.history||[];return $>=0&&$<Q.length?Q[$]:null},uA0=()=>($Q.history||[]).length-1,dA0=async()=>{console.log("\uD83D\uDDD1 Clearing database and resetting runtime history..."),await GH(XX),$Q={replicas:new Map,height:0,timestamp:Date.now(),runtimeInput:{runtimeTxs:[],entityInputs:[]},history:[],gossip:X6()},console.log(" Database and runtime history cleared")},iA0=()=>{if(!pk||!$Q)return null;return{isWatching:pk.getStatus().isWatching,proposers:Array.from($Q.replicas.entries()).filter(([,$])=>$.isProposer).map(([$,Q])=>{let[X,Y]=$.split(":");if(!X||!Y)throw new Error(`Invalid replica key format: ${$}`);return{entityId:X.slice(0,10)+"...",signerId:Y,jBlock:Q.state.jBlock}}),nextSyncIn:Math.floor((1000-Date.now()%1000)/100)/10}},nA0=async()=>{console.log(`
\uD83D\uDD0D === JURISDICTION VERIFICATION ===`),console.log(`\uD83D\uDCCB Verifying entity registrations across all jurisdictions...
`);let $=await y5();for(let Q of $)try{console.log(`\uD83C\uDFDB ${Q.name}:`),console.log(`   \uD83D\uDCE1 RPC: ${Q.address}`),console.log(`   \uD83D\uDCC4 Contract: ${Q.entityProviderAddress}`);let{entityProvider:X}=await SY(Q),Y=await X.nextNumber(),Z=Number(Y)-1;if(console.log(`   \uD83D\uDCCA Registered Entities: ${Z}`),Z>0){console.log("   \uD83D\uDCDD Entity Details:");for(let J=1;J<=Z;J++)try{let q=tZ(J),G=await X.entities(q);console.log(`      #${J}: ${q.slice(0,10)}... (Block: ${G.registrationBlock})`)}catch(q){console.log(`      #${J}: Error reading entity data`)}}console.log("")}catch(X){t0("RUNTIME_TICK",`    Failed to verify ${Q.name}:`,X instanceof Error?X.message:X),console.log("")}console.log(` Jurisdiction verification complete!
`)},oA0=async()=>{try{if(typeof window!=="undefined"){console.log("\uD83C\uDFAF Browser environment detected - running simplified Hanko demo..."),console.log(" Basic signature verification available"),console.log("\uD83D\uDCA1 Full test suite available in Node.js environment"),console.log(" Hanko browser demo completed!");return}console.log("\uD83C\uDFAF Complete Hanko test suite disabled during strict TypeScript mode"),console.log(" Complete Hanko tests skipped!")}catch($){throw t0("RUNTIME_TICK"," Complete Hanko tests failed:",$),$}},rA0=async($)=>{try{console.log("\uD83D\uDE80 Starting XLN Consensus Demo..."),console.log("\uD83D\uDCCA This will demonstrate entity creation, consensus, and message passing");let Q=await OH($);return console.log(" XLN Demo completed successfully!"),console.log("\uD83C\uDFAF Check the entity cards above to see the results"),console.log("\uD83D\uDD70 Use the time machine to replay the consensus steps"),Q}catch(Q){throw t0("RUNTIME_TICK"," XLN Demo failed:",Q),Q}},oZ0=()=>{return{replicas:new Map,height:0,timestamp:Date.now(),runtimeInput:{runtimeTxs:[],entityInputs:[]},history:[],gossip:X6()}},mk=!1,wz=async($,Q,X=0)=>{if(mk)return console.warn(" SKIP-CASCADE: Previous cascade still running"),$;mk=!0;let Y=Q||[],Z=0,J=10,q=(G)=>new Promise((z)=>setTimeout(z,G));Y.forEach((G)=>{try{dw(G)}catch(z){throw t0("RUNTIME_TICK","\uD83D\uDEA8 CRITICAL FINANCIAL ERROR: Invalid EntityInput detected!",{error:z.message,entityId:G.entityId.slice(0,10),signerId:G.signerId}),z}}),Y.forEach((G,z)=>{if(G.entityTxs?.some((M)=>M.type==="vote"))console.log(`\uD83D\uDDF3 VOTE-DEBUG: Input ${z+1} contains vote transactions:`,G.entityTxs.filter((M)=>M.type==="vote"))});try{while(Y.length>0&&Z<J){if(Z++,Y=(await F9($,{runtimeTxs:[],entityInputs:Y})).entityOutbox,Y.length>0)console.log(`\uD83D\uDD25 PROCESS-CASCADE: Iteration ${Z}, ${Y.length} outputs`);if(Y.length>0&&X>0)console.log(` CASCADE-DELAY: Waiting ${X}ms before next iteration...`),await q(X)}if(Z>=J)console.warn(" process() reached maximum iterations");return await rZ0($),$}finally{mk=!1}},rZ0=async($)=>{if(!U8)return;try{if(!await yA())return;await XX.put(Buffer.from("latest_height"),Buffer.from(String($.height)));let X=JSON.stringify($,(Y,Z)=>{if(Y==="xlnomies")return;return typeof Z==="bigint"?String(Z):Z instanceof Uint8Array?Array.from(Z):Z instanceof Map?Array.from(Z.entries()):Z});await XX.put(Buffer.from(`snapshot:${$.height}`),Buffer.from(X))}catch(Q){console.error(" Failed to save to LevelDB:",Q)}},sA0=async()=>{if(!U8)return null;try{if(!await yA())return null;let Q=await XX.get(Buffer.from("latest_height")),X=parseInt(Q.toString()),Y=[];for(let J=0;J<=X;J++){let q=await XX.get(Buffer.from(`snapshot:${J}`)),G=JSON.parse(q.toString()),z=oZ0();if(z.height=BigInt(G.height||0),z.timestamp=BigInt(G.timestamp||0),z.replicas=new Map(G.replicas||[]),G.gossip?.profiles)z.gossip.profiles=new Map(G.gossip.profiles);Y.push(z)}let Z=Y[Y.length-1];if(Z)Z.history=Y;return Z}catch($){return console.log("No persisted state found"),null}},aA0=async()=>{if(!U8)return;try{if(!await yA())return;await XX.clear(),console.log(" LevelDB cleared")}catch($){console.error(" Failed to clear LevelDB:",$)}},tA0=($,Q)=>hm(XX,$,Q),eA0=($)=>pm(XX,$),$R0=($)=>lm(XX,$);var rY=y(()=>{_f();WT();NJ();HJ();mc();lw();cc();rD();$9();bV();l5();gV();tX();cU();nc();PH();ac();$p();XX=new gR("db",{valueEncoding:"buffer",keyEncoding:"binary"});if(!U8)nZ0().then(async($)=>{if($)if(!(globalThis.process.env.NO_DEMO==="1"||globalThis.process.argv.includes("--no-demo")))console.log(" Node.js environment initialized. Running demo for local testing..."),console.log("\uD83D\uDCA1 To skip demo, use: NO_DEMO=1 bun run src/runtime.ts or --no-demo flag"),await OH($),await cA0($),setTimeout(async()=>{await nA0()},2000);else console.log(" Node.js environment initialized. Demo skipped (NO_DEMO=1 or --no-demo)"),console.log("\uD83D\uDCA1 Use XLN.runDemo(env) to run demo manually if needed")}).catch(($)=>{t0("RUNTIME_TICK"," An error occurred during Node.js auto-execution:",$)})});rY();export{z7 as validateDelta,im as validateAccountDeltas,Ww as transferNameBetweenEntities,TV as submitSettle,Mw as submitReserveToReserve,qw as submitProcessBatch,Jw as submitPrefundAccount,Ow as setBrowserVMJurisdiction,tA0 as searchEntityNames,rZ0 as saveEnvToDB,k$ as safeStringify,rA0 as runDemoWrapper,OH as runDemo,eA0 as resolveEntityName,Nw as resolveEntityIdentifier,Hw as requestNamedEntity,Gw as registerNumberedEntityOnChain,mA0 as registerEnvChangeCallback,wz as process,ic as prepopulate,tm as parseTokenAmount,dV as parseScenario,jH as mergeAndSortEvents,nZ0 as main,ec as loadScenarioFromText,tc as loadScenarioFromFile,sA0 as loadEnvFromDB,K7 as isLeft,Aw as isEntityRegistered,om as isDelta,b5 as hashBoard,I9 as getTokenInfo,lA0 as getSnapshot,pw as getSignerDisplayInfo,Uw as getNextEntityNumber,pU as getJurisdictionByAddress,iA0 as getJWatcherStatus,pA0 as getHistory,oD as getEntityShortId,kf as getEntityNumber,Kw as getEntityInfoFromChain,$R0 as getEntityDisplayInfoFromProfile,cw as getEntityDisplayInfo,BX as getDefaultCreditLimit,uA0 as getCurrentHistoryIndex,y5 as getAvailableJurisdictions,xV as generateSignerAvatar,tZ as generateNumberedEntityId,Dw as generateNamedEntityId,uP as generateLazyEntityId,q7 as generateEntityAvatar,yV as formatTokenAmountEthers,yV as formatTokenAmount,G7 as formatSignerDisplay,AQ as formatEntityId,o$ as formatEntityDisplay,nw as formatAssetAmountEthers,sc as executeScenario,jz as encodeBoard,IG as encode,Pz as detectEntityType,Lz as deriveDelta,oA0 as demoCompleteHanko,FG as decode,Zw as debugFundReserves,XX as db,mm as createProfileUpdateTx,Nz as createNumberedEntity,Pw as createNumberedEntitiesBatch,jw as createLazyEntity,oZ0 as createEmptyEnv,hV as createDemoDelta,nm as createDefaultDelta,em as convertTokenPrecision,SY as connectToEthereum,dA0 as clearDatabaseAndHistory,GH as clearDatabase,aA0 as clearDB,UH as calculatePercentageEthers,zw as assignNameOnChain,F9 as applyRuntimeInput,Qc as FINANCIAL_CONSTANTS,$c as BigIntMath};
